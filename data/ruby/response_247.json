[{"tags": ["ruby-on-rails", "ruby", "console", "match"], "answers": [{"comments": [{"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1570060568, "post_id": 58210694, "comment_id": 102798770, "body": "As a side-note, you may wish to run through the official guides at <a href=\"https://guides.rubyonrails.org/getting_started.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/getting_started.html</a> as an easier and more up-to-date introduction to the features of the framework, and then build upon that knowledge to make a more complicated app."}, {"owner": {"reputation": 53, "user_id": 12150271, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qf5AHSer06k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd9MNS9aHim97wipOpXd_ftNy7QEA/photo.jpg?sz=128", "display_name": "Joshua Matthews", "link": "https://stackoverflow.com/users/12150271/joshua-matthews"}, "edited": false, "score": 0, "creation_date": 1570061667, "post_id": 58210694, "comment_id": 102798974, "body": "Hey thanks everything worked out just fine after doing that. Lol I had no idea. Results are a whole lot better thanks!"}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "reply_to_user": {"reputation": 53, "user_id": 12150271, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qf5AHSer06k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd9MNS9aHim97wipOpXd_ftNy7QEA/photo.jpg?sz=128", "display_name": "Joshua Matthews", "link": "https://stackoverflow.com/users/12150271/joshua-matthews"}, "edited": false, "score": 0, "creation_date": 1570062050, "post_id": 58210694, "comment_id": 102799044, "body": "Right on! I&#39;ve been seeing your questions come through today - let me assure you that getting it all set up the first time is probably the hardest part. Good luck!"}], "tags": [], "owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "is_accepted": true, "score": 1, "last_activity_date": 1570060241, "creation_date": 1570060241, "answer_id": 58210694, "question_id": 58210639, "link": "https://stackoverflow.com/questions/58210639/i-ran-rails-console-and-the-output-in-my-console-doesnt-match-the-console-out/58210694#58210694", "title": "I ran `Rails console` and the output in my console doesn&#39;t match the console output in a textbook Im reading", "body": "<p>You need to type the stuff after >> (the prompt). The things after ?> indicate a continuation, but can be done all in the same line as the >>. The stuff after the => is the output. So this means that after the console has loaded, you need to type:</p>\n\n<p><code>user = User.new(:screen_name =&gt; \"me\", :email =&gt; \"\", :password =&gt; \"a\")</code></p>\n\n<p>Which will create a new user, and output something like:</p>\n\n<p><code>#&lt;User:0xb76fadd0 @new_record=true, @attributes={\"screen_name\"=&gt;\"me\", \"password\"=&gt;\"a\", \"email\"=&gt;\"\"}&gt;</code></p>\n\n<p>Then, you should type:</p>\n\n<p><code>user.screen_name</code></p>\n\n<p>Etc...</p>\n\n<p>Do not be overly concerned if everything doesn't look <em>exactly</em> the same - different versions and platforms may have subtle differences.</p>\n"}], "owner": {"reputation": 53, "user_id": 12150271, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qf5AHSer06k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd9MNS9aHim97wipOpXd_ftNy7QEA/photo.jpg?sz=128", "display_name": "Joshua Matthews", "link": "https://stackoverflow.com/users/12150271/joshua-matthews"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 58210694, "answer_count": 1, "score": 0, "last_activity_date": 1570060241, "creation_date": 1570059781, "question_id": 58210639, "link": "https://stackoverflow.com/questions/58210639/i-ran-rails-console-and-the-output-in-my-console-doesnt-match-the-console-out", "title": "I ran `Rails console` and the output in my console doesn&#39;t match the console output in a textbook Im reading", "body": "<p>Im reading a textbook called: \"RailsSpace: Building a Social Networking website with Ruby on Rails\" by Michael Hartl. The book is available free for download, here is a link so you can follow along and maybe the book can help you investigate and find an answer to my question: <a href=\"https://pdfs.semanticscholar.org/ca98/3b5098cd5957dc1842bb4bf3175406624bca.pdf?_ga=2.121598472.1814901715.1569094472-1963651489.1569094472\" rel=\"nofollow noreferrer\">https://pdfs.semanticscholar.org/ca98/3b5098cd5957dc1842bb4bf3175406624bca.pdf?_ga=2.121598472.1814901715.1569094472-1963651489.1569094472</a>. start on page 75 under \"The Console\" section, and you can maybe read a litte bit before that to get a feel for what is going on. Anyhow, my problem is that, </p>\n\n<blockquote>\n  <p>when I run the code:</p>\n</blockquote>\n\n<p><code>rails server</code></p>\n\n<p>in my command prompt, </p>\n\n<blockquote>\n  <p>the output on my console shows this:</p>\n</blockquote>\n\n<p><code>Loading development environment (Rails 6.0.0)\nirb(main):001:0&gt;</code></p>\n\n<blockquote>\n  <p>And the console output in the textbook shows this:</p>\n</blockquote>\n\n<pre><code>`Loading development environment.\n&gt;&gt; user = User.new(:screen_name =&gt; \"me\",\n?&gt; :email =&gt; \"\",\n?&gt; :password =&gt; \"a\")\n=&gt; #&lt;User:0xb76fadd0 @new_record=true,\n@attributes={\"screen_name\"=&gt;\"me\", \"password\"=&gt;\"a\", \"email\"=&gt;\"\"}&gt;\n&gt;&gt; user.screen_name\n=&gt; \"me\"\n\n&gt;&gt; user.save\n=&gt; true`\n</code></pre>\n\n<p>Does anybody know why the console output in my command prompt doesn't match the console output in the textbook? I dont expect it to be exactly the same but at least closer than that. As you can see my screen hardly shows anything. The book is old, published around 2007, but its practically one of the only FREE sources out there for building a social media website, its pretty much all I have so I have to work with it. Can someone help me figure out how to get the console output in my command prompt to match the console output in the textbook. Again the console output for the textbook starts on page 75. Thank you guys so much I really apreciate it.</p>\n"}, {"tags": ["ruby", "jenkins", "cucumber", "watir"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3856922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77eab3ae8352b518594762691afc8ec7?s=128&d=identicon&r=PG", "display_name": "plainfaced", "link": "https://stackoverflow.com/users/3856922/plainfaced"}, "is_accepted": false, "score": 0, "last_activity_date": 1570075362, "creation_date": 1570075362, "answer_id": 58212139, "question_id": 58209951, "link": "https://stackoverflow.com/questions/58209951/running-cucumber-watir-tests-in-jenkins-from-multiple-feature-directories/58212139#58212139", "title": "Running Cucumber (WATIR) tests in Jenkins, from multiple Feature directories", "body": "<p>OK.. So I was making that way more complicated than it needed to be.</p>\n\n<p>I just needed to add a CD command in the Jenkins execute shell command</p>\n\n<p>eg</p>\n\n<pre><code>#!/bin/bash\nsource /home/jenkins/.rvm/bin/rvm \nrvm list\nmv gemfile Gemfile\nbundle install\ncd Site_1\nxvfb-run cucumber --format json -o cucumber.json\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 3856922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77eab3ae8352b518594762691afc8ec7?s=128&d=identicon&r=PG", "display_name": "plainfaced", "link": "https://stackoverflow.com/users/3856922/plainfaced"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570075443, "creation_date": 1570054078, "last_edit_date": 1570075443, "question_id": 58209951, "link": "https://stackoverflow.com/questions/58209951/running-cucumber-watir-tests-in-jenkins-from-multiple-feature-directories", "title": "Running Cucumber (WATIR) tests in Jenkins, from multiple Feature directories", "body": "<p>I am currently running Cucumber (WATIR) tests in Jenkins, with the standard directories structure running a set of features.</p>\n\n<p>The directory structure is as follows -</p>\n\n<pre><code>Features\n- Pages\n-- main.rb\n-- httparty_config.rb\n-- page1.rb\n-- page2.rb\n- Step Definitions\n-- page1_steps.rb\n-- page2_steps.rb\nfeature_one.feature\nfeature_two.feature\n</code></pre>\n\n<p>I am now implementing multiple sites, and am wanting to share the same main class (and other configs for HTTParty etc, but separate each of the sites, into their own cucumber sub-directory (for cleanliness purposes).. The following tests run in Rubymine with no issues.</p>\n\n<pre><code>Env\n- main.rb\n- httparty_config.rb\nSite_1\n    - Features\n    -- Pages\n    --- s1_page1.rb\n    --- s1_page2.rb\n    -- Step Definitions\n    --- s1_page1_steps.rb\n    --- s1_page2_steps.rb\n    - s1_feature_one.feature\n    - s1_feature_two.feature\nSite_2\n    - Features\n    -- Pages\n    --- s2_page1.rb\n    --- s2_page2.rb\n    -- Step Definitions\n    --- s2_page1_steps.rb\n    --- s2_page2_steps.rb\n    - s2_feature_one.feature\n    - s2_feature_two.feature\n</code></pre>\n\n<p>When attempting to run a feature test in Jenkins using this structure, Jenkins fails, as it does not meet the required Cucumber structures.. It cannot find the Feature folder.</p>\n\n<p>How can I keep the new multi-site structure and define the structure so that Jenkins knows where to find each feature, in the different directories?</p>\n"}, {"tags": ["ruby", "vim", "indentation"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1570062902, "post_id": 58209522, "comment_id": 102799203, "body": "@Anthony Maybe I misread the question. If it&#39;s currently indenting like the first example that&#39;s just plain broken, the second form is what most editors should do with a valid Ruby indenter."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1570087004, "post_id": 58209522, "comment_id": 102804605, "body": "The default indentation will make much more sense if you move <code>:live_store,</code> and <code>:shop_version,</code> to a new line."}], "answers": [{"tags": [], "owner": {"reputation": 474, "user_id": 717365, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/vWXSv.png?s=128&g=1", "display_name": "Blastula", "link": "https://stackoverflow.com/users/717365/blastula"}, "is_accepted": false, "score": 1, "last_activity_date": 1570127840, "creation_date": 1570127840, "answer_id": 58225081, "question_id": 58209522, "link": "https://stackoverflow.com/questions/58209522/vim-ruby-multi-line-method-indentation/58225081#58225081", "title": "Vim Ruby multi-line method indentation", "body": "<p>I have found a reasonable workaround. Vim will indent automatically the way I want if I use hash literals in the code. For example, typing the above example like this works fine:</p>\n\n<pre><code>let(:account) do\n  create :account,\n    store: build(:live_store, {\n      shop_version: build(:shop_version, {\n        name: \"Example\"\n      })\n    })\nend\n</code></pre>\n\n<p>This feels like a reasonable enough compromise.</p>\n"}, {"tags": [], "owner": {"reputation": 3687, "user_id": 853920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc59401781a26b10f5d4fc5b758fb3b7?s=128&d=identicon&r=PG", "display_name": "Andrew Radev", "link": "https://stackoverflow.com/users/853920/andrew-radev"}, "is_accepted": true, "score": 1, "last_activity_date": 1570127841, "creation_date": 1570127841, "answer_id": 58225082, "question_id": 58209522, "link": "https://stackoverflow.com/questions/58209522/vim-ruby-multi-line-method-indentation/58225082#58225082", "title": "Vim Ruby multi-line method indentation", "body": "<p>The reason that vim-ruby indents your example so deeply is to support this coding style:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>let(:account) do\n  create :account,\n    store: build(:live_store,\n                 shop_version: build(:shop_version,\n                                     name: \"Example\"))\nend\n</code></pre>\n\n<p>A lot of people like this \"hanging\" style, which is why it's how vim-ruby indents if you use round brackets with the first argument on the same line. You could, as @Amadan points out, put all the arguments on new lines:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>let(:account) do\n  create :account,\n    store: build(\n      :live_store,\n      shop_version: build(\n        :shop_version,\n        name: \"Example\"\n      )\n  )\nend\n</code></pre>\n\n<p>Alternatively, my preferred supported indentation style uses curly brackets:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>let(:account) do\n  create :account,\n    store: build(:live_store, {\n    shop_version: build(:shop_version, {\n      name: \"Example\"\n    })\n  })\nend\n</code></pre>\n\n<p>There's a lot of different combinations of indentation preferences and we're limited in how much variability we can support (I'm a maintainer) -- the code is old and full of edge cases. I'm afraid these three styles are basically it, and I hope you can tweak your coding style to reach a compromise. It might be that at some future point I sit down and try some radical changes, but it's a difficult project to find time and energy for.</p>\n"}], "owner": {"reputation": 474, "user_id": 717365, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/vWXSv.png?s=128&g=1", "display_name": "Blastula", "link": "https://stackoverflow.com/users/717365/blastula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 58225082, "answer_count": 2, "score": 0, "last_activity_date": 1570127841, "creation_date": 1570051237, "question_id": 58209522, "link": "https://stackoverflow.com/questions/58209522/vim-ruby-multi-line-method-indentation", "title": "Vim Ruby multi-line method indentation", "body": "<p>I take issue with the default line breaks I get from my vim setup. I think the only relevant plugin I'm using is vim-ruby.</p>\n\n<p>I want code that auto-indents like this:</p>\n\n<pre><code>let(:account) do\n  create :account,\n    store: build(:live_store,\n                 shop_version: build(:shop_version,\n                                      name: \"Example\"\n                                     )\n                )\nend\n</code></pre>\n\n<p>to instead auto-indent like this:</p>\n\n<pre><code>let(:account) do\n  create :account,\n    store: build(:live_store,\n      shop_version: build(:shop_version,\n        name: \"Example\"\n      )\n    )\nend\n</code></pre>\n\n<p>Does this make sense or am I off in the weeds? I find the defaults very ugly and especially frustrating when trying to enforce 80 character lines.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "parsing", "yaml", "config"], "answers": [{"comments": [{"owner": {"reputation": 7878, "user_id": 630780, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fskbD.png?s=128&g=1", "display_name": "Carl Markham", "link": "https://stackoverflow.com/users/630780/carl-markham"}, "edited": false, "score": 0, "creation_date": 1570050588, "post_id": 58209390, "comment_id": 102796524, "body": "As an additional note, there are a lot of YAML validators online, as well as plugins for most editors which will validate YAML as it&#39;s written."}, {"owner": {"reputation": 53, "user_id": 12150271, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qf5AHSer06k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd9MNS9aHim97wipOpXd_ftNy7QEA/photo.jpg?sz=128", "display_name": "Joshua Matthews", "link": "https://stackoverflow.com/users/12150271/joshua-matthews"}, "edited": false, "score": 0, "creation_date": 1570051150, "post_id": 58209390, "comment_id": 102796713, "body": "Hey thanks so much that solved my problem. It was a quick fix. Thanks man."}], "tags": [], "owner": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "is_accepted": true, "score": 2, "last_activity_date": 1570050711, "last_edit_date": 1570050711, "creation_date": 1570050518, "answer_id": 58209390, "question_id": 58209276, "link": "https://stackoverflow.com/questions/58209276/yaml-syntax-error-occurred-while-parsing-c-users-vanessa-rails-space-config-dat/58209390#58209390", "title": "YAML syntax error occurred while parsing C:/Users/Vanessa/rails_space/config/database.yml", "body": "<p>It looks like, under your development key, for adapter, you have a spacing error. Try changing it to:</p>\n\n<pre><code>development:\n  adapter: mysql\n</code></pre>\n\n<p>You have one too many spaces before <code>adapter</code>.</p>\n\n<p>YAML is very specific about spacing. As you've found out, even one extra space throws an error. And you have to make sure you use spaces, not tabs.</p>\n"}], "owner": {"reputation": 53, "user_id": 12150271, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qf5AHSer06k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd9MNS9aHim97wipOpXd_ftNy7QEA/photo.jpg?sz=128", "display_name": "Joshua Matthews", "link": "https://stackoverflow.com/users/12150271/joshua-matthews"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "accepted_answer_id": 58209390, "answer_count": 1, "score": -1, "last_activity_date": 1570051017, "creation_date": 1570049935, "last_edit_date": 1570051017, "question_id": 58209276, "link": "https://stackoverflow.com/questions/58209276/yaml-syntax-error-occurred-while-parsing-c-users-vanessa-rails-space-config-dat", "title": "YAML syntax error occurred while parsing C:/Users/Vanessa/rails_space/config/database.yml", "body": "<p>When I enter this code into my command prompt:</p>\n\n<pre><code>  rails g model User\n</code></pre>\n\n<p>Here is what I get in the console:</p>\n\n<pre><code>  YAML syntax error occurred while parsing \n  C:/Users/Vanessa/rails_space/config/database.yml. Please note that YAML \n  must be consistently indented using spaces. Tabs are not allowed. Error: \n  (&lt;unknown&gt;): did not find expected key while parsing a block mapping at \n  line 7 column 1 (RuntimeError)\n</code></pre>\n\n<p>Here is the code from my config/database.yml file:</p>\n\n<pre><code>    # SQLite. Versions 3.8.0 and up are supported.\n#   gem install sqlite3\n#\n#   Ensure the SQLite 3 gem is defined in your Gemfile\n#   gem 'sqlite3'\n#\ndefault: &amp;default\n  adapter: sqlite3\n  pool: &lt;%= ENV.fetch(\"RAILS_MAX_THREADS\") { 5 } %&gt;\n  timeout: 5000\n\ndevelopment:\n   adapter: mysql\n  database: rails_space_development\n  username: root\n  password: NothingToSeeHere\n  host: localhost\n\n  &lt;&lt;: *default\n  database: db/development.sqlite3\n\n# Warning: The database defined as \"test\" will be erased and\n# re-generated from your development database when you run \"rake\".\n# Do not set this db to the same as development or production.\ntest:\n  &lt;&lt;: *default\n  database: db/test.sqlite3\n\nproduction:\n  &lt;&lt;: *default\n  database: db/production.sqlite3\n</code></pre>\n"}, {"tags": ["ruby", "vagrant", "windows-subsystem-for-linux", "vagrant-windows", "trellis"], "comments": [{"owner": {"reputation": 44774, "user_id": 4296747, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-muYS9LV5AoA/AAAAAAAAAAI/AAAAAAAACG4/KcTmlFyGWRI/photo.jpg?sz=128", "display_name": "Frederic Henri", "link": "https://stackoverflow.com/users/4296747/frederic-henri"}, "edited": false, "score": 0, "creation_date": 1570445889, "post_id": 58208504, "comment_id": 102903502, "body": "are you using the same shell (and version) on all machines ?"}, {"owner": {"reputation": 851, "user_id": 2661556, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fab01a9f959f7250ea762e30c67dd5b0?s=128&d=identicon&r=PG", "display_name": "Hutch", "link": "https://stackoverflow.com/users/2661556/hutch"}, "reply_to_user": {"reputation": 44774, "user_id": 4296747, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-muYS9LV5AoA/AAAAAAAAAAI/AAAAAAAACG4/KcTmlFyGWRI/photo.jpg?sz=128", "display_name": "Frederic Henri", "link": "https://stackoverflow.com/users/4296747/frederic-henri"}, "edited": false, "score": 0, "creation_date": 1570564493, "post_id": 58208504, "comment_id": 102950512, "body": "@Fr&#233;d&#233;ricHenri That definitely put us in the right direction - we identified that the developer had set up the machine differently, so that it included tools like ruby that were running as Linux versions, but on our machines it is the Windows flavours that are running. I will get an answer up once we&#39;ve fully sorted out the issue."}], "owner": {"reputation": 851, "user_id": 2661556, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fab01a9f959f7250ea762e30c67dd5b0?s=128&d=identicon&r=PG", "display_name": "Hutch", "link": "https://stackoverflow.com/users/2661556/hutch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570046052, "creation_date": 1570046052, "question_id": 58208504, "link": "https://stackoverflow.com/questions/58208504/vagrant-treating-wsl-as-linux-on-one-machine-treats-wsl-as-windows-elsewhere", "title": "Vagrant treating WSL as Linux on one machine (treats WSL as Windows elsewhere)", "body": "<p>We are using Trellis and Vagrant to provision developer WordPress instances on windows machine (within the Windows Subsystem for Linux.) On one machine we are having a lot of issues, and have managed to figure out that the <code>Vagrant::Util::Platform.platform</code> variable is set to <code>mingw32</code> on the machines that work well, but it is set to <code>linux-gnu</code> on the problematic machine.</p>\n\n<p>Tracing back a bit further to <a href=\"https://github.com/hashicorp/vagrant/blob/master/lib/vagrant/util/platform.rb\" rel=\"nofollow noreferrer\">https://github.com/hashicorp/vagrant/blob/master/lib/vagrant/util/platform.rb</a> it appears that Vagrant uses <code>RbConfig::CONFIG[\"host_os\"]</code> to determine the platform.</p>\n\n<p>Not sure where to proceed from there - what would cause Ruby to report Linux in the WSL of one machine, but Windows on the WSL of another machine?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "windows", "traceback"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 2, "creation_date": 1570074986, "post_id": 58208012, "comment_id": 102801190, "body": "You&#39;re using a twelve year old book about Rails 1. It would have used Ruby 1.8 which was itself retired in 2013. You will be <i>much</i> better off if you abandon everything you have done so far and restart completely from scratch with a book or tutorial about Rails 5 or Rails 6 using Ruby 2.4 or later. If you continue using this book you will be learning essentially zero transferable skills and will encounter so many roadblocks as to be comical. <i>No one</i> can help you use Rails 1."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 12150271, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qf5AHSer06k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd9MNS9aHim97wipOpXd_ftNy7QEA/photo.jpg?sz=128", "display_name": "Joshua Matthews", "link": "https://stackoverflow.com/users/12150271/joshua-matthews"}, "edited": false, "score": 0, "creation_date": 1570050673, "post_id": 58208456, "comment_id": 102796558, "body": "Hello thanks for the suggestion, here is a link to what I get when I try <code>rails g model User</code> <a href=\"https://stackoverflow.com/questions/58209276/yaml-syntax-error-occurred-while-parsing-c-users-vanessa-rails-space-config-dat\" title=\"yaml syntax error occurred while parsing c users vanessa rails space config dat\">stackoverflow.com/questions/58209276/&hellip;</a>"}, {"owner": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "edited": false, "score": 0, "creation_date": 1570051371, "post_id": 58208456, "comment_id": 102796791, "body": "I just posted an answer on your other question. Also, keep in mind, if you are just learning Ruby on Rails, try to find a more recent book. Michael Hartl has another book called Ruby on Rails Tutorial. It was available to read online free, but I&#39;m not sure if that is the case anymore. You can find out more at <a href=\"https://www.learnenough.com/ruby-on-rails-6th-edition\" rel=\"nofollow noreferrer\">learnenough.com/ruby-on-rails-6th-edition</a>."}], "tags": [], "owner": {"reputation": 354, "user_id": 4909929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccfe2b48c23efcea2ada16ce6f29d2ba?s=128&d=identicon&r=PG", "display_name": "Kirill Zhuravlov", "link": "https://stackoverflow.com/users/4909929/kirill-zhuravlov"}, "is_accepted": false, "score": 0, "last_activity_date": 1570046116, "last_edit_date": 1570046116, "creation_date": 1570045787, "answer_id": 58208456, "question_id": 58208012, "link": "https://stackoverflow.com/questions/58208012/traceback-most-recent-call-last-ruby-no-such-file-or-directory-script-gen/58208456#58208456", "title": "Traceback (most recent call last): ruby: No such file or directory -- script/generate (LoadError)", "body": "<p>Try <code>rails g model User</code> instead. The reason of this error is that this book use old rails syntax, you should try something newer for learning purposes, or install ruby and rails with versions same or above those in book.</p>\n"}], "owner": {"reputation": 53, "user_id": 12150271, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qf5AHSer06k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd9MNS9aHim97wipOpXd_ftNy7QEA/photo.jpg?sz=128", "display_name": "Joshua Matthews", "link": "https://stackoverflow.com/users/12150271/joshua-matthews"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2220, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1579758096, "creation_date": 1570043758, "last_edit_date": 1579758096, "question_id": 58208012, "link": "https://stackoverflow.com/questions/58208012/traceback-most-recent-call-last-ruby-no-such-file-or-directory-script-gen", "title": "Traceback (most recent call last): ruby: No such file or directory -- script/generate (LoadError)", "body": "<p>I'm following code from a book called: \"RailsSpace: Building a social networking site with ruby on rails\" by Michael Hartl. The book is available free for download here is the link so you can follow along with me: <a href=\"https://pdfs.semanticscholar.org/ca98/3b5098cd5957dc1842bb4bf3175406624bca.pdf?_ga=2.121598472.1814901715.1569094472-1963651489.1569094472\" rel=\"nofollow noreferrer\">https://pdfs.semanticscholar.org/ca98/3b5098cd5957dc1842bb4bf3175406624bca.pdf?_ga=2.121598472.1814901715.1569094472-1963651489.1569094472</a>. </p>\n\n<p>The code starts on page 70 asking me to enter this in my command prompt:</p>\n\n<pre><code>ruby script/generate model User\n</code></pre>\n\n<p>When I enter that code into the command prompt I get this:</p>\n\n<pre><code>Traceback (most recent call last): ruby: No such file or directory --script/generate (LoadError).\n</code></pre>\n\n<p>The book was published around 2007 so its probably a little out of date with the commands I'm not sure. There maybe a more modern way of doing it, I'm not sure. I don't know if anything is deprecated or not. Please help. Thanks a lot.</p>\n"}, {"tags": ["ruby", "net-http"], "comments": [{"owner": {"reputation": 2198, "user_id": 3842598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/468955b0edcf30e61a2937cb8b754a1a?s=128&d=identicon&r=PG&f=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/3842598/christian"}, "edited": false, "score": 0, "creation_date": 1570234763, "post_id": 58207950, "comment_id": 102860819, "body": "Why do you need application/pdf? In the documentation there is a hint about the set_form form methods and multipart requests: <code>request.set_form([[&#39;upload&#39;, File.open(&quot;&#47;home&#47;name.pdf&quot;)]], &#39;multipart&#47;form-data&#39;)</code>"}, {"owner": {"reputation": 13, "user_id": 7322384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c5d8887ba7982a0be02b9f0130b10b9?s=128&d=identicon&r=PG&f=1", "display_name": "Jose Fdez", "link": "https://stackoverflow.com/users/7322384/jose-fdez"}, "reply_to_user": {"reputation": 2198, "user_id": 3842598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/468955b0edcf30e61a2937cb8b754a1a?s=128&d=identicon&r=PG&f=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/3842598/christian"}, "edited": false, "score": 0, "creation_date": 1570350842, "post_id": 58207950, "comment_id": 102880333, "body": "Ruby sends by default files with Content-type = application/octet-stream so i need overwrite this value. I have a program that receives this value and if it has this extension the program doesnt recognize the file properly"}], "answers": [{"tags": [], "owner": {"reputation": 2198, "user_id": 3842598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/468955b0edcf30e61a2937cb8b754a1a?s=128&d=identicon&r=PG&f=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/3842598/christian"}, "is_accepted": false, "score": 0, "last_activity_date": 1570651883, "last_edit_date": 1570651883, "creation_date": 1570233096, "answer_id": 58244259, "question_id": 58207950, "link": "https://stackoverflow.com/questions/58207950/is-there-a-way-to-set-content-type-in-multipart-request-with-set-form-method/58244259#58244259", "title": "Is there a way to set Content-type in multipart request with set_form method?", "body": "<p>In my opinion this is not possible for multipart requests as you can see in the <a href=\"https://ruby-doc.org/stdlib-2.6.5/libdoc/net/http/rdoc/Net/HTTPHeader.html#method-i-set_form\" rel=\"nofollow noreferrer\">code for the <code>set_form</code> method</a>, when a different content type is set it should raise an error. </p>\n\n<pre><code># File net/http/header.rb, line 452\ndef set_form(params, enctype='application/x-www-form-urlencoded', formopt={})\n  @body_data = params\n  @body = nil\n  @body_stream = nil\n  @form_option = formopt\n  case enctype\n  when /\\Aapplication\\/x-www-form-urlencoded\\z/i,\n    /\\Amultipart\\/form-data\\z/i\n    self.content_type = enctype\n  else\n    raise ArgumentError, \"invalid enctype: #{enctype}\"\n  end\nend\n</code></pre>\n\n<p>There are surely workarounds as in my other answer or you can simply use different http clients like HTTParty which support a different content type for multipart requests, start reading <a href=\"https://github.com/jnunemaker/httparty/blob/24106eef272953f3190db9115dc5ac5f6aa1600e/examples/multipart.rb\" rel=\"nofollow noreferrer\">the example here</a> and continue in the <a href=\"https://github.com/jnunemaker/httparty/blob/54b7949b91b045680ea4cd40a91d2bad7165a295/lib/httparty/request.rb#L227\" rel=\"nofollow noreferrer\">source code on Github</a>. I haven't found any better documentation.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 7322384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c5d8887ba7982a0be02b9f0130b10b9?s=128&d=identicon&r=PG&f=1", "display_name": "Jose Fdez", "link": "https://stackoverflow.com/users/7322384/jose-fdez"}, "edited": false, "score": 0, "creation_date": 1570617843, "post_id": 58278246, "comment_id": 102967102, "body": "Hi Christian, yes this code builds work fine, but i want to know how to use the method set_form. The documentation says that you can set optional values in formopt ( set_form(params, enctype=&#39;application/x-www-form-urlencoded&#39;, formopt={}) or opt (each item) but i don&#39;t know how to use it. thanks a lot"}], "tags": [], "owner": {"reputation": 2198, "user_id": 3842598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/468955b0edcf30e61a2937cb8b754a1a?s=128&d=identicon&r=PG&f=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/3842598/christian"}, "is_accepted": true, "score": 1, "last_activity_date": 1570490063, "creation_date": 1570490063, "answer_id": 58278246, "question_id": 58207950, "link": "https://stackoverflow.com/questions/58207950/is-there-a-way-to-set-content-type-in-multipart-request-with-set-form-method/58278246#58278246", "title": "Is there a way to set Content-type in multipart request with set_form method?", "body": "<p>I have found this (<a href=\"https://dradisframework.com/blog/2017/04/dradis-attachments-api-using-ruby/\" rel=\"nofollow noreferrer\">https://dradisframework.com/blog/2017/04/dradis-attachments-api-using-ruby/</a>), not sure if it helps.</p>\n\n<p>This code builds individual body parts for the request.</p>\n\n<pre><code>require 'net/http'\n\nuri = URI('http://dradis.ip/pro/api/nodes/18/attachments')\n\nNet::HTTP.start(uri.host, uri.port) do |http|\n\n  # Read attachments associated to a specific node:\n  get_request = Net::HTTP::Get.new uri\n  get_request['Authorization'] = 'Token token=\"iOEFCQDR-miTHNTjiBxObjWC\"'\n  get_request['Dradis-Project-Id'] = '8'\n  get_response = http.request(get_request)\n  puts get_response.body\n\n  # Attach some other files to that node:\n  BOUNDARY = \"AaB03x\"\n  file1 = '/your/local/path/image1.png'\n  file2 = '/your/local/path/image2.png'\n\n  post_body = []\n\n  post_body &lt;&lt; \"--#{BOUNDARY}\\r\\n\"\n\n  post_body &lt;&lt; \"Content-Disposition: form-data; name=\\\"files[]\\\"; filename=\\\"#{File.basename(file1)}\\\"\\r\\n\"\n  post_body &lt;&lt; \"Content-Type: image/png\\r\\n\"\n  post_body &lt;&lt; \"\\r\\n\"\n  post_body &lt;&lt; File.read(file1)\n\n  post_body &lt;&lt; \"\\r\\n--#{BOUNDARY}\\r\\n\"\n\n  post_body &lt;&lt; \"Content-Disposition: form-data; name=\\\"files[]\\\"; filename=\\\"#{File.basename(file2)}\\\"\\r\\n\"\n  post_body &lt;&lt; \"Content-Type: image/png\\r\\n\"\n  post_body &lt;&lt; \"\\r\\n\"\n  post_body &lt;&lt; File.read(file2)\n\n  post_body &lt;&lt; \"\\r\\n--#{BOUNDARY}--\\r\\n\"\n\n  post_request = Net::HTTP::Post.new uri\n  post_request['Authorization'] = 'Token token=\"iOEFCQDR-miTHNTjiBxObjWC\"'\n  post_request['Dradis-Project-Id'] = '8'\n  post_request.body = post_body.join\n  post_request[\"Content-Type\"] = \"multipart/form-data, boundary=#{BOUNDARY}\"\n\n  post_response = http.request(post_request)\n  puts post_response.body\nend\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7322384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c5d8887ba7982a0be02b9f0130b10b9?s=128&d=identicon&r=PG&f=1", "display_name": "Jose Fdez", "link": "https://stackoverflow.com/users/7322384/jose-fdez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 819, "favorite_count": 0, "accepted_answer_id": 58278246, "answer_count": 2, "score": 1, "last_activity_date": 1570651883, "creation_date": 1570043482, "last_edit_date": 1570081927, "question_id": 58207950, "link": "https://stackoverflow.com/questions/58207950/is-there-a-way-to-set-content-type-in-multipart-request-with-set-form-method", "title": "Is there a way to set Content-type in multipart request with set_form method?", "body": "<p>I need to set <code>Content-type = \"application/pdf\"</code> to a parameter of a request with the method \"set_form\" from net/http class but it always shows me Content-Type = \"application/octet-stream\".</p>\n\n<p>I already checked out the <a href=\"https://ruby-doc.org/stdlib-2.6.4/libdoc/net/http/rdoc/Net/HTTPHeader.html#method-i-set_form\" rel=\"nofollow noreferrer\">documentation for set_form</a> but I don't know how to properly set the Content-Type.</p>\n\n<pre><code>    http = Net::HTTP.new(uri.host, uri.port)\n    request = Net::HTTP::Post.new(\"#{path}\")\n    request.set_form([\n        [\"parameter1\",\"#{parameter1}\"],\n        [\"parameter2\",\"#{parameter2}\"],\n        [\"attachment\", File.new(\"/home/name.pdf\", \"rb\")]\n    ], 'multipart/form-data')\n    response = http.request(request)\n</code></pre>\n\n<p>I have tried this code to set opt hash like documentation but I have received the same response:</p>\n\n<pre><code>uri = URI.parse(\"#{host}\")\n    http = Net::HTTP.new(uri.host, uri.port)\n    request = Net::HTTP::Post.new(\"#{path}\")\n    request.set_form([\n        [\"parameter1\",\"#{parameter1}\"],\n        [\"parameter2\",\"#{parameter2}\"],\n        [\"attachment\", File.new(\"/home/name.pdf\", \"rb\"), { \"Content-Type\" =&gt; \"application/pdf\" }]\n    ], 'multipart/form-data')\n    response = http.request(request)\n</code></pre>\n\n<p>The actual output is still <code>Content-Type: application/octet-stream</code> but I need:</p>\n\n<pre><code>... Content-Disposition: form-data; name=\\\"attachment\\\"; filename=\\\"name.pdf\\\"\\r\\nContent-Type: application/pdf\\r\\n\\r\\n%PDF-1.5\\r%\\xE2\\xE ...\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "haml"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1570042080, "post_id": 58206761, "comment_id": 102793120, "body": "Have you confirmed that <code>@reporter.events</code> is returning a non-empty <code>array</code>?"}, {"owner": {"reputation": 1, "user_id": 12155124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbe46e6816c422065d1a167ccc3fe000?s=128&d=identicon&r=PG&f=1", "display_name": "Strategyny", "link": "https://stackoverflow.com/users/12155124/strategyny"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1570047908, "post_id": 58206761, "comment_id": 102795631, "body": "Just checked and <code>@reporter.events</code> is returning an empty array. Any idea why it is passing RSpec test for pulling info but working correctly for real data? I know it&#39;s got to be something simple I missed..."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1570049584, "post_id": 58206761, "comment_id": 102796200, "body": "Are you sure you have <code>Ticket</code>s that meet the specified criteria? The answer to your RSpec question is that you&#39;ve probably configured your test data to return values for <code>Ticket</code> but your live data is probably not returning values for <code>Ticket</code>. Or, at least that&#39;s my guess."}, {"owner": {"reputation": 1, "user_id": 12155124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbe46e6816c422065d1a167ccc3fe000?s=128&d=identicon&r=PG&f=1", "display_name": "Strategyny", "link": "https://stackoverflow.com/users/12155124/strategyny"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1570050880, "post_id": 58206761, "comment_id": 102796630, "body": "That was it - I had test date that was outside of my specifications - changed the <code>week_ago_in_time_zone</code> to allow all dates from today back a full year and the table populated. Thanks @jvillian!"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1570054882, "post_id": 58206761, "comment_id": 102797643, "body": "Added as an answer for future searchers. Please upvote/accept as you please."}], "answers": [{"tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 0, "last_activity_date": 1570052098, "creation_date": 1570052098, "answer_id": 58209685, "question_id": 58206761, "link": "https://stackoverflow.com/questions/58206761/failed-to-populate-table-in-haml-with-database-values-ruby-on-rails/58209685#58209685", "title": "Failed to populate table in haml with database values - Ruby on Rails", "body": "<p>As debugged in comments, your code is fine. With live data, this:</p>\n\n<pre><code>Ticket.where(\"event_date &gt;= ?\", week_ago_in_time_zone).order(\"event_date ASC\")\n</code></pre>\n\n<p>...however, is returning an empty result set. So this:</p>\n\n<pre><code>products.map do |product|\n  ...\nend \n</code></pre>\n\n<p>...is returning an empty array.</p>\n\n<p>Your RSpec test passed because you had <code>Ticket</code> records in your test data that met the criteria and, therefore, <code>products.map</code> was returning a non-empty array.</p>\n"}], "owner": {"reputation": 1, "user_id": 12155124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbe46e6816c422065d1a167ccc3fe000?s=128&d=identicon&r=PG&f=1", "display_name": "Strategyny", "link": "https://stackoverflow.com/users/12155124/strategyny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1581307081, "creation_date": 1570038597, "last_edit_date": 1581307081, "question_id": 58206761, "link": "https://stackoverflow.com/questions/58206761/failed-to-populate-table-in-haml-with-database-values-ruby-on-rails", "title": "Failed to populate table in haml with database values - Ruby on Rails", "body": "<p>I have a site where customers can purchase tickets for an event and created a <code>Reporter::EventTickets</code> class to generate a hash for the relevant information I need. <code>Reporter::EventTickets</code> is called in a Reports controller, and ultimately I want to view this on an admin report page.</p>\n\n<p>I cannot get the information to display on my table in my haml view file! \nI've tried everything I can think and am at a complete loss for what to do.   </p>\n\n<p>Information is being saved to the database (PostgreSQL) successfully and the EventTickets class is transforming data properly (passing RSpec tests). </p>\n\n<p>Code:</p>\n\n<pre><code>class Reporter::EventTickets\n  include Virtus.model\n\n  def events\n    products.map do |product|\n      line_items = LineItem.includes(:order)\n        .where(\"orders.completed_at IS NOT NULL\")\n        .where(purchasable_type: \"Product\", purchasable_id: product.id)\n        .references(:order)\n\n      ticket_purchases = line_items.map do |line_item|\n        order = line_item.order\n\n        [order.bill_address_full_name, order.email, line_item.quantity]\n      end\n      total = ticket_purchases.reduce(0) { |sum, purchase| sum + purchase.last }\n\n      {\n        date: product.event_date,\n        name: product.name,\n        total: total,\n        purchases: ticket_purchases.sort\n      }\n    end\n  end\n\n  private\n\n  def products\n    Ticket.where(\"event_date &gt;= ?\", week_ago_in_time_zone).order(\"event_date ASC\")\n  end\n\n  def week_ago_in_time_zone\n    (Time.current - 7.days).to_date\n  end\n\nend\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>def event_tickets\n    @reporter = Reporter::EventTickets.new\n    @csv_link = admin_reports_event_tickets_path(format: :csv)\n    respond_with @reporter\nend\n</code></pre>\n\n<p>Models:</p>\n\n<pre><code>class Order &lt; ActiveRecord::Base\n  has_many :line_items, dependent: :destroy\n</code></pre>\n\n<pre><code>class LineItem &lt; ActiveRecord::Base\n  belongs_to :order, touch: true\n  belongs_to :purchasable, polymorphic: true\n</code></pre>\n\n<pre><code>class Product &lt; ActiveRecord::Base\n  include Purchasable\n  has_many :line_items, as: :purchasable\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>= render partial: \"admin/shared/header\", locals: {title: \"Event Ticket Purchases\"}\n.container-fluid.padded\n  = render partial: \"admin/shared/notifications\"\n  .row-fluid.hidden-print\n    = link_to \"Download CSV\", @csv_link, class: \"btn btn-blue\"\n  .row-fluid\n    - @reporter.events.each do |event|\n      %h3\n        = event[:date].strftime(\"%_m/%e\")\n        = event[:name]\n      .box\n        %table.table.table-normal\n          %thead\n            %tr\n              %td Name\n              %td Email\n              %td Tickets\n          %tbody\n            - event[:purchases].each do |purchase|\n              %tr\n                - purchase.each do |column|\n                  %td= column\n            %tr\n              %td{:colspan =&gt; \"2\"}\n                %b TOTAL\n              %td\n                %b= event[:total]\n\n</code></pre>\n\n<p>There are no errors from Rails and the page loads with the title and button. The table just does not populate.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1570035782, "post_id": 58205537, "comment_id": 102790305, "body": "There are a few things less than ideal with this question.  Please see <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1570037111, "post_id": 58205537, "comment_id": 102790901, "body": "Cannot reproduce the problem, have voted to close."}, {"owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 0, "creation_date": 1570038096, "post_id": 58205537, "comment_id": 102791360, "body": "I was able to reproduce this on MSYS2 in Windows and find a solution, but I&#39;m not sure if that is what you need.  Please tell us what operating system you are using, what version of Ruby (and where it came from), what shell you are using (i.e. bash, Windows Command Prompt), and what terminal program (i.e. MinTTY, standard Windows text window)."}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1570037634, "creation_date": 1570037634, "answer_id": 58206516, "question_id": 58205537, "link": "https://stackoverflow.com/questions/58205537/ruby-not-running-print-before-end-of-program/58206516#58206516", "title": "Ruby not running print before end of program", "body": "<p>If the Ruby process takes a moment to start you can type in input prior to the prompt being displayed.</p>\n\n<p>This is precisely the same behaviour you'll get with <em>any</em> interactive program in the shell. You're free to type input at any time, for any reason, with any program, regardless of if or when that input is used. This is not unique to Ruby.</p>\n\n<p>By typing in advance you're basically front-loading the input buffer.</p>\n"}], "owner": {"reputation": 11, "user_id": 6628758, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IujDsQmWkqU/AAAAAAAAAAI/AAAAAAAACwc/2UZ8MMk2HSc/photo.jpg?sz=128", "display_name": "Andrew Curran", "link": "https://stackoverflow.com/users/6628758/andrew-curran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "closed_date": 1570075037, "answer_count": 1, "score": 0, "last_activity_date": 1570037634, "creation_date": 1570033410, "last_edit_date": 1570036349, "question_id": 58205537, "link": "https://stackoverflow.com/questions/58205537/ruby-not-running-print-before-end-of-program", "closed_reason": "Needs details or clarity", "title": "Ruby not running print before end of program", "body": "<p>My ruby code is not working the way I would expect. My expectation is that it will print <em>\"What is your name?\"</em> before taking the user input. As seen in my output though, this is not the case. I am hoping that I could get an explanation as to why this is happening, and then a solution where I get my expected results.</p>\n\n<p><strong>playground.rb</strong></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>puts \"What is your name? \"\n\nname = gets.chomp\n\nputs \"Hello \" + name + \". How are you?\"\n\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ ruby playground.rb\nasd\nwhat is your name?\nHello asd. How are you?\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "xml-parsing", "xmlhttprequest", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 835, "user_id": 2208016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8bfa904de4db33e337f3d3d74db5b0a?s=128&d=identicon&r=PG", "display_name": "DaveMongoose", "link": "https://stackoverflow.com/users/2208016/davemongoose"}, "edited": false, "score": 0, "creation_date": 1570031716, "post_id": 58204980, "comment_id": 102788386, "body": "What have you tried so far in terms of parsing the XML? The code you&#39;ve provided is essentially just making an HTTP request."}], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 11964190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bTnbD.png?s=128&g=1", "display_name": "zakariah1", "link": "https://stackoverflow.com/users/11964190/zakariah1"}, "edited": false, "score": 0, "creation_date": 1570041246, "post_id": 58207286, "comment_id": 102792762, "body": "Your example is real basic so I&#39;m not sure what you are after.  I like dumb controllers that can use services and can easily be tested from a console.  This is a good article, but there are many <a href=\"https://www.toptal.com/ruby-on-rails/rails-service-objects-tutorial\" rel=\"nofollow noreferrer\">toptal.com/ruby-on-rails/rails-service-objects-tutorial</a> ."}], "tags": [], "owner": {"reputation": 151, "user_id": 11964190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bTnbD.png?s=128&g=1", "display_name": "zakariah1", "link": "https://stackoverflow.com/users/11964190/zakariah1"}, "is_accepted": false, "score": 0, "last_activity_date": 1570040704, "creation_date": 1570040704, "answer_id": 58207286, "question_id": 58204980, "link": "https://stackoverflow.com/questions/58204980/make-http-post-request-that-return-xml-response-and-parsing-xml-fields/58207286#58207286", "title": "Make http POST request that return xml response and parsing XML fields", "body": "<p>I think that you can run your code the way that you have it now.  Start a console and do the following:</p>\n\n<pre><code>obj = Documents::CreateSession.new\nobj.start\n</code></pre>\n\n<p>For debugging purposes, you could put a binding.pry in the start method before you make your request.</p>\n"}], "owner": {"reputation": 55, "user_id": 11896746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/596186715598a7f6ec103fa0e51d5b68?s=128&d=identicon&r=PG&f=1", "display_name": "john bowlee", "link": "https://stackoverflow.com/users/11896746/john-bowlee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570040704, "creation_date": 1570031189, "question_id": 58204980, "link": "https://stackoverflow.com/questions/58204980/make-http-post-request-that-return-xml-response-and-parsing-xml-fields", "title": "Make http POST request that return xml response and parsing XML fields", "body": "<p>I want to make a http POST request that parse XML response and return the value of SessionId field that is inside XML. This is what I tried so far.\nPs: is there a way I can run this class from the console, in the way that I can see the response?</p>\n\n<pre><code>class Documents::CreateSession\n\n  def initialize()\n      @username = Rails.secrets.legal_doc.username\n      @password= Rails.secrets.legal_doc.password\n  end\n\n  def start\n\n    require \"net/http\"\n    require \"uri\"\n\n    uri = URI.parse(\"http://example.com/search\")\n\n    http = Net::HTTP.new(uri.host, uri.port)\n\n    request = Net::HTTP::Post.new(uri.request_uri)\n    request.set_form_data({\"userid\" =&gt; @username, \"password\" =&gt; @password})\n\n    response = http.request(request)\n\n  end\n\nend \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "replace", "graphql"], "answers": [{"comments": [{"owner": {"reputation": 370, "user_id": 8060214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0a2d5cd0b3cf6c505873f2e63cacde0?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/8060214/matt"}, "edited": false, "score": 0, "creation_date": 1570036098, "post_id": 58205576, "comment_id": 102790461, "body": "That&#39;s a good idea, but because it is all wrapped in a string, I get a parse error on the <code>+</code> for the first suggestion, and the <code>.</code> for the second."}], "tags": [], "owner": {"reputation": 835, "user_id": 2208016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8bfa904de4db33e337f3d3d74db5b0a?s=128&d=identicon&r=PG", "display_name": "DaveMongoose", "link": "https://stackoverflow.com/users/2208016/davemongoose"}, "is_accepted": false, "score": 0, "last_activity_date": 1570034155, "last_edit_date": 1570034155, "creation_date": 1570033574, "answer_id": 58205576, "question_id": 58204681, "link": "https://stackoverflow.com/questions/58204681/escaping-string-variables-in-graphql-query-in-ruby-graphql-client/58205576#58205576", "title": "Escaping string variables in GraphQL query in ruby graphql-client?", "body": "<p>Your problem isn't the quotes, it's  that <code>data</code> is just a string: no interpolation is taking place and so your resulting value will just be a string literal <code>{\"access_token\": $access_token, ...}</code>.</p>\n\n<p>GraphQL uses javascript as a backend, so you can probably do something like the following:</p>\n\n<pre><code>...\ndata: \"{\\\"access_token\\\": \\\"\" + $access_token + \"\\\", \\\"refresh_token\\\": \\\"\" + $refresh_token + \"\\\", \\\"user_id\\\": \\\"\" + $user_id + \"\\\", \\\"instance_url\\\": \\\"REDACTED\\\", \\\"created_at\\\": \\\"\" + $created_at + \"\\\", \\\"__created\\\": \\\"\" + $__created + \"\\\", \\\"token_type\\\": \\\"bearer\\\", \\\"expires_in\\\": \\\"\" + $expires_in + \"\\\"}\"\n...\n</code></pre>\n\n<p>Or even:</p>\n\n<pre><code>...\ndata: JSON.stringify({access_token: $access_token, refresh_token: $refresh_token, user_id: $user_id, instance_url: \"REDACTED\", created_at: $created_at, __created: $__created, token_type: \"bearer\", expires_in: $expires_in})\n...\n</code></pre>\n\n<p>As per the example on here: <a href=\"https://graphql.org/graphql-js/mutations-and-input-types/\" rel=\"nofollow noreferrer\">https://graphql.org/graphql-js/mutations-and-input-types/</a> (search 'stringify')</p>\n"}], "owner": {"reputation": 370, "user_id": 8060214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0a2d5cd0b3cf6c505873f2e63cacde0?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/8060214/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 431, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570034155, "creation_date": 1570030147, "question_id": 58204681, "link": "https://stackoverflow.com/questions/58204681/escaping-string-variables-in-graphql-query-in-ruby-graphql-client", "title": "Escaping string variables in GraphQL query in ruby graphql-client?", "body": "<p>I have a a graphql query that has a <code>data</code> node that requires all quotation marks to be escaped like so:\n<code>data: \"{\\\"access_token\\\": \\\"SOME_TOKEN\\\"}\"</code>.</p>\n\n<p>However, in the program I am writing, <code>SOME_TOKEN</code> is dynamic and thus I need to use a variable to reference the access token.  However, because the token is a string, it has quotation marks as part of the variable.  I would usually do something like <code>access_token_var.replace(\"\"\", \"\\\")</code> but because this is graphql-client, the entire thing is wrapped in a string. </p>\n\n<p>I am getting the error <code>Variable $access_token is declared by __anonymous__ but not used</code>. </p>\n\n<p>How can I escape the quotes that are included in the string variable?</p>\n\n<p>Full query:</p>\n\n<pre><code> CREATE_AUTHENTICATION_MUTATION ||=  &lt;&lt;-'GRAPHQL'\n    mutation($access_token: String!, $refresh_token: String!, $user_id: ID!, $created_at: Int!, $__created: Int!, $expires_in: Int!){\n        createUserAuthentication(input: {\n            name: \"my_test\",\n            data: \"\n{\\\"access_token\\\": $access_token, \\\"refresh_token\\\": $refresh_token, \\\"user_id\\\": $user_id, \\\"instance_url\\\": \\\"REDACTED\\\", \\\"created_at\\\": $created_at, \\\"__created\\\": $__created, \\\"token_type\\\": \\\"bearer\\\", \\\"expires_in\\\": $expires_in}\"\n         }){\n            authenticationId\n            clientMutationId\n        }\n    }\n  GRAPHQL\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "haml"], "comments": [{"owner": {"reputation": 710, "user_id": 3685411, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/651824110/picture?type=large", "display_name": "Snoobie", "link": "https://stackoverflow.com/users/3685411/snoobie"}, "edited": false, "score": 0, "creation_date": 1570031362, "post_id": 58204405, "comment_id": 102788203, "body": "Hello could you add the function <code>my_page</code> that come from your controller ?"}, {"owner": {"reputation": 1, "user_id": 12154558, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lpJ90JghrUg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfi86vCEpl3-bTsyghMFhK3R-u6Wg/photo.jpg?sz=128", "display_name": "Kyle Desmond", "link": "https://stackoverflow.com/users/12154558/kyle-desmond"}, "reply_to_user": {"reputation": 710, "user_id": 3685411, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/651824110/picture?type=large", "display_name": "Snoobie", "link": "https://stackoverflow.com/users/3685411/snoobie"}, "edited": false, "score": 0, "creation_date": 1570034298, "post_id": 58204405, "comment_id": 102789626, "body": "it&#39;s anything that throws an error. The error itself is not the issue, just the mysterious GUID in the stack trace. :-)"}], "owner": {"reputation": 1, "user_id": 12154558, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lpJ90JghrUg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfi86vCEpl3-bTsyghMFhK3R-u6Wg/photo.jpg?sz=128", "display_name": "Kyle Desmond", "link": "https://stackoverflow.com/users/12154558/kyle-desmond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1581307091, "creation_date": 1570029225, "last_edit_date": 1581307091, "question_id": 58204405, "link": "https://stackoverflow.com/questions/58204405/when-i-generate-views-from-haml-files-where-do-the-ids-come-from", "title": "When I generate views from HAML files, where do the IDs come from?", "body": "<p>So, I have a Rails project with HAML views. When the view reads something from a model and that model throws an error, I get IDs in the stack trace for the generated view, like so:</p>\n\n<pre><code>Module::Class#method_with_an_error\napp/models/model.rb, line 14\n#&lt;Class:0x00007ff44715ad90&gt;#_app_views_my_page_html_haml__1235391671395365279_70343570677320\napp/views/my_page.html.haml, line 35\nblock in ActionView::Template#render\nactionview (5.1.4) lib/action_view/template.rb, line 157\n...\n</code></pre>\n\n<p>This might be a silly question - but where does the 1235391671395365279_70343570677320 comes from? Is there a way to get rid of it, so it won't appear in stack traces?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "grape"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1570038486, "post_id": 58201693, "comment_id": 102791505, "body": "Have never used this, looking the <a href=\"https://github.com/Netflix/fast_jsonapi#conditional-relationships\" rel=\"nofollow noreferrer\">readme</a> though, it appears you can use the <code>fields</code> option when you instantiate the serializer (see the section on  &quot;Sparse Fieldsets&quot;)"}], "owner": {"reputation": 1285, "user_id": 10443890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de817ef35c4a2bdd0501efbdc6d9a338?s=128&d=identicon&r=PG&f=1", "display_name": "mr_muscle", "link": "https://stackoverflow.com/users/10443890/mr-muscle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1570021930, "creation_date": 1570019950, "last_edit_date": 1570021930, "question_id": 58201693, "link": "https://stackoverflow.com/questions/58201693/how-to-include-relations-in-rails-with-grape", "title": "How to include relations in Rails with Grape", "body": "<p>In My Grape app I want to change return (in response) number of used <code>campaign_codes</code> and all <code>campaign_codes</code> for each campaign. To do so I need to return also the relationship objects. Here is my serializer:</p>\n\n<pre><code>module V1\n  module AdminPanel\n    module Serializers\n      class CampaignSerializer\n        include FastJsonapi::ObjectSerializer\n\n        attributes :total_campaign_codes_amount, :used_campaign_codes_amount\n\n        attribute :total_campaign_codes_amount do |campaign|\n          campaign.campaign_codes.count\n        end\n\n        attribute :used_campaign_codes_amount do |campaign|\n          campaign.campaign_codes.where(state: 'used').count\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>But with this code I receive an error:</p>\n\n<blockquote>\n  <p>ArgumentError (campaign_codes is not specified as a relationship on V1::AdminPanel::Serializers::CampaignSerializer)</p>\n</blockquote>\n\n<p>If I add <code>has_many :campaign_codes</code> it will worked but in additional I'm returning all <code>campaign_codes</code> which is not what I want to.</p>\n\n<p>Is there any chance to <code>include</code> somewhere this <code>campaign_codes</code> without getting a response with all codes?</p>\n"}, {"tags": ["ruby", "ubuntu"], "comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 1, "creation_date": 1570019740, "post_id": 58201494, "comment_id": 102781145, "body": "<a href=\"https://stackoverflow.com/a/58198736/580346\">stackoverflow.com/a/58198736/580346</a>"}, {"owner": {"reputation": 842, "user_id": 3045354, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/100003009873027/picture?type=large", "display_name": "Midhun Sudhakar", "link": "https://stackoverflow.com/users/3045354/midhun-sudhakar"}, "reply_to_user": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1570020047, "post_id": 58201494, "comment_id": 102781335, "body": "it is not worked."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 1, "creation_date": 1570035439, "post_id": 58201494, "comment_id": 102790151, "body": "Have you checked your <code>PATH</code> to confirm that the install location is on it?"}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 11953641, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QeWRd3n-nwI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re8oQoyJBZncKjStxe7tqNEHCRJCA/photo.jpg?sz=128", "display_name": "Shaun Decker", "link": "https://stackoverflow.com/users/11953641/shaun-decker"}, "is_accepted": false, "score": 0, "last_activity_date": 1570036847, "last_edit_date": 1592644375, "creation_date": 1570036847, "answer_id": 58206334, "question_id": 58201494, "link": "https://stackoverflow.com/questions/58201494/ruby-not-recognized-in-ubuntu/58206334#58206334", "title": "Ruby not recognized in Ubuntu", "body": "<p>Removing directories manually for software installed via a package manager can often cause headaches, and should be avoided when possible.</p>\n<p>You will want to verify that the directory containing the <code>ruby</code> binary exists in your <code>PATH</code>. The ruby binary is usually symbolically linked to <code>/usr/bin/ruby</code> and <code>/usr/bin</code> should already exist in your <code>PATH</code>. You might need to re-link the appropriate <code>ruby</code> binary to <code>/usr/bin/ruby</code>.</p>\n<p>Another option would be to use something like <a href=\"https://rvm.io/\" rel=\"nofollow noreferrer\">RVM</a> or <a href=\"https://github.com/rbenv/rbenv\" rel=\"nofollow noreferrer\">rbenv</a> for your ruby environment rather than a system-wide instance.</p>\n"}], "owner": {"reputation": 842, "user_id": 3045354, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/100003009873027/picture?type=large", "display_name": "Midhun Sudhakar", "link": "https://stackoverflow.com/users/3045354/midhun-sudhakar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1570036847, "creation_date": 1570019195, "question_id": 58201494, "link": "https://stackoverflow.com/questions/58201494/ruby-not-recognized-in-ubuntu", "title": "Ruby not recognized in Ubuntu", "body": "<p>when type \"ruby -v\" from the command line in ubuntu, it shows \"The program 'ruby' is currently not installed. To run 'ruby' please ask your administrator to install the package 'ruby' \". I have manually removed some directories of ruby earlier. now I have re-installed with \"sudo apt-get install ruby\". but ruby is not working now. how to fix this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "orm", "foreign-keys", "associations"], "comments": [{"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1570021131, "post_id": 58201415, "comment_id": 102781945, "body": "I don&#39;t get how you can store an array, does the <code>belongs_to :user_skill, foreign_key: &#39;skill_id&#39;</code> association work? active_record expects an interger column for <code>belongs_to ...</code> to work, not an array."}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1570021202, "post_id": 58201415, "comment_id": 102781987, "body": "Anyway, if you still want to have an array, just create a method on UserSkill: <code>def skills SkillList.where(id: skill_id) end</code>"}, {"owner": {"reputation": 599, "user_id": 11544569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xEqDN.jpg?s=128&g=1", "display_name": "RomanOks", "link": "https://stackoverflow.com/users/11544569/romanoks"}, "reply_to_user": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1570021953, "post_id": 58201415, "comment_id": 102782429, "body": "@arieljuod Association doesn&#39;t work. Foreign key for an example. It turns out that there is no way to work with arrays without an N + 1 problem?"}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1570022143, "post_id": 58201415, "comment_id": 102782560, "body": "I guess you can use an array withouth N+1 queries, but not with standard activercord association, you&#39;ll have to implement that yourself. I wouldn&#39;t use an array to store those ids, moving out from rails&#39; conventions can be done but it requires extra work with little benefit."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1570037407, "post_id": 58201415, "comment_id": 102791035, "body": "I suggest adding a join model/table between <code>UserSkill</code> and <code>SkillList</code> named <code>UserSkillList</code>. Getting rid of the array field, allowing the Rails associations to function correctly."}], "owner": {"reputation": 599, "user_id": 11544569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xEqDN.jpg?s=128&g=1", "display_name": "RomanOks", "link": "https://stackoverflow.com/users/11544569/romanoks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570018844, "creation_date": 1570018844, "question_id": 58201415, "link": "https://stackoverflow.com/questions/58201415/association-has-many-belongs-to-with-an-array", "title": "Association has_many/belongs_to with an array", "body": "<p>I have a <code>SkillList</code> model. Database in this table contains a list of all possible skills.</p>\n\n<p>There is a <code>UserSkill</code> model. An array is stored in database, which lists the id of user's skills.</p>\n\n<p><em>My models:</em></p>\n\n<pre><code>class SkillList &lt; ActiveRecord::Base\n  belongs_to :user_skill, foreign_key: 'skill_id'\nend\n\n\nclass UserSkill &lt; ActiveRecord::Base\n  has_many :skill_lists\n  belongs_to :user\nend\n\n\nclass User &lt; ActiveRecord::Base\n  has_one :user_skill, :dependent =&gt; :destroy\nend\n</code></pre>\n\n<p>The <code>user_skills</code> table has a <code>skill_id</code> field, it stores my array.</p>\n\n<p>I get a skills record for user using association - <code>user.user_skill</code></p>\n\n<p>Is it possible to use an association to get all skill records from an array of user skills?</p>\n\n<p>For example: <code>user.user_skill.skill_lists</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/e6bsw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/e6bsw.png\" alt=\"Table structure\"></a></p>\n"}, {"tags": ["jquery", "ruby", "ruby-on-rails-4", "coffeescript"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 9441331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ceea0711338b20204d472a434f17956?s=128&d=identicon&r=PG&f=1", "display_name": "AnujaDx", "link": "https://stackoverflow.com/users/9441331/anujadx"}, "edited": false, "score": 0, "creation_date": 1570075175, "post_id": 58201880, "comment_id": 102801213, "body": "Um tried this, bt there was error as <code>Reserved word</code>. Um using <b>coffeescript</b> lang.So can u kindly advice me to how to change the code using <b>coffeescript</b>?"}], "tags": [], "owner": {"reputation": 599, "user_id": 11544569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xEqDN.jpg?s=128&g=1", "display_name": "RomanOks", "link": "https://stackoverflow.com/users/11544569/romanoks"}, "is_accepted": false, "score": 0, "last_activity_date": 1570094572, "last_edit_date": 1570094572, "creation_date": 1570020641, "answer_id": 58201880, "question_id": 58199695, "link": "https://stackoverflow.com/questions/58199695/how-to-handle-check-uncheck-all-checkboxes-in-ruby-on-rails/58201880#58201880", "title": "How to handle check uncheck all checkboxes in ruby on rails", "body": "<p><em>JavaScript:</em></p>\n\n<pre><code>$(document).ready(function(){\n  $('#checkbox-selector').click(function(){\n    if ($(this).prop(\"checked\") == true) {\n      $('#other-selector input:checkbox').prop('checked', true);\n    }\n  });\n});\n</code></pre>\n\n<p><em>CoffeScript:</em></p>\n\n<pre><code>$(document).ready -&gt;\n  $('#checkbox-selector').click -&gt;\n    if $(this).prop('checked') == true\n      $('#other-selector input:checkbox').prop 'checked', true\n    return\n  return\n</code></pre>\n\n<p>Remember to replace <code>#checkbox-selector</code> with your selector.</p>\n\n<p>You can look here. <a href=\"https://codepen.io/oksromn/pen/PoYMEWo\" rel=\"nofollow noreferrer\">https://codepen.io/oksromn/pen/PoYMEWo</a></p>\n\n<p>To quickly and easily translate javascript to coffescript use <a href=\"http://js2.coffee\" rel=\"nofollow noreferrer\">http://js2.coffee</a></p>\n"}], "owner": {"reputation": 43, "user_id": 9441331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ceea0711338b20204d472a434f17956?s=128&d=identicon&r=PG&f=1", "display_name": "AnujaDx", "link": "https://stackoverflow.com/users/9441331/anujadx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 145, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570094572, "creation_date": 1570011968, "last_edit_date": 1570014608, "question_id": 58199695, "link": "https://stackoverflow.com/questions/58199695/how-to-handle-check-uncheck-all-checkboxes-in-ruby-on-rails", "title": "How to handle check uncheck all checkboxes in ruby on rails", "body": "<p>I'm new to the field.I faced a solution like I have checkbox in table head, By that checkbox i have to check uncheck all the child checkboxes.\nI added a onclick event to the parent checkbox like below</p>\n\n<pre><code>%th End Date\n%th= check_box_tag id: \"select_all_checkboxes\", label: \"B2B Check\", onclick:\"Tickets.select_all_checks();\"\n%th SLA\n</code></pre>\n\n<p>This is where are the child checkboxes in table data.</p>\n\n<pre><code>- products.each_with_index do |p, index|\n - content_for :products_brief, flush: true do\n\n%tr\n %td{ \"type\"=&gt; \"button\", \"class\"=&gt; \"btn btn-link has-popover\", \"data-toggle\"=&gt; \"popover\", \"title\"=&gt; \"#{p.serial_no}\", \"data-content\"=&gt; \"#{yield(:products_brief)}\", \"data-html\" =&gt; \"true\", \"data-trigger\" =&gt; \"hover\", \"data-placement\" =&gt; \"right\" }\n- if params[:page]\n = (index+1)+ 10*(params[:page].to_i-1)\n- else\n = (index+1)\n %td=p.serial_no\n- if params[:from_where] != \"cus_product\"\n %td= text_field_tag \"contract_product_additional_params[#{p.id}][amount]\",0, class: \"form-control cus_product_amount1\", required: true\n %td= text_field_tag \"contract_product_additional_params[#{p.id}][discount_amount]\",0, class: \"form-control cus_product_disamount1\", required: true\n %td= text_field_tag \"contract_product_additional_params[#{p.id}][contract_start_at]\",Date.today, class: \"datepicker form-control\", required: true\n %td= text_field_tag \"contract_product_additional_params[#{p.id}][contract_end_at]\", Date.today, class: \"datepicker form-control\", required: true\n %td= check_box_tag \"contract_product_additional_params[#{p.id}][contract_b2b]\",nil, class: \"form-control selectable_checkbox\", required: true\n %td= select_tag \"contract_product_additional_params[#{p.id}][sla_id]\", options_from_collection_for_select(SlaTime.where(active: 1), :id, :description ) , label_method: :description, include_blank: false, label: \"SLA\"\n %td= label_tag \"#{p.owner_customer_name}\"\n %td.hide= hidden_field_tag \"contract_product_additional_params[#{p.id}][installed_location_id]\", p.owner_customer_id\n %td= label_tag \"#{p.location_address.try(:full_address)}\"\n %td.hide= hidden_field_tag \"contract_product_additional_params[#{p.id}][location_address_id]\",p.location_address_id\n\n</code></pre>\n\n<p>I have no idea to write the jquery code for this event.Can u help me  </p>\n\n<pre><code>select_all_checks: -&gt;\n    _this =$(e)\n\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-6"], "comments": [{"owner": {"reputation": 22115, "user_id": 939986, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/591564c63c9b8b21f9c13cbddb7c000a?s=128&d=identicon&r=PG", "display_name": "Santosh Kumar", "link": "https://stackoverflow.com/users/939986/santosh-kumar"}, "edited": false, "score": 0, "creation_date": 1570023028, "post_id": 58199508, "comment_id": 102783122, "body": "Side effects of Colemak."}], "answers": [{"tags": [], "owner": {"reputation": 664, "user_id": 899255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b67e5a56fde7390cc80e21a8a12d2b01?s=128&d=identicon&r=PG", "display_name": "stepan", "link": "https://stackoverflow.com/users/899255/stepan"}, "is_accepted": true, "score": 1, "last_activity_date": 1570014274, "creation_date": 1570014274, "answer_id": 58200198, "question_id": 58199508, "link": "https://stackoverflow.com/questions/58199508/argumenterror-wrong-number-of-arguments-given-1-expected-0-after-adding-a-ne/58200198#58200198", "title": "ArgumentError: wrong number of arguments (given 1, expected 0) after adding a new middleware", "body": "<p><code>def initilize(app)</code> looks like a typo. Should be <code>initialize</code></p>\n"}], "owner": {"reputation": 22115, "user_id": 939986, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/591564c63c9b8b21f9c13cbddb7c000a?s=128&d=identicon&r=PG", "display_name": "Santosh Kumar", "link": "https://stackoverflow.com/users/939986/santosh-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1174, "favorite_count": 0, "accepted_answer_id": 58200198, "answer_count": 1, "score": 0, "last_activity_date": 1570014274, "creation_date": 1570011129, "question_id": 58199508, "link": "https://stackoverflow.com/questions/58199508/argumenterror-wrong-number-of-arguments-given-1-expected-0-after-adding-a-ne", "title": "ArgumentError: wrong number of arguments (given 1, expected 0) after adding a new middleware", "body": "<p>I don't have much understanding of the Rails framework. But I'm following a MOOC called <em>Web Application Development: Basic Concepts</em> on Coursera.</p>\n\n<p>The bootstrapped rails project is almost at the initial stage, and running <code>rails server</code> and <code>rake middleware</code> yields <code>0</code> as error code.</p>\n\n<p>Now I'll create a new file at <code>./lib/timer.rb</code> in root directory:</p>\n\n<pre><code>class Timer\n    def initilize(app)\n        @app = app\n    end\n\n    def call(env)\n        start = Time.now\n        status, headers, response = @app.call(env)\n        stop = Time.now\n        headers['X-Timing'] = (stop - stop).to_s\n        [status, headers, response]\n    end\nend\n</code></pre>\n\n<p>Now, I'll let the application know there's a new middleware in <code>./config/application.rb</code> :</p>\n\n<pre><code>require_relative 'boot'\nrequire 'rails/all'\nrequire_relative '../lib/timer'\n\nBundler.require(*Rails.groups)\n\nmodule Railsblog\n  class Application &lt; Rails::Application\n    # Initialize configuration defaults for originally generated Rails version.\n    config.load_defaults 6.0\n\n    config.middleware.insert_before(Rack::Sendfile, Timer)\n  end\nend\n</code></pre>\n\n<p>Now after <code>rake middleware</code>:</p>\n\n<pre><code>$ rake middleware --trace\n** Invoke middleware (first_time)\n** Invoke environment (first_time)\n** Execute environment\nrake aborted!\nArgumentError: wrong number of arguments (given 1, expected 0)\n/home/sntshk/coursera/railsblog/vendor/bundle/ruby/2.6.0/gems/actionpack-6.0.0/lib/action_dispatch/middleware/stack.rb:37:in `initialize'\n/home/sntshk/coursera/railsblog/vendor/bundle/ruby/2.6.0/gems/actionpack-6.0.0/lib/action_dispatch/middleware/stack.rb:37:in `new'\n/home/sntshk/coursera/railsblog/vendor/bundle/ruby/2.6.0/gems/actionpack-6.0.0/lib/action_dispatch/middleware/stack.rb:37:in `build'\n/home/sntshk/coursera/railsblog/vendor/bundle/ruby/2.6.0/gems/actionpack-6.0.0/lib/action_dispatch/middleware/stack.rb:131:in `block in build'\n/home/sntshk/coursera/railsblog/vendor/bundle/ruby/2.6.0/gems/actionpack-6.0.0/lib/action_dispatch/middleware/stack.rb:127:in `each'\n/home/sntshk/coursera/railsblog/vendor/bundle/ruby/2.6.0/gems/actionpack-6.0.0/lib/action_dispatch/middleware/stack.rb:127:in `inject'\n/home/sntshk/coursera/railsblog/vendor/bundle/ruby/2.6.0/gems/actionpack-6.0.0/lib/action_dispatch/middleware/stack.rb:127:in `build'\n/home/sntshk/coursera/railsblog/vendor/bundle/ruby/2.6.0/gems/railties-6.0.0/lib/rails/engine.rb:512:in `block in app'\n/home/sntshk/coursera/railsblog/vendor/bundle/ruby/2.6.0/gems/railties-6.0.0/lib/rails/engine.rb:508:in `synchronize'\n/home/sntshk/coursera/railsblog/vendor/bundle/ruby/2.6.0/gems/railties-6.0.0/lib/rails/engine.rb:508:in `app'\n/home/sntshk/coursera/railsblog/vendor/bundle/ruby/2.6.0/gems/railties-6.0.0/lib/rails/application/finisher.rb:97:in `block in &lt;module:Finisher&gt;'\n/home/sntshk/coursera/railsblog/vendor/bundle/ruby/2.6.0/gems/railties-6.0.0/lib/rails/initializable.rb:32:in `instance_exec'\n/home/sntshk/coursera/railsblog/vendor/bundle/ruby/2.6.0/gems/railties-6.0.0/lib/rails/initializable.rb:32:in `run'\n/home/sntshk/coursera/railsblog/vendor/bundle/ruby/2.6.0/gems/railties-6.0.0/lib/rails/initializable.rb:61:in `block in run_initializers'\n/usr/share/ruby/tsort.rb:228:in `block in tsort_each'\n/usr/share/ruby/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'\n/usr/share/ruby/tsort.rb:431:in `each_strongly_connected_component_from'\n/usr/share/ruby/tsort.rb:349:in `block in each_strongly_connected_component'\n/usr/share/ruby/tsort.rb:347:in `each'\n/usr/share/ruby/tsort.rb:347:in `call'\n/usr/share/ruby/tsort.rb:347:in `each_strongly_connected_component'\n/usr/share/ruby/tsort.rb:226:in `tsort_each'\n/usr/share/ruby/tsort.rb:205:in `tsort_each'\n/home/sntshk/coursera/railsblog/vendor/bundle/ruby/2.6.0/gems/railties-6.0.0/lib/rails/initializable.rb:60:in `run_initializers'\n/home/sntshk/coursera/railsblog/vendor/bundle/ruby/2.6.0/gems/railties-6.0.0/lib/rails/application.rb:363:in `initialize!'\n/home/sntshk/coursera/railsblog/config/environment.rb:5:in `&lt;main&gt;'\n/home/sntshk/coursera/railsblog/vendor/bundle/ruby/2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require'\n/home/sntshk/coursera/railsblog/vendor/bundle/ruby/2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `block in require_with_bootsnap_lfi'\n/home/sntshk/coursera/railsblog/vendor/bundle/ruby/2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/loaded_features_index.rb:92:in `register'\n/home/sntshk/coursera/railsblog/vendor/bundle/ruby/2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require_with_bootsnap_lfi'\n/home/sntshk/coursera/railsblog/vendor/bundle/ruby/2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require'\n/home/sntshk/coursera/railsblog/vendor/bundle/ruby/2.6.0/gems/zeitwerk-2.1.10/lib/zeitwerk/kernel.rb:23:in `require'\n/home/sntshk/coursera/railsblog/vendor/bundle/ruby/2.6.0/gems/activesupport-6.0.0/lib/active_support/dependencies.rb:325:in `block in require'\n/home/sntshk/coursera/railsblog/vendor/bundle/ruby/2.6.0/gems/activesupport-6.0.0/lib/active_support/dependencies.rb:291:in `load_dependency'\n/home/sntshk/coursera/railsblog/vendor/bundle/ruby/2.6.0/gems/activesupport-6.0.0/lib/active_support/dependencies.rb:325:in `require'\n/home/sntshk/coursera/railsblog/vendor/bundle/ruby/2.6.0/gems/railties-6.0.0/lib/rails/application.rb:339:in `require_environment!'\n/home/sntshk/coursera/railsblog/vendor/bundle/ruby/2.6.0/gems/railties-6.0.0/lib/rails/application.rb:515:in `block in run_tasks_blocks'\n/home/sntshk/.gem/ruby/gems/rake-12.3.3/lib/rake/task.rb:273:in `block in execute'\n/home/sntshk/.gem/ruby/gems/rake-12.3.3/lib/rake/task.rb:273:in `each'\n/home/sntshk/.gem/ruby/gems/rake-12.3.3/lib/rake/task.rb:273:in `execute'\n/home/sntshk/.gem/ruby/gems/rake-12.3.3/lib/rake/task.rb:214:in `block in invoke_with_call_chain'\n/usr/share/ruby/monitor.rb:230:in `mon_synchronize'\n/home/sntshk/.gem/ruby/gems/rake-12.3.3/lib/rake/task.rb:194:in `invoke_with_call_chain'\n/home/sntshk/.gem/ruby/gems/rake-12.3.3/lib/rake/task.rb:238:in `block in invoke_prerequisites'\n/home/sntshk/.gem/ruby/gems/rake-12.3.3/lib/rake/task.rb:236:in `each'\n/home/sntshk/.gem/ruby/gems/rake-12.3.3/lib/rake/task.rb:236:in `invoke_prerequisites'\n/home/sntshk/.gem/ruby/gems/rake-12.3.3/lib/rake/task.rb:213:in `block in invoke_with_call_chain'\n/usr/share/ruby/monitor.rb:230:in `mon_synchronize'\n/home/sntshk/.gem/ruby/gems/rake-12.3.3/lib/rake/task.rb:194:in `invoke_with_call_chain'\n/home/sntshk/.gem/ruby/gems/rake-12.3.3/lib/rake/task.rb:183:in `invoke'\n/home/sntshk/.gem/ruby/gems/rake-12.3.3/lib/rake/application.rb:160:in `invoke_task'\n/home/sntshk/.gem/ruby/gems/rake-12.3.3/lib/rake/application.rb:116:in `block (2 levels) in top_level'\n/home/sntshk/.gem/ruby/gems/rake-12.3.3/lib/rake/application.rb:116:in `each'\n/home/sntshk/.gem/ruby/gems/rake-12.3.3/lib/rake/application.rb:116:in `block in top_level'\n/home/sntshk/.gem/ruby/gems/rake-12.3.3/lib/rake/application.rb:125:in `run_with_threads'\n/home/sntshk/.gem/ruby/gems/rake-12.3.3/lib/rake/application.rb:110:in `top_level'\n/home/sntshk/.gem/ruby/gems/rake-12.3.3/lib/rake/application.rb:83:in `block in run'\n/home/sntshk/.gem/ruby/gems/rake-12.3.3/lib/rake/application.rb:186:in `standard_exception_handling'\n/home/sntshk/.gem/ruby/gems/rake-12.3.3/lib/rake/application.rb:80:in `run'\n/home/sntshk/.gem/ruby/gems/rake-12.3.3/exe/rake:27:in `&lt;top (required)&gt;'\n/home/sntshk/bin/rake:23:in `load'\n/home/sntshk/bin/rake:23:in `&lt;main&gt;'\nTasks: TOP =&gt; middleware =&gt; environment\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1570048047, "post_id": 58198503, "comment_id": 102795672, "body": "<code>nil</code> and quotes suggest you do something like <code>puts foo.inspect</code> somewhere."}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 2709745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4f3bc26d43aed9902dc4a97de38c3c3?s=128&d=identicon&r=PG", "display_name": "Winescout", "link": "https://stackoverflow.com/users/2709745/winescout"}, "is_accepted": false, "score": 0, "last_activity_date": 1570036788, "creation_date": 1570036788, "answer_id": 58206316, "question_id": 58198503, "link": "https://stackoverflow.com/questions/58198503/hackerrank-new-year-chaos-ruby-print-as-return/58206316#58206316", "title": "Hackerrank New Year Chaos - Ruby - Print as return", "body": "<p>Interesting problem to tackle.  The main difference between print and puts is the included newline with puts.  You want to use puts in this case.  Here's a good discussion on the topic: <a href=\"https://www.rubyguides.com/2018/10/puts-vs-print/\" rel=\"nofollow noreferrer\">https://www.rubyguides.com/2018/10/puts-vs-print/</a>  </p>\n\n<p>I'm not sure what was happening with the quotes you mention, so I'd update your solution with puts, and tackle the quotes next.</p>\n"}], "owner": {"reputation": 1, "user_id": 12152816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb48148f97a8c28b3cbdda0f2428901b?s=128&d=identicon&r=PG&f=1", "display_name": "ijreilly", "link": "https://stackoverflow.com/users/12152816/ijreilly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 183, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1570046518, "creation_date": 1570007362, "last_edit_date": 1570046518, "question_id": 58198503, "link": "https://stackoverflow.com/questions/58198503/hackerrank-new-year-chaos-ruby-print-as-return", "title": "Hackerrank New Year Chaos - Ruby - Print as return", "body": "<p>I am trying to solve <a href=\"https://www.hackerrank.com/challenges/new-year-chaos/problem\" rel=\"nofollow noreferrer\">HackerRank's 'New year Chaos' challenge</a>.\nThe script is supposed to print 'Too chaotic' in a certain case.\nRegardless of wether or not my solution is correct, my current problem is that I can't seem to print it as it will then return nil. My solution is not accepted either it I replace it with a puts as it will include quotes. </p>\n\n<pre><code>bribes = 0\nchaotic = false\n\n  q.each_with_index do |num, index|\n    if num - 1 - index &gt; 2\n      chaotic = true\n    elsif index == 0\n    else\n      bribes += q.slice(0, index).count { |x| x &gt; num }\n    end\n  end\n\n  return chaotic ? print('Too chaotic') : bribes\nend\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/XnkMJ.png\" rel=\"nofollow noreferrer\">Hacker rank output</a></p>\n\n<p>thanks!</p>\n"}, {"tags": ["ruby", "ubuntu"], "answers": [{"tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 0, "last_activity_date": 1570008341, "creation_date": 1570008341, "answer_id": 58198736, "question_id": 58198425, "link": "https://stackoverflow.com/questions/58198425/how-to-install-ruby-2-5-1p57-on-ubuntu-16-04-without-rben-or-rvm/58198736#58198736", "title": "How to install ruby 2.5.1p57 on ubuntu 16.04 without rben or rvm?", "body": "<p>Use <a href=\"https://github.com/postmodern/ruby-install\" rel=\"nofollow noreferrer\"><code>ruby-install</code></a></p>\n\n<pre><code>ruby-install ruby 2.5.1\n</code></pre>\n\n<p><a href=\"https://github.com/postmodern/ruby-install#install\" rel=\"nofollow noreferrer\">Installation instructions</a></p>\n"}], "owner": {"reputation": 842, "user_id": 3045354, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/100003009873027/picture?type=large", "display_name": "Midhun Sudhakar", "link": "https://stackoverflow.com/users/3045354/midhun-sudhakar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 191, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1570008443, "creation_date": 1570007063, "last_edit_date": 1570008443, "question_id": 58198425, "link": "https://stackoverflow.com/questions/58198425/how-to-install-ruby-2-5-1p57-on-ubuntu-16-04-without-rben-or-rvm", "title": "How to install ruby 2.5.1p57 on ubuntu 16.04 without rben or rvm?", "body": "<p>I am able not to install ruby 2.5.1 on ubuntu 16.04 without <code>rvm</code> or <code>rbenv</code>. I don't want to use <code>rvm</code> or <code>rbenv</code>.</p>\n"}, {"tags": ["ruby", "rubygems", "gemfile", "gemfile.lock"], "comments": [{"owner": {"reputation": 2307, "user_id": 219594, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/87b214a1096bea2042c331b63eb1fa22?s=128&d=identicon&r=PG", "display_name": "andrykonchin", "link": "https://stackoverflow.com/users/219594/andrykonchin"}, "edited": false, "score": 0, "creation_date": 1570098342, "post_id": 58197998, "comment_id": 102810369, "body": "It isn&#39;t clear what you mean when say &quot;Is it recommended to add gem stuff to the project? Is a good practice?&quot;. Do you need to use a library (moved to a gem) in your project and you are asking about how to add to the project?"}, {"owner": {"reputation": 4426, "user_id": 5300329, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh3.googleusercontent.com/-ED2Y0YdnPoU/AAAAAAAAAAI/AAAAAAAAARY/inM3zvRnhsU/photo.jpg?sz=128", "display_name": "OscarAkaElvis", "link": "https://stackoverflow.com/users/5300329/oscarakaelvis"}, "reply_to_user": {"reputation": 2307, "user_id": 219594, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/87b214a1096bea2042c331b63eb1fa22?s=128&d=identicon&r=PG", "display_name": "andrykonchin", "link": "https://stackoverflow.com/users/219594/andrykonchin"}, "edited": false, "score": 0, "creation_date": 1570128752, "post_id": 58197998, "comment_id": 102825603, "body": "Thanks for answering. I&#39;m asking if it worths to add the gem files to the project. For now my project just has markdown files and one .rb file. Nothing about gemspec file which I use to release the gem on each version. Should I add this gemspec file to the github repository?"}], "owner": {"reputation": 4426, "user_id": 5300329, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh3.googleusercontent.com/-ED2Y0YdnPoU/AAAAAAAAAAI/AAAAAAAAARY/inM3zvRnhsU/photo.jpg?sz=128", "display_name": "OscarAkaElvis", "link": "https://stackoverflow.com/users/5300329/oscarakaelvis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1570005378, "creation_date": 1570005378, "question_id": 58197998, "link": "https://stackoverflow.com/questions/58197998/best-practice-for-ruby-project-and-gemification", "title": "Best practice for ruby project and gemification", "body": "<p>I'm pretty new at Ruby. I have a Ruby project placed at Github. I created independently a ruby gem which I update manually on each release. To create it I just created only a gemspec file and It worked fine and I published it as ruby gem. My project doesn't have any gemfile. Is it recommended to add gem stuff to the project? Is a good practice?</p>\n\n<p>In case of yes, I have a gemspec file which I could add to the repo. Could it be needed also a Gemfile, Gemlock file or anything else? because if yes, I don't have any of them, just the gemspec file. No idea about what could be the best option to \"gemification\"? Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "ruby-on-rails-5", "paper-trail-gem"], "answers": [{"tags": [], "owner": {"reputation": 1112, "user_id": 5892163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4Tfz7.jpg?s=128&g=1", "display_name": "Hackman", "link": "https://stackoverflow.com/users/5892163/hackman"}, "is_accepted": true, "score": 1, "last_activity_date": 1570006159, "creation_date": 1570006159, "answer_id": 58198198, "question_id": 58197732, "link": "https://stackoverflow.com/questions/58197732/restore-main-object-to-a-specific-version-by-using-paper-trail/58198198#58198198", "title": "restore main Object to a Specific Version by using Paper Trail", "body": "<p>The docs says that each version also has an created_at attribute. So you can find the version at a given time:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>widget = widget.paper_trail.version_at(1.day.ago)  # the widget as it was one day ago\nwidget.save                                        # reverted\n</code></pre>\n\n<p>If you know what version the user wants, you also know the created_at so that way you can set it to the correct version.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>wanted_version = # Find the correct version that the user wants\nwidget = widget.paper_trail.version_at(wanted_version.created_at)\nwidget.save\n</code></pre>\n"}], "owner": {"reputation": 973, "user_id": 1659370, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/6d120a0452ccef4756d5e1af5ae01383?s=128&d=identicon&r=PG", "display_name": "kashif", "link": "https://stackoverflow.com/users/1659370/kashif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 58198198, "answer_count": 1, "score": 1, "last_activity_date": 1570006159, "creation_date": 1570004367, "question_id": 58197732, "link": "https://stackoverflow.com/questions/58197732/restore-main-object-to-a-specific-version-by-using-paper-trail", "title": "restore main Object to a Specific Version by using Paper Trail", "body": "<p>How I can apply changes present in specific version to the main Object?</p>\n\n<p><strong>For Example:</strong></p>\n\n<p>Let's say there is a Project model. Whenever a Project Record gets updated, system creates a version. Now I've a requirement where user can move this project record to any specific version and <strong>ONLY</strong> <strong>update</strong> all attributes which were changed during that Version.</p>\n\n<pre><code> Project 1 has following Versions:\n  V5 \n  V4\n  V3\n  V2\n  V1\n\n if user wants he can move Project to any of these 5 Versions and apply the changes \n made in that version in project record.\n</code></pre>\n\n<p>I'm using</p>\n\n<p><strong>ruby 2.5.3, Rails 5.1.6.2 &amp; paper_trail (10.3.0)</strong></p>\n"}, {"tags": ["ruby", "rspec", "capybara", "ui-automation", "site-prism"], "answers": [{"tags": [], "owner": {"reputation": 373, "user_id": 6800247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3060495c5d90b4295387d6df3b959966?s=128&d=identicon&r=PG&f=1", "display_name": "Luke Hill", "link": "https://stackoverflow.com/users/6800247/luke-hill"}, "is_accepted": false, "score": 0, "last_activity_date": 1586252523, "creation_date": 1586252523, "answer_id": 61077078, "question_id": 58196316, "link": "https://stackoverflow.com/questions/58196316/how-to-run-a-rspec-scenario-with-multiple-tags/61077078#61077078", "title": "How to run a Rspec scenario with multiple tags?", "body": "<p>You are looking for the propositional logic which combines the two (AND). In most runners this the space character as you've put.</p>\n\n<p>Try just running `rspec . --tag smoke --tag ae and then go from there with your debugging.</p>\n"}], "owner": {"reputation": 11, "user_id": 12056759, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xUcuHLtnJW8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfpz89jXHUzX5jjiYlghcjAt0QXsQ/photo.jpg?sz=128", "display_name": "Heera Singh", "link": "https://stackoverflow.com/users/12056759/heera-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1586252523, "creation_date": 1569998244, "last_edit_date": 1569998664, "question_id": 58196316, "link": "https://stackoverflow.com/questions/58196316/how-to-run-a-rspec-scenario-with-multiple-tags", "title": "How to run a Rspec scenario with multiple tags?", "body": "<p>I am using ruby client for web automation with selenium. I am running them parallel using parallel_rspec. I want to run the tests which has <code>smoke</code> and <code>ae</code> tags set.</p>\n\n<p>My scenarios looks like:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>scenario 'Test1', :smoke, :regression, :ae do\n  \"do something\"\nend\n\nscenario 'Test2', :smoke, :bh do\n  \"do something\"\nend\n\nscenario 'Test3', :smoke, :ae, :bh do\n  \"do something\"\nend\n</code></pre>\n\n<p>I am executing them like:</p>\n\n<pre><code>parallel_rspec spec/**/*_spec.rb -o '--tag smoke --tag ae --format progress --format ParallelTests::RSpec::RuntimeLogger --out tmp/parallel_runtime_rspec.log -f json -o tmp/AE/run$TEST_ENV_NUMBER.json' -n 3\n</code></pre>\n\n<p>But I found it does not pick the right candidates for run Test1 and Test3. my goal is to run only the tests which has tag smoke and ae.</p>\n\n<p>Please suggest if you have done something similar to it.</p>\n"}, {"tags": ["ruby", "jekyll", "jekyll-extensions", "termux"], "comments": [{"owner": {"reputation": 1501, "user_id": 7490367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nKAJX.png?s=128&g=1", "display_name": "Pardeep", "link": "https://stackoverflow.com/users/7490367/pardeep"}, "edited": false, "score": 0, "creation_date": 1569995514, "post_id": 58195772, "comment_id": 102770115, "body": "this question should not be posted here"}, {"owner": {"reputation": 15523, "user_id": 274502, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c6768f8be92fe851f2a5502fb9845778?s=128&d=identicon&r=PG", "display_name": "cregox", "link": "https://stackoverflow.com/users/274502/cregox"}, "reply_to_user": {"reputation": 1501, "user_id": 7490367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nKAJX.png?s=128&g=1", "display_name": "Pardeep", "link": "https://stackoverflow.com/users/7490367/pardeep"}, "edited": false, "score": 0, "creation_date": 1570463026, "post_id": 58195772, "comment_id": 102912541, "body": "@pardeep perhaps it should be there? <a href=\"https://github.com/termux/termux-packages/issues/2340\" rel=\"nofollow noreferrer\">github.com/termux/termux-packages/issues/2340</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4449, "user_id": 7681659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47bc1a3b7231505d61b7f80642bc1a14?s=128&d=identicon&r=PG&f=1", "display_name": "ashmaroli", "link": "https://stackoverflow.com/users/7681659/ashmaroli"}, "reply_to_user": {"reputation": 15523, "user_id": 274502, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c6768f8be92fe851f2a5502fb9845778?s=128&d=identicon&r=PG", "display_name": "cregox", "link": "https://stackoverflow.com/users/274502/cregox"}, "edited": false, "score": 0, "creation_date": 1570517211, "post_id": 58196305, "comment_id": 102928212, "body": "Try <code>gem install jekyll --version 3.8.6</code>"}, {"owner": {"reputation": 15523, "user_id": 274502, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c6768f8be92fe851f2a5502fb9845778?s=128&d=identicon&r=PG", "display_name": "cregox", "link": "https://stackoverflow.com/users/274502/cregox"}, "edited": false, "score": 1, "creation_date": 1571570034, "post_id": 58196305, "comment_id": 103278054, "body": "i ended up giving up. there were way too many problems to be resolved and worth the trouble. hope someone will do an app for this, eventually... or i&#39;ll just find a better solution! plus, termux was taking over 3gb already!! :D"}], "tags": [], "owner": {"reputation": 4449, "user_id": 7681659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47bc1a3b7231505d61b7f80642bc1a14?s=128&d=identicon&r=PG&f=1", "display_name": "ashmaroli", "link": "https://stackoverflow.com/users/7681659/ashmaroli"}, "is_accepted": false, "score": 2, "last_activity_date": 1569998199, "creation_date": 1569998199, "answer_id": 58196305, "question_id": 58195772, "link": "https://stackoverflow.com/questions/58195772/how-can-fix-the-jekyll-installation-error-in-termux/58196305#58196305", "title": "How can fix the Jekyll installation error in termux?", "body": "<p>Apparently the <a href=\"https://wiki.termux.com/wiki/List_of_Ruby_packages_known_to_work\" rel=\"nofollow noreferrer\">Termux Wiki</a> has documented the following with Jekyll as an example:</p>\n\n<blockquote>\n  <h2>Instructions</h2>\n  \n  <p>Firstly you need to install all packages in the \"pkg requirements\" row. Example for Jekyll:</p>\n\n<pre><code>pkg install ruby clang make libffi\n</code></pre>\n  \n  <p>Then you need to follow the special instructions. If no special instructions are given, you can install the package with:</p>\n\n<pre><code>gem install jekyll\n</code></pre>\n  \n  <p>Note (friendly reminder) for the gems that build native extensions make sure you have a build environment ready; a minimum can be achieved by running:</p>\n\n<pre><code>pkg install autoconf build-essential\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 21, "user_id": 12151969, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAdG_oTi_g51ioSHQaIhCC1HpmALoJa3RGJpehUcbM=k-s128", "display_name": "Jay Prakash", "link": "https://stackoverflow.com/users/12151969/jay-prakash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 398, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1569998199, "creation_date": 1569994759, "question_id": 58195772, "link": "https://stackoverflow.com/questions/58195772/how-can-fix-the-jekyll-installation-error-in-termux", "title": "How can fix the Jekyll installation error in termux?", "body": "<p>I am having Jekyll installation error in termux on my android phone. When I am trying to install it's failing to build gem native extension for termux....Jekyll installation code in termux</p>\n"}, {"tags": ["ruby", "class", "overriding"], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1569992370, "post_id": 58194732, "comment_id": 102769316, "body": "<code>File.read</code> nobody promised there is the file. Also, ruby classes <i>are open</i> and the definition of the method might appear anywhere in any required file with any name."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12132075"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1570013383, "post_id": 58194732, "comment_id": 102777913, "body": "I don&#39;t understand: &quot;nobody promised there is the file&quot;. also, this is assuming you define your class methods like regular people do, without using <code>class.send(:define_method, foo_bar)</code> or similar tricks."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1570014056, "post_id": 58194732, "comment_id": 102778212, "body": "The good code must work in REPL when there is no source file, as well as with all the ways the method might be defined."}, {"owner": {"reputation": 1119, "user_id": 11714860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6Xo3.png?s=128&g=1", "display_name": "Sapphire_Brick", "link": "https://stackoverflow.com/users/11714860/sapphire-brick"}, "edited": false, "score": 0, "creation_date": 1570014558, "post_id": 58194732, "comment_id": 102778464, "body": "most normal people do not define important classes inside the REPL part, and even if they do, you could <i>certainly</i> do something simpler, but the idea of this one is that it works almost like Java&#39;s <code>@override</code>, on any class."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1570015429, "post_id": 58194732, "comment_id": 102778868, "body": "No it does not. Java is a compiled language, unlike ruby. The easiest way to have users of your code to hate you would be to imply limitations like above. Anyone reopening the class to add new functions should not suffer from that neither you nor the answer poster barely understand how ruby works and what it was designed for."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12132075"}, "edited": false, "score": 0, "creation_date": 1570210467, "post_id": 58194732, "comment_id": 102854137, "body": "are you saying Ruby just shouldn&#39;t have an @override? your argument is quite confusing; The above code works, isn&#39;t that %90+ of what matters as an answer?"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user12132075"}, "is_accepted": true, "score": 0, "last_activity_date": 1570211011, "last_edit_date": 1570211011, "creation_date": 1569985769, "answer_id": 58194732, "question_id": 58194668, "link": "https://stackoverflow.com/questions/58194668/is-it-possible-to-replicate-the-override-annotation-from-java-in-ruby/58194732#58194732", "title": "Is it possible to replicate the Override Annotation from Java in Ruby?", "body": "<p>this works, but it's a little verbose:</p>\n\n<pre><code>class OverrideError &lt; StandardError\n    def initialize a\n        super(\"the superclass of `#{a[0]}`(`#{a[0].superclass}`) does not contain the method that has been attempeted to Override: `#{a[1]}`\")\n    end\nend\n\n#this function help the _override_ function ignore string literals\ndef delQ str\n    str = str.gsub(/(\".*\"|'.*'|\\%[qQ]?\\{.*\\})/, \"\")\n    while /\\= ?\\&lt;\\&lt;\\-?[\\w\\_\\?\\!]+ /.match?(str)\n        x = /\\= ?\\&lt;\\&lt;\\-?[\\w\\_\\?\\!]+ /.match(str)[0]\n        stopname = x.sub(/\\= ?\\&lt;\\&lt;\\-?/, \"\")\n        locat = str =~ /\\= ?\\&lt;\\&lt;\\-?[\\w\\_\\?\\!]+ .*/\n        part = str.slice(locat)\n        stop = part =~ %r{stopname}\n        part1 = part.sub(%r{x + \".*\" + stopname}, \"\")\n        str = str.sub(part, part1)\n    end\n    return str\nend\n\ndef _override_\n    file = File.read(\"./\" + caller[0][/[^:]+/]).split(\"\\n\")\n    loc = (caller[0].to_s.scan(/\\d+/).first).to_i\n    line = file[loc]\n    method = /def (self(\\.|::))?[\\w\\_\\?\\!]+/.match(line)[0]\n    method = method.gsub(/(def|self|\\.|::|\\s)/, \"\")\n    clname = \"\"\n    file = file.join(\"\\n\")\n    file = delQ(file)\n    file = file.split(\"\\n\")\n    while loc &gt;= 0\n        substr = file[loc].gsub(/(\\t|\\n)/, \"\")\n        if substr.start_with?(\"class \")\n            clname = file[loc].gsub(/\\t/, \"\").sub(\"class \", \"\")\n            clname = /[\\w_\\?\\!]+/.match(clname)[0]\n            break\n        end\n        loc -= 1\n    end\n    clname = Kernel.const_get(clname)\n    hmm = clname.superclass.method_defined?(method.to_sym)\n    unless hmm\n        raise OverrideError, [clname, method]\n    end\nend\n</code></pre>\n\n<p>A demonstration on how this will be used:</p>\n\n<pre><code>class Animal\n    def initialize name\n        @name = name\n    end\n    def speak\n        puts \"Hello!\"\n    end\nend\nclass Dog &lt; Animal\n    def initialize name\n        super name\n    end\n    _override_\n    def speak\n        # no error\n        puts \"woof!\"\n    end\n    _override_ \n    def eat\n\n\n#Traceback (most recent call last):\n#   2: from main.rb:11:in `&lt;main&gt;'\n#   1: from main.rb:19:in `&lt;class:Dog&gt;'\n#/home/runner/Annotations/override.rb:41:in `_override_': the superclass #of `Dog`(`Animal`) does not contain the method that has been attempted #to Override: `eat` (OverrideError)\n\n\n        puts \"omnomnom\"\n    end\nend\n\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1119, "user_id": 11714860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6Xo3.png?s=128&g=1", "display_name": "Sapphire_Brick", "link": "https://stackoverflow.com/users/11714860/sapphire-brick"}, "edited": false, "score": 0, "creation_date": 1570014888, "post_id": 58195355, "comment_id": 102778600, "body": "That&#39; s really clever."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1570017597, "post_id": 58195355, "comment_id": 102779985, "body": "A method definition expression evaluates to a <code>Symbol</code> denoting the name of the method being defined. Therefore, you can also write <code>override def speak; end</code>. You should change <code>override</code> to return its arguments, that way, you can then also write something like <code>private override def speak; end</code>."}, {"owner": {"reputation": 1119, "user_id": 11714860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6Xo3.png?s=128&g=1", "display_name": "Sapphire_Brick", "link": "https://stackoverflow.com/users/11714860/sapphire-brick"}, "edited": false, "score": 0, "creation_date": 1572137237, "post_id": 58195355, "comment_id": 103467523, "body": "I wanted to replicate to be as similar as possible to the Java&#39;s <code>@override</code>, but that&#39;s a nice idea."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1569991945, "last_edit_date": 1569991945, "creation_date": 1569991637, "answer_id": 58195355, "question_id": 58194668, "link": "https://stackoverflow.com/questions/58194668/is-it-possible-to-replicate-the-override-annotation-from-java-in-ruby/58195355#58195355", "title": "Is it possible to replicate the Override Annotation from Java in Ruby?", "body": "<p>That would be relatively easy with a class method defined on the top-level eigenclass.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Animal\n  def speak; :ok; end\n\n  def self.override *ms\n    ms = ms - Animal.instance_methods\n    puts \"\u26a0\ufe0f #{ms.inspect} method(s) missing \" \\\n         \"in #{self}\u2019s ancestors\" unless ms.empty?\n  end\nend\n\nclass Dog &lt; Animal\n  override :speak\n  def speak; :ok; end\n\n  override :eat\n  def eat; :ok; end\nend\n</code></pre>\n\n<p>The above would print </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># \u26a0\ufe0f [:eat] method(s) missing in Dog\u2019s ancestors\n</code></pre>\n\n<p>The call to <code>override</code> here is similar to call to <a href=\"https://ruby-doc.org/core/Module.html#method-i-module_function\" rel=\"nofollow noreferrer\"><code>Module#module_function</code></a> with an argument and might be placed anywhere in the code, accepting as many method names as needed.</p>\n\n<p>It might be also accomplished with eigenclass instance variable to make it look more like java version.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Animal\n  def speak\n    :ok\n  end\n\n  def self.inherited(base)\n    base.instance_variable_set(:@override, -&gt;(*ms) {\n      ms = ms - Animal.instance_methods\n      puts \"\u26a0\ufe0f #{ms.inspect} method(s) without super\" \\\n        unless ms.empty?\n    })\n  end\nend\n\nclass Dog &lt; Animal\n  @override[:speak]\n  def speak; :ok; end\n\n  @override[:eat]\n  def eat; :ok; end\nend\n</code></pre>\n\n<hr>\n\n<p>It is also possible to <em>fully</em> replicate Java syntax with a help of <a href=\"https://ruby-doc.org/core/TracePoint.html\" rel=\"nofollow noreferrer\"><code>TracePoint</code></a> and/or <a href=\"https://ruby-doc.org/core/Module.html#method-i-method_added\" rel=\"nofollow noreferrer\"><code>Module#method_added</code></a> but I find it less explicit and would avoid in favor of direct method name passing as shown above.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user12132075"}, "edited": false, "score": 0, "creation_date": 1570936656, "post_id": 58199088, "comment_id": 103072751, "body": "What&#39;s the point of making a module out of just one function? it doesn&#39;t make it &quot;more reusable&quot;/"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1570994462, "post_id": 58199088, "comment_id": 103084251, "body": "Say you have the classes <code>Vehicle</code> and <code>Car</code> where you would like the same behaviour. You can simply extend the module. When this method is added to the class <code>Animal</code>, you&#39;ll have to let <code>Vehicle</code> inherit from <code>Animal</code>, which I find a weird thing to do."}, {"owner": {"reputation": 1119, "user_id": 11714860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6Xo3.png?s=128&g=1", "display_name": "Sapphire_Brick", "link": "https://stackoverflow.com/users/11714860/sapphire-brick"}, "edited": false, "score": 0, "creation_date": 1572137146, "post_id": 58199088, "comment_id": 103467512, "body": "The other answers don&#39;t require any mixins, they allow it to work wherever it&#39;s used, otherwise you could just manually put in the name of the class and its superclass."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 1119, "user_id": 11714860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6Xo3.png?s=128&g=1", "display_name": "Sapphire_Brick", "link": "https://stackoverflow.com/users/11714860/sapphire-brick"}, "edited": false, "score": 0, "creation_date": 1572137733, "post_id": 58199088, "comment_id": 103467585, "body": "@Rhodochrosite-613 Because the <a href=\"https://stackoverflow.com/a/58194732/3982562\">answer of user12132075</a> defines a method in the global namespace. The <a href=\"https://stackoverflow.com/a/58195355/3982562\">answer of Aleksei Matiushkin</a> only works as long as you&#39;re inheriting from <code>Animal</code>."}, {"owner": {"reputation": 1119, "user_id": 11714860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6Xo3.png?s=128&g=1", "display_name": "Sapphire_Brick", "link": "https://stackoverflow.com/users/11714860/sapphire-brick"}, "edited": false, "score": 0, "creation_date": 1572138090, "post_id": 58199088, "comment_id": 103467634, "body": "I don&#39;t understand why it would matter regarding the global namespace, do you want it to throw an error if it no class is found or a class is found that has no superclasses?_________ Also, fine, but why mention &quot;reusability&quot; rather than &quot;necessity&quot;?"}], "tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": -1, "last_activity_date": 1570009550, "creation_date": 1570009550, "answer_id": 58199088, "question_id": 58194668, "link": "https://stackoverflow.com/questions/58194668/is-it-possible-to-replicate-the-override-annotation-from-java-in-ruby/58199088#58199088", "title": "Is it possible to replicate the Override Annotation from Java in Ruby?", "body": "<p>Taking the <a href=\"https://stackoverflow.com/a/58195355/3982562\">answer of Aleksei Matiushkin</a>, you could make this more reusable by moving it into a module.</p>\n\n<pre><code>module Overridable\n  def override(*methods)\n    diff = methods - superclass.instance_methods\n    return if diff.empty?\n    puts \"\u26a0 #{diff.inspect} method(s) missing from #{superclass}\"\n  end\nend\n</code></pre>\n\n<p>You can extend the module in the base class <code>Animal</code>, this way all subclasses inheriting from <code>Animal</code> have the <code>override</code> method. Or you could choose to only extend a specific subclass.</p>\n\n<pre><code>class Animal\n  # make :override available in all subclasses\n  extend Overridable\nend\n</code></pre>\n\n<p>Or assuming the above isn't set.</p>\n\n<pre><code>class Dog &lt; Animal\n  # make :override available in only this subclass\n  extend Overridable\nend\n</code></pre>\n"}], "owner": {"reputation": 1119, "user_id": 11714860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6Xo3.png?s=128&g=1", "display_name": "Sapphire_Brick", "link": "https://stackoverflow.com/users/11714860/sapphire-brick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 1, "accepted_answer_id": 58194732, "answer_count": 3, "score": 0, "last_activity_date": 1574819172, "creation_date": 1569985019, "last_edit_date": 1574819172, "question_id": 58194668, "link": "https://stackoverflow.com/questions/58194668/is-it-possible-to-replicate-the-override-annotation-from-java-in-ruby", "title": "Is it possible to replicate the Override Annotation from Java in Ruby?", "body": "<p>I know that in Java, the Override annotation checks if the superclass has the method:</p>\n\n<pre><code>class Animal {\n  public void speak () {\n    System.out.println(\"Hello!\");\n  }\n}\nclass Dog extends Animal {\n  @override\n  public void eat () { //this kind of stuff\n    System.out.println(\"omnomnom\");\n  }\n}\n</code></pre>\n\n<p>is there a way to do this in Ruby (as a function or something)?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 292, "user_id": 12132097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gtb2S.jpg?s=128&g=1", "display_name": "Joaqu&#237;n", "link": "https://stackoverflow.com/users/12132097/joaqu%c3%adn"}, "edited": false, "score": 0, "creation_date": 1569996160, "post_id": 58195361, "comment_id": 102770313, "body": "thanks,I completely forgot about that .save &lt;3 now it works as it supposed to"}], "tags": [], "owner": {"reputation": 303, "user_id": 9479253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cd34f4996365a59ad414df6950d6d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ashok Damaniya", "link": "https://stackoverflow.com/users/9479253/ashok-damaniya"}, "is_accepted": true, "score": 1, "last_activity_date": 1569991729, "creation_date": 1569991729, "answer_id": 58195361, "question_id": 58194605, "link": "https://stackoverflow.com/questions/58194605/how-to-display-data-and-form-in-the-same-page/58195361#58195361", "title": "How to display data and form in the same page", "body": "<p>change create method to this </p>\n\n<pre><code>def create\n  @post = Post.new(post_params)\n  @post.save\n  redirect_to posts_path\nend\n</code></pre>\n"}], "owner": {"reputation": 292, "user_id": 12132097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gtb2S.jpg?s=128&g=1", "display_name": "Joaqu&#237;n", "link": "https://stackoverflow.com/users/12132097/joaqu%c3%adn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 58195361, "answer_count": 1, "score": 0, "last_activity_date": 1569991729, "creation_date": 1569984401, "question_id": 58194605, "link": "https://stackoverflow.com/questions/58194605/how-to-display-data-and-form-in-the-same-page", "title": "How to display data and form in the same page", "body": "<p>I'm working on a blog and i want to display data and the submit form in the same page, i already have some code but somehow when i press the submit button the data is not being updated on the page</p>\n\n<p>Here is the code in index.html.erb:</p>\n\n<pre><code>\n\n&lt;table&gt;\n    &lt;tr&gt;\n        &lt;td&gt;Titulo&lt;/td&gt;\n        &lt;td&gt;Texto&lt;/td&gt;\n    &lt;/tr&gt;\n\n    &lt;% @posts.each do |post| %&gt;\n    &lt;tr&gt;\n        &lt;td&gt;&lt;%= post.titulo %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= post.text %&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;% end %&gt;\n&lt;/table&gt;    \n\n&lt;%= form_for @post do |f| %&gt;\n    &lt;p&gt;\n        &lt;%= f.label :titulo, \"Titulo del post\" %&gt;&lt;br&gt;\n        &lt;%= f.text_field :titulo %&gt;\n    &lt;/p&gt;\n\n    &lt;p&gt;\n        &lt;%= f.label :text, \"Contenido\" %&gt;&lt;br&gt;\n        &lt;%= f.text_area :text %&gt;&lt;br&gt;\n    &lt;/p&gt;\n\n    &lt;p&gt;\n        &lt;%= f.submit \"Publicar\"%&gt;\n    &lt;/p&gt;\n&lt;%end%&gt;\n\n&lt;%= render @posts %&gt;\n</code></pre>\n\n<p>and this is the controller for posts:</p>\n\n<pre><code>class PostsController &lt; ApplicationController\n\n\n    def index\n        @post = Post.new\n        @posts = Post.all\n    end\n\n    def new\n    end\n\n    def create\n        @post = Post.new(post_params)\n        redirect_to posts_path\n    end\n\n    def show\n        @post = Post.find(params[:id])\n    end\n\n    private \n        def post_params\n            params.require(:post).permit(:titulo, :text)\n        end\nend\n</code></pre>\n\n<p>now is showing all the data i created before doing this (because i used the basics of ruby like CRUD ), also i dont know if i have to do something in the \"new\" def</p>\n"}, {"tags": ["ruby", "postgresql", "graphql"], "answers": [{"tags": [], "owner": {"reputation": 508, "user_id": 315829, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/263b956f8732abf0a129c8b493e2b473?s=128&d=identicon&r=PG", "display_name": "Ben Wiseley", "link": "https://stackoverflow.com/users/315829/ben-wiseley"}, "is_accepted": false, "score": 0, "last_activity_date": 1569974228, "last_edit_date": 1569974228, "creation_date": 1569972537, "answer_id": 58193485, "question_id": 58193484, "link": "https://stackoverflow.com/questions/58193484/how-do-you-decode-graphqlschemauniquewithintype-in-postgres/58193485#58193485", "title": "How do you decode GraphQL::Schema::UniqueWithinType in Postgres?", "body": "<p>Ruby:</p>\n\n<pre><code>GraphQL::Schema::UniqueWithinType.default_id_separator = '|'\nrelay_id = GraphQL::Schema::UniqueWithinType.encode('User', '123')\n# \"VXNlcnwxMjM=\"\nBase64.decode64(relay_id)\n# \"User|123\"\n</code></pre>\n\n<p>To get \"123\" out of \"VXNlcnwxMjM=\" in Postgres SQL you can do this horror show</p>\n\n<pre><code>select  \n    substring(\n        (decode('VXNlcnwxMjM=', 'base64')::text)\n        from (char_length('User|') + 1)\n        for (char_length(decode('VXNlcnwxMjM=', 'base64')::text) - char_length('User|'))\n    )::int\n</code></pre>\n\n<p>Edit: Playing around with this ... on Postgres 9.6.5 the above works... but our staging server is 10.5 and I had to do this instead (which also works on 9.6.5)</p>\n\n<pre><code>select  \n    substring(\n        convert_from(decode('VXNlcnwxMjM=', 'base64'), 'UTF-8')\n        from (char_length('User|') + 1)\n        for (char_length(convert_from(decode('VXNlcnwxMjM=', 'base64'), 'UTF-8')) - char_length('User|'))\n    )::int\n</code></pre>\n"}], "owner": {"reputation": 508, "user_id": 315829, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/263b956f8732abf0a129c8b493e2b473?s=128&d=identicon&r=PG", "display_name": "Ben Wiseley", "link": "https://stackoverflow.com/users/315829/ben-wiseley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569974228, "creation_date": 1569972537, "question_id": 58193484, "link": "https://stackoverflow.com/questions/58193484/how-do-you-decode-graphqlschemauniquewithintype-in-postgres", "title": "How do you decode GraphQL::Schema::UniqueWithinType in Postgres?", "body": "<p>Say someone evil stored an encoded id in your database and you needed to use it. Example:</p>\n\n<p>Ruby:</p>\n\n<pre><code>GraphQL::Schema::UniqueWithinType.default_id_separator = '|'\nrelay_id = GraphQL::Schema::UniqueWithinType.encode('User', '123')\n# \"VXNlcnwxMjM=\"\n</code></pre>\n\n<p>How do I get <code>123</code> out of <code>VXNlcnwxMjM=</code> in Postgres?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 940, "user_id": 5788024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/13mIY.png?s=128&g=1", "display_name": "CaTs", "link": "https://stackoverflow.com/users/5788024/cats"}, "edited": false, "score": 1, "creation_date": 1569971154, "post_id": 58193098, "comment_id": 102765798, "body": "Why would it return <code>10010</code> and <code>10011</code>? Those are the whole values as opposed to a prefix right?"}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1569983455, "post_id": 58193098, "comment_id": 102767834, "body": "I don&#39;t understand the logic. Why wouldn&#39;t it return only 100? it&#39;s the common prefix of all number. If you want 4 digits, why wouldn&#39;t it return only 1000 and 1001? since 10010 and 10011 share the same prefix. Your example is not clear."}, {"owner": {"reputation": 151, "user_id": 1548508, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5c395dceaac2d4db90a38013d6446767?s=128&d=identicon&r=PG", "display_name": "Peter Devlin", "link": "https://stackoverflow.com/users/1548508/peter-devlin"}, "edited": false, "score": 0, "creation_date": 1569985955, "post_id": 58193098, "comment_id": 102768239, "body": "Hi! Thanks for your comments. CaTs your solution is almost right! Common zip code syntax is &quot;Starts With&quot; so if a zip code &quot;starts with&quot; 1000. It will match 10000-10009. However it must return 10010 and 10011, as 10012-10019 are not present. Therefore the starts with 1001 would match the wrong zip codes"}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1569988389, "post_id": 58193098, "comment_id": 102768642, "body": "I think you are not explaining your problem right, you don&#39;t want a list of prefixes, you want something like a regular expression to match all (and only) the elements of the array. But you are not giving proper context, what are the possible values, lengths and ranges? would you have letters? you should give more examples and explain it better."}, {"owner": {"reputation": 151, "user_id": 1548508, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5c395dceaac2d4db90a38013d6446767?s=128&d=identicon&r=PG", "display_name": "Peter Devlin", "link": "https://stackoverflow.com/users/1548508/peter-devlin"}, "edited": false, "score": 0, "creation_date": 1569990252, "post_id": 58193098, "comment_id": 102768936, "body": "You are right! Sorry about that. I&#39;ve added another example. 5 digits, ints only, for a possible range of 00000-99999. Each zip code will be written out in full and I want to reduce it to the starts with context."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1570062193, "post_id": 58193098, "comment_id": 102799071, "body": "If you want to deal with UK postal codes in a similar way you should post a separate question. Among other things you would need to explain the format of those codes, and you should give a substantial example (<code>arr = [...]</code>) and show the desired return value (array) for that example. Assigning a variable to the array of UK postal codes, as I have done above (<code>arr = ...</code>) would be helpful as it would allow readers to refer to that variable in answers and comments without having to define it. Assigning variables to inputs is good practice whenever you include an example in a question."}, {"owner": {"reputation": 151, "user_id": 1548508, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5c395dceaac2d4db90a38013d6446767?s=128&d=identicon&r=PG", "display_name": "Peter Devlin", "link": "https://stackoverflow.com/users/1548508/peter-devlin"}, "edited": false, "score": 0, "creation_date": 1570064755, "post_id": 58193098, "comment_id": 102799550, "body": "Noted. Thanks for the advice."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1570036728, "post_id": 58193493, "comment_id": 102790742, "body": "Suppose <code>zipcodes = (10000..10099).to_a</code>. As I understand, this would be represented by <code>[100]</code>, but you obtain <code>zipcodes.group_by {|zipcode| zipcode &#47; 10}.keys #=&gt;  [1000, 1001, 1002, 1003, 1004, 1005, 1006, 1007, 1008, 1009]</code>.  (You do get the correct answer if you divide by <code>100</code> rather than <code>10</code>, though <code>100</code> would be incorrect for other examples.). Now suppose that <code>zipcodes = [10000, 10001]</code>. You get <code>[1000]</code>, but that would require <code>10000</code> to be followed by all 9 consecutive values (<code>zipcodes = (10000..10009).to_a</code>). Here <code>[10000, 10001]</code> cannot be reduced. Peter, am I correct?"}], "tags": [], "owner": {"reputation": 940, "user_id": 5788024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/13mIY.png?s=128&g=1", "display_name": "CaTs", "link": "https://stackoverflow.com/users/5788024/cats"}, "is_accepted": false, "score": 2, "last_activity_date": 1569972625, "creation_date": 1569972625, "answer_id": 58193493, "question_id": 58193098, "link": "https://stackoverflow.com/questions/58193098/reduce-an-array-of-ints-to-an-array-of-longest-common-prefixs/58193493#58193493", "title": "Reduce an array of ints to an array of longest common prefixs", "body": "<p>Enumerable's <a href=\"https://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-group_by\" rel=\"nofollow noreferrer\"><code>group_by</code></a> is useful for problems like this, it will group similar zipcodes together into a hash using some property they all have in common. In your case, we would want that property to be the prefix of the zipcode.</p>\n\n<p><code>group_by</code> takes a block that is used to map the item into a key, for example:</p>\n\n<pre><code>animals = ['Cat', 'Dog', 'Donkey']\n\n# Group each animal by their first letter\ngrouped_animals = animals.group_by {|animal| animal[0]} \n\nputs grouped_animals\n# =&gt; {\"C\"=&gt;[\"Cat\"], \"D\"=&gt;[\"Dog\", \"Donkey\"]}\n</code></pre>\n\n<p>To group zip-codes by their prefixes, we can divide the number by 10 to drop the last digit. Then you can use the <a href=\"https://ruby-doc.org/core-2.5.1/Hash.html#method-i-keys\" rel=\"nofollow noreferrer\"><code>hash.keys</code></a> to get only the prefixes.</p>\n\n<pre><code>zipcodes = [10000, 10001, 10002, 10003, 10004, 10005, 10006, 10007, 10008, 10009, 10010, 10011]\ngrouped_zipcodes = zipcodes.group_by {|zipcode| zipcode / 10}\n\nputs grouped_zipcodes\n# =&gt; {1000=&gt;[10000, 10001, 10002, 10003, 10004, 10005, 10006, 10007, 10008, 10009], 1001=&gt;[10010, 10011]}\n\nputs grouped_zipcodes.keys\n# =&gt; [1000, 1001]\n</code></pre>\n\n<p>This assumes your zipcodes are always 5 digits and that prefixes will always be the first 4  digits but at least now the problem is just reduced to figuring out how to want to find your prefix!</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 2, "last_activity_date": 1570061751, "last_edit_date": 1570061751, "creation_date": 1570041311, "answer_id": 58207424, "question_id": 58193098, "link": "https://stackoverflow.com/questions/58193098/reduce-an-array-of-ints-to-an-array-of-longest-common-prefixs/58207424#58207424", "title": "Reduce an array of ints to an array of longest common prefixs", "body": "<p><strong>Code</strong></p>\n\n<pre><code>def doit(arr)\n  a = arr.dup\n  loop do\n    size = a.size\n    a = combine_by_last(a)\n    break if a.size == size\n  end\n  a\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>def combine_by_last(a)\n  b = []\n  until a.empty?\n    move_10 = a.first % 10 == 0 &amp;&amp; a.size &gt; 9 &amp;&amp; a[9] == a.first + 9\n    if move_10\n      b &lt;&lt; a.shift/10\n      a.shift(9) # discard\n    else\n      b &lt;&lt; a.shift\n    end        \n  end\n  b\nend\n</code></pre>\n\n<p><strong>Example</strong></p>\n\n<pre><code>arr = [10000, 10001, 10002, 10003, 10004, 10005, 10006, 10007, 10008, 10009,\n       10010, 10011] +\n       (11000..11999).to_a +\n       [12251, 12252] +\n       (12340..12349).to_a\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>doit arr\n  #=&gt; [1000, 10010, 10011, 11, 12251, 12252, 1234] \n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>The code reduces the array <code>arr</code> in stages, each involving sequences of 10 zip codes, the first ending in a zero, being replaced by the first of the 10 divided by <code>10</code>. The process terminates when no further reductions can be made. For example, if:</p>\n\n<pre><code>arr = (11000..11999).to_a\n</code></pre>\n\n<p>it would first be reduced to:</p>\n\n<pre><code>(1100..1199).to_a\n</code></pre>\n\n<p>then to:</p>\n\n<pre><code>(110..119)\n</code></pre>\n\n<p>then to:</p>\n\n<pre><code>11\n</code></pre>\n\n<p>We can modify <code>doit</code> to show this in action.</p>\n\n<pre><code>def doit(arr)\n  a = arr.dup\n  loop do\n    size = a.size\n    a = combine_by_last(a)\n    puts\n    p a \n    break if a.size == size\n  end\n  a\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>doit arr\n  #=&gt; [1000, 10010, 10011, 11, 12251, 12252, 1234]  \n\n[1000,\n 10010, 10011,\n 1100, 1101, 1102, 1103, 1104, 1105, 1106, 1107, 1108, 1109,\n 1110, 1111, 1112, 1113, 1114, 1115, 1116, 1117, 1118, 1119,\n 1120, 1121, 1122, 1123, 1124, 1125, 1126, 1127, 1128, 1129,\n 1130, 1131, 1132, 1133, 1134, 1135, 1136, 1137, 1138, 1139,\n 1140, 1141, 1142, 1143, 1144, 1145, 1146, 1147, 1148, 1149,\n 1150, 1151, 1152, 1153, 1154, 1155, 1156, 1157, 1158, 1159,\n 1160, 1161, 1162, 1163, 1164, 1165, 1166, 1167, 1168, 1169,\n 1170, 1171, 1172, 1173, 1174, 1175, 1176, 1177, 1178, 1179,\n 1180, 1181, 1182, 1183, 1184, 1185, 1186, 1187, 1188, 1189,\n 1190, 1191, 1192, 1193, 1194, 1195, 1196, 1197, 1198, 1199,\n 12251, 12252,\n 1234]\n\n[1000, \n 10010, 10011,\n 110, 111, 112, 113, 114, 115, 116, 117, 118, 119,\n 12251, 12252,\n 1234]\n\n[1000,\n 10010, 10011,\n 11,\n 12251, 12252,\n 1234]\n</code></pre>\n\n<p>Because the zip codes are uniq and ordered, <code>a[9] == a.first + 9</code> is <code>true</code> if and only if <code>a[0]</code>, <code>a[1]</code>,...,<code>a[9]</code> are consecutive values.</p>\n\n<p>The expression:</p>\n\n<pre><code>move_10 = a.first % 10 == 0 &amp;&amp; a.size &gt; 9 &amp;&amp; a[9] == a.first + 9\n</code></pre>\n\n<p>could be simplified to:</p>\n\n<pre><code>move_10 = a.first % 10 == 0 &amp;&amp; a[9] == a.first + 9\n</code></pre>\n\n<p>because if <code>a.size &lt;= 9</code>, <code>a[9] == a.first + 9</code> would be become <code>nil == a.first + 9</code>, which would cause the condition to return <code>false</code>, as it should. This would, however, worsen readability.</p>\n"}], "owner": {"reputation": 151, "user_id": 1548508, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5c395dceaac2d4db90a38013d6446767?s=128&d=identicon&r=PG", "display_name": "Peter Devlin", "link": "https://stackoverflow.com/users/1548508/peter-devlin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 58207424, "answer_count": 2, "score": 2, "last_activity_date": 1570061751, "creation_date": 1569969234, "last_edit_date": 1569990083, "question_id": 58193098, "link": "https://stackoverflow.com/questions/58193098/reduce-an-array-of-ints-to-an-array-of-longest-common-prefixs", "title": "Reduce an array of ints to an array of longest common prefixs", "body": "<p>I'm dealing with zip codes, and I want to get the \"Starts with\" values from a list of zip codes.</p>\n\n<p>For example, an array of</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>arr = [10000, 10001, 10002, 10003, 10004, 10005, 10006, 10007, 10008, 10009, 10010, 10011]\n</code></pre>\n\n<p>Should produce an array of:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>out = [1000,10010,10011]\n</code></pre>\n\n<p>Any help is greatly appreciated. The problem keeps getting bigger the more I think about it!</p>\n\n<p>Edit1: Adding more examples\nSorry for the confusion and thanks for the help so far, from the feedback from your comments, my question title may not be accurate.</p>\n\n<p>What I want is the \"Starts with\" syntax that is commonly used in postage services. Basically if you have a fixed number of 5 digits (US post codes, without the zip+4), if a whole range is covered, e.g. 11000-11999 then it can be reduced to 11 in the starts with syntax. However, if there is a number (or set of numbers) in that range that is not included. e.g. 11005, then the syntax needs to return all of the numbers for that range until there is a common \"starts with\" again. So for that example, it would be:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>[ 11000, 11001, 11002, 11003, 11004, 11006, 11001, 11007, 11008, 11009, 1101, 1102, 1103, 1104, 1105, 1106, 1107, 1108, 1109, 111, 112, 113, 114, 115, 116, 117, 118, 119 ]\n</code></pre>\n\n<p>So from 11000-11004 and 11006-11009, there is no common \"starts with\" numbers, so the exact numbers must be added. And from 11010 to 11999, the common numbers can be reduced as above.</p>\n\n<p>Including letters in this syntax would be a massive bonus as that covers UK post codes as well. However this is harder as UK post codes are not always sequential, so I wasn't going to tackle that. 5 digit US zip codes.</p>\n"}, {"tags": ["ruby", "performance", "jekyll", "liquid"], "comments": [{"owner": {"reputation": 4449, "user_id": 7681659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47bc1a3b7231505d61b7f80642bc1a14?s=128&d=identicon&r=PG&f=1", "display_name": "ashmaroli", "link": "https://stackoverflow.com/users/7681659/ashmaroli"}, "edited": false, "score": 1, "creation_date": 1569998481, "post_id": 58192936, "comment_id": 102771056, "body": "If the build time increased suddenly, its most probably due to importing all those Material UI sass partials.."}, {"owner": {"reputation": 35, "user_id": 7116136, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/twb7O.png?s=128&g=1", "display_name": "leslieb", "link": "https://stackoverflow.com/users/7116136/leslieb"}, "reply_to_user": {"reputation": 4449, "user_id": 7681659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47bc1a3b7231505d61b7f80642bc1a14?s=128&d=identicon&r=PG&f=1", "display_name": "ashmaroli", "link": "https://stackoverflow.com/users/7681659/ashmaroli"}, "edited": false, "score": 0, "creation_date": 1570039517, "post_id": 58192936, "comment_id": 102791986, "body": "I suspected this might be a possibility.. I&#39;ll import just the ones I&#39;m actually using and see if it makes a difference. Thanks!"}, {"owner": {"reputation": 35, "user_id": 7116136, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/twb7O.png?s=128&g=1", "display_name": "leslieb", "link": "https://stackoverflow.com/users/7116136/leslieb"}, "reply_to_user": {"reputation": 4449, "user_id": 7681659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47bc1a3b7231505d61b7f80642bc1a14?s=128&d=identicon&r=PG&f=1", "display_name": "ashmaroli", "link": "https://stackoverflow.com/users/7681659/ashmaroli"}, "edited": false, "score": 0, "creation_date": 1570046327, "post_id": 58192936, "comment_id": 102795033, "body": "I changed that and it helped initially get it down to around 16 seconds but now it&#39;s back up to around 60 again"}, {"owner": {"reputation": 4449, "user_id": 7681659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47bc1a3b7231505d61b7f80642bc1a14?s=128&d=identicon&r=PG&f=1", "display_name": "ashmaroli", "link": "https://stackoverflow.com/users/7681659/ashmaroli"}, "edited": false, "score": 1, "creation_date": 1570047267, "post_id": 58192936, "comment_id": 102795404, "body": "Try running with <code>bundle exec jekyll s--verbose</code>.When the build-ing slows down while regenerating, you may be able to tell at which file it started to slow down"}], "owner": {"reputation": 35, "user_id": 7116136, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/twb7O.png?s=128&g=1", "display_name": "leslieb", "link": "https://stackoverflow.com/users/7116136/leslieb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1569968101, "creation_date": 1569968101, "question_id": 58192936, "link": "https://stackoverflow.com/questions/58192936/jekyll-build-time-suddenly-extremely-long", "title": "Jekyll build time suddenly extremely long", "body": "<p>I've suddenly gotten very long build times on this project, and I'm not sure what the reason is. It can take upwards of 60 seconds to generate, the lowest it's gone is 20 secs. I've done everything from excluding <code>node_modules</code> via this issue <a href=\"https://stackoverflow.com/questions/26855552/jekyll-compiling-seems-way-too-slow\">Jekyll compiling seems WAY too slow</a>, adding <code>--incremental</code> doesn't make a difference either. I've optimized images, and I've even completely reinstalled Ruby. Below is the result of <code>bundle exec jekyll build --profile</code></p>\n\n<pre><code>&gt; Configuration file: /Users/lesliebehum/Development/sary/_config.yml\n&gt;             Source: /Users/lesliebehum/Development/sary\n&gt;        Destination: /Users/lesliebehum/Development/sary/_site  Incremental build: disabled. Enable with --incremental\n&gt;       Generating... \n&gt; \n&gt; Filename                  | Count |  Bytes |  Time\n&gt; --------------------------+-------+--------+------\n&gt; _layouts/default.html     |     5 | 19.68K | 0.003\n&gt; _includes/menu.html       |     5 |  7.19K | 0.001 index.html                |     1 |  2.62K | 0.000\n&gt; _pages/contact.html       |     1 |  1.46K | 0.000\n&gt; _includes/treatments.html |     1 |  1.32K | 0.000\n&gt; _includes/form.html       |     1 |  1.34K | 0.000\n&gt; _includes/footer.html     |     1 |  0.94K | 0.000\n&gt; \n&gt;  \n&gt;                     done in 68.093 seconds.  Auto-regeneration: disabled. Use --watch to enable.\n</code></pre>\n\n<p>It doesn't seem like anything is taking particularly long. I'm working on other Jekyll projects and those are generating at around 1 second, and they're much larger. Any insight on what may be causing this?</p>\n\n<p><a href=\"https://github.com/itsthecheat/saryrottenberg\" rel=\"nofollow noreferrer\">Github repository here</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "drop-down-menu", "haml"], "comments": [{"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1570898745, "post_id": 58192687, "comment_id": 103065789, "body": "This is not related to ruby nor haml, you can&#39;t do that serverside. You need to use javascript, listen to the <code>change</code> event on the select tags and enable/disable the options with javascript."}], "owner": {"reputation": 499, "user_id": 3577482, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/XG309.png?s=128&g=1", "display_name": "Ridhwaan Shakeel", "link": "https://stackoverflow.com/users/3577482/ridhwaan-shakeel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1569966411, "creation_date": 1569966411, "question_id": 58192687, "link": "https://stackoverflow.com/questions/58192687/how-to-enable-disable-item-in-f-select-if-another-item-has-been-selected-in-ano", "title": "How to enable/ disable item in f.select if another item has been selected in another f.select element", "body": "<p>I have two f.select elements with their own list items in a haml form. </p>\n\n<pre><code>%h3 Base\n      = f.select :project_type, Project.types, {:disabled =&gt;  &lt;\"project 4\" (if Project.risky?)&gt;}, required: true\n     = f.select :risky, Project.risky, {:disabled =&gt;  &lt;\"yes\" (if Project.some_condition?)&gt;}, required: true\n...\n</code></pre>\n\n<p>if the <code>f.select :risky</code> is set to 'yes' I'd like the 4th option of value 'project 4' to be disabled in <code>f.select :project_type</code>, else keep it enabled/selectable. Similarly, if <code>f.select :project_type</code> has the 4th option selected, I want the <code>f.select :risky</code> dropdown list to have the <code>yes</code> option disabled</p>\n"}, {"tags": ["ruby", "string", "algorithm", "compression"], "answers": [{"tags": [], "owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "is_accepted": false, "score": 1, "last_activity_date": 1569974100, "creation_date": 1569974100, "answer_id": 58193668, "question_id": 58192680, "link": "https://stackoverflow.com/questions/58192680/compressing-a-given-string-problem-in-ruby/58193668#58193668", "title": "Compressing a given String problem in Ruby", "body": "<p>Using Enumerable#chunk might be a good fit for your needs.</p>\n\n<pre><code>uncompressed = %w(aaabbcddaaaaa aaabb 111ddttttabaaacc)\n\nuncompressed.each do |str|\n  puts str.chars.chunk{|e| e}.map {|e| \"#{e[1].length}#{e[0]}\"}.join\nend\n\n&gt;&gt;&gt; 3a2b1c2d5a\n&gt;&gt;&gt; 3a2b\n&gt;&gt;&gt; 312d4t1a1b3a2c\n</code></pre>\n\n<p>Sure, you can add another check inside map block, so omit 1 before a single element and print as is.</p>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 1, "last_activity_date": 1569982254, "last_edit_date": 1569982254, "creation_date": 1569980887, "answer_id": 58194262, "question_id": 58192680, "link": "https://stackoverflow.com/questions/58192680/compressing-a-given-string-problem-in-ruby/58194262#58194262", "title": "Compressing a given String problem in Ruby", "body": "<p>You could use <a href=\"https://ruby-doc.org/core-2.6.4/String.html#method-i-chars\" rel=\"nofollow noreferrer\">String#chars</a> (1), so <a href=\"https://ruby-doc.org/core-2.6.4/Enumerable.html#method-i-chunk_while\" rel=\"nofollow noreferrer\">Enumerable#chunk_while</a> (2), then <a href=\"https://ruby-doc.org/core-2.6.4/Enumerable.html#method-i-flat_map\" rel=\"nofollow noreferrer\">Enumerable#flat_map</a> (3) into the desired format and finally <a href=\"https://ruby-doc.org/core-2.6.4/Array.html#method-i-join\" rel=\"nofollow noreferrer\">Array#join</a>:</p>\n\n<pre><code>str = \"aaabbcaa\"\n\nstr.chars.chunk_while { |x, y| x == y }.flat_map { |e| [(e.size unless e.size == 1), e.first] }.join\n#=&gt; \"3a2bc2a\"\n</code></pre>\n\n<hr>\n\n<h3>Step by step</h3>\n\n<pre><code># (1)\nstr.chars#.to_a\n#=&gt; [\"a\", \"a\", \"a\", \"b\", \"b\", \"c\", \"a\", \"a\"]\n</code></pre>\n\n<p>so</p>\n\n<pre><code># (2)\nstr.chars.chunk_while { |x, y| x == y }#.to_a\n#=&gt; [[\"a\", \"a\", \"a\"], [\"b\", \"b\"], [\"c\"], [\"a\", \"a\"]]\n</code></pre>\n\n<p>then</p>\n\n<pre><code># (3)\nstr.chars.chunk_while { |x, y| x == y }.flat_map { |e| [(e.size unless e.size == 1),e.first] }\n#=&gt; [3, \"a\", 2, \"b\", nil, \"c\", 2, \"a\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1569999638, "creation_date": 1569999638, "answer_id": 58196612, "question_id": 58192680, "link": "https://stackoverflow.com/questions/58192680/compressing-a-given-string-problem-in-ruby/58196612#58196612", "title": "Compressing a given String problem in Ruby", "body": "<p><code>String#scan</code> can also be handy here.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>uncompressed = %w(aaabbcddaaaaa aaabb 111ddttttabaaacc)\nuncompressed.map { |w| w.scan(/(.)(\\1*)/).map(&amp;:join) }\n#\u21d2 [[\"aaa\", \"bb\", \"c\", \"dd\", \"aaaaa\"],\n#   [\"aaa\", \"bb\"],\n#   [\"111\", \"dd\", \"tttt\", \"a\", \"b\", \"aaa\", \"cc\"]]\n</code></pre>\n\n<p>And to get the desired outcome.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>uncompressed.map do |w|\n  w.scan(/(.)(\\1*)/).map(&amp;:join).map do |l|\n    \"#{l.length}#{l[0]}\"\n  end.join\nend\n#\u21d2 [\"3a2b1c2d5a\", \"3a2b\", \"312d4t1a1b3a2c\"]\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 12150702, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-h3obDndqh_8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re8odj_LE52aqP7kWTgegLkUT2mTA/photo.jpg?sz=128", "display_name": "Shawksta", "link": "https://stackoverflow.com/users/12150702/shawksta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1569999638, "creation_date": 1569966373, "last_edit_date": 1569980171, "question_id": 58192680, "link": "https://stackoverflow.com/questions/58192680/compressing-a-given-string-problem-in-ruby", "title": "Compressing a given String problem in Ruby", "body": "<p>I have been trying to solve this problem for a while now, im supposed to take a given string like \"aaabbc\" and compress it into a new string that states multiples of a letter in a row in place. So it would output \"3a2bc\"</p>\n\n<p>So far i managed to print it out except it counts all instances of a letter and im not sure how to get rid of the current repeats: </p>\n\n<pre><code>def compress_str(str)\n\n    new_str = []\n    word = str.split(\"\")\n\n    word.each do |char|\n        count = 0\n        word.each do |ele|\n            if ele == char\n                count += 1\n            end\n        end\n        if count &gt; 1\n          new_str &lt;&lt; count\n          new_str &lt;&lt; char\n        else\n          new_str &lt;&lt; char\n        end\n    end\n\n    return new_str.join(\"\")\n</code></pre>\n\n<p>Example output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/jmytU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jmytU.png\" alt=\"Sample\"></a></p>\n\n<p>Any suggestions on how I'm supposed to get rid of them?</p>\n"}, {"tags": ["ruby", "xml", "xslt", "nokogiri", "oxygenxml"], "comments": [{"owner": {"reputation": 39, "user_id": 10913156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/592e5c789ab25dc0ee63ea1e2a0c4e17?s=128&d=identicon&r=PG&f=1", "display_name": "Code_Journey_4_Fun", "link": "https://stackoverflow.com/users/10913156/code-journey-4-fun"}, "reply_to_user": {"reputation": 23944, "user_id": 1305969, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wlo8z.png?s=128&g=1", "display_name": "zx485", "link": "https://stackoverflow.com/users/1305969/zx485"}, "edited": false, "score": 0, "creation_date": 1569969138, "post_id": 58192408, "comment_id": 102765334, "body": "first line <code>&#47;&#47;car:ID[ let $v:=string(.),$t:=@car:type return not( preceding::car:ID[string(.) = $v and @car:type=$t]) ]</code> to finds all car:ID element which do not have dup value. then <code>&#47;(let $v:=string(.), $t:=@car:type,$c:=1+count(following::car:ID[string(.)=$v and $t=@car:type]) ,$c:=1+count(following::car:*[string(.)=$v]) return if ($c &gt; 1) then concat( string(.), &#39; occurs &#39;, $c, &#39; times for type &#39;, $t, &#39;&amp;#13;&amp;#10;&#39;) else () )</code> to display the duplicate value if it has count more than 1, and output the variable values such as $t, $c etc."}, {"owner": {"reputation": 229603, "user_id": 36305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DIwx6.jpg?s=128&g=1", "display_name": "Dimitre Novatchev", "link": "https://stackoverflow.com/users/36305/dimitre-novatchev"}, "edited": false, "score": 0, "creation_date": 1570306298, "post_id": 58192408, "comment_id": 102874144, "body": "For a single XPath expression that finds all duplicate values in a sequence, see: <a href=\"https://stackoverflow.com/questions/133092/how-do-you-identify-duplicate-values-in-a-numerical-sequence-using-xpath-2-0/287360#287360\" title=\"how do you identify duplicate values in a numerical sequence using xpath 2 0\">stackoverflow.com/questions/133092/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 10913156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/592e5c789ab25dc0ee63ea1e2a0c4e17?s=128&d=identicon&r=PG&f=1", "display_name": "Code_Journey_4_Fun", "link": "https://stackoverflow.com/users/10913156/code-journey-4-fun"}, "edited": false, "score": 0, "creation_date": 1570031629, "post_id": 58198013, "comment_id": 102788340, "body": "Thanks Tim, that works like a charm! Another q, do you know how i can make the for-each-group select dynamic? what if we have a new API request is car:Seller_Details? or car:Buyer_Details... can we do <code>select=&quot;car:*[....]</code>?"}, {"owner": {"reputation": 68419, "user_id": 7585, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/Txewo.jpg?s=128&g=1", "display_name": "Tim C", "link": "https://stackoverflow.com/users/7585/tim-c"}, "reply_to_user": {"reputation": 39, "user_id": 10913156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/592e5c789ab25dc0ee63ea1e2a0c4e17?s=128&d=identicon&r=PG&f=1", "display_name": "Code_Journey_4_Fun", "link": "https://stackoverflow.com/users/10913156/code-journey-4-fun"}, "edited": false, "score": 1, "creation_date": 1570032501, "post_id": 58198013, "comment_id": 102788743, "body": "You could do <code>select=&quot;&#47;&#47;car:*[count(ancestor::car:*) = 1]&#47;*&quot;</code> to avoid selecting the <code>car:root</code> or the children of <code>car:Car_Details</code>, for example."}], "tags": [], "owner": {"reputation": 68419, "user_id": 7585, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/Txewo.jpg?s=128&g=1", "display_name": "Tim C", "link": "https://stackoverflow.com/users/7585/tim-c"}, "is_accepted": true, "score": 1, "last_activity_date": 1570005438, "creation_date": 1570005438, "answer_id": 58198013, "question_id": 58192408, "link": "https://stackoverflow.com/questions/58192408/xslt-how-to-display-output-duplicate-values-based-on-different-element-node-and/58198013#58198013", "title": "XSLT how to display/output duplicate values based on different element node and attributes", "body": "<p>If you are looking for an XSLT solution (rather than a single line XPath expression), you could make use of <code>xsl:for-each-group</code> with a composite key:</p>\n\n<pre><code>&lt;xsl:stylesheet\n    xmlns:car=\"com.sample\"\n    xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n    xmlns:xs=\"http://www.w3.org/2001/XMLSchema\"\n    exclude-result-prefixes=\"xs\"\n    expand-text=\"yes\"\n    version=\"3.0\"&gt;\n\n    &lt;xsl:output method=\"text\"/&gt;\n\n    &lt;xsl:template match=\"/\"&gt;\n      &lt;xsl:for-each-group select=\"//car:Car_Details/*\" group-by=\"local-name(), normalize-space()\" composite=\"yes\"&gt;\n        &lt;xsl:if test=\"current-group()[2]\"&gt;\n          &lt;xsl:text&gt;{normalize-space()} occurs {count(current-group())} times for {local-name()}&amp;#10;&lt;/xsl:text&gt;\n        &lt;/xsl:if&gt;\n      &lt;/xsl:for-each-group&gt;\n    &lt;/xsl:template&gt;\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 10913156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/592e5c789ab25dc0ee63ea1e2a0c4e17?s=128&d=identicon&r=PG&f=1", "display_name": "Code_Journey_4_Fun", "link": "https://stackoverflow.com/users/10913156/code-journey-4-fun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 58198013, "answer_count": 1, "score": 0, "last_activity_date": 1581290647, "creation_date": 1569964899, "last_edit_date": 1581290647, "question_id": 58192408, "link": "https://stackoverflow.com/questions/58192408/xslt-how-to-display-output-duplicate-values-based-on-different-element-node-and", "title": "XSLT how to display/output duplicate values based on different element node and attributes", "body": "<p>I am trying to output duplicate values across different nodes and value by using XSLT. I want the node element to be dynamic so it can track different value after the namespace prefix, for example: car:ID, car:Name, car:Location_name, or more. I know i can use the function Local-Name(.) but I am not sure how to apply to my XSLT logic. please help\nthe sample XML as follow:</p>\n\n<pre><code>&lt;car:root xmlns:car=\"com.sample\"&gt;\n&lt;Car_Input_Request&gt;\n    &lt;car:Car_Details&gt;\n        &lt;car:ID&gt;Car_001&lt;/car:ID&gt;\n        &lt;car:Name&gt;Fastmobile&lt;/car:Name&gt;\n        &lt;car:Local_Name&gt;New York&lt;/car:Local_Name&gt;\n        &lt;car:Transmission_Reference_Type&gt;\n            &lt;car:ID car:type=\"Transmission_Reference_Type\"&gt;Automatic&lt;/car:ID&gt;\n        &lt;/car:Transmission_Reference_Type&gt;\n    &lt;/car:Car_Details&gt;      \n&lt;/Car_Input_Request&gt;\n    &lt;Car_Input_Request&gt;\n        &lt;car:Car_Details&gt;\n            &lt;car:ID&gt;Car_002&lt;/car:ID&gt;\n            &lt;car:Name&gt;Slowmobile&lt;/car:Name&gt;\n            &lt;car:Local_Name&gt;New York&lt;/car:Local_Name&gt;\n            &lt;car:Transmission_Reference_Type&gt;\n                &lt;car:ID car:type=\"Transmission_Reference_Type\"&gt;Manual&lt;/car:ID&gt;\n            &lt;/car:Transmission_Reference_Type&gt;\n        &lt;/car:Car_Details&gt;      \n    &lt;/Car_Input_Request&gt;\n    &lt;Car_Input_Request&gt;\n        &lt;car:Car_Details&gt;\n            &lt;car:ID&gt;Car_001&lt;/car:ID&gt;\n            &lt;car:Name&gt;Fastmobile&lt;/car:Name&gt;\n            &lt;car:Local_Name&gt;New York&lt;/car:Local_Name&gt;\n            &lt;car:Transmission_Reference_Type&gt;\n                &lt;car:ID car:type=\"Transmission_Reference_Type\"&gt;Automatic&lt;/car:ID&gt;\n            &lt;/car:Transmission_Reference_Type&gt;\n        &lt;/car:Car_Details&gt;      \n    &lt;/Car_Input_Request&gt;\n&lt;/car:root&gt;\n</code></pre>\n\n<p>The XSLT used:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;xsl:stylesheet\n    xmlns:car=\"com.sample\"\n    xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"\n    xmlns:xs=\"http://www.w3.org/2001/XMLSchema\"\n    exclude-result-prefixes=\"xs\"\n    version=\"3.0\"&gt;\n\n    &lt;xsl:output method=\"text\"/&gt;\n\n    &lt;xsl:template match=\"/\"&gt;\n        &lt;xsl:value-of select=\"//car:ID[ let $v:=string(.),$t:=@car:type return not( preceding::car:ID[string(.) = $v and @car:type=$t]) ]/(let $v:=string(.), $t:=@car:type,$c:=1+count(following::car:ID[string(.)=$v and $t=@car:type]) ,$c:=1+count(following::car:*[string(.)=$v]) return if ($c &gt; 1) then concat( string(.), ' occurs ', $c, ' times for type ', $t, '&amp;#13;&amp;#10;') else () )\"/&gt;\n    &lt;/xsl:template&gt;\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n\n<p>output shown from xslt:</p>\n\n<pre><code>Car_001 occurs 2 times for type \n Automatic occurs 2 times for type Transmission_Reference_Type\n</code></pre>\n\n<p>But I want it to show</p>\n\n<pre><code>Car_001 occurs 2 times for type ID\nFastmobile occurs 2 times for type Name\nAutomatic occurs 2 times for type Transmission_Reference_Type\nNew York occurs 3 times for type Local_Name\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 2, "last_activity_date": 1569964831, "creation_date": 1569964831, "answer_id": 58192396, "question_id": 58192372, "link": "https://stackoverflow.com/questions/58192372/unexpected-tidentifier-in-function-declaration-with-optional-argument/58192396#58192396", "title": "Unexpected tIDENTIFIER in function declaration with optional argument", "body": "<p>You can't define optional arguments (<code>arg=value</code>) after the definition of the keyword arguments (<code>arg: value</code>).</p>\n\n<p>You can correct it in two ways:</p>\n\n<ol>\n<li>Move optional arg before the keywor arg:</li>\n</ol>\n\n<pre><code>    def select(amt=:all, description:Hash)\n    end\n</code></pre>\n\n<ol start=\"2\">\n<li>Make the second argument a keyword arg:</li>\n</ol>\n\n<pre><code>    def select(description:Hash, amt: :all)\n    end\n</code></pre>\n\n<p>Worth reading: <a href=\"https://medium.com/podiihq/ruby-parameters-c178fdcd1f4e\" rel=\"nofollow noreferrer\">https://medium.com/podiihq/ruby-parameters-c178fdcd1f4e</a></p>\n"}], "owner": {"reputation": 45, "user_id": 8120791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fbfc847caee697caf2ac5c4091bec9f?s=128&d=identicon&r=PG&f=1", "display_name": "evs21", "link": "https://stackoverflow.com/users/8120791/evs21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 58192396, "answer_count": 1, "score": 2, "last_activity_date": 1569996181, "creation_date": 1569964666, "last_edit_date": 1569996181, "question_id": 58192372, "link": "https://stackoverflow.com/questions/58192372/unexpected-tidentifier-in-function-declaration-with-optional-argument", "title": "Unexpected tIDENTIFIER in function declaration with optional argument", "body": "<p>I am trying to declare a class with a few basic functions in it. The function that seems to be causing a problem has an optional argument that passes a symbol in.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Bag &lt; RandomizerCollection\n    def initialize()\n    end\n\n    def select(description:Hash, amt=:all)\n    end\n\n    def empty()\n    end \nend\n</code></pre>\n\n<p>And the error I am getting is:</p>\n\n<pre><code>Traceback (most recent call last):\n    1: from test.rb:5:in `&lt;main&gt;'\ntest.rb:5:in `require_relative': /home/osboxes/Documents/Year4/Design/A1/Bag.rb:9: syntax error, unexpected tIDENTIFIER (SyntaxError)\n...ef select(description:hash, amt = :all)\n...                            ^~~\n/home/osboxes/Documents/Year4/Design/A1/Bag.rb:9: syntax error, unexpected ')', expecting keyword_end\n...t(description:hash, amt = :all)\n</code></pre>\n\n<p>I'm sure this must be something basic but I just can't figure it out. I am new to Ruby and I found similar questions but none helped me find the issue. Any help is appreciated!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1570003922, "post_id": 58192361, "comment_id": 102773428, "body": "<i>&quot;How can I fire the method method_catcher&quot;</i> -- name it <a href=\"https://ruby-doc.org/core-2.6.3/BasicObject.html#method-i-method_missing\" rel=\"nofollow noreferrer\"><code>method_missing</code></a> and Ruby does the rest."}], "answers": [{"tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 3, "last_activity_date": 1569965248, "creation_date": 1569965248, "answer_id": 58192470, "question_id": 58192361, "link": "https://stackoverflow.com/questions/58192361/intercepting-calls-to-non-existent-methods/58192470#58192470", "title": "Intercepting calls to Non-Existent Methods", "body": "<p>Use <a href=\"https://apidock.com/ruby/BasicObject/method_missing\" rel=\"nofollow noreferrer\"><code>#method_missing</code></a>:</p>\n\n<pre><code>class Foo\n  def method_missing(m, *args, &amp;block)\n    puts \"Called method #{m}\"\n  end\nend\n\nFoo.new.asd\n# Called method asd\n</code></pre>\n\n<p>Remember to define also <a href=\"https://thoughtbot.com/blog/always-define-respond-to-missing-when-overriding\" rel=\"nofollow noreferrer\"><code>respond_to_missing?</code></a></p>\n"}], "owner": {"reputation": 1343, "user_id": 984415, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/rMvNp.gif?s=128&g=1", "display_name": "lilHar", "link": "https://stackoverflow.com/users/984415/lilhar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 58192470, "answer_count": 1, "score": 1, "last_activity_date": 1570003581, "creation_date": 1569964592, "last_edit_date": 1570003581, "question_id": 58192361, "link": "https://stackoverflow.com/questions/58192361/intercepting-calls-to-non-existent-methods", "title": "Intercepting calls to Non-Existent Methods", "body": "<p>Assuming the following incomplete code...</p>\n\n<pre><code>class Foo\n  @an_array = []\n  def method_catcher(this_var)\n    unless self.method_defined? this_var\n      if an_array.include?[this_var]\n        p \"Doing something with a fake method as if it were real.\" &lt;&lt; this_var\n      else \n        p \"You attempted to call Foo with \" &lt;&lt; this_var &lt;&lt; \" this class will now self destruct, and you will be returned to entry.\"\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>How can I fire the method <code>method_catcher</code> on any method attempted on foo instead of it returning a <code>NoMethodError</code>? </p>\n\n<p>Such as if I called </p>\n\n<pre><code>Foo.totally_not_a_declared_method_or_class_variable\n</code></pre>\n\n<p>so I could get either response depending on my array instead of erroring out?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1569964126, "post_id": 58192237, "comment_id": 102763856, "body": "You&#39;re not overriding <code>#inspect</code>. Why do you expect this output?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1569991627, "post_id": 58192237, "comment_id": 102769178, "body": "Your question is unclear. Your question title is &quot;Inspect override not doing what I expect&quot;, and then you show a lot of completely irrelevant code and leave out the <i>one part</i> that is actually relevant: the place where you override <code>inspect</code>."}, {"owner": {"reputation": 547, "user_id": 3314953, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/778e3c82f0182e355f5a51c26ed47a55?s=128&d=identicon&r=PG&f=1", "display_name": "Whitequill Riclo", "link": "https://stackoverflow.com/users/3314953/whitequill-riclo"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1570165122, "post_id": 58192237, "comment_id": 102834547, "body": "@J&#246;rgWMittag: yes there is a lot of irrelevant code directly to the question. I just didn&#39;t want to have it be that the question had no context. It was a matter of do I add irreverent code to the direct question or, do I have no context and simply have some stuff about treasure and elvish weapons which I felt was even less helpful without the respective classes to give context.  and the answer I needed was to add <code>def inspect</code> as was given by @mrzasa in their reply."}, {"owner": {"reputation": 547, "user_id": 3314953, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/778e3c82f0182e355f5a51c26ed47a55?s=128&d=identicon&r=PG&f=1", "display_name": "Whitequill Riclo", "link": "https://stackoverflow.com/users/3314953/whitequill-riclo"}, "edited": false, "score": 0, "creation_date": 1570165523, "post_id": 58192237, "comment_id": 102834646, "body": "Also I&#39;ll add I&#39;m not familiar with Ruby enough to tell what was needed for sure. I am more familiar with Python."}, {"owner": {"reputation": 547, "user_id": 3314953, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/778e3c82f0182e355f5a51c26ed47a55?s=128&d=identicon&r=PG&f=1", "display_name": "Whitequill Riclo", "link": "https://stackoverflow.com/users/3314953/whitequill-riclo"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1570165724, "post_id": 58192237, "comment_id": 102834701, "body": "@SergioTulentsev: in the tutorial I was following that is the output that is shown. Obvously Ruby has changed in since the tutorial was written."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1570175909, "post_id": 58192237, "comment_id": 102838178, "body": "@WhitequillRiclo: that tutorial must be for ruby 1.8. That&#39;s 10+ years old. There should be newer ones :)"}, {"owner": {"reputation": 547, "user_id": 3314953, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/778e3c82f0182e355f5a51c26ed47a55?s=128&d=identicon&r=PG&f=1", "display_name": "Whitequill Riclo", "link": "https://stackoverflow.com/users/3314953/whitequill-riclo"}, "edited": false, "score": 0, "creation_date": 1570199666, "post_id": 58192237, "comment_id": 102849569, "body": "that is okay with me because I&#39;m using RPG Maker VX Ace which has Ruby 1.9.2 built in."}], "answers": [{"comments": [{"owner": {"reputation": 547, "user_id": 3314953, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/778e3c82f0182e355f5a51c26ed47a55?s=128&d=identicon&r=PG&f=1", "display_name": "Whitequill Riclo", "link": "https://stackoverflow.com/users/3314953/whitequill-riclo"}, "edited": false, "score": 0, "creation_date": 1569964826, "post_id": 58192309, "comment_id": 102764097, "body": "Thank you. That worked. the tutorial doesn&#39;t show that. It must be a slightly different version of Ruby that the instructor is using."}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 1, "last_activity_date": 1569964348, "last_edit_date": 1569964348, "creation_date": 1569964218, "answer_id": 58192309, "question_id": 58192237, "link": "https://stackoverflow.com/questions/58192237/inspect-method-not-doing-what-i-expect/58192309#58192309", "title": "Inspect method not doing what I expect", "body": "<p><code>#to_s</code> and <code>#inspect</code> are separate methods. If you want to change an output of <code>Treasure#inspect</code>, override <code>#inspect</code>:</p>\n\n<pre><code>class Treasure\n      def initialize( aName, aDescription )\n        @name         = aName\n        @description  = aDescription\n      end\n\n      def to_s # override default to_s method\n           \"The #{@name} Treasure is #{@description}\\n\"\n      end\nend\n</code></pre>\n\n<p>or use <code>#to_s</code> in inspect:</p>\n\n<pre><code>class Treasure\n      def initialize( aName, aDescription )\n        @name         = aName\n        @description  = aDescription\n      end\n\n      def to_s # override default to_s method\n        \"The #{@name} Treasure is #{@description}\\n\"\n      end\n\n      def inspect\n         to_s\n      end\nend\n</code></pre>\n\n<p>Worth reading:</p>\n\n<ul>\n<li><a href=\"https://www.rubyguides.com/2018/12/ruby-inspect-method/\" rel=\"nofollow noreferrer\">https://www.rubyguides.com/2018/12/ruby-inspect-method/</a></li>\n<li><a href=\"https://medium.com/rubycademy/display-complex-objects-d897be936ae0\" rel=\"nofollow noreferrer\">https://medium.com/rubycademy/display-complex-objects-d897be936ae0</a></li>\n</ul>\n"}], "owner": {"reputation": 547, "user_id": 3314953, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/778e3c82f0182e355f5a51c26ed47a55?s=128&d=identicon&r=PG&f=1", "display_name": "Whitequill Riclo", "link": "https://stackoverflow.com/users/3314953/whitequill-riclo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 58192309, "answer_count": 1, "score": -1, "last_activity_date": 1570199233, "creation_date": 1569963863, "last_edit_date": 1570199233, "question_id": 58192237, "link": "https://stackoverflow.com/questions/58192237/inspect-method-not-doing-what-i-expect", "title": "Inspect method not doing what I expect", "body": "<p>This is probably asked somewhere but I don't see it.</p>\n\n<p>I am running script from a tutorial:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Thing\n        def set_name( aName )\n            @name = aName\n        end\n\n        def get_name\n            return @name\n        end\nend\n\nclass Treasure\n      def initialize( aName, aDescription )\n        @name         = aName\n        @description  = aDescription\n      end\n\n      def to_s # override default to_s method\n           \"The #{@name} Treasure is #{@description}\\n\"\n      end\nend\n\nthing1 = Thing.new\nthing1.set_name( \"A lovely Thing\" )\nputs thing1.get_name\n\n\nt1 = Treasure.new(\"Sword\", \"an Elvish weapon forged of gold\")\nt2 = Treasure.new(\"Ring\", \"a magic ring of great power\")\nputs t1.to_s\nputs t2.to_s\n# The inspect method lets you look inside an object\nputs \"Inspecting thing: #{thing1.inspect}\"\nputs \"Inspecting 1st treasure: #{t1.inspect}\"\n</code></pre>\n\n<p>but when I run it it returns</p>\n\n<pre><code>The Sword Treasure is an Elvish weapon forged of gold\nThe Ring Treasure is a magic ring of great power\nInspecting thing: #&lt;Thing:0x0000000003186c00 @name=\"A lovely Thing\"&gt;\nInspecting 1st treasure: #&lt;Treasure:0x0000000003186b10 @name=\"Sword\", @description=\"an Elvish weapon forged of gold\"&gt;\n</code></pre>\n\n<p>when I'm expecting this:</p>\n\n<pre><code>The Sword Treasure is an Elvish weapon forged of gold\nThe Ring Treasure is a magic ring of great power\nInspecting thing: #&lt;Thing:0x0000000003186c00 @name=\"A lovely Thing\"&gt;\nInspecting 1st treasure: The Sword Treasure is an Elvish weapon forged of gold\n</code></pre>\n\n<p>I am running Ruby version, 2.4.0</p>\n\n<p>What am I missing to have it return what I expect.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "asdf-vm"], "comments": [{"owner": {"reputation": 8826, "user_id": 10245, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a2909c1103b9ceba6c8933c85dc4f803?s=128&d=identicon&r=PG", "display_name": "Tim Abell", "link": "https://stackoverflow.com/users/10245/tim-abell"}, "edited": false, "score": 0, "creation_date": 1586166793, "post_id": 58191850, "comment_id": 108017781, "body": "The <code>asdf-ruby</code> plugin: <a href=\"https://github.com/asdf-vm/asdf-ruby\" rel=\"nofollow noreferrer\">github.com/asdf-vm/asdf-ruby</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2155, "user_id": 1833069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37daf0ca1256246b004474d10c4f57c1?s=128&d=identicon&r=PG", "display_name": "ewH", "link": "https://stackoverflow.com/users/1833069/ewh"}, "edited": false, "score": 0, "creation_date": 1605714592, "post_id": 58492374, "comment_id": 114737136, "body": "This worked for me, but I had to also restart my shell"}], "tags": [], "owner": {"reputation": 1712, "user_id": 4031358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/737ca5a6bb50fb7368525469fc39f760?s=128&d=identicon&r=PG", "display_name": "Jimmy", "link": "https://stackoverflow.com/users/4031358/jimmy"}, "is_accepted": false, "score": 12, "last_activity_date": 1571683401, "creation_date": 1571683401, "answer_id": 58492374, "question_id": 58191850, "link": "https://stackoverflow.com/questions/58191850/asdf-message-no-version-set-for-command-rails-when-running-rails-server/58492374#58492374", "title": "asdf message &quot;No version set for command rails&quot; when running Rails server", "body": "<p>Try this:</p>\n\n<pre><code>asdf reshim ruby\n</code></pre>\n\n<p>Then run <code>rails s</code> again</p>\n"}], "owner": {"reputation": 91, "user_id": 11591203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91716325c919cbaf17cde5c541f7ee18?s=128&d=identicon&r=PG&f=1", "display_name": "theborgwillnotreplaceus", "link": "https://stackoverflow.com/users/11591203/theborgwillnotreplaceus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2126, "favorite_count": 0, "answer_count": 1, "score": 9, "last_activity_date": 1611687332, "creation_date": 1569961772, "last_edit_date": 1611687332, "question_id": 58191850, "link": "https://stackoverflow.com/questions/58191850/asdf-message-no-version-set-for-command-rails-when-running-rails-server", "title": "asdf message &quot;No version set for command rails&quot; when running Rails server", "body": "<p>I am trying to run my rails server (<code>rails s</code>) in my Rails 3.2.13 application after having updated my Ruby version in <code>/.ruby-version</code> and <code>/.tools-versions</code>, but get the following message: </p>\n\n<pre><code>asdf: No version set for command rails\n\nyou might want to add one of the following in your .tool-versions file:\n\nruby 2.2.4\n</code></pre>\n\n<p>However, I had updated ruby in both version files to 2.3.0 and it is reflected in both. When I type <code>asdf which ruby</code> the ruby version is also 2.3.0. </p>\n\n<p>I'd like help understanding why <code>rails s</code> prompts this asdf message, and what I'm missing with how to fix it so that I can run the rails server. </p>\n"}, {"tags": ["ruby", "heroku"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1569959618, "post_id": 58191219, "comment_id": 102762227, "body": "<code>application.html.erb</code> can contain ruby code"}, {"owner": {"reputation": 2509, "user_id": 4747043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XBdDU.png?s=128&g=1", "display_name": "alan ocallaghan", "link": "https://stackoverflow.com/users/4747043/alan-ocallaghan"}, "edited": false, "score": 0, "creation_date": 1569964024, "post_id": 58191219, "comment_id": 102763808, "body": "Your question is somewhat vague. It would be easier to help if you provided a concrete example of what you are trying to accomplish, and what you have already attempted."}], "owner": {"reputation": 1, "user_id": 12150443, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA-62RVuTvDv-ll_r32i9gfzgVLNtr5JPzb9CyruQ=k-s128", "display_name": "Shannon Burns", "link": "https://stackoverflow.com/users/12150443/shannon-burns"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1569958450, "creation_date": 1569958450, "question_id": 58191219, "link": "https://stackoverflow.com/questions/58191219/change-css-based-on-url", "title": "Change CSS based on URL", "body": "<p>We have created a heroku app using ruby and would like to change the css, page title and some content based off of the URL used to access the app.  How would you go about doing that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "postgresql"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 2, "creation_date": 1569953245, "post_id": 58190137, "comment_id": 102759821, "body": "Did you run <code>rake db:test:prepare</code>?"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1569953631, "post_id": 58190137, "comment_id": 102759950, "body": "That SQL is what ActiveRecord uses to figure out the structure of the <code>object_formats</code> table (AKA the <code>ObjectFormat</code> model in <code>app&#47;models&#47;object_format.rb</code>). The error is telling out that there is no <code>object_formats</code> table, hence jillian&#39;s suggestion."}, {"owner": {"reputation": 1, "user_id": 8832528, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IAUyO.png?s=128&g=1", "display_name": "Carlos Duran Roca", "link": "https://stackoverflow.com/users/8832528/carlos-duran-roca"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1569959057, "post_id": 58190137, "comment_id": 102761998, "body": "Yes, I have tried to do &quot;rails db:test:prepare&quot; @jvillian"}, {"owner": {"reputation": 1, "user_id": 8832528, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IAUyO.png?s=128&g=1", "display_name": "Carlos Duran Roca", "link": "https://stackoverflow.com/users/8832528/carlos-duran-roca"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1569959130, "post_id": 58190137, "comment_id": 102762034, "body": "@muistooshort I do not know hot to avoid to telling out that there is no object_formats"}, {"owner": {"reputation": 1, "user_id": 8832528, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IAUyO.png?s=128&g=1", "display_name": "Carlos Duran Roca", "link": "https://stackoverflow.com/users/8832528/carlos-duran-roca"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1569960895, "post_id": 58190137, "comment_id": 102762715, "body": "Ok, thanks to the advice od the @muistooshort I think I have solved the problem. The fixtures file where empty/messy and with bad information about the models and issues I had to test. Once I have deleted all the fixtures folder the program started to run the dummy tests. I will report on Thursday the final report"}, {"owner": {"reputation": 692, "user_id": 4256719, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ESoCR.jpg?s=128&g=1", "display_name": "Jagdish", "link": "https://stackoverflow.com/users/4256719/jagdish"}, "edited": false, "score": 0, "creation_date": 1570002863, "post_id": 58190137, "comment_id": 102772982, "body": "there must be some issue with your schema.rb file"}], "owner": {"reputation": 1, "user_id": 8832528, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IAUyO.png?s=128&g=1", "display_name": "Carlos Duran Roca", "link": "https://stackoverflow.com/users/8832528/carlos-duran-roca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1569967525, "creation_date": 1569953096, "last_edit_date": 1569967525, "question_id": 58190137, "link": "https://stackoverflow.com/questions/58190137/database-error-on-executing-test-ruby-on-rails-with-postgres", "title": "Database error on executing test Ruby on Rails with postgres", "body": "<p>I have been in trouble with this error caused when I started to code my tests on ruby on rails. </p>\n\n<p>I have search in the web but the posts that I have found did not help me. I leave the references:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/47727969/rails-relation-does-not-exist-for-reference-with-class-name-in-production?rq=1\">Rails: Relation does not exist for reference with class name in production</a></p>\n\n<p><a href=\"https://github.com/rails/rails/issues/29206\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/issues/29206</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/19097558/pg-undefinedtable-error-relation-users-does-not-exist\">PG undefinedtable error relation users does not exist</a></p>\n\n<p>This is the test that I made:\nApp/test/models/material_test.rb </p>\n\n<pre><code>require 'test_helper'\n\nclass MaterialTest &lt; ActiveSupport::TestCase\n  test \"the truth\" do\n   assert true\n  end\nend\n\n</code></pre>\n\n<p>When I try to execute it using:</p>\n\n<pre><code>rails test\n</code></pre>\n\n<p>I got the following error:</p>\n\n<pre><code># Running:\n\nE\n\nError:\nCategoriesControllerTest#test_the_truth:\nActiveRecord::StatementInvalid: PG::UndefinedTable: ERROR:  relation \"object_formats\" does not exist\nLINE 8:                WHERE a.attrelid = '\"object_formats\"'::regcla...\n                                          ^\n:               SELECT a.attname, format_type(a.atttypid, a.atttypmod),\n                     pg_get_expr(d.adbin, d.adrelid), a.attnotnull, a.atttypid, a.atttypmod,\n                     c.collname, col_description(a.attrelid, a.attnum) AS comment\n                FROM pg_attribute a\n                LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum\n                LEFT JOIN pg_type t ON a.atttypid = t.oid\n                LEFT JOIN pg_collation c ON a.attcollation = c.oid AND a.attcollation &lt;&gt; t.typcollation\n               WHERE a.attrelid = '\"object_formats\"'::regclass\n                 AND a.attnum &gt; 0 AND NOT a.attisdropped\n               ORDER BY a.attnum\n\n\n</code></pre>\n\n<p>My repo is public and the code is up to date.</p>\n\n<p><a href=\"https://github.com/FragmentX/FRAGMENTX\" rel=\"nofollow noreferrer\">https://github.com/FragmentX/FRAGMENTX</a></p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 11964190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bTnbD.png?s=128&g=1", "display_name": "zakariah1", "link": "https://stackoverflow.com/users/11964190/zakariah1"}, "edited": false, "score": 0, "creation_date": 1569959385, "post_id": 58190679, "comment_id": 102762130, "body": "&quot;Metapgramming Ruby&quot; by Paolo Perrotta is great book is goes into your question in great detail."}], "tags": [], "owner": {"reputation": 151, "user_id": 11964190, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bTnbD.png?s=128&g=1", "display_name": "zakariah1", "link": "https://stackoverflow.com/users/11964190/zakariah1"}, "is_accepted": false, "score": 0, "last_activity_date": 1569955935, "creation_date": 1569955935, "answer_id": 58190679, "question_id": 58189718, "link": "https://stackoverflow.com/questions/58189718/why-is-the-singleton-class-an-instance-of-itself/58190679#58190679", "title": "Why is the singleton class an instance of itself?", "body": "<p>Where you are getting 47001622014720 from o.singleton_class.class.object_id is really the same as Class.object_id which should also yield 47001622014720. </p>\n\n<p>Take this a step further and try ancestors instead of object_id to see if you can get more understanding of what is going on.</p>\n\n<pre><code>o.singleton_class.instance_eval { self.ancestors } # =&gt; [#&lt;Class:#&lt;Object:0x00007f9b3c0465d0&gt;&gt;, Object, Kernel, BasicObject]\no.singleton_class.class_eval { self.ancestors }    # =&gt; [#&lt;Class:#&lt;Object:0x00007f9b3c0465d0&gt;&gt;, Object, Kernel, BasicObject]\no.singleton_class.ancestors # =&gt; [#&lt;Class:#&lt;Object:0x00007f9b3c0465d0&gt;&gt;, Object, Kernel, BasicObject]\no.singleton_class.class.ancestors # =&gt; [Class, Module, Object, Kernel, BasicObject]\n</code></pre>\n"}], "owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1569955935, "creation_date": 1569951035, "last_edit_date": 1569951366, "question_id": 58189718, "link": "https://stackoverflow.com/questions/58189718/why-is-the-singleton-class-an-instance-of-itself", "title": "Why is the singleton class an instance of itself?", "body": "<p>The question is quite hard to word. All objects have a singleton class (aka ghost class) which is a class on which we can define methods just for that object.</p>\n\n<p>But when we inspect the singleton class we see it is an instance of a class which are both he same object.</p>\n\n<pre><code>o = Object.new\no.singleton_class.instance_eval { self.object_id } # =&gt; 47082984969880\no.singleton_class.class_eval { self.object_id } # =&gt; 47082984969880\n</code></pre>\n\n<p>This is because the singleton class is an anonymous class.</p>\n\n<pre><code>o.singleton_class # =&gt; #&lt;Class:#&lt;Object:0x0000557ed623d8b8&gt;&gt;\no.singleton_class.name # =&gt; nil\n</code></pre>\n\n<p>An anonymous class is a class of type <code>Class</code></p>\n\n<pre><code>o.singleton_class.class # =&gt; Class\n</code></pre>\n\n<p>And the class of <code>Class</code> is <code>Class</code>:</p>\n\n<pre><code>Class.class # =&gt; Class\nClass.new.class == Class # =&gt; true\n</code></pre>\n\n<p><code>Class</code> is an instance of itself.</p>\n\n<p>Thus we can see that the singleton class is an an anonymous class of type <code>Class</code>, they are the same instance of <code>Class</code></p>\n\n<pre><code>Class.object_id # =&gt; 47001622014720\no.singleton_class.class.object_id # =&gt; 47001622014720\n</code></pre>\n\n<p>But why using <code>class_eval</code> and <code>instance_eval</code> do we get the same objects, but looking at the instance and class without eval we do not?</p>\n\n<pre><code>o.singleton_class.instance_eval { self.object_id } # =&gt; 47082984969880\no.singleton_class.class_eval { self.object_id }    # =&gt; 47082984969880\no.singleton_class.object_id                        # =&gt; 47082984969880\no.singleton_class.class.object_id                  # =&gt; 47001622014720\n</code></pre>\n"}, {"tags": ["javascript", "ruby", "reactjs", "sorting", "date"], "answers": [{"tags": [], "owner": {"reputation": 1119, "user_id": 52344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fcfdbf7b91c277f443ccc3720716057?s=128&d=identicon&r=PG", "display_name": "inkdeep", "link": "https://stackoverflow.com/users/52344/inkdeep"}, "is_accepted": false, "score": 0, "last_activity_date": 1569957419, "creation_date": 1569957419, "answer_id": 58190993, "question_id": 58189248, "link": "https://stackoverflow.com/questions/58189248/sorting-table-rows-by-date-comparing-datetime-in-seeds-file-and-date-now/58190993#58190993", "title": "Sorting table rows by date comparing DateTime in seeds file and Date.now()", "body": "<p>Your sort function needs to return -1, 0, or 1 to work properly. <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort</a></p>\n"}], "owner": {"reputation": 143, "user_id": 10559334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/01GgL.jpg?s=128&g=1", "display_name": "Amanda Treutler", "link": "https://stackoverflow.com/users/10559334/amanda-treutler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 20, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569957419, "creation_date": 1569948805, "question_id": 58189248, "link": "https://stackoverflow.com/questions/58189248/sorting-table-rows-by-date-comparing-datetime-in-seeds-file-and-date-now", "title": "Sorting table rows by date comparing DateTime in seeds file and Date.now()", "body": "<p>I am trying to render a table with a list of appointment times that have a DateTime in my seeds file. I'm trying to sort them by date, and also conditionally render based on whether that time is in the past or future. I'm struggling to format it properly to be able to sort.</p>\n\n<p>I've converted the array of objects from state so that every date attribute is in the Javascript date format.</p>\n\n<p>Here is the relevant section:</p>\n\n<pre><code>import React, { Component } from \"react\";\n\nexport default class LessonsList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      current_time: Date.now(),\n      lessons: []\n    };\n  }\n\n  componentDidMount() {\n    const token = localStorage.getItem(\"current_user\");\n    fetch(\"http://localhost:3000/api/v1/lessons/\", {\n      method: \"GET\",\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    })\n      .then(resp =&gt; resp.json())\n      .then(lessons =&gt; {\n        lessons.map(lesson =&gt; {\n          lesson.timeslot.realdate = new Date(lesson.timeslot.realdate);\n          return lesson;\n        });\n        this.setState({\n          lessons\n        });\n      });\n  }\n\n  sortDates = () =&gt; {\n    let sortedDates = this.state.lessons.sort(function(date, lesson) {\n      return Date.now(date) - lesson.timeslot.realdate;\n    });\n    return sortedDates;\n  };\n\n  renderTableData = () =&gt; {\n    // map over sorted array from separate function\n    return this.state.lessons.length ? (\n      this.sortDates().map(lesson =&gt; {\n        console.log(lesson.timeslot.realdate &gt; Date.now());\n        return (\n          &lt;tr&gt;\n            &lt;th scope=\"row\"&gt;{lesson.id}&lt;/th&gt;\n            &lt;td&gt;{lesson.teacher.name}&lt;/td&gt;\n            &lt;td&gt;\n              {lesson.timeslot.month_name} {lesson.timeslot.date}\n            &lt;/td&gt;\n            &lt;td&gt;{lesson.timeslot.hour}:00&lt;/td&gt;\n          &lt;/tr&gt;\n        );\n      })\n    ) : (\n      &lt;h6&gt;'Loading'&lt;/h6&gt;\n    );\n  };\n\n  render() {\n    console.log(this.state.lessons);\n    return (\n      &lt;div&gt;\n        &lt;h1 className=\"lesson-h1\"&gt;Lessons&lt;/h1&gt;\n        &lt;br&gt;&lt;/br&gt;\n        &lt;div className=\"col-md-12 student-button-group\"&gt;&lt;/div&gt;\n        &lt;table className=\"table table-striped lesson-table\"&gt;\n          &lt;thead&gt;\n            &lt;tr&gt;\n              &lt;th scope=\"col\"&gt;Lesson ID&lt;/th&gt;\n              &lt;th scope=\"col\"&gt;Teacher&lt;/th&gt;\n              &lt;th scope=\"col\"&gt;Date&lt;/th&gt;\n              &lt;th scope=\"col\"&gt;Time&lt;/th&gt;\n            &lt;/tr&gt;\n          &lt;/thead&gt;\n          &lt;tbody&gt;{this.renderTableData()}&lt;/tbody&gt;\n        &lt;/table&gt;\n      &lt;/div&gt;\n    );\n  }\n}\n\n</code></pre>\n\n<p>I think I need to sort by date and then map over what is returned to render the table rows. It's not seeming to have any effect. Thanks!</p>\n"}, {"tags": ["arrays", "ruby", "hash", "key"], "answers": [{"comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 4, "creation_date": 1569949671, "post_id": 58189288, "comment_id": 102758473, "body": "Instead of doing it yourself with <code>Array#{first&#47;last}</code> you can tell Ruby to decompose <code>k</code>: <code>|((k1, k2), v), memo|</code>. Depending on the actual data you can even give it a more fitting name than <code>k2</code> (or <code>k.last</code>)."}], "tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": true, "score": 3, "last_activity_date": 1569970286, "last_edit_date": 1569970286, "creation_date": 1569949038, "answer_id": 58189288, "question_id": 58188922, "link": "https://stackoverflow.com/questions/58188922/how-to-convert-a-ruby-hash-with-an-array-key-to-a-nested-hash-in-ruby/58189288#58189288", "title": "How to convert a ruby hash with an &#39;array&#39; key to a nested hash in Ruby?", "body": "<p><code>each_with_object</code> could be the rescue:</p>\n\n<pre><code>hash.each_with_object(Hash.new {|h, k| h[k] = {}}) do |((first, last), v), memo|  \n  memo[first].merge!(last =&gt; v)\nend\n#=&gt; {\"A\"=&gt;{\"B\"=&gt;{\"id\"=&gt;123, \"name\"=&gt;\"test\"}, \n#          \"F\"=&gt;{\"id\"=&gt;236, \"name\"=&gt;\"another test\"}}, \n#    \"C\"=&gt;{\"F\"=&gt;{\"id\"=&gt;238, \"name\"=&gt;\"anoother test\"}}}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 6584315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/161fd2d2923e0c846781cac354920580?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/6584315/dennis"}, "edited": false, "score": 0, "creation_date": 1569962241, "post_id": 58189635, "comment_id": 102763220, "body": "Really nice! Great one-liner!"}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 3, "last_activity_date": 1569950629, "creation_date": 1569950629, "answer_id": 58189635, "question_id": 58188922, "link": "https://stackoverflow.com/questions/58188922/how-to-convert-a-ruby-hash-with-an-array-key-to-a-nested-hash-in-ruby/58189635#58189635", "title": "How to convert a ruby hash with an &#39;array&#39; key to a nested hash in Ruby?", "body": "<p>You can also use <a href=\"https://ruby-doc.org/core-2.6.4/Enumerable.html#method-i-group_by\" rel=\"nofollow noreferrer\">Enumerable#group_by</a> then <a href=\"https://ruby-doc.org/core-2.6.4/Hash.html#method-i-transform_values\" rel=\"nofollow noreferrer\">Hash#transform_values</a> by <a href=\"https://ruby-doc.org/core-2.6.4/Enumerable.html#method-i-map\" rel=\"nofollow noreferrer\">Enumerable#map</a> to a new hash using <a href=\"https://ruby-doc.org/core-2.6.4/Array.html#method-i-to_h\" rel=\"nofollow noreferrer\">Array#to_h</a>:</p>\n\n<pre><code>h.group_by { |h,k| h.first }.transform_values { |v| v.map { |a, b| [a.last, b] }.to_h }\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 6584315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/161fd2d2923e0c846781cac354920580?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/6584315/dennis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 58189288, "answer_count": 2, "score": 3, "last_activity_date": 1569970286, "creation_date": 1569947206, "last_edit_date": 1569957911, "question_id": 58188922, "link": "https://stackoverflow.com/questions/58188922/how-to-convert-a-ruby-hash-with-an-array-key-to-a-nested-hash-in-ruby", "title": "How to convert a ruby hash with an &#39;array&#39; key to a nested hash in Ruby?", "body": "<p>I'm trying to figure out how i can convert a complex hash like this:</p>\n\n<pre><code>{\n  [\"A\", \"B\"]=&gt;{\"id\"=&gt;123,\"name\"=&gt;\"test\"},\n  [\"A\", \"F\"]=&gt;{\"id\"=&gt;236,\"name\"=&gt;\"another test\"},\n  [\"C\", \"F\"]=&gt;{\"id\"=&gt;238,\"name\"=&gt;\"anoother test\"}\n}\n</code></pre>\n\n<p>into an even more complex hash like</p>\n\n<pre><code>{\n  \"A\"=&gt;{\n     \"B\"=&gt;{\"id\"=&gt;123,\"name\"=&gt;\"test\"},\n     \"F\"=&gt;{\"id\"=&gt;236,\"name\"=&gt;\"another test\"}\n  },\n  \"C\"=&gt;{\n     \"F\"=&gt;{\"id\"=&gt;238,\"name\"=&gt;\"anoother test\"}\n  }\n}\n</code></pre>\n\n<p>Any help would be really welcome! </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "powerpoint", "office365api"], "answers": [{"tags": [], "owner": {"reputation": 4355, "user_id": 1392154, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/61e860048a2e2226ea2726fe3d29451a?s=128&d=identicon&r=PG", "display_name": "Elmor", "link": "https://stackoverflow.com/users/1392154/elmor"}, "is_accepted": true, "score": 0, "last_activity_date": 1570173359, "creation_date": 1570173359, "answer_id": 58231624, "question_id": 58188409, "link": "https://stackoverflow.com/questions/58188409/ror-creating-a-powerpoint-presentation-from-a-template-in-the-office365/58231624#58231624", "title": "RoR: Creating a PowerPoint Presentation from a template, in the office365", "body": "<p>I was able to find only these gem <a href=\"https://github.com/microsoftgraph/ruby-connect-rest-sample\" rel=\"nofollow noreferrer\">https://github.com/microsoftgraph/ruby-connect-rest-sample</a>.\n<a href=\"https://github.com/Plaristote/sharepoint-ruby\" rel=\"nofollow noreferrer\">https://github.com/Plaristote/sharepoint-ruby</a></p>\n"}], "owner": {"reputation": 4355, "user_id": 1392154, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/61e860048a2e2226ea2726fe3d29451a?s=128&d=identicon&r=PG", "display_name": "Elmor", "link": "https://stackoverflow.com/users/1392154/elmor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 58231624, "answer_count": 1, "score": 1, "last_activity_date": 1570173422, "creation_date": 1569945062, "last_edit_date": 1570173422, "question_id": 58188409, "link": "https://stackoverflow.com/questions/58188409/ror-creating-a-powerpoint-presentation-from-a-template-in-the-office365", "title": "RoR: Creating a PowerPoint Presentation from a template, in the office365", "body": "<p>I need to create a Powerpoint Presentation from a template via smith like <a href=\"https://docs.microsoft.com/en-us/office/open-xml/how-to-create-a-presentation-document-by-providing-a-file-name?redirectedfrom=MSDN\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/office/open-xml/how-to-create-a-presentation-document-by-providing-a-file-name?redirectedfrom=MSDN</a> On the Office.com server.</p>\n\n<p>I came across a number of gems, including powerpoint, ruby_slides and etc. but I wasn't able to find any documentation on the Office 365 Api via Ruby.</p>\n\n<p>Am I missing something? could you please help?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 1, "creation_date": 1569943030, "post_id": 58187856, "comment_id": 102755440, "body": "What you have should be fine."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1569943492, "post_id": 58187856, "comment_id": 102755715, "body": "Do you have an index on the <code>users.state</code> column in the database?."}, {"owner": {"reputation": 1285, "user_id": 10443890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de817ef35c4a2bdd0501efbdc6d9a338?s=128&d=identicon&r=PG&f=1", "display_name": "mr_muscle", "link": "https://stackoverflow.com/users/10443890/mr-muscle"}, "reply_to_user": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1569943552, "post_id": 58187856, "comment_id": 102755747, "body": "@JoshBrody Even if it will be a query for million campaign codes in every page refresh? I have to provide this data in one endpoint which will return number of used campaign codes for every refreshment"}, {"owner": {"reputation": 1285, "user_id": 10443890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de817ef35c4a2bdd0501efbdc6d9a338?s=128&d=identicon&r=PG&f=1", "display_name": "mr_muscle", "link": "https://stackoverflow.com/users/10443890/mr-muscle"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1569943566, "post_id": 58187856, "comment_id": 102755752, "body": "@spickermann nope I don&#39;t have it"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1569943683, "post_id": 58187856, "comment_id": 102755808, "body": "Do you need the count of all codes or all codes per campaign?"}, {"owner": {"reputation": 1285, "user_id": 10443890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de817ef35c4a2bdd0501efbdc6d9a338?s=128&d=identicon&r=PG&f=1", "display_name": "mr_muscle", "link": "https://stackoverflow.com/users/10443890/mr-muscle"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1569950199, "post_id": 58187856, "comment_id": 102758656, "body": "@spickermann all codes per campaign but in the view there will be hundred campaigns with hundred of thousand codes"}, {"owner": {"reputation": 583, "user_id": 6003901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/670460d23edc4b03e848c32cd07cdc38?s=128&d=identicon&r=PG&f=1", "display_name": "abby37", "link": "https://stackoverflow.com/users/6003901/abby37"}, "edited": false, "score": 0, "creation_date": 1569956462, "post_id": 58187856, "comment_id": 102760988, "body": "to make your view lightweight why don&#39;t you use pagination. So you don&#39;t have to make unnecessary query for all campaign code until your client want to see that."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1569957623, "post_id": 58187856, "comment_id": 102761431, "body": "I&#39;m wondering how you plan to show 200k codes in page without bothering the user. What&#39;s the case, is the most important here."}, {"owner": {"reputation": 805, "user_id": 4544219, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CLo94.jpg?s=128&g=1", "display_name": "Mosaaleb", "link": "https://stackoverflow.com/users/4544219/mosaaleb"}, "edited": false, "score": 1, "creation_date": 1569961125, "post_id": 58187856, "comment_id": 102762804, "body": "Have you considered using counter cache"}, {"owner": {"reputation": 761, "user_id": 7786120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3acd54907ef6cb3d7de0ebd91177850d?s=128&d=identicon&r=PG&f=1", "display_name": "Akshay Goyal", "link": "https://stackoverflow.com/users/7786120/akshay-goyal"}, "edited": false, "score": 0, "creation_date": 1570627899, "post_id": 58187856, "comment_id": 102972765, "body": "How about using database triggers? Whenever a code is used you can just increase the count. There&#39;s one handy gem for this as well: <a href=\"https://github.com/jenseng/hair_trigger\" rel=\"nofollow noreferrer\">github.com/jenseng/hair_trigger</a>."}], "answers": [{"tags": [], "owner": {"reputation": 135, "user_id": 3756612, "user_type": "registered", "profile_image": "https://graph.facebook.com/510650564/picture?type=large", "display_name": "bryanfeller", "link": "https://stackoverflow.com/users/3756612/bryanfeller"}, "is_accepted": false, "score": 0, "last_activity_date": 1569963530, "creation_date": 1569963530, "answer_id": 58192186, "question_id": 58187856, "link": "https://stackoverflow.com/questions/58187856/rails-most-efficient-way-to-pull-out-data-from-simple-model/58192186#58192186", "title": "Rails most efficient way to pull out data from simple model", "body": "<p>If you need speed you gotta use direct SQL and use the tricks of your database.</p>\n\n<p>I would make a custom query in your model (if PostgreSQL):</p>\n\n<pre><code>def self.count_used_codes\n  sql = &lt;&lt;-SQL\n    SELECT count(*) FROM campaign_codes WHERE state == 'used';\n  SQL\n  self.find_by_sql(sql)\nend\n</code></pre>\n\n<p>Then use with</p>\n\n<pre><code>CampaignCode.count_used_codes\n</code></pre>\n\n<p>Then you also give yourself some flexibility to optimize based on your specific usage. You can also try out estimated counts which can be much faster if you aren't worried about accuracy, but that stuff is a bit beyond what I'm knowledgeable in.</p>\n\n<p>I've also seen people make a specific sql folder in app and then reference complex queries in there to keep it all clean.</p>\n"}], "owner": {"reputation": 1285, "user_id": 10443890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de817ef35c4a2bdd0501efbdc6d9a338?s=128&d=identicon&r=PG&f=1", "display_name": "mr_muscle", "link": "https://stackoverflow.com/users/10443890/mr-muscle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569963530, "creation_date": 1569942929, "question_id": 58187856, "link": "https://stackoverflow.com/questions/58187856/rails-most-efficient-way-to-pull-out-data-from-simple-model", "title": "Rails most efficient way to pull out data from simple model", "body": "<p>I've got two simple models - <code>Campaign</code> and <code>CampaignCode</code> from which I will have to pull out number of already used <code>CampaignCode</code>. Because it's a large amount of data (200k codes for just one campaign) I'm wondering which way will be most efficient to do so? </p>\n\n<p><code>query</code></p>\n\n<pre><code>CampaignCode.where(state: 'used').count\n</code></pre>\n\n<p>I think this <code>query</code> solving the problem only with small piece of data, should I use <code>include</code> or maybe some join table?</p>\n\n<p><code>campaign</code> model</p>\n\n<pre><code>#  created_at         :datetime         not null\n#  end_date           :date\n#  id                 :bigint(8)        not null, primary key\n#  name               :text             not null\n#  start_date         :date\n#  updated_at         :datetime         not null\n\nclass Campaign &lt; ApplicationRecord\n  has_many :campaign_codes\n\n  validates :name, presence: true\nend\n</code></pre>\n\n<p><code>campaign_code</code> model</p>\n\n<pre><code>#created_at         :datetime         not null\n#campaign_id        :bigint(8)\n#state              :integer\n#uid                :string           not null, primary key\n#updated_at         :datetime         not null\n\nclass CampaignCode &lt; ApplicationRecord\n  self.primary_key = :uid\n\n  belongs_to :campaign\n\n  validates :uid, uniqueness: true\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation", "sequel"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1572072277, "post_id": 58187443, "comment_id": 103454890, "body": "&quot;Is there some gem that already solves this problem?&quot; Please see &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the linked pages and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">mcve</a>. We can&#39;t recommend off-site resources. Instead, you have to do the research and find something that seems appropriate to your use, then try it, then, if you run into a problem, ask a specific question about the problem you encounter. Currently your question is way ahead of that."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1573077781, "post_id": 58187443, "comment_id": 103768155, "body": "You might want to check with the Sequel IRC or Group Forum. The author and other power-users hang out there. See &quot;<a href=\"https://sequel.jeremyevans.net/rdoc/files/README_rdoc.html#label-Resources\" rel=\"nofollow noreferrer\">Resources</a>&quot; for more information."}], "answers": [{"tags": [], "owner": {"reputation": 464, "user_id": 1652544, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/c32cc17c4fe7a7c91de80837918123b6?s=128&d=identicon&r=PG", "display_name": "Andrew Zhuk", "link": "https://stackoverflow.com/users/1652544/andrew-zhuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1598737280, "creation_date": 1598737280, "answer_id": 63652037, "question_id": 58187443, "link": "https://stackoverflow.com/questions/58187443/how-to-get-validation-error-keys-in-sequel/63652037#63652037", "title": "How to get validation error keys in Sequel?", "body": "<p>Not sure if I understood you correctly, if you want to get the keys then this is the case: <code>message.errors.keys</code></p>\n<pre><code>message = Message.new(some_bad_params)\nmessage.errors\n# get keys\n=&gt; {\n  :subject=&gt;[&quot;is not present&quot;, &quot;is too short or too long&quot;],\n  :notifications=&gt;[&quot;is not present&quot;]\n}\nmessage.errors.keys\n=&gt; [:subject, :notifications]\n</code></pre>\n"}], "owner": {"reputation": 2931, "user_id": 1523560, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a04c8a5d97cf0b1c298c85b20c21f113?s=128&d=identicon&r=PG", "display_name": "bmalets", "link": "https://stackoverflow.com/users/1523560/bmalets"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1598737280, "creation_date": 1569941513, "last_edit_date": 1581277116, "question_id": 58187443, "link": "https://stackoverflow.com/questions/58187443/how-to-get-validation-error-keys-in-sequel", "title": "How to get validation error keys in Sequel?", "body": "<p>There is a rails application with Sequel instead of ActiveRecord.</p>\n\n<p>After validation of record with invalid params, I got this:</p>\n\n<pre><code>message = Message.new(some_bad_params)\nmessage.errors\n=&gt; {\n    :subject=&gt;[\"is not present\", \"is too short or too long\"],\n    :notifications=&gt;[\"is not present\"]\n   }\n</code></pre>\n\n<p>In this case, in API response I need to somehow send error keys of this record.</p>\n\n<p><strong>Not error messages</strong> because API client is another rails application with different languages and localizations.</p>\n\n<p>In ActiveRecord is possible just call <a href=\"https://guides.rubyonrails.org/active_record_validations.html#working-with-validation-errors-errors-details\" rel=\"nofollow noreferrer\">\"details\" method</a> like <code>record.errors.details</code> and receives <a href=\"https://guides.rubyonrails.org/i18n.html#error-message-interpolation\" rel=\"nofollow noreferrer\">keys</a></p>\n\n<p>But in Sequel is does not work. Because it's not implemented =)</p>\n\n<p>Could you kindly suggest the best way how to get the keys of validation error messages?</p>\n\n<p>I checked <a href=\"https://github.com/jeremyevans/sequel/blob/master/lib/sequel/plugins/validation_helpers.rb\" rel=\"nofollow noreferrer\">validation_helpers.rb</a> Sequel's plugin, but there is a suggestion only about the redefining of error messages. But what about error keys?</p>\n"}, {"tags": ["ruby", "iterator"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 4, "creation_date": 1569941552, "post_id": 58187422, "comment_id": 102754596, "body": "Block argument list?"}, {"owner": {"reputation": 13101, "user_id": 6059896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiTP.gif?s=128&g=1", "display_name": "tukan", "link": "https://stackoverflow.com/users/6059896/tukan"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1569941739, "post_id": 58187422, "comment_id": 102754712, "body": "@jonrsharpe yes, since ruby takes from Smalltalk this makes sense"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1569944207, "post_id": 58187422, "comment_id": 102756091, "body": "It&#39;s not an iterator, it&#39;s the current item under iteration. The <i>general</i> term is &quot;parameter&quot; or &quot;argument&quot; list. It can be narrowed down as Jon says since it&#39;s the argument list to a block in this case."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1569949784, "post_id": 58187422, "comment_id": 102758504, "body": "@jonrsharpe: It&#39;s a block parameter list, actually. Parameter == a hole left in the definition. Argument == what you use to fill in the hole. Some languages also call them formal argument / actual argument or formal parameter / actual parameter. If I want to be really pedantic and at the same time clearly be understood by all different communities, I will say formal parameter / actual argument."}], "answers": [{"tags": [], "owner": {"reputation": 84, "user_id": 1481626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7385d9e0c45a30c081fbbf53136e2d?s=128&d=identicon&r=PG", "display_name": "Christine", "link": "https://stackoverflow.com/users/1481626/christine"}, "is_accepted": false, "score": 1, "last_activity_date": 1569942984, "creation_date": 1569942984, "answer_id": 58187870, "question_id": 58187422, "link": "https://stackoverflow.com/questions/58187422/what-is-the-ruby-terminology-for-this-part-of-an-iterator/58187870#58187870", "title": "What is the Ruby terminology for this part of an iterator?", "body": "<p>Item would be a good description. If you check out the Ruby documentation for the <a href=\"https://ruby-doc.org/core-2.6.4/Array.html#method-i-map\" rel=\"nofollow noreferrer\">.map method</a>, you'll see that it is described as {|item| block }. So within the pipe's (|) is the \"item\" then next come the code block.</p>\n"}, {"comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1569946746, "post_id": 58188215, "comment_id": 102757325, "body": "The general difference between a parameter and an argument is that a parameter is part of a method (or block) definition to specify what can be passed in. The &quot;thing&quot; passed in to a specific call is the arguments which are then mapped to the defined method parameters. When talking about block arguments, you are thus referring to a block being passed as an argument to a method call. With block parameters on the other hand, you are specifying the parameters a block can take when it is called. Since defined parameters and given arguments usually match, these terms are often used interchangeably."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1569949647, "post_id": 58188215, "comment_id": 102758463, "body": "&quot;When talking about block arguments, you are thus referring to a block being passed as an argument to a method call&quot; \u2013 Or to the arguments passed to a block call. Isn&#39;t English fun? :-D"}], "tags": [], "owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "is_accepted": true, "score": 1, "last_activity_date": 1569944676, "last_edit_date": 1569944676, "creation_date": 1569944368, "answer_id": 58188215, "question_id": 58187422, "link": "https://stackoverflow.com/questions/58187422/what-is-the-ruby-terminology-for-this-part-of-an-iterator/58188215#58188215", "title": "What is the Ruby terminology for this part of an iterator?", "body": "<p>CRuby's parser (<a href=\"https://github.com/ruby/ruby/blob/v2_6_5/parse.y#L3075\" rel=\"nofollow noreferrer\"><code>parse.y</code></a>) calls it <code>block_param_def</code> (<em>block parameters definition</em>). You're defining the parameters of a block after all.</p>\n\n<p>In \u201cThe Ruby Programming Language\u201d by David Flanagan and Yukihiro Matsumoto it's called <em>block parameters</em> too (5.4.1 Block Syntax, page 141):</p>\n\n<blockquote>\n  <p>Blocks can be parameterized, just as methods can. Block parameters are separated with commas and delimited with a pair of vertical bar (<code>|</code>) characters [\u2026]</p>\n</blockquote>\n\n<p>A <em>block argument</em> would be <code>&amp;blk</code> as in <code>def foo(&amp;blk)</code> where <code>blk</code> will refer to a block - which is usually anonymous - if one is passed as part of a method call. An important difference the book also mentions in a footnote (6.4.5 Block Arguments, page 190):</p>\n\n<blockquote>\n  <ul>\n  <li>We use the term \u201cblock argument\u201d instead of \u201cblock parameter\u201d for method parameters prefixed with <code>&amp;</code>. This is because the phrase \u201cblock parameter\u201d refers to the parameter list (such as <code>|x|</code>) of the block itself.</li>\n  </ul>\n</blockquote>\n\n<p>Arguably a bit odd and not really logical as arguments to a block (such as <code>1</code>, <code>2</code> and <code>3</code> in your example) could be called block arguments too.</p>\n"}], "owner": {"reputation": 373, "user_id": 1395961, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/094a18dfb0afb9fc27b3e57768961948?s=128&d=identicon&r=PG", "display_name": "JoshuaESummers", "link": "https://stackoverflow.com/users/1395961/joshuaesummers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 58188215, "answer_count": 2, "score": 0, "last_activity_date": 1569944676, "creation_date": 1569941411, "question_id": 58187422, "link": "https://stackoverflow.com/questions/58187422/what-is-the-ruby-terminology-for-this-part-of-an-iterator", "title": "What is the Ruby terminology for this part of an iterator?", "body": "<p>I am trying to understand what the name for |n| is in the code below. </p>\n\n<pre><code>array = [1,2,3]\narray.map { |n| n * 2 }\n# [2, 4, 6]\n</code></pre>\n\n<p>I know what it does and how it works, but is it called a 'placeholder' or does it have an official name (maybe 'iterator')? I would like to know as it will help me remember it and discuss my code better. </p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1569942156, "post_id": 58187438, "comment_id": 102754968, "body": "When concerned about readability you could also opt to first save the method in a variable. <code>foo = method(:foo)</code> then <code>list.map(&amp;foo)</code>."}, {"owner": {"reputation": 4755, "user_id": 400277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea12da4fb5d06d2e5da1c53b272f5ccd?s=128&d=identicon&r=PG", "display_name": "Nowhere man", "link": "https://stackoverflow.com/users/400277/nowhere-man"}, "edited": false, "score": 0, "creation_date": 1569942260, "post_id": 58187438, "comment_id": 102755025, "body": "The lambda is indeed more readable. (and usable in more cases)"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1569942488, "post_id": 58187438, "comment_id": 102755158, "body": "With lambda do you mean <code>list.map(&amp;-&gt;x { x + 1 })</code>?"}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1569952769, "post_id": 58187438, "comment_id": 102759642, "body": "This works because <code>method(:foo)</code> responds to <code>#call</code> like a lambda."}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 5, "last_activity_date": 1569942035, "last_edit_date": 1569942035, "creation_date": 1569941489, "answer_id": 58187438, "question_id": 58187396, "link": "https://stackoverflow.com/questions/58187396/is-there-a-shorthand-for-x-foo-x/58187438#58187438", "title": "Is there a shorthand for {|x| foo x}?", "body": "<p>You can reference the method to pass as a proc with <code>method</code>:</p>\n\n<pre><code>list.map(&amp;method(:foo))\n</code></pre>\n\n<p>Maybe not the shortcut you're looking for, as it's limited to work with methods that expect only one argument and reduces readability.</p>\n"}, {"tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 2, "last_activity_date": 1569941714, "creation_date": 1569941714, "answer_id": 58187498, "question_id": 58187396, "link": "https://stackoverflow.com/questions/58187396/is-there-a-shorthand-for-x-foo-x/58187498#58187498", "title": "Is there a shorthand for {|x| foo x}?", "body": "<p>Adding a bit more context to the <a href=\"https://stackoverflow.com/a/58187438/3982562\">answer supplied by Sebastian Palma</a>.</p>\n\n<pre><code>method(:foo)\n</code></pre>\n\n<p>Returns the method <code>foo</code> of the current instance (<code>self</code>). You can also use this in combination with other instances:</p>\n\n<pre><code>(1..10).map(&amp;5.method(:+))\n#=&gt; [6, 7, 8, 9, 10, 11, 12, 13, 14, 15]\n</code></pre>\n\n<p>Here <code>5.method(:+)</code> returns the <code>+</code> method for the instance <code>5</code>.</p>\n"}], "owner": {"reputation": 4755, "user_id": 400277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea12da4fb5d06d2e5da1c53b272f5ccd?s=128&d=identicon&r=PG", "display_name": "Nowhere man", "link": "https://stackoverflow.com/users/400277/nowhere-man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 1, "accepted_answer_id": 58187438, "answer_count": 2, "score": 6, "last_activity_date": 1569942035, "creation_date": 1569941342, "question_id": 58187396, "link": "https://stackoverflow.com/questions/58187396/is-there-a-shorthand-for-x-foo-x", "title": "Is there a shorthand for {|x| foo x}?", "body": "<p>I have defined a method that I want to apply to a list:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Foobar\n  def foo(x)\n    x+1\n  end\n\n  def bar(list)\n    list.map {|x| foo x}\n  end\nend\n</code></pre>\n\n<p>I was expecting to be able to do something like <code>list.map(foo)</code> as it seems rather redundant to create a lambda function that just applies its arguments to a function.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 3, "creation_date": 1569939843, "post_id": 58186885, "comment_id": 102753448, "body": "Try <code>output_hello()</code>."}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 1, "creation_date": 1569940566, "post_id": 58186885, "comment_id": 102753958, "body": "Why all the downvotes and closing the question? There&#39;s no way for them to know that there was a duplicate as they didn&#39;t know their problem"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 1, "creation_date": 1569940619, "post_id": 58186885, "comment_id": 102753993, "body": "In your example output_hello is a variable, &quot;Sorry&quot;, and a method called output_hello, which returns &quot;Hello&quot;. When you call <code>output_hello</code> without the brackets, it references the variable. With the brackets, and you call the method instead"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1569942112, "post_id": 58186885, "comment_id": 102754941, "body": "@Mark: That&#39;s <i>precisely</i> what closing as a duplicate is for. The question stays, so that people who don&#39;t know how to search for the duplicate can find this question instead, but all answers are collected in a single place, where they can be curated, ranked, and voted without fragmenting across many questions."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1569950274, "post_id": 58186885, "comment_id": 102758684, "body": "@Mark: It&#39;s even less effort to close-vote as a duplicate, <i>and</i> is a better result for the OP, because he gets a <i>proper</i> answer instead of someone &quot;just writing a sentence&quot;. Even <a href=\"https://stackoverflow.com/a/3741741/2988\"><i>my</i> 9-year old, very short, very compressed answer</a> is <i>two</i> sentences, plus two additional references."}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1570006754, "post_id": 58186885, "comment_id": 102774779, "body": "I&#39;m pretty curious who deleted my comment about how offputting this is for new users and how many people simply leave the site after getting their first question downvoted and closed for being a &#39;duplicate&#39;."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1570034926, "post_id": 58186885, "comment_id": 102789907, "body": "@Mark: Comments are meant to be ephemeral. They can be deleted at any time for any reason."}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1570036996, "post_id": 58186885, "comment_id": 102790843, "body": "@J&#246;rgWMittag In no way is my curiosity diminished by that fact."}], "owner": {"reputation": 71, "user_id": 11205087, "user_type": "registered", "profile_image": "https://graph.facebook.com/901939949837556/picture?type=large", "display_name": "Umesh Kushwaha", "link": "https://stackoverflow.com/users/11205087/umesh-kushwaha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "closed_date": 1569940101, "answer_count": 0, "score": 1, "last_activity_date": 1569939738, "creation_date": 1569939738, "question_id": 58186885, "link": "https://stackoverflow.com/questions/58186885/why-output-is-sorry-instead-of-hello", "closed_reason": "Duplicate", "title": "Why output is &quot;Sorry&quot; instead of &quot;Hello&quot;?", "body": "<p>Why I am getting the output \"Sorry\" instead of \"Hello\" ? Please someone explain this.</p>\n\n<pre><code>output_hello = \"Sorry\"\n\ndef output_hello\n  \"Hello\"\nend\n\nputs output_hello\n</code></pre>\n"}, {"tags": ["regex", "ruby", "gsub"], "comments": [{"owner": {"reputation": 641, "user_id": 5199542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc4bf213725a3737f165cd15af26331c?s=128&d=identicon&r=PG", "display_name": "Xiting", "link": "https://stackoverflow.com/users/5199542/xiting"}, "edited": false, "score": 0, "creation_date": 1569938924, "post_id": 58186085, "comment_id": 102752845, "body": "<code>gsub</code> haven&#39;t limit, looks like problem in another place. I tried to run your script on this file: <a href=\"https://gist.github.com/X1ting/b45952550253becee8bc5fb4696e072e\" rel=\"nofollow noreferrer\">gist.github.com/X1ting/b45952550253becee8bc5fb4696e072e</a> results looks OK, all <code>uid</code> sequences were replaced. Can you provide file which works incorrect?"}, {"owner": {"reputation": 2221, "user_id": 5921203, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/lczFa.jpg?s=128&g=1", "display_name": "Steven Aguilar", "link": "https://stackoverflow.com/users/5921203/steven-aguilar"}, "reply_to_user": {"reputation": 641, "user_id": 5199542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc4bf213725a3737f165cd15af26331c?s=128&d=identicon&r=PG", "display_name": "Xiting", "link": "https://stackoverflow.com/users/5199542/xiting"}, "edited": false, "score": 0, "creation_date": 1569939900, "post_id": 58186085, "comment_id": 102753496, "body": "The file I&#39;m using has sensitive data I can not provide. But let me look for something similar."}], "owner": {"reputation": 2221, "user_id": 5921203, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/lczFa.jpg?s=128&g=1", "display_name": "Steven Aguilar", "link": "https://stackoverflow.com/users/5921203/steven-aguilar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1569939311, "creation_date": 1569937247, "last_edit_date": 1569939311, "question_id": 58186085, "link": "https://stackoverflow.com/questions/58186085/ruby-limit-size-writing-to-text-file-while-using-gsub", "title": "Ruby: Limit size writing to text file while using gsub", "body": "<p>Currently working on parsing out some error logs. I'm using ruby and the <code>File</code> library. I encounter about 381 instances of the word <code>uid</code> which I'm replacing with empty string using <code>gsub</code>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/xAxCr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xAxCr.png\" alt=\"enter image description here\"></a></p>\n\n<p>However, when I replace the <code>uid</code> with new string only 9 instances of it are shown. I'm not sure if there is a size limit to what you can do with <code>gsub</code>. </p>\n\n<pre><code>file_input = ARGV[0]\n\ntext = File.read(file_input)\n\n replace = text.gsub(/uid/,'*********************************\n BEGINNING OF SUBMISSION *****************************************************')\nFile.open('testing.txt', \"w\") do |file|\n  file &lt;&lt; replace \nend\n</code></pre>\n\n<p>When I open up <code>testing.txt</code> the file is about 15 lines which is drastic contrast to the one being passed into <code>file_input</code> which is about 700 lines and has 381 mentiones of the word <code>uid</code>. Is there a limit?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 1, "creation_date": 1569937338, "post_id": 58184514, "comment_id": 102751844, "body": "Could you explain the behavior expected vs what&#39;s happening? With some code?"}, {"owner": {"reputation": 45, "user_id": 10743490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca2a6036b35563d477dd9fee65048b55?s=128&d=identicon&r=PG&f=1", "display_name": "viveksrivastava", "link": "https://stackoverflow.com/users/10743490/viveksrivastava"}, "reply_to_user": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1569947475, "post_id": 58184514, "comment_id": 102757649, "body": "when request comes from HTTP then i will get my custom header attributes value by request.headers[&#39;X-CUSTOM-SOURCE&#39;] but problem is that when request comes from HTTPS(secure HTTP) then request.headers[&#39;X-CUSTOM-SOURCE&#39;] gives nill value"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1570076065, "post_id": 58184514, "comment_id": 102801357, "body": "Describe your configuration: is SSL being managed by Rails or are you using a reverse proxy to offload SSL?"}, {"owner": {"reputation": 45, "user_id": 10743490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca2a6036b35563d477dd9fee65048b55?s=128&d=identicon&r=PG&f=1", "display_name": "viveksrivastava", "link": "https://stackoverflow.com/users/10743490/viveksrivastava"}, "edited": false, "score": 0, "creation_date": 1570076912, "post_id": 58184514, "comment_id": 102801504, "body": "In my case SSL is managed by Rails..  { config.force_ssl = true}"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1570128525, "post_id": 58184514, "comment_id": 102825511, "body": "Show the contents of <code>request.headers</code> when running in each mode."}], "owner": {"reputation": 45, "user_id": 10743490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca2a6036b35563d477dd9fee65048b55?s=128&d=identicon&r=PG&f=1", "display_name": "viveksrivastava", "link": "https://stackoverflow.com/users/10743490/viveksrivastava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1569931852, "creation_date": 1569931852, "question_id": 58184514, "link": "https://stackoverflow.com/questions/58184514/how-we-get-custom-header-attributes-which-pass-in-https-secure-header", "title": "how we get custom header attributes which pass in https secure header", "body": "<p>I try to get header attributes from http header by</p>\n\n<pre><code>request.headers\n</code></pre>\n\n<p>But in case of HTTPS i fail to get custom header attributes.</p>\n\n<p>so my concern is how i get custom attributes in case of HTTPS.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "preact"], "comments": [{"owner": {"reputation": 358, "user_id": 8708097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/APLHT.jpg?s=128&g=1", "display_name": "Saif chaudhry", "link": "https://stackoverflow.com/users/8708097/saif-chaudhry"}, "edited": false, "score": 0, "creation_date": 1569931916, "post_id": 58184284, "comment_id": 102748616, "body": "your javascript_pack_tag should be under &lt;head&gt;"}, {"owner": {"reputation": 414, "user_id": 6679456, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0JXUUu30LpQ/AAAAAAAAAAI/AAAAAAAAAB0/1ETVGHtffpw/photo.jpg?sz=128", "display_name": "Saif Khan", "link": "https://stackoverflow.com/users/6679456/saif-khan"}, "reply_to_user": {"reputation": 358, "user_id": 8708097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/APLHT.jpg?s=128&g=1", "display_name": "Saif chaudhry", "link": "https://stackoverflow.com/users/8708097/saif-chaudhry"}, "edited": false, "score": 0, "creation_date": 1569932200, "post_id": 58184284, "comment_id": 102748772, "body": "Still not working tried to put in every where."}], "answers": [{"tags": [], "owner": {"reputation": 2036, "user_id": 194340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85ed8e6da2fbf39abeb4995189be324c?s=128&d=identicon&r=PG", "display_name": "Jason Miller", "link": "https://stackoverflow.com/users/194340/jason-miller"}, "is_accepted": false, "score": 1, "last_activity_date": 1569967588, "creation_date": 1569967588, "answer_id": 58192860, "question_id": 58184284, "link": "https://stackoverflow.com/questions/58184284/i-am-trying-to-add-simple-controller-to-view-that-uses-preact-component-in-ruby/58192860#58192860", "title": "I am trying to add simple controller to view that uses preact component in ruby rails", "body": "<p>Try using Preact 10 instead of 8. preact-rails seems to be using 10 in their docs.</p>\n"}, {"tags": [], "owner": {"reputation": 414, "user_id": 6679456, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0JXUUu30LpQ/AAAAAAAAAAI/AAAAAAAAAB0/1ETVGHtffpw/photo.jpg?sz=128", "display_name": "Saif Khan", "link": "https://stackoverflow.com/users/6679456/saif-khan"}, "is_accepted": false, "score": 0, "last_activity_date": 1573717209, "creation_date": 1573717209, "answer_id": 58851635, "question_id": 58184284, "link": "https://stackoverflow.com/questions/58184284/i-am-trying-to-add-simple-controller-to-view-that-uses-preact-component-in-ruby/58851635#58851635", "title": "I am trying to add simple controller to view that uses preact component in ruby rails", "body": "<p>It can be easily done using CDN.</p>\n\n<pre><code>&lt;h1&gt;Render by Preact client library using h and render function&lt;/h1&gt;\n&lt;div id=\"preact\"&gt;\n\n&lt;/div&gt;\n\n&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/preact/8.5.2/preact.dev.js\"&gt; \n&lt;/script&gt;\n\n&lt;script&gt;\n var Component = window.preact.Component,\n h = window.preact.h,\n render = window.preact.render;\n\n var PreactApp = function (props){\n return h('h1',\n {className: ''},\n 'Hello world!');\n  }\n\n render(PreactApp(),document.getElementById(\"preact\"));\n &lt;/script&gt;\n</code></pre>\n"}], "owner": {"reputation": 414, "user_id": 6679456, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0JXUUu30LpQ/AAAAAAAAAAI/AAAAAAAAAB0/1ETVGHtffpw/photo.jpg?sz=128", "display_name": "Saif Khan", "link": "https://stackoverflow.com/users/6679456/saif-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1573717209, "creation_date": 1569930895, "question_id": 58184284, "link": "https://stackoverflow.com/questions/58184284/i-am-trying-to-add-simple-controller-to-view-that-uses-preact-component-in-ruby", "title": "I am trying to add simple controller to view that uses preact component in ruby rails", "body": "<p>I am trying to add simple controller to view that uses preact component in ruby rails. It just shows hello world just a basic program just trying to use a preact component in rails. </p>\n\n<p>There is not much available for such thing to try I have been searching for quite a time now but no luck. I am following this <a href=\"https://github.com/UseHover/preact-rails\" rel=\"nofollow noreferrer\">https://github.com/UseHover/preact-rails</a> to perform this.</p>\n\n<p>application.html.erb</p>\n\n<pre><code>   &lt;title&gt;Helloworld&lt;/title&gt;\n   &lt;%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n   &lt;%= yield %&gt;\n   &lt;%= javascript_pack_tag 'application' %&gt;\n  &lt;/body&gt;\n</code></pre>\n\n<p>The view where I call the component.</p>\n\n<pre><code>&lt;%= preact_component('Button', { type: 'submit', label: 'Get started!'}) %&gt;\n</code></pre>\n\n<p>Package.json </p>\n\n<pre><code>{\n   \"name\": \"helloworld\",\n   \"private\": true,\n   \"dependencies\": {\n   \"@rails/webpacker\": \"^4.0.7\",\n   \"preact\": \"^8.5.2\",\n   \"preact_ujs\": \"^0.1.1\"\n  },\n   \"devDependencies\": {\n   \"webpack-dev-server\": \"^3.8.1\"\n }\n</code></pre>\n\n<p>}</p>\n\n<p>error:-</p>\n\n<p>Webpacker can't find application in D:/Projects/Ruby \nProject/helloworld/public/packs/manifest.json. Possible causes:</p>\n\n<ol>\n<li><p>You want to set webpacker.yml value of compile to true for your environment</p>\n\n<p>unless you are using the <code>webpack -w</code> or the webpack-dev-server.</p></li>\n<li><p>webpack has not yet re-run to reflect updates.</p></li>\n<li><p>You have misconfigured Webpacker's config/webpacker.yml file.</p></li>\n<li><p>Your webpack configuration is not creating a manifest.</p></li>\n</ol>\n\n<p>Your manifest contains:</p>\n\n<pre><code>{\n}\nExtracted source (around line #10):\n\n\n  &lt;body&gt;\n  &lt;%= yield %&gt;\n  &lt;%= javascript_pack_tag 'application' %&gt;\n\n  &lt;/body&gt;\n  &lt;/html&gt;\n</code></pre>\n"}, {"tags": ["ruby", "model-view-controller", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 11017284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6C9dX.png?s=128&g=1", "display_name": "Othmane Namani", "link": "https://stackoverflow.com/users/11017284/othmane-namani"}, "edited": false, "score": 0, "creation_date": 1569930264, "post_id": 58184071, "comment_id": 102747762, "body": "Yes that fixed but always there is rolling back, this time without permission problem."}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "reply_to_user": {"reputation": 85, "user_id": 11017284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6C9dX.png?s=128&g=1", "display_name": "Othmane Namani", "link": "https://stackoverflow.com/users/11017284/othmane-namani"}, "edited": false, "score": 0, "creation_date": 1569931090, "post_id": 58184071, "comment_id": 102748185, "body": "Please change your line in your create action of the comments controller from <code>if comment.save</code> to <code>if comment.save!</code>"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "reply_to_user": {"reputation": 85, "user_id": 11017284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6C9dX.png?s=128&g=1", "display_name": "Othmane Namani", "link": "https://stackoverflow.com/users/11017284/othmane-namani"}, "edited": false, "score": 0, "creation_date": 1569931122, "post_id": 58184071, "comment_id": 102748206, "body": "That will cause the app to throw an error if it does not save, and output the reason in your server logs"}, {"owner": {"reputation": 85, "user_id": 11017284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6C9dX.png?s=128&g=1", "display_name": "Othmane Namani", "link": "https://stackoverflow.com/users/11017284/othmane-namani"}, "edited": false, "score": 0, "creation_date": 1569931711, "post_id": 58184071, "comment_id": 102748520, "body": "browser show    <code>Validation failed: Post can&#39;t be blank</code>"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "reply_to_user": {"reputation": 85, "user_id": 11017284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6C9dX.png?s=128&g=1", "display_name": "Othmane Namani", "link": "https://stackoverflow.com/users/11017284/othmane-namani"}, "edited": false, "score": 0, "creation_date": 1569931981, "post_id": 58184071, "comment_id": 102748650, "body": "I don&#39;t see any reason why the above code shouldn&#39;t work with the params as they are in your server logs. My only suggestion from here is to explicitly set the post_id of the comment"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "reply_to_user": {"reputation": 85, "user_id": 11017284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6C9dX.png?s=128&g=1", "display_name": "Othmane Namani", "link": "https://stackoverflow.com/users/11017284/othmane-namani"}, "edited": false, "score": 0, "creation_date": 1569932011, "post_id": 58184071, "comment_id": 102748666, "body": "Before your <code>if comment.save!</code> line, add in <code>@comment.post_id = @post.id</code>"}, {"owner": {"reputation": 85, "user_id": 11017284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6C9dX.png?s=128&g=1", "display_name": "Othmane Namani", "link": "https://stackoverflow.com/users/11017284/othmane-namani"}, "edited": false, "score": 0, "creation_date": 1569932178, "post_id": 58184071, "comment_id": 102748761, "body": "same thing , <code>Validation failed: Post cant be blank</code>"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "reply_to_user": {"reputation": 85, "user_id": 11017284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6C9dX.png?s=128&g=1", "display_name": "Othmane Namani", "link": "https://stackoverflow.com/users/11017284/othmane-namani"}, "edited": false, "score": 0, "creation_date": 1569932370, "post_id": 58184071, "comment_id": 102748863, "body": "Just for my sanity do <code>@comment.post_id = 250</code> and see if it saves after"}, {"owner": {"reputation": 85, "user_id": 11017284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6C9dX.png?s=128&g=1", "display_name": "Othmane Namani", "link": "https://stackoverflow.com/users/11017284/othmane-namani"}, "edited": false, "score": 0, "creation_date": 1569932542, "post_id": 58184071, "comment_id": 102748948, "body": "Yes , that was saved successfully!"}, {"owner": {"reputation": 85, "user_id": 11017284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6C9dX.png?s=128&g=1", "display_name": "Othmane Namani", "link": "https://stackoverflow.com/users/11017284/othmane-namani"}, "edited": false, "score": 0, "creation_date": 1569932776, "post_id": 58184071, "comment_id": 102749071, "body": "Ok , thank you that has been solved by setting post inside `    @post = Post.find(params[:post_id]) `"}], "tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": false, "score": 0, "last_activity_date": 1569930003, "creation_date": 1569930003, "answer_id": 58184071, "question_id": 58183658, "link": "https://stackoverflow.com/questions/58183658/how-to-implement-comment-associated-to-post-and-user-in-rails-5/58184071#58184071", "title": "How to implement comment associated to post and user in rails 5", "body": "<p>The server is telling you the <code>post_id</code> is an unpermitted parameter. We can also see that you're validating that a post_id is present on any comments saved. I'd imagine the comment is failing this validation, leading to the rollback.</p>\n\n<p>To permit the post_id as well as the body, change the private part of your comments controller to:</p>\n\n<pre><code>private\n\n  def comment_params\n    params.require(:comment).permit(:body, :post_id)\n  end\n\n  def set_post\n    @post = Post.find(params[:post_id])\n  end\n\n  def set_comment\n    @comment = @post.comments.find(params[:id])\n  end\nend\n</code></pre>\n\n<p>This should allow the comment to be associated with a post, and pass validation.</p>\n"}], "owner": {"reputation": 85, "user_id": 11017284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6C9dX.png?s=128&g=1", "display_name": "Othmane Namani", "link": "https://stackoverflow.com/users/11017284/othmane-namani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569945557, "creation_date": 1569928443, "last_edit_date": 1569945557, "question_id": 58183658, "link": "https://stackoverflow.com/questions/58183658/how-to-implement-comment-associated-to-post-and-user-in-rails-5", "title": "How to implement comment associated to post and user in rails 5", "body": "<p>I am implementing a comments for posts, and it is supposed to \nbe shown in posts index, but the comment would not be created.</p>\n\n<p>I tried a lot of ways to get solution but no result, this is \nthe last one. </p>\n\n<h1>User model</h1>\n\n<pre><code>  class User &lt; ApplicationRecord\n    # Include default devise modules. Others available are:\n    # :confirmable, :lockable, :timeoutable, :trackable and \n    :omniauthable\n    devise :database_authenticatable, :registerable,\n            :recoverable, :rememberable, :validatable\n\n    has_many :posts, dependent: :destroy\n    has_many :likes, dependent: :destroy\n    has_many :comments, dependent: :destroy\n\n    before_save :downcase_email\n\n    validates :name, presence: true, length: { maximum: 50 }, \n     allow_blank: false\n    VALID_EMAIL_REGEX = /\\A[\\w+\\-.]+@[a-z\\d\\-]+(\\.[a-z\\d\\-]+)*\\. \n    [a-z]+\\z/i.freeze\n    validates :email, presence: true, length: { maximum: 255 },\n                        format: { with: VALID_EMAIL_REGEX },\n                        uniqueness: { case_sensitive: false }\n    validates :password, presence: true, length: { minimum: 6 }, \n    allow_nil: false, allow_blank: false\n\n    private\n\n    # Converts email to all lower-case.\n    def downcase_email\n        self.email = email.downcase\n    end\n  end\n</code></pre>\n\n<h1>Post Model</h1>\n\n<pre><code>  class Post &lt; ApplicationRecord\n    belongs_to :user\n    has_many :likes, dependent: :destroy\n    has_many :comments, dependent: :destroy\n\n    default_scope -&gt; { order(created_at: :desc) }\n    mount_uploader :picture, PictureUploader\n    validates :user_id, presence: true\n    validates :content, presence: true, length: { maximum: 300 }\n    validate :picture_size\n\n    private\n\n    # Validates the size of an uploaded picture.\n    def picture_size\n        errors.add(:picture, 'image size could not be more than \n    5MB') if picture.size &gt; 5.megabytes\n    end\n  end\n</code></pre>\n\n<h1>Comment model</h1>\n\n<pre><code>  class Comment &lt; ApplicationRecord\n    belongs_to :user\n    belongs_to :post\n    validates :user_id, presence: true\n    validates :body, presence: true, length: { maximum: 300 }\n    validates :post_id, presence: true\n\n    default_scope -&gt; { order(created_at: :desc) }\n  end\n</code></pre>\n\n<h1>Application controller</h1>\n\n<pre><code>  class ApplicationController &lt; ActionController::Base\n    protect_from_forgery with: :exception\n\n    # to avoid error message \"undefined method `errors' for \n    nil:NilClass\"\n    before_action :instantiate_post\n    before_action :instantiate_comment\n    def instantiate_post\n        @post = Post.new\n    end\n\n    def instantiate_comment\n        @comment = Comment.new\n    end\n  end\n</code></pre>\n\n<h1>Users controller</h1>\n\n<pre><code>  class UsersController &lt; ApplicationController\n    #before_action :set_user, only: %i[show edit update destroy]\n    before_action :authenticate_user!, only: %i[create destroy]\n    before_action :current_user, only: %i[create destroy]\n\n\n    def index\n        @users = User.all\n    end\n\n\n    def show\n        @user = User.find_by(id: params[:id])\n        @posts = @user.posts\n        @comments = @post.comments\n        @comment = current_user.comments.build(:post =&gt; @post)\n    end\n\n\n    def profile\n        @user = User.find_by(id: params[:id])\n    end\n\n    def destroy\n        @user = User.find_by(id: params[:id])\n        @user.destroy\n        respond_to do |format|\n        format.html { redirect_to users_path, notice: 'User was \n    successfully destroyed.' }\n        format.json { head :no_content }\n        end\n    end\n\n    private\n\n\n        # def set_user\n        #   #    @user = User.find(params[:id])\n        # end\n\n        # Never trust parameters from the scary internet, only \n    allow the white list through.\n        def user_params\n        params.require(:user).permit(:name, :email, :password)\n        end\n    end\n</code></pre>\n\n<h1>Posts controller</h1>\n\n<pre><code>  class PostsController &lt; ApplicationController\n    before_action :set_post, only: %i[show edit update destroy]\n    before_action :authenticate_user!, only: %i[create destroy]\n    before_action :current_user, only: %i[create destroy]\n\n    def index\n        @posts = Post.all\n    end\n\n    def show; end\n\n    def new\n        @post = Post.new\n    end\n\n    def edit; end\n\n    def create\n        @post = current_user.posts.build(post_params)\n        respond_to do |format|\n        if @post.save\n            format.html { redirect_to authenticated_root_path, \n        notice: 'Post was successfully created.' }\n            format.json { render :show, status: :created, \n        location: @post }\n        else\n            format.html { redirect_to current_user, alert: 'post \n        not created' }\n            format.json { render json: @post.errors, status: \n    :unprocessable_entity }\n        end\n        end\n    end\n\n    def update\n        respond_to do |format|\n        if @post.update(post_params)\n            format.html { redirect_to @post, notice: 'Post was \n       successfully updated.' }\n            format.json { render :show, status: :ok, location: \n       @post }\n        else\n            format.html { render :edit }\n            format.json { render json: @post.errors, status: \n    :unprocessable_entity }\n        end\n        end\n    end\n\n    def destroy\n        @post.destroy\n        respond_to do |format|\n        format.html { redirect_to posts_url, notice: 'Post was \n    successfully destroyed.' }\n        format.json { head :no_content }\n        end\n    end\n\n    private\n\n        # Use callbacks to share common setup or constraints \n       between actions.\n        def set_post\n        @post = Post.find(params[:id])\n        end\n\n        # Never trust parameters from the scary internet, only \n    allow the white list through.\n        def post_params\n        params.require(:post).permit(:content, :picture)\n        end\n    end\n</code></pre>\n\n<h1>Comments controller</h1>\n\n<pre><code>  class CommentsController &lt; ApplicationController\n    before_action :set_post, only: %i[update destroy]\n    before_action :set_comment, only: %i[update destroy]\n    before_action :authenticate_user!, only: %i[create destroy]\n    before_action :current_user, only: %i[create destroy]\n\n    def index\n        @comments = Comment.all\n    end\n\n    def new\n        @comment = Comment.new\n    end\n    def update\n        respond_to do |format|\n        if @comment.update(comment_params)\n            format.html { redirect_to @post, notice: 'Post was \n            successfully updated.' }\n            format.json { render :show, status: :ok, location: \n        @post }\n        else\n            format.html { render :edit }\n            format.json { render json: @post.errors, status: \n    :unprocessable_entity }\n        end\n        end\n    end\n\n    def destroy\n        @comment.destroy\n        respond_to do |format|\n        format.html { redirect_to posts_url, notice: 'Post was \n    successfully destroyed.' }\n        format.json { head :no_content }\n        end\n    end\n\n    def create\n        @comment = @post.comments.build(comment_params)\n        @comment.user = current_user\n        respond_to do |format|\n        if @comment.save\n            format.html { redirect_to @post, notice: 'Post was \n      successfully commented.' }\n            format.json { render :show, status: :created, \n        location: @post }\n        else\n            format.html { redirect_to @post, alert: 'post not \n       commented' }\n            format.json { render json: @post.errors, status: \n    :unprocessable_entity }\n        end\n        end\n    end\n\n    private\n\n        def comment_params\n        params.require(:comment).permit(:body, :post_id)\n        end\n\n        def set_post\n        @post = Post.find(params[:post_id])\n        end\n\n        def set_comment\n          @comment = @post.comments.find(params[:id])\n        end\n    end\n</code></pre>\n\n<h1>views/posts/index</h1>\n\n<pre><code>  &lt;div class=\"row\"&gt;\n    &lt;p id=\"notice\"&gt;&lt;%= notice %&gt;&lt;/p&gt;  \n    &lt;div class=\"col-md-6 form-new-user col-md-offset-3\"&gt;    \n        &lt;h1&gt;Posts&lt;/h1&gt; \n        &lt;%=render \"form\",post: @post =%&gt; &lt;br&gt;\n        &lt;% @posts.each do |post| %&gt;\n        &lt;ol class='posts'&gt;\n            &lt;%= render post =%&gt;\n\n            &lt;p&gt;Comment on This Post&lt;/p&gt;\n            &lt;%= render \"comments/form\" ,post: post=%&gt;\n            &lt;%= render @post.comments %&gt;\n        &lt;/ol&gt;\n        &lt;% end %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<h1>views/comments/_comment.html.erb</h1>\n\n<pre><code>  &lt;li id=\"comment-&lt;%= comment.id %&gt;\"&gt;\n    &lt;%= link_to gravatar_for(comment.user, size: 30), comment.user \n    %&gt;\n    &lt;span class=\"user\"&gt;&lt;%= link_to comment.user.name, comment.user \n    %&gt;&lt;/span&gt;\n    &lt;span class=\"content\"&gt;\n        &lt;%= comment.body %&gt;\n        &lt;%= image_tag post.picture.url if post.picture? %&gt;\n    &lt;/span&gt;\n    &lt;span class=\"timestamp\"&gt;\n        At: &lt;%= (comment.created_at) %&gt; \n        &lt;% if current_user == post.user || current_user == \n        comment.user %&gt;\n        &lt;%= link_to 'Edit', edit_post_path(post) %&gt; |\n        &lt;%= link_to \"delete\", post, method: :delete,\n                                        data: { confirm: \"You \n    sure?\" } %&gt;\n        &lt;% end %&gt;\n    &lt;/span&gt;\n  &lt;/li&gt;\n</code></pre>\n\n<h1>views/comments/_form.html.erb</h1>\n\n<pre><code>  &lt;%= form_for [post, Comment.new] do |f| %&gt;\n    &lt;%= f.hidden_field :post_id, value: post.id %&gt;\n    &lt;%= f.label :body %&gt;&lt;br&gt;\n    &lt;%= f.text_area :body ,class:\"form-control\"%&gt;&lt;br&gt;\n    &lt;%= f.submit \"Replay\", class: \"btn btn-primary\" %&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<h1>Routes.rb</h1>\n\n<pre><code>  Rails.application.routes.draw do\n    resources :posts do\n        resources :comments\n    end\n\n    # For details on the DSL available within this file, see \n    http://guides.rubyonrails.org/routing.html\n\n    devise_for :users, controllers: { registrations: \n   'users/registrations' }\n\n    as :user do\n        authenticated :user do\n        root 'posts#index', as: :authenticated_root\n        end\n\n        unauthenticated do\n        root 'devise/registrations#new', as: :unauthenticated_root\n        end\n    end\n    resources :users, only: %i[index show destroy]\n    get '/users/:id/profile', to: 'users#profile', as: 'profile'\n\n  end\n</code></pre>\n\n<h1>Getting rollback</h1>\n\n<pre><code>  Started POST \"/posts/250/comments\" for ::1 at 2019-10-01 \n   12:46:45 +0100\n   Processing by CommentsController#create as HTML\n   Parameters: {\"utf8\"=&gt;\"\u2713\", \n   \"authenticity_token\"=&gt;\"KNntIHqHzAQ9RWylAUoXa+NmEvMTL\n   ZaewL2Z3wrO0ZB921j1YGjYJA6OAXVjDCQ1GNuN0Okv4tuSp4BacDXwqA==\"\n   ,\"comment\"=&gt;{\"post_id\"=&gt;\"250\", \"body\"=&gt;\"fixed?\"}, \n   \"commit\"=&gt;\"Replay\", \"post_id\"=&gt;\"250\"}\n   User Load (0.7ms)  SELECT  \"users\".* FROM \"users\" WHERE \n   \"users\".\"id\" = $1 ORDER BY \"users\".\"id\" ASC LIMIT $2  \n   [[\"id\", 1], [\"LIMIT\", 1]]\n   \u21b3/home/othmane/.rbenv/versions/2.6.1/lib/ruby/gems/\n    2.6.0/gems/activerecord- \n    5.2.3/lib/active_record/log_subscriber.rb:98\n    (0.2ms)  BEGIN\n    \u21b3 app/controllers/comments_controller.rb:40\n    (2.7ms)  ROLLBACK\n    \u21b3 app/controllers/comments_controller.rb:40\n     Redirected to http://localhost:3000/posts\n    Completed 302 Found in 22ms (ActiveRecord: 3.6ms)\n</code></pre>\n"}, {"tags": ["ruby", "while-loop", "user-input"], "comments": [{"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1569928406, "post_id": 58183522, "comment_id": 102746877, "body": "If a user enters a word of &#39;abc&#39; and a key of 2, do you want the system to output &#39;cde&#39;?"}, {"owner": {"reputation": 95, "user_id": 11389702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/El3XH.jpg?s=128&g=1", "display_name": "Lewis Farnworth", "link": "https://stackoverflow.com/users/11389702/lewis-farnworth"}, "reply_to_user": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1569928537, "post_id": 58183522, "comment_id": 102746926, "body": "That&#39;s right yes"}, {"owner": {"reputation": 5580, "user_id": 490454, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/RqygM.jpg?s=128&g=1", "display_name": "BobRodes", "link": "https://stackoverflow.com/users/490454/bobrodes"}, "edited": false, "score": 1, "creation_date": 1570056843, "post_id": 58183522, "comment_id": 102798073, "body": "To do a Caesar cipher, you also have to figure out a way to wrap around again, for example to have <code>z</code> come back <code>b</code> if there&#39;s a key of <code>2</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1269, "user_id": 6904782, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/mdx8R.png?s=128&g=1", "display_name": "Nijeesh Joshy", "link": "https://stackoverflow.com/users/6904782/nijeesh-joshy"}, "is_accepted": true, "score": 1, "last_activity_date": 1569928829, "creation_date": 1569928829, "answer_id": 58183752, "question_id": 58183522, "link": "https://stackoverflow.com/questions/58183522/reading-word-into-an-array-ruby/58183752#58183752", "title": "Reading word into an array [ruby]", "body": "<p>you don't need the last while loop</p>\n\n<pre><code>  word.each_byte do |c|\n    d[e] = c + k\n    e = e + 1\n  end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": false, "score": 0, "last_activity_date": 1569929555, "creation_date": 1569929555, "answer_id": 58183941, "question_id": 58183522, "link": "https://stackoverflow.com/questions/58183522/reading-word-into-an-array-ruby/58183941#58183941", "title": "Reading word into an array [ruby]", "body": "<p>Something a bit more verbose:</p>\n\n<pre><code>alphabet = ('a'..'z').to_a\nnew_word = ''\n\nputs \"\\n Please enter a word to translate\"\nword = gets.strip\n\nputs \"Please enter a key\"\nk = gets.chomp.to_i\n\nword.split('').each_with_index do |letter, index|\n  alphabet_index = alphabet.index(letter)\n  new_index = alphabet_index + key\n  new_word[index] = alphabet[new_index]\nend\n\nputs \"Your translated word is #{new_word}\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 312, "user_id": 865168, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/U2zgb.jpg?s=128&g=1", "display_name": "CJW", "link": "https://stackoverflow.com/users/865168/cjw"}, "is_accepted": false, "score": 0, "last_activity_date": 1569937759, "creation_date": 1569937759, "answer_id": 58186243, "question_id": 58183522, "link": "https://stackoverflow.com/questions/58183522/reading-word-into-an-array-ruby/58186243#58186243", "title": "Reading word into an array [ruby]", "body": "<p>Caesar cipher is a simple shift cipher</p>\n\n<pre><code>word.each_byte do |c| \n  p c + k \nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95, "user_id": 11389702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/El3XH.jpg?s=128&g=1", "display_name": "Lewis Farnworth", "link": "https://stackoverflow.com/users/11389702/lewis-farnworth"}, "is_accepted": false, "score": 0, "last_activity_date": 1574258071, "creation_date": 1574258071, "answer_id": 58956013, "question_id": 58183522, "link": "https://stackoverflow.com/questions/58183522/reading-word-into-an-array-ruby/58956013#58956013", "title": "Reading word into an array [ruby]", "body": "<p>Managed to get it working, thanks for all the help... Code for anyone interested:</p>\n\n<pre><code>#!/usr/bin/ruby\n\n#print 65.chr  A\n#print 97.chr  a\n\na = 0\nb = 65\ny = 97\nd = []\ne = 0\n\nwhile a &lt;= 25\n  print y.chr + \" = \" + y.to_s + \" \"\n  print b.chr + \" = \" + b.to_s + \" \" + \"\\n\"\n  a = a + 1\n  b =  b + 1\n  y = y + 1\nend\n\n\nputs \"\\n Please enter a word to translate\"\nword = gets.strip\n\nputs \"Please enter a key\"\nk = gets.chomp.to_i\n\nword.each_byte do |c|\n  d[e] = c + k\n  e = e + 1\nend\n\nprint \"\\n\"\n\na = 0\narlen = d.count\n\n\nwhile a != arlen\n  print d[a].chr\n  a = a + 1\nend\nprint k\n\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 11389702, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/El3XH.jpg?s=128&g=1", "display_name": "Lewis Farnworth", "link": "https://stackoverflow.com/users/11389702/lewis-farnworth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 58183752, "answer_count": 4, "score": 1, "last_activity_date": 1574258071, "creation_date": 1569927902, "question_id": 58183522, "link": "https://stackoverflow.com/questions/58183522/reading-word-into-an-array-ruby", "title": "Reading word into an array [ruby]", "body": "<p>Trying to create a ceaser cipher in Ruby.\nThe problem I'm facing is that when the program reaches the while loop, it only performs the desired operation on the very last letter of the inputted word. Before I delve further into what I've tried, please find  the code: </p>\n\n<pre><code>#!/usr/bin/ruby\n\n\n#print 65.chr  ASCII code for A\n#print 97.chr  ASCII code for a\n\na = 0\nb = 97\nd = []\ne = 0\n\n# Just to print the alphabet alongside the ASCII value \n# (For sanity checking)\n\nwhile a &lt;= 25\n  print b.chr + \" \"\n  print b.to_s + \"\\n\"\n  a = a + 1\n  b = b + 1\nend\n\nputs \"\\n Please enter a word to translate\"\nword = gets.strip\n\n# The desired effect is to move the letter along by key value\n\nputs \"Please enter a key\"\nk = gets.chomp.to_i\n\n# In its current state, what happens is only the last char\n# is moved along by the key value. \n\nwhile e &lt;= word.length\n  word.each_byte do |c|\n    d[e] = c + k\n  end\n  e = e + 1\nend\n\n\nputs d\n</code></pre>\n\n<p>I'm thinking that the problem lies with the logic for the while loop. The way I am going to attack this is by reading the pre-converted word into an array, as opposed to using the .each_byte object. </p>\n\n<p>I don't know how to do that and the guides/questions I've found don't quite answer the question. If anyone knows how to do this, or knows a better way of solving this- I'd be much appreciative.</p>\n"}, {"tags": ["ruby", "docker", "docker-compose", "ruby-on-rails-5", "ruby-2.4"], "comments": [{"owner": {"reputation": 3685, "user_id": 2037044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/186c499d805f2645c5128202d531d73e?s=128&d=identicon&r=PG", "display_name": "Stefano", "link": "https://stackoverflow.com/users/2037044/stefano"}, "edited": false, "score": 1, "creation_date": 1569922487, "post_id": 58181674, "comment_id": 102743807, "body": "the last ruby version is 2.6.4, not 2.4.0. I&#39;m not sure if I&#39;m missing something..."}, {"owner": {"reputation": 12307, "user_id": 8192635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcaf44c9ff9eeeb51fc78c816891d75a?s=128&d=identicon&r=PG&f=1", "display_name": "LinPy", "link": "https://stackoverflow.com/users/8192635/linpy"}, "edited": false, "score": 0, "creation_date": 1569924380, "post_id": 58181674, "comment_id": 102744799, "body": "<code>FROM ruby:latest</code>?"}, {"owner": {"reputation": 6316, "user_id": 1184717, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7f8710cd5754a79df5dc5cd3d5308da2?s=128&d=identicon&r=PG", "display_name": "Mr.", "link": "https://stackoverflow.com/users/1184717/mr"}, "edited": false, "score": 0, "creation_date": 1569926407, "post_id": 58181674, "comment_id": 102745877, "body": "what is your question exactly?"}, {"owner": {"reputation": 671, "user_id": 3445936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cd8z6.jpg?s=128&g=1", "display_name": "Rohit Lingayat", "link": "https://stackoverflow.com/users/3445936/rohit-lingayat"}, "reply_to_user": {"reputation": 6316, "user_id": 1184717, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7f8710cd5754a79df5dc5cd3d5308da2?s=128&d=identicon&r=PG", "display_name": "Mr.", "link": "https://stackoverflow.com/users/1184717/mr"}, "edited": false, "score": 0, "creation_date": 1569926457, "post_id": 58181674, "comment_id": 102745914, "body": "@Mr. the question implies that I need to upgrade the ruby version"}, {"owner": {"reputation": 671, "user_id": 3445936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cd8z6.jpg?s=128&g=1", "display_name": "Rohit Lingayat", "link": "https://stackoverflow.com/users/3445936/rohit-lingayat"}, "reply_to_user": {"reputation": 3685, "user_id": 2037044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/186c499d805f2645c5128202d531d73e?s=128&d=identicon&r=PG", "display_name": "Stefano", "link": "https://stackoverflow.com/users/2037044/stefano"}, "edited": false, "score": 0, "creation_date": 1569926587, "post_id": 58181674, "comment_id": 102745979, "body": "@Stefano yes you&#39;re correct, I just want to upgrade the ruby version from 2.2.0 to 2.4.0"}, {"owner": {"reputation": 671, "user_id": 3445936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cd8z6.jpg?s=128&g=1", "display_name": "Rohit Lingayat", "link": "https://stackoverflow.com/users/3445936/rohit-lingayat"}, "reply_to_user": {"reputation": 12307, "user_id": 8192635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcaf44c9ff9eeeb51fc78c816891d75a?s=128&d=identicon&r=PG&f=1", "display_name": "LinPy", "link": "https://stackoverflow.com/users/8192635/linpy"}, "edited": false, "score": 0, "creation_date": 1569926646, "post_id": 58181674, "comment_id": 102746008, "body": "@LinPy I will try with <code>FROM ruby:latest</code>"}, {"owner": {"reputation": 3685, "user_id": 2037044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/186c499d805f2645c5128202d531d73e?s=128&d=identicon&r=PG", "display_name": "Stefano", "link": "https://stackoverflow.com/users/2037044/stefano"}, "edited": false, "score": 0, "creation_date": 1569926786, "post_id": 58181674, "comment_id": 102746085, "body": "this will bring you to version 2.6.4, if you want to go with v. 2.4 you can try with <code>FROM ruby:2.4</code> (but it&#39;ll bring you v. 2.4.7)"}], "answers": [{"tags": [], "owner": {"reputation": 6316, "user_id": 1184717, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7f8710cd5754a79df5dc5cd3d5308da2?s=128&d=identicon&r=PG", "display_name": "Mr.", "link": "https://stackoverflow.com/users/1184717/mr"}, "is_accepted": false, "score": 0, "last_activity_date": 1569927263, "creation_date": 1569927263, "answer_id": 58183337, "question_id": 58181674, "link": "https://stackoverflow.com/questions/58181674/docker-ruby-version-upgrade-from-2-2-0-to-2-4-0/58183337#58183337", "title": "Docker: Ruby version upgrade from 2.2.0 to 2.4.0", "body": "<p>depends on how one manages ruby application and ruby version. here are few things i would offer  to check:</p>\n\n<ol>\n<li><p>update <code>Gemfile</code> if <a href=\"https://bundler.io/v1.12/gemfile_ruby.html\" rel=\"nofollow noreferrer\"><code>bundler</code></a> is used</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ cat Gemfile | head -n 1\nruby '2.4.0'\n</code></pre></li>\n<li><p>update <code>.ruby-version</code> if <a href=\"https://github.com/rbenv/rbenv#choosing-the-ruby-version\" rel=\"nofollow noreferrer\"><code>rbenv</code></a> or [<code>rvm</code>][3] is used</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ cat .ruby-version\n2.4.0\n</code></pre></li>\n<li><p>update <code>Dockerfile</code> if docker is used</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ cat Dockerfile | grep FROM\nFROM ruby:2.4.0\n</code></pre></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 671, "user_id": 3445936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cd8z6.jpg?s=128&g=1", "display_name": "Rohit Lingayat", "link": "https://stackoverflow.com/users/3445936/rohit-lingayat"}, "edited": false, "score": 0, "creation_date": 1570091812, "post_id": 58190149, "comment_id": 102806838, "body": "we can do this for the existing project, right? I asked this because I am new docker."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "reply_to_user": {"reputation": 671, "user_id": 3445936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cd8z6.jpg?s=128&g=1", "display_name": "Rohit Lingayat", "link": "https://stackoverflow.com/users/3445936/rohit-lingayat"}, "edited": false, "score": 0, "creation_date": 1570111675, "post_id": 58190149, "comment_id": 102817583, "body": "@RohitLingayat It depends what you mean, you could incorporate some or all of the above in to an existing Dockerfile."}], "tags": [], "owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "is_accepted": false, "score": 1, "last_activity_date": 1569953164, "creation_date": 1569953164, "answer_id": 58190149, "question_id": 58181674, "link": "https://stackoverflow.com/questions/58181674/docker-ruby-version-upgrade-from-2-2-0-to-2-4-0/58190149#58190149", "title": "Docker: Ruby version upgrade from 2.2.0 to 2.4.0", "body": "<p>You can always build your own Docker image as such:</p>\n\n<pre><code>FROM ubuntu\n\nRUN apt-get update\nRUN apt-get install -y build-essential wget\n\nRUN wget --no-check-certificate -O ruby-install.tar.gz https://github.com/postmodern/ruby-install/archive/master.tar.gz\nRUN tar -xzvf ruby-install.tar.gz\nRUN cd ruby-install-master &amp;&amp; make install\nRUN cd /\nRUN rm -rf ruby-install-master &amp;&amp; rm -rf ruby-install.tar.gz\n\nRUN ruby-install --latest\nRUN ruby-install -i /usr/local/ ruby 2.4.0 -- --disable-install-doc\n\nRUN gem update --system --no-document\nRUN gem install bundler --force\n</code></pre>\n"}], "owner": {"reputation": 671, "user_id": 3445936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cd8z6.jpg?s=128&g=1", "display_name": "Rohit Lingayat", "link": "https://stackoverflow.com/users/3445936/rohit-lingayat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1714, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1569953164, "creation_date": 1569921446, "last_edit_date": 1569926612, "question_id": 58181674, "link": "https://stackoverflow.com/questions/58181674/docker-ruby-version-upgrade-from-2-2-0-to-2-4-0", "title": "Docker: Ruby version upgrade from 2.2.0 to 2.4.0", "body": "<p>I am using Ruby version <code>2.2.0</code> in my Rails Application and Rails version is <code>4.2.0</code>.\nCurrently, Project is built through docker, so I am thinking of to upgrade the ruby version with <code>2.4.0</code> version.</p>\n\n<p>I believe I need to change the docker image to upgrade the ruby version.</p>\n\n<p>I already check a few of the articles but didn't get enough information.</p>\n\n<p><strong>Docker file</strong></p>\n\n<pre><code>FROM ruby:2.2.0\n\nRUN apt update &amp;&amp; \\\n  apt install -y --no-install-recommends \\\n  git \\\n  curl \\\n  gnupg2 \\\n  libpq-dev \\\n  libmysqlclient-dev \\\n  nodejs \\\n  graphviz \\\n  &amp;&amp; rm -rf /var/lib/apt/lists/*\n</code></pre>\n\n<p>Once ruby version upgraded then I will upgrade the rails version.\nAny help will be appreciated.</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "post"], "comments": [{"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1569920459, "post_id": 58181381, "comment_id": 102742715, "body": "Did you try <code>method: :get</code>?"}, {"owner": {"reputation": 1818, "user_id": 4274651, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fd438a86da39049aa93ca14b663851ce?s=128&d=identicon&r=PG", "display_name": "janosch", "link": "https://stackoverflow.com/users/4274651/janosch"}, "reply_to_user": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1569920497, "post_id": 58181381, "comment_id": 102742739, "body": "I want to use a post request."}, {"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1569920555, "post_id": 58181381, "comment_id": 102742771, "body": "What does the button do?"}, {"owner": {"reputation": 1818, "user_id": 4274651, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fd438a86da39049aa93ca14b663851ce?s=128&d=identicon&r=PG", "display_name": "janosch", "link": "https://stackoverflow.com/users/4274651/janosch"}, "reply_to_user": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1569920600, "post_id": 58181381, "comment_id": 102742797, "body": "The first button should post the form, the second button should show a dialog via javascript."}, {"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 1, "creation_date": 1569920680, "post_id": 58181381, "comment_id": 102742851, "body": "Then on second button&#39;s class add JavScript/jQuery listner and do <code>event.preventDefault();</code> and then show your modal code."}], "owner": {"reputation": 1818, "user_id": 4274651, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fd438a86da39049aa93ca14b663851ce?s=128&d=identicon&r=PG", "display_name": "janosch", "link": "https://stackoverflow.com/users/4274651/janosch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1569920423, "creation_date": 1569920423, "question_id": 58181381, "link": "https://stackoverflow.com/questions/58181381/disable-post-of-a-button-within-a-form-tag-in-rails", "title": "Disable post of a button within a form_tag in rails", "body": "<p>My code:</p>\n\n<pre><code>= form_tag(function(), method: :post) do\n  %button.button-one\n  %button.button-two\n</code></pre>\n\n<p>Both buttons trigger a post. How can I disable the post-request of the second button <strong>without</strong> moving it out of the form_tag?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "stripe-payments", "webhooks", "ngrok"], "comments": [{"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1569920345, "post_id": 58180344, "comment_id": 102742648, "body": "Could you post more info? maybe the exception/error trace?"}, {"owner": {"reputation": 601, "user_id": 9315566, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pnkVEz0JwTw/AAAAAAAAAAI/AAAAAAAAASo/NlxvDhY5hi0/photo.jpg?sz=128", "display_name": "Shun Yamada", "link": "https://stackoverflow.com/users/9315566/shun-yamada"}, "reply_to_user": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1569955528, "post_id": 58180344, "comment_id": 102760653, "body": "Sorry I have missed an error, and I had understood."}], "owner": {"reputation": 601, "user_id": 9315566, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pnkVEz0JwTw/AAAAAAAAAAI/AAAAAAAAASo/NlxvDhY5hi0/photo.jpg?sz=128", "display_name": "Shun Yamada", "link": "https://stackoverflow.com/users/9315566/shun-yamada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 266, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1591800059, "creation_date": 1569916543, "question_id": 58180344, "link": "https://stackoverflow.com/questions/58180344/ngrok-error-cant-send-test-webhook-from-stripe", "title": "ngrok error: Can&#39;t send test webhook from Stripe", "body": "<p>I'm trying to send stripe webhook test <code>invoice.pyament_succeed</code> to local server with <code>ngrok</code>. Although <code>ngrok</code> would work, when sending webhook from stripe to it the error occurs:</p>\n\n<pre><code>POST /webhooks/stripe 500 Internal Server Error                                                                                \n</code></pre>\n\n<p>I have setup <code>ngrok</code> and <code>stripe webhook</code> like below:<br>\n1. Setup <code>ngrok</code> on local server </p>\n\n<pre><code> $ ngrok http 3000\n</code></pre>\n\n<p>It would work.</p>\n\n<pre><code> Session Status                online                                                                                                                                                                        \n Account                       xxxxx (Plan: Free)                                                                                                                                                       \n Update                        update available (version 2.3.34, Ctrl-U to update)                                                                                                                           \n Version                       2.2.8                                                                                                                                                                         \n Region                        United States (us)                                                                                                                                                            \n Web Interface                 http://127.0.0.1:4040                                                                                                                                                         \n Forwarding                    http://xxxx.ngrok.io -&gt; localhost:3000                                                                                                                                    \n Forwarding                    https://xxxx.ngrok.io -&gt; localhost:3000 \n</code></pre>\n\n<ol start=\"2\">\n<li>Setup Stripe webhook</li>\n</ol>\n\n<p>input the end point</p>\n\n<pre><code> https://xxxxx.ngrok.io/webhooks/stripe\n</code></pre>\n\n<p><strong>config/routes.rb</strong></p>\n\n<pre><code> Rails.application.routes.draw do  \n   mount StripeEvent::Engine, at: '/webhooks/stripe'\n end\n</code></pre>\n\n<p><strong>config/stripe.rb</strong></p>\n\n<pre><code> StripeEvent.configure do |events|\n   # The case invoice payment succeed\n   events.subscribe(\n     'invoice.payment_succeed',\n     Events::InvoicePaymentSucceed.new\n   )\n end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "routing", "ruby-on-rails-5", "filtering"], "comments": [{"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 2, "creation_date": 1569916174, "post_id": 58179709, "comment_id": 102740628, "body": "You&#39;re asking for best practices but say that you don&#39;t want to use the rails inbuilt system for routing which is their recommended method"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1569916204, "post_id": 58179709, "comment_id": 102740643, "body": "Section 3 contains everything on non-resourceful routes - it&#39;s doable but it doesn&#39;t look pretty in comparison: <a href=\"https://guides.rubyonrails.org/routing.html#non-resourceful-routes\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/routing.html#non-resourceful-routes</a>"}, {"owner": {"reputation": 1, "user_id": 11134530, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xeFFo.png?s=128&g=1", "display_name": "Dmitry S.", "link": "https://stackoverflow.com/users/11134530/dmitry-s"}, "reply_to_user": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1569917604, "post_id": 58179709, "comment_id": 102741334, "body": "Thanks, @Mark. I understand that. But I have a specific task from real life. This task has already been implemented using &quot;bad&quot; practices, but I know for sure there&#39;s a more correct way of implementation. Rails are a very elastic platform."}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1569917740, "post_id": 58179709, "comment_id": 102741397, "body": "They do say at the start of the guide that resourceful routes won&#39;t work for every application so you may well be right"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11134530, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xeFFo.png?s=128&g=1", "display_name": "Dmitry S.", "link": "https://stackoverflow.com/users/11134530/dmitry-s"}, "edited": false, "score": 0, "creation_date": 1569999419, "post_id": 58180446, "comment_id": 102771431, "body": "Maybe. But :shallow option doesn&#39;t allow to completely abandon the use of the parent name in the url (/parent/:id).  How can I organize my url like &quot;/:id/:id/:id/:id&quot; ?"}], "tags": [], "owner": {"reputation": 311, "user_id": 7105526, "user_type": "registered", "profile_image": "https://graph.facebook.com/1812496678973073/picture?type=large", "display_name": "B&#249;i Nh\u1eadt Duy", "link": "https://stackoverflow.com/users/7105526/b%c3%b9i-nh%e1%ba%adt-duy"}, "is_accepted": false, "score": 1, "last_activity_date": 1569916909, "creation_date": 1569916909, "answer_id": 58180446, "question_id": 58179709, "link": "https://stackoverflow.com/questions/58179709/how-to-use-rails-routing-without-resources-with-use-only-ids/58180446#58180446", "title": "How to use Rails routing without resources, with use only ids", "body": "<p>You can use <code>shallow</code> to avoid deep nesting resources in rails. You can read <a href=\"https://guides.rubyonrails.org/routing.html#nested-resources\" rel=\"nofollow noreferrer\">this tutorial</a> to have more information.</p>\n"}], "owner": {"reputation": 1, "user_id": 11134530, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xeFFo.png?s=128&g=1", "display_name": "Dmitry S.", "link": "https://stackoverflow.com/users/11134530/dmitry-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1569946974, "creation_date": 1569913883, "last_edit_date": 1569946974, "question_id": 58179709, "link": "https://stackoverflow.com/questions/58179709/how-to-use-rails-routing-without-resources-with-use-only-ids", "title": "How to use Rails routing without resources, with use only ids", "body": "<p><strong>Description.</strong></p>\n\n<p>I want filtering product on my site, but I won't use nested resources.</p>\n\n<p>Filtering has 4 level.</p>\n\n<p>For example,</p>\n\n<p><a href=\"https://example.com/london/car/bmw/red\" rel=\"nofollow noreferrer\">https://example.com/london/car/bmw/red</a></p>\n\n<p>or</p>\n\n<p><a href=\"https://example.com/:city/:category/:brand/:color\" rel=\"nofollow noreferrer\">https://example.com/:city/:category/:brand/:color</a></p>\n\n<p>routes.rb</p>\n\n<pre><code>get '/:one_id', to: 'categories#show', as: 'category_one'\nget '/:one_id/:two_id', to: 'categories#show', as: 'category_two'\nget '/:one_id/:two_id/:three_id', to: 'categories#show', as: 'category_three'\nget '/:one_id/:two_id/:three_id/:four_id', to: 'categories#show', as: 'category_four'\n</code></pre>\n\n<p>Why I use names id like \":one_id\", \":two_id\" etc.?</p>\n\n<p>Because \": one_id\" may contain multiple objects (filters).</p>\n\n<p>For example,</p>\n\n<p><a href=\"https://example.com/london/\" rel=\"nofollow noreferrer\">https://example.com/london/</a></p>\n\n<p><a href=\"https://example.com/bmw/\" rel=\"nofollow noreferrer\">https://example.com/bmw/</a></p>\n\n<p><a href=\"https://example.com/woman/\" rel=\"nofollow noreferrer\">https://example.com/woman/</a></p>\n\n<p>i.e, \":one_id\" may be city, category or sex (multiple entity) and \":two_id\" may be category, brand or color, etc.</p>\n\n<p><strong>Question:</strong></p>\n\n<p>What are the best practices for organizing such routing?</p>\n\n<p><strong>Configuration:</strong></p>\n\n<p>Ruby 2.5.1</p>\n\n<p>Rails 5.2.2.1</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "backend"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1569913180, "post_id": 58179416, "comment_id": 102739206, "body": "\ud83d\udc34 This is an \u201cI want a pony\u201d type of question and these are difficult to answer concisely and that makes them off-topic on Stack Overflow. If you can, make an attempt and then show us your code we can understand what you\u2019re trying to do on a technical level. Even a small amount of code, however incomplete or broken, can give us context and illustrate your intentions."}], "answers": [{"tags": [], "owner": {"reputation": 641, "user_id": 5199542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc4bf213725a3737f165cd15af26331c?s=128&d=identicon&r=PG", "display_name": "Xiting", "link": "https://stackoverflow.com/users/5199542/xiting"}, "is_accepted": true, "score": 0, "last_activity_date": 1569920932, "creation_date": 1569920932, "answer_id": 58181529, "question_id": 58179416, "link": "https://stackoverflow.com/questions/58179416/make-an-user-with-different-courses-and-display-it/58181529#58181529", "title": "make an user with different courses and display it", "body": "<p>Assuming what you have </p>\n\n<pre><code>class User &lt; ApplicatonRecord\n  has_many :courses\nend\n</code></pre>\n\n<p>and in controller you assign @user var.\nYou should have in view smth like that:</p>\n\n<pre><code>&lt;p&gt; User: &lt;%= @user.name %&gt; &lt;/p&gt;\n&lt;ul&gt;\n&lt;% @user.courses do |course| %&gt;\n  &lt;li&gt;&lt;%= link_to(course.name, course) %&gt;&lt;/li&gt;\n&lt;% end %&gt;\n&lt;/ul&gt;\n</code></pre>\n"}], "owner": {"reputation": 292, "user_id": 12132097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gtb2S.jpg?s=128&g=1", "display_name": "Joaqu&#237;n", "link": "https://stackoverflow.com/users/12132097/joaqu%c3%adn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 58181529, "answer_count": 1, "score": 0, "last_activity_date": 1569920932, "creation_date": 1569912577, "question_id": 58179416, "link": "https://stackoverflow.com/questions/58179416/make-an-user-with-different-courses-and-display-it", "title": "make an user with different courses and display it", "body": "<p>I want to know if exists a way to create an user with differents course that are already registered in his account and show it with links in his page, like:</p>\n\n<p>User {user_name}</p>\n\n<p>courses:</p>\n\n<p>\u2022 link_to course1</p>\n\n<p>\u2022 link_to course2</p>\n\n<p>\u2022 link_to course3</p>\n"}, {"tags": ["arrays", "ruby", "performance", "sorting", "optimization"], "comments": [{"owner": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "edited": false, "score": 1, "creation_date": 1569899726, "post_id": 58177344, "comment_id": 102735691, "body": "&quot;for big arrays (n=1000) the code is very slow&quot; How slow? My first attempt with n=1000 takes 9s. Is that too slow?"}, {"owner": {"reputation": 43, "user_id": 12044095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d2acb12bfb2c0ef0b70b870147959e?s=128&d=identicon&r=PG&f=1", "display_name": "Alecsander", "link": "https://stackoverflow.com/users/12044095/alecsander"}, "reply_to_user": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "edited": false, "score": 0, "creation_date": 1569899973, "post_id": 58177344, "comment_id": 102735730, "body": "@JaredBeck well, here for n = 1000 takes more than 20 seconds to run and I have an i7 8750 CPU, <code>n</code> can be 10^5, in this case, takes more than 10 minutes running"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1569909865, "post_id": 58177344, "comment_id": 102737923, "body": "What&#39;s the upper bound for your array size? This sort of problem suggests to me that a bitset might be the answer. Doing boolean math is way, way easier than testing individual array elements. E.g. <code>disallowed_pattern &amp; entry == disallowed_pattern</code> means you hit a disallowed entry. This will work if you&#39;re dealing with simple numerical values. That could cut your <i>O(n^2)</i> problem down to <i>O(n)</i>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1569912620, "post_id": 58177344, "comment_id": 102738953, "body": "It appears from your code that you wish to compute the <i>total number</i> of subsequences that satisfy certain conditions, not an array of those subsequences (each subsequence corresponding to a range <code>i..j</code>). Yet that is not stated as the objective and readers  who do not read through your code might assume you wish to return an array. That needs to be made clear."}, {"owner": {"reputation": 43, "user_id": 12044095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d2acb12bfb2c0ef0b70b870147959e?s=128&d=identicon&r=PG&f=1", "display_name": "Alecsander", "link": "https://stackoverflow.com/users/12044095/alecsander"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1569942725, "post_id": 58177344, "comment_id": 102755300, "body": "@CarySwoveland i want compute the total number of subsequences that satisfy certain conditions. I will made this more clear"}, {"owner": {"reputation": 43, "user_id": 12044095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d2acb12bfb2c0ef0b70b870147959e?s=128&d=identicon&r=PG&f=1", "display_name": "Alecsander", "link": "https://stackoverflow.com/users/12044095/alecsander"}, "edited": false, "score": 0, "creation_date": 1570024857, "post_id": 58177344, "comment_id": 102784295, "body": "Actually the excluding arrays are [1,3] and [2,5]. You mean overlap like [1,3] overlaps [1,2,3], [1,2,3,4] and [2,5], overlaps [2,3,4,5] (for example)? So yes, it cant overlap. So we need remove this sequences from the possible ones. I need the number of permited sequences"}, {"owner": {"reputation": 43, "user_id": 12044095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d2acb12bfb2c0ef0b70b870147959e?s=128&d=identicon&r=PG&f=1", "display_name": "Alecsander", "link": "https://stackoverflow.com/users/12044095/alecsander"}, "edited": false, "score": 0, "creation_date": 1570025059, "post_id": 58177344, "comment_id": 102784431, "body": "Edited the original post with an update"}, {"owner": {"reputation": 43, "user_id": 12044095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d2acb12bfb2c0ef0b70b870147959e?s=128&d=identicon&r=PG&f=1", "display_name": "Alecsander", "link": "https://stackoverflow.com/users/12044095/alecsander"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1570055824, "post_id": 58177344, "comment_id": 102797838, "body": "@CarySwoveland Thanks for the tips about stackoverflow and sorry about mess the question, i&#39;m learning ruby, i will do better questions :)"}, {"owner": {"reputation": 43, "user_id": 12044095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d2acb12bfb2c0ef0b70b870147959e?s=128&d=identicon&r=PG&f=1", "display_name": "Alecsander", "link": "https://stackoverflow.com/users/12044095/alecsander"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1570071745, "post_id": 58177344, "comment_id": 102800689, "body": "@CarySwoveland In the example, [4,6] is not valid because <b>n = 5</b>, so the maximum number is 5. I dont know what you mean with overlaps, but invalids sequences are the ones that the subsquence [1,3] and [2,5], are present."}, {"owner": {"reputation": 43, "user_id": 12044095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d2acb12bfb2c0ef0b70b870147959e?s=128&d=identicon&r=PG&f=1", "display_name": "Alecsander", "link": "https://stackoverflow.com/users/12044095/alecsander"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1570111418, "post_id": 58177344, "comment_id": 102817445, "body": "Ohh, I understand now. The not allowed array dont overlap itself. We just need remove the valid sequences that contain it or if it is an subsequence inside the valid array. So, if we have, for example, the [1,4] and [3,6] not alloweds, every sequence that [1,4] and [3,6] is present (exactly or is an subsquence), we need remove. For example, [3,4,5,6] we cant count because [3,6] is an subsequence of it @CarySwoveland"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1570249335, "post_id": 58177344, "comment_id": 102862485, "body": "I&#39;ll have a revised answer for you tomorrow. I finished the coding and testing; I just have to write it up. I removed all but one of my comments on your question to clean it up. You might want to consider doing the same."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 12044095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d2acb12bfb2c0ef0b70b870147959e?s=128&d=identicon&r=PG&f=1", "display_name": "Alecsander", "link": "https://stackoverflow.com/users/12044095/alecsander"}, "edited": false, "score": 0, "creation_date": 1569942501, "post_id": 58180142, "comment_id": 102755167, "body": "I understand your answer, but [1,2] is valid because the not allowed are [2,2], [1,3] and [2,5] (a[i], b[i]), but [2,2] is not a problem, so we consider only [1,3] and [2,5] the not alloweds."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 43, "user_id": 12044095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d2acb12bfb2c0ef0b70b870147959e?s=128&d=identicon&r=PG&f=1", "display_name": "Alecsander", "link": "https://stackoverflow.com/users/12044095/alecsander"}, "edited": false, "score": 1, "creation_date": 1569942722, "post_id": 58180142, "comment_id": 102755296, "body": "Ah, so you <a href=\"https://ruby-doc.org/core-2.6.4/Array.html#method-i-transpose\" rel=\"nofollow noreferrer\"><code>transpose</code></a> the input arrays. Although the output isn&#39;t entirely the same, I hope the explanation is. It&#39;s more about the <a href=\"https://ruby-doc.org/core-2.6.4/doc/syntax/methods_rdoc.html#label-Block+Argument\" rel=\"nofollow noreferrer\"><code>yield</code></a> than anything else."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 43, "user_id": 12044095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d2acb12bfb2c0ef0b70b870147959e?s=128&d=identicon&r=PG&f=1", "display_name": "Alecsander", "link": "https://stackoverflow.com/users/12044095/alecsander"}, "edited": false, "score": 1, "creation_date": 1569942923, "post_id": 58180142, "comment_id": 102755391, "body": "<code>[[2,1,2], [2,3,5]].transpose #=&gt; [[2, 2], [1, 3], [2, 5]]</code>"}, {"owner": {"reputation": 43, "user_id": 12044095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d2acb12bfb2c0ef0b70b870147959e?s=128&d=identicon&r=PG&f=1", "display_name": "Alecsander", "link": "https://stackoverflow.com/users/12044095/alecsander"}, "edited": false, "score": 0, "creation_date": 1569948640, "post_id": 58180142, "comment_id": 102758112, "body": "I ran your code and it was very good, much better than mine. I asked someone here at my internship to see if it&#39;s good enough, but I have the limit of 9 to 10 seconds to execute the code and for large arrays it&#39;s still taking longer than that. I still can&#39;t think of another way to count all the cases, but I&#39;m still trying here."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 43, "user_id": 12044095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d2acb12bfb2c0ef0b70b870147959e?s=128&d=identicon&r=PG&f=1", "display_name": "Alecsander", "link": "https://stackoverflow.com/users/12044095/alecsander"}, "edited": false, "score": 0, "creation_date": 1569952358, "post_id": 58180142, "comment_id": 102759491, "body": "@Alecsander Have you also tried the <code>combinations += 1</code> from the answer? But yeah this answer is not the fasted. A faster answer involves more maths. You&#39;ll first have to calculate the total combinations, which is <code>1 + 2 + 3 + ... + (n - 1) + n</code>. Then subtract the combination count possible with <code>not_allowed</code>. I&#39;ve got a sort of working version, but it doesn&#39;t account for overlapping possibilities between the different given <code>not_allowed</code> options. I&#39;ll see if I can break my brain over it later."}, {"owner": {"reputation": 43, "user_id": 12044095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d2acb12bfb2c0ef0b70b870147959e?s=128&d=identicon&r=PG&f=1", "display_name": "Alecsander", "link": "https://stackoverflow.com/users/12044095/alecsander"}, "edited": false, "score": 0, "creation_date": 1569953241, "post_id": 58180142, "comment_id": 102759819, "body": "Yes, i tried with <code>combinations += 1</code> and <code>transpose</code>. That&#39;s what I added to the code: <code>not_allowed = not_allowed.transpose.reject { |n| n[0] == n[1] }.map(&amp;:to_set)</code> rejected the not_alloweds that are equal, like [1,1], [2,2], [3,3] ....  <code>combinations += 1 if !block_given? || yield(combination)</code> Count the cases."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 43, "user_id": 12044095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d2acb12bfb2c0ef0b70b870147959e?s=128&d=identicon&r=PG&f=1", "display_name": "Alecsander", "link": "https://stackoverflow.com/users/12044095/alecsander"}, "edited": false, "score": 0, "creation_date": 1569954807, "post_id": 58180142, "comment_id": 102760402, "body": "@Alecsander This is what I had so far, but since it&#39;s currently producing wrong results so I can&#39;t add it as an answer. It might give you or somebody else some inspiration though. <a href=\"https://gist.github.com/3limin4t0r/126a295ad8b002b73b80aaa7ef25c348\" rel=\"nofollow noreferrer\">gist.github.com/3limin4t0r/126a295ad8b002b73b80aaa7ef25c348</a>"}], "tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 1, "last_activity_date": 1569943563, "last_edit_date": 1569943563, "creation_date": 1569915694, "answer_id": 58180142, "question_id": 58177344, "link": "https://stackoverflow.com/questions/58177344/trying-optimize-this-ruby-code-to-over-array-sorting-matching/58180142#58180142", "title": "Trying optimize this ruby code to over array sorting/matching", "body": "<p>Instead of creating all combinations, followed by removing what you don't need. It might be faster to only create what you actually need.</p>\n\n<p>You could for example add a block to the <code>combinations</code> method that determines whether or not a combination is added to the output. This way you don't generate an unnecessary long array that need to be subtracted from later.</p>\n\n<pre><code>require 'set'\n\ndef combinations(n)\n  combinations = []\n  elements = (1..n).to_a\n\n  elements.each_index do |i|\n    (elements.length - i).times do |j|\n      combination = elements[j, i + 1]\n      # add the combination if no block is given, or if it evaluates to truthy\n      combinations &lt;&lt; combination if !block_given? || yield(combination)\n    end\n  end\n\n  combinations\nend\n\ndef adjustCombinations(n, a, b)\n  not_allowed = [a, b].transpose\n  not_allowed.reject! { |n1, n2| n1 == n2 }\n  not_allowed.map!(&amp;:to_set)\n\n  combinations(n) do |combination|\n    combination = combination.to_set\n    not_allowed.reject { |set| set.size &gt; combination.size }\n               .none?  { |set| (set - combination).empty? }\n  end\nend\n\nadjustCombinations(5, [2,1,2], [2,3,5])\n#=&gt; [[1], [2], [3], [4], [5], [1, 2], [2, 3], [3, 4], [4, 5], [2, 3, 4], [3, 4, 5]]\n</code></pre>\n\n<p>If you only need the element count you can replace <code>combinations = []</code> with <code>combinations = 0</code> and <code>combinations &lt;&lt; combination</code> with <code>combinations += 1</code>. That way you don't need to instantiate the whole combinations array, which saves a lot of memory with larger numbers.</p>\n"}, {"tags": [], "owner": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "is_accepted": false, "score": 0, "last_activity_date": 1569990442, "creation_date": 1569990442, "answer_id": 58195219, "question_id": 58177344, "link": "https://stackoverflow.com/questions/58177344/trying-optimize-this-ruby-code-to-over-array-sorting-matching/58195219#58195219", "title": "Trying optimize this ruby code to over array sorting/matching", "body": "<blockquote>\n  <p>for big arrays (n=1000) the code is very slow .. </p>\n  \n  <ul>\n  <li>n = 1000 takes more than 20 seconds to run and I have an i7 8750 CPU</li>\n  <li>n == 10^5 .. takes more than 10 minutes running</li>\n  <li>I have the limit of 9 to 10 seconds .. for large arrays ..</li>\n  </ul>\n</blockquote>\n\n<h1>A solution using bitwise operators: n=10^4 in 83s</h1>\n\n<p>Here's my best effort, <strong>with tests and benchmarks</strong>. It's not fast enough, but I think there are <strong>two good techniques here</strong> that you can use, notably:</p>\n\n<ol>\n<li>generating \"sub arrays\" with bit-shifting (<code>&lt;&lt;</code> in <code>sequential_sub_arrays</code>)</li>\n<li>performing \"omissions\" via bit-masking (<code>&amp;</code> in <code>omit?</code>)</li>\n</ol>\n\n<p>These are not techniques I use often or well, so I present them only as a stepping stone for other people to play with.</p>\n\n<p>To meet your goal (\"9 to 10 seconds .. for large arrays\") you may need to take these techniques and implement them in a faster language, like C or rust.</p>\n\n<pre><code># Convert omissions like [1,3] into bitmasks like 0b00000101. See use in `omit?`.\ndef omissions_to_masks(omissions)\n  omissions.map { |o|\n    len = o.max\n    s = o.each_with_object('0' * len) { |e, a| a[e - 1] = '1' }\n    eval('0b' + s.reverse)\n  }\nend\n\n# Test 1: omissions_to_masks\nexpected = [\n  0b00000101, # [1,3]\n  0b00010100  # [3,5]\n]\nactual = omissions_to_masks([[1,3], [3,5]])\nfail unless actual == expected\n\n# bit_subarray is an Integer, whose bits represent an array of Integers.\n# For example, 0b00111001 represents the array [1,4,5,6]\ndef omit?(bit_subarray, masks)\n  masks.any? { |o| bit_subarray &amp; o == o }\nend\n\ndef sequential_sub_arrays(n, output, omissions)\n  masks = omissions_to_masks(omissions)\n  1.upto(n) do |size|\n    proto = 2 ** size - 1\n    0.upto(n - size) do |shift|\n      value = proto &lt;&lt; shift\n      unless omit?(value, masks)\n        output &lt;&lt; value\n      end\n    end\n  end\nend\n\n# Test 2: sequential_sub_arrays\nexpected = [\n  0b00001,\n  0b00010,\n  0b00100,\n  0b01000,\n  0b10000,\n  0b00011,\n  0b00110,\n  0b01100,\n  0b11000,\n  0b01110,\n]\nactual = []\nsequential_sub_arrays(5, actual, [[1,3], [3,5]])\nfail unless expected == actual\n\n# Benchmarking. I use a `NullArray` to discard results, \n# because n=10^4 would produce 60 GB of results and I \n# don't have enough memory.\nclass NullArray\n  def &lt;&lt;(x)\n    # noop\n  end\nend\n\nrequire 'benchmark'\nBenchmark.bm do |x|\n  [5, 100, 1_000, 5_000, 10_000].each do |max|\n    x.report { sequential_sub_arrays(max, NullArray.new, [[1,3], [3,5]]) }\n  end\nend\n#        user     system      total        real\n#    0.000034   0.000002   0.000036 (  0.000032)\n#    0.002266   0.000007   0.002273 (  0.002274)\n#    0.444146   0.001798   0.445944 (  0.446747)\n#   14.362543   0.375005  14.737548 ( 14.765235)\n#   83.235438   8.440965  91.676403 ( 92.070415)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1570340117, "creation_date": 1570340117, "answer_id": 58254507, "question_id": 58177344, "link": "https://stackoverflow.com/questions/58177344/trying-optimize-this-ruby-code-to-over-array-sorting-matching/58254507#58254507", "title": "Trying optimize this ruby code to over array sorting/matching", "body": "<p>The OP has defined 2-element \"not allowed\" arrays, <code>[i,j]</code>, <code>j &gt;= i</code>. I find it more descriptive to refer to \"not to be covered\" (<em>NTBC</em>) ranges, <code>i..j</code>, <code>j &gt;= i</code>. Given a positive integer <code>n</code> and and an array <code>arr</code> of NTBC ranges, the objective is to determine the number of ranges covered by <code>1..n</code> that cover <em>none</em> of the NTBC ranges; that is, count those ranges <code>i..j</code> for which: </p>\n\n<pre><code>arr.any? { |r| (i..j).cover? r } == false\n</code></pre>\n\n<p>Here and in the following, whenever I refer to a range <code>i..j</code> it is to be assumed that <code>i</code> and <code>j</code> satisfy the condition <code>1 &lt;= i &lt;= j &lt;= n</code>.</p>\n\n<p>I refer to two NTBC ranges <code>i..j</code> and <code>p..q</code> as <em>overlapping</em> if <code>i &lt; p &lt; q &lt; j</code> or <code>p &lt; i &lt; q &lt; j</code>. Below I present a very fast solution for the case where there are <em>no</em> overlapping NTBC ranges. The OP has stated that NTBC ranges can overlap, so my solution falls short of a complete answer. The problem is that the presence of overlapping ranges destroys the mathematical structure required by the combinatorial algorithm I employ. I decided to present my solution nevertheless in the hope that someone may find a way to extend my ideas to the case where NTBC ranges may overlap.</p>\n\n<p><strong>Create <code>count_ranges</code> method</strong></p>\n\n<p>Let's first create a method that, given integers <code>i</code> and <code>j</code>, <code>i &lt;= j</code>, counts the number of ranges <code>p..q</code> such that <code>i &lt;= p &lt;= q &lt;= j</code>; that is, for which <code>(i..j).cover?(p,q) #=&gt; true</code>. For example,</p>\n\n<pre><code>(20..40).cover?(12..18) #=&gt; false\n(20..40).cover?(14..28) #=&gt; false\n(20..40).cover?(23..37) #=&gt; true\n(20..40).cover?(29..47) #=&gt; false\n(20..40).cover?(43..51) #=&gt; false\n</code></pre>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.6.3/Range.html#method-i-cover-3F\" rel=\"nofollow noreferrer\">Range#cover?</a> for the case where the argument is a range. The method follows.</p>\n\n<pre><code>def count_ranges(i,j)\n  return 0 if j &lt; i\n  n = (j-i+1)\n  n**2 - (n-1)*n/2\nend\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>count_ranges(1,4)   #=&gt; 10\n</code></pre>\n\n<p>These would be the <code>10</code> ranges:</p>\n\n<pre><code>1..1, 1..2, 1..3, 1..4,\n      2..2, 2..3, 2..4,\n            3..3, 3..4,\n                  4..4\n</code></pre>\n\n<p>Note that:</p>\n\n<pre><code>count_ranges(3,6)   #=&gt; 10\n</code></pre>\n\n<p>or, more generally,</p>\n\n<pre><code>count_ranges(n,n+3) #=&gt; 10\n</code></pre>\n\n<p>The rationale for the calculation performed by this method is as follows. Given the range <code>i..j</code>, <code>i &lt;= j</code>, the number of ranges covered by this range is computed as follows.</p>\n\n<pre><code>n = j-i+1\nn + n-1 + n-2 + ... + n-(n-1)\n  = n*n - (1 + 2 +...+ n-1)\n  = n*n - (n-1)*n/2\n</code></pre>\n\n<p><code>n</code> equals the number of ranges that begin at <code>i</code> and end at <code>k</code>, where <code>i &lt;= k &lt;= j</code>. <code>n-1</code> equals the number of ranges that begin at <code>i+1</code> and end at <code>k</code>, <code>i+1 &lt;= k &lt;= j</code>, and so on. <code>n-(n-1) #=&gt; 1</code> equals the number of ranges that begin at <code>i+(n-1) #=&gt; i+(j-i+1-1) =&gt; j</code> and end at <code>k</code>, <code>j &lt;= k &lt;= j</code>.</p>\n\n<p><code>(1 + 2 +...+ n-1)</code> is the sum of an arithmetic sequence, which equals the product of the number of elements in the sequence (<code>n-1</code>) and the average value in the sequence, which equals the sum of the first and last elements (<code>1+(n-1) #=&gt; n</code>) divided by <code>2</code>.</p>\n\n<p>This method does all the work in the code below. It is important to note that the execution speed of this method is almost independent of the magnitudes of its two arguments.</p>\n\n<p><strong>Remove redundant NTBC ranges</strong></p>\n\n<p>Let <code>arr</code> be an array of NTBC ranges. The first step is to remove NTBC ranges that cover another NTBC range. If:</p>\n\n<pre><code>r1 = u..v\nr2 = x..w\n</code></pre>\n\n<p>and <code>u &lt;= x =&lt; w &lt;= v</code> (<code>r1.cover?(r2) #=&gt; true</code>), <code>r1</code> is redundant and therefore can be disregarded, as any range <code>r</code> that is disqualified from the count because <code>r.cover?(r1) #=&gt; true</code> would be disqualified by <code>r2</code> if <code>r1</code> were not present. </p>\n\n<pre><code>require 'set'\n\ndef remove_redundant_ranges(arr)\n  set = Set.new\n  a = arr.dup\n  while a.any?\n    r = a.shift\n    set &lt;&lt; r unless set.any? { |t| r.cover?(t) } || a.any? { |t| r.cover?(t) }\n  end\n  set.to_a  \nend\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>arr = [2..4, 7..14, 8..12, 14..14, 4..5, 1..5, 9..12, 2..4]\n\nremove_redundant_ranges(arr) \n  #=&gt; [14..14, 4..5, 9..12, 2..4]\n</code></pre>\n\n<p><strong>Counting method</strong></p>\n\n<pre><code>def count_non_covering_ranges(n, arr)\n  (([0..0] + remove_redundant_ranges(arr).sort_by(&amp;:begin)) &lt;&lt; (n+1..n+1)).\n    each_cons(2).\n    sum { |r1,r2| net_count(r1, r2) }\nend\n\ndef net_count(r1, r2)\n  r1b, r1e = endpoints(r1)\n  r2b, r2e = endpoints(r2)\n  count_ranges(r1b+1, r2e-1) - count_ranges(r1b+1, r1e-1)\nend\n\ndef endpoints(r)\n  [r.begin, r.end]\nend\n</code></pre>\n\n<p><strong>Examples</strong></p>\n\n<p><em>Example 1</em></p>\n\n<pre><code>n = 9\narr = [2..4, 4..5, 7..9]\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>count_non_covering_ranges(n, arr)\n  #=&gt; 20\n</code></pre>\n\n<p>The <code>20</code> ranges covered by <code>1..9</code> which do not cover any NTBC ranges in <code>arr</code> are as follows.</p>\n\n<pre><code>1..1, 1..2, 1..3,\n      2..2, 2..3,\n            3..3, 3..4,\n                  4..4,\n                        5..5, 5..6, 5..7, 5..8,\n                              6..6, 6..7, 6..8,\n                                    7..7, 7..8,\n                                          8..8, 8..9\n                                                9..9\n</code></pre>\n\n<p><em>Example 2</em></p>\n\n<pre><code>n = 12\narr = [2..4, 4..7, 9..11]\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>count_non_covering_ranges(n, arr)\n  #=&gt; 38\n</code></pre>\n\n<p>The <code>38</code> ranges covered by <code>1..12</code> which do not cover any NTBC ranges in <code>arr</code> are as follows.</p>\n\n<pre><code>1..1, 1..2, 1..3,\n      2..2, 2..3,\n            3..3, 3..4, 3..5, 3..6,\n                  4..4, 4..5, 4..6,\n                        5..5, 5..6, 5..7, 5..8, 5..9,  5..10,\n                              6..6, 6..7, 6..8, 6..9,  6..10,\n                                    7..7, 7..8, 7..9,  7..10,\n                                          8..8, 8..9,  8..10,\n                                                9..9,  9..10,\n                                                      10..10, 10..11, 10..12,\n                                                              11..11, 11..12,\n                                                                      12..12\n</code></pre>\n\n<p><em>Example 3</em></p>\n\n<pre><code>n = 12\narr = [2..4, 6..8, 9..11]\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>count_non_covering_ranges(n, arr)\n  #=&gt; 34\n</code></pre>\n\n<p>The <code>34</code> ranges covered by <code>1..12</code> which do not cover any NTBC ranges in <code>arr</code> are as follows.</p>\n\n<pre><code>1..1, 1..2, 1..3,\n      2..2, 2..3,\n            3..3, 3..4, 3..5, 3..6, 3..7\n                  4..4, 4..5, 4..6, 4..7\n                        5..5, 5..6, 5..7,\n                              6..6, 6..7,\n                                    7..7, 7..8, 7..9,  7..10,\n                                          8..8, 8..9,  8..10, \n                                                9..9,  9..10, \n                                                      10..10, 10..11, 10..12,\n                                                              11..11, 11..12,\n                                                                      12..12\n</code></pre>\n\n<p><em>Example 4</em></p>\n\n<pre><code>n = 15\narr = [2..4, 4..5, 9..12, 14..14]\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>count_non_covering_ranges(n, arr)\n  #=&gt; 44\n</code></pre>\n\n<p>The <code>44</code> ranges covered by <code>1..15</code> which do not cover any NTBC ranges in <code>arr</code> are as follows.</p>\n\n<pre><code>1..1, 1..2, 1..3,\n      2..2, 2..3,\n            3..3,\n                  4..4,\n                        5..5, 5..6, 5..7, 5..8,   5..9,  5..10,  5..11,\n                              6..6, 6..7, 6..8,   6..9,  6..10,  6..11,\n                                    7..7, 7..8,   7..9,  7..10,  7..11,\n                                          8..8,   8..9,  8..10,  8..11,\n                                                  9..9,  9..10,  9..11,\n                                                        10..10, 10..11,\n                                                                11..11,\n                                                10..12, 10..13,\n                                                11..12, 11..13,\n                                                12..12, 12..13, \n                                                        13..13,\n                                                                15..15\n</code></pre>\n\n<p><em>Example 5</em></p>\n\n<pre><code>n = 15\narr = [2..4, 4..5, 9..12, 14..14]\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>require 'time'\n\nn = 1_000_000_000_000\nm = 1_000 # number of NTBC ranges\ns = 1_000 # size of each NTBC range\nq = n/m\narr = m.times.map do |i|\n  from = rand(i*q..(i+1)*q-1-s)\n  from..from+s-1\nend\narr.first(3)\n  #=&gt; [737321450..737322449, 1803846784..1803847783, 2536962375..2536963374] \narr.last(2)\n  #=&gt; [998900666529..998900667528, 999036273747..999036274746] \n\nt = Time.now\nx = count_non_covering_ranges(n, arr)\n  #=&gt; 585_410_016_606_600_423_738 \nputs \"#{(Time.now-t).round(2)} seconds\"\n0.24 seconds\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.6.3/Enumerable.html#method-i-each_cons\" rel=\"nofollow noreferrer\">Enumerable#each_cons</a>.</p>\n\n<p>The first thing to notice is that the execution speed of <code>count_non_covering_ranges</code> is nearly independent of the magnitude of its first argument, <code>n</code>, and the sizes of the NTBC ranges, and is roughly proportional to the size of its second argument, <code>arr</code>, the number of NTBC ranges.</p>\n\n<p>Suppose:</p>\n\n<pre><code>n = 14\narr = [2..5, 7..9, 10..13]\n</code></pre>\n\n<p>We first modify this to the following:</p>\n\n<pre><code>r1 = 0..0\nr2 = 2..5\nr3 = 7..9\nr4 = 10..13\nr5 = n+1..n+1 #=&gt; 15..15\na = [r1, r2, r3, r4, r5]\n</code></pre>\n\n<p>We first compute:</p>\n\n<pre><code>c1 =  count_ranges(r1.begin+1, r2.end-1)\n  #=&gt; count_ranges(1, 4)   #=&gt; 10\n</code></pre>\n\n<p>This is the number of ranges covered by <code>1..4</code>, none of which cover any of the NTBC's. These <code>10</code> ranges are <code>1..1</code>, <code>1..2</code>, <code>1..3</code>, <code>1..4</code>, <code>2..2</code>, <code>2..3</code>, <code>2..4</code>, <code>3..3</code>, <code>3..4</code> and <code>4..4</code>.</p>\n\n<p>Next we compute:</p>\n\n<pre><code>c2 =  count_ranges(r2.begin+1, r3.end-1)\n  #=&gt; count_ranges(3, 8)   #=&gt; 21\n\nc3 =  count_ranges(r3.begin+1, r4.end-1)\n  #=&gt; count_ranges(8, 12)  #=&gt; 15\n\nc4 =  count_ranges(r4.begin+1, r5.end-1)\n  #=&gt; count_ranges(11, 14) #=&gt; 10\n</code></pre>\n\n<p>Now sum these values:</p>\n\n<pre><code>c1 + c2 + c3 + c4\n  #=&gt; 56\n</code></pre>\n\n<p>Let's compare this with what we would compute for the total:</p>\n\n<pre><code>count_non_covering_ranges(n, arr)\n  #=&gt; 49\n</code></pre>\n\n<p>The discrepancy is due to the fact that we have double-counted <code>7</code> ranges:</p>\n\n<ul>\n<li><code>c1</code> and <code>c2</code> both count the ranges <code>3..3</code>, <code>3..4</code> and <code>4..4</code>;</li>\n<li><code>c2</code> and <code>c3</code> both count the range <code>8..8</code>; and</li>\n<li><code>c3</code> and <code>c4</code> both count the ranges <code>11..11</code>, <code>11..12</code> and <code>12..12</code>.</li>\n</ul>\n\n<p>We must therefore subtract from <code>49</code>:</p>\n\n<pre><code>count_ranges(r2.begin+1, r2.end-1) + count_ranges(r3.begin+1, r3.end-1) +\n  count_ranges(r4.begin+1, r4.end-1)\n  #=&gt; 3 + 1 + 3 =&gt; 7\n</code></pre>\n\n<p>For convenience I also subtract out the following:</p>\n\n<pre><code>count_ranges(r1.begin+1, r1.end-1) + count_ranges(r5.begin+1, r5.end-1)\n  #=&gt; count_ranges(1, -1) + count_ranges(16, 14) =&gt; 0 + 0 =&gt; 0   \n</code></pre>\n\n<p>This is permitted as I constructed <code>count_ranges</code> so that <code>count_ranges(i, j)</code> returns zero when <code>j &lt; i</code>. </p>\n"}], "owner": {"reputation": 43, "user_id": 12044095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d2acb12bfb2c0ef0b70b870147959e?s=128&d=identicon&r=PG&f=1", "display_name": "Alecsander", "link": "https://stackoverflow.com/users/12044095/alecsander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1570340117, "creation_date": 1569896649, "last_edit_date": 1570024992, "question_id": 58177344, "link": "https://stackoverflow.com/questions/58177344/trying-optimize-this-ruby-code-to-over-array-sorting-matching", "title": "Trying optimize this ruby code to over array sorting/matching", "body": "<p>I have some problem here in my internship. I need to get all sequences from an array: Assuming that I have this Array <code>[1,2,3,4,5]</code>, I need to generate all sequential sub arrays like <code>[1]</code>, <code>[2]</code>, <code>[3]</code>, <code>[4]</code>, <code>[5]</code>, <code>[1,2]</code>, <code>[2,3]</code>, <code>[3,4]</code>, <code>[4,5]</code>, <code>[1,2,3]</code>, <code>[2,3,4]</code>, <code>[3,4,5]</code>, <code>[1,2,3,4]</code>, <code>[2,3,4,5]</code>, <code>[1,2,3,4,5]</code>.</p>\n\n<p>After this, I need to remove from this generated arrays some sub-arrays. I called this the \"not allowed\". </p>\n\n<p>For example, if the not allowed are <code>[1,3]</code> and <code>[3,5]</code> I need to remove the sequences <code>[1,2,3]</code> (<code>[1,3]</code> is in that), <code>[3,4,5]</code> (<code>[3,5]</code> is an sub-array of), <code>[1,2,3,4]</code> (<code>[1,3]</code> iis an sub-array of), <code>[2,3,4,5]</code> (<code>[3,5]</code> is an sub-array of) and <code>[1,2,3,4,5]</code> (<code>[1,3]</code> and <code>[3,5]</code> is an sub-array of).</p>\n\n<p>I did some code that is working, the problem is: <strong>big arrays</strong> (<code>n</code> can be <code>10^5</code>), <strong>the code is very slow</strong> (If you try with <code>n = 1000</code> you will see). My code is below. The not allowed are generated from <code>[a[i], b[i]]</code>.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'set'\n\ndef not_allowed(a, b)\n  count = a.size - 1\n  (0..count).map { |i| [a[i], b[i]] }\nend\n\ndef combinations(n)\n  combinations = []\n  elements = (1..n).to_a\n  elements_sequence = (0..elements.size - 1)\n\n  elements_sequence.each do |i|\n    elements_sequence.each do |j|\n      next if elements[j..i].size == 0\n\n      combinations &lt;&lt; elements[j..i]\n    end\n  end\n  combinations\nend\n\ndef adjustCombinations(n, a, b)\n  sequences = combinations(n)\n  not_alloweds = not_allowed(a, b).map { |not_allowed| not_allowed if not_allowed[0] != not_allowed[1] }.compact\n  final_not_alloweds = not_alloweds.map { |not_allowed|  sequences.map { |sequence| sequence if not_allowed.to_set.subset?(sequence.to_set) }.compact }.flatten(1)\n\n  (sequences - final_not_alloweds).count\nend\n\nadjustCombinations(5, [2,1,2], [2,3,5])\n</code></pre>\n\n<p>In this example case <code>[1,3]</code> and <code>[2,5]</code> are not allowed. When not allowed are equals like <code>[1,1]</code>, <code>[2,2]</code>, <code>[3,3]</code> this is not a problem.</p>\n\n<p><code>n</code> is to identify that array goes until <code>5</code>.</p>\n\n<p><strong>UPDATE 1: I have the limit of 9 ~ 10 seconds to run this code</strong></p>\n\n<p>UPDATE 2: For not_alloweds <strong>[1,3] and [2,5]</strong>, we need remove, for example, the sequences [<strong>1</strong>,2,<strong>3</strong>], [<strong>1</strong>,2,<strong>3</strong>,4] [<strong>2</strong>,3,4,<strong>5</strong>], [<strong>1</strong>,<strong>2</strong>,<strong>3</strong>,4,<strong>5</strong>] (if you look the not_alloweds are an subsequence of the sequences listed)</p>\n\n<p><strong>UPDATE 3: I need the number of possible allowed_sequences. In the case of:</strong></p>\n\n<pre><code>n = 5\na = [2,1,2]\nb = [2,3,5]\n</code></pre>\n\n<p>Expected result is <strong>11</strong></p>\n"}, {"tags": ["ruby", "mechanize"], "answers": [{"tags": [], "owner": {"reputation": 5286, "user_id": 455770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mMHwz.jpg?s=128&g=1", "display_name": "Rots", "link": "https://stackoverflow.com/users/455770/rots"}, "is_accepted": false, "score": 0, "last_activity_date": 1569893499, "creation_date": 1569893499, "answer_id": 58177060, "question_id": 58176918, "link": "https://stackoverflow.com/questions/58176918/mechanize-timeouts/58177060#58177060", "title": "Mechanize Timeouts", "body": "<p>A quick google showed a few ideas. One was to try resetting <code>Mechanize</code> after a failure.</p>\n\n<pre><code>rescue Timeout::Error\n   begin\n    puts \"TIMED OUT: \" + url\n    m = Mechanize.new\n   end\n</code></pre>\n"}], "owner": {"reputation": 249, "user_id": 11552811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed366f03b5fd9bf76a34fca8707a6bad?s=128&d=identicon&r=PG&f=1", "display_name": "erli", "link": "https://stackoverflow.com/users/11552811/erli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569893499, "creation_date": 1569891997, "question_id": 58176918, "link": "https://stackoverflow.com/questions/58176918/mechanize-timeouts", "title": "Mechanize Timeouts", "body": "<p>I'm attempting to build a piece of code that searches for pages that timeout using Mechanize and Ruby. My test bed includes one page that is specifically written to timeout, and 3 pages that function normally. Here is the code:</p>\n\n<pre><code>urls = ['http://example.com/regular.php','http://example.com/regular2.php','http://example.com/regular3.php', 'http://example.com/tmeout.php']\nm = Mechanize.new\n\nurls.each do |url|\n    begin\n        status = Timeout::timeout(5.0) {\n            m.get(url)\n        }\n   rescue Timeout::Error\n       puts \"TIMED OUT: \" + url\n   end\nend\n</code></pre>\n\n<p>When the timeout URL is the <strong>last</strong> element in the list, this works perfectly fine. The <code>timeout</code> link prints to console. However, when the <code>timeout</code> link not the last element in the list (for ex, I place it first on the link), the <code>timeout</code> link prints to console however some of the <code>regular</code> links print to console too. This also appears to be non deterministic. Every time I rerun it, a different set of links will print to console.</p>\n\n<p>Can anyone tell me why this is so and what fix is available? I've noticed that instantiated a new <code>mechanize</code> for each iteration solves the problem - however this is a non option because other parts of the program rely on the cookies from <code>m</code>, which would be reset if a new instance is created. Any fixes?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1569890442, "post_id": 58176629, "comment_id": 102734083, "body": "Note: <code>@@</code> is a <i>class instance variable</i> that is <i>shared among all instances of a class</i>. You probably want <code>@</code> as a regular instance variable."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1569920754, "post_id": 58176629, "comment_id": 102742882, "body": "@tadman <code>@@</code> is a &quot;class variable&quot; (without &quot;instance&quot;)."}, {"owner": {"reputation": 5580, "user_id": 490454, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/RqygM.jpg?s=128&g=1", "display_name": "BobRodes", "link": "https://stackoverflow.com/users/490454/bobrodes"}, "edited": false, "score": 0, "creation_date": 1570029750, "post_id": 58176629, "comment_id": 102787289, "body": "Furthermore, while it&#39;s possible to initialize an <code>@@</code> variable inside a method, it isn&#39;t good practice to do so. Instance variables are <code>@</code> variables that are initialized inside a method of the class (typically the <code>initialize</code> method), and you should only initialize instance variables inside a class method. Any other variables should be initialized at the top of the class itself."}], "answers": [{"comments": [{"owner": {"reputation": 419, "user_id": 9195617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/587966bbb465b10441f1369c1d666d09?s=128&d=identicon&r=PG&f=1", "display_name": "vcable", "link": "https://stackoverflow.com/users/9195617/vcable"}, "edited": false, "score": 1, "creation_date": 1569891944, "post_id": 58176814, "comment_id": 102734333, "body": "Wow, this is an incredibly well written and complete answer.  Thank you!"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1569920202, "post_id": 58176814, "comment_id": 102742572, "body": "When implementing <code>to_s</code>, Ruby gives you <code>board.display</code> for free."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 4, "last_activity_date": 1569892481, "last_edit_date": 1569892481, "creation_date": 1569890877, "answer_id": 58176814, "question_id": 58176629, "link": "https://stackoverflow.com/questions/58176629/changing-class-instance-variable-from-different-class/58176814#58176814", "title": "Changing class instance variable from different class", "body": "<p>This required some refactoring to make it more idiomatic Ruby, but the result is here:</p>\n\n<pre><code>class GameBoard\n  attr_accessor :cells\n\n  def initialize \n    # Use an instance variable that's local to this particular instance\n    @cells = [1,2,3,4,5,6,7,8,9]\n  end\n\n  # Define a method that represents this as a string. Note that it's not \n  # printed, meaning the caller can decide how to use this data.\n  def to_s\n    # Use each_slice to pull out rows of 3 and use join to glue them together\n    # in the right layout.\n    @cells.each_slice(3).map do |row|\n      # Each row is converted from [1,2,3] to \"1 | 2 | 3\"\n      row.join(' | ')\n    end.join(\"\\n\" + \"-\" * 10 + \"\\n\")\n  end\nend\n\nclass Player\n  # Players are attached to particular boards with a marker\n  def initialize marker, board\n    @marker = marker\n    @board = board\n  end\n\n  def make_move number\n    @board.cells[number - 1] = @marker.to_s\n  end\nend \n</code></pre>\n\n<p>Then the main section of the code now looks like this:</p>\n\n<pre><code>puts \"Welcome to Tic-Tac-Toe!\"\nboard = GameBoard.new\n\nbob = Player.new(\"X\", board)\nbob.make_move(1)\n\n# Here the .to_s method is called automatically by puts\nputs board\n</code></pre>\n"}], "owner": {"reputation": 419, "user_id": 9195617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/587966bbb465b10441f1369c1d666d09?s=128&d=identicon&r=PG&f=1", "display_name": "vcable", "link": "https://stackoverflow.com/users/9195617/vcable"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 1, "accepted_answer_id": 58176814, "answer_count": 1, "score": 2, "last_activity_date": 1569892481, "creation_date": 1569888810, "question_id": 58176629, "link": "https://stackoverflow.com/questions/58176629/changing-class-instance-variable-from-different-class", "title": "Changing class instance variable from different class", "body": "<p>I'm currently writing a command-line Tic Tac Toe game in Ruby, and I'm having issues changing a cell on the game board to the player's marker (\"X\" or \"O\").  In my code, I'm accessing the <code>cells</code> class variable in the <code>GameBoard</code> class through my <code>make_move</code> method in the <code>Player</code> class instance.  However, when I run the code, the cell does not change. </p>\n\n<p>Code:</p>\n\n<pre><code>class GameBoard\n\n    attr_accessor :cells\n\n    def initialize \n        @@cells = [1,2,3,4,5,6,7,8,9]\n        display_board\n    end\n\n    def self.cells \n        @@cells\n    end\n\n    def display_board\n        @@cells[0..2].each{|n| print n.to_s + \" | \"}\n        print \"\\n-----------\\n\"\n        @@cells[3..5].each{|n| print n.to_s + \" | \"}\n        print \"\\n-----------\\n\"\n        @@cells[6..8].each{|n| print n.to_s + \" | \"}\n    end\n\nend\n\nclass Player\n    def initialize marker\n        @marker = marker\n    end\n\n    def make_move number\n        GameBoard.cells[number - 1] = @marker.to_s\n    end\nend \n\ndef play_game\n    puts \"Welcome to Tic-Tac-Toe!\"\n    GameBoard.new\nend\n\nplay_game\nbob = Player.new(\"X\")\nbob.make_move(1)\n</code></pre>\n\n<p>Should display:</p>\n\n<pre><code>             X | 2 | 3\n            -----------\n             4 | 5 | 6\n            -----------\n             7 | 8 | 9\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1569893784, "post_id": 58176427, "comment_id": 102734653, "body": "Try setting this to false/true: <code>Rails.application.config.assets.precompile = false</code>. I don&#39;t think that the precompile can accept <code>&lt;&lt;</code>. You can just precompile with a rake task in heroku - i think it does this automatically."}], "answers": [{"tags": [], "owner": {"reputation": 45, "user_id": 7642580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oFTUc.jpg?s=128&g=1", "display_name": "Mohit Kumar", "link": "https://stackoverflow.com/users/7642580/mohit-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1569924972, "creation_date": 1569924972, "answer_id": 58182687, "question_id": 58176427, "link": "https://stackoverflow.com/questions/58176427/uglifier-punctuation-issue-deploying-to-heroku/58182687#58182687", "title": "Uglifier punctuation issue deploying to Heroku", "body": "<p><a href=\"https://stackoverflow.com/questions/30422437\">Here I found help for the same problem you had.</a> </p>\n\n<p>Run rails console and:</p>\n\n<pre><code>    JS_PATH = \"app/assets/javascripts/**/*.js\"; \n     Dir[JS_PATH].each do |file_name|\n      puts \"\\n#{file_name}\"\n      puts Uglifier.compile(File.read(file_name))\n    end\n</code></pre>\n"}], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569924972, "creation_date": 1569886445, "question_id": 58176427, "link": "https://stackoverflow.com/questions/58176427/uglifier-punctuation-issue-deploying-to-heroku", "title": "Uglifier punctuation issue deploying to Heroku", "body": "<p>Goal is to precompile my assts, js files, I assume.</p>\n\n<p>What I am really doing is wanting to use a .js file in my assets/javascript folder on a specific page when it loads.</p>\n\n<p>My issue is when delpoying to Heroku.</p>\n\n<p>my assets.rb:</p>\n\n<pre><code>Rails.application.config.assets.precompile &lt;&lt; '*.js'\n</code></pre>\n\n<p>Production.rb:</p>\n\n<pre><code>config.assets.js_compressor = Uglifier.new(harmony: true)\nconfig.assets.compile = false\n</code></pre>\n\n<p>Error:</p>\n\n<blockquote>\n  <p>undefined method `start_with?' for nil:NilClass</p>\n</blockquote>\n\n<p>Fix: <a href=\"https://github.com/lautis/uglifier/issues/137\" rel=\"nofollow noreferrer\">https://github.com/lautis/uglifier/issues/137</a></p>\n\n<pre><code>  config.assets.js_compressor = Uglifier.new(harmony: true, compress: { unused: false })\n</code></pre>\n\n<p>This now gives me the Error:</p>\n\n<blockquote>\n  <p>Uglifier::Error: Unexpected token punc \u00ab:\u00bb, expected punc \u00ab,\u00bb rails</p>\n</blockquote>\n\n<p>Anyone have these issues with a fix for it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 39, "user_id": 12145137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c056ec6ddbfb791d29efc55f5a496cfc?s=128&d=identicon&r=PG&f=1", "display_name": "Renak", "link": "https://stackoverflow.com/users/12145137/renak"}, "edited": false, "score": 0, "creation_date": 1569956157, "post_id": 58176390, "comment_id": 102760881, "body": "Is there something that I would need to add to the message model or an rspec config?"}], "owner": {"reputation": 39, "user_id": 12145137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c056ec6ddbfb791d29efc55f5a496cfc?s=128&d=identicon&r=PG&f=1", "display_name": "Renak", "link": "https://stackoverflow.com/users/12145137/renak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1599940609, "creation_date": 1569886096, "last_edit_date": 1569888599, "question_id": 58176390, "link": "https://stackoverflow.com/questions/58176390/capybaraelementnotfound-unable-to-find-field-ordermessage-that-is-not-dis", "title": "Capybara::ElementNotFound: Unable to find field &quot;order[message]&quot; that is not disabled", "body": "<p>In my spec.rb test file <code>fill_in \"order[message]\", with: \"Don't eat paint chips!\"</code>\nis failing with this error.</p>\n\n<pre><code>Capybara::ElementNotFound:\n  Unable to find field \"order[message]\" that is not disabled\n</code></pre>\n\n<p>Here is my html.erb</p>\n\n<pre><code>&lt;%= form_with model: @order, url: \"/gift/orders\", local: true  do |form| %&gt; \n  .\n  .\n  &lt;div class=\"form-group col-md-12\"&gt;\n      &lt;%= form.label :message, \"Note for the child\" %&gt;\n      &lt;%= form.text_field :message, class: \"form-control\", :rows =&gt; \"3\" %&gt;\n      &lt;small id=\"passwordHelpBlock\" class=\"form-text text-muted\"&gt;\n        Optional\n      &lt;/small&gt;\n  &lt;/div&gt; \n  .\n  .\n&lt;% end %&gt;\n</code></pre>\n\n<p>Any ideas why my test cannot read the form element?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1569887251, "post_id": 58176380, "comment_id": 102733597, "body": "Hint: <a href=\"https://ruby-doc.org/core-2.5.1/String.html#method-i-tr\" rel=\"nofollow noreferrer\"><code>tr</code></a> and <a href=\"https://ruby-doc.org/core-2.5.1/String.html#method-i-gsub\" rel=\"nofollow noreferrer\"><code>gsub</code></a> which takes a look-up table as an argument."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1569912918, "post_id": 58176380, "comment_id": 102739092, "body": "You&#39;re not actually doing any translation in this code. Try changing <code>start_hash[&quot;input&quot;][i]</code> each iteration of the <code>while</code> loop"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 12145727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fffa2ac649ade3d008c1aa75ba6f284a?s=128&d=identicon&r=PG&f=1", "display_name": "ddybas", "link": "https://stackoverflow.com/users/12145727/ddybas"}, "edited": false, "score": 0, "creation_date": 1570108159, "post_id": 58197396, "comment_id": 102815465, "body": "Awesome. Thanks for your help, Bob - I appreciate it!"}, {"owner": {"reputation": 5580, "user_id": 490454, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/RqygM.jpg?s=128&g=1", "display_name": "BobRodes", "link": "https://stackoverflow.com/users/490454/bobrodes"}, "reply_to_user": {"reputation": 13, "user_id": 12145727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fffa2ac649ade3d008c1aa75ba6f284a?s=128&d=identicon&r=PG&f=1", "display_name": "ddybas", "link": "https://stackoverflow.com/users/12145727/ddybas"}, "edited": false, "score": 0, "creation_date": 1570520654, "post_id": 58197396, "comment_id": 102929651, "body": "@ddybas If this works for you, perhaps you can accept it as the answer."}], "tags": [], "owner": {"reputation": 5580, "user_id": 490454, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/RqygM.jpg?s=128&g=1", "display_name": "BobRodes", "link": "https://stackoverflow.com/users/490454/bobrodes"}, "is_accepted": true, "score": 1, "last_activity_date": 1570054501, "last_edit_date": 1570054501, "creation_date": 1570003067, "answer_id": 58197396, "question_id": 58176380, "link": "https://stackoverflow.com/questions/58176380/how-to-translate-map-hashes/58197396#58197396", "title": "How to translate/map hashes", "body": "<p>There are simpler ways to do what you are looking for. Since you've taken a shot at it before asking for help, I'll break it down for you. </p>\n\n<p>In particular, <code>map</code> is the easiest way to run through an array and transform its values to something else. Before I explain how to do that, you have a couple of other problems to address.</p>\n\n<p>First, if you're looking up capital letters in a hash, you need your input to be capital letters. So:</p>\n\n<pre><code>puts \"Enter a phrase to translate:\"\nphrase = gets.chomp.upcase\n</code></pre>\n\n<p>Now, <code>chars</code> is simpler than using <code>split('')</code> and does the same thing: </p>\n\n<pre><code>arr = phrase.chars\n</code></pre>\n\n<p>Next, you can use <code>map</code> to alter your array:</p>\n\n<pre><code>new_arr = arr.map do |c|\n  converter[c]\nend\n</code></pre>\n\n<p>This will go through your array one by one, setting <code>c</code> equal to each array element value (in other words, each character) in turn. Then, the result of whatever is inside your <code>do</code> loop gets plugged into an array. When <code>map</code> gets to the last element in the array being mapped, it returns the new array that it has been plugging values into.</p>\n\n<p>So, <code>c</code> becomes your hash key, and <code>converter[c]</code> is the hash value for that key. That hash value is the value that gets plugged into your new array. The result of the call to <code>map</code> will be your encrypted string in array form.</p>\n\n<p>Finally, join the result of the <code>map</code> call into a string:</p>\n\n<pre><code>new_phrase = new_arr.join\n</code></pre>\n\n<p>Now, you don't need all those lines of code and extra variables to get that result \u2014 I did that to help you look at the problem one step at a time. Once you have used <code>gets</code> to get your <code>phrase</code> variable, you can easily pull the rest of the code into a single line:</p>\n\n<pre><code>new_phrase = phrase.chars.map { |c| converter[c] }.join\n</code></pre>\n\n<p>And there you have it.</p>\n"}], "owner": {"reputation": 13, "user_id": 12145727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fffa2ac649ade3d008c1aa75ba6f284a?s=128&d=identicon&r=PG&f=1", "display_name": "ddybas", "link": "https://stackoverflow.com/users/12145727/ddybas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 58197396, "answer_count": 1, "score": 0, "last_activity_date": 1570054501, "creation_date": 1569886003, "last_edit_date": 1569887277, "question_id": 58176380, "link": "https://stackoverflow.com/questions/58176380/how-to-translate-map-hashes", "title": "How to translate/map hashes", "body": "<p>I've been given the task to create a \"secret code\" translator. It is supposed to take input from the user and then map/translate it using a \"converter\" hash. The code I currently have looks like this.</p>\n\n<pre><code>array = []\n\nconverter = {\n  \"A\" =&gt; \"Z\",\n  \"B\" =&gt; \"Y\",\n  \"C\" =&gt; \"X\",\n  \"D\" =&gt; \"W\",\n  \"E\" =&gt; \"V\",\n  \"F\" =&gt; \"U\",\n  \"G\" =&gt; \"T\",\n  \"H\" =&gt; \"S\",\n  \"I\" =&gt; \"R\",\n  \"J\" =&gt; \"Q\",\n  \"K\" =&gt; \"P\",\n  \"L\" =&gt; \"O\",\n  \"M\" =&gt; \"N\",\n  \"N\" =&gt; \"M\",\n  \"O\" =&gt; \"L\",\n  \"P\" =&gt; \"K\",\n  \"Q\" =&gt; \"J\",\n  \"R\" =&gt; \"I\",\n  \"S\" =&gt; \"H\",\n  \"T\" =&gt; \"G\",\n  \"U\" =&gt; \"F\",\n  \"V\" =&gt; \"E\",\n  \"W\" =&gt; \"D\",\n  \"X\" =&gt; \"C\",\n  \"Y\" =&gt; \"B\",\n  \"Z\" =&gt; \"A\"\n}\n\nputs \"Enter a phrase to translate\"\nstart = gets.chomp\n\narray = start.split(\"\")\n\nstart_hash = {\"input\" =&gt; array}\n\nprint start_hash[\"input\"]\n\nindex = 0\n\nwhile index &lt; start_hash[\"input\"].length\n  print start_hash[\"input\"]\n  index += 1\nend  \n</code></pre>\n\n<p>I'm not 100% sure I'm on the right path. So if I input code, the output would be something like this:</p>\n\n<pre><code>code = xlwv\n</code></pre>\n\n<p>I'm super lost and any help you guys might be able to offer would be great.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "backend"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1569885179, "post_id": 58176162, "comment_id": 102733195, "body": "What does your factories file look like?"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1569885608, "post_id": 58176162, "comment_id": 102733296, "body": "Best to put code in your question by using the <code>edit</code> button, rather than in comments. Try <code>factory :trustpilot_review, class: SomeModel do</code>. Just a guess."}, {"owner": {"reputation": 547, "user_id": 7602290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5893d7c28bef1b3652c5d9694dd11f1f?s=128&d=identicon&r=PG&f=1", "display_name": "Doolan", "link": "https://stackoverflow.com/users/7602290/doolan"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1569885771, "post_id": 58176162, "comment_id": 102733329, "body": "@jvillian updated the question"}, {"owner": {"reputation": 614, "user_id": 4389250, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-F8rJHdQAUgY/AAAAAAAAAAI/AAAAAAAAAJQ/114BANdH3Hs/photo.jpg?sz=128", "display_name": "Sebastian Delgado", "link": "https://stackoverflow.com/users/4389250/sebastian-delgado"}, "edited": false, "score": 0, "creation_date": 1569886527, "post_id": 58176162, "comment_id": 102733493, "body": "@DylanNguyen can you post the part of your gemfile where FactoryBot is included please ?"}, {"owner": {"reputation": 547, "user_id": 7602290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5893d7c28bef1b3652c5d9694dd11f1f?s=128&d=identicon&r=PG&f=1", "display_name": "Doolan", "link": "https://stackoverflow.com/users/7602290/doolan"}, "reply_to_user": {"reputation": 614, "user_id": 4389250, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-F8rJHdQAUgY/AAAAAAAAAAI/AAAAAAAAAJQ/114BANdH3Hs/photo.jpg?sz=128", "display_name": "Sebastian Delgado", "link": "https://stackoverflow.com/users/4389250/sebastian-delgado"}, "edited": false, "score": 0, "creation_date": 1569886593, "post_id": 58176162, "comment_id": 102733509, "body": "@SebastianDelgado Updated"}, {"owner": {"reputation": 614, "user_id": 4389250, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-F8rJHdQAUgY/AAAAAAAAAAI/AAAAAAAAAJQ/114BANdH3Hs/photo.jpg?sz=128", "display_name": "Sebastian Delgado", "link": "https://stackoverflow.com/users/4389250/sebastian-delgado"}, "edited": false, "score": 0, "creation_date": 1569886784, "post_id": 58176162, "comment_id": 102733531, "body": "sorry @DylanNguyen, can you also add your rails_helper or spec_helper (the file in which you included your Rspec configuration)"}], "answers": [{"tags": [], "owner": {"reputation": 11144, "user_id": 328294, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fbbd46a6f03489e1724c2dbf50c6a98c?s=128&d=identicon&r=PG", "display_name": "pixelearth", "link": "https://stackoverflow.com/users/328294/pixelearth"}, "is_accepted": false, "score": 0, "last_activity_date": 1569886901, "creation_date": 1569886901, "answer_id": 58176469, "question_id": 58176162, "link": "https://stackoverflow.com/questions/58176162/factory-not-defined-for-rspec-test-ruby/58176469#58176469", "title": "Factory not defined for RSPEC test Ruby", "body": "<p>If this is the way you are calling your factory, then you missed naming the factory:</p>\n\n<pre><code> some_review = create(title: 'Blah', body: 'Blah blah', posted_at: '2019-09-30T20:35:14Z', link: 'https://somelink.com/reviews/asdf123', display_name: 'Jane Doe')\n</code></pre>\n\n<p>Try</p>\n\n<pre><code> some_review = create(:trustpilot_review, title: 'Blah', body: 'Blah blah', posted_at: '2019-09-30T20:35:14Z', link: 'https://somelink.com/reviews/asdf123', display_name: 'Jane Doe')\n</code></pre>\n\n<p>Also it seems to me that the title, link, etc, should mostly be in the factory definition which is the point of factories.</p>\n"}, {"tags": [], "owner": {"reputation": 54, "user_id": 11378443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7309052c7afed1a17f2670858200ed09?s=128&d=identicon&r=PG&f=1", "display_name": "NensiMakawana", "link": "https://stackoverflow.com/users/11378443/nensimakawana"}, "is_accepted": false, "score": 0, "last_activity_date": 1569896851, "creation_date": 1569896851, "answer_id": 58177365, "question_id": 58176162, "link": "https://stackoverflow.com/questions/58176162/factory-not-defined-for-rspec-test-ruby/58177365#58177365", "title": "Factory not defined for RSPEC test Ruby", "body": "<p>If you want to use factory name with different name of model name. then need to add class_name like below:</p>\n\n<pre><code>FactoryBot.define do\n  factory :trustpilot_review, class: 'SomeModel' do\n\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 547, "user_id": 7602290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5893d7c28bef1b3652c5d9694dd11f1f?s=128&d=identicon&r=PG&f=1", "display_name": "Doolan", "link": "https://stackoverflow.com/users/7602290/doolan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1569917782, "creation_date": 1569883823, "last_edit_date": 1569917782, "question_id": 58176162, "link": "https://stackoverflow.com/questions/58176162/factory-not-defined-for-rspec-test-ruby", "title": "Factory not defined for RSPEC test Ruby", "body": "<p>I 'm trying to write an <code>RSpec</code> test for this service. The service below essentially just makes a call to some endpoint and then create data in the <code>postgres</code> DB. </p>\n\n<pre><code>class SomeService\n  API_URL = \"someEndPoint\"\n  def process\n    get_reviews\n  end\n\n  def get_reviews\n    conn = Faraday.new(url: \"#{APIURL}/#{ENV[\"ID\"]}/reviews?language=en&amp;stars=5\") do |faraday|\n      faraday.headers[\"apikey\"] = ENV[\"KEY\"]\n      faraday.adapter Faraday.default_adapter\n    end\n    response = conn.get\n    imported_reviews = []\n    results = JSON.parse(response.body)\n    results[\"reviews\"].each do |item|\n      review = SomeModel.create(\n        title: item[\"title\"],\n        body: item[\"text\"],\n        posted_at: item[\"createdAt\"],\n        link: \"https://somelink.com/#{item[\"id\"]}\",\n        display_name: item[\"consumer\"][\"displayName\"]\n      )\n      imported_reviews &lt;&lt; review\n    end\n    imported_reviews\n  end\nend\n</code></pre>\n\n<p>My model is just the boilerplate model shown as:</p>\n\n<pre><code>class SomeModel &lt; ApplicationRecord\nend\n\n</code></pre>\n\n<p>This is my spec file <code>some_service_spec.rb</code>. I've written plenty of tests in JEST but it's just so foreign to me in Ruby. </p>\n\n<pre><code># frozen_string_literal: true\n\nrequire 'rails_helper'\n\ndescribe TrustpilotService do\n  describe \"#process\" do\n    context 'with valid API_KEY' do\n      before :all do\n        WebMock.allow_net_connect!\n      end\n      after :all do\n        WebMock.disable_net_connect!(allow_localhost: true)\n      end\n      it \"should import reviews to database\" do\n        key = \"90e0dbc7160d4024a1f12bc24b3d1def\" #fake key#\n        some_review = create(title: 'Blah', body: 'Blah blah', posted_at: '2019-09-30T20:35:14Z', link: 'https://somelink.com/reviews/asdf123', display_name: 'Jane Doe')\n        some_review.save!\n        service = described_class.new\n        expect{ service.process }.to change{ SomeModel.count }\n      end\n    end\n  end\nend\n</code></pre>\n\n<p><em>Edit</em> added my factory for reference</p>\n\n<pre><code>FactoryBot.define do\n  factory :trustpilot_review do\n\n  end\nend\n</code></pre>\n\n<p>Gem File</p>\n\n<pre><code>group :test do\n  gem \"capybara\", \"~&gt; 3.29.0\"\n  gem 'database_cleaner'\n  gem 'factory_bot_rails'\n  gem 'rails-controller-testing'\n  gem 'rspec-rails', '~&gt; 3.8'\n  gem 'rspec-snapshot', '~&gt; 0.1.2'\n  gem \"shoulda-matchers\"\n  gem \"simplecov\", require: false\n  gem 'timecop'\n  gem \"webdrivers\"\n  gem 'webmock'\nend\n</code></pre>\n\n<p>I essentially was just trying to replicate another spec file that was testing a service that does sort of the same thing but I'm getting <code>Factory not registered:</code> as an error. I created a factory but not entirely sure what to even put in it. All of the info on RSPEC out there is kind of outdated. As you can tell, I'm pretty new to Ruby so any help is appreciated.</p>\n"}, {"tags": ["ruby", "sinatra"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1569881652, "post_id": 58175868, "comment_id": 102732455, "body": "Here&#39;s how you can find out. Try the rest of Hash&#39; API: <a href=\"https://ruby-doc.org/core-2.6.4/Hash.html\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.6.4/Hash.html</a>. If whatever is returned from <code>session</code> is not a hash, it won&#39;t conform to all of it (and that would be the difference)."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1569881815, "post_id": 58175868, "comment_id": 102732492, "body": "Besides potentially different api, the main difference is that sinatra&#39;s feature persists data across requests, scoping to user&#39;s browser. Your hash does not."}, {"owner": {"reputation": 117, "user_id": 10709454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a9d496bb8450ca5d216f12de3223951?s=128&d=identicon&r=PG&f=1", "display_name": "Denis L", "link": "https://stackoverflow.com/users/10709454/denis-l"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1569889521, "post_id": 58175868, "comment_id": 102733932, "body": "found a similar topic but there Rails <a href=\"https://stackoverflow.com/questions/33293310/is-session-a-method-or-hash-in-rails-slightly-confused\" title=\"is session a method or hash in rails slightly confused\">stackoverflow.com/questions/33293310/&hellip;</a>"}, {"owner": {"reputation": 117, "user_id": 10709454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a9d496bb8450ca5d216f12de3223951?s=128&d=identicon&r=PG&f=1", "display_name": "Denis L", "link": "https://stackoverflow.com/users/10709454/denis-l"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1569889539, "post_id": 58175868, "comment_id": 102733935, "body": "All session stores use a cookie to store a unique ID for each session (you must use a cookie, Rails will not allow you to pass the session ID in the URL as this is less secure). This cookie is essentially a Ruby hash, hence why you can store hashed data inside it:  session[:your_hash] = &quot;TEST&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 1202, "user_id": 147204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e593ac63e5f25649b701dc25f69d1b7?s=128&d=identicon&r=PG", "display_name": "luis.parravicini", "link": "https://stackoverflow.com/users/147204/luis-parravicini"}, "is_accepted": true, "score": 2, "last_activity_date": 1569923371, "creation_date": 1569923371, "answer_id": 58182216, "question_id": 58175868, "link": "https://stackoverflow.com/questions/58175868/sessions-in-sinatra-and-creating-a-hash-are-similar/58182216#58182216", "title": "sessions in sinatra and creating a hash are similar?", "body": "<p>I'm not sure whether you are asking about the square brackets or you are interested in Sinatra's implmentation of <code>session</code>.</p>\n\n<p>In case you are asking about the square brackets: they are nothing more than a method, which you can define in your own classes. Read more here: <a href=\"https://rickcarlino.com/2015/03/26/square_brackets-html.html\" rel=\"nofollow noreferrer\">https://rickcarlino.com/2015/03/26/square_brackets-html.html</a></p>\n\n<p>A small example extracted from the above url:</p>\n\n<pre><code>class FakeCollection\n  attr_reader :items\n\n  def initialize\n    @items = {}\n  end\n\n  def [](index)\n    @items[index] || \"Not Found\"\n  end\n\n  def []=(index, value)\n    @items[index] = value\n  end\nend\n\nexample = FakeCollection.new\n\nexample[:x] = \"Hello, world\"\n\nexample[:x]\n# =&gt; \"Hello, world\"\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 10709454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a9d496bb8450ca5d216f12de3223951?s=128&d=identicon&r=PG&f=1", "display_name": "Denis L", "link": "https://stackoverflow.com/users/10709454/denis-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 58182216, "answer_count": 1, "score": 1, "last_activity_date": 1569923371, "creation_date": 1569881337, "question_id": 58175868, "link": "https://stackoverflow.com/questions/58175868/sessions-in-sinatra-and-creating-a-hash-are-similar", "title": "sessions in sinatra and creating a hash are similar?", "body": "<p>I create a session, I have such code</p>\n\n<pre><code># sinatra.rb\nenable :sessions\nget '/foo' do\n  session[:message] = 'Hello World!'\n  redirect to('/bar')\nend\n\nget '/bar' do\n  session[:message]   # =&gt; 'Hello World!'\nend\n</code></pre>\n\n<p>very similar to</p>\n\n<pre><code># test.rb\nsession = Hash.new\nsession[:message] = 'Hello World!'\nputs session\n</code></pre>\n\n<p>so what is the difference?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "elasticsearch", "searchkick"], "comments": [{"owner": {"reputation": 6316, "user_id": 1184717, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7f8710cd5754a79df5dc5cd3d5308da2?s=128&d=identicon&r=PG", "display_name": "Mr.", "link": "https://stackoverflow.com/users/1184717/mr"}, "edited": false, "score": 0, "creation_date": 1569920580, "post_id": 58175154, "comment_id": 102742784, "body": "it might be wizer to (1) post a project related question in the project itself, and (2) include a snippet of the implementation which you are <i>struggle</i> with"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12145301, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDXn0EUCQlsVRIbCakSL4lKP-eg5hHh6-TxK18d=k-s128", "display_name": "Hernan Damico", "link": "https://stackoverflow.com/users/12145301/hernan-damico"}, "is_accepted": false, "score": 0, "last_activity_date": 1570021166, "creation_date": 1570021166, "answer_id": 58202043, "question_id": 58175154, "link": "https://stackoverflow.com/questions/58175154/how-to-search-in-a-hash-column/58202043#58202043", "title": "How to search in a Hash column", "body": "<p>I make it work by searching with <code>Car.search( where: { 'parts.wheels.lights.type' =&gt; 'led' } )</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 12145301, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDXn0EUCQlsVRIbCakSL4lKP-eg5hHh6-TxK18d=k-s128", "display_name": "Hernan Damico", "link": "https://stackoverflow.com/users/12145301/hernan-damico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570021166, "creation_date": 1569876722, "last_edit_date": 1569920426, "question_id": 58175154, "link": "https://stackoverflow.com/questions/58175154/how-to-search-in-a-hash-column", "title": "How to search in a Hash column", "body": "<p>I'm working with <a href=\"https://github.com/ankane/searchkick\" rel=\"nofollow noreferrer\">SearchKick rubygem</a>, and i'm having struggle on search within a Hash column.\nHere my example:</p>\n\n<pre><code>car:\n  {\n    parts:\n      wheels: {\n        rims: \"\"\n      },\n      lights: {\n        type: \"\"\n      }\n  }\n</code></pre>\n\n<p>I need to search in the model Car which ones has lights type \"led\".</p>\n"}, {"tags": ["html", "regex", "ruby"], "comments": [{"owner": {"reputation": 79, "user_id": 7612389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4761189c6ef2579a0effa7f38043867?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksandr Podyachev", "link": "https://stackoverflow.com/users/7612389/aleksandr-podyachev"}, "reply_to_user": {"reputation": 7878, "user_id": 630780, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fskbD.png?s=128&g=1", "display_name": "Carl Markham", "link": "https://stackoverflow.com/users/630780/carl-markham"}, "edited": false, "score": 0, "creation_date": 1569876207, "post_id": 58174922, "comment_id": 102730799, "body": "what is the most elegant way to do this? I am making a Ruby Web Server that runs Ruby code like PHP"}], "answers": [{"comments": [{"owner": {"reputation": 7878, "user_id": 630780, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fskbD.png?s=128&g=1", "display_name": "Carl Markham", "link": "https://stackoverflow.com/users/630780/carl-markham"}, "edited": false, "score": 0, "creation_date": 1569877092, "post_id": 58175197, "comment_id": 102731102, "body": "OP isn&#39;t asking for a template language, they are attempting to do this themselves."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 7878, "user_id": 630780, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fskbD.png?s=128&g=1", "display_name": "Carl Markham", "link": "https://stackoverflow.com/users/630780/carl-markham"}, "edited": false, "score": 1, "creation_date": 1569877170, "post_id": 58175197, "comment_id": 102731128, "body": "In the comment he asks about the most elegant way to do that, it&#39;s not explicitly stated that he wants to build his own template lang."}, {"owner": {"reputation": 7878, "user_id": 630780, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fskbD.png?s=128&g=1", "display_name": "Carl Markham", "link": "https://stackoverflow.com/users/630780/carl-markham"}, "edited": false, "score": 0, "creation_date": 1569877318, "post_id": 58175197, "comment_id": 102731166, "body": "Yeah, I suppose. Kind of hard to know what OP wants, especially given this sentence &quot;I am making a Ruby Web Server that runs Ruby code like PHP&quot;"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 7878, "user_id": 630780, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fskbD.png?s=128&g=1", "display_name": "Carl Markham", "link": "https://stackoverflow.com/users/630780/carl-markham"}, "edited": false, "score": 0, "creation_date": 1569877382, "post_id": 58175197, "comment_id": 102731192, "body": "That sentence let me think that OP just needs a solution, not that they want to do everything from scratch"}, {"owner": {"reputation": 79, "user_id": 7612389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4761189c6ef2579a0effa7f38043867?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksandr Podyachev", "link": "https://stackoverflow.com/users/7612389/aleksandr-podyachev"}, "edited": false, "score": 0, "creation_date": 1569882446, "post_id": 58175197, "comment_id": 102732660, "body": "how do I print that with it bounded?"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1569912103, "post_id": 58175197, "comment_id": 102738729, "body": "prefix <code>ERB.new(template).result(binding)</code> with <code>puts</code>"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 3, "last_activity_date": 1569877037, "creation_date": 1569877037, "answer_id": 58175197, "question_id": 58174922, "link": "https://stackoverflow.com/questions/58174922/interpolating-a-html-file-in-ruby/58175197#58175197", "title": "Interpolating a HTML file in Ruby", "body": "<p>The most elegant (and default) way to do that is to use a template language. Ruby comes with ERb that would solve you problem:</p>\n\n<p>template.erb:</p>\n\n<pre><code>&lt;html&gt;\n&lt;body&gt;\n&lt;h1&gt;&lt;%=@greeting%&gt;&lt;/h1&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<pre><code>require 'erb'\n\ntemplate = File.read('path/to/template.erb')\n@greeting = \"Hola, mundo\"\nERB.new(template).result(binding)\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 7612389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4761189c6ef2579a0effa7f38043867?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksandr Podyachev", "link": "https://stackoverflow.com/users/7612389/aleksandr-podyachev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569877490, "creation_date": 1569875429, "last_edit_date": 1569877490, "question_id": 58174922, "link": "https://stackoverflow.com/questions/58174922/interpolating-a-html-file-in-ruby", "title": "Interpolating a HTML file in Ruby", "body": "<p>I am making a Ruby program that reads a HTML file with a \"#{}\" tag. here is the content of the HTML page:</p>\n\n<pre><code>&lt;html&gt;\n&lt;body&gt;\n&lt;h1&gt;#{\"Hello, World!\"}&lt;/h1&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>and here is my Ruby code that I am using:</p>\n\n<pre><code>file = File.open(\"Path/to/file\", \"r\")\ncontent = file.read\nputs content.match(/./om)\n</code></pre>\n\n<p>how do I change the code to interpolate the content so that the <code>#{}</code> in the webpage is replaced with the appropriate value?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rubygems", "factory-bot"], "comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 1, "creation_date": 1569875740, "post_id": 58174917, "comment_id": 102730637, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/42070978/rails-not-working-for-new-project-showingerror-superclass-mismatch-for-class\">Rails Not working for new project. ShowingError &quot; superclass mismatch for class Cipher (TypeError)&quot;</a>"}, {"owner": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "edited": false, "score": 1, "creation_date": 1569878206, "post_id": 58174917, "comment_id": 102731479, "body": "Do you need both <code>factory_bot</code> and <code>factory_bot_rails</code>?"}], "owner": {"reputation": 535, "user_id": 10565289, "user_type": "registered", "profile_image": "https://graph.facebook.com/1744372365672405/picture?type=large", "display_name": "Richard Jarram", "link": "https://stackoverflow.com/users/10565289/richard-jarram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1569880441, "creation_date": 1569875388, "last_edit_date": 1569880441, "question_id": 58174917, "link": "https://stackoverflow.com/questions/58174917/adding-factory-bot-to-rails-test-suite-breaks-it", "title": "Adding Factory Bot To Rails Test Suite Breaks It", "body": "<p><strong>EDIT: This problem has been solved. <a href=\"https://stackoverflow.com/questions/42070978/rails-not-working-for-new-project-showingerror-superclass-mismatch-for-class\">The thread that solved my problem can be found here</a>. Thanks to @mrzasa for pointing this out.</strong></p>\n\n<p>As soon as I set up Factory Bot in this project and run the <code>rspec spec</code> command, my test suite fails. But it was running perfectly fine before that.</p>\n\n<p>I've set up Factory Bot before. I know what I'm doing in this regard. This isn't a question about config or initialisation.</p>\n\n<p>More background info:</p>\n\n<p>Here are the gems of interest for :test, :dev environments:</p>\n\n<pre><code>factory_bot 5.1.0, 5.0.2\nfactory_bot_rails 5.1.0, 5.0.2\nrspec-support 3.8.2\nrspec-rails 3.8.2\nrspec-mocks 3.8.1\nrspec-core 3.8.2\nrspec-expecrtations 3.8.4\nrspec-activemodel-mocks 1.1.0\n</code></pre>\n\n<p>Now the error messages:</p>\n\n<p>When I specify Factory_Bot v. 5.1.0 &amp; Factory_Bot_rails v. 5.1.0</p>\n\n<pre><code>TypeError: Superclass mismatch for class Cipher \n/Users/richardjarram/.rbenv/versions/2.4.4/lib/ruby/2.4.0/openssl/cipher.rb:64\nconstant OpenSSL::Cipher::Cipher is deprecated\n</code></pre>\n\n<p><strong>EDIT: I removed duplicate open_ssl versions in the gemset. RSpec is now working again. <a href=\"https://stackoverflow.com/questions/42070978/rails-not-working-for-new-project-showingerror-superclass-mismatch-for-class\">Thread that solved my problem</a> and thanks to @mrzasa for pointing this out.</strong></p>\n\n<p>When I specify Factory_Bot v 5.0.2 &amp; Factory_Bot_Rails v.5.0.2</p>\n\n<pre><code>/Users/richardjarram/.rbenv/versions/2.4.4/lib/ruby/gems/2.4.0/gems/rspec-core-3.8.2/lib\n/rspec/core/reporter.rb:229:in `require': cannot load such file -- rspec/core/profiler (LoadError)\n</code></pre>\n\n<p>I actually dug into the core rspec files in my gems and I've noticed that on l.229 the Profile.new class is being called but there is no require in the file. This entire situation is incredibly bizarre.</p>\n\n<p><strong>EDIT: Once the open_ssl issue was solved, FactoryBot is working on the latest version (5.1.0). The older version (5.0.2) however, is imcompatible with my current project.</strong></p>\n\n<p>Any help will be greatly appreciated! Thanks!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 5, "creation_date": 1569875830, "post_id": 58174877, "comment_id": 102730671, "body": "Remove the comma at the end of <code>attr_accessor :health, :damage, :armor,</code> and all will be well."}, {"owner": {"reputation": 21, "user_id": 12145161, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3HHQ64l8Cr0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfGb-5P9tl6_2WaUepj0_uw4qs4Pw/photo.jpg?sz=128", "display_name": "FireBurn256", "link": "https://stackoverflow.com/users/12145161/fireburn256"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1569876261, "post_id": 58174877, "comment_id": 102730814, "body": "My gosh, thanks! It worked!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1569876863, "post_id": 58174877, "comment_id": 102731035, "body": "It appears that the comma I asked you to remove is telling Ruby that the <code>attr_accessor</code> method has one or more arguments that continue on the following line. Why the definition of <code>initialize</code> doesn&#39;t raise an exception is a mystery to me. However, <code>Battler.instance_method(:initialize).owner #=&gt; Battler; Battler.instance_method(:initialize).parameters #=&gt; []</code> tells us that the method <code>initialize</code> was created with no arguments, which is consistent with your error message. Very odd."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1569877212, "post_id": 58174877, "comment_id": 102731144, "body": "The same result obtains if the first line were <code>attr_accessor :health, :damage, :armor, def initialize(health, damage, armor)</code>, followed by <code>@health = health</code>, and so on."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1569877231, "post_id": 58174877, "comment_id": 102731151, "body": "Why should it raise an exception? It may not make sense here but it&#39;s perfectly legal code. Otherwise &#39;fake keywords&#39; like <code>private</code> (as in <code>private def foo</code>) wouldn&#39;t work."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 1, "creation_date": 1569877808, "post_id": 58174877, "comment_id": 102731351, "body": "The value of <code>def initialize; end</code> is <code>:initialize</code> so OP basically wrote <code>attr_accessor :initialize</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 2, "creation_date": 1569878041, "post_id": 58174877, "comment_id": 102731427, "body": "@cremno, great observation! Please post as an answer, elaborating a bit as I&#39;m not sure all readers will understand your point. (The correct method <code>:initialize</code> was created [with three arguments], but was then immediately overwritten by the accessor for <code>@initialize</code>.) As an aside, I can&#39;t understand why someone has voted to close this question. It&#39;s a great question!"}], "answers": [{"comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1569911552, "post_id": 58176158, "comment_id": 102738529, "body": "Check: <code>:initialize=</code> is defined, not <code>:initialize</code>. Try call <code>Battler.new.methods</code>"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1569932869, "post_id": 58176158, "comment_id": 102749124, "body": "I agree you should never ignore warnings, they are there for a reason!"}, {"owner": {"reputation": 21, "user_id": 12145161, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3HHQ64l8Cr0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfGb-5P9tl6_2WaUepj0_uw4qs4Pw/photo.jpg?sz=128", "display_name": "FireBurn256", "link": "https://stackoverflow.com/users/12145161/fireburn256"}, "edited": false, "score": 0, "creation_date": 1569950163, "post_id": 58176158, "comment_id": 102758642, "body": "Thank you very much for such detailed answer! As for that extra comma, well, there should have been other variables, but I decided to check the code with not much of other code, just so the basic things work... And it seems I have missed one last comma when deleting them. So no magic or high-techy stuff here."}], "tags": [], "owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "is_accepted": false, "score": 4, "last_activity_date": 1569883775, "creation_date": 1569883775, "answer_id": 58176158, "question_id": 58174877, "link": "https://stackoverflow.com/questions/58174877/why-does-ruby-compiler-count-expected-number-of-arguments-in-this-case-as-zero/58176158#58176158", "title": "Why does Ruby compiler count expected number of arguments in this case as zero?", "body": "<p>As you may know <code>attr_accessor</code> accepts a list of symbols (or strings) and for each one two methods are defined: a so-called a setter (e.g. <code>health=</code>) and getter (<code>health</code>). A list (not an actual type btw.) is one or several expressions separated by a comma, so in your case Ruby expected another expression after <code>:armor</code> because you put a comma thereafter.</p>\n\n<p>(If the trailing comma was intentional, tell us. Some programmers use and recommend them in certain cases (and depending on the language). Though it would make any answer a bit more complicated since Ruby is actually fine with them - just not in this case.)</p>\n\n<p>However that's only one part of your bug's explanation. One of Ruby's most basic features as a programming language is that nearly everything has a value (expressions). For example, try something like <code>x = if ...</code> in other languages! It often won't work as many languages have if-statements, not if-expressions.</p>\n\n<p>In Ruby method definitions are also expressions: defining a method via <code>def</code> (<code>def foo; end</code>) used to return <code>nil</code>. Since Ruby 2.1 method definitions return the method's name (<code>:foo</code>). Now the return value of def-expressions may not seem to be very useful to you and it isn't in many cases but you probably agree the method name (<code>:foo</code>) is certainly more useful than <code>nil</code>.</p>\n\n<p>The primary use case for this are methods like <code>private</code>, <code>public</code>, <code>method_function</code>, etc. which aren't keywords but are used like one (their defining feature is for calls the parentheses are omitted):</p>\n\n<pre><code>private def foo\nend\n# before 2.1\nprivate  # from now on every method in this class context will be private\ndef foo\nend\n# or\ndef foo\nend\nprivate :foo  # only foo will be private but we have to repeat the name\n</code></pre>\n\n<p>Our friend <code>attr_accessor</code> is also such a keyword-like method but the value of <code>def</code> expressions is more important here. Remember it's the name of a method as a symbol. You wrote (simplified):</p>\n\n<pre><code>attr_accessor :health, :damage, :armor,\ndef initialize(health, damage, armor)\nend\n\n# which after the method was defined becomes\nattr_accessor :health, :damage, :armor, :initialize\n</code></pre>\n\n<p>To make it a bit more clear - without <code>attr_accessor</code> your code might look like this:</p>\n\n<pre><code>class Battler\n  def initialize(health, damage, armor)  # takes 3 required arguments\n  end\n  def health\n    @health\n  end\n  def health=(v)\n    @health = v\n  end\n  # damage, armor\n  def initialize  # takes no arguments\n    @initialize\n  end\n  def initialize=(v)\n    @initialize = v\n  end\nend\n</code></pre>\n\n<p>You see you're redefining <code>Battler#initialize</code> and your new one doesn't take arguments because getters usually don't.</p>\n\n<p>Redefinitions aren't treated as errors since they can be intentional however Ruby can emit a warning for you. Run <code>ruby -w test.rb</code> on the command line and it outputs:</p>\n\n<blockquote>\n<pre><code>test.rb:15: warning: assigned but unused variable - knight\ntest.rb:16: warning: assigned but unused variable - goblin\ntest.rb:2: warning: method redefined; discarding old initialize\ntest.rb:3: warning: previous definition of initialize was here\nTraceback (most recent call last):\n         1: from test.rb:15:in `&lt;main&gt;'\ntest.rb:15:in `new': wrong number of arguments (given 3, expected 0) (ArgumentError)\n</code></pre>\n</blockquote>\n\n<p>Here you can see that in line 2 the <code>initialize</code> method which was originally defined on line 3 is redefined. If you're confused why line 3 comes before line 2 here, then remember that the method definition is part of the list passed to <code>attr_accessor</code> so the def-expr has to be evaluated before the call.</p>\n"}], "owner": {"reputation": 21, "user_id": 12145161, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3HHQ64l8Cr0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfGb-5P9tl6_2WaUepj0_uw4qs4Pw/photo.jpg?sz=128", "display_name": "FireBurn256", "link": "https://stackoverflow.com/users/12145161/fireburn256"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1569883775, "creation_date": 1569875193, "last_edit_date": 1569876117, "question_id": 58174877, "link": "https://stackoverflow.com/questions/58174877/why-does-ruby-compiler-count-expected-number-of-arguments-in-this-case-as-zero", "title": "Why does Ruby compiler count expected number of arguments in this case as zero?", "body": "<p>I am quite new to the Ruby, and I ran into problem with defining an object of a class. If I understand correctly, def initialize should ask for three calues, but the code compiles with an error that three is given, but it expected zero values.</p>\n\n<p>I thought the mistake there would be in attr_accessor, but a quick test showed that this is not a case.</p>\n\n<p>The ruby version is 2.6.4</p>\n\n<blockquote>\n  <p>test.rb:16:in `new': wrong number of arguments (given 3, expected 0) (ArgumentError)</p>\n</blockquote>\n\n<pre><code>class Battler\n  attr_accessor :health, :damage, :armor,\n  def initialize(health, damage, armor)\n    @health = health\n    @damage = damage\n    @armor = armor\n  end\n\n  def able?\n    return @health &gt; 0\n  end\n\nend\n\nknight = Battler.new(1000, 10, 3)\ngoblin = Battler.new(20, 6, 1)\n</code></pre>\n\n<p>The problem starts with a</p>\n\n<pre><code>knight = Battler.new(1000, 10, 3)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "create-react-app"], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 12145137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c056ec6ddbfb791d29efc55f5a496cfc?s=128&d=identicon&r=PG&f=1", "display_name": "Renak", "link": "https://stackoverflow.com/users/12145137/renak"}, "edited": false, "score": 0, "creation_date": 1569875917, "post_id": 58174945, "comment_id": 102730696, "body": "I&#39;ll give that a try, but my real issue is why does create function return two different types?"}, {"owner": {"reputation": 39, "user_id": 12145137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c056ec6ddbfb791d29efc55f5a496cfc?s=128&d=identicon&r=PG&f=1", "display_name": "Renak", "link": "https://stackoverflow.com/users/12145137/renak"}, "edited": false, "score": 0, "creation_date": 1569876283, "post_id": 58174945, "comment_id": 102730822, "body": "The issue was in the show method.  I set @message using Message.where.... Thank you so much!!"}, {"owner": {"reputation": 26, "user_id": 10985051, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QE4iQsy-saw/AAAAAAAAAAI/AAAAAAAAEgg/AFWfuu8_syA/photo.jpg?sz=128", "display_name": "D Boy", "link": "https://stackoverflow.com/users/10985051/d-boy"}, "reply_to_user": {"reputation": 39, "user_id": 12145137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c056ec6ddbfb791d29efc55f5a496cfc?s=128&d=identicon&r=PG&f=1", "display_name": "Renak", "link": "https://stackoverflow.com/users/12145137/renak"}, "edited": false, "score": 0, "creation_date": 1569876406, "post_id": 58174945, "comment_id": 102730868, "body": "No prob, Anytime!! :)"}], "tags": [], "owner": {"reputation": 26, "user_id": 10985051, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QE4iQsy-saw/AAAAAAAAAAI/AAAAAAAAEgg/AFWfuu8_syA/photo.jpg?sz=128", "display_name": "D Boy", "link": "https://stackoverflow.com/users/10985051/d-boy"}, "is_accepted": false, "score": 0, "last_activity_date": 1569875905, "last_edit_date": 1569875905, "creation_date": 1569875537, "answer_id": 58174945, "question_id": 58174830, "link": "https://stackoverflow.com/questions/58174830/create-function-in-ruby-is-returning-activerecordrelation-object-rather-than-t/58174945#58174945", "title": "Create function in ruby is returning ActiveRecord::Relation object rather than the actual record", "body": "<p><code>@message</code> seems to be a collection of some sort. You should be able to call <code>&lt;%= @message.first.full_name %&gt;</code> or you can either iterate over it and do the following:</p>\n\n<pre><code>&lt;% @message.each do |msg| %&gt;\n  &lt;%= msg.full_name %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>OR you can change your code to do the redirect as follows:\n<code>redirect_to order_path(@order, message_id: @message.id)</code></p>\n\n<p>in the order show action you will then have:</p>\n\n<p><code>@order = Order.find(params[:id])</code></p>\n\n<p><code>@message = Message.find(params[:message_id])</code></p>\n\n<p>With this approach, you'll then have a <code>@order</code> object and an <code>@message</code> object available in your view.</p>\n\n<p>I hope this helps.</p>\n"}], "owner": {"reputation": 39, "user_id": 12145137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c056ec6ddbfb791d29efc55f5a496cfc?s=128&d=identicon&r=PG&f=1", "display_name": "Renak", "link": "https://stackoverflow.com/users/12145137/renak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569875905, "creation_date": 1569874981, "question_id": 58174830, "link": "https://stackoverflow.com/questions/58174830/create-function-in-ruby-is-returning-activerecordrelation-object-rather-than-t", "title": "Create function in ruby is returning ActiveRecord::Relation object rather than the actual record", "body": "<p>Im creating two objects and then passing them to the view with the redirect_to function.<br>\nThe Order object is fine and usable in the view, but the Message object is of the type ActiveRecord::Relation and any call to message.variable get a noMethodError.  Heres the code</p>\n\n<p>Controller code:</p>\n\n<pre><code>      @order = Order.create(order_params.merge(\n        child: child, \n        address: prevOrderInfo.address,\n        zipcode: prevOrderInfo.zipcode,\n        user_facing_id: SecureRandom.uuid[0..7]))\n\n      @message = Message.create(message_params.merge(:order_id =&gt; @order.id))\n\n      redirect_to order_path(@order, @message)\n</code></pre>\n\n<p>View inspection returns </p>\n\n<pre><code>#order object\n--- '#&lt;Order id: 8, user_facing_id: \"d1791380\", product_id: 1, child_id: 2, shipping_name:\n  \"Marge Simpson\", address: \"742 Evergreen Terrace\", zipcode: \"58008\", paid: true,\n  created_at: \"2019-09-30 19:29:01\", updated_at: \"2019-09-30 19:29:01\"&gt;'\n#message object\n--- '#&lt;ActiveRecord::Relation [#&lt;Message id: 6, full_name: \"Homer \", email: \"homer@gmial.com\",\n  message: \"This is a message\", order_id: 8, created_at: \"2019-09-30 19:29:01\", updated_at:\n  \"2019-09-30 19:29:01\"&gt;]&gt;'\n</code></pre>\n\n<p>html.erb uses @order just fine.\n<code>&lt;%= @order.child.full_name %&gt;</code>\nputs \"Maggie Simpson\" into the web page</p>\n\n<p>But any usage of @message like <code>&lt;%= @message.full_name %&gt;</code>\ngets a noMethodError for full_name</p>\n\n<p>Not sure what Im doing, but why would the create call for the Order table return one type and another for the Message table?</p>\n"}, {"tags": ["ruby", "delayed-job"], "answers": [{"tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 1, "last_activity_date": 1569867984, "creation_date": 1569867984, "answer_id": 58173322, "question_id": 58173261, "link": "https://stackoverflow.com/questions/58173261/delayed-job-seeking-method/58173322#58173322", "title": "Delayed Job seeking method", "body": "<p><code>Foo::Bar.do_thing</code> calls <code>do_thing</code> on the module itself. You've defined this method as <code>def do_thing</code> that makes it an instance method. It means that to call <code>do_thing</code> you need to have an instance of that class that has this module mixed in (1) or you need to change this method to a module method (2).</p>\n\n<p>Code for (1)</p>\n\n<pre><code>class A\n  include Foo::Bar\nend\n\nmodule Foo\n  module Bar\n    def do_thing_as_delayed_job(my_id, my_option_array)\n      Delayed::Job.enqueue A.new.do_thing(my_id, my_option_array)\n    end\n    def do_thing(my_id, my_option_array)\n      Rails.logger.info(\"Yay, I got here!\")\n    end\n  end\nend\n</code></pre>\n\n<p>Code for (2):</p>\n\n<pre><code>\nmodule Foo\n  module Bar\n    def do_thing_as_delayed_job(my_id, my_option_array)\n      Delayed::Job.enqueue A.new.do_thing(my_id, my_option_array)\n    end\n    def self.do_thing(my_id, my_option_array)\n      Rails.logger.info(\"Yay, I got here!\")\n    end\n  end\nend\n</code></pre>\n\n<p>Note that in both cases <code>module</code> is lowecase.</p>\n"}], "owner": {"reputation": 1343, "user_id": 984415, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/rMvNp.gif?s=128&g=1", "display_name": "lilHar", "link": "https://stackoverflow.com/users/984415/lilhar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 58173322, "answer_count": 1, "score": 0, "last_activity_date": 1569868022, "creation_date": 1569867732, "last_edit_date": 1569868022, "question_id": 58173261, "link": "https://stackoverflow.com/questions/58173261/delayed-job-seeking-method", "title": "Delayed Job seeking method", "body": "<p>I have a module in a module in Ruby, something akin to:</p>\n\n<pre><code>Module Foo\n  Module Bar\n    def do_thing_as_delayed_job(my_id, my_option_array)\n      Delayed::Job.enqueue Foo::Bar.do_thing(my_id, my_option_array)\n    end\n    def do_thing(my_id, my_option_array)\n      Rails.logger.info(\"Yay, I got here!\")\n    end\n  end\nend\n</code></pre>\n\n<p>I try to fire of the delayed job starter. However, when I run <code>do_thing_as_delayed_job</code>, I get this:</p>\n\n<blockquote>\n  <p>NoMethodError: undefined method `do_thing' for Foo::Bar:Module</p>\n</blockquote>\n\n<p>I don't know why it's searching in 'Module', how to make it just run the method I want. I'm still fairly new at Ruby. Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "comments"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1569867225, "post_id": 58172933, "comment_id": 102727124, "body": "please provide the link to the actual gem documentation you&#39;re referring to"}, {"owner": {"reputation": 21, "user_id": 12144409, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157308922690767/picture?type=large", "display_name": "Amir Mourali", "link": "https://stackoverflow.com/users/12144409/amir-mourali"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1569867350, "post_id": 58172933, "comment_id": 102727191, "body": "Sure, here you go: <a href=\"https://github.com/lml/commontator\" rel=\"nofollow noreferrer\">github.com/lml/commontator</a>"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1569867641, "post_id": 58172933, "comment_id": 102727319, "body": "See instructions, looks like you&#39;re missing a line from your model <a href=\"https://github.com/lml/commontator#usage\" rel=\"nofollow noreferrer\">github.com/lml/commontator#usage</a>"}, {"owner": {"reputation": 21, "user_id": 12144409, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157308922690767/picture?type=large", "display_name": "Amir Mourali", "link": "https://stackoverflow.com/users/12144409/amir-mourali"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1569869430, "post_id": 58172933, "comment_id": 102728111, "body": "No, I put the lines in the models that were required in the instructions."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1569871001, "post_id": 58172933, "comment_id": 102728718, "body": "what about router.rb ?"}, {"owner": {"reputation": 21, "user_id": 12144409, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157308922690767/picture?type=large", "display_name": "Amir Mourali", "link": "https://stackoverflow.com/users/12144409/amir-mourali"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1569873724, "post_id": 58172933, "comment_id": 102729866, "body": "I did literally everything that the instructions said to do line by line in each part of the app necessary.  That&#39;s why I&#39;m so surprised that it does not work.  I can post other parts of my code if it&#39;ll help?"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1569948696, "post_id": 58172933, "comment_id": 102758136, "body": "Try posting the full backtrace errors in your question. Not sure if that will help us but worth a shot.  You also may want to <a href=\"https://github.com/lml/commontator/issues/new\" rel=\"nofollow noreferrer\">open an issue</a> where the maintainers of the gem might be of more help."}], "owner": {"reputation": 21, "user_id": 12144409, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157308922690767/picture?type=large", "display_name": "Amir Mourali", "link": "https://stackoverflow.com/users/12144409/amir-mourali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1569866173, "creation_date": 1569866173, "question_id": 58172933, "link": "https://stackoverflow.com/questions/58172933/i-am-getting-many-errors-while-trying-to-install-the-commontator-rails-gem", "title": "I am getting many errors while trying to install the Commontator Rails gem.`", "body": "<p>I have been trying to install the Rails gem Commentator all day on an art project I am working on.  The instructions seem simple enough, but nothing has been working right, even as I followed the instructions.  Currently, after I click on this link I put onto my art show page:</p>\n\n<pre><code>&lt;%= commontator_thread(@art) %&gt;\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>undefined method `art_url' for #&lt;ActionDispatch::Routing::RoutesProxy:0x00007ffde6ecd588&gt;\n</code></pre>\n\n<p>I put the commontator thread in my art show page.  Here is my arts controller:</p>\n\n<pre><code>class ArtsController &lt; ApplicationController\n  def index\n    @artist = Artist.find(params[:artist_id])\n    @arts = Art.all\n  end\n\n\n  def new\n    @artist = Artist.find(params[:artist_id])\n    @art = Art.new\n  end\n\n  def create\n    @art = Art.new(art_params)\n    @artist = Artist.find(params[:artist_id])\n    @art.artist = @artist\n    if @art.save\n      redirect_to @art.artist\n    else\n      render \"new\"\n    end\n  end\n\n  def show\n    @artist = Artist.find(params[:artist_id])\n    @art = Art.find(params[:id])\n    commontator_thread_show(@art)\n  end\n\n  def update\n    @art = Art.find(params[:id])\n    if @art.update(art_params)\n      redirect_to @art\n    else\n      render 'edit'\n    end\n  end\n\n  def destroy\n    @art = Art.find(params[:id])\n    @art.destroy\n    redirect_to arts\n  end\n\n  def edit\n    @art = Art.find(params[:id])\n  end\n\n  private\n\n  def art_params\n    params.require(:art).permit(:title, :description, :completion_date, :inspiration, :available, :price_cents, :tags_as_string, :tag_list)\n  end\nend\n</code></pre>\n\n<p>This is what shows up in my errors page on my browser while I am on local host:</p>\n\n<pre><code>actionpack (5.2.3) lib/action_dispatch/routing/routes_proxy.rb\n\n              @helpers.#{method}(*args)\n            end\n          RUBY\n          public_send(method, *args)\n        else\n          super\n        end\n      end\n      # Keeps the part of the script name provided by the global\n      # context via ENV[\"SCRIPT_NAME\"], which `mount` doesn't know\n</code></pre>\n\n<p>I was getting many other errors earlier today, speaking about the comment controller not having a create method or show method, but the gem instructions did not specify anything about creating a comment controller at all, so I am very lost.  I am new to programming, so any help would be much appreciated.  Thank you. </p>\n"}, {"tags": ["ruby", "hash"], "answers": [{"tags": [], "owner": {"reputation": 1202, "user_id": 147204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e593ac63e5f25649b701dc25f69d1b7?s=128&d=identicon&r=PG", "display_name": "luis.parravicini", "link": "https://stackoverflow.com/users/147204/luis-parravicini"}, "is_accepted": true, "score": 4, "last_activity_date": 1569869252, "last_edit_date": 1569869252, "creation_date": 1569865083, "answer_id": 58172710, "question_id": 58172635, "link": "https://stackoverflow.com/questions/58172635/rails-nested-hash-with-default-values/58172710#58172710", "title": "rails nested hash with default values", "body": "<p>The doc for <a href=\"https://ruby-doc.org/core-2.5.1/Hash.html#method-c-new\" rel=\"nofollow noreferrer\">Hash::new</a> explains the three ways of initializing a hash and, in your case, you are using an object in the Hash constructor:</p>\n\n<blockquote>\n  <p>If obj is specified, this single object will be used for all default values.</p>\n</blockquote>\n\n<p>If you want that each missing key creates it's own object, create the hash with a block, like this:</p>\n\n<pre><code>h = Hash.new { |h,k| h[k] = { count: 0, rating: 0 } }\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>2.6.3 :012 &gt; h\n =&gt; {} \n2.6.3 :013 &gt; h['a'][:count] = 5\n =&gt; 5 \n2.6.3 :015 &gt; h\n =&gt; {\"a\"=&gt;{:count=&gt;5, :rating=&gt;0}} \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 2, "last_activity_date": 1569868491, "last_edit_date": 1569868491, "creation_date": 1569868088, "answer_id": 58173339, "question_id": 58172635, "link": "https://stackoverflow.com/questions/58172635/rails-nested-hash-with-default-values/58173339#58173339", "title": "rails nested hash with default values", "body": "<p>You can find this behaviour documented in the <a href=\"https://ruby-doc.org/core-2.6.4/Hash.html#method-c-new\" rel=\"nofollow noreferrer\"><code>Hash::new</code></a> documentation:</p>\n\n<blockquote>\n  <h2>new \u2192 new_hash</h2>\n  \n  <h2>new(obj) \u2192 new_hash</h2>\n  \n  <h2>new {|hash, key| block } \u2192 new_hash</h2>\n  \n  <p>Returns a new, empty hash. If this hash is subsequently accessed by a\n  key that doesn't correspond to a hash entry, the value returned\n  depends on the style of new used to create the hash. In the first\n  form, the access returns <code>nil</code>. <strong>If <em>obj</em> is specified, this single\n  object will be used for all <em>default values</em>.</strong> If a block is\n  specified, it will be called with the hash object and the key, and\n  should return the default value. It is the block's responsibility to\n  store the value in the hash if required.</p>\n  \n  <pre class=\"lang-rb prettyprint-override\"><code>h = Hash.new(\"Go Fish\")\nh[\"a\"] = 100\nh[\"b\"] = 200\nh[\"a\"]           #=&gt; 100\nh[\"c\"]           #=&gt; \"Go Fish\"\n# The following alters the single default object\nh[\"c\"].upcase!   #=&gt; \"GO FISH\"\nh[\"d\"]           #=&gt; \"GO FISH\"\nh.keys           #=&gt; [\"a\", \"b\"]\n\n# While this creates a new default object each time\nh = Hash.new { |hash, key| hash[key] = \"Go Fish: #{key}\" }\nh[\"c\"]           #=&gt; \"Go Fish: c\"\nh[\"c\"].upcase!   #=&gt; \"GO FISH: C\"\nh[\"d\"]           #=&gt; \"Go Fish: d\"\nh.keys           #=&gt; [\"c\", \"d\"]\n</code></pre>\n</blockquote>\n\n<p>In your example <code>h[\"a\"]</code> and <code>h[\"b\"]</code> both return the exact same default hash object. Meaning that if you change <code>h[\"a\"]</code>, <code>h[\"b\"]</code> is also changed. Since you never set <code>h[\"a\"]</code> or <code>h[\"b\"]</code> the hash appears empty.</p>\n\n<p>To assign a new hash on access you'll have to use the block syntax as <a href=\"https://stackoverflow.com/a/58172710/3982562\">shown by luis.parravicini</a>.</p>\n"}], "owner": {"reputation": 431, "user_id": 1676959, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/L1rcL.png?s=128&g=1", "display_name": "kernification", "link": "https://stackoverflow.com/users/1676959/kernification"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 1, "closed_date": 1599050582, "accepted_answer_id": 58172710, "answer_count": 2, "score": 1, "last_activity_date": 1569869252, "creation_date": 1569864755, "last_edit_date": 1569868972, "question_id": 58172635, "link": "https://stackoverflow.com/questions/58172635/rails-nested-hash-with-default-values", "closed_reason": "Duplicate", "title": "rails nested hash with default values", "body": "<p>I'd like to create a new Hash with nested default values. I thought it should be like</p>\n\n<pre><code>h = Hash.new(count: 0, rating: 0)\n</code></pre>\n\n<p>So I can do stuff like</p>\n\n<pre><code>h['a'][:count] += 1\nh['a'][:rating] += 1\n</code></pre>\n\n<p>and so on. But when I try it in the console it looks like this:</p>\n\n<pre><code>2.3.1 :046 &gt; h = Hash.new(count: 0, rating: 0)\n =&gt; {} \n2.3.1 :047 &gt; h[\"a\"]\n =&gt; {:count=&gt;0, :rating=&gt;0} \n2.3.1 :048 &gt; h[\"a\"][:count]\n =&gt; 0 \n2.3.1 :049 &gt; h[\"a\"][:count] += 1\n =&gt; 1 \n2.3.1 :050 &gt; h[\"b\"][:count] += 1\n =&gt; 2\n2.3.1 :051 &gt; h\n =&gt; {}\n</code></pre>\n\n<p><strong>So my questions are:</strong></p>\n\n<ul>\n<li>Why is <code>h[\"b\"][:count] += 1</code> returning 2 and not 1?</li>\n<li>why is h empty?</li>\n</ul>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "oracle", "heroku", "firewall"], "answers": [{"tags": [], "owner": {"reputation": 695, "user_id": 1750527, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/99578a4cce7515940f90ebda95d6342b?s=128&d=identicon&r=PG", "display_name": "Crystian Le&#227;o", "link": "https://stackoverflow.com/users/1750527/crystian-le%c3%a3o"}, "is_accepted": true, "score": 0, "last_activity_date": 1569861595, "creation_date": 1569861595, "answer_id": 58171993, "question_id": 58171992, "link": "https://stackoverflow.com/questions/58171992/problem-connecting-to-oracle-db-inside-heroku-through-a-static-ip/58171993#58171993", "title": "Problem connecting to Oracle db inside heroku through a static IP", "body": "<p>After a couple of days trying, and a big help from the QuotaGuard guys, i solved it:</p>\n\n<p>QuotaGuard works by overriding DNS lookup so my server connections goes to my local machine, where a process will redirect all traffic to my remote server, that will connect through the right IP.</p>\n\n<p>But it seems like oracle drivers don't see this DNS changes, so it will make all the requests to the final server, who blocks my connection. All i did was point my database connection info to 127.0.0.1, so the <code>qgtunnel</code> app could send it to the final server.</p>\n\n<p>It's working like a charm now.</p>\n\n<p>So, my final setup was like:</p>\n\n<p><code>.qgtunnel</code> file</p>\n\n<pre><code>[qgtunnel.0]\naccept = \"127.0.0.1:3333\"\nconnect = \"HOST_ADDRESS:3333\"\nencrypted = false\ntransparent = true\n</code></pre>\n\n<p><code>config/oracle_db.yml</code> file</p>\n\n<pre><code>default: &amp;default\n  encoding: utf8\n  adapter: oracle_enhanced\n  host: 127.0.0.1\n  port: 3333\n  database: database\n  username: &lt;%= ENV['DB_USER'] %&gt;\n  password: &lt;%= ENV['DB_PASS'] %&gt;\n\ndevelopment:\n  &lt;&lt;: *default\n\ntest:\n  &lt;&lt;: *default\n\nproduction:\n  &lt;&lt;: *default\n</code></pre>\n\n<p><code>Procfile</code> file</p>\n\n<pre><code>web: bin/qgtunnel bundle exec puma -C config/puma.rb\n</code></pre>\n"}], "owner": {"reputation": 695, "user_id": 1750527, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/99578a4cce7515940f90ebda95d6342b?s=128&d=identicon&r=PG", "display_name": "Crystian Le&#227;o", "link": "https://stackoverflow.com/users/1750527/crystian-le%c3%a3o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 58171993, "answer_count": 1, "score": 0, "last_activity_date": 1569861595, "creation_date": 1569861595, "question_id": 58171992, "link": "https://stackoverflow.com/questions/58171992/problem-connecting-to-oracle-db-inside-heroku-through-a-static-ip", "title": "Problem connecting to Oracle db inside heroku through a static IP", "body": "<p>I'm writing a Rails application that needs to connect to an Oracle database inside a company firewall. Thus, i need to connect to their VPN or at least use a static IP address to make all my connections.</p>\n\n<p>I've tried <a href=\"https://elements.heroku.com/addons/proximo\" rel=\"nofollow noreferrer\">Proximo</a> and <a href=\"https://elements.heroku.com/addons/quotaguardstatic\" rel=\"nofollow noreferrer\">QuotaGuard</a> without success. I make all required configs, but no matter what i do, the firewall says i'm trying to connect through my actual IP, instead of the static one.</p>\n"}, {"tags": ["regex", "ruby", "regex-greedy"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1569861450, "post_id": 58171231, "comment_id": 102724882, "body": "You may be thinking that the first part of <code>&#47;,.+?=&quot;&quot;,?&#47;</code> means &quot;match a comma followed by one or more characters other than an equals sign&quot;, but you can&#39;t stop there because the regex requires that the equals sign must be immediately followed by two double quotes (and then optionally a comma). Recall what is meant by a non-greedy match: <a href=\"https://ruby-doc.org/core-2.6.3/Regexp.html\" rel=\"nofollow noreferrer\">&quot;By contrast, lazy matching makes the minimal amount of matches necessary for overall success.&quot;</a>. I think you may have overlooked &quot;necessary for overall success&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 82895, "user_id": 372239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2twLb.jpg?s=128&g=1", "display_name": "Toto", "link": "https://stackoverflow.com/users/372239/toto"}, "is_accepted": true, "score": 2, "last_activity_date": 1569860103, "creation_date": 1569860103, "answer_id": 58171637, "question_id": 58171231, "link": "https://stackoverflow.com/questions/58171231/ruby-non-greedy-modifier-did-not-apply/58171637#58171637", "title": "Ruby non-greedy modifier did not apply?", "body": "<p>Regex matches from left to right. Your regex <code>,.+?=\"\",?</code> matches the first comma in the string <code>a,b=\"cde\",f=\"\",g=\"hi\",j=\"\"</code>, the one between <code>a</code> and <code>b</code>. Then it tries to find <code>=\"\"</code> that exists after the <code>,g</code> so you get the actual result.</p>\n\n<p>What you want is: <code>,[^=]+?=\"\",?</code> that matches 1 or more any character that is not an equal sign before <code>=\"\"</code> and you'll get <code>a,b=\"cde\",g=\"hi\"</code> as result.</p>\n"}], "owner": {"reputation": 705, "user_id": 92471, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f745bcd0438c7d019e743658e7089c22?s=128&d=identicon&r=PG", "display_name": "Alex F", "link": "https://stackoverflow.com/users/92471/alex-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 58171637, "answer_count": 1, "score": 1, "last_activity_date": 1569860103, "creation_date": 1569858362, "last_edit_date": 1569858917, "question_id": 58171231, "link": "https://stackoverflow.com/questions/58171231/ruby-non-greedy-modifier-did-not-apply", "title": "Ruby non-greedy modifier did not apply?", "body": "<p>I have a regexp with a non-greedy modifier which does not seem to work. I have tried so many variations of the regexp and various other ways I could think of, without success, that I am losing my head</p>\n\n<p>I want to remove all the empty strings embedded in the string <code>s</code> below. With my regexp I was expecting to remove all the things that matched something=\"\"</p>\n\n<pre><code>s = 'a,b=\"cde\",f=\"\",g=\"hi\",j=\"\"'\n\nputs s; puts s.gsub( /,.+?=\"\",?/ , \",\" ).chomp(','); nil\n</code></pre>\n\n<p>Expected:</p>\n\n<pre><code>a,b=\"cde\",g=\"hi\"\n</code></pre>\n\n<p>What I get:</p>\n\n<pre><code>a,g=\"hi\"\n</code></pre>\n\n<p>Why isn't the <code>.+?</code> non greedy in the <code>gsub</code> regexp below?</p>\n\n<p>It works if I constrain the <code>.</code> to a set of characters <code>[\\w\\d_-]</code>, but that forces me to do assumptions:</p>\n\n<pre><code>puts s; puts s.gsub( /,[\\w\\d_-]+?=\"\"/ , \"\" ).chomp(','); nil\n\n# outputs:\na,b=\"cde\",f=\"\",g=\"hi\",j=\"\"\na,g=\"hi\"\n</code></pre>\n\n<p>It also works if I do some sort of negative lookup like:</p>\n\n<pre><code>puts s; puts s.gsub( /,.+?=\"\",?/ , \",\" ).chomp(','); nil\n\n# outputs:\na,b=\"cde\",f=\"\",g=\"hi\",j=\"\"\na,g=\"hi\"\n</code></pre>\n\n<p>But still I do not understand why it did not work in the first case.</p>\n"}, {"tags": ["ruby", "rspec", "tags"], "comments": [{"owner": {"reputation": 553, "user_id": 4742218, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-0wBoIjPuArI/AAAAAAAAAAI/AAAAAAAAAF8/gmwCNq5bAX8/photo.jpg?sz=128", "display_name": "noname", "link": "https://stackoverflow.com/users/4742218/noname"}, "edited": false, "score": 1, "creation_date": 1569857292, "post_id": 58170879, "comment_id": 102723049, "body": "you can use<code>--exlude-pattern</code> flag and exclude file, also to exclude just tag you can use <code>~</code>  like: <code>rspec --exlude-pattern &#39;**&#47;filename.rb&#39; --tag ~tag</code>"}, {"owner": {"reputation": 2044, "user_id": 820501, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/SDYBl.jpg?s=128&g=1", "display_name": "ShockwaveNN", "link": "https://stackoverflow.com/users/820501/shockwavenn"}, "reply_to_user": {"reputation": 553, "user_id": 4742218, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-0wBoIjPuArI/AAAAAAAAAAI/AAAAAAAAAF8/gmwCNq5bAX8/photo.jpg?sz=128", "display_name": "noname", "link": "https://stackoverflow.com/users/4742218/noname"}, "edited": false, "score": 0, "creation_date": 1569857508, "post_id": 58170879, "comment_id": 102723148, "body": "@noname I don&#39;t think it&#39;s right solution. This will not run any test. Like <code>rspec --tag mytag</code> will not run any test"}, {"owner": {"reputation": 553, "user_id": 4742218, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-0wBoIjPuArI/AAAAAAAAAAI/AAAAAAAAAF8/gmwCNq5bAX8/photo.jpg?sz=128", "display_name": "noname", "link": "https://stackoverflow.com/users/4742218/noname"}, "edited": false, "score": 1, "creation_date": 1569857575, "post_id": 58170879, "comment_id": 102723184, "body": "yeah I just miss understand question and I edited my comment"}, {"owner": {"reputation": 2044, "user_id": 820501, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/SDYBl.jpg?s=128&g=1", "display_name": "ShockwaveNN", "link": "https://stackoverflow.com/users/820501/shockwavenn"}, "reply_to_user": {"reputation": 553, "user_id": 4742218, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-0wBoIjPuArI/AAAAAAAAAAI/AAAAAAAAAF8/gmwCNq5bAX8/photo.jpg?sz=128", "display_name": "noname", "link": "https://stackoverflow.com/users/4742218/noname"}, "edited": false, "score": 0, "creation_date": 1569857871, "post_id": 58170879, "comment_id": 102723335, "body": "Hm, not exactly that I want, but you gave me idea, that I can solve my problem by only including files I want to run by <code>--pattern</code> and just filter tests inside those files by tag"}, {"owner": {"reputation": 553, "user_id": 4742218, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-0wBoIjPuArI/AAAAAAAAAAI/AAAAAAAAAF8/gmwCNq5bAX8/photo.jpg?sz=128", "display_name": "noname", "link": "https://stackoverflow.com/users/4742218/noname"}, "edited": false, "score": 0, "creation_date": 1569857926, "post_id": 58170879, "comment_id": 102723356, "body": "I am glad I could help somehow :)"}], "answers": [{"tags": [], "owner": {"reputation": 2044, "user_id": 820501, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/SDYBl.jpg?s=128&g=1", "display_name": "ShockwaveNN", "link": "https://stackoverflow.com/users/820501/shockwavenn"}, "is_accepted": true, "score": 0, "last_activity_date": 1598885877, "creation_date": 1598885877, "answer_id": 63673209, "question_id": 58170879, "link": "https://stackoverflow.com/questions/58170879/rspec-filter-with-tag-do-not-run-code-in-describe/63673209#63673209", "title": "rspec filter with tag - do not run code in `describe`", "body": "<p>My final solution is not elegant, but get job done effectively (thanks @noname for pointing me for direction of solution)</p>\n<p>I create a new rake task, that filter files with specified tag and after that create subprocess to run only filtered specs (and like rspec <code>--fail-fast</code> fails on first failure (as I need it)</p>\n<p>like this</p>\n<pre><code>  files_with_tag = `grep -Ril spec/ -e ':mytag'`.split(&quot;\\n&quot;)\n  files_with_tag.each do |current_file|\n    result = `rspec #{current_file} --tag mytag`\n    puts(result)\n    exit unless result.include?('0 failures')\n  end\n</code></pre>\n"}], "owner": {"reputation": 2044, "user_id": 820501, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/SDYBl.jpg?s=128&g=1", "display_name": "ShockwaveNN", "link": "https://stackoverflow.com/users/820501/shockwavenn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 63673209, "answer_count": 1, "score": 0, "last_activity_date": 1598885877, "creation_date": 1569856878, "question_id": 58170879, "link": "https://stackoverflow.com/questions/58170879/rspec-filter-with-tag-do-not-run-code-in-describe", "title": "rspec filter with tag - do not run code in `describe`", "body": "<p>I got a rspec test that look something like this:</p>\n\n<pre><code>require 'rspec'\n\ndescribe 'describe', :mytag do\n  puts(\"inside describe\")\n\n  it 'test', :mytag do\n    puts 'test'\n  end\nend\n</code></pre>\n\n<p>I want to be able to skip this whole spec file (and part inside <code>describe</code>) if I specify some other tag like this:</p>\n\n<p><code>rspec test_spec.rb --tag other</code></p>\n\n<p>But code inisde <code>describe</code> is executed and output <code>inside describe</code></p>\n\n<p>Is there any way to filter this code out?</p>\n\n<p>I know I can change my code to something like this:</p>\n\n<pre><code>require 'rspec'\n\ndescribe 'describe', :mytag do\n  before(:all) do\n     puts(\"inside describe\")\n  end\n\n  it 'test', :mytag do\n    puts 'test'\n  end\nend\n</code></pre>\n\n<p>But this require a lot changes in a lot of files, so I'm in search of simpler solution.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2282, "user_id": 10853463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kg5ZZ.jpg?s=128&g=1", "display_name": "red_menace", "link": "https://stackoverflow.com/users/10853463/red-menace"}, "edited": false, "score": 0, "creation_date": 1569856035, "post_id": 58170052, "comment_id": 102722413, "body": "Are you talking about something like <code>Hash#key()</code>or <code>Hash#keys</code> ?"}, {"owner": {"reputation": 570, "user_id": 2048680, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh3.googleusercontent.com/-ZNA8X0AjzPk/AAAAAAAAAAI/AAAAAAAAABg/H5jHKT7CRdk/photo.jpg?sz=128", "display_name": "Conor", "link": "https://stackoverflow.com/users/2048680/conor"}, "edited": false, "score": 1, "creation_date": 1569856484, "post_id": 58170052, "comment_id": 102722619, "body": "in the example your <code>response_assigned</code> is a ruby hash and not a JSON object -- which would cause a type error when using <code>JSON.parse</code>. I would double check the type your actual code is giving for <code>response_assigned</code>."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8669153, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Gr2e4pXGP98/AAAAAAAAAAI/AAAAAAAAABY/vqtlCh7RVe8/photo.jpg?sz=128", "display_name": "reddy malathi", "link": "https://stackoverflow.com/users/8669153/reddy-malathi"}, "edited": false, "score": 0, "creation_date": 1569904359, "post_id": 58170882, "comment_id": 102736494, "body": "Thanks for your response and prompt explanation.... i have an api which gives me the result like this after creating a poll in the ui  ``` {     &quot;poll_id&quot;: 1194  } ```  I am planning to only the poll_id and store it in array in opt.... can you pls help me on how can i do that"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 3, "user_id": 8669153, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Gr2e4pXGP98/AAAAAAAAAAI/AAAAAAAAABY/vqtlCh7RVe8/photo.jpg?sz=128", "display_name": "reddy malathi", "link": "https://stackoverflow.com/users/8669153/reddy-malathi"}, "edited": false, "score": 0, "creation_date": 1569911425, "post_id": 58170882, "comment_id": 102738471, "body": "Is there something missing from my explanation? If the above code does not work, can you please show the error?"}, {"owner": {"reputation": 3, "user_id": 8669153, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Gr2e4pXGP98/AAAAAAAAAAI/AAAAAAAAABY/vqtlCh7RVe8/photo.jpg?sz=128", "display_name": "reddy malathi", "link": "https://stackoverflow.com/users/8669153/reddy-malathi"}, "edited": false, "score": 0, "creation_date": 1569948629, "post_id": 58170882, "comment_id": 102758108, "body": "It worked Tom .... thanks for ur support ...i tried in the same way which u told ,,,"}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 1, "last_activity_date": 1569856891, "creation_date": 1569856891, "answer_id": 58170882, "question_id": 58170052, "link": "https://stackoverflow.com/questions/58170052/is-there-a-method-to-get-the-value-of-key-in-ruby-and-store-it-in-a-variable/58170882#58170882", "title": "Is there a method to get the value of key in ruby and store it in a variable", "body": "<p><code>response_assigned</code> is already a <code>Hash</code>. You can access the values via <code>:[]</code>; there's no need to use <code>JSON.parse</code> here. (This method is used for converting JSON <strong>string</strong>s into hashes, like the object you already have!)</p>\n\n<p>Also, a more subtle note: There are two distinct types of object in ruby: <a href=\"https://ruby-doc.org/core/String.html\" rel=\"nofollow noreferrer\"><code>String</code></a> and <a href=\"https://ruby-doc.org/core/Symbol.html\" rel=\"nofollow noreferrer\"><code>Symbol</code></a>.</p>\n\n<p>By defining your object like this: <code>{\"poll_id\": 1194}</code>, you have made the hash key a <strong>symbol</strong>. It's equivalent to writing this: <code>{poll_id: 1194}</code>, or this: <code>{:poll_id =&gt; 1194}</code>.</p>\n\n<p>Therefore, in order to access the value, you can use:</p>\n\n<pre><code>opt &lt;&lt; response_assigned[:poll_id]\n</code></pre>\n\n<hr>\n\n<p>If you want to make the hash key a <code>String</code> instead of a <code>Symbol</code>, you could write:</p>\n\n<pre><code>response_assigned = {\n  \"poll_id\" =&gt; 1194\n}\n\nopt &lt;&lt; response_assigned[\"poll_id\"]\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8669153, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Gr2e4pXGP98/AAAAAAAAAAI/AAAAAAAAABY/vqtlCh7RVe8/photo.jpg?sz=128", "display_name": "reddy malathi", "link": "https://stackoverflow.com/users/8669153/reddy-malathi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 58170882, "answer_count": 1, "score": 0, "last_activity_date": 1569856891, "creation_date": 1569853934, "last_edit_date": 1569854232, "question_id": 58170052, "link": "https://stackoverflow.com/questions/58170052/is-there-a-method-to-get-the-value-of-key-in-ruby-and-store-it-in-a-variable", "title": "Is there a method to get the value of key in ruby and store it in a variable", "body": "<p>I am trying to get the value of a key and trying to store it in an array</p>\n\n<p>Below is the sample code,</p>\n\n<pre><code>require 'rubygems'\n\nrequire 'json'\n\nopt=[]\n\n\nresponse_assigned = {\n    \"poll_id\": 1194\n\n}\n\nopt &lt;&lt; [JSON.parse(response_assigned)['poll_id']]\n</code></pre>\n\n<p>By using ruby, I have tried to convert <code>poll_id</code> variable into string,</p>\n\n<pre><code>opt &lt;&lt; [JSON.parse(response_assigned)['poll_id'].to_s,channel_id]\n</code></pre>\n\n<p>but it is throwing same error.</p>\n\n<blockquote>\n  <p>'convert_encoding': {:poll_id=>1194} is not like a string (TypeError)</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 12073430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fb0f79b8f70dded0248ae8014a4431?s=128&d=identicon&r=PG&f=1", "display_name": "Maksim", "link": "https://stackoverflow.com/users/12073430/maksim"}, "edited": false, "score": 0, "creation_date": 1569922900, "post_id": 58170552, "comment_id": 102743977, "body": "After I created these classes,I&#39;ve tried to run  Event.joins(:items)/Event.join(:situations) it doesn&#39;t work too (issue <code>Can&#39;t join &#39;Situation&#39; to association named &#39;events&#39;; perhaps you misspelled it?</code>) As I wrote before I need to get data from items table and from event table and have one big row with data which I can display, that is why I need join I think"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 29, "user_id": 12073430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fb0f79b8f70dded0248ae8014a4431?s=128&d=identicon&r=PG&f=1", "display_name": "Maksim", "link": "https://stackoverflow.com/users/12073430/maksim"}, "edited": false, "score": 0, "creation_date": 1569924307, "post_id": 58170552, "comment_id": 102744757, "body": "@Maksim I have updated answer little and know this, you can call as <code>Event.join(:first_for_situations)</code> as associations defined."}, {"owner": {"reputation": 29, "user_id": 12073430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fb0f79b8f70dded0248ae8014a4431?s=128&d=identicon&r=PG&f=1", "display_name": "Maksim", "link": "https://stackoverflow.com/users/12073430/maksim"}, "edited": false, "score": 0, "creation_date": 1569925166, "post_id": 58170552, "comment_id": 102745169, "body": "I&#39;m getting another issue when used <code>Event.join(:first_for_situations)</code>, could you please have a look on this issue <code>LINE 1: ...&quot;.&quot;event_id&quot; = &quot;events&quot;.&quot;id&quot; INNER JOIN &quot;items&quot; ON &quot;items&quot;.&quot;fi...                                                              ^ : SELECT  &quot;events&quot;.* FROM &quot;events&quot; INNER JOIN &quot;items&quot; &quot;items_events_join&quot; ON &quot;items_events_join&quot;.&quot;event_id&quot; = &quot;events&quot;.&quot;id&quot; INNER JOIN &quot;items&quot; ON &quot;items&quot;.&quot;first_item_id&quot; = &quot;items_events_join&quot;.&quot;id&quot; LIMIT $1</code>"}, {"owner": {"reputation": 29, "user_id": 12073430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fb0f79b8f70dded0248ae8014a4431?s=128&d=identicon&r=PG&f=1", "display_name": "Maksim", "link": "https://stackoverflow.com/users/12073430/maksim"}, "edited": false, "score": 0, "creation_date": 1569925248, "post_id": 58170552, "comment_id": 102745216, "body": "I think this issue came because Item has no field first_item_id, because it shouldn&#39;t be on the table &#39;Item&#39;"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 29, "user_id": 12073430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fb0f79b8f70dded0248ae8014a4431?s=128&d=identicon&r=PG&f=1", "display_name": "Maksim", "link": "https://stackoverflow.com/users/12073430/maksim"}, "edited": false, "score": 0, "creation_date": 1569926615, "post_id": 58170552, "comment_id": 102745988, "body": "@Maksim I guess so, create database schema as you need and then create such kind of associations"}, {"owner": {"reputation": 29, "user_id": 12073430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fb0f79b8f70dded0248ae8014a4431?s=128&d=identicon&r=PG&f=1", "display_name": "Maksim", "link": "https://stackoverflow.com/users/12073430/maksim"}, "edited": false, "score": 0, "creation_date": 1569927440, "post_id": 58170552, "comment_id": 102746400, "body": "I have already created tables in my database, I don&#39;t need any more fields there, just want to be done with my task"}], "tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 1, "last_activity_date": 1569924163, "last_edit_date": 1569924163, "creation_date": 1569855713, "answer_id": 58170552, "question_id": 58169736, "link": "https://stackoverflow.com/questions/58169736/multiple-foreign-keys-in-ruby-on-rails/58170552#58170552", "title": "Multiple foreign keys in ruby on rails", "body": "<p>When we talk about association, we have to define association for individual keys,</p>\n\n<pre><code>class Event &lt; ApplicationRecord\n    has_many :items\n    has_many :first_for_situations, through: :items\n    has_many :second_for_situations, through: :items\n    has_many :third_for_situations, through: :items\nend\n\nclass Item &lt; ApplicationRecord\n    belongs_to :event\n    has_many :first_for_situations, class_name: 'Item', foreign_key: :first_item_id\n    has_many :second_for_situations, class_name: 'Item', foreign_key: :second_item_id\n    has_many :third_for_situations, class_name: 'Item', foreign_key: :third_item_id\nend\n\nclass Situation &lt; ApplicationRecord\n    belongs_to :event\n    belongs_to :first_item, class_name: 'Item', foreign_key: :first_item_id\n    belongs_to :second_item, class_name: 'Item', foreign_key: :second_item_id\n    belongs_to :third_item, class_name: 'Item', foreign_key: :third_item_id\nend\n</code></pre>\n\n<p>If you want to get <code>ActiveRecord::Relation</code> object for multiple keys, use class method as below,</p>\n\n<pre><code> class Item &lt; ApplicationRecord\n   belongs_to :event\n\n   def situations\n     where(first_item_id: id, second_item_id: id, third_item_id: id)\n   end\n end\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 12073430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fb0f79b8f70dded0248ae8014a4431?s=128&d=identicon&r=PG&f=1", "display_name": "Maksim", "link": "https://stackoverflow.com/users/12073430/maksim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1569924163, "creation_date": 1569852840, "last_edit_date": 1569918584, "question_id": 58169736, "link": "https://stackoverflow.com/questions/58169736/multiple-foreign-keys-in-ruby-on-rails", "title": "Multiple foreign keys in ruby on rails", "body": "<p>I have a problem while creating models. I have 3 models in my Rails application.</p>\n\n<p>The first model is Event.</p>\n\n<pre><code>class Event &lt; ApplicationRecord\n    has_many :items\n    has_many :situations\nend\n</code></pre>\n\n<p>Event model contains fields: <code>id, date, team</code>. </p>\n\n<p>The second class is Items</p>\n\n<pre><code>class Item &lt; ApplicationRecord\n    belongs_to :event\n    has_many :situations\nend\n</code></pre>\n\n<p>Item model contains fields: <code>event_id, ratio, kind, attr_1, attr_3</code> with data. </p>\n\n<p>The third class is Situations</p>\n\n<pre><code>class Situations &lt; ApplicationRecord\n    belongs_to :event\n    has_many :items\nend\n</code></pre>\n\n<p>Situation model contains fields: <code>event_id, first_item_id, second_item_id, third_item_id, percent</code></p>\n\n<p>I need to create 3 foreign keys (<code>first_item_id, second_item_id, third_item_id</code>), which will refer to primary key in Item model. </p>\n\n<p>I have tried this code and then typed <code>Item.joins(:situations)</code> and so it doesn't work: </p>\n\n<pre><code> class Item &lt; ApplicationRecord\n   belongs_to :event\n   has_many :situations, class_name: 'Situation', foreign_key: ['first_item_id', \n    'second_item_id', 'third_item_id']\n end\n</code></pre>\n\n<h1>Update</h1>\n\n<p>For example:</p>\n\n<pre><code>  Situations table:\n\n id event_id first_item_id second_item_id third_item_id percent\n  1   1001      2323           2324           2325         3%\n  2   1001      2323           2525           2525\n\n\n  Event table:\n\n  id        date                  team\n 1001   02/10/2019        'Chicago - New York'\n\n\n Item table:\n\n  id    event_id  ratio    kind   attr_1   att_3\n  2323    1001     2.3     test     12       15\n  2323    1001     7.7     next     52       55\n  2324    1001     8.7     nsext     5       18\n  2325    1001     1.1     ext      4        58   \n</code></pre>\n\n<p>and I want to get 2 big rows with data with all fields from event, item and situations table after executing Item.joins(:situations).</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "associations"], "answers": [{"comments": [{"owner": {"reputation": 599, "user_id": 11544569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xEqDN.jpg?s=128&g=1", "display_name": "RomanOks", "link": "https://stackoverflow.com/users/11544569/romanoks"}, "edited": false, "score": 0, "creation_date": 1569847977, "post_id": 58168316, "comment_id": 102717886, "body": "Yes, this is what I need! I could not understand where to set <code>joins</code>. Thanks."}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 1, "last_activity_date": 1569847866, "creation_date": 1569847866, "answer_id": 58168316, "question_id": 58168258, "link": "https://stackoverflow.com/questions/58168258/rails-associations-sql/58168316#58168316", "title": "Rails associations SQL", "body": "<p>You should simply use <code>joins</code>, which by default performs SQL <code>INNER JOIN</code>, which is exactly what you need in this case:</p>\n\n<pre><code>User.where.not(location: nil).joins(:skill_list)\n</code></pre>\n"}], "owner": {"reputation": 599, "user_id": 11544569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xEqDN.jpg?s=128&g=1", "display_name": "RomanOks", "link": "https://stackoverflow.com/users/11544569/romanoks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 58168316, "answer_count": 1, "score": 1, "last_activity_date": 1569847866, "creation_date": 1569847667, "question_id": 58168258, "link": "https://stackoverflow.com/questions/58168258/rails-associations-sql", "title": "Rails associations SQL", "body": "<p>I have a User model and a SkillList model.</p>\n\n<p>Association - <code>has_many / belongs_to</code>.</p>\n\n<p><em>So I can find the skill list entry for one user:</em></p>\n\n<pre><code>current_user.skill_list\n</code></pre>\n\n<p>The user table has fields: <code>id</code>, <code>name</code> and <code>location</code>.</p>\n\n<p>I need to query the database to find all users who have location and skills.</p>\n\n<p><em>I can find all users with an existing location (not including current user):</em></p>\n\n<pre><code>users = User.where.not(location: nil, id: current_user.id)\n</code></pre>\n\n<p><strong>But how to exclude users without skills?</strong></p>\n"}, {"tags": ["ruby", "fastlane"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1569853639, "post_id": 58166660, "comment_id": 102721164, "body": "Just at a guess (I&#39;m unfamiliar with <code>fastlane</code>), maybe you&#39;re using the wrong type of <a href=\"https://docs.fastlane.tools/advanced/Fastfile/#load-own-actions-from-external-folder\" rel=\"nofollow noreferrer\">import</a>?"}, {"owner": {"reputation": 4956, "user_id": 71877, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/69c9a8022174b2dbaf129eb629eecf88?s=128&d=identicon&r=PG", "display_name": "Lyndsey Ferguson", "link": "https://stackoverflow.com/users/71877/lyndsey-ferguson"}, "edited": false, "score": 0, "creation_date": 1569979608, "post_id": 58166660, "comment_id": 102767205, "body": "We do something very similar, how are you calling fastlane on the <code>Fastfile</code>? Is the <code>Fastfile</code> inside of a <code>fastlane</code> directory and you are calling it via <code>fastlane set_enterprise_app_id</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7530188"}, "edited": false, "score": 0, "creation_date": 1570174541, "post_id": 58166660, "comment_id": 102837615, "body": "My Fastfile in fastlane directory. And fastfiles folder there too"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7530188"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1570176176, "post_id": 58166660, "comment_id": 102838298, "body": "@TomLord I don&#39;t know I use standard import in Fastfile. You can offer me any solution?"}], "owner": {"user_type": "does_not_exist", "display_name": "user7530188"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1569841622, "creation_date": 1569841622, "question_id": 58166660, "link": "https://stackoverflow.com/questions/58166660/undefined-method-lane-for-mainobject", "title": "undefined method `lane&#39; for main:Object", "body": "<p>I have 2 files:\n<br>Fastfile\n<br>group.rb\n<br>Fastfile<br></p>\n\n<pre><code># frozen_string_literal: true\n\nfastlane_version '2.116.0'\n\ndefault_platform :ios\n\nimport \"fastfiles/group.rb\"\n\nplatform :ios do\nlane :pr_build do\n    set_enterprise_app_id\n  end\nend\n</code></pre>\n\n<p>group.rb</p>\n\n<pre><code>lane :set_enterprise_app_id do\n  update_app_ids(\n    app_id: BUNDLE_ID_ENTERPRISE,\n    shared_extension_id: BUNDLE_ID_ENTERPRISE_SHAREEXTENSION\n  )\n  update_app_group(APP_GROUP_ENTERPRISE)\nend\n</code></pre>\n\n<p>But get error on my CI:\n[!] undefined method `lane' for main:Object</p>\n\n<p>I tried next in group.rb</p>\n\n<pre><code>platform :iOS do\n    lane :set_enterprise_app_id do\n      update_app_ids(\n      app_id: BUNDLE_ID_ENTERPRISE,\n      shared_extension_id: BUNDLE_ID_ENTERPRISE_SHAREEXTENSION\n    )\n    update_app_group(APP_GROUP_ENTERPRISE)\n    end\nend\n</code></pre>\n\n<p>But get next error:\n[!] undefined method `platform' for main:Object</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4359, "user_id": 1039488, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/kfIW7.jpg?s=128&g=1", "display_name": "guyaloni", "link": "https://stackoverflow.com/users/1039488/guyaloni"}, "edited": false, "score": 0, "creation_date": 1569841595, "post_id": 58166598, "comment_id": 102714814, "body": "Try <code>!article.link.nil?</code>"}, {"owner": {"reputation": 4359, "user_id": 1039488, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/kfIW7.jpg?s=128&g=1", "display_name": "guyaloni", "link": "https://stackoverflow.com/users/1039488/guyaloni"}, "edited": false, "score": 0, "creation_date": 1569841641, "post_id": 58166598, "comment_id": 102714844, "body": "You can also use <code>.blank?</code>, which covers more cases"}, {"owner": {"reputation": 4359, "user_id": 1039488, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/kfIW7.jpg?s=128&g=1", "display_name": "guyaloni", "link": "https://stackoverflow.com/users/1039488/guyaloni"}, "edited": false, "score": 0, "creation_date": 1569841732, "post_id": 58166598, "comment_id": 102714890, "body": "Can you please tell what does <code>article.link</code> value is?"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1569841865, "post_id": 58166598, "comment_id": 102714963, "body": "Why are you using backticks for strings? Replace them with single or double quotes, see if that works."}, {"owner": {"reputation": 862, "user_id": 1600046, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/5rxUl.jpg?s=128&g=1", "display_name": "Vibol", "link": "https://stackoverflow.com/users/1600046/vibol"}, "edited": false, "score": 0, "creation_date": 1569841899, "post_id": 58166598, "comment_id": 102714982, "body": "Can you make sure you use single or double quote around the <a href=\"https://www.youtube.com\" rel=\"nofollow noreferrer\">youtube.com</a>, I think it&#39;s not from your code."}, {"owner": {"reputation": 75, "user_id": 8834422, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-djVL1US9WUc/AAAAAAAAAAI/AAAAAAAAACM/U6K1PDEd1tc/photo.jpg?sz=128", "display_name": "Amadeus Pagel", "link": "https://stackoverflow.com/users/8834422/amadeus-pagel"}, "edited": false, "score": 0, "creation_date": 1569842044, "post_id": 58166598, "comment_id": 102715045, "body": "Replacing backticks with single or double quotes works, thanks."}], "answers": [{"tags": [], "owner": {"reputation": 5966, "user_id": 2477691, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DaiPF.jpg?s=128&g=1", "display_name": "chumakoff", "link": "https://stackoverflow.com/users/2477691/chumakoff"}, "is_accepted": false, "score": 1, "last_activity_date": 1569841962, "creation_date": 1569841962, "answer_id": 58166748, "question_id": 58166598, "link": "https://stackoverflow.com/questions/58166598/no-implicit-conversion-of-nil-into-string-in-code-that-shouldnt-be-evaluated/58166748#58166748", "title": "&quot;no implicit conversion of nil into String&quot; in code that shouldn&#39;t be evaluated if the object is nil", "body": "<p>If the problem were with <code>article.link</code> the error would be <code>NoMethodError: undefined method `starts_with?' for nil:NilClass</code></p>\n\n<p>In fact, the problem is with the <code>https://www.youtube.com</code> expression. It evaluates to <code>nil</code>.  Why are you using those quotes? Change them to <code>\"\"</code> or <code>''</code></p>\n"}], "owner": {"reputation": 75, "user_id": 8834422, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-djVL1US9WUc/AAAAAAAAAAI/AAAAAAAAACM/U6K1PDEd1tc/photo.jpg?sz=128", "display_name": "Amadeus Pagel", "link": "https://stackoverflow.com/users/8834422/amadeus-pagel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1569851097, "creation_date": 1569841402, "question_id": 58166598, "link": "https://stackoverflow.com/questions/58166598/no-implicit-conversion-of-nil-into-string-in-code-that-shouldnt-be-evaluated", "title": "&quot;no implicit conversion of nil into String&quot; in code that shouldn&#39;t be evaluated if the object is nil", "body": "<p>This is the code:</p>\n\n<pre><code>if article.link &amp;&amp; article.link.starts_with?(`https://www.youtube.com`) then article.link end\n</code></pre>\n\n<p>The error refers to this part:</p>\n\n<pre><code>article.link.starts_with?(`https://www.youtube.com`)\n</code></pre>\n\n<p>But if article.link is nil, that part shouldn't even be evaluated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activestorage"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1569918419, "post_id": 58166150, "comment_id": 102741692, "body": "There&#39;s no session reference in <code>CreateDayFrame</code>."}, {"owner": {"reputation": 33, "user_id": 9238588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/300bfd49c148385e968b7b006e72f2b5?s=128&d=identicon&r=PG&f=1", "display_name": "Sergey Vershinin Yazzi", "link": "https://stackoverflow.com/users/9238588/sergey-vershinin-yazzi"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1569925458, "post_id": 58166150, "comment_id": 102745329, "body": "DayFrame and Session are many-to-many relationship. day_frames_sessions intermediate join table that includes foreign keys referring to each of the classes DayFrame and Sessio"}], "owner": {"reputation": 33, "user_id": 9238588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/300bfd49c148385e968b7b006e72f2b5?s=128&d=identicon&r=PG&f=1", "display_name": "Sergey Vershinin Yazzi", "link": "https://stackoverflow.com/users/9238588/sergey-vershinin-yazzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1569925357, "creation_date": 1569839823, "last_edit_date": 1569925357, "question_id": 58166150, "link": "https://stackoverflow.com/questions/58166150/group-has-and-belongs-to-many", "title": "Group has_and_belongs_to_many", "body": "<p>Given a model with ActiveStorage: DayFrame, Day, Session. Models and migration see below. DayFrame and Session are many-to-many relationship. day_frames_sessions intermediate join table that includes foreign keys referring to each of the classes DayFrame and Session. How can I get day_frames group by session and sort by day.date like this: </p>\n\n<pre><code>{session_id_1=&gt; [DayFrame1, DayFram2, DayFram3], session_id_2 =&gt; [DayFrame2, DayFram1, DayFram4]}\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class DayFrame\n  has_and_belongs_to_many :sessions\n  belongs_to :day\nend\n\nclass Day\n  has_and_belongs_to_many :sessions\n  has_many :day_frames\nend\n\nclass Session\n  has_and_belongs_to_many :conference_day_frames\nend\n\nThe migrations are:\n\nclass CreateDay &lt; ActiveRecord::Migration[5.2]\n  def up\n    create_table :days do |t|\n      t.date    :date\n      t.string  :day_type\n      t.timestamps\n    end\n  end\n  def down\n    drop_table :days\n  end\nend\n\nclass CreateDayFrame &lt; ActiveRecord::Migration[5.2]\n  def up\n    create_table :day_frames do |t|\n      t.string    :name\n      t.time      :begin_time\n      t.time      :end_time\n      t.string    :frame_type\n      t.timestamps\n      t.references :day, index: true\n  end\n  def down\n    drop_table :day_frames\n  end\nend\n\nclass CreateSessions &lt; ActiveRecord::Migration[5.2]\n  def up\n    create_table :sessions do |t|\n      t.integer :number, limit: 1\n      t.string :title\n      t.string :short_title\n      t.boolean :is_active\n      t.timestamps\n    end\n  end\n\n  def down\n    drop_table :sessions\n  end\nend\n\nclass CreateDayFramesSessions &lt; ActiveRecord::Migration[5.2]\n  def up\n    create_join_table :day_frames, :sessions do |t|\n      t.index :day_frame_id\n      t.index :session_id\n    end\n  end\n  def down\n    drop_table :day_frames_sessions\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "gmail-api"], "answers": [{"tags": [], "owner": {"reputation": 19106, "user_id": 11599789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1l1AT.jpg?s=128&g=1", "display_name": "ziganotschka", "link": "https://stackoverflow.com/users/11599789/ziganotschka"}, "is_accepted": true, "score": 1, "last_activity_date": 1569841080, "creation_date": 1569841080, "answer_id": 58166504, "question_id": 58165367, "link": "https://stackoverflow.com/questions/58165367/loop-to-read-the-body-with-gmail-api/58166504#58166504", "title": "Loop to read the body with gmail api", "body": "<p>You can reproduce with the Try this API for <a href=\"https://developers.google.com/gmail/api/v1/reference/users/messages/list\" rel=\"nofollow noreferrer\">listing messages</a> that </p>\n\n<h2>the response contains only the thread Ids and message Ids.</h2>\n\n<p>To retrieve <code>message.body</code> you need to use the method <a href=\"https://developers.google.com/gmail/api/v1/reference/users/messages/get\" rel=\"nofollow noreferrer\">Users.messages: get</a> specifying as parameter the message Id you retrieved with <code>Users.messages: list</code>. </p>\n"}], "owner": {"reputation": 487, "user_id": 7847797, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-k7pSuJNJeV4/AAAAAAAAAAI/AAAAAAAAApY/6cIE0jxiCM8/photo.jpg?sz=128", "display_name": "jacques Mesnet", "link": "https://stackoverflow.com/users/7847797/jacques-mesnet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 58166504, "answer_count": 1, "score": 0, "last_activity_date": 1569841080, "creation_date": 1569836872, "last_edit_date": 1569837002, "question_id": 58165367, "link": "https://stackoverflow.com/questions/58165367/loop-to-read-the-body-with-gmail-api", "title": "Loop to read the body with gmail api", "body": "<p>I would like to implement the Gmail API into one of my projects. So I've followed the quickstart tutorial maid by google to do it, and it's working great. </p>\n\n<pre><code>require \"google/apis/gmail_v1\"\nrequire \"googleauth\"\nrequire \"googleauth/stores/file_token_store\"\nrequire \"fileutils\"\n\nOOB_URI = \"urn:ietf:wg:oauth:2.0:oob\".freeze\nAPPLICATION_NAME = \"Gmail API Ruby Quickstart\".freeze\nCREDENTIALS_PATH = \"credentials.json\".freeze\n# The file token.yaml stores the user's access and refresh tokens, and is\n# created automatically when the authorization flow completes for the first\n# time.\nTOKEN_PATH = \"token.yaml\".freeze\nSCOPE = Google::Apis::GmailV1::AUTH_GMAIL_MODIFY\n\n##\n# Ensure valid credentials, either by restoring from the saved credentials\n# files or intitiating an OAuth2 authorization. If authorization is required,\n# the user's default browser will be launched to approve the request.\n#\n# @return [Google::Auth::UserRefreshCredentials] OAuth2 credentials\ndef authorize\n  client_id = Google::Auth::ClientId.from_file CREDENTIALS_PATH\n  token_store = Google::Auth::Stores::FileTokenStore.new file: TOKEN_PATH\n  authorizer = Google::Auth::UserAuthorizer.new client_id, SCOPE, token_store\n  user_id = \"default\"\n  credentials = authorizer.get_credentials user_id\n  if credentials.nil?\n    url = authorizer.get_authorization_url base_url: OOB_URI\n    puts \"Open the following URL in the browser and enter the \" \\\n         \"resulting code after authorization:\\n\" + url\n    code = \"XXXX\"\n    credentials = authorizer.get_and_store_credentials_from_code(\n      user_id: user_id, code: code, base_url: OOB_URI\n    )\n  end\n  credentials\nend\n\n# Initialize the API\nservice = Google::Apis::GmailV1::GmailService.new\nservice.client_options.application_name = APPLICATION_NAME\nservice.authorization = authorize\n\nmessages = []\nnext_page = nil\nbegin\nresult = service.list_user_messages('me', max_results: [500].min, page_token: next_page)\nmessages += result.messages\nbreak if messages.size &gt;= 500\nnext_page = result.next_page_token\nend while next_page\n\nputs \"Found #{messages.size} messages\"\n\nmessages.each do |message| \n    puts \"- #{message.thread_id }\"\nend\n</code></pre>\n\n<p>In the project, we made a loop with the labels, and all is working correctly. Now, I would like to do the same with my emails. As you can see on the following script, I'm looping the id of the mails. This is working without problem, but when I'm trying to loop the content or any other <a href=\"https://developers.google.com/gmail/api/v1/reference/users/messages\" rel=\"nofollow noreferrer\">attributes</a> described on the documentation, it's rendering an array empty.</p>\n\n<pre><code>puts \"- #{message.body }\"\n</code></pre>\n\n<p>Do you have any leads that allow me to identify my mistake?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "ruby-on-rails-5", "paper-trail-gem"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1569833721, "post_id": 58164090, "comment_id": 102710667, "body": "Just to clarify: You want a project to not change in the database when it is updated and to still show the old attributes after an update? Only a new version should be created? How do you know that a new version exists when the original record in the database never changes?"}, {"owner": {"reputation": 973, "user_id": 1659370, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/6d120a0452ccef4756d5e1af5ae01383?s=128&d=identicon&r=PG", "display_name": "kashif", "link": "https://stackoverflow.com/users/1659370/kashif"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1569835515, "post_id": 58164090, "comment_id": 102711649, "body": "@spickermann once the form is submitted, it will call update action in controller. i want to store all these changes in version rather changing the real Object. then later, based on version changes, Admin will approve/reject the changes and modify the original Project Record."}], "answers": [{"tags": [], "owner": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "is_accepted": false, "score": 1, "last_activity_date": 1569895982, "last_edit_date": 1569895982, "creation_date": 1569895314, "answer_id": 58177223, "question_id": 58164090, "link": "https://stackoverflow.com/questions/58164090/create-paper-trail-new-version-without-updating-existing-record/58177223#58177223", "title": "Create paper_trail New Version without updating existing Record", "body": "<p>I'd try using <code>PaperTrail::Events::Update</code>, though it's not public API (it may change at any time without warning)</p>\n\n<pre><code>project.name = 'new name'\nupdate = PaperTrail::Events::Update.new(project, ....)\nPaperTrail::Version.create!(update.data)\n</code></pre>\n\n<p>Again, this is not public API, so you will void your warranty :)</p>\n\n<blockquote>\n  <p>Whenever any project gets updated, ..</p>\n</blockquote>\n\n<p>I'd put this in my <code>ProjectController#update</code> action only. You could use a model callback like <code>before_save</code> if you really have to, and <code>throw :abort</code> to <a href=\"https://guides.rubyonrails.org/active_record_callbacks.html#halting-execution\" rel=\"nofollow noreferrer\">halt</a> the callback chain, but you'll have to work around the implicit transaction.</p>\n\n<ul>\n<li><a href=\"https://github.com/paper-trail-gem/paper_trail/blob/master/lib/paper_trail/events/update.rb\" rel=\"nofollow noreferrer\">https://github.com/paper-trail-gem/paper_trail/blob/master/lib/paper_trail/events/update.rb</a></li>\n</ul>\n"}], "owner": {"reputation": 973, "user_id": 1659370, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/6d120a0452ccef4756d5e1af5ae01383?s=128&d=identicon&r=PG", "display_name": "kashif", "link": "https://stackoverflow.com/users/1659370/kashif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1569895982, "creation_date": 1569832042, "question_id": 58164090, "link": "https://stackoverflow.com/questions/58164090/create-paper-trail-new-version-without-updating-existing-record", "title": "Create paper_trail New Version without updating existing Record", "body": "<p>I've integrated paper_trail with a Project Model.</p>\n\n<p><strong>Normal Flow:-</strong></p>\n\n<p>Whenever project Record in model gets updated, a new version with changes gets created in Versions table.</p>\n\n<p><strong>Requirement:-</strong></p>\n\n<p>Whenever any project gets updated, rather than updating project record itself in projects model, i want to create a new Version Record. is there any way to do it ?</p>\n\n<p>I'm using Rails 5.1.6.2, paper_trail (10.3.0)</p>\n"}, {"tags": ["ruby", "continuous-integration", "travis-ci"], "comments": [{"owner": {"reputation": 33, "user_id": 12141761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b842ab6970f68a83b526bf9db60a2409?s=128&d=identicon&r=PG&f=1", "display_name": "Motheri Yani", "link": "https://stackoverflow.com/users/12141761/motheri-yani"}, "edited": false, "score": 1, "creation_date": 1569832599, "post_id": 58164039, "comment_id": 102710074, "body": "None of those duplicate questions helped, but adding <code>dist: trusty</code> in .travis.yml sorted the issue. <a href=\"https://changelog.travis-ci.com/xenial-as-the-default-build-environment-99476\" rel=\"nofollow noreferrer\">refer</a>."}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1569834030, "post_id": 58164039, "comment_id": 102710818, "body": "Well, the source of your issue is indeed that the version of bundler for your ruby version doesn&#39;t match the one specified in your <code>Gemfile.lock</code> (most likely because on of those specified Bundler 2.x while the other uses Bundler 1.x) as explained in some of the answers to the duplicated questions. Thus, you can also fix this issue with other Ruby versions by installing your exact required version of bundler in an <code>install</code> hook in your <code>travis.yml</code>."}], "owner": {"reputation": 33, "user_id": 12141761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b842ab6970f68a83b526bf9db60a2409?s=128&d=identicon&r=PG&f=1", "display_name": "Motheri Yani", "link": "https://stackoverflow.com/users/12141761/motheri-yani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 1, "closed_date": 1569832325, "answer_count": 0, "score": 1, "last_activity_date": 1569831800, "creation_date": 1569831800, "question_id": 58164039, "link": "https://stackoverflow.com/questions/58164039/why-travis-yml-build-failling", "closed_reason": "Duplicate", "title": "why travis yml build failling?", "body": "<p>I am working on a jekyll site for my portfolio, using github, travis-ci.After a long time I wanted to change the content of my site. After making a commit to master branch triggered the build in travis but failed with same error. I tried changing versions of ruby versions but got no luck.</p>\n\n<p><strong>Error</strong></p>\n\n<pre><code> bundle install --jobs=3 --retry=3 --deployment --path=${BUNDLE_PATH:-vendor/bundle}\n168/home/travis/.rvm/rubies/ruby-2.5.1/lib/ruby/2.5.0/rubygems.rb:289:in `find_spec_for_exe': can't find gem bundler (&gt;= 0.a) with executable bundle (Gem::GemNotFoundException)\n169 from /home/travis/.rvm/rubies/ruby-2.5.1/lib/ruby/2.5.0/rubygems.rb:308:in `activate_bin_path'\n170 from /home/travis/.rvm/gems/ruby-2.5.1/bin/bundle:23:in `&lt;main&gt;'\n171 from /home/travis/.rvm/gems/ruby-2.5.1/bin/ruby_executable_hooks:15:in `eval'\n172 from /home/travis/.rvm/gems/ruby-2.5.1/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n173\n174\n\n</code></pre>\n\n<p><strong>travis.yml</strong></p>\n\n<pre><code>language: ruby\nrvm:\n  - 2.5.1\n\nbefore_script:\n- chmod +x ./script/cibuild\n\nscript: ./script/cibuild\n\ncache: bundler\n\nenv:\n   global:\n   - NOKOGIRI_USE_SYSTEM_LIBRARIES=true\n\ndeploy:\n  provider: surge\n  skip_cleanup: true\n  project: ./_site/\n  domain: https://mysite.surge.sh\non:\n  branch: master\n\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "faraday"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 3839978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9Xfj.jpg?s=128&g=1", "display_name": "Skidder", "link": "https://stackoverflow.com/users/3839978/skidder"}, "edited": false, "score": 0, "creation_date": 1570089118, "post_id": 58164772, "comment_id": 102805602, "body": "This takes the error away, but I&#39;m not sure if it is semantically equivalent (will have to do some testing to see what <code>builder</code> actually does)"}, {"owner": {"reputation": 3, "user_id": 3839978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9Xfj.jpg?s=128&g=1", "display_name": "Skidder", "link": "https://stackoverflow.com/users/3839978/skidder"}, "edited": false, "score": 1, "creation_date": 1570430821, "post_id": 58164772, "comment_id": 102897059, "body": "Turns out, <code>builder</code> actually <i>is</i> a connection, so the fix was relatively straight-forward:  ```   builder.adapter Faraday::Adapter::Typhoeus ```"}], "tags": [], "owner": {"reputation": 1320, "user_id": 4531923, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/749da210afda1b309680b354f019849e?s=128&d=identicon&r=PG", "display_name": "Vincent Rolea", "link": "https://stackoverflow.com/users/4531923/vincent-rolea"}, "is_accepted": true, "score": 0, "last_activity_date": 1569834768, "creation_date": 1569834768, "answer_id": 58164772, "question_id": 58162859, "link": "https://stackoverflow.com/questions/58162859/upgrading-faraday-gem-runtimeerror-adapter-should-be-set-using-the-adapter-m/58164772#58164772", "title": "Upgrading Faraday gem: RuntimeError: Adapter should be set using the `adapter` method, not `use`", "body": "<p>There's a doc that the Faraday team <a href=\"https://github.com/lostisland/faraday/blob/v1.0-rc1/UPGRADING.md\" rel=\"nofollow noreferrer\">put online</a> to help with any backwards-compayibility errors from version 0.15.4.</p>\n\n<p>There's a section regarding your problem:</p>\n\n<blockquote>\n  <p>In order to specify the adapter you now MUST use the #adapter method on the connection builder. If you don't do so and your adapter inherits from Faraday::Adapter then Faraday will raise an exception. Otherwise, Faraday will automatically push the default adapter at the end of the stack causing your request to be executed twice.</p>\n</blockquote>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class OfficialAdapter &lt; Faraday::Adapter\n  ...\nend\n\nclass MyAdapter\n  ...\nend\n\n# This will raise an exception\nconn = Faraday.new(...) do |f|\n  f.use OfficialAdapter\nend\n\n# This will cause Faraday inserting the default adapter at the end of the stack\nconn = Faraday.new(...) do |f|\n  f.use MyAdapter\nend\n\n# You MUST use `adapter` method\nconn = Faraday.new(...) do |f|\n  f.adapter AnyAdapter\nend\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 3839978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9Xfj.jpg?s=128&g=1", "display_name": "Skidder", "link": "https://stackoverflow.com/users/3839978/skidder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 795, "favorite_count": 0, "accepted_answer_id": 58164772, "answer_count": 1, "score": 0, "last_activity_date": 1569834768, "creation_date": 1569826535, "question_id": 58162859, "link": "https://stackoverflow.com/questions/58162859/upgrading-faraday-gem-runtimeerror-adapter-should-be-set-using-the-adapter-m", "title": "Upgrading Faraday gem: RuntimeError: Adapter should be set using the `adapter` method, not `use`", "body": "<p>I'm relatively new to RoR, and now I want to upgrade faraday from 0.15.4 to 0.16.2 and I think I need to change the way I insert Faraday into the middleware stack. But  how do I do this?</p>\n\n<p>After upgrading the faraday gem I get the following error from Minitest:</p>\n\n<pre><code>RuntimeError: Adapter should be set using the `adapter` method, not `use`\n</code></pre>\n\n<p>Usually googling the exact error message works out fine for me, unfortunately this time I'm less fortunate, only found the literal string in the Farady code :)</p>\n\n<p>This error is raised by Faraday when it is used like below in one of my test files:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def extend_middleware(builder)\n  builder.use Ahora::Middleware::RequestLogger, SemanticLogger[Reader]\n  builder.use Faraday::Adapter::Typhoeus\nend\n</code></pre>\n\n<p>I have the impression that the solution should be relatively straight-forward, only changing the <code>builder.use</code> line above. But I have no clue how I convert this to the <code>adapter</code> method as mentioned in the error message. It would help me greatly if someone could point out the difference between 'use' and 'adapter' methods (I'd like to understand the problem!) and possibly point me to a solution :D</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1569822573, "post_id": 58162053, "comment_id": 102706008, "body": "Welp, they&#39;re not identical: in YARV, <code>method_b</code> has two extra instructions."}, {"owner": {"reputation": 5529, "user_id": 1032663, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/nQ6Rw.jpg?s=128&g=1", "display_name": "Joel_Blum", "link": "https://stackoverflow.com/users/1032663/joel-blum"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1569823579, "post_id": 58162053, "comment_id": 102706270, "body": "@Amadan that&#39;s fine, but how does it matter to the people reading and writing the code? to me method_a makes no sense actually but I see this pattern a lot"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1569825689, "post_id": 58162053, "comment_id": 102706985, "body": "The latter can be called with non-hash / non-keyword arguments, e.g. <code>method_b(1, 2)</code> whereas the former ensures <code>options</code> to be a hash."}, {"owner": {"reputation": 5529, "user_id": 1032663, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/nQ6Rw.jpg?s=128&g=1", "display_name": "Joel_Blum", "link": "https://stackoverflow.com/users/1032663/joel-blum"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1569831093, "post_id": 58162053, "comment_id": 102709401, "body": "@Stefan I actually like your answer best :)"}], "answers": [{"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 3, "creation_date": 1569829710, "post_id": 58162283, "comment_id": 102708797, "body": "Shouldn&#39;t <code>opts.delete[:keyword_1]</code> be <code>opts.delete(:keyword_1)</code> ?"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 3, "last_activity_date": 1569861771, "last_edit_date": 1569861771, "creation_date": 1569823696, "answer_id": 58162283, "question_id": 58162053, "link": "https://stackoverflow.com/questions/58162053/ruby-method-double-splat-vs-hash/58162283#58162283", "title": "Ruby Method Double Splat vs Hash", "body": "<p>Well it depends what you mean by \"known number of arguments\", specifically for the situation when you have <em>keyword arguments</em> plus <em>any number of other keyword args</em>, for example:</p>\n\n<pre><code>def foo(i, keyword_1: \"default\", **other_keywords)\nend\n</code></pre>\n\n<p>I can call this as </p>\n\n<pre><code>foo(6, keyword_1: \"asd\", other: \"keyword\")\n</code></pre>\n\n<p>And <code>{other: \"keyword\"}</code> will be contained in <code>other_keywords</code> while <code>keyword_1</code> can be accessed directly as a local variable.</p>\n\n<p>Without the <code>**</code> splat operator this behavior is more cumbersome to implement, something like this:</p>\n\n<pre><code>def foo(i, opts={})\n keyword_1 = opts.delete(:keyword_1) || \"default\"\n # now `opts` is the same as `other_keywords`\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 1, "last_activity_date": 1569829966, "last_edit_date": 1569829966, "creation_date": 1569825522, "answer_id": 58162629, "question_id": 58162053, "link": "https://stackoverflow.com/questions/58162053/ruby-method-double-splat-vs-hash/58162629#58162629", "title": "Ruby Method Double Splat vs Hash", "body": "<p>Another difference is the fact that the <code>**</code> version captures rest keyword arguments. Keyword arguments are represented by symbols, resulting in the following behaviour:</p>\n\n<pre><code>def a(**options)\n  options\nend\n\ndef b(options = {})\n  options\nend\n</code></pre>\n\n\n\n<pre><code>a(a: 1) #=&gt; {:a=&gt;1}\na('a' =&gt; 1) #=&gt; ArgumentError (wrong number of arguments (given 1, expected 0))\n\nb(a: 1) #=&gt; {:a=&gt;1}\nb('a' =&gt; 1) #=&gt; {\"a\"=&gt;1}\n</code></pre>\n\n\n\n<pre><code>def c(hash_options = {}, **keyword_options)\n  [hash_options, keyword_options]\nend\n</code></pre>\n\n\n\n<pre><code># symbols are extracted and used as rest keyword arguments\nc('a' =&gt; 1, b: 2, 'c' =&gt; 3, d: 4) #=&gt; [{\"a\"=&gt;1, \"c\"=&gt;3}, {:b=&gt;2, :d=&gt;4}]\n</code></pre>\n"}], "owner": {"reputation": 5529, "user_id": 1032663, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/nQ6Rw.jpg?s=128&g=1", "display_name": "Joel_Blum", "link": "https://stackoverflow.com/users/1032663/joel-blum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 2, "answer_count": 2, "score": 4, "last_activity_date": 1569861771, "creation_date": 1569822210, "question_id": 58162053, "link": "https://stackoverflow.com/questions/58162053/ruby-method-double-splat-vs-hash", "title": "Ruby Method Double Splat vs Hash", "body": "<p>When dealing with a method that takes a <strong>known</strong> number of arguments plus an options hash, is there any difference/advantage of capturing the options in a double splat?</p>\n\n<p>consider</p>\n\n<pre><code>def method_a(a, **options)\n    puts a\n    puts options\nend\n</code></pre>\n\n<p>vs</p>\n\n<pre><code>def method_b(a, options = {})\n   puts a\n   puts options\nend\n</code></pre>\n\n<p>Are the two equivalent? I think method_b is more readable but still I see a lot of code going with method_a.\nIs there a reason to use double splat for options <strong>when the regular (non options) arguments are captured without a splat</strong>?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 4, "creation_date": 1569821735, "post_id": 58161902, "comment_id": 102705770, "body": "<code>arr.each { |h| puts h.values }</code> is all you need, where <code>arr</code> is your array of hashes. (I cannot bring myself to name an array <code>hash</code>. :-) That will give you one value on each of six lines."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1569824562, "post_id": 58161902, "comment_id": 102706556, "body": "Problem with your code is in <code>each_hash do</code> and <code>each_hash_element do</code>. Those are not methods, but are used in code as such (you pass them a block)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1569824828, "post_id": 58161902, "comment_id": 102706624, "body": "Another problem is <code>${v}</code>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1569872106, "post_id": 58161902, "comment_id": 102729155, "body": "<code>${x}</code> is JavaScript. <code>#{x}</code> is the equivalent in Ruby."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 3, "creation_date": 1569824621, "post_id": 58162389, "comment_id": 102706565, "body": "You can omit the default value in this case. But overall, the merge approach may cause some values to be not printed. I personally wouldn&#39;t do this."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1569824920, "post_id": 58162389, "comment_id": 102706667, "body": "Maybe put that assumption in front then?"}], "tags": [], "owner": {"reputation": 3926, "user_id": 2190621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c464f439212bca87517b234f7c9bd3e?s=128&d=identicon&r=PG&f=1", "display_name": "demir", "link": "https://stackoverflow.com/users/2190621/demir"}, "is_accepted": false, "score": 1, "last_activity_date": 1569825183, "last_edit_date": 1569825183, "creation_date": 1569824321, "answer_id": 58162389, "question_id": 58161902, "link": "https://stackoverflow.com/questions/58161902/print-array-of-hashes/58162389#58162389", "title": "Print array of hashes", "body": "<p>I assume that hash keys are unique.</p>\n\n<p>You can merge all hashes with <a href=\"https://ruby-doc.org/core-2.6.4/Enumerable.html#method-i-reduce\" rel=\"nofollow noreferrer\">reduce</a> method and prints all values like this:</p>\n\n<pre><code>puts hash.reduce({}, :merge).values\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4962, "user_id": 231441, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/P2kt4.png?s=128&g=1", "display_name": "zzeroo", "link": "https://stackoverflow.com/users/231441/zzeroo"}, "is_accepted": false, "score": 0, "last_activity_date": 1569827714, "creation_date": 1569827714, "answer_id": 58163132, "question_id": 58161902, "link": "https://stackoverflow.com/questions/58161902/print-array-of-hashes/58163132#58163132", "title": "Print array of hashes", "body": "<p>First you ask about an array with two hashes in it.</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>hash = [{\"a\"=&gt;\"apple\", \"b\"=&gt;\"ball\", \"c\"=&gt;\"cat\"},\n{\"d\"=&gt;\"dog\", \"e\"=&gt;\"eagle\", \"f\"=&gt;\"fly\"}]\n</code></pre>\n\n<p>In the following I call it an array ...</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>array = [{\"a\"=&gt;\"apple\", \"b\"=&gt;\"ball\", \"c\"=&gt;\"cat\"},\n{\"d\"=&gt;\"dog\", \"e\"=&gt;\"eagle\", \"f\"=&gt;\"fly\"}]\n</code></pre>\n\n<p>Now you have to iterate each hash in your array and print each value of that hash, while leaving the keys off</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>array.each { |hash| puts hash.values }\n</code></pre>\n\n<p>P.S. this solution is shameless stolen from @Cary Swoveland </p>\n"}, {"tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 4, "last_activity_date": 1569846276, "last_edit_date": 1569846276, "creation_date": 1569831584, "answer_id": 58163983, "question_id": 58161902, "link": "https://stackoverflow.com/questions/58161902/print-array-of-hashes/58163983#58163983", "title": "Print array of hashes", "body": "<p>Another option is to first get an array of all the values, then print that.</p>\n\n<pre><code>puts hash.flat_map(&amp;:values)\n</code></pre>\n\n<p><a href=\"https://ruby-doc.org/core-2.6.4/Enumerable.html#method-i-flat_map\" rel=\"nofollow noreferrer\"><code>#flat_map</code></a> maps the array values and concatenates the result of each block (flatting the whole thing by one level).</p>\n\n<pre><code>hash.map(&amp;:values) #=&gt; [[\"apple\", \"ball\", \"cat\"], [\"dog\", \"eagle\", \"fly\"]]\nhash.flat_map(&amp;:values) #=&gt; [\"apple\", \"ball\", \"cat\", \"dog\", \"eagle\", \"fly\"]\n</code></pre>\n\n<p>In this scenario <code>puts hash.map(&amp;:values)</code> would also work, but I personally find the use of <code>#flat_map</code> more fitting.</p>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1569872148, "post_id": 58168079, "comment_id": 102729173, "body": "It&#39;s worth putting the fixed code first and the busted code second."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1569872742, "post_id": 58168079, "comment_id": 102729424, "body": "@tadman Why isn&#39;t it better to first explain what is wrong with the current code before providing a solution? Or do you mean merge this with my other answer?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1569873340, "post_id": 58168079, "comment_id": 102729693, "body": "I mostly mean explain the fix first, that&#39;s what people are going to look at when trying to find an answer, and then explain the issues second. At a glance this looks like a repeat of the original question. I think this answer would be fine without the repeat of the code, your explanation does all the necessary work."}], "tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 1, "last_activity_date": 1569878138, "last_edit_date": 1569878138, "creation_date": 1569847083, "answer_id": 58168079, "question_id": 58161902, "link": "https://stackoverflow.com/questions/58161902/print-array-of-hashes/58168079#58168079", "title": "Print array of hashes", "body": "<p>Keeping the coding style the same, a working version looks like this:</p>\n\n<pre><code>array.each do |hash| # I'll rename the hash array to \"array\" to avoid confusion.\n  hash.each_value do |value| # or: hash.each do |key, value|\n    puts value\n  end\nend\n</code></pre>\n\n<p>This loops through the array of hashes and loops through the values for each hash.</p>\n\n<p>The issue with your current code is that <code>each_hash</code> is an hash element and not a method. You should invoke the <a href=\"https://ruby-doc.org/core-2.6.4/Hash.html#method-i-each\" rel=\"nofollow noreferrer\"><code>each</code></a> or <a href=\"https://ruby-doc.org/core-2.6.4/Hash.html#method-i-each_value\" rel=\"nofollow noreferrer\"><code>each_value</code></a> method for each such element.</p>\n"}], "owner": {"reputation": 15, "user_id": 7321198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30d085fd97c4f50dd376b2dbd8af3d8d?s=128&d=identicon&r=PG&f=1", "display_name": "Yeshky", "link": "https://stackoverflow.com/users/7321198/yeshky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1569878138, "creation_date": 1569820928, "last_edit_date": 1569826398, "question_id": 58161902, "link": "https://stackoverflow.com/questions/58161902/print-array-of-hashes", "title": "Print array of hashes", "body": "<p>I've an array of hashes</p>\n\n<p>Eg: </p>\n\n<pre><code>hash = [{\"a\"=&gt;\"apple\", \"b\"=&gt;\"ball\", \"c\"=&gt;\"cat\"},\n{\"d\"=&gt;\"dog\", \"e\"=&gt;\"eagle\", \"f\"=&gt;\"fly\"}]\n</code></pre>\n\n<p>I would like to have the values printed in a loop.</p>\n\n<p>Output expected is:   </p>\n\n<pre><code>apple  \nball  \ncat  \ndog  \neagle  \nfly  \n</code></pre>\n\n<p>I've tried</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>hash.each do |each_hash|\n  each_hash do |each_hash_element|\n    each_hash_element do |k,v|\n      puts \"${v}\"\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6059, "user_id": 301419, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/03850242d6e9a3b36279cdaf6f231d0f?s=128&d=identicon&r=PG&f=1", "display_name": "Alok Swain", "link": "https://stackoverflow.com/users/301419/alok-swain"}, "edited": false, "score": 0, "creation_date": 1569821996, "post_id": 58161774, "comment_id": 102705846, "body": "A scope is just a class method. In terms of performance yes you are correct it does not give any performance benefit if measured in time. But it does keep the code quite readable compared to not declaring the scope/method and using the query condition everywhere it is needed."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1569833066, "post_id": 58161774, "comment_id": 102710322, "body": "Please <b>show us some code</b>. A question like this, with no code sample to provide context, is very ambiguous and cannot be answered clearly."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1569833122, "post_id": 58161774, "comment_id": 102710348, "body": "Does executing the exact same code, refactored as a scope, increase performance? No. Does your teammate&#39;s suggestion improve <i>your</i> code&#39;s performance? Maybe. It depends what SQL (and other ruby code) was being executed before and after the change. And, regardless of performance, it may be advisable to use a scope to improve code quality."}], "answers": [{"tags": [], "owner": {"reputation": 3768, "user_id": 1029521, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/7ce6f2f15a73bb6012b490dcbc4c1ed5?s=128&d=identicon&r=PG", "display_name": "Max Woolf", "link": "https://stackoverflow.com/users/1029521/max-woolf"}, "is_accepted": false, "score": 0, "last_activity_date": 1569854534, "creation_date": 1569854534, "answer_id": 58170218, "question_id": 58161774, "link": "https://stackoverflow.com/questions/58161774/does-adding-scope-in-rails-increase-query-performance/58170218#58170218", "title": "Does adding scope in Rails increase query performance?", "body": "<p>Nope, it does not. Scopes are just a bit of syntactic sugar to make querying collections of objects easier.</p>\n"}], "owner": {"reputation": 1, "user_id": 11873170, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hPM3r0R8WiQ/AAAAAAAAAAI/AAAAAAAAAA4/yBOYF2c_-dA/photo.jpg?sz=128", "display_name": "Gokul P S", "link": "https://stackoverflow.com/users/11873170/gokul-p-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1569854534, "creation_date": 1569820132, "question_id": 58161774, "link": "https://stackoverflow.com/questions/58161774/does-adding-scope-in-rails-increase-query-performance", "title": "Does adding scope in Rails increase query performance?", "body": "<p>I have heard from my teammates. They said adding scope in Rails model increases the query performance. I don't think so. It will just add a \"and\" case in query. How that will increase performance?</p>\n"}, {"tags": ["ruby", "mongodb"], "comments": [{"owner": {"reputation": 129250, "user_id": 2313887, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/259593de18972d36e25f230c2be19d9f?s=128&d=identicon&r=PG", "display_name": "Neil Lunn", "link": "https://stackoverflow.com/users/2313887/neil-lunn"}, "edited": false, "score": 0, "creation_date": 1569818413, "post_id": 58161527, "comment_id": 102705084, "body": "Show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal, Reproducible Example</a>. Following <a href=\"https://docs.mongodb.com/ruby-driver/master/quick-start/#insert-a-document\" rel=\"nofollow noreferrer\">Insert a Document</a> in the actual manual might be a good start."}, {"owner": {"reputation": 553, "user_id": 11814519, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dBeFD9r200A/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcoJYCFLas6-rxLovGx-E3EF_3XQA/photo.jpg?sz=128", "display_name": "Mig", "link": "https://stackoverflow.com/users/11814519/mig"}, "edited": false, "score": 0, "creation_date": 1569821105, "post_id": 58161527, "comment_id": 102705640, "body": "Sounds like a simple problem to fix but as pointed out, we would need a minimal complete code which breaks."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1569825066, "post_id": 58161527, "comment_id": 102706722, "body": "In your code, is <code>collection</code> a method with one argument?"}, {"owner": {"reputation": 25, "user_id": 8947410, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_a05E5wd93w/AAAAAAAAAAI/AAAAAAAAABg/uThuaAmwSAE/photo.jpg?sz=128", "display_name": "Rezki Oksaputri", "link": "https://stackoverflow.com/users/8947410/rezki-oksaputri"}, "edited": false, "score": 0, "creation_date": 1569825688, "post_id": 58161527, "comment_id": 102706984, "body": "I still cant get it done.  still get that error :(  <code>(byebug) doc.to_json &quot;{\\&quot;cif\\&quot;:\\&quot;test\\&quot;,\\&quot;showWidget\\&quot;:false,\\&quot;showMenu\\&quot;:true,\\&quot;&zwnj;&#8203;segment\\&quot;:\\&quot;TSB_02\\&quot;&zwnj;&#8203;}&quot;   (byebug) collection #&lt;Mongo::Collection:0x70311273146260 namespace=test.db1&gt;   (byebug) collection.insert_one(doc) *** ArgumentError Exception: wrong number of arguments (given 0, expected 1)   (byebug) collection.insert_one(doc.to_json) *** ArgumentError Exception: wrong number of arguments (given 0, expected 1)</code>"}, {"owner": {"reputation": 25, "user_id": 8947410, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_a05E5wd93w/AAAAAAAAAAI/AAAAAAAAABg/uThuaAmwSAE/photo.jpg?sz=128", "display_name": "Rezki Oksaputri", "link": "https://stackoverflow.com/users/8947410/rezki-oksaputri"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1569826117, "post_id": 58161527, "comment_id": 102707171, "body": "@SergioTulentsev <code>collection</code> is a access to collection that I followed the tutorial from link above :("}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1569829940, "post_id": 58161527, "comment_id": 102708884, "body": "@RezkiOksaputri: I don&#39;t think so. Looks like you&#39;re trying this in a debugger in the middle of your app. <code>collection</code> might not be what you think it is. Try making an isolated piece of code that we can run ourselves and see the problem. In other words, an MCVE (as mentioned in the first comment by Neil)."}, {"owner": {"reputation": 25, "user_id": 8947410, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_a05E5wd93w/AAAAAAAAAAI/AAAAAAAAABg/uThuaAmwSAE/photo.jpg?sz=128", "display_name": "Rezki Oksaputri", "link": "https://stackoverflow.com/users/8947410/rezki-oksaputri"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1569905516, "post_id": 58161527, "comment_id": 102736737, "body": "Neill Lunn, Mig, and @SergioTulentsev I run the .rb file on the different part and it works, but when I use it in the cucumber script, it always gives me that error.  is there any chance that the error because of the cucumber ?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1569918755, "post_id": 58161527, "comment_id": 102741871, "body": "@RezkiOksaputri: if same exact code works elsewhere, then yes, there&#39;s a good chance that it is incompatible with cucumber."}], "owner": {"reputation": 25, "user_id": 8947410, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_a05E5wd93w/AAAAAAAAAAI/AAAAAAAAABg/uThuaAmwSAE/photo.jpg?sz=128", "display_name": "Rezki Oksaputri", "link": "https://stackoverflow.com/users/8947410/rezki-oksaputri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1569824830, "creation_date": 1569817787, "last_edit_date": 1569824830, "question_id": 58161527, "link": "https://stackoverflow.com/questions/58161527/wrong-number-of-arguments-given-0-expected-1-argumenterror-ruby-mongodb", "title": "wrong number of arguments (given 0, expected 1) (ArgumentError) - Ruby MongoDb", "body": "<p>Always get error:</p>\n\n<blockquote>\n  <p>wrong argument (given 0, expected 1)</p>\n</blockquote>\n\n<p>when calling <code>insert_one</code> ruby to mongoDB.</p>\n\n<p>I tried to hardcode in the </p>\n\n<pre><code>insert_one( { \n      id: \"#{id}\", \n      showMenu: false, \n      showSub: true, \n      sub: \"TSB_02\" \n    })\n</code></pre>\n\n<p>I tried to change it to <code>insert_one(doc.to_json)</code> and followed solution from stack overflow but still get error. \nI tried to byebug, I got the client &amp; collection, The error always in that line when insert_one.    </p>\n\n<pre><code>doc = { \n  id: \"#{id}\", \n  showMenu: false, \n  showSub: true, \n  sub: \"TSB_02\" \n  }\nresult = collection.insert_one(doc) \n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 77715, "user_id": 396458, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/16961c15df3fee8c4b3056ff83d1938b?s=128&d=identicon&r=PG", "display_name": "NullUserException", "link": "https://stackoverflow.com/users/396458/nulluserexception"}, "edited": false, "score": 0, "creation_date": 1569819324, "post_id": 58161504, "comment_id": 102705261, "body": "If you simply pass <code>|</code> as you did, it just gets interpreted as an argument (it&#39;s as if you ran <code>ifconfig \\| grep 192</code> from the command line). I believe you&#39;d have to open different processes with popen and connect the pipes if you want to use grep. The other option is to simply use ruby to filter the output"}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 1, "creation_date": 1569819344, "post_id": 58161504, "comment_id": 102705264, "body": "You\u2019re using shell constructs. <code>Open3</code> might provide a separate function to give a shell command, but you should also be able to do <code>popen2(&quot;sh&quot;, &quot;-c&quot;, &quot;ifconfig | grep 192&quot;)</code> anyway. (Actually, NullUserException\u2019s new addition about using Ruby to replace <code>grep 192</code> is probably better.)"}, {"owner": {"reputation": 77715, "user_id": 396458, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/16961c15df3fee8c4b3056ff83d1938b?s=128&d=identicon&r=PG", "display_name": "NullUserException", "link": "https://stackoverflow.com/users/396458/nulluserexception"}, "edited": false, "score": 0, "creation_date": 1569820767, "post_id": 58161504, "comment_id": 102705553, "body": "Of course the other option is to simply use the <a href=\"https://ruby-doc.org/core-2.6.4/Kernel.html#method-i-60\" rel=\"nofollow noreferrer\">backticks</a> (<code>output=`ifconfig | grep 192`</code>) and then do whatever you need to do with <code>output</code>. Be wary of the pitfalls of using this method (e.g.: possible execution of arbitrary code if you pass user input)"}], "owner": {"reputation": 156, "user_id": 11421293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3330c1612c79f9ecefff15ef3566346?s=128&d=identicon&r=PG&f=1", "display_name": "Nothingbetter", "link": "https://stackoverflow.com/users/11421293/nothingbetter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1569817597, "creation_date": 1569817597, "question_id": 58161504, "link": "https://stackoverflow.com/questions/58161504/how-do-i-use-the-and-characters-in-ruby-open3", "title": "How do I use the | and &gt; characters in ruby Open3?", "body": "<p>The following works and gives me the output I receive had I typed <code>ifconfig</code> in the linux terminal:</p>\n\n<pre><code>Open3.popen2(\"ifconfig\") do |stdin, stdout, thread|\n  stdin.close\n\n  stdout.each_line do |line|\n    puts line\n  end\nend\n</code></pre>\n\n<p>Now, I'd like to grep those lines:</p>\n\n<pre><code>Open3.popen2(\"ifconfig\", \"|\", \"grep\", \"192\") do |stdin, stdout, thread|\n  stdin.close\n\n  stdout.each_line do |line|\n    puts line\n  end\nend\n</code></pre>\n\n<p>When typing 'ifconfig | grep 192' directly in my terminal I get:\n    <code>inet 192.168.1.183  netmask 255.255.255.0  broadcast 192.168.0.255</code></p>\n\n<p>But in ruby I get:\n    <code>grep: Unknown host</code></p>\n\n<p>Why can't I pipe in Ruby? Similar things happen when I try to use \">\".</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "authorization"], "answers": [{"tags": [], "owner": {"reputation": 3, "user_id": 8335465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79b076786f3a908decef530c8153d4f9?s=128&d=identicon&r=PG&f=1", "display_name": "Vikas Patil", "link": "https://stackoverflow.com/users/8335465/vikas-patil"}, "is_accepted": false, "score": 0, "last_activity_date": 1569819422, "creation_date": 1569819422, "answer_id": 58161671, "question_id": 58160196, "link": "https://stackoverflow.com/questions/58160196/difference-between-authorize-routes-and-authorize-controller-in-gem-devise/58161671#58161671", "title": "Difference between authorize routes and authorize controller in gem Devise", "body": "<p>Full description is here \nopen given link\n<a href=\"https://railsapps.github.io/rails-authorization.html\" rel=\"nofollow noreferrer\">Rails Authorization </a></p>\n"}], "owner": {"reputation": 311, "user_id": 7105526, "user_type": "registered", "profile_image": "https://graph.facebook.com/1812496678973073/picture?type=large", "display_name": "B&#249;i Nh\u1eadt Duy", "link": "https://stackoverflow.com/users/7105526/b%c3%b9i-nh%e1%ba%adt-duy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569819422, "creation_date": 1569802763, "last_edit_date": 1569811396, "question_id": 58160196, "link": "https://stackoverflow.com/questions/58160196/difference-between-authorize-routes-and-authorize-controller-in-gem-devise", "title": "Difference between authorize routes and authorize controller in gem Devise", "body": "<p>Can someone please tell me what the different between <code>authorize route</code> and <code>authorize controller</code> in gem <code>Devise</code> ?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1569799724, "post_id": 58159939, "comment_id": 102702197, "body": "Don&#39;t use features added in later Ruby. This includes language and library functionality."}, {"owner": {"reputation": 6389, "user_id": 1291990, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/698affa0b4beedb2f368e983e39af6a7?s=128&d=identicon&r=PG", "display_name": "Michael Dorst", "link": "https://stackoverflow.com/users/1291990/michael-dorst"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1569799997, "post_id": 58159939, "comment_id": 102702232, "body": "@DaveNewton I&#39;ve heard that 1.9 broke compatibility with 1.8. Unless I misunderstand, that implies that there are things that work in 1.8 that don&#39;t work in 1.9. Therefore it&#39;s more complicated than just writing 1.8 code, because there are some things that will not work on later versions."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1569802119, "post_id": 58159939, "comment_id": 102702508, "body": "Other than map order there&#39;s nothing significant iirc. The changes are all documented--if you&#39;ve been doing everything in bash then it&#39;s unlikely you&#39;re going to be doing much that&#39;ll stress compatibility. Plus it&#39;s trivial to install multiple versions of Ruby to test anyway. SO isn&#39;t really the best place to ask for the laundry list of Ruby version changes--just look at the docs, change logs for the major releases, and blog posts discussing the changes."}], "answers": [{"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 1, "last_activity_date": 1569833955, "creation_date": 1569833955, "answer_id": 58164570, "question_id": 58159939, "link": "https://stackoverflow.com/questions/58159939/can-i-write-ruby-2-3-7-scripts-that-are-backward-compatible-with-1-8-7/58164570#58164570", "title": "Can I write ruby 2.3.7 scripts that are backward compatible with 1.8.7?", "body": "<p>Yes, it is possible, provided you restrict yourself to the intersection of the language and library features of Ruby 1.8.7, Ruby 2.3.7, and everything in between.</p>\n\n<p>The last big break of backwards-compatibility was the jump from Ruby 1.8 to Ruby 1.9. String handling was completely changed, so anything to do with text processing, you need to be very careful.</p>\n\n<p>Of the top of my head:</p>\n\n<ul>\n<li>In Ruby 1.8, strings are considered to be a sequence of bytes. In Ruby 1.9. strings are a factory for different iterators, iterating in terms of code points, characters, or bytes.</li>\n<li>Therefore, in Ruby 1.9, strings are no longer <code>Enumerable</code>.</li>\n<li>Indexing into a string will return an <code>Integer</code> in Ruby 1.8 and a single-character <code>String</code> in Ruby 1.9.</li>\n<li>Character literals (e.g. <code>?a</code>) will evaluate to an <code>Integer</code> in Ruby 1.8 and a single-character <code>String</code> in Ruby 1.9.</li>\n<li>In Ruby 1.8, all strings are assumed to be in the same encoding (usually ASCII, but can be changed to a very limited set, namely UTF-8 and a couple of Asian encodings). Ruby 1.9 is fully encoding-aware, each string has its own separate encoding, each I/O stream has two encodings (an internal one and an external one) and each source file has a separate encoding.</li>\n</ul>\n\n<p>Your best bet might be to restrict yourself to use only what is specified in the <a href=\"https://iso.org/standard/59579.html\" rel=\"nofollow noreferrer\">ISO Ruby Language Specification</a>. The spec was specifically written so that all existing Ruby implementations at the time (MRI, YARV, IronRuby, JRuby, MacRuby, Rubinius) would automatically be compliant, which basically means that the spec only specifies the minimal required subset of the intersection of Ruby 1.8.6, Ruby 1.8.7, and Ruby 1.9.0.</p>\n\n<p>Since there haven't been any backwards-incompatible changes since then, you can be assured that your code will work on all versions from Ruby 1.8.6 up to (but excluding) 3.0, and on all ISO-compliant Ruby implementations, which are as far as I know MRI, YARV, JRuby, IronRuby, Rubinius, MacRuby, MRuby, MagLev, and TruffleRuby.</p>\n"}], "owner": {"reputation": 6389, "user_id": 1291990, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/698affa0b4beedb2f368e983e39af6a7?s=128&d=identicon&r=PG", "display_name": "Michael Dorst", "link": "https://stackoverflow.com/users/1291990/michael-dorst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 58164570, "answer_count": 1, "score": -1, "last_activity_date": 1569833955, "creation_date": 1569798997, "question_id": 58159939, "link": "https://stackoverflow.com/questions/58159939/can-i-write-ruby-2-3-7-scripts-that-are-backward-compatible-with-1-8-7", "title": "Can I write ruby 2.3.7 scripts that are backward compatible with 1.8.7?", "body": "<p>Up till now, I've been writing all my scripts in POSIX shell so that I can run them on all the machines I use (macOS, various Linuxes, FreeBSD). I like to have a unified experience where I can pull down my dotfiles from git, and have all my settings and scripts ready to go.</p>\n\n<p>However, POSIX shell is a really irritating language, and I've been considering switching to Ruby for my scripting needs. Unfortunately before I even got started, I realized that macOS ships with Ruby 2.3.7, and one of the machines I often need to use only has Ruby 1.8.7. It's a school machine for which I do not have sudo access, so I can't install a later version of Ruby.</p>\n\n<p><strong>TL;DR</strong></p>\n\n<p>Is it possible to write Ruby scripts that will run on both 1.8.7 and 2.3.7 (and hopefully everything in between)? Is there a set of guidelines I can follow that will help me avoid incompatible language features?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5", "factory-bot", "rspec-rails"], "answers": [{"comments": [{"owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "edited": false, "score": 0, "creation_date": 1569793712, "post_id": 58159302, "comment_id": 102701202, "body": "cancancan or pundit are some notable options."}, {"owner": {"reputation": 85, "user_id": 11017284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6C9dX.png?s=128&g=1", "display_name": "Othmane Namani", "link": "https://stackoverflow.com/users/11017284/othmane-namani"}, "edited": false, "score": 0, "creation_date": 1569834756, "post_id": 58159302, "comment_id": 102711194, "body": "Thank you for clarification, that&#39;s what I really need, it was authorization and not only  authentication, so I just created a simple <code>#authorized?</code>  method  and the test passed <code>def authorized?     redirect to root_path unless @post.user_id == current_user.id   end</code>"}], "tags": [], "owner": {"reputation": 2628, "user_id": 868533, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06Sjl.jpg?s=128&g=1", "display_name": "supersam654", "link": "https://stackoverflow.com/users/868533/supersam654"}, "is_accepted": true, "score": 2, "last_activity_date": 1569792243, "creation_date": 1569792243, "answer_id": 58159302, "question_id": 58158943, "link": "https://stackoverflow.com/questions/58158943/rails-5-with-devise-testing-controllers-with-rspec-destroy-action/58159302#58159302", "title": "Rails 5 with Devise, testing Controllers with Rspec (destroy action)", "body": "<p>I believe you need to add an <em>authorization</em> check to your code. <code>authenticate_user!</code> <em>authenticates</em> that the person making the request is logged in. However, it does not check if the user is <em>authorized</em> to make the request they're making.</p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/6556522/authentication-versus-authorization\">Authentication versus Authorization</a> for a bit more discussion on the two concepts. And take a look at <a href=\"https://stackoverflow.com/a/25654844/868533\">https://stackoverflow.com/a/25654844/868533</a> for a good overview of popular authorization gems in Rails. To be clear, you almost definitely want a way to authenticate users (<code>Devise</code>) along with an authorization gem.</p>\n\n<p>Assuming you decide to go with <code>CanCanCan</code> (which is a common option that I've used in past), you'd add an <code>Ability</code> class like:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Ability\n  include CanCan::Ability\n\n  def initialize(user)\n    if user.present?\n      can :destroy, Post, user_id: user.id\n    end\n  end\nend\n</code></pre>\n\n<p>Then you could add <code>before_action :check_authorization, only: %i[destroy]</code> as a new <code>before_action</code> on your controller and your tests should pass without any modification.</p>\n"}, {"comments": [{"owner": {"reputation": 85, "user_id": 11017284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6C9dX.png?s=128&g=1", "display_name": "Othmane Namani", "link": "https://stackoverflow.com/users/11017284/othmane-namani"}, "edited": false, "score": 0, "creation_date": 1569834857, "post_id": 58160167, "comment_id": 102711260, "body": "Thank you for clarification, that&#39;s what I really need, it was authorization and not only authentication, so I just created a simple #authorized? method and the test passed def authorized? redirect to root_path unless @post.user_id == current_user.id end"}], "tags": [], "owner": {"reputation": 311, "user_id": 7105526, "user_type": "registered", "profile_image": "https://graph.facebook.com/1812496678973073/picture?type=large", "display_name": "B&#249;i Nh\u1eadt Duy", "link": "https://stackoverflow.com/users/7105526/b%c3%b9i-nh%e1%ba%adt-duy"}, "is_accepted": false, "score": 1, "last_activity_date": 1569802347, "creation_date": 1569802347, "answer_id": 58160167, "question_id": 58158943, "link": "https://stackoverflow.com/questions/58158943/rails-5-with-devise-testing-controllers-with-rspec-destroy-action/58160167#58160167", "title": "Rails 5 with Devise, testing Controllers with Rspec (destroy action)", "body": "<p>Remember. you are writing a controller test. So this test is <code>unit test</code>. There are two main ways to authorize in <code>Devise</code>. They are authorize routes and authorize controller. If you using authorize routes, when you write rspec for controller, you must use <code>stub</code> to counterfeit an authorize access.  </p>\n"}], "owner": {"reputation": 85, "user_id": 11017284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6C9dX.png?s=128&g=1", "display_name": "Othmane Namani", "link": "https://stackoverflow.com/users/11017284/othmane-namani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 0, "accepted_answer_id": 58159302, "answer_count": 2, "score": 1, "last_activity_date": 1569802347, "creation_date": 1569788910, "last_edit_date": 1592644375, "question_id": 58158943, "link": "https://stackoverflow.com/questions/58158943/rails-5-with-devise-testing-controllers-with-rspec-destroy-action", "title": "Rails 5 with Devise, testing Controllers with Rspec (destroy action)", "body": "<p>I am implementing rspec test for <code>destroy</code> action, the concept is that signed in user can only destroy his own posts, and cannot destroy posts creates by other users.</p>\n<pre><code>The `new_post` is created by a user named `creator`, and another user named `user1` signed in and try to delete the `new_post`, it should not be able to delete it, because of the `  before_action :authenticate_user!, only: %i[create destroy]` in Posts controller\n</code></pre>\n<h1>Posts controller.</h1>\n<pre><code>class PostsController &lt; ApplicationController\n  before_action :set_post, only: %i[show edit update destroy]\n  before_action :current_user, only: %i[create destroy]\n  before_action :authenticate_user!, only: %i[create destroy]\n  .\n  .\n  .\n\n  def destroy\n    @post.destroy\n    respond_to do |format|\n      format.html { redirect_to posts_url, notice: 'Post was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n\n  def set_post\n    @post = Post.find(params[:id])\n  end\n\n  \n  def post_params\n    params.require(:post).permit(:content, :picture)\n  end\nend\n</code></pre>\n<h1>users controller spec</h1>\n<pre><code>require 'rails_helper'\nRSpec.describe PostsController, type: :controller do\n  context  'DELETE #destroy' do\n\n    let(:user1) {User.create!(name:&quot;John&quot;, email:&quot;john@mail.com&quot;, password:&quot;password&quot;)}\n\n    let(:creator) { User.create!(name: &quot;creator&quot;, email: &quot;creaor@gmail.com&quot;, password: &quot;password&quot;) }\n\n    let(:new_post){creator.posts.create!(content: &quot;Neque porro quisquam est qui dolorem ipsum&quot;)}\n\n    \n    it 'A user cannot delete a post created by other user' do\n      sign_in user1\n      p (new_post)\n      expect { delete :destroy, params: { id: new_post.id } }.to change(Post, :count).by(0)\n      \n    end\n  end\nend\n</code></pre>\n<h1>Failures:</h1>\n<pre><code>  1) PostsController DELETE #destroy A user cannot delete a post created by other user\n     Failure/Error: expect { delete :destroy, params: { id: new_post.id } }.to change(Post, :count).by(0)\n       expected `Post.count` to have changed by 0, but was changed by -1\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "carrierwave"], "answers": [{"comments": [{"owner": {"reputation": 786, "user_id": 9213252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/780e6b1d4404d7361b20cb02e3667a92?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan Pillai", "link": "https://stackoverflow.com/users/9213252/rohan-pillai"}, "edited": false, "score": 1, "creation_date": 1569802557, "post_id": 58158601, "comment_id": 102702555, "body": "Damn it! It was a very stupid mistake on my part. Thanks a lot."}], "tags": [], "owner": {"reputation": 36, "user_id": 11953641, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QeWRd3n-nwI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re8oQoyJBZncKjStxe7tqNEHCRJCA/photo.jpg?sz=128", "display_name": "Shaun Decker", "link": "https://stackoverflow.com/users/11953641/shaun-decker"}, "is_accepted": true, "score": 1, "last_activity_date": 1569786112, "creation_date": 1569786112, "answer_id": 58158601, "question_id": 58158451, "link": "https://stackoverflow.com/questions/58158451/referred-carrierwaves-official-documentation-but-image-not-displaying/58158601#58158601", "title": "Referred CarrierWave&#39;s official documentation but image not displaying", "body": "<p>I think you want to mount the uploader for <code>:cover</code>.</p>\n\n<pre><code>class Book &lt; ApplicationRecord\n    belongs_to :library\n    mount_uploader :cover, ImageUploader\nend\n</code></pre>\n"}], "owner": {"reputation": 786, "user_id": 9213252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/780e6b1d4404d7361b20cb02e3667a92?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan Pillai", "link": "https://stackoverflow.com/users/9213252/rohan-pillai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 58158601, "answer_count": 1, "score": 0, "last_activity_date": 1569800550, "creation_date": 1569784810, "last_edit_date": 1569800550, "question_id": 58158451, "link": "https://stackoverflow.com/questions/58158451/referred-carrierwaves-official-documentation-but-image-not-displaying", "title": "Referred CarrierWave&#39;s official documentation but image not displaying", "body": "<p>I am developing a project in Ruby on Rails and I have to upload an image for it. I came across CarrierWave for that, and hence I referred its official documentation for it. However, when I upload an image, the image is getting stored in the database but when I try to display it with <code>&lt;%= image_tag @books.cover.url %&gt;</code> I get the following error: </p>\n\n<pre><code>undefined method `url' for \"#ActionDispatch::Http::UploadedFile:0x000000000e983c68&gt;\":String\n</code></pre>\n\n<p>Please find the code for the files below:\n<br><strong>app/views/books/_form.html.erb</strong></p>\n\n<pre><code>&lt;%= form_with(model: book, local: true) do |form| %&gt;\n  &lt;% if book.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(book.errors.count, \"error\") %&gt; prohibited this book from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n        &lt;% book.errors.full_messages.each do |message| %&gt;\n          &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n        &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= form.label :cover %&gt;\n    &lt;%= form.file_field :cover %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"actions\"&gt;\n    &lt;%= form.submit %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><br><strong>app/models/book.rb</strong></p>\n\n<pre><code>class Book &lt; ApplicationRecord\n    belongs_to :library\n\n    mount_uploader :image, ImageUploader\nend\n</code></pre>\n\n<p><br><strong>app/views/books/show.html.erb</strong></p>\n\n<pre><code>&lt;p&gt;\n    &lt;strong&gt;Cover:&lt;/strong&gt;\n    &lt;%= image_tag @book.cover.url if @book.cover? %&gt;\n&lt;/p&gt;\n</code></pre>\n\n<p><br><strong>app/uploaders/image_uploader.rb</strong></p>\n\n<pre><code># encoding: utf-8\n\nclass ImageUploader &lt; CarrierWave::Uploader::Base\n\n  # Include RMagick or MiniMagick support:\n  # include CarrierWave::RMagick\n  include CarrierWave::MiniMagick\n\n  # Choose what kind of storage to use for this uploader:\n  storage :file\n  # storage :fog\n\n  # Override the directory where uploaded files will be stored.\n  # This is a sensible default for uploaders that are meant to be mounted:\n  def store_dir\n    \"uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}\"\n  end\n\n  # Provide a default URL as a default if there hasn't been a file uploaded:\n  def default_url\n  #   # For Rails 3.1+ asset pipeline compatibility:\n    #ActionController::Base.helpers.asset_path(\"fallback/\" + [version_name, \"default.png\"].compact.join('_'))\n      \"/images/fallback/\" + [version_name, \"default.png\"].compact.join('_')\n  end\n\n  # Process files as they are uploaded:\n  # process :scale =&gt; [200, 300]\n  #\n  # def scale(width, height)\n  #   # do something\n  # end\n\n  # Create different versions of your uploaded files:\n  version :thumb do\n    process :resize_to_fit =&gt; [50, 50]\n  end\n\n  # Add a white list of extensions which are allowed to be uploaded.\n  # For images you might use something like this:\n  def extension_white_list\n     %w(jpeg png)\n  end\n\n  # Override the filename of the uploaded files:\n  # Avoid using model.id or version_name here, see uploader/store.rb for details.\n  # def filename\n  #   \"something.jpg\" if original_filename\n  # end\n\nend\n</code></pre>\n\n<p><br><strong>Gemfile</strong></p>\n\n<pre><code># Upload Images\ngem 'carrierwave'\ngem 'mini_magick'\n</code></pre>\n\n<p>Ruby Version: 2.6.4\n<br>Rails Version: 6.0.0</p>\n\n<p>I read a few questions on StackOverflow as well for example <a href=\"https://stackoverflow.com/questions/41321416/undefined-method-url-for-actiondispatchhttpuploadedfile0x007f8b6134d61\">this</a>, but no solution worked for me. I even tried reading a few online tutorials for CarrierWave but they use the same code as I do and yet the code works for them but not for me.\nPlease let me know if anyone has encountered this before or if you require any more information.</p>\n"}, {"tags": ["ruby", "cucumber", "bundler"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 12138169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ece955ebdea03f0f21d568a2cbfff28?s=128&d=identicon&r=PG&f=1", "display_name": "Filip", "link": "https://stackoverflow.com/users/12138169/filip"}, "edited": false, "score": 0, "creation_date": 1569929770, "post_id": 58168339, "comment_id": 102747535, "body": "Thanks a lot, I installed another ruby version and bundle exec cucumber worked for me!"}], "tags": [], "owner": {"reputation": 3257, "user_id": 4341733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b1793f226cb3189da8bc9c6264d72b7?s=128&d=identicon&r=PG", "display_name": "diabolist", "link": "https://stackoverflow.com/users/4341733/diabolist"}, "is_accepted": true, "score": 0, "last_activity_date": 1569847976, "creation_date": 1569847976, "answer_id": 58168339, "question_id": 58158171, "link": "https://stackoverflow.com/questions/58158171/bash-cucumber-command-not-found/58168339#58168339", "title": "-bash: cucumber: command not found", "body": "<p>Its best to use an additional tool to run and manage rubies rather than using the system ruby (on OSX this is at <code>/usr/local/bin/ruby</code>) or a ruby installed by something like Homebrew.</p>\n\n<p>Have a look at rbenv <a href=\"https://github.com/rbenv/rbenv\" rel=\"nofollow noreferrer\">https://github.com/rbenv/rbenv</a></p>\n\n<p>or </p>\n\n<p>RVM <a href=\"https://rvm.io\" rel=\"nofollow noreferrer\">https://rvm.io</a></p>\n\n<p>before you try and resolve this issue. These tools allow you to setup isolated instances of ruby where its easy to ensure that you gems are installed in the correct location, and your path does not interfere in their retrieval.</p>\n\n<p>You may be able to resolve your current issue in your environment by running <code>bundle exec cucumber</code>.</p>\n"}], "owner": {"reputation": 5, "user_id": 12138169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ece955ebdea03f0f21d568a2cbfff28?s=128&d=identicon&r=PG&f=1", "display_name": "Filip", "link": "https://stackoverflow.com/users/12138169/filip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 58168339, "answer_count": 1, "score": 0, "last_activity_date": 1569847976, "creation_date": 1569782538, "question_id": 58158171, "link": "https://stackoverflow.com/questions/58158171/bash-cucumber-command-not-found", "title": "-bash: cucumber: command not found", "body": "<p>I am new to Cucumber and tried to run it for the first time on Mac. </p>\n\n<p>I installed ruby and with \n    bundle install \nit installed cucumber 3.1.2\nBut for some reason it says    </p>\n\n<pre><code>command not found    \n</code></pre>\n\n<p>In other threads it said I have to change the path but I didn't understand which one and how. If someone could provide detailed infos I would be very grateful. thanks</p>\n\n<p>cucumber is installed:</p>\n\n<pre><code>      * cucumber (3.1.2)\n         Summary: cucumber-3.1.2\n         Homepage: https://cucumber.io/\n         Path: /usr/local/lib/ruby/gems/2.6.0/gems/cucumber-3.1.2     \n</code></pre>\n\n<p>so come these information when I try</p>\n\n<pre><code>gem env\n    RubyGems Environment:\n      - RUBYGEMS VERSION: 3.0.3\n      - RUBY VERSION: 2.6.4 (2019-08-28 patchlevel 104) [x86_64-darwin18]\n      - INSTALLATION DIRECTORY: /usr/local/lib/ruby/gems/2.6.0\n      - USER INSTALLATION DIRECTORY: /Users/filip/.gem/ruby/2.6.0\n      - RUBY EXECUTABLE: /usr/local/opt/ruby/bin/ruby\n      - GIT EXECUTABLE: /usr/bin/git\n      - EXECUTABLE DIRECTORY: /usr/local/lib/ruby/gems/2.6.0/bin\n      - SPEC CACHE DIRECTORY: /Users/filip/.gem/specs\n      - SYSTEM CONFIGURATION DIRECTORY: /usr/local/Cellar/ruby/2.6.4_2/etc\n      - RUBYGEMS PLATFORMS:\n        - ruby\n        - x86_64-darwin-18\n      - GEM PATHS:\n         - /usr/local/lib/ruby/gems/2.6.0\n         - /Users/filip/.gem/ruby/2.6.0\n         - /usr/local/Cellar/ruby/2.6.4_2/lib/ruby/gems/2.6.0\n      - GEM CONFIGURATION:\n         - :update_sources =&gt; true\n         - :verbose =&gt; true\n         - :backtrace =&gt; false\n         - :bulk_threshold =&gt; 1000\n      - REMOTE SOURCES:\n         - https://rubygems.org/\n      - SHELL PATH:\n         - /usr/local/opt/ruby/bin\n         - /usr/local/bin\n         - /usr/bin\n         - /bin\n         - /usr/sbin\n         - /sbin\n         - /Applications/Wireshark.app/Contents/MacOS\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes", "rubygems", "ruby-on-rails-6"], "comments": [{"owner": {"reputation": 2007, "user_id": 716039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76b302eed6a8add5db6b3f2e1c7c9942?s=128&d=identicon&r=PG", "display_name": "dinjas", "link": "https://stackoverflow.com/users/716039/dinjas"}, "edited": false, "score": 0, "creation_date": 1569782299, "post_id": 58157950, "comment_id": 102698713, "body": "I would look at the source code of the page that gets rendered and verify the URL is what you expect. Also, look at the server log that gets generated when you submit the form - is it receiving what you think it should be?"}, {"owner": {"reputation": 449, "user_id": 10739704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XmWze.jpg?s=128&g=1", "display_name": "nileshkumar", "link": "https://stackoverflow.com/users/10739704/nileshkumar"}, "edited": false, "score": 0, "creation_date": 1569783668, "post_id": 58157950, "comment_id": 102699089, "body": "First write your route code and the <code>form_for</code> syntax in accordance with rails 6 way... Refer <code>https:&#47;&#47;edgeguides.rubyonrails.org&#47;index.html</code>"}, {"owner": {"reputation": 4839, "user_id": 265683, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9cfc3a929b053ff4abac9fb0e7a0daa8?s=128&d=identicon&r=PG", "display_name": "RenegadeAndy", "link": "https://stackoverflow.com/users/265683/renegadeandy"}, "reply_to_user": {"reputation": 2007, "user_id": 716039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76b302eed6a8add5db6b3f2e1c7c9942?s=128&d=identicon&r=PG", "display_name": "dinjas", "link": "https://stackoverflow.com/users/716039/dinjas"}, "edited": false, "score": 0, "creation_date": 1569784556, "post_id": 58157950, "comment_id": 102699304, "body": "@dinjas I actually don&#39;t even appear to get an error from the server, no problem shows there at all, which is very odd. I run my server with : <code>foreman start -f Procfile.dev </code> and The Procfile.dev has : web: bundle exec puma -C config/puma.rb webpacker: ./bin/webpack-dev-server"}, {"owner": {"reputation": 4839, "user_id": 265683, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9cfc3a929b053ff4abac9fb0e7a0daa8?s=128&d=identicon&r=PG", "display_name": "RenegadeAndy", "link": "https://stackoverflow.com/users/265683/renegadeandy"}, "reply_to_user": {"reputation": 449, "user_id": 10739704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XmWze.jpg?s=128&g=1", "display_name": "nileshkumar", "link": "https://stackoverflow.com/users/10739704/nileshkumar"}, "edited": false, "score": 0, "creation_date": 1569784793, "post_id": 58157950, "comment_id": 102699352, "body": "@nileshkumar I have now tried that also - which doesn&#39;t help and has the the same issue - your suggestion does not help."}], "answers": [{"tags": [], "owner": {"reputation": 4839, "user_id": 265683, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9cfc3a929b053ff4abac9fb0e7a0daa8?s=128&d=identicon&r=PG", "display_name": "RenegadeAndy", "link": "https://stackoverflow.com/users/265683/renegadeandy"}, "is_accepted": true, "score": 1, "last_activity_date": 1569800272, "creation_date": 1569800272, "answer_id": 58160028, "question_id": 58157950, "link": "https://stackoverflow.com/questions/58157950/rails-404-on-ajax-post-request-despite-route-being-defined/58160028#58160028", "title": "Rails 404 on Ajax POST request despite route being defined", "body": "<p>The problem was in the routes definition.</p>\n\n<p>The solution was to change:</p>\n\n<pre><code> post 'search_controller/search'\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>post 'search_controller/search', to:\"search#search\"\n</code></pre>\n"}], "owner": {"reputation": 4839, "user_id": 265683, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9cfc3a929b053ff4abac9fb0e7a0daa8?s=128&d=identicon&r=PG", "display_name": "RenegadeAndy", "link": "https://stackoverflow.com/users/265683/renegadeandy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 58160028, "answer_count": 1, "score": 0, "last_activity_date": 1569800272, "creation_date": 1569780964, "last_edit_date": 1569791580, "question_id": 58157950, "link": "https://stackoverflow.com/questions/58157950/rails-404-on-ajax-post-request-despite-route-being-defined", "title": "Rails 404 on Ajax POST request despite route being defined", "body": "<p>I am running:</p>\n\n<p>Rails 6\nRuby 2.5\nPostgres 11.5\nMac OSX</p>\n\n<p>I have the following routes defined:</p>\n\n<pre><code>Rails.application.routes.draw do\n  get 'welcome/index'\n  # For details on the DSL available within this file, see https://guides.rubyonrails.org/routing.html\n  root 'welcome#index'\n\n  post 'search_controller/search'\nend\n</code></pre>\n\n<p>I have the following code in my view:</p>\n\n<pre><code> &lt;%= form_for :search, :url =&gt; url_for(:controller =&gt; 'search_controller', :action =&gt; 'search'), remote: true do |f| %&gt;\n  &lt;%= f.text_field :search_term %&gt;\n  &lt;%= f.submit %&gt;\n</code></pre>\n\n<p>The resultant form code is:</p>\n\n<pre><code>&lt;form action=\"/search_controller/search\" accept-charset=\"UTF-8\" data-remote=\"true\" method=\"post\"&gt;\n  &lt;input type=\"text\" name=\"search[search_term]\" id=\"search_search_term\"&gt;\n  &lt;input type=\"submit\" name=\"commit\" value=\"Save Search\" data-disable-with=\"Save Search\"&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>Which to me looks as I would expect. I have also attempted a rails 6 style form as per :</p>\n\n<pre><code>&lt;%= form_with(url: \"/search_controller/search\", method: \"post\") do %&gt;\n  &lt;%= label_tag(:q, \"Search for:\") %&gt;\n  &lt;%= text_field_tag(:term) %&gt;\n  &lt;%= submit_tag(\"Search\") %&gt;\n</code></pre>\n\n<p>which results in the same issue.</p>\n\n<p>When I click the button, I get a HTTP 404 response:</p>\n\n<pre><code>rails-ujs.js:215 POST http://localhost:40250/search_controller/search 404 (Not Found)\n</code></pre>\n\n<p>When I run <code>rails routes</code> I get :</p>\n\n<pre><code>   Prefix Verb   URI Pattern                                                                              Controller#Action\n                        welcome_index GET    /welcome/index(.:format)                                                                 welcome#index\n                                 root GET    /                                                                                        welcome#index\n             search_controller_search POST   /search_controller/search(.:format)                                                      search_controller#search\n        rails_mandrill_inbound_emails POST   /rails/action_mailbox/mandrill/inbound_emails(.:format)                                  action_mailbox/ingresses/mandrill/inbound_emails#create\n        rails_postmark_inbound_emails POST   /rails/action_mailbox/postmark/inbound_emails(.:format)                                  action_mailbox/ingresses/postmark/inbound_emails#create\n           rails_relay_inbound_emails POST   /rails/action_mailbox/relay/inbound_emails(.:format)                                     action_mailbox/ingresses/relay/inbound_emails#create\n        rails_sendgrid_inbound_emails POST   /rails/action_mailbox/sendgrid/inbound_emails(.:format)                                  action_mailbox/ingresses/sendgrid/inbound_emails#create\n         rails_mailgun_inbound_emails POST   /rails/action_mailbox/mailgun/inbound_emails/mime(.:format)                              action_mailbox/ingresses/mailgun/inbound_emails#create\n       rails_conductor_inbound_emails GET    /rails/conductor/action_mailbox/inbound_emails(.:format)                                 rails/conductor/action_mailbox/inbound_emails#index\n                                      POST   /rails/conductor/action_mailbox/inbound_emails(.:format)                                 rails/conductor/action_mailbox/inbound_emails#create\n    new_rails_conductor_inbound_email GET    /rails/conductor/action_mailbox/inbound_emails/new(.:format)                             rails/conductor/action_mailbox/inbound_emails#new\n   edit_rails_conductor_inbound_email GET    /rails/conductor/action_mailbox/inbound_emails/:id/edit(.:format)                        rails/conductor/action_mailbox/inbound_emails#edit\n        rails_conductor_inbound_email GET    /rails/conductor/action_mailbox/inbound_emails/:id(.:format)                             rails/conductor/action_mailbox/inbound_emails#show\n                                      PATCH  /rails/conductor/action_mailbox/inbound_emails/:id(.:format)                             rails/conductor/action_mailbox/inbound_emails#update\n                                      PUT    /rails/conductor/action_mailbox/inbound_emails/:id(.:format)                             rails/conductor/action_mailbox/inbound_emails#update\n                                      DELETE /rails/conductor/action_mailbox/inbound_emails/:id(.:format)                             rails/conductor/action_mailbox/inbound_emails#destroy\nrails_conductor_inbound_email_reroute POST   /rails/conductor/action_mailbox/:inbound_email_id/reroute(.:format)                      rails/conductor/action_mailbox/reroutes#create\n                   rails_service_blob GET    /rails/active_storage/blobs/:signed_id/*filename(.:format)                               active_storage/blobs#show\n            rails_blob_representation GET    /rails/active_storage/representations/:signed_blob_id/:variation_key/*filename(.:format) active_storage/representations#show\n                   rails_disk_service GET    /rails/active_storage/disk/:encoded_key/*filename(.:format)                              active_storage/disk#show\n            update_rails_disk_service PUT    /rails/active_storage/disk/:encoded_token(.:format)  \n</code></pre>\n\n<p>Note that you can see the route at search_controller_search.</p>\n\n<p>Given these details, why am I getting the 404?</p>\n"}, {"tags": ["ruby", "unicorn"], "comments": [{"owner": {"reputation": 6122, "user_id": 946500, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/fqdcn.jpg?s=128&g=1", "display_name": "Pavel Oganesyan", "link": "https://stackoverflow.com/users/946500/pavel-oganesyan"}, "edited": false, "score": 1, "creation_date": 1569789398, "post_id": 58157401, "comment_id": 102700350, "body": "Are your sure that error messages are still visible in production mode? As far as I know, default Server Error Page will be shown in production mode by default."}, {"owner": {"reputation": 557, "user_id": 5527374, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/OQmV2.png?s=128&g=1", "display_name": "tscheingeld", "link": "https://stackoverflow.com/users/5527374/tscheingeld"}, "reply_to_user": {"reputation": 6122, "user_id": 946500, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/fqdcn.jpg?s=128&g=1", "display_name": "Pavel Oganesyan", "link": "https://stackoverflow.com/users/946500/pavel-oganesyan"}, "edited": false, "score": 0, "creation_date": 1569881614, "post_id": 58157401, "comment_id": 102732445, "body": "I don&#39;t know what production mode is, so that&#39;s probably the problem. I do know that the errors are being displayed."}, {"owner": {"reputation": 6122, "user_id": 946500, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/fqdcn.jpg?s=128&g=1", "display_name": "Pavel Oganesyan", "link": "https://stackoverflow.com/users/946500/pavel-oganesyan"}, "edited": false, "score": 0, "creation_date": 1569911733, "post_id": 58157401, "comment_id": 102738595, "body": "<a href=\"https://stackoverflow.com/questions/30119144/rails-how-to-switch-between-dev-and-production-mode\" title=\"rails how to switch between dev and production mode\">stackoverflow.com/questions/30119144/&hellip;</a> - this will help, In short, you should run your server in development mode (it is default) on dev machines and production mode on the real life server. Production mode will hide error messages."}], "owner": {"reputation": 557, "user_id": 5527374, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/OQmV2.png?s=128&g=1", "display_name": "tscheingeld", "link": "https://stackoverflow.com/users/5527374/tscheingeld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1569776706, "creation_date": 1569776706, "question_id": 58157401, "link": "https://stackoverflow.com/questions/58157401/how-do-i-turn-off-error-details-in-unicorn", "title": "How do I turn off error details in Unicorn?", "body": "<p>I'm using Ruby and Unicorn for developing my web pages. When there's an error in my page Unicorn displays a page detailing the error and the lines in my code where the error occurs. That's fine for development, but I don't want so much detail in the public web page. I know there's a way to turn off all that detail but darned if I can remember it for find the info online.</p>\n\n<p>So, how do I turn off all that detail?</p>\n"}, {"tags": ["ruby", "hash", "sum"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 5, "creation_date": 1569765034, "post_id": 58155702, "comment_id": 102694401, "body": "That doesn&#39;t look like valid Ruby code, or is it? Can you update your question with the proper code for the problem?"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 12000739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379129ea7f9ba47c4c6d660d161e4f29?s=128&d=identicon&r=PG&f=1", "display_name": "fairyduststars", "link": "https://stackoverflow.com/users/12000739/fairyduststars"}, "edited": false, "score": 0, "creation_date": 1569769683, "post_id": 58155831, "comment_id": 102695559, "body": "Basically, I&#39;m trying to create a an app that takes orders. I have a hash with a list of dishes and prices, and I have another method where I add the dishes and quantities e.g. potato wedges X 2 , diet coke x 3, and I need to find a way to get the total cost of these orders."}, {"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "reply_to_user": {"reputation": 27, "user_id": 12000739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379129ea7f9ba47c4c6d660d161e4f29?s=128&d=identicon&r=PG&f=1", "display_name": "fairyduststars", "link": "https://stackoverflow.com/users/12000739/fairyduststars"}, "edited": false, "score": 1, "creation_date": 1569769929, "post_id": 58155831, "comment_id": 102695621, "body": "Edit the question to specify the problem. Try to explain in detail what you need, add examples and desired outputs for those examples."}, {"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "reply_to_user": {"reputation": 27, "user_id": 12000739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379129ea7f9ba47c4c6d660d161e4f29?s=128&d=identicon&r=PG&f=1", "display_name": "fairyduststars", "link": "https://stackoverflow.com/users/12000739/fairyduststars"}, "edited": false, "score": 0, "creation_date": 1569770205, "post_id": 58155831, "comment_id": 102695698, "body": "@fairyduststars A good start would be to make your code in the question valid (when you run it it shouldn&#39;t throw an error)"}], "tags": [], "owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "is_accepted": false, "score": 2, "last_activity_date": 1569764733, "creation_date": 1569764733, "answer_id": 58155831, "question_id": 58155702, "link": "https://stackoverflow.com/questions/58155702/summing-a-hash-how-can-i-add-find-the-total-cost-for-the-orders-in-this-hash/58155831#58155831", "title": "Summing a Hash - how can I add find the total cost for the orders in this hash", "body": "<p>Assuming you meant to write a hash like this:</p>\n\n<pre><code>basket = { \n\"potato wedges:4.45\" =&gt; 2,\n\"tiramisu:4.95\" =&gt; 2,\n\"diet coke:1.75\" =&gt; 2\n}\n</code></pre>\n\n<p>You could get the sum like this:</p>\n\n<pre><code>basket.sum {|k,v| k.split(':')[1].to_f * v}\n#-&gt; 22.3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1569785385, "creation_date": 1569785385, "answer_id": 58158500, "question_id": 58155702, "link": "https://stackoverflow.com/questions/58155702/summing-a-hash-how-can-i-add-find-the-total-cost-for-the-orders-in-this-hash/58158500#58158500", "title": "Summing a Hash - how can I add find the total cost for the orders in this hash", "body": "<p>One option is to use vector methods.</p>\n\n<pre><code>h = { \n  \"potato wedges:4.45\" =&gt; 2,\n  \"tiramisu:4.95\" =&gt; 2,\n  \"diet coke:1.75\" =&gt; 2\n}\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>require 'matrix'\n\nVector[*h.keys.map { |s| s[/(?&lt;=:).+/].to_f }].inner_product(Vector[*h.values])\n  #=&gt; 22.3\n</code></pre>\n\n<p>See <a href=\"https://ruby-doc.org/stdlib-2.6.3/libdoc/matrix/rdoc/Vector.html#method-c-5B-5D\" rel=\"nofollow noreferrer\">Vector::[]</a>, <a href=\"https://ruby-doc.org/core-2.6.3/String.html#method-i-5B-5D\" rel=\"nofollow noreferrer\">String#[]</a> and <a href=\"https://ruby-doc.org/stdlib-2.6.3/libdoc/matrix/rdoc/Vector.html#method-i-inner_product\" rel=\"nofollow noreferrer\">Vector#inner_product</a>. The regular expression <code>/(?&lt;=:).+/</code> reads, \"match one or more characters (<code>.+</code>) immediately preceded by a colon\", <code>(?&lt;=:)</code> being a <em>postive lookbehind</em>.</p>\n"}], "owner": {"reputation": 27, "user_id": 12000739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379129ea7f9ba47c4c6d660d161e4f29?s=128&d=identicon&r=PG&f=1", "display_name": "fairyduststars", "link": "https://stackoverflow.com/users/12000739/fairyduststars"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1569785385, "creation_date": 1569763876, "question_id": 58155702, "link": "https://stackoverflow.com/questions/58155702/summing-a-hash-how-can-i-add-find-the-total-cost-for-the-orders-in-this-hash", "title": "Summing a Hash - how can I add find the total cost for the orders in this hash", "body": "<pre><code>basket = { \n\"potato wedges\" : 4.45 =&gt; 2,\n\"tiramisu : 4.95 =&gt; 2,\n\"diet coke\" : 1.75 =&gt; 2\n}\n</code></pre>\n\n<p>I want to sum this hash - the values represent the number of items, the number in the key represents the price.\nhoW COULD i calculate the total price of these items\\thANK YOU</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1569765643, "post_id": 58155564, "comment_id": 102694551, "body": "No; <code>two</code> is the parameter <i>in</i> <code>test</code> and has no meaning outside of the function (unless it&#39;s declared somewhere else, obviously). What&#39;s the actual goal?"}], "answers": [{"tags": [], "owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "is_accepted": false, "score": 0, "last_activity_date": 1569769354, "creation_date": 1569769354, "answer_id": 58156418, "question_id": 58155564, "link": "https://stackoverflow.com/questions/58155564/can-i-append-a-string-to-an-optional-parameter-while-calling-said-function/58156418#58156418", "title": "Can I append a string to an optional parameter while calling said function?", "body": "<p>You can define <code>test</code> like this:</p>\n\n<pre><code>def test(two: 'foo', other: '')\n  puts two + other\nend\n</code></pre>\n\n<p>Calling <code>test</code> would have the same effect as your function, but calling <code>test(other: 'bar')</code> would give you the desired output:</p>\n\n<pre><code>test\n#-&gt; 'food'\ntest(other: 'bar')\n#-&gt; 'foobar'\n</code></pre>\n\n<p>You could also do this</p>\n\n<pre><code>def test(two: '')\n  puts 'foo' + two\nend\n</code></pre>\n\n<p>Then you could do this(closer to your attempt):</p>\n\n<pre><code>test(two: 'bar')\n#-&gt; 'foobar'\n</code></pre>\n\n<p>But you can't change the variables inside the method from the outside by just calling them by their name in the parameters.</p>\n"}], "owner": {"reputation": 79, "user_id": 3655977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a44a54f5e60bf707b23efc6240cceac6?s=128&d=identicon&r=PG&f=1", "display_name": "RubyR", "link": "https://stackoverflow.com/users/3655977/rubyr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569769354, "creation_date": 1569762979, "question_id": 58155564, "link": "https://stackoverflow.com/questions/58155564/can-i-append-a-string-to-an-optional-parameter-while-calling-said-function", "title": "Can I append a string to an optional parameter while calling said function?", "body": "<p>For example, if I have a function as follows </p>\n\n<pre><code>def test(two: 'foo')\n  puts two\nend\n</code></pre>\n\n<p>If I call it as <code>test</code>, I should get the output <code>foo</code>. </p>\n\n<p>But if I want the output to be <code>foobar</code>, can I somehow call the function like <code>test(two + 'bar')</code>?</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 7, "last_activity_date": 1569710160, "creation_date": 1569710160, "answer_id": 58150811, "question_id": 58150669, "link": "https://stackoverflow.com/questions/58150669/simple-validate-five-digit-zipcode-using-regex/58150811#58150811", "title": "Simple Validate Five Digit Zipcode using Regex", "body": "<p>I suggest you use a <code>case statement</code> here because it uses the methods <code>===</code> for determining matches.</p>\n\n<pre><code>response = gets.chomp\n\ncase response\nwhen \"exit\"\n  puts \"Enjoy your movie!\"\nwhen /\\A\\d{5}\\z/\n  # process zip code given by response\nelse\n  # ?\nend\n</code></pre>\n\n<p>Note <code>/\\A\\d{5}\\z/ === \"01234\" #=&gt; true</code>. See <a href=\"https://ruby-doc.org/core-2.6.3/Regexp.html#method-i-3D-3D-3D\" rel=\"noreferrer\">Regexp#===</a>. The regular expression reads, \"match the beginning of the string (<code>\\A</code>), followed by five digits (<code>\\d{5}</code>), followed by the end of the string (<code>\\z</code>).</p>\n\n<p><code>when \"exit\"</code> could be replaced by, for example, <code>/\\A[Ee]xit\\z/</code> if it is desired that the response <code>\"Exit\"</code> should have the same effect as <code>\"exit\"</code>. </p>\n"}], "owner": {"reputation": 65, "user_id": 11909908, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tDLSKBJye0I/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcGL6LW8PrMNSMAj52VbwmuvdTLyQ/photo.jpg?sz=128", "display_name": "Levi Borland", "link": "https://stackoverflow.com/users/11909908/levi-borland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 58150811, "answer_count": 1, "score": 2, "last_activity_date": 1581189906, "creation_date": 1569708409, "last_edit_date": 1581189906, "question_id": 58150669, "link": "https://stackoverflow.com/questions/58150669/simple-validate-five-digit-zipcode-using-regex", "title": "Simple Validate Five Digit Zipcode using Regex", "body": "<p>I am writing a program that allows a user to enter a five-digit zip code to get a listing of local movie theaters and their listings. I am scraping the information later on in the program to populate theater and movie objects. Eventually, I will figure out a way to persist all of that data. But at this point in my CLI file, I am wanting the user to enter either a five-digit zip code or the word exit. Here is the code so far...</p>\n\n<pre><code>def program_input\n  input = gets\n  if input.chomp == \"exit\"\n    puts \"Enjoy your movie!\"\n  elsif input.chomp == #five digit zipcode validator\n    sleep(0.5)\n    print \"Calculating\"\n    sleep(0.25)\n    print \".\"\n    sleep(0.25)\n    print \".\"\n    sleep(0.25)\n    print \".\"\n    zip_code = input.chomp\n    scraper = Scraper.new(zip_code)\n  end\nend\n</code></pre>\n\n<p>What I need is on the <code>elsif</code> statement line. I want to use <code>regex</code> or something to validate that the input is a five-digit number like a zip code. I do not want to use an external gem, and I don't want to validate against a list of all five-digit zip codes. </p>\n\n<p>I thought about validating the number to be in a range of 00001 to 99999. Or look at a list of zipcodes and find the one that has the lowest number and the zip code that numerically is higher and to accept all numbers in that range, but I realize that there would be a ton of gaps of numbers that fit that logic, without actually being a valid zip code. </p>\n\n<p>Essentially I want the program to exit if the user types exit. I am going to be adding the downcase statement there to decapitalize any letters before checking if it is lowercase \"exit\". But if the user types in a valid five-digit zip code, I would like it to continue with the program....As in inject that zipcode into a URL, and then scraping that URL for the information the program needs before building theater and movie objects and returning that information to the user. I didn't show that part of the code because it is already written and working when a 5 digit zip is passed on the <code>scraper</code> line.</p>\n\n<p>Any help would be greatly appreciated.</p>\n"}]