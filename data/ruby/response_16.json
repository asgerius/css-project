[{"tags": ["ruby", "curl", "faraday"], "answers": [{"tags": [], "owner": {"reputation": 968, "user_id": 132048, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1e326ae7b416d9e62198c11a40d00817?s=128&d=identicon&r=PG", "display_name": "Michael Lang", "link": "https://stackoverflow.com/users/132048/michael-lang"}, "is_accepted": true, "score": 0, "last_activity_date": 1431443532, "creation_date": 1431443532, "answer_id": 30194938, "question_id": 29956664, "link": "https://stackoverflow.com/questions/29956664/faraday-ssl3-cipher/30194938#30194938", "title": "Faraday ssl3 cipher", "body": "<p>The correct way to limit the cipher suite does depend on the adapter used for Faraday.  For the default adapter, the \"version\" key should be set to :SSLv3</p>\n\n<pre><code>SSL_OPTS = {:verify =&gt; false,\n  :ca_path =&gt; \"/usr/lib/ssl/certs\",\n  :client_cert  =&gt; OpenSSL::X509::Certificate.new(File.read(\"/etc/ssl/mwlang.crt\")),\n  :client_key   =&gt; OpenSSL::PKey::RSA.new(File.read(\"/etc/ssl/mwlang.key\")),\n  :version =&gt; :SSLv3\n}\n\nFaraday.new(:url =&gt; 'https://10.10.10.10', :ssl =&gt; SSL_OPTS) do |faraday|\n  faraday.adapter Faraday.default_adapter\nend\n</code></pre>\n\n<p>As others have pointed out to me, SSLv3 is subjected to the POODLE vulnerability.  Please be aware of this if you're using only SSLv3 ciphers:  <a href=\"https://www.us-cert.gov/ncas/alerts/TA14-290A\" rel=\"nofollow\">https://www.us-cert.gov/ncas/alerts/TA14-290A</a></p>\n"}], "owner": {"reputation": 968, "user_id": 132048, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/1e326ae7b416d9e62198c11a40d00817?s=128&d=identicon&r=PG", "display_name": "Michael Lang", "link": "https://stackoverflow.com/users/132048/michael-lang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 461, "favorite_count": 0, "accepted_answer_id": 30194938, "answer_count": 1, "score": 0, "last_activity_date": 1431443532, "creation_date": 1430351716, "question_id": 29956664, "link": "https://stackoverflow.com/questions/29956664/faraday-ssl3-cipher", "title": "Faraday ssl3 cipher", "body": "<p>I have a working connection with curl that basically requires I specify -ssl3 as the cipher suite to use as tls1 or any other ciphers causes the server to fail the hello handshake.  The curl command that works:</p>\n\n<pre><code>curl https://10.10.10.10/soap/rpc -k -v -ssl3 --cert /etc/ssl/mwlang.crt --key /etc/ssl/mwlang.key\n</code></pre>\n\n<p>I did determine with curl that the presence of other cipher suites cause the handshake to fail, but I'm not sure how to specify the ssl3 cipher with Faraday...my attempt so far:</p>\n\n<pre><code>SSL_OPTS = {:verify =&gt; false,\n  :ca_path =&gt; \"/usr/lib/ssl/certs\",\n  :client_cert  =&gt; OpenSSL::X509::Certificate.new(File.read(\"/etc/ssl/mwlang.crt\")),\n  :client_key   =&gt; OpenSSL::PKey::RSA.new(File.read(\"/etc/ssl/mwlang.key\")),\n}\n\nFaraday.new(:url =&gt; 'https://10.10.10.10', :ssl =&gt; SSL_OPTS) do |faraday|\n  faraday.adapter Faraday.default_adapter\nend\n</code></pre>\n"}, {"tags": ["javascript", "ruby", "angularjs", "selenium"], "comments": [{"owner": {"reputation": 3026, "user_id": 3932942, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ea692da698891091e138bc7cc52ec647?s=128&d=identicon&r=PG&f=1", "display_name": "Stan E", "link": "https://stackoverflow.com/users/3932942/stan-e"}, "edited": false, "score": 0, "creation_date": 1430848519, "post_id": 29956640, "comment_id": 48234856, "body": "your application seems like an angularjs one. You are not using protractor, right?"}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "edited": false, "score": 0, "creation_date": 1430848676, "post_id": 29956640, "comment_id": 48234933, "body": "I am afraid the solution would depend on <code>upload()</code> function implementation. Can you provide it? Thanks."}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "edited": false, "score": 0, "creation_date": 1430848850, "post_id": 29956640, "comment_id": 48235066, "body": "Also a public demo of the upload link like this would help to provide a reliable solution."}, {"owner": {"reputation": 3026, "user_id": 3932942, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ea692da698891091e138bc7cc52ec647?s=128&d=identicon&r=PG&f=1", "display_name": "Stan E", "link": "https://stackoverflow.com/users/3932942/stan-e"}, "edited": false, "score": 0, "creation_date": 1430849121, "post_id": 29956640, "comment_id": 48235241, "body": "Yes, additionaly it looks like a file upload will appear after clicking on the link in source code. That&#39;s why we need to know what will happen after clicking :)"}, {"owner": {"reputation": 11294, "user_id": 609043, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/979a0b3e2f9d19f8e1acf34716221c59?s=128&d=identicon&r=PG", "display_name": "ibaralf", "link": "https://stackoverflow.com/users/609043/ibaralf"}, "edited": false, "score": 0, "creation_date": 1430869946, "post_id": 29956640, "comment_id": 48245059, "body": "It was actually making a call to a browser plugin, that&#39;s why I couldn&#39;t find the element. For this scenario, I think that an outside executable such as AutoIT is the only possible solution."}], "answers": [{"comments": [{"owner": {"reputation": 11294, "user_id": 609043, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/979a0b3e2f9d19f8e1acf34716221c59?s=128&d=identicon&r=PG", "display_name": "ibaralf", "link": "https://stackoverflow.com/users/609043/ibaralf"}, "edited": false, "score": 0, "creation_date": 1430785348, "post_id": 30042016, "comment_id": 48200176, "body": "I saw autoIT when I was googling for solutions, but it seems just used for windows. Is there something similar for Mac or Linux?"}, {"owner": {"reputation": 2918, "user_id": 4848267, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KE9Nl.png?s=128&g=1", "display_name": "Ciro Pedrini", "link": "https://stackoverflow.com/users/4848267/ciro-pedrini"}, "reply_to_user": {"reputation": 11294, "user_id": 609043, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/979a0b3e2f9d19f8e1acf34716221c59?s=128&d=identicon&r=PG", "display_name": "ibaralf", "link": "https://stackoverflow.com/users/609043/ibaralf"}, "edited": false, "score": 0, "creation_date": 1430785647, "post_id": 30042016, "comment_id": 48200258, "body": "In the same web there is a sample using AppleScript for Mac: <a href=\"http://www.automationtesting.co.in/2009/08/selenium-handling-dialog-box-in-mac.html\" rel=\"nofollow noreferrer\">automationtesting.co.in/2009/08/&hellip;</a>"}, {"owner": {"reputation": 11294, "user_id": 609043, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/979a0b3e2f9d19f8e1acf34716221c59?s=128&d=identicon&r=PG", "display_name": "ibaralf", "link": "https://stackoverflow.com/users/609043/ibaralf"}, "edited": false, "score": 0, "creation_date": 1430869994, "post_id": 30042016, "comment_id": 48245074, "body": "Thanks, I think this is the feasible solution."}], "tags": [], "owner": {"reputation": 2918, "user_id": 4848267, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KE9Nl.png?s=128&g=1", "display_name": "Ciro Pedrini", "link": "https://stackoverflow.com/users/4848267/ciro-pedrini"}, "is_accepted": true, "score": 0, "last_activity_date": 1430783826, "creation_date": 1430783826, "answer_id": 30042016, "question_id": 29956640, "link": "https://stackoverflow.com/questions/29956640/selenium-webdriver-how-to-do-file-upload-with-ng-click-uploadfiles/30042016#30042016", "title": "Selenium webdriver how to do file upload with ng-click=&quot;upload(&#39;files&#39;)&quot;", "body": "<p>Last time that i needed this WebDriver couldn't interact with dialogs cause dialogs are the domain of the operating system and not the webpage.</p>\n\n<p>One option would be to skip the file dialog entirely and issue a POST/GET/PUT, but this requires more advanced knowledge of the website as well as understanding of how to construct a request.</p>\n\n<p>What i did in that ocation was to create an auxiliar program executable for dealing with the dialog, so i called it in the middle of the Selenium script, just after generating the dialog.</p>\n\n<p><em>Here you have a sample of the last approach using Java &amp; AutoIT: <a href=\"http://www.automationtesting.co.in/2009/07/selenium-handle-dialogs.html\" rel=\"nofollow\">http://www.automationtesting.co.in/2009/07/selenium-handle-dialogs.html</a></em></p>\n"}, {"tags": [], "owner": {"reputation": 590, "user_id": 2335488, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/nxG8i.jpg?s=128&g=1", "display_name": "sparkyShorts", "link": "https://stackoverflow.com/users/2335488/sparkyshorts"}, "is_accepted": false, "score": 1, "last_activity_date": 1430860935, "last_edit_date": 1495541665, "creation_date": 1430860935, "answer_id": 30063444, "question_id": 29956640, "link": "https://stackoverflow.com/questions/29956640/selenium-webdriver-how-to-do-file-upload-with-ng-click-uploadfiles/30063444#30063444", "title": "Selenium webdriver how to do file upload with ng-click=&quot;upload(&#39;files&#39;)&quot;", "body": "<p>See this post <a href=\"https://stackoverflow.com/questions/24145054/using-selenium-iwebdriver-to-test-an-activex-control-possible?noredirect=1#comment37272381_24145054\">here</a>. I had this question as well, and AutoIt was the answer to uploading a file when you don't have an input option in HTML. </p>\n\n<p>Here is a link to <a href=\"https://www.autoitscript.com/site/autoit/\" rel=\"nofollow noreferrer\">AutoIt</a>. They have some tutorials to get you started.</p>\n"}], "owner": {"reputation": 11294, "user_id": 609043, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/979a0b3e2f9d19f8e1acf34716221c59?s=128&d=identicon&r=PG", "display_name": "ibaralf", "link": "https://stackoverflow.com/users/609043/ibaralf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1027, "favorite_count": 2, "accepted_answer_id": 30042016, "answer_count": 2, "score": 2, "last_activity_date": 1430860935, "creation_date": 1430351525, "last_edit_date": 1430782932, "question_id": 29956640, "link": "https://stackoverflow.com/questions/29956640/selenium-webdriver-how-to-do-file-upload-with-ng-click-uploadfiles", "title": "Selenium webdriver how to do file upload with ng-click=&quot;upload(&#39;files&#39;)&quot;", "body": "<p>I'm trying to see if this is possible - to automate a file upload when the HTML code is NOT an</p>\n\n<pre><code>&lt; input type='file' &gt;\n</code></pre>\n\n<p>but rather a link </p>\n\n<pre><code>&lt;a ng-click=\"upload('files')\"&gt; File Upload &lt;/a&gt;\n</code></pre>\n\n<p>When this link is clicked, it automatically opens a file selector to choose which file you want to upload.\nThe problem is, it does not contain an INPUT type='file' element which I could locate and then use webdriver.send_keys('/Users/myname/testfile.txt').</p>\n\n<p>How can I go about trying to get selenium webdriver to handle this file upload? </p>\n\n<p>Any help to direct me to a solution is greatly appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 1, "creation_date": 1430351764, "post_id": 29956626, "comment_id": 48034008, "body": "Are you running a cache backend that supports expiration times on production, such as memcached or redis?"}, {"owner": {"reputation": 490, "user_id": 27894, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/9uBnH.jpg?s=128&g=1", "display_name": "Amit Kothari", "link": "https://stackoverflow.com/users/27894/amit-kothari"}, "reply_to_user": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1430351934, "post_id": 29956626, "comment_id": 48034065, "body": "@infused no - nothing at all. The only thing available is either in-memory or the local filesystem. It&#39;s primitive. Perhaps the local filesystem could be a workable option, but needs cache invalidation written manually, given that no extra gems or any other changes are possible. The reason for this question is mainly because I am so highly restricted in what I can do to optimise this fragment."}, {"owner": {"reputation": 6898, "user_id": 2012487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631fa1981d36a3b5f71426c821a8064?s=128&d=identicon&r=PG", "display_name": "Aguardientico", "link": "https://stackoverflow.com/users/2012487/aguardientico"}, "edited": false, "score": 1, "creation_date": 1430352559, "post_id": 29956626, "comment_id": 48034253, "body": "Did you try with Rails.cache? it allows both in-memory and filesystem and also supports expires_in. Give a look: <a href=\"http://guides.rubyonrails.org/caching_with_rails.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/caching_with_rails.html</a>"}, {"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1430352625, "post_id": 29956626, "comment_id": 48034271, "body": "What version of Rails are you running?"}, {"owner": {"reputation": 490, "user_id": 27894, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/9uBnH.jpg?s=128&g=1", "display_name": "Amit Kothari", "link": "https://stackoverflow.com/users/27894/amit-kothari"}, "reply_to_user": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1430362021, "post_id": 29956626, "comment_id": 48036948, "body": "@infused it&#39;s Ruby Enterprise 1.8.7"}, {"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1430362680, "post_id": 29956626, "comment_id": 48037107, "body": "What version is Rails?"}, {"owner": {"reputation": 490, "user_id": 27894, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/9uBnH.jpg?s=128&g=1", "display_name": "Amit Kothari", "link": "https://stackoverflow.com/users/27894/amit-kothari"}, "edited": false, "score": 0, "creation_date": 1430363114, "post_id": 29956626, "comment_id": 48037211, "body": "Sorry, it&#39;s 3.0.11 for Rails"}], "answers": [{"comments": [{"owner": {"reputation": 490, "user_id": 27894, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/9uBnH.jpg?s=128&g=1", "display_name": "Amit Kothari", "link": "https://stackoverflow.com/users/27894/amit-kothari"}, "edited": false, "score": 0, "creation_date": 1430361998, "post_id": 29957184, "comment_id": 48036943, "body": "Thanks for this. I just tried it and it doesn&#39;t seem to work for me. The Ruby Enterprise version used in this production instance is 1.8.7 in case it helps"}, {"owner": {"reputation": 6898, "user_id": 2012487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631fa1981d36a3b5f71426c821a8064?s=128&d=identicon&r=PG", "display_name": "Aguardientico", "link": "https://stackoverflow.com/users/2012487/aguardientico"}, "reply_to_user": {"reputation": 490, "user_id": 27894, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/9uBnH.jpg?s=128&g=1", "display_name": "Amit Kothari", "link": "https://stackoverflow.com/users/27894/amit-kothari"}, "edited": false, "score": 0, "creation_date": 1430365924, "post_id": 29957184, "comment_id": 48037983, "body": "Weird, based on rails 3.0 source code it should works: <a href=\"https://github.com/rails/rails/blob/3-0-stable/activesupport/lib/active_support/cache.rb\" rel=\"nofollow noreferrer\">github.com/rails/rails/blob/3-0-stable/activesupport/lib/&hellip;</a>"}, {"owner": {"reputation": 6898, "user_id": 2012487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631fa1981d36a3b5f71426c821a8064?s=128&d=identicon&r=PG", "display_name": "Aguardientico", "link": "https://stackoverflow.com/users/2012487/aguardientico"}, "reply_to_user": {"reputation": 490, "user_id": 27894, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/9uBnH.jpg?s=128&g=1", "display_name": "Amit Kothari", "link": "https://stackoverflow.com/users/27894/amit-kothari"}, "edited": false, "score": 0, "creation_date": 1430366229, "post_id": 29957184, "comment_id": 48038069, "body": "@AmitKothari, the syntax I&#39;ve used is not supported in ruby 1.8.7, I&#39;ve updated the answer to add the correct syntax for you ruby version"}], "tags": [], "owner": {"reputation": 6898, "user_id": 2012487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631fa1981d36a3b5f71426c821a8064?s=128&d=identicon&r=PG", "display_name": "Aguardientico", "link": "https://stackoverflow.com/users/2012487/aguardientico"}, "is_accepted": false, "score": -1, "last_activity_date": 1430366183, "last_edit_date": 1430366183, "creation_date": 1430355162, "answer_id": 29957184, "question_id": 29956626, "link": "https://stackoverflow.com/questions/29956626/rails-fragment-that-needs-caching-for-5-minutes/29957184#29957184", "title": "Rails fragment that needs caching for 5 minutes", "body": "<p><code>ActiveSupport</code> part of Rails allows to use cache.</p>\n\n<p>You should verify that cache is enabled so in <code>config/enviroments/production.rb</code> you should set the following flag:</p>\n\n<pre><code>config.action_controller.perform_caching = true\n</code></pre>\n\n<p>To cache <code>@quickbar_posts</code> for 5 minutes, you can use the following code:</p>\n\n<pre><code>@quickbar_posts = Rails.cache.fetch(\"quickbar_posts\", expires_in: 5.minutes) do\n    SETTINGS[:news_groups].map{|group_short_name| quickbar_posts(group_short_name)}\nend\n</code></pre>\n\n<p>Ruby 1.8.7 syntax:</p>\n\n<pre><code>@quickbar_posts = Rails.cache.fetch(\"quickbar_posts\", :expires_in =&gt; 5.minutes) do\n    SETTINGS[:news_groups].map{|group_short_name| quickbar_posts(group_short_name)}\nend\n</code></pre>\n\n<p>You can use different cache stores, to set the one you want, you can do it in <code>config/application.rb</code> on in <code>config/environments/your_environment.rb</code> (production/test/deploy)</p>\n\n<p>To use <em>ActiveSupport::Cache::MemoryStore</em>:</p>\n\n<pre><code>config.cache_store = :memory_store\n</code></pre>\n\n<p>To use <em>ActiveSupport::Cache::FileStore</em>:</p>\n\n<pre><code>config.cache_store = :file_store, \"/path/to/cache/directory\"\n</code></pre>\n"}], "owner": {"reputation": 490, "user_id": 27894, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/9uBnH.jpg?s=128&g=1", "display_name": "Amit Kothari", "link": "https://stackoverflow.com/users/27894/amit-kothari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 781, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1430366183, "creation_date": 1430351435, "last_edit_date": 1430352055, "question_id": 29956626, "link": "https://stackoverflow.com/questions/29956626/rails-fragment-that-needs-caching-for-5-minutes", "title": "Rails fragment that needs caching for 5 minutes", "body": "<p>These are some lines I have in Rails:</p>\n\n<pre><code>@quickbar_posts = []\nSETTINGS[:news_groups].each do |group_short_name|\n  @quickbar_posts &lt;&lt; quickbar_posts(group_short_name)\nend\n</code></pre>\n\n<p>What I would like is that variable @quickbar_posts to be cached in memory for 5 minutes OR for the final output of the function quickbar_posts (after it has exited the for-loop) to be saved locally in the filesystem for 5 minutes.</p>\n\n<p>My problem is that every time this is run, it's highly inefficient for this to be fetched every time, so I just want it saved for 5 minutes, then fetched again, invalidating the previously cached item if the age of the cached item is > 5 minutes.</p>\n\n<p>In addition, adding or changing gems is not possible - since this code is running in production and for reasons that can't be explained here, nothing else can be changed in production. </p>\n"}, {"tags": ["ruby", "windows"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1430352809, "post_id": 29956603, "comment_id": 48034318, "body": "Please post the error messages."}, {"owner": {"reputation": 23, "user_id": 4848554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b96a3a5670704a29eac77f2ca124004?s=128&d=identicon&r=PG&f=1", "display_name": "rufus", "link": "https://stackoverflow.com/users/4848554/rufus"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1430353919, "post_id": 29956603, "comment_id": 48034634, "body": "Added to topic.  Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 4848554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b96a3a5670704a29eac77f2ca124004?s=128&d=identicon&r=PG&f=1", "display_name": "rufus", "link": "https://stackoverflow.com/users/4848554/rufus"}, "edited": false, "score": 0, "creation_date": 1430357458, "post_id": 29957286, "comment_id": 48035669, "body": "That&#39;s wonderful.  Thank you!  I&#39;ve changed it to use FileUtils.cp to preserve the contents of the original directories.  However, this unexpectedly results in some serious resource bloat.  Judging by the time it takes to complete the operations, the entire contents of the directories are added to the array.  The output in the txts directory is as intended, though: the new txt files only.  Is there a way we can be more selective when constructing the array?"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 23, "user_id": 4848554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b96a3a5670704a29eac77f2ca124004?s=128&d=identicon&r=PG&f=1", "display_name": "rufus", "link": "https://stackoverflow.com/users/4848554/rufus"}, "edited": false, "score": 0, "creation_date": 1430358459, "post_id": 29957286, "comment_id": 48035978, "body": "More selective in what way? You say &quot;not just the txt files \u2026 but the rest of the data as well,&quot; but the original script doesn&#39;t I differentiate between different kinds of files. Can you explain which files you want copied and which you don&#39;t?"}, {"owner": {"reputation": 23, "user_id": 4848554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b96a3a5670704a29eac77f2ca124004?s=128&d=identicon&r=PG&f=1", "display_name": "rufus", "link": "https://stackoverflow.com/users/4848554/rufus"}, "edited": false, "score": 0, "creation_date": 1430359341, "post_id": 29957286, "comment_id": 48036193, "body": "The output achieved by your script is exactly what I want.  Only the txts are copied to parent directory \\txts.  However, when I changed FileUtils.mv to FileUtils.cp, processing time dramatically increased, and the directories that take the longest to copy the txt from are those with the largest amounts of incidental additional data.  This leads me to believe that ALL data is being copied, with non-txt data being disposed of when the operation completes, leaving only the desired txts in the \\txts directory.  This isn&#39;t a deal-breaker, but inefficient and will lead to very long operations..."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 23, "user_id": 4848554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b96a3a5670704a29eac77f2ca124004?s=128&d=identicon&r=PG&f=1", "display_name": "rufus", "link": "https://stackoverflow.com/users/4848554/rufus"}, "edited": false, "score": 0, "creation_date": 1430363637, "post_id": 29957286, "comment_id": 48037360, "body": "I added some code that shows how to selectively copy files with a <code>.txt</code> extension. I hope that helps."}, {"owner": {"reputation": 23, "user_id": 4848554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b96a3a5670704a29eac77f2ca124004?s=128&d=identicon&r=PG&f=1", "display_name": "rufus", "link": "https://stackoverflow.com/users/4848554/rufus"}, "edited": false, "score": 1, "creation_date": 1430365610, "post_id": 29957286, "comment_id": 48037902, "body": "Adding the regex bit to the first one made no performance difference, but the second script (minus <code>require &#39;dir&#39;</code> which is apparently no longer necessary) works flawlessly.  Nearly instantaneous as one would expect.  My HDDs thank you for that, and I again thank you for your time in helping me extract my nfo... err, my txt files :)"}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 1, "last_activity_date": 1430363580, "last_edit_date": 1430363580, "creation_date": 1430355875, "answer_id": 29957286, "question_id": 29956603, "link": "https://stackoverflow.com/questions/29956603/how-can-i-copy-files-and-rename-them-according-to-their-origin-directories-using/29957286#29957286", "title": "How can I copy files and rename them according to their origin directories using Ruby?", "body": "<p>The error message shows that <code>ret[0]</code> is the array <code>[ \"may13\" ]</code>, so <code>ret[0].to_s + \".txt\"</code> evaluates to the string <code>[\"may13\"].txt</code>. I'm not sure, but it's possible the behavior of <code>String#scan</code> changed in Ruby 1.9 or 2.0, so it returns an array of arrays when captures are present, whereas before it returned an array of strings.</p>\n\n<p>Something like this ought to solve the problem:</p>\n\n<pre><code>require 'find'\nrequire 'fileutils'\n\nFind.find(\"txts\") do |path|\n  if FileTest.directory?(path)\n    next\n  end\n\n  if path =~ %r{txts/([^/]+)/}\n    FileUtils.cp(path, \"#{$1}.txt\")\n  end\nend\n</code></pre>\n\n<p>If you want to match by file extension you could either add it to the Regexp above (e.g. <code>%r{txts/([^/]+)/.+\\.txt$}</code>) or you could use <code>Dir[]</code> (a.k.a. <a href=\"http://ruby-doc.org/core-2.2.0/Dir.html#method-c-glob\" rel=\"nofollow\"><code>Dir.glob</code></a>) e.g.:</p>\n\n<pre><code>require 'dir'\nrequire 'fileutils'\n\nDir['txts/**/*.txt'].each do |path|\n  next if FileTest.directory?(path) ||\n  next unless path =~ %r{txts/([^/]+)/}\n\n  FileUtils.cp(path, \"#{$1}.txt\")\nend\n</code></pre>\n\n<p>I don't know if there will be any performance difference, but it might be worth trying.</p>\n"}], "owner": {"reputation": 23, "user_id": 4848554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b96a3a5670704a29eac77f2ca124004?s=128&d=identicon&r=PG&f=1", "display_name": "rufus", "link": "https://stackoverflow.com/users/4848554/rufus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1534, "favorite_count": 0, "accepted_answer_id": 29957286, "answer_count": 1, "score": 2, "last_activity_date": 1430363580, "creation_date": 1430351293, "last_edit_date": 1430352978, "question_id": 29956603, "link": "https://stackoverflow.com/questions/29956603/how-can-i-copy-files-and-rename-them-according-to-their-origin-directories-using", "title": "How can I copy files and rename them according to their origin directories using Ruby?", "body": "<p>I have many directories with generically named txt files inside.  I want to make copies of the txt files, rename them according to the containing directory of each, then move them to the parent directory (that being the directory that holds the directories that hold the original txt files, designated \"txts\" in the script below).  I want to retain the original txt files with their original names in their original directories as well so that nothing within the original directories changes.</p>\n\n<p>I have an old script that I think achieved (some of) my goals once, perhaps moving instead of copying the original txt files, but I'm unable to run it successfully now:</p>\n\n<pre><code>require 'find'\nrequire 'fileutils'\n\nFind.find(\"txts\") do |path|\n  if FileTest.directory?(path)\n    next\n  end\n\n  ret = path.scan(/.*txts\\/([^\\/]+)\\/.*/)\n  name = ret[0].to_s + \".txt\"\n  FileUtils.mv(path, name)\nend\n</code></pre>\n\n<p>Years ago a friend wrote this and ran it from within a unix environment with success.  When I run it now, an enormous number of errors are returned.  I'm using Ruby 2.2.2 and it's entirely possible there's a placeholder somewhere that I'm too newbish to recognize, or perhaps something changed from the older version of FileUtils...  I truly have no idea and am afraid I've been unable to turn up any answers with my neophyte skills.</p>\n\n<p>And so I appeal to you...</p>\n\n<p>Edit: Here's the error message:</p>\n\n<pre><code>C:/Ruby22/lib/ruby/2.2.0/fileutils.rb:1328:in `stat': Invalid argument @ rb_file\n_s_stat - [\"may2013\"].txt (Errno::EINVAL)\n        from C:/Ruby22/lib/ruby/2.2.0/fileutils.rb:1328:in `lstat'\n        from C:/Ruby22/lib/ruby/2.2.0/fileutils.rb:1247:in `exist?'\n        from C:/Ruby22/lib/ruby/2.2.0/fileutils.rb:519:in `block in mv'\n        from C:/Ruby22/lib/ruby/2.2.0/fileutils.rb:1570:in `block in fu_each_src\n_dest'\n        from C:/Ruby22/lib/ruby/2.2.0/fileutils.rb:1586:in `fu_each_src_dest0'\n        from C:/Ruby22/lib/ruby/2.2.0/fileutils.rb:1568:in `fu_each_src_dest'\n        from C:/Ruby22/lib/ruby/2.2.0/fileutils.rb:516:in `mv'\n        from extracttxt.rb:12:in `block in &lt;main&gt;'\n        from C:/Ruby22/lib/ruby/2.2.0/find.rb:48:in `block (2 levels) in find'\n        from C:/Ruby22/lib/ruby/2.2.0/find.rb:47:in `catch'\n        from C:/Ruby22/lib/ruby/2.2.0/find.rb:47:in `block in find'\n        from C:/Ruby22/lib/ruby/2.2.0/find.rb:42:in `each'\n        from C:/Ruby22/lib/ruby/2.2.0/find.rb:42:in `find'\n        from extracttxt.rb:6:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "elasticsearch"], "answers": [{"tags": [], "owner": {"reputation": 1961, "user_id": 1308979, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/899f97295621824a5f482a286f5062ca?s=128&d=identicon&r=PG", "display_name": "jeremywoertink", "link": "https://stackoverflow.com/users/1308979/jeremywoertink"}, "is_accepted": false, "score": 1, "last_activity_date": 1430351901, "creation_date": 1430351901, "answer_id": 29956697, "question_id": 29956602, "link": "https://stackoverflow.com/questions/29956602/understanding-elasticsearch-query-with-elasticsearch-model-ruby-gem/29956697#29956697", "title": "understanding Elasticsearch query with elasticsearch-model ruby gem", "body": "<p>Just came across this. Instead of using the <code>elasticsearch-model</code> gem, use the <a href=\"http://searchkick.org/\" rel=\"nofollow\">searchkick</a> gem. Tons easier to integrate and query.</p>\n\n<pre><code>Person.search(\"billy\", where: {city: 'Las Vegas'})\n</code></pre>\n\n<p>This still uses elasticsearch, and returns the exact results I was looking for!</p>\n"}], "owner": {"reputation": 1961, "user_id": 1308979, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/899f97295621824a5f482a286f5062ca?s=128&d=identicon&r=PG", "display_name": "jeremywoertink", "link": "https://stackoverflow.com/users/1308979/jeremywoertink"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1430351901, "creation_date": 1430351291, "question_id": 29956602, "link": "https://stackoverflow.com/questions/29956602/understanding-elasticsearch-query-with-elasticsearch-model-ruby-gem", "title": "understanding Elasticsearch query with elasticsearch-model ruby gem", "body": "<p>I have a search form where I want someone to choose to enter in a query or not, then optionally enter in some sort of filter to get a result. So, dealing with 2 fields <code>name</code> and <code>city</code>, let's say someone searches \"billy\", and \"Las Vegas\". The user searching knows there is a name that has \"billy\" in it, but don't know if it's a first, middle, or last, or maybe it was a street name... The one thing the user knows for sure is that the record is in the <code>city</code> \"Las Vegas\". </p>\n\n<p>Here is my query hash that gives me 0 results.</p>\n\n<pre><code>{\n  query: {\n    query_string: {\n      query: 'billy'\n    }\n  },\n  filter: {\n   and: [\n    {term: {city: 'Las Vegas'}}\n   ]\n }\n}\n</code></pre>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "routing"], "answers": [{"comments": [{"owner": {"reputation": 211, "user_id": 4481549, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/56caf26182ae732f2d19664ab934cbfb?s=128&d=identicon&r=PG&f=1", "display_name": "coderwannabe2", "link": "https://stackoverflow.com/users/4481549/coderwannabe2"}, "edited": false, "score": 0, "creation_date": 1430377459, "post_id": 29960432, "comment_id": 48042656, "body": "I tried installing the ruby racer gem but it didin&#39;t work, I also have node installed as I have installed it a few months back, but all of a sudden this started happening this week."}, {"owner": {"reputation": 3712, "user_id": 409110, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a1d3012a5ab47f24ea1f860832582ba4?s=128&d=identicon&r=PG", "display_name": "Amit", "link": "https://stackoverflow.com/users/409110/amit"}, "reply_to_user": {"reputation": 211, "user_id": 4481549, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/56caf26182ae732f2d19664ab934cbfb?s=128&d=identicon&r=PG&f=1", "display_name": "coderwannabe2", "link": "https://stackoverflow.com/users/4481549/coderwannabe2"}, "edited": false, "score": 0, "creation_date": 1430467253, "post_id": 29960432, "comment_id": 48086133, "body": "Can you mention your sass-rails version?"}], "tags": [], "owner": {"reputation": 3712, "user_id": 409110, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a1d3012a5ab47f24ea1f860832582ba4?s=128&d=identicon&r=PG", "display_name": "Amit", "link": "https://stackoverflow.com/users/409110/amit"}, "is_accepted": false, "score": 0, "last_activity_date": 1430375026, "creation_date": 1430375026, "answer_id": 29960432, "question_id": 29956510, "link": "https://stackoverflow.com/questions/29956510/rails-error-errnoenoent-in-categoriesnew/29960432#29960432", "title": "Rails Error | Errno::ENOENT in Categories#new", "body": "<p>Rails requires a Javascript execution library. Install nodejs, or include the therubyracer gem in your gemfile.</p>\n"}], "owner": {"reputation": 211, "user_id": 4481549, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/56caf26182ae732f2d19664ab934cbfb?s=128&d=identicon&r=PG&f=1", "display_name": "coderwannabe2", "link": "https://stackoverflow.com/users/4481549/coderwannabe2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 328, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1430375026, "creation_date": 1430350707, "last_edit_date": 1430351241, "question_id": 29956510, "link": "https://stackoverflow.com/questions/29956510/rails-error-errnoenoent-in-categoriesnew", "title": "Rails Error | Errno::ENOENT in Categories#new", "body": "<p>When I navigate to my categories/new url I get the following error:</p>\n\n<pre><code>Errno::ENOENT in Categories#new\nShowing c:/Users/Javi/desktop/rails_projects/testing_basics/app/views/layouts/application.html.erb where line #6 raised:\n\nNo such file or directory @ unlink_internal - C:/Users/Javi/AppData/Local/Temp/execjs20150429-4112-xc20tpjson\nRails.root: c:/Users/Javi/desktop/rails_projects/testing_basics\n</code></pre>\n\n<p>What does this mean? This a bit above my expertise..</p>\n\n<p>This is my stack trace:</p>\n\n<pre><code>Started GET \"/\" for ::1 at 2015-04-29 16:43:08 -0700\n  ActiveRecord::SchemaMigration Load (0.0ms)  SELECT \"schema_migrations\".* FROM \"schema_migrations\"\nProcessing by Rails::WelcomeController#index as HTML\n  Rendered c:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/railties-4.2.1/lib/rails/templates/rails/welcome/index.h\ntml.erb (42.0ms)\nCompleted 200 OK in 382ms (Views: 266.7ms | ActiveRecord: 0.0ms)\n\n\nStarted GET \"/categories/new\" for ::1 at 2015-04-29 16:43:14 -0700\nProcessing by CategoriesController#new as HTML\n  Rendered categories/new.html.erb within layouts/application (286.2ms)\nCompleted 500 Internal Server Error in 1434ms (ActiveRecord: 3.0ms)\n\nActionView::Template::Error (No such file or directory @ unlink_internal - C:/Users/Javi/AppData/Local/Temp/execjs201504\n29-6172-1x8co6xjson):\n    3: &lt;head&gt;\n    4:   &lt;title&gt;TestingBasics&lt;/title&gt;\n    5:   &lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' =&gt; true %&gt;\n    6:   &lt;%= javascript_include_tag 'application', 'data-turbolinks-track' =&gt; true %&gt;\n    7:   &lt;%= csrf_meta_tags %&gt;\n    8: &lt;/head&gt;\n    9: &lt;body&gt;\n  app/views/layouts/application.html.erb:6:in `_app_views_layouts_application_html_erb__246374537_52769568'\n\n\n  Rendered c:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/template\ns/rescues/_source.erb (1.0ms)\n  Rendered c:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/template\ns/rescues/_trace.html.erb (10.0ms)\n  Rendered c:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/template\ns/rescues/_request_and_response.html.erb (1.0ms)\n  Rendered c:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/actionpack-4.2.1/lib/action_dispatch/middleware/template\ns/rescues/template_error.html.erb within rescues/layout (258.6ms)\n  Rendered c:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/web-console-2.1.2/lib/web_console/templates/_markup.html\n.erb (0.0ms)\n  Rendered c:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/web-console-2.1.2/lib/web_console/templates/style.css.er\nb within layouts/inlined_string (0.0ms)\n  Rendered c:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/web-console-2.1.2/lib/web_console/templates/_inner_conso\nle_markup.html.erb within layouts/inlined_string (0.0ms)\n  Rendered c:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/web-console-2.1.2/lib/web_console/templates/_prompt_box_\nmarkup.html.erb within layouts/inlined_string (0.0ms)\n  Rendered c:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/web-console-2.1.2/lib/web_console/templates/console.js.e\nrb within layouts/javascript (268.8ms)\n  Rendered c:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/web-console-2.1.2/lib/web_console/templates/main.js.erb\nwithin layouts/javascript (1.0ms)\n  Rendered c:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/web-console-2.1.2/lib/web_console/templates/error_page.j\ns.erb within layouts/javascript (1.0ms)\n  Rendered c:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/web-console-2.1.2/lib/web_console/templates/index.html.e\nrb (617.9ms)\n</code></pre>\n\n<p>Seems like it might be a gem problem? Or maybe I accidentally deleted something in a recent project that is messing with my rails installer or devkit and the likes?</p>\n"}, {"tags": ["ruby", "regex", "string"], "comments": [{"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 3, "creation_date": 1430351406, "post_id": 29956508, "comment_id": 48033893, "body": "I&#39;m not sure why gsub is so much slower, but you&#39;ll find that <code>string.tr(&quot;\\n&quot;, &quot; &quot;)</code> is much faster than either of your current methods."}, {"owner": {"reputation": 84156, "user_id": 916657, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/75bf31b48e75eedfebaa411a76a85155?s=128&d=identicon&r=PG", "display_name": "Niklas B.", "link": "https://stackoverflow.com/users/916657/niklas-b"}, "edited": false, "score": 0, "creation_date": 1430352962, "post_id": 29956508, "comment_id": 48034372, "body": "You should also try a larger string, otherwise the regex compilation might well dominate the runtime of gsub"}], "answers": [{"comments": [{"owner": {"reputation": 84156, "user_id": 916657, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/75bf31b48e75eedfebaa411a76a85155?s=128&d=identicon&r=PG", "display_name": "Niklas B.", "link": "https://stackoverflow.com/users/916657/niklas-b"}, "edited": false, "score": 0, "creation_date": 1430352838, "post_id": 29956753, "comment_id": 48034329, "body": "Second argument is somewhat invalid. First because I don&#39;t think it&#39;s true for most modern regex engines and secondly because the pattern has length 1"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 84156, "user_id": 916657, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/75bf31b48e75eedfebaa411a76a85155?s=128&d=identicon&r=PG", "display_name": "Niklas B.", "link": "https://stackoverflow.com/users/916657/niklas-b"}, "edited": false, "score": 0, "creation_date": 1430353703, "post_id": 29956753, "comment_id": 48034591, "body": "@NiklasB.: the ruby regex engine is indeed a relatively advanced regex engine (there are a lot of features) but as I said I have no informations (and confirmations) about a pre-analysis. If you have links about that don&#39;t hesitate to share. However I don&#39;t think that the pattern length is important, the only important thing is that the pattern is a literal string (or contains/begins with a literal string) or not."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 84156, "user_id": 916657, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/75bf31b48e75eedfebaa411a76a85155?s=128&d=identicon&r=PG", "display_name": "Niklas B.", "link": "https://stackoverflow.com/users/916657/niklas-b"}, "edited": false, "score": 0, "creation_date": 1430353924, "post_id": 29956753, "comment_id": 48034636, "body": "@NiklasB.: other question: how the regex engine consider <code>\\n</code>? as a literal line-feed or as a special sequence of characters that represents a line-feed in a pattern?"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1430354062, "post_id": 29956753, "comment_id": 48034668, "body": "<code>&#47;\\n&#47;</code> is a simple newline character in the same way that <code>&quot;\\n&quot;</code> is, the <code>\\n</code> is converted to a newline before the regex engine sees anything."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1430355713, "post_id": 29956753, "comment_id": 48035136, "body": "@muistooshort: I don&#39;t think it is the case, for example if you type <code>&quot;\\p{L}&quot;</code> in the console, it prints <code>&quot;p{L}&quot;</code> (not a surprise). This simple test may be a proof that the regex engine doesn&#39;t use the build-in string interpreter for a pattern."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1430367494, "post_id": 29956753, "comment_id": 48038371, "body": "But <code>\\p{L}</code> is a regex pattern like <code>\\s</code> whereas <code>\\n</code> is a newline character just like <code>\\t</code> is a tab."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1430387112, "post_id": 29956753, "comment_id": 48048767, "body": "@muistooshort: I have played with spickermann benchmark, and I have replaced <code>\\n</code> with <code>,</code> (about the same number of occurences), conclusion: it doesn&#39;t change anything. So it seems that  <code>\\n</code> do not receive any preferential treatment. (or at least it&#39;s not visible)."}], "tags": [], "owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "is_accepted": true, "score": 3, "last_activity_date": 1430432457, "last_edit_date": 1430432457, "creation_date": 1430352289, "answer_id": 29956753, "question_id": 29956508, "link": "https://stackoverflow.com/questions/29956508/why-is-stringsplit-n-and-arrayjoin-quicker-than-stringgsub-n/29956753#29956753", "title": "Why is String#split(&quot;\\n&quot;) and Array#join(&#39; &#39;) quicker than String#gsub(/\\n/, &#39; &#39;)?", "body": "<p>I think <code>gsub</code> takes more time for two reasons:</p>\n\n<p>The first is that using a regex engine has an initial cost, at least to parse the pattern.</p>\n\n<p>The second and probably the most important here is that the regex engine works with a dumb walk character by character and tests the pattern for each positions in the string when the split (with a literal string here) uses a fast string search algorithm (probably the Boyer-Moore algorithm).</p>\n\n<p>Note that even if the split/join way is faster, it uses probably more memory since this way needs to generate new strings.</p>\n\n<p>Note2: some regex engines are able to use this fast string search algorithm before the walk to find positions, but I have no informations about this for the ruby regex engine.</p>\n\n<p>Note3: It may be interesting to have a better idea of what happens to include tests with few repeatitions but with larger strings. [edit] After several tests with @spickermann code, it seems that it doesn't change anything (or nothing very significative) even with very few repetitions. So the initial cost may be not so important.</p>\n"}, {"tags": [], "owner": {"reputation": 13948, "user_id": 283342, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e3ef6dbec3a443e7cda5b5624311ca08?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/283342/adrian"}, "is_accepted": false, "score": 1, "last_activity_date": 1430356099, "creation_date": 1430356099, "answer_id": 29957323, "question_id": 29956508, "link": "https://stackoverflow.com/questions/29956508/why-is-stringsplit-n-and-arrayjoin-quicker-than-stringgsub-n/29957323#29957323", "title": "Why is String#split(&quot;\\n&quot;) and Array#join(&#39; &#39;) quicker than String#gsub(/\\n/, &#39; &#39;)?", "body": "<p>It's because in your <code>gsub</code> code, you are using regular expressions, which are slow for the reasons pointed out in Casimir's answer. Here is proof: if you change</p>\n\n<pre><code>string.gsub(/\\n/, ' ')\n</code></pre>\n\n<p>to</p>\n\n<pre><code>string.gsub(\"\\n\", ' ')\n</code></pre>\n\n<p>then the gsub code is actually <em>faster</em> than the split/join code.</p>\n"}, {"comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1430387881, "post_id": 29957583, "comment_id": 48049272, "body": "Interesting, I have tested this code, but I obtain a totally different result. In short I obtain no difference between <code>regexp_split</code>, <code>string_gsub</code> and <code>regexp_gsub</code> (~11s). Other tests give similar results."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 2, "last_activity_date": 1430358445, "last_edit_date": 1430358445, "creation_date": 1430357825, "answer_id": 29957583, "question_id": 29956508, "link": "https://stackoverflow.com/questions/29956508/why-is-stringsplit-n-and-arrayjoin-quicker-than-stringgsub-n/29957583#29957583", "title": "Why is String#split(&quot;\\n&quot;) and Array#join(&#39; &#39;) quicker than String#gsub(/\\n/, &#39; &#39;)?", "body": "<p>Your question is comparing apples and oranges, because you compare a regexp method with a string search operation.</p>\n\n<p>My benchmark cannot reproduce your observation that <code>split</code> combined with <code>join</code> are in general faster that a simple <code>gsub</code>, the <code>gsub</code> version is always faster. The only thing I can confirm is, that regexp matches are slower than string searches what is not very surprising. </p>\n\n<p>Btw. <code>tr</code> is the fastest solution for this kind of problem:</p>\n\n<pre><code>Rehearsal ---------------------------------------------------\nstring_split:     5.390000   0.100000   5.490000 (  5.480459)\nregexp_split:    14.220000   0.160000  14.380000 ( 14.413509)\nstring_gsub :     3.750000   0.090000   3.840000 (  3.832316)\nregexp_gsub :    12.890000   0.130000  13.020000 ( 13.045899)\nstring_tr   :     2.480000   0.050000   2.530000 (  2.525891)\n----------------------------------------- total: 39.260000sec\n\n                      user     system      total        real\nstring_split:     5.450000   0.090000   5.540000 (  5.543735)\nregexp_split:    14.340000   0.190000  14.530000 ( 14.552214)\nstring_gsub :     4.160000   0.120000   4.280000 (  4.543941)\nregexp_gsub :    13.570000   0.200000  13.770000 ( 14.356955)\nstring_tr   :     2.390000   0.040000   2.430000 (  2.431676)\n</code></pre>\n\n<p>Code that I used for this benchmark:</p>\n\n<pre><code>require 'benchmark'\n\n@string = %q[\n  Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium,\n  totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae\n  dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit,\n  sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam\n  est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius\n  modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima\n  veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea]\n\ndef string_split\n  @string.split(\"\\n\").join(' ')\nend\n\ndef regexp_split\n  @string.split(/\\n/).join(' ')\nend\n\ndef string_gsub\n  @string.gsub(\"\\n\", ' ')\nend\n\ndef regexp_gsub\n  @string.gsub(/\\n/, ' ')\nend\n\ndef string_tr\n  @string.tr(\"\\n\", ' ')\nend\n\nn = 1_000_000\nBenchmark.bmbm(15) do |x|\n  x.report(\"string_split:\")   { n.times do; string_split; end }\n  x.report(\"regexp_split:\")   { n.times do; regexp_split; end }\n  x.report(\"string_gsub :\")   { n.times do; string_gsub ; end }\n  x.report(\"regexp_gsub :\")   { n.times do; regexp_gsub ; end }\n  x.report(\"string_tr   :\")   { n.times do; string_tr   ; end }\nend\n</code></pre>\n"}], "owner": {"reputation": 10076, "user_id": 4010391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/NgRol.jpg?s=128&g=1", "display_name": "Travis", "link": "https://stackoverflow.com/users/4010391/travis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 732, "favorite_count": 0, "accepted_answer_id": 29956753, "answer_count": 3, "score": 4, "last_activity_date": 1504690292, "creation_date": 1430350694, "last_edit_date": 1504690292, "question_id": 29956508, "link": "https://stackoverflow.com/questions/29956508/why-is-stringsplit-n-and-arrayjoin-quicker-than-stringgsub-n", "title": "Why is String#split(&quot;\\n&quot;) and Array#join(&#39; &#39;) quicker than String#gsub(/\\n/, &#39; &#39;)?", "body": "<p>I have to remove all newlines from a large number of strings. In benchmarking <code>string.join(\"\\n\").split(' ')</code> vs <code>string.gsub(/\\n/, ' ')</code>, I found that the split and join methods are much quicker, but have a hard time understanding why. I do not understand how splitting the string up into array elements each time it encounters a <code>\\n</code>, then joining the array into a new string could possibly be quicker than just scan and replacing each <code>\\n</code> with a <code>' '</code>.</p>\n\n<pre><code>sentence = %q[\n  Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium,\n  totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae\n  dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit,\n  sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam\n  est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius\n  modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima\n  veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea]\n</code></pre>\n\n<p>Check to verify the output is indeed the same for both methods:</p>\n\n<pre><code>puts sentence.split(\"\\n\").join(' ') == sentence.gsub(/\\n/, ' ')\n#=&gt; true\n</code></pre>\n\n<p>Script used to benchmark:</p>\n\n<pre><code>def split_join_method(string)\n  start = Time.now;\n  1000000.times {  string.split(\"\\n\").join(' ') }\n  puts \"split_join: #{Time.now - start} s\"\nend\n\ndef gsub_method(string)\n  start = Time.now;\n  1000000.times {  string.gsub(/\\n/, ' ') }\n  puts \"gsub: #{Time.now - start} s\"\nend\n\n5.times do\n  split_join_method(sentence)\n  gsub_method(sentence)\nend\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>#=&gt; split_join: 6.753057 s\n#=&gt; gsub: 14.938358 s\n#=&gt; split_join: 6.16101 s\n#=&gt; gsub: 14.166971 s\n#=&gt; split_join: 5.946168 s\n#=&gt; gsub: 13.490355 s\n#=&gt; split_join: 5.781062 s\n#=&gt; gsub: 13.436135 s\n#=&gt; split_join: 5.903052 s\n#=&gt; gsub: 15.670774 s\n</code></pre>\n"}, {"tags": ["ruby", "arrays", "while-loop"], "comments": [{"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1430346856, "post_id": 29955371, "comment_id": 48032260, "body": "Line 2-6 can be replaced by <code>largest_num = arr.max</code>"}], "answers": [{"tags": [], "owner": {"reputation": 17681, "user_id": 298029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lcPr5.png?s=128&g=1", "display_name": "fgb", "link": "https://stackoverflow.com/users/298029/fgb"}, "is_accepted": false, "score": 0, "last_activity_date": 1430348528, "creation_date": 1430348528, "answer_id": 29956113, "question_id": 29955371, "link": "https://stackoverflow.com/questions/29955371/while-true-vs-while-idxcount-arr-size/29956113#29956113", "title": "While true vs. while (idx+count) &lt; arr.size", "body": "<p><code>count</code> is reset back to 1 inside the loop, but the outer while loop is checking the condition before it's reset so it will always be false after the first iteration.</p>\n\n<p>If you want the old condition to work, you can move <code>count = 1</code> after the line <code>idx+=1</code>.</p>\n\n<p>Some other inputs will still return the wrong answer though because you're not checking every combination, only the numbers that are next to each other in the array.</p>\n"}], "owner": {"reputation": 31, "user_id": 4848387, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6cd0e98a48c00f2bf6ecb9a4a77375ac?s=128&d=identicon&r=PG&f=1", "display_name": "catcher", "link": "https://stackoverflow.com/users/4848387/catcher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 297, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430348528, "creation_date": 1430344910, "last_edit_date": 1430346239, "question_id": 29955371, "link": "https://stackoverflow.com/questions/29955371/while-true-vs-while-idxcount-arr-size", "title": "While true vs. while (idx+count) &lt; arr.size", "body": "<p>I'm learning Ruby and am having an issue with this problem:</p>\n\n<p>Prompt :Using the Ruby language, have the function ArrayAdditionI (arr) take the array of numbers stored in arr and return the string true if any combination of numbers in the array can be added up to equal the largest number in the array, otherwise return the string false. For example: if arr contains [4, 6, 23, 10, 1, 3] the output should return true because 4 + 6 + 10 + 3 = 23. The array will not be empty, will not contain all the same elements, and may contain negative numbers. </p>\n\n<p>My answer is as follows:</p>\n\n<pre><code>def ArrayAdditionI(arr)\n  largest_num = nil\n  arr.each do |element|\n    if largest_num == nil || element &gt; largest_num\n      largest_num = element\n    end\n  end\n\narr = arr - [largest_num]\nidx=0\ncount = 1\n\nwhile (idx+count) &lt; arr.size # &lt;==== this line\n    puts idx+count\n    puts arr.size\n    count = 1\n    result = arr[idx]\n    while idx + count &lt; arr.size\n        if result + arr[idx+count] == largest_num\n            return true\n        else\n            result = result + arr[idx+count]    \n        count+=1\n        end\n    end\n    idx+=1\nend\nfalse\nend\n</code></pre>\n\n<p>The code doesn't return the right output <code>true</code> for <code>[3,5,-1,8,12]</code> unless I change the line <code>while (idx+count) &lt; arr.size</code> to <code>while true</code>. Otherwise, my code in that \"while\" loop won't loop. Can anyone explain why? Thanks. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "multithreading", "ruby-on-rails-4", "multiprocessing"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1430347029, "post_id": 29955290, "comment_id": 48032333, "body": "I can&#39;t reproduce this with unicorn - everything is working as expected."}, {"owner": {"reputation": 4504, "user_id": 209869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6131b774e9de8cb48e690373967403c0?s=128&d=identicon&r=PG", "display_name": "Arthur Frankel", "link": "https://stackoverflow.com/users/209869/arthur-frankel"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1430347936, "post_id": 29955290, "comment_id": 48032735, "body": "@Anthony - I edited my post with my unicorn config. Do you see anything wrong with what I have listed?"}, {"owner": {"reputation": 4504, "user_id": 209869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6131b774e9de8cb48e690373967403c0?s=128&d=identicon&r=PG", "display_name": "Arthur Frankel", "link": "https://stackoverflow.com/users/209869/arthur-frankel"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1430351266, "post_id": 29955290, "comment_id": 48033867, "body": "Update: Actually I did get it working.  I had to increase my sleep to 60 seconds (my timeout to 180 in the unicorn config) and then the result was tab 1 returned in 1 min, 2,3,and 4 returned in 1.3 minutes.  So maybe there is some delay in picking up a new worker.  I would be interested if anyone could explain my result and also confirm my questions above."}, {"owner": {"reputation": 4504, "user_id": 209869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6131b774e9de8cb48e690373967403c0?s=128&d=identicon&r=PG", "display_name": "Arthur Frankel", "link": "https://stackoverflow.com/users/209869/arthur-frankel"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1430353411, "post_id": 29955290, "comment_id": 48034503, "body": "More results. I ran with the 60 second sleep using Thin and Puma and got 1,2,3,4 minute results (i.e., not processing concurrently). When I ran Puma in production (i.e., rails s Puma -e production). I did get 1,1.3,1.3,1.3 for the tabs so that worked as well. Again, I&#39;m looking for explanations for my results. I believe the setting of cache_classes=true in production has something to do with my results. Why did Puma work since I was under the impression that multithreaded would not work."}, {"owner": {"reputation": 9795, "user_id": 1566187, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/00cb2ecc49f0f05736dc7c14bbccfeaa?s=128&d=identicon&r=PG", "display_name": "Ely", "link": "https://stackoverflow.com/users/1566187/ely"}, "edited": false, "score": 0, "creation_date": 1431081708, "post_id": 29955290, "comment_id": 48353235, "body": "If you have an example accessible somewhere (Gibhub?) maybe we could check it out ourselves and provide furhter input."}, {"owner": {"reputation": 4504, "user_id": 209869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6131b774e9de8cb48e690373967403c0?s=128&d=identicon&r=PG", "display_name": "Arthur Frankel", "link": "https://stackoverflow.com/users/209869/arthur-frankel"}, "edited": false, "score": 0, "creation_date": 1431126834, "post_id": 29955290, "comment_id": 48378342, "body": "I created a github project with my example:  <a href=\"https://github.com/afrankel/limitedBandwith\" rel=\"nofollow noreferrer\">github.com/afrankel/limitedBandwith</a>   Note that my main purpose is something different (to test limited bandwith situations from an AngularJS client) but the server piece is what I&#39;m discussing in this post.  Thanks for looking"}, {"owner": {"reputation": 9795, "user_id": 1566187, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/00cb2ecc49f0f05736dc7c14bbccfeaa?s=128&d=identicon&r=PG", "display_name": "Ely", "link": "https://stackoverflow.com/users/1566187/ely"}, "edited": false, "score": 0, "creation_date": 1431331467, "post_id": 29955290, "comment_id": 48431563, "body": "@ArthurFrankel I am having a look. I think of editing my answer with what I have found so far with some useful information. After your feedback we can improve the answer further, eventually share my modified version that I cloned from your GitHub."}, {"owner": {"reputation": 4504, "user_id": 209869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6131b774e9de8cb48e690373967403c0?s=128&d=identicon&r=PG", "display_name": "Arthur Frankel", "link": "https://stackoverflow.com/users/209869/arthur-frankel"}, "reply_to_user": {"reputation": 9795, "user_id": 1566187, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/00cb2ecc49f0f05736dc7c14bbccfeaa?s=128&d=identicon&r=PG", "display_name": "Ely", "link": "https://stackoverflow.com/users/1566187/ely"}, "edited": false, "score": 0, "creation_date": 1431448988, "post_id": 29955290, "comment_id": 48498887, "body": "@Elyasin - minor note - I modified the name of my github repo since I realized I had a spelling error :) !   github.com/afrankel/limitedBandwidth"}], "answers": [{"comments": [{"owner": {"reputation": 4504, "user_id": 209869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6131b774e9de8cb48e690373967403c0?s=128&d=identicon&r=PG", "display_name": "Arthur Frankel", "link": "https://stackoverflow.com/users/209869/arthur-frankel"}, "edited": false, "score": 0, "creation_date": 1431448500, "post_id": 30097643, "comment_id": 48498544, "body": "Thank you! Let me chew on this and respond soon."}, {"owner": {"reputation": 9795, "user_id": 1566187, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/00cb2ecc49f0f05736dc7c14bbccfeaa?s=128&d=identicon&r=PG", "display_name": "Ely", "link": "https://stackoverflow.com/users/1566187/ely"}, "reply_to_user": {"reputation": 4504, "user_id": 209869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6131b774e9de8cb48e690373967403c0?s=128&d=identicon&r=PG", "display_name": "Arthur Frankel", "link": "https://stackoverflow.com/users/209869/arthur-frankel"}, "edited": false, "score": 0, "creation_date": 1431506406, "post_id": 30097643, "comment_id": 48523975, "body": "On a side note, which is out of the scope of your question: I ported your example to run in a jRuby environment. The test took 2 minutes (and 1 second)."}, {"owner": {"reputation": 9795, "user_id": 1566187, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/00cb2ecc49f0f05736dc7c14bbccfeaa?s=128&d=identicon&r=PG", "display_name": "Ely", "link": "https://stackoverflow.com/users/1566187/ely"}, "reply_to_user": {"reputation": 4504, "user_id": 209869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6131b774e9de8cb48e690373967403c0?s=128&d=identicon&r=PG", "display_name": "Arthur Frankel", "link": "https://stackoverflow.com/users/209869/arthur-frankel"}, "edited": false, "score": 0, "creation_date": 1431513818, "post_id": 30097643, "comment_id": 48529013, "body": "@ArthurFrankel I edited the response with some new insights when setting allow_concurrency=true with JRuby and MRI."}, {"owner": {"reputation": 4504, "user_id": 209869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6131b774e9de8cb48e690373967403c0?s=128&d=identicon&r=PG", "display_name": "Arthur Frankel", "link": "https://stackoverflow.com/users/209869/arthur-frankel"}, "edited": false, "score": 1, "creation_date": 1431535582, "post_id": 30097643, "comment_id": 48545458, "body": "this is great stuff! As a suggestion maybe you can add a table with your results with altering the number of workers and threads and with allow_concurrency on/off.  For example:  1 thread/4 workers (since you have 4 cores); 10 threads/1 worker; ....and so forth.  Then maybe also change 15 seconds to 60 seconds.  I have noticed in my tests that 60 seconds allows workers to start up and kick in to be used. All suggestions.  Also, if you ever want to move to DC (Northern Virginia) you have a job!"}], "tags": [], "owner": {"reputation": 9795, "user_id": 1566187, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/00cb2ecc49f0f05736dc7c14bbccfeaa?s=128&d=identicon&r=PG", "display_name": "Ely", "link": "https://stackoverflow.com/users/1566187/ely"}, "is_accepted": true, "score": 25, "last_activity_date": 1431571310, "last_edit_date": 1431571310, "creation_date": 1430992579, "answer_id": 30097643, "question_id": 29955290, "link": "https://stackoverflow.com/questions/29955290/concurrent-requests-with-mri-ruby/30097643#30097643", "title": "Concurrent requests with MRI Ruby", "body": "<p>I invite you to read the series of Jesse Storimer's <a href=\"http://www.jstorimer.com/blogs/workingwithcode/8085491-nobody-understands-the-gil\">Nobody understands the GIL</a>\nIt might help you understand better some MRI internals.</p>\n\n<p>I have also found <a href=\"http://blog.paracode.com/2012/09/07/pragmatic-concurrency-with-ruby/\">Pragmatic Concurrency with Ruby</a>, which reads interesting. It has some examples of testing concurrently.</p>\n\n<p><strong>EDIT:</strong>\nIn addition I can recommend the article <a href=\"http://tenderlovemaking.com/2012/06/18/removing-config-threadsafe.html\">Removing config.threadsafe!</a>\nMight not be relevant for Rails 4, but it explains the configuration options, one of which you can use to allow concurrency.</p>\n\n<hr>\n\n<p>Let's discuss the answer to your question.</p>\n\n<p>You can have several threads (using MRI), even with Puma. The GIL ensures that only one thread is active at a time, that is the constraint that developers dub as restrictive (because of no real parallel execution). Bear in mind that GIL does not guarantee thread safety.\nThis does not mean that the other threads are not running, they are waiting for their turn. They can interleave (the articles can help understanding better). </p>\n\n<p>Let me clear up some terms: worker process, thread.\nA process runs in a separate memory space and can serve several threads.\nThreads of the same process run in a shared memory space, which is that of their process. With threads we mean Ruby threads in this context, not CPU threads.</p>\n\n<p>In regards to your question's configuration and the GitHub repo you shared, I think an appropriate configuration (I used Puma) is to set up 4 workers and 1 to 40 threads. The idea is that one worker serves one tab. Each tab  sends up to 10 requests.</p>\n\n<p>So let's get started:</p>\n\n<p>I work on Ubuntu on a virtual machine. So first I enabled the 4 cores in my virtual machine's setting (and some other settings of which I thought it might help).\nI could verify this on my machine. So I went with that.</p>\n\n<pre><code>Linux command --&gt; lscpu\nArchitecture:          x86_64\nCPU op-mode(s):        32-bit, 64-bit\nByte Order:            Little Endian\nCPU(s):                4\nOn-line CPU(s) list:   0-3\nThread(s) per core:    1\nCore(s) per socket:    4\nSocket(s):             1\nNUMA node(s):          1\nVendor ID:             GenuineIntel\nCPU family:            6\nModel:                 69\nStepping:              1\nCPU MHz:               2306.141\nBogoMIPS:              4612.28\nL1d cache:             32K\nL1d cache:             32K\nL2d cache:             6144K\nNUMA node0 CPU(s):     0-3\n</code></pre>\n\n<p>I used your shared GitHub project and modified it slightly. I created a Puma configuration file named <code>puma.rb</code> (put it in the <code>config</code> directory) with the following content:</p>\n\n<pre><code>workers Integer(ENV['WEB_CONCURRENCY'] || 1)\nthreads_count = Integer(ENV['MAX_THREADS'] || 1)\nthreads 1, threads_count\n\npreload_app!\n\nrackup      DefaultRackup\nport        ENV['PORT']     || 3000\nenvironment ENV['RACK_ENV'] || 'development'\n\non_worker_boot do\n  # Worker specific setup for Rails 4.1+\n  # See: https://devcenter.heroku.com/articles/deploying-rails-applications-with-the-puma-web-server#on-worker-boot\n  #ActiveRecord::Base.establish_connection\nend\n</code></pre>\n\n<p>By default Puma is started with 1 worker and 1 thread. You can use environment variables to modify those parameters. I did so:</p>\n\n<pre><code>export MAX_THREADS=40\nexport WEB_CONCURRENCY=4\n</code></pre>\n\n<p>To start Puma with this configuration I typed</p>\n\n<pre><code>bundle exec puma -C config/puma.rb\n</code></pre>\n\n<p>in the Rails app directory.</p>\n\n<p>I opened the browser with four tabs to call the app's URL.</p>\n\n<p>The first request started around 15:45:05 and the last request was around 15h49:44. That is an elapsed time of 4 minutes and 39 seconds.\nAlso you can see the request's id's in non sorted order in the log file. (See below)</p>\n\n<p>Each API call in the GitHub project sleeps for 15 seconds. We have four 4 tabs, each with 10 API calls. That makes a maximum elapsed time of 600 seconds, i.e. 10 minutes (in a strictly serial mode).</p>\n\n<p>The ideal result in theory would be all in parallel and an elapsed time not far from 15 seconds, but I did not expect that at all.\nI was not sure what to expect as a result exactly, but I was still positively surprised (considering that I ran on a virtual machine and MRI is restrained by the GIL and some other factors). The elapsed time of this test was less than half the maximum elapsed time (in strictly serial mode), we cut the result into less than half.</p>\n\n<blockquote>\n  <p><strong>EDIT</strong> I read further about the Rack::Lock that wraps a mutex around each request (Third article above). I found the option\n  <code>config.allow_concurrency = true</code> to be a time saver. A little caveat\n  was to increase the connection pool (though the request do no query\n  the database had to be set accordingly); the number of maximum threads is\n  a good default. 40 in this case.</p>\n  \n  <p>I tested the app with jRuby and the actual elapsed time was 2mins,\n  with allow_concurrency=true.</p>\n  \n  <p>I tested the app with MRI and the actual elapsed time was 1min47s,\n  with allow_concurrency=true. This was a big surprise to me.\n  This really surprised me, because I expected MRI to be slower than JRuby. It was not. This makes me questioning the widespread discussion about the speed differences between MRI and JRuby.</p>\n  \n  <p>Watching the responses on the different tabs are \"more random\" now. It happens that tab 3 or 4 completes before tab 1, which I requested first.</p>\n  \n  <p>I think because you don't have race conditions the test seems to be\n  OK. However, I am not sure about the application wide consequences if\n  you set config.allow_concurrency=true in a real world application.</p>\n</blockquote>\n\n<p>Feel free to check it out and let me know any feedback you readers might have.\nI still have the clone on my machine. Let me know if you are interested.</p>\n\n<p>To answer your questions in order:</p>\n\n<ul>\n<li>I think your example is valid by result. For concurrency however, it is better to test with shared resources (as for example in the second article).</li>\n<li>In regards to your statements, as mentioned in the beginning of this\nanswer, MRI is multi-threaded, but restricted by GIL to one active\nthread at a time. This raises the question: With MRI isn't it better\nto test with more processes and less threads? I do not know really, a\nfirst guess would be rather no or not much of a difference. Maybe someone can shed light on this.</li>\n<li>Your example is just fine I think. Just needed some slight\nmodifications. </li>\n</ul>\n\n<h1>Appendix</h1>\n\n<p>Log file Rails app:</p>\n\n<pre><code>**config.allow_concurrency = false (by default)**\n-&gt; Ideally 1 worker per core, each worker servers up to 10 threads.\n\n[3045] Puma starting in cluster mode...\n[3045] * Version 2.11.2 (ruby 2.1.5-p273), codename: Intrepid Squirrel\n[3045] * Min threads: 1, max threads: 40\n[3045] * Environment: development\n[3045] * Process workers: 4\n[3045] * Preloading application\n[3045] * Listening on tcp://0.0.0.0:3000\n[3045] Use Ctrl-C to stop\n[3045] - Worker 0 (pid: 3075) booted, phase: 0\n[3045] - Worker 1 (pid: 3080) booted, phase: 0\n[3045] - Worker 2 (pid: 3087) booted, phase: 0\n[3045] - Worker 3 (pid: 3098) booted, phase: 0\nStarted GET \"/assets/angular-ui-router/release/angular-ui-router.js?body=1\" for 127.0.0.1 at 2015-05-11 15:45:05 +0800\n...\n...\n...\nProcessing by ApplicationController#api_call as JSON\n  Parameters: {\"t\"=&gt;\"15?id=9\"}\nCompleted 200 OK in 15002ms (Views: 0.2ms | ActiveRecord: 0.0ms)\n[3075] 127.0.0.1 - - [11/May/2015:15:49:44 +0800] \"GET /api_call.json?t=15?id=9 HTTP/1.1\" 304 - 60.0230\n</code></pre>\n\n<hr>\n\n<pre><code>**config.allow_concurrency = true**\n-&gt; Ideally 1 worker per core, each worker servers up to 10 threads.\n\n[22802] Puma starting in cluster mode...\n[22802] * Version 2.11.2 (ruby 2.2.0-p0), codename: Intrepid Squirrel\n[22802] * Min threads: 1, max threads: 40\n[22802] * Environment: development\n[22802] * Process workers: 4\n[22802] * Preloading application\n[22802] * Listening on tcp://0.0.0.0:3000\n[22802] Use Ctrl-C to stop\n[22802] - Worker 0 (pid: 22832) booted, phase: 0\n[22802] - Worker 1 (pid: 22835) booted, phase: 0\n[22802] - Worker 3 (pid: 22852) booted, phase: 0\n[22802] - Worker 2 (pid: 22843) booted, phase: 0\nStarted GET \"/\" for 127.0.0.1 at 2015-05-13 17:58:20 +0800\nProcessing by ApplicationController#index as HTML\n  Rendered application/index.html.erb within layouts/application (3.6ms)\nCompleted 200 OK in 216ms (Views: 200.0ms | ActiveRecord: 0.0ms)\n[22832] 127.0.0.1 - - [13/May/2015:17:58:20 +0800] \"GET / HTTP/1.1\" 200 - 0.8190\n...\n...\n...\nCompleted 200 OK in 15003ms (Views: 0.1ms | ActiveRecord: 0.0ms)\n[22852] 127.0.0.1 - - [13/May/2015:18:00:07 +0800] \"GET /api_call.json?t=15?id=10 HTTP/1.1\" 304 - 15.0103\n</code></pre>\n\n<hr>\n\n<pre><code>**config.allow_concurrency = true (by default)**\n-&gt; Ideally each thread serves a request.\n\nPuma starting in single mode...\n* Version 2.11.2 (jruby 2.2.2), codename: Intrepid Squirrel\n* Min threads: 1, max threads: 40\n* Environment: development\nNOTE: ActiveRecord 4.2 is not (yet) fully supported by AR-JDBC, please help us finish 4.2 support - check http://bit.ly/jruby-42 for starters\n* Listening on tcp://0.0.0.0:3000\nUse Ctrl-C to stop\nStarted GET \"/\" for 127.0.0.1 at 2015-05-13 18:23:04 +0800\nProcessing by ApplicationController#index as HTML\n  Rendered application/index.html.erb within layouts/application (35.0ms)\n...\n...\n...\nCompleted 200 OK in 15020ms (Views: 0.7ms | ActiveRecord: 0.0ms)\n127.0.0.1 - - [13/May/2015:18:25:19 +0800] \"GET /api_call.json?t=15?id=9 HTTP/1.1\" 304 - 15.0640\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 580, "user_id": 181697, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bdcbf5938283883a69b87483412a49fe?s=128&d=identicon&r=PG", "display_name": "Xenofex", "link": "https://stackoverflow.com/users/181697/xenofex"}, "is_accepted": false, "score": 4, "last_activity_date": 1451126724, "creation_date": 1451126724, "answer_id": 34470593, "question_id": 29955290, "link": "https://stackoverflow.com/questions/29955290/concurrent-requests-with-mri-ruby/34470593#34470593", "title": "Concurrent requests with MRI Ruby", "body": "<p>To both @Elyasin and @Arthur Frankel, I created this <a href=\"https://github.com/Xenofex/ruby_web_server_test\" rel=\"nofollow\">repo</a> for testing Puma running in MRI and JRuby. In this small project, I didn't do <code>sleep</code> to emulate a long running request. As I found that in MRI, the GIL appears to treat that differently than regular processing, more similarly as an external I/O request.</p>\n\n<p>I put fibonacci sequence calculation in the controller. On my machine, the <code>fib(39)</code> took 6.x seconds in JRuby, and 11 seconds in MRI, which is enough to show the differences.</p>\n\n<p>I opened 2 browser windows. Instead of opening tabs in the same browser, I did this to prevent certain restrictions of the concurrent request that a browser send to the same domain. I'm now sure the details, but 2 different browsers is suffice to prevent that from happening.</p>\n\n<p>I tested thin + MRI, and Puma + MRI, then Puma + JRuby. The results are:</p>\n\n<ol>\n<li><p>thin + MRI: not surprised, when I quickly reloaded the 2 browsers, the first one finished after 11 seconds. Then the second request started, took another 11 seconds to finish.</p></li>\n<li><p>Let's talk about Puma + JRuby first. As I quickly reloaded the 2 browsers, they appeared to start nearly at the same second, and finished at the same second, too. Both took around 6.9 seconds to finish. Puma is a multi-thread server and JRuby supports multi-threading.</p></li>\n<li><p>Finally Puma + MRI. It took 22 seconds to finish for both browsers after I quickly reloaded the 2 browsers. They started nearly at the same second, finished nearly at the same second as well. But it took twice time for both to finish. That's exactly what GIL does: switching between the threads for concurrency, but the lock itself prevents parallelism from happening.</p></li>\n</ol>\n\n<p>About my setup:</p>\n\n<ul>\n<li>Servers were all launched in Rails production mode. In production mode, <code>config.cache_classes</code> is set to <code>true</code>, which implies <code>config.allow_concurrency = true</code></li>\n<li>Puma was started with 8 threads min and 8 threads max.</li>\n</ul>\n"}], "owner": {"reputation": 4504, "user_id": 209869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6131b774e9de8cb48e690373967403c0?s=128&d=identicon&r=PG", "display_name": "Arthur Frankel", "link": "https://stackoverflow.com/users/209869/arthur-frankel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4192, "favorite_count": 7, "accepted_answer_id": 30097643, "answer_count": 2, "score": 26, "last_activity_date": 1451126724, "creation_date": 1430344517, "last_edit_date": 1495542372, "question_id": 29955290, "link": "https://stackoverflow.com/questions/29955290/concurrent-requests-with-mri-ruby", "title": "Concurrent requests with MRI Ruby", "body": "<p>I put together a simple example trying to prove concurrent requests in Rails using a basic example. Note that I am using MRI Ruby2 and Rails 4.2.</p>\n\n<pre><code>  def api_call\n    sleep(10)\n    render :json =&gt; \"done\"\n  end\n</code></pre>\n\n<p>I then go to 4 different tabs in Chrome on my mac (I7 / 4 Core) and see if they get run in series or parallel (really concurrent which is close but not the same thing).  i.e., <a href=\"http://localhost:3000/api_call\" rel=\"nofollow noreferrer\">http://localhost:3000/api_call</a></p>\n\n<p>I cannot get this to work using Puma, Thin, or Unicorn. The requests each come by in series.  First tab after 10 seconds, second after 20 (since it had to wait for the first to complete), third after that....</p>\n\n<p>From what I have read, I believe the following to be true (please correct me) and were my results:</p>\n\n<ul>\n<li>Unicorn is multiprocess and my example should have worked (after defining the number of workers in a unicorn.rb config file), but it didn't.  I can see 4 workers starting but everything works in series. I am using the unicorn-rails gem, starting rails with unicorn -c config/unicorn.rb, and in my unicorn.rb I have:</li>\n</ul>\n\n<p>-- unicorn.rb</p>\n\n<pre><code>worker_processes 4\npreload_app true\ntimeout 30\nlisten 3000\nafter_fork do |server, worker|\n  ActiveRecord::Base.establish_connection\nend\n</code></pre>\n\n<ul>\n<li>Thin and Puma are multithreaded (although Puma at least has a '<a href=\"https://github.com/puma/puma#clustered-mode\" rel=\"nofollow noreferrer\">clustered</a>' mode where you can start workers with a -w parameter) and should not work anyways (in multithreaded mode) with MRI Ruby2.0 because \"there is a Global Interpreter Lock (GIL) that ensures only one thread can be run at a time\". </li>\n</ul>\n\n<p>So,</p>\n\n<ul>\n<li>Do I have a valid example (or is using sleep just wrong)?</li>\n<li>Are my statements above about multiprocess and multithreaded (with respect to MRI Rails 2) correct?</li>\n<li>Any ideas on why I can't get it working with Unicorn (or any server for that matter)?</li>\n</ul>\n\n<p>There is a very <a href=\"https://stackoverflow.com/questions/21605318/how-can-i-serve-requests-concurrently-with-rails-4\">similar question to mine</a> but I can't get it working as answered and it doesn't answer all of my questions about concurrent requests using MRI Ruby.</p>\n\n<p>Github project: <a href=\"https://github.com/afrankel/limitedBandwidth\" rel=\"nofollow noreferrer\">https://github.com/afrankel/limitedBandwidth</a> (note: project is looking at more than this question of multi-process/threading on the server)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ansi", "git-bash"], "comments": [{"owner": {"reputation": 736, "user_id": 2194846, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7033K.jpg?s=128&g=1", "display_name": "Allan W Smith", "link": "https://stackoverflow.com/users/2194846/allan-w-smith"}, "edited": false, "score": 0, "creation_date": 1430352311, "post_id": 29955207, "comment_id": 48034165, "body": "I&#39;ve never used bash on windows but it is possible on linux and should be  possible on windows."}], "answers": [{"tags": [], "owner": {"reputation": 811, "user_id": 661471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37f5cdb556fbf35ca00359b07c085ee7?s=128&d=identicon&r=PG", "display_name": "aenw", "link": "https://stackoverflow.com/users/661471/aenw"}, "is_accepted": true, "score": 3, "last_activity_date": 1436002438, "last_edit_date": 1495541231, "creation_date": 1436002438, "answer_id": 31219115, "question_id": 29955207, "link": "https://stackoverflow.com/questions/29955207/how-to-get-color-in-windows-gitbash-using-bundle-exec-rake-test/31219115#31219115", "title": "How to get color in Windows gitbash using bundle exec rake test", "body": "<p>You definitely can get colored output to show up. But not with using the standard Windows cmd.exe or powershell.  Gems won't help.  You need to need add the ability to <em>correctly interpret ANSI escape codes</em> to your system -- something that cmd and powershell aren't able to do.  (ANSI.sys was how ANSI escape codes were handled under DOS. cmd and powershell don't use it.)</p>\n\n<p>You need to (1) install ANSICON and/or (2) install and use a different console/console emulator or shell that handles colors (ANSI escape codes).</p>\n\n<p>(1) <a href=\"https://github.com/adoxa/ansicon\" rel=\"nofollow noreferrer\">ANSICON</a> is a program for Windows that interprets ANSI escape codes so that color is displayed. It kind of runs 'on top of' cmd or powershell.  You can set it up so that it's always used whenever you use cmd or powershell, or use it only at specific times. Most people install this and are really happy with it.\n<a href=\"http://jasonkarns.com/blog/ansi-color-in-windows-shells/\" rel=\"nofollow noreferrer\">Jason Karns wrote a blog post</a> about installing and using ANSICON for git bash (on Windows) that folks have found helpful.</p>\n\n<p>(2) Here are the popular options for alternatives to cmd/powershell. These are console emulators and tools and shell alternatives:</p>\n\n<ul>\n<li><a href=\"http://conemu.github.io/\" rel=\"nofollow noreferrer\">ConEmu</a> - (\"ConEmu-Maximus5\") This is a console emulator, not a shell.  You can use it with any shell (cmd, powershell, cygwin, bash, etc). But in day-to-day use, once you set it up, you use it just like you'd use cmd.exe or powershell, etc. <em>(I use this so know more about it than the other choices. I have configurations for it to start up with different git/ruby version/rails version configurations as needed. I don't use ANSICON because I use ConEmu whenever I need to open up a console.)</em></li>\n<li><a href=\"http://sourceforge.net/projects/console/\" rel=\"nofollow noreferrer\">Console 2</a> - Like ConEmu, this is a console emulator that adds functionality above and beyond cmd.exe (including displaying ANSI colors). You can use it with existing shells (e.g. powershell, etc.) Here's a <a href=\"https://stackoverflow.com/a/21145906/661471\">SO answer that talks about using Console 2.</a></li>\n<li><p><a href=\"https://github.com/cbucher/console\" rel=\"nofollow noreferrer\">Console Z</a> - a fork of Console 2 that is current and actively maintained. I haven't ever used it, but <a href=\"https://github.com/cbucher/console/issues/230#issuecomment-113170215\" rel=\"nofollow noreferrer\">here is some info on how you'd configure Console Z to work with git bash.</a></p></li>\n<li><p>You can also (or instead of) use a Unix-like shell (or suites):</p>\n\n<ul>\n<li><a href=\"https://www.cygwin.com/\" rel=\"nofollow noreferrer\">Cygwin</a> is the best known suite of Unix-like commands that runs in Windows. Comes with shells (e.g. MinTTY) that can be used and will work with ANSI codes\n\n<ul>\n<li><a href=\"http://babun.github.io/index.html\" rel=\"nofollow noreferrer\">Babun</a> A windows shell that sits on top of a cygwin install.  Configurable; you can create configurations (e.g. for git bash or rvm or whatever) and share them as plug-ins. (Uses the mitty console.)</li>\n</ul></li>\n<li><a href=\"http://www.mingw.org/\" rel=\"nofollow noreferrer\">MinGW</a> - A \"Minimalist GNU for Windows\" that has a GNU toolset for windows, focused on those tools needed for development.  (IOW, it's a smaller and slightly different set than Cygwin provides.) DevKit, used to complie ruby gems into native windows code, uses MinGW.</li>\n<li><a href=\"http://www.mingw.org/wiki/MSYS\" rel=\"nofollow noreferrer\">MinSYS</a> - \"[A] contraction of \"Minimal SYStem\", is a Bourne Shell command line interpreter system. Offered as an alternative to Microsoft's cmd.exe, this provides a general purpose command line environment, which is particularly suited to use with MinGW, for porting of many Open Source applications to the MS-Windows platform; a light-weight fork of Cygwin-1.3, it includes a small selection of Unix tools, chosen to facilitate that objective.\" (From the MinGW site:)</li>\n</ul></li>\n</ul>\n\n<p>Some searching might turn up additional options.  These are the options most talked about and used (based on talking with others IRL, StackOverflow, and doing searching now and previously.)</p>\n\n<p>Install and set one of those options (it won't take long), and then you'll be all set to see the helpful colors used by RSpec or git or whatever.</p>\n"}], "owner": {"reputation": 1949, "user_id": 4584963, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/03a8016a0af94bd53303411018a847e2?s=128&d=identicon&r=PG&f=1", "display_name": "user4584963", "link": "https://stackoverflow.com/users/4584963/user4584963"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 697, "favorite_count": 1, "accepted_answer_id": 31219115, "answer_count": 1, "score": 1, "last_activity_date": 1436002438, "creation_date": 1430344131, "question_id": 29955207, "link": "https://stackoverflow.com/questions/29955207/how-to-get-color-in-windows-gitbash-using-bundle-exec-rake-test", "title": "How to get color in Windows gitbash using bundle exec rake test", "body": "<p>I am following Rails Tutorial.  I am on section 3.7.1 and I am trying to get color in my gitbash command prompt when running <code>bundle exec rake test</code>.  I have tried installing ansi, the win32console gem and the gem called turn and nothing seems to work.</p>\n\n<p>Is it even possible to get red and green colors when running <code>bundle exec rake test</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 6898, "user_id": 2012487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631fa1981d36a3b5f71426c821a8064?s=128&d=identicon&r=PG", "display_name": "Aguardientico", "link": "https://stackoverflow.com/users/2012487/aguardientico"}, "edited": false, "score": 0, "creation_date": 1430348479, "post_id": 29954947, "comment_id": 48032966, "body": "Do you have the the following file? <code>&#47;Users&#47;jessep&#47;work&#47;noterizer&#47;spec&#47;config&#47;environment</code>"}, {"owner": {"reputation": 231, "user_id": 2703924, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bca03897350b8532f4e386f4d5a86614?s=128&d=identicon&r=PG&f=1", "display_name": "Shona", "link": "https://stackoverflow.com/users/2703924/shona"}, "reply_to_user": {"reputation": 6898, "user_id": 2012487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631fa1981d36a3b5f71426c821a8064?s=128&d=identicon&r=PG", "display_name": "Aguardientico", "link": "https://stackoverflow.com/users/2012487/aguardientico"}, "edited": false, "score": 0, "creation_date": 1430349035, "post_id": 29954947, "comment_id": 48033162, "body": "no, but I have /Users/jessep/work/noterizer/config/environments"}, {"owner": {"reputation": 6898, "user_id": 2012487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631fa1981d36a3b5f71426c821a8064?s=128&d=identicon&r=PG", "display_name": "Aguardientico", "link": "https://stackoverflow.com/users/2012487/aguardientico"}, "edited": false, "score": 0, "creation_date": 1430349081, "post_id": 29954947, "comment_id": 48033181, "body": "Would be great if you put the content of <code>&#47;Users&#47;jessep&#47;work&#47;noterizer&#47;spec&#47;helpers&#47;notes_helper_spec.&zwnj;&#8203;rb</code> but see my answer and give a try"}], "answers": [{"comments": [{"owner": {"reputation": 231, "user_id": 2703924, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bca03897350b8532f4e386f4d5a86614?s=128&d=identicon&r=PG&f=1", "display_name": "Shona", "link": "https://stackoverflow.com/users/2703924/shona"}, "edited": false, "score": 0, "creation_date": 1430349692, "post_id": 29956206, "comment_id": 48033381, "body": "tried adding ../ to notes_helper_spec.rb and got same error - latest here -   [link] (<a href=\"http://pastebin.com/ZBigqNYA\" rel=\"nofollow noreferrer\">pastebin.com/ZBigqNYA</a>) and here is the notes_helper_spec.rb - [link] (<a href=\"http://pastebin.com/jTXgFxFM\" rel=\"nofollow noreferrer\">pastebin.com/jTXgFxFM</a>)"}, {"owner": {"reputation": 6898, "user_id": 2012487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631fa1981d36a3b5f71426c821a8064?s=128&d=identicon&r=PG", "display_name": "Aguardientico", "link": "https://stackoverflow.com/users/2012487/aguardientico"}, "reply_to_user": {"reputation": 231, "user_id": 2703924, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bca03897350b8532f4e386f4d5a86614?s=128&d=identicon&r=PG&f=1", "display_name": "Shona", "link": "https://stackoverflow.com/users/2703924/shona"}, "edited": false, "score": 0, "creation_date": 1430349748, "post_id": 29956206, "comment_id": 48033397, "body": "can you share the file?"}, {"owner": {"reputation": 6898, "user_id": 2012487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631fa1981d36a3b5f71426c821a8064?s=128&d=identicon&r=PG", "display_name": "Aguardientico", "link": "https://stackoverflow.com/users/2012487/aguardientico"}, "reply_to_user": {"reputation": 231, "user_id": 2703924, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bca03897350b8532f4e386f4d5a86614?s=128&d=identicon&r=PG&f=1", "display_name": "Shona", "link": "https://stackoverflow.com/users/2703924/shona"}, "edited": false, "score": 0, "creation_date": 1430349804, "post_id": 29956206, "comment_id": 48033415, "body": "are you having the exactly same log?"}], "tags": [], "owner": {"reputation": 6898, "user_id": 2012487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631fa1981d36a3b5f71426c821a8064?s=128&d=identicon&r=PG", "display_name": "Aguardientico", "link": "https://stackoverflow.com/users/2012487/aguardientico"}, "is_accepted": false, "score": 0, "last_activity_date": 1430349037, "creation_date": 1430349037, "answer_id": 29956206, "question_id": 29954947, "link": "https://stackoverflow.com/questions/29954947/rake-spec-fails-name-error-load-error/29956206#29956206", "title": "Rake spec fails - Name error, Load error", "body": "<p>I guess the file located at <code>/Users/jessep/work/noterizer/spec/helpers/notes_helper_spec.rb</code> have an issue in the line 2</p>\n\n<p>probably it looks like: \n<code>require File.expand_path(\"../../config/environment\", __FILE__)</code></p>\n\n<p>to fix the issue just add <code>../</code> so should look like:\n<code>require File.expand_path(\"../../../config/environment\", __FILE__)</code></p>\n"}], "owner": {"reputation": 231, "user_id": 2703924, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bca03897350b8532f4e386f4d5a86614?s=128&d=identicon&r=PG&f=1", "display_name": "Shona", "link": "https://stackoverflow.com/users/2703924/shona"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430349037, "creation_date": 1430342966, "question_id": 29954947, "link": "https://stackoverflow.com/questions/29954947/rake-spec-fails-name-error-load-error", "title": "Rake spec fails - Name error, Load error", "body": "<p>new to rspec, need to work on a test, when I run rake spec I get these errors, searched thru a bunch of old similar issues but nothing is working. not sure what to do...please help.</p>\n\n<p>ruby -v 2.1.2\nrails -v 4.1.4</p>\n\n<p><a href=\"http://pastebin.com/VJUh0Hhg\" rel=\"nofollow\">http://pastebin.com/VJUh0Hhg</a></p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "gem"], "answers": [{"tags": [], "owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "is_accepted": false, "score": 5, "last_activity_date": 1430348221, "creation_date": 1430348221, "answer_id": 29956056, "question_id": 29954935, "link": "https://stackoverflow.com/questions/29954935/downgrading-the-gem-coffee-script-source-from-1-9-1-to-1-8-0/29956056#29956056", "title": "downgrading the gem coffee-script-source&#39; from 1.9.1 to 1.8.0", "body": "<p>Put this line in your gemfile:</p>\n\n<pre><code>gem 'coffee-script-source', '1.8.0'\n</code></pre>\n\n<p>And then run <code>bundle install</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 631, "user_id": 5955651, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b7905c7a5c4ce8c9c76dab4f94f8557?s=128&d=identicon&r=PG&f=1", "display_name": "stelios.anastasakis", "link": "https://stackoverflow.com/users/5955651/stelios-anastasakis"}, "is_accepted": false, "score": 1, "last_activity_date": 1456170232, "last_edit_date": 1456170232, "creation_date": 1456169158, "answer_id": 35562137, "question_id": 29954935, "link": "https://stackoverflow.com/questions/29954935/downgrading-the-gem-coffee-script-source-from-1-9-1-to-1-8-0/35562137#35562137", "title": "downgrading the gem coffee-script-source&#39; from 1.9.1 to 1.8.0", "body": "<p>As cd-rum said\n\"Put this line in your gemfile:</p>\n\n<pre><code>gem 'coffee-script-source', '1.8.0'\"\n</code></pre>\n\n<p>and actually run 'bundle update'</p>\n"}, {"tags": [], "owner": {"reputation": 2928, "user_id": 7747942, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5jXKyAbmi_M/AAAAAAAAAAI/AAAAAAAAAFQ/AewmU0ev_68/photo.jpg?sz=128", "display_name": "Sylhare", "link": "https://stackoverflow.com/users/7747942/sylhare"}, "is_accepted": false, "score": 0, "last_activity_date": 1518846860, "creation_date": 1518846860, "answer_id": 48838355, "question_id": 29954935, "link": "https://stackoverflow.com/questions/29954935/downgrading-the-gem-coffee-script-source-from-1-9-1-to-1-8-0/48838355#48838355", "title": "downgrading the gem coffee-script-source&#39; from 1.9.1 to 1.8.0", "body": "<p>I had that issue and I wanted to put a more detailed solution on how to do it and some context to solve this issue: <code>ExecJS::ProgramError in Welcome#indexExecJS::ProgramError in Welcome#index</code></p>\n\n<h3>Changing coffee script's version in the Gemfile</h3>\n\n<p>Add in <em>blog/GemFile</em> the coffee-script-source v1.8.0 (v1.9.0+ does not work on Windows)</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>#For Windows it works with CofferScript v1.8\ngem 'coffee-script-source', '1.8.0'\n</code></pre>\n\n<p>Then <strong>Stop the server</strong> (if it was running) and do:</p>\n\n<pre><code>bundle update coffee-script-source\n</code></pre>\n\n<p>It should now be working fine.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 6435557, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rhc6E.jpg?s=128&g=1", "display_name": "Biplob45", "link": "https://stackoverflow.com/users/6435557/biplob45"}, "is_accepted": false, "score": 0, "last_activity_date": 1521196836, "creation_date": 1521196836, "answer_id": 49318738, "question_id": 29954935, "link": "https://stackoverflow.com/questions/29954935/downgrading-the-gem-coffee-script-source-from-1-9-1-to-1-8-0/49318738#49318738", "title": "downgrading the gem coffee-script-source&#39; from 1.9.1 to 1.8.0", "body": "<p>ERROR: ExecJS::ProgramError in Docs#show</p>\n\n<p>&lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>\n    &lt;%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>    this 2 line code create the problem.this code situated in layouts=>application.html.erb.</p>\n\n<p>Solve:</p>\n\n<h1>For Windows it works with CofferScript v1.8</h1>\n\n<p>gem 'coffee-script-source', '1.8.0'</p>\n\n<p>Added this code in Gemfile, and then write in the command line \"bundle update coffee-script-source\".</p>\n\n<p><a href=\"https://rubygems.org/gems/coffee-script-source/versions/1.8.0\" rel=\"nofollow noreferrer\">https://rubygems.org/gems/coffee-script-source/versions/1.8.0</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/DbNMV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DbNMV.png\" alt=\"Picture-1\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/XPJxL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XPJxL.png\" alt=\"Picture-2\"></a></p>\n"}], "owner": {"reputation": 71, "user_id": 4713829, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/6d859beff6ad8c4f04cbdc3c249c48d2?s=128&d=identicon&r=PG&f=1", "display_name": "Jose Manuel", "link": "https://stackoverflow.com/users/4713829/jose-manuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3885, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1521196836, "creation_date": 1430342894, "question_id": 29954935, "link": "https://stackoverflow.com/questions/29954935/downgrading-the-gem-coffee-script-source-from-1-9-1-to-1-8-0", "title": "downgrading the gem coffee-script-source&#39; from 1.9.1 to 1.8.0", "body": "<p>I am getting this error: ExecJS::ProgramError in Welcome#indexExecJS::ProgramError in Welcome#index.</p>\n\n<p>According to others posts that happend because there is a problem with coffee-script-source 1.9.0/1 running on windows so I have to downgrade the gem with the command line: gem 'coffee-script-source', '1.8.0'. when I try to do this i get this error: </p>\n\n<p>ERROR:  While executing gem ... (Gem::CommandLineError) Unknown command coffee-script-source,</p>\n\n<p>What I am doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "e-commerce"], "answers": [{"comments": [{"owner": {"reputation": 1893, "user_id": 3234634, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/be864d6dec7f3ed2b8656ec9fa27a15c?s=128&d=identicon&r=PG&f=1", "display_name": "Mutuma", "link": "https://stackoverflow.com/users/3234634/mutuma"}, "edited": false, "score": 0, "creation_date": 1430342386, "post_id": 29954739, "comment_id": 48030277, "body": "Yes...I want an empty item array at the start so that I can just continue adding products to the array as one shops"}, {"owner": {"reputation": 1339, "user_id": 3715522, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HebJi.jpg?s=128&g=1", "display_name": "MCBama", "link": "https://stackoverflow.com/users/3715522/mcbama"}, "reply_to_user": {"reputation": 1893, "user_id": 3234634, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/be864d6dec7f3ed2b8656ec9fa27a15c?s=128&d=identicon&r=PG&f=1", "display_name": "Mutuma", "link": "https://stackoverflow.com/users/3234634/mutuma"}, "edited": false, "score": 0, "creation_date": 1430342501, "post_id": 29954739, "comment_id": 48030348, "body": "@Mutuma Then as I said, you&#39;ll want to use <code>@cart &lt;&lt; params[:id]</code> rather than <code>add_item</code>. Where&#39;d you get that from anyways?"}, {"owner": {"reputation": 1893, "user_id": 3234634, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/be864d6dec7f3ed2b8656ec9fa27a15c?s=128&d=identicon&r=PG&f=1", "display_name": "Mutuma", "link": "https://stackoverflow.com/users/3234634/mutuma"}, "edited": false, "score": 0, "creation_date": 1430342560, "post_id": 29954739, "comment_id": 48030385, "body": "The add_item is an instance method in the Cart class."}, {"owner": {"reputation": 1339, "user_id": 3715522, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HebJi.jpg?s=128&g=1", "display_name": "MCBama", "link": "https://stackoverflow.com/users/3715522/mcbama"}, "reply_to_user": {"reputation": 1893, "user_id": 3234634, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/be864d6dec7f3ed2b8656ec9fa27a15c?s=128&d=identicon&r=PG&f=1", "display_name": "Mutuma", "link": "https://stackoverflow.com/users/3234634/mutuma"}, "edited": false, "score": 1, "creation_date": 1430342721, "post_id": 29954739, "comment_id": 48030468, "body": "Ah ok well I see now. Your <code>@cart</code> object isn&#39;t a <code>Cart</code> object at all it&#39;s an empty array and arrays aren&#39;t defined with an <code>add_item</code> method hence your error. You need to get <code>build_from_hash</code> to return a <code>Cart</code> object if you want <code>@cart</code> to have access to <code>add_item</code>"}, {"owner": {"reputation": 1893, "user_id": 3234634, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/be864d6dec7f3ed2b8656ec9fa27a15c?s=128&d=identicon&r=PG&f=1", "display_name": "Mutuma", "link": "https://stackoverflow.com/users/3234634/mutuma"}, "edited": false, "score": 0, "creation_date": 1430342921, "post_id": 29954739, "comment_id": 48030561, "body": "Please provide an example of how I would copy the logic in add_item to the answer you&#39;ve provided since the methods checks for if the item exists and adds a count to it and if not creates a new item in the cart"}, {"owner": {"reputation": 1893, "user_id": 3234634, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/be864d6dec7f3ed2b8656ec9fa27a15c?s=128&d=identicon&r=PG&f=1", "display_name": "Mutuma", "link": "https://stackoverflow.com/users/3234634/mutuma"}, "edited": false, "score": 0, "creation_date": 1430343033, "post_id": 29954739, "comment_id": 48030630, "body": "Now I get you, but please check the application_controller, in that way when I build from hash I just obtain a object of Cart that is an array"}, {"owner": {"reputation": 1893, "user_id": 3234634, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/be864d6dec7f3ed2b8656ec9fa27a15c?s=128&d=identicon&r=PG&f=1", "display_name": "Mutuma", "link": "https://stackoverflow.com/users/3234634/mutuma"}, "edited": false, "score": 0, "creation_date": 1430343139, "post_id": 29954739, "comment_id": 48030690, "body": "When I do @cart.class it returns Array .. how would I make that array an instance of Cart?"}, {"owner": {"reputation": 1339, "user_id": 3715522, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HebJi.jpg?s=128&g=1", "display_name": "MCBama", "link": "https://stackoverflow.com/users/3715522/mcbama"}, "reply_to_user": {"reputation": 1893, "user_id": 3234634, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/be864d6dec7f3ed2b8656ec9fa27a15c?s=128&d=identicon&r=PG&f=1", "display_name": "Mutuma", "link": "https://stackoverflow.com/users/3234634/mutuma"}, "edited": false, "score": 0, "creation_date": 1430343573, "post_id": 29954739, "comment_id": 48030906, "body": "@Mutuma check the edit I just made. Posting long code excerpts in comments sucks"}, {"owner": {"reputation": 1339, "user_id": 3715522, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HebJi.jpg?s=128&g=1", "display_name": "MCBama", "link": "https://stackoverflow.com/users/3715522/mcbama"}, "reply_to_user": {"reputation": 1893, "user_id": 3234634, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/be864d6dec7f3ed2b8656ec9fa27a15c?s=128&d=identicon&r=PG&f=1", "display_name": "Mutuma", "link": "https://stackoverflow.com/users/3234634/mutuma"}, "edited": false, "score": 1, "creation_date": 1430344003, "post_id": 29954739, "comment_id": 48031114, "body": "<code>CartItems.new</code> isn&#39;t a thing. Your class is called <code>CartItem</code> so you need to use <code>CartItem.new</code> (it&#39;s in your add_item method). Keep track of what&#39;s plural and what isn&#39;t and your life will be much easier."}], "tags": [], "owner": {"reputation": 1339, "user_id": 3715522, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HebJi.jpg?s=128&g=1", "display_name": "MCBama", "link": "https://stackoverflow.com/users/3715522/mcbama"}, "is_accepted": false, "score": 0, "last_activity_date": 1430343941, "last_edit_date": 1430343941, "creation_date": 1430342197, "answer_id": 29954739, "question_id": 29954663, "link": "https://stackoverflow.com/questions/29954663/rails-4-nomethoderror/29954739#29954739", "title": "Rails 4: NoMethodError", "body": "<p>There is no <code>add_item</code> method for arrays which is what your <code>@cart</code> object is when it is returned from <code>Cart.build_from_hash</code>. Well, in this case it looks like it's passing through your \"else\" statement which is returning an empty array. Is that what you intended to occur?</p>\n\n<p>If so, you append to arrays using something like this:</p>\n\n<p><code>array &lt;&lt; \"object\"</code></p>\n\n<p>Edit here because comment editing sucks:</p>\n\n<p>Alright, you're initializing <code>@cart</code> by using:</p>\n\n<p><code>@cart = Cart.build_from_hash session</code></p>\n\n<p><code>Cart.build_from_hash</code> returns an <code>Array</code> object. This is where you need to be returning a <code>Cart</code> object if you want to be able to use <code>Cart.add_item.</code> The easiest way would just add <code>return self</code> to the end of <code>Cart.build_from_hash</code> but I'm fairly certain that will open up other problems if you're using <code>@cart</code> as an actual array at some point.</p>\n\n<p>Of course if you want this <code>Cart</code> object to be saved in your database you'll have to actually create it at some point unless you just wanted to keep all the data in an array until the very end.</p>\n"}], "owner": {"reputation": 1893, "user_id": 3234634, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/be864d6dec7f3ed2b8656ec9fa27a15c?s=128&d=identicon&r=PG&f=1", "display_name": "Mutuma", "link": "https://stackoverflow.com/users/3234634/mutuma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 183, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430343941, "creation_date": 1430341920, "last_edit_date": 1430343889, "question_id": 29954663, "link": "https://stackoverflow.com/questions/29954663/rails-4-nomethoderror", "title": "Rails 4: NoMethodError", "body": "<p>I am creating a simple ecommerce application with a shopping cart. However when I try to add a product to the cart I get an error</p>\n\n<pre><code>NoMethodError at /carts/1/add/1\nundefined method `add_item' for []:Array\n</code></pre>\n\n<p>Here are my controllers </p>\n\n<ul>\n<li><p><strong>application_controller.rb</strong></p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n\n  protect_from_forgery with: :exception\n\n  def initialize_cart\n    @cart = Cart.build_from_hash session\n  end\nend\n</code></pre></li>\n<li><p><strong>carts_controller.rb</strong></p>\n\n<pre><code>class CartsController &lt; ApplicationController\n  before_filter :initialize_cart\n\n  def add\n    @cart.add_item params[:id]\n    set_product\n    redirect_to :back, notice: \"Added #{product.name} to cart\"\n  end\n\n  private\n\n  def set_product\n    @product = Product.find params[:id]\n  end\nend\n</code></pre></li>\n<li><p><strong>products_controller.rb</strong></p>\n\n<pre><code>class ProductsController &lt; ApplicationController\n  before_action :set_product, only: [:show, :edit, :update, :destroy]\n  before_filter :initialize_cart\n\n  def index\n    @products = Product.all\n  end\n\n  def show\n  end\n\n  def new\n    @product = Product.new\n  end\n\n  def edit\n  end\n\n  def create\n    @product = Product.new(product_params)\n\n    respond_to do |format|\n      if @product.save\n        format.html { redirect_to @product, notice: 'Product was successfully created.' }\n        format.json { render :show, status: :created, location: @product }\n      else\n        format.html { render :new }\n        format.json { render json: @product.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  def update\n    respond_to do |format|\n      if @product.update(product_params)\n        format.html { redirect_to @product, notice: 'Product was successfully updated.' }\n        format.json { render :show, status: :ok, location: @product }\n      else\n        format.html { render :edit }\n        format.json { render json: @product.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  def destroy\n    @product.destroy\n    respond_to do |format|\n      format.html { redirect_to products_url, notice: 'Product was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    def set_product\n      @product = Product.find(params[:id])\n    end\n\n    def product_params\n      params.require(:product).permit(:name, :price, :image)\n    end\nend\n</code></pre></li>\n</ul>\n\n<p>Here are my models </p>\n\n<ul>\n<li><p><strong>product.rb</strong></p>\n\n<pre><code>class Product &lt; ActiveRecord::Base\n   mount_uploader :image, ImageUploader\n\n   validates_presence_of :name, :price\n   validates_numericality_of :price\nend\n</code></pre></li>\n</ul>\n\n<p><em>The following are tableless classes in the model directory</em></p>\n\n<ul>\n<li><p><strong>cart.rb</strong></p>\n\n<pre><code>class Cart\n  attr_reader :items\n\n  def self.build_from_hash hash\n    items = if hash[\"cart\"] then\n      hash[\"cart\"][\"items\"].map do |item_data|\n        CartItem.new item_data[\"product_id\"], item_data[\"quantity\"]\n      end\n    else\n      []\n    end\n  end\n\n  def initialize items = []\n    @items = items\n  end\n\n  def add_item product_id\n    item = @items.find {|item| item.product_id == product_id}\n    if item\n      item.increment\n    else\n      @items &lt;&lt; CartItems.new(product_id)\n    end\n  end\n\n  def empty?\n    @item.empty?\n  end\n\n  def serialize\n    items = @items.map do |item| \n    {\n      \"product_id\" =&gt; item.product_id,\n      \"quantity\" =&gt; item.quantity \n    }\n  end\n\n  {\n    \"cart\" =&gt; {\n    \"items\" =&gt; items\n    }\n  }\n  end\nend\n</code></pre></li>\n<li><p><strong>cart_item.rb</strong></p>\n\n<pre><code>class CartItem\n  attr_reader :product_id, :quantity\n\n  def initialize product_id, quantity = 1\n    @product_id = product_id\n    @quantity = quantity\n  end\n\n def increment\n    @quantity += 1\n end\n\n def product\n    Product.find product_id\n end\nend\n</code></pre></li>\n</ul>\n\n<p>Here is a screenshot of my error</p>\n\n<p><img src=\"https://i.stack.imgur.com/h8vOo.png\" alt=\"error_screenshot\"></p>\n\n<h3>Solved the <strong>No Method Error</strong> by making initializing @items array in the Cart class  at the end of the <em>build_from_hash</em> method</h3>\n\n<p>Here is the solution</p>\n\n<pre><code>def self.build_from_hash hash\n    items = if hash[\"cart\"] then\n      hash[\"cart\"][\"items\"].map do |item_data|\n        CartItem.new item_data[\"product_id\"], item_data[\"quantity\"]\n      end\n    else\n      []\n    end\n\n    new items    \n  end\n</code></pre>\n\n<p>Now I am getting a new error</p>\n\n<pre><code>NameError at /carts/1/add/1\nuninitialized constant Cart::CartItems\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "database"], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 4136658, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee474ad3863401621a282bc5d97325e8?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/4136658/roland"}, "edited": false, "score": 0, "creation_date": 1430342125, "post_id": 29954665, "comment_id": 48030148, "body": "Okay i added that line in and it seems to work. after adding that do i now have to change the way i nav to the new , create ? but Thank you anyway i originally just had resources :books in my routes"}, {"owner": {"reputation": 139, "user_id": 3557937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c3643a2a81f53422616bfbbb4bd5323?s=128&d=identicon&r=PG&f=1", "display_name": "vereecjw", "link": "https://stackoverflow.com/users/3557937/vereecjw"}, "reply_to_user": {"reputation": 47, "user_id": 4136658, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee474ad3863401621a282bc5d97325e8?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/4136658/roland"}, "edited": false, "score": 0, "creation_date": 1430342372, "post_id": 29954665, "comment_id": 48030270, "body": "If you share your route file, we can go through it. I have a feeling you have default routing in place."}, {"owner": {"reputation": 47, "user_id": 4136658, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee474ad3863401621a282bc5d97325e8?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/4136658/roland"}, "edited": false, "score": 0, "creation_date": 1430342698, "post_id": 29954665, "comment_id": 48030456, "body": "i have added it into the question"}], "tags": [], "owner": {"reputation": 139, "user_id": 3557937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c3643a2a81f53422616bfbbb4bd5323?s=128&d=identicon&r=PG&f=1", "display_name": "vereecjw", "link": "https://stackoverflow.com/users/3557937/vereecjw"}, "is_accepted": true, "score": 2, "last_activity_date": 1430341922, "creation_date": 1430341922, "answer_id": 29954665, "question_id": 29954593, "link": "https://stackoverflow.com/questions/29954593/save-form-data-to-database-ruby-on-rails/29954665#29954665", "title": "Save Form Data to database Ruby on Rails", "body": "<p>looks like your routes file has an issue:\nyour config/routes.rb file should have the following\nresources :books, :only => [:new, :create]</p>\n\n<p>For a more complete answer:</p>\n\n<p>The error you are getting is saying the line</p>\n\n<pre><code> redirect_to new_book_path\n</code></pre>\n\n<p>is throwing an error because it does not understand the variable new_book_path.\nThis variable gets created/handled via your routes file.</p>\n"}, {"tags": [], "owner": {"reputation": 1971, "user_id": 3419341, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ameEV.jpg?s=128&g=1", "display_name": "anusha", "link": "https://stackoverflow.com/users/3419341/anusha"}, "is_accepted": false, "score": 0, "last_activity_date": 1430374059, "creation_date": 1430374059, "answer_id": 29960217, "question_id": 29954593, "link": "https://stackoverflow.com/questions/29954593/save-form-data-to-database-ruby-on-rails/29960217#29960217", "title": "Save Form Data to database Ruby on Rails", "body": "<p>Just try changing this line </p>\n\n<pre><code>redirect_to new_book_path\n</code></pre>\n\n<p>to </p>\n\n<pre><code>render 'new'\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 4136658, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee474ad3863401621a282bc5d97325e8?s=128&d=identicon&r=PG&f=1", "display_name": "Roland", "link": "https://stackoverflow.com/users/4136658/roland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2895, "favorite_count": 0, "accepted_answer_id": 29954665, "answer_count": 2, "score": 0, "last_activity_date": 1430374059, "creation_date": 1430341698, "last_edit_date": 1430373186, "question_id": 29954593, "link": "https://stackoverflow.com/questions/29954593/save-form-data-to-database-ruby-on-rails", "title": "Save Form Data to database Ruby on Rails", "body": "<p>Am trying to save the form data into my database \nbut for some reason I keep getting an error. </p>\n\n<p>Am fairly new to ruby so am not too sure what the problem is.\nAm trying to create a new book entry and here is what I have so far.</p>\n\n<p>books.controller</p>\n\n<pre><code>class BooksController &lt; ApplicationController\n\n  def new \n    @book = Book.new\n  end \n\n  def create\n    @book = Book.new(book_params)\n    if @book.save\n        redirect_to new_book_path\n    end\n  end\n\n  private\n\n  def book_params\n    params.require(:book).permit(:title, :description, :author, :status, :isbn_number)\n  end\n\nend\n</code></pre>\n\n<p>There error am getting is:</p>\n\n<pre><code>NameError in BooksController#create\nundefined local variable or method `new_book_path' for #&lt;BooksController:0xe3f5ae8&gt;\n</code></pre>\n\n<p>I have a form that I fill in all those details but when I try to submit, I get that error. Its saying the error is on the redirect but I don't know whats wrong.</p>\n\n<p>routes</p>\n\n<pre><code>Rails.application.routes.draw do\n\n  resources :books, :only =&gt; [:new, :create]\n\n  get 'page/books'\n\n  get 'page/about'\n\n  get 'page/contact'\n\n  get 'page/home'\n\n  devise_for :users \n  # The priority is based upon order of creation: first created -&gt; highest priority.\n  # See how all your routes lay out with \"rake routes\".\n\n  # You can have the root of your site routed with \"root\"\n   root 'page#home'\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 455, "user_id": 4680338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16bb8a33f61a735c68cbd458cc13b121?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Gupta", "link": "https://stackoverflow.com/users/4680338/gaurav-gupta"}, "edited": false, "score": 0, "creation_date": 1430379405, "post_id": 29954271, "comment_id": 48043799, "body": "I think you need to remove field  &#39;current_password&#39; from your devise/regristrations/edit.html.erb file"}, {"owner": {"reputation": 510, "user_id": 219984, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/47fb42de0ac729856592c5570e64c13a?s=128&d=identicon&r=PG", "display_name": "Ragnar", "link": "https://stackoverflow.com/users/219984/ragnar"}, "reply_to_user": {"reputation": 455, "user_id": 4680338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16bb8a33f61a735c68cbd458cc13b121?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Gupta", "link": "https://stackoverflow.com/users/4680338/gaurav-gupta"}, "edited": false, "score": 0, "creation_date": 1430383149, "post_id": 29954271, "comment_id": 48046073, "body": "This, right here, makes so much sense that I&#39;m going to bang my head against the wall a few times. I feel ashamed. Thanks so much, @GauravGupta!!!"}, {"owner": {"reputation": 455, "user_id": 4680338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16bb8a33f61a735c68cbd458cc13b121?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Gupta", "link": "https://stackoverflow.com/users/4680338/gaurav-gupta"}, "edited": false, "score": 0, "creation_date": 1430383333, "post_id": 29954271, "comment_id": 48046199, "body": "I am glad to help you :)"}], "owner": {"reputation": 510, "user_id": 219984, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/47fb42de0ac729856592c5570e64c13a?s=128&d=identicon&r=PG", "display_name": "Ragnar", "link": "https://stackoverflow.com/users/219984/ragnar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 553, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1430340625, "creation_date": 1430340625, "question_id": 29954271, "link": "https://stackoverflow.com/questions/29954271/devise-updating-user-without-password-not-working", "title": "Devise: Updating user without password not working", "body": "<p>I've done what Devise's github wiki article says on the topic, by adding the below to my freshly generated registrations_controller file (haven't touched anything else in there):</p>\n\n<pre><code>protected\n\ndef update_resource(resource, params)\n  resource.update_without_password(params)\nend\n</code></pre>\n\n<p>I've done my routing by adding <code>controllers: { registrations: 'users/registrations' }</code> (it's in controllers/users folder) to my routes files but all I get is an error, saying <code>unknown attribute 'current_password' for User</code> when I try to update my user.</p>\n\n<p>Any idea what I could be doing wrong?</p>\n"}, {"tags": ["ruby", "refactoring", "page-object-gem"], "comments": [{"owner": {"reputation": 1330, "user_id": 2540129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a27fee606501906b745105c230f1742c?s=128&d=identicon&r=PG", "display_name": "Johnson", "link": "https://stackoverflow.com/users/2540129/johnson"}, "edited": false, "score": 0, "creation_date": 1430412353, "post_id": 29953941, "comment_id": 48066510, "body": "Do you have any reference to the third option? I&#39;ve not read anything about it and can&#39;t seem to find anything with a quick Google look."}, {"owner": {"reputation": 1225, "user_id": 1394698, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/q9uwI.jpg?s=128&g=1", "display_name": "snowe", "link": "https://stackoverflow.com/users/1394698/snowe"}, "reply_to_user": {"reputation": 1330, "user_id": 2540129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a27fee606501906b745105c230f1742c?s=128&d=identicon&r=PG", "display_name": "Johnson", "link": "https://stackoverflow.com/users/2540129/johnson"}, "edited": false, "score": 0, "creation_date": 1430412894, "post_id": 29953941, "comment_id": 48066820, "body": "@Johnson <a href=\"https://github.com/cheezy/page-object/issues/263\" rel=\"nofollow noreferrer\">github.com/cheezy/page-object/issues/263</a> and <a href=\"https://github.com/cheezy/page-object/pull/262\" rel=\"nofollow noreferrer\">github.com/cheezy/page-object/pull/262</a>"}, {"owner": {"reputation": 1330, "user_id": 2540129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a27fee606501906b745105c230f1742c?s=128&d=identicon&r=PG", "display_name": "Johnson", "link": "https://stackoverflow.com/users/2540129/johnson"}, "edited": false, "score": 0, "creation_date": 1430413459, "post_id": 29953941, "comment_id": 48067207, "body": "Thanks for this. Looks interesting but I&#39;m not sure I understand why someone wouldn&#39;t just mixin modules instead."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1430484635, "post_id": 29953941, "comment_id": 48093503, "body": "Note that using sections would change the API for your page. I think it would only make sense if there are logical groups (eg multiple forms) on the page. This makes me think that the answer to your question really depends on what the page actually contains. I also would not worry about including things in a class they do not belong to. Including an irrelevant module is no different than the chance that someone copies an irrelevant element accessor."}, {"owner": {"reputation": 1225, "user_id": 1394698, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/q9uwI.jpg?s=128&g=1", "display_name": "snowe", "link": "https://stackoverflow.com/users/1394698/snowe"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1430837725, "post_id": 29953941, "comment_id": 48227521, "body": "@JustinKo that&#39;s true. The api will change and that&#39;s something I don&#39;t want to mess with because each page only has one form. Each page is essentially just a giant form with like 30 fields per page. Of course, there are more items than just those fields, those are only the editable ones."}], "answers": [{"comments": [{"owner": {"reputation": 1225, "user_id": 1394698, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/q9uwI.jpg?s=128&g=1", "display_name": "snowe", "link": "https://stackoverflow.com/users/1394698/snowe"}, "edited": false, "score": 0, "creation_date": 1430413921, "post_id": 29973731, "comment_id": 48067478, "body": "Yeah I&#39;m torn which is why I asked this question. In one way I just feel like these elements are configuration rather than code. But in another way I realize that it&#39;s code and should most likely be included in the class itself. I&#39;m going to leave this unmarked as an answer for right now, and if I don&#39;t get any other answers then I&#39;ll mark it as correct."}, {"owner": {"reputation": 1330, "user_id": 2540129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a27fee606501906b745105c230f1742c?s=128&d=identicon&r=PG", "display_name": "Johnson", "link": "https://stackoverflow.com/users/2540129/johnson"}, "reply_to_user": {"reputation": 1225, "user_id": 1394698, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/q9uwI.jpg?s=128&g=1", "display_name": "snowe", "link": "https://stackoverflow.com/users/1394698/snowe"}, "edited": false, "score": 1, "creation_date": 1430414365, "post_id": 29973731, "comment_id": 48067720, "body": "That&#39;s fine. I&#39;m more interested in seeing other opinions than getting the &quot;correct answer&quot; anyway."}], "tags": [], "owner": {"reputation": 1330, "user_id": 2540129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a27fee606501906b745105c230f1742c?s=128&d=identicon&r=PG", "display_name": "Johnson", "link": "https://stackoverflow.com/users/2540129/johnson"}, "is_accepted": true, "score": 1, "last_activity_date": 1430413407, "creation_date": 1430413407, "answer_id": 29973731, "question_id": 29953941, "link": "https://stackoverflow.com/questions/29953941/cleaning-up-massive-amount-of-pageobject-elements/29973731#29973731", "title": "Cleaning up massive amount of PageObject elements", "body": "<p>I don't see why you wouldn't keep the elements in the page object class. That's kind of the point of the class, right? If they're shared across multiple pages, then I understand putting them in a module and mixing in. But why abstract the unique elements on that page away from the page class?</p>\n\n<p>But if you're absolutely going to do this, I'd think this is the best option:</p>\n\n<blockquote>\n  <p>Move elements for each PageObject into a corresponding module and include that module into a single PageObject only</p>\n</blockquote>\n\n<p>There are ways you could ensure these modules are included only in the classes you expect. I have <a href=\"http://ruby-doc.org/core-1.9.3/Module.html#method-i-included\" rel=\"nofollow\">Module#included</a> in mind. Something like:</p>\n\n<pre><code>module MyPageElements\n  def self.included cls\n    raise \"Expected to be included on MyPage, got: #{cls}\" unless cls == MyPage\n  end\n\n  # ... elements ...\nend\n</code></pre>\n\n<blockquote>\n  <p>create a YAML config file, with the mapping of element_type => element_name => element_id and then call the corresponding element methods using metaprogramming</p>\n</blockquote>\n\n<p>Seems like this would be a headache to bring new, unfamiliar people up to speed on the code. Ultimately, I agree that it's just too un-Ruby like.</p>\n\n<blockquote>\n  <p>Utilize the upcoming PageObject sections feature to create different \"panels\" within each page and then include those Panels into the page.</p>\n</blockquote>\n\n<p>Since I've just barely looked at this (thanks for linking me to the PR), I don't feel like I can speak to its efficacy.</p>\n"}], "owner": {"reputation": 1225, "user_id": 1394698, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/q9uwI.jpg?s=128&g=1", "display_name": "snowe", "link": "https://stackoverflow.com/users/1394698/snowe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 29973731, "answer_count": 1, "score": 1, "last_activity_date": 1430413407, "creation_date": 1430339444, "question_id": 29953941, "link": "https://stackoverflow.com/questions/29953941/cleaning-up-massive-amount-of-pageobject-elements", "title": "Cleaning up massive amount of PageObject elements", "body": "<p>Each of our page objects has around 80-100 PageObject elements defined. This is a byproduct of a very data centric application and I don't see that changing any time soon. We have many text fields, select lists, buttons, and menus. I want to clean up these somehow and put them somewhere, but the things I've thought about don't seem very <em>clean</em>. </p>\n\n<p>Ideas: </p>\n\n<ul>\n<li>Move elements for each PageObject into a corresponding module and include that module into a single PageObject only</li>\n<li>create a YAML config file, with the mapping of element_type => element_name => element_id and then call the corresponding element methods using metaprogramming</li>\n<li>Utilize the upcoming PageObject sections feature to create different \"panels\" within each page and then include those Panels into the page. </li>\n</ul>\n\n<p>The first solution has the problem that each module <strong>can</strong> be included in other classes if somebody doesn't pay attention. It's not restricted to the single class</p>\n\n<p>The second solution seems slow and not very \"rubular\", along with being confusing to update elements for those new to the project</p>\n\n<p>The third solution seems like the best, but like the first solution, you could potentially include Sections into a class that they don't belong in. </p>\n\n<p>What other way can I move the definition of these elements out of the class so that our class is cleaner, shorter, easier to read, and defined to Ruby Specifications (i.e. the Ruby Style Guide). They really just seem like config data rather than ruby code, so I feel like they don't belong in the class. Especially when we have 80+ elements in each class. </p>\n"}, {"tags": ["ruby", "object", "messaging"], "answers": [{"comments": [{"owner": {"reputation": 5017, "user_id": 3581485, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/bEEKZ.jpg?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/3581485/luke"}, "edited": false, "score": 0, "creation_date": 1430342110, "post_id": 29954444, "comment_id": 48030135, "body": "Can you elaborate on the nature of the masking operation? It is an AND mask? so its looking for a result of <code>0...0111</code>? If it gets this result then it looks to the least significant bit as a flag for which class to go to?"}, {"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "reply_to_user": {"reputation": 5017, "user_id": 3581485, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/bEEKZ.jpg?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/3581485/luke"}, "edited": false, "score": 0, "creation_date": 1430342307, "post_id": 29954444, "comment_id": 48030231, "body": "If you look at the bits I linked, the code and masks are there - the mask is OR&#39;d with the shifted long to produce a new long which encodes the long&#39;s value and its status as a Fixnum immediate. The 4 least significant bits appear to be used to encode immediate types, though Fixnums only need 1 additional bit."}], "tags": [], "owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "is_accepted": true, "score": 1, "last_activity_date": 1430341192, "creation_date": 1430341192, "answer_id": 29954444, "question_id": 29953890, "link": "https://stackoverflow.com/questions/29953890/how-can-objects-with-immediate-value-be-receivers/29954444#29954444", "title": "How can objects with immediate value be receivers?", "body": "<p>Immediate values in Ruby are still Ruby VALUEs, but they're masked with a special flag that tells Ruby what kind of immediate a given VALUE contains. Fixnums, for example, are just the <a href=\"https://github.com/ruby/ruby/blob/0db407836bf7871fdee9e32357bd90c3ddaa1e11/include/ruby/ruby.h#L234-L236\" rel=\"nofollow\">unsigned long value left-shifted and tagged with the 0x01 bit</a>.</p>\n\n<p>Given a VALUE, Ruby can then check if it is an immediate value by masking it against <a href=\"https://github.com/ruby/ruby/blob/0db407836bf7871fdee9e32357bd90c3ddaa1e11/include/ruby/ruby.h#L390-L394\" rel=\"nofollow\">RUBY_IMMEDIATE_MASK (0x07)</a>. If it is an immediate, then it then <a href=\"https://github.com/ruby/ruby/blob/0db407836bf7871fdee9e32357bd90c3ddaa1e11/include/ruby/ruby.h#L1652-L1683\" rel=\"nofollow\">treats it as an instance of that immediate type</a>.</p>\n"}], "owner": {"reputation": 5017, "user_id": 3581485, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/bEEKZ.jpg?s=128&g=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/3581485/luke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 29954444, "answer_count": 1, "score": 1, "last_activity_date": 1430341192, "creation_date": 1430339264, "last_edit_date": 1430339571, "question_id": 29953890, "link": "https://stackoverflow.com/questions/29953890/how-can-objects-with-immediate-value-be-receivers", "title": "How can objects with immediate value be receivers?", "body": "<p>In Ruby, even though certain objects have immediate value, (e.g. <code>Fixnum</code> and <code>symbol</code> objects), you can still treat them like any other object. </p>\n\n<p>Intuitively, I am having trouble understanding how this is done. However, I do have a hunch. </p>\n\n<hr>\n\n<p>Objects that have immediate value are bound to variable names directly, where as for other 'normal' objects, a reference to said object is bound to the variable names instead.</p>\n\n<p>Because variables bound to objects with immediate value are bound to a direct encoding of the object itself and this encoding has to fit into an <code>unsigned long</code>, how does Ruby know where to go when I say <code>8.to_s</code> to handle the message (to look for the method)?</p>\n\n<p>Normally, a reference to the class that the object is an instance of (or a reference to a singleton class) is contained as part of the state of the object. In other words, the object has directions for where to go next. </p>\n\n<p>How does Ruby do this when all it has is an <code>unsigned long</code> at its disposal to encapsulate the object? </p>\n\n<p><strong>I presume it sets up a global constant that references the appropriate class when it is initially building the environment.</strong> Am I correct in this assumption? </p>\n\n<p>If this is the case, how does Ruby determine that the thing it is looking at is a <code>Fixnum</code> object, or a <code>symbol</code> object or what have you? (Normally it doesn't care, it just follows links in search of a method name, but in this case, it would need to know what the type of object it is dealing with is, so it knows which reference to follow.)</p>\n"}, {"tags": ["ruby", "csv"], "comments": [{"owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "edited": false, "score": 0, "creation_date": 1430342760, "post_id": 29953886, "comment_id": 48030488, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/26896899/how-to-skip-the-first-line-of-a-csv-file-and-make-the-second-line-the-header\">How to skip the first line of a CSV file and make the second line the header</a> and <a href=\"http://stackoverflow.com/questions/29889886/ruby-csv-headers-not-in-the-first-line?lq=1\" title=\"ruby csv headers not in the first line\">stackoverflow.com/questions/29889886/&hellip;</a>  Just extend the loop to read the first x -lines"}], "answers": [{"comments": [{"owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "edited": false, "score": 0, "creation_date": 1458386000, "post_id": 29954365, "comment_id": 59844980, "body": "An example can be found at <a href=\"http://stackoverflow.com/a/36099760/676874\">stackoverflow.com/a/36099760/676874</a>"}], "tags": [], "owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "is_accepted": false, "score": 3, "last_activity_date": 1430340928, "creation_date": 1430340928, "answer_id": 29954365, "question_id": 29953886, "link": "https://stackoverflow.com/questions/29953886/skip-rows-before-the-header-in-csv-file/29954365#29954365", "title": "Skip rows before the header in CSV file", "body": "<p>There is a <code>skip_lines</code> option to CSV.  Not exactly clear if it will skip header lines or just rows, but worth a shot.</p>\n\n<blockquote>\n  <p>:skip_lines - When set to an object responding to match, every line\n  matching it is considered a comment and ignored during parsing. When\n  set to a String, it is first converted to a Regexp. When set to nil no\n  line is considered a comment. If the passed object does not respond to\n  match, ArgumentError is thrown.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 21521, "user_id": 78613, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0fa1dc97175c4cc1ea4ecf506119961c?s=128&d=identicon&r=PG", "display_name": "Nick Veys", "link": "https://stackoverflow.com/users/78613/nick-veys"}, "is_accepted": false, "score": 1, "last_activity_date": 1430341102, "creation_date": 1430341102, "answer_id": 29954414, "question_id": 29953886, "link": "https://stackoverflow.com/questions/29953886/skip-rows-before-the-header-in-csv-file/29954414#29954414", "title": "Skip rows before the header in CSV file", "body": "<p>If you know how many metadata lines there are, you can just eat them before creating the CSV object.</p>\n\n<p>Can could of course also do something useful with them, but that's up to you!</p>\n\n<pre><code>require 'csv'\n\n3.times { DATA.readline }\n\ncsv = CSV.new(DATA, headers: true, return_headers: false)\ncsv.read.each do |row|\n  p row\nend\n# =&gt; #&lt;CSV::Row \"header1\":\"1\" \"header2\":\"2\"&gt;\n# =&gt; #&lt;CSV::Row \"header1\":\"3\" \"header2\":\"4\"&gt;\n# =&gt; #&lt;CSV::Row \"header1\":\"5\" \"header2\":\"6\"&gt;\np csv.headers\n# =&gt; [\"header1\", \" header2\"]\n\n__END__\n# I know\n# there are 3 lines\n# here, so I can skip them.\nheader1,header2\n1,2\n3,4\n5,6\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "is_accepted": false, "score": 1, "last_activity_date": 1430345073, "last_edit_date": 1592644375, "creation_date": 1430343814, "answer_id": 29955129, "question_id": 29953886, "link": "https://stackoverflow.com/questions/29953886/skip-rows-before-the-header-in-csv-file/29955129#29955129", "title": "Skip rows before the header in CSV file", "body": "<p>You can do something like:</p>\n<pre><code>require 'csv'\n\nwhile (header = DATA.readline) !~ /,.*,/\nend\ncsv = CSV.new(DATA.read, headers: header)\ncsv.each do |row|\n  p row\nend\np csv.headers\n\n__END__\nMetadata line 1\nMetadata line 2\nMetadata line 3\nMetadata line 4\nfoo,bar,baz\napple,orange,banana\ncashew,almond,walnut\n</code></pre>\n<p>One warning: <a href=\"https://stackoverflow.com/a/29954414/676874\">Nicks</a> 3rd data line (<code># here, so I can skip them.</code>) contains only one comma. So your rule <em>Find the first row with commas</em> could lead to a misunderstanding. You can use the regex <code>/,.*,/</code> but then you must have at least two commas in the header to be detected as the header.</p>\n<p>In other words: It is essential to have maximum one comma before the header line and to have more then one comma in the real header line.</p>\n<p>Remark 2: <code>DATA</code> is a special ruby construct that can be replaced with a file handle (e.g. the f in <code>File.open(filename){|f| ...}</code>.</p>\n"}], "owner": {"reputation": 101, "user_id": 1405771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d71fceba5aaa635b3a26f4748b66fa4c?s=128&d=identicon&r=PG", "display_name": "pixeld", "link": "https://stackoverflow.com/users/1405771/pixeld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1220, "favorite_count": 0, "closed_date": 1431549592, "answer_count": 3, "score": 4, "last_activity_date": 1430345073, "creation_date": 1430339251, "question_id": 29953886, "link": "https://stackoverflow.com/questions/29953886/skip-rows-before-the-header-in-csv-file", "closed_reason": "Duplicate", "title": "Skip rows before the header in CSV file", "body": "<p>I tried searching but couldn't find a question regarding my problem. Let's say I have a CSV file that looks something like this:</p>\n\n<pre><code>Metadata line 1\nMetadata line 2\nMetadata line 3\nMetadata line 4\nfoo,bar,baz\napple,orange,banana\ncashew,almond,walnut\n</code></pre>\n\n<p>The line <code>foo,bar,baz</code> is the header, and the following lines are the corresponding data. When I write my ruby code like so:</p>\n\n<pre><code>CSV.foreach(\"filename.csv\",:headers=&gt;true) do |row|\n  puts \"#{row}\"\nend\n</code></pre>\n\n<p>It clearly breaks. What's the best way to skip the lines before the header? Currently I'm thinking I could do something like: </p>\n\n<pre><code>Find the first row with commas and get line number\nExtract that line as an array\nPass that array to :headers\n</code></pre>\n\n<p>But this feels cumbersome - if I know exactly what line the header is, what's the best way to jump to that line and ignore everything previously? Is this possible? If this is a question that has been asked before, I will happily devour those answers, perhaps my search-fu just isn't good enough. </p>\n\n<p>Thank you so much!</p>\n"}, {"tags": ["ruby", "automation"], "comments": [{"owner": {"reputation": 23477, "user_id": 660921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3d53595cb2a89131fb3be7b55b3a9ef0?s=128&d=identicon&r=PG", "display_name": "Martin Tournoij", "link": "https://stackoverflow.com/users/660921/martin-tournoij"}, "edited": false, "score": 0, "creation_date": 1457384011, "post_id": 29953821, "comment_id": 59373305, "body": "&quot;Apologies for lack of sample code, I&#39;m on mobile at the moment. &quot; -&gt; So you know you&#39;re doing something wrong but you&#39;re doing it anyway ... ?"}], "answers": [{"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1457383685, "creation_date": 1457383685, "answer_id": 35853716, "question_id": 29953821, "link": "https://stackoverflow.com/questions/29953821/answering-a-cli-prompt-in-ruby-with-open3/35853716#35853716", "title": "Answering a cli prompt in ruby with open3?", "body": "<p>Consider this:</p>\n\n<p>Create an input file using:</p>\n\n<pre><code>cat &gt; test.input\nbar\nbaz\n</code></pre>\n\n<p>Then press <kbd>CTRL</kbd>+<kbd>D</kbd> to terminate the input, which will cause the file <code>test.input</code> to be created.</p>\n\n<p>In the same directory save this code as <code>test.rb</code>:</p>\n\n<pre><code>2.times do |i|\n  user_input = gets.chomp\n  puts \"#{ i }: #{ user_input }\"\nend\n</code></pre>\n\n<p>Run the code using:</p>\n\n<pre><code>ruby test.rb &lt; test.input\n</code></pre>\n\n<p>and you should see:</p>\n\n<pre><code>0: bar\n1: baz\n</code></pre>\n\n<p>The reason this works is because <code>gets</code> reads the STDIN (by default) looking for a line-end, which in this case is the character trailing <code>bar</code> and <code>baz</code>. If I load the input file in IRB it's easy to see the content of the file:</p>\n\n<pre><code>input = File.read('test.input')\n=&gt; \"bar\\nbaz\\n\"\n</code></pre>\n\n<p><code>2.times</code> says to read a line twice, so it reads both lines from the file and continues, falling out of the <code>times</code> loop.</p>\n\n<p>This means you can create a file, pipe it into your script, and Ruby will do the right thing. If Ruby has called a sub-shell, the sub-shell will inherit Ruby's STDIN, STDOUT and STDERR streams. I can rewrite the test.rb code to:</p>\n\n<pre><code>puts `sh ./test.sh &lt; #{ ARGV[0] }`\n</code></pre>\n\n<p>and create <code>test.sh</code>:</p>\n\n<pre><code>for i in 1 2\ndo\n  read line\n  echo $i $line\ndone\n</code></pre>\n\n<p>then call it using:</p>\n\n<pre><code>ruby test.rb test.input\n</code></pre>\n\n<p>and get:</p>\n\n<pre><code>1 bar\n2 baz\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4504503, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3e9c53215663585681799628a162b817?s=128&d=identicon&r=PG", "display_name": "user10847", "link": "https://stackoverflow.com/users/4504503/user10847"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 182, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1457383685, "creation_date": 1430339023, "last_edit_date": 1430340164, "question_id": 29953821, "link": "https://stackoverflow.com/questions/29953821/answering-a-cli-prompt-in-ruby-with-open3", "title": "Answering a cli prompt in ruby with open3?", "body": "<p>Apologies for lack of sample code,  I'm on mobile at the moment. </p>\n\n<p>I've gotten ruby+open3 to run commands and save stdout and stderr to a variable. </p>\n\n<p>My question is,  if the command line interface prompts the user is it possible to input text into the prompt and press enter?   If so how would I go about doing this. </p>\n\n<p>Example explanation \nRuns program,  program in terminal then asks \"what is your name?\"  and waits for input. </p>\n\n<p>I want to input a name,  press enter. </p>\n\n<p>Then it asks next question,  I want to put to stdin and answer that as well</p>\n\n<p>This is for an automation test.   If anyone has a better idea than open3 I'm all ears but I'm restricted to ruby </p>\n\n<p>Thanks </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "routing", "minitest"], "answers": [{"comments": [{"owner": {"reputation": 211, "user_id": 4481549, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/56caf26182ae732f2d19664ab934cbfb?s=128&d=identicon&r=PG&f=1", "display_name": "coderwannabe2", "link": "https://stackoverflow.com/users/4481549/coderwannabe2"}, "edited": false, "score": 0, "creation_date": 1430345038, "post_id": 29954719, "comment_id": 48031531, "body": "Thanks! I ended up changing my testcontroller action/method to be &#39;new&#39; rather than making my controller test_new since that would be weird. But this definitely helped me solve it, now I get it!"}, {"owner": {"reputation": 508, "user_id": 4415920, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/crheD.jpg?s=128&g=1", "display_name": "The Gugaru", "link": "https://stackoverflow.com/users/4415920/the-gugaru"}, "reply_to_user": {"reputation": 211, "user_id": 4481549, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/56caf26182ae732f2d19664ab934cbfb?s=128&d=identicon&r=PG&f=1", "display_name": "coderwannabe2", "link": "https://stackoverflow.com/users/4481549/coderwannabe2"}, "edited": false, "score": 0, "creation_date": 1430346650, "post_id": 29954719, "comment_id": 48032175, "body": "@coderwannabe2 that is great and I am glad you got it fixed! Just an fyi if you accept something as answer you should +1 it to ;) Keep at it once everything starts clicking you will begin liking ROR a lot."}, {"owner": {"reputation": 211, "user_id": 4481549, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/56caf26182ae732f2d19664ab934cbfb?s=128&d=identicon&r=PG&f=1", "display_name": "coderwannabe2", "link": "https://stackoverflow.com/users/4481549/coderwannabe2"}, "edited": false, "score": 0, "creation_date": 1430347013, "post_id": 29954719, "comment_id": 48032329, "body": "hmm nvm this didn&#39;t work since my test methods needs to start with test or else the test suite doesn&#39;t pick them up it seems. But i rename my view to be test_new.html.erb then that will appear to the user on the url path and I don&#39;t want that. There must be a better solution..."}, {"owner": {"reputation": 508, "user_id": 4415920, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/crheD.jpg?s=128&g=1", "display_name": "The Gugaru", "link": "https://stackoverflow.com/users/4415920/the-gugaru"}, "reply_to_user": {"reputation": 211, "user_id": 4481549, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/56caf26182ae732f2d19664ab934cbfb?s=128&d=identicon&r=PG&f=1", "display_name": "coderwannabe2", "link": "https://stackoverflow.com/users/4481549/coderwannabe2"}, "edited": false, "score": 0, "creation_date": 1430347248, "post_id": 29954719, "comment_id": 48032423, "body": "@coderwannabe2 you can have controller routes that the views do nothing, it processes and then passes control to a new view. I am not sure what you are trying to do now. Some additional information would be most helpful."}, {"owner": {"reputation": 211, "user_id": 4481549, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/56caf26182ae732f2d19664ab934cbfb?s=128&d=identicon&r=PG&f=1", "display_name": "coderwannabe2", "link": "https://stackoverflow.com/users/4481549/coderwannabe2"}, "edited": false, "score": 0, "creation_date": 1430348662, "post_id": 29954719, "comment_id": 48033035, "body": "what does &quot;you can have controller routes that the views do nothing&quot; mean? I don&#39;t understand. I updated the post with my controller code and my routes, I have a new action and a new.html.erb view. How can I test that in my test_new is my question? I am getting the error above still."}, {"owner": {"reputation": 211, "user_id": 4481549, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/56caf26182ae732f2d19664ab934cbfb?s=128&d=identicon&r=PG&f=1", "display_name": "coderwannabe2", "link": "https://stackoverflow.com/users/4481549/coderwannabe2"}, "edited": false, "score": 0, "creation_date": 1430362684, "post_id": 29954719, "comment_id": 48037110, "body": "I have reposted the problem with more information here: <a href=\"http://stackoverflow.com/questions/29958215/actionviewtemplateerror-no-such-file-or-directory-unlink-internal-c-us\" title=\"actionviewtemplateerror no such file or directory unlink internal c us\">stackoverflow.com/questions/29958215/&hellip;</a>     can you help please?"}], "tags": [], "owner": {"reputation": 508, "user_id": 4415920, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/crheD.jpg?s=128&g=1", "display_name": "The Gugaru", "link": "https://stackoverflow.com/users/4415920/the-gugaru"}, "is_accepted": false, "score": 0, "last_activity_date": 1430342525, "last_edit_date": 1430342525, "creation_date": 1430342138, "answer_id": 29954719, "question_id": 29953797, "link": "https://stackoverflow.com/questions/29953797/minitest-controller-error-templateerror-no-such-file-or-directory/29954719#29954719", "title": "Minitest Controller Error : :Template::Error: No such file or directory", "body": "<p>@coderwannabe2 your view should be named 'test_new.html.erb' not 'new.html.erb'\nThe error is stating that it cannot find a template matching 'test_new' which is true. Your template right now is 'new' so change 'new.html.erb' to 'test_new.html.erb' and you should have magick!</p>\n\n<p>You should always remember that if in your controller you have inside the class</p>\n\n<pre><code>def view_one\nend\ndef view_two\nend\n</code></pre>\n\n<p>then your views must match the method name so in this case you would have</p>\n\n<pre><code>view_one.html.erb\nview_two.html.erb\n</code></pre>\n\n<p>This is really watered down explanation but it should help get your mind around it all and how the method names relate to views and vice versa.</p>\n"}], "owner": {"reputation": 211, "user_id": 4481549, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/56caf26182ae732f2d19664ab934cbfb?s=128&d=identicon&r=PG&f=1", "display_name": "coderwannabe2", "link": "https://stackoverflow.com/users/4481549/coderwannabe2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 180, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430349214, "creation_date": 1430338956, "last_edit_date": 1430349214, "question_id": 29953797, "link": "https://stackoverflow.com/questions/29953797/minitest-controller-error-templateerror-no-such-file-or-directory", "title": "Minitest Controller Error : :Template::Error: No such file or directory", "body": "<p>When I run my tests I get this error:</p>\n\n<pre><code>  1) Error:\nCategoriesControllerTest#test_new:\nActionView::Template::Error: No such file or directory @ unlink_internal - C:/Users/Javi/AppData/Local/Temp/execjs201504\n29-7044-qg60v0json\n    app/views/layouts/application.html.erb:6:in `_app_views_layouts_application_html_erb__20669174_54234900'\n    test/controllers/categories_controller_test.rb:6:in `test_new'\n\n4 runs, 3 assertions, 0 failures, 1 errors, 0 skips\n</code></pre>\n\n<p>Here is my application.html.erb file:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;title&gt;TestingBasics&lt;/title&gt;\n  &lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' =&gt; true %&gt;\n  &lt;%= javascript_include_tag 'application', 'data-turbolinks-track' =&gt; true %&gt;\n  &lt;%= csrf_meta_tags %&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;%= yield %&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>I created a categories/new.html.erb file and saved it</p>\n\n<p>This is my controller test that is failing:</p>\n\n<pre><code>require \"test_helper\"\n\nclass CategoriesControllerTest &lt; ActionController::TestCase\n\n  def test_new\n    get :new \n    assert_response :success\n  end\n\nend\n</code></pre>\n\n<p>EDIT:: \nHere is my controller:</p>\n\n<pre><code>class CategoriesController &lt; ApplicationController\n\n    def new\n        @category = Category.new\n    end\n\nend\n</code></pre>\n\n<p>I also have the following in my routes file:</p>\n\n<pre><code>Rails.application.routes.draw do\n\n  resources :categories\n\nend\n</code></pre>\n\n<p>I have a new.html.erb on my views but its not working...</p>\n\n<p>Does anyone know what is happening? It looks like there is a problem with my application file picking up json? I am new to testing so not sure what this is. </p>\n"}, {"tags": ["ruby", "haml"], "answers": [{"comments": [{"owner": {"reputation": 261, "user_id": 1261445, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e89ac98e4f7978a49586e708971e06aa?s=128&d=identicon&r=PG", "display_name": "user1261445", "link": "https://stackoverflow.com/users/1261445/user1261445"}, "edited": false, "score": 0, "creation_date": 1430338408, "post_id": 29953500, "comment_id": 48027970, "body": "Thanks! Forgot about html_safe."}], "tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": false, "score": 2, "last_activity_date": 1430338027, "creation_date": 1430338027, "answer_id": 29953500, "question_id": 29953449, "link": "https://stackoverflow.com/questions/29953449/new-line-within-string-for-haml-ruby-code/29953500#29953500", "title": "New line within string for Haml/Ruby code", "body": "<p>I would use something like:</p>\n\n<pre><code>= link_to \"Hello 1&lt;br&gt;Hello 2&lt;br&gt;Hello 3\".html_safe, url\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2569, "user_id": 514040, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/98bb1ee1a1f3d1297acf493776066086?s=128&d=identicon&r=PG", "display_name": "neuronaut", "link": "https://stackoverflow.com/users/514040/neuronaut"}, "is_accepted": false, "score": 2, "last_activity_date": 1553679600, "last_edit_date": 1553679600, "creation_date": 1430338395, "answer_id": 29953626, "question_id": 29953449, "link": "https://stackoverflow.com/questions/29953449/new-line-within-string-for-haml-ruby-code/29953626#29953626", "title": "New line within string for Haml/Ruby code", "body": "<p>I would suggest thinking about the HTML needed to put three bits of text onto three separate lines. You could use &lt;p> tags or &lt;br> tags or &lt;div> tags (or even others if you use a bit of CSS). Perhaps something like this would work:</p>\n\n<pre><code>= link_to some_path do\n  Hello 1\n  %br\n  Hello 2\n  %br\n  Hello 3\n</code></pre>\n\n<p>or maybe this:</p>\n\n<pre><code>= link_to some_path do\n  %p\n    Hello 1\n  %p\n    Hello 2\n  %p\n    Hello 3\n</code></pre>\n"}], "owner": {"reputation": 261, "user_id": 1261445, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e89ac98e4f7978a49586e708971e06aa?s=128&d=identicon&r=PG", "display_name": "user1261445", "link": "https://stackoverflow.com/users/1261445/user1261445"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5377, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1553679600, "creation_date": 1430337893, "last_edit_date": 1430338904, "question_id": 29953449, "link": "https://stackoverflow.com/questions/29953449/new-line-within-string-for-haml-ruby-code", "title": "New line within string for Haml/Ruby code", "body": "<p>I have some text with a <code>link_to</code>, say <code>\"Hello 1 Hello 2 Hello 3\"</code>. I need the string to be a link that looks like the following:</p>\n\n<pre><code>Hello 1\n\nHello 2\n\nHello 3\n</code></pre>\n\n<p>I'm working in Ruby/Haml and cannot seem to accomplish this. Any idea how? I tried concatenating <code>\"\\n\"</code> within the string, and it does not seem to work either.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ubuntu"], "comments": [{"owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 0, "creation_date": 1431049585, "post_id": 29953420, "comment_id": 48339781, "body": "So first of all, <code>(&#39;x&#39; * 30)</code>, no no no.  You can generate a secret token by running <code>rake secret</code> in your app, that&#39;s the right way to generate a secret token. But this doesn&#39;t answer the bulk of your question, so I&#39;ll just leave it as a comment here. You might also want to look up the purpose of the secret token, so you understand what&#39;s going on."}], "answers": [{"comments": [{"owner": {"reputation": 349, "user_id": 700467, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f0a454d0f5002eea5f0b7d98596b4ac1?s=128&d=identicon&r=PG&f=1", "display_name": "captain awesome", "link": "https://stackoverflow.com/users/700467/captain-awesome"}, "edited": false, "score": 0, "creation_date": 1430400531, "post_id": 29959718, "comment_id": 48057648, "body": "Hi Hannah, thanks for your response. I&#39;ve added the contents for the secrets.yml and stated my staging as being development in my post."}], "tags": [], "owner": {"reputation": 136, "user_id": 2461776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed7fe3459f98af5563f6c57a4ec124fb?s=128&d=identicon&r=PG", "display_name": "Hannah", "link": "https://stackoverflow.com/users/2461776/hannah"}, "is_accepted": false, "score": 4, "last_activity_date": 1430371933, "creation_date": 1430371933, "answer_id": 29959718, "question_id": 29953420, "link": "https://stackoverflow.com/questions/29953420/missing-secret-token-and-secret-key-base-rails-4-2-0-with-rvm/29959718#29959718", "title": "Missing `secret_token` and `secret_key_base` - Rails 4.2.0 with RVM", "body": "<p>Are you launching your server locally in development or in some other environment (for instance, on Heroku in production)?  Because if you are running on Heroku, then you'll need to remove <code>secrets.yml</code> from your <code>.gitignore</code> so that Heroku can figure out what the secret key is.  The safe way of handling this is to store your secret key as an environment variable on Heroku and have your <code>secrets.yml</code> point to it (see below).</p>\n\n<p>If you are running locally, you should be able to delete your <code>secret_token.rb</code> as long as you have your <code>secret_key_base</code> set for every environment inside your <code>secrets.yml</code> file.  You didn't post what yours looks like, but it should look something like this:</p>\n\n<pre><code>development:\n secret_key_base: somerandomkey\ntest:\n secret_key_base: somerandomkey\nstaging:\n secret_key_base: &lt;%= ENV[\"SECRET_KEY_BASE\"] %&gt;\nproduction:\n secret_key_base: &lt;%= ENV[\"SECRET_KEY_BASE\"] %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6548, "user_id": 3649209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4d5cb34bdd07db87fee16a103abbb42?s=128&d=identicon&r=PG&f=1", "display_name": "James Lawson", "link": "https://stackoverflow.com/users/3649209/james-lawson"}, "is_accepted": false, "score": 4, "last_activity_date": 1443954855, "last_edit_date": 1443954855, "creation_date": 1443878486, "answer_id": 32923083, "question_id": 29953420, "link": "https://stackoverflow.com/questions/29953420/missing-secret-token-and-secret-key-base-rails-4-2-0-with-rvm/32923083#32923083", "title": "Missing `secret_token` and `secret_key_base` - Rails 4.2.0 with RVM", "body": "<p><strong>As of Rails 4.1, there is a <a href=\"http://guides.rubyonrails.org/upgrading_ruby_on_rails.html#config-secrets-yml\" rel=\"nofollow\">new way</a> to store secrets.</strong></p>\n\n<p>In Rails 4.1+, <strong>you need <code>config/secrets.yml</code> \u2013 do not delete it!</strong> I can see in your GitHub repo, you are using Rails 4.2 and that this file is missing. This is why you see that error. (<em>Note: if you still have a  secret_token.rb file, remove it. Rails 4.1+ no longer uses it</em>).</p>\n\n<p>I recommend using <a href=\"https://github.com/bkeepers/dotenv\" rel=\"nofollow\">dotenv rails</a>.</p>\n\n<p>Add and commit <em>config/secrets.yml:</em></p>\n\n<pre><code>default: &amp;default\n  secret_key_base: &lt;%= ENV['SECRET_KEY_BASE'] %&gt;\n\ndevelopment:\n  &lt;&lt;: *default\n\ntest:\n  &lt;&lt;: *default\n\nstaging:\n  &lt;&lt;: *default\n\nproduction:\n  &lt;&lt;: *default\n</code></pre>\n\n<p>Whenever you launch rails, you need to make sure you set the <code>SECRET_KEY_BASE</code> system <em>environement variable</em>. With the above YAML file, you need to ensure this environment variable is set on whatever machine that starts your Rails app in whatever environment. The key point is, this <em>how</em> this variable is set may vary depending on where/what your machine is. </p>\n\n<p>On your <strong>local machine</strong> (at home), create a file called <code>.env</code> with a secret:</p>\n\n<pre><code>echo SECRET_KEY_BASE=`rake secret` &gt; .env\nrails server\n</code></pre>\n\n<p>You only need to create this file <em>once</em>. When rails starts, dotenv will read this <code>.env</code> file, and set the environement variable <code>SECRET_KEY_BASE</code> appropriately. Do not commit this file \u2013 in fact, I recommend adding it to your <code>.gitignore</code>.</p>\n\n<p>Later, when you deploy to a <strong>remove server</strong> (a production/deployment server), things will be different. You may need to use SSH to set the environment variable. On Heroku, you can sign in to your <a href=\"https://devcenter.heroku.com/articles/config-vars#setting-up-config-vars-for-a-deployed-application\" rel=\"nofollow\">app's dashboard</a> and set an environment value (or use <code>config:set</code> in <a href=\"https://toolbelt.heroku.com/\" rel=\"nofollow\">Heroku Toolbelt</a>).</p>\n\n<p><strong>Edit:</strong> <em>Note I didn't invent this. This is the approach used by <a href=\"https://github.com/thoughtbot/suspenders\" rel=\"nofollow\">Suspenders</a>.</em></p>\n"}, {"tags": [], "owner": {"reputation": 177, "user_id": 1919592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EYMmY.jpg?s=128&g=1", "display_name": "Chitresh goyal", "link": "https://stackoverflow.com/users/1919592/chitresh-goyal"}, "is_accepted": false, "score": 3, "last_activity_date": 1453273920, "creation_date": 1453273920, "answer_id": 34893661, "question_id": 29953420, "link": "https://stackoverflow.com/questions/29953420/missing-secret-token-and-secret-key-base-rails-4-2-0-with-rvm/34893661#34893661", "title": "Missing `secret_token` and `secret_key_base` - Rails 4.2.0 with RVM", "body": "<p>Simple way to generate your token and keybase is:</p>\n\n<pre><code>bundle exec rake secret\n</code></pre>\n\n<p>Now you will get a long string like:</p>\n\n<blockquote>\n  <p>ddf4a6d37a956089984c8fe6160a6e3c18e48a448a07a50e4ab10a4edd6d3597f13ad9b6e0af4f5723f1ef52bfd2ffa78ab5b815d2bb8b15f14f48e7e307baad</p>\n</blockquote>\n\n<p>copy same string which you got on your Terminal/CMD</p>\n\n<p>No run this command:</p>\n\n<pre><code>export SECRET_KEY_BASE=ddf4a6d37a956089984c8fe6160a6e3c18e48a448a07a50e4ab10a4edd6d3597f13ad9b6e0af4f5723f1ef52bfd2ffa78ab5b815d2bb8b15f14f48e7e307baad\n\nrails s -e production\n</code></pre>\n\n<p>Whenever you want to change your secret key follow above steps. Do not write it in file for security reasons.</p>\n"}], "owner": {"reputation": 349, "user_id": 700467, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f0a454d0f5002eea5f0b7d98596b4ac1?s=128&d=identicon&r=PG&f=1", "display_name": "captain awesome", "link": "https://stackoverflow.com/users/700467/captain-awesome"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14675, "favorite_count": 1, "answer_count": 3, "score": 11, "last_activity_date": 1453273920, "creation_date": 1430337814, "last_edit_date": 1431111005, "question_id": 29953420, "link": "https://stackoverflow.com/questions/29953420/missing-secret-token-and-secret-key-base-rails-4-2-0-with-rvm", "title": "Missing `secret_token` and `secret_key_base` - Rails 4.2.0 with RVM", "body": "<p>Recently I pulled one of my repos from Git. After launching the server, I am receiving the the following: <strong>Missing secret_token and secret_key_base</strong>.\nThis may be happening because I've included the secrets.yml in my .gitignore.</p>\n\n<p>My current setup</p>\n\n<ul>\n<li>Ubuntu 14.04</li>\n<li>ruby 2.2.0p0</li>\n<li>rails 4.2.0</li>\n<li>rvm 1.26.11</li>\n<li>local server (not remote)</li>\n<li>development environment</li>\n</ul>\n\n<p>Many online resources state that I must gen a new key using <code>rake secret</code> and add it to the secrets.yml. Placing the key inside the secrets.yml and restarting the rails server does not work.</p>\n\n<hr>\n\n<blockquote>\n  <p><strong>Edited: Added contents of secrets.yml below. -04/30/15 9:04 AM EST</strong></p>\n</blockquote>\n\n<pre><code>development:\n    secret_key_base: LONG KEY HERE\n\ntest:\n  secret_key_base: LONG KEY HERE\n\n# Do not keep production secrets in the repository,\n# instead read values from the environment.\nproduction:\n  secret_key_base: &lt;%= ENV[\"SECRET_KEY_BASE\"] %&gt;\n</code></pre>\n\n<p>Please know this is set as a development environment on a local server in my place of residence (not Heroku).</p>\n\n<hr>\n\n<p>Other resources state I need to add an entry inside my <code>secret_token.rb</code> but this file does not exist in my project.</p>\n\n<p>The only way my application will run is if I were to create a <code>secret_token.rb</code> file and add either one of the following inside of it:</p>\n\n<pre><code>MyApp::Application.config.secret_token = if Rails.env.development? or Rails.env.test?\n  ('x' * 30) # meets minimum requirement of 30 chars long\nelse\n  ENV['SECRET_TOKEN-']\nend\n</code></pre>\n\n<p>or </p>\n\n<pre><code>MyApp::Application.config.secret_token = 'the secret key'\n</code></pre>\n\n<p>Why is this file required when the Rails docs states to remove it?</p>\n\n<p><a href=\"http://guides.rubyonrails.org/upgrading_ruby_on_rails.html#config-secrets-yml\" rel=\"noreferrer\">3.3 config/secrets.yml</a></p>\n\n<p>The secret_token.rb is not required in order to run for new generated projects, only the ones from my Git repo.</p>\n\n<p>Please advise on why my application needs secret_token.rb though the Rails docs state otherwise or my application will not run without it.</p>\n\n<blockquote>\n  <p><strong>Edited: -04/30/15 9:27 AM EST</strong></p>\n</blockquote>\n\n<p>Another strange behavior is I can rename <code>secrets.yml</code> while the <code>secret_token.rb</code> remains in place and the application will still run.</p>\n\n<p>I attempted to rename the <code>secret_token.rb</code>, added <code>&lt;%= ENV[\"SECRET_KEY_BASE\"] %&gt;</code> to development and I'm still experiencing the Missing secret_token issue.</p>\n\n<blockquote>\n  <p><strong>Edited: Added git repo below. -05/08/15 2:50 AM EST</strong></p>\n</blockquote>\n\n<p>git repo: <a href=\"https://github.com/captain-awesome/blog_mac\" rel=\"noreferrer\">https://github.com/captain-awesome/blog_mac</a></p>\n\n<p>Something strange is if I were to modify any one of the 32 characters, save the secret_token.rb, reload the server...my app will run. Is the 32 character string in the secret_token.rb something I can make-up on my own? If so, what is the real purpose for rake secret?</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "redirect", "button"], "comments": [{"owner": {"reputation": 4279, "user_id": 3920143, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1b47dd912eaeb6cd72a15ec2932f6751?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/3920143/joel"}, "edited": false, "score": 0, "creation_date": 1430337764, "post_id": 29953371, "comment_id": 48027621, "body": "<a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActionView/Helpers/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4638893, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yZ35ff1RAgs/AAAAAAAAAAI/AAAAAAAAUuE/mmIhI2egGyM/photo.jpg?sz=128", "display_name": "Mauricio Garcia Sainz", "link": "https://stackoverflow.com/users/4638893/mauricio-garcia-sainz"}, "edited": false, "score": 0, "creation_date": 1430339336, "post_id": 29953558, "comment_id": 48028523, "body": "I&#39;ll give it a try. Thank you very much"}], "tags": [], "owner": {"reputation": 829, "user_id": 3750152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b10e93a7a054b7102851af1ccbf587a?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Mulholand", "link": "https://stackoverflow.com/users/3750152/rob-mulholand"}, "is_accepted": false, "score": 3, "last_activity_date": 1430338190, "creation_date": 1430338190, "answer_id": 29953558, "question_id": 29953371, "link": "https://stackoverflow.com/questions/29953371/button-redirection-using-ruby-on-rails/29953558#29953558", "title": "Button redirection using Ruby on Rails", "body": "<p>Assuming you have an <code>index</code> action on your <code>ProductosController</code> and a route to the view:</p>\n\n<p><code>&lt;%= button_to \"Productos\", productos_path, method: :get %&gt;</code></p>\n"}, {"tags": [], "owner": {"reputation": 385, "user_id": 2961723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30ab629ad87aba9f116217d6184b3720?s=128&d=identicon&r=PG&f=1", "display_name": "dvn928361", "link": "https://stackoverflow.com/users/2961723/dvn928361"}, "is_accepted": false, "score": 0, "last_activity_date": 1430341492, "creation_date": 1430341492, "answer_id": 29954523, "question_id": 29953371, "link": "https://stackoverflow.com/questions/29953371/button-redirection-using-ruby-on-rails/29954523#29954523", "title": "Button redirection using Ruby on Rails", "body": "<p>For a route declared like this...</p>\n\n<p><code>get '/productos', to: 'productos#index', as: 'productos'</code></p>\n\n<p>...Rails gives you a helper method <code>productos_path</code> which evaluates to the the URL of that route. You can then use than in a button as RobM showed.</p>\n\n<p>If productos is a resource (meaning you have <code>resources :productos</code> in your routes file), the above route will have been automatically added and you'll still have the <code>productos_path</code> helper.</p>\n"}, {"comments": [{"owner": {"reputation": 126, "user_id": 2659387, "user_type": "registered", "profile_image": "https://graph.facebook.com/1077134521/picture?type=large", "display_name": "Aleksandr Larionov", "link": "https://stackoverflow.com/users/2659387/aleksandr-larionov"}, "edited": false, "score": 0, "creation_date": 1430354475, "post_id": 29957083, "comment_id": 48034779, "body": "can you display your routes.rb and welcome_controller.rb"}], "tags": [], "owner": {"reputation": 126, "user_id": 2659387, "user_type": "registered", "profile_image": "https://graph.facebook.com/1077134521/picture?type=large", "display_name": "Aleksandr Larionov", "link": "https://stackoverflow.com/users/2659387/aleksandr-larionov"}, "is_accepted": false, "score": 2, "last_activity_date": 1430354461, "creation_date": 1430354461, "answer_id": 29957083, "question_id": 29953371, "link": "https://stackoverflow.com/questions/29953371/button-redirection-using-ruby-on-rails/29957083#29957083", "title": "Button redirection using Ruby on Rails", "body": "<p>Instead of\n<code>&lt;a href='#productos'&gt;PRODUCTOS&lt;/a&gt;</code></p>\n\n<p>Write rails link</p>\n\n<p><code>&lt;%= link_to 'PRODUCTOS', productos_path, class: 'button alt' %&gt;</code></p>\n"}], "owner": {"reputation": 11, "user_id": 4638893, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yZ35ff1RAgs/AAAAAAAAAAI/AAAAAAAAUuE/mmIhI2egGyM/photo.jpg?sz=128", "display_name": "Mauricio Garcia Sainz", "link": "https://stackoverflow.com/users/4638893/mauricio-garcia-sainz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8432, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1567502042, "creation_date": 1430337635, "question_id": 29953371, "link": "https://stackoverflow.com/questions/29953371/button-redirection-using-ruby-on-rails", "title": "Button redirection using Ruby on Rails", "body": "<p>I'm just starting out with ruby on rails and web applications. I just finished implementing a database with ruby. I'm having trouble making my buttons in the homepage redirect to the views I'd like them to go to. I'm sure it's something very simple but I haven't been able to find a way to do it.</p>\n\n<p>Here is a link to the idea. <a href=\"http://mauricegs.imgur.com/buttons\" rel=\"nofollow\">http://mauricegs.imgur.com/buttons</a></p>\n\n<p>You press the button that says \"Productos\" and it should send you to the \"Productos\" view. I'm not sure what I should add at reference for productos\nThanks</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "erb"], "answers": [{"tags": [], "owner": {"reputation": 1910, "user_id": 676788, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/16dfcfaa3f6405e9572cea3f88a68c56?s=128&d=identicon&r=PG", "display_name": "Nafaa Boutefer", "link": "https://stackoverflow.com/users/676788/nafaa-boutefer"}, "is_accepted": true, "score": 1, "last_activity_date": 1430337334, "creation_date": 1430337334, "answer_id": 29953280, "question_id": 29953248, "link": "https://stackoverflow.com/questions/29953248/database-data-displaying-on-html-rails/29953280#29953280", "title": "Database data displaying on html (rails)", "body": "<pre><code>&lt;%= @products.each do |product| %&gt;\n</code></pre>\n\n<p>must be</p>\n\n<pre><code>&lt;% @products.each do |product| %&gt;\n</code></pre>\n"}], "owner": {"reputation": 473, "user_id": 4652341, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/32d243374ec979900e471874a9dc7ad9?s=128&d=identicon&r=PG&f=1", "display_name": "James N", "link": "https://stackoverflow.com/users/4652341/james-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 29953280, "answer_count": 1, "score": 0, "last_activity_date": 1430337334, "creation_date": 1430337154, "question_id": 29953248, "link": "https://stackoverflow.com/questions/29953248/database-data-displaying-on-html-rails", "title": "Database data displaying on html (rails)", "body": "<p>I am making a rails app that users can use to shop for products. Everything was working fine, then I adjusted the <code>products#index</code> page, and now the data from the database is displaying on the html under the <code>&lt;div&gt;</code> of the page like so;</p>\n\n<pre><code>[#&amp;lt;Product id: 1, name: &amp;quot;Green&amp;quot;, description: &amp;quot;coming from the hills of the emerald triangle, thi...&amp;quot;, strain: &amp;quot;Sativa&amp;quot;, price: #&amp;lt;BigDecimal:7fbe558f8228,&amp;#39;0.2E2&amp;#39;,9(18)&amp;gt;, image_file_name: &amp;quot;http://i.imgur.com/NZkyXpr.jpg&amp;quot;, created_at: &amp;quot;2015-04-12 22:56:42&amp;quot;, updated_at: &amp;quot;2015-04-12 22:56:42&amp;quot;, gram_price: nil, eighth_price: nil, quarter_price: nil, product_type: nil&amp;gt;, #&amp;lt;Product id: 3, name: &amp;quot;Sour Diesel&amp;quot;, description: &amp;quot;Sour, sometimes called Sour D, is an invigo...&amp;quot;, strain: &amp;quot;Hybrid&amp;quot;, price: #&amp;lt;BigDecimal:7fbe55902bd8,&amp;#39;0.2E2&amp;#39;,9(18)&amp;gt;, image_file_name: &amp;quot;http://i.imgur.com/RUHZAXQ.jpg&amp;quot;, created_at: &amp;quot;2015-04-13 01:42:35&amp;quot;, updated_at: &amp;quot;2015-04-13 01:42:35&amp;quot;, gram_price: nil, eighth_price: nil, quarter_price: nil, product_type: nil&amp;gt;, #&amp;lt;Product id: 2, name: &amp;quot;Grand Daddy Purp&amp;quot;, description: &amp;quot;Introduced in 2003 by Ken Estes, Granddaddy Purple...&amp;quot;, strain: &amp;quot;Indica&amp;quot;, price: #&amp;lt;BigDecimal:7fbe559015d0,&amp;#39;0.2E2&amp;#39;,9(18)&amp;gt;, image_file_name: &amp;quot;http://i.imgur.com/8O5kXeL.jpg&amp;quot;, created_at: &amp;quot;2015-04-13 01:41:17&amp;quot;, updated_at: &amp;quot;2015-04-13 07:31:14&amp;quot;, gram_price: nil, eighth_price: nil, quarter_price: nil, product_type: nil&amp;gt;]\n</code></pre>\n\n<p>Here is my index page, along with my controller</p>\n\n<p><strong>index.html.erb</strong></p>\n\n<pre><code>&lt;section class=\"product-page\"&gt;\n  &lt;div class=\"container\"&gt;\n    &lt;div class=\"row text-center\"&gt;\n      &lt;%= @products.each do |product| %&gt;\n        &lt;div class=\"product col-md-4 text-center\"&gt;\n          &lt;h2&gt;&lt;%= link_to product.name, product_path(product.id) %&gt;&lt;/h2&gt;\n          &lt;%= link_to image_tag(product.image_file_name),\n              product_path(product.id), :class =&gt; 'img-responsive' %&gt;\n           &lt;div class=\"product-info\"&gt;\n             &lt;div class=\"product-info-left\"&gt;&lt;%= product.descrip %&gt;&lt;/div&gt;\n             &lt;div class=\"product-info-right\"&gt;&lt;%= product.price %&gt;&lt;/div&gt;\n           &lt;/div&gt;   \n        &lt;/div&gt;\n        &lt;% end %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/section&gt; \n</code></pre>\n\n<p><strong>products_controller.rb</strong></p>\n\n<pre><code>class ProductsController &lt; ApplicationController\n\n\n  def index\n    @products = Product.all\n  end\n\n  def show\n    @product = Product.find(params[:id])\n  end\n\n\nend\n</code></pre>\n\n<p>Does anyone know why the data from the database would be displaying on my html page? Did I forget to close a tag, is there something in my controller? I can also attach an image that shows what it looks like if my description isn't clear. Any tips would be much appreciated. </p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 11987, "user_id": 476712, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pAp3y.jpg?s=128&g=1", "display_name": "lorefnon", "link": "https://stackoverflow.com/users/476712/lorefnon"}, "edited": false, "score": 0, "creation_date": 1430336556, "post_id": 29953010, "comment_id": 48026960, "body": "Please elaborate that your second example is in fact broken."}, {"owner": {"reputation": 7849, "user_id": 576396, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8371065173a6c6bc169a4694c4fa2b50?s=128&d=identicon&r=PG", "display_name": "Katana314", "link": "https://stackoverflow.com/users/576396/katana314"}, "edited": false, "score": 1, "creation_date": 1430336661, "post_id": 29953010, "comment_id": 48027017, "body": "What&#39;s broken? If the compiler is complaining, could that mean you&#39;re running on Ruby 1.8?"}, {"owner": {"reputation": 9480, "user_id": 625348, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eEgMg.jpg?s=128&g=1", "display_name": "mohamed-ibrahim", "link": "https://stackoverflow.com/users/625348/mohamed-ibrahim"}, "reply_to_user": {"reputation": 11987, "user_id": 476712, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pAp3y.jpg?s=128&g=1", "display_name": "lorefnon", "link": "https://stackoverflow.com/users/476712/lorefnon"}, "edited": false, "score": 0, "creation_date": 1430336759, "post_id": 29953010, "comment_id": 48027068, "body": "thanks @lorefnon fixed, Katana314  there was an extra quote"}, {"owner": {"reputation": 11987, "user_id": 476712, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pAp3y.jpg?s=128&g=1", "display_name": "lorefnon", "link": "https://stackoverflow.com/users/476712/lorefnon"}, "edited": false, "score": 0, "creation_date": 1430336776, "post_id": 29953010, "comment_id": 48027081, "body": "Ok, the author changed the answer... <a href=\"http://stackoverflow.com/revisions/29953010/1\">stackoverflow.com/revisions/29953010/1</a>"}, {"owner": {"reputation": 11987, "user_id": 476712, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pAp3y.jpg?s=128&g=1", "display_name": "lorefnon", "link": "https://stackoverflow.com/users/476712/lorefnon"}, "edited": false, "score": 0, "creation_date": 1430336803, "post_id": 29953010, "comment_id": 48027097, "body": "@mohamed-ibrahim thanks."}], "tags": [], "owner": {"reputation": 9480, "user_id": 625348, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eEgMg.jpg?s=128&g=1", "display_name": "mohamed-ibrahim", "link": "https://stackoverflow.com/users/625348/mohamed-ibrahim"}, "is_accepted": true, "score": 2, "last_activity_date": 1430337426, "last_edit_date": 1495540343, "creation_date": 1430336322, "answer_id": 29953010, "question_id": 29952944, "link": "https://stackoverflow.com/questions/29952944/difference-between-remote-true-and-remote-true/29953010#29953010", "title": "Difference between :remote =&gt; true and remote: true", "body": "<p>Both are the same the difference is Hash syntax for 1.9+ Ruby versions and 1.8- Ruby versions:</p>\n\n<pre><code># Ruby 1.8 Syntax\n{:this =&gt; 'syntax', 'is' =&gt; 'fun'}\n# Ruby 1.9 syntax\n{this: 'syntax', more: 'fun'}\n</code></pre>\n\n<p>Check this one as well: \"<a href=\"https://stackoverflow.com/questions/11412242/what-are-the-benefits-of-the-new-hash-syntax-in-ruby-1-9\">What are the benefits of the new hash syntax in Ruby 1.9?</a>\"</p>\n\n<p>As written in the referred post:\n  It just looks nicer--it's syntactic sugar; it ends up being the same thing.</p>\n"}, {"comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1430337478, "post_id": 29953040, "comment_id": 48027467, "body": "There is a difference. There are no &quot;older&quot; and &quot;newer&quot; syntaxes, the JavaScript-style syntax only applies to <i>some</i> symbols in Hash literals, if your keys are not a limited set of symbols then you need to use the hashrocket."}], "tags": [], "owner": {"reputation": 2799, "user_id": 3772982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/91362482c60ebfba88fbdbde79c5fac6?s=128&d=identicon&r=PG&f=1", "display_name": "margo", "link": "https://stackoverflow.com/users/3772982/margo"}, "is_accepted": false, "score": 1, "last_activity_date": 1430337489, "last_edit_date": 1430337489, "creation_date": 1430336405, "answer_id": 29953040, "question_id": 29952944, "link": "https://stackoverflow.com/questions/29952944/difference-between-remote-true-and-remote-true/29953040#29953040", "title": "Difference between :remote =&gt; true and remote: true", "body": "<p>There is no difference. The first is the older syntax for defining a key value pair for hashes. The second was introduced with Ruby 1.9 (I think).</p>\n\n<p>If you're using a version of Ruby pre 1.9 you will have to use the first syntax, otherwise you should use the second syntax. </p>\n"}], "owner": {"reputation": 45, "user_id": 3882227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af8af1b87a939d527060ea7e84e94395?s=128&d=identicon&r=PG&f=1", "display_name": "rpamaral", "link": "https://stackoverflow.com/users/3882227/rpamaral"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "closed_date": 1430337377, "accepted_answer_id": 29953010, "answer_count": 2, "score": 0, "last_activity_date": 1430337489, "creation_date": 1430336074, "last_edit_date": 1430337190, "question_id": 29952944, "link": "https://stackoverflow.com/questions/29952944/difference-between-remote-true-and-remote-true", "closed_reason": "Duplicate", "title": "Difference between :remote =&gt; true and remote: true", "body": "<p>What's the difference between these two options? They seem to do the same thing.</p>\n"}, {"tags": ["ruby", "cucumber", "watir-webdriver", "gherkin", "testrail"], "comments": [{"owner": {"reputation": 1906, "user_id": 396986, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/82270219349732c881bd50f534c397f8?s=128&d=identicon&r=PG", "display_name": "Dave McNulla", "link": "https://stackoverflow.com/users/396986/dave-mcnulla"}, "edited": false, "score": 0, "creation_date": 1430531497, "post_id": 29952911, "comment_id": 48114550, "body": "Test management systems are redundant when you have cucumber. It all stores in version control, runs from a continuous integration server, and creates a report that can be stored in a repository. <a href=\"http://testobsessed.com/2009/10/specialized-test-management-systems-are-an-agile-impediment/\" rel=\"nofollow noreferrer\">testobsessed.com/2009/10/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": false, "score": 0, "last_activity_date": 1455688917, "last_edit_date": 1455688917, "creation_date": 1454723325, "answer_id": 35236423, "question_id": 29952911, "link": "https://stackoverflow.com/questions/29952911/how-can-i-access-a-cucumber-step-name-in-the-step-definition/35236423#35236423", "title": "How can I access a Cucumber step name in the step definition?", "body": "<p>You can capture the step name like this:</p>\n\n<pre><code>Given(/^(I am on webpage)$/) do |step_name|\n  puts step_name # or whatever\nend\n</code></pre>\n\n<p>It works even if the step takes arguments:</p>\n\n<pre><code>Given(/^(I am on (my|your|their) webpage)$/) do |step_name, pronoun|\n  puts step_name # or whatever\n  visit send(\"#{pronoun}_path\")\nend\n</code></pre>\n\n<p>That said, I agree with Dave McNulla's comment that Cucumber plus version control doesn't leave much for a test management system to do.</p>\n\n<p>Parsing feature files sounds like a separate question.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6597381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DfUcG.jpg?s=128&g=1", "display_name": "Lucia", "link": "https://stackoverflow.com/users/6597381/lucia"}, "is_accepted": false, "score": 0, "last_activity_date": 1515053530, "last_edit_date": 1515053530, "creation_date": 1515052058, "answer_id": 48090836, "question_id": 29952911, "link": "https://stackoverflow.com/questions/29952911/how-can-i-access-a-cucumber-step-name-in-the-step-definition/48090836#48090836", "title": "How can I access a Cucumber step name in the step definition?", "body": "<p>I suppose you must have solved the problem cause this question was asked two years ago. still, I have solved it recently and I think maybe my solution can make some sense.</p>\n\n<p>Two steps:</p>\n\n<p>first, create a new file named hooks.rb under features/support</p>\n\n<pre><code>touch features/support/hooks.rb\n</code></pre>\n\n<p>second, add those contents in your <code>hooks.rb</code> file.</p>\n\n<pre><code>Before do |scenario| \n  $step_index = 0\n  $stop_count = scenario.test_steps.count\n  @scenario = scenario\nend\n\nAfterStep do |step|\n  if $step_index &lt; $stop_count\n    puts \"steps: #{@scenario.test_steps[$step_index].text}\\n\"\n  end\n  $step_index += 2\nend\n</code></pre>\n\n<p>run</p>\n\n<pre><code>cucumber features/XXX.feature\n</code></pre>\n\n<p>you will get to find the step name print out on your terminal.</p>\n"}], "owner": {"reputation": 1094, "user_id": 2386620, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/65ad9f1a1aafff45f439ab9d622e00ac?s=128&d=identicon&r=PG", "display_name": "adbarads", "link": "https://stackoverflow.com/users/2386620/adbarads"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2634, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1515053530, "creation_date": 1430335964, "last_edit_date": 1454723698, "question_id": 29952911, "link": "https://stackoverflow.com/questions/29952911/how-can-i-access-a-cucumber-step-name-in-the-step-definition", "title": "How can I access a Cucumber step name in the step definition?", "body": "<p>I am trying to integrate Cucumber with Test Rail. So I have a Cucumber Ruby automation setup.</p>\n\n<p>I would like to be able to pass the Cucumber Gherkin steps from the feature file as a variable into the automation.</p>\n\n<p>It is because I would like to send the Cucumber Gherkin steps as HTTP POST into a test management system.</p>\n\n<p>Example gherkin feature file:</p>\n\n<pre><code>Scenario: login scenario\n    Given I am on webpage\n    When I login\n    Then I should see that I am logged in\n</code></pre>\n\n<p>Step definition code:</p>\n\n<pre><code>Given(/^I am on webpage$/) do\n\n#do this Given step from the regex match\n#but also how do I, some how grab the string 'Given I am on webpage'\n#so I can do an HTTP POST on that string\n\nend\n</code></pre>\n\n<p>Or a better way, maybe: Before I start any automated tests, I run through some sort of way to parse all the feature files and send HTTP POST to Test Rail to update or populate any new tests that I added into Cucumber. If that is the case, how should I go about that?</p>\n"}, {"tags": ["ruby", "minitest"], "comments": [{"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1430336979, "post_id": 29952820, "comment_id": 48027191, "body": "Can you show what result you are getting, and what you are expecting? This seems to work ok for me."}, {"owner": {"reputation": 1164, "user_id": 1288869, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/o0Ced.jpg?s=128&g=1", "display_name": "Tony DiNitto", "link": "https://stackoverflow.com/users/1288869/tony-dinitto"}, "reply_to_user": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1430338501, "post_id": 29952820, "comment_id": 48028021, "body": "It works fine as displayed. But if I change <code>a &lt;&lt; stack + &quot;\\n&quot;</code> to <code>a &lt;&lt; stack</code>, then I get this from the terminal running the test (notice how actual is just a quote/nil and not the &quot;Hi&quot;s) :  --- expected +++ actual @@ -1,4 +1,3 @@  &quot;Hi  Hi -  &quot;"}], "answers": [{"comments": [{"owner": {"reputation": 1164, "user_id": 1288869, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/o0Ced.jpg?s=128&g=1", "display_name": "Tony DiNitto", "link": "https://stackoverflow.com/users/1288869/tony-dinitto"}, "edited": false, "score": 0, "creation_date": 1430367192, "post_id": 29954162, "comment_id": 48038295, "body": "So minitest looks at an entire line and says, &quot;If these two are the same, then don&#39;t bother displaying it.&quot; So, it remains &#39;quiet&#39; until it hits the newline code and realizes things are different, and displays what it actually got? I&#39;m still not sure why it wouldn&#39;t at least give me a <code>+</code> for the actual (like it does with &quot;Tadah!&quot; though vs just being completely blank.) When I see Minitest not give me a <code>+</code> for the Actual, should just immediately know it&#39;s a newline character issue?"}, {"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "reply_to_user": {"reputation": 1164, "user_id": 1288869, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/o0Ced.jpg?s=128&g=1", "display_name": "Tony DiNitto", "link": "https://stackoverflow.com/users/1288869/tony-dinitto"}, "edited": false, "score": 0, "creation_date": 1430367629, "post_id": 29954162, "comment_id": 48038419, "body": "@TonyDiNitto the lines starting with <code>-</code> or <code>+</code> are where the actual result differs from the expected result. Where the actual result is the same as the expected result the line isn\u2019t marked. It\u2019s only the parts that are missing or are extra that are highlighted."}], "tags": [], "owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "is_accepted": true, "score": 2, "last_activity_date": 1430340283, "creation_date": 1430340283, "answer_id": 29954162, "question_id": 29952820, "link": "https://stackoverflow.com/questions/29952820/why-does-minitest-seem-to-not-always-report-what-the-actual-results-of-the-tes/29954162#29954162", "title": "Why does Minitest seem to not always report what the &#39;Actual&#39; results of the test are?", "body": "<p>The output from Minitest is a <a href=\"http://en.wikipedia.org/wiki/Diff_utility\" rel=\"nofollow\">diff</a> of the expected result and the actual (I think it actually calls the external <code>diff</code> command). There isn\u2019t  separate \u2018expected\u2019 and \u2018actual\u2019 sections, it\u2019s all mixed together in a format that shows the differences.</p>\n\n<p>In this case, when you remove the `\"\\n\", the failure looks something like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>  1) Failure:\nFoo#test_verses [foo.rb:22]:\n--- expected\n+++ actual\n@@ -1,4 +1,3 @@\n \"Hi\n Hi\n-\n \"\n</code></pre>\n\n<p>The <code>--- expected</code> and <code>+++ actual</code> indicate that in the diff (which is shown after the <code>@@...</code> line) lines that start with <code>-</code> were expected to appear but didn\u2019t, and lines that start with <code>+</code> appeared in the result but shouldn\u2019t have. In this example there is an empty line that starts with <code>-</code>. This means that a newline was expected to appear in the output, but didn\u2019t. This corresponds to the <code>+ \"\\n\"</code> that you removed, but the test was expecting. The quote on the line following the <code>-</code> line is the end quote for the entire diff, not the contents of the \u2018expected\u2019 section.</p>\n\n<p>When you change the return value of the <code>overflow</code> method to <code>\"Tadah!\"</code>, the failure message looks like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>  1) Failure:\nFoo#test_verses [foo.rb:23]:\n--- expected\n+++ actual\n@@ -1,4 +1 @@\n-\"Hi\n-Hi\n-\n-\"\n+\"Tadah!\"\n</code></pre>\n\n<p>Looking at the lines starting with <code>-</code> you can see the entire expected message was missing, and the line starting with <code>+</code> shows there was an extra line containing <code>Tadah!</code>. This case is also different in that Minitest has displayed the output as two separate strings (note the two separate sets of quotes).</p>\n"}], "owner": {"reputation": 1164, "user_id": 1288869, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/o0Ced.jpg?s=128&g=1", "display_name": "Tony DiNitto", "link": "https://stackoverflow.com/users/1288869/tony-dinitto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "accepted_answer_id": 29954162, "answer_count": 1, "score": 0, "last_activity_date": 1430340283, "creation_date": 1430335645, "question_id": 29952820, "link": "https://stackoverflow.com/questions/29952820/why-does-minitest-seem-to-not-always-report-what-the-actual-results-of-the-tes", "title": "Why does Minitest seem to not always report what the &#39;Actual&#39; results of the test are?", "body": "<p>Why does MiniTest sometimes truly display what's 'Actual' and sometimes it will just show a nil/blank/quote. </p>\n\n<p>Example - I know that the value of a.join has \"Hi\" displayed on 2 lines with a blank line. </p>\n\n<pre><code>class Question\n\n  def stack\n    \"Hi\\n\" \\\n    \"Hi\\n\"  \n  end\n\n  def overflow\n    a = []\n    a &lt;&lt; stack + \"\\n\"   # This + \"\\n\" is in question\n    a.join              # This is \"hi\"s\n  end\nend\n\na = Question.new\nputs a.overflow\n</code></pre>\n\n<p>If I take out the <code>+ \"\\n\"</code> the test will say the \"Actual\" is just a quote instead of what it actually is (which is \"Hi\" printed on 2 lines). If I replace 'a.join' with \"Tadah!\" then Minitest will then show \"Tadah!\" under the \"Actual\". </p>\n\n<p>I have the following test:</p>\n\n<pre><code>def test_verses\n  expected = \"Hi\\n\" \\\n  \"Hi\\n\\n\"\n  assert_equal expected, Question.new.overflow\nend\n</code></pre>\n\n<p>I've seen this happen several times. I can never tell if I TRULY have a nil result, or if Minitest is just \"lying\" to me again for some reason. </p>\n\n<p>Thx as always!  </p>\n"}, {"tags": ["ruby", "rspec3"], "answers": [{"comments": [{"owner": {"reputation": 5151, "user_id": 2535242, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/a10b5101fc63f6d6d62de5784b75142e?s=128&d=identicon&r=PG", "display_name": "La-comadreja", "link": "https://stackoverflow.com/users/2535242/la-comadreja"}, "edited": false, "score": 0, "creation_date": 1430337116, "post_id": 29953047, "comment_id": 48027279, "body": "this isn&#39;t the right syntax.  If an error is thrown, this won&#39;t hit the rescue block.  The test will just fail and say that do_something threw the error."}], "tags": [], "owner": {"reputation": 5178, "user_id": 2577840, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1520578334/picture?type=large", "display_name": "Micha\u0142 M\u0142o\u017aniak", "link": "https://stackoverflow.com/users/2577840/micha%c5%82-m%c5%82o%c5%baniak"}, "is_accepted": false, "score": 0, "last_activity_date": 1430336434, "creation_date": 1430336434, "answer_id": 29953047, "question_id": 29952513, "link": "https://stackoverflow.com/questions/29952513/rspec-3-expect-object-do-something-to-not-raise-a-particular-kind-of-error/29953047#29953047", "title": "RSpec 3: expect object.do_something to NOT raise a particular kind of error", "body": "<p>You can read discussion about why this was removed here <a href=\"https://github.com/rspec/rspec-expectations/issues/231\" rel=\"nofollow\">https://github.com/rspec/rspec-expectations/issues/231</a></p>\n\n<p>If you really must to test this case, you can do this differently:</p>\n\n<pre><code>begin\n  object.do_something\nrescue StandardError =&gt; e\n  # expect e to not be AError\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5151, "user_id": 2535242, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/a10b5101fc63f6d6d62de5784b75142e?s=128&d=identicon&r=PG", "display_name": "La-comadreja", "link": "https://stackoverflow.com/users/2535242/la-comadreja"}, "is_accepted": true, "score": 7, "last_activity_date": 1430337931, "creation_date": 1430337931, "answer_id": 29953468, "question_id": 29952513, "link": "https://stackoverflow.com/questions/29952513/rspec-3-expect-object-do-something-to-not-raise-a-particular-kind-of-error/29953468#29953468", "title": "RSpec 3: expect object.do_something to NOT raise a particular kind of error", "body": "<p>This specific syntax solved the problem:</p>\n\n<pre><code>it 'do_something does not raise AError' do\n  begin\n    expect { object.do_something }.not_to raise_error\n  rescue RSpec::Expectations::ExpectationNotMetError =&gt; e\n    expect(e.message).not_to include 'AError'\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 5151, "user_id": 2535242, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/a10b5101fc63f6d6d62de5784b75142e?s=128&d=identicon&r=PG", "display_name": "La-comadreja", "link": "https://stackoverflow.com/users/2535242/la-comadreja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4713, "favorite_count": 0, "accepted_answer_id": 29953468, "answer_count": 2, "score": 6, "last_activity_date": 1430337931, "creation_date": 1430334630, "question_id": 29952513, "link": "https://stackoverflow.com/questions/29952513/rspec-3-expect-object-do-something-to-not-raise-a-particular-kind-of-error", "title": "RSpec 3: expect object.do_something to NOT raise a particular kind of error", "body": "<p>I would like to test whether a particular method does NOT raise an error of class AError.  It can raise BError, ArgumentError, almost any other kind of error, or no error, just not AError.  Is there any non-deprecated (as of RSpec 3) way to do this?</p>\n\n<p>I tried </p>\n\n<pre><code>expect { object.do_something }.not_to raise_error(AError)\n</code></pre>\n\n<p>but I get</p>\n\n<pre><code>ArgumentError:\n   `expect { }.not_to raise_error(SpecificErrorClass)` is not valid,\n    use `expect { }.not_to raise_error` (with no args) instead\n</code></pre>\n\n<p>The problem with the argument-less approach is that the test will fail on ANY kind of error, when it should pass on anything except for an AError.</p>\n\n<p>This documentation doesn't seem to help: <a href=\"https://www.relishapp.com/rspec/rspec-expectations/docs/built-in-matchers/raise-error-matcher\" rel=\"noreferrer\">https://www.relishapp.com/rspec/rspec-expectations/docs/built-in-matchers/raise-error-matcher</a></p>\n\n<p>It seems that the old versions of RSpec have a way to handle this type of situation, and I don't understand what happened to RSpec in the new version.</p>\n\n<p>So I'm confused.  Thanks.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 5437, "user_id": 1257094, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Ob6MH.jpg?s=128&g=1", "display_name": "milgner", "link": "https://stackoverflow.com/users/1257094/milgner"}, "edited": false, "score": 0, "creation_date": 1430334609, "post_id": 29952439, "comment_id": 48025780, "body": "If initialized from code, it&#39;s not really a constant, is it? A singleton or class method seems much more appropriate here."}], "answers": [{"comments": [{"owner": {"reputation": 6221, "user_id": 259288, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c018a1f0997014d4d8332b17bc392ef2?s=128&d=identicon&r=PG", "display_name": "Johnny", "link": "https://stackoverflow.com/users/259288/johnny"}, "edited": false, "score": 0, "creation_date": 1430335158, "post_id": 29952507, "comment_id": 48026091, "body": "Having the <code>DB</code> constant is recommended in Sequel&#39;s docs. The problem is that if I initialize <code>DB</code> directly from the <code>ENV</code> var I won&#39;t be able to give the option to pass a connection string in case the user wants to use something other than the <code>ENV</code> variable."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 6221, "user_id": 259288, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c018a1f0997014d4d8332b17bc392ef2?s=128&d=identicon&r=PG", "display_name": "Johnny", "link": "https://stackoverflow.com/users/259288/johnny"}, "edited": false, "score": 1, "creation_date": 1430335366, "post_id": 29952507, "comment_id": 48026225, "body": "Sequel&#39;s documentation does recommend something that works in a very general sense, but it breaks down pretty quickly if you want to do anything even remotely beyond that. An initializer like the one I&#39;ve suggested here is a lot more flexible and allows you to set up whatever you need to, such as reading a config file, checking environment  variables, or whatever, before committing to a connection call. You could implement all of this in your existing module so you can do <code>BB::Dal.db</code> instead of calling <code>connect</code> at all."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 3, "last_activity_date": 1430334622, "creation_date": 1430334622, "answer_id": 29952507, "question_id": 29952439, "link": "https://stackoverflow.com/questions/29952439/how-do-i-initialize-a-constant-from-a-function/29952507#29952507", "title": "How do I initialize a constant from a function?", "body": "<p>You can just kick that out of the <code>module</code> context if you want:</p>\n\n<pre><code>DB = BB::Dal.connect(ENV['DATABASE_URL']) if ENV['DATABASE_URL']\n</code></pre>\n\n<p>It's worth noting that jamming these things in the root namespace is probably bad form. You might want to have a database connection module to organize these:</p>\n\n<pre><code>module DB\n  def connection\n    # Lazy initializer pattern applied here\n    @connection ||= BB::Dal.connect(ENV['DATABASE_URL'])\n  end\nend\n\n# ...\n\n# Will connect the first time it's called, recycle the connection\n# for all subsequent calls.\nDB.connection.do_stuff\n</code></pre>\n\n<p>It really depends on how this will be used. The advantage of a method is it's very easy to upgrade to a connection pool should the occasion arise, whereas a constant is very rigid in terms of function, it must return a singular value with no opportunity to run code first.</p>\n"}], "owner": {"reputation": 6221, "user_id": 259288, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c018a1f0997014d4d8332b17bc392ef2?s=128&d=identicon&r=PG", "display_name": "Johnny", "link": "https://stackoverflow.com/users/259288/johnny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 29952507, "answer_count": 1, "score": 1, "last_activity_date": 1430334622, "creation_date": 1430334434, "question_id": 29952439, "link": "https://stackoverflow.com/questions/29952439/how-do-i-initialize-a-constant-from-a-function", "title": "How do I initialize a constant from a function?", "body": "<p>I'm writing a module which will use <a href=\"https://github.com/jeremyevans/sequel\" rel=\"nofollow\">Sequel ORM</a>. I want to be able to set the <code>DB</code> constant so it's available in the global namespace but I can't figure out a non-hacky way to do so. Here's what I have so far:</p>\n\n<pre><code>require 'sequel'\n\nmodule BB\n\n  class Dal    \n\n    def initialize(db_url)\n      self.class.connect(db_url)\n    end\n\n    def self.connect(db_url)\n      @db = Sequel.connect( db_url )\n    end\n  end  \n\n  BB::Dal.connect(ENV['DATABASE_URL']) if ENV['DATABASE_URL']\nend\n</code></pre>\n\n<p>As you can see I'd like to enable two modes of initialization. Either through the <code>ENV['DATABASE_URL']</code> variable or through a constructor. What I'd like to do now is replace <code>@db</code> with <code>DB</code>. Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise"], "comments": [{"owner": {"reputation": 139, "user_id": 3557937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c3643a2a81f53422616bfbbb4bd5323?s=128&d=identicon&r=PG&f=1", "display_name": "vereecjw", "link": "https://stackoverflow.com/users/3557937/vereecjw"}, "edited": false, "score": 0, "creation_date": 1430338454, "post_id": 29952133, "comment_id": 48027997, "body": "Sei, could you share your custom users/registrations_controller.rb file? This may help in finding the issue."}, {"owner": {"reputation": 133, "user_id": 2146358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddbb4e5cf543ee6f82ac7c2543131904?s=128&d=identicon&r=PG", "display_name": "Sei Flavius", "link": "https://stackoverflow.com/users/2146358/sei-flavius"}, "reply_to_user": {"reputation": 139, "user_id": 3557937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c3643a2a81f53422616bfbbb4bd5323?s=128&d=identicon&r=PG&f=1", "display_name": "vereecjw", "link": "https://stackoverflow.com/users/3557937/vereecjw"}, "edited": false, "score": 0, "creation_date": 1430356822, "post_id": 29952133, "comment_id": 48035469, "body": "even if we remove users/registrations_controller.rb from the routing file we still get the same error. thanks!"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4776684"}, "is_accepted": true, "score": 1, "last_activity_date": 1438566483, "last_edit_date": 1438566483, "creation_date": 1437955570, "answer_id": 31643252, "question_id": 29952133, "link": "https://stackoverflow.com/questions/29952133/rails-devise-with-scope-fails-with-invalidauthenticitytoken/31643252#31643252", "title": "Rails devise with scope fails with InvalidAuthenticityToken", "body": "<p>You should try to define your scope for devise as following:</p>\n\n<pre><code>devise_for :users \ndevise_scope :user do\n  scope '/admin' do\n    get \"/your_route\" ...\n  end\nend\n</code></pre>\n\n<p>And for the rest of the routes apply \"/admin\" scope separately.</p>\n"}], "owner": {"reputation": 133, "user_id": 2146358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddbb4e5cf543ee6f82ac7c2543131904?s=128&d=identicon&r=PG", "display_name": "Sei Flavius", "link": "https://stackoverflow.com/users/2146358/sei-flavius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 31643252, "answer_count": 1, "score": 1, "last_activity_date": 1438566483, "creation_date": 1430333509, "last_edit_date": 1430356980, "question_id": 29952133, "link": "https://stackoverflow.com/questions/29952133/rails-devise-with-scope-fails-with-invalidauthenticitytoken", "title": "Rails devise with scope fails with InvalidAuthenticityToken", "body": "<p>We are using Rails 4.2.1 and the latest version of Devise (3.4.1) although I believe the same error occurs with other versions.</p>\n\n<p>Ever since we added scope to routes.rb:</p>\n\n<pre><code>scope '/admin' do\n\n  root to: \"places#index\"\n\n  devise_for :users, controllers: { registrations: \"users/registrations\" }\n\n...\n</code></pre>\n\n<p>Devise fails to sign in or sign out with the following error:</p>\n\n<pre><code>ActionController::InvalidAuthenticityToken at /admin/users/sign_out.\n</code></pre>\n\n<p>Everything works perfectly fine as long as we remove the scope.</p>\n\n<p>We tried using custom routes with devise but nothing helped.</p>\n\n<hr>\n\n<p>registrations_controller.rb</p>\n\n<hr>\n\n<pre><code>class Users::RegistrationsController &lt; Devise::RegistrationsController\n  before_action :configure_permitted_parameters\n\n  protected\n\n  def configure_permitted_parameters\n    devise_parameter_sanitizer.for(:sign_up).push(:first_name, :last_name, :organization)\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "gem", "rubygems", "irb"], "answers": [{"tags": [], "owner": {"reputation": 1930, "user_id": 1337204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SkzuG.jpg?s=128&g=1", "display_name": "tpbowden", "link": "https://stackoverflow.com/users/1337204/tpbowden"}, "is_accepted": false, "score": 0, "last_activity_date": 1430333972, "creation_date": 1430333972, "answer_id": 29952293, "question_id": 29952054, "link": "https://stackoverflow.com/questions/29952054/load-unbuilt-gem-into-irb-from-that-gems-dir/29952293#29952293", "title": "Load unbuilt gem into irb from that gem&#39;s dir", "body": "<p>You could use <code>require_relative</code> to manually load the source code of your gem, for example <code>require_relative './lib/gem_name/gem_name'</code> assuming you have a file located at <code>./lib/gem_name/gem_name.rb</code> that loads your gem. This guarantees that it is the version you have in your source code.</p>\n"}], "owner": {"reputation": 725, "user_id": 3732147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kN0oM.jpg?s=128&g=1", "display_name": "conorliv", "link": "https://stackoverflow.com/users/3732147/conorliv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430333972, "creation_date": 1430333255, "question_id": 29952054, "link": "https://stackoverflow.com/questions/29952054/load-unbuilt-gem-into-irb-from-that-gems-dir", "title": "Load unbuilt gem into irb from that gem&#39;s dir", "body": "<p>I'm developing a gem, and I need to load that gem's code into irb for testing purposes without building/publishing the gem and then installing it onto my system the traditional way via <code>gem install &lt;gem's name&gt;</code>. </p>\n\n<p>To illustrate:</p>\n\n<pre><code>$ pwd\nUsers/me/development/gem_name/\n$ irb\n2.2.2 :001 &gt; require 'gem_name'\n=&gt; true\n</code></pre>\n\n<p>The problem is that irb isn't loading the gem's code from my working dir because I added a method to the gem in the working dir and it's not available in the version of the gem that irb loaded above.</p>\n\n<p>How can I load the version of the gem that is in the dir that I'm currently working in (i.e. the gem's dir)?</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "ruby-on-rails-3", "ipad"], "answers": [{"comments": [{"owner": {"reputation": 2277, "user_id": 3234367, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FxQ1m.jpg?s=128&g=1", "display_name": "aaron-coding", "link": "https://stackoverflow.com/users/3234367/aaron-coding"}, "edited": false, "score": 0, "creation_date": 1430343765, "post_id": 29952481, "comment_id": 48031010, "body": "Thanks. Not sure if this question will attract any more answers, but indeed what you said is a good quick and dirty fix."}], "tags": [], "owner": {"reputation": 3548, "user_id": 1729692, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/I9nUd.jpg?s=128&g=1", "display_name": "Topher Hunt", "link": "https://stackoverflow.com/users/1729692/topher-hunt"}, "is_accepted": false, "score": 1, "last_activity_date": 1430334552, "creation_date": 1430334552, "answer_id": 29952481, "question_id": 29951904, "link": "https://stackoverflow.com/questions/29951904/rails-link-to-method-delete-not-recognized-on-ipad-sends-get-request/29952481#29952481", "title": "Rails&#39; link_to method: :delete not recognized on ipad. Sends GET request", "body": "<p>Unfortunately I've run into a couple (albeit very edge-case) situations where browser support for Rails' UJS is very fragile. You could likely dig into this issue and come out with a clean solution, but it might be more time-effective to simply add a GET version to the routes if support for this link is necessary.</p>\n"}], "owner": {"reputation": 2277, "user_id": 3234367, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/FxQ1m.jpg?s=128&g=1", "display_name": "aaron-coding", "link": "https://stackoverflow.com/users/3234367/aaron-coding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1430334552, "creation_date": 1430332750, "question_id": 29951904, "link": "https://stackoverflow.com/questions/29951904/rails-link-to-method-delete-not-recognized-on-ipad-sends-get-request", "title": "Rails&#39; link_to method: :delete not recognized on ipad. Sends GET request", "body": "<p>There are many answers to similar questions that say to add</p>\n\n<p><code>//= require jquery\n//= require jquery_ujs</code></p>\n\n<p>to the application.js file. I already have these. My links work perfectly on desktop, however on the iPad, even though the link has the data-method=\"delete\", the server still treats it as a GET request.</p>\n\n<p>What is the fix to make this work on an ipad?</p>\n\n<p>Here is my code: </p>\n\n<p><code>&lt;%= link_to \"/things/#{thing.id}\", :class =&gt; 'cool-thing',\n         :method =&gt; :delete do %&gt;\n     &lt;img src=awesome.png&gt;\n &lt;% end %&gt;</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "redis", "sidekiq"], "comments": [{"owner": {"reputation": 5178, "user_id": 2577840, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1520578334/picture?type=large", "display_name": "Micha\u0142 M\u0142o\u017aniak", "link": "https://stackoverflow.com/users/2577840/micha%c5%82-m%c5%82o%c5%baniak"}, "edited": false, "score": 0, "creation_date": 1430333363, "post_id": 29951669, "comment_id": 48025002, "body": "What is this worker doing?"}, {"owner": {"reputation": 5707, "user_id": 587406, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1p6qq.jpg?s=128&g=1", "display_name": "Luiz E.", "link": "https://stackoverflow.com/users/587406/luiz-e"}, "reply_to_user": {"reputation": 5178, "user_id": 2577840, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1520578334/picture?type=large", "display_name": "Micha\u0142 M\u0142o\u017aniak", "link": "https://stackoverflow.com/users/2577840/micha%c5%82-m%c5%82o%c5%baniak"}, "edited": false, "score": 0, "creation_date": 1430333460, "post_id": 29951669, "comment_id": 48025064, "body": "basically, instantiate a class called <code>NewUser</code>, fill data from <code>Person</code>, save and start workers that create <code>Interaction</code> and <code>InteractionObjects</code> from this Person interactions. We are migrating data to a new modelling"}], "answers": [{"comments": [{"owner": {"reputation": 5707, "user_id": 587406, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1p6qq.jpg?s=128&g=1", "display_name": "Luiz E.", "link": "https://stackoverflow.com/users/587406/luiz-e"}, "edited": false, "score": 0, "creation_date": 1430333340, "post_id": 29951940, "comment_id": 48024989, "body": "I&#39;m also having a lot of timeout erros on <code>UserWorker</code>. These jobs retry themselfs. how can I do this using this solution?"}, {"owner": {"reputation": 21521, "user_id": 78613, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0fa1dc97175c4cc1ea4ecf506119961c?s=128&d=identicon&r=PG", "display_name": "Nick Veys", "link": "https://stackoverflow.com/users/78613/nick-veys"}, "reply_to_user": {"reputation": 5707, "user_id": 587406, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1p6qq.jpg?s=128&g=1", "display_name": "Luiz E.", "link": "https://stackoverflow.com/users/587406/luiz-e"}, "edited": false, "score": 0, "creation_date": 1430333394, "post_id": 29951940, "comment_id": 48025021, "body": "You need to find out why and where you are having timeouts first, hard to generalize a solution without that info."}, {"owner": {"reputation": 5707, "user_id": 587406, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1p6qq.jpg?s=128&g=1", "display_name": "Luiz E.", "link": "https://stackoverflow.com/users/587406/luiz-e"}, "edited": false, "score": 0, "creation_date": 1430333529, "post_id": 29951940, "comment_id": 48025105, "body": "Hmm...got it. I&#39;ll see what I can do and change"}, {"owner": {"reputation": 483, "user_id": 2990577, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/78cd1d73f39ed2dca2395cd6b91ad8a9?s=128&d=identicon&r=PG", "display_name": "dandlezzz", "link": "https://stackoverflow.com/users/2990577/dandlezzz"}, "edited": false, "score": 0, "creation_date": 1430333555, "post_id": 29951940, "comment_id": 48025119, "body": "Having one worker here doesn&#39;t leverage the power of concurrency. You might as well run it in line."}, {"owner": {"reputation": 21521, "user_id": 78613, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0fa1dc97175c4cc1ea4ecf506119961c?s=128&d=identicon&r=PG", "display_name": "Nick Veys", "link": "https://stackoverflow.com/users/78613/nick-veys"}, "edited": false, "score": 0, "creation_date": 1430333620, "post_id": 29951940, "comment_id": 48025162, "body": "Indeed, for such a huge task I question whether Sidekiq is just adding complexity to an administrative task..."}, {"owner": {"reputation": 483, "user_id": 2990577, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/78cd1d73f39ed2dca2395cd6b91ad8a9?s=128&d=identicon&r=PG", "display_name": "dandlezzz", "link": "https://stackoverflow.com/users/2990577/dandlezzz"}, "edited": false, "score": 0, "creation_date": 1430333662, "post_id": 29951940, "comment_id": 48025198, "body": "See my answer, you want to manage memory of redis, just limit the queue size to what sidekiq is going to handle."}, {"owner": {"reputation": 5707, "user_id": 587406, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1p6qq.jpg?s=128&g=1", "display_name": "Luiz E.", "link": "https://stackoverflow.com/users/587406/luiz-e"}, "reply_to_user": {"reputation": 483, "user_id": 2990577, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/78cd1d73f39ed2dca2395cd6b91ad8a9?s=128&d=identicon&r=PG", "display_name": "dandlezzz", "link": "https://stackoverflow.com/users/2990577/dandlezzz"}, "edited": false, "score": 0, "creation_date": 1430336464, "post_id": 29951940, "comment_id": 48026914, "body": "I got it @dandlezzz but that may not help me right now. Actually, Nick Veys, I used your solution (partially) and I ended up finding a bug on my code hahahaha, but your idea is right"}], "tags": [], "owner": {"reputation": 21521, "user_id": 78613, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0fa1dc97175c4cc1ea4ecf506119961c?s=128&d=identicon&r=PG", "display_name": "Nick Veys", "link": "https://stackoverflow.com/users/78613/nick-veys"}, "is_accepted": true, "score": 0, "last_activity_date": 1430332884, "creation_date": 1430332884, "answer_id": 29951940, "question_id": 29951669, "link": "https://stackoverflow.com/questions/29951669/how-to-import-millions-of-users-without-compromise-sidekiq/29951940#29951940", "title": "how to import millions of users without compromise sidekiq", "body": "<p>You're spawning a background worker for every <code>Person</code>, why not spawn one?</p>\n\n<pre><code># some rakefile I'm guessing?\ntask import_all: :environment do\n  UserWorker.perform_async\nend\n\n# UserWorker.rb\nclass UserWorker\n  include Sidekiq::Worker\n  def perform\n    Person.find_each do |p|\n      # whatever you were doing in here before...\n    end\n  end\nend\n</code></pre>\n\n<p>Unless you have a massively parallel backend, there's not much advantage in breaking the work up into single workers.  You'll want to handle/log errors in here as appropriate and possibly re-try those individually but the general solution shouldn't need such fine-grained workers.</p>\n"}], "owner": {"reputation": 5707, "user_id": 587406, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1p6qq.jpg?s=128&g=1", "display_name": "Luiz E.", "link": "https://stackoverflow.com/users/587406/luiz-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 29951940, "answer_count": 1, "score": 0, "last_activity_date": 1430333479, "creation_date": 1430332110, "question_id": 29951669, "link": "https://stackoverflow.com/questions/29951669/how-to-import-millions-of-users-without-compromise-sidekiq", "title": "how to import millions of users without compromise sidekiq", "body": "<p>I have a rake task like this</p>\n\n<pre><code>task import_all: :environment do\n  Person.find_each do |p|\n    UserWorker.perform_async(p.to_global_id)\n  end\nend\n</code></pre>\n\n<p>each user creates around 20 new jobs on Sidekiq and these 20 jobs also create more 4 or 5 new jobs.<br>\nTurns out I have 980k users and my redis is using almost 70% of CPU usage, enqueing more than 7 million jobs!<br>\nHow can I import all these users without compromise CPU/Mem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1430375732, "post_id": 29951575, "comment_id": 48041699, "body": "Change your bot/app so that instead of loading one endless page, bot will load endless number of smaller pages. That is, move the loop to bot logic."}], "answers": [{"tags": [], "owner": {"reputation": 452, "user_id": 816571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f79ab2878590f876e266645713cb60d5?s=128&d=identicon&r=PG", "display_name": "Uberbrady", "link": "https://stackoverflow.com/users/816571/uberbrady"}, "is_accepted": false, "score": 1, "last_activity_date": 1430431462, "creation_date": 1430431462, "answer_id": 29978632, "question_id": 29951575, "link": "https://stackoverflow.com/questions/29951575/optimize-ruby-bot-for-heroku/29978632#29978632", "title": "Optimize ruby bot for heroku", "body": "<p>Use the Heroku Scheduler plug-in to run your worker task on a schedule (once every two hours, perhaps?). Then you can yank out the sleep() call, and just let the bot exit normally when it completes whatever it is that it's doing.</p>\n"}], "owner": {"reputation": 167, "user_id": 4526283, "user_type": "registered", "accept_rate": 23, "profile_image": "https://graph.facebook.com/10152583334865887/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/4526283/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430431462, "creation_date": 1430331765, "last_edit_date": 1430375594, "question_id": 29951575, "link": "https://stackoverflow.com/questions/29951575/optimize-ruby-bot-for-heroku", "title": "Optimize ruby bot for heroku", "body": "<p>Currently I have a ruby on rails bot that calls a method in the view and runs that method as a infinite loop and that is how the bot continues its actions indefinitely. At the end of the loop there is a delay for 2 hours or so where it sleeps. Currently I have a few problems:</p>\n\n<p>1) I can't run this bot forever because it never loads a page since its running the infinite loop and heroku has a 30 second time-out policy you can't change.</p>\n\n<p>2) I can fix this by making the method run on a worker dyno. But the method I am using with sleep causes the dyno to run continuously. </p>\n\n<p>The question is: Is there a way to structure my app on heroku so that it has a delay that doesn't use the dyno hours? I want to be able to continue to automatically run the bot in some fashion on two dynos (1 web and 1 worker) and still stay within the 750 free hours allotted by heroku. Any help is greatly appreciate!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cookies", "railstutorial.org"], "answers": [{"tags": [], "owner": {"reputation": 361, "user_id": 3923840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7dcf803b8ee04b126c99aaef15341e2?s=128&d=identicon&r=PG&f=1", "display_name": "Mauddev", "link": "https://stackoverflow.com/users/3923840/mauddev"}, "is_accepted": false, "score": 0, "last_activity_date": 1431168945, "creation_date": 1431168945, "answer_id": 30139069, "question_id": 29951258, "link": "https://stackoverflow.com/questions/29951258/current-user-method-is-returning-nil/30139069#30139069", "title": "current_user method is returning nil", "body": "<p>1) The ONLY difference I can see with my own code, is in the models/user.rb \nin before_save I think you either do \n    { self.email.downcase } \nor \n    { email.downcase! }</p>\n\n<p>With this, I could not reproduce your problem though. And I don't see how it could affect the log in persistence. </p>\n\n<p>2) The code you posted has implemented the 'remember me'-checkbox from 8.5\nSo, when you signed up, did you check the checkbox? </p>\n"}], "owner": {"reputation": 1207, "user_id": 4145941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8mHhb.jpg?s=128&g=1", "display_name": "Mohammad", "link": "https://stackoverflow.com/users/4145941/mohammad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 528, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1431168945, "creation_date": 1430330804, "last_edit_date": 1430823756, "question_id": 29951258, "link": "https://stackoverflow.com/questions/29951258/current-user-method-is-returning-nil", "title": "current_user method is returning nil", "body": "<p>I'm following Michael Hartl's book: \"Ruby on Rails Tutorial 3\". I have reached section 8.4.1 where he says:</p>\n\n<blockquote>\n  <p>newly logged in users are correctly remembered, as you can verify by\n  logging in, closing the browser, and checking that you\u2019re still logged\n  in when you restart the sample application and revisit the sample\n  application.</p>\n</blockquote>\n\n<p>when I go through these steps I'm not logged in i.e: I can log in but when I restart the browser and revisit the app I'm not logged in as it is supposed to be.(I'm using localhost:3000)</p>\n\n<blockquote>\n  <p>If you want, you can even inspect the browser cookies to see the\n  result directly</p>\n</blockquote>\n\n<p>This one, however, works. I can verify that the cookie is saved successfully.</p>\n\n<p>I have gone through this chapter several times, making sure that I'm following the exact same steps but still no luck.</p>\n\n<p>Also the test is <strong>not red</strong>, I can logout at any time. I really don't know what to do. I have been trying several things but no luck. Excuse me if this is  a simple question as I'm new to rails.</p>\n\n<p><strong>Edit:</strong> you can view the chapter here: <a href=\"https://www.railstutorial.org/book/log_in_log_out#sec-remember_me\" rel=\"nofollow\">Rails tutorial 3</a></p>\n\n<p><strong>Edit 2:</strong></p>\n\n<p>By adding some more tests, I can find that the problem is that <code>current_user</code> is returning <code>nil</code> (note: the problem is in the cookies not in the sessions):</p>\n\n<h1>session_helper.rb</h1>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>module SessionsHelper\n\n  # Logs in the given user.\n  def log_in(user)\n    session[:user_id] = user.id\n  end\n\n  # Remembers a user in a persistent session.\n  def remember(user)\n    user.remember\n    cookies.permanent.signed[:user_id] = user.id\n    cookies.permanent[:remember_token] = user.remember_token\n  end\n\n  def forget user\n    user.forget\n    cookies.delete(:user_id)\n    cookies.delete(:remember_token)\n  end\n</code></pre>\n\n<p><b>    </p>\n\n<pre><code>  # Returns the user corresponding to the remember token cookie.\n  def current_user\n    if (user_id = session[:user_id])\n      @current_user ||= User.find_by(id: user_id)\n    elsif (user_id = cookies.signed[:user_id])\n      user = User.find_by(id: user_id)\n      if user &amp;&amp; user.authenticated?(cookies[:remember_token])\n        log_in user\n        @current_user = user\n      end\n    end\n  end\n</code></pre>\n\n<p></b></p>\n\n<pre><code>  # Returns true if the user is logged in, false otherwise.\n  def logged_in?\n    !current_user.nil?\n  end\n\n  # Logs out the current user.\n  def log_out\n    forget current_user\n    session.delete(:user_id)\n    @current_user = nil\n  end\nend\n</code></pre>\n\n<h1>models/user.rb</h1>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>class User &lt; ActiveRecord::Base\n  attr_accessor :remember_token\n  before_save { self.email.downcase! }\n  validates :name, presence: true, length: {maximum: 50}\n  Valid_email_regex = /\\A[\\w+\\-.]+@[a-z\\d\\-]+(\\.[a-z\\d\\-]+)*\\.[a-z]+\\z/i\n  validates :email, presence: true, length: {maximum: 255},\n                    format: {with: Valid_email_regex},\n                    uniqueness: { case_sensitive: false }\n\n  has_secure_password\n  validates :password, length: {minimum: 6}\n\n  def User.digest(string)\n    cost = ActiveModel::SecurePassword.min_cost ? BCrypt::Engine::MIN_COST :\n                                              BCrypt::Engine.cost\n    BCrypt::Password.create(string, cost: cost)\n  end\n\n  def User.new_token\n    SecureRandom.urlsafe_base64\n  end\n\n  def remember\n    self.remember_token = User.new_token\n    update_attribute(:remember_digest, User.digest(:remember_token))\n  end\n\n  def forget\n    update_attribute(:remember_digest, nil)\n  end\n\n  def authenticated?(remember_token)\n    return false if remember_digest.nil?\n    BCrypt::Password.new(remember_digest).is_password?(remember_token)\n  end\nend\n</code></pre>\n\n<h1>session_controller</h1>\n\n\n\n<pre><code># logging in a user by email and logging them out\nclass SessionsController &lt; ApplicationController\n  def new\n  end\n\n  def create\n    user = User.find_by(email: params[:session][:email].downcase)\n    if user &amp;&amp; user.authenticate(params[:session][:password])\n      log_in user\n      params[:session][:remember_me] == '1' ? remember(user) : forget(user)\n      redirect_to user\n    else\n      flash.now[:danger] = \"Invalid email/password combination\"\n      render 'new'\n    end\n  end\n\n  def destroy\n    log_out if logged_in?\n    redirect_to root_url\n  end\n\nend\n</code></pre>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["ruby", "literals"], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1430330988, "creation_date": 1430330988, "answer_id": 29951309, "question_id": 29951235, "link": "https://stackoverflow.com/questions/29951235/what-is-the-difference-between-limit-and-limit/29951309#29951309", "title": "What is the difference between `:limit` and `limit:`?", "body": "<p>This is probably an issue with hash notation.</p>\n\n<p>Ruby 1.8 and prior use a style like this:</p>\n\n<pre><code>method(:limit =&gt; 10)\n</code></pre>\n\n<p>Ruby 1.9 and more recent have a new style that looks like:</p>\n\n<pre><code>method(limit: 10)\n</code></pre>\n\n<p>The new notation is a lot more like that in other languages like Python and JavaScript. They are functionally identical, though, as you can check with <code>irb</code> where it always shows in conventional notation:</p>\n\n<pre><code>{ test: 'value' }\n# =&gt; { :test =&gt; 'value' }\n</code></pre>\n\n<p>As to your question as to what <code>limit</code> means, it really depends on what method you're passing this in to. In the context of a schema definition it can limit the size of a field:</p>\n\n<pre><code>t.string limit: 1024\n</code></pre>\n\n<p>If it's in the context of a query it might limit the number of results returned. Each method has their own interpretation so you'll need to consult the documentation on each method you encounter.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user891193"}, "edited": false, "score": 0, "creation_date": 1430332052, "post_id": 29951346, "comment_id": 48024185, "body": "thanks ,  i thought it was not the same ."}], "tags": [], "owner": {"reputation": 794, "user_id": 1892510, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eYI15.jpg?s=128&g=1", "display_name": "dx7", "link": "https://stackoverflow.com/users/1892510/dx7"}, "is_accepted": false, "score": 0, "last_activity_date": 1430331089, "creation_date": 1430331089, "answer_id": 29951346, "question_id": 29951235, "link": "https://stackoverflow.com/questions/29951235/what-is-the-difference-between-limit-and-limit/29951346#29951346", "title": "What is the difference between `:limit` and `limit:`?", "body": "<p><code>:limit</code> is a value of type symbol. You can see more about symbols on Ruby docs. <a href=\"http://ruby-doc.org/core-2.2.2/Symbol.html\" rel=\"nofollow\">http://ruby-doc.org/core-2.2.2/Symbol.html</a></p>\n\n<p><code>limit:</code> is a syntactic sugar and can be used only as a hash key when this key is a symbol. Example: <code>{ :limit =&gt; 10 }</code> is the traditional way. After Ruby 1.9.3 you can rewrite that like <code>{ limit: 10 }</code></p>\n"}, {"comments": [{"owner": {"reputation": 794, "user_id": 1892510, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eYI15.jpg?s=128&g=1", "display_name": "dx7", "link": "https://stackoverflow.com/users/1892510/dx7"}, "edited": false, "score": 0, "creation_date": 1430331461, "post_id": 29951435, "comment_id": 48023828, "body": "your examples don&#39;t work"}, {"owner": {"reputation": 794, "user_id": 1892510, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eYI15.jpg?s=128&g=1", "display_name": "dx7", "link": "https://stackoverflow.com/users/1892510/dx7"}, "edited": false, "score": 0, "creation_date": 1430331573, "post_id": 29951435, "comment_id": 48023898, "body": "<code>:limit = 5</code> =&gt; <code>SyntaxError: (irb):21: syntax error, unexpected &#39;=&#39;, expecting end-of-input</code>"}, {"owner": {"reputation": 794, "user_id": 1892510, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eYI15.jpg?s=128&g=1", "display_name": "dx7", "link": "https://stackoverflow.com/users/1892510/dx7"}, "edited": false, "score": 0, "creation_date": 1430331651, "post_id": 29951435, "comment_id": 48023948, "body": "<code>puts :limit</code> =&gt; <code>limit</code>"}, {"owner": {"reputation": 794, "user_id": 1892510, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eYI15.jpg?s=128&g=1", "display_name": "dx7", "link": "https://stackoverflow.com/users/1892510/dx7"}, "edited": false, "score": 0, "creation_date": 1430331685, "post_id": 29951435, "comment_id": 48023968, "body": "<code>hash = { limit: 5 }; hash.limit</code> =&gt; <code>NoMethodError: undefined method </code>limit&#39; for {:limit=&gt;5}:Hash`"}, {"owner": {"reputation": 794, "user_id": 1892510, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eYI15.jpg?s=128&g=1", "display_name": "dx7", "link": "https://stackoverflow.com/users/1892510/dx7"}, "edited": false, "score": 0, "creation_date": 1430331780, "post_id": 29951435, "comment_id": 48024031, "body": "<code>hash = { :limit =&gt; 5 }; puts hash.limit</code> =&gt; <code>NoMethodError: undefined method </code>limit&#39; for {:limit=&gt;5}:Hash`"}], "tags": [], "owner": {"reputation": 240, "user_id": 4804561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iWJhP.png?s=128&g=1", "display_name": "wohlert", "link": "https://stackoverflow.com/users/4804561/wohlert"}, "is_accepted": false, "score": -1, "last_activity_date": 1430332022, "last_edit_date": 1430332022, "creation_date": 1430331361, "answer_id": 29951435, "question_id": 29951235, "link": "https://stackoverflow.com/questions/29951235/what-is-the-difference-between-limit-and-limit/29951435#29951435", "title": "What is the difference between `:limit` and `limit:`?", "body": "<p>Variables that have a colon <code>:</code> before their name denounces that they are symbols (unique identifier) and this means that it is possible to do the following:</p>\n\n<pre><code>symbol = :limit\n</code></pre>\n\n<p>using the colon after the name is usually meant to indicate a hash key, such as the following:</p>\n\n<pre><code>hash = { limit: 5 }\nputs hash[:limit] # returns 5\n</code></pre>\n\n<p>The confusion often ensues when working with older versions of ruby, where hashes are written as follows:</p>\n\n<pre><code>hash = { :limit =&gt; 5 }\nputs hash[:limit] # returns 5\n</code></pre>\n\n<p>Which has the same exact meaning as the above statement.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user891193"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "closed_date": 1430332195, "answer_count": 3, "score": 0, "last_activity_date": 1430332022, "creation_date": 1430330747, "last_edit_date": 1430331105, "question_id": 29951235, "link": "https://stackoverflow.com/questions/29951235/what-is-the-difference-between-limit-and-limit", "closed_reason": "Duplicate", "title": "What is the difference between `:limit` and `limit:`?", "body": "<p>What is the difference between <code>:limit</code> and <code>limit:</code>? I am assuming the first is the method for limiting entry size in Ruby on Rails. What is the second for? I also don't know what is the significance of putting column <code>n</code> on the right side.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter", "twitter-bootstrap-3", "social-network-friendship"], "answers": [{"tags": [], "owner": {"reputation": 1540, "user_id": 1245440, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8a2a573a8585a0e04eecd822955e9fbe?s=128&d=identicon&r=PG", "display_name": "Pramod Shinde", "link": "https://stackoverflow.com/users/1245440/pramod-shinde"}, "is_accepted": false, "score": 0, "last_activity_date": 1430329445, "last_edit_date": 1430329445, "creation_date": 1430328650, "answer_id": 29950620, "question_id": 29950293, "link": "https://stackoverflow.com/questions/29950293/check-twitter-user-relationship-created-at/29950620#29950620", "title": "Check Twitter user relationship created_at?", "body": "<p>I think you cannot find created_at but you get other attributes </p>\n\n<p>You can use direct attribute name like </p>\n\n<pre><code>data = client.friendship('user1','user2')\ndata.source.screen_name # user1 \n</code></pre>\n\n<p>If not convert it to JSON like  </p>\n\n<pre><code>data = client.friendship('user1','user2').as_json\nhandle = data[\"target\"][\"screen_name\"] # user2\n</code></pre>\n\n<p>Sample response after as_json</p>\n\n<pre><code>{\"source\"=&gt;\n {\n  \"id\"=&gt;7697764211,\n  \"id_str\"=&gt;\"7697764211\",\n  \"screen_name\"=&gt;\"user1\",\n  \"following\"=&gt;true,\n  \"followed_by\"=&gt;false,\n  \"following_received\"=&gt;nil,\n  \"following_requested\"=&gt;nil,\n  \"notifications_enabled\"=&gt;nil,\n  \"can_dm\"=&gt;false,\n  \"blocking\"=&gt;nil,\n  \"blocked_by\"=&gt;nil,\n  \"muting\"=&gt;nil,\n  \"want_retweets\"=&gt;nil,\n  \"all_replies\"=&gt;nil,\n  \"marked_spam\"=&gt;nil},\n\"target\"=&gt;\n { \"id\"=&gt;2053615711,\n   \"id_str\"=&gt;\"2053615711\",\n   \"screen_name\"=&gt;\"use2\",\n   \"following\"=&gt;false,\n   \"followed_by\"=&gt;true,\n   \"following_received\"=&gt;nil,\n   \"following_requested\"=&gt;nil\n }}\n</code></pre>\n"}], "owner": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467225917, "creation_date": 1430327584, "last_edit_date": 1467225917, "question_id": 29950293, "link": "https://stackoverflow.com/questions/29950293/check-twitter-user-relationship-created-at", "title": "Check Twitter user relationship created_at?", "body": "<p>I'm stuck trying to extract the Twitter hash and can't seem to find out how to get the friendship attributes?</p>\n\n<p>My code:</p>\n\n<pre><code>require 'twitter'\nrequire 'rubygems'\n\nclient = Twitter::REST::Client.new do |config|\n  config.consumer_key = \"...\"\n  config.consumer_secret = \"...\"\n  config.access_token = \"...\"\n  config.access_token_secret = \"...\"\nend\n\nputs client.friendship('user1','user2').to_s\n</code></pre>\n\n<p>Response:</p>\n\n<pre><code>#&lt;Twitter::Relationship:0x007f88c1e58de0&gt;\n</code></pre>\n\n<p>Is there a way to extract the info so I can retrieve the hash array of info on the relationship? i.e. like when the friendship was created?</p>\n"}, {"tags": ["ruby", "ftp", "sftp", "net-sftp"], "comments": [{"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1430327105, "post_id": 29949952, "comment_id": 48021096, "body": "Such hangs are typically related to active vs. passive transfer mode, see <a href=\"http://stackoverflow.com/questions/15103830/why-cant-netftp-connect-to-server\">Why can&#39;t Net::FTP connect to server?</a>"}, {"owner": {"reputation": 2674, "user_id": 858418, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a50b5d8d5b6638c8a759e0fb517fc0e5?s=128&d=identicon&r=PG", "display_name": "Marina", "link": "https://stackoverflow.com/users/858418/marina"}, "reply_to_user": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1430328262, "post_id": 29949952, "comment_id": 48021846, "body": "@SteffenUllrich I&#39;m using SFTP--not FTP (<a href=\"http://stackoverflow.com/a/5881966/858418\">stackoverflow.com/a/5881966/858418</a>)"}, {"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1430329227, "post_id": 29949952, "comment_id": 48022431, "body": "Sorry, you are right."}], "answers": [{"comments": [{"owner": {"reputation": 2674, "user_id": 858418, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a50b5d8d5b6638c8a759e0fb517fc0e5?s=128&d=identicon&r=PG", "display_name": "Marina", "link": "https://stackoverflow.com/users/858418/marina"}, "edited": false, "score": 0, "creation_date": 1430327001, "post_id": 29950070, "comment_id": 48021020, "body": "my file_path looks like this: &quot;/Users/marina/Desktop/test.png&quot;"}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "reply_to_user": {"reputation": 2674, "user_id": 858418, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a50b5d8d5b6638c8a759e0fb517fc0e5?s=128&d=identicon&r=PG", "display_name": "Marina", "link": "https://stackoverflow.com/users/858418/marina"}, "edited": false, "score": 0, "creation_date": 1430328463, "post_id": 29950070, "comment_id": 48021976, "body": "That looks good. You may want to check it with <code>ls &#47;Users&#47;marina&#47;Desktop&#47;test.png</code>"}, {"owner": {"reputation": 2674, "user_id": 858418, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a50b5d8d5b6638c8a759e0fb517fc0e5?s=128&d=identicon&r=PG", "display_name": "Marina", "link": "https://stackoverflow.com/users/858418/marina"}, "edited": false, "score": 0, "creation_date": 1430329553, "post_id": 29950070, "comment_id": 48022624, "body": "yep, the filepath is valid. I updated my questions with the non-block version, including the verbose: :debug option. I&#39;ve included the output."}, {"owner": {"reputation": 586, "user_id": 669797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c211558151d064b93b1510310a6b7790?s=128&d=identicon&r=PG", "display_name": "Jordan Patterson", "link": "https://stackoverflow.com/users/669797/jordan-patterson"}, "reply_to_user": {"reputation": 2674, "user_id": 858418, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a50b5d8d5b6638c8a759e0fb517fc0e5?s=128&d=identicon&r=PG", "display_name": "Marina", "link": "https://stackoverflow.com/users/858418/marina"}, "edited": false, "score": 0, "creation_date": 1437613241, "post_id": 29950070, "comment_id": 51107546, "body": "@Marina I am having the same issue and I have noticed that it only hangs on png files. I see that it is also failing on a png for you. Have you had any luck in solving this?"}], "tags": [], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "is_accepted": false, "score": 2, "last_activity_date": 1430327308, "last_edit_date": 1430327308, "creation_date": 1430326845, "answer_id": 29950070, "question_id": 29949952, "link": "https://stackoverflow.com/questions/29949952/ruby-netsftp-upload-hangs/29950070#29950070", "title": "Ruby Net::SFTP upload hangs", "body": "<p>What is file_path?</p>\n\n<p>If you are using a relative path, it is going to be relative to the directory where the app starts.</p>\n\n<p>The following may be useful:</p>\n\n<pre><code>Dir.pwd\nDir.entries('.')\n</code></pre>\n\n<p>Perhaps <code>verbose: debug</code> would be helpful.</p>\n\n<p>Also:</p>\n\n<blockquote>\n  <p>I'm also having problems using Net::SFTP.start with a block and have had to make do with an inline approach.</p>\n</blockquote>\n\n<pre><code>sftp = Net::SFTP.start(host, username, ssh_session_options)\nsftp.upload!(file.path, remote_path)\nsftp.session.shutdown!\n</code></pre>\n\n<p><a href=\"https://github.com/net-ssh/net-sftp/issues/10\" rel=\"nofollow\">Github Issue</a></p>\n"}, {"tags": [], "owner": {"reputation": 2674, "user_id": 858418, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a50b5d8d5b6638c8a759e0fb517fc0e5?s=128&d=identicon&r=PG", "display_name": "Marina", "link": "https://stackoverflow.com/users/858418/marina"}, "is_accepted": true, "score": 1, "last_activity_date": 1430339270, "creation_date": 1430339270, "answer_id": 29953892, "question_id": 29949952, "link": "https://stackoverflow.com/questions/29949952/ruby-netsftp-upload-hangs/29953892#29953892", "title": "Ruby Net::SFTP upload hangs", "body": "<p>The issue was that I was putting the wrong target location. It shouldn't just be a directory, but the actual filename as well. So instead of saying the following</p>\n\n<pre><code>require \"net/sftp\"\n\nNet::SFTP.start(url, username, password: password) do |sftp|\n  sftp.upload!(file_path, \"/\")\nend\n</code></pre>\n\n<p>I needed to add the filename:</p>\n\n<pre><code>require \"net/sftp\"\n\nNet::SFTP.start(url, username, password: password) do |sftp|\n  sftp.upload!(file_path, \"/filename.extension\")\nend\n</code></pre>\n\n<p>And the block syntax did work for me.</p>\n"}], "owner": {"reputation": 2674, "user_id": 858418, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a50b5d8d5b6638c8a759e0fb517fc0e5?s=128&d=identicon&r=PG", "display_name": "Marina", "link": "https://stackoverflow.com/users/858418/marina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1983, "favorite_count": 0, "accepted_answer_id": 29953892, "answer_count": 2, "score": 0, "last_activity_date": 1430339270, "creation_date": 1430326451, "last_edit_date": 1430329463, "question_id": 29949952, "link": "https://stackoverflow.com/questions/29949952/ruby-netsftp-upload-hangs", "title": "Ruby Net::SFTP upload hangs", "body": "<p>I am using the net-sftp gem to upload a file to an ftp server. Here's my code:</p>\n\n<pre><code>require \"net/sftp\"\n\nNet::SFTP.start(url, username, password: password) do |sftp|\n  sftp.upload!(file_path, \"/\")\nend\n</code></pre>\n\n<p>It just hangs at the upload line, and eventually times out with the error <code>Net::SSH::Disconnect: connection closed by remote host</code>. I am able to connect via SFTP using FileZilla using the same url, username, and password.</p>\n\n<p>I tried running the non-block version with <code>verbose: :debug</code>as well:</p>\n\n<pre><code>sftp = Net::SFTP.start(test.ftphost.com, ftp_username, password: ftp_password, verbose: :debug)\n</code></pre>\n\n<p>^ this produced output that shows that the connection was good:</p>\n\n<pre><code>I, [2015-04-29T10:32:51.381339 #25769]  INFO -- net.ssh.connection.session[3fc8a502c24c]: channel_success: 0 D, [2015-04-29T10:32:51.381429 #25769] DEBUG -- net.sftp.session[3fc8a5025d70]: sftp subsystem successfully started\n</code></pre>\n\n<p>Then I entered the following:</p>\n\n<pre><code>sftp.upload!(\"/Users/marina/Desktop/test.png\", \"/\")\n</code></pre>\n\n<p>The output is stuck like this:</p>\n\n<pre><code>I, [2015-04-29T10:32:55.035471 #25769]  INFO -- net.sftp.session[3fc8a5025d70]: sending open packet (0)\nD, [2015-04-29T10:32:55.035740 #25769] DEBUG -- tcpsocket[3fc8a4cf464c]: queueing packet nr 12 type 94 len 44\nD, [2015-04-29T10:32:55.036149 #25769] DEBUG -- tcpsocket[3fc8a4cf464c]: sent 68 bytes\nD, [2015-04-29T10:32:55.119070 #25769] DEBUG -- tcpsocket[3fc8a4cf464c]: read 52 bytes\nD, [2015-04-29T10:32:55.119356 #25769] DEBUG -- tcpsocket[3fc8a4cf464c]: received packet nr 11 type 96 len 28\nI, [2015-04-29T10:32:55.119470 #25769]  INFO -- net.ssh.connection.session[3fc8a502c24c]: channel_eof: 0\nD, [2015-04-29T10:32:55.195747 #25769] DEBUG -- tcpsocket[3fc8a4cf464c]: read 120 bytes\nD, [2015-04-29T10:32:55.196037 #25769] DEBUG -- tcpsocket[3fc8a4cf464c]: received packet nr 12 type 98 len 44\nI, [2015-04-29T10:32:55.196176 #25769]  INFO -- net.ssh.connection.session[3fc8a502c24c]: channel_request: 0 exit-status false\nD, [2015-04-29T10:32:55.196445 #25769] DEBUG -- tcpsocket[3fc8a4cf464c]: received packet nr 13 type 97 len 28\nI, [2015-04-29T10:32:55.196527 #25769]  INFO -- net.ssh.connection.session[3fc8a502c24c]: channel_close: 0\nD, [2015-04-29T10:32:55.196743 #25769] DEBUG -- tcpsocket[3fc8a4cf464c]: queueing packet nr 13 type 97 len 28\nD, [2015-04-29T10:32:55.196806 #25769] DEBUG -- net.sftp.session[3fc8a5025d70]: sftp channel closed\nD, [2015-04-29T10:32:55.197022 #25769] DEBUG -- tcpsocket[3fc8a4cf464c]: sent 52 bytes\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby", "tcp", "zeromq"], "answers": [{"tags": [], "owner": {"reputation": 1107, "user_id": 16429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/711da651c41e52cdfb806c12e8c91dd1?s=128&d=identicon&r=PG", "display_name": "Clay", "link": "https://stackoverflow.com/users/16429/clay"}, "is_accepted": true, "score": 0, "last_activity_date": 1430328462, "creation_date": 1430328462, "answer_id": 29950561, "question_id": 29949182, "link": "https://stackoverflow.com/questions/29949182/tcp-tunneling-through-linux-tap-device/29950561#29950561", "title": "TCP tunneling through Linux tap device", "body": "<p>The problem is here: <code>tap.to_io.sysread(tap.mtu)</code>. It seems that tap.mtu is not necessarily the maximum number of bytes that sysread will receive, and unread bytes seem to be disarded from a tap interface. I changed the code to <code>tap.to_io.sysread(10000)</code> and http and ssh work as expected. The largest frame I received was 1514.</p>\n"}], "owner": {"reputation": 1107, "user_id": 16429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/711da651c41e52cdfb806c12e8c91dd1?s=128&d=identicon&r=PG", "display_name": "Clay", "link": "https://stackoverflow.com/users/16429/clay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "accepted_answer_id": 29950561, "answer_count": 1, "score": 1, "last_activity_date": 1430328462, "creation_date": 1430323986, "question_id": 29949182, "link": "https://stackoverflow.com/questions/29949182/tcp-tunneling-through-linux-tap-device", "title": "TCP tunneling through Linux tap device", "body": "<p>I've created a tap0 device (IP 10.0.0.101), and am using zeromq's pgm pub/sub (e.g. pgm://192.168.100.2;234.5.6.7:5555) to transport Ethernet frames from the tap to the zmq subscribers and vice versa. The idea is to create a virtual network using pgm. I have 2 tap hosts on the network: 10.0.0.101, 10.0.0.11. They also have physical Ethernet adapters at 192.168.106.126, 192.168.106.55. </p>\n\n<p><strong>'The problem is that ping works, but http and ssh protocols do not.</strong> </p>\n\n<p>Wireshark shows a successful TCP startup sequence, but then I start to see duplicate ACKs, retransmissions, and curl and ssh hang for a while and eventually error out.</p>\n\n<p>A snippet from Wireshark is below, followed by most of the (hopefully) relevant ruby source code. This is using rb_tuntap and ffi-rzmq gems.</p>\n\n<pre><code>No.     Time               Source                Destination           Protocol Length Info\n      7 11:41:45.464867000 10.0.0.11             10.0.0.101            TCP      74     51659 &gt; 3000 [SYN] Seq=0 Win=14600 Len=0 MSS=1460 SACK_PERM=1 TSval=1953042 TSecr=0 WS=64\n\nFrame 7: 74 bytes on wire (592 bits), 74 bytes captured (592 bits) on interface 0\nEthernet II, Src: 3a:e2:d5:f3:8e:6f (3a:e2:d5:f3:8e:6f), Dst: 56:c8:52:17:31:67 (56:c8:52:17:31:67)\nInternet Protocol Version 4, Src: 10.0.0.11 (10.0.0.11), Dst: 10.0.0.101 (10.0.0.101)\nTransmission Control Protocol, Src Port: 51659 (51659), Dst Port: 3000 (3000), Seq: 0, Len: 0\n\nNo.     Time               Source                Destination           Protocol Length Info\n      8 11:41:45.464956000 10.0.0.101            10.0.0.11             TCP      74     3000 &gt; 51659 [SYN, ACK] Seq=0 Ack=1 Win=28960 Len=0 MSS=1460 SACK_PERM=1 TSval=10191992 TSecr=1953042 WS=128\n\nFrame 8: 74 bytes on wire (592 bits), 74 bytes captured (592 bits) on interface 0\nEthernet II, Src: 56:c8:52:17:31:67 (56:c8:52:17:31:67), Dst: 3a:e2:d5:f3:8e:6f (3a:e2:d5:f3:8e:6f)\nInternet Protocol Version 4, Src: 10.0.0.101 (10.0.0.101), Dst: 10.0.0.11 (10.0.0.11)\nTransmission Control Protocol, Src Port: 3000 (3000), Dst Port: 51659 (51659), Seq: 0, Ack: 1, Len: 0\n\nNo.     Time               Source                Destination           Protocol Length Info\n     11 11:41:45.473101000 10.0.0.11             10.0.0.101            TCP      66     51659 &gt; 3000 [ACK] Seq=1 Ack=1 Win=14656 Len=0 TSval=1953044 TSecr=10191992\n\nFrame 11: 66 bytes on wire (528 bits), 66 bytes captured (528 bits) on interface 0\nEthernet II, Src: 3a:e2:d5:f3:8e:6f (3a:e2:d5:f3:8e:6f), Dst: 56:c8:52:17:31:67 (56:c8:52:17:31:67)\nInternet Protocol Version 4, Src: 10.0.0.11 (10.0.0.11), Dst: 10.0.0.101 (10.0.0.101)\nTransmission Control Protocol, Src Port: 51659 (51659), Dst Port: 3000 (3000), Seq: 1, Ack: 1, Len: 0\n\nNo.     Time               Source                Destination           Protocol Length Info\n     12 11:41:45.473429000 10.0.0.11             10.0.0.101            HTTP     145    GET / HTTP/1.1 \n\nFrame 12: 145 bytes on wire (1160 bits), 145 bytes captured (1160 bits) on interface 0\nEthernet II, Src: 3a:e2:d5:f3:8e:6f (3a:e2:d5:f3:8e:6f), Dst: 56:c8:52:17:31:67 (56:c8:52:17:31:67)\nInternet Protocol Version 4, Src: 10.0.0.11 (10.0.0.11), Dst: 10.0.0.101 (10.0.0.101)\nTransmission Control Protocol, Src Port: 51659 (51659), Dst Port: 3000 (3000), Seq: 1, Ack: 1, Len: 79\nHypertext Transfer Protocol\n\nNo.     Time               Source                Destination           Protocol Length Info\n     13 11:41:45.473460000 10.0.0.101            10.0.0.11             TCP      66     3000 &gt; 51659 [ACK] Seq=1 Ack=80 Win=29056 Len=0 TSval=10192001 TSecr=1953046\n\nFrame 13: 66 bytes on wire (528 bits), 66 bytes captured (528 bits) on interface 0\nEthernet II, Src: 56:c8:52:17:31:67 (56:c8:52:17:31:67), Dst: 3a:e2:d5:f3:8e:6f (3a:e2:d5:f3:8e:6f)\nInternet Protocol Version 4, Src: 10.0.0.101 (10.0.0.101), Dst: 10.0.0.11 (10.0.0.11)\nTransmission Control Protocol, Src Port: 3000 (3000), Dst Port: 51659 (51659), Seq: 1, Ack: 80, Len: 0\n\nNo.     Time               Source                Destination           Protocol Length Info\n     15 11:41:45.491555000 10.0.0.101            10.0.0.11             TCP      717    [TCP segment of a reassembled PDU]\n\nFrame 15: 717 bytes on wire (5736 bits), 717 bytes captured (5736 bits) on interface 0\nEthernet II, Src: 56:c8:52:17:31:67 (56:c8:52:17:31:67), Dst: 3a:e2:d5:f3:8e:6f (3a:e2:d5:f3:8e:6f)\nInternet Protocol Version 4, Src: 10.0.0.101 (10.0.0.101), Dst: 10.0.0.11 (10.0.0.11)\nTransmission Control Protocol, Src Port: 3000 (3000), Dst Port: 51659 (51659), Seq: 1, Ack: 80, Len: 651\n\nNo.     Time               Source                Destination           Protocol Length Info\n     16 11:41:45.491599000 10.0.0.101            10.0.0.11             TCP      1514   [TCP segment of a reassembled PDU]\n\nFrame 16: 1514 bytes on wire (12112 bits), 1514 bytes captured (12112 bits) on interface 0\nEthernet II, Src: 56:c8:52:17:31:67 (56:c8:52:17:31:67), Dst: 3a:e2:d5:f3:8e:6f (3a:e2:d5:f3:8e:6f)\nInternet Protocol Version 4, Src: 10.0.0.101 (10.0.0.101), Dst: 10.0.0.11 (10.0.0.11)\nTransmission Control Protocol, Src Port: 3000 (3000), Dst Port: 51659 (51659), Seq: 652, Ack: 80, Len: 1448\n\nNo.     Time               Source                Destination           Protocol Length Info\n     21 11:41:45.496998000 10.0.0.11             10.0.0.101            TCP      66     51659 &gt; 3000 [ACK] Seq=80 Ack=652 Win=17536 Len=0 TSval=1953058 TSecr=10192019\n\nFrame 21: 66 bytes on wire (528 bits), 66 bytes captured (528 bits) on interface 0\nEthernet II, Src: 3a:e2:d5:f3:8e:6f (3a:e2:d5:f3:8e:6f), Dst: 56:c8:52:17:31:67 (56:c8:52:17:31:67)\nInternet Protocol Version 4, Src: 10.0.0.11 (10.0.0.11), Dst: 10.0.0.101 (10.0.0.101)\nTransmission Control Protocol, Src Port: 51659 (51659), Dst Port: 3000 (3000), Seq: 80, Ack: 652, Len: 0\n\nNo.     Time               Source                Destination           Protocol Length Info\n     22 11:41:45.497026000 10.0.0.101            10.0.0.11             HTTP     231    HTTP/1.1 200 OK   (text/html)\n\nFrame 22: 231 bytes on wire (1848 bits), 231 bytes captured (1848 bits) on interface 0\nEthernet II, Src: 56:c8:52:17:31:67 (56:c8:52:17:31:67), Dst: 3a:e2:d5:f3:8e:6f (3a:e2:d5:f3:8e:6f)\nInternet Protocol Version 4, Src: 10.0.0.101 (10.0.0.101), Dst: 10.0.0.11 (10.0.0.11)\nTransmission Control Protocol, Src Port: 3000 (3000), Dst Port: 51659 (51659), Seq: 2100, Ack: 80, Len: 165\n[3 Reassembled TCP Segments (2264 bytes): #15(651), #16(1448), #22(165)]\nHypertext Transfer Protocol\nLine-based text data: text/html\n\nNo.     Time               Source                Destination           Protocol Length Info\n     25 11:41:45.502736000 10.0.0.11             10.0.0.101            TCP      78     [TCP Dup ACK 21#1] 51659 &gt; 3000 [ACK] Seq=80 Ack=652 Win=17536 Len=0 TSval=1953061 TSecr=10192019 SLE=2100 SRE=2265\n\nFrame 25: 78 bytes on wire (624 bits), 78 bytes captured (624 bits) on interface 0\nEthernet II, Src: 3a:e2:d5:f3:8e:6f (3a:e2:d5:f3:8e:6f), Dst: 56:c8:52:17:31:67 (56:c8:52:17:31:67)\nInternet Protocol Version 4, Src: 10.0.0.11 (10.0.0.11), Dst: 10.0.0.101 (10.0.0.101)\nTransmission Control Protocol, Src Port: 51659 (51659), Dst Port: 3000 (3000), Seq: 80, Ack: 652, Len: 0\n\nNo.     Time               Source                Destination           Protocol Length Info\n     26 11:41:45.504245000 10.0.0.101            10.0.0.11             TCP      1514   [TCP Retransmission] 3000 &gt; 51659 [ACK] Seq=652 Ack=80 Win=29056 Len=1448 TSval=10192032 TSecr=1953061[Reassembly error, protocol TCP: New fragment overlaps old data (retransmission?)]\n\nFrame 26: 1514 bytes on wire (12112 bits), 1514 bytes captured (12112 bits) on interface 0\nEthernet II, Src: 56:c8:52:17:31:67 (56:c8:52:17:31:67), Dst: 3a:e2:d5:f3:8e:6f (3a:e2:d5:f3:8e:6f)\nInternet Protocol Version 4, Src: 10.0.0.101 (10.0.0.101), Dst: 10.0.0.11 (10.0.0.11)\nTransmission Control Protocol, Src Port: 3000 (3000), Dst Port: 51659 (51659), Seq: 652, Ack: 80, Len: 1448\n[Reassembly error, protocol TCP: New fragment overlaps old data (retransmission?)]\n\nNo.     Time               Source                Destination           Protocol Length Info\n     33 11:41:45.711324000 10.0.0.101            10.0.0.11             TCP      1514   [TCP Retransmission] 3000 &gt; 51659 [ACK] Seq=652 Ack=80 Win=29056 Len=1448 TSval=10192239 TSecr=1953061[Reassembly error, protocol TCP: New fragment overlaps old data (retransmission?)]\n\nFrame 33: 1514 bytes on wire (12112 bits), 1514 bytes captured (12112 bits) on interface 0\nEthernet II, Src: 56:c8:52:17:31:67 (56:c8:52:17:31:67), Dst: 3a:e2:d5:f3:8e:6f (3a:e2:d5:f3:8e:6f)\nInternet Protocol Version 4, Src: 10.0.0.101 (10.0.0.101), Dst: 10.0.0.11 (10.0.0.11)\nTransmission Control Protocol, Src Port: 3000 (3000), Dst Port: 51659 (51659), Seq: 652, Ack: 80, Len: 1448\n[Reassembly error, protocol TCP: New fragment overlaps old data (retransmission?)]\n</code></pre>\n\n<p>Ruby code:</p>\n\n<pre><code>def run\n\n    stop = false\n\n    Signal.trap(\"SIGINT\")  {\n        stop=true\n    }\n\n    tap.up\n\n    #binding.pry\n    pids = []\n    begin\n\n        # tap =&gt; zmq_pub \n        pids &lt;&lt; Thread.new do\n            while !stop do\n                read_and_pub\n            end\n        end\n\n        # zmq_sub =&gt; tap\n        pids &lt;&lt; Thread.new do\n            while !stop do\n                sub_and_write\n            end\n        end\n\n    rescue\n        stop=true\n    end\n\n    pids.each { |pid| pid.join }\n\n    tap.down\n    tap.close\n    self.tap = nil\n\n    zmq_pub.close\n    zmq_sub.close\n    zmq_ctx.terminate\n\nend # run\n\ndef read_and_pub\n\n    selected = IO.select([tap.to_io],nil,nil,1)\n    if !selected.nil? and !selected[0].nil? and selected[0].length&gt;0 then\n        msg = tap.to_io.sysread(tap.mtu)\n        if !msg.nil? &amp;&amp; msg.length &gt; 0 then\n            sent = zmq_pub.send_string(msg) \n            if sent != msg.length\n                puts \"**** published #{sent}/#{msg.length} ****\"\n            end\n            print_packet msg, tap\n        else\n            puts \"IO.select returned #{selected} but msg is #{msg}\"\n        end\n    end\nend\n\ndef sub_and_write\n    msg = ''\n    zmq_sub.recv_string msg\n    if !msg.nil? &amp;&amp; msg.length &gt; 0 then\n        sent = tap.to_io.syswrite(msg)\n        if sent != msg.length\n            puts \"**** wrote #{sent}/#{msg.length} ****\"\n        end\n        print_packet msg, zmq_sub\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1430322681, "post_id": 29948627, "comment_id": 48018210, "body": "When another class needs a method, it obviously shouldn&#39;t be private. Or it&#39;s in a wrong class."}, {"owner": {"reputation": 488, "user_id": 2313770, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/daed0bb1a02ebc98ab352d27b8699092?s=128&d=identicon&r=PG", "display_name": "scuttle-jesuit", "link": "https://stackoverflow.com/users/2313770/scuttle-jesuit"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1430322786, "post_id": 29948627, "comment_id": 48018294, "body": "They both are part of the Alert class. I am not sure if that&#39;s how it should be though. I use whenever to schedule a cron job that calls Alert.scheduled_test_creation"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1430323016, "post_id": 29948627, "comment_id": 48018455, "body": "Seems that your <code>Alert</code> class is doing too much. I&#39;m pretty sure that <code>create_test</code> method will look better as a <code>TestBuilder</code> class."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1430323064, "post_id": 29948627, "comment_id": 48018499, "body": "The question sounds to me as \u201cI accidentally and likely mistakenly set the method access level to private. Now I can\u2019t call it from outside. Help!\u201d :)"}, {"owner": {"reputation": 488, "user_id": 2313770, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/daed0bb1a02ebc98ab352d27b8699092?s=128&d=identicon&r=PG", "display_name": "scuttle-jesuit", "link": "https://stackoverflow.com/users/2313770/scuttle-jesuit"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1430323283, "post_id": 29948627, "comment_id": 48018644, "body": "@SergioTulentsev That makes a lot of sense actually. Where would that class go?"}, {"owner": {"reputation": 488, "user_id": 2313770, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/daed0bb1a02ebc98ab352d27b8699092?s=128&d=identicon&r=PG", "display_name": "scuttle-jesuit", "link": "https://stackoverflow.com/users/2313770/scuttle-jesuit"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1430323325, "post_id": 29948627, "comment_id": 48018671, "body": "@mudasobwa - that may very well be the case, hence: &quot; I don&#39;t want to write the same code twice and I want to make sure is good practice. Maybe in this case the methods don&#39;t have to be private &quot; I already said I don&#39;t know if the methods should be private or even part of this class"}], "answers": [{"tags": [], "owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "is_accepted": true, "score": 2, "last_activity_date": 1430324287, "creation_date": 1430324287, "answer_id": 29949269, "question_id": 29948627, "link": "https://stackoverflow.com/questions/29948627/accessing-instance-method-from-class-method/29949269#29949269", "title": "Accessing instance method from class method", "body": "<p>I like service classes for interactions between multiple models. Callbacks can make the logic quite hard to follow. </p>\n\n<p>Eg: </p>\n\n<pre><code>class AlertCreator\n  def initialize(alert)\n    @alert = alert\n  end\n\n  def call\n    if @alert.save\n      alert_test = TestBuilder.new(@alert).call\n      alert_test.save\n      true\n    end\n  end\nend\n\nclass TestBuilder\n  def initialize(alert)\n    @alert = alert\n  end\n\n  def call\n    # external API interaction stuff\n    # return unsaved test\n  end\nend\n</code></pre>\n\n<p>Inside your controller, you'd call <code>AlertCreator.new(@alert).call</code> instead of the usual <code>@alert.save</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 3548, "user_id": 1729692, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/I9nUd.jpg?s=128&g=1", "display_name": "Topher Hunt", "link": "https://stackoverflow.com/users/1729692/topher-hunt"}, "is_accepted": false, "score": 0, "last_activity_date": 1430328737, "creation_date": 1430328737, "answer_id": 29950642, "question_id": 29948627, "link": "https://stackoverflow.com/questions/29948627/accessing-instance-method-from-class-method/29950642#29950642", "title": "Accessing instance method from class method", "body": "<p>I agree with @SergioTulentsev: while in the long run you may be better served by breaking out this logic into a service class, in the short run you simply <em>shouldn't make a method private</em> if it needs to be called outside of the instance.</p>\n\n<p>In some cases you <em>actually</em> want to access a private method, for example when verifying object state during tests. This is easy to do:</p>\n\n<pre><code>@alert.instance_eval{ create_test }\n</code></pre>\n\n<p>You can even fetch or alter instance variables this way:</p>\n\n<pre><code>@alert.instance_eval{ @has_code_smells = true }\n</code></pre>\n\n<p>In general, if you feel the need to do this, it's a warning smell that your logic needs to be rethunk. Ignoring that sort of smell is what turns Ruby from a wonderful language into a way-too-powerful language that allows you to shoot yourself in the foot. But it's doable.</p>\n"}], "owner": {"reputation": 488, "user_id": 2313770, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/daed0bb1a02ebc98ab352d27b8699092?s=128&d=identicon&r=PG", "display_name": "scuttle-jesuit", "link": "https://stackoverflow.com/users/2313770/scuttle-jesuit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 29949269, "answer_count": 2, "score": 0, "last_activity_date": 1430328737, "creation_date": 1430322435, "question_id": 29948627, "link": "https://stackoverflow.com/questions/29948627/accessing-instance-method-from-class-method", "title": "Accessing instance method from class method", "body": "<p>I have a rails 4 app that has an alert model and tests associated to each alert. </p>\n\n<p>When a new alert is created I have a an after_create filter that uses an instance method to create a new test:</p>\n\n<pre><code>class Alert &lt; ActiveRecord::Base\n    has_many :tests\n    after_create :create_test\n\n    private\n\n    def create_test\n\n    #bunch of code using external api to get some data  \n\n\n     Test.create \n\n    end\nend\n</code></pre>\n\n<p>I also have a cron job that I want to use to create a new test for each alert. My plan was to have a class method to do that:</p>\n\n<pre><code>def self.scheduled_test_creation\n        @alerts = Alert.all\n        @alerts.each do |a|\n          a.create_test        \n        end\n    end\n</code></pre>\n\n<p>That won't work because the instance method is private. I know I can get around this using send for example. Or I can make the methods public. Or I can rewrite that bunch of api code in the instance method.</p>\n\n<p>I am just not sure what the best way would be. I don't want to write the same code twice and I want to make sure is good practice. Maybe in this case the methods don't have to be private - I know the difference between public/private/protected but I don't really understand when methods should be private/protected.</p>\n\n<p>Any help would be greatly appreciated</p>\n"}, {"tags": ["ruby", "serialization", "yaml"], "answers": [{"tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": false, "score": 0, "last_activity_date": 1430326496, "creation_date": 1430326496, "answer_id": 29949967, "question_id": 29948598, "link": "https://stackoverflow.com/questions/29948598/ruby-yaml-serialisation-issue/29949967#29949967", "title": "Ruby Yaml serialisation issue", "body": "<p>You are mangling the hash in the <code>for user in hash[\"ssl_user_clients\"]</code> loop, because <code>user</code> contains a hash and you're creating a new element using <code>user</code> as the key. </p>\n\n<p>Update the passwords this way:</p>\n\n<pre><code>for user in hash[\"ssl_user_clients\"]\n  user['password'] = get_cleaned_password\nend\n</code></pre>\n\n<p>Now <code>hash</code> will have updated passwords for each user, which you can verify with <code>puts hash.to_yaml</code>.</p>\n"}], "owner": {"reputation": 1183, "user_id": 1158964, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/e68edd777b56a567f82ee67763d964f7?s=128&d=identicon&r=PG", "display_name": "casibbald", "link": "https://stackoverflow.com/users/1158964/casibbald"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430384384, "creation_date": 1430322352, "last_edit_date": 1430384384, "question_id": 29948598, "link": "https://stackoverflow.com/questions/29948598/ruby-yaml-serialisation-issue", "title": "Ruby Yaml serialisation issue", "body": "<p>Strange problem with serialisation, probably something I am doing wrong but not sure what it is. </p>\n\n<p>Thanks in advance for the help.</p>\n\n<p>Input yaml Document</p>\n\n<pre><code>---\nssl_user_clients:\n  - first_name: donnald\n    surname: duck\n    email: donnald.duck@acme.corp\n    country: fantasyland\n    state: desert\n    locality: Disney\n    org_name: Acme corp\n</code></pre>\n\n<p>Expected yaml Document</p>\n\n<pre><code>---\nssl_user_clients:\n  - first_name: donnald\n    surname: duck\n    password: k)NzzC+&amp;Dg?-RY|0\n    email: donnald.duck@acme.corp\n    country: fantasyland\n    state: desert\n    locality: Disney\n    org_name: Acme corp\n</code></pre>\n\n<p>Strange Result of my code:</p>\n\n<pre><code>---\nssl_user_clients:\n- &amp;1\n  first_name: donnald\n  surname: duck\n  email: donnald.duck@acme.corp\n  country: fantasyland\n  state: desert\n  locality: Disney\n  org_name: Acme corp\n*1:\n  first_name: donnald\n  surname: duck\n  email: donnald.duck@acme.corp\n  country: fantasyland\n  state: desert\n  locality: Disney\n  org_name: Acme corp\n  password: k)NzzC+&amp;Dg?-RY|0\n</code></pre>\n\n<p>My Ruby Code:</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire \"yaml\"\n\ndef generate_activation_code(size = 16)\n  charset = %w{0 1 2 3 4 6 7 9 A C D E F G H J K M N P Q R T V W X Y Z a b c d e f g h i j k m n o p q r s t u v w x y z ! @ $ % ^ &amp; * ( ) _ ? ~ + - = / \\ | &lt; &gt; { } [ ]}\n  (0...size).map{ charset.to_a[rand(charset.size)] }.join\nend\n\n\ndef get_cleaned_password\n    password = generate_activation_code\n    password.split().collect{|x| x.strip}.join()\nend\n\n\nhash = YAML.load(File.read(ARGV[0]))\n\nputs \"Hash from file\"\nputs hash\nputs\nputs\n\n\nfor user in hash[\"ssl_user_clients\"]\n    if not user[\"password\"]\n        new_password = get_cleaned_password\n    end\n\n    pass = { \"password\" =&gt; new_password }\n    hash[user] = user.merge pass\nend\n\n\nputs hash.to_yaml\n\nopen(ARGV[0], File::TRUNC) {}\nFile.open(ARGV[0], 'w') {|f| f.write hash.to_yaml( :Indent =&gt; 4, :UseHeader =&gt; true, :UseVersion =&gt; true ) }\n</code></pre>\n\n<p>Please may someone assist with this as this has confounded me, I really did not expect to see this.</p>\n\n<p>some debug information.</p>\n\n<pre><code>Hash from file\n{\"ssl_user_clients\"=&gt;[{\"first_name\"=&gt;\"donnald\", \"surname\"=&gt;\"duck\", \"email\"=&gt;\"donnald.duck@acme.corp\", \"country\"=&gt;\"fantasyland\", \"state\"=&gt;\"desert\", \"locality\"=&gt;\"Disney\", \"org_name\"=&gt;\"Acme corp\"}]}\n\nHash before hash.to_yaml\n{\"ssl_user_clients\"=&gt;[{\"first_name\"=&gt;\"donnald\", \n                        \"surname\"=&gt;\"duck\",\n                        \"email\"=&gt;\"donnald.duck@acme.corp\",       \n                        \"country\"=&gt;\"fantasyland\", \n                        \"state\"=&gt;\"desert\", \n                        \"locality\"=&gt;\"Disney\",\n                        \"org_name\"=&gt;\"Acme corp\"}], \n                      {\"first_name\"=&gt;\"donnald\", \n                        \"surname\"=&gt;\"duck\", \n                        \"email\"=&gt;\"donnald.duck@acme.corp\",\n                        \"country\"=&gt;\"fantasyland\", \n                        \"state\"=&gt;\"desert\", \n                        \"locality\"=&gt;\"Disney\", \n                        \"org_name\"=&gt;\"Acme corp\"}=&gt;{\"first_name\"=&gt;\"donnald\",\n                        \"surname\"=&gt;\"duck\", \n                        \"email\"=&gt;\"donnald.duck@acme.corp\",\n                        \"country\"=&gt;\"fantasyland\", \n                        \"state\"=&gt;\"desert\", \n                        \"locality\"=&gt;\"Disney\", \n                        \"org_name\"=&gt;\"Acme corp\", \n                        \"password\"=&gt;\"4?zkoff3^hmMC-&lt;7\"}}\n</code></pre>\n\n<p>The change as detailed below fixed the mangling of the yaml, however the output has indentation issues.</p>\n\n<p>Great stuff, this works as expected however there is an indentation issue with output.</p>\n\n<p>The following fixed the mangling as per advise given by @infused (Thanks) below:</p>\n\n<pre><code>for user in hash[\"ssl_user_clients\"]\n    if not user[\"password\"]\n        user[\"password\"] = get_cleaned_password\n    end\nend\n</code></pre>\n\n<p>Correct output as expected.</p>\n\n<pre><code>---\nssl_user_clients:\n  - first_name: donnald\n    surname: duck\n    email: donnald.duck@acme.corp\n    country: fantasyland\n    state: desert\n    locality: Disney\n    org_name: Acme corp\n    password: =)%DoHHpyRrx|?v=\n</code></pre>\n\n<p>I had assumed the following would have ensured the indentation was correct.</p>\n\n<pre><code>to_yaml( :Indent =&gt; 4, :UseHeader =&gt; true, :UseVersion =&gt; true ) }\n</code></pre>\n"}, {"tags": ["ruby", "selenium", "watir", "parallel-testing", "multiple-browsers"], "comments": [{"owner": {"reputation": 3026, "user_id": 3932942, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ea692da698891091e138bc7cc52ec647?s=128&d=identicon&r=PG&f=1", "display_name": "Stan E", "link": "https://stackoverflow.com/users/3932942/stan-e"}, "edited": false, "score": 2, "creation_date": 1430325938, "post_id": 29948360, "comment_id": 48020295, "body": "Som why wouldn;t you use Selenium grid for that purposes? You are running selenium grid nodes and running one browser on 1 node. You are defining browser right while running selenium grid node, like here: <a href=\"http://stackoverflow.com/questions/24685928/selenium-grid-with-cucumber\" title=\"selenium grid with cucumber\">stackoverflow.com/questions/24685928/&hellip;</a>"}, {"owner": {"reputation": 812, "user_id": 1155498, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e82b888c69fb4df9c906753f8336ddd0?s=128&d=identicon&r=PG", "display_name": "Sukuva", "link": "https://stackoverflow.com/users/1155498/sukuva"}, "reply_to_user": {"reputation": 3026, "user_id": 3932942, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ea692da698891091e138bc7cc52ec647?s=128&d=identicon&r=PG&f=1", "display_name": "Stan E", "link": "https://stackoverflow.com/users/3932942/stan-e"}, "edited": false, "score": 0, "creation_date": 1430337533, "post_id": 29948360, "comment_id": 48027500, "body": "Thank you, I totally agree to that point. I know that Grid will take care if we send request with capabilities. But my question is how do i handle within framework to accept multiple browser parameter and trigger all the tests against those browsers? The link that you posted will help me to run multiple tests against single browser( though runs in parallel). But any idea to handle multiple scenarios against multiple browsers ?"}, {"owner": {"reputation": 3026, "user_id": 3932942, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ea692da698891091e138bc7cc52ec647?s=128&d=identicon&r=PG&f=1", "display_name": "Stan E", "link": "https://stackoverflow.com/users/3932942/stan-e"}, "edited": false, "score": 0, "creation_date": 1430339330, "post_id": 29948360, "comment_id": 48028520, "body": "You probably was not carefully reading the answer from the link above. They are doing that in multiply browsers and detecting what browser should be set within the node with envuronment variables."}], "owner": {"reputation": 812, "user_id": 1155498, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e82b888c69fb4df9c906753f8336ddd0?s=128&d=identicon&r=PG", "display_name": "Sukuva", "link": "https://stackoverflow.com/users/1155498/sukuva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 825, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1430322757, "creation_date": 1430321715, "last_edit_date": 1430322757, "question_id": 29948360, "link": "https://stackoverflow.com/questions/29948360/parallel-tests-ruby-multiple-browser-testing", "title": "parallel_tests - Ruby multiple browser testing", "body": "<p>So far I have tried running multiple scenarios using parallel_tests and they are working fine. But the problem with this approach is I need to run multiple times with different browser parameter and I think that this is not a good practice. </p>\n\n<p>Right now I am passing only browser parameters along with cucumber config. I can pass array of browsers like 'chrome', 'firefox' , 'ie' etc. Now question is, is there anyway I can trigger all scenarios against all these browsers? parallel_tests should invoke my scenarios? (Lets say 2 scenarios) 6 times (1 scenario against 3 browsers). Is there anyway I can achieve this task? </p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 1989, "user_id": 1995600, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7a20921c83940ce92363d28a6d84a712?s=128&d=identicon&r=PG", "display_name": "DMH", "link": "https://stackoverflow.com/users/1995600/dmh"}, "edited": false, "score": 0, "creation_date": 1430321813, "post_id": 29948354, "comment_id": 48017593, "body": "sorry I didnt add info that on occasions inside there may be groups of characters as well. Iv edited the question."}], "tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 1, "last_activity_date": 1430322505, "last_edit_date": 1430322505, "creation_date": 1430321699, "answer_id": 29948354, "question_id": 29948276, "link": "https://stackoverflow.com/questions/29948276/gsub-for-removing-brackets-and-from-string/29948354#29948354", "title": "gsub for removing brackets and \\ from string", "body": "<p>You can use regex for that:</p>\n\n<pre><code>a = '\"[\"Char1\", \"Char2\", \"Char3\", \"Char4\"]\"'\na.scan(/[a-zA-Z0-9]+/)\n# =&gt; [\"Char1\", \"Char2\", \"Char3\", \"Char4\"]\n</code></pre>\n\n<p>After Question Edit:</p>\n\n<pre><code>a = '\"[\\\"This is a word ect\\\", \\\"Char2\\\", \\\"Another grooup\\\", \\\"Char4\\\"]\"'\na.split('\\\"').find_all { |a| a =~ /\\w+/ }\n# =&gt; [\"This is a word ect\", \"Char2\", \"Another grooup\", \"Char4\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1989, "user_id": 1995600, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7a20921c83940ce92363d28a6d84a712?s=128&d=identicon&r=PG", "display_name": "DMH", "link": "https://stackoverflow.com/users/1995600/dmh"}, "edited": false, "score": 0, "creation_date": 1430321810, "post_id": 29948355, "comment_id": 48017588, "body": "sorry I didnt add info that on occasions inside there may be groups of characters as well. Iv edited the question."}], "tags": [], "owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "is_accepted": false, "score": 3, "last_activity_date": 1430324181, "last_edit_date": 1430324181, "creation_date": 1430321699, "answer_id": 29948355, "question_id": 29948276, "link": "https://stackoverflow.com/questions/29948276/gsub-for-removing-brackets-and-from-string/29948355#29948355", "title": "gsub for removing brackets and \\ from string", "body": "<p>You can use <code>gsub</code>:</p>\n\n<pre><code>=&gt; %Q|\"[\\\"This is a word ect\\\", \\\"Char2\\\", \\\"Another grooup\\\", \\\"Char4\\\"]\"|\n=&gt; s.gsub(/\"|\\[|\\]/, '')\n=&gt; \"This is a word ect, Char2, Another grooup, Char4\"\n</code></pre>\n\n<p>gsub for me <code>\"</code> or <code>[</code> or <code>]</code>. </p>\n\n<p><code>|</code> - or operator.</p>\n\n<p><code>\\</code> - escape <code>[</code> and <code>]</code></p>\n"}, {"comments": [{"owner": {"reputation": 763, "user_id": 1457383, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/cabe47f4706bf935f8e8aefcb272730f?s=128&d=identicon&r=PG", "display_name": "Ninjaxor", "link": "https://stackoverflow.com/users/1457383/ninjaxor"}, "edited": false, "score": 0, "creation_date": 1430347244, "post_id": 29948408, "comment_id": 48032420, "body": "How come you blocked my edit?  It wasn&#39;t really a message to you, it was an improvement to your answer.  If you didn&#39;t think this was the correct solution it should really be made into a comment instead, though this is the correct answer, it needs more explanation so the OP can understand why."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 8, "last_activity_date": 1430323296, "last_edit_date": 1430323296, "creation_date": 1430321831, "answer_id": 29948408, "question_id": 29948276, "link": "https://stackoverflow.com/questions/29948276/gsub-for-removing-brackets-and-from-string/29948408#29948408", "title": "gsub for removing brackets and \\ from string", "body": "<p>Just out of curiosity:</p>\n\n<pre><code>str = '[\"This is a word ect\", \"Char2\", \"Another grooup\", \"Char4\"]'\nrequire 'json'\nJSON.parse(str).join(', ')\n#\u21d2 \"This is a word ect, Char2, Another grooup, Char4\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 5437, "user_id": 1257094, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Ob6MH.jpg?s=128&g=1", "display_name": "milgner", "link": "https://stackoverflow.com/users/1257094/milgner"}, "edited": false, "score": 0, "creation_date": 1430322810, "post_id": 29948568, "comment_id": 48018306, "body": "@ma_il Marked your comment as non-constructive. How and who would you inject code into a prepared (fixed) string?"}, {"owner": {"reputation": 5437, "user_id": 1257094, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Ob6MH.jpg?s=128&g=1", "display_name": "milgner", "link": "https://stackoverflow.com/users/1257094/milgner"}, "edited": false, "score": 4, "creation_date": 1430322864, "post_id": 29948568, "comment_id": 48018338, "body": "If it were fixed he wouldn&#39;t need processing, he could just replace the fixed string with the one he wanted."}, {"owner": {"reputation": 1989, "user_id": 1995600, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7a20921c83940ce92363d28a6d84a712?s=128&d=identicon&r=PG", "display_name": "DMH", "link": "https://stackoverflow.com/users/1995600/dmh"}, "edited": false, "score": 1, "creation_date": 1430323077, "post_id": 29948568, "comment_id": 48018508, "body": "I will have a variable which contains the string e.g. mod so it will be eval(mod).join(&quot;, &quot;)"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 10, "creation_date": 1430323238, "post_id": 29948568, "comment_id": 48018621, "body": "Recommending <code>eval()</code> could lead people to make huge mistakes."}, {"owner": {"reputation": 193178, "user_id": 1159478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdc1819fb4534da6c044b03b7ec38fe?s=128&d=identicon&r=PG", "display_name": "Servy", "link": "https://stackoverflow.com/users/1159478/servy"}, "reply_to_user": {"reputation": 10701, "user_id": 998328, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/86d1bcb6609046f3535ca20691c48aa9?s=128&d=identicon&r=PG", "display_name": "Carrie Kendall", "link": "https://stackoverflow.com/users/998328/carrie-kendall"}, "edited": false, "score": 2, "creation_date": 1430327248, "post_id": 29948568, "comment_id": 48021198, "body": "@carrieKendall The OP does not in fact have a fixed string, so the use of eval here is not in fact safe, contrary to your statement.  If it <i>were</i> fixed (even though it&#39;s not) then using eval would <i>still</i> be wrong, as you&#39;re needlessly creating a new instance of the compiler to do a trivial translation that could instead be done before even compiling the code, making the code faster, safer, and easier to read/maintain.  Using eval is causing nothign but problems."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 193178, "user_id": 1159478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdc1819fb4534da6c044b03b7ec38fe?s=128&d=identicon&r=PG", "display_name": "Servy", "link": "https://stackoverflow.com/users/1159478/servy"}, "edited": false, "score": 0, "creation_date": 1430327320, "post_id": 29948568, "comment_id": 48021247, "body": "@Servy How do you know it is not fixed? The OP only showed a single example, and referred to it with the definite article."}, {"owner": {"reputation": 763, "user_id": 1457383, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/cabe47f4706bf935f8e8aefcb272730f?s=128&d=identicon&r=PG", "display_name": "Ninjaxor", "link": "https://stackoverflow.com/users/1457383/ninjaxor"}, "edited": false, "score": 0, "creation_date": 1430327330, "post_id": 29948568, "comment_id": 48021257, "body": "You don&#39;t need to evaluate this type of data with Ruby, parsing with JSON is more than sufficient."}, {"owner": {"reputation": 193178, "user_id": 1159478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdc1819fb4534da6c044b03b7ec38fe?s=128&d=identicon&r=PG", "display_name": "Servy", "link": "https://stackoverflow.com/users/1159478/servy"}, "edited": false, "score": 1, "creation_date": 1430327379, "post_id": 29948568, "comment_id": 48021289, "body": "@sawa See <a href=\"http://stackoverflow.com/questions/29948276/gsub-for-removing-brackets-and-from-string/29948568#comment48018508_29948568\">his comment</a>  And even if the string were in fact fixed, this would still be the wrong approach."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 763, "user_id": 1457383, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/cabe47f4706bf935f8e8aefcb272730f?s=128&d=identicon&r=PG", "display_name": "Ninjaxor", "link": "https://stackoverflow.com/users/1457383/ninjaxor"}, "edited": false, "score": 0, "creation_date": 1430327459, "post_id": 29948568, "comment_id": 48021334, "body": "@Ninjaxor Yes. That would work if you know that the string is from JSON."}, {"owner": {"reputation": 193178, "user_id": 1159478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdc1819fb4534da6c044b03b7ec38fe?s=128&d=identicon&r=PG", "display_name": "Servy", "link": "https://stackoverflow.com/users/1159478/servy"}, "reply_to_user": {"reputation": 10701, "user_id": 998328, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/86d1bcb6609046f3535ca20691c48aa9?s=128&d=identicon&r=PG", "display_name": "Carrie Kendall", "link": "https://stackoverflow.com/users/998328/carrie-kendall"}, "edited": false, "score": 1, "creation_date": 1430327475, "post_id": 29948568, "comment_id": 48021348, "body": "@CarrieKendall Then that would make the answer not answering the question, if it&#39;s only valid in the event the string is fixed (not that even that is an acceptable situation to use <code>eval</code>)."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1430327481, "post_id": 29948568, "comment_id": 48021352, "body": "I can\u2019t believe that absolutely correct answer continues yielding downvotes just because of [wrong] mantra \u201c<code>eval</code> is evil.\u201d Upvoted."}, {"owner": {"reputation": 193178, "user_id": 1159478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdc1819fb4534da6c044b03b7ec38fe?s=128&d=identicon&r=PG", "display_name": "Servy", "link": "https://stackoverflow.com/users/1159478/servy"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 3, "creation_date": 1430327586, "post_id": 29948568, "comment_id": 48021421, "body": "@mudasobwa I can&#39;t believe that a clearly <i>actively  harmful</i> answer would be upvoted.  Do you enjoy misleading less experienced developers into using actively harmful solutions due to their inability to recognize how problematic such a solution is, despite it&#39;s appearance at being helpful to the uneducated programmer?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 193178, "user_id": 1159478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdc1819fb4534da6c044b03b7ec38fe?s=128&d=identicon&r=PG", "display_name": "Servy", "link": "https://stackoverflow.com/users/1159478/servy"}, "edited": false, "score": 3, "creation_date": 1430327967, "post_id": 29948568, "comment_id": 48021668, "body": "@Servy Let me make things clear. My answer you may find below, it uses safe <code>JSON.parse</code>. @sawa\u2019s answer is correct. It is by no means harmful. It performs the requested operation. Whether <code>eval</code> was evil, Matz would not include it in language, would he? Now we have your word \u201charmful solution\u201d against Matz\u2019 word \u201d<code>eval</code> is to be presented in the language\u201d. I trust Matz more, sorry for that. Yes, there are circumstances where <code>eval</code> in not applicable. This is by no means such a case. Possibly @sawa should drop a notice \u201cbe careful,\u201d but even despite he did not, his answer is still correct."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1430328222, "post_id": 29948568, "comment_id": 48021831, "body": "@mudasobwa Thanks for that. I agree with you. You answer after the edit is actually good."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 10701, "user_id": 998328, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/86d1bcb6609046f3535ca20691c48aa9?s=128&d=identicon&r=PG", "display_name": "Carrie Kendall", "link": "https://stackoverflow.com/users/998328/carrie-kendall"}, "edited": false, "score": 2, "creation_date": 1430328264, "post_id": 29948568, "comment_id": 48021851, "body": "@CarrieKendall I have never said \u201csomeone,\u201d I said \u201cMatz.\u201d"}, {"owner": {"reputation": 193178, "user_id": 1159478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cdc1819fb4534da6c044b03b7ec38fe?s=128&d=identicon&r=PG", "display_name": "Servy", "link": "https://stackoverflow.com/users/1159478/servy"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 3, "creation_date": 1430328669, "post_id": 29948568, "comment_id": 48022104, "body": "@mudasobwa You think that ruby can ever do anything harmful?  So you think that there&#39;s no way you could cause any harm by deleting a file, or editing the registry, spinning the CPU, or trapping keyboard input?  I never said that using <code>eval</code> was universally harmful.  I said that it&#39;s use of it here was, because, among other points, it&#39;s completely unnecessary.  At <i>best</i> it&#39;s just wasting a huge amount of effort and adding a lot of complexity.  That&#39;s even ignoring all of the security vulnerabilities.  Apparently you just don&#39;t <i>care</i> about all of the problems this answer is likely to cause."}, {"owner": {"reputation": 168160, "user_id": 19679, "user_type": "moderator", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/52a2ffb44b1c11ab9001cb67e0a0021c?s=128&d=identicon&r=PG", "display_name": "Brad Larson", "link": "https://stackoverflow.com/users/19679/brad-larson"}, "edited": false, "score": 0, "creation_date": 1430332471, "post_id": 29948568, "comment_id": 48024411, "body": "OK, things are getting a little too heated here. Let&#39;s refrain from insulting anyone and try to keep this from devolving into a flamewar."}, {"owner": {"reputation": 10701, "user_id": 998328, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/86d1bcb6609046f3535ca20691c48aa9?s=128&d=identicon&r=PG", "display_name": "Carrie Kendall", "link": "https://stackoverflow.com/users/998328/carrie-kendall"}, "reply_to_user": {"reputation": 6595, "user_id": 3459110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6157a904cd6a594bd2a86e49fdd6ee97?s=128&d=identicon&r=PG&f=1", "display_name": "user3459110", "link": "https://stackoverflow.com/users/3459110/user3459110"}, "edited": false, "score": 0, "creation_date": 1430487342, "post_id": 29948568, "comment_id": 48094918, "body": "@awal I was trying to lighten the tense mood with a joke, sorry if it was perceived as anything different. I am going to remove all my comments since they don&#39;t add anything to the answer."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": -4, "last_activity_date": 1430326737, "last_edit_date": 1495535335, "creation_date": 1430322251, "answer_id": 29948568, "question_id": 29948276, "link": "https://stackoverflow.com/questions/29948276/gsub-for-removing-brackets-and-from-string/29948568#29948568", "title": "gsub for removing brackets and \\ from string", "body": "<p>I don't think <code>gsub</code> is the right way to go.</p>\n\n<pre><code>eval(\"[\\\"This is a word ect\\\", \\\"Char2\\\", \\\"Another grooup\\\", \\\"Char4\\\"]\")\n.join(\", \")\n# =&gt; \"This is a word ect, Char2, Another grooup, Char4\"\n</code></pre>\n\n<p>Keep in mind that <code>eval()</code> can be dangerous. The reason it is not dangerous in this circumstance is because we are dealing with a fixed string. For more information, have a look at <a href=\"https://stackoverflow.com/questions/1902744/when-is-eval-in-ruby-justified\">When is `eval` in Ruby justified?</a></p>\n"}, {"tags": [], "owner": {"reputation": 763, "user_id": 1457383, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/cabe47f4706bf935f8e8aefcb272730f?s=128&d=identicon&r=PG", "display_name": "Ninjaxor", "link": "https://stackoverflow.com/users/1457383/ninjaxor"}, "is_accepted": false, "score": 1, "last_activity_date": 1430342779, "creation_date": 1430342779, "answer_id": 29954906, "question_id": 29948276, "link": "https://stackoverflow.com/questions/29948276/gsub-for-removing-brackets-and-from-string/29954906#29954906", "title": "gsub for removing brackets and \\ from string", "body": "<p>Parsing the data with JSON is a safe and effective approach when the data is known to be well formed and parsable:</p>\n\n<pre><code>str = \"[\\\"This is a word ect\\\", \\\"Char2\\\", \\\"This Element uses a (\\\\\\\") symbol that is important to keep\\\", \\\"Char4\\\"]\"\nrequire 'json'\nJSON.parse(str).join(', ')\n =&gt; \"This is a word ect, Char2, This Element uses a (\\\") symbol that is important to keep, Char4\"\n</code></pre>\n\n<p>Otherwise a gsub solution using either regex or simple method chaining can be employed, but this sort of naive approach may remove quotation marks and brackets from the inner elements of the array string being parsed, potentially mangling the data you meant to extract. </p>\n\n<pre><code>str = \"[\\\"This is a word ect\\\", \\\"Char2\\\", \\\"This Element uses a (\\\\\\\") symbol that is important to keep\\\", \\\"Char4\\\"]\"\nstr.gsub('\"', '').gsub('[','').gsub(']','')\n =&gt; \"This is a word ect, Char2, This Element uses a (\\\\) symbol that is important to keep, Char4\"\n</code></pre>\n\n<p><strong>Notice how the gsub approach has a different result than the JSON parse method.</strong>  </p>\n\n<p>In theory, Ruby's eval could also be used to parse the string data into an array and then join it, but eval is meant for interpreting strings and running them as ruby code, and as such should only be used when it is important to run arbitrary ruby code that has been encoded as a string.  The method name 'eval' actually comes from the word 'evaluate', not evil.  Despite this, however, evaluation is not an objective in this scenario; parsing is.  </p>\n\n<p>Another reason why people are hesitant to recommend eval for trivial tasks like data parsing is that the worst case scenario of JSON#parse is that it fails to parse.  Whereas the worst case scenario of eval is that you've completely deleted your file system by parsing a string that you didn't expect to be there when you first designed your code.  </p>\n"}], "owner": {"reputation": 1989, "user_id": 1995600, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7a20921c83940ce92363d28a6d84a712?s=128&d=identicon&r=PG", "display_name": "DMH", "link": "https://stackoverflow.com/users/1995600/dmh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4009, "favorite_count": 0, "accepted_answer_id": 29948408, "answer_count": 5, "score": 1, "last_activity_date": 1430342779, "creation_date": 1430321503, "last_edit_date": 1430322367, "question_id": 29948276, "link": "https://stackoverflow.com/questions/29948276/gsub-for-removing-brackets-and-from-string", "title": "gsub for removing brackets and \\ from string", "body": "<p>I have issues using <code>gsub</code> to remove <code>[]</code> and <code>\\\"</code> from a string. Here is the string:</p>\n\n<pre><code>\"[\\\"This is a word ect\\\", \\\"Char2\\\", \\\"Another grooup\\\", \\\"Char4\\\"]\"\n</code></pre>\n\n<p>I want the returned value to be:</p>\n\n<pre><code>\"This is a word ect, Char2, Another grooup, Char4\"\n</code></pre>\n\n<p>Can anyone point me in the right direction?</p>\n"}, {"tags": ["ruby", "process", "lazy-evaluation"], "answers": [{"tags": [], "owner": {"reputation": 270, "user_id": 1780767, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/KooOB.jpg?s=128&g=1", "display_name": "Andy Gout", "link": "https://stackoverflow.com/users/1780767/andy-gout"}, "is_accepted": true, "score": 1, "last_activity_date": 1438433116, "creation_date": 1438433116, "answer_id": 31761984, "question_id": 29948196, "link": "https://stackoverflow.com/questions/29948196/how-to-use-lazy-enumeration-to-control-processes/31761984#31761984", "title": "How to use Lazy enumeration to control processes?", "body": "<p>Pat's blogged at length about the lazy enumerator. You may well have found this already but in case not: <a href=\"http://patshaughnessy.net/2013/4/3/ruby-2-0-works-hard-so-you-can-be-lazy\" rel=\"nofollow\">http://patshaughnessy.net/2013/4/3/ruby-2-0-works-hard-so-you-can-be-lazy</a></p>\n\n<p>Appreciate it's not a real world example but is certainly a very thorough intro and explanation.</p>\n"}], "owner": {"reputation": 1970, "user_id": 2206540, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7bdc5c6147d9514a0d3060594b7e21b3?s=128&d=identicon&r=PG", "display_name": "SuperManEver", "link": "https://stackoverflow.com/users/2206540/supermanever"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 31761984, "answer_count": 1, "score": 0, "last_activity_date": 1438433116, "creation_date": 1430321341, "question_id": 29948196, "link": "https://stackoverflow.com/questions/29948196/how-to-use-lazy-enumeration-to-control-processes", "title": "How to use Lazy enumeration to control processes?", "body": "<p>In his talk <a href=\"https://www.youtube.com/watch?v=5ZjwEPupybw\" rel=\"nofollow\">https://www.youtube.com/watch?v=5ZjwEPupybw</a> Pat Shaughnessy says that it's possible to use Lazy enumeration to control processes that you are not sure when they should end.</p>\n\n<p>I'm curious is it real or this is just some theoretical possibility of doing this?</p>\n\n<p>If you know any real world example or open source project please drop me link. If you have your own explanation/implementation please share it with me. I'm just curious, nothing more :-)</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 1, "creation_date": 1430321469, "post_id": 29948125, "comment_id": 48017382, "body": "not very sure what you meant there but you can make a Hash like this <code>{&quot;Bob&quot; =&gt; 1, &quot;Joe&quot; =&gt; 1, &quot;Tom&quot; =&gt; 1, ..}</code> and use <code>hash[key]</code> to get values"}, {"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 1, "creation_date": 1430324328, "post_id": 29948125, "comment_id": 48019317, "body": "So depending on a certain value you assign something into different variables? I have a strong feeling that this requires a bit higher-level refactoring that affects the code outside of the given snippet."}, {"owner": {"reputation": 37, "user_id": 4386980, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/12ca6960c637514bfa67e4e05090b5d4?s=128&d=identicon&r=PG&f=1", "display_name": "warchildx4", "link": "https://stackoverflow.com/users/4386980/warchildx4"}, "reply_to_user": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 0, "creation_date": 1430324678, "post_id": 29948125, "comment_id": 48019538, "body": "@D-side you might be right, I was just thinking that since in the end whichever variable gets picked it is equal to the same value there was some &quot;ruby magic&quot; way to do it"}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "reply_to_user": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 0, "creation_date": 1430324859, "post_id": 29948125, "comment_id": 48019643, "body": "Completely agree with @D-Side. This is definitely a case of an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">X-Y Problem</a>. Solving this as written will leave you with a poor overall solution."}, {"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 0, "creation_date": 1430325322, "post_id": 29948125, "comment_id": 48019920, "body": "Don&#39;t rush with filling your code with magic, okay? Sure, there are some magicians in the world of Ruby, but <a href=\"https://www.destroyallsoftware.com/talks/wat\" rel=\"nofollow noreferrer\">their tricks are often really dangerous</a>. Clear is better tham compact."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 4386980, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/12ca6960c637514bfa67e4e05090b5d4?s=128&d=identicon&r=PG&f=1", "display_name": "warchildx4", "link": "https://stackoverflow.com/users/4386980/warchildx4"}, "edited": false, "score": 0, "creation_date": 1430321709, "post_id": 29948305, "comment_id": 48017527, "body": "I made an update where I rename the variables getting set to 1 to make it clearer what im asking."}, {"owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "reply_to_user": {"reputation": 37, "user_id": 4386980, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/12ca6960c637514bfa67e4e05090b5d4?s=128&d=identicon&r=PG&f=1", "display_name": "warchildx4", "link": "https://stackoverflow.com/users/4386980/warchildx4"}, "edited": false, "score": 0, "creation_date": 1430322243, "post_id": 29948305, "comment_id": 48017878, "body": "@warchildx4 Ok, you can use this, but its not &quot;nice&quot;."}, {"owner": {"reputation": 37, "user_id": 4386980, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/12ca6960c637514bfa67e4e05090b5d4?s=128&d=identicon&r=PG&f=1", "display_name": "warchildx4", "link": "https://stackoverflow.com/users/4386980/warchildx4"}, "edited": false, "score": 0, "creation_date": 1430324031, "post_id": 29948305, "comment_id": 48019135, "body": "what about if instead of 1 it was a variable that is equal to an integer, so each time the a,b, or c are set to that value, i&#39;m updating my code to show what i mean."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1430376505, "post_id": 29948305, "comment_id": 48042130, "body": "The part before &quot;But...&quot; addresses a different question, so I would delete it. The part after does address the question. The use of <code>eval</code> is one way of doing what the OP wants to do in one line (or maybe three, if you count the creation of the hash and the initialization of the local variables, the latter being necessary, a point you should make). And why not <code>x = 1; eval(&quot;#{config[name]} = #{x.inspect}&quot;); c #=&gt;1</code> to conform with the question? (<code>inspect</code> is needed in case <code>x</code> is a string.) Improve you answer and you&#39;ll get my upvote."}, {"owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1430377555, "post_id": 29948305, "comment_id": 48042716, "body": "@CarySwoveland I remove the &quot;hash&quot; way, bcs you have right, its diferent question. But in your case is not needed the &#39;inspect&#39; method, bcs x is Fixnum not a string."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1430379409, "post_id": 29948305, "comment_id": 48043801, "body": "It&#39;s a minor point, but adding <code>inspect</code> does not limit applicability, but extends it to permit <code>x</code> to be a string. My reading of the question is that <code>x</code> could be any object, <code>x=1</code>being just an example."}], "tags": [], "owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "is_accepted": false, "score": 2, "last_activity_date": 1430377435, "last_edit_date": 1430377435, "creation_date": 1430321560, "answer_id": 29948305, "question_id": 29948125, "link": "https://stackoverflow.com/questions/29948125/refactor-a-ruby-switch-statement-when-each-case-evaluates-to-the-same-value/29948305#29948305", "title": "Refactor a Ruby switch statement when each case evaluates to the same value?", "body": "<p>In your case, you can use <code>eval</code> method, but its not \"nice way\" to do it.</p>\n\n<pre><code>name = \"Tom\"\n\na,b,c = [0]*3\nconfig = {\"Joe\" =&gt; \"a\", \"Bob\" =&gt; \"b\", \"Tom\" =&gt; \"c\"}\nx = 1\n\neval(\"#{config[name]}=#{x}\")\n\nputs a, b, c\n# =&gt; 0\n# =&gt; 0\n# =&gt; 1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 4386980, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/12ca6960c637514bfa67e4e05090b5d4?s=128&d=identicon&r=PG&f=1", "display_name": "warchildx4", "link": "https://stackoverflow.com/users/4386980/warchildx4"}, "edited": false, "score": 0, "creation_date": 1430323566, "post_id": 29948496, "comment_id": 48018844, "body": "problem is a,b,c already exist and continue to exist afterwards"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 37, "user_id": 4386980, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/12ca6960c637514bfa67e4e05090b5d4?s=128&d=identicon&r=PG&f=1", "display_name": "warchildx4", "link": "https://stackoverflow.com/users/4386980/warchildx4"}, "edited": false, "score": 1, "creation_date": 1430324138, "post_id": 29948496, "comment_id": 48019193, "body": "@warchildx4 You&#39;re asking about refactoring, and this is a perfectly valid suggestion. Having several variables like that is downright annoying if this sort of pattern emerges. Match your data structure to fit how you&#39;re using it, not the other way around."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1430374914, "post_id": 29948496, "comment_id": 48041263, "body": "The question is not whether the three given variables should be used. Nor does it ask for a better way to assign values to the variables than the use of the case statement shown.  It merely asks, &quot;what&#39;s the best way to refactor that in a one-liner?&quot;, which I interpret as the hypothetical quesrtion, &quot;can this be refactored as a one-liner?&quot;.  @Lucas is the only one to have addressed that question."}], "tags": [], "owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "is_accepted": false, "score": 0, "last_activity_date": 1430362214, "last_edit_date": 1430362214, "creation_date": 1430322045, "answer_id": 29948496, "question_id": 29948125, "link": "https://stackoverflow.com/questions/29948125/refactor-a-ruby-switch-statement-when-each-case-evaluates-to-the-same-value/29948496#29948496", "title": "Refactor a Ruby switch statement when each case evaluates to the same value?", "body": "<p>I wouldn't use separate variables <code>a</code>, <code>b</code>, and <code>c</code>, I'd create a <code>results</code> hash and store the target value in it by <code>name</code>:</p>\n\n<pre><code>results = {}\nresults[name] = x\n</code></pre>\n\n<p>and use the corresponding result in my later code.</p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 4386980, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/12ca6960c637514bfa67e4e05090b5d4?s=128&d=identicon&r=PG&f=1", "display_name": "warchildx4", "link": "https://stackoverflow.com/users/4386980/warchildx4"}, "edited": false, "score": 0, "creation_date": 1430324132, "post_id": 29949121, "comment_id": 48019190, "body": "there is a difference between a and b and each of them are attached to their respective string."}, {"owner": {"reputation": 1164, "user_id": 1288869, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/o0Ced.jpg?s=128&g=1", "display_name": "Tony DiNitto", "link": "https://stackoverflow.com/users/1288869/tony-dinitto"}, "reply_to_user": {"reputation": 37, "user_id": 4386980, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/12ca6960c637514bfa67e4e05090b5d4?s=128&d=identicon&r=PG&f=1", "display_name": "warchildx4", "link": "https://stackoverflow.com/users/4386980/warchildx4"}, "edited": false, "score": 0, "creation_date": 1430331604, "post_id": 29949121, "comment_id": 48023918, "body": "If you&#39;re having to do multiple declarations (eg. a=1, b=1, etc) as well as check for multiple conditions (eg. is <code>name</code> Tom? Bob? Etc?), you can start to feel that putting this all in one line is pretty messy. When you think of refactoring, you should be think of clearing/condensing logic and there&#39;s not a lot of logic here to condense."}], "tags": [], "owner": {"reputation": 1164, "user_id": 1288869, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/o0Ced.jpg?s=128&g=1", "display_name": "Tony DiNitto", "link": "https://stackoverflow.com/users/1288869/tony-dinitto"}, "is_accepted": false, "score": 0, "last_activity_date": 1430323806, "creation_date": 1430323806, "answer_id": 29949121, "question_id": 29948125, "link": "https://stackoverflow.com/questions/29948125/refactor-a-ruby-switch-statement-when-each-case-evaluates-to-the-same-value/29949121#29949121", "title": "Refactor a Ruby switch statement when each case evaluates to the same value?", "body": "<p>You may have trouble refactoring a case statement into one line, as all the other solutions you've seen thus far are definitely not one lines. </p>\n\n<p>If your true question is just how to refactor that code (as opposed to cramming it into a single line), then instantiating into a Hash like others have pointed out is going to be the way to go. You still need an <code>if</code> statement to pull the keys out of that Hash. So perhaps something like:</p>\n\n<pre><code>name = \"Tom\"\npeople = {\"Tom\" =&gt; 1, \"Bob\" =&gt; 1}\nif name == \"Tom\"\n  puts people.fetch(\"Tom\")   # Results in 1\nend \n</code></pre>\n\n<p>If everyone's name is going to be equal to <code>1</code> though, you could do something nasty like this:</p>\n\n<pre><code>if name == \"Tom\" || name == \"Bob\" || name == \"Harry\" then a = 1 end\n</code></pre>\n\n<p>Again, it's a tad unclear what you're looking to do otherwise you might get some better answers from us trying to help. Is there significance to the letter assignment though (eg. <code>a = 1</code> is needed vs <code>b = 1</code>)? If so, that might change the answer as well. </p>\n\n<p>Please clarify your question if this doesn't help you 100%.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1430375748, "creation_date": 1430375748, "answer_id": 29960645, "question_id": 29948125, "link": "https://stackoverflow.com/questions/29948125/refactor-a-ruby-switch-statement-when-each-case-evaluates-to-the-same-value/29960645#29960645", "title": "Refactor a Ruby switch statement when each case evaluates to the same value?", "body": "<p>I do not advocate the following, but you did ask if your case statement could be restated as a one-liner. This solution requires that <code>x</code> be neither <code>nil</code> nor <code>false</code>:</p>\n\n<pre><code>x = 1\n\nname = \"Bob\"\n(name==\"Bob\" &amp;&amp; a=x) || (name==\"Velma\" &amp;&amp; b=x) || (name==\"Luigi\" &amp;&amp; c=x)\na #=&gt; 1\nb #=&gt; nil\nc #=&gt; nil\n\nname = \"Velma\"\n(name==\"Bob\" &amp;&amp; a=x) || (name==\"Velma\" &amp;&amp; b=x) || (name==\"Luigi\" &amp;&amp; c=x)\na #=&gt; nil\nb #=&gt; 1\nc #=&gt; nil\n\nname = \"Luigi\"\n(name==\"Bob\" &amp;&amp; a=x) || (name==\"Velma\" &amp;&amp; b=x) || (name==\"Luigi\" &amp;&amp; c=x)\na #=&gt; nil\nb #=&gt; nil\nc #=&gt; 1\n\nname = \"Olivia\"\n(name==\"Bob\" &amp;&amp; a=x) || (name==\"Velma\" &amp;&amp; b=x) || (name==\"Luigi\" &amp;&amp; c=x)\na #=&gt; nil\nb #=&gt; nil\nc #=&gt; nil\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 4386980, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/12ca6960c637514bfa67e4e05090b5d4?s=128&d=identicon&r=PG&f=1", "display_name": "warchildx4", "link": "https://stackoverflow.com/users/4386980/warchildx4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 484, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1430377435, "creation_date": 1430321111, "last_edit_date": 1430324047, "question_id": 29948125, "link": "https://stackoverflow.com/questions/29948125/refactor-a-ruby-switch-statement-when-each-case-evaluates-to-the-same-value", "title": "Refactor a Ruby switch statement when each case evaluates to the same value?", "body": "<p>Suppose I have a Ruby switch statement like:</p>\n\n<pre><code>x = 1\n\ncase name\n   when \"Bob\"\n      a = x\n   when \"Joe\"\n      b = x\n   when \"Tom\"\n      c = x\n   ...\nend\n</code></pre>\n\n<p>what's the best way to refactor that in a one-liner?</p>\n\n<p>UPDATE: renamed the variables to make it clearer what I'm getting at.</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "sqlite"], "comments": [{"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1430320640, "post_id": 29947846, "comment_id": 48016754, "body": "its always better to post exact error trace than parsing it yourself."}, {"owner": {"reputation": 75, "user_id": 3192423, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c6dfa72d89b89b3709f751466f71e87f?s=128&d=identicon&r=PG&f=1", "display_name": "alexjs000", "link": "https://stackoverflow.com/users/3192423/alexjs000"}, "reply_to_user": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1430320971, "post_id": 29947846, "comment_id": 48017020, "body": "@shivam what do you mean by that exactly?"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 3192423, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c6dfa72d89b89b3709f751466f71e87f?s=128&d=identicon&r=PG&f=1", "display_name": "alexjs000", "link": "https://stackoverflow.com/users/3192423/alexjs000"}, "edited": false, "score": 0, "creation_date": 1430321921, "post_id": 29948035, "comment_id": 48017666, "body": "I&#39;ve only defined the various pages in StaticPagesController, other than that it&#39;s an empty. Do you mind showing a snippet of code about what you mean? thanks"}, {"owner": {"reputation": 829, "user_id": 3750152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b10e93a7a054b7102851af1ccbf587a?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Mulholand", "link": "https://stackoverflow.com/users/3750152/rob-mulholand"}, "reply_to_user": {"reputation": 75, "user_id": 3192423, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c6dfa72d89b89b3709f751466f71e87f?s=128&d=identicon&r=PG&f=1", "display_name": "alexjs000", "link": "https://stackoverflow.com/users/3192423/alexjs000"}, "edited": false, "score": 0, "creation_date": 1430322299, "post_id": 29948035, "comment_id": 48017925, "body": "edited the response to illustrate. Without initializing that variable in the <code>home</code> action on the <code>StaticPagesController</code>, the view for <code>static_pages&#47;home</code> has no way of knowing about it. (I&#39;ll bet your current code would work fine on the <code>data_base&#47;index</code> view)"}, {"owner": {"reputation": 75, "user_id": 3192423, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c6dfa72d89b89b3709f751466f71e87f?s=128&d=identicon&r=PG&f=1", "display_name": "alexjs000", "link": "https://stackoverflow.com/users/3192423/alexjs000"}, "edited": false, "score": 0, "creation_date": 1430326928, "post_id": 29948035, "comment_id": 48020968, "body": "Implemented the code you posted, unfortunately it still doesnt work. It does however return this error &quot;NameError in StaticPagesController#home&quot;. thanks for the help"}], "tags": [], "owner": {"reputation": 829, "user_id": 3750152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b10e93a7a054b7102851af1ccbf587a?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Mulholand", "link": "https://stackoverflow.com/users/3750152/rob-mulholand"}, "is_accepted": false, "score": 1, "last_activity_date": 1430322167, "last_edit_date": 1430322167, "creation_date": 1430320869, "answer_id": 29948035, "question_id": 29947846, "link": "https://stackoverflow.com/questions/29947846/nomethoderror-in-staticpageshome-when-attempting-to-list-database-query/29948035#29948035", "title": "NoMethodError in StaticPages#home when attempting to list database query", "body": "<p>The error means that <code>@data_bases</code> in your view is evaluating to nil. That makes sense, since the only way the view for <code>StaticPages#home</code> would have access to that variable is if it were set in the corresponding controller action (i.e. the <code>home</code> method on the <code>StaticPagesController</code>). Looks like you're only setting that variable on the <code>DataBaseController</code>.</p>\n\n<pre><code>class StaticPagesController &lt; ApplicationController\n\n  ...\n\n  def home\n    if params[:search]\n      @data_bases = Match.search(params[:search]).order(\"created_at DESC\")\n    else\n      @data_bases = Match.order(\"created_at DESC\")\n    end\n  end\n\n  ...\n\nend\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 3192423, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c6dfa72d89b89b3709f751466f71e87f?s=128&d=identicon&r=PG&f=1", "display_name": "alexjs000", "link": "https://stackoverflow.com/users/3192423/alexjs000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1430322167, "creation_date": 1430320439, "last_edit_date": 1430321780, "question_id": 29947846, "link": "https://stackoverflow.com/questions/29947846/nomethoderror-in-staticpageshome-when-attempting-to-list-database-query", "title": "NoMethodError in StaticPages#home when attempting to list database query", "body": "<p>Ruby noob here, I created a search form  and I am trying to query a db and display the results. I am getting NoMethodError in StaticPages#home \nalong with....\n/home/action/Projects/CodonCoderTest5/app/views/static_pages/home.html.erb where line #4 raised:</p>\n\n<p>undefined method `each' for nil:NilClass</p>\n\n<p>Where am I going wrong?</p>\n\n<p>layouts/StaticPages/home</p>\n\n<pre><code>&lt;h1&gt;StaticPages#home&lt;/h1&gt;\n&lt;% @data_bases.each do |list| %&gt;\n     &lt;div class=\"list\"&gt;\n         &lt;h1 class=\"list-mrnaCodon\"&gt;&lt;%= link_to list.mrnaCodon %&gt;&lt;/h1&gt;\n     &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>controller</p>\n\n<pre><code>class DataBaseController &lt; ApplicationController\n\n  def new\n  end\n\n  def index\n     if params[:search]\n         @data_bases = Match.search(params[:search]).order(\"created_at DESC\")\n     else\n         @data_bases = Match.order(\"created_at DESC\")\n     end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "google-compute-engine", "fog"], "comments": [{"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1430318805, "post_id": 29947107, "comment_id": 48015242, "body": "drop <code>-a</code> from <code>zone_name</code>. It should only be <code>us-central1</code>"}, {"owner": {"reputation": 403, "user_id": 4439275, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/jMuFE.jpg?s=128&g=1", "display_name": "Vijay", "link": "https://stackoverflow.com/users/4439275/vijay"}, "reply_to_user": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1430319003, "post_id": 29947107, "comment_id": 48015368, "body": "No, It still not working same error @shivam"}, {"owner": {"reputation": 6224, "user_id": 52283, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2adcab94830cc4abd3610984fbe5225c?s=128&d=identicon&r=PG", "display_name": "Matt Darby", "link": "https://stackoverflow.com/users/52283/matt-darby"}, "edited": false, "score": 1, "creation_date": 1430319317, "post_id": 29947107, "comment_id": 48015635, "body": "<code>disks is required for this operation (ArgumentError)</code> Seems you need to pass :disks arg?"}, {"owner": {"reputation": 403, "user_id": 4439275, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/jMuFE.jpg?s=128&g=1", "display_name": "Vijay", "link": "https://stackoverflow.com/users/4439275/vijay"}, "reply_to_user": {"reputation": 6224, "user_id": 52283, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2adcab94830cc4abd3610984fbe5225c?s=128&d=identicon&r=PG", "display_name": "Matt Darby", "link": "https://stackoverflow.com/users/52283/matt-darby"}, "edited": false, "score": 0, "creation_date": 1430320194, "post_id": 29947107, "comment_id": 48016410, "body": "can you give sample value for arg? @MattDarby"}, {"owner": {"reputation": 1022, "user_id": 3688311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DXDCL.jpg?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/3688311/george"}, "edited": false, "score": 0, "creation_date": 1430349397, "post_id": 29947107, "comment_id": 48033305, "body": "Everything looks fine, I believe you should add the following parameter in the end:   server.wait_for { ready? }  Another way to do it which is equivalent is using the following:  server = connection.servers.bootstrap"}], "answers": [{"comments": [{"owner": {"reputation": 403, "user_id": 4439275, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/jMuFE.jpg?s=128&g=1", "display_name": "Vijay", "link": "https://stackoverflow.com/users/4439275/vijay"}, "edited": false, "score": 0, "creation_date": 1430372682, "post_id": 29956973, "comment_id": 48040184, "body": "thanks a lot @Paul it is working. can you suggest any site where i can learn it."}, {"owner": {"reputation": 161, "user_id": 4848628, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_PbDJ_dqbaw/AAAAAAAAAAI/AAAAAAABAps/zAhk3vnNFgE/photo.jpg?sz=128", "display_name": "Paul Rossman", "link": "https://stackoverflow.com/users/4848628/paul-rossman"}, "reply_to_user": {"reputation": 403, "user_id": 4439275, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/jMuFE.jpg?s=128&g=1", "display_name": "Vijay", "link": "https://stackoverflow.com/users/4439275/vijay"}, "edited": false, "score": 1, "creation_date": 1430415282, "post_id": 29956973, "comment_id": 48068220, "body": "Take a look at the Fog repo <a href=\"https://github.com/fog/fog-google\" rel=\"nofollow noreferrer\">github.com/fog/fog-google</a>  In particular <a href=\"https://github.com/fog/fog-google/blob/master/lib/fog/google/models/compute/disk.rb\" rel=\"nofollow noreferrer\">github.com/fog/fog-google/blob/master/lib/fog/google/models/&zwnj;&#8203;&hellip;</a> and <a href=\"https://github.com/fog/fog-google/blob/master/lib/fog/google/models/compute/server.rb\" rel=\"nofollow noreferrer\">github.com/fog/fog-google/blob/master/lib/fog/google/models/&zwnj;&#8203;&hellip;</a>"}], "tags": [], "owner": {"reputation": 161, "user_id": 4848628, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_PbDJ_dqbaw/AAAAAAAAAAI/AAAAAAABAps/zAhk3vnNFgE/photo.jpg?sz=128", "display_name": "Paul Rossman", "link": "https://stackoverflow.com/users/4848628/paul-rossman"}, "is_accepted": true, "score": 4, "last_activity_date": 1430414922, "last_edit_date": 1430414922, "creation_date": 1430353765, "answer_id": 29956973, "question_id": 29947107, "link": "https://stackoverflow.com/questions/29947107/how-to-create-google-compute-engine-instance-using-fog-in-ruby/29956973#29956973", "title": "How To Create Google Compute Engine Instance Using Fog In Ruby", "body": "<p>First create a disk:</p>\n\n<pre><code>disk = connection.disks.create({\n  :name =&gt; \"my-disk\",\n  :zone_name =&gt; \"us-central1-a\",\n  :size_gb =&gt; 10,\n  :source_image =&gt; \"debian-7-wheezy-v20150325\"})\n</code></pre>\n\n<p>Next create the instance with that disk:</p>\n\n<pre><code>server = connection.servers.create({\n  :name =&gt; \"my-server\",\n  :machine_type =&gt; \"f1-micro\",\n  :zone_name =&gt; \"us-central1-a\",\n  :disks =&gt; [disk.get_as_boot_disk]})\n</code></pre>\n\n<p>Note you can attach multiple disks at instance creation.</p>\n"}], "owner": {"reputation": 403, "user_id": 4439275, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/jMuFE.jpg?s=128&g=1", "display_name": "Vijay", "link": "https://stackoverflow.com/users/4439275/vijay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 365, "favorite_count": 0, "accepted_answer_id": 29956973, "answer_count": 1, "score": 0, "last_activity_date": 1430414922, "creation_date": 1430318701, "question_id": 29947107, "link": "https://stackoverflow.com/questions/29947107/how-to-create-google-compute-engine-instance-using-fog-in-ruby", "title": "How To Create Google Compute Engine Instance Using Fog In Ruby", "body": "<p>I try with following code but i am getting error,</p>\n\n<pre><code>server = connection.servers.create({\n:name =&gt; \"instance-#{Time.now}\",\n:image_name =&gt; \"debian-7-wheezy-v20150325\",\n      :machine_type =&gt; \"f1-micro\",\n        :zone_name =&gt; \"us-central1-a\",         \n})\n\n/home/vijay/.rvm/gems/ruby-2.0.0-p598/gems/fog-core-1.30.0/lib/fog/core/attributes.rb:151:in `requires': disks is required for this operation (ArgumentError)\nfrom /home/vijay/.rvm/gems/ruby-2.0.0-p598/gems/fog-1.29.0/lib/fog/google/models/compute/server.rb:218:in `save'\nfrom /home/vijay/.rvm/gems/ruby-2.0.0-p598/gems/fog-core-1.30.0/lib/fog/core/collection.rb:51:in `create'\nfrom google_compute_engine.rb:11:in `&lt;main&gt;'\n</code></pre>\n\n<p>I think i am missing some parameter which is required, can someone help me to solve this problem.</p>\n"}, {"tags": ["android", "ruby", "windows", "calabash"], "comments": [{"owner": {"reputation": 678, "user_id": 4547279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19aa46d010bcaf787ea016bc411627b4?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias", "link": "https://stackoverflow.com/users/4547279/tobias"}, "edited": false, "score": 1, "creation_date": 1430323835, "post_id": 29946560, "comment_id": 48018994, "body": "add -v to run with debug information."}, {"owner": {"reputation": 97, "user_id": 2014048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4f97b2b431286b970d4a65c192645b46?s=128&d=identicon&r=PG", "display_name": "Ottenira", "link": "https://stackoverflow.com/users/2014048/ottenira"}, "reply_to_user": {"reputation": 678, "user_id": 4547279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19aa46d010bcaf787ea016bc411627b4?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias", "link": "https://stackoverflow.com/users/4547279/tobias"}, "edited": false, "score": 0, "creation_date": 1430384569, "post_id": 29946560, "comment_id": 48047039, "body": "Edited and added debug information."}, {"owner": {"reputation": 678, "user_id": 4547279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19aa46d010bcaf787ea016bc411627b4?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias", "link": "https://stackoverflow.com/users/4547279/tobias"}, "edited": false, "score": 0, "creation_date": 1430388318, "post_id": 29946560, "comment_id": 48049538, "body": "Do you have a file .calabash_settings or calabash_settings in your directory?"}, {"owner": {"reputation": 97, "user_id": 2014048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4f97b2b431286b970d4a65c192645b46?s=128&d=identicon&r=PG", "display_name": "Ottenira", "link": "https://stackoverflow.com/users/2014048/ottenira"}, "reply_to_user": {"reputation": 678, "user_id": 4547279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19aa46d010bcaf787ea016bc411627b4?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias", "link": "https://stackoverflow.com/users/4547279/tobias"}, "edited": false, "score": 0, "creation_date": 1430389423, "post_id": 29946560, "comment_id": 48050161, "body": "Yes, .calabash_settings file is on the root of my project (BDD-Calabash-Example-master)."}, {"owner": {"reputation": 2440, "user_id": 2047304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fcea18e8fa7f6f5016b38ac97be13f7?s=128&d=identicon&r=PG", "display_name": "jmoody", "link": "https://stackoverflow.com/users/2047304/jmoody"}, "edited": false, "score": 1, "creation_date": 1430488741, "post_id": 29946560, "comment_id": 48095741, "body": "I recommend updating your ruby version to the latest."}, {"owner": {"reputation": 725, "user_id": 5023800, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/UPKGE.jpg?s=128&g=1", "display_name": "Muneer Muhammed", "link": "https://stackoverflow.com/users/5023800/muneer-muhammed"}, "edited": false, "score": 0, "creation_date": 1459833511, "post_id": 29946560, "comment_id": 60450275, "body": "Hi Ottenira, How have you fixed the first issue?"}], "owner": {"reputation": 97, "user_id": 2014048, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4f97b2b431286b970d4a65c192645b46?s=128&d=identicon&r=PG", "display_name": "Ottenira", "link": "https://stackoverflow.com/users/2014048/ottenira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1240, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1430983540, "creation_date": 1430317391, "last_edit_date": 1430983540, "question_id": 29946560, "link": "https://stackoverflow.com/questions/29946560/calabash-error-could-not-list-certificates-in-keystore-probably-because-the-pa", "title": "Calabash error. Could not list certificates in keystore. Probably because the pass was incorrect. (RuntimeError)", "body": "<p>I've got this problem when I type </p>\n\n<blockquote>\n  <p>calabash-android run binary\\app-debug.apk features\\my_first.feature</p>\n</blockquote>\n\n<p>on command line in Windows over my project.</p>\n\n<p>This is the problem:</p>\n\n<blockquote>\n  <p>C:/Ruby193/lib/ruby/gems/1.9.1/gems/calabash-android-0.5.9.pre2/lib/calabash-android/java_keystore.rb:32:in 'initialize': Could not list certificates in keystore. Probably because the password was incorrect. (RuntimeError)</p>\n</blockquote>\n\n<p>I don't know what it's happening because I set before the password android and the keystore androiddebugkey.</p>\n\n<p>Anyone knows it? Thanks!</p>\n\n<p>PS: I'm using Windows OS 8.</p>\n\n<p>Update 04/30.</p>\n\n<p>Here is debug information:</p>\n\n<blockquote>\n  <p>JDK fount at: C:\\Program Files (x86)\\Java\\jdk1.7.0_79\n  Android sdk found at: C:\\Users\\MyUser\\android-sdk\n  No test server found for this combination of app and calabash version. Recreating test server.</p>\n  \n  <p>Signature files:\n  C:/Users/MyUser/AppData/Local/Temp/d20150430-8916-1taiq7r/META-INF/CERT.RSA\n  \"C:\\Program Files (x86)\\Java\\jdk1.7.0_79/bin/keytool.exe\" -v -printcert -J\"-Dfile.encoding=utf-8\" -file \"C:/Users/MyUser/AppData/Local/Temp/d20150430-8916-1taiq7r/META-INF/CERT.RSA\"\n  MD5 fingerprint for signing cert : FB:3E:80:4F:A2:91:51:59:02:E5:8E:BB:7F:C9:30:EC\n  C:/Users/MyUser/BDD-Calabash-Example-master/binary/app-debug.apk was signed with a certificate with fingerprint FB:3E:80:4F:A2:91:51:59:02:E5:8E:BB:7F:C9:30:EC\n  Keystore location specified in .calabash_settings.\n  Reading keystore data from keystore file 'C:/Users/MyData/.android'\n  \"C:\\Program Files (x86)\\Java\\jdk1.7.0_79/bin/keytool.exe\" -list -v -alias androiddebugkey -keystore C:/Users/MyUser/.android -storepass android \"-J\"-Dfile.econding=utf-8\"\"\n  Could not list certificates in keystore. Probably because the pass was incorrect.\n  C:/Ruby193/lib/ruby/gems/1.9.1/gems/calabash-android-0.5.9.pre2/lib/calabash-android/java_keystore.rb:32:in 'initialize': Could not list certificates in keystore. Probably because the password was incorrect. (RuntimeError)</p>\n</blockquote>\n\n<p>EDIT 1 (Apr, 30)</p>\n\n<p>Ok, </p>\n\n<p>so I solved a problem and I got a new one.</p>\n\n<p>I added to my .calabash_settings the debug.keystore to my path and passed. But the new problem is</p>\n\n<blockquote>\n  <p>C:/Ruby193/lib/ruby/gems/1.9.1/gems/calabash-android-0.5.9.pre2/lib/calabash-android/java_keystore.rb:180:in 'extract_signature_algorithm_name': No signature algorithm names found. (RuntimeError)</p>\n</blockquote>\n\n<p>Maybe here the problem is that I changed some values in the owner as CN, OU, L, etc, and issuing. How can I change that? I've seen that CN should be Android, not me...</p>\n\n<p>Thanks!</p>\n\n<p>EDIT 2 (May, 1)</p>\n\n<p>I change the debug.keystore with</p>\n\n<blockquote>\n  <p>keytool -genkey -v -keystore debug.keystore -alias androiddebugkey -storepass android -keypass android -keyalg RSA -validity 14000</p>\n</blockquote>\n\n<p>but I've still got the same problem.</p>\n\n<blockquote>\n  <p>C:/Ruby193/lib/ruby/gems/1.9.1/gems/calabash-android-0.5.9.pre2/lib/calabash-android/java_keystore.rb:180:in 'extract_signature_algorithm_name': No signature algorithm names found. (RuntimeError)</p>\n</blockquote>\n\n<pre><code>Alias name: androiddebugkey\nCreation date: apr-23-2015\nEntry type: PrivateKeyEntry\nCertificate chain length: 1\nCertificate[1]:\nOwner: CN=Android Debug, O=Android, C=US\nIssuer: CN=Android Debug, O=Android, C=US\nSerial number: 413942db\nValid from: Thu Apr 23 12:12:36 CEST 2015 until: Thu Aug 23 12:12:36 CEST 2045\nCertificate fingerprints:\n     MD5:  63:F8:A9:3F:F0:79:1E:A9:6B:9C:B9:AC:EC:6D:66:9B\n     SHA1: 3A:BA:29:68:56:29:3E:26:30:E6:B4:2F:24:7A:B1:21:D4:D8:5D:40\n     SHA256: 35:89:63:3F:7B:AB:C4:88:DE:B5:40:BE:DF:D1:F7:9F:ED:4B:73:5C:D1:02:B1:69:7D:29:91:84:48:28:2D:46\n     Signature algorithm name: SHA256withRSA\n</code></pre>\n\n<p>Any idea?</p>\n\n<p>EDIT 3 (May, 7).</p>\n\n<p>Solved updating gems with administrator privileges (typed on command line):</p>\n\n<pre><code>gem update --system\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "acts-as-taggable-on"], "answers": [{"comments": [{"owner": {"reputation": 1895, "user_id": 2576839, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/ShO0a.jpg?s=128&g=1", "display_name": "GhostRider", "link": "https://stackoverflow.com/users/2576839/ghostrider"}, "edited": false, "score": 0, "creation_date": 1430321572, "post_id": 29947909, "comment_id": 48017447, "body": "No luck, not sure that should make a difference as the variable is declared but could be wrong (and probably am!)"}, {"owner": {"reputation": 829, "user_id": 3750152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b10e93a7a054b7102851af1ccbf587a?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Mulholand", "link": "https://stackoverflow.com/users/3750152/rob-mulholand"}, "reply_to_user": {"reputation": 1895, "user_id": 2576839, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/ShO0a.jpg?s=128&g=1", "display_name": "GhostRider", "link": "https://stackoverflow.com/users/2576839/ghostrider"}, "edited": false, "score": 0, "creation_date": 1430321792, "post_id": 29947909, "comment_id": 48017576, "body": "You said a user has many microposts and has many responses - does that mean a user has many responses, or a user has many microposts and a micropost has many responses? Your code looks like it&#39;s assuming the latter, but if it&#39;s the former that complicates matters (you&#39;d want to construct a relationship between microposts and responses so you could check if the micropost a response belongs to has a particular tag)."}, {"owner": {"reputation": 1895, "user_id": 2576839, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/ShO0a.jpg?s=128&g=1", "display_name": "GhostRider", "link": "https://stackoverflow.com/users/2576839/ghostrider"}, "edited": false, "score": 0, "creation_date": 1430321877, "post_id": 29947909, "comment_id": 48017637, "body": "User has many microposts and has many responses. Micropost belongs to a user and has many responses. Response belongs to a user and belongs to a micropost."}], "tags": [], "owner": {"reputation": 829, "user_id": 3750152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b10e93a7a054b7102851af1ccbf587a?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Mulholand", "link": "https://stackoverflow.com/users/3750152/rob-mulholand"}, "is_accepted": false, "score": 0, "last_activity_date": 1430320579, "creation_date": 1430320579, "answer_id": 29947909, "question_id": 29946251, "link": "https://stackoverflow.com/questions/29946251/how-can-i-get-all-the-responses-by-a-particular-user-to-posts-on-a-particular-to/29947909#29947909", "title": "How can I get all the responses by a particular user to posts on a particular topic", "body": "<p>If all of the components are working independently, it might be as simple as adding a line to the end of your method: <code>responses</code>. After the <code>.each</code> loop executes, it returns the original array (not the value you modified within the loop). Since you want to return the number stored in <code>responses</code>, you want that variable to be the last line of your method.</p>\n"}, {"tags": [], "owner": {"reputation": 1163, "user_id": 1826058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4182d58570b11f50ad0baf667b80300?s=128&d=identicon&r=PG", "display_name": "kaspernj", "link": "https://stackoverflow.com/users/1826058/kaspernj"}, "is_accepted": false, "score": 0, "last_activity_date": 1430328947, "creation_date": 1430328947, "answer_id": 29950709, "question_id": 29946251, "link": "https://stackoverflow.com/questions/29946251/how-can-i-get-all-the-responses-by-a-particular-user-to-posts-on-a-particular-to/29950709#29950709", "title": "How can I get all the responses by a particular user to posts on a particular topic", "body": "<p>You should be able to do the count in a single query like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>microposts.tagged_with(tag, on: :tags).joins(:responses).where(responses: {user_id: id}).count\n</code></pre>\n"}], "owner": {"reputation": 1895, "user_id": 2576839, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/ShO0a.jpg?s=128&g=1", "display_name": "GhostRider", "link": "https://stackoverflow.com/users/2576839/ghostrider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1430332453, "creation_date": 1430316585, "last_edit_date": 1430332453, "question_id": 29946251, "link": "https://stackoverflow.com/questions/29946251/how-can-i-get-all-the-responses-by-a-particular-user-to-posts-on-a-particular-to", "title": "How can I get all the responses by a particular user to posts on a particular topic", "body": "<p>I have a user, a micropost and a response model.</p>\n\n<p>The user has many microposts and has many responses.</p>\n\n<p>Microposts have tags using the acts as taggable gem. </p>\n\n<p>I need to find the number of responses a user has, to microposts that are tagged with a specific tag. To be clear, for example, how many responses has user 1 given to microposts on \"exercise\"</p>\n\n<p>There is some basic ruby syntax and relationship logic I am missing. This is what I haev in my user model.  </p>\n\n<pre><code>  def user_responses_on_topic tag\n      microposts = self.microposts.tagged_with(tag, :on =&gt; :tags)\n      responses_count = 0\n      microposts.each do |micropost|\n          count = micropost.responses.where(\"user_id = :user_id\", user_id: self.id).size\n          responses_count  = responses_count + count\n     end\n   end\n</code></pre>\n\n<p>Its giving me a value but I know its wrong because when I add responses on a particular topic the users value doesn't increase. </p>\n\n<p>I am sure there is a simple \"ruby\" way to get at this using</p>\n\n<pre><code>   responses = user.microposts.responses \n</code></pre>\n\n<p>But I need to know how to get the tagged logic on microposts into this code</p>\n\n<p>I have tightened it up a bit but still not luck. The individual components of this code work but I can't get the whole thing to work together</p>\n\n<pre><code> def user_responses_on_topic(interest)\n    microposts = Micropost.tagged_with(interest, :on =&gt; :tags, :any =&gt; true)\n    responses ||= 0\n    microposts.each do |micropost|\n    responses += micropost.responses.where(\"user_id = :user_id\", user_id: self.id).size\n   end\n end\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>This works</p>\n\n<pre><code>def user_responses_on_topic(interest)\n   microposts = Micropost.tagged_with(interest, :on =&gt; :tags, :any =&gt; true)\n   count = 0\n     microposts.each do |micropost|\n     responses = micropost.responses.size\n     count = count + responses\n    end\n   count\nend\n</code></pre>\n\n<p>But there's got to be a better Rails way (this smells of PHP)</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-i18n", "i18n-gem"], "comments": [{"owner": {"reputation": 6584, "user_id": 1831520, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/QFRGt.jpg?s=128&g=1", "display_name": "sadaf2605", "link": "https://stackoverflow.com/users/1831520/sadaf2605"}, "edited": false, "score": 0, "creation_date": 1430318384, "post_id": 29946233, "comment_id": 48014897, "body": "remove <code>locale: &#47;en|de&#47;</code> from your route and try again."}, {"owner": {"reputation": 15, "user_id": 4846489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c47f63dbb1916a005b5c17448506221?s=128&d=identicon&r=PG&f=1", "display_name": "derDaywalker", "link": "https://stackoverflow.com/users/4846489/derdaywalker"}, "reply_to_user": {"reputation": 6584, "user_id": 1831520, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/QFRGt.jpg?s=128&g=1", "display_name": "sadaf2605", "link": "https://stackoverflow.com/users/1831520/sadaf2605"}, "edited": false, "score": 0, "creation_date": 1430320104, "post_id": 29946233, "comment_id": 48016335, "body": "@sadaf2605 unfortunately this has no effect, I still get the error."}, {"owner": {"reputation": 4416, "user_id": 2552259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6d74162f339b5acd772d3f5dadaa8ea?s=128&d=identicon&r=PG", "display_name": "Jorge de los Santos", "link": "https://stackoverflow.com/users/2552259/jorge-de-los-santos"}, "edited": false, "score": 0, "creation_date": 1430321256, "post_id": 29946233, "comment_id": 48017247, "body": "Paste the form creating the request. Looks like you are passing wrong parameters."}, {"owner": {"reputation": 15, "user_id": 4846489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c47f63dbb1916a005b5c17448506221?s=128&d=identicon&r=PG&f=1", "display_name": "derDaywalker", "link": "https://stackoverflow.com/users/4846489/derdaywalker"}, "reply_to_user": {"reputation": 4416, "user_id": 2552259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6d74162f339b5acd772d3f5dadaa8ea?s=128&d=identicon&r=PG", "display_name": "Jorge de los Santos", "link": "https://stackoverflow.com/users/2552259/jorge-de-los-santos"}, "edited": false, "score": 0, "creation_date": 1430322534, "post_id": 29946233, "comment_id": 48018101, "body": "@JorgedelosSantos with byebug I could narrow it down to this command: <code>plan_state = PlanState.create( plan_id: @plan.id, state: state, user_id: current_user.id)</code>"}, {"owner": {"reputation": 4416, "user_id": 2552259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6d74162f339b5acd772d3f5dadaa8ea?s=128&d=identicon&r=PG", "display_name": "Jorge de los Santos", "link": "https://stackoverflow.com/users/2552259/jorge-de-los-santos"}, "edited": false, "score": 1, "creation_date": 1430323276, "post_id": 29946233, "comment_id": 48018640, "body": "The problem is in the params, (No route matches {:action=&gt;&quot;edit&quot;, :controller=&gt;&quot;plans&quot;, :format=&gt;nil, :id=&gt;nil, :locale=&gt;115}). Your form is sending the id as nil, and the locale as the id. You need to paste the form code."}, {"owner": {"reputation": 15, "user_id": 4846489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c47f63dbb1916a005b5c17448506221?s=128&d=identicon&r=PG&f=1", "display_name": "derDaywalker", "link": "https://stackoverflow.com/users/4846489/derdaywalker"}, "reply_to_user": {"reputation": 4416, "user_id": 2552259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6d74162f339b5acd772d3f5dadaa8ea?s=128&d=identicon&r=PG", "display_name": "Jorge de los Santos", "link": "https://stackoverflow.com/users/2552259/jorge-de-los-santos"}, "edited": false, "score": 0, "creation_date": 1430758890, "post_id": 29946233, "comment_id": 48187252, "body": "@JorgedelosSantos I hope my edit helps a little bit in order to solve the problem."}, {"owner": {"reputation": 4416, "user_id": 2552259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6d74162f339b5acd772d3f5dadaa8ea?s=128&d=identicon&r=PG", "display_name": "Jorge de los Santos", "link": "https://stackoverflow.com/users/2552259/jorge-de-los-santos"}, "edited": false, "score": 0, "creation_date": 1430768014, "post_id": 29946233, "comment_id": 48192819, "body": "run <code>rake routes</code> in a terminal and paste the <code>edit_plan_url</code>. But I think you need more parameters into the path helper."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 4846489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c47f63dbb1916a005b5c17448506221?s=128&d=identicon&r=PG&f=1", "display_name": "derDaywalker", "link": "https://stackoverflow.com/users/4846489/derdaywalker"}, "edited": false, "score": 0, "creation_date": 1430834177, "post_id": 30038606, "comment_id": 48224577, "body": "Regarding putting I18n.locale inside the call: This is an option, but the question is, why is this necessary. Because I thought that the task is done in default_url_options (within the application_controller). And this is working for many cases. My problem of doing this is, that I don&#39;t know the complete code. And if I fix this for this two cases, there may be ten more, which I don&#39;t know. Thus I thought, that I18n does it in a general way via default_url_options."}, {"owner": {"reputation": 4416, "user_id": 2552259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6d74162f339b5acd772d3f5dadaa8ea?s=128&d=identicon&r=PG", "display_name": "Jorge de los Santos", "link": "https://stackoverflow.com/users/2552259/jorge-de-los-santos"}, "reply_to_user": {"reputation": 15, "user_id": 4846489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c47f63dbb1916a005b5c17448506221?s=128&d=identicon&r=PG&f=1", "display_name": "derDaywalker", "link": "https://stackoverflow.com/users/4846489/derdaywalker"}, "edited": false, "score": 0, "creation_date": 1430835863, "post_id": 30038606, "comment_id": 48225936, "body": "Why are you using: edit_plan_url instead of edit_plan_path? Did you rename your routes?"}, {"owner": {"reputation": 15, "user_id": 4846489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c47f63dbb1916a005b5c17448506221?s=128&d=identicon&r=PG&f=1", "display_name": "derDaywalker", "link": "https://stackoverflow.com/users/4846489/derdaywalker"}, "edited": false, "score": 0, "creation_date": 1430836764, "post_id": 30038606, "comment_id": 48226678, "body": "This is not my code. I didn&#39;t changed anything regarding this piece of code, so I don&#39;t know why edit_plan_url is used instead of edit_plan_path. I think edit_plan_url is used, because the link is send via mail. My goal is to use that code, but to &quot;implement&quot; internationalization. We want to use this open source tool, but with a different language. If I&#39;m done with internationalization, I will provide the authors the &quot;new feature&quot;."}, {"owner": {"reputation": 4416, "user_id": 2552259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6d74162f339b5acd772d3f5dadaa8ea?s=128&d=identicon&r=PG", "display_name": "Jorge de los Santos", "link": "https://stackoverflow.com/users/2552259/jorge-de-los-santos"}, "reply_to_user": {"reputation": 15, "user_id": 4846489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c47f63dbb1916a005b5c17448506221?s=128&d=identicon&r=PG&f=1", "display_name": "derDaywalker", "link": "https://stackoverflow.com/users/4846489/derdaywalker"}, "edited": false, "score": 0, "creation_date": 1430836900, "post_id": 30038606, "comment_id": 48226781, "body": "But are you able to change the _url with _path? does it work?"}, {"owner": {"reputation": 15, "user_id": 4846489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c47f63dbb1916a005b5c17448506221?s=128&d=identicon&r=PG&f=1", "display_name": "derDaywalker", "link": "https://stackoverflow.com/users/4846489/derdaywalker"}, "edited": false, "score": 0, "creation_date": 1430837571, "post_id": 30038606, "comment_id": 48227386, "body": "Unfortunatelly it does not work (I just call <code>rake assets:precompile</code>, I hope this is enough). If I just use <code>edit_plan_path(@vars[:plan])</code>, then I get the same no route matches error. If I add <code>edit_plan_path(&quot;xy&quot;,@vars[:plan])</code> I don&#39;t get the error."}, {"owner": {"reputation": 4416, "user_id": 2552259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6d74162f339b5acd772d3f5dadaa8ea?s=128&d=identicon&r=PG", "display_name": "Jorge de los Santos", "link": "https://stackoverflow.com/users/2552259/jorge-de-los-santos"}, "reply_to_user": {"reputation": 15, "user_id": 4846489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c47f63dbb1916a005b5c17448506221?s=128&d=identicon&r=PG&f=1", "display_name": "derDaywalker", "link": "https://stackoverflow.com/users/4846489/derdaywalker"}, "edited": false, "score": 0, "creation_date": 1430838471, "post_id": 30038606, "comment_id": 48228140, "body": "Use a named hash when passing the parameter: edit_plan_url(id: @vars[:plan].id)."}, {"owner": {"reputation": 15, "user_id": 4846489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c47f63dbb1916a005b5c17448506221?s=128&d=identicon&r=PG&f=1", "display_name": "derDaywalker", "link": "https://stackoverflow.com/users/4846489/derdaywalker"}, "edited": false, "score": 0, "creation_date": 1430840857, "post_id": 30038606, "comment_id": 48229975, "body": "Nice, if I use the &quot;named hash&quot; for <code>edit_user_url</code> and <code>edit_user_url(id: @vars[:user].id)</code> it works!! Why is that? Is this a programming issue of the original code? Do I have to search the complete code for url&#39;s without a named hash?               By the way: Because of your question I noticed, that I have changed the code for edit_user_url. Originally it was <code>edit_user_url(@vars[:user])</code>, but last week I changed it to <code>edit_user_url(@vars[:user].id)</code> and forgot the undo it..."}, {"owner": {"reputation": 4416, "user_id": 2552259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6d74162f339b5acd772d3f5dadaa8ea?s=128&d=identicon&r=PG", "display_name": "Jorge de los Santos", "link": "https://stackoverflow.com/users/2552259/jorge-de-los-santos"}, "reply_to_user": {"reputation": 15, "user_id": 4846489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c47f63dbb1916a005b5c17448506221?s=128&d=identicon&r=PG&f=1", "display_name": "derDaywalker", "link": "https://stackoverflow.com/users/4846489/derdaywalker"}, "edited": false, "score": 0, "creation_date": 1430844402, "post_id": 30038606, "comment_id": 48232259, "body": "I told you to name the params in my answer! Is it working then? Regards."}, {"owner": {"reputation": 15, "user_id": 4846489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c47f63dbb1916a005b5c17448506221?s=128&d=identicon&r=PG&f=1", "display_name": "derDaywalker", "link": "https://stackoverflow.com/users/4846489/derdaywalker"}, "edited": false, "score": 0, "creation_date": 1430906914, "post_id": 30038606, "comment_id": 48260818, "body": "yes, as I already wrote. It&#39;s working if I use <code>edit_user_url(id: @vars[:user].id)</code>. But the question is, why is this necessary and do I have to do this for all URL&#39;s, not only for edit_.._url?"}, {"owner": {"reputation": 4416, "user_id": 2552259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6d74162f339b5acd772d3f5dadaa8ea?s=128&d=identicon&r=PG", "display_name": "Jorge de los Santos", "link": "https://stackoverflow.com/users/2552259/jorge-de-los-santos"}, "reply_to_user": {"reputation": 15, "user_id": 4846489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c47f63dbb1916a005b5c17448506221?s=128&d=identicon&r=PG&f=1", "display_name": "derDaywalker", "link": "https://stackoverflow.com/users/4846489/derdaywalker"}, "edited": false, "score": 0, "creation_date": 1430914746, "post_id": 30038606, "comment_id": 48266281, "body": "This seems to be because you added a () wrapper around the :locale param, and then ruby is using it as an optional param instead of mandatory. removing the () might fix it or not. But that&#39;s a different question. The original one: how to fix it, seems to be answered. Feel free to upvote, mark or drink a beer on me."}, {"owner": {"reputation": 15, "user_id": 4846489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c47f63dbb1916a005b5c17448506221?s=128&d=identicon&r=PG&f=1", "display_name": "derDaywalker", "link": "https://stackoverflow.com/users/4846489/derdaywalker"}, "edited": false, "score": 0, "creation_date": 1430916670, "post_id": 30038606, "comment_id": 48267819, "body": "It would be perfect if you edit your post to include the named hash. Then I will mark it as solution, because I can&#39;t mark your comment as solution. Once again, thx for your support and your solution!"}, {"owner": {"reputation": 4416, "user_id": 2552259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6d74162f339b5acd772d3f5dadaa8ea?s=128&d=identicon&r=PG", "display_name": "Jorge de los Santos", "link": "https://stackoverflow.com/users/2552259/jorge-de-los-santos"}, "reply_to_user": {"reputation": 15, "user_id": 4846489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c47f63dbb1916a005b5c17448506221?s=128&d=identicon&r=PG&f=1", "display_name": "derDaywalker", "link": "https://stackoverflow.com/users/4846489/derdaywalker"}, "edited": false, "score": 0, "creation_date": 1430917011, "post_id": 30038606, "comment_id": 48268094, "body": "It was in the last part, but I&#39;ve cleared the answer."}], "tags": [], "owner": {"reputation": 4416, "user_id": 2552259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6d74162f339b5acd772d3f5dadaa8ea?s=128&d=identicon&r=PG", "display_name": "Jorge de los Santos", "link": "https://stackoverflow.com/users/2552259/jorge-de-los-santos"}, "is_accepted": true, "score": 0, "last_activity_date": 1430916958, "last_edit_date": 1430916958, "creation_date": 1430768471, "answer_id": 30038606, "question_id": 29946233, "link": "https://stackoverflow.com/questions/29946233/rails-i18n-wrong-parameter-order-in-route-id-as-locale-and-id-is-nil/30038606#30038606", "title": "rails I18n wrong parameter order in route (id as locale and id is nil)", "body": "<p>Looks like your routes are expecting two params, and ordering it as it comes. There's a way to avoid it by using a named hash into the params passed:</p>\n\n<pre><code>edit_plan_url(id: @vars[:plan].id)\n</code></pre>\n\n<p>The Rails Automagic will use the symbol to identify the param and avoid the problem.</p>\n"}], "owner": {"reputation": 15, "user_id": 4846489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c47f63dbb1916a005b5c17448506221?s=128&d=identicon&r=PG&f=1", "display_name": "derDaywalker", "link": "https://stackoverflow.com/users/4846489/derdaywalker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 609, "favorite_count": 0, "accepted_answer_id": 30038606, "answer_count": 1, "score": 0, "last_activity_date": 1477973403, "creation_date": 1430316548, "last_edit_date": 1430758801, "question_id": 29946233, "link": "https://stackoverflow.com/questions/29946233/rails-i18n-wrong-parameter-order-in-route-id-as-locale-and-id-is-nil", "title": "rails I18n wrong parameter order in route (id as locale and id is nil)", "body": "<p>I want to internationalize an external code (see <a href=\"https://github.com/CDLUC3/dmptool\" rel=\"nofollow\" title=\"DMPTool\">github</a>) with i18n for rails. I have read the guide for <a href=\"http://guides.rubyonrails.org/i18n.html\" rel=\"nofollow\" title=\"Guidline for i18n\">Rails Internationalization (I18n) API</a>. Translating the text is not a problem, but the underlying code seems not to work properly anymore in all situations. Unfortunately, I'm not a rails/ruby expert. </p>\n\n<p>From the log:</p>\n\n<blockquote>\n  <p>FATAL -- : ActionView::Template::Error (No route matches\n  {:action=>\"edit\", :controller=>\"plans\", :format=>nil, :id=>nil,\n  :locale=>115} missing required keys: [:id]):</p>\n</blockquote>\n\n<p>So the problem is, that the parameter for the id (=115) is passed as locale instead as id. </p>\n\n<p>To get i18n working I added the following code into app/controllers/application_controller.rb:</p>\n\n<pre><code>...\n  before_action :set_locale\n\n  protected\n\n  def set_locale\n    I18n.locale = params[:locale] || I18n.default_locale\n  end\n\n  def default_url_options(options = {})\n    { locale: I18n.locale }.merge options\n  end\n...\n</code></pre>\n\n<p>Moreover, I wrapped the original routes in config/routes.rb:</p>\n\n<pre><code>Dmptool2::Application.routes.draw do\n  scope \"(:locale)\", locale: /en|de/ do\n    a lot of original routes\n  end\nend\n</code></pre>\n\n<p>Therefore, the question is, is there a missing route or is there a problem inside the code or is it just my fault. Besides translating text and buttons, I haven't changed the original code. The original routes.rb can be found on github (sry, I can't post the link because I don't have enough reputation).\nAny suggestions / help would be perfect.</p>\n\n<p><strong>Edit</strong>\nI think I'm a little bit closer. Maybe now it's more clear, why it isn't working.\nFirst of all the \"full\" stacktrace:</p>\n\n<pre><code>F, [2015-05-04T16:43:58.600384 #19289] FATAL -- : \nActionView::Template::Error (No route matches {:action=&gt;\"edit\", :controller=&gt;\"plans\", :format=&gt;nil, :id=&gt;nil, :locale=&gt;#&lt;Plan id: 158, name: \"asdfe\", requirements_template_id: 59, solicitation_identifier: \"\",\n submission_deadline: nil, visibility: :public, created_at: \"2015-05-04 14:41:33\", updated_at: \"2015-05-04 14:43:48\", current_plan_state_id: 300&gt;} missing required keys: [:id]):\n    2: \n    3: The plan \"&lt;%= @vars[:plan].name %&gt;\" has been completed.\n    4: \n    5: If you have questions pertaining to this action, please visit the DMP Overview page at &lt;%= edit_plan_url(@vars[:plan]) %&gt;\n    6: \n    7: &lt;%= render :partial =&gt; 'users_mailer/notification_boilerplate.text.erb' %&gt;\n  app/views/users_mailer/dmp_owners_and_co_committed.text.erb:5:in `_app_views_users_mailer_dmp_owners_and_co_committed_text_erb__754483862330985648_69917281861000'\n  app/mailers/users_mailer.rb:32:in `notification'\n  app/models/concerns/plan_email.rb:50:in `block in email_dmp_saved'\n  app/models/concerns/plan_email.rb:49:in `email_dmp_saved'\n  app/models/plan_state.rb:31:in `update_current_plan_state'\n  app/controllers/plan_states_controller.rb:97:in `create_plan_state'\n  app/controllers/plan_states_controller.rb:73:in `committed'\n</code></pre>\n\n<p>If I hit the \"done\" Button on the webpage, the function <code>committed</code> is called, wich calls <code>create_plan_state(:committed)</code>. Within the definition of create_plan_state, there is the statement <code>plan_state = PlanState.create( plan_id: @plan.id, state: state, user_id: current_user.id)</code>. This triggers a callback for <code>after_create: update_current_plan_state</code>:</p>\n\n<pre><code>def update_current_plan_state\n  #update the current plan pointer in the plan model\n  p = self.plan\n  p.current_plan_state_id = self.id\n  p.save!\nend\n</code></pre>\n\n<p>Now, this triggers <code>after_save: email_dmp_saved</code>:</p>\n\n<pre><code>def email_dmp_saved\n...\nif current_state.state == :committed\n  users = self.users\n  users.delete_if {|u| !u[:prefs][:dmp_owners_and_co][:committed]}\n  users.each do |user|\n    UsersMailer.notification(\n        user.email,\n        \"PLAN COMPLETED: #{self.name}\",\n        \"dmp_owners_and_co_committed\",\n        {:user =&gt; user, :plan =&gt; self } ).deliver\n  end\n</code></pre>\n\n<p>I think the definition of the notification is not important. But the 3rd last line calls \"dmp_owners_and_co_committed\", which is defined as:</p>\n\n<pre><code>Hello &lt;%= @vars[:user].full_name %&gt;,\n\nThe plan \"&lt;%= @vars[:plan].name %&gt;\" has been completed.\n\nIf you have questions pertaining to this action, please visit the DMP Overview page at &lt;%= edit_plan_url(@vars[:plan]) %&gt;\n\n&lt;%= render :partial =&gt; 'users_mailer/notification_boilerplate.text.erb' %&gt;\n</code></pre>\n\n<p>And in _notification_boilerplate.text.erb there is:</p>\n\n<pre><code>You may change your notification preferences at &lt;%= edit_user_url(@vars[:user].id) %&gt;#tab_tab2 .\n</code></pre>\n\n<p>I think the problem is <code>edit_plan_url</code> and <code>edit_user_url</code>. Because if I add some random text as parameter it works...:</p>\n\n<pre><code>edit_plan_url(\"de\",@vars[:plan])\nand in _notification:\nedit_user_url(\"de\",@vars[:user].id)\n</code></pre>\n\n<p>The question is, why is it working? Is there a way to print the created route? Because in the stacktrace the route doesn't match because format and id is nil. Now I want to see the new route in order to know where my random string \"de\" is placed.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1430317593, "post_id": 29946107, "comment_id": 48014162, "body": "Try to rename method <code>call</code> \u21d2 <code>my_call</code>. This should resolve an issue. I bet there rails pretend to gain full power on <code>call</code> method, overriding it <i>after</i> your class is initialized."}, {"owner": {"reputation": 1598, "user_id": 3190826, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Om0te.png?s=128&g=1", "display_name": "insecure-IT", "link": "https://stackoverflow.com/users/3190826/insecure-it"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1430318191, "post_id": 29946107, "comment_id": 48014740, "body": "Well, that did get me further down the rabbit hole. Now I&#39;m getting <code>NoMethodError</code> for <code>lib&#47;apis&#47;cw_get_company_integrator.rb:38:in my_call</code>, and I think this is due the env. It&#39;s now failing on the <code>CompanyInfosController.create!</code>."}, {"owner": {"reputation": 1598, "user_id": 3190826, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Om0te.png?s=128&g=1", "display_name": "insecure-IT", "link": "https://stackoverflow.com/users/3190826/insecure-it"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1430318670, "post_id": 29946107, "comment_id": 48015143, "body": "@mudasobwa You got it, please post an answer."}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1430319700, "creation_date": 1430319700, "answer_id": 29947545, "question_id": 29946107, "link": "https://stackoverflow.com/questions/29946107/why-am-i-getting-this-typeerror-no-implicit-conversion-of-module-into-integer/29947545#29947545", "title": "Why am I getting this TypeError? &quot;no implicit conversion of Module into Integer&quot;", "body": "<p><code>Rails</code> is jealous and greedy to some methods like <code>call</code> etc. Probably simple renaming of the target method from <code>call</code> to neutral <code>my_call</code> would resolve the problem.</p>\n\n<p>I bet there rails pretend to gain full power on call method, overriding it after your class is initialized.</p>\n"}], "owner": {"reputation": 1598, "user_id": 3190826, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Om0te.png?s=128&g=1", "display_name": "insecure-IT", "link": "https://stackoverflow.com/users/3190826/insecure-it"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 556, "favorite_count": 0, "accepted_answer_id": 29947545, "answer_count": 1, "score": 0, "last_activity_date": 1430319700, "creation_date": 1430316244, "last_edit_date": 1430316840, "question_id": 29946107, "link": "https://stackoverflow.com/questions/29946107/why-am-i-getting-this-typeerror-no-implicit-conversion-of-module-into-integer", "title": "Why am I getting this TypeError? &quot;no implicit conversion of Module into Integer&quot;", "body": "<p>I'm getting <code>TypeError in CwIntegratorAccountsController#create</code>. I'm calling a script (<code>CwGetCompanyIntegrator.call</code>) in the <code>create</code> method of the controller.</p>\n\n<p>CwIntegratorAccountsController:</p>\n\n<pre><code>require 'apis/cw_get_company_integrator'\n\nclass CwIntegratorAccountsController &lt; ApplicationController\n  skip_before_filter :require_company, :only =&gt; [:create,:new]\n\n  # GET /cw_integrator_accounts\n  # GET /cw_integrator_accounts.json\n\n  def create\n    unless CwIntegratorAccount.count &gt;= 1\n      @cw_integrator_account = CwIntegratorAccount.new(params[:cw_integrator_account])\n\n      respond_to do |format|\n        if @cw_integrator_account.save\n\n          # Run the CW Integrator\n          CwGetCompanyIntegrator.call\n          format.html { redirect_to root_url, notice: 'cw_integrator success' }\n          #format.json { render json: @cw_integrator_account, status: :created, location: @cw_integrator_account }\n        else\n          format.html { render action: 'new' }\n          format.json { render json: @cw_integrator_account.errors, status: :unprocessable_entity }\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>It looks like it's failing when it starts the <code>https</code> request to the ConnectWise Server at this line: <code>response = http.start {|h| h.request(request)}</code></p>\n\n<p>CwGetCompanyIntegrator script:</p>\n\n<pre><code>#!/usr/bin/env ruby\nrequire 'net/https'\nrequire 'uri'\nrequire 'nokogiri'\nrequire 'apis/cw_apis'\n\nclass CwGetCompanyIntegrator\n  def self.call\n    cw_integrator_account = CwIntegratorAccount.first\n    cw_hostname = cw_integrator_account.cw_hostname\n    company_api_url = \"https://#{cw_hostname}/v4_6_release/apis/2.0/CompanyApi.asmx\"\n    uri = URI.parse(company_api_url)\n\n    request = Net::HTTP::Post.new(uri.path)\n    request.add_field('Content-Type', 'text/xml; charset=utf-8')\n    request.add_field('SOAPAction', 'http://connectwise.com/GetCompany')\n    request.body = CwApis.get_company_xml_request\n    http = Net::HTTP.new(uri.host, uri.port)\n    http.use_ssl = true\n    http.verify_mode = OpenSSL::SSL::VERIFY_NONE\n    response = http.start {|h| h.request(request)}\n    xml_doc = Nokogiri::XML(response.body).remove_namespaces!\n\n    company_name = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/CompanyName').text\n    company_street_addr = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/DefaultAddress/StreetLines/string')[0].text\n    begin\n      company_street_addr2 = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/DefaultAddress/StreetLines/string')[1].text\n    end\n    company_city = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/DefaultAddress/City').text\n    company_state = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/DefaultAddress/State').text\n    company_zip = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/DefaultAddress/Zip').text\n    company_country = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/DefaultAddress/Country').text\n    company_status = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/Status').text\n    company_phone = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/PhoneNumber').text\n    company_fax = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/FaxNumber').text\n    company_www = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/WebSite').text\n\n    CompanyInfosController.create!(cw_company_id: cw_integrator_account.cw_company_id, company_name: company_name,\n                                   company_street_addr: company_street_addr, company_street_addr2: company_street_addr2,\n                                   company_city: company_city, company_state: company_state, company_zip: company_zip,\n                                   company_country:company_country, company_status: company_status, company_phone: company_phone,\n                                   company_fax: company_fax, company_www: company_www)\n  end\nend\n</code></pre>\n\n<p>This Class is called in the <code>CwGetCompanyIntegrator</code> script:</p>\n\n<pre><code>#!/usr/bin/env ruby\nrequire 'builder'\nclass CwApis\n  def self.get_company_xml_request\n    cw_integrator_account = CwIntegratorAccount.first\n    integrator_company_id = cw_integrator_account.integrator_company_id\n    integrator_login_id = cw_integrator_account.integrator_login_id\n    integrator_password = cw_integrator_account.integrator_password\n\n    xml = Builder::XmlMarkup.new(:indent=&gt;2)\n    xml.instruct!\n    xml.tag!('soap:Envelope',\n             :'xmlns:soap' =&gt; 'http://schemas.xmlsoap.org/soap/envelope/',\n             :xmlns =&gt; 'http://connectwise.com'){\n      xml.tag!('soap:Body'){\n        xml.tag!('GetCompany'){\n          xml.tag!('credentials'){\n            xml.CompanyId(integrator_company_id)\n            xml.IntegratorLoginId(integrator_login_id)\n            xml.IntegratorPassword(integrator_password)\n          }\n          xml.id(cw_integrator_account.cw_company_id)\n        }\n      }\n    }\n  end\nend\n</code></pre>\n\n<p>Full trace: </p>\n\n<pre><code>/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:893:in `initialize'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:893:in `new'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:893:in `connect'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:862:in `do_start'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/net/http.rb:851:in `start'\nlib/apis/cw_get_company_integrator.rb:21:in `call'\napp/controllers/cw_integrator_accounts_controller.rb:54:in `block in create'\nactionpack (3.2.14) lib/action_controller/metal/mime_responds.rb:270:in `call'\nactionpack (3.2.14) lib/action_controller/metal/mime_responds.rb:270:in `retrieve_collector_from_mimes'\nactionpack (3.2.14) lib/action_controller/metal/mime_responds.rb:194:in `respond_to'\napp/controllers/cw_integrator_accounts_controller.rb:50:in `create'\nactionpack (3.2.14) lib/action_controller/metal/implicit_render.rb:4:in `send_action'\nactionpack (3.2.14) lib/abstract_controller/base.rb:167:in `process_action'\nactionpack (3.2.14) lib/action_controller/metal/rendering.rb:10:in `process_action'\nactionpack (3.2.14) lib/abstract_controller/callbacks.rb:18:in `block in process_action'\nactivesupport (3.2.14) lib/active_support/callbacks.rb:447:in `_run__2237874046494148672__process_action__4163123032493016418__callbacks'\nactivesupport (3.2.14) lib/active_support/callbacks.rb:405:in `__run_callback'\nactivesupport (3.2.14) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'\nactivesupport (3.2.14) lib/active_support/callbacks.rb:81:in `run_callbacks'\nactionpack (3.2.14) lib/abstract_controller/callbacks.rb:17:in `process_action'\nactionpack (3.2.14) lib/action_controller/metal/rescue.rb:29:in `process_action'\nactionpack (3.2.14) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'\nactivesupport (3.2.14) lib/active_support/notifications.rb:123:in `block in instrument'\nactivesupport (3.2.14) lib/active_support/notifications/instrumenter.rb:20:in `instrument'\nactivesupport (3.2.14) lib/active_support/notifications.rb:123:in `instrument'\nactionpack (3.2.14) lib/action_controller/metal/instrumentation.rb:29:in `process_action'\nactionpack (3.2.14) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'\nactiverecord (3.2.14) lib/active_record/railties/controller_runtime.rb:18:in `process_action'\nactionpack (3.2.14) lib/abstract_controller/base.rb:121:in `process'\nactionpack (3.2.14) lib/abstract_controller/rendering.rb:45:in `process'\nrack-mini-profiler (0.9.2) lib/mini_profiler/profiling_methods.rb:108:in `block in profile_method'\nactionpack (3.2.14) lib/action_controller/metal.rb:203:in `dispatch'\nactionpack (3.2.14) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'\nactionpack (3.2.14) lib/action_controller/metal.rb:246:in `block in action'\nactionpack (3.2.14) lib/action_dispatch/routing/route_set.rb:73:in `call'\nactionpack (3.2.14) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'\nactionpack (3.2.14) lib/action_dispatch/routing/route_set.rb:36:in `call'\njourney (1.0.4) lib/journey/router.rb:68:in `block in call'\njourney (1.0.4) lib/journey/router.rb:56:in `each'\njourney (1.0.4) lib/journey/router.rb:56:in `call'\nactionpack (3.2.14) lib/action_dispatch/routing/route_set.rb:608:in `call'\nrack-webconsole-pry (0.1.9) lib/rack/webconsole/assets.rb:26:in `call'\nrack-webconsole-pry (0.1.9) lib/rack/webconsole.rb:79:in `call'\nactionpack (3.2.14) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'\nrack (1.4.5) lib/rack/etag.rb:23:in `call'\nrack (1.4.5) lib/rack/conditionalget.rb:35:in `call'\nactionpack (3.2.14) lib/action_dispatch/middleware/head.rb:14:in `call'\nactionpack (3.2.14) lib/action_dispatch/middleware/params_parser.rb:21:in `call'\nactionpack (3.2.14) lib/action_dispatch/middleware/flash.rb:242:in `call'\nrack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'\nrack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'\nactionpack (3.2.14) lib/action_dispatch/middleware/cookies.rb:341:in `call'\nactiverecord (3.2.14) lib/active_record/query_cache.rb:64:in `call'\nactiverecord (3.2.14) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'\nactionpack (3.2.14) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'\nactivesupport (3.2.14) lib/active_support/callbacks.rb:405:in `_run__2942276951910103516__call__2669772965393719582__callbacks'\nactivesupport (3.2.14) lib/active_support/callbacks.rb:405:in `__run_callback'\nactivesupport (3.2.14) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'\nactivesupport (3.2.14) lib/active_support/callbacks.rb:81:in `run_callbacks'\nactionpack (3.2.14) lib/action_dispatch/middleware/callbacks.rb:27:in `call'\nactionpack (3.2.14) lib/action_dispatch/middleware/reloader.rb:65:in `call'\nactionpack (3.2.14) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'\nactionpack (3.2.14) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'\nactionpack (3.2.14) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'\nrailties (3.2.14) lib/rails/rack/logger.rb:32:in `call_app'\nrailties (3.2.14) lib/rails/rack/logger.rb:16:in `block in call'\nactivesupport (3.2.14) lib/active_support/tagged_logging.rb:22:in `tagged'\nrailties (3.2.14) lib/rails/rack/logger.rb:16:in `call'\nactionpack (3.2.14) lib/action_dispatch/middleware/request_id.rb:22:in `call'\nrack (1.4.5) lib/rack/methodoverride.rb:21:in `call'\nrack (1.4.5) lib/rack/runtime.rb:17:in `call'\nactivesupport (3.2.14) lib/active_support/cache/strategy/local_cache.rb:72:in `call'\nrack (1.4.5) lib/rack/lock.rb:15:in `call'\nactionpack (3.2.14) lib/action_dispatch/middleware/static.rb:63:in `call'\nrack-mini-profiler (0.9.2) lib/mini_profiler/profiler.rb:300:in `call'\nrailties (3.2.14) lib/rails/engine.rb:484:in `call'\nrailties (3.2.14) lib/rails/application.rb:231:in `call'\nrack (1.4.5) lib/rack/content_length.rb:14:in `call'\nrailties (3.2.14) lib/rails/rack/log_tailer.rb:17:in `call'\nrack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'\n</code></pre>\n\n<p>This works in a plain ruby script, is it an environment thing?</p>\n\n<p>Working Ruby Scripts:</p>\n\n<p>CompanyApis class:</p>\n\n<pre><code>require 'builder'\nclass CompanyApis\n  def self.get_company\n    cw_company_id = 21920\n    integrator_company_id = 'COMPANY_ID'\n    integrator_login_id = 'INTERGRATOR_LOGIN'\n    integrator_password = 'INTERGRATOR_PW'\n\n    xml = Builder::XmlMarkup.new(:indent=&gt;2)\n    xml.instruct!\n    xml.tag!('soap:Envelope',\n             :'xmlns:soap' =&gt; 'http://schemas.xmlsoap.org/soap/envelope/',\n             :xmlns =&gt; 'http://connectwise.com'){\n      xml.tag!('soap:Body'){\n        xml.tag!('GetCompany'){\n          xml.tag!('credentials'){\n            xml.CompanyId(integrator_company_id)\n            xml.IntegratorLoginId(integrator_login_id)\n            xml.IntegratorPassword(integrator_password)\n          }\n          xml.id(cw_company_id)\n        }\n      }\n    }\n  end\nend\n</code></pre>\n\n<p>CwIntegrator class:</p>\n\n<pre><code>require 'net/https'\nrequire 'uri'\nrequire 'nokogiri'\nrequire './company_api'\n\nclass CwIntegrator\n  def self.call\n    cw_company_id = 21920\n    cw_hostname = 'cw.host.com'\n    companyapi_url = \"https://#{cw_hostname}/v4_6_release/apis/2.0/CompanyApi.asmx\"\n    uri = URI.parse(companyapi_url)\n\n    # Use for proxying to Kali\n    #proxy_addr = '172.16.1.149'\n    #proxy_port = 8080\n\n    request = Net::HTTP::Post.new(uri.path)\n    request.add_field('Content-Type', 'text/xml; charset=utf-8')\n    request.add_field('SOAPAction', 'http://connectwise.com/GetCompany')\n    request.body = CompanyApis.get_company\n    http = Net::HTTP.new(uri.host, uri.port)\n\n    # Use for proxying to Kali\n    #http = Net::HTTP.new(uri.host, uri.port, proxy_addr, proxy_port)\n\n    http.use_ssl = true\n    http.verify_mode = OpenSSL::SSL::VERIFY_NONE\n    response = http.start {|h| h.request(request)}\n    company_info = []\n    xml_doc = Nokogiri::XML(response.body).remove_namespaces!\n    company_name = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/CompanyName').text\n    company_street_addr = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/DefaultAddress/StreetLines/string')[0].text\n    begin\n      company_street_addr2 = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/DefaultAddress/StreetLines/string')[1].text\n    end\n    company_city = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/DefaultAddress/City').text\n    company_state = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/DefaultAddress/State').text\n    company_zip = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/DefaultAddress/Zip').text\n    company_country = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/DefaultAddress/Country').text\n    company_status = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/Status').text\n    company_phone = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/PhoneNumber').text\n    company_fax = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/FaxNumber').text\n    company_www = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/WebSite').text\n\n    company_info += [company_name: company_name, cw_company_id: cw_company_id, company_name: company_name,\n                     company_street_addr: company_street_addr, company_street_addr2: company_street_addr2,\n                     company_city: company_city, company_state: company_state, company_zip: company_zip,\n                     company_country:company_country,company_status: company_status, company_phone: company_phone,\n                     company_fax: company_fax, company_www: company_www]\n\n    puts(company_info)\n  end\nend\n\nCwIntegrator.call\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash"], "comments": [{"owner": {"reputation": 6165, "user_id": 2697183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65255fe741b95ba0c641d96ea6750ea9?s=128&d=identicon&r=PG&f=1", "display_name": "AbM", "link": "https://stackoverflow.com/users/2697183/abm"}, "edited": false, "score": 0, "creation_date": 1430316212, "post_id": 29946010, "comment_id": 48012988, "body": "you can use <code>hash.keys</code> to return an array of the hash keys."}, {"owner": {"reputation": 681, "user_id": 1117660, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ha2St.png?s=128&g=1", "display_name": "amtest", "link": "https://stackoverflow.com/users/1117660/amtest"}, "edited": false, "score": 0, "creation_date": 1430316274, "post_id": 29946010, "comment_id": 48013051, "body": "Refer this solution <a href=\"http://stackoverflow.com/questions/20580821/ruby-compare-two-hashes\" title=\"ruby compare two hashes\">stackoverflow.com/questions/20580821/ruby-compare-two-hashes</a>&zwnj;&#8203;, For this simple case you can use like this hash1 == hash2"}], "answers": [{"tags": [], "owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "is_accepted": false, "score": 1, "last_activity_date": 1430316395, "creation_date": 1430316395, "answer_id": 29946167, "question_id": 29946010, "link": "https://stackoverflow.com/questions/29946010/i-have-two-hash-and-want-to-check-whether-the-key-in-first-hash-exist-in-second/29946167#29946167", "title": "I have two hash and want to check whether the key in first hash exist in second hash", "body": "<p>You can use method <code>keys</code> and <code>include</code></p>\n\n<p>like this</p>\n\n<pre><code>hash1 = {\"month\" =&gt; \"January\", \"number\" =&gt; \"1\"}\nhash2 = {\"number\" =&gt; \"2\"}\n\nhash1.each_key do |k|\n  puts k if hash2.keys.include?(k)\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2388, "user_id": 3655580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58695ea14f641ae7e2f15b34434fd6a0?s=128&d=identicon&r=PG&f=1", "display_name": "edariedl", "link": "https://stackoverflow.com/users/3655580/edariedl"}, "edited": false, "score": 0, "creation_date": 1430316762, "post_id": 29946177, "comment_id": 48013452, "body": "I think it is better to use <code>each_key</code> <a href=\"http://ruby-doc.org/core-2.2.2/ENV.html#method-c-each_key\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.2.2/ENV.html#method-c-each_key</a> instead of <code>keys.each</code>."}], "tags": [], "owner": {"reputation": 4416, "user_id": 2552259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6d74162f339b5acd772d3f5dadaa8ea?s=128&d=identicon&r=PG", "display_name": "Jorge de los Santos", "link": "https://stackoverflow.com/users/2552259/jorge-de-los-santos"}, "is_accepted": false, "score": 0, "last_activity_date": 1430316421, "creation_date": 1430316421, "answer_id": 29946177, "question_id": 29946010, "link": "https://stackoverflow.com/questions/29946010/i-have-two-hash-and-want-to-check-whether-the-key-in-first-hash-exist-in-second/29946177#29946177", "title": "I have two hash and want to check whether the key in first hash exist in second hash", "body": "<p>If you are looking for a specific key you can use:</p>\n\n<pre><code>hash1.keys.include?(\"key_searched\")\n</code></pre>\n\n<p>If you want to compare a bunch of keys in hash2 you can use:</p>\n\n<pre><code>hash2.keys.each{|k| puts k if hash1.keys.include?(k)}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 4, "last_activity_date": 1430316885, "last_edit_date": 1430316885, "creation_date": 1430316438, "answer_id": 29946189, "question_id": 29946010, "link": "https://stackoverflow.com/questions/29946010/i-have-two-hash-and-want-to-check-whether-the-key-in-first-hash-exist-in-second/29946189#29946189", "title": "I have two hash and want to check whether the key in first hash exist in second hash", "body": "<p>To get all common keys:</p>\n\n<pre><code>hash1.keys &amp; hash2.keys\n# =&gt; [\"number\"] \n</code></pre>\n\n<p>Incase <code>hash2</code> always has a single key:</p>\n\n<pre><code>hash1.keys.include?(hash2.keys.first)\n# =&gt; true\n</code></pre>\n\n<p>If you are interested only in:</p>\n\n<blockquote>\n  <p>Want to check whether the second hash contains the key in first hash.</p>\n</blockquote>\n\n<p>(irrespective of what key). Then this should be sufficient:</p>\n\n<pre><code>!(hash1.keys &amp; hash2.keys).empty?\n# =&gt; true\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "is_accepted": false, "score": 1, "last_activity_date": 1430316460, "creation_date": 1430316460, "answer_id": 29946196, "question_id": 29946010, "link": "https://stackoverflow.com/questions/29946010/i-have-two-hash-and-want-to-check-whether-the-key-in-first-hash-exist-in-second/29946196#29946196", "title": "I have two hash and want to check whether the key in first hash exist in second hash", "body": "<pre><code>hash1.keys &amp; hash2.keys\n=&gt; [\"number\"]\n</code></pre>\n\n<p>if </p>\n\n<pre><code>hash1 = {\"month\" =&gt; \"January\"}\nhash2 = {\"number\" =&gt; \"2\"}\nhash1.keys &amp; hash2.keys\n=&gt; []\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 1476493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4772afaa8040fefe2eab2ddd05180cd5?s=128&d=identicon&r=PG", "display_name": "siddharth pandey", "link": "https://stackoverflow.com/users/1476493/siddharth-pandey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1430316976, "creation_date": 1430316008, "last_edit_date": 1430316976, "question_id": 29946010, "link": "https://stackoverflow.com/questions/29946010/i-have-two-hash-and-want-to-check-whether-the-key-in-first-hash-exist-in-second", "title": "I have two hash and want to check whether the key in first hash exist in second hash", "body": "<pre><code>hash1 = simple_hash = {\"month\" =&gt; \"January\", \"number\" =&gt; \"1\"}\nhash2 = {\"number\" =&gt; \"2\"}\n</code></pre>\n\n<p>Want to check whether the second hash contains the key in first hash.</p>\n\n<p>I was using this, but not a good approach.</p>\n\n<pre><code>simple_hash.each do |k,v|\n  hash2.each do |k1,v1|\n    if k1==v1\n      puts k1\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1430315534, "post_id": 29945652, "comment_id": 48012343, "body": "Your expected array is invalid."}, {"owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 0, "creation_date": 1430315727, "post_id": 29945652, "comment_id": 48012534, "body": "What is the context?  I think if you provide a bit more background on what you are trying to do, it might help."}, {"owner": {"reputation": 2287, "user_id": 2767026, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/100002642234495/picture?type=large", "display_name": "William Weckl", "link": "https://stackoverflow.com/users/2767026/william-weckl"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1430315804, "post_id": 29945652, "comment_id": 48012599, "body": "@sawa Edited it to be more appropriated. Ruby converts <code>[&quot;id&quot;, &quot;name&quot;, &quot;user&quot; =&gt; [&quot;id&quot;, &quot;email&quot;]]</code> to <code>[&quot;id&quot;, &quot;name&quot;, {&quot;user&quot;=&gt;[&quot;id&quot;, &quot;email&quot;]}]</code>. In the example, user became a hash inside the array. You can try it typing my original array in console."}, {"owner": {"reputation": 2287, "user_id": 2767026, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/100002642234495/picture?type=large", "display_name": "William Weckl", "link": "https://stackoverflow.com/users/2767026/william-weckl"}, "reply_to_user": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 0, "creation_date": 1430315939, "post_id": 29945652, "comment_id": 48012720, "body": "@steveklein I&#39;m receiving a string in this pattern by query string on request, need to convert it to an array to I can use this data."}], "answers": [{"comments": [{"owner": {"reputation": 2287, "user_id": 2767026, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/100002642234495/picture?type=large", "display_name": "William Weckl", "link": "https://stackoverflow.com/users/2767026/william-weckl"}, "edited": false, "score": 0, "creation_date": 1430316943, "post_id": 29946188, "comment_id": 48013596, "body": "Can I do exactly this without eval?"}, {"owner": {"reputation": 2287, "user_id": 2767026, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/100002642234495/picture?type=large", "display_name": "William Weckl", "link": "https://stackoverflow.com/users/2767026/william-weckl"}, "edited": false, "score": 0, "creation_date": 1430319067, "post_id": 29946188, "comment_id": 48015429, "body": "When I do eval on <code>safe</code> I&#39;m getting: <code>undefined local variable or method </code>\uff4e\uff41\uff4d\uff45&#39;`"}, {"owner": {"reputation": 2287, "user_id": 2767026, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/100002642234495/picture?type=large", "display_name": "William Weckl", "link": "https://stackoverflow.com/users/2767026/william-weckl"}, "edited": false, "score": 0, "creation_date": 1430319451, "post_id": 29946188, "comment_id": 48015771, "body": "This error happens just in rails, on <code>irb</code> it does not happen. Will figure it out. Thanks."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 2287, "user_id": 2767026, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/100002642234495/picture?type=large", "display_name": "William Weckl", "link": "https://stackoverflow.com/users/2767026/william-weckl"}, "edited": false, "score": 0, "creation_date": 1430319533, "post_id": 29946188, "comment_id": 48015837, "body": "You are welcome. This code probably requires some polishing, e.g. <code>@</code> may appear in email etc, it should be considered as a proof of concept only."}, {"owner": {"reputation": 2287, "user_id": 2767026, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/100002642234495/picture?type=large", "display_name": "William Weckl", "link": "https://stackoverflow.com/users/2767026/william-weckl"}, "edited": false, "score": 0, "creation_date": 1430319699, "post_id": 29946188, "comment_id": 48015990, "body": "In my case I don&#39;t need <code>@</code> or any special characters, just strings. For me, it is perfect."}, {"owner": {"reputation": 2287, "user_id": 2767026, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/100002642234495/picture?type=large", "display_name": "William Weckl", "link": "https://stackoverflow.com/users/2767026/william-weckl"}, "edited": false, "score": 0, "creation_date": 1430327139, "post_id": 29946188, "comment_id": 48021116, "body": "Inside rails the regex pattern <code>\\w+</code> does not work with wide pairs. Do you know what I can do?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 2287, "user_id": 2767026, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/100002642234495/picture?type=large", "display_name": "William Weckl", "link": "https://stackoverflow.com/users/2767026/william-weckl"}, "edited": false, "score": 1, "creation_date": 1430327643, "post_id": 29946188, "comment_id": 48021455, "body": "<code>\\w</code> would not work with wides neither in rails nor in plain ruby. There is <code>\\p{L}</code> matcher for utf-8 word characters. <a href=\"http://ruby-doc.org/core-2.2.1/Regexp.html#class-Regexp-label-Character+Properties\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.2.1/&hellip;</a>"}, {"owner": {"reputation": 2287, "user_id": 2767026, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/100002642234495/picture?type=large", "display_name": "William Weckl", "link": "https://stackoverflow.com/users/2767026/william-weckl"}, "edited": false, "score": 0, "creation_date": 1430328648, "post_id": 29946188, "comment_id": 48022092, "body": "Worked! Was using the same eval sentence of the first example. Is strange that in <code>irb</code> it worked. What about if I have some underscores? Example: <code>id,name,user_address[id,street_name]</code> -&gt; <code>[&quot;id&quot;, &quot;name&quot;, {&quot;user_address&quot;=&gt;[&quot;id&quot;, &quot;street_name&quot;]}]</code>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 2287, "user_id": 2767026, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/100002642234495/picture?type=large", "display_name": "William Weckl", "link": "https://stackoverflow.com/users/2767026/william-weckl"}, "edited": false, "score": 0, "creation_date": 1430328748, "post_id": 29946188, "comment_id": 48022146, "body": "There is no magic here. Either <code>[\\p{L}_]</code> or combination of the <code>\\p{}</code> matchers from the link I gave."}, {"owner": {"reputation": 2287, "user_id": 2767026, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/100002642234495/picture?type=large", "display_name": "William Weckl", "link": "https://stackoverflow.com/users/2767026/william-weckl"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1430328865, "post_id": 29946188, "comment_id": 48022205, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/76566/discussion-between-william-weckl-and-mudasobwa\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 3, "last_activity_date": 1430318017, "last_edit_date": 1430318017, "creation_date": 1430316435, "answer_id": 29946188, "question_id": 29945652, "link": "https://stackoverflow.com/questions/29945652/ruby-convert-string-to-specific-array-format/29946188#29946188", "title": "Ruby convert string to specific array format", "body": "<p>Just out of curiosity:</p>\n\n<pre><code>\u25b6 str = \"id,name,user[id,email]\"\n\u25b6 eval \"[#{str.gsub(/(\\w+)\\[(.*?)\\]/, '{\\1=&gt;[\\2]}').gsub(/\\w+/, ':\\0')}]\"\n#\u21d2 [\n#  [0] :id,\n#  [1] :name,\n#  [2] {\n#    :user =&gt; [\n#      [0] :id,\n#      [1] :email\n#    ]\n#  }\n#]\n</code></pre>\n\n<p><strong>Disclamer</strong>: to use <code>eval</code> in production one must understand risks.</p>\n\n<p><strong>UPD</strong> Safe <code>eval</code>ing (note that every ASCII <code>\\w</code> symbol is converted to it\u2019s wide pair from UTF-8 to prevent injection; not the best way around, but it works nicely unless you have ruby functions named with wide characters):</p>\n\n<pre><code>\u25b6 safe = str.gsub(/\\w/) do |e| \n\u25b7   e.each_codepoint.map do |cp| \n\u25b7     cp + 0xFF00 - 0x0020\n\u25b7   end.pack('U')\n\u25b7 end\n#\u21d2 \"\uff49\uff44,\uff4e\uff41\uff4d\uff45,\uff55\uff53\uff45\uff52[\uff49\uff44,\uff45\uff4d\uff41\uff49\uff4c]\"\n\u25b6 eval \"[#{safe.gsub(/(\\p{L}+)\\[(.*?)\\]/, '{\\1=&gt;[\\2]}').gsub(/\\p{L}+/, ':\\0')}]\"\n#\u21d2 [\n#  [0] :\uff49\uff44,\n#  [1] :\uff4e\uff41\uff4d\uff45,\n#  [2] {\n#    :\uff55\uff53\uff45\uff52 =&gt; [\n#      [0] :\uff49\uff44,\n#      [1] :\uff45\uff4d\uff41\uff49\uff4c\n#    ]\n#  }\n#]\n</code></pre>\n\n<p>Now you are free to turn keys back from wide characters to ASCII.</p>\n"}, {"comments": [{"owner": {"reputation": 2287, "user_id": 2767026, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/100002642234495/picture?type=large", "display_name": "William Weckl", "link": "https://stackoverflow.com/users/2767026/william-weckl"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1430316906, "post_id": 29946213, "comment_id": 48013576, "body": "In my example case works. But what if I had <code>&quot;user[id,email],id,name&quot;</code>? The order can change, the number of strings can change, everything can change, my example is just a pattern. The @mudasobwa answer solves my problem but I did not want to use eval."}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1430316986, "post_id": 29946213, "comment_id": 48013632, "body": "Why is it that &quot;order can change, the number of strings can change, everything can change&quot;?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 2287, "user_id": 2767026, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/100002642234495/picture?type=large", "display_name": "William Weckl", "link": "https://stackoverflow.com/users/2767026/william-weckl"}, "edited": false, "score": 1, "creation_date": 1430317054, "post_id": 29946213, "comment_id": 48013688, "body": "@WilliamWeckl BTW, <code>eval</code> is not an evil. It might be used when you understand the circumstances. Absolutely safe usage: convert all <code>\\w</code> to some utf-8, like wide characters \u21d2 do eval \u21d2 convert everything back."}, {"owner": {"reputation": 2287, "user_id": 2767026, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/100002642234495/picture?type=large", "display_name": "William Weckl", "link": "https://stackoverflow.com/users/2767026/william-weckl"}, "edited": false, "score": 0, "creation_date": 1430317093, "post_id": 29946213, "comment_id": 48013716, "body": "@BSeven Because I&#39;m receiving this by a query string in a request. In my request I&#39;m saying what attributes I want to be returned in response but some attributes have nested inside."}, {"owner": {"reputation": 2287, "user_id": 2767026, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/100002642234495/picture?type=large", "display_name": "William Weckl", "link": "https://stackoverflow.com/users/2767026/william-weckl"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1430317542, "post_id": 29946213, "comment_id": 48014125, "body": "@mudasobwa I&#39;m sorry but I did not understand how can I do this:  convert all \\w to some utf-8, like wide characters \u21d2 do eval \u21d2 convert everything back"}], "tags": [], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "is_accepted": false, "score": 0, "last_activity_date": 1430317096, "last_edit_date": 1430317096, "creation_date": 1430316517, "answer_id": 29946213, "question_id": 29945652, "link": "https://stackoverflow.com/questions/29945652/ruby-convert-string-to-specific-array-format/29946213#29946213", "title": "Ruby convert string to specific array format", "body": "<pre><code>string = \"id,name,user[id,email]\"\nparts = string.split(/[\\,,\\[,\\]]/)\n[parts[0], parts[1], {parts[2] =&gt; [parts[3], parts[4]]}]\n</code></pre>\n\n<p>You may also want to have some validation or not use all the parts if the first id is supposed to be the same as the second.</p>\n"}], "owner": {"reputation": 2287, "user_id": 2767026, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/100002642234495/picture?type=large", "display_name": "William Weckl", "link": "https://stackoverflow.com/users/2767026/william-weckl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 29946188, "answer_count": 2, "score": 2, "last_activity_date": 1430318017, "creation_date": 1430315147, "last_edit_date": 1430315703, "question_id": 29945652, "link": "https://stackoverflow.com/questions/29945652/ruby-convert-string-to-specific-array-format", "title": "Ruby convert string to specific array format", "body": "<p>What I need to do is convert something like this:</p>\n\n<pre><code>\"id,name,user[id,email]\"\n</code></pre>\n\n<p>into this array:</p>\n\n<pre><code>[\"id\", \"name\", {\"user\"=&gt;[\"id\", \"email\"]}] \n</code></pre>\n\n<p>What is the best way to do that? I think some function like <code>split</code> or <code>scan</code> can help, but I don't have much knowledge in regex to solve this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash", "ruby-2.0", "ruby-2.2"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 7, "creation_date": 1430315570, "post_id": 29945633, "comment_id": 48012378, "body": "It&#39;s not an array of hash. It&#39;s a hash."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1430321411, "post_id": 29945633, "comment_id": 48017349, "body": "Is that some kind of JSON but not quite JSON structure?"}], "answers": [{"comments": [{"owner": {"reputation": 1508, "user_id": 1468122, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/QKC1Z.jpg?s=128&g=1", "display_name": "Ahmad hamza", "link": "https://stackoverflow.com/users/1468122/ahmad-hamza"}, "edited": false, "score": 0, "creation_date": 1430318211, "post_id": 29946231, "comment_id": 48014760, "body": "&#39;3.2&#39; cannot be hard coded. It has to be retrieved from the hash. Can you please edit. ? Somthing like <code>x[0]</code> should be used ?"}, {"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "reply_to_user": {"reputation": 1508, "user_id": 1468122, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/QKC1Z.jpg?s=128&g=1", "display_name": "Ahmad hamza", "link": "https://stackoverflow.com/users/1468122/ahmad-hamza"}, "edited": false, "score": 0, "creation_date": 1430319278, "post_id": 29946231, "comment_id": 48015602, "body": "@ahmadhamza <code>.each do |key, hash|</code>"}, {"owner": {"reputation": 1508, "user_id": 1468122, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/QKC1Z.jpg?s=128&g=1", "display_name": "Ahmad hamza", "link": "https://stackoverflow.com/users/1468122/ahmad-hamza"}, "edited": false, "score": 0, "creation_date": 1430319909, "post_id": 29946231, "comment_id": 48016171, "body": "<code>x.first[0]</code> is breaking <code>&#39;3.2&#39; =&gt; &#39;3&#39;, &#39;.&#39;</code>.  x[0] is working here."}, {"owner": {"reputation": 1506, "user_id": 3414150, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/tASIO.jpg?s=128&g=1", "display_name": "lx00st", "link": "https://stackoverflow.com/users/3414150/lx00st"}, "edited": false, "score": 0, "creation_date": 1430320093, "post_id": 29946231, "comment_id": 48016321, "body": "you should not pass hash object to first proc - it is expecting an array <code>[ { &#39;3.2&#39;: ... }]</code> for single object - use second one"}, {"owner": {"reputation": 1506, "user_id": 3414150, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/tASIO.jpg?s=128&g=1", "display_name": "lx00st", "link": "https://stackoverflow.com/users/3414150/lx00st"}, "edited": false, "score": 0, "creation_date": 1430320588, "post_id": 29946231, "comment_id": 48016724, "body": "<code>{ hash.first[0] =&gt; hash.first[1].map { |k,v| [v[&#39;pa&#39;], &quot;calculated value&quot;] }.to_h }</code>"}, {"owner": {"reputation": 1508, "user_id": 1468122, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/QKC1Z.jpg?s=128&g=1", "display_name": "Ahmad hamza", "link": "https://stackoverflow.com/users/1468122/ahmad-hamza"}, "edited": false, "score": 0, "creation_date": 1430320593, "post_id": 29946231, "comment_id": 48016726, "body": "Actually, i wrote incomplete description of my requirement. I need to group_by according to <code>pa</code>.  <code>pa1 =&gt; &#39;calculation&#39;, pa2 =&gt; &#39;soemthing&#39;</code>"}], "tags": [], "owner": {"reputation": 1506, "user_id": 3414150, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/tASIO.jpg?s=128&g=1", "display_name": "lx00st", "link": "https://stackoverflow.com/users/3414150/lx00st"}, "is_accepted": false, "score": 0, "last_activity_date": 1430319320, "last_edit_date": 1430319320, "creation_date": 1430316546, "answer_id": 29946231, "question_id": 29945633, "link": "https://stackoverflow.com/questions/29945633/change-the-structure-of-hash/29946231#29946231", "title": "Change the structure of hash", "body": "<p>Assuming that you have an array of specified objects:</p>\n\n<pre><code>array.map{ |x| { x.first[0] =&gt; x.first[1].map { |k,v| [v['pa'], \"calculated value\"] }.to_h } }\n</code></pre>\n\n<p>or if you have one hash:</p>\n\n<pre><code>{ hash.first[0] =&gt; hash.first[1].map { |k,v| [v['pa'], \"calculated value\"] }.to_h } \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1592, "user_id": 4271743, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Nivk1.jpg?s=128&g=1", "display_name": "ConnorCMcKee", "link": "https://stackoverflow.com/users/4271743/connorcmckee"}, "is_accepted": false, "score": -1, "last_activity_date": 1430321556, "last_edit_date": 1430321556, "creation_date": 1430321212, "answer_id": 29948167, "question_id": 29945633, "link": "https://stackoverflow.com/questions/29945633/change-the-structure-of-hash/29948167#29948167", "title": "Change the structure of hash", "body": "<p>Let's say you dump the hash we're really working with into a variable just for the sake of demonstrating. I'm going to refer to the hash you wrote out above as \"old_hash\".</p>\n\n<h2>REVISED</h2>\n\n<p>Reflects your needs for a \"count\" now.</p>\n\n<pre><code>    # Isolate the part with which we're working. If you had multiple\n    #   version (like 3.1, 3.0) just perform this on .each of them.\n    x = old_hash['3.2']\n\n    # Initialize a counter\n    counter = 0\n\n    # Iterate through every level in '3.2'\n    x.each do |k, v|\n\n      # Increment the counter\n      counter += 1\n\n      # Create a new key-value pair in x, where the key is the \"pa\"\n      #   value of hash currently selected by this loop, and assign\n      #   it a count\n      x[ x[k]['pa'] ] = { count: counter }\n\n      # Remove the hash currently selected by your loop from x\n      #  (if you're using its other values for a calulation, make\n      #   sure you do that first)\n      x.delete( k )\n    end\n\n    # Rewrite your old \"3.2\" into the new hash\n    old_hash['3.2'] = x\n</code></pre>\n\n<p>There are much more elegant ways of doing this, but this should at least be an easy-to-understand process, and if you have complicated calculations to perform, now you have a lot of space for readability.</p>\n"}, {"tags": [], "owner": {"reputation": 2423, "user_id": 4143605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51efa7bcbb6ea62cb6d024d1b8f2d56d?s=128&d=identicon&r=PG&f=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/4143605/sid"}, "is_accepted": false, "score": 0, "last_activity_date": 1430372260, "creation_date": 1430372260, "answer_id": 29959776, "question_id": 29945633, "link": "https://stackoverflow.com/questions/29945633/change-the-structure-of-hash/29959776#29959776", "title": "Change the structure of hash", "body": "<p>Using the below as your example hash (2 counts of \"Printer\" and 1 count of \"NewsPaper\"):</p>\n\n<pre><code>h = {:\"3.2\"=&gt;{:\"abc-4536\"=&gt;{:a=&gt;\"sfsdfs\", :b=&gt;\"qweqda\", :pa=&gt;\"Printer\"}, :\"abc-2345\"=&gt;{:a=&gt;\"sdfswer\", :b=&gt;\"werwewe\", :pa=&gt;\"NewsPaper\"}, :\"abc-4537\"=&gt;{:a=&gt;\"sfsdfs\", :b=&gt;\"qweqda\", :pa=&gt;\"Printer\"}}}\n</code></pre>\n\n<p>You can do:</p>\n\n<pre><code>z = Array.new\nh[:\"3.2\"].each_value {|x| z &lt;&lt; x[:pa]}\nh[:\"3.2\"] = Hash.new\nz.each {|a| h[:\"3.2\"][a] = {\"count\": z.count {|x| x == a}}}\n</code></pre>\n\n<p><code>h</code> is now:</p>\n\n<pre><code>#=&gt; {:\"3.2\"=&gt;{\"Printer\"=&gt;{:count=&gt;2}, \"NewsPaper\"=&gt;{:count=&gt;1}}}\n</code></pre>\n"}], "owner": {"reputation": 1508, "user_id": 1468122, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/QKC1Z.jpg?s=128&g=1", "display_name": "Ahmad hamza", "link": "https://stackoverflow.com/users/1468122/ahmad-hamza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1430412096, "creation_date": 1430315111, "last_edit_date": 1430412096, "question_id": 29945633, "link": "https://stackoverflow.com/questions/29945633/change-the-structure-of-hash", "title": "Change the structure of hash", "body": "<p>I have a hash like below:</p>\n\n<pre><code>{\n'3.2':{\n 'abc-4536':{\n   \"a\" : \"sfsdfs\",\n   \"b\" : \"qweqda\",\n   \"pa\": \"Printer\"\n    },\n  'abc-2345':{\n    \"a\": \"sdfswer\",\n    \"b\": \"werwewe\",\n    \"pa\": \"NewsPaper\"\n    },\n  'abc-4536':{\n    \"a\" : \"sfsdfs\",\n    \"b\" : \"qweqda\",\n    \"pa\": \"Printer\"\n    },\n   ...\n  }\n}\n</code></pre>\n\n<p>So, now i have to arrange it like this:</p>\n\n<pre><code>{\n'3.2':{\n  \"Printer\":{\n    'count': 2\n   },\n  \"NewsPaper\":{\n    'count': 3\n   }, \n }\n}\n</code></pre>\n\n<p>i have to count and group by \"pa\" key inside '3.2'. Any ideas ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "railstutorial.org"], "answers": [{"comments": [{"owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 0, "creation_date": 1430318009, "post_id": 29945811, "comment_id": 48014547, "body": "Specifically it looks like your Help view is displaying &quot;Ruby on Rails...&quot; but you expect it to display &quot;Help | Ruby on Rails...&quot;."}, {"owner": {"reputation": 553, "user_id": 1181065, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e73033afe0faa2e6e5fab4e4b1a01e8e?s=128&d=identicon&r=PG", "display_name": "Hanna", "link": "https://stackoverflow.com/users/1181065/hanna"}, "edited": false, "score": 0, "creation_date": 1430374615, "post_id": 29945811, "comment_id": 48041137, "body": "Yes I found the problem...It was something like what you said."}], "tags": [], "owner": {"reputation": 6165, "user_id": 2697183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65255fe741b95ba0c641d96ea6750ea9?s=128&d=identicon&r=PG&f=1", "display_name": "AbM", "link": "https://stackoverflow.com/users/2697183/abm"}, "is_accepted": true, "score": 4, "last_activity_date": 1430315552, "creation_date": 1430315552, "answer_id": 29945811, "question_id": 29945472, "link": "https://stackoverflow.com/questions/29945472/failure-expected-0-to-be-1-on-ruby-on-rails/29945811#29945811", "title": "Failure: Expected 0 to be &gt;= 1 on ruby on rails", "body": "<p>The issue is that there is no html matching <code>\"Help | Ruby on Rails Tutorial Sample App\"</code>.</p>\n\n<p>if you look at the definition of <code>assert_select</code>, it accepts <code>:count</code> as (optional) argument. If the <code>count</code> is not specified, it sets the minimum occurrence of the <code>html</code> to 1. This is why the error you are getting is <code>Expected 0 to be &gt;= 1.</code>. In your case there were 0 matches where the test expected at least 1 match.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5224758, "user_type": "registered", "profile_image": "https://graph.facebook.com/904382052975079/picture?type=large", "display_name": "Aaron Butler", "link": "https://stackoverflow.com/users/5224758/aaron-butler"}, "is_accepted": false, "score": 0, "last_activity_date": 1444347795, "creation_date": 1444347795, "answer_id": 33027701, "question_id": 29945472, "link": "https://stackoverflow.com/questions/29945472/failure-expected-0-to-be-1-on-ruby-on-rails/33027701#33027701", "title": "Failure: Expected 0 to be &gt;= 1 on ruby on rails", "body": "<p>I ran across this same problem.  What I did was take the <code>| Ruby on Rails Tutorial Sample App</code> part off, inside the end of the <code>&lt;title&gt;</code> tag in your <code>application.html.erb</code> file. Hope this helps!</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7356471, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/b99f0201033f726903b7abcf1ace5cd0?s=128&d=identicon&r=PG", "display_name": "Justin", "link": "https://stackoverflow.com/users/7356471/justin"}, "is_accepted": false, "score": 0, "last_activity_date": 1483068970, "creation_date": 1483068970, "answer_id": 41390267, "question_id": 29945472, "link": "https://stackoverflow.com/questions/29945472/failure-expected-0-to-be-1-on-ruby-on-rails/41390267#41390267", "title": "Failure: Expected 0 to be &gt;= 1 on ruby on rails", "body": "<p>I had the same problem with three failures, home, about and help.</p>\n\n<p>It turned out to be a simple typo in static_pages/home(about &amp; help).html.erb\nI had misspelt \"Tutorial\" and copied pasted the same mistake into each html.erb. \nCorrected typo and re-ran rails test.\nSuccess :)</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7616576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afd8edc6e4aaf53eb61d7b4f67ad48db?s=128&d=identicon&r=PG", "display_name": "Alan Braut", "link": "https://stackoverflow.com/users/7616576/alan-braut"}, "is_accepted": false, "score": 1, "last_activity_date": 1490095766, "creation_date": 1490095766, "answer_id": 42925835, "question_id": 29945472, "link": "https://stackoverflow.com/questions/29945472/failure-expected-0-to-be-1-on-ruby-on-rails/42925835#42925835", "title": "Failure: Expected 0 to be &gt;= 1 on ruby on rails", "body": "<p>I ran across this same problem too. It came from a copy/paste of the html views from the tutorial.</p>\n\n<p>Even if the text is the same between your view and your test, if you copy/paste from the Rails tutorial, you should re-write the text between title tags in your view (Home, About, Help, etc) yourself and the text should pass. Hope this help, it passed for me with this.</p>\n\n<p>I'm using vim. Don't know if it matters.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10004734, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yqyna-e-FLI/AAAAAAAAAAI/AAAAAAAAAvk/aPYNxsfu0yY/photo.jpg?sz=128", "display_name": "Kemas Muhammad Rouf", "link": "https://stackoverflow.com/users/10004734/kemas-muhammad-rouf"}, "is_accepted": false, "score": 0, "last_activity_date": 1530178077, "creation_date": 1530178077, "answer_id": 51079302, "question_id": 29945472, "link": "https://stackoverflow.com/questions/29945472/failure-expected-0-to-be-1-on-ruby-on-rails/51079302#51079302", "title": "Failure: Expected 0 to be &gt;= 1 on ruby on rails", "body": "<p>Put this &lt;% provide(:title, \"Home\") %> in static_pages/(home/about/contact).html.erb file. I hope this solve your problem </p>\n"}], "owner": {"reputation": 553, "user_id": 1181065, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e73033afe0faa2e6e5fab4e4b1a01e8e?s=128&d=identicon&r=PG", "display_name": "Hanna", "link": "https://stackoverflow.com/users/1181065/hanna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2501, "favorite_count": 0, "protected_date": 1571702042, "accepted_answer_id": 29945811, "answer_count": 5, "score": 6, "last_activity_date": 1571697537, "creation_date": 1430314689, "question_id": 29945472, "link": "https://stackoverflow.com/questions/29945472/failure-expected-0-to-be-1-on-ruby-on-rails", "title": "Failure: Expected 0 to be &gt;= 1 on ruby on rails", "body": "<p>I'm doing Hartle tutorial and see this failure every time I run rake test I see this failure:</p>\n\n<pre><code>  1) Failure:\nStaticPagesControllerTest#test_should_get_help [.../sample_app/test/controllers/static_pages_controller_test.rb:14]:\n&lt;Help | Ruby on Rails Tutorial Sample App&gt; expected but was\n&lt;Ruby on Rails Tutorial Sample App&gt;..\nExpected 0 to be &gt;= 1.\n</code></pre>\n\n<p>What does it mean? And how can I solve it?\nThis is my static_pages_controller_test.rb file.</p>\n\n<pre><code>require 'test_helper'\n\nclass StaticPagesControllerTest &lt; ActionController::TestCase\n\n  test \"should get home\" do\n    get :home\n    assert_response :success\n    assert_select \"title\", \"Ruby on Rails Tutorial Sample App\"   end\n\n  test \"should get help\" do\n    get :help\n    assert_response :success\n    assert_select \"title\", \"Help | Ruby on Rails Tutorial Sample App\"   end\n\n  test \"should get about\" do\n    get :about\n    assert_response :success\n    assert_select \"title\", \"About | Ruby on Rails Tutorial Sample App\"   end\n\n  test \"should get contact\" do\n    get :contact\n    assert_response :success\n    assert_select \"title\", \"Contact | Ruby on Rails Tutorial Sample App\"   end end\n</code></pre>\n\n<p>And here is line 14.</p>\n\n<pre><code>assert_select \"title\", \"Help | Ruby on Rails Tutorial Sample App\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "pdf", "pdf-generation", "prawn"], "comments": [{"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1430314587, "post_id": 29945396, "comment_id": 48011554, "body": "What kind of server is it?  Heroku?  VPS?  Dedicated? Something else?"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1430314634, "post_id": 29945396, "comment_id": 48011599, "body": "Have you tried watching your server log as you try to generate the PDF?  That should always be your first step."}, {"owner": {"reputation": 13, "user_id": 4792966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46cbd1e633d06a1ca00f5cdf6fd2e96b?s=128&d=identicon&r=PG&f=1", "display_name": "EamonnMcElroy", "link": "https://stackoverflow.com/users/4792966/eamonnmcelroy"}, "reply_to_user": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1430314765, "post_id": 29945396, "comment_id": 48011708, "body": "Apologies. Its an apache tomcat server. I will try to locate the server logs and get back to you. Has anyone ever had this occur before."}, {"owner": {"reputation": 13, "user_id": 4792966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46cbd1e633d06a1ca00f5cdf6fd2e96b?s=128&d=identicon&r=PG&f=1", "display_name": "EamonnMcElroy", "link": "https://stackoverflow.com/users/4792966/eamonnmcelroy"}, "reply_to_user": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1430315647, "post_id": 29945396, "comment_id": 48012460, "body": "Apologies but trying to locate server log and have been directed on other pages to catalina_out but there is no mention of pdf generation but more higher end tasks."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1430317505, "post_id": 29945396, "comment_id": 48014088, "body": "If the log doesn&#39;t give you any useful feedback (which is surprising, i&#39;d expect to see an exception or error message) I would look at the controller or model code that actually makes the pdf, and step through it in the rails console, on your server."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1430317585, "post_id": 29945396, "comment_id": 48014157, "body": "Is your server a shared server?  (ie virtual server on a box where you and other users each have a virtual server)  If so then these often block certain processes to stop one user hogging resources."}, {"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1430317751, "post_id": 29945396, "comment_id": 48014312, "body": "Are you actually generating a file?  Or are you using something like <code>send_data</code>.  If you&#39;re generating a file the app might have permission to write to wherever you&#39;re writing."}, {"owner": {"reputation": 13, "user_id": 4792966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46cbd1e633d06a1ca00f5cdf6fd2e96b?s=128&d=identicon&r=PG&f=1", "display_name": "EamonnMcElroy", "link": "https://stackoverflow.com/users/4792966/eamonnmcelroy"}, "edited": false, "score": 0, "creation_date": 1430383480, "post_id": 29945396, "comment_id": 48046297, "body": "The catalina.out log seems to only reference war builds and deploys etc. I tried again this morning, took a note of the time and checked the logs for any change but nothing."}, {"owner": {"reputation": 13, "user_id": 4792966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46cbd1e633d06a1ca00f5cdf6fd2e96b?s=128&d=identicon&r=PG&f=1", "display_name": "EamonnMcElroy", "link": "https://stackoverflow.com/users/4792966/eamonnmcelroy"}, "edited": false, "score": 0, "creation_date": 1430383948, "post_id": 29945396, "comment_id": 48046622, "body": "I&#39;m on digital ocean but i&#39;m not sure if we have a shared server but dont think we do."}, {"owner": {"reputation": 13, "user_id": 4792966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46cbd1e633d06a1ca00f5cdf6fd2e96b?s=128&d=identicon&r=PG&f=1", "display_name": "EamonnMcElroy", "link": "https://stackoverflow.com/users/4792966/eamonnmcelroy"}, "edited": false, "score": 0, "creation_date": 1430383988, "post_id": 29945396, "comment_id": 48046645, "body": "I&#39;m not sure if i&#39;m doing a send_data but there doesnt seem to be any reference to it in the code."}, {"owner": {"reputation": 13, "user_id": 4792966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46cbd1e633d06a1ca00f5cdf6fd2e96b?s=128&d=identicon&r=PG&f=1", "display_name": "EamonnMcElroy", "link": "https://stackoverflow.com/users/4792966/eamonnmcelroy"}, "edited": false, "score": 0, "creation_date": 1430391417, "post_id": 29945396, "comment_id": 48051443, "body": "UPDATE   I have been working on another pdf and noticed a difference with path name. When testing it locally it works and i&#39;ve noticed the path is &#39;public/images/logo.png&#39; whereas when live it should be &#39;images/logo.png&#39; so i believe that is the issue. Redeploying now to see if it has an effect. On another note is there a way to have a variable that specifies path based on what environment the application is being deployed in."}], "owner": {"reputation": 13, "user_id": 4792966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46cbd1e633d06a1ca00f5cdf6fd2e96b?s=128&d=identicon&r=PG&f=1", "display_name": "EamonnMcElroy", "link": "https://stackoverflow.com/users/4792966/eamonnmcelroy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 289, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1430383903, "creation_date": 1430314506, "last_edit_date": 1430383903, "question_id": 29945396, "link": "https://stackoverflow.com/questions/29945396/prawn-generating-pdf-on-localhost-but-not-on-server", "title": "Prawn generating PDF on localhost but not on server", "body": "<p>I am working on an Ruby on Rails application which uses prawn to generate PDF's when a user clicks on a link. The functionality works when running the application on the localhost but when i deploy it to the server and click on the link the file doesnt load with the message \"Failed to load PDF document\".</p>\n\n<p>I have done some research and seen references in other places regarding other documents generating gems but none specific to Prawn. Any requests for additional information will gladly be met.</p>\n\n<p>I think showing the code might help so here goes. It is financial application where a page lists statements with a view button and a pdf icon to view them pdf format. When the user clicks on the pdf icon prawn then comes into play. Hope this help clarify my problem somewhat.</p>\n\n<p>Controller Code:</p>\n\n<pre><code>    require 'json'\n\nInternetBanking.controllers :statements do\n  get :index do\n    @today = Time.now\n    render 'statements/listing'\n  end\n\n  get :listing do\n    @today = Time.now\n    render 'statements/listing'\n  end\n\n  get :activity, provides: [:json] do\n    content_type :json\n    @customer.accounts.map{|x| {x.name =&gt; x.activity}}.to_json\n  end\n\n  get :show, map: \"/statements/:id\", provides: [:html, :pdf] do\n    begin\n      m = params[:id].force_encoding('UTF-8').match(/(\\d+)-(\\w+)-(\\d+)/)\n      accountno = m[1].to_i\n      month     = Date::MONTHNAMES.index(m[2])\n      year      = m[3].to_i\n\n      raise Exception if month.nil? or year.nil?\n\n      # Fetch account_id from logged in customer, prevent crafted URLs.\n      @account = @customer.fetch_account(accountno)\n\n      raise Exception if @account.nil?\n\n      @statement = @account.statement(year, month)\n\n      # TODO: Deal with no transactions\n      if content_type == :pdf\n        content_type 'application/pdf'\n        @statement.to_pdf\n      else # HTML\n        render 'statements/show'\n      end\n      rescue\n        flash[:error]= 'You cannot have an empty month field'\n    end\n  end\nend\n</code></pre>\n\n<p>Model Code:</p>\n\n<p>Statement.rb</p>\n\n<pre><code>class Statement \n  attr_accessor :opening_balance, :closing_balance \n\n  def initialize(acct, year = nil, month = nil)\n    @db = Database.instance\n    @account    = acct\n    @year       = year\n    @month      = month\n    @month_name = Date::MONTHNAMES[@month]\n  end\n\n  def to_s\n    \"#{@account.number}-#{@month_name}-#{@year}\"\n  end\n\n  def to_pdf\n    title = @account.name\n    subtitle = \"Account Statement: #{@month_name} #{@year}\"\n    StatementPDF.new(title, subtitle, transactions).render\n  end\n\n  def transactions\n    return @transactions if @transactions\n\n\n    start  = Date.civil(@year, @month).strftime('%Y-%m-%d')\n    finish = Date.civil(@year, @month, -1).strftime('%Y-%m-%d')\n\n\n    rows = @db.call('IBStatement2', @account.account_id, start, finish)\n    @transactions = rows.map {|txn| Transaction.new(txn)}\n  end\nend\n</code></pre>\n\n<p>Statement_pdf.rb</p>\n\n<pre><code>require 'prawn'\n\nclass StatementPDF &lt; Prawn::Document\n  BOX_MARGIN   = 36\n  # Additional indentation to keep the line measure with a reasonable size\n  INNER_MARGIN = 30\n  # Vertical Rhythm settings\n  RHYTHM  = 10\n  LEADING = 2\n  # Colors\n  BLACK      = \"000000\"\n  LIGHT_GRAY = \"F2F2F2\"\n  GRAY       = \"DDDDDD\"\n  DARK_GRAY  = \"333333\"\n  BROWN      = \"A4441C\"\n  ORANGE     = \"F28157\"\n  LIGHT_GOLD = \"FBFBBE\"\n  DARK_GOLD  = \"EBE389\"\n  BLUE       = \"0000D0\"\n  GREY       = \"CCCCCC\"\n\n  def initialize(title, subtitle, rows)\n    @rows = rows\n    @title = title\n    @subtitle = subtitle\n\n    super(page_size: 'A4') do\n      define_grid(columns: 4, rows: 16, gutter: 10)\n\n      header\n\n      transactions_table\n\n      footer\n    end\n  end\n\n  private\n\n  def header \n    grid([0,0],[1,0]).bounding_box do\n      image 'public/images/Statement/logo.png', width: 110\n    end\n\n    grid([0,1],[1,1]).bounding_box do\n      font_size 10\n      text 'Yada', font_weight: 'bold'\n      font_size 9\n      text 'Yada'\n      text 'Yada'\n      text 'Yada'\n      text 'Yada'\n      text 'Yada'\n      text 'Yada'\n    end\n\n    grid([0,2],[0,3]).bounding_box do\n      font_size(20)\n      text @title, color: '#0044AA', :align =&gt; :right\n      font_size(14)\n      text @subtitle, color: '#0044AA', :align =&gt; :right, :valign =&gt; :bottom\n    end\n\n    font_size(12)\n  end \n\n  def footer\n    grid([15,0],[15,3]).bounding_box do\n      image 'public/images/statement-logo.png', width: 100\n    end\n  end\n\n  def transactions_table\n    grid([2,0], [13,3]).bounding_box do\n      data = [%w(Date Description Amount Balance)]\n      data += @rows.map{|r| [r.value_date, r.description, r.amount, r.balance]}\n      options = { header: true, width: 520, \n          column_widths: {0 =&gt; 100, 2 =&gt; 100},\n          row_colors: ['EEEEEE', 'FFFFFF']}\n      table(data, options) do \n        cells.padding      = 5\n        cells.border_width = 0.5\n        cells.border_color = GREY\n\n        row(0).font_weight = 'bold'\n        row(0).border_color = BLACK\n        row(1).border_top_color = BLACK\n\n        column(2).align = :right\n        column(3).align = :right\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>View Code:</p>\n\n<pre><code>- content_for :title, 'Full Statement Listing'\n\n- content_for :toolbar do\n  %a.back(href='/balances') Back\n\n%table\n  %thead\n    %tr\n      %th.year(rowspan=2) Year\n      %th.month(rowspan=2) Month\n      %th.accounts{colspan: @customer.accounts.size} Accounts\n    %tr\n      - @customer.accounts.each do |account|\n        %th= account.name\n  - @today.year.downto(@today.year - 3) do |year|\n    %tbody\n      - x = (@today.year == year) ? @today.month : 12\n      - x.downto(1) do |month|\n        %tr\n          - if month == x\n            %td{rowspan: x}= year\n          %td= Date::MONTHNAMES[month]\n          - @customer.accounts.each do |acct|\n            - if acct.activity[year] &amp;&amp; acct.activity[year][month]\n              %td{'data-transactions' =&gt; acct.activity[year][month]}\n                - stmt = acct.statement(year, month)\n                = link_to 'View', url(:statements, :show, id: stmt.to_s)\n                = link_to image_tag('/icons/document-pdf.png', alt: 'Download PDF'), url(:statements, :show, id: stmt, format: :pdf), class: :pdf\n            - else\n              %td\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "associations", "factory-bot"], "comments": [{"owner": {"reputation": 10000, "user_id": 1606888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/15a67c5384ba658abc462e0312450728?s=128&d=identicon&r=PG", "display_name": "Thomas Klemm", "link": "https://stackoverflow.com/users/1606888/thomas-klemm"}, "edited": false, "score": 0, "creation_date": 1430314554, "post_id": 29945312, "comment_id": 48011528, "body": "What does the full backtrace say? Try running your spec with <code>rspec -b</code> for a full backtrace."}, {"owner": {"reputation": 7262, "user_id": 845371, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8095efdc89f4a70029477fcb58cddd06?s=128&d=identicon&r=PG", "display_name": "Rafael Adel", "link": "https://stackoverflow.com/users/845371/rafael-adel"}, "reply_to_user": {"reputation": 10000, "user_id": 1606888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/15a67c5384ba658abc462e0312450728?s=128&d=identicon&r=PG", "display_name": "Thomas Klemm", "link": "https://stackoverflow.com/users/1606888/thomas-klemm"}, "edited": false, "score": 0, "creation_date": 1430316302, "post_id": 29945312, "comment_id": 48013079, "body": "@Thomas I&#39;ve edited the question with the backtrace, ? please check it :)"}, {"owner": {"reputation": 3050, "user_id": 1810434, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/498Wj.png?s=128&g=1", "display_name": "Joe Essey", "link": "https://stackoverflow.com/users/1810434/joe-essey"}, "edited": false, "score": 0, "creation_date": 1430318200, "post_id": 29945312, "comment_id": 48014750, "body": "Can you please provide your schema.rb file?"}, {"owner": {"reputation": 7262, "user_id": 845371, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8095efdc89f4a70029477fcb58cddd06?s=128&d=identicon&r=PG", "display_name": "Rafael Adel", "link": "https://stackoverflow.com/users/845371/rafael-adel"}, "reply_to_user": {"reputation": 3050, "user_id": 1810434, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/498Wj.png?s=128&g=1", "display_name": "Joe Essey", "link": "https://stackoverflow.com/users/1810434/joe-essey"}, "edited": false, "score": 0, "creation_date": 1430318289, "post_id": 29945312, "comment_id": 48014816, "body": "@JoeEssey I&#39;ve added the <code>schema.rb</code> file in the question. Please check it."}, {"owner": {"reputation": 3050, "user_id": 1810434, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/498Wj.png?s=128&g=1", "display_name": "Joe Essey", "link": "https://stackoverflow.com/users/1810434/joe-essey"}, "edited": false, "score": 0, "creation_date": 1430318647, "post_id": 29945312, "comment_id": 48015127, "body": "Try changing  the definition for <code>factory :photo_with_gallery</code> to use <code>seven_gallery_gallery</code>."}, {"owner": {"reputation": 7262, "user_id": 845371, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8095efdc89f4a70029477fcb58cddd06?s=128&d=identicon&r=PG", "display_name": "Rafael Adel", "link": "https://stackoverflow.com/users/845371/rafael-adel"}, "reply_to_user": {"reputation": 3050, "user_id": 1810434, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/498Wj.png?s=128&g=1", "display_name": "Joe Essey", "link": "https://stackoverflow.com/users/1810434/joe-essey"}, "edited": false, "score": 0, "creation_date": 1430318856, "post_id": 29945312, "comment_id": 48015274, "body": "@JoeEssey It gives me this error <code>undefined method &#39;name&#39; for :photo_with_gallery:Symbol</code>"}, {"owner": {"reputation": 3050, "user_id": 1810434, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/498Wj.png?s=128&g=1", "display_name": "Joe Essey", "link": "https://stackoverflow.com/users/1810434/joe-essey"}, "edited": false, "score": 0, "creation_date": 1430319187, "post_id": 29945312, "comment_id": 48015528, "body": "Maybe I&#39;m not too smart, but this code is difficult to follow because of the use of modules.  Perhaps it is worthwhile for you to start over and get these relationships working correctly and then move to modulization if it&#39;s necessary."}], "answers": [{"tags": [], "owner": {"reputation": 7262, "user_id": 845371, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8095efdc89f4a70029477fcb58cddd06?s=128&d=identicon&r=PG", "display_name": "Rafael Adel", "link": "https://stackoverflow.com/users/845371/rafael-adel"}, "is_accepted": true, "score": 3, "last_activity_date": 1430752315, "creation_date": 1430752315, "answer_id": 30033597, "question_id": 29945312, "link": "https://stackoverflow.com/questions/29945312/factorygirl-cant-write-unknown-attribute-and-undefined-method-name/30033597#30033597", "title": "FactoryGirl - can&#39;t write unknown attribute, and undefined method `name&#39;", "body": "<p>To anyone facing the same problem. The solution is to include <code>foreign_key</code> in both sides: <code>has_many</code> side and <code>belongs_to</code> side.</p>\n"}], "owner": {"reputation": 7262, "user_id": 845371, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8095efdc89f4a70029477fcb58cddd06?s=128&d=identicon&r=PG", "display_name": "Rafael Adel", "link": "https://stackoverflow.com/users/845371/rafael-adel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2539, "favorite_count": 0, "accepted_answer_id": 30033597, "answer_count": 1, "score": 2, "last_activity_date": 1430752315, "creation_date": 1430314305, "last_edit_date": 1430318259, "question_id": 29945312, "link": "https://stackoverflow.com/questions/29945312/factorygirl-cant-write-unknown-attribute-and-undefined-method-name", "title": "FactoryGirl - can&#39;t write unknown attribute, and undefined method `name&#39;", "body": "<p>I'm trying to create a <code>photo</code> factory that's in a many to one association with <code>gallery</code>. And I'm getting two errors, depending on how I specify the association between those two models.</p>\n\n<p>Here's the models:</p>\n\n<p><strong>Photo</strong></p>\n\n<pre><code>belongs_to :gallery, class_name: \"SevenGallery::Gallery\"\n</code></pre>\n\n<p><strong>Gallery</strong></p>\n\n<pre><code>has_many :photos, class_name: \"SevenGallery::Photo\", foreign_key: \"seven_gallery_gallery_id\", dependent: :destroy\n</code></pre>\n\n<p>And the migrations</p>\n\n<pre><code>create_table :seven_gallery_galleries do |t|\n t.string :title  \n   t.timestamps null: false\nend\n\ncreate_table :seven_gallery_photos do |t|\n   t.string :caption\n   t.string :image\n   t.references :seven_gallery_gallery, index: true\n   t.timestamps null: false\n end\n\n add_foreign_key :seven_gallery_photos, :seven_gallery_galleries, on_delete: :cascade\n</code></pre>\n\n<p>Now Here's my factories:\n<strong>Gallery</strong>: </p>\n\n<pre><code>FactoryGirl.define do\n  factory :gallery, class: 'SevenGallery::Gallery' do\n    title \"an event gallery\"\n    factory :gallery_with_photos do \n        after(:build) do |gallery| \n            gallery.photos &lt;&lt; FactoryGirl.create(:photo_one, seven_gallery_gallery_id: gallery)\n            gallery.photos &lt;&lt; FactoryGirl.create(:photo_two, seven_gallery_gallery_id: gallery)\n            gallery.photos &lt;&lt; FactoryGirl.create(:photo_three, seven_gallery_gallery_id: gallery)\n        end\n    end\n  end\nend\n</code></pre>\n\n<p>And <strong>Photo</strong>:</p>\n\n<pre><code>FactoryGirl.define do\n  factory :photo, class: \"SevenGallery::Photo\" do\n\n      factory :photo_one do\n      end\n\n      factory :photo_two do\n      end\n\n      factory :photo_three do\n      end\n\n      factory :photo_with_gallery do\n        gallery \n      end\n  end\nend\n</code></pre>\n\n<p>And here's the controller spec that generates the error:</p>\n\n<pre><code>it \"changes is_main to true in self and false in rest\" do\n    photo_one = FactoryGirl.create(:photo_with_gallery)\n    expect(photo_one.gallery).to be_a SevenGallery::Gallery\nend\n</code></pre>\n\n<p>Whenever I run the test I get this error:</p>\n\n<pre><code>Failure/Error: photo_one = FactoryGirl.create(:photo_with_gallery)\n     ActiveModel::MissingAttributeError:\n       can't write unknown attribute `gallery_id`\n     # ./spec/controllers/seven_gallery/photos_controller_spec.rb:\n</code></pre>\n\n<p>When I change  the association part to be:</p>\n\n<pre><code>factory :photo_with_gallery do\n  association :gallery, factory: gallery    \nend\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>Failure/Error: photo_one = FactoryGirl.create(:photo_with_gallery)\n  NoMethodError:\n     undefined method `name' for :photo_with_gallery:Symbol \n   # ./spec/controllers/seven_gallery/photos_controller_spec.rb:8\n</code></pre>\n\n<p><strong>schema.rb</strong></p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20150428105107) do\n\n  create_table \"seven_event_events\", force: :cascade do |t|\n    t.string   \"title\"\n    t.text     \"description\"\n    t.datetime \"start_at\"\n    t.datetime \"created_at\",  null: false\n    t.datetime \"updated_at\",  null: false\n  end\n\n  create_table \"seven_gallery_galleries\", force: :cascade do |t|\n    t.string   \"title\"\n    t.datetime \"created_at\",           null: false\n    t.datetime \"updated_at\",           null: false\n    t.integer  \"seven_event_event_id\"\n  end\n\n  add_index \"seven_gallery_galleries\", [\"seven_event_event_id\"], name: \"index_seven_gallery_galleries_on_seven_event_event_id\"\n\n  create_table \"seven_gallery_photos\", force: :cascade do |t|\n    t.string   \"caption\"\n    t.string   \"image\"\n    t.integer  \"seven_gallery_gallery_id\"\n    t.datetime \"created_at\",                               null: false\n    t.datetime \"updated_at\",                               null: false\n    t.boolean  \"is_new\",                   default: true\n    t.boolean  \"is_featured\",              default: false\n    t.text     \"description\"\n    t.string   \"alt\"\n    t.integer  \"position\",                 default: 0\n    t.boolean  \"is_main\",                  default: false\n  end\n\n  add_index \"seven_gallery_photos\", [\"seven_gallery_gallery_id\"], name: \"index_seven_gallery_photos_on_seven_gallery_gallery_id\"\n\nend\n</code></pre>\n\n<p><strong>Backtrace</strong>:</p>\n\n<pre><code># /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/activerecord-4.2.1/lib/active_record/attribute.rb:138:in `with_value_from_database'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/activerecord-4.2.1/lib/active_record/attribute_set.rb:39:in `write_from_user'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/activerecord-4.2.1/lib/active_record/attribute_methods/write.rb:74:in `write_attribute_with_type_cast'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/activerecord-4.2.1/lib/active_record/attribute_methods/write.rb:56:in `write_attribute'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/activerecord-4.2.1/lib/active_record/attribute_methods/dirty.rb:96:in `write_attribute'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/activerecord-4.2.1/lib/active_record/attribute_methods.rb:373:in `[]='\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/activerecord-4.2.1/lib/active_record/associations/belongs_to_association.rb:83:in `replace_keys'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/activerecord-4.2.1/lib/active_record/associations/belongs_to_association.rb:14:in `replace'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/activerecord-4.2.1/lib/active_record/associations/singular_association.rb:17:in `writer'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/activerecord-4.2.1/lib/active_record/associations/builder/association.rb:123:in `gallery='\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/factory_girl-4.5.0/lib/factory_girl/attribute_assigner.rb:16:in `public_send'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/factory_girl-4.5.0/lib/factory_girl/attribute_assigner.rb:16:in `block (2 levels) in object'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/factory_girl-4.5.0/lib/factory_girl/attribute_assigner.rb:15:in `each'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/factory_girl-4.5.0/lib/factory_girl/attribute_assigner.rb:15:in `block in object'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/factory_girl-4.5.0/lib/factory_girl/attribute_assigner.rb:14:in `tap'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/factory_girl-4.5.0/lib/factory_girl/attribute_assigner.rb:14:in `object'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/factory_girl-4.5.0/lib/factory_girl/evaluation.rb:12:in `object'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/factory_girl-4.5.0/lib/factory_girl/strategy/create.rb:9:in `result'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/factory_girl-4.5.0/lib/factory_girl/factory.rb:42:in `run'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/factory_girl-4.5.0/lib/factory_girl/factory_runner.rb:23:in `block in run'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/activesupport-4.2.1/lib/active_support/notifications.rb:166:in `instrument'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/factory_girl-4.5.0/lib/factory_girl/factory_runner.rb:22:in `run'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/factory_girl-4.5.0/lib/factory_girl/strategy_syntax_method_registrar.rb:20:in `block in define_singular_strategy_method'\n     # ./spec/controllers/seven_gallery/photos_controller_spec.rb:8:in `block (3 levels) in &lt;module:SevenGallery&gt;'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/example.rb:177:in `instance_exec'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/example.rb:177:in `block in run'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/example.rb:385:in `block in with_around_and_singleton_context_hooks'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/example.rb:343:in `block in with_around_example_hooks'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/hooks.rb:474:in `block in run'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/hooks.rb:614:in `block in run_around_example_hooks_for'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/example.rb:247:in `call'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/example.rb:247:in `call'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-rails-3.2.1/lib/rspec/rails/example/controller_example_group.rb:179:in `block (2 levels) in &lt;module:ControllerExampleGroup&gt;'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/example.rb:333:in `instance_exec'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/example.rb:333:in `instance_exec'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/hooks.rb:387:in `execute_with'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/hooks.rb:616:in `block (2 levels) in run_around_example_hooks_for'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/example.rb:247:in `call'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/example.rb:247:in `call'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-rails-3.2.1/lib/rspec/rails/adapters.rb:113:in `block (2 levels) in &lt;module:MinitestLifecycleAdapter&gt;'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/example.rb:333:in `instance_exec'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/example.rb:333:in `instance_exec'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/hooks.rb:387:in `execute_with'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/hooks.rb:616:in `block (2 levels) in run_around_example_hooks_for'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/example.rb:247:in `call'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/example.rb:247:in `call'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/hooks.rb:617:in `run_around_example_hooks_for'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/hooks.rb:474:in `run'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/example.rb:343:in `with_around_example_hooks'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/example.rb:385:in `with_around_and_singleton_context_hooks'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/example.rb:174:in `run'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/example_group.rb:549:in `block in run_examples'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/example_group.rb:545:in `map'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/example_group.rb:545:in `run_examples'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/example_group.rb:512:in `run'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/example_group.rb:513:in `block in run'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/example_group.rb:513:in `map'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/example_group.rb:513:in `run'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/runner.rb:110:in `block (3 levels) in run_specs'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/runner.rb:110:in `map'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/runner.rb:110:in `block (2 levels) in run_specs'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/configuration.rb:1526:in `with_suite_hooks'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/runner.rb:109:in `block in run_specs'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/reporter.rb:62:in `report'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/runner.rb:108:in `run_specs'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/runner.rb:86:in `run'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/runner.rb:70:in `run'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/lib/rspec/core/runner.rb:38:in `invoke'\n     # /home/rafael/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0/gems/rspec-core-3.2.3/exe/rspec:4:in `&lt;top (required)&gt;'\n     # /home/rafael/.rbenv/versions/2.2.0/bin/rspec:23:in `load'\n     # /home/rafael/.rbenv/versions/2.2.0/bin/rspec:23:in `&lt;main&gt;'\n</code></pre>\n\n<p>Any help would ne appreciated. Thanks.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "ssl", "openssl", "net-http"], "comments": [{"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1430314510, "post_id": 29945204, "comment_id": 48011486, "body": "Might be a network issue, i.e. some middlebox doing traffic shaping. Check with other software from the same machine to see if it is specific to the machine or really happens only with ruby."}, {"owner": {"reputation": 652, "user_id": 1096391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a5b0116d025596de6fc9e61ce4d8912?s=128&d=identicon&r=PG&f=1", "display_name": "lookitsatravis", "link": "https://stackoverflow.com/users/1096391/lookitsatravis"}, "reply_to_user": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1430315374, "post_id": 29945204, "comment_id": 48012214, "body": "@SteffenUllrich I just checked cURL/wget/Postman...cURL and Postman work just fine, but wget does not work. It has the exact same behavior. Interestingly, I notice that wget attempts to connect to IPv6 address first which fails. When it connects to the IPv4 address, it completes immediately. So, I believe that the problem is with IPv6 somehow..."}, {"owner": {"reputation": 652, "user_id": 1096391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a5b0116d025596de6fc9e61ce4d8912?s=128&d=identicon&r=PG&f=1", "display_name": "lookitsatravis", "link": "https://stackoverflow.com/users/1096391/lookitsatravis"}, "reply_to_user": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1430316718, "post_id": 29945204, "comment_id": 48013406, "body": "Thanks @SteffenUllrich - it was IPv6 causing the issue. Disabling it solved the problem."}], "answers": [{"tags": [], "owner": {"reputation": 652, "user_id": 1096391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a5b0116d025596de6fc9e61ce4d8912?s=128&d=identicon&r=PG&f=1", "display_name": "lookitsatravis", "link": "https://stackoverflow.com/users/1096391/lookitsatravis"}, "is_accepted": true, "score": 5, "last_activity_date": 1430316619, "creation_date": 1430316619, "answer_id": 29946263, "question_id": 29945204, "link": "https://stackoverflow.com/questions/29945204/nethttp-extremely-slow-responses-for-https-requests/29946263#29946263", "title": "Net::HTTP extremely slow responses for HTTPS requests", "body": "<p>The issue was not Ruby or OpenSSL or any of the above libraries. The problem is that IPv6 addresses were not resolving on my MacBook. DNS lookup returned the IPv6 address first, so the libraries tried to connect to that until it timed out and then they connected to the IPv4 addresses which worked just fine.</p>\n\n<p>Disabling IPv6 for OS X Yosemite 10.10.2 worked for me. It's not ideal, but until I can determine another solution, it works.</p>\n\n<pre><code>networksetup -setv6off \"Wi-Fi\"\n</code></pre>\n\n<p>Thanks @SteffenUllrich for pointing me in that direction.</p>\n"}, {"tags": [], "owner": {"reputation": 635, "user_id": 1027220, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/c3376bb6869ac5e702763b4e550d9447?s=128&d=identicon&r=PG", "display_name": "Natan Rubinstein", "link": "https://stackoverflow.com/users/1027220/natan-rubinstein"}, "is_accepted": false, "score": -2, "last_activity_date": 1491726888, "creation_date": 1491726888, "answer_id": 43304707, "question_id": 29945204, "link": "https://stackoverflow.com/questions/29945204/nethttp-extremely-slow-responses-for-https-requests/43304707#43304707", "title": "Net::HTTP extremely slow responses for HTTPS requests", "body": "<p>What solved the problem for me was disabling the Antivirus</p>\n"}], "owner": {"reputation": 652, "user_id": 1096391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a5b0116d025596de6fc9e61ce4d8912?s=128&d=identicon&r=PG&f=1", "display_name": "lookitsatravis", "link": "https://stackoverflow.com/users/1096391/lookitsatravis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1186, "favorite_count": 0, "accepted_answer_id": 29946263, "answer_count": 2, "score": 6, "last_activity_date": 1491726888, "creation_date": 1430314047, "last_edit_date": 1430315977, "question_id": 29945204, "link": "https://stackoverflow.com/questions/29945204/nethttp-extremely-slow-responses-for-https-requests", "title": "Net::HTTP extremely slow responses for HTTPS requests", "body": "<p>For some reason, on my development machine I'm getting very, very slow responses for HTTPS requests performed via Net::HTTP. I've tried RestClient and HTTParty and they both have the same issue. It seems to have sprung from nowhere. I've made these requests hundreds of times without issue, but today they are unbearably slow.</p>\n\n<pre><code>pry(main)&gt; puts Time.now; HTTParty.get('https://api.easypost.com/v2/addresses'); puts Time.now;\n2015-04-29 08:07:08 -0500\n2015-04-29 08:09:39 -0500\n</code></pre>\n\n<p>As you can see, the response took 2.5 minutes. And it's not just this EasyPost API URL. I've tried numerous SSL requests to servers I know I can connect to (<a href=\"https://google.com\">https://google.com</a>, <a href=\"https://weather.com\">https://weather.com</a>, etc.) and they all result in the same behavior. Also, I noticed that the same thing happens for requests that are redirected from HTTP to HTTPS. Now, check out a non-ssl request:</p>\n\n<pre><code>pry(main)&gt; puts Time.now; HTTParty.get('http://lookitsatravis.com'); puts Time.now;\n2015-04-29 08:12:22 -0500\n2015-04-29 08:12:22 -0500\n</code></pre>\n\n<p>Instantaneous. What gives? My guess it is some configuration problem somewhere between Ruby and OpenSSL. I've reinstalled both (using Ruby 2.2.1 and OpenSSL 1.0.2a) and I'm using OS X Yosemite 10.10.2 for what it's worth. Reinstalled all my gems, but the problem persists. I tried changing my DNS settings just in case, but no dice. Is there anywhere else I can look or any configuration I can change that will fix this issue?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1430313621, "post_id": 29945005, "comment_id": 48010785, "body": "<code>if bw.any? { |word| @nick =~ &#47;#{word}&#47;}</code> should work. <a href=\"http://rubular.com/r/VYQ0wyfyRv\" rel=\"nofollow noreferrer\">Example</a>"}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1430314254, "post_id": 29945265, "comment_id": 48011286, "body": "this is a much better solution and other than <code>Regexp.escape</code> I just added it as a suggestion in my comment below."}, {"owner": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 0, "creation_date": 1430315230, "post_id": 29945265, "comment_id": 48012091, "body": "I fail to see the benefit of a regexp here (in the second solution)."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 1, "creation_date": 1430315681, "post_id": 29945265, "comment_id": 48012495, "body": "@undur_gongor Frankly, me too."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1432240871, "last_edit_date": 1432240871, "creation_date": 1430314197, "answer_id": 29945265, "question_id": 29945005, "link": "https://stackoverflow.com/questions/29945005/how-to-check-if-string-contains-a-part-of-an-array-in-ruby/29945265#29945265", "title": "How to check if string contains a part of an array in Ruby?", "body": "<pre><code>@nick =~ Regexp.new(bw.map { |w| Regexp.escape(w) }.join('|'))\n</code></pre>\n\n<p>Here we join all strings in <code>bw</code> into one regular expression, escaping possible symbols that have special meaning in a regular expression and check the input against it.</p>\n\n<p>Another way to achieve this functionality is to check for every blacklisted word separately:</p>\n\n<pre><code>bw.any? { |w| @nick[Regexp.new(Regexp.escape(w))] }\n</code></pre>\n\n<p>Hope it helps.</p>\n"}, {"comments": [{"owner": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 1, "creation_date": 1430315791, "post_id": 29945311, "comment_id": 48012591, "body": "<code>@nick.include?(word)</code> could be written shorter as <code>@nick[word]</code>. Not sure if this is really an improvement, though."}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 0, "creation_date": 1430315954, "post_id": 29945311, "comment_id": 48012732, "body": "@undur_gongor : thanks for your point for shorter trick. I have updated my answer :)"}, {"owner": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 0, "creation_date": 1430316582, "post_id": 29945311, "comment_id": 48013311, "body": "I assume, the regexp version is only faster if you can build it once and query it often. I just tried and (at least for small lists) the regexp creation is far more expensive than iterating through the array. In addition, you may have to think about escaping special characters as in mudasobwa&#39;s answer."}, {"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "reply_to_user": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "edited": false, "score": 1, "creation_date": 1432241390, "post_id": 29945311, "comment_id": 48857288, "body": "@undur_gongor yes, <a href=\"http://patshaughnessy.net/2012/4/3/exploring-rubys-regular-expression-algorithm\" rel=\"nofollow noreferrer\">regexes are built into a slightly optimized form</a> that takes some more time for building, but results in faster checks."}], "tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": true, "score": 2, "last_activity_date": 1430315921, "last_edit_date": 1430315921, "creation_date": 1430314305, "answer_id": 29945311, "question_id": 29945005, "link": "https://stackoverflow.com/questions/29945005/how-to-check-if-string-contains-a-part-of-an-array-in-ruby/29945311#29945311", "title": "How to check if string contains a part of an array in Ruby?", "body": "<p>If your concern is to check only (as your question's title suggests) then:</p>\n\n<pre><code>&gt; bw.any? { |word| @nick[word] }\n=&gt; true \n</code></pre>\n\n<p>Though it might be faster to convert the array of strings into a Regexp:</p>\n\n<pre><code>&gt; bw = [\"test\", \"just\", \"gagan\"]\n&gt; g = /#{bw.join(\"|\")}/\n&gt; g === @nick \n =&gt; true \n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4841997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/247fb5eca9429f7bc17a2896bc0f2252?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/4841997/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 1, "accepted_answer_id": 29945311, "answer_count": 2, "score": 3, "last_activity_date": 1432240871, "creation_date": 1430313534, "question_id": 29945005, "link": "https://stackoverflow.com/questions/29945005/how-to-check-if-string-contains-a-part-of-an-array-in-ruby", "title": "How to check if string contains a part of an array in Ruby?", "body": "<p>I have an array of banned words in Ruby:</p>\n\n<pre><code>bw = [\"test\"]\n</code></pre>\n\n<p>I want to check <code>@nick</code> against it.</p>\n\n<p>For example</p>\n\n<p><code>@nick = 'justatest'</code></p>\n\n<p>would match.</p>\n\n<p>I have tried:</p>\n\n<pre><code>if @nick.include?(bw)\n ##\nend\n</code></pre>\n\n<p>but that doesn't seem to be the right way to do it as it doesn't catch it.</p>\n"}, {"tags": ["ruby", "regex", "replace", "regex-negation", "replaceall"], "comments": [{"owner": {"reputation": 86959, "user_id": 1735406, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IF9uS.png?s=128&g=1", "display_name": "Maroun", "link": "https://stackoverflow.com/users/1735406/maroun"}, "edited": false, "score": 0, "creation_date": 1430312621, "post_id": 29944577, "comment_id": 48009912, "body": "What language are you using?"}, {"owner": {"reputation": 86959, "user_id": 1735406, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IF9uS.png?s=128&g=1", "display_name": "Maroun", "link": "https://stackoverflow.com/users/1735406/maroun"}, "edited": false, "score": 0, "creation_date": 1430312745, "post_id": 29944577, "comment_id": 48010012, "body": "I&#39;m not familiar with Ruby, but a simple Googling: <code>sentence.gsub! &#39;ack:&#39;, &#39;ack;&#39;</code> should work :/"}, {"owner": {"reputation": 32214, "user_id": 1977903, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/C7rRA.png?s=128&g=1", "display_name": "bragboy", "link": "https://stackoverflow.com/users/1977903/bragboy"}, "reply_to_user": {"reputation": 86959, "user_id": 1735406, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IF9uS.png?s=128&g=1", "display_name": "Maroun", "link": "https://stackoverflow.com/users/1735406/maroun"}, "edited": false, "score": 0, "creation_date": 1430312810, "post_id": 29944577, "comment_id": 48010066, "body": "i guess i asked the question wrong, see the edit"}], "answers": [{"comments": [{"owner": {"reputation": 32214, "user_id": 1977903, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/C7rRA.png?s=128&g=1", "display_name": "bragboy", "link": "https://stackoverflow.com/users/1977903/bragboy"}, "edited": false, "score": 0, "creation_date": 1430312849, "post_id": 29944674, "comment_id": 48010097, "body": "sorry, i edited the question. i needed the inverse of what i asked."}], "tags": [], "owner": {"reputation": 658033, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": false, "score": 2, "last_activity_date": 1430312986, "last_edit_date": 1430312986, "creation_date": 1430312737, "answer_id": 29944674, "question_id": 29944577, "link": "https://stackoverflow.com/questions/29944577/replace-all-colon-character-that-does-not-occur-after-specific-word-pattern/29944674#29944674", "title": "Replace all colon character that does not occur after specific word pattern", "body": "<p>Use negative lookbehind for replacement.</p>\n\n<p>Search for:</p>\n\n<pre><code>(?&lt;!ack|zen):\n</code></pre>\n\n<p>Replace by:</p>\n\n<pre><code>;\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/nT0iH5/2\" rel=\"nofollow\">RegEx Demo</a></p>\n\n<p><code>(?&lt;!ack|zen):</code> is a negative lookbehind which means match a colon only if it is NOT preceded by <code>ack</code> or <code>zen</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1430336716, "post_id": 29944703, "comment_id": 48027048, "body": "Nice and fast, however, I would not set a capturing group inside the look-behind, it is additional unnecessary overhead. I re-formatted the answer to look better."}], "tags": [], "owner": {"reputation": 21, "user_id": 2550583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52e7926e2755e8a63ddda01013c27a9f?s=128&d=identicon&r=PG&f=1", "display_name": "JTG", "link": "https://stackoverflow.com/users/2550583/jtg"}, "is_accepted": false, "score": 2, "last_activity_date": 1430336639, "last_edit_date": 1430336639, "creation_date": 1430312836, "answer_id": 29944703, "question_id": 29944577, "link": "https://stackoverflow.com/questions/29944577/replace-all-colon-character-that-does-not-occur-after-specific-word-pattern/29944703#29944703", "title": "Replace all colon character that does not occur after specific word pattern", "body": "<p>You need a lookbehind as explained at <a href=\"http://www.regular-expressions.info/lookaround.html\" rel=\"nofollow\">Regular-Expressions</a>. </p>\n\n<p>This works:</p>\n\n<pre><code>(?&lt;=(ack|zen)):\n</code></pre>\n\n<p>You can test it here: <a href=\"https://www.debuggex.com/\" rel=\"nofollow\">https://www.debuggex.com/</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "is_accepted": false, "score": 1, "last_activity_date": 1430313271, "last_edit_date": 1430313271, "creation_date": 1430312890, "answer_id": 29944728, "question_id": 29944577, "link": "https://stackoverflow.com/questions/29944577/replace-all-colon-character-that-does-not-occur-after-specific-word-pattern/29944728#29944728", "title": "Replace all colon character that does not occur after specific word pattern", "body": "<p>You can use a negative lookbehind with two fixed strings:</p>\n\n<pre><code>(?&lt;!ack|zen):\n</code></pre>\n\n<p>To simplify the regex engine work, you can test this too:</p>\n\n<pre><code>:(?&lt;!ack:|zen:)\n</code></pre>\n\n<p><em>(with this last pattern, the two branches of the lookbehind are only tested at positions with an hyphen instead of for each positions in the string for the first pattern.)</em>  </p>\n"}, {"tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1430313124, "last_edit_date": 1430313124, "creation_date": 1430312934, "answer_id": 29944748, "question_id": 29944577, "link": "https://stackoverflow.com/questions/29944577/replace-all-colon-character-that-does-not-occur-after-specific-word-pattern/29944748#29944748", "title": "Replace all colon character that does not occur after specific word pattern", "body": "<p>You can use a negative look-behind here and use <code>gsub</code>:</p>\n\n<pre><code>puts \"pack: my box with five: dozen: liquor: jugs ::: :\".gsub(/(?&lt;!ack|zen):/, \";\")\n</code></pre>\n\n<p><a href=\"https://ideone.com/LAqX9Q\" rel=\"nofollow\">IDEONE DEMO</a></p>\n\n<p>Results:</p>\n\n<pre><code>pack: my box with five; dozen: liquor; jugs ;;; ;\n</code></pre>\n\n<p>You can use the look-behind here because both the parts are of the same size (3 chars).</p>\n"}], "owner": {"reputation": 32214, "user_id": 1977903, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/C7rRA.png?s=128&g=1", "display_name": "bragboy", "link": "https://stackoverflow.com/users/1977903/bragboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "accepted_answer_id": 29944748, "answer_count": 4, "score": 1, "last_activity_date": 1430336639, "creation_date": 1430312504, "last_edit_date": 1430312662, "question_id": 29944577, "link": "https://stackoverflow.com/questions/29944577/replace-all-colon-character-that-does-not-occur-after-specific-word-pattern", "title": "Replace all colon character that does not occur after specific word pattern", "body": "<p>For a given text like </p>\n\n<blockquote>\n  <p>pack: my box with five: dozen: liquor: jugs ::: : </p>\n</blockquote>\n\n<p>I want to replace all the <code>:</code> with <code>;</code> that occur only after the words ack and zen. So the output I expect here is</p>\n\n<blockquote>\n  <p>pack: my box with five; dozen: liquor; jugs ;;; ;</p>\n</blockquote>\n\n<p>Note that <code>:</code> after ack and zen are untouched whereas everything else is replaced.</p>\n\n<p>Please help me. I am only able to match <code>(ack|zen):</code>. This is only giving me the matches <code>ack:</code> and <code>zen:</code>. I dont know how to negate this and construct a regex.</p>\n\n<p>Note: I am using Ruby.</p>\n"}, {"tags": ["ruby", "rspec", "webdriver", "cucumber"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4846357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f188819809e6b1049ad762f20e5ec5b?s=128&d=identicon&r=PG&f=1", "display_name": "Vanatomas", "link": "https://stackoverflow.com/users/4846357/vanatomas"}, "edited": false, "score": 0, "creation_date": 1430313466, "post_id": 29944519, "comment_id": 48010632, "body": "when I do this, I get runtime error  (RuntimeError) ./features/step_definitions/renewals_login_step.rb:30:in `/^I look for &quot;([^&quot;]*)&quot;$/&#39; which does not say anything much"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 11, "user_id": 4846357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f188819809e6b1049ad762f20e5ec5b?s=128&d=identicon&r=PG&f=1", "display_name": "Vanatomas", "link": "https://stackoverflow.com/users/4846357/vanatomas"}, "edited": false, "score": 1, "creation_date": 1430313531, "post_id": 29944519, "comment_id": 48010685, "body": "Of course you get a <code>RuntimeError</code> because you have a <code>fail</code> right after the the <code>each</code> loop. I could update my answer with fully working version of code, if I understood what you are trying to achieve. The thing is that you <b>cannot return from lambdas, period</b>."}, {"owner": {"reputation": 11, "user_id": 4846357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f188819809e6b1049ad762f20e5ec5b?s=128&d=identicon&r=PG&f=1", "display_name": "Vanatomas", "link": "https://stackoverflow.com/users/4846357/vanatomas"}, "edited": false, "score": 0, "creation_date": 1430314240, "post_id": 29944519, "comment_id": 48011272, "body": "for some reason, grabbing elements works, but in array, element is not passing text"}, {"owner": {"reputation": 1330, "user_id": 2540129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a27fee606501906b745105c230f1742c?s=128&d=identicon&r=PG", "display_name": "Johnson", "link": "https://stackoverflow.com/users/2540129/johnson"}, "edited": false, "score": 1, "creation_date": 1430314420, "post_id": 29944519, "comment_id": 48011420, "body": "That&#39;s not a lambda. It&#39;s a poorly formatted block for the enumerator. He can definitely <code>return</code> from that."}, {"owner": {"reputation": 11, "user_id": 4846357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f188819809e6b1049ad762f20e5ec5b?s=128&d=identicon&r=PG&f=1", "display_name": "Vanatomas", "link": "https://stackoverflow.com/users/4846357/vanatomas"}, "edited": false, "score": 0, "creation_date": 1430314628, "post_id": 29944519, "comment_id": 48011591, "body": "I think I am doing completely wrong. Would be better to find element and just click on such         elements.each do |element|          if element.text == @config[number]            element.click          end"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 1330, "user_id": 2540129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a27fee606501906b745105c230f1742c?s=128&d=identicon&r=PG", "display_name": "Johnson", "link": "https://stackoverflow.com/users/2540129/johnson"}, "edited": false, "score": 0, "creation_date": 1430314743, "post_id": 29944519, "comment_id": 48011689, "body": "@Johnson You might go and try to execute <code>[1,2,3].each { |i| return i }</code> in your <code>irb</code>/<code>pry</code>. This <b>is</b> lambda, since every block is in fact lambda."}, {"owner": {"reputation": 1330, "user_id": 2540129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a27fee606501906b745105c230f1742c?s=128&d=identicon&r=PG", "display_name": "Johnson", "link": "https://stackoverflow.com/users/2540129/johnson"}, "edited": false, "score": 0, "creation_date": 1430315207, "post_id": 29944519, "comment_id": 48012072, "body": "Ah, you&#39;re right. Apologies. I was thinking Cucumber steps were wrapped like a method, which would allow you to <code>return</code>. I deleted my answer below. Thanks for pointing that out."}, {"owner": {"reputation": 11, "user_id": 4846357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f188819809e6b1049ad762f20e5ec5b?s=128&d=identicon&r=PG&f=1", "display_name": "Vanatomas", "link": "https://stackoverflow.com/users/4846357/vanatomas"}, "edited": false, "score": 0, "creation_date": 1430315389, "post_id": 29944519, "comment_id": 48012227, "body": "@mudasobwa, thank you, I am new to Ruby and this I was trying figure how to pass that"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 1330, "user_id": 2540129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a27fee606501906b745105c230f1742c?s=128&d=identicon&r=PG", "display_name": "Johnson", "link": "https://stackoverflow.com/users/2540129/johnson"}, "edited": false, "score": 0, "creation_date": 1430315394, "post_id": 29944519, "comment_id": 48012231, "body": "@Johnson You are welcome. Even if steps were wrapped in a methods, that <code>return</code> would return from <i>the method</i> which is definitely not what OP expected."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1430312378, "creation_date": 1430312378, "answer_id": 29944519, "question_id": 29943935, "link": "https://stackoverflow.com/questions/29943935/ruby-rspec-cucumber-array-each-do/29944519#29944519", "title": "Ruby Rspec cucumber array each do", "body": "<p>Remove <code>return</code> from here:</p>\n\n<pre><code>renewals_page.select_profile.click if element.text == @config[number]  \n#   \u21d3\u21d3\u21d3\u21d3\u21d3\u21d3\n#   return element  # removed\n   element   # proper working return from lambda: result of last line\nend \n</code></pre>\n\n<p>the reason is that return keyword may be used to return from <code>method</code> only, not from <code>lambda</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 4846357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f188819809e6b1049ad762f20e5ec5b?s=128&d=identicon&r=PG&f=1", "display_name": "Vanatomas", "link": "https://stackoverflow.com/users/4846357/vanatomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 234, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1430314711, "creation_date": 1430310954, "last_edit_date": 1430312304, "question_id": 29943935, "link": "https://stackoverflow.com/questions/29943935/ruby-rspec-cucumber-array-each-do", "title": "Ruby Rspec cucumber array each do", "body": "<p>I have scenario when upon login to the page, I am presented with numerous profile(can be 1 to 5).\nI am looking for specific profile based by tn number.\nI locate element that represent tn and then put in array to search for all available elements with same to locate correct  profile in order to click on it.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>And(/^I look for \"([^\"]*)\"$/) do |number|   \n   elements = @driver.find_elements(:css =&gt; \"h3.phone-number\")   \n   elements.each do |element|  \n     renewals_page.select_profile.click if element.text == @config[number]  \n       return element  \n   end   \n     fail  \nend\n</code></pre>\n\n<p>I am passing desired number from <code>yaml</code> file depends on the account.\n<code>renewals_page.select_profile.click</code> is defined in another file as method</p>\n\n<pre><code>  def select_profile   \n    @driver.find_element(:css =&gt; \"h3.phone-number\")   \n  end    \n</code></pre>\n\n<p>So when I try to locate that element and click on it, I get following error</p>\n\n<pre><code>unexpected return (LocalJumpError)    \n./features/step_definitions/renewals_login_step.rb:28:in `block (2 levels) in &lt;top (required)&gt;'    \n./features/step_definitions/renewals_login_step.rb:26:in `each'    \n./features/step_definitions/renewals_login_step.rb:26:in `/^I look for \"([^\"]*)\"$/'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "upgrade", "spree"], "answers": [{"tags": [], "owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "is_accepted": false, "score": 1, "last_activity_date": 1430313400, "creation_date": 1430313400, "answer_id": 29944945, "question_id": 29943894, "link": "https://stackoverflow.com/questions/29943894/how-to-upgrade-spree-from-2-2-6-to-3-0-0/29944945#29944945", "title": "How to upgrade Spree from 2.2.6 to 3.0.0", "body": "<p>From <a href=\"https://guides.spreecommerce.com/release_notes/spree_3_0_0.html\" rel=\"nofollow\">https://guides.spreecommerce.com/release_notes/spree_3_0_0.html</a>\nlooks pretty simple, looks like you just upgrade to rails 4.2 (probably the step you're missing. Then upgrade the gems in your Gemfile:</p>\n\n<pre><code>gem 'spree', github: 'spree/spree', branch: '3-0-stable'\n</code></pre>\n\n<p>Run <code>bundle update spree</code>.</p>\n\n<p>Copy over the migrations from Spree (and any other engine) and run them using these commands:</p>\n\n<pre><code>rake railties:install:migrations\nrake db:migrate\n</code></pre>\n\n<p>Looks as though your configuration settings issues could be related to:</p>\n\n<blockquote>\n  <p>Previously payment methods and google analytics trackers could be\n  assigned an environment, such as, production/staging/development etc..\n  This is no longer the case. If you previously relied on importing data\n  from production to a development or staging environment you should\n  ensure to sanitize and/or update these credentials to prevent\n  submitting payments or analytics information to your production\n  account credentials.</p>\n  \n  <p>We recommend that you begin to manage your credentials with\n  environment variables instead.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 12345, "user_id": 429758, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ff984622cd3a9ca31bd0e7e034fc8b17?s=128&d=identicon&r=PG", "display_name": "Prakash Murthy", "link": "https://stackoverflow.com/users/429758/prakash-murthy"}, "is_accepted": false, "score": 1, "last_activity_date": 1430313426, "creation_date": 1430313426, "answer_id": 29944961, "question_id": 29943894, "link": "https://stackoverflow.com/questions/29943894/how-to-upgrade-spree-from-2-2-6-to-3-0-0/29944961#29944961", "title": "How to upgrade Spree from 2.2.6 to 3.0.0", "body": "<p>Spree upgrades from version 2.2.6 to 3.0.0 will have to be done incrementally; with the following being the recommended way:</p>\n\n<ul>\n<li>Upgrade from 2.2.x to 2.3.x following steps at <a href=\"https://guides.spreecommerce.com/developer/upgrades/two-dot-two-to-two-dot-three.html\" rel=\"nofollow\">https://guides.spreecommerce.com/developer/upgrades/two-dot-two-to-two-dot-three.html</a></li>\n<li>Upgrade from 2.3.x to 2.4.x following steps at <a href=\"https://guides.spreecommerce.com/developer/upgrades/two-dot-three-to-two-dot-four.html\" rel=\"nofollow\">https://guides.spreecommerce.com/developer/upgrades/two-dot-three-to-two-dot-four.html</a></li>\n<li>Upgrade from 2.4.x to 3.0.0 following steps at <a href=\"https://guides.spreecommerce.com/release_notes/spree_3_0_0.html#upgrade-tips\" rel=\"nofollow\">https://guides.spreecommerce.com/release_notes/spree_3_0_0.html#upgrade-tips</a></li>\n</ul>\n"}], "owner": {"reputation": 11, "user_id": 4846371, "user_type": "registered", "profile_image": "https://graph.facebook.com/672433456196102/picture?type=large", "display_name": "Machindra Karpe", "link": "https://stackoverflow.com/users/4846371/machindra-karpe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 714, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1430314110, "creation_date": 1430310830, "last_edit_date": 1430314110, "question_id": 29943894, "link": "https://stackoverflow.com/questions/29943894/how-to-upgrade-spree-from-2-2-6-to-3-0-0", "title": "How to upgrade Spree from 2.2.6 to 3.0.0", "body": "<p>I have a ruby on rails shopping site project built using spree 2.2.6 and I want to migrate to spree 3.0.0 but I am getting tons of errors related to configuration settings. Has anyone done this before successfully or does anyone know how to achieve this?</p>\n\n<p>Versions I am using:</p>\n\n<p>Ruby: 2.1.1<br/>\nRails: 4.0.10<br/>\nSpree: 2.2.6<br/></p>\n\n<p>I am also using compatible versions of other gems like:</p>\n\n<pre><code>'spree_gateway', \n'spree_auth_devise',\n'spree_i18n',\n'spree_recently_viewed',\n'spree_tax_cloud', \n'spree_gift_card'\n</code></pre>\n\n<p>Some of these can be upgraded while some can't be. </p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "faye"], "owner": {"reputation": 101, "user_id": 4441019, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/feac82a789584b898cfec2ff9d2dae4d?s=128&d=identicon&r=PG&f=1", "display_name": "Don Woodward", "link": "https://stackoverflow.com/users/4441019/don-woodward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1430321748, "creation_date": 1430310079, "last_edit_date": 1430321748, "question_id": 29943612, "link": "https://stackoverflow.com/questions/29943612/faye-chat-application-failing-on-web-server-bluehost", "title": "Faye chat application failing on web server (bluehost)", "body": "<p>This is more of a network question , I believe. Not sure what the issue is. I have a chat application which uses faye and it runs fine on my system(rails app)\nwith localhost:3000 having faye mounted on it.I recently deployed this rails app onto bluehost server and when I try to use the faye client on browser ,its giving me this error:</p>\n\n<p>WebSocket connection to 'ws://chat.xyz.com/faye' failed: Error during WebSocket handshake: Unexpected response code: 500</p>\n\n<p>The below requests\\handshakes keep on repeating.</p>\n\n<p>GET ...chat.xyz.com/faye?message=%5B%7B%22channel%22%3A%22%2Fmet\u2026ing%22%5D%2C%22id%22%3A%221%22%2C%22ext%22%3A%7B%7D%7D%5D&amp;jsonp=<strong>jsonp3</strong> \nGET ...chat.xyz.com/faye?message=%5B%7B%22channel%22%3A%22%2Fmet\u2026ing%22%5D%2C%22id%22%3A%221%22%2C%22ext%22%3A%7B%7D%7D%5D&amp;jsonp=<strong>jsonp4</strong> </p>\n\n<p>GET ...chat.xyz.com/faye?message=%5B%7B%22channel%22%3A%22%2Fmet\u2026ing%22%5D%2C%22id%22%3A%221%22%2C%22ext%22%3A%7B%7D%7D%5D&amp;jsonp=<strong>jsonp5</strong> </p>\n\n<p>GET ...chat.xyz.com/faye?message=%5B%7B%22channel%22%3A%22%2Fmet\u2026ing%22%5D%2C%22id%22%3A%221%22%2C%22ext%22%3A%7B%7D%7D%5D&amp;jsonp=<strong>jsonp6</strong> </p>\n\n<p>GET ...chat.xyz.com/faye?message=%5B%7B%22channel%22%3A%22%2Fmet\u2026ing%22%5D%2C%22id%22%3A%221%22%2C%22ext%22%3A%7B%7D%7D%5D&amp;jsonp=<strong>jsonp7</strong> </p>\n\n<p>GET ...chat.xyz.com/faye?message=%5B%7B%22channel%22%3A%22%2Fmet\u2026ing%22%5D%2C%22id%22%3A%221%22%2C%22ext%22%3A%7B%7D%7D%5D&amp;jsonp=<strong>jsonp8</strong> </p>\n\n<p>GET ...chat.xyz.com/faye?message=%5B%7B%22channel%22%3A%22%2Fmet\u2026ing%22%5D%2C%22id%22%3A%221%22%2C%22ext%22%3A%7B%7D%7D%5D&amp;jsonp=<strong>jsonp9</strong> </p>\n\n<p>GET ...chat.xyz.com/faye?message=%5B%7B%22channel%22%3A%22%2Fmet\u2026ng%22%5D%2C%22id%22%3A%221%22%2C%22ext%22%3A%7B%7D%7D%5D&amp;jsonp=<strong>jsonp10</strong></p>\n\n<p>And the failed handshakes\\requests keep on getting repeated. Seeing the same on server logs also(except the 500 message obviously). The logs dont give any error apart from these repeats</p>\n\n<p>Is it because of proxy\\firewall issue. I recently came across an article : \n<a href=\"http://www.infoq.com/articles/Web-Sockets-Proxy-Servers\" rel=\"nofollow\">http://www.infoq.com/articles/Web-Sockets-Proxy-Servers</a></p>\n\n<p>I am not sure whether its related to blocking of requests by proxy servers. </p>\n\n<p>Tried switching to secure protcol. https. Didn't help. \nI use a simple client like this:</p>\n\n<p>var client = new Faye.Client('<a href=\"http://chat.xyz.com/faye\" rel=\"nofollow\">http://chat.xyz.com/faye</a>');</p>\n\n<p>Any help would be great.</p>\n"}, {"tags": ["ruby", "multipartform-data", "net-http"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 3873380, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d39cdcfe92cdfda37671a90b1b2dcedf?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Deore", "link": "https://stackoverflow.com/users/3873380/nikhil-deore"}, "edited": false, "score": 0, "creation_date": 1430309879, "post_id": 29942949, "comment_id": 48007677, "body": "I use the above code but now i am getting another error saying :C:/Ruby193/lib/ruby/1.9.1/net/http.rb:673:in <code>use_ssl=&#39;: use_ssl value changed, but session already started (IOError)         from TestMultipart.rb:11:in </code>block (2 levels) in &lt;main&gt;&#39;         from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:746:in <code>start&#39;         from C:&#47;Ruby193&#47;lib&#47;ruby&#47;1.9.1&#47;net&#47;http.rb:557:in </code>start&#39;         from TestMultipart.rb:10:in <code>block in &lt;main&gt;&#39;         from TestMultipart.rb:4:in </code>open&#39;         from TestMultipart.rb:4:in `&lt;main&gt;&#39;"}, {"owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "reply_to_user": {"reputation": 69, "user_id": 3873380, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d39cdcfe92cdfda37671a90b1b2dcedf?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Deore", "link": "https://stackoverflow.com/users/3873380/nikhil-deore"}, "edited": false, "score": 0, "creation_date": 1430311374, "post_id": 29942949, "comment_id": 48008900, "body": "I fixed, please try again."}, {"owner": {"reputation": 69, "user_id": 3873380, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d39cdcfe92cdfda37671a90b1b2dcedf?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Deore", "link": "https://stackoverflow.com/users/3873380/nikhil-deore"}, "edited": false, "score": 0, "creation_date": 1430372439, "post_id": 29942949, "comment_id": 48040072, "body": "C:\\Ruby193&gt;ruby TestMultipart.rb C:/Ruby193/lib/ruby/1.9.1/net/http.rb:673:in <code>use_ssl=&#39;: use_ssl value changed, but session already started (IOError)         from TestMultipart.rb:12:in </code>block (2 levels) in &lt;main&gt;&#39;         from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:746:in <code>start&#39;         from C:&#47;Ruby193&#47;lib&#47;ruby&#47;1.9.1&#47;net&#47;http.rb:557:in </code>start&#39;         from TestMultipart.rb:11:in <code>block in &lt;main&gt;&#39;         from TestMultipart.rb:5:in </code>open&#39;         from TestMultipart.rb:5:in `&lt;main&gt;&#39;"}, {"owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "reply_to_user": {"reputation": 69, "user_id": 3873380, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d39cdcfe92cdfda37671a90b1b2dcedf?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Deore", "link": "https://stackoverflow.com/users/3873380/nikhil-deore"}, "edited": false, "score": 0, "creation_date": 1430372517, "post_id": 29942949, "comment_id": 48040106, "body": "you change <code>http.use_ssl = true</code> to <code>http.use_ssl = (url.scheme == &quot;https&quot;)</code>?"}, {"owner": {"reputation": 69, "user_id": 3873380, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d39cdcfe92cdfda37671a90b1b2dcedf?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Deore", "link": "https://stackoverflow.com/users/3873380/nikhil-deore"}, "edited": false, "score": 0, "creation_date": 1430372570, "post_id": 29942949, "comment_id": 48040127, "body": "i think we should not start HTTP connection before setting use_ssl"}, {"owner": {"reputation": 69, "user_id": 3873380, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d39cdcfe92cdfda37671a90b1b2dcedf?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Deore", "link": "https://stackoverflow.com/users/3873380/nikhil-deore"}, "edited": false, "score": 0, "creation_date": 1430372624, "post_id": 29942949, "comment_id": 48040157, "body": "No, i think it was your change"}, {"owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "reply_to_user": {"reputation": 69, "user_id": 3873380, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d39cdcfe92cdfda37671a90b1b2dcedf?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Deore", "link": "https://stackoverflow.com/users/3873380/nikhil-deore"}, "edited": false, "score": 0, "creation_date": 1430373065, "post_id": 29942949, "comment_id": 48040363, "body": "can you try this: <code>res = Net::HTTP.start(url.host, url.port, :use_ssl =&gt; url.scheme == &#39;https&#39;) do |http|...</code>"}, {"owner": {"reputation": 69, "user_id": 3873380, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d39cdcfe92cdfda37671a90b1b2dcedf?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Deore", "link": "https://stackoverflow.com/users/3873380/nikhil-deore"}, "edited": false, "score": 0, "creation_date": 1430374705, "post_id": 29942949, "comment_id": 48041168, "body": "It worked for me the error has gone but my parameters are not getting submitted."}, {"owner": {"reputation": 69, "user_id": 3873380, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d39cdcfe92cdfda37671a90b1b2dcedf?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Deore", "link": "https://stackoverflow.com/users/3873380/nikhil-deore"}, "edited": false, "score": 0, "creation_date": 1430375627, "post_id": 29942949, "comment_id": 48041628, "body": "yes, i tried your solution but my set_form_data is not going with my request"}], "tags": [], "owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "is_accepted": false, "score": 0, "last_activity_date": 1430376144, "last_edit_date": 1430376144, "creation_date": 1430308400, "answer_id": 29942949, "question_id": 29942023, "link": "https://stackoverflow.com/questions/29942023/how-to-send-multpart-form-data-file-along-with-other-form-parameters-in-ruby-net/29942949#29942949", "title": "How to send multpart/form-data file along with other form parameters in ruby net/http?", "body": "<p>You can try this.</p>\n\n<pre><code>require 'net/http/post/multipart'\n\nurl = URI.parse('https:action/upload-v1/file')\nFile.open(\"rough.txt\") do |text|\n    \"file\" =&gt; UploadIO.new(text, \"text/plain\", \"rough.txt\")\n    req = Net::HTTP::Post::Multipart.new url.path\n    req.basic_auth 'nikhil', 'Lee'\n    req.set_form_data('deviceId' =&gt; '2366', 'checksum' =&gt; '132654798', 'fileSize' =&gt; '1260', 'fileType' =&gt; 'configuration', 'compressionType' =&gt; 'Z')\n    res = Net::HTTP.start(url.host, url.port, :use_ssl =&gt; url.scheme == 'https') do |http|\n       http.verify_mode = OpenSSL::SSL::VERIFY_NONE\n       response = http.request(req)\n       puts response.body\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 3873380, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d39cdcfe92cdfda37671a90b1b2dcedf?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Deore", "link": "https://stackoverflow.com/users/3873380/nikhil-deore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1135, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1430526450, "creation_date": 1430305997, "last_edit_date": 1430526450, "question_id": 29942023, "link": "https://stackoverflow.com/questions/29942023/how-to-send-multpart-form-data-file-along-with-other-form-parameters-in-ruby-net", "title": "How to send multpart/form-data file along with other form parameters in ruby net/http?", "body": "<p>I want to upload a file using <strong>POST</strong> method having a content type of <code>multipart/form-data</code> along with other form parameters. I have tried with this code but I'm getting an error.</p>\n\n<pre><code>require 'net/http/post/multipart'\n\nurl = URI.parse('https:action/upload-v1/file')\nFile.open(\"rough.txt\") do |text|\n  req = Net::HTTP::Post::Multipart.new url.path,\n    \"file\" =&gt; UploadIO.new(text, \"text/plain\", \"rough.txt\")\n\n    req.basic_auth 'nikhil', 'Lee'\n\n    req.verify_mode = OpenSSL::SSL::VERIFY_NONE\n    req.use_ssl = true\n    req.set_form_data('deviceId' =&gt; '2366', 'checksum' =&gt; '132654798', 'fileSize' =&gt; '1260', 'fileType' =&gt; 'configuration', 'compressionType' =&gt; 'Z')\n  res = Net::HTTP.start(url.host, url.port) do |http|\n    response = http.request(req)\n    puts response.body\n\n  end\nend\n</code></pre>\n\n<p><strong>Error:</strong></p>\n\n<pre><code>C:\\Ruby193&gt;ruby TestMultipart.rb\nTestMultipart.rb:10:in `block in &lt;main&gt;': undefined method `verify_mode=' for #&lt;Net::HTTP::Post::Multipart POST&gt; (NoMethodError)\n        from TestMultipart.rb:4:in `open'\n        from TestMultipart.rb:4:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 3, "creation_date": 1430305583, "post_id": 29941827, "comment_id": 48004465, "body": "I don&#39;t understand this question. What does operator precedence have to do with (existing) ability to override operators?"}, {"owner": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1430306125, "post_id": 29941827, "comment_id": 48004844, "body": "what do you want to do ?"}], "answers": [{"tags": [], "owner": {"reputation": 726, "user_id": 2148710, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/SUfsw.jpg?s=128&g=1", "display_name": "jack-nie", "link": "https://stackoverflow.com/users/2148710/jack-nie"}, "is_accepted": false, "score": 2, "last_activity_date": 1430305753, "creation_date": 1430305753, "answer_id": 29941944, "question_id": 29941827, "link": "https://stackoverflow.com/questions/29941827/can-we-override-operators-in-ruby/29941944#29941944", "title": "Can we override operators in Ruby?", "body": "<p>yes you can,you can do it like this </p>\n\n<pre><code>class String\n  def &lt;&lt; str\n    self + \"*\" + str\n  end\nend\n\nputs \"str\" &lt;&lt; \"sss\"  \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": true, "score": 2, "last_activity_date": 1430307970, "last_edit_date": 1495540684, "creation_date": 1430307618, "answer_id": 29942624, "question_id": 29941827, "link": "https://stackoverflow.com/questions/29941827/can-we-override-operators-in-ruby/29942624#29942624", "title": "Can we override operators in Ruby?", "body": "<p>When humans evaluate expressions, they usually do so starting at the left of the expression and working towards the right. For example, working from left to right we get a result of 300 from the following expression: </p>\n\n<pre><code>10 + 20 * 10 = 300 \n</code></pre>\n\n<p>This is because we, as humans, add <code>10</code> to <code>20</code>, resulting in <code>30</code> and then multiply that by <code>10</code> to arrive at <code>300</code>. Ask Ruby to perform the same calculation and you get a very different answer: </p>\n\n<pre><code>&gt; 10 + 20 * 10\n=&gt; 210\n</code></pre>\n\n<p>This is a direct result of operator precedence. Ruby has a set of rules that tell it in which order operators should be evaluated in an expression. Clearly, Ruby considers the multiplication operator (*) to be of a higher precedence than the addition (+) operator. </p>\n\n<h2>Overriding Operator Precedence</h2>\n\n<p>The precedence built into Ruby can be overridden by surrounding the lower priority section of an expression with parentheses. For example: </p>\n\n<pre><code>&gt; (10 + 20) * 10\n=&gt; 300\n</code></pre>\n\n<p>In the above example, the expression fragment enclosed in parentheses is evaluated before the higher precedence multiplication. </p>\n\n<p>for more info refer this : </p>\n\n<ul>\n<li><a href=\"http://rubysnippets.com/2013/01/25/operator-overloading-in-ruby/\" rel=\"nofollow noreferrer\">http://rubysnippets.com/2013/01/25/operator-overloading-in-ruby/</a></li>\n<li><a href=\"https://stackoverflow.com/questions/11186815/override-operator-in-ruby\">Override == operator in Ruby</a></li>\n</ul>\n\n<p>I hope this makes you clear to understand :)</p>\n"}], "owner": {"reputation": 4101, "user_id": 1482055, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/f4D9p.jpg?s=128&g=1", "display_name": "Milind", "link": "https://stackoverflow.com/users/1482055/milind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "closed_date": 1430308942, "accepted_answer_id": 29942624, "answer_count": 2, "score": -4, "last_activity_date": 1430307970, "creation_date": 1430305444, "question_id": 29941827, "link": "https://stackoverflow.com/questions/29941827/can-we-override-operators-in-ruby", "closed_reason": "Needs details or clarity", "title": "Can we override operators in Ruby?", "body": "<p>in a case...such as</p>\n\n<pre><code>(10 + 20) * 10\n=&gt; 300\n</code></pre>\n\n<p>the expression fragment enclosed in parentheses is evaluated before the higher precedence multiplication.So does it applies to other operators as well.Can i override other operators such as <code>&lt;&lt; !</code>...etc</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "file-io"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1430304920, "post_id": 29941528, "comment_id": 48003934, "body": "Isn&#39;t it an invalid filename? Anyhow, you can try escaping the slashes (<code>\\&#47;</code>)."}, {"owner": {"reputation": 1, "user_id": 6118730, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tkp4b.png?s=128&g=1", "display_name": "SingularityMatrix", "link": "https://stackoverflow.com/users/6118730/singularitymatrix"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1430305573, "post_id": 29941528, "comment_id": 48004455, "body": "Hey, thanks for dropping in @SergioTulentsev. It is possible to create a file by name &quot;A/B/C&quot;. However, when I try escaping slashes, like so <code>&quot;A\\&#47;B\\&#47;C&quot;</code>, <code>File.open</code> still tries to find for folders <code>A, B and C</code>. Any thoughts?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1430307479, "post_id": 29941528, "comment_id": 48005859, "body": "How do you create such filenames? I tried a couple of things and failed."}, {"owner": {"reputation": 1, "user_id": 6118730, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tkp4b.png?s=128&g=1", "display_name": "SingularityMatrix", "link": "https://stackoverflow.com/users/6118730/singularitymatrix"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1430307853, "post_id": 29941528, "comment_id": 48006147, "body": "Hi @SergioTulentsev, you are right. I wasn&#39;t able to create such filenames. My bad! :)  Everytime I created <code>&quot;A&#47;B&#47;C&quot;</code>, it ended up being <code>&quot;A:B:C&quot;</code>. Using &quot;/&quot; in filenames is prohibited! Thanks for helping out."}], "owner": {"reputation": 1, "user_id": 6118730, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tkp4b.png?s=128&g=1", "display_name": "SingularityMatrix", "link": "https://stackoverflow.com/users/6118730/singularitymatrix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 634, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1430304614, "creation_date": 1430304614, "question_id": 29941528, "link": "https://stackoverflow.com/questions/29941528/read-write-a-file-with-filename-containing-a-forward-slash-in-ruby", "title": "Read/Write a FILE with filename containing a forward slash in Ruby", "body": "<p>How can I read/write a FILE with filename containing Forward slashes (/)?</p>\n\n<p>This is what I'm trying to do - </p>\n\n<pre><code>filename = \"A/B/C\"\n\nfull_path = \"#{Rails.root}/public/barcodes/#{filename}.png\"\n\nFile.open(full_path, 'w') { |f| f.write @barcode_png.to_png(:margin =&gt; 3, :xdim =&gt; 2,:ydim =&gt; 2, :height =&gt; 100) }\n</code></pre>\n\n<p>Everytime I execute this, Ruby tries to find a folder by name <code>A, B and C</code> instead of writing a file <code>\"A/B/C\"</code></p>\n\n<p>Any thoughts on how to make this work? </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 6039, "user_id": 109246, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1807e84760c20f74d9926aa98d7b9b52?s=128&d=identicon&r=PG", "display_name": "Benny Hallett", "link": "https://stackoverflow.com/users/109246/benny-hallett"}, "edited": false, "score": 0, "creation_date": 1430309801, "post_id": 29941386, "comment_id": 48007614, "body": "This is a great interview question for Ruby devs."}], "answers": [{"tags": [], "owner": {"reputation": 1677, "user_id": 396793, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6068f701243a53dc2232422af65ff769?s=128&d=identicon&r=PG", "display_name": "Deradon", "link": "https://stackoverflow.com/users/396793/deradon"}, "is_accepted": true, "score": 7, "last_activity_date": 1430304713, "creation_date": 1430304713, "answer_id": 29941561, "question_id": 29941386, "link": "https://stackoverflow.com/questions/29941386/why-does-my-hash-not-get-filled-when-initializing-with-a-default-object/29941561#29941561", "title": "Why does my Hash not get filled when initializing with a default object", "body": "<p>As the <a href=\"http://ruby-doc.org/core-2.1.5/Hash.html#method-c-new\">API</a> says:</p>\n\n<blockquote>\n  <p>If obj is specified, this single object will be used for all default\n  values.</p>\n</blockquote>\n\n<p>With a small rewrite of your code, it should become clear what happens:</p>\n\n<pre><code>a = []\nh = Hash.new(a)\n3.times { |i| h[:a] &lt;&lt; i }\n\n# This is like:\n# 3.times { |i| a &lt;&lt; i }\n# because `h` does not respond to your key :a\n\nh\n# =&gt; {} \na\n# =&gt; [0, 1, 2]\n</code></pre>\n\n<p>What you want to do, is this:</p>\n\n<pre><code>h = Hash.new { |h, k| h[k] = [] }\n3.times { |i| h[:a] &lt;&lt; i }\n\nh\n# =&gt; {:a=&gt;[0, 1, 2]}\n</code></pre>\n"}], "owner": {"reputation": 3669, "user_id": 348987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBs6M.jpg?s=128&g=1", "display_name": "Christoph Petschnig", "link": "https://stackoverflow.com/users/348987/christoph-petschnig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 1, "closed_date": 1435724207, "accepted_answer_id": 29941561, "answer_count": 1, "score": 2, "last_activity_date": 1430304713, "creation_date": 1430304205, "question_id": 29941386, "link": "https://stackoverflow.com/questions/29941386/why-does-my-hash-not-get-filled-when-initializing-with-a-default-object", "closed_reason": "Duplicate", "title": "Why does my Hash not get filled when initializing with a default object", "body": "<p>Given this code:</p>\n\n<pre><code>h = Hash.new([])\n\n3.times do |i|\n  h[:a] &lt;&lt; i\nend\n</code></pre>\n\n<p>I expect <code>h</code> to be <code>{:a =&gt; [0, 1, 2]}</code>, but it is empty. What am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "railstutorial.org"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4829629, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zt4xMSHRwI4/AAAAAAAAAAI/AAAAAAAAAeY/t8fuZrW0FXw/photo.jpg?sz=128", "display_name": "Nate", "link": "https://stackoverflow.com/users/4829629/nate"}, "edited": false, "score": 0, "creation_date": 1430304766, "post_id": 29941484, "comment_id": 48003844, "body": "Aaaaaaaaah - I don&#39;t know if I should feel bad that it took me so long and couldn&#39;t find that, or if I should feel motivated and encouraged that you figured it out so quickly. Thanks @Gaurav."}, {"owner": {"reputation": 455, "user_id": 4680338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16bb8a33f61a735c68cbd458cc13b121?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Gupta", "link": "https://stackoverflow.com/users/4680338/gaurav-gupta"}, "reply_to_user": {"reputation": 11, "user_id": 4829629, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zt4xMSHRwI4/AAAAAAAAAAI/AAAAAAAAAeY/t8fuZrW0FXw/photo.jpg?sz=128", "display_name": "Nate", "link": "https://stackoverflow.com/users/4829629/nate"}, "edited": false, "score": 0, "creation_date": 1430304929, "post_id": 29941484, "comment_id": 48003946, "body": "I am glad to help you @Nate"}], "tags": [], "owner": {"reputation": 455, "user_id": 4680338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16bb8a33f61a735c68cbd458cc13b121?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Gupta", "link": "https://stackoverflow.com/users/4680338/gaurav-gupta"}, "is_accepted": false, "score": 4, "last_activity_date": 1430304487, "creation_date": 1430304487, "answer_id": 29941484, "question_id": 29941385, "link": "https://stackoverflow.com/questions/29941385/error-full-messages-are-hidden-and-i-cant-figure-out-why/29941484#29941484", "title": "error.full_messages are hidden and I can&#39;t figure out why", "body": "<p>Just change this line:</p>\n\n<pre><code>&lt;% render 'shared/error_messages' %&gt;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>&lt;%= render 'shared/error_messages' %&gt;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4829629, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zt4xMSHRwI4/AAAAAAAAAAI/AAAAAAAAAeY/t8fuZrW0FXw/photo.jpg?sz=128", "display_name": "Nate", "link": "https://stackoverflow.com/users/4829629/nate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430304487, "creation_date": 1430304203, "question_id": 29941385, "link": "https://stackoverflow.com/questions/29941385/error-full-messages-are-hidden-and-i-cant-figure-out-why", "title": "error.full_messages are hidden and I can&#39;t figure out why", "body": "<p>I'm working through a rails tutorial and seem to be stuck on getting some error messages to display on my signup window when an e-mail address, or password is typed in incorrectly. I've included my user controller, new user erb, and error message erb below. Any help would be great. I feel like I've been staring at this forever and getting nowhere.  Thanks in advance for helping.</p>\n\n<p><strong>Error_Message erb</strong></p>\n\n<pre><code>&lt;% if @user.errors.any? %&gt;\n&lt;div id=\"error_explanation\"&gt;\n    &lt;div class=\"alert alert-danger\"&gt;\n        The form contains &lt;%= @user.errors.count %&gt; errors.\n    &lt;/div&gt;\n    &lt;ul&gt;\n        &lt;% @user.errors.full_messages.each do |msg| %&gt;\n        &lt;li&gt; &lt;%= msg %&gt; &lt;/li&gt;\n        &lt;% end %&gt;\n    &lt;/ul&gt;\n&lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>User Controller</strong></p>\n\n<pre><code>class UsersController &lt; ApplicationController\n\ndef show\n@user = User.find(params[:id])\nend\n\ndef new\n@user = User.new\nend\n\ndef create\n@user = User.new(user_params)\nif @user.save\n# Handle a succesful save\nelse\nrender \"new\"    \nend\nend\n\nprivate\n\ndef user_params\n    params.require(:user).permit(:name, :email, :password, \n                                    :password_confirmation)\nend\nend\n</code></pre>\n\n<p><strong>New User erb</strong></p>\n\n<pre><code>&lt;%provide(:title, 'Sign up')%&gt;\n\n&lt;h1&gt;Sign up&lt;/h1&gt;\n&lt;div class=\"row\"&gt;\n&lt;div class =\"col-md-6 col-md-offset-3\"&gt;\n    &lt;%= form_for(@user) do |f| %&gt;\n        &lt;% render 'shared/error_messages' %&gt;\n\n        &lt;%= f.label :name %&gt;\n        &lt;%= f.text_field :name %&gt;\n\n        &lt;%= f.label :email %&gt;\n        &lt;%= f.text_field :email %&gt;\n\n        &lt;%= f.label :password %&gt;\n        &lt;%= f.password_field :password %&gt;\n\n        &lt;%= f.label :password_confirmation, \"Confirmation\" %&gt;\n        &lt;%= f.password_field :password_confirmation %&gt;\n\n        &lt;%= f.submit \"Create my account\", class: \"btn btn-primary\" %&gt;\n\n\n    &lt;% end %&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 5437, "user_id": 1257094, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Ob6MH.jpg?s=128&g=1", "display_name": "milgner", "link": "https://stackoverflow.com/users/1257094/milgner"}, "edited": false, "score": 0, "creation_date": 1430303358, "post_id": 29940776, "comment_id": 48002854, "body": "This is an extremely convoluted topic. You should narrow down what you want to achieve. Which version of XLS, and DOC, complexity of the documents etc. Given that even Word occasionally has problems rendering old word files (not even speaking of Open/LibreOffice), you may be in for a lot of fun..."}, {"owner": {"reputation": 1299, "user_id": 1130176, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/3618314d500643b06b1b88c8671eb840?s=128&d=identicon&r=PG", "display_name": "user1130176", "link": "https://stackoverflow.com/users/1130176/user1130176"}, "edited": false, "score": 0, "creation_date": 1489500171, "post_id": 29940776, "comment_id": 72690355, "body": "I love this topic, it&#39;s extremely useful."}, {"owner": {"reputation": 1440, "user_id": 2758471, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/22a74e41008c9e64ef374bb1bbf1d026?s=128&d=identicon&r=PG&f=1", "display_name": "Y M", "link": "https://stackoverflow.com/users/2758471/y-m"}, "edited": false, "score": 0, "creation_date": 1492757678, "post_id": 29940776, "comment_id": 74123870, "body": "Did you finally manage a solution for this problem?"}], "answers": [{"comments": [{"owner": {"reputation": 1262, "user_id": 3898284, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/RG11s.jpg?s=128&g=1", "display_name": "Mani David", "link": "https://stackoverflow.com/users/3898284/mani-david"}, "edited": false, "score": 1, "creation_date": 1430305944, "post_id": 29941275, "comment_id": 48004722, "body": "i want the pdf files same as in excel with the data and styles, if we go with roo gem then we have to create with our own"}], "tags": [], "owner": {"reputation": 5508, "user_id": 1213618, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/077020668662f01758c0569131a33917?s=128&d=identicon&r=PG&f=1", "display_name": "griffon vulture", "link": "https://stackoverflow.com/users/1213618/griffon-vulture"}, "is_accepted": false, "score": 3, "last_activity_date": 1430303940, "last_edit_date": 1495541394, "creation_date": 1430303940, "answer_id": 29941275, "question_id": 29940776, "link": "https://stackoverflow.com/questions/29940776/convert-excel-and-word-files-to-pdf-using-ruby/29941275#29941275", "title": "Convert Excel and Word files to PDF Using ruby", "body": "<p>There is not a Gem doing all the job. but you can combine some:</p>\n\n<ol>\n<li><p>For excel files - read data using roo GEM - <a href=\"http://roo.rubyforge.org/\" rel=\"nofollow noreferrer\">http://roo.rubyforge.org/</a></p></li>\n<li><p>For word files <a href=\"https://stackoverflow.com/questions/6195001/opening-doc-files-in-ruby\">Opening .doc files in Ruby</a></p></li>\n<li><p>Convert the data readed in previous steps into html.</p></li>\n<li><p>Then convert it to pdf using: <a href=\"https://github.com/pdfkit/PDFKit\" rel=\"nofollow noreferrer\">https://github.com/pdfkit/PDFKit</a></p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 829, "user_id": 5680832, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-isvYmggm3Oc/AAAAAAAAAAI/AAAAAAAAAKY/InixBA2Rhe8/photo.jpg?sz=128", "display_name": "Faisal Raza", "link": "https://stackoverflow.com/users/5680832/faisal-raza"}, "edited": false, "score": 0, "creation_date": 1508766479, "post_id": 42788132, "comment_id": 80729128, "body": "It works fine on local but gives following error on Ubuntu server:  <code>Errno::ENOENT (No such file or directory @ rb_sysopen</code>"}, {"owner": {"reputation": 1299, "user_id": 1130176, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/3618314d500643b06b1b88c8671eb840?s=128&d=identicon&r=PG", "display_name": "user1130176", "link": "https://stackoverflow.com/users/1130176/user1130176"}, "reply_to_user": {"reputation": 829, "user_id": 5680832, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-isvYmggm3Oc/AAAAAAAAAAI/AAAAAAAAAKY/InixBA2Rhe8/photo.jpg?sz=128", "display_name": "Faisal Raza", "link": "https://stackoverflow.com/users/5680832/faisal-raza"}, "edited": false, "score": 0, "creation_date": 1508770751, "post_id": 42788132, "comment_id": 80732097, "body": "That sounds like it can&#39;t find the input file, can you post your code?"}, {"owner": {"reputation": 829, "user_id": 5680832, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-isvYmggm3Oc/AAAAAAAAAAI/AAAAAAAAAKY/InixBA2Rhe8/photo.jpg?sz=128", "display_name": "Faisal Raza", "link": "https://stackoverflow.com/users/5680832/faisal-raza"}, "edited": false, "score": 0, "creation_date": 1508771051, "post_id": 42788132, "comment_id": 80732317, "body": "I have a &quot;document.docx&quot; file and want to convert to &quot;tempfile.pdf&quot; in the same directory, code is given below:  <code>Libreconv.convert(&quot;document.docx&quot;, &#39;tempfile.pdf&#39;, &#39;&#47;usr&#47;bin&#47;soffice&#39;)</code>"}], "tags": [], "owner": {"reputation": 1299, "user_id": 1130176, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/3618314d500643b06b1b88c8671eb840?s=128&d=identicon&r=PG", "display_name": "user1130176", "link": "https://stackoverflow.com/users/1130176/user1130176"}, "is_accepted": false, "score": 2, "last_activity_date": 1489500257, "creation_date": 1489500257, "answer_id": 42788132, "question_id": 29940776, "link": "https://stackoverflow.com/questions/29940776/convert-excel-and-word-files-to-pdf-using-ruby/42788132#42788132", "title": "Convert Excel and Word files to PDF Using ruby", "body": "<p>You can use libreconv  </p>\n\n<p><a href=\"https://github.com/ricn/libreconv\" rel=\"nofollow noreferrer\">https://github.com/ricn/libreconv</a> </p>\n\n<p>You'll need to install libre office on your server, which is straightforward.</p>\n"}], "owner": {"reputation": 1262, "user_id": 3898284, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/RG11s.jpg?s=128&g=1", "display_name": "Mani David", "link": "https://stackoverflow.com/users/3898284/mani-david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6435, "favorite_count": 2, "answer_count": 2, "score": 6, "last_activity_date": 1489500257, "creation_date": 1430302609, "last_edit_date": 1430302823, "question_id": 29940776, "link": "https://stackoverflow.com/questions/29940776/convert-excel-and-word-files-to-pdf-using-ruby", "title": "Convert Excel and Word files to PDF Using ruby", "body": "<p>I want to convert Excel with multiple sheets and Word files to PDF format as a single file using Ruby.</p>\n\n<p>Is there any Script/Gems/Plugins available to achieve this?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 63, "user_id": 4716473, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/26c6d88e370c8421a384bd4cb52c2320?s=128&d=identicon&r=PG&f=1", "display_name": "Gayathri Govindaraj", "link": "https://stackoverflow.com/users/4716473/gayathri-govindaraj"}, "edited": false, "score": 0, "creation_date": 1430310006, "post_id": 29940613, "comment_id": 48007803, "body": "Thanks all fro ur quick response."}], "answers": [{"tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 0, "last_activity_date": 1430302598, "creation_date": 1430302598, "answer_id": 29940769, "question_id": 29940613, "link": "https://stackoverflow.com/questions/29940613/array-updation-in-ruby/29940769#29940769", "title": "Array updation in ruby", "body": "<p>Assuming you want to append elements of <code>s2</code> to <code>s1</code> at corresponding index after <code>#</code>:</p>\n\n<pre><code>s3 = []\ns1.each_with_index{|a, i| s3 &lt;&lt; a + \"#\" + s2[i].to_s}\ns3\n# =&gt; [\"Arun#2#very good shop#first\", \"Mani#4#i am very glad to meet you sir.#second\", \"Anu#2#not bad#third\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "is_accepted": false, "score": 8, "last_activity_date": 1430303094, "creation_date": 1430303094, "answer_id": 29940945, "question_id": 29940613, "link": "https://stackoverflow.com/questions/29940613/array-updation-in-ruby/29940945#29940945", "title": "Array updation in ruby", "body": "<pre><code>s3 = s1.zip(s2).map{ |x| x.join('#')}\n=&gt; [\"Arun#2#very good shop#first\", \"Mani#4#i am very glad to meet you sir.#second\", \"Anu#2#not bad#third\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "edited": false, "score": 1, "creation_date": 1430310143, "post_id": 29941685, "comment_id": 48007916, "body": "Note that this solution fails if the size of the arrays are different."}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "edited": false, "score": 0, "creation_date": 1430312407, "post_id": 29941685, "comment_id": 48009730, "body": "@Drenmi : Thanks, I have updated Note and Alternative"}], "tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": true, "score": 2, "last_activity_date": 1430313374, "last_edit_date": 1430313374, "creation_date": 1430305036, "answer_id": 29941685, "question_id": 29940613, "link": "https://stackoverflow.com/questions/29940613/array-updation-in-ruby/29941685#29941685", "title": "Array updation in ruby", "body": "<p>Try this:</p>\n\n<pre><code>&gt; s3 = [s1,s2].transpose.map{|a| a.join(\"#\")}\n =&gt; [\"Arun#2#very good shop#first\", \"Mani#4#i am very glad to meet you sir.#second\", \"Anu#2#not bad#third\"]\n</code></pre>\n\n<p><strong>Note:</strong> This will work if two array has same number of elements.</p>\n\n<p><strong>Alternative Option</strong> : this will work for any number of elements in two array</p>\n\n<pre><code>&gt; s1.zip([\"#\"].cycle, s2).map(&amp;:join)\n =&gt; [\"Arun#2#very good shop#first\", \"Mani#4#i am very glad to meet you sir.#second\", \"Anu#2#not bad#third\"]\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 4716473, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/26c6d88e370c8421a384bd4cb52c2320?s=128&d=identicon&r=PG&f=1", "display_name": "Gayathri Govindaraj", "link": "https://stackoverflow.com/users/4716473/gayathri-govindaraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 29941685, "answer_count": 3, "score": 2, "last_activity_date": 1430313374, "creation_date": 1430302214, "last_edit_date": 1430305161, "question_id": 29940613, "link": "https://stackoverflow.com/questions/29940613/array-updation-in-ruby", "title": "Array updation in ruby", "body": "<p>Given two arrays:</p>\n\n<pre><code>s1 = [\"Arun#2#very good shop\",\"Mani#4#i am very glad to meet you sir.\",\"Anu#2#not bad\"]\ns2 = [\"first\",\"second\",\"third\"]\n</code></pre>\n\n<p>I want a new array <code>s3</code> like:</p>\n\n<pre><code>s3 = [\"Arun#2#very good shop#first\",\"Mani#4#i am very glad to meet you sir#second.\",\"Anu#2#not bad#third\"]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 5651, "user_id": 2308473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e694fbf7ee4853cdb75ffd32a4a59bf7?s=128&d=identicon&r=PG", "display_name": "Ian Kenney", "link": "https://stackoverflow.com/users/2308473/ian-kenney"}, "edited": false, "score": 0, "creation_date": 1430302392, "post_id": 29940561, "comment_id": 48002105, "body": "where is <code>@cw_integrator_account</code> assigned if <code>CwIntegratorAccount.count &gt;= 1</code>"}, {"owner": {"reputation": 1598, "user_id": 3190826, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Om0te.png?s=128&g=1", "display_name": "insecure-IT", "link": "https://stackoverflow.com/users/3190826/insecure-it"}, "reply_to_user": {"reputation": 5651, "user_id": 2308473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e694fbf7ee4853cdb75ffd32a4a59bf7?s=128&d=identicon&r=PG", "display_name": "Ian Kenney", "link": "https://stackoverflow.com/users/2308473/ian-kenney"}, "edited": false, "score": 0, "creation_date": 1430303190, "post_id": 29940561, "comment_id": 48002729, "body": "In the <code>new</code> method. I&#39;ve omitted <code>index</code>, <code>show</code>, <code>new</code>, <code>edit</code>, <code>update</code>, and <code>destroy</code>."}], "answers": [{"tags": [], "owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "is_accepted": true, "score": 3, "last_activity_date": 1430303424, "last_edit_date": 1495542131, "creation_date": 1430303424, "answer_id": 29941080, "question_id": 29940561, "link": "https://stackoverflow.com/questions/29940561/why-are-my-scripts-from-lib-assets-directory-in-a-rails-application-not-executin/29941080#29941080", "title": "Why are my scripts from lib/assets directory in a Rails application not executing, or erring out?", "body": "<ol>\n<li><p><code>lib</code> is not autoloaded by default. You need to add it to the autoload path - see <a href=\"https://stackoverflow.com/questions/19098663/auto-loading-lib-files-in-rails-4\">Auto-loading lib files in Rails 4</a></p></li>\n<li><p>In addition, <code>lib/assets</code> is used by the <a href=\"http://guides.rubyonrails.org/asset_pipeline.html\" rel=\"nofollow noreferrer\">Asset Pipeline</a>. You should create a different folder for your classes. </p></li>\n<li><p>Your code in <code>CwGetCompanyIntegrator</code> needs to be wrapped in a method, like the following block which you'd call using <code>CwGetCompanyIntegrator.call</code>  </p>\n\n<pre><code>class CwGetCompanyIntegrator\n  def self.call\n    # execute code here\n  end\nend\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 1598, "user_id": 3190826, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Om0te.png?s=128&g=1", "display_name": "insecure-IT", "link": "https://stackoverflow.com/users/3190826/insecure-it"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 29941080, "answer_count": 1, "score": 0, "last_activity_date": 1430303424, "creation_date": 1430302076, "last_edit_date": 1430303143, "question_id": 29940561, "link": "https://stackoverflow.com/questions/29940561/why-are-my-scripts-from-lib-assets-directory-in-a-rails-application-not-executin", "title": "Why are my scripts from lib/assets directory in a Rails application not executing, or erring out?", "body": "<p>I'm trying to use ConnectWise API's in my Rails 3 application. I've built and tested an API using plain ruby and it's successful. Now I'm trying to add this script into <code>lib/assets</code> in my Rails app to run but It seems to be either not executing the script, or executing and failing without giving me any error output.</p>\n\n<p>Here are the successful Ruby scripts:</p>\n\n<p>CompanyApis Class:</p>\n\n<pre><code>require 'builder'\nclass CompanyApis\n  def self.get_company\n    cw_company_id = 21920\n    integrator_company_id = 'COMPANY_ID'\n    integrator_login_id = 'INTERGRATOR_LOGIN'\n    integrator_password = 'INTEGRATOR PW'\n\n    xml = Builder::XmlMarkup.new(:indent=&gt;2)\n    xml.instruct!\n    xml.tag!('soap:Envelope',\n             :'xmlns:soap' =&gt; 'http://schemas.xmlsoap.org/soap/envelope/',\n             :xmlns =&gt; 'http://connectwise.com'){\n      xml.tag!('soap:Body'){\n        xml.tag!('GetCompany'){\n          xml.tag!('credentials'){\n            xml.CompanyId(integrator_company_id)\n            xml.IntegratorLoginId(integrator_login_id)\n            xml.IntegratorPassword(integrator_password)\n          }\n          xml.id(cw_company_id)\n        }\n      }\n    }\n  end\nend\n</code></pre>\n\n<p>CwIntegrator Class:</p>\n\n<pre><code>require 'net/https'\nrequire 'uri'\nrequire 'nokogiri'\nrequire './company_api'\n\nclass CwIntegrator\n  cw_company_id = 21920\n  cw_hostname = 'cw.host.com'\n  companyapi_url = \"https://#{cw_hostname}/v4_6_release/apis/2.0/CompanyApi.asmx\"\n  uri = URI.parse(companyapi_url)\n\n  # Use for proxying to Kali\n  #proxy_addr = '172.16.1.149'\n  #proxy_port = 8080\n\n  request = Net::HTTP::Post.new(uri.path)\n  request.add_field('Content-Type', 'text/xml; charset=utf-8')\n  request.add_field('SOAPAction', 'http://connectwise.com/GetCompany')\n  request.body = CompanyApis.get_company\n  http = Net::HTTP.new(uri.host, uri.port)\n\n  # Use for proxying to Kali\n  #http = Net::HTTP.new(uri.host, uri.port, proxy_addr, proxy_port)\n\n  http.use_ssl = true\n  http.verify_mode = OpenSSL::SSL::VERIFY_NONE\n  response = http.start {|h| h.request(request)}\n  company_info = []\n  xml_doc = Nokogiri::XML(response.body).remove_namespaces!\n  company_name = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/CompanyName').text\n  company_street_addr = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/DefaultAddress/StreetLines/string')[0].text\n  begin\n    company_street_addr2 = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/DefaultAddress/StreetLines/string')[1].text\n  end\n  company_city = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/DefaultAddress/City').text\n  company_state = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/DefaultAddress/State').text\n  company_zip = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/DefaultAddress/Zip').text\n  company_country = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/DefaultAddress/Country').text\n  company_status = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/Status').text\n  company_phone = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/PhoneNumber').text\n  company_fax = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/FaxNumber').text\n  company_www = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/WebSite').text\n\n  company_info += [company_name: company_name, cw_company_id: cw_company_id, company_name: company_name,\n                   company_street_addr: company_street_addr, company_street_addr2: company_street_addr2,\n                   company_city: company_city, company_state: company_state, company_zip: company_zip,\n                   company_country:company_country,company_status: company_status, company_phone: company_phone,\n                   company_fax: company_fax, company_www: company_www]\n\n  puts(company_info)\nend\n</code></pre>\n\n<p>Running this script has this output:</p>\n\n<p>ruby cw_integrator.rb \n<code>{:company_name=&gt;\"Orlando Fake Co, LLC.\", :cw_company_id=&gt;21920, :company_street_addr=&gt;\"STREET ADDR.\", :company_street_addr2=&gt;\"Suite 400\", :company_city=&gt;\"Orlando\", :company_state=&gt;\"FL\", :company_zip=&gt;\"32839\", :company_country=&gt;\"United States\", :company_status=&gt;\"Active Gold TTS\", :company_phone=&gt;\"5558765309\", :company_fax=&gt;\"\", :company_www=&gt;\"www.myweb.com\"}</code></p>\n\n<p>So to add this to the Rails app I've added two <code>.rb</code> files to <code>lib/assets</code>, <code>cw_apis.rb</code> and <code>cw_get_company_integrator.rb</code>. Here are their contents:</p>\n\n<p>CwApis class:</p>\n\n<pre><code>#!/usr/bin/env ruby\nrequire 'builder'\nclass CwApis\n  def self.get_company_xml_request\n    cw_integrator_account = CwIntegratorAccount.first\n    integrator_company_id = cw_integrator_account.integrator_company_id\n    integrator_login_id = cw_integrator_account.integrator_login_id\n    integrator_password = cw_integrator_account.integrator_password\n\n    xml = Builder::XmlMarkup.new(:indent=&gt;2)\n    xml.instruct!\n    xml.tag!('soap:Envelope',\n             :'xmlns:soap' =&gt; 'http://schemas.xmlsoap.org/soap/envelope/',\n             :xmlns =&gt; 'http://connectwise.com'){\n      xml.tag!('soap:Body'){\n        xml.tag!('GetCompany'){\n          xml.tag!('credentials'){\n            xml.CompanyId(integrator_company_id)\n            xml.IntegratorLoginId(integrator_login_id)\n            xml.IntegratorPassword(integrator_password)\n          }\n          xml.id(cw_integrator_account.cw_company_id)\n        }\n      }\n    }\n  end\nend\n</code></pre>\n\n<p>And CwGetCompanyIntegrator Class:</p>\n\n<pre><code>#!/usr/bin/env ruby\nrequire 'net/https'\nrequire 'uri'\nrequire 'nokogiri'\nrequire 'assets/cw_apis'\n\nclass CwGetCompanyIntegrator\n  cw_integrator_account = CwIntegratorAccount.first\n  cw_hostname = cw_integrator_account.cw_hostname\n  company_api_url = \"https://#{cw_hostname}/v4_6_release/apis/2.0/CompanyApi.asmx\"\n  uri = URI.parse(company_api_url)\n\n  request = Net::HTTP::Post.new(uri.path)\n  request.add_field('Content-Type', 'text/xml; charset=utf-8')\n  request.add_field('SOAPAction', 'http://connectwise.com/GetCompany')\n  request.body = CwApis.get_company_xml_request\n  http = Net::HTTP.new(uri.host, uri.port)\n  http.use_ssl = true\n  http.verify_mode = OpenSSL::SSL\n  response = http.start {|h| h.request(request)}\n  xml_doc = Nokogiri::XML(response.body).remove_namespaces!\n\n  company_name = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/CompanyName').text\n  company_street_addr = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/DefaultAddress/StreetLines/string')[0].text\n  begin\n    company_street_addr2 = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/DefaultAddress/StreetLines/string')[1].text\n  end\n  company_city = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/DefaultAddress/City').text\n  company_state = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/DefaultAddress/State').text\n  company_zip = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/DefaultAddress/Zip').text\n  company_country = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/DefaultAddress/Country').text\n  company_status = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/Status').text\n  company_phone = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/PhoneNumber').text\n  company_fax = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/FaxNumber').text\n  company_www = xml_doc.xpath('//Envelope/Body/GetCompanyResponse/GetCompanyResult/WebSite').text\n\n  CompanyInfosController.create!(cw_company_id: cw_integrator_account.cw_company_id, company_name: company_name,\n                                 company_street_addr: company_street_addr, company_street_addr2: company_street_addr2,\n                                 company_city: company_city, company_state: company_state, company_zip: company_zip,\n                                 company_country:company_country, company_status: company_status, company_phone: company_phone,\n                                 company_fax: company_fax, company_www: company_www)\nend\n</code></pre>\n\n<p>I'm trying to <code>execute</code> the <code>CwGetCompanyIntegrator</code> class in my <code>CwIntegratorAccountsController</code>.</p>\n\n<p>Here is the code inside the <code>create</code> action from the <code>CwIntegratorAccountsController</code> I've omitted <code>index</code>, <code>show</code>, <code>new</code>, <code>edit</code>, <code>update</code>, and <code>destroy</code>:</p>\n\n<pre><code>require 'assets/cw_get_company_integrator'\n\nclass CwIntegratorAccountsController &lt; ApplicationController\n  skip_before_filter :require_company, :only =&gt; [:create,:new]\n\n  # GET /cw_integrator_accounts\n  # GET /cw_integrator_accounts.json\n\n  def create\n    unless CwIntegratorAccount.count &gt;= 1\n      @cw_integrator_account = CwIntegratorAccount.new(params[:cw_integrator_account])\n\n      respond_to do |format|\n        if @cw_integrator_account.save\n\n          # Run the CW Integrator\n          CwGetCompanyIntegrator\n          format.html { redirect_to root_url, notice: 'cw_integrator success' }\n          #format.json { render json: @cw_integrator_account, status: :created, location: @cw_integrator_account }\n        else\n          format.html { render action: 'new' }\n          format.json { render json: @cw_integrator_account.errors, status: :unprocessable_entity }\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>I know that I'm getting past the <code>if @cw_integrator_account.save</code>, and <code>CwGetCompanyIntegrator</code> because I'm getting the redirect (and see it in the logs) from <code>format.html { redirect_to root_url, notice: 'cw_integrator success' }</code>, but the <code>CwGetCompanyIntegrator</code> is not erring or executing (properly any way).</p>\n\n<p>What is the proper way to make this class execute?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "authentication", "sorcery"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5202368, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FhpW4.png?s=128&g=1", "display_name": "besters", "link": "https://stackoverflow.com/users/5202368/besters"}, "is_accepted": false, "score": 0, "last_activity_date": 1438955591, "creation_date": 1438955591, "answer_id": 31879442, "question_id": 29939963, "link": "https://stackoverflow.com/questions/29939963/rails4-how-to-config-multiple-model-on-sorcery-gem/31879442#31879442", "title": "Rails4, How to config multiple model on sorcery Gem", "body": "<p>You can try in Application controller (Module: Admin )</p>\n\n<pre><code>Rails.application.config.sorcery.user_class = Admin\n</code></pre>\n\n<p>or without module inside default application controller</p>\n\n<pre><code>Rails.application.config.sorcery.user_class = User\n</code></pre>\n\n<p>Perhaps it will help you.</p>\n"}], "owner": {"reputation": 402, "user_id": 3809903, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9e1c36e71e453b8ecea77f2e8127942b?s=128&d=identicon&r=PG&f=1", "display_name": "kai", "link": "https://stackoverflow.com/users/3809903/kai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 761, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1438955591, "creation_date": 1430300617, "question_id": 29939963, "link": "https://stackoverflow.com/questions/29939963/rails4-how-to-config-multiple-model-on-sorcery-gem", "title": "Rails4, How to config multiple model on sorcery Gem", "body": "<p>I change User model to normal_user and admin_user</p>\n\n<p>And I wanna authenticate both user on web</p>\n\n<p>My plan is <b>normal_user only using web page and admin_user only using admin or client page</b></p>\n\n<p>below sorcery config file is support only one Model.</p>\n\n<pre><code>config.user_class = \"User\"\n</code></pre>\n\n<p>But I wanna  suport User and AdminUser.</p>\n\n<p>How to config file or another solution setting multiple authencatin user?</p>\n"}, {"tags": ["ruby", "command-prompt", "ping"], "answers": [{"comments": [{"owner": {"reputation": 237, "user_id": 4460483, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/m3ElK.png?s=128&g=1", "display_name": "Drayke", "link": "https://stackoverflow.com/users/4460483/drayke"}, "edited": false, "score": 0, "creation_date": 1430302184, "post_id": 29940093, "comment_id": 48001962, "body": "My problem is that even if the ping command execution was successful, I can&#39;t know if the device is really reachable or not. It could be that the &quot;Host is unreachable&quot; but <code>system(&#39;ping -c 2 localhost&#39;)</code> still returns true."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 237, "user_id": 4460483, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/m3ElK.png?s=128&g=1", "display_name": "Drayke", "link": "https://stackoverflow.com/users/4460483/drayke"}, "edited": false, "score": 0, "creation_date": 1430303014, "post_id": 29940093, "comment_id": 48002586, "body": "It could not. If it does, you might try to use excellent <a href=\"https://github.com/chernesk/net-ping\" rel=\"nofollow noreferrer\">github.com/chernesk/net-ping</a> library instead of parsing output."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1430300898, "creation_date": 1430300898, "answer_id": 29940093, "question_id": 29939875, "link": "https://stackoverflow.com/questions/29939875/ruby-lookup-a-command-output-for-a-keyword/29940093#29940093", "title": "Ruby - lookup a command output for a keyword", "body": "<p><code>ping</code>, as well as any other handy utility, returns the status of command execution. You should never parse an output.</p>\n\n<pre><code>system('ping -c 2 localhost')\n#\u21d2 true\nsystem('ping -c 2 unknown')\n#\u21d2 false\n</code></pre>\n\n<p>Everything you need is to check the return value of call to <code>system</code>.</p>\n"}], "owner": {"reputation": 237, "user_id": 4460483, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/m3ElK.png?s=128&g=1", "display_name": "Drayke", "link": "https://stackoverflow.com/users/4460483/drayke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430300898, "creation_date": 1430300416, "last_edit_date": 1495539809, "question_id": 29939875, "link": "https://stackoverflow.com/questions/29939875/ruby-lookup-a-command-output-for-a-keyword", "title": "Ruby - lookup a command output for a keyword", "body": "<p>I want to check a ping if it was successfull or not. Now I have the problem that i had such a result with a manual ping: </p>\n\n<blockquote>\n  <p>Ping wird ausgef\u00fchrt f\u00fcr 10.128.129.15 mit 32 Bytes Daten: <br>Antwort von\n  10.128.129.15: Zielhost nicht erreichbar. <br>Antwort von 10.128.129.15: Zielhost nicht erreichbar.<br> Antwort von 10.128.129.15: Zielhost nicht\n  erreichbar.</p>\n  \n  <p>Ping-Statistik f\u00fcr 10.128.129.15:<br>\n      Pakete: Gesendet = 3, Empfangen = 3, Verloren = 0\n      (0% Verlust),<br>\n   # which would be an \"- Success\" output in my script</p>\n</blockquote>\n\n<p>For every non-german person, the ping command works, but in the end it say that the DestinationHost is unreachable. I want to check if it IS reachable with the ping request, thats why I tried something like this:</p>\n\n<pre><code>def pingtest(destination,device)\n    print(\" Pinging #{destination} #{device}: \")\n#I tried to get the system output with several methods, the ping is printed\n#in the consol but in the end it just returns \"true\"\n    output = system(\"ping -n 3 #{destination} 2&gt;&amp;1\")  #later I want &gt;nul\n    puts output         #prints \"true\"\n\n#I tried some stuff like this:  the .include? method was an\n# idea from ***another Question (with ssh) and this worked\n if output.content.include?(\"Zielhost nicht erreichbar\")\n        puts \"Success Debug\"\n    end\n#Backtick to check if the ping succeded or not..\n    if $? == 0\n        puts \" - Success\\n\"\n        return true\n    else\n        puts(\" - Failed\\n\")\n        return false\n    end\nend\n</code></pre>\n\n<p>***<a href=\"https://stackoverflow.com/questions/29842698/ruby-checking-ping-status-featback-with-ssh-backtick-via-ssh/29859292?noredirect=1#comment47984591_29859292\">another question</a>\nThere i fixed my problem like this:<br></p>\n\n<pre><code>result = ssh.exec!\"ping -c 3 #{@dest_ip}\"\n      if result.include?(\"100% packet loss\") || result.include?(\"Zeit\u00fcberschreitung\") || result.include?(\"100% Verlust\") || and so on\n</code></pre>\n\n<p>I didn't found a work solution for my Problem now (without a SSH connection) on SO so maybe you will have a solution for that. My goal is it to securly say if a device is reachable in the network or not. Maybe a short review about my project: I have two NAT Gateways builded with RasberyPIs - with two profinets and a network including these both profinets. I want to check now every connection in the network of this two NAT Gateways. Im a (win) Service_PC in this case running this script. More or less I need to check the command-promt while running the ping. But how?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "xcode", "rvm", "homebrew"], "comments": [{"owner": {"reputation": 563, "user_id": 934329, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/788774ead990ffe40802f7e76a17f7ef?s=128&d=identicon&r=PG", "display_name": "Naresh", "link": "https://stackoverflow.com/users/934329/naresh"}, "edited": false, "score": 0, "creation_date": 1430302306, "post_id": 29939723, "comment_id": 48002050, "body": "Fixed this temporarily by copying /System/Library/Frameworks/Ruby.framework from a different machine."}], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 3023280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ec4c697afd96e2160cd56890a4a8105?s=128&d=identicon&r=PG&f=1", "display_name": "sprungl", "link": "https://stackoverflow.com/users/3023280/sprungl"}, "is_accepted": true, "score": 1, "last_activity_date": 1430302932, "last_edit_date": 1490005101, "creation_date": 1430302932, "answer_id": 29940897, "question_id": 29939723, "link": "https://stackoverflow.com/questions/29939723/brew-update-failes-because-of-deletion-of-system-installed-ruby/29940897#29940897", "title": "brew update failes because of deletion of system installed Ruby", "body": "<p>You have to reinstall Ruby. I am assuming you are using Mac OSX? Download the OS from the store and just install the essentials.pkg as shown <a href=\"https://superuser.com/a/866113\" title=\"here\">here</a>.</p>\n\n<p>Would also recommend you use <a href=\"https://rvm.io/\" rel=\"nofollow noreferrer\" title=\"RVM\">RVM</a>.</p>\n"}], "owner": {"reputation": 563, "user_id": 934329, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/788774ead990ffe40802f7e76a17f7ef?s=128&d=identicon&r=PG", "display_name": "Naresh", "link": "https://stackoverflow.com/users/934329/naresh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 29940897, "answer_count": 1, "score": 0, "last_activity_date": 1447085193, "creation_date": 1430300061, "last_edit_date": 1447085193, "question_id": 29939723, "link": "https://stackoverflow.com/questions/29939723/brew-update-failes-because-of-deletion-of-system-installed-ruby", "title": "brew update failes because of deletion of system installed Ruby", "body": "<p>brew update failes with the error </p>\n\n<blockquote>\n  <p>/usr/local/bin/brew: /usr/local/Library/brew.rb: /System/Library/Frameworks/Ruby.framework/Versions/Current/usr/bin/ruby: bad interpreter: No such file or directory /usr/local/bin/brew: line 23: /usr/local/Library/brew.rb: Undefined error: 0\"</p>\n</blockquote>\n\n<p>I have deleted <code>/System/Library/Frameworks/Ruby.framework</code> bacause of some Ruby conflicts. I know this was a big mistake. </p>\n\n<p>Is there any way to fix this issue?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1430302200, "post_id": 29939490, "comment_id": 48001974, "body": "Did any of the ansers help you?"}, {"owner": {"reputation": 59, "user_id": 3984163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1693265a47defd609289cfe68dea134?s=128&d=identicon&r=PG&f=1", "display_name": "Mil", "link": "https://stackoverflow.com/users/3984163/mil"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1430302354, "post_id": 29939490, "comment_id": 48002079, "body": "I&#39;m trying to test everything, although i&#39;m getting error with this line: expect { plan.destroy }.to_not change(Plan.count) . Error is: TypeError: nil is not a symbol. Thanks for help anyways"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1430302550, "post_id": 29939490, "comment_id": 48002217, "body": "It may be because of my mistake - try this: <code>expect { plan.destroy }.to_not change { Plan.count }</code>"}, {"owner": {"reputation": 59, "user_id": 3984163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1693265a47defd609289cfe68dea134?s=128&d=identicon&r=PG&f=1", "display_name": "Mil", "link": "https://stackoverflow.com/users/3984163/mil"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1430303271, "post_id": 29939490, "comment_id": 48002802, "body": "This worked! Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1430299945, "post_id": 29939623, "comment_id": 48000280, "body": "You read my mind, we created two independent but practically identical answers. :)"}, {"owner": {"reputation": 59, "user_id": 3984163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1693265a47defd609289cfe68dea134?s=128&d=identicon&r=PG&f=1", "display_name": "Mil", "link": "https://stackoverflow.com/users/3984163/mil"}, "edited": false, "score": 0, "creation_date": 1430300267, "post_id": 29939623, "comment_id": 48000535, "body": "I do have callbacks but i&#39;m trying to write Rspec test"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 59, "user_id": 3984163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1693265a47defd609289cfe68dea134?s=128&d=identicon&r=PG&f=1", "display_name": "Mil", "link": "https://stackoverflow.com/users/3984163/mil"}, "edited": false, "score": 0, "creation_date": 1430300345, "post_id": 29939623, "comment_id": 48000599, "body": "@Milan\u010can\u010darevi\u0107 this answer covers modification of spec code too."}, {"owner": {"reputation": 59, "user_id": 3984163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1693265a47defd609289cfe68dea134?s=128&d=identicon&r=PG&f=1", "display_name": "Mil", "link": "https://stackoverflow.com/users/3984163/mil"}, "edited": false, "score": 0, "creation_date": 1430300558, "post_id": 29939623, "comment_id": 48000767, "body": "As you said, save the object, call destroy, ensure it has not been destroyed how can i do that? Callbacks are working fine but i&#39;m trying to write rspec test. Sorry i&#39;m new to RoR still"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 59, "user_id": 3984163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1693265a47defd609289cfe68dea134?s=128&d=identicon&r=PG&f=1", "display_name": "Mil", "link": "https://stackoverflow.com/users/3984163/mil"}, "edited": false, "score": 0, "creation_date": 1430301073, "post_id": 29939623, "comment_id": 48001141, "body": "@Milan\u010can\u010darevi\u0107 look at my answer for ready to use (at least I think so) code."}], "tags": [], "owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "is_accepted": false, "score": 1, "last_activity_date": 1430299816, "creation_date": 1430299816, "answer_id": 29939623, "question_id": 29939490, "link": "https://stackoverflow.com/questions/29939490/object-can-not-be-deleted-is-attribute-is-active-rspec-ror/29939623#29939623", "title": "Object can not be deleted is attribute is active - Rspec RoR", "body": "<p>in your <code>Plan</code> class, add:</p>\n\n<pre><code>before_destroy :ensure_inactive\n\n#will abort destroy if return false\ndef ensure_inactive\n  !active?\nend\n</code></pre>\n\n<p>Btw, your spec is wrong, its not really a validation. You should:</p>\n\n<ul>\n<li>save the object</li>\n<li>call destroy</li>\n<li>ensure it has not been destroyed</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1430300449, "post_id": 29939652, "comment_id": 48000678, "body": "in <code>Rspec</code> better to use <code>expect { ...  }.to change { ..... }</code> . <code>assert_no_difference</code> is a minitest  <code>ActiveSupport::Testing::Assertions</code>."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1430301113, "post_id": 29939652, "comment_id": 48001164, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 You&#39;re right, thanks. As you see, I&#39;m used to minitest."}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 2, "last_activity_date": 1430302516, "last_edit_date": 1430302516, "creation_date": 1430299880, "answer_id": 29939652, "question_id": 29939490, "link": "https://stackoverflow.com/questions/29939490/object-can-not-be-deleted-is-attribute-is-active-rspec-ror/29939652#29939652", "title": "Object can not be deleted is attribute is active - Rspec RoR", "body": "<p>It can be achieved by using <code>before_destroy</code> callback which will return <code>false</code> if record can't be destroyed:</p>\n\n<pre><code>class Plan &lt; ActiveRecord::Base\n  # ...\n  before_destroy :check_if_active\n  # ...\n  private\n\n  def check_if_active\n    !active?\n  end\nend\n</code></pre>\n\n<p>With this solution, you should also rewrite your test, cause you shouldn't check validity:</p>\n\n<pre><code>it 'can not be deleted if active' do\n  plan = Plan.create!(active: true)\n  expect { plan.destroy }.to_not change { Plan.count }\nend\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 3984163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1693265a47defd609289cfe68dea134?s=128&d=identicon&r=PG&f=1", "display_name": "Mil", "link": "https://stackoverflow.com/users/3984163/mil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 29939652, "answer_count": 2, "score": 0, "last_activity_date": 1430302516, "creation_date": 1430299507, "question_id": 29939490, "link": "https://stackoverflow.com/questions/29939490/object-can-not-be-deleted-is-attribute-is-active-rspec-ror", "title": "Object can not be deleted is attribute is active - Rspec RoR", "body": "<p>I'm trying to test if object is active and it is active then it can not be deleted. So for i have this in my plan_spec.rb:</p>\n\n<pre>\n  it \"can not be deleted if active\" do\n    plan = Plan.new(active: true)\n    r = plan.destroy\n    r.should_not be_valid\n  end\n</pre>\n\n<p>Name of the attribute i'm trying to check is 'active' and it is boolean, so if active is true then it can't object plan can not be deleted.\nAny help?</p>\n"}, {"tags": ["ruby", "rugged"], "comments": [{"owner": {"reputation": 1606, "user_id": 598655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c8509417939f553fb9681b6868ff099?s=128&d=identicon&r=PG", "display_name": "cbz", "link": "https://stackoverflow.com/users/598655/cbz"}, "edited": false, "score": 0, "creation_date": 1430301587, "post_id": 29939239, "comment_id": 48001515, "body": "git log &lt;path&gt; will show you the commits for a specific path, you could use this."}, {"owner": {"reputation": 41, "user_id": 4791335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59c365cd5be38ef51d1ecdb986a7e8f?s=128&d=identicon&r=PG&f=1", "display_name": "fd80132", "link": "https://stackoverflow.com/users/4791335/fd80132"}, "reply_to_user": {"reputation": 1606, "user_id": 598655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c8509417939f553fb9681b6868ff099?s=128&d=identicon&r=PG", "display_name": "cbz", "link": "https://stackoverflow.com/users/598655/cbz"}, "edited": false, "score": 0, "creation_date": 1430302843, "post_id": 29939239, "comment_id": 48002446, "body": "But your solution is for git, not rugged"}, {"owner": {"reputation": 1606, "user_id": 598655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c8509417939f553fb9681b6868ff099?s=128&d=identicon&r=PG", "display_name": "cbz", "link": "https://stackoverflow.com/users/598655/cbz"}, "edited": false, "score": 0, "creation_date": 1430303541, "post_id": 29939239, "comment_id": 48002985, "body": "In that case look at the answers to this earlier question:  <a href=\"http://stackoverflow.com/questions/21302073/access-git-log-data-using-ruby-rugged-gem\" title=\"access git log data using ruby rugged gem\">stackoverflow.com/questions/21302073/&hellip;</a>"}, {"owner": {"reputation": 41, "user_id": 4791335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59c365cd5be38ef51d1ecdb986a7e8f?s=128&d=identicon&r=PG&f=1", "display_name": "fd80132", "link": "https://stackoverflow.com/users/4791335/fd80132"}, "reply_to_user": {"reputation": 1606, "user_id": 598655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c8509417939f553fb9681b6868ff099?s=128&d=identicon&r=PG", "display_name": "cbz", "link": "https://stackoverflow.com/users/598655/cbz"}, "edited": false, "score": 0, "creation_date": 1430308335, "post_id": 29939239, "comment_id": 48006502, "body": "Thanks, it help me a lot !"}], "answers": [{"comments": [{"owner": {"reputation": 1606, "user_id": 598655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c8509417939f553fb9681b6868ff099?s=128&d=identicon&r=PG", "display_name": "cbz", "link": "https://stackoverflow.com/users/598655/cbz"}, "edited": false, "score": 0, "creation_date": 1430309296, "post_id": 29943006, "comment_id": 48007187, "body": "Bear in mind that this way will step through all commits in the entire repository and then filter on file path - so it will scale linearly to how many commits there are in your repo."}, {"owner": {"reputation": 41, "user_id": 4791335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59c365cd5be38ef51d1ecdb986a7e8f?s=128&d=identicon&r=PG&f=1", "display_name": "fd80132", "link": "https://stackoverflow.com/users/4791335/fd80132"}, "reply_to_user": {"reputation": 1606, "user_id": 598655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c8509417939f553fb9681b6868ff099?s=128&d=identicon&r=PG", "display_name": "cbz", "link": "https://stackoverflow.com/users/598655/cbz"}, "edited": false, "score": 0, "creation_date": 1430393493, "post_id": 29943006, "comment_id": 48052775, "body": "Yes, I know, but unfortunatly it&#39;s the only solution I found."}], "tags": [], "owner": {"reputation": 41, "user_id": 4791335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59c365cd5be38ef51d1ecdb986a7e8f?s=128&d=identicon&r=PG&f=1", "display_name": "fd80132", "link": "https://stackoverflow.com/users/4791335/fd80132"}, "is_accepted": false, "score": 1, "last_activity_date": 1430308571, "creation_date": 1430308571, "answer_id": 29943006, "question_id": 29939239, "link": "https://stackoverflow.com/questions/29939239/get-all-commit-of-a-file-path-with-rugged/29943006#29943006", "title": "get all commit of a file/path with rugged", "body": "<p>We can get all commits by this way : </p>\n\n<pre><code>      tab = []\n      walker = Rugged::Walker.new(repo)\n      walker.sorting(Rugged::SORT_DATE)\n      walker.push(repo.head.target)\n      walker.each do |commit|\n        if commit.diff(paths: [\"path_of_file\"]).size &gt; 0\n           tab.push(commit)\n        end\n      end\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 4791335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59c365cd5be38ef51d1ecdb986a7e8f?s=128&d=identicon&r=PG&f=1", "display_name": "fd80132", "link": "https://stackoverflow.com/users/4791335/fd80132"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 521, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1430308571, "creation_date": 1430298894, "question_id": 29939239, "link": "https://stackoverflow.com/questions/29939239/get-all-commit-of-a-file-path-with-rugged", "title": "get all commit of a file/path with rugged", "body": "<p>I would like to get the list of all the commits for a file/path but I don't know how to do it.</p>\n\n<p>For example I want all the commit of the file \"test\", to get oid of each commit and thanks to this oid, I will get the blob of all revision for this file.</p>\n\n<p>Is it possible ? </p>\n\n<p>Thanks ! </p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1430299558, "creation_date": 1430299558, "answer_id": 29939513, "question_id": 29939187, "link": "https://stackoverflow.com/questions/29939187/dose-self-class-class-eval-equal-to-instance-eval/29939513#29939513", "title": "Dose self.class.class_eval equal to instance_eval?", "body": "<p>By <code>class_eval</code> you modify the class, by <code>instance_eval</code> the current instance only. Look:</p>\n\n<pre><code>\u25b6 class A\n\u25b7   def ceval\n\u25b7     self.class.class_eval \"def on_class ; puts 'On Class' ; end\"\n\u25b7   end\n\u25b7   def ieval\n\u25b7     self.instance_eval \"def on_instance ; puts 'On Instance' ; end\"\n\u25b7   end\n\u25b7 end\n\u25b6 a1 = A.new\n#\u21d2 #&lt;A:0xcf6a87c&gt;\n\u25b6 a1.ceval\n#\u21d2 :on_class\n\u25b6 a1.ieval\n#\u21d2 :on_instance\n\u25b6 a1.on_class\n#\u21d2 On Class\n\u25b6 a1.on_instance\n#\u21d2 On Instance\n\n\u25b6 a2 = A.new\n#\u21d2 #&lt;A:0xd0e9f7c&gt;\n\u25b6 a2.on_class\n#\u21d2 On Class  !!! IT IS DEFINED ON NEWLY CREATED INSTANCE OF A\n\u25b6 a2.on_instance\n#\u21d2 NoMethodError: undefined method `on_instance' for #&lt;A:0xd0e9f7c&gt;\n</code></pre>\n\n<p>The latter fails because we declare <code>on_instance</code> method <strong>on instance <code>a1</code></strong>, and <code>a2</code> knows nothing about it.</p>\n"}, {"tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 1, "last_activity_date": 1430302346, "creation_date": 1430302346, "answer_id": 29940668, "question_id": 29939187, "link": "https://stackoverflow.com/questions/29939187/dose-self-class-class-eval-equal-to-instance-eval/29940668#29940668", "title": "Dose self.class.class_eval equal to instance_eval?", "body": "<p>See this example, and try explain to yourself:</p>\n\n<pre><code>class Foo\n  def a\n    self.class.class_eval &lt;&lt;-EOS\n      def x\n        'This is an instance method.'\n      end\n    EOS\n  end\n\n  def b\n    self.instance_eval &lt;&lt;-EOS\n      def y\n        'This is a singleton method.'\n      end\n    EOS\n  end\nend\n\nfoo1 = Foo.new\nfoo2 = Foo.new\n\nfoo1.a\nfoo1.b\n\nfoo1.x  #=&gt; This is an instance method.\nfoo1.y  #=&gt; This is a singleton method.\n\nfoo2.x  #=&gt; This is an instance method.\nfoo2.y  #=&gt; NoMethodError\n</code></pre>\n"}], "owner": {"reputation": 726, "user_id": 2148710, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/SUfsw.jpg?s=128&g=1", "display_name": "jack-nie", "link": "https://stackoverflow.com/users/2148710/jack-nie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 29939513, "answer_count": 2, "score": 2, "last_activity_date": 1430302346, "creation_date": 1430298705, "question_id": 29939187, "link": "https://stackoverflow.com/questions/29939187/dose-self-class-class-eval-equal-to-instance-eval", "title": "Dose self.class.class_eval equal to instance_eval?", "body": "<p>I want to find out the difference between instance_eval and class_eval,so i did some work\u3002After searching the internet\uff0c I figure out something\uff0c but there comes an other question I can't understand\uff01When I'm doing this:</p>\n\n<pre><code>class FindMe\n\n  def method_missing method, *args, &amp;block\n    method = method.to_s\n    self.class.class_eval &lt;&lt;-EOF, __FILE__, __LINE__\n      def #{method}\n        puts \"I'm an instance method! I'm #{method}\"\n      end\n    EOF\n    send method, *args\n  end\n\n  def self.method_missing method, *args, &amp;block\n    method = method.to_s\n    instance_eval &lt;&lt;-HERE, __FILE__, __LINE__\n      def #{method}\n        puts \"I'm a class method! I'm #{method}\"\n      end\n    HERE\n    send method, *args\n  end\n\nend\n\nFindMe.new.hello\nFindMe.hello\n</code></pre>\n\n<p>I get </p>\n\n<pre><code>I'm an instance method! I'm hello\nI'm a class method! I'm hello\n</code></pre>\n\n<p>When I change my code to :</p>\n\n<pre><code>class FindMe\n\n  def method_missing method, *args, &amp;block\n    method = method.to_s\n    self.class.class_eval &lt;&lt;-EOF, __FILE__, __LINE__\n      def #{method}\n        puts \"I'm an instance method! I'm #{method}\"\n      end\n    EOF\n    send method, *args\n  end\n\n  def self.method_missing method, *args, &amp;block\n    method = method.to_s\n    self.class.class_eval &lt;&lt;-HERE, __FILE__, __LINE__\n      def #{method}\n        puts \"I'm a class method! I'm #{method}\"\n      end\n    HERE\n    send method, *args\n  end\n\nend\n\nFindMe.new.hello\nFindMe.hello\n</code></pre>\n\n<p>I get the same output, Can any one tell what's going on?</p>\n"}, {"tags": ["ruby", "checkbox", "ruby-on-rails-3.2"], "answers": [{"comments": [{"owner": {"reputation": 3262, "user_id": 4790217, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/51e840c4fca312811ef7da6ab52df663?s=128&d=identicon&r=PG&f=1", "display_name": "satya", "link": "https://stackoverflow.com/users/4790217/satya"}, "edited": false, "score": 0, "creation_date": 1430299439, "post_id": 29939322, "comment_id": 47999885, "body": "@ Gagan : If I applied onchange event to submit the form That mean when user will change status of that check-box the action will execute,In that case how i will check the check-box is checked or not instead of Jquery."}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 3262, "user_id": 4790217, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/51e840c4fca312811ef7da6ab52df663?s=128&d=identicon&r=PG&f=1", "display_name": "satya", "link": "https://stackoverflow.com/users/4790217/satya"}, "edited": false, "score": 0, "creation_date": 1430299703, "post_id": 29939322, "comment_id": 48000077, "body": "You can check by its <code>checked</code> property weather it is true or false? <a href=\"http://stackoverflow.com/questions/13616554/how-to-make-a-check-box-checked-in-rails\">check this question</a>"}, {"owner": {"reputation": 3262, "user_id": 4790217, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/51e840c4fca312811ef7da6ab52df663?s=128&d=identicon&r=PG&f=1", "display_name": "satya", "link": "https://stackoverflow.com/users/4790217/satya"}, "edited": false, "score": 0, "creation_date": 1430301314, "post_id": 29939322, "comment_id": 48001309, "body": "@ Gagan :How can i submit this form when check-box will checked."}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 3262, "user_id": 4790217, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/51e840c4fca312811ef7da6ab52df663?s=128&d=identicon&r=PG&f=1", "display_name": "satya", "link": "https://stackoverflow.com/users/4790217/satya"}, "edited": false, "score": 0, "creation_date": 1430301880, "post_id": 29939322, "comment_id": 48001750, "body": "@satya : I think you have mixup your form and index table... Is this your form code? Where is submit button?"}, {"owner": {"reputation": 3262, "user_id": 4790217, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/51e840c4fca312811ef7da6ab52df663?s=128&d=identicon&r=PG&f=1", "display_name": "satya", "link": "https://stackoverflow.com/users/4790217/satya"}, "edited": false, "score": 0, "creation_date": 1430302046, "post_id": 29939322, "comment_id": 48001858, "body": "@ Gagan : I dont need to button to submit.But when check-box will checked the form will submit. Is this possoble?"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 3262, "user_id": 4790217, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/51e840c4fca312811ef7da6ab52df663?s=128&d=identicon&r=PG&f=1", "display_name": "satya", "link": "https://stackoverflow.com/users/4790217/satya"}, "edited": false, "score": 0, "creation_date": 1430302142, "post_id": 29939322, "comment_id": 48001935, "body": "@satya : Yes it is possible but for that you have to make a call of ajax"}, {"owner": {"reputation": 3262, "user_id": 4790217, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/51e840c4fca312811ef7da6ab52df663?s=128&d=identicon&r=PG&f=1", "display_name": "satya", "link": "https://stackoverflow.com/users/4790217/satya"}, "reply_to_user": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1430302661, "post_id": 29939322, "comment_id": 48002311, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/76523/discussion-between-satya-and-gagan-gami\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 0, "last_activity_date": 1430299082, "creation_date": 1430299082, "answer_id": 29939322, "question_id": 29939130, "link": "https://stackoverflow.com/questions/29939130/check-whether-the-check-box-is-checked-or-not-using-rails-3/29939322#29939322", "title": "Check whether the check-box is checked or not using Rails 3", "body": "<pre><code>&lt;%= check_box_tag :check_value,nil,:id =&gt; \"checkbox1-1\"  %&gt;\n</code></pre>\n\n<p>You had pass <code>nil</code> value instead pass the object <code>r</code> like:</p>\n\n<pre><code> &lt;%= check_box_tag :check_value, :value =&gt; r, :id =&gt; \"checkbox1-1\"  %&gt;\n</code></pre>\n\n<p>Now using jquery you can check if checkbox is checked then retrieve it's value. In form of value you will get particular object <code>r</code> and from that you can fetch your required data.</p>\n\n<p>I hope this may helps you :)</p>\n"}], "owner": {"reputation": 3262, "user_id": 4790217, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/51e840c4fca312811ef7da6ab52df663?s=128&d=identicon&r=PG&f=1", "display_name": "satya", "link": "https://stackoverflow.com/users/4790217/satya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1045, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1430299082, "creation_date": 1430298557, "question_id": 29939130, "link": "https://stackoverflow.com/questions/29939130/check-whether-the-check-box-is-checked-or-not-using-rails-3", "title": "Check whether the check-box is checked or not using Rails 3", "body": "<p>I have a check-box inside a form.I need if user will checked this check-box suddenly the action will execute and it will check the check-box status whether it is checked or not using Rails 3.My form is given below.</p>\n\n<blockquote>\n  <p>paym.html.erb:</p>\n</blockquote>\n\n<pre><code>&lt;%= form_for :add_payment,:url =&gt; {:action =&gt; 'add_payment' },remote: true do |f| %&gt;\n&lt;table class=\"table table-bordered\"&gt;\n        &lt;colgroup&gt;\n            &lt;col class=\"col-md-1 col-sm-1\"&gt;\n            &lt;col class=\"col-md-1 col-sm-1\"&gt;\n            &lt;col class=\"col-md-3 col-sm-3\"&gt;\n            &lt;col class=\"col-md-3 col-sm-3\"&gt;\n            &lt;col class=\"col-md-4 col-sm-4\"&gt;\n        &lt;/colgroup&gt;\n        &lt;thead&gt;\n            &lt;tr&gt;\n                &lt;th class=\"text-center\"&gt;&lt;input type=\"checkbox\"&gt;&lt;/th&gt;\n                &lt;th class=\"text-center\"&gt;Sl. No&lt;/th&gt;\n                &lt;th class=\"text-center\"&gt;Date&lt;/th&gt;\n                &lt;th class=\"text-center\"&gt;Receipt No.&lt;/th&gt;\n                &lt;th class=\"text-center\"&gt;Amount&lt;/th&gt;\n            &lt;/tr&gt;\n        &lt;/thead&gt;\n        &lt;tbody&gt;\n            &lt;% @result.each do |r| %&gt;\n            &lt;tr&gt;\n                &lt;th class=\"text-center\"&gt;&lt;%= check_box_tag :check_value,nil,:id =&gt; \"checkbox1-1\"  %&gt;&lt;/th&gt;\n                &lt;td class=\"text-center\"&gt;&lt;%= r.id %&gt;&lt;/td&gt;\n                &lt;td class=\"text-center\"&gt;&lt;%= r.c_date %&gt;&lt;/td&gt;\n                &lt;td class=\"text-center\"&gt;&lt;%= r.Receipt_No %&gt;&lt;/td&gt;\n                &lt;td class=\"text-center\"&gt;&lt;i class=\"fa fa-rupee\"&gt;&lt;/i&gt;&lt;%= r.v_amount %&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;% end %&gt;\n     &lt;/tbody&gt;\n&lt;/table&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<blockquote>\n  <p>paym_controller.rb:</p>\n</blockquote>\n\n<pre><code>class PaymentsController &lt; ApplicationController\ndef add_payment\n\n    end\nend\n</code></pre>\n\n<p>Here i have a table with some value .I also need when user will checked that box <code>1-It will check whether check box is checked or not,2-If checked then it will get all table value corresponding to that check-box</code>.Please help me.</p>\n"}, {"tags": ["ruby", "sass"], "answers": [{"tags": [], "owner": {"reputation": 47822, "user_id": 1596547, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/08b5068eb26127f91cea554cbc21bede?s=128&d=identicon&r=PG", "display_name": "Bass Jobsen", "link": "https://stackoverflow.com/users/1596547/bass-jobsen"}, "is_accepted": false, "score": 0, "last_activity_date": 1430316367, "last_edit_date": 1495542132, "creation_date": 1430306891, "answer_id": 29942357, "question_id": 29938369, "link": "https://stackoverflow.com/questions/29938369/setting-sass-variables-into-sass-compile-file/29942357#29942357", "title": "Setting Sass variables into Sass.compile_file", "body": "<p>I think according <a href=\"https://stackoverflow.com/questions/29887092/is-there-a-way-i-can-overwrite-less-variable-with-less-compiler-in-php/29893778#29893778\">Is there a way I can overwrite LESS variable with LESS compiler in PHP?</a> you can open the file yourself and parse its contents through (<code>Sass.compile</code>)[<a href=\"http://sass-lang.com/documentation/Sass.html]\" rel=\"nofollow noreferrer\">http://sass-lang.com/documentation/Sass.html]</a> instead of using  <code>Sass.compile_file</code> directly.</p>\n\n<p>With <code>compile.rb</code> :</p>\n\n<pre><code>#!/usr/bin/ruby    \nrequire 'sass'\ndata = File.read(\"./colors.scss\")\nputs Sass::compile('$color: white;' + data)\n</code></pre>\n\n<p>and <code>colors.scss</code>:</p>\n\n<pre><code>$color: blue !default;\np {\ncolor: $color;\n}\n</code></pre>\n\n<p>Running <code>./compile.rb</code> outputs:</p>\n\n<pre><code>p {\n  color: white; }\n</code></pre>\n\n<p>According <a href=\"http://sass-lang.com/documentation/file.SASS_REFERENCE.html#using_sass\" rel=\"nofollow noreferrer\">the docs</a> you should use <a href=\"http://sass-lang.com/documentation/Sass/Engine.html\" rel=\"nofollow noreferrer\"><code>Sass::Engine</code></a>:</p>\n\n<blockquote>\n  <p>Using Sass in Ruby code is very simple. After installing the Sass gem,\n  you can use it by running require \"sass\" and using Sass::Engine.</p>\n</blockquote>\n\n<pre><code>#!/usr/bin/ruby\nrequire 'sass'\ntemplate = File.read('./colors.scss')\nsass_engine = Sass::Engine.new(\"$color: white;\\n\" + template, :syntax =&gt; :scss)\noutput = sass_engine.render\nputs output\n</code></pre>\n"}], "owner": {"reputation": 1318, "user_id": 4449679, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cb02f7b29dd710a3f2d88430a3e14cfe?s=128&d=identicon&r=PG&f=1", "display_name": "lpil", "link": "https://stackoverflow.com/users/4449679/lpil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430316367, "creation_date": 1430296355, "question_id": 29938369, "link": "https://stackoverflow.com/questions/29938369/setting-sass-variables-into-sass-compile-file", "title": "Setting Sass variables into Sass.compile_file", "body": "<p>Is it possible to inject variables into the Sass scope when using the method <code>Sass.compile_file</code>?</p>\n\n<p>Currently I'm passing values into the <code>custom:</code> argument, creating a custom sass function, and then calling that from within the Sass file/script. This is very awkward as I have to create objects of the appropriate types to return from the functions, i.e. <code>Sass::Script::String</code>, rather than <code>String</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 1958, "user_id": 515991, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/319b6176a2b56541cbf44182fd3987a1?s=128&d=identicon&r=PG&f=1", "display_name": "usmanali", "link": "https://stackoverflow.com/users/515991/usmanali"}, "reply_to_user": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "edited": false, "score": 0, "creation_date": 1430294494, "post_id": 29937678, "comment_id": 47996861, "body": "@Ryan-NealMes No it doesn&#39;t"}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "reply_to_user": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "edited": false, "score": 0, "creation_date": 1430294497, "post_id": 29937678, "comment_id": 47996863, "body": "@Ryan-NealMes no at all, both <code>update</code> and <code>update_attributes</code> are aliases btw"}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1430294854, "post_id": 29937678, "comment_id": 47997061, "body": "see doc: <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-update\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActiveRecord/&hellip;</a>"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1430294855, "post_id": 29937678, "comment_id": 47997062, "body": "I think the <code>People::Update</code> <code>ActiveModel</code> is created in controller, so <code>permiting</code> params should be on controller level."}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1430294918, "post_id": 29937678, "comment_id": 47997087, "body": "its debatable, I usually <code>permit!</code> in controller and always <code>slice</code> in service objects, depends how comfortable you are with ruby/rails. Recommending <code>permit!</code> could lead people to make huge mistakes"}, {"owner": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "edited": false, "score": 0, "creation_date": 1430296533, "post_id": 29937678, "comment_id": 47998016, "body": "Another quick question related to this ... why did I actually get the error via delayed job, but not in my <code>rails console</code>? I can open another question, but I think it makes sense to ask here. Thanks."}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 1, "creation_date": 1430296580, "post_id": 29937678, "comment_id": 47998045, "body": "because in console you use a Hash, params are a slightly different object"}], "tags": [], "owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "is_accepted": true, "score": 3, "last_activity_date": 1430294552, "last_edit_date": 1430294552, "creation_date": 1430294378, "answer_id": 29937678, "question_id": 29937555, "link": "https://stackoverflow.com/questions/29937555/strange-update-issue/29937678#29937678", "title": "Strange update issue", "body": "<p>You should replace with</p>\n\n<pre><code>@person.update(params.permit(:first_name, :last_name, :email))\n</code></pre>\n\n<p>You should not use <code>permit!</code> blindly, the point is to ensure people can only change what you allow.</p>\n"}], "owner": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 29937678, "answer_count": 1, "score": 1, "last_activity_date": 1430294552, "creation_date": 1430294035, "question_id": 29937555, "link": "https://stackoverflow.com/questions/29937555/strange-update-issue", "title": "Strange update issue", "body": "<p>I have a piece of code that updates person information.</p>\n\n<pre><code>module People\n  class Update\n    attr_reader :person_id, :params\n\n    def call person_id, params\n      @person_id = person_id\n      @params = params\n\n      update_person\n    end\n\n    def update_person\n      @person = Person.find(person_id)\n      @person.update(params)\n      @person\n    end\n  end\nend\n</code></pre>\n\n<p>params equals</p>\n\n<pre><code>{\"first_name\"=&gt;\"Blue\", \"last_name\"=&gt;\"Panther\", \"email\"=&gt;\"bluepanther9@gs.co.za\"}\n</code></pre>\n\n<p>person_id has a value and exists in the database. Pretty simple and straight forward.</p>\n\n<p>The weird thing is I get an error when everything executes through the application, but it works fine when I do it through rspec or the console manually. See error below.</p>\n\n<pre><code>ActiveModel::ForbiddenAttributesError \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/activemodel-4.2.0.beta4/lib/active_model/forbidden_attributes_protection.rb:21:in `sanitize_for_mass_assignment' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/activerecord-4.2.0.beta4/lib/active_record/attribute_assignment.rb:33:in `assign_attributes' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/activerecord-4.2.0.beta4/lib/active_record/persistence.rb:249:in `block in update' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/activerecord-4.2.0.beta4/lib/active_record/transactions.rb:345:in `block in with_transaction_returning_status' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/activerecord-4.2.0.beta4/lib/active_record/connection_adapters/abstract/database_statements.rb:213:in `block in transaction' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/activerecord-4.2.0.beta4/lib/active_record/connection_adapters/abstract/transaction.rb:188:in `within_new_transaction' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/activerecord-4.2.0.beta4/lib/active_record/connection_adapters/abstract/database_statements.rb:213:in `transaction' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/activerecord-4.2.0.beta4/lib/active_record/transactions.rb:218:in `transaction' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/activerecord-4.2.0.beta4/lib/active_record/transactions.rb:342:in `with_transaction_returning_status' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/activerecord-4.2.0.beta4/lib/active_record/persistence.rb:248:in `update' \n/storage/www/testing.phoenix.site.co.za/app/services/people/update.rb:14:in `update_person' \n/storage/www/testing.phoenix.site.co.za/app/services/people/update.rb:9:in `call' \n/storage/www/testing.phoenix.site.co.za/app/services/people/create_or_update_person.rb:24:in `create_or_update_person' \n/storage/www/testing.phoenix.site.co.za/app/services/people/create_or_update_person.rb:15:in `call' \n/storage/www/testing.phoenix.site.co.za/app/services/events/incoming/identify.rb:19:in `create_or_update_person' \n/storage/www/testing.phoenix.site.co.za/app/services/events/incoming/identify.rb:13:in `call' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/performable_method.rb:30:in `perform' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/backend/base.rb:94:in `block in invoke_job' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/lifecycle.rb:61:in `call' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/lifecycle.rb:61:in `block in initialize' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/lifecycle.rb:66:in `call' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/lifecycle.rb:66:in `execute' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/lifecycle.rb:40:in `run_callbacks' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/backend/base.rb:91:in `invoke_job' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/worker.rb:199:in `block (2 levels) in run' \n/home/getsmart/.rvm/rubies/ruby-2.1.2/lib/ruby/2.1.0/timeout.rb:91:in `block in timeout' \n/home/getsmart/.rvm/rubies/ruby-2.1.2/lib/ruby/2.1.0/timeout.rb:101:in `call' \n/home/getsmart/.rvm/rubies/ruby-2.1.2/lib/ruby/2.1.0/timeout.rb:101:in `timeout' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/worker.rb:199:in `block in run' \n/home/getsmart/.rvm/rubies/ruby-2.1.2/lib/ruby/2.1.0/benchmark.rb:294:in `realtime' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/worker.rb:198:in `run' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/worker.rb:275:in `block in reserve_and_run_one_job' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/lifecycle.rb:61:in `call' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/lifecycle.rb:61:in `block in initialize' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/lifecycle.rb:66:in `call' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/lifecycle.rb:66:in `execute' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/lifecycle.rb:40:in `run_callbacks' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/worker.rb:275:in `reserve_and_run_one_job' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/worker.rb:182:in `block in work_off' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/worker.rb:181:in `times' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/worker.rb:181:in `work_off' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/worker.rb:146:in `block (4 levels) in start' \n/home/getsmart/.rvm/rubies/ruby-2.1.2/lib/ruby/2.1.0/benchmark.rb:294:in `realtime' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/worker.rb:145:in `block (3 levels) in start' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/lifecycle.rb:61:in `call' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/lifecycle.rb:61:in `block in initialize' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/lifecycle.rb:66:in `call' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/lifecycle.rb:66:in `execute' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/lifecycle.rb:40:in `run_callbacks' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/worker.rb:144:in `block (2 levels) in start' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/worker.rb:143:in `loop' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/worker.rb:143:in `block in start' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/plugins/clear_locks.rb:7:in `call' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/plugins/clear_locks.rb:7:in `block (2 levels) in &lt;class:ClearLocks&gt;' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/lifecycle.rb:79:in `call' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/lifecycle.rb:79:in `block (2 levels) in add' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/lifecycle.rb:61:in `call' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/lifecycle.rb:61:in `block in initialize' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/lifecycle.rb:79:in `call' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/lifecycle.rb:79:in `block in add' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/lifecycle.rb:66:in `call' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/lifecycle.rb:66:in `execute' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/lifecycle.rb:40:in `run_callbacks' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/worker.rb:142:in `start' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/command.rb:124:in `run' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/command.rb:112:in `block in run_process' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/daemons-1.1.9/lib/daemons/application.rb:255:in `call' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/daemons-1.1.9/lib/daemons/application.rb:255:in `block in start_proc' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/daemons-1.1.9/lib/daemons/daemonize.rb:82:in `call' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/daemons-1.1.9/lib/daemons/daemonize.rb:82:in `call_as_daemon' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/daemons-1.1.9/lib/daemons/application.rb:259:in `start_proc' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/daemons-1.1.9/lib/daemons/application.rb:296:in `start' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/daemons-1.1.9/lib/daemons/application_group.rb:159:in `block (2 levels) in start_all' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/daemons-1.1.9/lib/daemons/application_group.rb:158:in `fork' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/daemons-1.1.9/lib/daemons/application_group.rb:158:in `block in start_all' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/daemons-1.1.9/lib/daemons/application_group.rb:157:in `each' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/daemons-1.1.9/lib/daemons/application_group.rb:157:in `start_all' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/daemons-1.1.9/lib/daemons/controller.rb:80:in `run' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/daemons-1.1.9/lib/daemons.rb:197:in `block in run_proc' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/daemons-1.1.9/lib/daemons/cmdline.rb:109:in `call' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/daemons-1.1.9/lib/daemons/cmdline.rb:109:in `catch_exceptions' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/daemons-1.1.9/lib/daemons.rb:196:in `run_proc' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/command.rb:110:in `run_process' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/command.rb:91:in `block in daemonize' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/command.rb:89:in `times' \n/home/getsmart/.rvm/gems/ruby-2.1.2@phoenix/gems/delayed_job-4.0.4/lib/delayed/command.rb:89:in `daemonize' bin/delayed_job:5:in `&lt;main&gt;'\n</code></pre>\n\n<p>Note that the code is being executed from delayed job. Not sure if that will make a difference.</p>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "edited": false, "score": 0, "creation_date": 1430294522, "post_id": 29937244, "comment_id": 47996871, "body": "Ruby is well-suited for expressive statements like this (<a href=\"https://robots.thoughtbot.com/writing-a-domain-specific-language-in-ruby\" rel=\"nofollow noreferrer\">robots.thoughtbot.com/&hellip;</a>)"}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 3981995, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100001953543235/picture?type=large", "display_name": "Jechol Lee", "link": "https://stackoverflow.com/users/3981995/jechol-lee"}, "edited": false, "score": 0, "creation_date": 1430293483, "post_id": 29937285, "comment_id": 47996265, "body": "Thanks! I understand now."}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 3, "last_activity_date": 1430293246, "creation_date": 1430293246, "answer_id": 29937285, "question_id": 29937244, "link": "https://stackoverflow.com/questions/29937244/how-expect9-to-be-6-is-valid-expression/29937285#29937285", "title": "how &quot;expect(9).to be &gt; 6&quot; is valid expression?", "body": "<p>It's equivalent to</p>\n\n<pre><code>expect(9).to(be &gt; 6)\n</code></pre>\n\n<p>which is equivalent to:</p>\n\n<pre><code>expect(9).to(be.&gt;(6))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1930, "user_id": 1337204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SkzuG.jpg?s=128&g=1", "display_name": "tpbowden", "link": "https://stackoverflow.com/users/1337204/tpbowden"}, "is_accepted": false, "score": 2, "last_activity_date": 1430293484, "creation_date": 1430293484, "answer_id": 29937373, "question_id": 29937244, "link": "https://stackoverflow.com/questions/29937244/how-expect9-to-be-6-is-valid-expression/29937373#29937373", "title": "how &quot;expect(9).to be &gt; 6&quot; is valid expression?", "body": "<p>In ruby you can override the <code>&gt;</code> operator on a class, in this case the <code>RSpec::Matchers::BuiltIn::Be</code> class which is what the <code>be</code> method returns.</p>\n\n<p>If you want to check the source code the relevant part is <a href=\"https://github.com/rspec/rspec-expectations/blob/master/lib/rspec/matchers/built_in/be.rb\" rel=\"nofollow\">here</a></p>\n"}], "owner": {"reputation": 145, "user_id": 3981995, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100001953543235/picture?type=large", "display_name": "Jechol Lee", "link": "https://stackoverflow.com/users/3981995/jechol-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 29937285, "answer_count": 2, "score": 1, "last_activity_date": 1430293484, "creation_date": 1430293111, "question_id": 29937244, "link": "https://stackoverflow.com/questions/29937244/how-expect9-to-be-6-is-valid-expression", "title": "how &quot;expect(9).to be &gt; 6&quot; is valid expression?", "body": "<p>In <a href=\"http://www.relishapp.com/rspec/rspec-expectations/v/3-2/docs/built-in-matchers/comparison-matchers\" rel=\"nofollow\">RSpec doc</a>, I found something looking strange like</p>\n\n<pre><code>expect(9).to be &gt; 6\n</code></pre>\n\n<p>I have no idea how above expression can be valid.</p>\n\n<p>How can <code>&gt;</code> come like this? I search rspec github, but found no clue.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "chartkick"], "comments": [{"owner": {"reputation": 41, "user_id": 2261694, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/45895b682ea7d95ddf891c71fdcdffb8?s=128&d=identicon&r=PG", "display_name": "user2261694", "link": "https://stackoverflow.com/users/2261694/user2261694"}, "edited": false, "score": 0, "creation_date": 1430293129, "post_id": 29937226, "comment_id": 47996037, "body": "i even tried this <a href=\"http://stackoverflow.com/questions/19144640/using-chartkick-in-rails-4-0\" title=\"using chartkick in rails 4 0\">stackoverflow.com/questions/19144640/&hellip;</a> but it still not working"}, {"owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "edited": false, "score": 0, "creation_date": 1430294703, "post_id": 29937226, "comment_id": 47996973, "body": "I&#39;d suggest sharing your Ajax code and checking in browser devtools and logs to see if there&#39;s any difference between the Ajax call and the direct request. Particularly look at the request &quot;accept&quot; header. It&#39;s also not clear from your question if the content is actually landing in the browser (but not being rendered due to a JS error) or broken on the server, so devtools+logs should help with that."}, {"owner": {"reputation": 41, "user_id": 2261694, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/45895b682ea7d95ddf891c71fdcdffb8?s=128&d=identicon&r=PG", "display_name": "user2261694", "link": "https://stackoverflow.com/users/2261694/user2261694"}, "reply_to_user": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "edited": false, "score": 1, "creation_date": 1430302532, "post_id": 29937226, "comment_id": 48002201, "body": "i called $(&quot;body&quot;).append(&#39;#{escape_javascript(yield :charts_js)}&#39;); and it solves the problem, thanks mahemoff"}], "owner": {"reputation": 41, "user_id": 2261694, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/45895b682ea7d95ddf891c71fdcdffb8?s=128&d=identicon&r=PG", "display_name": "user2261694", "link": "https://stackoverflow.com/users/2261694/user2261694"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 688, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1430293017, "creation_date": 1430293017, "question_id": 29937226, "link": "https://stackoverflow.com/questions/29937226/chartkick-loading-issue-with-ajax", "title": "chartkick loading issue with Ajax", "body": "<p>I added a graph partial and called this method of Chartkick to load the graphs, it works fine with HTML request. When i call it with Ajax. i always see LOADING error. any idea what could be the reason of this ?</p>\n\n<pre><code>   = pie_chart Goal.group(:name).count\n</code></pre>\n\n<p>I'm using Rails 4.1.9 and ruby ruby 2.1.5</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 143, "user_id": 2046161, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/fuOmC.jpg?s=128&g=1", "display_name": "SZMER", "link": "https://stackoverflow.com/users/2046161/szmer"}, "edited": false, "score": 0, "creation_date": 1430292628, "post_id": 29936488, "comment_id": 47995708, "body": "No. But I checked it now and result is not satisfying:     <code>irb(main):001:0&gt; Great::Item.table_name_prefix     =&gt; &quot;great_&quot;     irb(main):002:0&gt; Great::Item.table_name     =&gt; &quot;items&quot;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 2046161, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/fuOmC.jpg?s=128&g=1", "display_name": "SZMER", "link": "https://stackoverflow.com/users/2046161/szmer"}, "edited": false, "score": 0, "creation_date": 1430291314, "post_id": 29936548, "comment_id": 47994941, "body": "I wrote it didn&#39;t work out - same result as <code>set_table_name</code> &amp; <code>reset_table_name</code>. Table name was setted correct but query was builded with wrong table name."}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "reply_to_user": {"reputation": 143, "user_id": 2046161, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/fuOmC.jpg?s=128&g=1", "display_name": "SZMER", "link": "https://stackoverflow.com/users/2046161/szmer"}, "edited": false, "score": 0, "creation_date": 1430291418, "post_id": 29936548, "comment_id": 47994996, "body": "you sure you did add the <code>self</code> ?"}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "reply_to_user": {"reputation": 143, "user_id": 2046161, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/fuOmC.jpg?s=128&g=1", "display_name": "SZMER", "link": "https://stackoverflow.com/users/2046161/szmer"}, "edited": false, "score": 1, "creation_date": 1430292381, "post_id": 29936548, "comment_id": 47995552, "body": "ok what if you use <code>set_table_name</code> on top of your class definition?"}, {"owner": {"reputation": 143, "user_id": 2046161, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/fuOmC.jpg?s=128&g=1", "display_name": "SZMER", "link": "https://stackoverflow.com/users/2046161/szmer"}, "edited": false, "score": 0, "creation_date": 1430292951, "post_id": 29936548, "comment_id": 47995928, "body": "I didn&#39;t expected it will change something but it did the trick."}, {"owner": {"reputation": 143, "user_id": 2046161, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/fuOmC.jpg?s=128&g=1", "display_name": "SZMER", "link": "https://stackoverflow.com/users/2046161/szmer"}, "edited": false, "score": 0, "creation_date": 1430293029, "post_id": 29936548, "comment_id": 47995980, "body": "I tried it earlier but before it i loaded some module and then tried to <code>set_table_name</code>. After replacing lines everything started work."}, {"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "reply_to_user": {"reputation": 143, "user_id": 2046161, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/fuOmC.jpg?s=128&g=1", "display_name": "SZMER", "link": "https://stackoverflow.com/users/2046161/szmer"}, "edited": false, "score": 0, "creation_date": 1430293098, "post_id": 29936548, "comment_id": 47996022, "body": "I understand it could be confusing. ruby code is executed at run time so order of lines matters"}], "tags": [], "owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "is_accepted": true, "score": 1, "last_activity_date": 1430292552, "last_edit_date": 1430292552, "creation_date": 1430291116, "answer_id": 29936548, "question_id": 29936488, "link": "https://stackoverflow.com/questions/29936488/model-with-namespace-wrong-table-name-without-namespace/29936548#29936548", "title": "Model with namespace - wrong table name (without namespace)", "body": "<p>Assumed table names dont take into account the modules, as you noticed.</p>\n\n<p>But as you already know, you can set it yourself, using:</p>\n\n<pre><code>self.table_name = 'great_items'\n</code></pre>\n\n<hr>\n\n<p>According to <a href=\"http://apidock.com/rails/v3.0.9/ActiveRecord/Base/set_table_name/class\" rel=\"nofollow\">this doc</a>, because you use 3.0.x, you have to use:</p>\n\n<pre><code>set_table_name \"great_items\"\n</code></pre>\n\n<p>This must be put on top of your class definition</p>\n"}, {"comments": [{"owner": {"reputation": 143, "user_id": 2046161, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/fuOmC.jpg?s=128&g=1", "display_name": "SZMER", "link": "https://stackoverflow.com/users/2046161/szmer"}, "edited": false, "score": 0, "creation_date": 1430293108, "post_id": 29937041, "comment_id": 47996026, "body": "can&#39;t change table names cause it will break backward compatibility with other systems. Moreover on other servers this code works only one of them is exception :)"}, {"owner": {"reputation": 156, "user_id": 2862476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KA9y.jpg?s=128&g=1", "display_name": "Xeeshan", "link": "https://stackoverflow.com/users/2862476/xeeshan"}, "reply_to_user": {"reputation": 143, "user_id": 2046161, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/fuOmC.jpg?s=128&g=1", "display_name": "SZMER", "link": "https://stackoverflow.com/users/2046161/szmer"}, "edited": false, "score": 0, "creation_date": 1430389415, "post_id": 29937041, "comment_id": 48050156, "body": "Then you should go with set_table_name as suggtesed by @apneadiving"}], "tags": [], "owner": {"reputation": 156, "user_id": 2862476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KA9y.jpg?s=128&g=1", "display_name": "Xeeshan", "link": "https://stackoverflow.com/users/2862476/xeeshan"}, "is_accepted": false, "score": 1, "last_activity_date": 1430292510, "creation_date": 1430292510, "answer_id": 29937041, "question_id": 29936488, "link": "https://stackoverflow.com/questions/29936488/model-with-namespace-wrong-table-name-without-namespace/29937041#29937041", "title": "Model with namespace - wrong table name (without namespace)", "body": "<p>Try this</p>\n\n<pre><code>class RenameOldTableToNewTable&lt; ActiveRecord::Migration\n  def self.up\n    rename_table :old_table_name, :new_table_name\n  end \n  def self.down\n    rename_table :new_table_name, :old_table_name\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 2046161, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/fuOmC.jpg?s=128&g=1", "display_name": "SZMER", "link": "https://stackoverflow.com/users/2046161/szmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 881, "favorite_count": 0, "accepted_answer_id": 29936548, "answer_count": 2, "score": 2, "last_activity_date": 1430292763, "creation_date": 1430290912, "last_edit_date": 1430292763, "question_id": 29936488, "link": "https://stackoverflow.com/questions/29936488/model-with-namespace-wrong-table-name-without-namespace", "title": "Model with namespace - wrong table name (without namespace)", "body": "<p>I found a problem in one of legacy applications (outdated rails-3.0.20).\nThis application has lots of components and nested models. Problem existed only on one of production servers (same environments like other productions and mine dev).</p>\n\n<p>There was model with name space which looks like</p>\n\n<pre><code>module Great\n  class Item\n  end\nend\n</code></pre>\n\n<p>Table name was named <code>great_items</code>.</p>\n\n<p>When i debug/open it on server with fault i've found that calculated table name was <code>items</code> istead of <code>great_items</code>.</p>\n\n<pre><code>$ Great::Item.all\n#=&gt; ActiveRecord::StatementInvalid: No attribute named `name` exists for table `items`\n</code></pre>\n\n<p>So i thought mby there is simmilar class with same namespace, I've checked it and it wasn't. My 2nd thought was to set table name explicit i tried</p>\n\n<pre><code>self.table_name = 'great_items'\n# &amp;\nset_table_name 'great_items'\n</code></pre>\n\n<p>After this changes i run <code>rails c</code> and table name was setted fine:</p>\n\n<pre><code>$ Great::Item.table_name\n#=&gt; 'great_items'\n</code></pre>\n\n<p><strong>But when i tried to obtain some items there was a freak error, which i could not understand till now!</strong></p>\n\n<pre><code>$ Great::Item.all\n#=&gt; ActiveRecord::StatementInvalid: Mysql2::Error: Table 'db.items' doesn't exist: SELECT `great_items`.* FROM `items` WHERE `great_items`.`some_default_scope` = 0\n</code></pre>\n\n<p>As you can see in above example table has correct name for <code>select</code> values and in <code>where</code> statement, but in <code>from</code> value is incorrect.</p>\n\n<p>I was curious so I've checked <code>ActiveRecord::Base</code> mysql adapter and there was some kind of catching table name so i tried to <code>reset_table_name</code>. Reset helped to setup expected name('great_items') but above errors didn't missed. </p>\n\n<p>Problem dissapeared when i turn of class catching in production enviroment - but it wasn't solution.</p>\n\n<p>Finally I kinda 'solved' this using <code>reset_column_information</code> after <code>set_table_name</code>, but i think it isn't good solution either.</p>\n\n<p>My question is do you know what really could cause this issue and how to solve it without reloading class cache?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-2.0", "ruby-2.2"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1430290617, "post_id": 29936311, "comment_id": 47994537, "body": "You have a wrong syntax of hash and your attempt doesn&#39;t works too, because is invalid expression."}, {"owner": {"reputation": 1508, "user_id": 1468122, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/QKC1Z.jpg?s=128&g=1", "display_name": "Ahmad hamza", "link": "https://stackoverflow.com/users/1468122/ahmad-hamza"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1430290881, "post_id": 29936311, "comment_id": 47994695, "body": "I have posted a just like structure of it. Cant post the data from it. its private"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1430290934, "post_id": 29936311, "comment_id": 47994733, "body": "ok, but <code>item.items.detect</code> it is not works."}, {"owner": {"reputation": 1508, "user_id": 1468122, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/QKC1Z.jpg?s=128&g=1", "display_name": "Ahmad hamza", "link": "https://stackoverflow.com/users/1468122/ahmad-hamza"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1430291142, "post_id": 29936311, "comment_id": 47994853, "body": "I think now it should work. Please check"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1430291221, "post_id": 29936311, "comment_id": 47994895, "body": "no. It is not work, because access to the hash in ruby looks like <code>item[&#39;items&#39;][&#39;...&#39;]</code> and not like in the javascript <code>item.items...</code>."}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1430293016, "creation_date": 1430293016, "answer_id": 29937225, "question_id": 29936311, "link": "https://stackoverflow.com/questions/29936311/check-and-select-the-latest-one-from-the-array-of-hashes/29937225#29937225", "title": "Check and select the latest one from the array of hashes", "body": "<p>I have made the hash more or less rubyish and if I correctly undrestood the requirement, here you go:</p>\n\n<pre><code>hash = { histories:[\n  { created: \"2014-04-01\",\n    items:[\n        { a: \"Ready\", b: \"NOT to be chosen\" },\n        { a: \"sdfjbsf\", b: \"hello23\" }\n  ]},  \n  { created: \"2015-04-01\",\n    items:[\n        { a: \"Ready\", b: \"to be chosen\" },\n        { a: \"sdfjbsf\", b: \"hello23\" }\n  ]},  \n  { created: \"2014-03-01\",\n    items:[\n        { a: \"sknfkssd\", b: \"ksdfjshs\" },  \n        { a: \"unready\", b: \"shdfjsh\" }   \n   ]}\n]}\n\nhash[:histories].select do |item|\n  item[:items].detect do |item|\n    item[:a] == 'Ready' # select ready only\n  end \nend.reduce(nil) do |memo, item| # reduce to newest\n  memo = item if memo.nil? || \n         Date.parse(memo[:created]) &lt; Date.parse(item[:created])\nend\n\n#\u21d2 {\n#  :created =&gt; \"2015-04-01\",\n#    :items =&gt; [\n#    [0] {\n#      :a =&gt; \"Ready\",\n#      :b =&gt; \"to be chosen\"\n#    },\n#    [1] {\n#      :a =&gt; \"sdfjbsf\",\n#      :b =&gt; \"hello23\"\n#    }\n#  ]\n# }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1430293345, "post_id": 29937271, "comment_id": 47996172, "body": "<code>sort_by</code> is proven to be more efficient, but here sorting is absolutely superfluous, though greedy to resources."}, {"owner": {"reputation": 1506, "user_id": 3414150, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/tASIO.jpg?s=128&g=1", "display_name": "lx00st", "link": "https://stackoverflow.com/users/3414150/lx00st"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1430293700, "post_id": 29937271, "comment_id": 47996404, "body": "yes, <code>reduce</code> looks better here. But it can be sorted in advance for many items searchs"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1430293963, "post_id": 29937271, "comment_id": 47996572, "body": "Anyway, consider a best practice to use <code>sort_by { |x| x[:created_at] }</code> instead of plain <code>sort</code>. Plus <code>f.a</code> should be <code>f[:a]</code>."}, {"owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "edited": false, "score": 0, "creation_date": 1430295302, "post_id": 29937271, "comment_id": 47997292, "body": "Sorting might seem superfluous if your main concern is to write <i>clever</i> code, but if you focus on writing <i>clear</i> code, and avoid premature optimization, it makes a lot of sense. Prefer <code>sort_by</code> when your sort requires a method dispatch. It is optimized using a Schwartzian Transform, making it much more efficient."}, {"owner": {"reputation": 1508, "user_id": 1468122, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/QKC1Z.jpg?s=128&g=1", "display_name": "Ahmad hamza", "link": "https://stackoverflow.com/users/1468122/ahmad-hamza"}, "edited": false, "score": 0, "creation_date": 1430297869, "post_id": 29937271, "comment_id": 47998875, "body": "Your solution works but i&#39;m confused here. Since detect return first possible find, then how can <code>sort_by</code> is working on it.?"}, {"owner": {"reputation": 1508, "user_id": 1468122, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/QKC1Z.jpg?s=128&g=1", "display_name": "Ahmad hamza", "link": "https://stackoverflow.com/users/1468122/ahmad-hamza"}, "edited": false, "score": 0, "creation_date": 1430298868, "post_id": 29937271, "comment_id": 47999497, "body": "But <code>select</code> will be returning the complete <code>object</code> of the <code>detect&#39;s</code> find. How does <code>sort_by</code> compares then ?"}, {"owner": {"reputation": 1508, "user_id": 1468122, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/QKC1Z.jpg?s=128&g=1", "display_name": "Ahmad hamza", "link": "https://stackoverflow.com/users/1468122/ahmad-hamza"}, "edited": false, "score": 0, "creation_date": 1430299146, "post_id": 29937271, "comment_id": 47999682, "body": "i printed the <code>x[:created]</code> so it is printing two values. May be it is comparing with other &quot;Ready&quot; having hashes. i guess"}, {"owner": {"reputation": 1506, "user_id": 3414150, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/tASIO.jpg?s=128&g=1", "display_name": "lx00st", "link": "https://stackoverflow.com/users/3414150/lx00st"}, "edited": false, "score": 0, "creation_date": 1430299149, "post_id": 29937271, "comment_id": 47999685, "body": "<code>sort_by</code> compares histories by :created_at field.. Thats how <code>sort_by</code> works"}, {"owner": {"reputation": 1506, "user_id": 3414150, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/tASIO.jpg?s=128&g=1", "display_name": "lx00st", "link": "https://stackoverflow.com/users/3414150/lx00st"}, "edited": false, "score": 0, "creation_date": 1430299260, "post_id": 29937271, "comment_id": 47999763, "body": "print first <code>select</code> output then make <code>sort_by</code> on it - may be it will be clearer"}, {"owner": {"reputation": 1506, "user_id": 3414150, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/tASIO.jpg?s=128&g=1", "display_name": "lx00st", "link": "https://stackoverflow.com/users/3414150/lx00st"}, "edited": false, "score": 0, "creation_date": 1430299429, "post_id": 29937271, "comment_id": 47999879, "body": "when <code>sort_by</code> works it does not know any &#39;Ready&#39;. It just sorts  by :created_at field what <code>select</code> have returned"}], "tags": [], "owner": {"reputation": 1506, "user_id": 3414150, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/tASIO.jpg?s=128&g=1", "display_name": "lx00st", "link": "https://stackoverflow.com/users/3414150/lx00st"}, "is_accepted": true, "score": 2, "last_activity_date": 1430294373, "last_edit_date": 1430294373, "creation_date": 1430293177, "answer_id": 29937271, "question_id": 29936311, "link": "https://stackoverflow.com/questions/29936311/check-and-select-the-latest-one-from-the-array-of-hashes/29937271#29937271", "title": "Check and select the latest one from the array of hashes", "body": "<pre><code>histories.select { |h| \n  h[:items].detect {|f| f[:a] == 'Ready' } \n}.sort_by {|x| x[:created_at] }.last\n</code></pre>\n"}], "owner": {"reputation": 1508, "user_id": 1468122, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/QKC1Z.jpg?s=128&g=1", "display_name": "Ahmad hamza", "link": "https://stackoverflow.com/users/1468122/ahmad-hamza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 29937271, "answer_count": 2, "score": 0, "last_activity_date": 1430294373, "creation_date": 1430290329, "last_edit_date": 1430291012, "question_id": 29936311, "link": "https://stackoverflow.com/questions/29936311/check-and-select-the-latest-one-from-the-array-of-hashes", "title": "Check and select the latest one from the array of hashes", "body": "<p>I have to check and select the latest one from the array of hashes. The structure is like this:</p>\n\n<pre><code>'histories':[\n{\n  {\n   ...\n  },\n  'created': \"date1\",\n  'items':[\n    {\n     'a': \"Ready\",\n     'b': \"dfknsknfs\",\n    },\n    {\n     'a': \"sdfjbsf\",\n     'b': \"hello23\",\n    }\n  ]\n},\n{\n  {\n   ...\n  },\n  'created': \"date2\",\n  'items':[\n    {\n     'a': \"sknfkssd\",\n     'b': \"ksdfjshs\",\n    },\n    {\n     'a': \"Ready\",\n     'b': \"shdfjsh\",\n    }\n  ]\n},\n...\n]\n</code></pre>\n\n<p>I have to first find for the value \"Ready\" and then i have to select the latest \"created\" date. </p>\n\n<p>My attempt for this is like</p>\n\n<pre><code>ready_item = histories.select { |item| item.items.detect {|f| f.a == \"Ready\" } }\nready_item\n</code></pre>\n\n<p>But since the <code>detect</code> is used, it is returning only the first detected value. But i need to get the latest date. What should be the possible solution of it?</p>\n"}, {"tags": ["ruby", "sass"], "comments": [{"owner": {"reputation": 1826, "user_id": 1124270, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e11c9f5032999fd4221cff59ae84bf03?s=128&d=identicon&r=PG", "display_name": "foresightyj", "link": "https://stackoverflow.com/users/1124270/foresightyj"}, "edited": false, "score": 1, "creation_date": 1442285924, "post_id": 29936079, "comment_id": 53008853, "body": "You are within the great firewall in China. See <a href=\"https://www.zfanw.com/blog/error-while-executing-gem-gem-remote-fetch-error.html\" rel=\"nofollow noreferrer\">this</a>"}], "owner": {"reputation": 88, "user_id": 4741313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a82b79df4e1a2a6f1dc0b46ff1eb1973?s=128&d=identicon&r=PG&f=1", "display_name": "qiandutianxia", "link": "https://stackoverflow.com/users/4741313/qiandutianxia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1029, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1430289578, "creation_date": 1430289578, "question_id": 29936079, "link": "https://stackoverflow.com/questions/29936079/error-while-executing-gem-gemremotefetcherfetcherror", "title": "ERROR: While executing gem ... (Gem::RemoteFetcher::FetchError)", "body": "<p>I'm trying to install sass. But not able to install.\nIm facing this issue.</p>\n\n<pre><code> C:\\Users\\Administrator&gt;gem install sass\nERROR:  While executing gem ... (Gem::RemoteFetcher::FetchError)\n    Errno::ECONNABORTED: An established connection was aborted by the software i\nn your host machine. - SSL_connect (https://rubygems.org/quick/Marshal.4.8/sass-\n3.4.13.gemspec.rz)\n</code></pre>\n"}, {"tags": ["ruby", "rack", "grape"], "answers": [{"tags": [], "owner": {"reputation": 460, "user_id": 2784001, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b4f3b49b1586a19d8a6ffbb4c75c3510?s=128&d=identicon&r=PG&f=1", "display_name": "Ankit Pandey", "link": "https://stackoverflow.com/users/2784001/ankit-pandey"}, "is_accepted": true, "score": 4, "last_activity_date": 1430291567, "creation_date": 1430291567, "answer_id": 29936693, "question_id": 29935866, "link": "https://stackoverflow.com/questions/29935866/how-to-work-with-rack-using-ruby-for-storing-image-on-cloudinary-with-gem-carrie/29936693#29936693", "title": "How to work with rack using ruby for storing image on cloudinary with gem carrierwave", "body": "<p>Based off of <a href=\"https://github.com/cloudinary/cloudinary_gem/blob/master/lib/cloudinary/carrier_wave/storage.rb\" rel=\"nofollow\">this</a> ,you can't use carrierwave gem without rails. You should be able to do something like:</p>\n\n<p>you can use <a href=\"http://www.jimmycuadra.com/posts/metaprogramming-ruby-class-eval-and-instance-eval\" rel=\"nofollow\">meta-programming in ruby</a>.</p>\n\n<p>Just override the class of Carrierwave and create a storage.rb file :</p>\n\n<pre><code>Cloudinary::CarrierWave::Storage.class_eval do\n /// Your code here...\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 180, "user_id": 4665649, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-oI7BBuXjKus/AAAAAAAAAAI/AAAAAAAAAEU/Psc2CXgqguE/photo.jpg?sz=128", "display_name": "Ashish mittal", "link": "https://stackoverflow.com/users/4665649/ashish-mittal"}, "is_accepted": false, "score": 5, "last_activity_date": 1430549412, "creation_date": 1430549412, "answer_id": 29999364, "question_id": 29935866, "link": "https://stackoverflow.com/questions/29935866/how-to-work-with-rack-using-ruby-for-storing-image-on-cloudinary-with-gem-carrie/29999364#29999364", "title": "How to work with rack using ruby for storing image on cloudinary with gem carrierwave", "body": "<p>That was a bug in cloudinary gem, now this has been solved by Cloudinary team.</p>\n\n<p>Please refer to this <a href=\"https://github.com/cloudinary/cloudinary_gem/issues/154\" rel=\"noreferrer\">#Issue-154</a> </p>\n\n<p>Hope it helps.</p>\n"}], "owner": {"reputation": 180, "user_id": 4665649, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-oI7BBuXjKus/AAAAAAAAAAI/AAAAAAAAAEU/Psc2CXgqguE/photo.jpg?sz=128", "display_name": "Ashish mittal", "link": "https://stackoverflow.com/users/4665649/ashish-mittal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 1, "accepted_answer_id": 29936693, "answer_count": 2, "score": 2, "last_activity_date": 1430549412, "creation_date": 1430288728, "last_edit_date": 1430290547, "question_id": 29935866, "link": "https://stackoverflow.com/questions/29935866/how-to-work-with-rack-using-ruby-for-storing-image-on-cloudinary-with-gem-carrie", "title": "How to work with rack using ruby for storing image on cloudinary with gem carrierwave", "body": "<p>I am using rack framework with active record and there is no rails ,   so when i upload an image to cloudinary using carrierwave gem i am getting the following error.</p>\n\n<blockquote>\n  <p>Unexpected error while processing request: uninitialized constant\n  Cloudinary::CarrierWave::Storage::Rails</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "elasticsearch"], "answers": [{"tags": [], "owner": {"reputation": 658, "user_id": 1510348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4485a7be5209722118c15db5754f3d40?s=128&d=identicon&r=PG", "display_name": "monu", "link": "https://stackoverflow.com/users/1510348/monu"}, "is_accepted": false, "score": 0, "last_activity_date": 1430290083, "creation_date": 1430290083, "answer_id": 29936243, "question_id": 29935805, "link": "https://stackoverflow.com/questions/29935805/elastic-search-searching-multiple-queries-in-single-field/29936243#29936243", "title": "Elastic Search- Searching Multiple Queries in Single Field", "body": "<p>One way would be making clearance as not_analyzed field in the mapping and using terms filter. </p>\n\n<p>Example:</p>\n\n<pre><code>PUT test\n{\n  \"mappings\": {\n    \"e1\":{\n      \"properties\": {\n        \"clearance\":{\n          \"type\": \"string\",\n          \"index\": \"not_analyzed\"\n        }\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>Some test data:</p>\n\n<pre><code>PUT test/e1/1\n{\n  \"clearance\":\"None\"\n}\nPUT test/e1/2\n{\n  \"clearance\":\"First Level\"\n}\nPUT test/e1/3\n{\n  \"clearance\":\"Second Level\"\n}\n</code></pre>\n\n<p>Now query part:</p>\n\n<pre><code>GET test/e1/_search\n{\n  \"query\": {\n    \"filtered\": {\n      \"query\": {\n        \"match_all\": {}\n      },\n      \"filter\": {\n        \"terms\": {\n          \"clearance\": [\n            \"None\",\n            \"First Level\"\n          ],\n          \"execution\": \"or\"\n        }\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>Result verfication:</p>\n\n<pre><code>{\n   \"took\": 1,\n   \"timed_out\": false,\n   \"_shards\": {\n      \"total\": 1,\n      \"successful\": 1,\n      \"failed\": 0\n   },\n   \"hits\": {\n      \"total\": 2,\n      \"max_score\": 1,\n      \"hits\": [\n         {\n            \"_index\": \"test\",\n            \"_type\": \"e1\",\n            \"_id\": \"1\",\n            \"_score\": 1,\n            \"_source\": {\n               \"clearance\": \"None\"\n            }\n         },\n         {\n            \"_index\": \"test\",\n            \"_type\": \"e1\",\n            \"_id\": \"2\",\n            \"_score\": 1,\n            \"_source\": {\n               \"clearance\": \"First Level\"\n            }\n         }\n      ]\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 1573, "user_id": 2400445, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/h7Bym.jpg?s=128&g=1", "display_name": "Nidhin S G", "link": "https://stackoverflow.com/users/2400445/nidhin-s-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 280, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430290083, "creation_date": 1430288493, "question_id": 29935805, "link": "https://stackoverflow.com/questions/29935805/elastic-search-searching-multiple-queries-in-single-field", "title": "Elastic Search- Searching Multiple Queries in Single Field", "body": "<p>I'm new to elastic Search. I have a field name <code>clearance</code> in my <code>users</code> table and I'm trying to filter my results based on this.</p>\n\n<pre><code>match: {\n          clearance: {\n            query: 'None',\n            type: 'phrase'\n          }\n        }\n</code></pre>\n\n<p>When I give the above match query i get 3 results. What I'm trying to get is to pass one more string along with <code>None</code>. For eg I want to find the users with clearance <code>None</code> and <code>First Level</code></p>\n\n<p>I tried this.</p>\n\n<pre><code>multi_match: {\n              clearance: {\n                query: 'None OR First Level',\n                type: 'phrase'\n              }\n            }\n</code></pre>\n\n<p>But ended up in some error. Please Help. Correct me if my question is wrong.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord", "postgis"], "answers": [{"comments": [{"owner": {"reputation": 1362, "user_id": 2320744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ade05a3f9049c069fc845f7529a7423?s=128&d=identicon&r=PG", "display_name": "Mathias Vonende", "link": "https://stackoverflow.com/users/2320744/mathias-vonende"}, "edited": false, "score": 0, "creation_date": 1430305693, "post_id": 29936345, "comment_id": 48004556, "body": "actually, the output is (Y, X) -- (lat, lon), see the ruby SQL-Output: <code>SELECT postgis.ST_Y(geocoordinates) AS latitude, postgis.ST_X(geocoordinates) AS longitude</code>"}, {"owner": {"reputation": 23418, "user_id": 3304426, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/24EAB.png?s=128&g=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/3304426/patrick"}, "reply_to_user": {"reputation": 1362, "user_id": 2320744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ade05a3f9049c069fc845f7529a7423?s=128&d=identicon&r=PG", "display_name": "Mathias Vonende", "link": "https://stackoverflow.com/users/2320744/mathias-vonende"}, "edited": false, "score": 0, "creation_date": 1430306518, "post_id": 29936345, "comment_id": 48005089, "body": "@maze-le The output is indeed (lat, lon) because it is explicitly so requested with the PostGIS functions. The input, however, should be (lon, lat), at the very least in the <code>UPDATE</code> statement because that is how the WKT string (&quot;SRID=4326;POINT(lon lat)&quot;) is interpreted. See an explanation in the updated answer."}], "tags": [], "owner": {"reputation": 23418, "user_id": 3304426, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/24EAB.png?s=128&g=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/3304426/patrick"}, "is_accepted": true, "score": 5, "last_activity_date": 1430307126, "last_edit_date": 1430307126, "creation_date": 1430290457, "answer_id": 29936345, "question_id": 29935651, "link": "https://stackoverflow.com/questions/29935651/postgis-latitude-longitude-read-out-reversed/29936345#29936345", "title": "Postgis latitude/longitude read out reversed", "body": "<p>In PostGIS coordinates are set in (X, Y) order, or (longitude, latitude) for geographic coordinate pairs. So you should do:</p>\n\n<pre><code>UPDATE users\nSET geocoordinates = 'SRID=4326;POINT(' || -118.25 || ' ' || 34.197 || ')'\nWHERE id = 347708\n</code></pre>\n\n<p>and then probably too:</p>\n\n<pre><code>irb(main):058:0&gt; b.geocoordinates = [-118.25, 34.197]\n</code></pre>\n\n<p>Note that PostGIS ingests text data in the Well-Known Text (WKT) format specified by the <a href=\"https://en.wikipedia.org/wiki/Well-known_text\" rel=\"nofollow\">OGC</a>. The standard prescribes the (X,Y) or (lon,lat) order. So this is not something of a choice, it is required to enable PostGIS to ingest WKT files produced by other OGC-compliant software. After the WKT is ingested, PostGIS stores the data in its internal format, in fact a slightly modified OGC Well-Known Binary (WKB) format, in a column with the PostGIS-defined <code>geometry</code> or <code>geography</code> data type, and the data can then be analyzed and presented in any form desired by the end user.</p>\n"}], "owner": {"reputation": 43, "user_id": 4844930, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zNXKExv0Rxk/AAAAAAAAAAI/AAAAAAAAADU/bUSRFKqYJ7A/photo.jpg?sz=128", "display_name": "Michael Boyle", "link": "https://stackoverflow.com/users/4844930/michael-boyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 637, "favorite_count": 1, "accepted_answer_id": 29936345, "answer_count": 1, "score": 4, "last_activity_date": 1430307126, "creation_date": 1430287759, "question_id": 29935651, "link": "https://stackoverflow.com/questions/29935651/postgis-latitude-longitude-read-out-reversed", "title": "Postgis latitude/longitude read out reversed", "body": "<p>I have a class, Geocoordinateable, that gives models some useful methods for dealing with geo-coordinates. Included in this is \"geocoordinates=\" which accepts an array. </p>\n\n<p><a href=\"https://gist.github.com/mboyle/58dd3add830bbdeef316\" rel=\"nofollow\">https://gist.github.com/mboyle/58dd3add830bbdeef316</a></p>\n\n<p>You can call \"geocoordinates\" to get the coordinates in an array:</p>\n\n<pre><code>irb(main):056:0&gt; b.geocoordinates\n=&gt; [-118.25, 34.197]\n</code></pre>\n\n<p>When I assign coordinates like so:</p>\n\n<pre><code>irb(main):058:0&gt; b.geocoordinates = [34.197, -118.25]\n   (1.8ms)  \n UPDATE users\n SET geocoordinates = 'SRID=4326;POINT(' || 34.197 || ' ' || -118.25 || ')'\n WHERE id = 347708\n\n   (0.7ms)  \n UPDATE activities\n SET geocoordinates = users.geocoordinates\n FROM users\n WHERE activities.user_id = users.id\n AND users.id = 347708\n AND NOT postgis.ST_Equals(activities.geocoordinates, users.geocoordinates)\n\n=&gt; [34.197, -118.25]\n</code></pre>\n\n<p>Things seem to save and come out correctly. If I query the model again, however, and then read geocoordinates, the lat/long are reversed:</p>\n\n<pre><code>irb(main):059:0&gt; b = User.find(b.id)\nirb(main):060:0&gt; b.geocoordinates\n   (0.7ms)  \n SELECT postgis.ST_Y(geocoordinates) AS latitude, postgis.ST_X(geocoordinates) AS longitude\n FROM users\n WHERE id = 347708\n\n=&gt; [-118.25, 34.197]\n</code></pre>\n\n<p>I cannot for the life of me understand why this is happening. Does anyone have a clue?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 671, "user_id": 3785447, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100003014900444/picture?type=large", "display_name": "Praveenkumar", "link": "https://stackoverflow.com/users/3785447/praveenkumar"}, "edited": false, "score": 0, "creation_date": 1430288376, "post_id": 29935689, "comment_id": 47993361, "body": "Not working. the problem is my product is working fine but when I run unit test case then the above error is throwing very weird."}], "tags": [], "owner": {"reputation": 1958, "user_id": 515991, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/319b6176a2b56541cbf44182fd3987a1?s=128&d=identicon&r=PG&f=1", "display_name": "usmanali", "link": "https://stackoverflow.com/users/515991/usmanali"}, "is_accepted": false, "score": 0, "last_activity_date": 1430287958, "creation_date": 1430287958, "answer_id": 29935689, "question_id": 29935615, "link": "https://stackoverflow.com/questions/29935615/no-implicit-conversion-of-symbol-into-string-in-rails-application-in-rspec-test/29935689#29935689", "title": "no implicit conversion of Symbol into String? in rails application in rspec testcase", "body": "<pre><code>Typhoeus::Request.new(\"#{BASE_URI}\",\n{\n  method: :post,\n  body: lead,\n  headers: { Accept: \"application/json\" },\n  verbose: true,\n  ssl_verifypeer: false\n}).run \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 671, "user_id": 3785447, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100003014900444/picture?type=large", "display_name": "Praveenkumar", "link": "https://stackoverflow.com/users/3785447/praveenkumar"}, "is_accepted": true, "score": 1, "last_activity_date": 1430298659, "creation_date": 1430298659, "answer_id": 29939172, "question_id": 29935615, "link": "https://stackoverflow.com/questions/29935615/no-implicit-conversion-of-symbol-into-string-in-rails-application-in-rspec-test/29939172#29939172", "title": "no implicit conversion of Symbol into String? in rails application in rspec testcase", "body": "<p>The problem is (Accept: \"application/json\") instead i changed into ('Accept' => \"application/json\") worked well.</p>\n"}], "owner": {"reputation": 671, "user_id": 3785447, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100003014900444/picture?type=large", "display_name": "Praveenkumar", "link": "https://stackoverflow.com/users/3785447/praveenkumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 518, "favorite_count": 0, "accepted_answer_id": 29939172, "answer_count": 2, "score": 1, "last_activity_date": 1430298659, "creation_date": 1430287636, "question_id": 29935615, "link": "https://stackoverflow.com/questions/29935615/no-implicit-conversion-of-symbol-into-string-in-rails-application-in-rspec-test", "title": "no implicit conversion of Symbol into String? in rails application in rspec testcase", "body": "<pre><code>  #typhoeus running the request\n  Typhoeus::Request.new(\"#{BASE_URI}\",\n  method: :post,\n  body: lead,\n  headers: { Accept: \"application/json\" },\n  verbose: true,\n  ssl_verifypeer: false).run\n</code></pre>\n\n<p>the typhoeus is throwing the the above error when i m running the testcase for the request when i remove headers line then Http request is calling</p>\n"}, {"tags": ["ruby", "optionparser"], "answers": [{"comments": [{"owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "edited": false, "score": 0, "creation_date": 1430304650, "post_id": 29938935, "comment_id": 48003767, "body": "Maybe you mean <code>options[:filenames] ||= ARGV</code> instead of <code>options[:filenames] |= ARGV</code> ? I can&#39;t find <code>|=</code> method in the ruby api"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "edited": false, "score": 0, "creation_date": 1430305929, "post_id": 29938935, "comment_id": 48004715, "body": "<code>a |= b</code> is a ruby-wide shorthand for <code>a = a | b</code>. On arrays it is a <a href=\"http://ruby-doc.org/core-2.2.1/Array.html#method-i-7C\" rel=\"nofollow noreferrer\">union</a>."}, {"owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "edited": false, "score": 0, "creation_date": 1430565087, "post_id": 29938935, "comment_id": 48121741, "body": "Thanks, but I want exactly what I want. Is there any other ruby libraries?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "edited": false, "score": 0, "creation_date": 1430576756, "post_id": 29938935, "comment_id": 48125259, "body": "How do you expect this parser to handle <code>-f a.txt -g</code> where -g is perfectly valid existing file name?"}, {"owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "edited": false, "score": 0, "creation_date": 1430732410, "post_id": 29938935, "comment_id": 48170561, "body": "I needn&#39;t <code>-g</code> flag in my parser :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "edited": false, "score": 0, "creation_date": 1430733098, "post_id": 29938935, "comment_id": 48170926, "body": "You were asking whether there is an option parser, that makes what you want. Since <code>-f a.txt -f</code> is ambiguous for any parser that permits arbitrary amount of options separated by the same symbol as option markers themselves (space in your case,) your claim is ambiguous. You might parse <code>ARGV</code> as I suggested, or force commas as file list delimiter, or even write your own Turing-incomplete parser for such a specific case."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1430298026, "creation_date": 1430298026, "answer_id": 29938935, "question_id": 29935600, "link": "https://stackoverflow.com/questions/29935600/optionparser-pass-an-array-to-ruby-file/29938935#29938935", "title": "optionparser pass an array to ruby file", "body": "<p>With <code>OptionParser</code> you can\u2019t. There is a workaround, though, when there is the only list you need to handle that way and you won\u2019t pass other arguments to the script. <code>OptionParser</code> splits the input by spaces <em>before</em> it processes it. The unkeyed arguments remain in <code>ARGV</code> global constant after parsing. Assuming everything described above is met, here we go:</p>\n\n<pre><code>OptionParser.new do |opts|\n  options[:filenames] = []\n  opts.banner = 'Usage: mp3split.rb [options]'        \n  opts.on('-f', '--filename fName1 fName2 fName3', Array, \n          'absolute or relative pathes to file') do |f|\n    options[:filenames] |= [*f]\n  end\nend.parse!\n\noptions[:filenames] |= ARGV\n</code></pre>\n\n<p>I apparently fixed another glitch within your code: <code>options[:filenames]</code> should be <em>appended</em> not <em>overwritten</em> on every occurence of <code>-f</code> switch, <code>OptionParser</code> supports <code>script -f f1 -f f2 -f f3</code>.</p>\n"}], "owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 504, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1430298026, "creation_date": 1430287587, "question_id": 29935600, "link": "https://stackoverflow.com/questions/29935600/optionparser-pass-an-array-to-ruby-file", "title": "optionparser pass an array to ruby file", "body": "<p>I have a trouble with passing an arguments to my ruby file. IE,</p>\n\n<pre><code>OptionParser.new do |opts|\n  opts.banner = 'Usage: mp3split.rb [options]'\n\n  opts.on('-f', '--filename fName1,fName2,fName3', Array, 'absolute or relative pathes to file') { |f| options[:filenames] = f }\nend.parse!\n</code></pre>\n\n<p>This approach requires me to write this commands:</p>\n\n<pre><code>ruby mp3split.rb --filename fursov_13.mp3,fursov_14.mp3,fursov_14_2.mp3,fursov_15.mp3,fursov_16.mp3,fursov_17.mp3\n</code></pre>\n\n<p>But I want to get array by this:</p>\n\n<pre><code>ruby mp3split.rb --filename fursov_13.mp3 fursov_14.mp3 fursov_14_2.mp3 fursov_15.mp3 fursov_16.mp3 fursov_17.mp3\n</code></pre>\n\n<p>How can I implement this functionality? I can't find anything helpful about this in docs.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1430287338, "post_id": 29935448, "comment_id": 47992859, "body": "You can use a <a href=\"https://github.com/whitequark/parser\" rel=\"nofollow noreferrer\">ruby parser</a>."}, {"owner": {"reputation": 39, "user_id": 4844684, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/D2J2T.jpg?s=128&g=1", "display_name": "kirankumar", "link": "https://stackoverflow.com/users/4844684/kirankumar"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1430287909, "post_id": 29935448, "comment_id": 47993131, "body": "I didn&#39;t get any thing because i am learner i couldn&#39;t understand your github project"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1430288088, "post_id": 29935448, "comment_id": 47993220, "body": "Yeah well, you got to do  some learning first. Walking AST is moderately difficult task, compared to &quot;hello world&quot; programs."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1430290302, "post_id": 29936245, "comment_id": 47994332, "body": "Somehow it didn&#39;t occur to me that you can use introspection for <i>counting</i> those things. For some reason I immediately assumed that the OP wants to know exact source locations too (as if he was writing a static analyzer, or something). You&#39;ll need a parser for comments, though. :)"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1430292665, "post_id": 29936245, "comment_id": 47995731, "body": "<code>C.instance_variables</code> returns the instance variables of <code>C</code> (which is simply an empty <code>Array</code> since <code>C</code> doesn&#39;t have any instance variables). What the OP presumably wants is the instance variables of instances of <code>C</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1430295940, "post_id": 29936245, "comment_id": 47997643, "body": "@J&#246;rg, yes, of course. It&#39;s late. I&#39;ll fix that. (<code>C.instance_variables</code> is not necessarily empty, however: <code>class C; @c=&#39;cat&#39;; end; C.instance_variables #= [:@c]</code>.) Can you help with <code>ObjectSpace</code>?"}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1430296599, "post_id": 29936245, "comment_id": 47998060, "body": "ObjectSpace.count_objects[:T_CLASS] counts singleton classes too (observe how the two change as you add a class or add a singleton method to an object)"}, {"owner": {"reputation": 1390, "user_id": 2597260, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/2e30146f7d72648fc21f1a532f06c78e?s=128&d=identicon&r=PG", "display_name": "Darek N\u0119dza", "link": "https://stackoverflow.com/users/2597260/darek-n%c4%99dza"}, "edited": false, "score": 0, "creation_date": 1430312513, "post_id": 29936245, "comment_id": 48009826, "body": "Well, with little work we can count instance of the classes ourselves. Here is a very basic example: ` class A;   @@classes = [];   def initialize;     @@classes  &lt;&lt; self;   end;   def self.classes;     @@classes;   end; end;  a=A.new; a2=A.new; A.classes; `"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1390, "user_id": 2597260, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/2e30146f7d72648fc21f1a532f06c78e?s=128&d=identicon&r=PG", "display_name": "Darek N\u0119dza", "link": "https://stackoverflow.com/users/2597260/darek-n%c4%99dza"}, "edited": false, "score": 1, "creation_date": 1430327334, "post_id": 29936245, "comment_id": 48021258, "body": "@Darek, I&#39;m afraid that won&#39;t work. Suppose <code>a=A.new</code>. Then if we reassign <code>a</code> (e.g., <code>a=&#39;cat&#39;</code>), the instance of <code>A</code> will be garbage-collected, at which time there will be no instances of <code>A</code>. Your suggested code, however. retains a reference to that instance and therefore prevents garbage collection, so you infer that one instance still exists."}, {"owner": {"reputation": 1390, "user_id": 2597260, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/2e30146f7d72648fc21f1a532f06c78e?s=128&d=identicon&r=PG", "display_name": "Darek N\u0119dza", "link": "https://stackoverflow.com/users/2597260/darek-n%c4%99dza"}, "edited": false, "score": 0, "creation_date": 1430423741, "post_id": 29936245, "comment_id": 48072867, "body": "@CarySwoveland 1. It was very basic example. I was aware that you have to manage assigning and deletion of a new instances. You can use <code>WeakRef</code> from the standard library. You still need to run garbage collector but you don&#39;t need to check every object, as <code>each_object</code> does. So it should be faster. 2. Garbage collector may not work (as fair I remember, it won&#39;t work on Jruby; it won&#39;t work on pry [version: 1.0.0.pre1; ruby: 2.0]). Ruby MRI from 1.9.3 to 2.2 have, I think, 3 different garbage collectors."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 3, "last_activity_date": 1430439132, "last_edit_date": 1430439132, "creation_date": 1430290088, "answer_id": 29936245, "question_id": 29935448, "link": "https://stackoverflow.com/questions/29935448/how-to-count-instance-variable-methods-classes-and-comment-lines-in-ruby/29936245#29936245", "title": "How to count instance variable, Methods, Classes and comment lines in Ruby", "body": "<p>The question, \"how many?\", is answered by the sizes of the arrays referred to below, except for the number of classes.</p>\n\n<p><strong>Instance variables</strong></p>\n\n<p><code>C.new.instance_variables</code> returns an array of an instance of class <code>C</code>'s instance variables.</p>\n\n<p><code>C.instance_variables</code> returns an array of class <code>C</code>'s instance variables (generally referred to as <em>class instance variables</em>).</p>\n\n<p>For example:</p>\n\n<pre><code>class A\n  @a = 'cat'\n  def initialize\n    @b = 'dog'\n    @c = 'pig'\n  end\nend\n\nA.instance_variables     #=&gt; [:@a] \nA.new.instance_variables #=&gt; [:@b, :@c] \n</code></pre>\n\n<p><strong>Instance methods</strong></p>\n\n<p><code>C.instance_methods</code> (or <code>C.new.methods</code>) returns an array of <code>C</code>'s instance methods, including inherited ones. <code>C</code> can also be a module that is not a class.</p>\n\n<p><code>C.instance_methods(false)</code> (or <code>C.new.methods(false)</code>) returns an array of <code>C</code>'s instance methods defined on class <code>C</code>. <code>C</code> can also be a module that is not a class. Modules do not inherit methods, so if <code>C</code> is a module, <code>C.instance_methods == C.instance_methods(false)</code>.</p>\n\n<p>The ownership of one of class <code>C</code>'s instance methods <code>m</code> can be obtains with <code>C.instance_method(:m).owner</code>.</p>\n\n<p><strong>Class Methods</strong></p>\n\n<p><code>C.methods</code> and <code>C.methods(false)</code> return class <code>C</code>'s class methods. That is also the case when <code>C</code> is a module that is not a class.</p>\n\n<p>The ownership of one of class <code>C</code>'s class methods <code>m</code> can be obtained with <code>C.method(:m).owner</code>.</p>\n\n<p><strong>Classes</strong></p>\n\n<p>Execute</p>\n\n<pre><code>GC.start\n</code></pre>\n\n<p>to force immediate garbage collection, then:</p>\n\n<pre><code>ObjectSpace.each_object(Class).to_a.size\n</code></pre>\n\n<p>or</p>\n\n<pre><code>ObjectSpace.count_objects[:T_CLASS]\n</code></pre>\n\n<p>if singleton classes are to be included.</p>\n\n<p>These of course counts both built-in and user-defined classes. I understand that there </p>\n\n<p>My thanks to @FrederickCheung for clarifying this.</p>\n\n<p><strong>Comments</strong></p>\n\n<p>Determining numbers of comment lines requires clarification and is a different type of question than the foregoing. For these reasons I suggest it be made a separate question (clarified appropriately). Note that a comment may be on a line by itself, at the end of a line preceded by code or between <code>begin=</code> and <code>end=</code>. Moreover, the character <code>#</code> does not always precede a comment (e.g., <code>s = \"#{cat}\" # assign name of cat to s</code>. Counting comments clearly is a non-trivial task.</p>\n"}], "owner": {"reputation": 39, "user_id": 4844684, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/D2J2T.jpg?s=128&g=1", "display_name": "kirankumar", "link": "https://stackoverflow.com/users/4844684/kirankumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1430439132, "creation_date": 1430286958, "last_edit_date": 1430287149, "question_id": 29935448, "link": "https://stackoverflow.com/questions/29935448/how-to-count-instance-variable-methods-classes-and-comment-lines-in-ruby", "title": "How to count instance variable, Methods, Classes and comment lines in Ruby", "body": "<p>How to count instance variable, Methods, Classes and comment lines in Ruby.</p>\n\n<pre><code>class AdminController &lt; ApplicationController\n  include ApplicationHelper\n  ssl_required :edit_account\n    def index\n      @admin_projects = @admin.projects.find(:all, :conditions =&gt; [\"project_completed=?\",0])\n      total_tasks = find_project_and_completed_task_before_and_after_date(@admin_projects)\n      @project_task_bar_chart = GoogleChart::BarChart.new('450x150', \"\", :horizontal, true)\n      @project_task_bar_chart.data_encoding = :text\n      max_cate_task = total_tasks[2].sort.last\n      @project_task_bar_chart.data \"Complete Before Due Date\", total_tasks[1], '67ce04' \n      @project_task_bar_chart.data \"Complete After Due Date\", total_tasks[0], 'ff0000' \n    end\n\n#if request.xhr?\n#@project = @admin.projects.find(:first,:conditions =&gt; [\"projects.id = ?\",params[:project_id].to_i])\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 1, "creation_date": 1430287086, "post_id": 29935442, "comment_id": 47992738, "body": "Hi, can you show us the error-message and the first few lines of the stacktrace (the several lines of guff after the error) from your server logs? Also: is there an index action for your courses_controller? You say that you created an import_controller, but you are showing us a courses_controller? can you please be clear about what you actually have right now? :) Also: <code>course_path</code> -&gt; that should be the path for a single, specific course - but you aren&#39;t passing it a course to show... should that be <code>courses_path</code> ?"}, {"owner": {"reputation": 245, "user_id": 2079439, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fe364ee6809546558c512f835a1206a4?s=128&d=identicon&r=PG", "display_name": "AHalbert", "link": "https://stackoverflow.com/users/2079439/ahalbert"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 1, "creation_date": 1430288114, "post_id": 29935442, "comment_id": 47993230, "body": "Hi, thanks for getting back to me. Please see my edit for the error message. Yes, there is an index action, it just lists all the courses. I created an import_controller for the views, but am not using any actions, so I may remove it. Yes - updating the path to be courses_path fixed the error. Small things!! Thank you!"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1430292700, "post_id": 29935442, "comment_id": 47995759, "body": "ok, I&#39;ll move that to the answers section then :)"}], "answers": [{"tags": [], "owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "is_accepted": true, "score": 1, "last_activity_date": 1430292743, "creation_date": 1430292743, "answer_id": 29937131, "question_id": 29935442, "link": "https://stackoverflow.com/questions/29935442/importing-csv-into-ruby-on-rails-application-error/29937131#29937131", "title": "Importing csv into Ruby on Rails application error", "body": "<p><code>course_path</code> -> that should be the path for a single, specific course - but you aren't passing it a course to show... or that should be <code>courses_path</code></p>\n"}], "owner": {"reputation": 245, "user_id": 2079439, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fe364ee6809546558c512f835a1206a4?s=128&d=identicon&r=PG", "display_name": "AHalbert", "link": "https://stackoverflow.com/users/2079439/ahalbert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 325, "favorite_count": 0, "accepted_answer_id": 29937131, "answer_count": 1, "score": 0, "last_activity_date": 1430292743, "creation_date": 1430286930, "last_edit_date": 1430288056, "question_id": 29935442, "link": "https://stackoverflow.com/questions/29935442/importing-csv-into-ruby-on-rails-application-error", "title": "Importing csv into Ruby on Rails application error", "body": "<p>I am currently trying to be able to import a csv of Courses which consist of a course name and a professor. I'm having an error that I've been trying to fix with research, but I'm coming up blank.  I would appreciate it if someone could take a look and help me see what I am doing incorrectly.</p>\n\n<p>in routes.rb</p>\n\n<pre><code>get 'import/index'\npost 'import/index'\n\nresources :courses do\n  collection { post :import }\nend\n</code></pre>\n\n<p>In course.rb:</p>\n\n<pre><code>def self.import(file)\n    csv_text = File.read(file.path)\n    csv = CSV.parse(csv_text, headers: true) \n    csv.each do |row|\n        Course.create!(row.to_hash)\n    end \nend\n</code></pre>\n\n<p>In courses_controller.rb</p>\n\n<pre><code>def import\n  Course.import(params[:file])\n  redirect_to course_path, notice: \"Courses Imported!\"\nrescue \n  redirect_to 'index', notice: \"Invalid file format\"\nend\n</code></pre>\n\n<p>In import index view:</p>\n\n<pre><code>&lt;p&gt;Import Course CSV:&lt;/p&gt;\n&lt;%= form_tag import_courses_path, multipart: true do %&gt;\n  &lt;%= file_field_tag :file %&gt;\n  &lt;%= submit_tag \"Import Courses\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>my rake routes:</p>\n\n<pre><code>Controller#Action\n        import_index GET    /import/index(.:format)                     import#index\n                     POST   /import/index(.:format)                     import#index\n      import_courses POST   /courses/import(.:format)                   courses#import\n             courses GET    /courses(.:format)                          courses#index\n                     POST   /courses(.:format)                          courses#create\n          new_course GET    /courses/new(.:format)                      courses#new\n         edit_course GET    /courses/:id/edit(.:format)                 courses#edit\n              course GET    /courses/:id(.:format)                      courses#show\n                     PATCH  /courses/:id(.:format)                      courses#update\n                     PUT    /courses/:id(.:format)                      courses#update\n                     DELETE /courses/:id(.:format)                      courses#destroy\n</code></pre>\n\n<p>I generated an import controller for the views. In retrospect, this was probably not the best way - I should have made a view in course instead. I am currently getting a No data received \"err_empty_response\" because it is redirecting to /courses/import, which doesn't have a view. I want it to route back to the courses page instead. I'm confused and feel like I might have convoluted the situation. If anyone can see why the csv import is not working correctly, please let me know! Thank you.</p>\n\n<p>EDIT: \nHere is the error I'm getting from the log:</p>\n\n<pre><code>[2015-04-29 00:05:38] ERROR URI::InvalidURIError: the scheme http does not accept registry part: localhost:3000index (or bad hostname?)\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/2.0.0/uri/generic.rb:1203:in `rescue in merge'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/2.0.0/uri/generic.rb:1200:in `merge'\n\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/2.0.0/webrick/httpresponse.rb:275:in `setup_header'\n\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/2.0.0/webrick/httpresponse.rb:205:in `send_response'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/2.0.0/webrick/httpserver.rb:110:in `run'\nC:/RailsInstaller/Ruby2.0.0/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "html-email"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 4482461, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/4ad90541bcc14ddc7342c7a00e3b3f1e?s=128&d=identicon&r=PG&f=1", "display_name": "ruby", "link": "https://stackoverflow.com/users/4482461/ruby"}, "edited": false, "score": 0, "creation_date": 1430292189, "post_id": 29936571, "comment_id": 47995437, "body": "Thanks for the reply.I want to send individual mail only to the person who raised the ticket and not to everyone involved in that project.."}, {"owner": {"reputation": 7, "user_id": 954029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/140a7983e03a309af31ab0c3c3dc4b5f?s=128&d=identicon&r=PG&f=1", "display_name": "tttt", "link": "https://stackoverflow.com/users/954029/tttt"}, "reply_to_user": {"reputation": 63, "user_id": 4482461, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/4ad90541bcc14ddc7342c7a00e3b3f1e?s=128&d=identicon&r=PG&f=1", "display_name": "ruby", "link": "https://stackoverflow.com/users/4482461/ruby"}, "edited": false, "score": 0, "creation_date": 1430294790, "post_id": 29936571, "comment_id": 47997015, "body": "There is a settings tab for emails in administration of redmine"}, {"owner": {"reputation": 63, "user_id": 4482461, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/4ad90541bcc14ddc7342c7a00e3b3f1e?s=128&d=identicon&r=PG&f=1", "display_name": "ruby", "link": "https://stackoverflow.com/users/4482461/ruby"}, "edited": false, "score": 0, "creation_date": 1430298637, "post_id": 29936571, "comment_id": 47999351, "body": "my requirement is like..I will create a custom field with list format and it contains list of clients names or email id.If i click on particular client on that mail regarding the ticket number should be sent to that client ."}], "tags": [], "owner": {"reputation": 7, "user_id": 954029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/140a7983e03a309af31ab0c3c3dc4b5f?s=128&d=identicon&r=PG&f=1", "display_name": "tttt", "link": "https://stackoverflow.com/users/954029/tttt"}, "is_accepted": false, "score": 0, "last_activity_date": 1430291180, "creation_date": 1430291180, "answer_id": 29936571, "question_id": 29935187, "link": "https://stackoverflow.com/questions/29935187/mail-notifications-in-redmine/29936571#29936571", "title": "Mail notifications in redmine", "body": "<p>you can put the client email id in watchers in redmine while creating the issue and update that issue it will send an email to everyone related to that issue number.</p>\n"}, {"comments": [{"owner": {"reputation": 63, "user_id": 4482461, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/4ad90541bcc14ddc7342c7a00e3b3f1e?s=128&d=identicon&r=PG&f=1", "display_name": "ruby", "link": "https://stackoverflow.com/users/4482461/ruby"}, "edited": false, "score": 0, "creation_date": 1439358959, "post_id": 31947584, "comment_id": 51822566, "body": "M getting error in running rake command.                                                   rake aborted! Can&#39;t connect to local MySQL server through socket &#39;/home/administrator/redmine_2.5.1/mysql/tmp/mysql.sock&#39; (111)"}], "tags": [], "owner": {"reputation": 653, "user_id": 939484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n5NuN.jpg?s=128&g=1", "display_name": "Dam", "link": "https://stackoverflow.com/users/939484/dam"}, "is_accepted": false, "score": 0, "last_activity_date": 1439311869, "creation_date": 1439311869, "answer_id": 31947584, "question_id": 29935187, "link": "https://stackoverflow.com/questions/29935187/mail-notifications-in-redmine/31947584#31947584", "title": "Mail notifications in redmine", "body": "<p>To send an email to a user custom field, you can use this redmine plugin: <a href=\"http://www.redmine.org/plugins/notify_custom_users\" rel=\"nofollow\">http://www.redmine.org/plugins/notify_custom_users</a></p>\n"}], "owner": {"reputation": 63, "user_id": 4482461, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/4ad90541bcc14ddc7342c7a00e3b3f1e?s=128&d=identicon&r=PG&f=1", "display_name": "ruby", "link": "https://stackoverflow.com/users/4482461/ruby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 300, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1439311869, "creation_date": 1430285861, "question_id": 29935187, "link": "https://stackoverflow.com/questions/29935187/mail-notifications-in-redmine", "title": "Mail notifications in redmine", "body": "<p>I have one requirement.I want to send mail to the person(client) who raised the ticket when I create an new issues in redmine.I just want to send the ticket ID to the person(client)who raised the ticket..\nCan anyone help me..\nThank you</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3543, "user_id": 2231236, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ZyG2H.jpg?s=128&g=1", "display_name": "Nithin", "link": "https://stackoverflow.com/users/2231236/nithin"}, "edited": false, "score": 1, "creation_date": 1430285931, "post_id": 29935127, "comment_id": 47992270, "body": "<code>subject_name</code> will be defined in your helper mostly.."}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1430286017, "post_id": 29935127, "comment_id": 47992302, "body": "<code>subject_name</code> is probably <a href=\"http://codefol.io/posts/Where-Do-I-Put-My-Code\" rel=\"nofollow noreferrer\">helper method</a> which is just like any other method available to be called in <code>view</code>. In <code>@item.price</code>, <code>@item</code> is instance object of class <code>Item</code> and <code>price</code> is the attribute of that model. That&#39;s why it is callable with <code>dot</code> notation"}, {"owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "edited": false, "score": 0, "creation_date": 1430287579, "post_id": 29935127, "comment_id": 47992980, "body": "You can call <b>@item.subject_name</b> only if <b>subject_name</b> is a instance method inside <code>Item</code> Model or it&#39;s a field inside <code>items</code> table. Here, it&#39;s probably a helper method."}, {"owner": {"reputation": 963, "user_id": 1736955, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/ed07470f42e125b1f6b181b16fde2805?s=128&d=identicon&r=PG", "display_name": "Guru", "link": "https://stackoverflow.com/users/1736955/guru"}, "edited": false, "score": 0, "creation_date": 1430287923, "post_id": 29935127, "comment_id": 47993139, "body": "number_to_currency should be method which accepting numbers @item is your instance object and price may be method inside item model or property of item model"}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 2, "last_activity_date": 1430286028, "creation_date": 1430286028, "answer_id": 29935231, "question_id": 29935127, "link": "https://stackoverflow.com/questions/29935127/confused-about-the-ways-to-write-code-for-instance-variables/29935231#29935231", "title": "Confused about the ways to write code for instance variables", "body": "<p>I would expect that <code>subject_name</code> isn't a variable, but a method. I guess you have a method <code>subject_name</code> defined in one of your helper files that takes an argument - <code>@item</code> in this example.</p>\n"}], "owner": {"reputation": 145, "user_id": 3370935, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c101d106f071d2ffdefcf812ba610308?s=128&d=identicon&r=PG&f=1", "display_name": "RailsNewbie", "link": "https://stackoverflow.com/users/3370935/railsnewbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 29935231, "answer_count": 1, "score": 0, "last_activity_date": 1430286028, "creation_date": 1430285608, "question_id": 29935127, "link": "https://stackoverflow.com/questions/29935127/confused-about-the-ways-to-write-code-for-instance-variables", "title": "Confused about the ways to write code for instance variables", "body": "<p>I am quite confused on how we write instance variables in Rails.     </p>\n\n<pre><code> Posted by: &lt;%= link_to(@item.user.username, store_path(@item.user)) %&gt;\n Price: &lt;%= number_to_currency @item.price %&gt;\n</code></pre>\n\n<p>vs</p>\n\n<pre><code>Subject: &lt;%= subject_name @item %&gt;\n</code></pre>\n\n<p>I am just curious what is the difference between (i) subject_name @item and (ii) @item.price? </p>\n\n<p>Is it not supposed to be @item.subject_name? </p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1430282504, "post_id": 29934349, "comment_id": 47991065, "body": "What is your question?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1430282623, "post_id": 29934349, "comment_id": 47991096, "body": "Your sentence is incomprehensible."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1430282906, "post_id": 29934349, "comment_id": 47991179, "body": "How can a regex match  numbers?"}, {"owner": {"reputation": 39, "user_id": 4844684, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/D2J2T.jpg?s=128&g=1", "display_name": "kirankumar", "link": "https://stackoverflow.com/users/4844684/kirankumar"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1430283837, "post_id": 29934349, "comment_id": 47991521, "body": "I want only three digit numbers like 111 456 787 789 784 234 456 235 456 only from the above array"}], "answers": [{"comments": [{"owner": {"reputation": 1225, "user_id": 4459911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vyUaA.png?s=128&g=1", "display_name": "Taylor Glaeser", "link": "https://stackoverflow.com/users/4459911/taylor-glaeser"}, "reply_to_user": {"reputation": 39, "user_id": 4844684, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/D2J2T.jpg?s=128&g=1", "display_name": "kirankumar", "link": "https://stackoverflow.com/users/4844684/kirankumar"}, "edited": false, "score": 0, "creation_date": 1430283208, "post_id": 29934498, "comment_id": 47991290, "body": "You&#39;re welcome kirankumar, I&#39;m glad that I could help."}, {"owner": {"reputation": 39, "user_id": 4844684, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/D2J2T.jpg?s=128&g=1", "display_name": "kirankumar", "link": "https://stackoverflow.com/users/4844684/kirankumar"}, "edited": false, "score": 0, "creation_date": 1430283658, "post_id": 29934498, "comment_id": 47991449, "body": "Thank you Taylor but i used this one i get all three elements in over all array. Like below 111,454,456,748,787,454,789,658,784,234,456,465,458,235,456.                  but i need only three digit numbers."}, {"owner": {"reputation": 39, "user_id": 4844684, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/D2J2T.jpg?s=128&g=1", "display_name": "kirankumar", "link": "https://stackoverflow.com/users/4844684/kirankumar"}, "edited": false, "score": 0, "creation_date": 1430286086, "post_id": 29934498, "comment_id": 47992331, "body": "Thank you Taylor it is Best one"}], "tags": [], "owner": {"reputation": 1225, "user_id": 4459911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vyUaA.png?s=128&g=1", "display_name": "Taylor Glaeser", "link": "https://stackoverflow.com/users/4459911/taylor-glaeser"}, "is_accepted": false, "score": 0, "last_activity_date": 1430282415, "creation_date": 1430282415, "answer_id": 29934498, "question_id": 29934349, "link": "https://stackoverflow.com/questions/29934349/get-all-three-digit-numbers-from-array-and-store-in-new-array/29934498#29934498", "title": "Get all three digit numbers from array and store in new array", "body": "<p>Just the regexp would look like this: <code>/^\\d{3}$/</code>. But if you'd like an expression that would return an array of values that match that expression this would do it: <code>my_array.select{ |num| num.to_s.match(/^\\d{3}$/) }</code>.</p>\n\n<p>Take a look at <a href=\"http://www.regexr.com\" rel=\"nofollow\">RegExr</a> to learn more about Regular Expressions.</p>\n"}, {"tags": [], "owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "is_accepted": true, "score": 2, "last_activity_date": 1430284132, "last_edit_date": 1430284132, "creation_date": 1430283144, "answer_id": 29934643, "question_id": 29934349, "link": "https://stackoverflow.com/questions/29934349/get-all-three-digit-numbers-from-array-and-store-in-new-array/29934643#29934643", "title": "Get all three digit numbers from array and store in new array", "body": "<p>Why regular expression on numbers? You can select all numbers less than 1000 and greater than 99.</p>\n\n<pre><code>my_array.select { |n| n&lt;1000 &amp;&amp; n&gt;99 }\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 4844684, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/D2J2T.jpg?s=128&g=1", "display_name": "kirankumar", "link": "https://stackoverflow.com/users/4844684/kirankumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "closed_date": 1430301990, "accepted_answer_id": 29934643, "answer_count": 2, "score": -7, "last_activity_date": 1430300108, "creation_date": 1430281444, "last_edit_date": 1430300108, "question_id": 29934349, "link": "https://stackoverflow.com/questions/29934349/get-all-three-digit-numbers-from-array-and-store-in-new-array", "closed_reason": "Needs details or clarity", "title": "Get all three digit numbers from array and store in new array", "body": "<p>I need a regular expression that only matches three digit numbers in the following array. I need the result to be a new array.</p>\n\n<p>Input:</p>\n\n<pre><code>my_array = [111,45456,456,74897,787,45466,789,6587,784,234,456,4658,4587,235,456]\n</code></pre>\n\n<p>Desired output:</p>\n\n<pre><code>new_array = [111,456,787,789,784,234,456,235,456]\n</code></pre>\n"}, {"tags": ["mysql", "ruby", "ruby-on-rails-4", "mysql2"], "answers": [{"tags": [], "owner": {"reputation": 156, "user_id": 4820205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5yR2j.jpg?s=128&g=1", "display_name": "Angel Huezo", "link": "https://stackoverflow.com/users/4820205/angel-huezo"}, "is_accepted": false, "score": 0, "last_activity_date": 1430277167, "creation_date": 1430277167, "answer_id": 29933664, "question_id": 29933045, "link": "https://stackoverflow.com/questions/29933045/i-switched-from-postgres-to-a-mysql-database-and-get-an-error/29933664#29933664", "title": "I switched from postgres to a mysql database and get an error", "body": "<p>Edit your database.yml file to reflect your new database settings:</p>\n\n<p>For example:</p>\n\n<pre><code> development:\n  adapter: mysql2\n  encoding: utf8\n  database: my_app_development\n  pool: 5\n  username: root\n  password:\n\n test:\n  adapter: mysql2\n  encoding: utf8\n  database: my_app_test\n  pool: 5\n  username: root\n  password:\n\n\n production:\n  adapter: mysql2\n  encoding: utf8\n  database: ymca_gym_production\n  pool: 5\n  username: root\n  password:\n</code></pre>\n"}], "owner": {"reputation": 614, "user_id": 4639312, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/440f04558ef361afb67ff0e39152a1cd?s=128&d=identicon&r=PG", "display_name": "Froy", "link": "https://stackoverflow.com/users/4639312/froy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570630225, "creation_date": 1430272723, "last_edit_date": 1570630225, "question_id": 29933045, "link": "https://stackoverflow.com/questions/29933045/i-switched-from-postgres-to-a-mysql-database-and-get-an-error", "title": "I switched from postgres to a mysql database and get an error", "body": "<p>After copying all the app files to the new app folder and installing MySQL through homebrew, I get this error message when trying to view the website. </p>\n\n<pre><code>AbstractController::Helpers::MissingHelperError in WelcomeController#index\nMissing helper file helpers//users/froy_terriquez/desktop/projects/ram/app/helpers/application_helper.rb_helper.rb\n          class ApplicationController &lt; ActionController::Base\n  # Prevent CSRF attacks by raising an exception.\n  # For APIs, you may want to use :null_session instead.\nprotect_from_forgery with: :exception\nRails.root: /Users/FroyTerriquez/Desktop/projects/ram\nApplication Trace | Framework Trace | Full Trace\napp/controllers/application_controller.rb:1:in `&lt;top (required)&gt;'\napp/controllers/welcome_controller.rb:1:in `&lt;top (required)&gt;'\n</code></pre>\n\n<p>Welcome Controller:</p>\n\n<pre><code>    class WelcomeController &lt; ApplicationController\ninclude ApplicationHelper\n\n  def index\n  end\n\n  def contact\n  end\n\n  def about\n  end\nend\n</code></pre>\n\n<p>Application Controller:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  # Prevent CSRF attacks by raising an exception.\n  # For APIs, you may want to use :null_session instead.\n\n\n  protect_from_forgery with: :exception\nend\n</code></pre>\n\n<p>Both Helpers:</p>\n\n<pre><code>module ApplicationHelper\n\nend\n\nmodule WelcomeHelper\n\n\nend\n</code></pre>\n\n<p>Any help would be greatly appreciated. </p>\n\n<p>Also if you know of any informative links that would let me know what the correct process is for switching databases in a rails project that would be awesome!</p>\n"}, {"tags": ["ruby", "regex"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 4844293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dab7bace5be505340abb66369348118?s=128&d=identicon&r=PG&f=1", "display_name": "Pradeep Varadharajan", "link": "https://stackoverflow.com/users/4844293/pradeep-varadharajan"}, "edited": false, "score": 1, "creation_date": 1430271413, "post_id": 29932858, "comment_id": 47987972, "body": "Thanks a lot. Moving <code>-</code> to the beginning solved the issue. The reason I had the <code>(?i)</code> modifier is because the v can be either case and not for the space characters."}, {"owner": {"reputation": 50185, "user_id": 276949, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52e96d535181560d2b46d4b513454ee5?s=128&d=identicon&r=PG", "display_name": "Martin Konecny", "link": "https://stackoverflow.com/users/276949/martin-konecny"}, "edited": false, "score": 0, "creation_date": 1430275019, "post_id": 29932858, "comment_id": 47988898, "body": "Could you explain what the <code>(?i)</code> means as you intended it? It doesn&#39;t seem to be a &quot;non-capturing group&quot; <code>(?:x)</code>"}, {"owner": {"reputation": 51, "user_id": 4844293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dab7bace5be505340abb66369348118?s=128&d=identicon&r=PG&f=1", "display_name": "Pradeep Varadharajan", "link": "https://stackoverflow.com/users/4844293/pradeep-varadharajan"}, "reply_to_user": {"reputation": 50185, "user_id": 276949, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52e96d535181560d2b46d4b513454ee5?s=128&d=identicon&r=PG", "display_name": "Martin Konecny", "link": "https://stackoverflow.com/users/276949/martin-konecny"}, "edited": false, "score": 1, "creation_date": 1430333383, "post_id": 29932858, "comment_id": 48025013, "body": "@MartinKonecny Not sure if I got your question correctly. <code>(?i)</code> is a modifier that enables case insensitive match.  So it matches for both <code>V2003</code> and <code>v2003</code>"}], "tags": [], "owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "is_accepted": true, "score": 4, "last_activity_date": 1430330129, "last_edit_date": 1430330129, "creation_date": 1430271115, "answer_id": 29932858, "question_id": 29932749, "link": "https://stackoverflow.com/questions/29932749/ruby-regex-matching-unexpected-characters/29932858#29932858", "title": "Ruby Regex matching unexpected characters", "body": "<p>Inside character classes (ie. <code>[]</code>s) the <code>-</code> character has a special meaning when it's between two other characters: it creates a range starting the character before and ending at the character after.</p>\n\n<p>Here, you want it literally, so you should either escape the <code>-</code> or (more idiomatically in regex) put it as the first or last character in the <code>[]</code>.</p>\n\n<p>Also, btw, you have literal space characters, but no <code>/x</code> modifier, also you probably don't want to capture what's before and after the year, so the final pattern would be:</p>\n\n<pre><code>%r{(?i)(?:^|[,\\s_-])v(\\d{4})(?:$|[,\\s_-])}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 4844293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dab7bace5be505340abb66369348118?s=128&d=identicon&r=PG&f=1", "display_name": "Pradeep Varadharajan", "link": "https://stackoverflow.com/users/4844293/pradeep-varadharajan"}, "edited": false, "score": 0, "creation_date": 1430334541, "post_id": 29934110, "comment_id": 48025743, "body": "That was a great suggestion. Writing the regex this way makes more sense for my script since the year is the only information I care about."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1430280421, "last_edit_date": 1430280421, "creation_date": 1430279990, "answer_id": 29934110, "question_id": 29932749, "link": "https://stackoverflow.com/questions/29932749/ruby-regex-matching-unexpected-characters/29934110#29934110", "title": "Ruby Regex matching unexpected characters", "body": "<p>@smathy answered your question (rather nicely). I want to point out that you could write your regex without a capture group:</p>\n\n<pre><code> r = /\n     (?:         # begin a non-capture group \n       ^|[,\\s_-] # match the beginning of the string, a ws char or char in ',_-'\n     )           # end the non-capture group\n     v           # match v\n     \\K          # forget everything matched so far\n     \\d{4}       # match 4 digits\n     (?=         # begin a positive look-ahead\n       $|[,\\s_-] # match the end of the string, a ws char or char in ',_-'\n     )           # end positive lookahead\n     /x\n\n\"010 - All Star Batman &amp; Robin The Boy Wonder 01 - av2003\"[r]\n  #=&gt; nil \n\"010 - All Star Batman &amp; Robin The Boy Wonder 01 - v2003t\"[r]\n  #=&gt; nil \n\"010 - All Star Batman &amp; Robin The Boy Wonder 01 - v2003\"[r]\n  #=&gt; \"2003\n</code></pre>\n\n<ul>\n<li>If you wish to match <code>v</code> or <code>V</code>, change the line <code>v</code> to <code>[vV]</code>.</li>\n<li>If you wish the regex to be case independent, change <code>/x</code> to <code>/ix</code> (in which case there is no need to replace <code>v</code> with <code>[vV]</code>).</li>\n<li>If you wish to ensure the publication date is (say) in the 20th or 21st century, change <code>\\d{4}</code> to <code>[12]\\d{3}</code>.</li>\n<li>You could alternatively change the non-capture group to a positive lookbehind (<code>(?&lt;=^|[,\\s_-])</code>) and delete <code>\\K</code>.</li>\n</ul>\n"}], "owner": {"reputation": 51, "user_id": 4844293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dab7bace5be505340abb66369348118?s=128&d=identicon&r=PG&f=1", "display_name": "Pradeep Varadharajan", "link": "https://stackoverflow.com/users/4844293/pradeep-varadharajan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 29932858, "answer_count": 2, "score": 1, "last_activity_date": 1430330129, "creation_date": 1430270314, "question_id": 29932749, "link": "https://stackoverflow.com/questions/29932749/ruby-regex-matching-unexpected-characters", "title": "Ruby Regex matching unexpected characters", "body": "<p>I am trying to write a script that parses filename of a comicbook and tries to extract info such as Seriesname, Publication year etc.In this case, I am trying to extract publication year from the name. Consider the following name, I would need to match and get value 2003. Below is the expression I had for this.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>r = %r{ (?i)(^|[,\\s-_])v(\\d{4})($|[,\\s-_]) }\n</code></pre>\n\n<p>However this matches the number irrespective of what character I have before the v or after the number</p>\n\n<p>I expect the first two to not match and the third to match.</p>\n\n<ul>\n<li>010 - All Star Batman &amp; Robin The Boy Wonder 01 - av2003</li>\n<li>010 - All Star Batman &amp; Robin The Boy Wonder 01 - v2003t</li>\n<li>010 - All Star Batman &amp; Robin The Boy Wonder 01 - v2003</li>\n</ul>\n\n<p>What am I doing wrong in this case?</p>\n"}, {"tags": ["ruby", "macos", "bundler"], "answers": [{"comments": [{"owner": {"reputation": 2539, "user_id": 4677278, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1cb766e72045dedd3adaf4353479fa26?s=128&d=identicon&r=PG&f=1", "display_name": "ytk", "link": "https://stackoverflow.com/users/4677278/ytk"}, "edited": false, "score": 1, "creation_date": 1430268370, "post_id": 29932429, "comment_id": 47987126, "body": "I get the following error when I try that:  You don&#39;t have write permissions for the /Library/Ruby/Gems/2.0.0 directory"}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 3, "creation_date": 1430268452, "post_id": 29932429, "comment_id": 47987157, "body": "Then use <code>sudo gem install bundler</code>."}, {"owner": {"reputation": 2539, "user_id": 4677278, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1cb766e72045dedd3adaf4353479fa26?s=128&d=identicon&r=PG&f=1", "display_name": "ytk", "link": "https://stackoverflow.com/users/4677278/ytk"}, "edited": false, "score": 1, "creation_date": 1430268619, "post_id": 29932429, "comment_id": 47987203, "body": "I can swear I tried this earlier and it didn&#39;t work. But I just tried it again, and it worked. Haha. Thank you so much!"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "reply_to_user": {"reputation": 2539, "user_id": 4677278, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1cb766e72045dedd3adaf4353479fa26?s=128&d=identicon&r=PG&f=1", "display_name": "ytk", "link": "https://stackoverflow.com/users/4677278/ytk"}, "edited": false, "score": 1, "creation_date": 1430285814, "post_id": 29932429, "comment_id": 47992226, "body": "@TejaK, What worked?  <code>sudo ...</code>.  Don&#39;t use sudo for this.  Your system has ruby installed for things it does--and you don&#39;t want to touch the system install.  If you screw up the system install of ruby, you may screw up your whole operating system.  You need to install your own ruby to play with.  The best(and easiest) way to do that is with rvm(what I use) or rbenv.  Yes, you have to install rvm or rbenv first.  Once you get your own ruby installed, all you have to do is <code>gem install bundler</code>--no sudo.  To install rvm, see here:  <a href=\"https://rvm.io/rvm/install\" rel=\"nofollow noreferrer\">rvm.io/rvm/install</a>."}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1430316007, "post_id": 29932429, "comment_id": 48012787, "body": "Why is rvm easier than rbenv?"}, {"owner": {"reputation": 2539, "user_id": 4677278, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1cb766e72045dedd3adaf4353479fa26?s=128&d=identicon&r=PG&f=1", "display_name": "ytk", "link": "https://stackoverflow.com/users/4677278/ytk"}, "edited": false, "score": 2, "creation_date": 1430335715, "post_id": 29932429, "comment_id": 48026432, "body": "Yeah all of the other threads also warned against using sudo, so I went ahead and used rbenv as B Seven suggested!"}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1430338887, "post_id": 29932429, "comment_id": 48028262, "body": "Here&#39;s a step by step process for setting up <code>rbenv</code> and <code>rbenv-gemset</code> for a project: <a href=\"http://stackoverflow.com/questions/26575245/how-do-i-ensure-ruby-gems-are-installed-in-right-place-to-be-executed-by-bundler/26575400#26575400\" title=\"how do i ensure ruby gems are installed in right place to be executed by bundler\">stackoverflow.com/questions/26575245/&hellip;</a>"}, {"owner": {"reputation": 14068, "user_id": 1169883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9MUrT.jpg?s=128&g=1", "display_name": "Ryan P", "link": "https://stackoverflow.com/users/1169883/ryan-p"}, "edited": false, "score": 0, "creation_date": 1476810020, "post_id": 29932429, "comment_id": 67499451, "body": "Absolutely use sudo."}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "reply_to_user": {"reputation": 14068, "user_id": 1169883, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9MUrT.jpg?s=128&g=1", "display_name": "Ryan P", "link": "https://stackoverflow.com/users/1169883/ryan-p"}, "edited": false, "score": 0, "creation_date": 1482860081, "post_id": 29932429, "comment_id": 69900828, "body": "@RyanP - No, don&#39;t."}], "tags": [], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "is_accepted": true, "score": 125, "last_activity_date": 1456422467, "last_edit_date": 1456422467, "creation_date": 1430268259, "answer_id": 29932429, "question_id": 29932409, "link": "https://stackoverflow.com/questions/29932409/bundle-command-not-found-mac/29932429#29932429", "title": "Bundle command not found mac", "body": "<pre><code>gem install bundler\n</code></pre>\n\n<p>is how to do it.</p>\n\n<p>You may want to use a tool such as <a href=\"https://github.com/rbenv/rbenv\" rel=\"noreferrer\">rbenv</a> to manage gems.</p>\n"}, {"tags": [], "owner": {"reputation": 901, "user_id": 4204647, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0XAxW.jpg?s=128&g=1", "display_name": "xcodebuild", "link": "https://stackoverflow.com/users/4204647/xcodebuild"}, "is_accepted": false, "score": 7, "last_activity_date": 1430268385, "creation_date": 1430268385, "answer_id": 29932447, "question_id": 29932409, "link": "https://stackoverflow.com/questions/29932409/bundle-command-not-found-mac/29932447#29932447", "title": "Bundle command not found mac", "body": "<p>Just run <code>gem install bundler</code> in your terminal.</p>\n\n<p>There is a link to <code>bundler</code> you can take a look:<a href=\"http://bundler.io/#getting-started\">bundler</a></p>\n"}, {"comments": [{"owner": {"reputation": 2158, "user_id": 396050, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/TsQ20.jpg?s=128&g=1", "display_name": "FRD", "link": "https://stackoverflow.com/users/396050/frd"}, "edited": false, "score": 1, "creation_date": 1451231496, "post_id": 32190234, "comment_id": 56705931, "body": "Saved me. Thanks a lot."}, {"owner": {"reputation": 4161, "user_id": 320018, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MeIaz.png?s=128&g=1", "display_name": "Almas Adilbek", "link": "https://stackoverflow.com/users/320018/almas-adilbek"}, "edited": false, "score": 2, "creation_date": 1470933802, "post_id": 32190234, "comment_id": 65162571, "body": "Best answer! The key is detailed explanation for any kind of situations just executing the <code>gem install bundler</code> won&#39;t work. Thanks."}, {"owner": {"reputation": 526, "user_id": 2326178, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Be6IT.png?s=128&g=1", "display_name": "Douglas Fischer", "link": "https://stackoverflow.com/users/2326178/douglas-fischer"}, "edited": false, "score": 1, "creation_date": 1518907720, "post_id": 32190234, "comment_id": 84697431, "body": "I learned more about Ruby in this answer than I learned in every other chance in the past!"}, {"owner": {"reputation": 5361, "user_id": 2223106, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9fa6bc16803a91f7e41e53a16341252c?s=128&d=identicon&r=PG", "display_name": "MikeiLL", "link": "https://stackoverflow.com/users/2223106/mikeill"}, "reply_to_user": {"reputation": 526, "user_id": 2326178, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Be6IT.png?s=128&g=1", "display_name": "Douglas Fischer", "link": "https://stackoverflow.com/users/2326178/douglas-fischer"}, "edited": false, "score": 0, "creation_date": 1518912214, "post_id": 32190234, "comment_id": 84698326, "body": "Thanks @DouglasFischer. Much appreciate the compliment."}], "tags": [], "owner": {"reputation": 5361, "user_id": 2223106, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9fa6bc16803a91f7e41e53a16341252c?s=128&d=identicon&r=PG", "display_name": "MikeiLL", "link": "https://stackoverflow.com/users/2223106/mikeill"}, "is_accepted": false, "score": 54, "last_activity_date": 1440444626, "last_edit_date": 1495541881, "creation_date": 1440444626, "answer_id": 32190234, "question_id": 29932409, "link": "https://stackoverflow.com/questions/29932409/bundle-command-not-found-mac/32190234#32190234", "title": "Bundle command not found mac", "body": "<p>Just reiterating that for those (at least on OSX) for whom</p>\n\n<pre><code>gem install bundler\n</code></pre>\n\n<p>Gives a permissions error, an option that seems to have worked for many people is to use <a href=\"https://github.com/sstephenson/rbenv\" rel=\"noreferrer\">rbenv</a>, which kind of adds a shim between your ruby commands (like <code>gem install</code>) and your environment (if my understanding is correct).</p>\n\n<p>Definitely check out <a href=\"https://stackoverflow.com/a/18554704/2223106\">this answer</a>.</p>\n\n<p>The process is laid out fairly well under the above link. I chose to install via homebrew:</p>\n\n<pre><code>brew update\nbrew install rbenv\n</code></pre>\n\n<p>Then you have to add an argument command to your profile, which if you're using the common <code>~/.bash_profile</code>, can be done with:</p>\n\n<pre><code>echo 'eval \"$(rbenv init -)\"' &gt;&gt; ~/.bash_profile\n</code></pre>\n\n<p>Which it looks like is adding a command to initialize rbenv via your shell.</p>\n\n<p>Don't for get to start a new shell, possibly by opening a new terminal or using the <code>source ~/.bash_profile</code> command.</p>\n\n<p>Make sure your <code>$PATH</code> has this <code>.rbenv/shims</code> BEFORE any other directory where your shell might be looking for Ruby (OSX comes with it's own version that we don't want to fiddle with): <code>echo $PATH</code>.</p>\n\n<pre><code>which ruby\n/Users/mikekilmer/.rbenv/shims/ruby\n#GOOD!\n</code></pre>\n\n<p>Now install a version of Ruby:</p>\n\n<pre><code>rbenv install 2.2.3 \n</code></pre>\n\n<p>(See all possible versions with <code>rbenv install -l</code>).</p>\n\n<p>Now we can use <code>rbenv global 2.2.3</code> to switch to a use the newer version of Ruby globally. (Hmm. I thought we <em>didn't</em> want to mess with the system version.) You could also try it with <code>rbenv local 2.2.3</code> or <code>rbenv shell 2.2.3</code>.</p>\n\n<p>Finally run:</p>\n\n<pre><code>rbenv rehash\n</code></pre>\n\n<p>Now <code>ruby -v</code> should return <code>2.2.3</code> and <code>gem install bundler</code> should work. </p>\n\n<p>Did here.</p>\n"}, {"tags": [], "owner": {"reputation": 176, "user_id": 3479693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e02ed6666175b92d135fbcd2a101932?s=128&d=identicon&r=PG&f=1", "display_name": "shushugah", "link": "https://stackoverflow.com/users/3479693/shushugah"}, "is_accepted": false, "score": 1, "last_activity_date": 1505168056, "creation_date": 1505168056, "answer_id": 46165054, "question_id": 29932409, "link": "https://stackoverflow.com/questions/29932409/bundle-command-not-found-mac/46165054#46165054", "title": "Bundle command not found mac", "body": "<p>Some ruby version managers like chruby and rbenv store gems separately for each version, so when you install a different version of ruby, you'll need to <code>gem install bundler</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 298, "user_id": 956480, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/HXaYY.png?s=128&g=1", "display_name": "Stan666", "link": "https://stackoverflow.com/users/956480/stan666"}, "is_accepted": false, "score": 1, "last_activity_date": 1528254385, "creation_date": 1528254385, "answer_id": 50711690, "question_id": 29932409, "link": "https://stackoverflow.com/questions/29932409/bundle-command-not-found-mac/50711690#50711690", "title": "Bundle command not found mac", "body": "<p>Tried every solution here but didn't work out. Eventually I got this to work in two different methods:</p>\n\n<ul>\n<li>Set <code>alias bundle=/path/to/bundle</code> in <code>.bashrc</code> if you don't care the nastiness.</li>\n<li>Recreate a fresh dev env via <code>rbenv</code> and do <code>bundle install rails</code> will fix it (fixed my issue).</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 4420, "user_id": 1360318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60c954665247aae8de274c26e843867?s=128&d=identicon&r=PG", "display_name": "mbuechmann", "link": "https://stackoverflow.com/users/1360318/mbuechmann"}, "edited": false, "score": 1, "creation_date": 1528813919, "post_id": 50819280, "comment_id": 88644641, "body": "1. This is totally unreadable. You should indent commands with 4 spaces. 2. sudo is dangerous. As pointed out above, you are messing with the your systems ruby installation and might break your os. 3. There is lot of unnecessary stuff you do (see accepted answer)"}], "tags": [], "owner": {"reputation": 11, "user_id": 9930851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22de462a68cf306ff43e17379113ce8?s=128&d=identicon&r=PG", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/9930851/anonymous"}, "is_accepted": false, "score": -4, "last_activity_date": 1528815792, "last_edit_date": 1528815792, "creation_date": 1528812647, "answer_id": 50819280, "question_id": 29932409, "link": "https://stackoverflow.com/questions/29932409/bundle-command-not-found-mac/50819280#50819280", "title": "Bundle command not found mac", "body": "<p>Terminal - </p>\n\n<pre><code>sudo su \n</code></pre>\n\n<p>then your password: </p>\n\n<p>change directory : </p>\n\n<pre><code>cd command . \n</code></pre>\n\n<p>if you do not have permissions to write to drive. </p>\n\n<pre><code>chmod 755 foldername. \n</code></pre>\n\n<p>And you can also mkdir command in terminal</p>\n\n<pre><code>mkdir /Library/Ruby/Gems/2.3.0.1\n</code></pre>\n\n<p>copy and paste: <code>gem install bundler</code> paste to the terminal. </p>\n\n<pre><code>Fetching: bundler-1.16.2.gem (100%)\nbundler's executable \"bundle\" conflicts with /usr/local/bin/bundle\nOverwrite the executable? [yN]  y\nbundler's executable \"bundler\" conflicts with /usr/local/bin/bundler\nOverwrite the executable? [yN]  y\nSuccessfully installed bundler-1.16.2\nParsing documentation for bundler-1.16.2\nInstalling ri documentation for bundler-1.16.2\nDone installing documentation for bundler after 7 seconds\n1 gem installed\n</code></pre>\n\n<p>works for OS X High Sierra.</p>\n"}], "owner": {"reputation": 2539, "user_id": 4677278, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1cb766e72045dedd3adaf4353479fa26?s=128&d=identicon&r=PG&f=1", "display_name": "ytk", "link": "https://stackoverflow.com/users/4677278/ytk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56995, "favorite_count": 17, "accepted_answer_id": 29932429, "answer_count": 6, "score": 62, "last_activity_date": 1528815792, "creation_date": 1430268151, "last_edit_date": 1484297686, "question_id": 29932409, "link": "https://stackoverflow.com/questions/29932409/bundle-command-not-found-mac", "title": "Bundle command not found mac", "body": "<p>I'm using ruby, and I was given a zip file with some ruby programs and it says:  inside the folder, run <code>bundle install</code> to install the packages required. </p>\n\n<p>When I run the command in my terminal, it says <code>bundle command not found</code>. </p>\n\n<p>Can someone please give me a detailed description of how I can fix this?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 221, "user_id": 1021163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9ee291fdacfed607c169a03e3852274?s=128&d=identicon&r=PG", "display_name": "Jonathan Goodman", "link": "https://stackoverflow.com/users/1021163/jonathan-goodman"}, "is_accepted": false, "score": 0, "last_activity_date": 1430269001, "creation_date": 1430269001, "answer_id": 29932536, "question_id": 29932405, "link": "https://stackoverflow.com/questions/29932405/how-can-i-display-a-certain-attribute-in-a-certain-table-without-displaying-all/29932536#29932536", "title": "How can i display a certain attribute in a certain table without displaying all for a current user RAILS 4", "body": "<p>Sorry I don't the ability to comment but I wanted to ask where you assign <code>@students</code>? You use it in your view but I don't see it in your controller's index method. Also <code>@student</code> should be <code>student</code> in the <code>link_to</code> methods at the end.</p>\n"}, {"comments": [{"owner": {"reputation": 507, "user_id": 4618425, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/fb84f2e2397db936fcc26a3bc408fcd6?s=128&d=identicon&r=PG&f=1", "display_name": "Edgar", "link": "https://stackoverflow.com/users/4618425/edgar"}, "edited": false, "score": 0, "creation_date": 1430272050, "post_id": 29932696, "comment_id": 47988152, "body": "yep that did it. didnt know u could call it like that, lol after 4 hours of trying to get that.hahahah thats programming for you..."}], "tags": [], "owner": {"reputation": 126, "user_id": 2659387, "user_type": "registered", "profile_image": "https://graph.facebook.com/1077134521/picture?type=large", "display_name": "Aleksandr Larionov", "link": "https://stackoverflow.com/users/2659387/aleksandr-larionov"}, "is_accepted": true, "score": 1, "last_activity_date": 1430269939, "creation_date": 1430269939, "answer_id": 29932696, "question_id": 29932405, "link": "https://stackoverflow.com/questions/29932405/how-can-i-display-a-certain-attribute-in-a-certain-table-without-displaying-all/29932696#29932696", "title": "How can i display a certain attribute in a certain table without displaying all for a current user RAILS 4", "body": "<p>Instead of @schoolname in your loop in view, write\n<code>student.school.name</code>\nIf your one-to-many relationship works, this should work.</p>\n"}], "owner": {"reputation": 507, "user_id": 4618425, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/fb84f2e2397db936fcc26a3bc408fcd6?s=128&d=identicon&r=PG&f=1", "display_name": "Edgar", "link": "https://stackoverflow.com/users/4618425/edgar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 29932696, "answer_count": 2, "score": 1, "last_activity_date": 1430286735, "creation_date": 1430268113, "last_edit_date": 1430286735, "question_id": 29932405, "link": "https://stackoverflow.com/questions/29932405/how-can-i-display-a-certain-attribute-in-a-certain-table-without-displaying-all", "title": "How can i display a certain attribute in a certain table without displaying all for a current user RAILS 4", "body": "<p>I have a <code>student</code> and <code>school</code> database tied to my rails project I have these attributes for <strong>student table</strong>: </p>\n\n<pre><code>[id,fname,lname,created_at,updated_at,school_id,user_id]\n</code></pre>\n\n<p>and my <strong>school table</strong> has these attributes </p>\n\n<pre><code>[id,name,address,franchise_id,created_at,updated_at]\n</code></pre>\n\n<p>so far I am trying to display the school <code>name</code> for each student that a current user may have. but when I run it, it will show all the schools for all the students of that user on each iteration of the loop. here is my index action method where the magic is supposed to happen.</p>\n\n<pre><code>  @child = Student.where(user_id:current_user.id).pluck(:school_id)\n  @schoolname = School.where(id:@child).pluck(:name)\n</code></pre>\n\n<p>and my index page in my view:</p>\n\n<pre><code> &lt;div class=\"container\"&gt;\n &lt;h1&gt;&lt;font color=\"white\"&gt;&lt;b&gt;My students&lt;/font&gt;&lt;/b&gt;&lt;/h1&gt;\n\n &lt;table class=\"table table-striped\"&gt;\n &lt;thead&gt;\n  &lt;tr&gt;\n  &lt;th&gt;&lt;font color=\"white\"&gt;&lt;b&gt;Id&lt;/font&gt;&lt;/b&gt;&lt;/th&gt;\n  &lt;th&gt;&lt;font color=\"white\"&gt;&lt;b&gt;Fname&lt;/font&gt;&lt;/b&gt;&lt;/th&gt;\n  &lt;th&gt;&lt;font color=\"white\"&gt;&lt;b&gt;Lname&lt;/font&gt;&lt;/b&gt;&lt;/th&gt;\n  &lt;th&gt;&lt;font color=\"white\"&gt;&lt;b&gt;School&lt;/font&gt;&lt;/b&gt;&lt;/th&gt;\n  &lt;th&gt;&lt;font color=\"white\"&gt;&lt;b&gt;manage&lt;/font&gt;&lt;/b&gt;&lt;/th&gt;\n  &lt;th colspan=\"3\"&gt;&lt;/th&gt;\n   &lt;/tr&gt;\n  &lt;/thead&gt;\n\n  &lt;tbody&gt;\n   &lt;% @students.each do |student| %&gt;\n      &lt;tr&gt;\n        &lt;td&gt;&lt;font color=\"white\"&gt;&lt;b&gt;&lt;%= student.id %&gt;&lt;/font&gt;&lt;/b&gt;&lt;/td&gt;\n       &lt;td&gt;&lt;font color=\"white\"&gt;&lt;b&gt;&lt;%= student.fname %&gt;&lt;/font&gt;&lt;/b&gt;&lt;/td&gt;\n       &lt;td&gt;&lt;font color=\"white\"&gt;&lt;b&gt;&lt;%= student.lname %&gt;&lt;/font&gt;&lt;/b&gt;&lt;/td&gt;\n       &lt;td&gt;&lt;font color=\"white\"&gt;&lt;b&gt;&lt;%= @schoolname %&gt;&lt;/font&gt;&lt;/b&gt;&lt;/td&gt;\n       &lt;td&gt;&lt;%= link_to 'Show', student %&gt;\n       &lt;%= link_to 'Edit', edit_student_path(student) %&gt;\n       &lt;%= link_to 'Destroy', student, method: :delete, data: { confirm: \n       'Are you sure?' } %&gt;&lt;/td&gt;\n       &lt;/tr&gt;\n        &lt;% end %&gt;\n        &lt;/tbody&gt;\n       &lt;/table&gt;\n\n       &lt;br&gt;\n\n       &lt;b&gt;&lt;%= link_to 'Add Student', add_students_path(@student),\n       {:style=&gt;'color:#FFFFFF;'} %&gt;&lt;/b&gt;&lt;br/&gt;\n\n       &lt;b&gt; &lt;%= link_to 'New Student', new_student_path, \n        {:style=&gt;'color:#FFFFFF;'} %&gt;&lt;/b&gt;\n          &lt;/div&gt;\n</code></pre>\n\n<p>my model is empty</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sass", "zurb-foundation", "compass-sass"], "comments": [{"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1430267643, "post_id": 29932310, "comment_id": 47986915, "body": "Did you try <code>rbenv rehash</code>?"}, {"owner": {"reputation": 3092, "user_id": 3535931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/isOaa.jpg?s=128&g=1", "display_name": "p4sh4", "link": "https://stackoverflow.com/users/3535931/p4sh4"}, "edited": false, "score": 0, "creation_date": 1430274432, "post_id": 29932310, "comment_id": 47988736, "body": "Can you install any other gem with <code>gem install</code> or it&#39;s only specific to Foundation?"}, {"owner": {"reputation": 43, "user_id": 2797440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T4yRn.jpg?s=128&g=1", "display_name": "catchlight", "link": "https://stackoverflow.com/users/2797440/catchlight"}, "edited": false, "score": 0, "creation_date": 1430297223, "post_id": 29932310, "comment_id": 47998459, "body": "I&#39;m not sure what rbenv rehash does B Seven, but I tried it and it hasn&#39;t made any difference."}, {"owner": {"reputation": 43, "user_id": 2797440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T4yRn.jpg?s=128&g=1", "display_name": "catchlight", "link": "https://stackoverflow.com/users/2797440/catchlight"}, "edited": false, "score": 0, "creation_date": 1430297283, "post_id": 29932310, "comment_id": 47998498, "body": "p4sh4 - not sure how to test that. Any suggestions?"}, {"owner": {"reputation": 3092, "user_id": 3535931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/isOaa.jpg?s=128&g=1", "display_name": "p4sh4", "link": "https://stackoverflow.com/users/3535931/p4sh4"}, "edited": false, "score": 0, "creation_date": 1430380030, "post_id": 29932310, "comment_id": 48044151, "body": "Just try to install any other gem, like <code>gem install thor</code>, does it give the same error? In any case, it seems that your rbenv permissions are out of order. How did you install <code>rbenv</code>, was it from another user on the same machine by any chance?"}, {"owner": {"reputation": 43, "user_id": 2797440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T4yRn.jpg?s=128&g=1", "display_name": "catchlight", "link": "https://stackoverflow.com/users/2797440/catchlight"}, "edited": false, "score": 0, "creation_date": 1431123596, "post_id": 29932310, "comment_id": 48377388, "body": "Installed Thor fine. Did a Sudo install as per the Zurb Foundation doc and everything seems to be working fine. Thanks for your help. :)"}], "owner": {"reputation": 43, "user_id": 2797440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T4yRn.jpg?s=128&g=1", "display_name": "catchlight", "link": "https://stackoverflow.com/users/2797440/catchlight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1430267470, "creation_date": 1430267470, "question_id": 29932310, "link": "https://stackoverflow.com/questions/29932310/foundation-gem-error-permission-denied-rbenv", "title": "Foundation Gem Error (permission denied rbenv)", "body": "<p>Everything going fine with setting up Foundation for Sass except I ran into this error? Can anyone shed some light on it?</p>\n\n<p>I'm on OSX 10.10, git version 2.3.5, ruby 2.1.5p273, node v0.12.2 and Bower 1.4.1.</p>\n\n<pre><code>gem install foundation \n\nMy-MacBook-Pro:Desktop me$ gem install foundation\nERROR:  While executing gem ... (Errno::EACCES)\n\nPermission denied @ rb_sysopen - /Users/me/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/foundation-1.0.4/.gitignore\n</code></pre>\n\n<p>Cheers, Brock</p>\n"}]