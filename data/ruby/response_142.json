[{"tags": ["ruby", "string", "comparison", "lcs"], "comments": [{"owner": {"reputation": 309, "user_id": 2903331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a941909ef227991b23f2bc99249067c2?s=128&d=identicon&r=PG&f=1", "display_name": "Sofa", "link": "https://stackoverflow.com/users/2903331/sofa"}, "edited": false, "score": 0, "creation_date": 1506556851, "post_id": 46458655, "comment_id": 79873199, "body": "Maybe Levenshtein distance fill your need: <a href=\"https://en.wikipedia.org/wiki/Levenshtein_distance\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Levenshtein_distance</a> Ruby code here: <a href=\"https://stackoverflow.com/questions/46402903/levenshtein-distance-in-ruby/46410685#46410685\" title=\"levenshtein distance in ruby\">stackoverflow.com/questions/46402903/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "edited": false, "score": 0, "creation_date": 1506613075, "post_id": 46459734, "comment_id": 79901291, "body": "Thanks so much for this.  One thing -- it is returning &quot;false&quot; for me in this scenario -- StringHelper.lcs(&quot;bates&quot;, &quot;bats&quot;) even though it shoulld return true (&quot;e&quot; is the only difference between the words)."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1506616426, "post_id": 46459734, "comment_id": 79903239, "body": "I see. I misunderstood the question. l fixed my answer."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 0, "last_activity_date": 1506623258, "last_edit_date": 1506623258, "creation_date": 1506563477, "answer_id": 46459734, "question_id": 46458655, "link": "https://stackoverflow.com/questions/46458655/is-there-a-better-way-to-compare-strings-in-a-reasonable-amount-of-time/46459734#46459734", "title": "Is there a better way to compare strings in a reasonable amount of time?", "body": "<p>Try this. The main idea is that if the method is to return <code>false</code>, it will do so as soon as that is known, even if rudundant code is required. (The method below still works if the line <code>return false if (sz1-sz2).abs &gt; 1</code> is removed.)</p>\n\n<pre><code>def equal_but_one?(str1, str2)\n  sz1 = str1.size\n  sz2 = str2.size\n  return false if (sz1-sz2).abs &gt; 1\n  i = [sz1, sz2].max.times.find { |i| str1[i] != str2[i] }\n  return false if i.nil?\n  case sz1 &lt;=&gt; sz2\n  when 0\n    str1[i+1..-1] == str2[i+1..-1]\n  when -1\n    str2[i+1..-1] == str1[i..-1]\n  when 1\n    str1[i+1..-1] == str2[i..-1]\n  end\nend\n\nequal_but_one?('cat', 'cut')     #=&gt; true\nequal_but_one?('bates', 'bats')  #=&gt; true\nequal_but_one?('buss', 'bus')    #=&gt; true\nequal_but_one?('cat', 'cat')     #=&gt; false\nequal_but_one?('pig', 'pigs')    #=&gt; true \nequal_but_one?('pig', 'pegs')    #=&gt; false\nequal_but_one?('', '')           #=&gt; false\nequal_but_one?('', 'a')          #=&gt; true\n\nrequire 'benchmark'\n\nBenchmark.measure { equal_but_one?(\"navesxkolsky|1227000\", \"navsxkolsky|1227000\") }.real\n  #=&gt; 1.6000005416572094e-05\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 46459734, "answer_count": 1, "score": 0, "last_activity_date": 1506623258, "creation_date": 1506554531, "question_id": 46458655, "link": "https://stackoverflow.com/questions/46458655/is-there-a-better-way-to-compare-strings-in-a-reasonable-amount-of-time", "title": "Is there a better way to compare strings in a reasonable amount of time?", "body": "<p>I have this Ruby function that tells me if two strings are \"almost\" equal, that is, if all characters in the string are identical and ordered in the same way except for one.  So for instance, these are equal</p>\n\n<pre><code>equal\neual\n</code></pre>\n\n<p>but these are not</p>\n\n<pre><code>eal\nequal\n</code></pre>\n\n<p>(two characters are missing in the above).  So with help, I have come up with this</p>\n\n<pre><code>(lcs(a,b) == shortest &amp;&amp; longest.length - shortest.length == 1)\n</code></pre>\n\n<p>in which las is defined by</p>\n\n<pre><code>  def lcs(xstr, ystr)\n    return \"\" if xstr.empty? || ystr.empty?\n\n    x, xs, y, ys = xstr[0..0], xstr[1..-1], ystr[0..0], ystr[1..-1]\n    if x == y\n      x + lcs(xs, ys)\n    else\n      [lcs(xstr, ys), lcs(xs, ystr)].max_by {|x| x.size}\n    end\n  end\n</code></pre>\n\n<p>but my function is taking an extraordinarily long time.  Note my benchmark below</p>\n\n<pre><code>2.4.0 :011 &gt; timing = Benchmark.measure { StringHelper.lcs(\"navesxkolsky|1227000\", \"navsxkolsky|1227000\") }\n =&gt; #&lt;Benchmark::Tms:0x007fa1753830d8 @label=\"\", @real=21.341279999993276, @cstime=0.0, @cutime=0.0, @stime=0.030000000000000027, @utime=21.28, @total=21.310000000000002&gt;\n</code></pre>\n\n<p>Is there something I'm missing here that can get my comparison time down to like one second instead of 21?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "unit-testing", "rspec"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1506556180, "post_id": 46458590, "comment_id": 79873048, "body": "You can try creating a before(:context) block at the error recommends, and in there set an <i>instance variable</i> to the cached value. Reference this shared instance variable within the context&#39;s examples."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1506706530, "post_id": 46458590, "comment_id": 79942687, "body": "As described in the <a href=\"https://relishapp.com/rspec/rspec-core/v/2-5/docs/helper-methods/let-and-let#use-let!-to-define-a-memoized-helper-method-that-is-called-in-a-before-hook\" rel=\"nofollow noreferrer\">RSpec docs</a> &quot;use let! to define a memoized helper methods that is called in a before hook&quot;"}], "owner": {"reputation": 206, "user_id": 2705522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e76b4b4050367d38316e8f923f17a00?s=128&d=identicon&r=PG", "display_name": "al lin", "link": "https://stackoverflow.com/users/2705522/al-lin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 324, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1506706270, "creation_date": 1506554008, "last_edit_date": 1506706270, "question_id": 46458590, "link": "https://stackoverflow.com/questions/46458590/rails-rspec-memoized-cached-block-on-a-context-level-e-g-beforecontext-refe", "title": "Rails/RSpec: Memoized/cached block on a context level e.g. before(:context) referencing a let", "body": "<p>While writing specs, I often have a expensive operation I'd like to test multiple aspects of without needing to call it each time. How do I do this, while still referencing a greater scoped variable?</p>\n\n\n\n<pre><code>describe Hq::UsersController\n  let(:create_params) {\n    {'name': 'Bob',\n    'email': 'bob@burgers.com'}\n  }\n\n  describe \"#create\" do\n    context \"when a user does not already exist\" do\n      before(:context) do\n        # (some expensive operation here)\n        VCR.use_cassette('external_user_check') do\n          # note: this will error out, see message below\n          post :create, :params =&gt; create_params\n        end\n      end\n\n      it \"creates the user and dependent objects\" do\n        expect(User.count).to be(1)\n        user = User.first\n        expect(user.name).to eq(create_params['name'])\n      end\n\n      it \"returns an 204 (no content) status\" do\n        expect(response).to have_http_status(:no_content)\n      end\n    end\n\n    context \"when a user already exists\" do\n      before(:context) do\n        User.create(email: create_params['email'])\n      end\n\n      it \"raises a RecordInvalid error and does not create any objects\" do\n        VCR.use_cassette('external_user_check') do\n          expect { post :create, :params =&gt; create_params }.to raise_error(ActiveRecord::RecordInvalid)\n        end\n        # I wish I could break this into two `it` blocks :(\n        expect(User.count).to be(0)\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>This is the error I get:</p>\n\n<pre><code>`let` and `subject` declarations are not intended to be called\n in a `before(:context)` hook, as they exist to define state that\n is reset between each example, while `before(:context)` exists to\n define state that is shared across examples in an example group.\n</code></pre>\n\n<p>I understand the intent of warning, but in my case, how can we run or cache an expensive operation just one time, while also reusing some shared state across contexts? Generally when I write specs, I assume the <em>state is the same within a context</em>.</p>\n\n<p>Right now, it seems my only solution is to copy and paste the params in multiple <code>context</code> blocks for this to be correct. However, that would costly to maintain if the params change or if the params are lengthy.</p>\n\n<p>I'm open to refactoring suggestions or if this happens to indicative of some spec code smell. Thanks!</p>\n"}, {"tags": ["ruby", "net-ssh"], "owner": {"reputation": 11, "user_id": 7798650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X2Y0U.jpg?s=128&g=1", "display_name": "Keith", "link": "https://stackoverflow.com/users/7798650/keith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1506553199, "creation_date": 1506553199, "question_id": 46458457, "link": "https://stackoverflow.com/questions/46458457/how-can-i-have-rye-return-invalid-commands-in-ruby", "title": "How can I have Rye return invalid commands in ruby", "body": "<p>Here is the code I am using:</p>\n\n<pre><code>require 'rye'\nr = Rye::Box.new(\"ip_of_server\", :user =&gt; \"username_of_server\", :password =&gt; \"password_of_server\", :safe =&gt; false)\nr.execute(\"which testing\")\n</code></pre>\n\n<p>I get the following:</p>\n\n<pre><code>(cmd: which testing; status: 1)\n    from /var/lib/gems/2.3.0/gems/rye-0.9.13/lib/rye/box.rb:855:in `rescue in run_command'\n    from /var/lib/gems/2.3.0/gems/rye-0.9.13/lib/rye/box.rb:804:in `run_command'\n    from /var/lib/gems/2.3.0/gems/rye-0.9.13/lib/rye/box.rb:473:in `method_missing'\n    from (irb):64\n    from /usr/bin/irb:11:in `&lt;main&gt;'\n</code></pre>\n\n<p>I know it does not exist but would like to accept the error status of 1 and get the data of \"which: no testing in (/usr/local/rvm/gems/ruby-1.9.3-p551/bin:/usr/local/rvm/gems/ruby-1.9.3-p551@global/bin:/usr/local/rvm/rubies/ruby-1.9.3-p551/bin:/usr/local/bin:/usr/bin:/usr/local/rvm/bin:/usr/local/bin) (cmd: which testing; status: 1)\"</p>\n\n<p>I have attempted to modify Rye::Rap but it seems everything I do does not change the outcome.</p>\n\n<p>I know I can do a rescue when I run r.execute and have the value get returned to a variable, but would like to know if there is anyway when using Rye if I can just accept the failure.</p>\n\n<pre><code>    irb(main):012:0* begin\n    irb(main):013:1*   r.execute(\"which testing\")\n    irb(main):014:1&gt; rescue =&gt; e\n    irb(main):015:1&gt;   merp = e.message\n    irb(main):016:1&gt; end\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 983, "user_id": 1021447, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/91c22e4ea8ce5821e415a1382c3a02fc?s=128&d=identicon&r=PG", "display_name": "Darzen", "link": "https://stackoverflow.com/users/1021447/darzen"}, "edited": false, "score": 0, "creation_date": 1506552750, "post_id": 46458337, "comment_id": 79872240, "body": "can you please post the prime function? Maybe that&#39;s returning false for 29."}, {"owner": {"reputation": 173, "user_id": 4515838, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/1664130014/picture?type=large", "display_name": "Yitzhak", "link": "https://stackoverflow.com/users/4515838/yitzhak"}, "reply_to_user": {"reputation": 983, "user_id": 1021447, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/91c22e4ea8ce5821e415a1382c3a02fc?s=128&d=identicon&r=PG", "display_name": "Darzen", "link": "https://stackoverflow.com/users/1021447/darzen"}, "edited": false, "score": 0, "creation_date": 1506557102, "post_id": 46458337, "comment_id": 79873279, "body": "I added the prime function above and also confirmed when calling it that 29 is prime"}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 4515838, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/1664130014/picture?type=large", "display_name": "Yitzhak", "link": "https://stackoverflow.com/users/4515838/yitzhak"}, "edited": false, "score": 0, "creation_date": 1506557077, "post_id": 46458639, "comment_id": 79873270, "body": "Thanks for the solution. However, the problem specifically stated I can&#39;t use Prime or any prime number generator :)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 173, "user_id": 4515838, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/1664130014/picture?type=large", "display_name": "Yitzhak", "link": "https://stackoverflow.com/users/4515838/yitzhak"}, "edited": false, "score": 0, "creation_date": 1506558650, "post_id": 46458639, "comment_id": 79873607, "body": "I don&#39;t see where you said that in the question. In any event I believe there is merit in my approach, for reasons of efficiency. All one needs to do is implement the methods <code>Integer#prime?</code> (straightforward) and an enumerator that generates primes (Sieve of  Eratosthenes). The alternative is to check numbers following a prime until one is found that is prime, which would be much slower."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1506560792, "last_edit_date": 1506560792, "creation_date": 1506554416, "answer_id": 46458639, "question_id": 46458337, "link": "https://stackoverflow.com/questions/46458337/given-an-array-replace-each-prime-number-with-the-next-prime-number/46458639#46458639", "title": "Given an array, replace each prime number with the next prime number", "body": "<p>I've assumed the array <code>arr</code> is sorted. If it isn't, save the original indices of the sorted values, which are then used  to reorder the elements of the array of values containing prime and non-prime numbers. For example, if</p>\n\n<pre><code>arr = [57, 13, 28, 6]\n</code></pre>\n\n<p>then</p>\n\n<pre><code>indices = arr.each_with_index.sort.map(&amp;:last)\n  #=&gt; [3, 1, 2 0]\n</code></pre>\n\n<p>The steps of the the main method are as follows.</p>\n\n<ul>\n<li>Step 1: create an empty array <code>a</code> that will be returned by the method.</li>\n<li>Step 2: create an enumerator, <code>enum</code>, that generates an infinite sequence of prime numbers (2, 3, 5, 7,..). Generate the first prime <code>m = enum.next #=&gt; 2</code>.</li>\n<li>Step 3: create an enumerator, <code>earr</code>, that generate the elements of the given array <code>arr</code>.</li>\n<li>Step 4: consider the next element of the array, <code>x = earr.next</code>, which is initially the first element of the array. When there are no more elements of the array, break from the loop and return the array <code>a</code>.</li>\n<li>Step 5: if <code>x</code> is not prime save it to an array <code>a</code> (<code>a &lt;&lt; x</code>) and repeat step 4; else go to Step 6.</li>\n<li>Step 6: (<code>x</code> is prime) if <code>x &lt; m</code>, save <code>m</code> to the array <code>a</code> and go to \nStep 4; else (i.e., <code>m &lt;= x</code>), obtain the next prime (<code>m = enum.next</code>) and repeat this step. </li>\n</ul>\n\n<p></p>\n\n<pre><code>require 'prime\"\n\ndef next_primes(arr)\n  enum = Prime.each\n  m = enum.next    \n  earr = arr.to_enum\n  x = earr.next\n  a = []\n  loop do\n    if x.prime?\n      if x &lt; m\n        a &lt;&lt; m\n        x = earr.next \n      else\n        m = enum.next\n      end \n    else\n      a &lt;&lt; x\n      x = earr.next\n    end\n  end\n  a\nend\n\nnext_primes([2, 6, 7, 23, 100])\n  #=&gt; [3, 6, 11, 29, 100]\nnext_primes([2, 6, 7, 7, 100])\n  #=&gt; [3, 6, 11, 11, 100]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1506560490, "post_id": 46459048, "comment_id": 79873983, "body": "A weakness is that each time <code>next_prime</code> is called in starts at  <code>2</code> when searching for a prime that satisfies the requirement. It&#39;s more efficient to step through the enumerator just once."}, {"owner": {"reputation": 309, "user_id": 2903331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a941909ef227991b23f2bc99249067c2?s=128&d=identicon&r=PG&f=1", "display_name": "Sofa", "link": "https://stackoverflow.com/users/2903331/sofa"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1506561958, "post_id": 46459048, "comment_id": 79874320, "body": "Agree, but when it&#39;s possible I always prefer readability over efficiency :)"}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1506604720, "post_id": 46459048, "comment_id": 79895396, "body": "I like the brevity of this solution. To make it more efficient, you could memoize the results."}], "tags": [], "owner": {"reputation": 309, "user_id": 2903331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a941909ef227991b23f2bc99249067c2?s=128&d=identicon&r=PG&f=1", "display_name": "Sofa", "link": "https://stackoverflow.com/users/2903331/sofa"}, "is_accepted": false, "score": 0, "last_activity_date": 1506558119, "creation_date": 1506558119, "answer_id": 46459048, "question_id": 46458337, "link": "https://stackoverflow.com/questions/46458337/given-an-array-replace-each-prime-number-with-the-next-prime-number/46459048#46459048", "title": "Given an array, replace each prime number with the next prime number", "body": "<p>Similar to <a href=\"https://stackoverflow.com/users/256970/cary-swoveland\">@Cary Swoveland</a> answer, but more idiomatic Ruby IMHO.</p>\n\n<pre><code>require 'prime'\n\ndef next_primes(ary)\n  ary.map { |candidate| candidate.prime? ? next_prime(candidate) : candidate }\nend\n\ndef next_prime(previous_prime)\n  all_primes = Prime.each\n  all_primes.find { |prime| prime &gt; previous_prime }\nend                            \n\nnext_primes([11,8,2,24]) # =&gt; [13, 8, 3, 24]\nnext_primes([11,13,17,23]) # =&gt; [13, 17, 19, 29]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 173, "user_id": 4515838, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/1664130014/picture?type=large", "display_name": "Yitzhak", "link": "https://stackoverflow.com/users/4515838/yitzhak"}, "edited": false, "score": 0, "creation_date": 1506582372, "post_id": 46459145, "comment_id": 79880582, "body": "Stupid simple. I just needed another set of eyes. Thanks."}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 2, "last_activity_date": 1506558838, "creation_date": 1506558838, "answer_id": 46459145, "question_id": 46458337, "link": "https://stackoverflow.com/questions/46458337/given-an-array-replace-each-prime-number-with-the-next-prime-number/46459145#46459145", "title": "Given an array, replace each prime number with the next prime number", "body": "<p>The first array works decently for me, even the <code>29</code>, except for the fact that everything is 2 higher than it should be, because you add 2 after you check if you have a prime which can be fixed by a slight alteration to the code:</p>\n\n<pre><code>if prime?(num)\n  p = false\n  i = num\n  while !p\n    i += 2\n\n    p = prime?(i)\n  end\n  new_arr &lt;&lt; i\n</code></pre>\n\n<p>The only infinite loop I encounter is when you hit <code>2</code> in the second array, because to check for primes, you just keep incrementing by 2, and so you end up checking every multiple of 2 to see if it's prime. Naturally you never find a prime multiple of 2. To fix this, instead of incrementing by 2 before checking for the next prime, if you increment by 1 would work, you just need to check twice as many numbers:</p>\n\n<pre><code>if prime?(num)\n  p = false\n  i = num\n  while !p\n    i += 1\n\n    p = prime?(i)\n  end\n  new_arr &lt;&lt; i\n</code></pre>\n\n<p>your last problem is that your <code>prime?</code> function returns <code>false</code> for 3, which can be fixed by changing:</p>\n\n<pre><code>elsif num &lt;= 3\n  return true\n</code></pre>\n\n<p>and now your 2 samples yield:</p>\n\n<pre><code>[11, 13, 17, 23] =&gt; [13, 17, 19, 29]\n[11, 8, 2, 24] =&gt; [13, 8, 3, 24]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12103447, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yh_0XKLXsKo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rddJIAFF7-qpMmRTOzR1s40I_hmOA/photo.jpg?sz=128", "display_name": "Pramila Mgr", "link": "https://stackoverflow.com/users/12103447/pramila-mgr"}, "is_accepted": false, "score": 0, "last_activity_date": 1569824006, "last_edit_date": 1569824006, "creation_date": 1569785484, "answer_id": 58158512, "question_id": 46458337, "link": "https://stackoverflow.com/questions/46458337/given-an-array-replace-each-prime-number-with-the-next-prime-number/58158512#58158512", "title": "Given an array, replace each prime number with the next prime number", "body": "<p>Solution to find the next prime number if it is a prime number if not return the same number:</p>\n\n<pre><code>def is_prime(num)\n    if num&lt;2\n      return false\n    end\n    (2...num).each do |i|\n      if num%i == 0\n        return false\n      end\n    end\n    return true\n\n  end\n\ndef next_prime(arr)\n    new_arr = []\n    arr.each do |num|\n        if is_prime(num)\n            p = false\n            i = num\n            while !p\n                i += 1\n                p = is_prime(i)\n            end\n            new_arr&lt;&lt;i\n        else\n            new_arr&lt;&lt;num\n        end\n    end\n    return new_arr\n\nend\nprint next_prime([2,3,4,5])\nputs\n\nprint next_prime([2, 6, 7, 23, 100]) #[3, 6, 11, 29, 100]\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 4515838, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/1664130014/picture?type=large", "display_name": "Yitzhak", "link": "https://stackoverflow.com/users/4515838/yitzhak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 863, "favorite_count": 0, "accepted_answer_id": 46459145, "answer_count": 4, "score": 1, "last_activity_date": 1569824006, "creation_date": 1506552368, "last_edit_date": 1506556897, "question_id": 46458337, "link": "https://stackoverflow.com/questions/46458337/given-an-array-replace-each-prime-number-with-the-next-prime-number", "title": "Given an array, replace each prime number with the next prime number", "body": "<p>So \n<code>#[11,13,17,23] =&gt; [13,17,19,29]</code></p>\n\n<p>if the number isn't prime, then the function is just returning the number\n<code>#[11,8,2,24] =&gt; [13,8,3,24]</code></p>\n\n<p>I'm having so much trouble with the very last number (29), for some reason, it's going into an infinite loop. I feel like there is such a simple solution, but it's just escaping me..</p>\n\n<pre><code>def next_prime(arr)\n  new_arr = []\n  arr.each do |num|\n    #puts num\n    if prime?(num)\n      p = false\n      i = num + 2\n      while !p\n        p = prime?(i)\n        i += 2\n      end\n      new_arr &lt;&lt; i\n    else\n      new_arr &lt;&lt; num\n    end\n  end\n  new_arr\nend\n</code></pre>\n\n<p>EDIT: here is the prime function</p>\n\n<pre><code>def prime?(num)\n  if num ==1\n    return false\n  elsif num &lt; 3\n    return true\n  elsif num % 2 == 0 || num % 3 == 0\n    return false\n  end\n\n\n  i = 5\n  while i*i &lt;= num\n    if num % i == 0 || num % (i + 2) == 0\n      return false\n    end\n    i += 6\n  end\n  return true\nend\n</code></pre>\n"}, {"tags": ["ruby", "devise", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1506551449, "post_id": 46457917, "comment_id": 79871922, "body": "Could you show us the code handling the update of the <code>agent</code> instance (the place where you assign <code>user_ids</code> and save the record)"}, {"owner": {"reputation": 1275, "user_id": 5677781, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/jmcJj.png?s=128&g=1", "display_name": "rubyandcoffee", "link": "https://stackoverflow.com/users/5677781/rubyandcoffee"}, "reply_to_user": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1506628300, "post_id": 46457917, "comment_id": 79909688, "body": "The controller just inherits its update action from <code>Devise::RegistrationsController</code> and uses the <code>account_update_params</code> with a <code>before_action</code>."}], "owner": {"reputation": 1275, "user_id": 5677781, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/jmcJj.png?s=128&g=1", "display_name": "rubyandcoffee", "link": "https://stackoverflow.com/users/5677781/rubyandcoffee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1506550951, "creation_date": 1506549819, "last_edit_date": 1506550951, "question_id": 46457917, "link": "https://stackoverflow.com/questions/46457917/devise-not-saving-custom-controller-update-action-for-array-attribute", "title": "Devise not saving custom controller &#39;update&#39; action for Array attribute", "body": "<p>I've got two devise models - User and Agent - so I've got custom controllers for each.</p>\n\n<p>In the Agent controller, when updating the Agent, I'm trying to pass in <code>user_ids</code>, which is an Array:</p>\n\n<pre><code>  def account_update_params\n    params[\"agent\"][\"user_ids\"] = params[\"agent\"][\"user_ids\"].split(\",\")\n    params.require(:agent).permit(:email, :password, :password_confirmation, :current_password, {:user_ids =&gt; [:id]})\n  end\n</code></pre>\n\n<p>Before I added <code>[:id]</code> to <code>user_ids</code>, I was receiving an 'unpermitted parameter' error message. Adding <code>[:id]</code> solved that issue, but now my issue is that <strong>the record is not saving at all</strong>, and <code>user_ids</code> remains as <code>nil</code>.</p>\n\n<p>It is being passed in the parameters though, as you can see here: </p>\n\n<pre><code>\"agent\"=&gt;{\"user_ids\"=&gt;\"3\", \"email\"=&gt;\"test_agent@example.com\", \"password\"=&gt;\"[FILTERED]\", \"password_confirmation\"=&gt;\"[FILTERED]\", \"current_password\"=&gt;\"[FILTERED]\"}\n</code></pre>\n"}, {"tags": ["ruby", "linux", "ms-access"], "comments": [{"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1506550831, "post_id": 46457827, "comment_id": 79871708, "body": "This is basically a &quot;ask for recommendations&quot; question (which will likely get it closed) but you probably need some combination of <code>unixODBC</code> plus an ODBC library on the Ruby side."}, {"owner": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "edited": false, "score": 1, "creation_date": 1506560341, "post_id": 46457827, "comment_id": 79873949, "body": "You might be able to use JRuby along with the UCanAccess JDBC driver."}, {"owner": {"reputation": 28257, "user_id": 7296893, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6de7cdb4df21e89f2351e7b6cfea4709?s=128&d=identicon&r=PG&f=1", "display_name": "Erik A", "link": "https://stackoverflow.com/users/7296893/erik-a"}, "reply_to_user": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 1, "creation_date": 1506588050, "post_id": 46457827, "comment_id": 79884133, "body": "@Joe note that you will need to have a Linux ODBC driver for Access when going for that. There is one available with <a href=\"https://github.com/brianb/mdbtools\" rel=\"nofollow noreferrer\">MDBTools</a>, but UCanAccess might be a better solution."}], "owner": {"reputation": 1097, "user_id": 472673, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3d4a6896f964b03e9495a0c5f16100a1?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/472673/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 340, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1506549373, "creation_date": 1506549373, "question_id": 46457827, "link": "https://stackoverflow.com/questions/46457827/read-ms-access-mdb-database-using-ruby-on-linux", "title": "Read MS Access .mdb database using Ruby on Linux", "body": "<p>Is there any way to query tables from a Microsoft Access .mdb database using Ruby on a Linux platform?</p>\n\n<p>I would like to read directly, not convert to Mysql then read. In fact, being more specific, I would like to query the tables i.e. add filters etc</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": false, "score": 1, "last_activity_date": 1506550082, "creation_date": 1506550082, "answer_id": 46457961, "question_id": 46457599, "link": "https://stackoverflow.com/questions/46457599/refactor-method-in-ruby-instead-3-calls-to-db-make-it-one-call/46457961#46457961", "title": "refactor method in ruby instead 3 calls to DB make it one call", "body": "<p>I'm assuming this is Rails, though that is not specified. Your <code>@urls</code> instance variable isn't used in the method, though I don't know if it's used later on in the view. I'll leave it out for this answer.</p>\n\n<p>You can do this with only one database trip, so long as params[:call_url_id] contains a value:</p>\n\n<pre><code>@posts = Post.where(call_url_id: params[:call_url_id])\n</code></pre>\n\n<p>But this doesn't address your fallback position, which is to get all posts belonging to the first CallUrl. There's no way to know what posts are related to that first CallUrl without making an extra trip to the database to get its id. But we can optimize so that the extra trip is made only when params[:call_url_id] is not provided:</p>\n\n<pre><code>def post_stat\n  call_url_id = params[:call_url_id].presence || CallUrl.first.id\n  @posts = Post.where(call_url_id: call_url_id)\nend\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 7628232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eda2D.png?s=128&g=1", "display_name": "neo7", "link": "https://stackoverflow.com/users/7628232/neo7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1506550477, "creation_date": 1506548182, "question_id": 46457599, "link": "https://stackoverflow.com/questions/46457599/refactor-method-in-ruby-instead-3-calls-to-db-make-it-one-call", "title": "refactor method in ruby instead 3 calls to DB make it one call", "body": "<pre><code>def post_stat\n    @urls = CallUrl.all\n    call = params[:call_url_id] ? params[:call_url_id] : CallUrl.first.id\n    call_url = CallUrl.find(call)\n    @Posts = callback_url.posts\nend\n</code></pre>\n\n<p>I am trying to refactor this code to make only one call to database insted of 3 times in each class I am calling?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1393, "user_id": 2340939, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/d9a710d823e382cc7be0a0208f3f126e?s=128&d=identicon&r=PG", "display_name": "user2340939", "link": "https://stackoverflow.com/users/2340939/user2340939"}, "edited": false, "score": 1, "creation_date": 1541272913, "post_id": 46457497, "comment_id": 93162655, "body": "So, TL;DR; is that concerns should be used when the functionality is reused in different places, whereas services are meant to be used in one place, or if the functionality is too big to be a concern function, or if many different implementations are needed for same functionality and can be solved with different classes, as you&#39;ve shown. Correct?"}], "tags": [], "owner": {"reputation": 24213, "user_id": 390897, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bb90a39b77596fcffbab96de88f0ee34?s=128&d=identicon&r=PG", "display_name": "fny", "link": "https://stackoverflow.com/users/390897/fny"}, "is_accepted": true, "score": 20, "last_activity_date": 1506609122, "last_edit_date": 1506609122, "creation_date": 1506547702, "answer_id": 46457497, "question_id": 46457227, "link": "https://stackoverflow.com/questions/46457227/concerns-vs-services/46457497#46457497", "title": "Concerns vs Services", "body": "<p>Concerns and services are <em>very</em> different abstraction patterns used for entirely different purposes.</p>\n\n<ul>\n<li>Services are operations/functions turned into classes.</li>\n<li>Concerns are <a href=\"https://en.wikipedia.org/wiki/Mixin\" rel=\"noreferrer\">mixins</a>.</li>\n</ul>\n\n<p>Say I want to authenticate a user. I could easily just write a <code>authenticate(username, password)</code> function, but it might be useful to encapsulate the logic for that function in a class instead:</p>\n\n<pre><code>class AuthenticationService\n  def initialize(username, password); end\n  def run(); end\nend\n</code></pre>\n\n<p>Aside from helping me encapsulate all of the logic for authentication in a single class, this allows me to create other authentication classes.</p>\n\n<pre><code>class GoogleAuthenticationService\n  def initialize(username, password); end\n  def run(); end\nend\n\nclass FacebookAuthenticationService\n  def initialize(username, password); end\n  def run(); end\nend\n</code></pre>\n\n<p>A concern, on the other hand, mixes functionality from a module into another class. Say you have a Rails controller that was concerned with authorizing a user.  You might write a concern that implements a <code>before_action</code> which checks to see if the user is authorized. Then you could mix that concern into any controller where you wanted to enforce that authorization check.</p>\n"}, {"tags": [], "owner": {"reputation": 684, "user_id": 6607918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rL2uz.png?s=128&g=1", "display_name": "Stuart", "link": "https://stackoverflow.com/users/6607918/stuart"}, "is_accepted": false, "score": 6, "last_activity_date": 1506548039, "creation_date": 1506548039, "answer_id": 46457568, "question_id": 46457227, "link": "https://stackoverflow.com/questions/46457227/concerns-vs-services/46457568#46457568", "title": "Concerns vs Services", "body": "<p>Concerns are essentially modules that allow you to encapsulate aspects of models into separate files to DRY up your code.  The advantage is that they inherit from the ActiveSupport:Concern module, so you can access the ActiveRecord operations like validations and associations for the model in which the concern is included.</p>\n\n<p>Service objects are used primarily to wrap a method in an object. These are useful in splitting logic up into small reusable components.  These are often used for decoupling systems, and making systems easier to understand, because fundamentally what they do take you from a few many-purpose classes to many classes with a single purpose.</p>\n\n<p>I have my concerns about concerns and tend to err on the side of caution with them.</p>\n\n<p>Fny's answer has just shown up for me whilst writing and I think should be the accepted answer :)</p>\n"}], "owner": {"reputation": 3865, "user_id": 4829408, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9ff8f70cf1f3f172084d5042abf22d64?s=128&d=identicon&r=PG&f=1", "display_name": "Src", "link": "https://stackoverflow.com/users/4829408/src"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4712, "favorite_count": 4, "accepted_answer_id": 46457497, "answer_count": 2, "score": 15, "last_activity_date": 1506609122, "creation_date": 1506546412, "question_id": 46457227, "link": "https://stackoverflow.com/questions/46457227/concerns-vs-services", "title": "Concerns vs Services", "body": "<p>Recently I was building a complex logic controller and wanted to refactor it due to \u201cSingle responsibility\u201d principle. So I read about Services. But sometimes later I saw concerns. I though that it\u2019s a replacement for Services in ruby (since there is no default Services folder and etc.), but couldn\u2019t find any good article like \u201cconcerns vs services\u201d or etc.</p>\n\n<p>Than I heard that concerns is for model and services for controller, but still, can\u2019t find any topic or article that are proving this.</p>\n\n<p>Can anybody explain the difference of services and concerns and when to use them?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 560, "user_id": 7721999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/bRWQu.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/7721999/andy"}, "edited": false, "score": 0, "creation_date": 1506581098, "post_id": 46457903, "comment_id": 79879908, "body": "I ended up using the essence of this answer and created a scope on the Exercise model to limit by month, then created an array of Users by those counts and selected the top users from there"}], "tags": [], "owner": {"reputation": 2874, "user_id": 4720244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbf3e87a6491f609f81b93e438282db?s=128&d=identicon&r=PG&f=1", "display_name": "EJAg", "link": "https://stackoverflow.com/users/4720244/ejag"}, "is_accepted": true, "score": 1, "last_activity_date": 1506549740, "creation_date": 1506549740, "answer_id": 46457903, "question_id": 46456875, "link": "https://stackoverflow.com/questions/46456875/query-nested-count/46457903#46457903", "title": "Query nested count", "body": "<p>You can't use the counter_cache here as it stores the number from all time. Another issue you have is that if you have multiple players having the same highest number of exercises, you'll miss the ones with the second highest number.</p>\n\n<pre><code># Exercise.rb\nscope :exercises_this_month, -&gt; {  \n  where(\"exercises.exercise_time &gt; ? AND exercises.exercise_time &lt;= ?\", \n  Time.now.beginning_of_month, Time.now.end_of_month) \n}\n\n#User.rb\nplayers_this_month = User.joins(:exercises).group(:user_id).merge(Exercise.exercises_this_month).count ## \n\nsorted_counts = players_this_month.values.uniq.sort\n\nif sorted_counts.present?\n  second_place_counts = sorted_counts[-2] || sorted_counts[-1]  #in case all have the same number\n  top_two_ids = players_this_month.map { |k,v| k if v &gt;= second_place_counts }  ##user ids with top two numbers\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 89, "user_id": 7628232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eda2D.png?s=128&g=1", "display_name": "neo7", "link": "https://stackoverflow.com/users/7628232/neo7"}, "is_accepted": false, "score": 0, "last_activity_date": 1506553840, "creation_date": 1506553840, "answer_id": 46458562, "question_id": 46456875, "link": "https://stackoverflow.com/questions/46456875/query-nested-count/46458562#46458562", "title": "Query nested count", "body": "<pre><code>gem 'groupdate'\n   model \n   def self.by_month(month_num)\n       self.where(\"cast(strftime('%m', created_at) as int) = #\n       {Date.today.strftime(\"%m\")}\")\n   end\n   controller \n      def report\n         @posts =Post.by_month(Date.today.strftime(\"%m\"))\n       end\n   view\n   some think like this \n      = @posts.group_by_month(:created_at).count\n</code></pre>\n\n<p>I am not sure what you want but this will be big help hopefully enjoy :)    </p>\n"}], "owner": {"reputation": 560, "user_id": 7721999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/bRWQu.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/7721999/andy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 46457903, "answer_count": 2, "score": 0, "last_activity_date": 1506553840, "creation_date": 1506544841, "question_id": 46456875, "link": "https://stackoverflow.com/questions/46456875/query-nested-count", "title": "Query nested count", "body": "<p>I have two models, a <code>User</code> and an <code>Exercise</code> where a user <code>has_many :exercises</code>. There is a cache_counter on the <code>User</code> model, <code>exercise_count</code></p>\n\n<p>I want to make a leaderboard based on a user's exercise count in the current month. I want to display the 2 users with the highest exercise counts of the month along with the count.  If there are other users with the same exercise count as the 2nd place user I want to display them too. (Display 2+ users)</p>\n\n<p>The current query I have,</p>\n\n<pre><code># User model\nscope :exercises_this_month, -&gt; {  includes(:exercises).references(:exercises)\n  .where(\"exercise_count &gt; ? AND exercises.exercise_time &gt; ? AND exercises.exercise_time &lt; ?\", \n  0 , Time.now.beginning_of_month, Time.now.end_of_month) \n}\n\ndef User.leaders\n  limit = User.exercises_this_month.where(\"exercise_count &gt; ?\", 0).order(exercise_count: :desc).second.exercise_count\n  User.exercises_this_month.where(\"exercise_count &gt; ? AND exercise_count &gt;= ?\", 0, limit)\nend\n</code></pre>\n\n<p>will return the top 2+ user object for all time. I want to limit this to the current month.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 2205, "user_id": 591172, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/475c453e241134dd9e51fc6b1ada721e?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/591172/sean"}, "edited": false, "score": 0, "creation_date": 1506545099, "post_id": 46456888, "comment_id": 79869501, "body": "I was just about to come in an answer my own question, as I figured it out. But you beat me to it! But good to know for people in the future!  THANKS!"}, {"owner": {"reputation": 309, "user_id": 2903331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a941909ef227991b23f2bc99249067c2?s=128&d=identicon&r=PG&f=1", "display_name": "Sofa", "link": "https://stackoverflow.com/users/2903331/sofa"}, "edited": false, "score": 0, "creation_date": 1506558878, "post_id": 46456888, "comment_id": 79873652, "body": "And even shorter: <code>(start_date..end_date).inject({}) { |memo, date| memo[date.strftime(&#39;%Y-%m&#39;)] = []; memo }</code>"}], "tags": [], "owner": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "is_accepted": true, "score": 1, "last_activity_date": 1506545118, "last_edit_date": 1506545118, "creation_date": 1506544921, "answer_id": 46456888, "question_id": 46456806, "link": "https://stackoverflow.com/questions/46456806/creating-array-from-dynamic-formatted-date-keys/46456888#46456888", "title": "Creating array from dynamic formatted date keys", "body": "<p>You can actually take your approach and build upon it:</p>\n\n<pre><code>(start_date..end_date)\n  .map { |date| date.strftime('%Y-%m') }\n  .uniq\n  .map { |date| [date, []] }\n  .to_h\n\n=&gt; {\"2017-05\"=&gt;[], \"2017-06\"=&gt;[], \"2017-07\"=&gt;[], \"2017-08\"=&gt;[], \"2017-09\"=&gt;[], \"2017-10\"=&gt;[], \"2017-11\"=&gt;[], \"2017-12\"=&gt;[], \"2018-01\"=&gt;[], \"2018-02\"=&gt;[], \"2018-03\"=&gt;[], \"2018-04\"=&gt;[], \"2018-05\"=&gt;[]} \n</code></pre>\n\n<p>But this can be simplified to:</p>\n\n<pre><code>(start_date..end_date)\n  .map { |date| [date.strftime('%Y-%m') , []] }\n  .to_h\n</code></pre>\n\n<p>The dates created by the range will already be unique.</p>\n"}], "owner": {"reputation": 2205, "user_id": 591172, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/475c453e241134dd9e51fc6b1ada721e?s=128&d=identicon&r=PG", "display_name": "Sean", "link": "https://stackoverflow.com/users/591172/sean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14, "favorite_count": 0, "accepted_answer_id": 46456888, "answer_count": 1, "score": 0, "last_activity_date": 1506545118, "creation_date": 1506544566, "last_edit_date": 1506544853, "question_id": 46456806, "link": "https://stackoverflow.com/questions/46456806/creating-array-from-dynamic-formatted-date-keys", "title": "Creating array from dynamic formatted date keys", "body": "<p>I'm trying to create a hash that uses the year-month as a key.  Consider this code:</p>\n\n<pre><code>(start_date..end_date).map { |date| date.strftime('%Y-%m') }.uniq\n</code></pre>\n\n<p>The above code creates an array of dates formatted, that looks like below:</p>\n\n<pre><code>[\"2017-05\", \"2017-06\", \"2017-07\", \"2017-08\", \"2017-09\", \"2017-10\", \"2017-11\", \"2017-12\", \"2018-01\", \"2018-02\", \"2018-03\", \"2018-04\", \"2018-05\"]\n</code></pre>\n\n<p>However, how would you do something similar that would use this formatted date as key with an empty array as value?  That looks something like this:</p>\n\n<pre><code>{ \"2017-05\": [], \"2017-06\": [], \"2017-07\": [] ...}\n</code></pre>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "ruby-on-rails-5.1"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1506540739, "post_id": 46455459, "comment_id": 79867275, "body": "Normally this is done by adding a <code>role</code> field and possibly using <a href=\"https://github.com/CanCanCommunity/cancancan\" rel=\"nofollow noreferrer\">an authorization gem</a> to do permission checks."}, {"owner": {"reputation": 49, "user_id": 4215534, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-qHhWcbIGdfY/AAAAAAAAAAI/AAAAAAAAACc/mmeaYGqbHC4/photo.jpg?sz=128", "display_name": "Fastboyz", "link": "https://stackoverflow.com/users/4215534/fastboyz"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1506541434, "post_id": 46455459, "comment_id": 79867621, "body": "I am already using an Authentification gem :<a href=\"https://github.com/lynndylanhurley/devise_token_auth\" rel=\"nofollow noreferrer\">link</a>. and I added the field role with a migration"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1506541546, "post_id": 46455459, "comment_id": 79867679, "body": "Authentication is one step, authorization is how you set up rules for what those roles can and cannot do."}], "answers": [{"tags": [], "owner": {"reputation": 1420, "user_id": 1436610, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/Ow8Cb.jpg?s=128&g=1", "display_name": "Coding active", "link": "https://stackoverflow.com/users/1436610/coding-active"}, "is_accepted": true, "score": 0, "last_activity_date": 1506542680, "creation_date": 1506542680, "answer_id": 46456339, "question_id": 46455459, "link": "https://stackoverflow.com/questions/46455459/rails-devise-token-auth/46456339#46456339", "title": "Rails: devise_token_auth", "body": "<p>There are several ways you can implement this functionality. </p>\n\n<ol>\n<li><p>You can check \n<a href=\"https://github.com/CanCanCommunity/cancancan\" rel=\"nofollow noreferrer\">https://github.com/CanCanCommunity/cancancan</a>\nfor role based authorization and access management. </p></li>\n<li><p>Add a column <code>role</code> to <code>User</code> model to keep track of user permissions. </p></li>\n</ol>\n\n<p>And you can always associate different permissions to different roles you define. </p>\n"}], "owner": {"reputation": 49, "user_id": 4215534, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-qHhWcbIGdfY/AAAAAAAAAAI/AAAAAAAAACc/mmeaYGqbHC4/photo.jpg?sz=128", "display_name": "Fastboyz", "link": "https://stackoverflow.com/users/4215534/fastboyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 46456339, "answer_count": 1, "score": 0, "last_activity_date": 1506542680, "creation_date": 1506539144, "last_edit_date": 1506540729, "question_id": 46455459, "link": "https://stackoverflow.com/questions/46455459/rails-devise-token-auth", "title": "Rails: devise_token_auth", "body": "<p>I am new with rails, I wanted to do something that in my mind shoud be easy but I am not sure how it's done.</p>\n\n<p><strong>presenting the Situation</strong></p>\n\n<p>I have an App using rails in API mode for my backend server, and Angular2 as my front end server. To authentify the users, I use the gem : devise_token_auth. </p>\n\n<p><strong>Problem</strong></p>\n\n<p>In my App, I have many types of users with different permissions. For example, Directors, assistant-Directors ... my question is how can I implement that? I added a field user_type to the table but is that all ?</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "edited": false, "score": 0, "creation_date": 1506538880, "post_id": 46455330, "comment_id": 79866235, "body": "Is javascript who opens it, you just render it (probably hidden) so that is in place when you trigger it."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1506540213, "post_id": 46455330, "comment_id": 79866978, "body": "why do you want to simulate it in javascript? what&#39;s not working about your code?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1506542254, "post_id": 46455330, "comment_id": 79868058, "body": "As a note it&#39;s a bad habit to separate the parens from the method call. Use <code>content_for(:modal)</code> or <code>content_for :modal</code> to avoid ambiguity."}, {"owner": {"reputation": 29, "user_id": 7203387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7894d657478623505eb49188d1ae9beb?s=128&d=identicon&r=PG&f=1", "display_name": "Andres Fernandes", "link": "https://stackoverflow.com/users/7203387/andres-fernandes"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1506551246, "post_id": 46455330, "comment_id": 79871846, "body": "I need to simulate this because I&#39;m gonna change my table to a datatable (getting al the info from ajax) and I can&#39;t use the content_for :modal on the datatable class (from this example <a href=\"http://railscasts.com/episodes/340-datatables?language=en&amp;view=asciicast\" rel=\"nofollow noreferrer\">railscasts.com/episodes/&hellip;</a>) @maxpleaner"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1506553519, "post_id": 46455330, "comment_id": 79872444, "body": "You have a couple options. You can load the HTML from the server through AJAX. Or you could make hidden sections in the HTML and unhide them with customized content when the data from the AJAX comes in. Or you could opt to completely build your HTML inside Javascript using a front end framework. I think you should give it a try to implement in Javascript as best you know how and then post your attempt here; it will be easier to help that way."}], "owner": {"reputation": 29, "user_id": 7203387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7894d657478623505eb49188d1ae9beb?s=128&d=identicon&r=PG&f=1", "display_name": "Andres Fernandes", "link": "https://stackoverflow.com/users/7203387/andres-fernandes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1506551065, "creation_date": 1506538650, "last_edit_date": 1506551065, "question_id": 46455330, "link": "https://stackoverflow.com/questions/46455330/is-there-a-way-to-simulate-content-for-in-javascript", "title": "Is there a way to simulate content_for in javascript?", "body": "<p>I'm using the content_for tag of rails, but I was wondering if there's a way to simulate this: </p>\n\n<pre><code>- content_for (:modal) do\n    = render 'agreements/edit'\n</code></pre>\n\n<p>On javascript because right now I have this:</p>\n\n<pre><code>  - @agreements.each do |agreement|\n    %tr{id: agreement.id}\n      %td\n        %p.agreement-discount= agreement.amount\n      %td\n        %p.agreement-name= agreement.name\n      %td\n        %p.agreement-size= agreement.total_students\n      %td\n        %p.agreement-size= agreement.agreement_service_students.active.size\n      %td\n        %a.button-assign{value: \"#{agreement.id}\"}\n          %p.blue-text= t('service.button_assign')\n      %td.table-options-icons\n        - if agreement.is_assigned?\n          .col-xs-12\n            %p.icon-full-info-full{ title: t(\"message.fail_edit_destroy_agreement\")}\n        - else\n          .col-xs-6\n            %a.icon-full-pen-full.js-edit-agreement{href: \"#\", id: \"#{agreement.id}\"}\n          .col-xs-6\n            = link_to agreement, method: :delete, id: \"agreement-destroy-#{agreement.id}\",\n                  data: { confirm: t('confirm_delete.agreement', agreement: agreement.name) } do\n              .icon-full-trash-full.small-profile\n\n    - content_for (:modal) do\n      = render 'agreements/edit'\n</code></pre>\n\n<p>If I remove the content_for tag the modal won't open.</p>\n\n<p>Thanks! </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "edited": false, "score": 0, "creation_date": 1506538270, "post_id": 46455173, "comment_id": 79865920, "body": "Is InvitesController inheriting from ApplicationController?"}, {"owner": {"reputation": 45, "user_id": 4399317, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/643d8d985b671f3eaecf32b3444861cb?s=128&d=identicon&r=PG&f=1", "display_name": "nomad", "link": "https://stackoverflow.com/users/4399317/nomad"}, "reply_to_user": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "edited": false, "score": 0, "creation_date": 1506538434, "post_id": 46455173, "comment_id": 79865997, "body": "Yea its inheriting the users controller which then inherits the application controller... It has the same setup as projects controller"}, {"owner": {"reputation": 1393, "user_id": 4155696, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/CPQvv.jpg?s=128&g=1", "display_name": "Jonathan Bowman", "link": "https://stackoverflow.com/users/4155696/jonathan-bowman"}, "edited": false, "score": 0, "creation_date": 1506545488, "post_id": 46455173, "comment_id": 79869713, "body": "Is <code>current_account</code> returning a single <code>User</code> object?"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 4399317, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/643d8d985b671f3eaecf32b3444861cb?s=128&d=identicon&r=PG&f=1", "display_name": "nomad", "link": "https://stackoverflow.com/users/4399317/nomad"}, "edited": false, "score": 0, "creation_date": 1506557288, "post_id": 46457978, "comment_id": 79873325, "body": "I really appreciate your assistance. I still am having trouble with it but this definitely give me a good picture of how it works."}], "tags": [], "owner": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "is_accepted": true, "score": 1, "last_activity_date": 1506550162, "last_edit_date": 1592644375, "creation_date": 1506550162, "answer_id": 46457978, "question_id": 46455173, "link": "https://stackoverflow.com/questions/46455173/creating-a-users-list-that-is-personalized-by-subdomain-rails/46457978#46457978", "title": "Creating a Users list that is personalized by subdomain Rails", "body": "<p>I have done this many times.</p>\n<p>What I do is like you I have a current_account method in the application controller</p>\n<pre><code>#app/controllers/application_controller.rb\nclass ApplicationController &lt; ActionController::Base\n  ...\n  def current_account\n    @current_account ||= User.find_by(subdomain: request.subdomain)\n  end\n  ...\nend\n</code></pre>\n<p>the key is that each user also has a account_id or you have a way to have a user to accounts table</p>\n<p>I have a account_id in my users</p>\n<pre><code>class AddAccountIdToUsers &lt; ActiveRecord::Migration[5.0]\n  def change\n    add_column :users, :account_id, :integer\n  end\nend\n</code></pre>\n<p>Now you need to remember to add the association of account has many users and user belongs to a account</p>\n<h2>Models</h2>\n<pre><code>#app/models/account.rb\nclass Account &lt; ApplicationRecord\n  has_many :users\n  ...\nend\n\n#app/models/user.rb\nclass User &lt; ApplicationRecord\n  belongs_to :account\n  ...\nend\n</code></pre>\n<p>now in your controller you can do</p>\n<p><code>@users = current_account.useres</code></p>\n"}], "owner": {"reputation": 45, "user_id": 4399317, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/643d8d985b671f3eaecf32b3444861cb?s=128&d=identicon&r=PG&f=1", "display_name": "nomad", "link": "https://stackoverflow.com/users/4399317/nomad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 46457978, "answer_count": 1, "score": 0, "last_activity_date": 1506550162, "creation_date": 1506538119, "question_id": 46455173, "link": "https://stackoverflow.com/questions/46455173/creating-a-users-list-that-is-personalized-by-subdomain-rails", "title": "Creating a Users list that is personalized by subdomain Rails", "body": "<p>I currently have a system that allows a user who has created an account to invite additional users to their team. Unfortunately When viewing the user list it displays ALL users from every team. I want this list to be separated by subdomain and partitioned by each team. I have a projects controller which is partitioned like this by using a current_account method.</p>\n\n<p>application_controller.rb</p>\n\n<pre><code>def current_account\n  @current_account ||= User.find_by(subdomain: request.subdomain)\nend\n</code></pre>\n\n<p>projects_controller.rb</p>\n\n<pre><code>def index\n  @project = current_account.projects\nend\n</code></pre>\n\n<p>invites_controller.rb</p>\n\n<pre><code>def index\n  @user = current_account.users      \nend\n</code></pre>\n\n<p>When I navigate to the index action route url of the invites_controller I received the following error: </p>\n\n<pre><code>NoMethodError in Users::InvitesController#index\nundefined method `users' for\n</code></pre>\n\n<p>However when I navigate to the index action route url of the projects_controller everything works as expected. Why can't I use the current_account method in the invites_controller, just like I did with the projects_controller?   </p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1506537198, "post_id": 46454875, "comment_id": 79865314, "body": "Try <a href=\"https://ideone.com/9CSMxz\" rel=\"nofollow noreferrer\"><code>&#47;{{(user_[^}]*)}}&#47;</code></a> or <code>&#47;{{(user_.*?)}}&#47;</code>"}, {"owner": {"reputation": 2210, "user_id": 4082957, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2c549b569c2faad6f2fad9c385527406?s=128&d=identicon&r=PG&f=1", "display_name": "geoandri", "link": "https://stackoverflow.com/users/4082957/geoandri"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1506537416, "post_id": 46454875, "comment_id": 79865454, "body": "It works!!!!! Thank you very much. You should post it as an answer in order to accept it."}], "answers": [{"tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 3, "last_activity_date": 1506537520, "creation_date": 1506537520, "answer_id": 46455002, "question_id": 46454875, "link": "https://stackoverflow.com/questions/46454875/regular-expression-between-brackets-starts-with-a-specific-string-but-do-not-i/46455002#46455002", "title": "Regular expression: between brackets, starts with a specific string but do not ignore spaces", "body": "<p>The <code>\\w*</code> only matches 0 or more word chars and does not match whitespace.</p>\n\n<p>It seems the best pattern for this scenario is a lazy dot pattern:</p>\n\n<pre><code>/{{(user_.*?)}}/\n         ^^^\n</code></pre>\n\n<p>See the <a href=\"http://rubular.com/r/4k0jp9eTIx\" rel=\"nofollow noreferrer\">Rubular demo</a> and an <a href=\"https://ideone.com/9CSMxz\" rel=\"nofollow noreferrer\">online Ruby demo</a>.</p>\n\n<p>The <code>.*?</code> here will match any 0+ chars other than line break chars, as few as possible, up to the first <code>}}</code>.</p>\n\n<p>If the user names cannot have <code>}</code>, you may use <code>/{{(user_[^}]*)}}/</code> regex, too. The <code>[^}]*</code> negated character class matches 0 or more chars other than <code>}</code> chars. There is another difference from <code>.*?</code> based solution: <code>[^}]</code> also matches line break chars. To make the <code>.</code> match line breaks, add a <code>/m</code> modifier with the first regex, <code>/{{(user_.*?)}}/m</code>.</p>\n"}], "owner": {"reputation": 2210, "user_id": 4082957, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2c549b569c2faad6f2fad9c385527406?s=128&d=identicon&r=PG&f=1", "display_name": "geoandri", "link": "https://stackoverflow.com/users/4082957/geoandri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 46455002, "answer_count": 1, "score": 1, "last_activity_date": 1506537520, "creation_date": 1506537077, "question_id": 46454875, "link": "https://stackoverflow.com/questions/46454875/regular-expression-between-brackets-starts-with-a-specific-string-but-do-not-i", "title": "Regular expression: between brackets, starts with a specific string but do not ignore spaces", "body": "<p>I am trying to extract from a string all unique occurrences of a specific pattern. My string is<br>\n    <code>text = 'My name is {{user_name}} {{user_second name}}. I am {{anything_else}}'</code><br>\nI want to extract the text inside the double brackets that start with \"user_\". For the given string I would like to have the following array<br>\n<code>[\"user_name\", \"user_second name\"]</code>.<br>\nI am trying to achieve this using the following regular expression but in case there is a space inside the square brackets it ignores it somehow.<br>\n<code>text.scan(/\\{{(customer_\\w*)\\}}/).uniq.flatten</code> returns <code>[\"user_name\"]</code></p>\n\n<p>Any help would be really appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "error-handling", "api-design"], "comments": [{"owner": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "edited": false, "score": 0, "creation_date": 1506537157, "post_id": 46454464, "comment_id": 79865289, "body": "Can you please elaborate on which private methods are undefined? The on in the controller or the on in the module? If possible, a stacktrace could also help."}, {"owner": {"reputation": 321, "user_id": 2671017, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Mdvbp.jpg?s=128&g=1", "display_name": "dynsne", "link": "https://stackoverflow.com/users/2671017/dynsne"}, "reply_to_user": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "edited": false, "score": 0, "creation_date": 1506538317, "post_id": 46454464, "comment_id": 79865938, "body": "I&#39;ve updated the post. As mentioned, the module is being evaluated but I hit the an <code>unitialized constant</code> error within it, and the <code>undefined local variable or method</code> inside of the api controller, when they are actually defined. Perhaps the error in the module prevents code below the <code>include</code> from being evaluated?"}, {"owner": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "edited": false, "score": 0, "creation_date": 1506539169, "post_id": 46454464, "comment_id": 79866397, "body": "I could only provide a basic pointer regarding the &#39;undefined method&#39; problem. If you show the code which raises the error, I could offer more specific help."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1506545292, "post_id": 46454464, "comment_id": 79869612, "body": "side note usually local variables preceded by an underscore are to indicate that they are not used as in <code>{1: &#39;2&#39;}.each {|k,_v| # some code just for k}</code>"}], "answers": [{"comments": [{"owner": {"reputation": 321, "user_id": 2671017, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Mdvbp.jpg?s=128&g=1", "display_name": "dynsne", "link": "https://stackoverflow.com/users/2671017/dynsne"}, "edited": false, "score": 0, "creation_date": 1506539335, "post_id": 46455334, "comment_id": 79866476, "body": "Thanks, made progress. I understand more about ruby now!"}, {"owner": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "reply_to_user": {"reputation": 321, "user_id": 2671017, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Mdvbp.jpg?s=128&g=1", "display_name": "dynsne", "link": "https://stackoverflow.com/users/2671017/dynsne"}, "edited": false, "score": 0, "creation_date": 1506539475, "post_id": 46455334, "comment_id": 79866557, "body": "Glad to be of help. If you want to read more about constant lookup you can take a look <a href=\"https://cirw.in/blog/constant-lookup.html\" rel=\"nofollow noreferrer\">at this page</a>"}], "tags": [], "owner": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "is_accepted": true, "score": 2, "last_activity_date": 1506539063, "last_edit_date": 1506539063, "creation_date": 1506538668, "answer_id": 46455334, "question_id": 46454464, "link": "https://stackoverflow.com/questions/46454464/best-way-to-perform-error-handling-using-modules-in-rails/46455334#46455334", "title": "Best way to perform error handling using modules in Rails?", "body": "<p>The answer is broken down into two parts as I believe that there are two separate problems.</p>\n\n<p><strong>unitinalized constant error</strong></p>\n\n<p>The error</p>\n\n<pre><code>uninitialized constant Error::ErrorHandling::ActiveController\n</code></pre>\n\n<p>can be fixed by changing this</p>\n\n<pre><code>rescue_from ActiveController::ParameterMissing do |e|\n  response(:unprocessable_entitry, 422, e.to_s)\nend\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code> rescue_from ::ActiveController::ParameterMissing do |e|\n   response(:unprocessable_entitry, 422, e.to_s)\n end\n</code></pre>\n\n<p>(adding <code>::</code> in front of the <code>ActiveController</code> constant)</p>\n\n<p>Constant lookup in ruby takes lexical nesting into account. As you reference the Constant within </p>\n\n<pre><code>module Error\n  module ErrorHandling\n  ...\n  end\nend\n</code></pre>\n\n<p>ruby will try to find the constant within this namespace if the constant is undefined before. Prepending <code>::</code> will tell ruby to ignore the nesting on constant lookup.</p>\n\n<p><strong>undefined local method</strong></p>\n\n<p>The error </p>\n\n<pre><code>undefined local variable or method `active_user' for Api::FooController\n</code></pre>\n\n<p>is raised because some code is calling the <em>instance</em> method <code>active_user</code> on the <em>class</em> <code>Api::FooController</code> where it is not defined. </p>\n"}, {"tags": [], "owner": {"reputation": 1166, "user_id": 2217750, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cKXxI.jpg?s=128&g=1", "display_name": "Darkisa", "link": "https://stackoverflow.com/users/2217750/darkisa"}, "is_accepted": false, "score": 0, "last_activity_date": 1564164822, "creation_date": 1564164822, "answer_id": 57225181, "question_id": 46454464, "link": "https://stackoverflow.com/questions/46454464/best-way-to-perform-error-handling-using-modules-in-rails/57225181#57225181", "title": "Best way to perform error handling using modules in Rails?", "body": "<p>I know this is an old question but I was struggling with it but found the fix. To fix the issue of:</p>\n\n<pre><code>`undefined local variable or method `active_user' for Api::FooController` \n</code></pre>\n\n<p>You need to include extend <code>ActiveSupport::Concern</code> e.g. </p>\n\n<pre><code>module Error\n  module ErrorHandling\n    extend ActiveSupport::Concern\n\n    # rest of your code\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 321, "user_id": 2671017, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Mdvbp.jpg?s=128&g=1", "display_name": "dynsne", "link": "https://stackoverflow.com/users/2671017/dynsne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1564, "favorite_count": 0, "accepted_answer_id": 46455334, "answer_count": 2, "score": 3, "last_activity_date": 1564164822, "creation_date": 1506535517, "last_edit_date": 1506538203, "question_id": 46454464, "link": "https://stackoverflow.com/questions/46454464/best-way-to-perform-error-handling-using-modules-in-rails", "title": "Best way to perform error handling using modules in Rails?", "body": "<p>I'm pretty new to Rails and back-end API developement so excuse me if I misuse a concept or so. Right now I'm attempting to refactor a large amount of conditional error handling code that is sprinkled around the code base and move towards using an explicit list of rescued exceptions that's mixed into the API controller by including it in as a module. This will allow me to attach custom, but arbitrary, codes to each exception caught, so long as we use the bang alternatives for active record methods, and the error handling code can live in one place. So far, for the error handling module, I have something like this:</p>\n\n<pre><code># app/lib/error/error_handling.rb\nmodule Error\n  module ErrorHandling\n    def self.included(klass)\n      klass.class_eval do\n        rescue_from ActiveRecord::RecordNotFound do |e|\n          respond(:record_not_found, 404, e.to_s)\n        end\n        rescue_from ActiveRecord::ActiveRecordError do |e|\n          respond(e.error, 422, e.to_s)\n        end\n        rescue_from ActiveController::ParameterMissing do |e|\n          response(:unprocessable_entitry, 422, e.to_s)\n        end\n        rescue_from ActiveModel::ValidationError do |e|\n          response(e.error, 422, e.to_s)\n        end\n        rescue_from CustomApiError do |e|\n          respond(e.error, e.status, e.message.to_s)\n        end\n        rescue_from CanCan::AccessDenied do\n          respond(:forbidden, 401, \"current user isn't authorized for that\")\n        end\n        rescue_from StandardError do |e|\n          respond(:standard_error, 500, e.to_s)\n        end\n      end\n    end\n\n    private\n\n    def respond(_error, _status, _message)\n      render \"layouts/api/errors\", status: _status\n    end\n  end\nend\n</code></pre>\n\n<p>Where <code>layouts/api/errors</code> is a view built using jbuilder.\nIn the <code>ApiController</code> we have:</p>\n\n<pre><code># app/controllers/api/api_controller.rb\nmodule Api\n  class ApiController &lt; ApplicationController\n    include Error::ErrorHandling\n\n    attr_reader :active_user\n\n    layout \"api/application\"\n\n    before_action :authenticate_by_token!\n    before_action :set_uuid_header\n\n    respond_to :json\n    protect_from_forgery with: :null_session\n    skip_before_action :verify_authenticity_token, if: :json_request?\n\n    private\n\n    ...\n\nend\n</code></pre>\n\n<p>Unfortunately this doesn't seem to work. Running tests shows that the private methods are not being loaded at all and are considered undefined! </p>\n\n<p>To be more specific, here are the errors emitted:</p>\n\n<pre><code>uninitialized constant Error::ErrorHandling::ActiveController\n</code></pre>\n\n<p>and</p>\n\n<pre><code>undefined local variable or method `active_user' for Api::FooController\n</code></pre>\n\n<p>Where <code>active_user</code> is an attribute that is set inside of an instance variable by a method named <code>set_active_user</code>. Which is obviously not being called.</p>\n\n<p>However the <code>ErrorHandling</code> module is being evaluated. How could this be? Am I namespacing incorrectly or something?</p>\n\n<p>Thanks for reading.</p>\n"}, {"tags": ["ruby", "cucumber"], "comments": [{"owner": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "edited": false, "score": 1, "creation_date": 1506536490, "post_id": 46454396, "comment_id": 79864940, "body": "Can you please specify the kind of errors, if possible with an error message, you face?"}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1506542862, "post_id": 46454396, "comment_id": 79868367, "body": "Possibly you are missing the regex slash here <code>Then(&#47;^</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8684813, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BKSZtdpyO2M/AAAAAAAAAAI/AAAAAAAAABU/z8kAh4V3O0o/photo.jpg?sz=128", "display_name": "Klebson Leite", "link": "https://stackoverflow.com/users/8684813/klebson-leite"}, "is_accepted": false, "score": 0, "last_activity_date": 1506601292, "creation_date": 1506601292, "answer_id": 46469043, "question_id": 46454396, "link": "https://stackoverflow.com/questions/46454396/validate-4-different-messages-in-the-featute-but-in-a-single-step-in-the-rb/46469043#46469043", "title": "Validate 4 different messages in the \u201c.featute\u201d but in a single step in the \u201c.rb\u201d", "body": "<p>message return:</p>\n\n<pre><code>  expected: \"sunt aut facere repellat provident occaecati excepturi optio reprehenderit\"\n       got: \"qui est esse\"\n\n  (compared using ==)\n   (RSpec::Expectations::ExpectationNotMetError)\n  ./features/step_definitions/backend11.rb:12:in `/^Returnered message \"(.*?)\"$/'\n  features/backend11.feature:7:in `Then Returnered message \"sunt aut facere repellat provident occaecati excepturi optio reprehenderit\"'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48, "user_id": 4686364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9801b79e8361dfb85a7cd4636be0d016?s=128&d=identicon&r=PG&f=1", "display_name": "Derek Nagy", "link": "https://stackoverflow.com/users/4686364/derek-nagy"}, "is_accepted": false, "score": 0, "last_activity_date": 1508955137, "creation_date": 1508955137, "answer_id": 46939370, "question_id": 46454396, "link": "https://stackoverflow.com/questions/46454396/validate-4-different-messages-in-the-featute-but-in-a-single-step-in-the-rb/46939370#46939370", "title": "Validate 4 different messages in the \u201c.featute\u201d but in a single step in the \u201c.rb\u201d", "body": "<p>If I am reading this right you are expecting:</p>\n\n<p>@api[0][\"title\"] == \"sunt aut facere repellat provident occaecati excepturi optio reprehenderit\"</p>\n\n<p>@api[1][\"title\"] == \"qui est esse\" </p>\n\n<p>and so on. </p>\n\n<p>However your code is expecting:</p>\n\n<p>@api[0][\"title\"] == \"sunt aut facere repellat provident occaecati excepturi optio reprehenderit\"</p>\n\n<p>@api[1][\"title\"] == \"sunt aut facere repellat provident occaecati excepturi optio reprehenderit\"</p>\n\n<p>...</p>\n\n<p>@api[0][\"title\"] == \"qui est esse\"</p>\n\n<p>@api[1][\"title\"] == \"qui est esse\"</p>\n\n<p>You can make this work a few different ways, but one of these 2 should work for you.</p>\n\n<p>1)</p>\n\n<p>Include the text inside the step defecation instead of passing it in. </p>\n\n<pre><code>Then(^I get four titles$/) do\n\n    expect(@api[0][\"title\"]).to eq 'sunt aut facere repellat provident occaecati excepturi optio reprehenderit'\n\n    expect(@api[1][\"title\"]).to eq 'qui est esse'\n\n    expect(@api[2][\"title\"]).to eq 'ea molestias quasi exercitationem repellat qui ipsa sit aut'\n\n    expect(@api[3][\"title\"]).to eq 'eum et est occaecati'\n\nend\n</code></pre>\n\n<p>2)</p>\n\n<p>If you don't care what the actual text is, just that it's there, you can use a regular expression. </p>\n\n<pre><code>Then(^I get four titles$/) do                \n    (0..3).each do |title_count|\n       expect(@api[title_count][\"title\"]).to match /[a-z]+/\n    end        \nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8684813, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BKSZtdpyO2M/AAAAAAAAAAI/AAAAAAAAABU/z8kAh4V3O0o/photo.jpg?sz=128", "display_name": "Klebson Leite", "link": "https://stackoverflow.com/users/8684813/klebson-leite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1508955137, "creation_date": 1506535246, "last_edit_date": 1506583848, "question_id": 46454396, "link": "https://stackoverflow.com/questions/46454396/validate-4-different-messages-in-the-featute-but-in-a-single-step-in-the-rb", "title": "Validate 4 different messages in the \u201c.featute\u201d but in a single step in the \u201c.rb\u201d", "body": "<p>I use the Cucumber + Capybara + Ruby framework and am not able to perform an assertion using the \"expect\" method.</p>\n\n<p>I need to validate 4 different messages in the \u201c.featute\u201d but in a single step in the \u201c.rb\u201d</p>\n\n<pre><code>Given(/^I send a get to see four titles$/) do\n    @api = HTTParty.get(\"https://jsonplcaholder.typicode.com/posts\")\nend\n\nThen(/^Returned status code \"(.*?)\"$/) do |statuscode|\n    expect(@api.code.to_s).to eq statuscode\nend\n\nThen(^Returnered message \"(.*?)\"$/) do |message|\n    expect(@api[0][\"title\"]).to eq message\n    expect(@api[1][\"title\"]).to eq message\n    expect(@api[2][\"title\"]).to eq message\n    expect(@api[3][\"title\"]).to eq message\nend\n\nFeature: message body\n@titles\nScenario: Display of title all films\nGiven I send a get to see four titles\nThen Returned status code \"200\"\nThen Returned message \"sunt aut facere repellat provident occaecati excepturi optio reprehenderit\"\nThen Returned message \"qui est esse\"\nThen Returned message \"ea molestias quasi exercitationem repellat qui ipsa sit aut\"\nThen Returned message \"eum et est occaecati\"\n</code></pre>\n"}, {"tags": ["ruby", "macos"], "answers": [{"tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1506545694, "creation_date": 1506545694, "answer_id": 46457070, "question_id": 46453845, "link": "https://stackoverflow.com/questions/46453845/error-installing-while-installing-unf-ext/46457070#46457070", "title": "Error installing while installing unf_ext", "body": "<p>It is telling you the error, you just need to pick through the output.</p>\n\n<pre><code>checking for main() in -lstdc++... *** extconf.rb failed ***\n</code></pre>\n\n<p><code>extconf.rb</code> is the script that configures a gem for native compilation, here it's checking a pretty basic requirement: can you compile a C++ executable? And it fails. A bit later it repeats this</p>\n\n<pre><code>mkmf.rb:456:in `try_do': The compiler failed to generate an executable file. (RuntimeError)\nYou have to install development tools first.\n</code></pre>\n\n<p><code>mkmf.rb</code> is a <a href=\"http://ruby-doc.org/stdlib/libdoc/mkmf/rdoc/MakeMakefile.html\" rel=\"nofollow noreferrer\">stdlib</a> used by <code>extconf.rb</code> to test the capabilities of your compiler and then output a suitable makefile for building the extension. It's repeating that it couldn't even build a C++ executable (let alone check for any specific capability).</p>\n\n<p>So either you don't have a C++ compiler installed or your paths aren't set up in a way that Ruby can find it.</p>\n"}, {"tags": [], "owner": {"reputation": 16, "user_id": 1752764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59c4b6ca5431af6cb9015c4b1535a0d6?s=128&d=identicon&r=PG", "display_name": "wenbo", "link": "https://stackoverflow.com/users/1752764/wenbo"}, "is_accepted": true, "score": 0, "last_activity_date": 1542949074, "creation_date": 1542949074, "answer_id": 53440854, "question_id": 46453845, "link": "https://stackoverflow.com/questions/46453845/error-installing-while-installing-unf-ext/53440854#53440854", "title": "Error installing while installing unf_ext", "body": "<p>I copied out the \"extconf.rb\" to my working folder and run \"ruby extconf.rb\" again, got a mkmf.log, turned out it was a missing \"ruby/config.h\". Then the problem was fixed by \"xcode-select --install\". See:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/53135863/macos-mojave-ruby-config-h-file-not-found\">macOS Mojave &#39;ruby/config.h&#39; file not found</a></p>\n\n<p>My machine runs 10.13.6 macOS High Sierra.</p>\n"}], "owner": {"reputation": 27, "user_id": 8684405, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10212741625829162/picture?type=large", "display_name": "jsauder81", "link": "https://stackoverflow.com/users/8684405/jsauder81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1630, "favorite_count": 1, "accepted_answer_id": 53440854, "answer_count": 2, "score": 1, "last_activity_date": 1542949074, "creation_date": 1506533148, "question_id": 46453845, "link": "https://stackoverflow.com/questions/46453845/error-installing-while-installing-unf-ext", "title": "Error installing while installing unf_ext", "body": "<p>I installed MacOS High Sierra yesterday, and I was testing my ruby code and it was failing due to one of my gems not being installed. I tried installing it today and got this back:</p>\n\n<pre><code>Fetching gem metadata from https://rubygems.org/.........\nFetching version metadata from https://rubygems.org/.\nUsing bundler 1.15.4\nFetching unf_ext 0.0.7.4\n\n\nYour user account isn't allowed to install to the system RubyGems.\n  You can cancel this installation and run:\n\n      bundle install --path vendor/bundle\n\n  to install the gems into ./vendor/bundle/, or you can enter your password\n  and install the bundled gems to RubyGems using sudo.\n\n  Password: \nInstalling unf_ext 0.0.7.4 with native extensions\nUsing mime-types-data 3.2016.0521\nUsing net-http-digest_auth 1.4.1\nUsing net-http-persistent 2.9.4\nUsing mini_portile2 2.1.0\nUsing ntlm-http 0.1.1\nUsing webrobots 0.1.2\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\ncurrent directory:\n/private/var/folders/lq/mdp176gx3b90j7_mvygpydmr0000gn/T/bundler20170927-4407-1gh3fizunf_ext-0.0.7.4/gems/unf_ext-0.0.7.4/ext/unf_ext\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/bin/ruby -r\n./siteconf20170927-4407-1twnwgt.rb extconf.rb\nchecking for main() in -lstdc++... *** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n--ruby=/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/bin/$(RUBY_BASE_NAME)\n    --with-static-libstdc++\n    --without-static-libstdc++\n    --with-stdc++lib\n    --without-stdc++lib\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:456:in\n`try_do': The compiler failed to generate an executable file. (RuntimeError)\nYou have to install development tools first.\nfrom\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:535:in\n`block in try_link0'\nfrom\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/tmpdir.rb:89:in\n`mktmpdir'\nfrom\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:532:in\n`try_link0'\nfrom\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:556:in\n`try_link'\nfrom\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:765:in\n`try_func'\nfrom\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:997:in\n`block in have_library'\nfrom\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:942:in\n`block in checking_for'\nfrom\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:350:in\n`block (2 levels) in postpone'\nfrom\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:320:in\n`open'\nfrom\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:350:in\n`block in postpone'\nfrom\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:320:in\n`open'\nfrom\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:346:in\n`postpone'\nfrom\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:941:in\n`checking_for'\nfrom\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:992:in\n`have_library'\n    from extconf.rb:6:in `&lt;main&gt;'\n\nTo see why this extension failed to compile, please check the mkmf.log which can\nbe found here:\n\n/var/folders/lq/mdp176gx3b90j7_mvygpydmr0000gn/T/bundler20170927-4407-1gh3fizunf_ext-0.0.7.4/extensions/universal-darwin-17/2.3.0/unf_ext-0.0.7.4/mkmf.log\n\nextconf failed, exit code 1\n\nGem files will remain installed in\n/var/folders/lq/mdp176gx3b90j7_mvygpydmr0000gn/T/bundler20170927-4407-1gh3fizunf_ext-0.0.7.4/gems/unf_ext-0.0.7.4\nfor inspection.\nResults logged to\n/var/folders/lq/mdp176gx3b90j7_mvygpydmr0000gn/T/bundler20170927-4407-1gh3fizunf_ext-0.0.7.4/extensions/universal-darwin-17/2.3.0/unf_ext-0.0.7.4/gem_make.out\n\nAn error occurred while installing unf_ext (0.0.7.4), and Bundler\ncannot continue.\nMake sure that `gem install unf_ext -v '0.0.7.4'` succeeds before bundling.\n\nIn Gemfile:\n  mechanize was resolved to 2.7.5, which depends on\n    http-cookie was resolved to 1.0.3, which depends on\n      domain_name was resolved to 0.5.20170404, which depends on\n        unf was resolved to 0.1.4, which depends on\n          unf_ext\n</code></pre>\n\n<p>And then when I try and install unf_ext this happends</p>\n\n<pre><code>sudo gem install unf_ext -v '0.0.7.4'\nBuilding native extensions.  This could take a while...\nERROR:  Error installing unf_ext:\n    ERROR: Failed to build gem native extension.\n\n    current directory: /Library/Ruby/Gems/2.3.0/gems/unf_ext-0.0.7.4/ext/unf_ext\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/bin/ruby -r ./siteconf20170927-4629-13u5zrr.rb extconf.rb\nchecking for main() in -lstdc++... *** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/bin/$(RUBY_BASE_NAME)\n    --with-static-libstdc++\n    --without-static-libstdc++\n    --with-stdc++lib\n    --without-stdc++lib\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:456:in `try_do': The compiler failed to generate an executable file. (RuntimeError)\nYou have to install development tools first.\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:535:in `block in try_link0'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/tmpdir.rb:89:in `mktmpdir'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:532:in `try_link0'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:556:in `try_link'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:765:in `try_func'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:997:in `block in have_library'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:942:in `block in checking_for'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:350:in `block (2 levels) in postpone'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:320:in `open'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:350:in `block in postpone'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:320:in `open'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:346:in `postpone'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:941:in `checking_for'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/lib/ruby/2.3.0/mkmf.rb:992:in `have_library'\n    from extconf.rb:6:in `&lt;main&gt;'\n\nTo see why this extension failed to compile, please check the mkmf.log which can be found here:\n\n  /Library/Ruby/Gems/2.3.0/extensions/universal-darwin-17/2.3.0/unf_ext-0.0.7.4/mkmf.log\n\nextconf failed, exit code 1\n\nGem files will remain installed in /Library/Ruby/Gems/2.3.0/gems/unf_ext-0.0.7.4 for inspection.\nResults logged to /Library/Ruby/Gems/2.3.0/extensions/universal-darwin-17/2.3.0/unf_ext-0.0.7.4/gem_make.out\n</code></pre>\n\n<p>I have no idea what the issue is. I installed ruby and rbenv, but as soon as I installed the new MacOs I was unable to install any gems. </p>\n"}, {"tags": ["ruby", "build", "terminal", "installation", "failed-installation"], "comments": [{"owner": {"reputation": 6120, "user_id": 206401, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4b3d722df1b0c7ed6c352cff71006012?s=128&d=identicon&r=PG", "display_name": "AMIC MING", "link": "https://stackoverflow.com/users/206401/amic-ming"}, "edited": false, "score": 0, "creation_date": 1506538740, "post_id": 46453733, "comment_id": 79866166, "body": "Can you check this answer - <a href=\"https://stackoverflow.com/questions/39302619/missing-symbol-when-installing-ruby-2-3-0-on-os-x-10-11-6-by-rvm\" title=\"missing symbol when installing ruby 2 3 0 on os x 10 11 6 by rvm\">stackoverflow.com/questions/39302619/&hellip;</a>"}, {"owner": {"reputation": 305, "user_id": 6739894, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/z3jlF.jpg?s=128&g=1", "display_name": "fafafariba", "link": "https://stackoverflow.com/users/6739894/fafafariba"}, "reply_to_user": {"reputation": 6120, "user_id": 206401, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4b3d722df1b0c7ed6c352cff71006012?s=128&d=identicon&r=PG", "display_name": "AMIC MING", "link": "https://stackoverflow.com/users/206401/amic-ming"}, "edited": false, "score": 0, "creation_date": 1506539194, "post_id": 46453733, "comment_id": 79866407, "body": "Nope, it says it&#39;s already installed."}, {"owner": {"reputation": 570, "user_id": 85434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a8d34bac30bb67069a48bc9feb9c8d0d?s=128&d=identicon&r=PG", "display_name": "Scott", "link": "https://stackoverflow.com/users/85434/scott"}, "edited": false, "score": 0, "creation_date": 1508416469, "post_id": 46453733, "comment_id": 80607230, "body": "I use RVM and I got the same error."}], "answers": [{"comments": [{"owner": {"reputation": 570, "user_id": 85434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a8d34bac30bb67069a48bc9feb9c8d0d?s=128&d=identicon&r=PG", "display_name": "Scott", "link": "https://stackoverflow.com/users/85434/scott"}, "edited": false, "score": 1, "creation_date": 1508416350, "post_id": 46474477, "comment_id": 80607162, "body": "Why not accept this answer as correct? BTW, this worked for me!"}], "tags": [], "owner": {"reputation": 305, "user_id": 6739894, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/z3jlF.jpg?s=128&g=1", "display_name": "fafafariba", "link": "https://stackoverflow.com/users/6739894/fafafariba"}, "is_accepted": true, "score": 8, "last_activity_date": 1506617552, "creation_date": 1506617552, "answer_id": 46474477, "question_id": 46453733, "link": "https://stackoverflow.com/questions/46453733/build-failed-error-when-trying-to-install-ruby-2-4-2/46474477#46474477", "title": "BUILD FAILED Error When Trying to Install Ruby 2.4.2", "body": "<p>Figured it out. Error is resolved by running <code>xcode-select --install</code>.</p>\n\n<p>See <a href=\"https://github.com/Homebrew/homebrew-core/issues/4809\" rel=\"noreferrer\">https://github.com/Homebrew/homebrew-core/issues/4809</a></p>\n"}], "owner": {"reputation": 305, "user_id": 6739894, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/z3jlF.jpg?s=128&g=1", "display_name": "fafafariba", "link": "https://stackoverflow.com/users/6739894/fafafariba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 774, "favorite_count": 1, "accepted_answer_id": 46474477, "answer_count": 1, "score": 2, "last_activity_date": 1508367483, "creation_date": 1506532714, "last_edit_date": 1506538247, "question_id": 46453733, "link": "https://stackoverflow.com/questions/46453733/build-failed-error-when-trying-to-install-ruby-2-4-2", "title": "BUILD FAILED Error When Trying to Install Ruby 2.4.2", "body": "<p>I'm trying to install Ruby. I've already installed <code>rbenv</code>. After running the command\n<code>rbenv install 2.4.2</code></p>\n\n<p>I get the following message</p>\n\n<pre><code>BUILD FAILED (OS X 10.12.6 using ruby-build 20170914)\n\nInspect or clean up the working tree at /var/folders/7s/pm59xf21247gd16zvrxmjfkwz6thn7/T/ruby-build.20170927101212.49499\nResults logged to /var/folders/7s/pm59xf21247gd16zvrxmjfkwz6thn7/T/ruby-build.20170927101212.49499.log\n\nLast 10 log lines:\nGenerating RDoc documentation\ndyld: lazy symbol binding failed: Symbol not found: _utimensat\n  Referenced from: /private/var/folders/7s/pm59xf21247gd16zvrxmjfkwz6thn7/T/ruby-build.20170927101212.49499/ruby-2.4.2/./ruby\n  Expected in: /usr/lib/libSystem.B.dylib\n\ndyld: Symbol not found: _utimensat\n  Referenced from: /private/var/folders/7s/pm59xf21247gd16zvrxmjfkwz6thn7/T/ruby-build.20170927101212.49499/ruby-2.4.2/./ruby\n  Expected in: /usr/lib/libSystem.B.dylib\n\nmake: *** [rdoc] Abort trap: 6\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "rest-client", "http.rb"], "answers": [{"comments": [{"owner": {"reputation": 233, "user_id": 5754845, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3b8a0a203d05cc0b0e1122d10aa315ad?s=128&d=identicon&r=PG&f=1", "display_name": "bwatson30", "link": "https://stackoverflow.com/users/5754845/bwatson30"}, "edited": false, "score": 0, "creation_date": 1506532064, "post_id": 46453351, "comment_id": 79862692, "body": "That didn&#39;t work, same message.  I&#39;m so puzzled.  I had tried that earlier, too.  I just thought since it changed from $postfield to $itemsarray in the php example on their documentation I needed to make an &#39;itemsarray&#39;"}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 1, "last_activity_date": 1506531374, "creation_date": 1506531374, "answer_id": 46453351, "question_id": 46453190, "link": "https://stackoverflow.com/questions/46453190/api-post-with-array-using-http-gem-or-restclient/46453351#46453351", "title": "API POST with array using HTTP gem (or RestClient)", "body": "<p>To create a array in JSON you use an array in Ruby. Its that easy.</p>\n\n<pre><code>require 'json'\n\ndef self.submitorder   \n  req = HTTP.post(\"https://api.printaura.com/api.php\", :json =&gt; { \n        :key =&gt; APIKEY, \n        :hash =&gt; APIHASH, \n        :method =&gt; \"addorder\",\n        :businessname =&gt; \"this is a secret too\",\n        :businesscontact =&gt; \"thats a secret\",\n        :email =&gt; \"my@email.com\",\n        :your_order_id =&gt; \"1\",\n        :returnlabel =&gt; \"FakeAddress\",\n        :clientname =&gt; \"ShippingName\",\n        :address1 =&gt; \"ShippingAddressLine1\",\n        :address2 =&gt; \"ShippingAddressLine2\",\n        :city =&gt; \"ShippingCity\",\n        :state =&gt; \"ShippingState\",\n        :zip =&gt; \"ShippingZip\",\n        :country =&gt; \"US\",\n        :customerphone =&gt; \"dontcallme\",\n        :shipping_id =&gt; \"1\",\n        :items =&gt; [ \n           {\n             :product_id =&gt; 423,\n             :brand_id =&gt; 33,\n             :color_id =&gt; 498,\n             :size_id =&gt; 4,\n             :front_print =&gt; 1389517,\n             :front_mockup =&gt; 1390615,\n             :quantity =&gt; 1\n           }\n        ]\n    })\n\n  puts JSON.parse(req)\n</code></pre>\n\n<p>The API lists a <code>items</code> parameter which should contain an array of objects. It says nothing about <code>itemsarray</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 233, "user_id": 5754845, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3b8a0a203d05cc0b0e1122d10aa315ad?s=128&d=identicon&r=PG&f=1", "display_name": "bwatson30", "link": "https://stackoverflow.com/users/5754845/bwatson30"}, "is_accepted": true, "score": 2, "last_activity_date": 1506622023, "creation_date": 1506622023, "answer_id": 46475686, "question_id": 46453190, "link": "https://stackoverflow.com/questions/46453190/api-post-with-array-using-http-gem-or-restclient/46475686#46475686", "title": "API POST with array using HTTP gem (or RestClient)", "body": "<pre><code>def self.submitorder \n  itemsarray = { :items =&gt; [ { :product_id =&gt; 423, :brand_id =&gt; 33, :color_id =&gt; 498, :size_id =&gt; 4, :quantity =&gt; 1, :front_print =&gt; 1389517,\n        :front_mockup =&gt; 1390617 } ] }\n  req = HTTP.post(\"https://api.printaura.com/api.php\", :json =&gt; { \n    :key =&gt; APIKEY, \n    :hash =&gt; APIHASH, \n    :method =&gt; \"addorder\",\n    :businessname =&gt; \"this is a secret too\",\n    :businesscontact =&gt; \"thats a secret\",\n    :email =&gt; \"my@email.com\",\n    :your_order_id =&gt; \"1\",\n    :returnlabel =&gt; \"FakeAddress\",\n    :clientname =&gt; \"ShippingName\",\n    :address1 =&gt; \"ShippingAddressLine1\",\n    :address2 =&gt; \"ShippingAddressLine2\",\n    :city =&gt; \"ShippingCity\",\n    :state =&gt; \"ShippingState\",\n    :zip =&gt; \"ShippingZip\",\n    :country =&gt; \"US\",\n    :customerphone =&gt; \"dontcallme\",\n    :shipping_id =&gt; \"1\",\n    :items =&gt;  Base64.encode64(itemsarray.to_json)}\n)\n\n  puts JSON.parse(req)\n</code></pre>\n\n<p>I really hopes this helps somebody some years from now haha</p>\n"}], "owner": {"reputation": 233, "user_id": 5754845, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3b8a0a203d05cc0b0e1122d10aa315ad?s=128&d=identicon&r=PG&f=1", "display_name": "bwatson30", "link": "https://stackoverflow.com/users/5754845/bwatson30"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 654, "favorite_count": 0, "accepted_answer_id": 46475686, "answer_count": 2, "score": 0, "last_activity_date": 1506622023, "creation_date": 1506530760, "question_id": 46453190, "link": "https://stackoverflow.com/questions/46453190/api-post-with-array-using-http-gem-or-restclient", "title": "API POST with array using HTTP gem (or RestClient)", "body": "<p>I'm having trouble with this api and can't seem to get over the hump.  Using the <a href=\"https://github.com/httprb/http\" rel=\"nofollow noreferrer\">HTTP gem</a> (though I'm flexible and can use <a href=\"https://github.com/rest-client/rest-client\" rel=\"nofollow noreferrer\">RestClient</a> if that gets me an answer quicker!).  Anyway, I'm having trouble posting an array.  everything else is good, I just can't figure out this \"itemsarray\" in the printaura api found here in the addorder method: <a href=\"https://printaura.com/api/\" rel=\"nofollow noreferrer\">PrintAura API</a></p>\n\n<p>I'm running this:</p>\n\n<pre><code>def self.submitorder   \n  req = HTTP.post(\"https://api.printaura.com/api.php\", :json =&gt; { \n        :key =&gt; APIKEY, \n        :hash =&gt; APIHASH, \n        :method =&gt; \"addorder\",\n        :businessname =&gt; \"this is a secret too\",\n        :businesscontact =&gt; \"thats a secret\",\n        :email =&gt; \"my@email.com\",\n        :your_order_id =&gt; \"1\",\n        :returnlabel =&gt; \"FakeAddress\",\n        :clientname =&gt; \"ShippingName\",\n        :address1 =&gt; \"ShippingAddressLine1\",\n        :address2 =&gt; \"ShippingAddressLine2\",\n        :city =&gt; \"ShippingCity\",\n        :state =&gt; \"ShippingState\",\n        :zip =&gt; \"ShippingZip\",\n        :country =&gt; \"US\",\n        :customerphone =&gt; \"dontcallme\",\n        :shipping_id =&gt; \"1\",\n        :itemsarray =&gt; {:item =&gt; [ \n            :product_id =&gt; 423,\n            :brand_id =&gt; 33,\n            :color_id =&gt; 498,\n            :size_id =&gt; 4,\n            :front_print =&gt; 1389517,\n            :front_mockup =&gt; 1390615,\n            :quantity =&gt; 1\n          ]}\n\n    })\n\n  puts JSON.parse(req)\n\n\n\n\nend\n</code></pre>\n\n<p>And my output is this:</p>\n\n<pre><code>{\"status\"=&gt;false, \"error_code\"=&gt;19, \"result\"=&gt;19, \"message\"=&gt;\"You cannot place an order without items, Please fill the items array with all the required information. Full API documentation can be found at https:/www.printaura.com/api/\"}\n</code></pre>\n\n<p>Gosh, if someone could look at that and help me out I would forever appreciate it.  </p>\n"}, {"tags": ["ruby", "metaprogramming"], "answers": [{"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1506534899, "post_id": 46453647, "comment_id": 79864093, "body": "This adds an instance method to your class. I thought you wanted to add a method to <code>Abc</code>&#39;s singleton class?"}], "tags": [], "owner": {"reputation": 2237, "user_id": 2881939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/100000776760878/picture?type=large", "display_name": "Sanjay Salunkhe", "link": "https://stackoverflow.com/users/2881939/sanjay-salunkhe"}, "is_accepted": false, "score": 0, "last_activity_date": 1506532381, "creation_date": 1506532381, "answer_id": 46453647, "question_id": 46453177, "link": "https://stackoverflow.com/questions/46453177/metaprogramming-how-to-access-parameters-of-methods-inside-meta-classes/46453647#46453647", "title": "Metaprogramming: How to access parameters of methods inside meta classes", "body": "<p>Ok. got solution after some online debugging. Below is the solution</p>\n\n<pre><code>class Abc    \n  def add_method(name)    \n      meta_class = class &lt;&lt; self    \n        self\n      end\n      meta_class.class_eval do\n         define_method \"#{name}\" do \n\n         end    \n     end \n  end\nend\n\na = Module.const_get(\"Abc\").new\na.add_method(\"my_method\")\na.my_method\n</code></pre>\n"}], "owner": {"reputation": 2237, "user_id": 2881939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/100000776760878/picture?type=large", "display_name": "Sanjay Salunkhe", "link": "https://stackoverflow.com/users/2881939/sanjay-salunkhe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1506532381, "creation_date": 1506530731, "question_id": 46453177, "link": "https://stackoverflow.com/questions/46453177/metaprogramming-how-to-access-parameters-of-methods-inside-meta-classes", "title": "Metaprogramming: How to access parameters of methods inside meta classes", "body": "<p>I am learning ruby meta-programming's meta classes concept. i am trying to define method dynamically inside meta-class but the problem which i am facing is i am not able to access \"name\" inside meta-class.  </p>\n\n<p>Below is my code.</p>\n\n<pre><code>class Abc\n\n  def add_method(name) \n\n      class &lt;&lt; self  \n\n         define_method \"#{name}\" do \n\n         end \n\n      end \n  end\nend\n\na = Module.const_get(\"Abc\").new\na.add_method(\"my_method\")\na.my_method\n</code></pre>\n"}, {"tags": ["html", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": false, "score": 1, "last_activity_date": 1506532433, "creation_date": 1506532433, "answer_id": 46453660, "question_id": 46453073, "link": "https://stackoverflow.com/questions/46453073/embedded-ruby-not-showing-up-on-webpage/46453660#46453660", "title": "Embedded ruby not showing up on webpage", "body": "<p>You're using <code>&lt;%</code>, and when you need to use <code>&lt;%=</code>, on this line:</p>\n\n<pre><code>&lt;% form_for ([@podcast, @episode]) do |f| %&gt;\n</code></pre>\n\n<p>You're not outputting anything. <code>&lt;%</code> evalutes Ruby but doesn't render it, while <code>&lt;%=</code> evaluates Ruby and <em>sends the output to the browser</em>.</p>\n"}], "owner": {"reputation": 178, "user_id": 8684435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc5fdac724c570ba69346d50355819d?s=128&d=identicon&r=PG&f=1", "display_name": "WaterTrash", "link": "https://stackoverflow.com/users/8684435/watertrash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1506532433, "creation_date": 1506530330, "last_edit_date": 1506532297, "question_id": 46453073, "link": "https://stackoverflow.com/questions/46453073/embedded-ruby-not-showing-up-on-webpage", "title": "Embedded ruby not showing up on webpage", "body": "<p>I'm trying to create  new episode form for a podcast website and when I try to reload the page nothing happens and I get the error:</p>\n\n<pre><code>Started GET \"/podcasts/1/episodes/new\" for 127.0.0.1 at 2017-09-27 09:33:27 -0700\nProcessing by EpisodesController#new as HTML\n  Parameters: {\"podcast_id\"=&gt;\"1\"}\n  Podcast Load (0.1ms)  SELECT  \"podcasts\".* FROM \"podcasts\" WHERE \"podcasts\".\"id\" = ? LIMIT ?  [[\"id\", 1], [\"LIMIT\", 1]]\n  Rendering episodes/new.html.erb within layouts/application\n  Rendered episodes/new.html.erb within layouts/application (1.5ms)\n  Podcast Load (0.2ms)  SELECT  \"podcasts\".* FROM \"podcasts\" WHERE \"podcasts\".\"id\" = ? ORDER BY \"podcasts\".\"id\" ASC LIMIT ?  [[\"id\", 1], [\"LIMIT\", 1]]\nCompleted 200 OK in 25ms (Views: 21.3ms | ActiveRecord: 0.4ms)\n</code></pre>\n\n<p>This is my new.html.erb for my episode view:</p>\n\n<pre><code>&lt;h1&gt;New Episode&lt;/h1&gt;\n\n&lt;% form_for ([@podcast, @episode]) do |f| %&gt;\n  &lt;%= f.label :title %&gt; &lt;br&gt;\n  &lt;%= f.text_field :title %&gt;\n  &lt;br&gt;\n  &lt;br&gt;\n\n  &lt;%= f.label :description %&gt;\n  &lt;%= f.text_area :description %&gt;\n\n  &lt;%= f.submit %&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>This is my episodes_controller.rb file:</p>\n\n<pre><code>class EpisodesController &lt; ApplicationController\n  before_action :find_podcast\n  before_action :find_episode, only: [:show]\n\n  def new\n    @episode = @podcast.episodes.new\n  end\n\n  def create\n    @episode = @podcast.episodes.new episode_params\n    if @episode.save\n      redirect_to podcast_episode_path(@podcast)\n    else\n      render 'new'\n    end\n  end\n\n  private\n\n  def episode_params\n    params.require(:episode).permit(:title, :description)\n  end\n  def find_podcast\n    @podcast = Podcast.find(params[:podcast_id])\n  end\n\n  def find_episode\n    @episode = Episode.find(params[:id])\n  end\nend\n</code></pre>\n\n<p>Let me know if you need to see any other files.</p>\n"}, {"tags": ["ruby", "bundler", "watir"], "comments": [{"owner": {"reputation": 968, "user_id": 2226554, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/22287da4edff4cb0ba1ea1767d85a101?s=128&d=identicon&r=PG", "display_name": "Gaurav24", "link": "https://stackoverflow.com/users/2226554/gaurav24"}, "edited": false, "score": 0, "creation_date": 1508589573, "post_id": 46451707, "comment_id": 80674030, "body": "Try latest version of watir(<a href=\"https://rubygems.org/gems/watir/versions/6.8.4\" rel=\"nofollow noreferrer\">rubygems.org/gems/watir/versions/6.8.4</a>). Only runtime dependency for this is &quot;selenium-webdriver&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 13168, "user_id": 4725756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff02ffd62899a70a608571ec03d5a7b?s=128&d=identicon&r=PG&f=1", "display_name": "hspandher", "link": "https://stackoverflow.com/users/4725756/hspandher"}, "is_accepted": false, "score": 0, "last_activity_date": 1506526165, "creation_date": 1506526165, "answer_id": 46451802, "question_id": 46451707, "link": "https://stackoverflow.com/questions/46451707/how-to-update-gemfile-to-only-install-watir/46451802#46451802", "title": "how to update gemfile to only install watir", "body": "<p>Both are runtime dependencies of the <code>watir</code> gem, so of course, they would be installed automatically.</p>\n\n<blockquote>\n  <p><a href=\"https://rubygems.org/gems/watir/versions/5.0.0\" rel=\"nofollow noreferrer\">https://rubygems.org/gems/watir/versions/5.0.0</a></p>\n  \n  <p>Runtime Dependencies (2):</p>\n  \n  <p>commonwatir ~> 4</p>\n  \n  <p>watir-webdriver >= 0</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 4033242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1980d8c3fd94df367faa3dd2f2e66f6c?s=128&d=identicon&r=PG&f=1", "display_name": "edm", "link": "https://stackoverflow.com/users/4033242/edm"}, "edited": false, "score": 0, "creation_date": 1506527663, "post_id": 46451867, "comment_id": 79860186, "body": "Thanks justin for your response. Like what I posted in your blog, I want to use visible locators. Is there anything else to modify in my gemfile? thx"}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1506528234, "post_id": 46451867, "comment_id": 79860565, "body": "Watir 6+ requires Selenium 3+ so you&#39;d have to change or remove that line as well."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "reply_to_user": {"reputation": 57, "user_id": 4033242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1980d8c3fd94df367faa3dd2f2e66f6c?s=128&d=identicon&r=PG&f=1", "display_name": "edm", "link": "https://stackoverflow.com/users/4033242/edm"}, "edited": false, "score": 0, "creation_date": 1506534282, "post_id": 46451867, "comment_id": 79863794, "body": "@edmond, I think these changes should allow the usage of the :visible locator. If it doesn&#39;t let me know."}, {"owner": {"reputation": 57, "user_id": 4033242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1980d8c3fd94df367faa3dd2f2e66f6c?s=128&d=identicon&r=PG&f=1", "display_name": "edm", "link": "https://stackoverflow.com/users/4033242/edm"}, "edited": false, "score": 0, "creation_date": 1506564846, "post_id": 46451867, "comment_id": 79874981, "body": "Thank Titus and Justin for your prompt response. I updated my gems using bundle. However, updating to watir 6.0 raises an issues during executing scenarios. One issue thrown up is undefined method browser_name. <code>undefined method browser_name for :chrome:Symbol (NoMethodError)</code> Hence, I will roll back to watir 5.0. I will discuss with my team as to when we update to watir 6.0"}, {"owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "edited": false, "score": 0, "creation_date": 1506616736, "post_id": 46451867, "comment_id": 79903419, "body": "Suggest posting the code where that error pops up as a separate question here.  If you got that when moving from 5.x to 6.0 then likely others will have the same issue.  So it would be good to resolve what is causing it, and how to correct the error.   (trying to troubleshoot that in the comments thread to this question is the wrong place for that)"}], "tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 0, "last_activity_date": 1506527220, "last_edit_date": 1506527220, "creation_date": 1506526339, "answer_id": 46451867, "question_id": 46451707, "link": "https://stackoverflow.com/questions/46451707/how-to-update-gemfile-to-only-install-watir/46451867#46451867", "title": "how to update gemfile to only install watir", "body": "<p>Watir v5.0 is the last version of Watir where it was a meta gem for Watir-Webdriver and Watir-Classic. This is where commonwatir and watir-webdriver gems are dependencies. To remove them and only use Watir(-Webdriver), update the Watir gem to be the current 6.x release.</p>\n\n<p>In other words, change:</p>\n\n<pre><code>gem 'watir', '~&gt; 5.0', '&gt;= 5.0.0' \n</code></pre>\n\n<p>To:</p>\n\n<pre><code>gem 'watir', '~&gt; 6.0'\n</code></pre>\n\n<p>You probably should also remove (or at least update) the Selenium-WebDriver requirement. The current version of Watir is not going to work with Selenium-WebDriver v2.x. Given that Watir will already require Selenium, I don't think you need it in your gem file.</p>\n\n<pre><code>gem 'selenium-webdriver', '~&gt; 2.53', '&gt;= 2.53.1'\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 4033242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1980d8c3fd94df367faa3dd2f2e66f6c?s=128&d=identicon&r=PG&f=1", "display_name": "edm", "link": "https://stackoverflow.com/users/4033242/edm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 477, "favorite_count": 0, "accepted_answer_id": 46451867, "answer_count": 2, "score": 1, "last_activity_date": 1506527220, "creation_date": 1506525926, "question_id": 46451707, "link": "https://stackoverflow.com/questions/46451707/how-to-update-gemfile-to-only-install-watir", "title": "how to update gemfile to only install watir", "body": "<p>This is my gemfile:</p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'watir', '~&gt; 5.0', '&gt;= 5.0.0' \ngem 'watir-scroll'\ngem 'cucumber'\ngem 'rspec'\ngem 'page-object'\ngem 'require_all'\ngem 'selenium-webdriver', '~&gt; 2.53', '&gt;= 2.53.1'\ngem 'nokogiri', '~&gt; 1.6.8', '&gt;= 1.6.8.1'\ngem 'webdriver-user-agent', '~&gt; 7.1'\ngem 'headless'\ngem 'bundle', '~&gt; 0.0.1'\ngem 'appium_lib'\ngem 'rake'\ngem 'test-unit'\n</code></pre>\n\n<p>When I execute bundle install with this gemfile, I find watir-webdriver &amp; commonwatir are installed.</p>\n\n<p>I want to only want watir installed. \nI don't want watir-webdriver or commonwatir installed.</p>\n\n<p>How should I edit my gemfile?</p>\n\n<p>Thanks for your assistance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "is_accepted": false, "score": 0, "last_activity_date": 1506528392, "creation_date": 1506528392, "answer_id": 46452516, "question_id": 46451601, "link": "https://stackoverflow.com/questions/46451601/how-to-define-callbacks-like-simultaneous-setting-ids/46452516#46452516", "title": "How to define callbacks like simultaneous setting ids", "body": "<p>I think the name of your FK <code>high_price_company_id_id</code> is misleading. An option is to rename it to <code>highest_priced_project_id</code>.</p>\n\n<p>To update that FK you can define a callback in Company:</p>\n\n<pre><code>before_save do\n  self.highest_priced_project_id = self.projects.max_by(&amp;:price).id\nend\n</code></pre>\n"}], "owner": {"reputation": 713, "user_id": 975352, "user_type": "registered", "accept_rate": 16, "profile_image": "https://www.gravatar.com/avatar/79470d4708b9927990eb78650fb906ca?s=128&d=identicon&r=PG&f=1", "display_name": "Akira  Noguchi", "link": "https://stackoverflow.com/users/975352/akira-noguchi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 18, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1506528392, "creation_date": 1506525588, "question_id": 46451601, "link": "https://stackoverflow.com/questions/46451601/how-to-define-callbacks-like-simultaneous-setting-ids", "title": "How to define callbacks like simultaneous setting ids", "body": "<p>In my application containing companies and projects, these models are defined like this.</p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20170927135313) do\n\n  create_table \"companies\", force: :cascade do |t|\n    t.string \"name\"\n    t.integer \"high_price_company_id_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"high_price_company_id_id\"], name: \"index_companies_on_high_price_company_id_id\"\n  end\n\n  create_table \"projects\", force: :cascade do |t|\n    t.string \"name\"\n    t.integer \"price\"\n    t.integer \"company_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"company_id\"], name: \"index_projects_on_company_id\"\n  end\n\nend\n</code></pre>\n\n<p><code>high_price_company_id_id</code> is foreign key and indicate high price company record. I call <code>save</code> twice. But, It is a little bit wasteful, isn't it? How to define efficient call backs. I want to call <code>save</code> only once.</p>\n\n<pre><code>2.3.3 :001 &gt; company = Company.new\n =&gt; #&lt;Company id: nil, name: nil, high_price_company_id_id: nil, created_at: nil, updated_at: nil&gt; \n2.3.3 :002 &gt; 4.times {company.projects.new(price: rand(1..100))}\n =&gt; 4 \n2.3.3 :003 &gt; company.save\n   (0.1ms)  begin transaction\n  SQL (0.6ms)  INSERT INTO \"companies\" (\"created_at\", \"updated_at\") VALUES (?, ?)  [[\"created_at\", \"2017-09-27 15:12:54.852223\"], [\"updated_at\", \"2017-09-27 15:12:54.852223\"]]\n  SQL (0.4ms)  INSERT INTO \"projects\" (\"price\", \"company_id\", \"created_at\", \"updated_at\") VALUES (?, ?, ?, ?)  [[\"price\", 34], [\"company_id\", 1], [\"created_at\", \"2017-09-27 15:12:54.856119\"], [\"updated_at\", \"2017-09-27 15:12:54.856119\"]]\n  SQL (0.2ms)  INSERT INTO \"projects\" (\"price\", \"company_id\", \"created_at\", \"updated_at\") VALUES (?, ?, ?, ?)  [[\"price\", 77], [\"company_id\", 1], [\"created_at\", \"2017-09-27 15:12:54.859440\"], [\"updated_at\", \"2017-09-27 15:12:54.859440\"]]\n  SQL (0.2ms)  INSERT INTO \"projects\" (\"price\", \"company_id\", \"created_at\", \"updated_at\") VALUES (?, ?, ?, ?)  [[\"price\", 50], [\"company_id\", 1], [\"created_at\", \"2017-09-27 15:12:54.862167\"], [\"updated_at\", \"2017-09-27 15:12:54.862167\"]]\n  SQL (0.3ms)  INSERT INTO \"projects\" (\"price\", \"company_id\", \"created_at\", \"updated_at\") VALUES (?, ?, ?, ?)  [[\"price\", 91], [\"company_id\", 1], [\"created_at\", \"2017-09-27 15:12:54.863989\"], [\"updated_at\", \"2017-09-27 15:12:54.863989\"]]\n   (2.8ms)  commit transaction\n =&gt; true \n2.3.3 :004 &gt; max_price_proj = company.projects.maximum(:price)\n   (0.4ms)  SELECT MAX(\"projects\".\"price\") FROM \"projects\" WHERE \"projects\".\"company_id\" = ?  [[\"company_id\", 1]]\n =&gt; 91 \n2.3.3 :005 &gt; company.high_price_company_id_id = max_price_proj\n =&gt; 91 \n2.3.3 :006 &gt; company.save\n   (0.1ms)  begin transaction\n  SQL (2.2ms)  UPDATE \"companies\" SET \"high_price_company_id_id\" = ?, \"updated_at\" = ? WHERE \"companies\".\"id\" = ?  [[\"high_price_company_id_id\", 91], [\"updated_at\", \"2017-09-27 15:13:30.411374\"], [\"id\", 1]]\n   (2.7ms)  commit transaction\n =&gt; true \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "ruby-on-rails-5", "pg"], "comments": [{"owner": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "edited": false, "score": 0, "creation_date": 1506525438, "post_id": 46451472, "comment_id": 79858681, "body": "I always receive this error when I actually access the database with another application at the same time. This is typically pgAdmin."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1506525454, "post_id": 46451472, "comment_id": 79858697, "body": "Do you have the rails server or console running?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1506527005, "post_id": 46451472, "comment_id": 79859764, "body": "Side note, but it&#39;s not advised to upgrade directly from <code>4.2.x</code> to <code>5.1.x</code>. You&#39;ll probably find it easier to upgrade to <code>5.0.x</code> first. Your question makes it sound like a new bug specific to <code>5.1.4</code>, but (if this is even a rails config error/bug at all!!) it could have been caused by <i>any</i> of the incremental versions in between."}, {"owner": {"reputation": 516, "user_id": 249132, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/56d11c3a51c280f6560424bb267076d8?s=128&d=identicon&r=PG", "display_name": "lpdahito", "link": "https://stackoverflow.com/users/249132/lpdahito"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1506532578, "post_id": 46451472, "comment_id": 79862947, "body": "@max I don&#39;t but even if I did, the script provided here allowed me to run the task. <a href=\"https://stackoverflow.com/questions/2369744/rails-postgres-drop-error-database-is-being-accessed-by-other-users\" title=\"rails postgres drop error database is being accessed by other users\">stackoverflow.com/questions/2369744/&hellip;</a>"}, {"owner": {"reputation": 640, "user_id": 2326613, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5f0821b3c32c0537c027a657ec7e977b?s=128&d=identicon&r=PG", "display_name": "JosephK", "link": "https://stackoverflow.com/users/2326613/josephk"}, "edited": false, "score": 0, "creation_date": 1591800310, "post_id": 46451472, "comment_id": 110195005, "body": "gem pgreset was the only thing that worked for me - ps, etc could find no such connection."}], "answers": [{"tags": [], "owner": {"reputation": 2372, "user_id": 8478218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0tjM.jpg?s=128&g=1", "display_name": "krishnar", "link": "https://stackoverflow.com/users/8478218/krishnar"}, "is_accepted": false, "score": 0, "last_activity_date": 1506528756, "creation_date": 1506528756, "answer_id": 46452619, "question_id": 46451472, "link": "https://stackoverflow.com/questions/46451472/unable-to-make-rake-dbdrop-work-in-development-with-rails-5-1-4/46452619#46452619", "title": "Unable to make &#39;rake db:drop&#39; work in development with Rails 5.1.4", "body": "<p><strong>Why ?</strong></p>\n\n<p><strong><em>database \"myapp_development\" is being accessed by other users</em>.</strong> </p>\n\n<p>You will get this error if your database is being opened either in console i.e <em>rails c</em> or <em>rails s</em> or any other mode.</p>\n\n<p><strong>Solution</strong></p>\n\n<p>1.Close console wherever you opened rails c or stop server if running</p>\n\n<p>2.If you are unable to find console or server running i.e if everything closed still you are gettin error. Then try to close running process using below command</p>\n\n<pre><code>ps -au\n</code></pre>\n\n<p>This command will show all running processes.Just find keyword rails c/localhost/postgres.You can also filter processes using grep command like this</p>\n\n<pre><code>ps -au | grep 'rails c'\n</code></pre>\n\n<p>And kill the process using below command</p>\n\n<p><code>kill -9 PID_NUMBER</code>         // PID NUMBER you will find in second column when you run ps -au.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8684896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b08f1fae6e8c5d41d610ce439d2d7e9?s=128&d=identicon&r=PG&f=1", "display_name": "muktesh", "link": "https://stackoverflow.com/users/8684896/muktesh"}, "is_accepted": false, "score": 1, "last_activity_date": 1511870410, "last_edit_date": 1592644375, "creation_date": 1506535182, "answer_id": 46454377, "question_id": 46451472, "link": "https://stackoverflow.com/questions/46451472/unable-to-make-rake-dbdrop-work-in-development-with-rails-5-1-4/46454377#46454377", "title": "Unable to make &#39;rake db:drop&#39; work in development with Rails 5.1.4", "body": "<p>To drop your database your database should not be accessed by any application.</p>\n<p>\nThis error tells that </p>\n<p>\n 1. you are using rails console which is using database  OR,<br>\n 2. you are using some tools tool postico,pgadmin, mysql workbench which is\n    accessing database OR <br>\n 3. you are using IDE like rubymine and accessing\n    database via it OR <br>\n 4. there is sidekiq or any other background job\n    server running which accessing it.<br>\n</p>\n<p><strong>Solution</strong>:<br>\nBefore dropping database take care of following things<br>\nexit all rails console,<br>\nclose database tools like mysql workbench,pgadmin<br>\nclose database tabs in IDE <br>\nstop sidekiq or any other background job<br></p>\n"}, {"tags": [], "owner": {"reputation": 412, "user_id": 4779465, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/rxj3q.png?s=128&g=1", "display_name": "Prasanth_Rubyist", "link": "https://stackoverflow.com/users/4779465/prasanth-rubyist"}, "is_accepted": false, "score": 3, "last_activity_date": 1506536552, "creation_date": 1506536552, "answer_id": 46454747, "question_id": 46451472, "link": "https://stackoverflow.com/questions/46451472/unable-to-make-rake-dbdrop-work-in-development-with-rails-5-1-4/46454747#46454747", "title": "Unable to make &#39;rake db:drop&#39; work in development with Rails 5.1.4", "body": "<p>Can you try to restart your DB, \nFor postgres</p>\n\n<blockquote>\n  <p>sudo service postgresql restart</p>\n</blockquote>\n\n<p>then try \nrails db:drop / rake db:drop, maybe it will work</p>\n"}, {"tags": [], "owner": {"reputation": 5470, "user_id": 2052097, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/KOzAT.jpg?s=128&g=1", "display_name": "z atef", "link": "https://stackoverflow.com/users/2052097/z-atef"}, "is_accepted": false, "score": 0, "last_activity_date": 1518978734, "creation_date": 1518978734, "answer_id": 48855181, "question_id": 46451472, "link": "https://stackoverflow.com/questions/46451472/unable-to-make-rake-dbdrop-work-in-development-with-rails-5-1-4/48855181#48855181", "title": "Unable to make &#39;rake db:drop&#39; work in development with Rails 5.1.4", "body": "<p>It means that the database is being used by a user other than the one attempting to drop the table. The user attempting to drop the table is the one specified in <code>config/database.yml</code> </p>\n\n<p>To see how that is, do: </p>\n\n<pre><code>za:myapp za$ cat config/database.yml | grep username\n  #username: myapp\n  # The password associated with the postgres role (username).\n  username: myapp\n</code></pre>\n\n<p>Make sure that no other user is connected to the database while you are trying to drop it. In my case, another user \"za\" was connected to the database. I killed the session of that user and all went well. </p>\n\n<pre><code>za:myapp za$ rails db:drop\nDropped database 'myapp_development'\nDropped database 'myapp_test'\n</code></pre>\n\n<p>Back to work, create and then migrate: </p>\n\n<pre><code>za:myapp za$ rake db:create\nza:myapp za$ rake db:migrate\nRubyDep: WARNING: (To disable warnings, see:http://github.com/e2/ruby_dep/wiki/Disabling-warnings )\n== 20180218181904 DeviseCreateUsers: migrating ================================\n-- create_table(:users)\n   -&gt; 0.0286s\n-- add_index(:users, :email, {:unique=&gt;true})\n   -&gt; 0.0183s\n-- add_index(:users, :reset_password_token, {:unique=&gt;true})\n   -&gt; 0.0036s\n== 20180218181904 DeviseCreateUsers: migrated (0.0507s) =======================\n</code></pre>\n"}], "owner": {"reputation": 516, "user_id": 249132, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/56d11c3a51c280f6560424bb267076d8?s=128&d=identicon&r=PG", "display_name": "lpdahito", "link": "https://stackoverflow.com/users/249132/lpdahito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2985, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1518978734, "creation_date": 1506525188, "question_id": 46451472, "link": "https://stackoverflow.com/questions/46451472/unable-to-make-rake-dbdrop-work-in-development-with-rails-5-1-4", "title": "Unable to make &#39;rake db:drop&#39; work in development with Rails 5.1.4", "body": "<p><br />\nI'm no longer able to rake db:drop since I upgraded from Rails 4.2 to Rails 5.1.4.<br />\nI get the following error message whenever I try to run the task:</p>\n\n<pre><code>PG::ObjectInUse: ERROR:  database \"myapp_development\" is being \naccessed by other users\nDETAIL:  There is 1 other session using the database.\n: DROP DATABASE IF EXISTS \"myapp_development\"\nCouldn't drop database 'myapp_development'\nrails aborted!\nActiveRecord::StatementInvalid: PG::ObjectInUse: ERROR:  database \n\"myapp_development\" is being accessed by other users\nDETAIL:  There is 1 other session using the database.\n: DROP DATABASE IF EXISTS \"myapp_development\"\n</code></pre>\n\n<p>I used to make it work with this hack:<br />\n<a href=\"https://stackoverflow.com/questions/2369744/rails-postgres-drop-error-database-is-being-accessed-by-other-users\">Rails + Postgres drop error: database is being accessed by other users</a></p>\n\n<p>Now, when I integrate this solution into my application, I get another error message:</p>\n\n<pre><code>FATAL:  terminating connection due to administrator command\nserver closed the connection unexpectedly\n    This probably means the server terminated abnormally\n    before or while processing the request.\nCouldn't drop database 'myapp_development'\nrails aborted!\nPG::AdminShutdown: FATAL:  terminating connection due to \nadministrator command\nserver closed the connection unexpectedly\n    This probably means the server terminated abnormally\n    before or while processing the request.\n</code></pre>\n\n<p>Do you guys have a fix for this issue?<br />\nBtw, I'm running Postgres 9.6, ruby 2.4.2 and Rails 5.1.4.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "localization", "numbers", "encode"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1506523914, "post_id": 46450739, "comment_id": 79857663, "body": "What is the input? If its a form you can set <code>accept-charset=&quot;UTF-8&quot;</code> to ensure that the inputs are treated as UTF-8."}, {"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1506524197, "post_id": 46450739, "comment_id": 79857840, "body": "as i mention above inputs are in arabic digits"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1506524241, "post_id": 46450739, "comment_id": 79857871, "body": "Yes but from where?"}, {"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1506524470, "post_id": 46450739, "comment_id": 79858030, "body": "form textfield..."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1506529723, "post_id": 46450739, "comment_id": 79861465, "body": "<code>force_encoding</code> won&#39;t fix your encoding if it&#39;s flat-out wrong in the first place. Check your bytes to be sure you&#39;re getting the right data. For what it&#39;s worth <code>params[:query].force_encoding(&#39;utf-8&#39;).encode.tr(&#39;\u0660\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669&zwnj;&#8203;&#39;,&#39;0123456789&#39;).dele&zwnj;&#8203;te(&quot; &quot;)</code> is fine. Don&#39;t chain methods like <code>tr!</code> as they often return <code>nil</code>. Instead assign the result to something."}, {"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 3, "creation_date": 1506530102, "post_id": 46450739, "comment_id": 79861676, "body": "&quot;how can I convert this?&quot; convert what to what, does that <code>force_encoding</code> line still throw the same error, or the digits aren&#39;t being replaced as you expected or?"}, {"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "reply_to_user": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1506548684, "post_id": 46450739, "comment_id": 79870959, "body": "@SimpleLime i mention in question , my purpose is to convert arabic digits into integers. I show all issues in doing that"}, {"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1506548746, "post_id": 46450739, "comment_id": 79870988, "body": "i want to convert this string str = &quot;lexus/yr_\u0662\u0660\u0660\u0661_\u0662\u0660\u0660\u0666&quot; into &quot;lexus/yr_2001_2006&quot;"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1506577344, "post_id": 46450739, "comment_id": 79878164, "body": "<i>Sidenote:</i> don\u2019t use banged versions of methods unless you fully understand the circumstances and really <i>want to mutate</i> the original objects. BTW, using unbanged versions in your second approach would solve an isuue."}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1506577217, "post_id": 46457304, "comment_id": 79878101, "body": "\u201cASCII 8-bit is not really an encoding\u201d\u2014what? Even ASCII 7-bit is <i>really</i> an encoding. Try <code>&quot;foo&quot;.force_encoding(Encoding::ASCII_8BIT).encoding #\u21d2  #&lt;Encoding:ASCII-8BIT&gt;</code>. This encoding was used since AD and is literally the same as <code>Latin1</code>."}, {"owner": {"reputation": 684, "user_id": 6607918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rL2uz.png?s=128&g=1", "display_name": "Stuart", "link": "https://stackoverflow.com/users/6607918/stuart"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1506590359, "post_id": 46457304, "comment_id": 79885759, "body": "Open to correction, but my understanding is as follows: ASCII 8-bit infers that you COULD BE dealing with binary data, i.e. raw bytes, and not only text-based data.  I concede if you can guarantee you have only 7-bit characters in your ASCII 8-bit data then it&#39;s fine because any 7-bit ASCII is valid UTF-8, correct? Perhaps I should have said: ASCII 8-bit is not really a valid &quot;text-only encoding&quot;?"}], "tags": [], "owner": {"reputation": 684, "user_id": 6607918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rL2uz.png?s=128&g=1", "display_name": "Stuart", "link": "https://stackoverflow.com/users/6607918/stuart"}, "is_accepted": false, "score": 4, "last_activity_date": 1506546783, "creation_date": 1506546783, "answer_id": 46457304, "question_id": 46450739, "link": "https://stackoverflow.com/questions/46450739/how-to-convert-arabic-digits-to-numeric-in-ruby/46457304#46457304", "title": "How to convert arabic digits to numeric in ruby", "body": "<p>If you have enforced UTF-8 encoding then this should work fine.</p>\n\n<p><code>str = \"lexus/yr_\u0662\u0660\u0660\u0661_\u0662\u0660\u0660\u0666\"</code></p>\n\n<p><code>str.tr('\u0660\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669','0123456789')</code></p>\n\n<p>returns <code>\"lexus/yr_2001_2006\"</code></p>\n\n<p>ASCII 8-bit is not really an encoding.  It is binary data, not something text based.  Transcoding ASCII 8-bit to UTF-8 is not a meaningful operation.  I would recommend ensuring that the request that passes the <code>query</code> parameter through your textfield is using valid string encoding, if you can control this.  You can use <code>String#valid_encoding?</code> method in ruby to check you are receiving a correctly encoded string.</p>\n"}], "owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1506546783, "creation_date": 1506523170, "question_id": 46450739, "link": "https://stackoverflow.com/questions/46450739/how-to-convert-arabic-digits-to-numeric-in-ruby", "title": "How to convert arabic digits to numeric in ruby", "body": "<p>Params include arabic digits also which I want to convert it into digits:-</p>\n\n<pre><code>\"lexus/yr_\u0662\u0660\u0660\u0661_\u0662\u0660\u0660\u0666\"\n</code></pre>\n\n<p>I tried this one</p>\n\n<pre><code>params[:query].tr!('\u0660\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669','0123456789').delete!(\" \")\n</code></pre>\n\n<p>but it gives an error </p>\n\n<pre><code>Encoding::CompatibilityError Exception: incompatible character encodings: UTF-8 and ASCII-8BIT\n</code></pre>\n\n<p>for that I do </p>\n\n<pre><code>params[:query].force_encoding('utf-8').encode.tr!('\u0660\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669','0123456789').delete!(\" \")\n</code></pre>\n\n<p>how I can convert this?</p>\n"}, {"tags": ["ruby", "puma", "macos-high-sierra", "webpacker"], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 2765583, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df3f546524d9485f8a7d2fc4dcc0458c?s=128&d=identicon&r=PG&f=1", "display_name": "heber gentilin", "link": "https://stackoverflow.com/users/2765583/heber-gentilin"}, "edited": false, "score": 0, "creation_date": 1507176309, "post_id": 46452728, "comment_id": 80108333, "body": "Did you found out what could be the problem with the older webpacker version?"}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "reply_to_user": {"reputation": 135, "user_id": 2765583, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df3f546524d9485f8a7d2fc4dcc0458c?s=128&d=identicon&r=PG&f=1", "display_name": "heber gentilin", "link": "https://stackoverflow.com/users/2765583/heber-gentilin"}, "edited": false, "score": 1, "creation_date": 1507188716, "post_id": 46452728, "comment_id": 80113124, "body": "@hebergentilin Hey! I only found issue on github where contributors says that they specially publish new version of webpacker for high sierra"}], "tags": [], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "is_accepted": true, "score": 6, "last_activity_date": 1508406237, "last_edit_date": 1508406237, "creation_date": 1506529115, "answer_id": 46452728, "question_id": 46449891, "link": "https://stackoverflow.com/questions/46449891/operation-timed-out-high-sierra/46452728#46452728", "title": "Operation timed out - High Sierra", "body": "<p>So, to solve this issue is just needed to add the Github repository in your Gemfile and run <code>bundle update</code>:</p>\n\n<pre><code>gem 'webpacker', github: 'rails/webpacker'\n</code></pre>\n"}], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 421, "favorite_count": 1, "accepted_answer_id": 46452728, "answer_count": 1, "score": 3, "last_activity_date": 1508406237, "creation_date": 1506520868, "question_id": 46449891, "link": "https://stackoverflow.com/questions/46449891/operation-timed-out-high-sierra", "title": "Operation timed out - High Sierra", "body": "<p>Guys, so, yesterday I was upgrade to High Sierra.</p>\n\n<p>After that - I can't start my project cause this error:</p>\n\n<pre><code>2017-09-27 16:52:48 +0300: Rack app error handling request { GET /unauthenticated }\n#&lt;Errno::ETIMEDOUT: Operation timed out - user specified timeout&gt;\n</code></pre>\n\n<p>with next logs:</p>\n\n<pre><code>/Users/alex/.rvm/rubies/ruby-2.4.1/lib/ruby/2.4.0/socket.rb:61:in `connect_internal'\n/Users/alex/.rvm/rubies/ruby-2.4.1/lib/ruby/2.4.0/socket.rb:137:in `connect'\n/Users/alex/.rvm/rubies/ruby-2.4.1/lib/ruby/2.4.0/socket.rb:627:in `block in tcp'\n/Users/alex/.rvm/rubies/ruby-2.4.1/lib/ruby/2.4.0/socket.rb:227:in `each'\n/Users/alex/.rvm/rubies/ruby-2.4.1/lib/ruby/2.4.0/socket.rb:227:in `foreach'\n/Users/alex/.rvm/rubies/ruby-2.4.1/lib/ruby/2.4.0/socket.rb:617:in `tcp'\n/Users/alex/.rvm/gems/ruby-2.4.1/gems/webpacker-3.0.1/lib/webpacker/dev_server.rb:9:in `running?'\n/Users/alex/.rvm/gems/ruby-2.4.1/gems/webpacker-3.0.1/lib/webpacker/dev_server_proxy.rb:7:in `rewrite_response'\n/Users/alex/.rvm/gems/ruby-2.4.1/gems/rack-proxy-0.6.2/lib/rack/proxy.rb:57:in `call'\n/Users/alex/.rvm/gems/ruby-2.4.1/gems/railties-5.1.4/lib/rails/engine.rb:522:in `call'\n/Users/alex/.rvm/gems/ruby-2.4.1/gems/puma-3.10.0/lib/puma/configuration.rb:225:in `call'\n/Users/alex/.rvm/gems/ruby-2.4.1/gems/puma-3.10.0/lib/puma/server.rb:605:in `handle_request'\n/Users/alex/.rvm/gems/ruby-2.4.1/gems/puma-3.10.0/lib/puma/server.rb:437:in `process_client'\n/Users/alex/.rvm/gems/ruby-2.4.1/gems/puma-3.10.0/lib/puma/server.rb:301:in `block in run'\n/Users/alex/.rvm/gems/ruby-2.4.1/gems/puma-3.10.0/lib/puma/thread_pool.rb:120:in `block in spawn_thread'\n</code></pre>\n\n<p>Is there someone ho already fixed it for himself?</p>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1506520762, "post_id": 46449699, "comment_id": 79855391, "body": "What does your test structure look like? Do you only have <b>one</b> test file, called <code>spec.rb</code>? (What&#39;s in the file?) Or, do you have a whole folder of tests, organised like <code>spec&#47;path&#47;to&#47;files&#47;something_spec.rb</code>?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1506520825, "post_id": 46449699, "comment_id": 79855437, "body": "It <i>looks like</i> you only have one <code>spec.rb</code> file which contains the line: <code>require &#39;rspec&#47;autorun&#39;</code>. In which case, all you need to do is delete that line!"}, {"owner": {"reputation": 3465, "user_id": 5946118, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/CbjEl.jpg?s=128&g=1", "display_name": "Rajkaran Mishra", "link": "https://stackoverflow.com/users/5946118/rajkaran-mishra"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1506520897, "post_id": 46449699, "comment_id": 79855485, "body": "You are correct, deleting that line works. Thanks!"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1506533638, "post_id": 46449699, "comment_id": 79863484, "body": "if you run <code>rspec --init</code> it will generate a spec/ folder including spec_helper.rb"}], "owner": {"reputation": 3465, "user_id": 5946118, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/CbjEl.jpg?s=128&g=1", "display_name": "Rajkaran Mishra", "link": "https://stackoverflow.com/users/5946118/rajkaran-mishra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 219, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1506520381, "creation_date": 1506520381, "question_id": 46449699, "link": "https://stackoverflow.com/questions/46449699/where-is-spec-helper-rb-file-located", "title": "Where is spec_helper.rb file located?", "body": "<p>I was trying to run the tests using <code>rspec spec.rb</code></p>\n\n<p>But it is giving me following warning:</p>\n\n<pre><code>Deprecation Warnings:\n\nRequiring `rspec/autorun` when running RSpec via the `rspec` command is deprecated.\n</code></pre>\n\n<p>I found the <a href=\"https://github.com/dchelimsky/rspec/issues/68\" rel=\"nofollow noreferrer\">issue</a> and to suppress this I need to delete <code>require 'rspec/autorun'</code> from <code>spec_helper.rb</code></p>\n\n<p>As I am not using Rails, there is no such file, how should I fix this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "nginx", "passenger"], "comments": [{"owner": {"reputation": 1472, "user_id": 2567424, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/cf84c50fc86c32c8db69ad465fb58653?s=128&d=identicon&r=PG", "display_name": "rogelio", "link": "https://stackoverflow.com/users/2567424/rogelio"}, "edited": false, "score": 0, "creation_date": 1506521595, "post_id": 46449396, "comment_id": 79855988, "body": "where are located the pg credentials? directly from database.yml, ENV vars or in your (nginx) server block?"}, {"owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "reply_to_user": {"reputation": 1472, "user_id": 2567424, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/cf84c50fc86c32c8db69ad465fb58653?s=128&d=identicon&r=PG", "display_name": "rogelio", "link": "https://stackoverflow.com/users/2567424/rogelio"}, "edited": false, "score": 0, "creation_date": 1506522627, "post_id": 46449396, "comment_id": 79856706, "body": "@rogelio the pg files are in <code>etc&#47;postgresql&#47;9.5&#47;main$ </code>  I added the <code>database.yml</code>to the question"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1506523387, "post_id": 46449396, "comment_id": 79857258, "body": "Can you connect to PG with <code>psql -h localhost</code> from the shell? Also allowing any IP to connect to PG sounds like a really bad idea. You could use a UNIX socket instead of TCP/IP by setting <code>host: &#39;&#47;var&#47;run&#47;postgresql&#39;</code> in <code>database.yml</code>."}, {"owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1506523584, "post_id": 46449396, "comment_id": 79857415, "body": "@max  no when I do <code>psql -h localhost</code> I get this msg <code>psql: could not connect to server: Connection refused \tIs the server running on host &quot;localhost&quot; (127.0.0.1) and accepting \tTCP&#47;IP connections on port 5432?</code>    Do you mean I just have to replace <code>host: 127.0.0.1</code> with <code>host: &#39;&#47;var&#47;run&#47;postgresql&#39;</code>in the database.yml?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1506524373, "post_id": 46449396, "comment_id": 79857958, "body": "Yeah provided that you can connect via a socket at <code>&#47;var&#47;run&#47;postgresql</code>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1506525053, "post_id": 46449396, "comment_id": 79858441, "body": "You should not have to do anything with the <code>postgresql.conf</code> though. Rails will connect fine with the default <code>listen_addresses = &#39;localhost&#39;</code> unless you are using a very out of date version of the <code>pg</code> gem or the old deprechiated <code>postgres</code> gem instead. I would start with a fresh <code>postgresql.conf</code> or clean reinstall postgres with apt-get or whatever package manager is in place. Be very wary of following the advise of any blog or page without a published date as it can be badly out of date."}, {"owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1506529246, "post_id": 46449396, "comment_id": 79861185, "body": "@max I changed the <code>listen_addresses = &#39;*&#39;</code> ` &#39;localhost&#39;<code>,  and replaced </code>host: 127.0.0.1 with host: &#39;/var/run/postgresql&#39;` in the <code>database.yml</code>.  I restarted PG and NGINX, now the error has changed into <code>PG::ConnectionBad: could not connect to server: No such file or directory \tIs the server running locally and accepting \tconnections on Unix domain socket &quot;&#47;var&#47;run&#47;postgresql&#47;.s.PGSQL.5432&quot;?</code>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1506529955, "post_id": 46449396, "comment_id": 79861601, "body": "Does <code>psql -h localhost</code> work? In that case you can use <code>host: &#39;localhost&#39;</code> instead of the socket."}, {"owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "edited": false, "score": 0, "creation_date": 1506530253, "post_id": 46449396, "comment_id": 79861750, "body": "<code>psql -h localhost</code> gives me the error : <code>psql: could not connect to server: Connection refused \tIs the server running on host &quot;localhost&quot; (127.0.0.1) and accepting \tTCP&#47;IP connections on port 5432?</code>  If I do a fresh re-install of postgres, what will happen to my Database? It can&#39;t be delete it as well if I re-install"}], "answers": [{"comments": [{"owner": {"reputation": 359, "user_id": 8710047, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-e0nl4yIc1FI/AAAAAAAAAAI/AAAAAAAANzM/GIvm8GwjhY0/photo.jpg?sz=128", "display_name": "Lucas Silveira", "link": "https://stackoverflow.com/users/8710047/lucas-silveira"}, "edited": false, "score": 0, "creation_date": 1542367492, "post_id": 46461648, "comment_id": 93552484, "body": "the rm command sounds good, but I&#39;ve restarted my Postgres with brew"}], "tags": [], "owner": {"reputation": 759, "user_id": 5266581, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-4WBTC_1yMB8/AAAAAAAAAAI/AAAAAAAAACI/pCGef6nYJik/photo.jpg?sz=128", "display_name": "Engr.Tanbir Hasan", "link": "https://stackoverflow.com/users/5266581/engr-tanbir-hasan"}, "is_accepted": false, "score": 1, "last_activity_date": 1506576803, "creation_date": 1506576803, "answer_id": 46461648, "question_id": 46449396, "link": "https://stackoverflow.com/questions/46449396/pgconnectionbad-could-not-connect-to-server-after-deploying-rails-app-using/46461648#46461648", "title": "PG::ConnectionBad: could not connect to server: after deploying rails app using passenger, nginx and capistrano", "body": "<p><code>rm /usr/local/var/postgres/postmaster.pid</code></p>\n\n<p>Restart Postgresql</p>\n\n<p><code>sudo service postgresql restart</code></p>\n"}, {"tags": [], "owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "is_accepted": true, "score": 0, "last_activity_date": 1506617377, "creation_date": 1506617377, "answer_id": 46474424, "question_id": 46449396, "link": "https://stackoverflow.com/questions/46449396/pgconnectionbad-could-not-connect-to-server-after-deploying-rails-app-using/46474424#46474424", "title": "PG::ConnectionBad: could not connect to server: after deploying rails app using passenger, nginx and capistrano", "body": "<p>Finally I managed to fix my problem, after following the answer provided here : <a href=\"https://askubuntu.com/questions/810008/after-upgrade-14-04-to-16-04-1-postgresql-server-does-not-start\">https://askubuntu.com/questions/810008/after-upgrade-14-04-to-16-04-1-postgresql-server-does-not-start</a></p>\n\n<p>and then do the modifycations provided here : <a href=\"https://gist.github.com/GabLeRoux/0c60f9be0c28b6b41f64cb55474b0ccb\" rel=\"nofollow noreferrer\">https://gist.github.com/GabLeRoux/0c60f9be0c28b6b41f64cb55474b0ccb</a> </p>\n\n<p>May app is up and running again...</p>\n"}], "owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2769, "favorite_count": 0, "accepted_answer_id": 46474424, "answer_count": 2, "score": 0, "last_activity_date": 1506617377, "creation_date": 1506519532, "last_edit_date": 1506523387, "question_id": 46449396, "link": "https://stackoverflow.com/questions/46449396/pgconnectionbad-could-not-connect-to-server-after-deploying-rails-app-using", "title": "PG::ConnectionBad: could not connect to server: after deploying rails app using passenger, nginx and capistrano", "body": "<p>After a resent deploy of a <code>Rails</code>application to a <code>Ubuntu 16.04.1 x64</code> <code>VPS</code> the server is not able to start.  Since yesterday I've been trying to solve why, but without any luck. Now I'm totally helpless and out of options.</p>\n\n<p>The deploy stops at: </p>\n\n<p><code>deploy:migrating\n      01 $HOME/.rbenv/bin/rbenv exec bundle exec rake db:migrate\n      01 rake aborted!\n      01 PG::ConnectionBad: could not connect to server: Connection refused\n      01    Is the server running on host \"127.0.0.1\" and accepting\n      01    TCP/IP connections on port 5432?</code></p>\n\n<p>Because of this error messages I've changed the settings in the <code>pg_hba.conf</code> and the <code>postgresql.conf</code> to the following examples according to this article <a href=\"http://www.railszilla.com/postgresql-tcpip-connections-port-5432/coffee-break\" rel=\"nofollow noreferrer\">http://www.railszilla.com/postgresql-tcpip-connections-port-5432/coffee-break</a></p>\n\n<pre><code>`pg_hba.conf`\n# Database administrative login by Unix domain socket\nlocal   all             postgres                                peer\n\n# TYPE  DATABASE        USER            ADDRESS                 METHOD\n\n# \"local\" is for Unix domain socket connections only\nlocal   all             all                                     md5\n# IPv4 local connections:\nhost    all             all             0.0.0.0/0       trust\n# IPv6 local connections:\nhost    all             all             ::1/128                 md5\n# Allow replication connections from localhost, by a user with the\n# replication privilege.\n#local   replication     postgres                                peer\n#host    replication     postgres        127.0.0.1/32            md5\n#host    replication     postgres        ::1/128                 md5\n</code></pre>\n\n<p>And the <code>postgresql.conf</code> settings (See below).</p>\n\n<pre><code># - Connection Settings -\n\nlisten_addresses = '*'          # what IP address(es) to listen on;\n                                    # comma-separated list of addresses;\n                                    # defaults to 'localhost'; use '*' for all\n                                    # (change requires restart)\nport = 5432                             # (change requires restart)\nmax_connections = 100                   # (change requires restart)\n#superuser_reserved_connections = 3     # (change requires restart)\nunix_socket_directories = '/var/run/postgresql' # comma-separated list of \ndirectories\n                                    # (change requires restart)\n#unix_socket_group = ''                 # (change requires restart)\n#unix_socket_permissions = 0777         # begin with 0 to use octal notation\n                                    # (change requires restart)\n#bonjour = off                          # advertise server via Bonjour\n                                    # (change requires restart)\n#bonjour_name = ''                      # defaults to the computer name\n                                    # (change requires restart)\n\n# - Security and Authentication -\n</code></pre>\n\n<p>And after restarting by <code>sudo service postgresql restart</code> I still get the same error after deploying again.</p>\n\n<p><strong>Update, database.yml from server</strong>\nHere is the <code>database.yml</code> from the server.</p>\n\n<pre><code>production:\n adapter: postgresql\n host: 127.0.0.1\n database: databasename\n username: username\n password: password\n encoding: unicode\n pool: 5\n</code></pre>\n\n<p>In the <code>/var/log/nginx/error.log</code> the last line is like this <code>[ 2017-09-27 13:09:13.4321 1530/7fa87d58e700 age/Cor/Con/CheckoutSession.cpp:285 ]: [Client 1-149] Cannot checkout session because a spawning error occurred. The identifier of the error is c620ca8b. Please see earlier logs for details about the error.</code></p>\n\n<p>As it says I checked out earlier logs. Below is the whole log.  It is reffering to a <code>order_notifier.rb</code>  witch is supposed to have a bad syntax.</p>\n\n<p>here is the whole log for the error <code>c620ca8b</code> :</p>\n\n<pre><code>    [ 2017-09-27 13:02:37.1572 1530/7fa87d58e700 age/Cor/Con/CheckoutSession.cpp:285 ]: [Client 1-148] Cannot checkout session because a spawning error occurred. The identifier of the error is 446bb8e9. Please see earlier logs for details about the error.\nApp 20925 stdout:\nApp 20925 stdout:\n[ 2017-09-27 13:09:13.4236 1530/7fa88401a700 age/Cor/App/Implementation.cpp:304 ]: Could not spawn process for application /home/deploy/hlinreykdal/current: An error occurred while starting up the preloader.\n  Error ID: c620ca8b\n  Error details saved to: /tmp/passenger-error-Mirupe.html\n  Message from application: /home/deploy/hlinreykdal/releases/20170926133751/app/mailers/order_notifier.rb:8: syntax error, unexpected tLABEL\n    mail (to: order.email, subject: 'Hlin Reykdal Concept Store',\n             ^\n/home/deploy/hlinreykdal/releases/20170926133751/app/mailers/order_notifier.rb:8: syntax error, unexpected tLABEL, expecting '='\n    mail (to: order.email, subject: 'Hlin Reykdal Concept Store',\n                                   ^\n/home/deploy/hlinreykdal/releases/20170926133751/app/mailers/order_notifier.rb:8: syntax error, unexpected ',', expecting keyword_end\n    mail (to: order.email, subject: 'Hlin Reykdal Concept Store',\n                                                                 ^\n/home/deploy/hlinreykdal/releases/20170926133751/app/mailers/order_notifier.rb:12: syntax error, unexpected ')', expecting keyword_end\n/home/deploy/hlinreykdal/releases/20170926133751/app/mailers/order_notifier.rb:21: syntax error, unexpected tLABEL\n    mail (to: order.email, subject: 'Order Shipped')\n             ^\n/home/deploy/hlinreykdal/releases/20170926133751/app/mailers/order_notifier.rb:21: syntax error, unexpected tLABEL, expecting '='\n    mail (to: order.email, subject: 'Order Shipped')\n                                   ^\n/home/deploy/hlinreykdal/releases/20170926133751/app/mailers/order_notifier.rb:21: syntax error, unexpected ')', expecting keyword_end (SyntaxError)\n  /home/deploy/hlinreykdal/shared/bundle/ruby/2.3.0/gems/activesupport-4.2.5/lib/active_support/dependencies.rb:244:in `rescue in load_dependency'\n  /home/deploy/hlinreykdal/shared/bundle/ruby/2.3.0/gems/activesupport-4.2.5/lib/active_support/dependencies.rb:237:in `load_dependency'\n  /home/deploy/hlinreykdal/shared/bundle/ruby/2.3.0/gems/activesupport-4.2.5/lib/active_support/dependencies.rb:274:in `require'\n  /home/deploy/hlinreykdal/shared/bundle/ruby/2.3.0/gems/activesupport-4.2.5/lib/active_support/dependencies.rb:360:in `require_or_load'\n  /home/deploy/hlinreykdal/shared/bundle/ruby/2.3.0/gems/activesupport-4.2.5/lib/active_support/dependencies.rb:317:in `depend_on'\n  /home/deploy/hlinreykdal/shared/bundle/ruby/2.3.0/gems/activesupport-4.2.5/lib/active_support/dependencies.rb:233:in `require_dependency'\n  /home/deploy/hlinreykdal/shared/bundle/ruby/2.3.0/gems/railties-4.2.5/lib/rails/engine.rb:472:in `block (2 levels) in eager_load!'\n  /home/deploy/hlinreykdal/shared/bundle/ruby/2.3.0/gems/railties-4.2.5/lib/rails/engine.rb:471:in `each'\n  /home/deploy/hlinreykdal/shared/bundle/ruby/2.3.0/gems/railties-4.2.5/lib/rails/engine.rb:471:in `block in eager_load!'\n  /home/deploy/hlinreykdal/shared/bundle/ruby/2.3.0/gems/railties-4.2.5/lib/rails/engine.rb:469:in `each'\n  /home/deploy/hlinreykdal/shared/bundle/ruby/2.3.0/gems/railties-4.2.5/lib/rails/engine.rb:469:in `eager_load!'\n  /home/deploy/hlinreykdal/shared/bundle/ruby/2.3.0/gems/railties-4.2.5/lib/rails/engine.rb:346:in `eager_load!'\n  /home/deploy/hlinreykdal/shared/bundle/ruby/2.3.0/gems/railties-4.2.5/lib/rails/application/finisher.rb:56:in `each'\n  /home/deploy/hlinreykdal/shared/bundle/ruby/2.3.0/gems/railties-4.2.5/lib/rails/application/finisher.rb:56:in `block in &lt;module:Finisher&gt;'\n</code></pre>\n\n<p>And here is the <code>order_notifier.rb</code> I can\u00b4t see what is wrong whit it, maybe someone here can.</p>\n\n<pre><code>class OrderNotifier &lt; ApplicationMailer\n\n   default from: 'Hlin Reykdal Concept Store &lt;hlin@hlinreykdal.com&gt;'\n\n    def received(order)\n     @order = order\n     mail (to: order.email, subject: 'Hlin Reykdal Concept Store')\n    end\n\n   def shipped(order)\n    @order = order\n    mail (to: order.email, subject: 'Order Shipped')\n   end  \n end\n</code></pre>\n\n<p>I've restarted both the nginx by <code>sudo service nginx restart</code> and the app by <code>bundle exec passenger-config restart-app</code>  but with out a luck, still getting the same error if I deploy again.</p>\n\n<p>I googled all over the web and looked at hundreds of posts here on stack. Nothing seems to work.  Now I'm getting really desperate about this.  I've had similar problems before after a deploy, but I've always managed to fix it, but this seems to be aout of my league.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>It seems like the <code>production log</code> is stuck in <code>23/5 2017</code>  even after all my restarts and deploys. It seems like it is stuck in an error from the mailer??</p>\n\n<pre><code>I, [2017-05-23T11:01:44.741054 #1060]  INFO -- : Completed 500 Internal \nServer Error in 66ms (ActiveRecord: 4.2ms)\nF, [2017-05-23T11:01:44.743481 #1060] FATAL -- :\n SocketError (getaddrinfo: Name or service not known):\n app/admin/order.rb:6:in `block (2 levels) in &lt;top (required)&gt;'\n\n\nI, [2017-05-23T11:10:08.863192 #1060]  INFO -- : Started GET \"/products/41\" for 164.132.161.46 at 2017-05-23 11:10:08 +0000\nI, [2017-05-23T11:10:08.876373 #1060]  INFO -- : Processing by ProductsController#show as */*\nI, [2017-05-23T11:10:08.876536 #1060]  INFO -- :   Parameters: {\"id\"=&gt;\"41\"}\nD, [2017-05-23T11:10:08.881123 #1060] DEBUG -- :   ^[[1m^[[35mCart Load (0.7ms)^[[0m  SELECT  \"carts\".* FROM \"carts\" WHERE \"carts\".\"id\" = $1 LIMIT 1  [[\"id\", nil]]\nD, [2017-05-23T11:10:08.882685 #1060] DEBUG -- :   ^[[1m^[[36m (0.2ms)^[[0m  ^[[1mBEGIN^[[0m\nD, [2017-05-23T11:10:08.887770 #1060] DEBUG -- :   ^[[1m^[[35mSQL (1.3ms)^[[0m  INSERT INTO \"carts\" (\"created_at\", \"updated_at\") VALUES ($1, $2) RETURNING \"id\"  [[\"created_at\", \"2017-05-23 11:10:08.883411\"], [\"updated_at\", \"2017-05-23 11:10:08.883411\"]]\nD, [2017-05-23T11:10:08.890018 #1060] DEBUG -- :   ^[[1m^[[36m (0.7ms)^[[0m  ^[[1mCOMMIT^[[0m\nD, [2017-05-23T11:10:08.893274 #1060] DEBUG -- :   ^[[1m^[[35mProduct Load (1.2ms)^[[0m  SELECT  \"products\".* FROM \"products\" WHERE \"products\".\"slug\" = $1  ORDER BY \"products\".\"id\" ASC LIMIT 1  [[\"slug\", \"41\"]]\nD, [2017-05-23T11:10:08.894865 #1060] DEBUG -- :   ^[[1m^[[36mProduct Load (0.4ms)^[[0m  ^[[1mSELECT  \"products\".* FROM \"products\" WHERE \"products\".\"id\" = $1 LIMIT 1^[[0m  [[\"id\", 41]]\nD, [2017-05-23T11:10:08.900733 #1060] DEBUG -- :   ^[[1m^[[35mLabel Load (1.2ms)^[[0m  SELECT  \"labels\".* FROM \"labels\" WHERE \"labels\".\"id\" = $1 LIMIT 1  [[\"id\", 8]]\nD, [2017-05-23T11:10:08.907954 #1060] DEBUG -- :   ^[[1m^[[36mProduct Load (0.6ms)^[[0m  ^[[1mSELECT  \"products\".* FROM \"products\" WHERE \"products\".\"category_id\" = $1  ORDER BY RANDOM() LIMIT 6^[[0m  [[\"category_id\", 12]]\nI, [2017-05-23T11:10:08.916955 #1060]  INFO -- :   Rendered products/show.html.erb within layouts/application (18.7ms)\nD, [2017-05-23T11:10:08.920965 #1060] DEBUG -- :   ^[[1m^[[35mCategory Load (0.8ms)^[[0m  SELECT \"categories\".* FROM \"categories\"\nD, [2017-05-23T11:10:08.924524 #1060] DEBUG -- :   ^[[1m^[[36mLabel Load (0.3ms)^[[0m  ^[[1mSELECT \"labels\".* FROM \"labels\"^[[0m\nD, [2017-05-23T11:10:08.929926 #1060] DEBUG -- :   ^[[1m^[[35m (0.3ms)^[[0m  SELECT COUNT(*) FROM \"product_items\" WHERE \"product_items\".\"cart_id\" = $1  [[\"cart_id\", 46319]]\nI, [2017-05-23T11:10:08.930159 #1060]  INFO -- :   Rendered application/_navbar.html.erb (10.7ms)\nI, [2017-05-23T11:10:08.931046 #1060]  INFO -- :   Rendered application/_message.html.erb (0.2ms)\nI, [2017-05-23T11:10:08.932261 #1060]  INFO -- :   Rendered emaillist/_email.html.erb (0.6ms)\nI, [2017-05-23T11:10:08.932381 #1060]  INFO -- :   Rendered application/_notifications.html.erb (0.9ms)\nI, [2017-05-23T11:10:08.936424 #1060]  INFO -- :   Rendered application/_footer.html.erb (3.5ms)\nI, [2017-05-23T11:10:08.936826 #1060]  INFO -- : Completed 200 OK in 60ms (Views: 36.7ms | ActiveRecord: 7.6ms)\nI, [2017-05-23T11:12:35.005157 #1060]  INFO -- : Started GET \"/labels/10\" for 66.249.65.74 at 2017-05-23 11:12:35 +0000\nI, [2017-05-23T11:12:35.040137 #1060]  INFO -- : Processing by LabelsController#show as HTML\nI, [2017-05-23T11:12:35.040544 #1060]  INFO -- :   Parameters: {\"id\"=&gt;\"10\"}\nD, [2017-05-23T11:12:35.049755 #1060] DEBUG -- :   ^[[1m^[[36mCart Load (0.8ms)^[[0m  ^[[1mSELECT  \"carts\".* FROM \"carts\" WHERE \"carts\".\"id\" = $1 LIMIT 1^[[0m  [[\"id\", nil]]\nD, [2017-05-23T11:12:35.052776 #1060] DEBUG -- :   ^[[1m^[[35m (0.2ms)^[[0m  BEGIN\nD, [2017-05-23T11:12:35.060048 #1060] DEBUG -- :   ^[[1m^[[36mSQL (0.9ms)^[[0m  ^[[1mINSERT INTO \"carts\" (\"created_at\", \"updated_at\") VALUES ($1, $2) RETURNING \"id\"^[[0m  [[\"created_at\", \"2017-05-23 11:12:35.053857\"], [\"updated_at\", \"2017-05-23 11:12:35.053857\"]]\nD, [2017-05-23T11:12:35.061486 #1060] DEBUG -- :   ^[[1m^[[35m (0.6ms)^[[0m  COMMIT\nD, [2017-05-23T11:12:35.065373 #1060] DEBUG -- :   ^[[1m^[[36mLabel Load (0.4ms)^[[0m  ^[[1mSELECT  \"labels\".* FROM \"labels\" WHERE \"labels\".\"id\" = $1 LIMIT 1^[[0m  [[\"id\", 10]]\nI, [2017-05-23T11:12:35.067624 #1060]  INFO -- : Completed 404 Not Found in 27ms (ActiveRecord: 3.0ms)\nF, [2017-05-23T11:12:35.069957 #1060] FATAL -- :\nActiveRecord::RecordNotFound (Couldn't find Label with 'id'=10):\n  app/controllers/labels_controller.rb:21:in `set_label'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "integration-testing"], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1506520468, "post_id": 46448699, "comment_id": 79855147, "body": "Are you sure about that? <code>institutions(:standard)</code> looks like he is accessing <a href=\"http://guides.rubyonrails.org/testing.html#the-low-down-on-fixtures\" rel=\"nofollow noreferrer\">a fixture</a>. They are created in the DB before every test run."}, {"owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1506521089, "post_id": 46448699, "comment_id": 79855606, "body": "I am not 100% sure since my test suite usually is <code>rspec</code> and I use <code>factory_girl</code> for fixtures. However, the error message the OP is getting is RecordNotFound, so I assume that during the test he cannot find a record with nil id (according to the traceback). I agree that <code>@institution</code> is an ActiveRecord instance, but I guess it is not saved in the DB. Maybe it would be worth to try <code>@institution.save!</code> in the setup block"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1506521957, "post_id": 46448699, "comment_id": 79856256, "body": "Actually the lines <code>get new_institution_job_path(@institution); assert_response :success</code> are passing which should mean that the record is persisted. But its hard to tell since everybody writes integration tests in minitest like a madmans ranting."}], "tags": [], "owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "is_accepted": false, "score": 0, "last_activity_date": 1506517553, "creation_date": 1506517553, "answer_id": 46448699, "question_id": 46448344, "link": "https://stackoverflow.com/questions/46448344/how-to-do-integration-test-create-through-other-model/46448699#46448699", "title": "How to do Integration Test create through other model", "body": "<p>It looks like that when you call at line 22 </p>\n\n<pre><code>get new_institution_job_path(@institution)\n</code></pre>\n\n<p>the <code>@institution</code> object you have built in the <code>setup</code> block is not saved in the database.</p>\n\n<p>The error you are receiving, <code>ActiveRecord::RecordNotFound</code>, says that it cannot be found an Institution with id <code>nil</code>.</p>\n\n<p>You can easily check if I am guessing correctly by adding this assertion:</p>\n\n<pre><code>  test \"can create a job through institution\" do\n    assert_not_nil(@institution.id) # or assert_not_equal(0, Institution.where(id: @institution.id).size)\n    get new_institution_job_path(@institution)\n    assert_response :success\n    #...\n  end\n</code></pre>\n\n<p>Make sure that your <code>institutions(:standard)</code> method looks like <code>Institution.create!()</code> and not like <code>Institution.new</code> or <code>Institution.build</code></p>\n"}, {"comments": [{"owner": {"reputation": 370, "user_id": 3798525, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xPLE1.jpg?s=128&g=1", "display_name": "Danilo C&#226;ndido", "link": "https://stackoverflow.com/users/3798525/danilo-c%c3%a2ndido"}, "edited": false, "score": 0, "creation_date": 1506525866, "post_id": 46449645, "comment_id": 79858979, "body": "Thank you very much. This worked for me. Your tips about how to put the correct route and how to create the job for the right institution helped me to understand."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 1, "last_activity_date": 1506522434, "last_edit_date": 1506522434, "creation_date": 1506520249, "answer_id": 46449645, "question_id": 46448344, "link": "https://stackoverflow.com/questions/46448344/how-to-do-integration-test-create-through-other-model/46449645#46449645", "title": "How to do Integration Test create through other model", "body": "<p>Start by nesting the <code>jobs</code> resource properly:</p>\n\n<pre><code>resources :institutions do\n  resources :jobs, only: [:new, :create]\nend\n\n# or to create the full suite\nresources :institutions do\n  resources :jobs, shallow: true\nend\n</code></pre>\n\n<p>This will give these routes:</p>\n\n<pre><code>             Prefix Verb URI Pattern                                      Controller#Action\n   institution_jobs POST /institutions/:institution_id/jobs(.:format)     jobs#create\nnew_institution_job GET  /institutions/:institution_id/jobs/new(.:format) jobs#new\n...\n</code></pre>\n\n<p>Note that <code>:institution_id</code> is a now a part of URI pattern for the create route, and it will be available as <code>params[:institution_id]</code>.</p>\n\n<p>In your test you want to POST to <code>/institutions/:institution_id/jobs</code>:</p>\n\n<pre><code>require 'test_helper'\n\nclass JobActionsTest &lt; ActionDispatch::IntegrationTest\n  setup do\n    @user = users(:standard)\n    sign_in @user\n    @institution = institutions(:standard)\n  end\n\n  # Use separate examples per route / case\n  test \"can fill in form to create a new job\" do\n     get new_institution_job_path(@institution)\n     assert_response :success\n  end\n\n  test \"can create a job through institution\" do\n    assert_difference -&gt;{ @institution.jobs.count } do\n      post institution_jobs_path(@institution), \n           params: { \n             job: {\n               title: \"Desenvolvedor\", \n               description: \"Ruby\",\n               requirements: \"rspec and capybara\", \n               start_date: Date.today, \n               end_date: Date.today + 5.days\n             }\n           }\n    end\n    assert_redirected_to @institution.jobs.last\n    follow_redirect!\n    assert_response :success\n  end\nend\n</code></pre>\n\n<p>Further you want to test that the job actually was created for the right institution. We do that by passing the lambda <code>-&gt;{ @institution.jobs.count }</code>. </p>\n\n<p>And that the users are redirected to the correct resource - not just somewhere - which is done with <code>assert_redirected_to @institution.jobs.last</code>.</p>\n"}], "owner": {"reputation": 370, "user_id": 3798525, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xPLE1.jpg?s=128&g=1", "display_name": "Danilo C&#226;ndido", "link": "https://stackoverflow.com/users/3798525/danilo-c%c3%a2ndido"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 46449645, "answer_count": 2, "score": 0, "last_activity_date": 1506522434, "creation_date": 1506516571, "last_edit_date": 1506517370, "question_id": 46448344, "link": "https://stackoverflow.com/questions/46448344/how-to-do-integration-test-create-through-other-model", "title": "How to do Integration Test create through other model", "body": "<p>1) I have this model Job and the model institution</p>\n\n<pre><code>class Job &lt; ApplicationRecord\n  belongs_to :institution\n  # others attibutes\nend\n</code></pre>\n\n<p>2) This is my action create on JobsController - I need a institution to create a job. it is fine.</p>\n\n<pre><code>def create\n    build_job\n    save_job || render(:new, status: :unprocessable_entity)\nend\n</code></pre>\n\n<p>3) This is the integration test that I created\nI am not getting the success test</p>\n\n<p>In <strong>params</strong>\n<code>\n-I also tried  institution: @institution\n-and also tried institution_id: @institution.id\n</code></p>\n\n<pre><code>require 'test_helper'\n\nclass JobActionsTest &lt; ActionDispatch::IntegrationTest\n  setup do\n    @user = users(:standard)\n    sign_in @user\n    @institution = institutions(:standard)\n  end\n\n  test \"can create a job through institution\" do\n    get new_institution_job_path(@institution)\n    assert_response :success\n\n    assert_difference('Job.count') do\n      post jobs_path, \n           params: {job: {title: \"Desenvolvedor\", description: \"Ruby\",\n                          requirements: \"rspec and capybara\", \n                          start_date: Date.today, \n                          end_date: Date.today + 5.days, \n                          institution: @institution.id}}\n    end\n\n    assert_response :redirect\n    follow_redirect!\n    assert_response :success\n  end\nend\n</code></pre>\n\n<p>4) And this is my console error</p>\n\n<pre><code>#Running:\nE\n\nError:\nJobActionsTest#test_can_create_a_job_through_institution:\nActiveRecord::RecordNotFound: Couldn't find Institution with 'id'=\n    app/controllers/jobs_controller.rb:74:in `job_scope'\n    app/controllers/jobs_controller.rb:52:in `build_job'\n    app/controllers/jobs_controller.rb:18:in `create'\n    test/integration/job_actions_test.rb:22:in `block (2 levels) in &lt;class:JobActionsTest&gt;'\n    test/integration/job_actions_test.rb:21:in `block in &lt;class:JobActionsTest&gt;'\n\n\nbin/rails test test/integration/job_actions_test.rb:17\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "rails-activerecord"], "answers": [{"comments": [{"owner": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "edited": false, "score": 0, "creation_date": 1506578392, "post_id": 46452718, "comment_id": 79878589, "body": "Thanks a lot @chumakoff, your analysis is spot on. Also thanks for the link. <code>after_save</code> callbacks it is, then. I actually had the same suspicion but only deactivated the <code>acts_as_list</code> on the child (<code>CustomOption</code>)."}, {"owner": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "edited": false, "score": 0, "creation_date": 1506586207, "post_id": 46452718, "comment_id": 79882890, "body": "Found out that it is possible to circumvent the problem by defining <code>inverse_of</code> on the <code>has_many</code> association. I send an edit request to the answer."}, {"owner": {"reputation": 5966, "user_id": 2477691, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DaiPF.jpg?s=128&g=1", "display_name": "chumakoff", "link": "https://stackoverflow.com/users/2477691/chumakoff"}, "reply_to_user": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "edited": false, "score": 0, "creation_date": 1506586297, "post_id": 46452718, "comment_id": 79882953, "body": "Thanks for this! I approved the request )"}], "tags": [], "owner": {"reputation": 5966, "user_id": 2477691, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DaiPF.jpg?s=128&g=1", "display_name": "chumakoff", "link": "https://stackoverflow.com/users/2477691/chumakoff"}, "is_accepted": true, "score": 7, "last_activity_date": 1506586775, "last_edit_date": 1506586775, "creation_date": 1506529075, "answer_id": 46452718, "question_id": 46448140, "link": "https://stackoverflow.com/questions/46448140/belongs-to-touch-true-not-fired-on-association-build-and-nested-attribute-assig/46452718#46452718", "title": "belongs_to touch: true not fired on association.build and nested attribute assignment", "body": "<p>The problem is that if the parent model has any <code>after_commit</code> callback (maybe some others), <code>:touch</code> stops working when autosaving associated records, even if the callback is not doing anything. </p>\n\n<p>Your <code>CustomField</code> model has <code>after_commit</code> callback coming from <code>acts_as_list</code> gem. This breaks <code>:touch</code>.</p>\n\n<p>There was a similar issue <a href=\"https://github.com/rails/rails/issues/26726\" rel=\"noreferrer\">https://github.com/rails/rails/issues/26726</a> . That issue was associated with <code>accepts_nested_attributes_for</code>, but I am sure that <code>accepts_nested_attributes_for</code> has nothing to do with it, at least in your case.</p>\n\n<p><strong>Added by the author of the question (@ulferts):</strong></p>\n\n<p>Defining <code>inverse_of: 'custom_field'</code> on the <code>custom_options</code> association in <code>CustomField</code> seems to circumvent the problem for unknown reasons. </p>\n\n<pre><code>has_many :custom_options,\n         -&gt; { order(position: :asc) }, \n         dependent: :delete_all,\n         inverse_of: 'custom_field'\n</code></pre>\n"}], "owner": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1549, "favorite_count": 0, "accepted_answer_id": 46452718, "answer_count": 1, "score": 4, "last_activity_date": 1506586775, "creation_date": 1506515985, "question_id": 46448140, "link": "https://stackoverflow.com/questions/46448140/belongs-to-touch-true-not-fired-on-association-build-and-nested-attribute-assig", "title": "belongs_to touch: true not fired on association.build and nested attribute assignment", "body": "<p>In the <a href=\"https://github.com/opf/openproject\" rel=\"nofollow noreferrer\">OpenProject</a> application we have two models:</p>\n\n<p><a href=\"https://github.com/opf/openproject/blob/413b70a5f6b7685300dbd20c2e6a132b3b297790/app/models/custom_field.rb\" rel=\"nofollow noreferrer\"><strong>CustomField</strong> </a></p>\n\n<pre><code>class CustomField &lt; ActiveRecord::Base\n  has_many :custom_options, -&gt; { order(position: :asc) }, dependent: :delete_all\n  accepts_nested_attributes_for :custom_options\n  ...\nend\n</code></pre>\n\n<p><a href=\"https://github.com/opf/openproject/blob/413b70a5f6b7685300dbd20c2e6a132b3b297790/app/models/custom_option.rb\" rel=\"nofollow noreferrer\"><strong>CustomOption</strong> </a></p>\n\n<pre><code>class CustomOption &lt; ActiveRecord::Base\n  belongs_to :custom_field, touch: true\n  ...\nend\n</code></pre>\n\n<p>Then in the <a href=\"https://github.com/opf/openproject/blob/413b70a5f6b7685300dbd20c2e6a132b3b297790/app/controllers/custom_fields_controller.rb#L66\" rel=\"nofollow noreferrer\">custom field controller</a> we modify the options of a custom field via mass assignment and save the record:</p>\n\n<pre><code>@custom_field.attributes = get_custom_field_params\n\nif @custom_field.save \n  ...\n</code></pre>\n\n<p>Because of <code>touch: true</code> being configured on the <code>custom_field</code> association in <code>CustomOption</code> I would have expected the custom field's <code>updated_at</code> attribute to be updated at this point which does not happen however. The log does not show any SQL requests similar to <code>UPDATE custom_fields SET update_at = ....</code>. The changes to the custom options themselves, regardless of whether it is adding a custom option or modifying one, are correctly persisted. </p>\n\n<p>Debugging showed:</p>\n\n<ul>\n<li>The same erroneous behaviour when using <code>custom_field.custom_options.build</code> and a subsequent <code>custom_field.save</code></li>\n<li>The desired behaviour when using <code>custom_field.custom_options.create</code></li>\n<li>The desired behaviour when using <code>CustomOption.create custom_field: x</code></li>\n<li>The desired behaviour when using <code>custom_field.custom_option[x].destroy</code></li>\n</ul>\n\n<p>I know I could work around the problem by defining <code>after_save</code> callbacks, but this behaviour really irks me as it was unexpected. </p>\n\n<p>Is the behaviour as outlined above desired and documented? If so, where can I find this information?</p>\n"}, {"tags": ["arrays", "ruby", "algorithm", "subset"], "answers": [{"comments": [{"owner": {"reputation": 13459, "user_id": 550349, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QSyCs.jpg?s=128&g=1", "display_name": "stef", "link": "https://stackoverflow.com/users/550349/stef"}, "edited": false, "score": 0, "creation_date": 1506543602, "post_id": 46455763, "comment_id": 79868760, "body": "Thanks Frankie! I&#39;m having a think through and I shall reply. Really appreciate you taking a look."}], "tags": [], "owner": {"reputation": 1319, "user_id": 550226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e2f1bf5b4855960d2994b3b30a08e04?s=128&d=identicon&r=PG", "display_name": "Frankie Roberto", "link": "https://stackoverflow.com/users/550226/frankie-roberto"}, "is_accepted": true, "score": 1, "last_activity_date": 1506540310, "creation_date": 1506540310, "answer_id": 46455763, "question_id": 46447799, "link": "https://stackoverflow.com/questions/46447799/what-is-an-efficient-way-to-rank-common-shared-sub-arrays-of-multiple-arrays-by/46455763#46455763", "title": "What is an efficient way to rank common shared sub-arrays of multiple arrays by size and frequency?", "body": "<p>Rather than do an intersection of every array with every other array, which might quickly get out of hand, I'd be tempted to keep a persistent index (in Elasticsearch?) of all the possible combinations seen so far, along with a count of their frequency. Then for every new set of tags, increment the frequency counts by 1 for all the sub-combinations from that tag.</p>\n\n<p>Here's a quick sketch:</p>\n\n<pre><code>require 'digest'\n\ndef bundle_report(arrays, min_size = 2, max_size = 10)\n\n  combination_index = {}\n\n  arrays.each do |array|\n\n    (min_size..[max_size,array.length].min).each do |length|\n\n      array.combination(length).each do |combination|\n\n        key = Digest::MD5.hexdigest(combination.join(''))\n\n        combination_index[key] ||= {bundle: combination, frequency: 0, size: length}\n        combination_index[key][:frequency] += 1\n\n      end\n\n    end\n\n  end\n\n  combination_index.to_a.sort_by {|x| [x[1][:frequency], x[1][:size]] }.reverse\n\nend\n\ninput_arrays = [\n  [\"a\", \"b\", \"c\", \"d\", \"e\"],\n  [\"a\", \"b\", \"d\", \"e\", \"f\", \"g\"],\n  [\"a\", \"c\", \"d\", \"e\", \"f\", \"h\"]\n]\n\nbundle_report(input_arrays)[0..5].each do |x|\n  puts x[1]\nend\n</code></pre>\n\n<p>Which results in:</p>\n\n<pre><code>{:bundle=&gt;[\"a\", \"d\", \"e\"], :frequency=&gt;3, :size=&gt;3}\n{:bundle=&gt;[\"d\", \"e\"], :frequency=&gt;3, :size=&gt;2}\n{:bundle=&gt;[\"a\", \"d\"], :frequency=&gt;3, :size=&gt;2}\n{:bundle=&gt;[\"a\", \"e\"], :frequency=&gt;3, :size=&gt;2}\n{:bundle=&gt;[\"a\", \"d\", \"e\", \"f\"], :frequency=&gt;2, :size=&gt;4}\n{:bundle=&gt;[\"a\", \"b\", \"d\", \"e\"], :frequency=&gt;2, :size=&gt;4}\n</code></pre>\n\n<p>This might not scale very well either though.</p>\n"}], "owner": {"reputation": 13459, "user_id": 550349, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QSyCs.jpg?s=128&g=1", "display_name": "stef", "link": "https://stackoverflow.com/users/550349/stef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 46455763, "answer_count": 1, "score": 1, "last_activity_date": 1506540310, "creation_date": 1506515048, "last_edit_date": 1506516651, "question_id": 46447799, "link": "https://stackoverflow.com/questions/46447799/what-is-an-efficient-way-to-rank-common-shared-sub-arrays-of-multiple-arrays-by", "title": "What is an efficient way to rank common shared sub-arrays of multiple arrays by size and frequency?", "body": "<p>I'm working on a problem around Instagram hashtags. Users often have \"bundles\" of hashtags that they copy and paste when they are posting images. Different bundles for different topics. </p>\n\n<p>So I might have my \"Things from the garden\" bundle, which would be [\"garden\", \"beautifullawns\", \"treesoutside\", \"greenlondon\"] and so on. They're often twenty to thirty items long.</p>\n\n<p>Sometimes they might have several of these to keep things varied.</p>\n\n<p>What I want to do is by looking at past images that they have posted, to recommend a bundle of tags to use.</p>\n\n<p>To do that I would have several arrays of tags that they have used previously:</p>\n\n<pre><code>x = [\"a\", \"b\", \"c\", \"d\", \"e\"]\ny = [\"a\", \"b\", \"d\", \"e\", \"f\", \"g\"]\nz = [\"a\", \"c\", \"d\", \"e\", \"f\", \"h\"]\n...\n</code></pre>\n\n<p>I'd like to find largest common subsets of entries for these arrays. </p>\n\n<p>So in this case, the largest subset would be [\"a\", \"d\", \"e\"] within those three. That's simple enough to achieve naively by using something like <code>x &amp; y &amp; z</code>.</p>\n\n<p>However, I'd like to create a ranking of these subsets based on their size and frequency within all of the arrays under consideration, so that I can display the most commonly used bundles of tags:</p>\n\n<pre><code>[\n  {bundle: [\"a\",\"d\",\"e\"], frequency: 3, size: 3},\n  {bundle: [\"e\",\"f\"], frequency: 2, size: 2},\n  {bundle: [\"a\",\"b\"], frequency: 2, size: 2},\n  {bundle: [\"b\",\"d\"], frequency: 2, size: 2},\n  ...\n]\n</code></pre>\n\n<p>Presumably, with a limitation on the minimum size of these bundles, say two items.</p>\n\n<p>I'm using Elasticsearch for indexing, but I've found that attempting to do this with aggregations is challenging, so I'm pulling out the images into Ruby and then working there to create the listing.</p>\n\n<p>As a first pass, I've looped over all of these arrays, then find all subsets of the other arrays, using an MD5 hash key as a unique identifier. But this limits the results. Adding further passes makes this approach quite inefficient, I suspect.</p>\n\n<pre><code>require 'digest'\n\nx = [\"a\", \"b\", \"c\", \"d\", \"e\"]\ny = [\"a\", \"b\", \"d\", \"e\", \"f\", \"g\"]\nz = [\"a\", \"c\", \"d\", \"e\", \"f\", \"h\"]\n\n\ndef bundle_report arrays\n  arrays = arrays.collect(&amp;:sort)\n  working = {}\n  arrays.each do |array|\n    arrays.each do |comparison|\n      next if array == comparison\n      subset = array &amp; comparison\n      key = Digest::MD5.hexdigest(subset.join(\"\"))\n      working[key] ||= {subset: subset, frequency: 0}\n      working[key][:frequency] += 1\n      working[key][:size] = subset.length\n    end\n  end\n  working\nend\n\nputs bundle_report([x, y, z])\n=&gt; {\"bb4a3fb7097e63a27a649769248433f1\"=&gt;{:subset=&gt;[\"a\", \"b\", \"d\", \"e\"], :frequency=&gt;2, :size=&gt;4}, \"b6fdd30ed956762a88ef4f7e8dcc1cae\"=&gt;{:subset=&gt;[\"a\", \"c\", \"d\", \"e\"], :frequency=&gt;2, :size=&gt;4}, \"ddf4a04e121344a6e7ee2acf71145a99\"=&gt;{:subset=&gt;[\"a\", \"d\", \"e\", \"f\"], :frequency=&gt;2, :size=&gt;4}}\n</code></pre>\n\n<p>Adding a second pass gets this to a better result:</p>\n\n<pre><code>def bundle_report arrays\n  arrays = arrays.collect(&amp;:sort)\n  working = {}\n  arrays.each do |array|\n    arrays.each do |comparison|\n      next if array == comparison\n      subset = array &amp; comparison\n      key = Digest::MD5.hexdigest(subset.join(\"\"))\n      working[key] ||= {subset: subset, frequency: 0}\n      working[key][:frequency] += 1\n      working[key][:size] = subset.length \n    end\n  end\n\n  original_working = working.dup\n\n  original_working.each do |key, item|\n    original_working.each do |comparison_key, comparison|\n      next if item == comparison\n      subset = item[:subset] &amp; comparison[:subset]\n      key = Digest::MD5.hexdigest(subset.join(\"\"))\n      working[key] ||= {subset: subset, frequency: 0}\n      working[key][:frequency] += 1\n      working[key][:size] = subset.length\n    end\n  end\n  working\nend\n\nputs bundle_report([x, y, z])\n=&gt; {\"bb4a3fb7097e63a27a649769248433f1\"=&gt;{:subset=&gt;[\"a\", \"b\", \"d\", \"e\"], :frequency=&gt;2, :size=&gt;4}, \"b6fdd30ed956762a88ef4f7e8dcc1cae\"=&gt;{:subset=&gt;[\"a\", \"c\", \"d\", \"e\"], :frequency=&gt;2, :size=&gt;4}, \"ddf4a04e121344a6e7ee2acf71145a99\"=&gt;{:subset=&gt;[\"a\", \"d\", \"e\", \"f\"], :frequency=&gt;2, :size=&gt;4}, \"a562cfa07c2b1213b3a5c99b756fc206\"=&gt;{:subset=&gt;[\"a\", \"d\", \"e\"], :frequency=&gt;6, :size=&gt;3}}\n</code></pre>\n\n<p>Can you suggest an efficient way to establish this ranking of large subsets?</p>\n"}, {"tags": ["ruby", "git", "hook", "pre-commit-hook"], "comments": [{"owner": {"reputation": 18855, "user_id": 6330106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ebfe17b6dfc96ff9309a0e9bfd5995c?s=128&d=identicon&r=PG&f=1", "display_name": "ElpieKay", "link": "https://stackoverflow.com/users/6330106/elpiekay"}, "edited": false, "score": 0, "creation_date": 1506518774, "post_id": 46447533, "comment_id": 79853815, "body": "<code>git diff --cached</code> can&#39;t work in a <code>pre-receive</code> hook. You need to get the old value and the new value of the updated ref from the standard input, and then get the changed files between the two values via <code>git diff $oldvalue $newvalue --name-only --diff-filter=ACM</code>."}, {"owner": {"reputation": 63, "user_id": 8655006, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/89302f67809b587f3ad769f17c279f64?s=128&d=identicon&r=PG&f=1", "display_name": "Arunkumar", "link": "https://stackoverflow.com/users/8655006/arunkumar"}, "reply_to_user": {"reputation": 18855, "user_id": 6330106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ebfe17b6dfc96ff9309a0e9bfd5995c?s=128&d=identicon&r=PG&f=1", "display_name": "ElpieKay", "link": "https://stackoverflow.com/users/6330106/elpiekay"}, "edited": false, "score": 0, "creation_date": 1506573134, "post_id": 46447533, "comment_id": 79876901, "body": "@ElpieKay Thank you for your valuable information, You directed me right way, How could I get the  <code>$oldvalue $newvalue </code>?  Any suggestion?"}, {"owner": {"reputation": 18855, "user_id": 6330106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ebfe17b6dfc96ff9309a0e9bfd5995c?s=128&d=identicon&r=PG&f=1", "display_name": "ElpieKay", "link": "https://stackoverflow.com/users/6330106/elpiekay"}, "edited": false, "score": 0, "creation_date": 1506578517, "post_id": 46447533, "comment_id": 79878650, "body": "<code>for line in ARGF.readlines;arr=line.split();oldvalue=arr[0];newvalue=arr&zwnj;&#8203;[1];refname=arr[2];#&zwnj;&#8203;here do something;end</code>. Put this snippet in the <code>pre-receive</code> hook."}, {"owner": {"reputation": 63, "user_id": 8655006, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/89302f67809b587f3ad769f17c279f64?s=128&d=identicon&r=PG&f=1", "display_name": "Arunkumar", "link": "https://stackoverflow.com/users/8655006/arunkumar"}, "reply_to_user": {"reputation": 18855, "user_id": 6330106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ebfe17b6dfc96ff9309a0e9bfd5995c?s=128&d=identicon&r=PG&f=1", "display_name": "ElpieKay", "link": "https://stackoverflow.com/users/6330106/elpiekay"}, "edited": false, "score": 0, "creation_date": 1506579849, "post_id": 46447533, "comment_id": 79879287, "body": "@ElpieKay Once again Thank you for your hand, I updated the question as per your answer, But I facing the same issue here too!  Could you please lemme know the mistake I did?"}, {"owner": {"reputation": 18855, "user_id": 6330106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ebfe17b6dfc96ff9309a0e9bfd5995c?s=128&d=identicon&r=PG&f=1", "display_name": "ElpieKay", "link": "https://stackoverflow.com/users/6330106/elpiekay"}, "edited": false, "score": 0, "creation_date": 1506586921, "post_id": 46447533, "comment_id": 79883387, "body": "Sorry, I&#39;m not familiar with Ruby."}], "answers": [{"tags": [], "owner": {"reputation": 18855, "user_id": 6330106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ebfe17b6dfc96ff9309a0e9bfd5995c?s=128&d=identicon&r=PG&f=1", "display_name": "ElpieKay", "link": "https://stackoverflow.com/users/6330106/elpiekay"}, "is_accepted": false, "score": 0, "last_activity_date": 1506587224, "creation_date": 1506587224, "answer_id": 46464392, "question_id": 46447533, "link": "https://stackoverflow.com/questions/46447533/how-to-use-the-git-diff-cached-name-only-diff-filter-acm/46464392#46464392", "title": "How to use the git diff --cached --name-only --diff-filter=ACM?", "body": "<p>I'm not familiar with Ruby, so I can just do it in <code>bash</code>.</p>\n\n<pre><code>#!/bin/bash\n\nz40=0000000000000000000000000000000000000000\n\nwhile read oldvalue newvalue refname\ndo\n    if [ \"$newvalue\" == \"$z40\" ];then\n        #Trying to delete the ref, do something here\n        :\n    else\n        if [ \"$oldvalue\" == \"$z40\" ];then\n            #Trying to create a new ref, do something here\n            :\n        else\n            git diff $oldvalue $newvalue --name-only --diff-filter=ACM | if grep -e \".txt\" -e \".pdf\" -e \".dll\";then\n                echo \"Your commit has txt, pdf or dll file(s). Kindly remove the file(s) and try again\"\n                exit 1\n            fi\n        fi\n    fi\ndone\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 8655006, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/89302f67809b587f3ad769f17c279f64?s=128&d=identicon&r=PG&f=1", "display_name": "Arunkumar", "link": "https://stackoverflow.com/users/8655006/arunkumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 898, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1506587224, "creation_date": 1506514180, "last_edit_date": 1506579701, "question_id": 46447533, "link": "https://stackoverflow.com/questions/46447533/how-to-use-the-git-diff-cached-name-only-diff-filter-acm", "title": "How to use the git diff --cached --name-only --diff-filter=ACM?", "body": "<p>I trying to write the <code>pre-receive</code> hook to check the committing file. I tried to use the git command <code>git diff --cached --name-only --diff-filter=ACM</code> to get the file committed file list. But I get exception </p>\n\n<pre><code>#!/usr/bin/env ruby\n\nDir[git diff --cached --name-only --diff-filter=ACM].any? do |f|\n %w|.txt .pdf .dll|.include?(File.extname(f))\n   puts \"Your commit have exe or dll file. Kindly remove the file an$\n exit 0\n</code></pre>\n\n<p>end </p>\n\n<p>But I get syntax error on 3rd line</p>\n\n<blockquote>\n  <p>syntax error, unexpected unary-, expecting keyword_do or '{' or '(' (SyntaxError)</p>\n</blockquote>\n\n<p>As a <code>ruby</code> script beginner, I can not predict why this happening. I need a hand to fix the issue. </p>\n\n<p>Update As per <a href=\"https://stackoverflow.com/users/6330106/elpiekay\">elpiekay</a> guidence.</p>\n\n<pre><code>for line in ARGF.readlines;arr=line.split();oldvalue=arr[0];newvalue=arr\u200c\u200b[1];refname=arr[2];\n\nDir[git diff $oldvalue $newvalue --name-only --diff-filter=ACM].any? do |f|\n %w|.txt .pdf .dll|.include?(File.extname(f))\n   puts \"Your commit have exe or dll file. Kindly remove the file and try again\"\n exit 1\n end\nexit 0\nend\n</code></pre>\n\n<p>But Now also I facing the same error in <code>Dir[git diff $oldvalue $newvalue --name-only --diff-filter=ACM].any? do |f|</code> line.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "actioncable"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1506514017, "post_id": 46447348, "comment_id": 79850540, "body": "There is a bug in this code - <code>find_verified_user</code> does not actually return the value of <code>current_user</code>. Rather if <code>current_user</code> evaluates to true it will return nil."}, {"owner": {"reputation": 3145, "user_id": 1483518, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ywXUt.jpg?s=128&g=1", "display_name": "zer02", "link": "https://stackoverflow.com/users/1483518/zer02"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1506514152, "post_id": 46447348, "comment_id": 79850623, "body": "@max I am using devise with a helper function in my <code>application_helper.rb</code>  ` def current_user     return unless session[:user_id]     @current_user ||= User.find(session[:user_id])   end`"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1506514224, "post_id": 46447348, "comment_id": 79850663, "body": "Yes, but the logic in your private method is still broken. Try <code>if true; else; false; end</code> - it returns nil."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1506514403, "post_id": 46447348, "comment_id": 79850781, "body": "You need to write it as <code>if current_user; current_user; else; reject_unauthorized_connection; end</code>."}, {"owner": {"reputation": 3145, "user_id": 1483518, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ywXUt.jpg?s=128&g=1", "display_name": "zer02", "link": "https://stackoverflow.com/users/1483518/zer02"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1506514490, "post_id": 46447348, "comment_id": 79850843, "body": "Yes, thanks. Even if I uncomment the auth process. The rake task does not send the message."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1506514529, "post_id": 46447348, "comment_id": 79850874, "body": "Did you try checking the rails server log?"}, {"owner": {"reputation": 3145, "user_id": 1483518, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ywXUt.jpg?s=128&g=1", "display_name": "zer02", "link": "https://stackoverflow.com/users/1483518/zer02"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1506514651, "post_id": 46447348, "comment_id": 79850939, "body": "Yes. It only says the user subscribed to the FileStatusChannel with uuid. I also see the pings in the console of Chrome. But no broadcast is being emitted."}, {"owner": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "edited": false, "score": 0, "creation_date": 1506522875, "post_id": 46447348, "comment_id": 79856894, "body": "You have to use middleware to transmit messages outside of the current rails process. Do you have Redis up and running? <a href=\"http://guides.rubyonrails.org/action_cable_overview.html#subscription-adapter\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}, {"owner": {"reputation": 3145, "user_id": 1483518, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ywXUt.jpg?s=128&g=1", "display_name": "zer02", "link": "https://stackoverflow.com/users/1483518/zer02"}, "reply_to_user": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "edited": false, "score": 0, "creation_date": 1506522915, "post_id": 46447348, "comment_id": 79856920, "body": "@ddubs No, I wanted to avoid redis in development mode. Is it mandatory?"}, {"owner": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "edited": false, "score": 0, "creation_date": 1506522962, "post_id": 46447348, "comment_id": 79856959, "body": "Unfortunately it is mandatory since rake is starting a new process. Same thing if you tried to broadcast from the console as well."}, {"owner": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "edited": false, "score": 0, "creation_date": 1506523237, "post_id": 46447348, "comment_id": 79857161, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/35176934/actioncable-server-broadcast-from-the-console\">ActionCable.server.broadcast from the console</a>"}], "owner": {"reputation": 3145, "user_id": 1483518, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ywXUt.jpg?s=128&g=1", "display_name": "zer02", "link": "https://stackoverflow.com/users/1483518/zer02"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 825, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1506514979, "creation_date": 1506513617, "last_edit_date": 1506514979, "question_id": 46447348, "link": "https://stackoverflow.com/questions/46447348/rails-action-cable-not-receiving-data-subscribe-on-model", "title": "Rails Action Cable not receiving data? Subscribe on model", "body": "<p>I was trying out the action cable functionality of Rails 5.\nIf I try to broadcast using <code>rake</code> task, I am not receiving a message.\nDoes anyone see the problem? The connection is being established.\nThank you very much.</p>\n\n<p><strong>channel.rb</strong></p>\n\n<pre><code>module ApplicationCable\n  class Channel &lt; ActionCable::Channel::Base\n\n\n    def connect\n      self.current_user = find_verified_user\n    end\n\n    private\n    def find_verified_user\n      if current_user\n         return current_user\n      else\n        reject_unauthorized_connection\n      end\n    end\n\n  end\nend\n</code></pre>\n\n<p><strong>FileStatusChannel.rb</strong></p>\n\n<pre><code>class FileStatusChannel &lt; ApplicationCable::Channel\n  def subscribed\n    matching_job = MatchingJob.find_by_uuid(params[:file_uuid])\n    stream_for matching_job\n  end\nend\n</code></pre>\n\n<p><strong>Javascript</strong></p>\n\n<pre><code>&lt;script&gt;\n        // Action Cable\n        (function() {\n            this.App || (this.App = {});\n\n            App.cable = ActionCable.createConsumer();\n        }).call(this);\n\n        App.cable.subscriptions.create({\n            channel: \"FileStatusChannel\",\n            file_uuid: \"18e01f4e-1d20-4905-b713-9ddc7adc4ae0\",\n            received: function(data) {\n                console.log(data);\n            }\n        });\n&lt;/script&gt;\n</code></pre>\n\n<p><strong>Rake Task</strong></p>\n\n<pre><code>matching_job = MatchingJob.find_by_uuid(\"18e01f4e-1d20-4905-b713-9ddc7adc4ae0\")\nFileStatusChannel.broadcast_to(matching_job, {hello: \"test\"})\n</code></pre>\n\n<p><strong>Rails Log</strong></p>\n\n<pre><code>FileStatusChannel is transmitting the subscription confirmation\nFileStatusChannel is streaming from file_status:Z2lkOi8vcmV0YWlscXVhbnQtc3RhYmxlL01hdGNoaW5nSm9iLzc\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation", "has-many-through", "validates-uniqueness-of"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1506513599, "post_id": 46446937, "comment_id": 79850252, "body": "Do you mean that you can create several membership records with the same <code>page_id</code> and <code>user_id</code>?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1506514784, "post_id": 46446937, "comment_id": 79851016, "body": "Maybe we are saying the same thing but its hard to tell if you are expecting the correct result of that validation. You should provide a reproducable example (for example from the Rails console) where you show the result of for example <code>2.times { Membership.create!(user: User.first, page: Page.first) }</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1682647"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1506516031, "post_id": 46446937, "comment_id": 79851797, "body": "I am able to call Page.users.create name: &#39;user name&#39; multiple times."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1506516369, "post_id": 46446937, "comment_id": 79852043, "body": "Unless you have a uniqueness validation for <code>User#name</code> that will create multiple users which is why the validation on <code>Membership</code> passes. Run <code>2.times { Membership.create!(user: User.first, page: Page.first) }</code> and you should see that it works. (as in that a RecordNotValid error is raised)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1682647"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1506516451, "post_id": 46446937, "comment_id": 79852100, "body": "Thanks @Max, maybe am going about it the wrong way. What I would like to achieve is to NOT have same user added to a page as member multiple times."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1682647"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1506516690, "post_id": 46446937, "comment_id": 79852278, "body": "Going through the Membership model worked, post it in the answers so we can close this question."}], "answers": [{"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 2, "last_activity_date": 1506517777, "creation_date": 1506517777, "answer_id": 46448774, "question_id": 46446937, "link": "https://stackoverflow.com/questions/46446937/uniqueness-validation-not-working-on-has-many-though-association-on-rails-5/46448774#46448774", "title": "Uniqueness validation not working on has_many :though association on rails 5", "body": "<p>To trigger the validations in a associated model you need to use <a href=\"http://api.rubyonrails.org/v5.1/classes/ActiveRecord/Validations/ClassMethods.html#method-i-validates_associated\" rel=\"nofollow noreferrer\"><code>validates_associated</code></a>:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_many :memberships\n  has_many :pages, through: :memberships\n  validates_associated :memberships\nend\n\nclass Page &lt; ApplicationRecord\n  has_many :memberships\n  has_many :users, through: :memberships\n  validates_associated :memberships\nend\n\nclass Membership &lt; ApplicationRecord\n  belongs_to :user\n  belongs_to :page\n  validates :page_id, uniqueness: { scope: :user_id}\nend\n</code></pre>\n\n<p>This can be a real gotcha as validations on associations are not called when they are created implicitly.</p>\n\n<p>Additionally its a good idea to create a compound database index which prevents <a href=\"https://robots.thoughtbot.com/the-perils-of-uniqueness-validations\" rel=\"nofollow noreferrer\">possible race conditions</a>:</p>\n\n<pre><code>class AddCompoundIndexToMemberships &lt; ActiveRecord::Migration[5.0]\n  def change\n    add_index :memberships, [:page_id, :user_id], unique: true\n  end\nend\n</code></pre>\n\n<p>This ensures on the DB level that no two identical rows can be created. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1682647"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 604, "favorite_count": 2, "accepted_answer_id": 46448774, "answer_count": 1, "score": 1, "last_activity_date": 1506517777, "creation_date": 1506512397, "question_id": 46446937, "link": "https://stackoverflow.com/questions/46446937/uniqueness-validation-not-working-on-has-many-though-association-on-rails-5", "title": "Uniqueness validation not working on has_many :though association on rails 5", "body": "<p><strong>Models</strong></p>\n\n<pre><code>class User &lt; ApplicationRecord\n    has_many :memberships\n    has_many :pages, through: :memberships \nend\n\nclass Page &lt; ApplicationRecord\n    has_many :memberships\n    has_many :users, through: :memberships \nend\n\nclass Membership &lt; ApplicationRecord\n    belongs_to :user\n    belongs_to :page\n\n    validates :page_id, uniqueness: { scope: :user_id}\nend\n</code></pre>\n\n<p>Am able to create multiple user on pages and pages on user, it's like the validation isn't getting called.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rvm"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4154276"}, "edited": false, "score": 0, "creation_date": 1506510801, "post_id": 46446401, "comment_id": 79848473, "body": "it gave me &quot;Bundler attempted to update spring but its version stayed the same&quot;"}], "tags": [], "owner": {"reputation": 10770, "user_id": 381874, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/k7VRE.jpg?s=128&g=1", "display_name": "Sachin R", "link": "https://stackoverflow.com/users/381874/sachin-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1506510617, "creation_date": 1506510617, "answer_id": 46446401, "question_id": 46446284, "link": "https://stackoverflow.com/questions/46446284/rvm-path-error-running-rails-s/46446401#46446401", "title": "rvm PATH error running rails s", "body": "<p>try </p>\n\n<pre><code>  bundle update spring &amp;&amp; bundle exec spring binstub --remove --all &amp;&amp; bundle exec spring binstub --all\n</code></pre>\n\n<p>taken from <a href=\"https://gist.github.com/webdev1001/e848abef8064c55c2f6443a282f75651\" rel=\"nofollow noreferrer\">https://gist.github.com/webdev1001/e848abef8064c55c2f6443a282f75651</a></p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4154276"}, "edited": false, "score": 0, "creation_date": 1506510836, "post_id": 46446430, "comment_id": 79848503, "body": "it gave me &quot;Bundler attempted to update spring but its version stayed the same&quot;"}], "tags": [], "owner": {"reputation": 536, "user_id": 8436554, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/d3XUa.jpg?s=128&g=1", "display_name": "Amr Adel", "link": "https://stackoverflow.com/users/8436554/amr-adel"}, "is_accepted": false, "score": 0, "last_activity_date": 1506510686, "creation_date": 1506510686, "answer_id": 46446430, "question_id": 46446284, "link": "https://stackoverflow.com/questions/46446284/rvm-path-error-running-rails-s/46446430#46446430", "title": "rvm PATH error running rails s", "body": "<p>Check <a href=\"https://github.com/rubygems/rubygems/issues/1551\" rel=\"nofollow noreferrer\">this</a>\nor <a href=\"https://stackoverflow.com/questions/37864054/rails-5-array-values-in-the-parameter-to-gem-paths-are-deprecated\">this</a></p>\n\n<p>Run <code>bundle update spring &amp;&amp; bundle exec spring binstub --remove --all &amp;&amp; bundle exec spring binstub --all</code> on your terminal.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4154276"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 238, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1506687811, "creation_date": 1506510257, "last_edit_date": 1506687811, "question_id": 46446284, "link": "https://stackoverflow.com/questions/46446284/rvm-path-error-running-rails-s", "title": "rvm PATH error running rails s", "body": "<p>I've created a rails application with rails 5, but running command</p>\n\n<pre><code>rails s\n</code></pre>\n\n<p>I got this error</p>\n\n<pre><code>Array values in the parameter to `Gem.paths=` are deprecated.\nPlease use a String or nil.\nAn Array ({\"GEM_PATH\"=&gt;[\"/home/davide/.rvm/gems/ruby-2.4.2\", \"/home/davide/.rvm/gems/ruby-2.4.2@global\"]}) was passed in from bin/rails:3:in `load'\n=&gt; Booting WEBrick\n=&gt; Rails 4.2.7.1 application starting in development on http://localhost:3000\n=&gt; Run `rails server -h` for more startup options\n=&gt; Ctrl-C to shutdown server\n/home/davide/.rvm/gems/ruby-2.4.2/gems/activesupport-4.2.7.1/lib/active_support/core_ext/numeric/conversions.rb:121: warning: constant ::Fixnum is deprecated\n/home/davide/.rvm/gems/ruby-2.4.2/gems/activesupport-4.2.7.1/lib/active_support/core_ext/numeric/conversions.rb:121: warning: constant ::Bignum is deprecated\nExiting /home/davide/.rvm/gems/ruby-2.4.2/gems/activesupport-4.2.7.1/lib/active_support/core_ext/numeric/conversions.rb:124:in `block (2 levels) in &lt;class:Numeric&gt;': stack level too deep (SystemStackError)\nfrom /home/davide/.rvm/gems/ruby-2.4.2/gems/activesupport-4.2.7.1/lib/active_support/core_ext/numeric/conversions.rb:131:in `block (2 levels) in &lt;class:Numeric&gt;'\nfrom /home/davide/.rvm/gems/ruby-2.4.2/gems/activesupport-4.2.7.1/lib/active_support/core_ext/numeric/conversions.rb:131:in `block (2 levels) in &lt;class:Numeric&gt;'\nfrom /home/davide/.rvm/gems/ruby-2.4.2/gems/activesupport-4.2.7.1/lib/active_support/core_ext/numeric/conversions.rb:131:in `block (2 levels) in &lt;class:Numeric&gt;'\nfrom /home/davide/.rvm/gems/ruby-2.4.2/gems/activesupport-4.2.7.1/lib/active_support/core_ext/numeric/conversions.rb:131:in `block (2 levels) in &lt;class:Numeric&gt;'\nfrom /home/davide/.rvm/gems/ruby-2.4.2/gems/activesupport-4.2.7.1/lib/active_support/core_ext/numeric/conversions.rb:131:in `block (2 levels) in &lt;class:Numeric&gt;'\nfrom /home/davide/.rvm/gems/ruby-2.4.2/gems/activesupport-4.2.7.1/lib/active_support/core_ext/numeric/conversions.rb:131:in `block (2 levels) in &lt;class:Numeric&gt;'\nfrom /home/davide/.rvm/gems/ruby-2.4.2/gems/activesupport-4.2.7.1/lib/active_support/core_ext/numeric/conversions.rb:131:in `block (2 levels) in &lt;class:Numeric&gt;'\nfrom /home/davide/.rvm/gems/ruby-2.4.2/gems/activesupport-4.2.7.1/lib/active_support/core_ext/numeric/conversions.rb:131:in `block (2 levels) in &lt;class:Numeric&gt;'\n ... 5010 levels...\nfrom /home/davide/Scrivania/Led2/bin/spring:13:in `require'\nfrom /home/davide/Scrivania/Led2/bin/spring:13:in `&lt;top (required)&gt;'\nfrom bin/rails:3:in `load'\nfrom bin/rails:3:in `&lt;main&gt;'\n</code></pre>\n\n<p>Anyone could help me?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "controller", "rspec-expectations"], "answers": [{"tags": [], "owner": {"reputation": 188, "user_id": 4627092, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/017af18e677c0990acaa8eff4eec9118?s=128&d=identicon&r=PG&f=1", "display_name": "Denis Romanovsky", "link": "https://stackoverflow.com/users/4627092/denis-romanovsky"}, "is_accepted": false, "score": 1, "last_activity_date": 1506512221, "creation_date": 1506512221, "answer_id": 46446882, "question_id": 46446141, "link": "https://stackoverflow.com/questions/46446141/rspec-expectinstance-to-receive-method-not-working-as-expected/46446882#46446882", "title": "Rspec expect(instance) to receive method not working as expected", "body": "<p>Your @payment in specs is actually a totally different variable, which is part of specs class, not the controller. I may be wrong, but that is my assumption from the parts of code you post - add specs code for more info.\nAs of the solution, may use 'stub any instance'</p>\n\n<p><code>Payment.any_instance.stub(:do_something).and_return(:smthing)</code></p>\n\n<p>A more complicated approach - using doubles</p>\n"}, {"tags": [], "owner": {"reputation": 2735, "user_id": 7006199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFqCJ.jpg?s=128&g=1", "display_name": "Nimish Gupta", "link": "https://stackoverflow.com/users/7006199/nimish-gupta"}, "is_accepted": false, "score": 2, "last_activity_date": 1506512321, "creation_date": 1506512321, "answer_id": 46446909, "question_id": 46446141, "link": "https://stackoverflow.com/questions/46446141/rspec-expectinstance-to-receive-method-not-working-as-expected/46446909#46446909", "title": "Rspec expect(instance) to receive method not working as expected", "body": "<p>Firstly you need to stub the lines in controller in order to <code>expect</code> some code</p>\n\n<pre><code>before do\n  allow(Payment).to receive(:find_by).and_return(payment)\n  allow(payment).to receive(:update).and_return(true)\n  allow(payment).to receive(:do_something)\nend\n</code></pre>\n\n<p>Also, instance variable in controller won't be directly accessible in rspecs.</p>\n\n<p>So, First create a payment object in rspecs using <code>let</code> and use it <code>before</code> block like I did it in above solution </p>\n"}], "owner": {"reputation": 61, "user_id": 6613807, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AOM2nUz18-g/AAAAAAAAAAI/AAAAAAAACWY/g8b7oJdxc-k/photo.jpg?sz=128", "display_name": "Ajay joseph", "link": "https://stackoverflow.com/users/6613807/ajay-joseph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3963, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1506512321, "creation_date": 1506509808, "last_edit_date": 1506510452, "question_id": 46446141, "link": "https://stackoverflow.com/questions/46446141/rspec-expectinstance-to-receive-method-not-working-as-expected", "title": "Rspec expect(instance) to receive method not working as expected", "body": "<pre><code>#controller file\ndef update\n  @payment = Payment.find_by(reference_id: params[:reference_id])\n  if @payment.update(update_params)\n    @payment.do_something\n  end\nend\n</code></pre>\n\n<p>when trying to spec if do_something method was called, by</p>\n\n<pre><code>expect(@payment).to receive(:do_something)\n</code></pre>\n\n<p>it says </p>\n\n<pre><code>expected: 1 time with any arguments\nreceived: 0 times with any arguments\n</code></pre>\n\n<p>do_something is in my Payment Class. It is actually being called, but rspec says not. </p>\n\n<p>Any ideas? thanks in advance</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1506509213, "post_id": 46445839, "comment_id": 79847390, "body": "What&#39;s in your controller and view?"}, {"owner": {"reputation": 1, "user_id": 8681962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0abd2a78a10763f002478097a1f99bd0?s=128&d=identicon&r=PG&f=1", "display_name": "\u674e\u6021\u6587", "link": "https://stackoverflow.com/users/8681962/%e6%9d%8e%e6%80%a1%e6%96%87"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1506509850, "post_id": 46445839, "comment_id": 79847810, "body": "Just updated that above."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1506511768, "post_id": 46445839, "comment_id": 79849122, "body": "Did you run the seed file with <code>bin&#47;rake db:seed</code>?"}, {"owner": {"reputation": 1, "user_id": 8681962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0abd2a78a10763f002478097a1f99bd0?s=128&d=identicon&r=PG&f=1", "display_name": "\u674e\u6021\u6587", "link": "https://stackoverflow.com/users/8681962/%e6%9d%8e%e6%80%a1%e6%96%87"}, "edited": false, "score": 0, "creation_date": 1506512254, "post_id": 46445839, "comment_id": 79849418, "body": "Yes, i did that. All other contents in the seed could be shown."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1506513230, "post_id": 46445839, "comment_id": 79850018, "body": "Did you verify it by running <code>Detail.all</code> in the console? In seed files you should use the bang method <code>.create!</code> which will raise an error if the record is invalid. Otherwise it will just silently fail."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1506513392, "post_id": 46445839, "comment_id": 79850118, "body": "You can clean the seeds file up at the same time by iterating with <code>(&#39;A&#39;..&#39;D&#39;).each_with_index.map do |letter, index|; end</code>"}, {"owner": {"reputation": 1, "user_id": 8681962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0abd2a78a10763f002478097a1f99bd0?s=128&d=identicon&r=PG&f=1", "display_name": "\u674e\u6021\u6587", "link": "https://stackoverflow.com/users/8681962/%e6%9d%8e%e6%80%a1%e6%96%87"}, "edited": false, "score": 0, "creation_date": 1506519450, "post_id": 46445839, "comment_id": 79854343, "body": "I just tried to run <code>Detail.all</code> in the console and it gives <code>#ActiveRecord::Relation []</code>"}], "owner": {"reputation": 1, "user_id": 8681962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0abd2a78a10763f002478097a1f99bd0?s=128&d=identicon&r=PG&f=1", "display_name": "\u674e\u6021\u6587", "link": "https://stackoverflow.com/users/8681962/%e6%9d%8e%e6%80%a1%e6%96%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1506509801, "creation_date": 1506508997, "last_edit_date": 1506509801, "question_id": 46445839, "link": "https://stackoverflow.com/questions/46445839/seeding-multiple-models-in-rails", "title": "seeding multiple models in rails", "body": "<p>I created three model, <code>Task</code> <code>Detail</code> and <code>Record</code>.</p>\n\n<p>When display my view on the browser, everything related to <code>Detail</code> disappear while things related <code>Task</code> and <code>Record</code> remains normal.</p>\n\n<p>These are my models in app/models</p>\n\n<pre><code>class Detail &lt; ActiveRecord::Base\n  belongs_to :record\n  belongs_to :task\nend\nclass Record &lt; ActiveRecord::Base\n  has_many :details\nend\nclass Task &lt; ActiveRecord::Base\n  has_many :details\nend\n</code></pre>\n\n<p>db/migrate</p>\n\n<pre><code>class CreateTasks &lt; ActiveRecord::Migration\n  def change\n    create_table :tasks do |t|\n      t.string :title\n      t.string :cell\n      t.boolean :done\n      t.timestamps\n    end\n  end\nend\nclass CreateDetails &lt; ActiveRecord::Migration\n  def change\n    create_table :details do |t|\n      t.string :title\n      t.string :valve\n      t.string :cell\n      t.string :description\n      t.boolean :done\n      t.integer :order\n      t.references :task\n      t.references :record\n      t.timestamps\n    end\n  end\nend\nclass CreateRecords &lt; ActiveRecord::Migration\n  def change\n    create_table :records do |t|\n      t.string :cell\n      t.string :valve\n      t.string :state\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>db/migrate/seeds.rb</p>\n\n<pre><code>r1 = Record.create(cell: \"cell1\", valve: \"A\", state: \"N/A\")\nr2 = Record.create(cell: \"cell1\", valve: \"B\", state: \"N/A\")\nr3 = Record.create(cell: \"cell2\", valve: \"C\", state: \"N/A\")\nr4 = Record.create(cell: \"cell2\", valve: \"D\", state: \"N/A\")\n\nt1 = Task.create(title: \"Task1\", cell: \"cell1\", done: false)\nDetail.create(title: \"Detail1\", description: \"This is detail1.1\", order: 1, \nvalve: \"A\", task_id: t1.id, done: false, cell: \"cell1\", record_id: r1.id)\nDetail.create(title: \"Detail2\", description: \"This is detail2.1\", order: 2, \nvalve: \"B\", task_id: t1.id, done: false, cell: \"cell1\", record_id: r2.id)\nt2 = Task.create(title: \"Task2\", cell: \"cell2\", done: false)\nDetail.create(title: \"Detail3\", description: \"This is detail3\", order: 1, \nvalve: \"C\", task_id: t2.id, done: false, cell: \"cell2\", record_id: r3.id)\nDetail.create(title: \"Detail4\", description: \"This is detail4\", order: 2, \nvalve: \"D\", task_id: t2.id, done: false, cell: \"cell2\", record_id: r4.id)\nt3 = Task.create(title: \"Task3\", cell: \"cell1\", done: false)\nDetail.create(title: \"Detail5\", description: \"This is detail5\", order: 1, \nvalve: \"A\", task_id: t3.id, done: false, cell: \"cell1\", record_id: r1.id)\nDetail.create(title: \"Detail6\", description: \"This is detail6\", order: 2, \nvalve: \"B\", task_id: t3.id, done: false, cell: \"cell1\", record_id: r2.id) \nt4 = Task.create(title: \"Task4\", cell: \"cell2\", done: false)\nDetail.create(title: \"Detail7\", description: \"This is detail7\", order: 1, \nvalve: \"C\", task_id: t4.id, done: false, cell: \"cell2\", record_id: r3.id)\nDetail.create(title: \"Detail8\", description: \"This is detail8\", order: 2, \nvalve: \"D\", task_id: t4.id, done: false, cell: \"cell2\", record_id: r4.id)\n</code></pre>\n\n<p>These are my controllers</p>\n\n<pre><code>class TasksController &lt; ApplicationController\n  def index\n    @tasks = Task.all\n  end\n\n  def show\n    @task = Task.find(params[:id])\n    @details = @task.details\n  end\nend\n\nclass DetailsController &lt; ApplicationController\n  def index\n   @details = Detail.all\n  end\n  def show\n    @detail = Detail.find(params[:id])\n    @task = @detail.task\n    @details = @task.details\n    next_order = @detail.order + 1\n    @details.each do |d|\n      if d.order = next_order\n        @next_detail = d\n      end\n    end\n  end\n end\n\nclass RecordsController &lt; ApplicationController\n  def index\n    @records = Record.all\n  end\n  def show\n    @record = Record.find(params[:id])\n    @details = @record.details\n  end\n  def edit\n    @record = Record.find(params[:id])\n  end\n  def update\n    @record = Record.find(params[:id])\n    if @record.update_attributes(record_params)\n      redirect_to(\"/records\")\n      else\n      render 'edit'\n    end\n  end\n\n  private\n  def record_params\n    params.require(:record).permit(:state)\n  end\nend\n</code></pre>\n\n<p>these are my views</p>\n\n<p>details/index.html.erb</p>\n\n<pre><code>&lt;div class=\"tasklist\"&gt;\n  &lt;h2&gt;TaskList&lt;/h2&gt;\n    &lt;% @details.each do |d| %&gt;\n      &lt;div class=\"tasks\"&gt;\n        &lt;%= link_to d.title, detail_path(d) %&gt;\n      &lt;/div&gt;\n    &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>details/show.html.erb</p>\n\n<pre><code>&lt;h1&gt;&lt;%= @detail.title %&gt;&lt;/h1&gt;\n&lt;p&gt;&lt;%= @detail.description %&gt;&lt;/p&gt;\n&lt;%= link_to \"back\", task_path(@task) %&gt;\n&lt;%= link_to \"next\", detail_path(@next_detail) %&gt;\n</code></pre>\n\n<p>tasks/show.html.erb</p>\n\n<pre><code>&lt;h2&gt;&lt;%= @task.title %&gt;&lt;/h2&gt;\n\n&lt;table&gt;\n    &lt;tbody&gt;\n      &lt;% @details.each do |d| %&gt;\n        &lt;tr&gt;\n          &lt;th&gt;&lt;%= d.order %&gt;&lt;/th&gt;\n          &lt;td&gt;&lt;%= link_to d.title, detail_path(d) %&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n      &lt;% end %&gt;\n    &lt;/tbody&gt;\n  &lt;/table&gt;\n</code></pre>\n"}, {"tags": ["json", "ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1506508754, "post_id": 46445551, "comment_id": 79847072, "body": "What&#39;s the value of <code>hash</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "edited": false, "score": 0, "creation_date": 1506508619, "post_id": 46445650, "comment_id": 79846989, "body": "It wont work, since the key name itself <code>&#47;usr</code> only."}, {"owner": {"reputation": 412, "user_id": 5305930, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/gl6vR.jpg?s=128&g=1", "display_name": "omurbek", "link": "https://stackoverflow.com/users/5305930/omurbek"}, "reply_to_user": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "edited": false, "score": 0, "creation_date": 1506509359, "post_id": 46445650, "comment_id": 79847470, "body": "you are right. <code>val.class</code> returns <code>hash</code> but <code>val[&quot;local_disk_stats&quot;].class</code> returns <code>string</code>. btw <code>val.keys</code> returns <code>local_disk_stats</code> as a hash key. can you post your <code>hash</code> object data?"}, {"owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "edited": false, "score": 0, "creation_date": 1506510737, "post_id": 46445650, "comment_id": 79848419, "body": "Update the data in the question itself"}], "tags": [], "owner": {"reputation": 412, "user_id": 5305930, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/gl6vR.jpg?s=128&g=1", "display_name": "omurbek", "link": "https://stackoverflow.com/users/5305930/omurbek"}, "is_accepted": false, "score": -1, "last_activity_date": 1506508466, "creation_date": 1506508466, "answer_id": 46445650, "question_id": 46445551, "link": "https://stackoverflow.com/questions/46445551/unable-to-parse-json-data-in-ruby/46445650#46445650", "title": "Unable to parse JSON data in ruby", "body": "<p>Try this <code>val[\"local_disk_stats\"][\"usr\"]</code> without slash <code>/</code></p>\n"}, {"comments": [{"owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "edited": false, "score": 0, "creation_date": 1506524179, "post_id": 46449080, "comment_id": 79857824, "body": "It worked. Thanks for pointed out eval which I missed to remember."}], "tags": [], "owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "is_accepted": true, "score": 1, "last_activity_date": 1506518678, "creation_date": 1506518678, "answer_id": 46449080, "question_id": 46445551, "link": "https://stackoverflow.com/questions/46445551/unable-to-parse-json-data-in-ruby/46449080#46449080", "title": "Unable to parse JSON data in ruby", "body": "<p>I would say that the main issue is that in your <code>config[\"local_disk_stats\"]</code> the string is not a valid JSON but an <code>Hash</code> instance <code>.to_s</code></p>\n\n<p>In this specific case you should first parse the string as you were doing (see <code>2.4.0 :006</code> below) and then <code>eval(val[\"local_disk_stats\"])</code> instead of parsing it:</p>\n\n<pre><code>2.4.0 :001 &gt; require 'json'\n =&gt; true \n2.4.0 :002 &gt; asn =\"{\\\"/usr\\\"=&gt; {\\\"Used\\\"=&gt; \\\"4263MB\\\", \\\"Total\\\"=&gt; \\\"5034MB\\\", \\\"Free\\\"=&gt; \\\"514MB\\\"}, \\\"/var\\\"=&gt; {\\\"Used\\\"=&gt; \\\"883MB\\\", \\\"Total\\\"=&gt; \\\"3018MB\\\", \\\"Free\\\"=&gt; \\\"1981MB\\\"}, \\\"/\\\"=&gt; {\\\"Used\\\"=&gt; \\\"1484MB\\\", \\\"Total\\\"=&gt; \\\"2015MB\\\", \\\"Free\\\"=&gt; \\\"428MB\\\"}, \\\"/home\\\"=&gt; {\\\"Used\\\"=&gt; \\\"96MB\\\", \\\"Total\\\"=&gt; \\\"1019MB\\\", \\\"Free\\\"=&gt; \\\"870MB\\\"}}\"\n =&gt; \"{\\\"/usr\\\"=&gt; {\\\"Used\\\"=&gt; \\\"4263MB\\\", \\\"Total\\\"=&gt; \\\"5034MB\\\", \\\"Free\\\"=&gt; \\\"514MB\\\"}, \\\"/var\\\"=&gt; {\\\"Used\\\"=&gt; \\\"883MB\\\", \\\"Total\\\"=&gt; \\\"3018MB\\\", \\\"Free\\\"=&gt; \\\"1981MB\\\"}, \\\"/\\\"=&gt; {\\\"Used\\\"=&gt; \\\"1484MB\\\", \\\"Total\\\"=&gt; \\\"2015MB\\\", \\\"Free\\\"=&gt; \\\"428MB\\\"}, \\\"/home\\\"=&gt; {\\\"Used\\\"=&gt; \\\"96MB\\\", \\\"Total\\\"=&gt; \\\"1019MB\\\", \\\"Free\\\"=&gt; \\\"870MB\\\"}}\" \n2.4.0 :003 &gt; hash = Hash.new\n =&gt; {} \n2.4.0 :004 &gt; hash[\"local_disk_stats\"] = asn\n =&gt; \"{\\\"/usr\\\"=&gt; {\\\"Used\\\"=&gt; \\\"4263MB\\\", \\\"Total\\\"=&gt; \\\"5034MB\\\", \\\"Free\\\"=&gt; \\\"514MB\\\"}, \\\"/var\\\"=&gt; {\\\"Used\\\"=&gt; \\\"883MB\\\", \\\"Total\\\"=&gt; \\\"3018MB\\\", \\\"Free\\\"=&gt; \\\"1981MB\\\"}, \\\"/\\\"=&gt; {\\\"Used\\\"=&gt; \\\"1484MB\\\", \\\"Total\\\"=&gt; \\\"2015MB\\\", \\\"Free\\\"=&gt; \\\"428MB\\\"}, \\\"/home\\\"=&gt; {\\\"Used\\\"=&gt; \\\"96MB\\\", \\\"Total\\\"=&gt; \\\"1019MB\\\", \\\"Free\\\"=&gt; \\\"870MB\\\"}}\" \n2.4.0 :005 &gt; string = JSON.pretty_generate(hash)\n =&gt; \"{\\n  \\\"local_disk_stats\\\": \\\"{\\\\\\\"/usr\\\\\\\"=&gt; {\\\\\\\"Used\\\\\\\"=&gt; \\\\\\\"4263MB\\\\\\\", \\\\\\\"Total\\\\\\\"=&gt; \\\\\\\"5034MB\\\\\\\", \\\\\\\"Free\\\\\\\"=&gt; \\\\\\\"514MB\\\\\\\"}, \\\\\\\"/var\\\\\\\"=&gt; {\\\\\\\"Used\\\\\\\"=&gt; \\\\\\\"883MB\\\\\\\", \\\\\\\"Total\\\\\\\"=&gt; \\\\\\\"3018MB\\\\\\\", \\\\\\\"Free\\\\\\\"=&gt; \\\\\\\"1981MB\\\\\\\"}, \\\\\\\"/\\\\\\\"=&gt; {\\\\\\\"Used\\\\\\\"=&gt; \\\\\\\"1484MB\\\\\\\", \\\\\\\"Total\\\\\\\"=&gt; \\\\\\\"2015MB\\\\\\\", \\\\\\\"Free\\\\\\\"=&gt; \\\\\\\"428MB\\\\\\\"}, \\\\\\\"/home\\\\\\\"=&gt; {\\\\\\\"Used\\\\\\\"=&gt; \\\\\\\"96MB\\\\\\\", \\\\\\\"Total\\\\\\\"=&gt; \\\\\\\"1019MB\\\\\\\", \\\\\\\"Free\\\\\\\"=&gt; \\\\\\\"870MB\\\\\\\"}}\\\"\\n}\" \n2.4.0 :006 &gt; val = JSON.parse(string)\n =&gt; {\"local_disk_stats\"=&gt;\"{\\\"/usr\\\"=&gt; {\\\"Used\\\"=&gt; \\\"4263MB\\\", \\\"Total\\\"=&gt; \\\"5034MB\\\", \\\"Free\\\"=&gt; \\\"514MB\\\"}, \\\"/var\\\"=&gt; {\\\"Used\\\"=&gt; \\\"883MB\\\", \\\"Total\\\"=&gt; \\\"3018MB\\\", \\\"Free\\\"=&gt; \\\"1981MB\\\"}, \\\"/\\\"=&gt; {\\\"Used\\\"=&gt; \\\"1484MB\\\", \\\"Total\\\"=&gt; \\\"2015MB\\\", \\\"Free\\\"=&gt; \\\"428MB\\\"}, \\\"/home\\\"=&gt; {\\\"Used\\\"=&gt; \\\"96MB\\\", \\\"Total\\\"=&gt; \\\"1019MB\\\", \\\"Free\\\"=&gt; \\\"870MB\\\"}}\"} \n2.4.0 :007 &gt; val[\"local_disk_stats\"]\n =&gt; \"{\\\"/usr\\\"=&gt; {\\\"Used\\\"=&gt; \\\"4263MB\\\", \\\"Total\\\"=&gt; \\\"5034MB\\\", \\\"Free\\\"=&gt; \\\"514MB\\\"}, \\\"/var\\\"=&gt; {\\\"Used\\\"=&gt; \\\"883MB\\\", \\\"Total\\\"=&gt; \\\"3018MB\\\", \\\"Free\\\"=&gt; \\\"1981MB\\\"}, \\\"/\\\"=&gt; {\\\"Used\\\"=&gt; \\\"1484MB\\\", \\\"Total\\\"=&gt; \\\"2015MB\\\", \\\"Free\\\"=&gt; \\\"428MB\\\"}, \\\"/home\\\"=&gt; {\\\"Used\\\"=&gt; \\\"96MB\\\", \\\"Total\\\"=&gt; \\\"1019MB\\\", \\\"Free\\\"=&gt; \\\"870MB\\\"}}\" \n2.4.0 :008 &gt; output = eval(val[\"local_disk_stats\"])\n =&gt; {\"/usr\"=&gt;{\"Used\"=&gt;\"4263MB\", \"Total\"=&gt;\"5034MB\", \"Free\"=&gt;\"514MB\"}, \"/var\"=&gt;{\"Used\"=&gt;\"883MB\", \"Total\"=&gt;\"3018MB\", \"Free\"=&gt;\"1981MB\"}, \"/\"=&gt;{\"Used\"=&gt;\"1484MB\", \"Total\"=&gt;\"2015MB\", \"Free\"=&gt;\"428MB\"}, \"/home\"=&gt;{\"Used\"=&gt;\"96MB\", \"Total\"=&gt;\"1019MB\", \"Free\"=&gt;\"870MB\"}} \n2.4.0 :009 &gt; output['/usr']\n =&gt; {\"Used\"=&gt;\"4263MB\", \"Total\"=&gt;\"5034MB\", \"Free\"=&gt;\"514MB\"} \n2.4.0 :010 &gt; output['/usr'].class\n =&gt; Hash \n</code></pre>\n\n<p>Anyway, I would suggest you to serialize the content of your <code>local_disk_stats</code> in the original YAML file to prevent this kind of issues</p>\n"}], "owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 46449080, "answer_count": 2, "score": 0, "last_activity_date": 1506518678, "creation_date": 1506508124, "last_edit_date": 1506510723, "question_id": 46445551, "link": "https://stackoverflow.com/questions/46445551/unable-to-parse-json-data-in-ruby", "title": "Unable to parse JSON data in ruby", "body": "<p>Here are the stuffs am trying to extract data but not working as expected.</p>\n\n<pre><code>irb(main):004:0&gt; config = YAML.load_file(\"/etc/test.yaml\")\n.\n.\n.\nirb(main):005:0* asn = config[\"local_disk_stats\"]\n=&gt; \"{\\\"/usr\\\"=&gt; {\\\"Used\\\"=&gt; \\\"4263MB\\\", \\\"Total\\\"=&gt; \\\"5034MB\\\", \\\"Free\\\"=&gt; \\\"514MB\\\"}, \\\"/var\\\"=&gt; {\\\"Used\\\"=&gt; \\\"883MB\\\", \\\"Total\\\"=&gt; \\\"3018MB\\\", \\\"Free\\\"=&gt; \\\"1981MB\\\"}, \\\"/\\\"=&gt; {\\\"Used\\\"=&gt; \\\"1484MB\\\", \\\"Total\\\"=&gt; \\\"2015MB\\\", \\\"Free\\\"=&gt; \\\"428MB\\\"}, \\\"/home\\\"=&gt; {\\\"Used\\\"=&gt; \\\"96MB\\\", \\\"Total\\\"=&gt; \\\"1019MB\\\", \\\"Free\\\"=&gt; \\\"870MB\\\"}}\"\nirb(main):007:0&gt; hash = Hash.new\n=&gt; {}\nirb(main):008:0&gt; hash[\"local_disk_stats\"] = asn\n=&gt; \"{\\\"/usr\\\"=&gt; {\\\"Used\\\"=&gt; \\\"4263MB\\\", \\\"Total\\\"=&gt; \\\"5034MB\\\", \\\"Free\\\"=&gt; \\\"514MB\\\"}, \\\"/var\\\"=&gt; {\\\"Used\\\"=&gt; \\\"883MB\\\", \\\"Total\\\"=&gt; \\\"3018MB\\\", \\\"Free\\\"=&gt; \\\"1981MB\\\"}, \\\"/\\\"=&gt; {\\\"Used\\\"=&gt; \\\"1484MB\\\", \\\"Total\\\"=&gt; \\\"2015MB\\\", \\\"Free\\\"=&gt; \\\"428MB\\\"}, \\\"/home\\\"=&gt; {\\\"Used\\\"=&gt; \\\"96MB\\\", \\\"Total\\\"=&gt; \\\"1019MB\\\", \\\"Free\\\"=&gt; \\\"870MB\\\"}}\"    \nirb(main):041:0&gt; string = JSON.pretty_generate(hash)\n=&gt; \"{\\n  \\\"local_disk_stats\\\": \\\"{\\\\\\\"/usr\\\\\\\"=&gt; {\\\\\\\"Used\\\\\\\"=&gt; \\\\\\\"4263MB\\\\\\\", \\\\\\\"Total\\\\\\\"=&gt; \\\\\\\"5034MB\\\\\\\", \\\\\\\"Free\\\\\\\"=&gt; \\\\\\\"514MB\\\\\\\"}, \\\\\\\"/var\\\\\\\"=&gt; {\\\\\\\"Used\\\\\\\"=&gt; \\\\\\\"883MB\\\\\\\", \\\\\\\"Total\\\\\\\"=&gt; \\\\\\\"3018MB\\\\\\\", \\\\\\\"Free\\\\\\\"=&gt; \\\\\\\"1981MB\\\\\\\"}, \\\\\\\"/\\\\\\\"=&gt; {\\\\\\\"Used\\\\\\\"=&gt; \\\\\\\"1484MB\\\\\\\", \\\\\\\"Total\\\\\\\"=&gt; \\\\\\\"2015MB\\\\\\\", \\\\\\\"Free\\\\\\\"=&gt; \\\\\\\"428MB\\\\\\\"}, \\\\\\\"/home\\\\\\\"=&gt; {\\\\\\\"Used\\\\\\\"=&gt; \\\\\\\"96MB\\\\\\\", \\\\\\\"Total\\\\\\\"=&gt; \\\\\\\"1019MB\\\\\\\", \\\\\\\"Free\\\\\\\"=&gt; \\\\\\\"870MB\\\\\\\"}}\\\"\\n}\"\nirb(main):042:0&gt; \nirb(main):044:0&gt; val = JSON.parse(string)\n=&gt; {\"local_disk_stats\"=&gt;\"{\\\"/usr\\\"=&gt; {\\\"Used\\\"=&gt; \\\"4263MB\\\", \\\"Total\\\"=&gt;\n\\\"5034MB\\\", \\\"Free\\\"=&gt; \\\"514MB\\\"}, \\\"/var\\\"=&gt; {\\\"Used\\\"=&gt; \\\"883MB\\\", \\\"Total\\\"=&gt; \\\"3018MB\\\", \\\"Free\\\"=&gt; \\\"1981MB\\\"}, \\\"/\\\"=&gt; {\\\"Used\\\"=&gt; \\\"1484MB\\\", \\\"Total\\\"=&gt; \\\"2015MB\\\", \\\"Free\\\"=&gt; \\\"428MB\\\"}, \\\"/home\\\"=&gt; {\\\"Used\\\"=&gt; \\\"96MB\\\", \\\"Total\\\"=&gt; \\\"1019MB\\\", \\\"Free\\\"=&gt; \\\"870MB\\\"}}\"}\nirb(main):045:0&gt; val[\"local_disk_stats\"]\n=&gt; \"{\\\"/usr\\\"=&gt; {\\\"Used\\\"=&gt; \\\"4263MB\\\", \\\"Total\\\"=&gt; \\\"5034MB\\\", \\\"Free\\\"=&gt; \\\"514MB\\\"}, \\\"/var\\\"=&gt; {\\\"Used\\\"=&gt; \\\"883MB\\\", \\\"Total\\\"=&gt; \\\"3018MB\\\", \\\"Free\\\"=&gt; \\\"1981MB\\\"}, \\\"/\\\"=&gt; {\\\"Used\\\"=&gt; \\\"1484MB\\\", \\\"Total\\\"=&gt; \\\"2015MB\\\", \\\"Free\\\"=&gt; \\\"428MB\\\"}, \\\"/home\\\"=&gt; {\\\"Used\\\"=&gt; \\\"96MB\\\", \\\"Total\\\"=&gt; \\\"1019MB\\\", \\\"Free\\\"=&gt; \\\"870MB\\\"}}\nirb(main):047:0&gt; val[\"local_disk_stats\"][\"/usr\"]\n=&gt; \"/usr\"\nirb(main):048:0&gt;\n</code></pre>\n\n<p>Not sure what am missing here. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise", "activeadmin"], "comments": [{"owner": {"reputation": 459, "user_id": 5810899, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fjGwDZDO7Zg/AAAAAAAAAAI/AAAAAAAAAPo/Ldy2L5fEqpY/photo.jpg?sz=128", "display_name": "Vaibhav Dhoke", "link": "https://stackoverflow.com/users/5810899/vaibhav-dhoke"}, "edited": false, "score": 0, "creation_date": 1506507747, "post_id": 46445308, "comment_id": 79846453, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/7452418/how-can-i-customize-the-active-admin-layout\">How can I customize the active admin layout?</a>"}, {"owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "edited": false, "score": 0, "creation_date": 1506513436, "post_id": 46445308, "comment_id": 79850144, "body": "Why not just monkey-patch the necessary views from here?  <a href=\"https://github.com/activeadmin/activeadmin/tree/master/lib/active_admin/views\" rel=\"nofollow noreferrer\">github.com/activeadmin/activeadmin/tree/master/lib/active_ad&zwnj;&#8203;min/&hellip;</a>"}, {"owner": {"reputation": 2560, "user_id": 153279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/783f796db3d628f7c268326fb3323de8?s=128&d=identicon&r=PG", "display_name": "Piers C", "link": "https://stackoverflow.com/users/153279/piers-c"}, "edited": false, "score": 0, "creation_date": 1506543615, "post_id": 46445308, "comment_id": 79868767, "body": "Yes, it&#39;s a duplicate.  The original answer discusses how to override the Arbre views, my answer below is a plugin that uses an Erb template at the top level instead."}], "answers": [{"comments": [{"owner": {"reputation": 512, "user_id": 6950578, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2d06a05f48e9f4b810136e8a4348c014?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6950578/john"}, "edited": false, "score": 0, "creation_date": 1506507779, "post_id": 46445394, "comment_id": 79846475, "body": "Thanks but what if I want to use my own theme??"}, {"owner": {"reputation": 459, "user_id": 5810899, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fjGwDZDO7Zg/AAAAAAAAAAI/AAAAAAAAAPo/Ldy2L5fEqpY/photo.jpg?sz=128", "display_name": "Vaibhav Dhoke", "link": "https://stackoverflow.com/users/5810899/vaibhav-dhoke"}, "reply_to_user": {"reputation": 512, "user_id": 6950578, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2d06a05f48e9f4b810136e8a4348c014?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6950578/john"}, "edited": false, "score": 0, "creation_date": 1506508182, "post_id": 46445394, "comment_id": 79846738, "body": "Well, you can override the views from here, active admin does not generate a view but it programmatically generates a view, for more details you can have a look at view that is generated in this <a href=\"https://github.com/activeadmin/activeadmin/tree/master/lib/active_admin/views\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 512, "user_id": 6950578, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2d06a05f48e9f4b810136e8a4348c014?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6950578/john"}, "edited": false, "score": 0, "creation_date": 1506508398, "post_id": 46445394, "comment_id": 79846873, "body": "I have seen your provided link but my answer is still there that I want a method to override the default views.The material you have provided does not address my issue."}, {"owner": {"reputation": 512, "user_id": 6950578, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2d06a05f48e9f4b810136e8a4348c014?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6950578/john"}, "edited": false, "score": 0, "creation_date": 1506508504, "post_id": 46445394, "comment_id": 79846934, "body": "I have my own theme now what is the method/procedure/steps to override the default theme with my own theme?"}, {"owner": {"reputation": 459, "user_id": 5810899, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fjGwDZDO7Zg/AAAAAAAAAAI/AAAAAAAAAPo/Ldy2L5fEqpY/photo.jpg?sz=128", "display_name": "Vaibhav Dhoke", "link": "https://stackoverflow.com/users/5810899/vaibhav-dhoke"}, "reply_to_user": {"reputation": 512, "user_id": 6950578, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2d06a05f48e9f4b810136e8a4348c014?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6950578/john"}, "edited": false, "score": 0, "creation_date": 1506508742, "post_id": 46445394, "comment_id": 79847066, "body": "Can you share which part you want to customise, footer, tabbed_navigation, header, tab as navigation?"}, {"owner": {"reputation": 512, "user_id": 6950578, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2d06a05f48e9f4b810136e8a4348c014?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6950578/john"}, "edited": false, "score": 0, "creation_date": 1506508868, "post_id": 46445394, "comment_id": 79847141, "body": "I have metronic theme I want to change login,forgot password page and then the dashboard page. I want to modify them according to metronic theme."}, {"owner": {"reputation": 512, "user_id": 6950578, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2d06a05f48e9f4b810136e8a4348c014?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6950578/john"}, "edited": false, "score": 0, "creation_date": 1506508939, "post_id": 46445394, "comment_id": 79847183, "body": "specifically header, footer ,sidebar, content means according to my own theme."}, {"owner": {"reputation": 459, "user_id": 5810899, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fjGwDZDO7Zg/AAAAAAAAAAI/AAAAAAAAAPo/Ldy2L5fEqpY/photo.jpg?sz=128", "display_name": "Vaibhav Dhoke", "link": "https://stackoverflow.com/users/5810899/vaibhav-dhoke"}, "reply_to_user": {"reputation": 512, "user_id": 6950578, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2d06a05f48e9f4b810136e8a4348c014?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6950578/john"}, "edited": false, "score": 0, "creation_date": 1506509157, "post_id": 46445394, "comment_id": 79847345, "body": "Login Part, this is the view of <a href=\"https://github.com/activeadmin/activeadmin/blob/92ed4174bf9ced41193b2572711729d6daffeffa/app/views/active_admin/devise/sessions/new.html.erb\" rel=\"nofollow noreferrer\">login</a>, Css of <a href=\"https://github.com/activeadmin/activeadmin/blob/d01155f73a0e2cc27d712792270357e2b3759d05/app/assets/stylesheets/active_admin/pages/_logged_out.scss\" rel=\"nofollow noreferrer\">login</a>."}, {"owner": {"reputation": 459, "user_id": 5810899, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fjGwDZDO7Zg/AAAAAAAAAAI/AAAAAAAAAPo/Ldy2L5fEqpY/photo.jpg?sz=128", "display_name": "Vaibhav Dhoke", "link": "https://stackoverflow.com/users/5810899/vaibhav-dhoke"}, "reply_to_user": {"reputation": 512, "user_id": 6950578, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2d06a05f48e9f4b810136e8a4348c014?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6950578/john"}, "edited": false, "score": 0, "creation_date": 1506509195, "post_id": 46445394, "comment_id": 79847374, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/155413/discussion-between-vaibhav-dhoke-and-john\">continue this discussion in chat</a>."}, {"owner": {"reputation": 2560, "user_id": 153279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/783f796db3d628f7c268326fb3323de8?s=128&d=identicon&r=PG", "display_name": "Piers C", "link": "https://stackoverflow.com/users/153279/piers-c"}, "edited": false, "score": 0, "creation_date": 1506543199, "post_id": 46445394, "comment_id": 79868550, "body": "Changing themes changes CSS but not the layout.  An updated list of themes is maintained on the <a href=\"https://github.com/activeadmin/activeadmin/wiki/Themes\" rel=\"nofollow noreferrer\">wiki</a>."}], "tags": [], "owner": {"reputation": 459, "user_id": 5810899, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fjGwDZDO7Zg/AAAAAAAAAAI/AAAAAAAAAPo/Ldy2L5fEqpY/photo.jpg?sz=128", "display_name": "Vaibhav Dhoke", "link": "https://stackoverflow.com/users/5810899/vaibhav-dhoke"}, "is_accepted": false, "score": 0, "last_activity_date": 1506507635, "creation_date": 1506507635, "answer_id": 46445394, "question_id": 46445308, "link": "https://stackoverflow.com/questions/46445308/how-to-change-the-default-layout-for-the-active-admin-in-ruby-on-rails/46445394#46445394", "title": "How to change the default layout for the active admin in ruby on rails?", "body": "<p>You can use this for changing theme of active admin \n<a href=\"https://github.com/paladini/activeadmin-themes\" rel=\"nofollow noreferrer\">https://github.com/paladini/activeadmin-themes</a></p>\n"}, {"tags": [], "owner": {"reputation": 2560, "user_id": 153279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/783f796db3d628f7c268326fb3323de8?s=128&d=identicon&r=PG", "display_name": "Piers C", "link": "https://stackoverflow.com/users/153279/piers-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1506542957, "creation_date": 1506542957, "answer_id": 46456423, "question_id": 46445308, "link": "https://stackoverflow.com/questions/46445308/how-to-change-the-default-layout-for-the-active-admin-in-ruby-on-rails/46456423#46456423", "title": "How to change the default layout for the active admin in ruby on rails?", "body": "<p>You can use the <a href=\"https://github.com/bys-control/activeadmin_custom_layout\" rel=\"nofollow noreferrer\">ActiveAdmin custom layout plugin</a>.  However, if you find yourself wanting to customize everything consider whether you might be better off with regular Rails scaffolding, without ActiveAdmin.</p>\n"}], "owner": {"reputation": 512, "user_id": 6950578, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2d06a05f48e9f4b810136e8a4348c014?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6950578/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1190, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1506542957, "creation_date": 1506507431, "last_edit_date": 1506507960, "question_id": 46445308, "link": "https://stackoverflow.com/questions/46445308/how-to-change-the-default-layout-for-the-active-admin-in-ruby-on-rails", "title": "How to change the default layout for the active admin in ruby on rails?", "body": "<p>I am new in ruby and generated an admin panel using devise and active admin but I want to change the default layout and design of whole active admin. I have researched this but mostly information is outdated and not providing a proper way to do this most of the information is incomplete. </p>\n\n<p>Is there any way to do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "caching", "etag"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7516728"}, "edited": false, "score": 1, "creation_date": 1507094941, "post_id": 46446467, "comment_id": 80069009, "body": "I have enabled the caching but even though it&#39;s not working"}], "tags": [], "owner": {"reputation": 1675, "user_id": 697567, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/FIFzH.jpg?s=128&g=1", "display_name": "tomor", "link": "https://stackoverflow.com/users/697567/tomor"}, "is_accepted": false, "score": 0, "last_activity_date": 1506510807, "creation_date": 1506510807, "answer_id": 46446467, "question_id": 46445225, "link": "https://stackoverflow.com/questions/46445225/how-to-use-stale-in-rails-with-etag/46446467#46446467", "title": "How to use &#39;stale?&#39; in rails with eTAg", "body": "<p>Is it possible you're running this in development, without setting <code>config.perform_caching</code> to true in <code>config/environments/development.rb</code>? Essentially caching is disabled by default in development, so to be able to play with this functionality, you need to enable it.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7516728"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 379, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1506510807, "creation_date": 1506507195, "question_id": 46445225, "link": "https://stackoverflow.com/questions/46445225/how-to-use-stale-in-rails-with-etag", "title": "How to use &#39;stale?&#39; in rails with eTAg", "body": "<p>I am new to rails. I am trying to use cache and Etag to throw <code>304</code> status when the content is not modified. </p>\n\n<p>My controller code is like this:</p>\n\n<pre><code> def index\n    @projects = @current_user.projects\n    if stale?(@projects, public: true)\n      render json: {\"projects\" =&gt; @current_user.projects.as_json}, status: 200\n    end\n  end\n</code></pre>\n\n<p>I am passing strong ETag with <code>If-None-Match</code> header but I am receiving the 200 status all the times irrespective of the <code>If-None-Match</code> header value.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby", "macos", "rvm"], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 3462304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2369dbe74ee8c8983eaed80afc2e58e7?s=128&d=identicon&r=PG&f=1", "display_name": "z-hao", "link": "https://stackoverflow.com/users/3462304/z-hao"}, "is_accepted": false, "score": 3, "last_activity_date": 1506740871, "creation_date": 1506740871, "answer_id": 46499208, "question_id": 46445217, "link": "https://stackoverflow.com/questions/46445217/mac-osx-rvm-install-ruby-failed/46499208#46499208", "title": "mac osx rvm install ruby failed", "body": "<p>Turns out it just need to excute 'xcode-select --install' before install ruby</p>\n"}], "owner": {"reputation": 51, "user_id": 3462304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2369dbe74ee8c8983eaed80afc2e58e7?s=128&d=identicon&r=PG&f=1", "display_name": "z-hao", "link": "https://stackoverflow.com/users/3462304/z-hao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 921, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1506740871, "creation_date": 1506507179, "question_id": 46445217, "link": "https://stackoverflow.com/questions/46445217/mac-osx-rvm-install-ruby-failed", "title": "mac osx rvm install ruby failed", "body": "<p>I'm trying to install ruby-head after updated my rvm, but i got Error running \n'__rvm_make install'. </p>\n\n<p>osx 10.12.6, rvm 1.29.3</p>\n\n<p>Here is the install log</p>\n\n<pre><code>*** Following extensions are not compiled:\ngdbm:\n    Could not be configured. It will not be installed.\n    Check ext/gdbm/mkmf.log for more details.\n*** Fix the problems, then remove these directories and try again if you want.\nmaking enc\nmake[1]: Nothing to be done for `enc'.\nmaking trans\nmake[1]: Nothing to be done for `./enc/trans'.\nmaking encs\nmake[1]: Nothing to be done for `encs'.\n./miniruby -I./lib -I. -I.ext/common  ./tool/runruby.rb --extout=.ext  -- --disable-gems -r./x86_64-darwin16-fake ./tool/rbinstall.rb --make=\"/Applications/Xcode.app/Contents/Developer/usr/bin/make\" --dest-dir=\"\" --extout=\".ext\" --mflags=\"\" --make-flags=\"\" --data-mode=0644 --prog-mode=0755 --installed-list .installed.list --mantype=\"doc\"\ninstalling binary commands:   /Users/Hao/.rvm/rubies/ruby-head/bin\ndyld: lazy symbol binding failed: Symbol not found: _utimensat\n  Referenced from: /Users/Hao/.rvm/src/ruby-head/libruby.2.5.dylib\n  Expected in: /usr/lib/libSystem.B.dylib\n\ndyld: Symbol not found: _utimensat\n  Referenced from: /Users/Hao/.rvm/src/ruby-head/libruby.2.5.dylib\n  Expected in: /usr/lib/libSystem.B.dylib\n\nmake: *** [do-install-nodoc] Abort trap: 6\n++ return 2\n</code></pre>\n\n<p>I got no idea about this, could someone help me out? </p>\n"}, {"tags": ["ruby", "argv"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1506507298, "post_id": 46445092, "comment_id": 79846148, "body": "You <i>could</i> set the &quot;executable&quot; flag on your file and add a proper shebang line on top of it, but that&#39;d be quite weird. No one expects executable <code>.txt</code> files. (At <i>least</i>, make it an <code>.rb</code> file)"}, {"owner": {"reputation": 459, "user_id": 5810899, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fjGwDZDO7Zg/AAAAAAAAAAI/AAAAAAAAAPo/Ldy2L5fEqpY/photo.jpg?sz=128", "display_name": "Vaibhav Dhoke", "link": "https://stackoverflow.com/users/5810899/vaibhav-dhoke"}, "edited": false, "score": 0, "creation_date": 1506507370, "post_id": 46445092, "comment_id": 79846190, "body": "Please share the script which you want to run, I am inquisitive to see such requirement."}, {"owner": {"reputation": 194, "user_id": 7146874, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/26f3ca22ba9dccc655e1fa1211c4a2ad?s=128&d=identicon&r=PG&f=1", "display_name": "AshNaz87", "link": "https://stackoverflow.com/users/7146874/ashnaz87"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1506508382, "post_id": 46445092, "comment_id": 79846866, "body": "@SergioTulentsev - Yes, I&#39;ve been researching on the net and I haven&#39;t quite found the solution. When you mention the &quot;executable&quot; flag do you mean this? <code>#!&#47;usr&#47;bin&#47;env ruby</code> Because, I&#39;ve included it in the file and it doesn&#39;t make a difference when I try to execute the command."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1506511892, "post_id": 46445092, "comment_id": 79849202, "body": "@AshNaz87: no, that&#39;s shebang line. You set executable flag like this: <code>chmod +x file_name.txt</code>. Then you can run the file with <code>.&#47;file_name.txt 10 40</code>"}], "answers": [{"comments": [{"owner": {"reputation": 194, "user_id": 7146874, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/26f3ca22ba9dccc655e1fa1211c4a2ad?s=128&d=identicon&r=PG&f=1", "display_name": "AshNaz87", "link": "https://stackoverflow.com/users/7146874/ashnaz87"}, "edited": false, "score": 0, "creation_date": 1506510304, "post_id": 46445842, "comment_id": 79848129, "body": "I&#39;m on a Mac and using Zsh. Ruby is located in this path <code>&#47;usr&#47;local&#47;opt&#47;rbenv&#47;shims&#47;ruby</code> which I substituted with the one you have provided. No luck so far"}, {"owner": {"reputation": 194, "user_id": 7146874, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/26f3ca22ba9dccc655e1fa1211c4a2ad?s=128&d=identicon&r=PG&f=1", "display_name": "AshNaz87", "link": "https://stackoverflow.com/users/7146874/ashnaz87"}, "edited": false, "score": 0, "creation_date": 1506510651, "post_id": 46445842, "comment_id": 79848365, "body": "it works when I use the Bash shell, but not with Zsh. If you do know the answer I&#39;d be very much appreciative!"}, {"owner": {"reputation": 2850, "user_id": 42059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39356a03a418d3e4c53aafcfe11a7cab?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/42059/sam"}, "reply_to_user": {"reputation": 194, "user_id": 7146874, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/26f3ca22ba9dccc655e1fa1211c4a2ad?s=128&d=identicon&r=PG&f=1", "display_name": "AshNaz87", "link": "https://stackoverflow.com/users/7146874/ashnaz87"}, "edited": false, "score": 0, "creation_date": 1506610590, "post_id": 46445842, "comment_id": 79899572, "body": "Ah! This is then more of a zsh question than a ruby one, as this behavior is true of shebang lines to ruby, python, etc. I don&#39;t know zsh well enough to know if what I googled up was the &quot;right&quot; approach or not. Sorry!"}, {"owner": {"reputation": 194, "user_id": 7146874, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/26f3ca22ba9dccc655e1fa1211c4a2ad?s=128&d=identicon&r=PG&f=1", "display_name": "AshNaz87", "link": "https://stackoverflow.com/users/7146874/ashnaz87"}, "edited": false, "score": 0, "creation_date": 1506611721, "post_id": 46445842, "comment_id": 79900346, "body": "Appreciate it, regardless.  I&#39;ll also mention that you do need to change the modification so that you can execute the file. Thanks to @SergioTulentsev"}], "tags": [], "owner": {"reputation": 2850, "user_id": 42059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39356a03a418d3e4c53aafcfe11a7cab?s=128&d=identicon&r=PG", "display_name": "Sam", "link": "https://stackoverflow.com/users/42059/sam"}, "is_accepted": true, "score": 0, "last_activity_date": 1506509004, "creation_date": 1506509004, "answer_id": 46445842, "question_id": 46445092, "link": "https://stackoverflow.com/questions/46445092/how-to-run-a-txt-file-which-has-ruby-script-without-using-the-ruby-command-in/46445842#46445842", "title": "How to run a .txt file which has Ruby script, without using the ruby command in the command line", "body": "<p>If you are on a unix, you put a <code>#!/usr/bin/ruby</code> at the top of it and the <code>bash</code> shell will execute it.</p>\n\n<p>If you are on Windows, I believe you must use the correct suffix, <code>.rb</code> or <code>.rbw</code>.</p>\n"}], "owner": {"reputation": 194, "user_id": 7146874, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/26f3ca22ba9dccc655e1fa1211c4a2ad?s=128&d=identicon&r=PG&f=1", "display_name": "AshNaz87", "link": "https://stackoverflow.com/users/7146874/ashnaz87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 46445842, "answer_count": 1, "score": 0, "last_activity_date": 1506509004, "creation_date": 1506506821, "last_edit_date": 1506507223, "question_id": 46445092, "link": "https://stackoverflow.com/questions/46445092/how-to-run-a-txt-file-which-has-ruby-script-without-using-the-ruby-command-in", "title": "How to run a .txt file which has Ruby script, without using the ruby command in the command line", "body": "<p>I'm attempting to run some ruby script in a .txt file from the command line. If I use the ruby command before I run the command, the output is what was desired, e.g. </p>\n\n<pre><code>ruby file_name.txt 10 40\n</code></pre>\n\n<p>How could I execute the same command without having to use the ruby command?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 459, "user_id": 5810899, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fjGwDZDO7Zg/AAAAAAAAAAI/AAAAAAAAAPo/Ldy2L5fEqpY/photo.jpg?sz=128", "display_name": "Vaibhav Dhoke", "link": "https://stackoverflow.com/users/5810899/vaibhav-dhoke"}, "edited": false, "score": 0, "creation_date": 1506505877, "post_id": 46444484, "comment_id": 79845201, "body": "Try This <code>User.create(name: &#39;oneuser&#39;)  User.create(name: &#39;twouser&#39;)  @client = Client.create(name: &#39;Client1&#39;)  @client.users &lt;&lt; User.first  @client.users &lt;&lt; User.second</code>"}, {"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "reply_to_user": {"reputation": 459, "user_id": 5810899, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fjGwDZDO7Zg/AAAAAAAAAAI/AAAAAAAAAPo/Ldy2L5fEqpY/photo.jpg?sz=128", "display_name": "Vaibhav Dhoke", "link": "https://stackoverflow.com/users/5810899/vaibhav-dhoke"}, "edited": false, "score": 0, "creation_date": 1506506091, "post_id": 46444484, "comment_id": 79845349, "body": "@VaibhavDhoke So the client has to exist first? I can&#39;t create and associate at the same time?"}, {"owner": {"reputation": 459, "user_id": 5810899, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fjGwDZDO7Zg/AAAAAAAAAAI/AAAAAAAAAPo/Ldy2L5fEqpY/photo.jpg?sz=128", "display_name": "Vaibhav Dhoke", "link": "https://stackoverflow.com/users/5810899/vaibhav-dhoke"}, "edited": false, "score": 0, "creation_date": 1506506196, "post_id": 46444484, "comment_id": 79845414, "body": "This is one way of doing it, maybe that also could be done, but I am not aware of it. still. Please refer this <a href=\"http://guides.rubyonrails.org/association_basics.html#the-has-many-through-association\" rel=\"nofollow noreferrer\">link</a> for more info."}], "answers": [{"tags": [], "owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "is_accepted": false, "score": 0, "last_activity_date": 1506506352, "creation_date": 1506506352, "answer_id": 46444925, "question_id": 46444484, "link": "https://stackoverflow.com/questions/46444484/creating-objects-with-associations-in-rails/46444925#46444925", "title": "Creating objects with associations in Rails", "body": "<blockquote>\n  <p>accepts_nested_attributes_for :users</p>\n</blockquote>\n\n<p>and do as so: </p>\n\n<blockquote>\n  <p><code>Client.create!(name: 'Client1', users_attributes: { ........ })</code></p>\n</blockquote>\n\n<p>hope this would work for you.</p>\n"}, {"tags": [], "owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "is_accepted": false, "score": 2, "last_activity_date": 1506508688, "creation_date": 1506508688, "answer_id": 46445722, "question_id": 46444484, "link": "https://stackoverflow.com/questions/46444484/creating-objects-with-associations-in-rails/46445722#46445722", "title": "Creating objects with associations in Rails", "body": "<p>If you do not want to accept_nested_attributes for anything, as documented <a href=\"https://apidock.com/rails/ActiveRecord/Relation/create\" rel=\"nofollow noreferrer\">here</a> you can also pass block to create. </p>\n\n<pre><code>Client.create!(name: 'Client1') do |client1| \n  client1.users &lt;&lt; [User.find(1), User.find(2), User.find(3)]     \nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2372, "user_id": 8478218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0tjM.jpg?s=128&g=1", "display_name": "krishnar", "link": "https://stackoverflow.com/users/8478218/krishnar"}, "edited": false, "score": 0, "creation_date": 1506509342, "post_id": 46445957, "comment_id": 79847455, "body": "@Cameron Try above solution"}], "tags": [], "owner": {"reputation": 2372, "user_id": 8478218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0tjM.jpg?s=128&g=1", "display_name": "krishnar", "link": "https://stackoverflow.com/users/8478218/krishnar"}, "is_accepted": false, "score": 1, "last_activity_date": 1506509311, "creation_date": 1506509311, "answer_id": 46445957, "question_id": 46444484, "link": "https://stackoverflow.com/questions/46444484/creating-objects-with-associations-in-rails/46445957#46445957", "title": "Creating objects with associations in Rails", "body": "<p>Try this. It should work</p>\n\n<blockquote>\n  <p>Client.create!(name: 'Client1').client_users.new([{user_id:\n  User.first},{user_id: User.second}])</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 2735, "user_id": 7006199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFqCJ.jpg?s=128&g=1", "display_name": "Nimish Gupta", "link": "https://stackoverflow.com/users/7006199/nimish-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1506512958, "creation_date": 1506512958, "answer_id": 46447120, "question_id": 46444484, "link": "https://stackoverflow.com/questions/46444484/creating-objects-with-associations-in-rails/46447120#46447120", "title": "Creating objects with associations in Rails", "body": "<p>You can make use of <code>after_create</code> callback</p>\n\n<pre><code>class Client &lt; ApplicationRecord\n  has_many :client_users, dependent: :destroy\n  has_many :users, through: :client_users\n\n  after_create :add_users\n\n  private def add_users\n    sef.users &lt;&lt; [User.first, User.second]\n  end\nend\n</code></pre>\n\n<p>Alternatively, A simpler approach would be</p>\n\n<pre><code>Client.create!(name: 'Client1', user_ids: [User.first.id, User.second.id])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3375, "user_id": 3676469, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/100003443544248/picture?type=large", "display_name": "Hirurg103", "link": "https://stackoverflow.com/users/3676469/hirurg103"}, "is_accepted": false, "score": 1, "last_activity_date": 1506515580, "creation_date": 1506515580, "answer_id": 46447969, "question_id": 46444484, "link": "https://stackoverflow.com/questions/46444484/creating-objects-with-associations-in-rails/46447969#46447969", "title": "Creating objects with associations in Rails", "body": "<p>You can do this with the following code:</p>\n\n<pre><code>user1 = create(:user)\nuser2 = create(:user)\n\nclient1 = create(:client, users: [user1, user2])\n</code></pre>\n\n<p>See <a href=\"https://apidock.com/rails/v4.2.7/ActiveRecord/Associations/ClassMethods/has_many\" rel=\"nofollow noreferrer\">ClassMethods/has_many</a> for the documentation</p>\n\n<blockquote>\n  <p>collection=objects</p>\n  \n  <p>Replaces the collections content by deleting and adding objects as\n  appropriate. If the :through option is true callbacks in the join\n  models are triggered except destroy callbacks, since deletion is\n  direct.</p>\n</blockquote>\n\n<p>If you are using <a href=\"https://github.com/thoughtbot/factory_girl\" rel=\"nofollow noreferrer\">factory_girl</a> you can add <code>trait :with_users</code> like this:</p>\n\n<pre><code>FactoryGirl.define do\n  factory :client do\n\n    trait :with_two_users do\n      after(:create) do |client|\n        client.users = create_list :user, 2\n      end\n    end\n\n  end\nend\n</code></pre>\n\n<p>Now you can create a client with users in test like this:</p>\n\n<pre><code>client = create :client, :with_two_users\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "is_accepted": false, "score": 0, "last_activity_date": 1506624976, "creation_date": 1506624976, "answer_id": 46476433, "question_id": 46444484, "link": "https://stackoverflow.com/questions/46444484/creating-objects-with-associations-in-rails/46476433#46476433", "title": "Creating objects with associations in Rails", "body": "<p>The reason you're getting a mismatch is because you're specifying the <code>client_users</code> association that expects <code>ClientUser</code> instances, but you're passing in <code>User</code> instances:</p>\n\n<pre><code># this won't work\nClient.create!(client_users: [User.first, User.second])\n</code></pre>\n\n<p>Instead, since you already specified a <code>users</code> association, you can do this:</p>\n\n<pre><code>Client.create!(users: [User.first, User.second])\n</code></pre>\n\n<p>There's a simpler way to handle this, though: ditch the join model and use a <code>has_and_belongs_to_many</code> relationship. You still need a <code>clients_users</code> join table in the database, but you don't need a <code>ClientUser</code> model. Rails will handle this automatically under the covers.</p>\n\n<pre><code>class Client &lt; ApplicationRecord\n  has_and_belongs_to_many :users\nend\n\nclass User\n  has_and_belongs_to_many :clients\nend\n\n# Any of these work:\nclient = Client.new(name: \"Kung Fu\")\nuser = client.users.new(name: \"Panda\")\nclient.users &lt;&lt; User.new(name: \"Nemo\")\nclient.save # =&gt; this will create two users and a client, and add two records to the `clients_users` join table\n</code></pre>\n"}], "owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 6, "score": 1, "last_activity_date": 1506624976, "creation_date": 1506505100, "last_edit_date": 1506505900, "question_id": 46444484, "link": "https://stackoverflow.com/questions/46444484/creating-objects-with-associations-in-rails", "title": "Creating objects with associations in Rails", "body": "<p>In my Rails app I have Clients and Users. And Users can have many Clients.</p>\n\n<p>The models are setup as so:</p>\n\n<pre><code>class Client &lt; ApplicationRecord\n  has_many :client_users, dependent: :destroy\n  has_many :users, through: :client_users\nend\n\nclass User &lt; ApplicationRecord\n  has_many :client_users, dependent: :destroy\n  has_many :clients, through: :client_users\nend\n\nclass ClientUser &lt; ApplicationRecord\n  belongs_to :user\n  belongs_to :client\nend\n</code></pre>\n\n<p>So if I wanted to create a new client that had the first two users associated with it how would I do it?</p>\n\n<p>e.g.</p>\n\n<pre><code>Client.create!(name: 'Client1', client_users: [User.first, User.second])\n</code></pre>\n\n<p>Trying that gives me the error:</p>\n\n<pre><code>ActiveRecord::AssociationTypeMismatch: ClientUser(#70142396623360) expected, got #&lt;User id: 1,...\n</code></pre>\n\n<p>I also want to do this for an RSpec test. e.g.</p>\n\n<pre><code>user1 = create(:user)\nuser2 = create(:user)\n\nclient1 = create(:client, client_users: [user1, user2])\n</code></pre>\n\n<p>How do I create a client with associated users for in both the Rails console and in an RSpec test?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "pg-search"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1506504485, "post_id": 46442493, "comment_id": 79844216, "body": "Can you please show your code? At a guess you could just do this by defining a <code>pg_search_scope</code> that takes <i>two</i> parameters, and calling something like <code>Article.search_by_name(params[:name], current_user.locale)</code>?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1506504620, "post_id": 46442493, "comment_id": 79844314, "body": "I&#39;m not familiar with the library, but nothing described above seems beyond what&#39;s described in the <a href=\"https://github.com/Casecommons/pg_search#dynamic-search-scopes\" rel=\"nofollow noreferrer\">readme</a>."}, {"owner": {"reputation": 331, "user_id": 4931720, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh4.googleusercontent.com/-mosfIn_6OMU/AAAAAAAAAAI/AAAAAAAAABs/6VRfNqKaGcw/photo.jpg?sz=128", "display_name": "Damir Nurgaliev", "link": "https://stackoverflow.com/users/4931720/damir-nurgaliev"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1506585290, "post_id": 46442493, "comment_id": 79882315, "body": "@TomLord take a look at gem closer please, I&#39;m using multisearch, and I can&#39;t pass any options to it (while multisearching). Am I missed something?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1506595267, "post_id": 46442493, "comment_id": 79888979, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of the problem; I&#39;m not going to invest the time trying to create such an example for myself."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1506595335, "post_id": 46442493, "comment_id": 79889024, "body": "I also don&#39;t understand why you are using a <i>different database table</i> for each translation; couldn&#39;t that be simplified massively via a single <code>translations</code> table?"}], "owner": {"reputation": 331, "user_id": 4931720, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh4.googleusercontent.com/-mosfIn_6OMU/AAAAAAAAAAI/AAAAAAAAABs/6VRfNqKaGcw/photo.jpg?sz=128", "display_name": "Damir Nurgaliev", "link": "https://stackoverflow.com/users/4931720/damir-nurgaliev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1506499299, "creation_date": 1506499299, "question_id": 46442493, "link": "https://stackoverflow.com/questions/46442493/how-to-use-pgsearch-with-different-localization", "title": "How to use PgSearch with different localization", "body": "<p>I'm implementing PgSearch to rails application. I have to do multisearching between some models and every model has his own translation in separate db table.</p>\n\n<p>For example:\nI have an article, so I also have a <strong>article_translation</strong> table, which has column <strong>locale</strong> (ru, en, de). So, for example if current default locale setted to <strong>:en</strong> and when I call <strong>article.article_translation</strong> I get only <strong>en</strong> translation (i did it with has_one association with scope)</p>\n\n<p>So, right now I have a problem with the PgSearch gem. I'm doing multisearch between this translation tables, but I need to specify which language should be used as dictionary and which results should be show depending on dictionary. </p>\n\n<p>If I have a default locale <strong>\":ru\"</strong> and trying to search something, I should only get a <strong>\"ru\"</strong> translations results.</p>\n\n<p>Can I implement this functionality with this gem or should I use something else?</p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 8680987, "user_type": "registered", "profile_image": "https://graph.facebook.com/1561246977231056/picture?type=large", "display_name": "Joseph", "link": "https://stackoverflow.com/users/8680987/joseph"}, "edited": false, "score": 0, "creation_date": 1506525145, "post_id": 46442833, "comment_id": 79858490, "body": "Wow! Thank you so much for your response and your explanations. I learned new stuff!"}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 0, "last_activity_date": 1506501141, "last_edit_date": 1506501141, "creation_date": 1506500456, "answer_id": 46442833, "question_id": 46441413, "link": "https://stackoverflow.com/questions/46441413/redacting-one-array-with-modified-instances-of-another/46442833#46442833", "title": "Redacting one array with modified instances of another", "body": "<p>Within your <code>record.split.map</code> you need to check if the <code>record.downcase</code> being passed include the first or last value for <code>split</code>, but at the same time to check if the <code>word</code> in the block is equal to any of those two, so it would be something like:</p>\n\n<pre><code>new_record = record.split.map do |word|\n  if record.downcase.include?(split_name[0] || split_name[1]) &amp;&amp;\n     word.downcase == split_name[0] || word.downcase == split_name[1]\n    ...\n</code></pre>\n\n<p>Also if you use <code>map</code> over <code>split_name</code> to assign the amount of <code>X</code>, it'll return an array, and when you do <code>word = change_name</code>, it takes the value inside an array, as <code>['XXXXX']</code> (e.g), so you need to access the only one value inside:</p>\n\n<pre><code>word = change_name.first\n</code></pre>\n\n<p>As it's not needed to initialize a variable not being used inside the block, then just <code>change_name.first</code>.</p>\n\n<p>This way, this works:</p>\n\n<pre><code>def clean_slate(record, name)\n  name = name.downcase\n  split_name = name.downcase.split(\" \")\n  change_name = split_name.map do |letter|\n    letter = 'X' * 2 * name.length\n  end\n  new_record = record.split.map do |word|\n    if record.downcase.include?(split_name[0] || split_name[1]) &amp;&amp;\n       word.downcase == split_name[0] || word.downcase == split_name[1]\n      change_name.first\n    else\n      word\n    end\n  end\n  new_record.join(\" \")\nend\n</code></pre>\n\n<p>But it has some things you can improve:</p>\n\n<p><code>split(\" \")</code> can be shortened as <code>split</code><br><br>\n<code>letter = 'X' * 2 * name.length</code> can be <code>'XX' * name.length</code> and <br><br>\n<code>change_name = 'XX' * name.length</code> no need to use map, so<br><br>\n<code>change_name.first</code> changes to <code>change_name</code><br><br>\n<code>join(\" \")</code> prefer single quotes instead double ones<br><br></p>\n\n<p>You need a way to simplify the <code>if</code> statement inside the <code>record.map</code> and still you don't know if the name will be only two words to use <code>[0]</code> and <code>[-1]</code>.</p>\n\n<p>You could take a look to <a href=\"https://ruby-doc.org/core-2.1.4/String.html#method-i-gsub\" rel=\"nofollow noreferrer\"><code>String#gsub</code></a>.</p>\n\n<pre><code>def clean_slate(record, name)\n  record.gsub(/\\b#{name.split.join('|')}\\b/i, 'XX' * name.size)\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1506501444, "post_id": 46443015, "comment_id": 79842210, "body": "It gives <code>&quot;XXXXXXXXXX XXXXXX is a talented actress. XXXXXXXXXX is super foxy and a great chess player. Ms. XXXXXX has many talents.&quot; </code>when is waiting for <code>&quot;XXXXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXXXX is a talented actress. XXXXXXXXXXXXXXXXXX is super foxy and a great chess player. Ms. XXXXXXXXXXXXXXXXXX has many talents.&quot;</code>"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1506502169, "post_id": 46443015, "comment_id": 79842685, "body": "Don&#39;t worry, that&#39;s because Joseph hasn&#39;t added the example inputs and expected outputs, you could see the <a href=\"https://www.codewars.com/kata/clean-slate/train/ruby\" rel=\"nofollow noreferrer\">kata</a>."}], "tags": [], "owner": {"reputation": 5355, "user_id": 452079, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4fb85f91e35202c72ca16d54873b10c4?s=128&d=identicon&r=PG", "display_name": "rohit89", "link": "https://stackoverflow.com/users/452079/rohit89"}, "is_accepted": false, "score": 0, "last_activity_date": 1506503465, "last_edit_date": 1506503465, "creation_date": 1506501013, "answer_id": 46443015, "question_id": 46441413, "link": "https://stackoverflow.com/questions/46441413/redacting-one-array-with-modified-instances-of-another/46443015#46443015", "title": "Redacting one array with modified instances of another", "body": "<p>Here's a cleaner way to implement this. Just compare each word in <code>record</code> to <code>name</code> and substitute the <code>X</code>s.    </p>\n\n<pre><code>def clean_slate record, name\n  names = name.downcase.split\n  new_record = []\n  record.split.each do |word|\n    new_record &lt;&lt; word\n    if names.include?(word.downcase)\n      new_record[-1] = \"X\" * 2 * name.length\n    end\n  end\n  new_record.join(' ')\nend\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>XXXXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXXXX is a talented actress. XXXXXXXXXXXXXXXXXX knows sulfoxide is a chemical compound containing a sulfinyl (SO) functional group attached to two carbon atoms. It is a polar functional group. Ms. XXXXXXXXXXXXXXXXXX has many talents.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 8680987, "user_type": "registered", "profile_image": "https://graph.facebook.com/1561246977231056/picture?type=large", "display_name": "Joseph", "link": "https://stackoverflow.com/users/8680987/joseph"}, "edited": false, "score": 0, "creation_date": 1506525181, "post_id": 46447977, "comment_id": 79858513, "body": "This is awesome! Thank you for your response."}], "tags": [], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1506515598, "creation_date": 1506515598, "answer_id": 46447977, "question_id": 46441413, "link": "https://stackoverflow.com/questions/46441413/redacting-one-array-with-modified-instances-of-another/46447977#46447977", "title": "Redacting one array with modified instances of another", "body": "<p>If I understand your task right, I think you can do solution similar to it:</p>\n\n<pre><code>def clean_slate(record, name)\n  name = name.split.map(&amp;:downcase)\n  record = record.split\n\n  record.map do |word|\n    if name.include? word.downcase\n      word = 'X' * 2 * name.join.length\n    else\n      word\n    end\n  end.join(' ')\nend\n\n#&gt; clean_slate(\"Megan Fox is a talented actress. megan knows sulfoxide is a chemical compound containing a sulfinyl (SO) functional group attached to two carbon atoms. It is a polar functional group. Ms. fox has many talents.\", \"Megan Fox\")\n#=&gt; \"XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX is a talented actress. XXXXXXXXXXXXXXXX knows sulfoxide is a chemical compound containing a sulfinyl (SO) functional group attached to two carbon atoms. It is a polar functional group. Ms. XXXXXXXXXXXXXXXX has many talents.\"\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 8680987, "user_type": "registered", "profile_image": "https://graph.facebook.com/1561246977231056/picture?type=large", "display_name": "Joseph", "link": "https://stackoverflow.com/users/8680987/joseph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 46442833, "answer_count": 3, "score": 1, "last_activity_date": 1506515598, "creation_date": 1506495639, "question_id": 46441413, "link": "https://stackoverflow.com/questions/46441413/redacting-one-array-with-modified-instances-of-another", "title": "Redacting one array with modified instances of another", "body": "<p>Hello I have a problem that I am trying to solve.</p>\n\n<blockquote>\n  <p>Define a method called clean_slate that will take a String representing a record and another String representing a name as arguments. The method returns a string representing the original record, but with every instance of the name replaced with twice as many X's as the name contains characters. If a full name is passed, it will also replace instances where only the first or last name is used with as many X's as the full name contains characters. Your method should not be case sensitive. Assume that the inputs will always be a String. Return the original record if the name isn't found.</p>\n</blockquote>\n\n<p>So far I have:</p>\n\n<pre><code>def clean_slate(record, name)\n  name = name.downcase\n  split_name = name.downcase.split(\" \") #array\n  change_name = split_name.map do |letter|\n    letter = \"X\" * 2 * name.length\n  end\n  record_words = record.downcase.split(\" \") #array\n  new_record = record_words.map do |word|\n   if word.include?(split_name[0] || split_name[1])\n     word = change_name\n   else \n     word \n   end\n  end\n new_record.join(\" \")\nend\n\nclean_slate(\"Megan Fox is a talented actress. megan knows sulfoxide is a chemical compound containing a sulfinyl (SO) functional group attached to two carbon atoms. It is a polar functional group. Ms. fox has many talents.\", \"Megan Fox\")\n</code></pre>\n\n<p>I am returning the <code>record</code> but I am not getting the last name in the <code>record</code> redacted. Does anyone have any idea how I can fix that?</p>\n\n<pre><code>\"XXXXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXXXX fox is a talented actress. XXXXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXXXX knows sulfoxide is a chemical compound containing a sulfinyl (so) functional group attached to two carbon atoms. it is a polar functional group. ms. fox has many talents.\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord", "rspec"], "comments": [{"owner": {"reputation": 459, "user_id": 5810899, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fjGwDZDO7Zg/AAAAAAAAAAI/AAAAAAAAAPo/Ldy2L5fEqpY/photo.jpg?sz=128", "display_name": "Vaibhav Dhoke", "link": "https://stackoverflow.com/users/5810899/vaibhav-dhoke"}, "edited": false, "score": 0, "creation_date": 1506497480, "post_id": 46441158, "comment_id": 79839919, "body": "Can you share the actual code where you are getting the error."}, {"owner": {"reputation": 4577, "user_id": 4147191, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zNy4Unw5fq8/AAAAAAAAAAI/AAAAAAAAAP8/kQW6cfxt280/photo.jpg?sz=128", "display_name": "\u0141ukasz Kami\u0144ski", "link": "https://stackoverflow.com/users/4147191/%c5%81ukasz-kami%c5%84ski"}, "edited": false, "score": 0, "creation_date": 1506514166, "post_id": 46441158, "comment_id": 79850630, "body": "That message means that you had error <i>before</i> that statement and did not roll back transaction, then attempted to execute query that you posted here and postgres complained. You either need to enable auto commit and see what query gives error, use try catch blocks or check your database logs."}], "answers": [{"comments": [{"owner": {"reputation": 520, "user_id": 7199345, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/ygMl8.jpg?s=128&g=1", "display_name": "Sachin srinivasan", "link": "https://stackoverflow.com/users/7199345/sachin-srinivasan"}, "edited": false, "score": 0, "creation_date": 1506495973, "post_id": 46441361, "comment_id": 79839111, "body": "yes, i did try this <code>bundle exec rake db:drop db:create db:migrate RAILS_ENV=test</code> same issue."}], "tags": [], "owner": {"reputation": 3493, "user_id": 1323481, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4825c6c1cdfd05c2af6fb8db0d492f73?s=128&d=identicon&r=PG", "display_name": "StandardNerd", "link": "https://stackoverflow.com/users/1323481/standardnerd"}, "is_accepted": false, "score": 0, "last_activity_date": 1506495442, "creation_date": 1506495442, "answer_id": 46441361, "question_id": 46441158, "link": "https://stackoverflow.com/questions/46441158/rails-rspec-activerecordstatementinvalid-pginfailedsqltransaction/46441361#46441361", "title": "Rails Rspec - ActiveRecord::StatementInvalid: PG::InFailedSqlTransaction:", "body": "<p>Did you try to reset the Test Database?</p>\n\n<pre><code>bundle exec rails db:drop RAILS_ENV=test\nbundle exec rails db:create RAILS_ENV=test\nbundle exec rails db:schema:load RAILS_ENV=test\n</code></pre>\n\n<p>or for Rails Version older than 5</p>\n\n<pre><code>bundle exec rake db:drop RAILS_ENV=test\nbundle exec rake db:create RAILS_ENV=test\nbundle exec rake db:schema:load RAILS_ENV=test\n</code></pre>\n\n<p>or shorter:</p>\n\n<p>bundle exec rake db:reset RAILS_ENV=test</p>\n"}], "owner": {"reputation": 520, "user_id": 7199345, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/ygMl8.jpg?s=128&g=1", "display_name": "Sachin srinivasan", "link": "https://stackoverflow.com/users/7199345/sachin-srinivasan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 914, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1506495871, "creation_date": 1506494650, "last_edit_date": 1506495871, "question_id": 46441158, "link": "https://stackoverflow.com/questions/46441158/rails-rspec-activerecordstatementinvalid-pginfailedsqltransaction", "title": "Rails Rspec - ActiveRecord::StatementInvalid: PG::InFailedSqlTransaction:", "body": "<p>I have this controller method</p>\n\n<pre><code>def dashboard\n method1\n method2\n method3\n ..\nend\n</code></pre>\n\n<p>Everything is working fine in <code>development</code> environment..\nbut in <code>test</code> environment,\ni am getting this error after first few methods.</p>\n\n<p>I checked using <code>binding.pry</code> just above the line which i used to get error, </p>\n\n<p>I cannot run any query <code>eg: Account.first</code> \nbut same <code>Account.first</code> works in <code>dev</code> environment</p>\n\n<p>Error when i run in <code>test</code> environment:</p>\n\n<pre><code>ActiveRecord::StatementInvalid: PG::InFailedSqlTransaction: ERROR:  current transaction is aborted, commands ignored until end of transaction block\n: SELECT  \"accounts\".* FROM \"accounts\"  ORDER BY \"accounts\".\"id\" ASC LIMIT 1\nfrom /home/qwinix/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activerecord-4.2.4/lib/active_record/connection_adapters/postgresql_adapter.rb:596:in `async_exec'\n</code></pre>\n\n<p><strong>Please note the following</strong></p>\n\n<ul>\n<li>No erros found in other controllers and respective spec.</li>\n<li>There was no error in the same controller from other branch</li>\n<li>I added few code to <code>method1</code>, which executes just fine in both environment. i am getting these error after <code>method3</code> which i havent touched.</li>\n</ul>\n\n<p>PS: I did google and search stackoverflow questions, didnt help</p>\n\n<p>Edit: When i moved the <code>method1</code> to end, i am not getting any errors, please explain me this behaviour.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1506490791, "post_id": 46440183, "comment_id": 79836652, "body": "This sounds like a simple <i>filter by magazine</i> to me."}, {"owner": {"reputation": 2111, "user_id": 2251303, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6bbbc78a70fcb3621e68d4b2630d8900?s=128&d=identicon&r=PG", "display_name": "new2cpp", "link": "https://stackoverflow.com/users/2251303/new2cpp"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1506491619, "post_id": 46440183, "comment_id": 79836918, "body": "@spickermann, but the view and action are completely different. So I cannot just simply filter it."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1506491995, "post_id": 46440183, "comment_id": 79837065, "body": "Can you provide examples how the actions and the views will differ?"}], "answers": [{"tags": [], "owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "is_accepted": true, "score": 1, "last_activity_date": 1506491098, "creation_date": 1506491098, "answer_id": 46440293, "question_id": 46440183, "link": "https://stackoverflow.com/questions/46440183/design-nested-resources-and-individual-resources-actions-coexisted-for-ruby-on-r/46440293#46440293", "title": "Design nested resources and individual resources actions coexisted for Ruby on Rails", "body": "<p>Your routes should be fine, you can handle the difference in a controller - there will be difference in params: <code>:magazine_id</code> will be present or absent. </p>\n\n<p>If you want to separate the controllers completely, you can use <code>module:</code> in your routes:</p>\n\n<pre><code>resources :magazines do\n  resources :ads, module: 'nested'\nend\nresources :ads\n</code></pre>\n\n<p>The first one would point to <code>Nested::AdsController</code>, the second to <code>AdsController</code></p>\n\n<p>Or the other way around</p>\n\n<pre><code>resources :magazines do\n  resources :ads\nend\nresources :ads, module: 'unnested'\n</code></pre>\n\n<p>First one points to <code>AdsController</code>, second to <code>Unnested::AdsController</code>. </p>\n"}], "owner": {"reputation": 2111, "user_id": 2251303, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6bbbc78a70fcb3621e68d4b2630d8900?s=128&d=identicon&r=PG", "display_name": "new2cpp", "link": "https://stackoverflow.com/users/2251303/new2cpp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 46440293, "answer_count": 1, "score": 0, "last_activity_date": 1506498675, "creation_date": 1506490540, "last_edit_date": 1506498675, "question_id": 46440183, "link": "https://stackoverflow.com/questions/46440183/design-nested-resources-and-individual-resources-actions-coexisted-for-ruby-on-r", "title": "Design nested resources and individual resources actions coexisted for Ruby on Rails", "body": "<p>I have a user case in which nested resources and individual resources both make sense. How can I design path and code structure to reflect this? For example:</p>\n\n<pre><code>resources :magazines do\n  resources :ads\nend\n\nresources :ads\n</code></pre>\n\n<p>Each <code>ad</code> belongs to a <code>magazine</code>, so <code>magazines/:magazine_id/ads</code> absolutely make sense. However, in some cases, I want to list all <code>ads</code> only, so <code>ads</code> also make sense. Please note, <code>magazines/:magazine_id/ads</code> and <code>ads</code> have completely different <code>view</code>. The same thing applies to other actions. Does anyone have similar situation? And what is the better way to solve it and structure code in <code>mvc</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "view", "controller", "haml"], "comments": [{"owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "edited": false, "score": 0, "creation_date": 1506490079, "post_id": 46440073, "comment_id": 79836382, "body": "title is the column in your table?"}, {"owner": {"reputation": 459, "user_id": 5810899, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fjGwDZDO7Zg/AAAAAAAAAAI/AAAAAAAAAPo/Ldy2L5fEqpY/photo.jpg?sz=128", "display_name": "Vaibhav Dhoke", "link": "https://stackoverflow.com/users/5810899/vaibhav-dhoke"}, "edited": false, "score": 0, "creation_date": 1506490217, "post_id": 46440073, "comment_id": 79836430, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2695538/add-querystring-parameters-to-link-to\">Add querystring parameters to link_to</a>"}, {"owner": {"reputation": 503, "user_id": 4135902, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/65a721140107aea53ea8b1a32ded3ea7?s=128&d=identicon&r=PG&f=1", "display_name": "Ritu Raj", "link": "https://stackoverflow.com/users/4135902/ritu-raj"}, "reply_to_user": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "edited": false, "score": 0, "creation_date": 1506490250, "post_id": 46440073, "comment_id": 79836440, "body": "@AniketShivamTiwari: yes"}, {"owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "edited": false, "score": 0, "creation_date": 1506490268, "post_id": 46440073, "comment_id": 79836447, "body": "then try this <a href=\"http://railscasts.com/episodes/228-sortable-table-columns\" rel=\"nofollow noreferrer\">railscasts.com/episodes/228-sortable-table-columns</a>"}, {"owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "edited": false, "score": 0, "creation_date": 1506490382, "post_id": 46440073, "comment_id": 79836497, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/27408660/how-to-sort-ruby-table-by-column-headers\">How to sort Ruby table by column headers?</a>"}, {"owner": {"reputation": 441, "user_id": 4311450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zIfYt.gif?s=128&g=1", "display_name": "Evan", "link": "https://stackoverflow.com/users/4311450/evan"}, "edited": false, "score": 0, "creation_date": 1506490519, "post_id": 46440073, "comment_id": 79836560, "body": "Maybe somthing like  %th= link_to &quot;Title&quot;, your_path(sort: &quot;desc&quot;)"}], "answers": [{"comments": [{"owner": {"reputation": 503, "user_id": 4135902, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/65a721140107aea53ea8b1a32ded3ea7?s=128&d=identicon&r=PG&f=1", "display_name": "Ritu Raj", "link": "https://stackoverflow.com/users/4135902/ritu-raj"}, "edited": false, "score": 0, "creation_date": 1506490847, "post_id": 46440146, "comment_id": 79836672, "body": "After this what to check in def index of my controller? Or does any other method gets called in my controller?"}, {"owner": {"reputation": 459, "user_id": 5810899, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fjGwDZDO7Zg/AAAAAAAAAAI/AAAAAAAAAPo/Ldy2L5fEqpY/photo.jpg?sz=128", "display_name": "Vaibhav Dhoke", "link": "https://stackoverflow.com/users/5810899/vaibhav-dhoke"}, "reply_to_user": {"reputation": 503, "user_id": 4135902, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/65a721140107aea53ea8b1a32ded3ea7?s=128&d=identicon&r=PG&f=1", "display_name": "Ritu Raj", "link": "https://stackoverflow.com/users/4135902/ritu-raj"}, "edited": false, "score": 0, "creation_date": 1506491215, "post_id": 46440146, "comment_id": 79836789, "body": "Please follow <a href=\"https://apidock.com/rails/ActiveRecord/QueryMethods/order\" rel=\"nofollow noreferrer\">link</a>, for ordering the column"}], "tags": [], "owner": {"reputation": 459, "user_id": 5810899, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fjGwDZDO7Zg/AAAAAAAAAAI/AAAAAAAAAPo/Ldy2L5fEqpY/photo.jpg?sz=128", "display_name": "Vaibhav Dhoke", "link": "https://stackoverflow.com/users/5810899/vaibhav-dhoke"}, "is_accepted": false, "score": 1, "last_activity_date": 1506493729, "last_edit_date": 1506493729, "creation_date": 1506490331, "answer_id": 46440146, "question_id": 46440073, "link": "https://stackoverflow.com/questions/46440073/rails-how-to-send-parameter-from-view-to-controller/46440146#46440146", "title": "Rails: How to send parameter from View to Controller", "body": "<pre><code>link_to \"Search Sort\", index_path(:sort =&gt; \"asc\", :column =&gt; \"title\")\n#=&gt; &lt;a href=\"/sort?sort=true&amp;amp;column=test\"&gt;Search Sort&lt;/a&gt;\n</code></pre>\n"}], "owner": {"reputation": 503, "user_id": 4135902, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/65a721140107aea53ea8b1a32ded3ea7?s=128&d=identicon&r=PG&f=1", "display_name": "Ritu Raj", "link": "https://stackoverflow.com/users/4135902/ritu-raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1506493729, "creation_date": 1506489959, "last_edit_date": 1506492049, "question_id": 46440073, "link": "https://stackoverflow.com/questions/46440073/rails-how-to-send-parameter-from-view-to-controller", "title": "Rails: How to send parameter from View to Controller", "body": "<p>I want to click a heading and then sort the elements below it.\nSo I have added link_to like this:</p>\n\n<pre><code>%th= link_to \"Title\"\n</code></pre>\n\n<p>after this I need to add parameter to send to my controller to sort the list. How do I add parameters? say the list needs to be sorted by \"title\" of the object.</p>\n\n<p>And which function in my controller will receive the parameter?</p>\n\n<p>I am a newbie so having trouble n tracing the data flow.</p>\n"}, {"tags": ["ruby", "macos"], "owner": {"reputation": 31, "user_id": 8680389, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qryvzc0naeQ/AAAAAAAAAAI/AAAAAAAAHU8/7WBUDXr51eY/photo.jpg?sz=128", "display_name": "Arun Sridharan", "link": "https://stackoverflow.com/users/8680389/arun-sridharan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 224, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1506488142, "creation_date": 1506485961, "last_edit_date": 1506488142, "question_id": 46439445, "link": "https://stackoverflow.com/questions/46439445/unable-to-install-ruby-in-macos-sierra", "title": "Unable to install ruby in MACOS Sierra", "body": "<pre><code>ruby-build: use openssl from homebrew\nDownloading ruby-2.4.2.tar.bz2...\n-&gt; https://cache.ruby-lang.org/pub/ruby/2.4/ruby-2.4.2.tar.bz2\nInstalling ruby-2.4.2...\nruby-build: use readline from homebrew\n\nBUILD FAILED (OS X 10.12.6 using ruby-build 20170914)\n\nInspect or clean up the working tree at /tmp/ruby-build.20170926231141.40401\nResults logged to /tmp/ruby-build.20170926231141.40401.log\n\nLast 10 log lines:\nGenerating RDoc documentation\ndyld: lazy symbol binding failed: Symbol not found: _utimensat\n  Referenced from: /private/tmp/ruby-build.20170926231141.40401/ruby-2.4.2/./ruby\n  Expected in: /usr/lib/libSystem.B.dylib\n\ndyld: Symbol not found: _utimensat\n  Referenced from: /private/tmp/ruby-build.20170926231141.40401/ruby-2.4.2/./ruby\n  Expected in: /usr/lib/libSystem.B.dylib\n\nmake: *** [rdoc] Abort trap: 6\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "is_accepted": true, "score": 2, "last_activity_date": 1506480198, "creation_date": 1506480198, "answer_id": 46438678, "question_id": 46438484, "link": "https://stackoverflow.com/questions/46438484/rails-compound-key-to-enforce-uniqueness-on-the-pair-of-values/46438678#46438678", "title": "Rails compound key to enforce uniqueness on the pair of values", "body": "<p>Add a unique constraint in your database (Pun in a migration):</p>\n\n<pre><code>add_index :sections, [:professor_id, :course_id], unique: true\n</code></pre>\n\n<p>Now also put a validation constraint in your <code>Section</code> model:</p>\n\n<pre><code>validates_uniqueness_of :professor_id, scope: :course_id\n</code></pre>\n\n<p>Now your <code>professor_id</code> will be uniquely validated in the scope of <code>course_id</code>. Also there will be a unique constraint in your database table.</p>\n"}], "owner": {"reputation": 1771, "user_id": 2106088, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3c882ff2f26810454f651a93001d6e3c?s=128&d=identicon&r=PG", "display_name": "StillLearningToCode", "link": "https://stackoverflow.com/users/2106088/stilllearningtocode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 46438678, "answer_count": 1, "score": 0, "last_activity_date": 1506480198, "creation_date": 1506478785, "question_id": 46438484, "link": "https://stackoverflow.com/questions/46438484/rails-compound-key-to-enforce-uniqueness-on-the-pair-of-values", "title": "Rails compound key to enforce uniqueness on the pair of values", "body": "<p>I am trying to build a toy application and ran across an issue I cannot seem to solve. How do I enforce that a pair of values are unique in a table? </p>\n\n<p>suppose the following schema:</p>\n\n<pre><code>  create_table \"courses\", force: :cascade do |t|\n    t.string \"title\"\n    t.text \"description\"\n    t.string \"number\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.integer \"status\", default: 0\n  end\n\n  create_table \"professors\", force: :cascade do |t|\n    t.string \"name\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.integer \"status\", default: 0\n  end\n\n  create_table \"sections\", force: :cascade do |t|\n    t.integer \"number\"\n    t.integer \"max_enrollment\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.integer \"professor_id\"\n    t.integer \"course_id\"\n    t.string \"room\"\n    t.index [\"course_id\"], name: \"index_sections_on_course_id\"\n    t.index [\"professor_id\"], name: \"index_sections_on_professor_id\"\n  end\n</code></pre>\n\n<p>and I wanted to create a uniqueness constraint in the sections table that the <code>professor_id</code> paired with <code>course_id</code> must be unique. the only thing I have found in my digging is that you can use the <code>validates</code> keyword in the model to enforce the uniqueness of a single field... I also saw that there is a <code>validates_with</code> keyword but I cannot find any way of writing a validator to do what I'm looking for. any help would be greatly appreciated. </p>\n"}, {"tags": ["ruby", "drupal", "makefile", "gruntjs", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 170, "user_id": 8534630, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f5f599f790ba4ad2095cc4608faf1245?s=128&d=identicon&r=PG&f=1", "display_name": "Arun", "link": "https://stackoverflow.com/users/8534630/arun"}, "is_accepted": true, "score": 0, "last_activity_date": 1514907303, "last_edit_date": 1514907303, "creation_date": 1506626401, "answer_id": 46476775, "question_id": 46438148, "link": "https://stackoverflow.com/questions/46438148/ruby-bundle-install-bundle-update-fails-cant-install-gems-http-parser-rb-ev/46476775#46476775", "title": "Ruby (bundle install, bundle update) FAILS can&#39;t install gems http_parser.rb, eventmachine", "body": "<p><strong>Now works after running</strong> <code>$gem uninstall make</code> <em>which is where the error is occuring after this ran</em> <code>$bundle install</code> now got another problem with <code>yajl-ruby (1.2.1)</code> \nfor this what I have done is updated to the latest gem.</p>\n\n<pre><code>$gem install yajl-ruby\n</code></pre>\n\n<p>from <a href=\"https://rubygems.org/gems/yajl-ruby/versions/1.3.0\" rel=\"nofollow noreferrer\">https://rubygems.org/gems/yajl-ruby/versions/1.3.0</a> copy the install clipboard paste in your project folder.\nNow after this I have updated the version in gemfile.lock\nand again run <code>$bundle install</code> this worked for me.\nafter this <code>$grunt</code>\n<em>hope this helps someone</em></p>\n"}], "owner": {"reputation": 170, "user_id": 8534630, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f5f599f790ba4ad2095cc4608faf1245?s=128&d=identicon&r=PG&f=1", "display_name": "Arun", "link": "https://stackoverflow.com/users/8534630/arun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3020, "favorite_count": 2, "accepted_answer_id": 46476775, "answer_count": 1, "score": 0, "last_activity_date": 1514907303, "creation_date": 1506476079, "last_edit_date": 1506626093, "question_id": 46438148, "link": "https://stackoverflow.com/questions/46438148/ruby-bundle-install-bundle-update-fails-cant-install-gems-http-parser-rb-ev", "title": "Ruby (bundle install, bundle update) FAILS can&#39;t install gems http_parser.rb, eventmachine", "body": "<p><strong>I am using grunt to run scss file to build on a existing project in drupal. project using grunt to generate css files. These are the errors comming on my</strong> <strong>OS: windows-10 machine 64-bit.</strong></p>\n\n<p>I have tried in every possible way to run the grunt command and failed in every possible situation, I'm very new to usage of grunt and ruby. Can post additional details if asked for. I have other projects too where grunt works perfectly fine. But I'm stuck with this <strong>make file</strong> and <strong>gem native extensions</strong></p>\n\n<p><strong>My whole environment and configuration settings</strong> </p>\n\n<pre><code>$ gem env\nRubyGems Environment:\n  - RUBYGEMS VERSION: 2.6.13\n  - RUBY VERSION: 2.4.2 (2017-09-14 patchlevel 198) [x64-mingw32]\n  - INSTALLATION DIRECTORY: C:/Ruby24-x64/lib/ruby/gems/2.4.0\n  - USER INSTALLATION DIRECTORY: C:/Users/user/.gem/ruby/2.4.0\n  - RUBY EXECUTABLE: C:/Ruby24-x64/bin/ruby.exe\n  - EXECUTABLE DIRECTORY: C:/Ruby24-x64/bin\n  - SPEC CACHE DIRECTORY: C:/Users/user/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: C:/ProgramData\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x64-mingw32\n  - GEM PATHS:\n     - C:/Ruby24-x64/lib/ruby/gems/2.4.0\n     - C:/Users/user/.gem/ruby/2.4.0\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n  - SHELL PATH:\n     - C:\\Users\\user\\bin\n     - C:\\Program Files\\Git\\mingw64\\bin\n     - C:\\Program Files\\Git\\usr\\local\\bin\n     - C:\\Program Files\\Git\\usr\\bin\n     - C:\\Program Files\\Git\\usr\\bin\n     - C:\\Program Files\\Git\\mingw64\\bin\n     - C:\\Program Files\\Git\\usr\\bin\n     - C:\\Users\\user\\bin\n     - C:\\ProgramData\\Oracle\\Java\\javapath\n     - C:\\Program Files (x86)\\Intel\\iCLS Client\n     - C:\\Program Files\\Intel\\iCLS Client\n     - C:\\windows\\system32\n     - C:\\windows\n     - C:\\windows\\System32\\Wbem\n     - C:\\windows\\System32\\WindowsPowerShell\\v1.0\n     - C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine Components\\DAL\n     - C:\\Program Files\\Intel\\Intel(R) Management Engine Components\\DAL\n     - C:\\Program Files (x86)\\Intel\\Intel(R) Management Engine Components\\IPT\n     - C:\\Program Files\\Intel\\Intel(R) Management Engine Components\\IPT\n     - C:\\Program Files (x86)\\Shoreline Communications\\ShoreWare Client\n     - C:\\Program Files (x86)\\Shoreline Communications\\ShoreWare Client\\win64\n     - C:\\PostgreSQL\\pg96\\bin\n     - C:\\Program Files\\PuTTY\n     - C:\\ProgramData\\ComposerSetup\\bin\n     - C:\\Program Files\\Git\\cmd\n     - C:\\Program Files\\nodejs\n     - C:\\Users\\user\\AppData\\Local\\Programs\\Python\\Python36\\Scripts\n     - C:\\Users\\user\\AppData\\Local\\Programs\\Python\\Python36\n     - C:\\Ruby24-x64\\bin\n     - C:\\Users\\user\\AppData\\Local\\Microsoft\\WindowsApps\n     - C:\\php5\n     - C:\\Users\\user\\AppData\\Roaming\\Composer\\vendor\\bin\n     - C:\\Users\\user\\AppData\\Roaming\\npm\n     - C:\\mysys64\\mingw64\\bin\n     - C:\\mysys64\\usr\\bin\n     - C:\\Program Files\\Git\\usr\\bin\\vendor_perl\n     - C:\\Program Files\\Git\\usr\\bin\\core_perl\n</code></pre>\n\n<p><strong>BUNDLE INSTALL ERROR</strong></p>\n\n<pre><code>$ bundle install\nFetching gem metadata from https://rubygems.org/............\nFetching gem metadata from https://rubygems.org/...\nResolving dependencies...\nRubyGems 1.8.29 is not threadsafe, so your gems will be installed one at a time. Upgrade to RubyGems 2.1.0 or higher to enable parallel gem installation.\nUsing addressable 2.3.8\nUsing sass 3.4.16\nUsing sassy-maps 0.4.0\nUsing breakpoint 2.5.0\nUsing bundler 1.16.0.pre.2\nUsing chunky_png 1.3.4\nUsing coderay 1.1.0\nUsing multi_json 1.11.2\nUsing compass-core 1.0.3\nUsing compass-import-once 1.0.5\nUsing rb-fsevent 0.9.5\nUsing ffi 1.9.10 (x64-mingw32)\nUsing rb-inotify 0.9.5\nUsing compass 1.0.3\nUsing compass-normalize 1.5\nUsing compass-rgbapng 0.2.1\nUsing compass-validator 3.0.1\nUsing css_parser 1.3.6\nFetching eventmachine 1.0.7\nInstalling eventmachine 1.0.7 with native extensions\nGem::Installer::ExtensionBuildError: ERROR: Failed to build gem native\nextension.\n\n        C:/Ruby24-x64/bin/ruby.exe extconf.rb\nchecking for rb_trap_immediate in ruby.h,rubysig.h... no\nchecking for rb_thread_blocking_region()... no\nchecking for ruby/thread.h... yes\nchecking for rb_thread_call_without_gvl() in ruby/thread.h... yes\nchecking for inotify_init() in sys/inotify.h... no\nchecking for __NR_inotify_init in sys/syscall.h... no\nchecking for writev() in sys/uio.h... no\nchecking for rb_thread_fd_select()... yes\nchecking for rb_fdset_t in ruby/intern.h... yes\nchecking for rb_wait_for_single_fd()... yes\nchecking for rb_enable_interrupt()... no\nchecking for rb_time_new()... yes\nchecking for windows.h... yes\nchecking for winsock.h... yes\nchecking for -lkernel32... yes\nchecking for -lrpcrt4... yes\nchecking for -lgdi32... yes\nchecking for clock_gettime()... yes\nchecking for CLOCK_MONOTONIC_RAW in time.h... no\nchecking for CLOCK_MONOTONIC in time.h... yes\ncreating Makefile\n\nmake \"DESTDIR=\"\nC:/Ruby24-x64/lib/ruby/site_ruby/2.4.0/rubygems/dependency.rb:247:in `to_specs':\nCould not find make (&gt;= 0.a) amongst [addressable-2.5.2, addressable-2.3.8,\nbreakpoint-2.7.1, breakpoint-2.5.0, chunky_png-1.3.8, chunky_png-1.3.4,\ncoderay-1.1.2, coderay-1.1.0, compass-1.0.3, compass-core-1.0.3,\ncompass-import-once-1.0.5, compass-normalize-1.5, compass-rgbapng-0.2.1,\ncompass-validator-3.0.1, css_parser-1.6.0, css_parser-1.3.6,\neventmachine-1.2.5-x64-mingw32, ffi-1.9.18-x64-mingw32, ffi-1.9.10-x64-mingw32,\nmulti_json-1.12.2, multi_json-1.11.2, public_suffix-3.0.0, rb-fsevent-0.10.2,\nrb-fsevent-0.9.5, rb-inotify-0.9.10, rb-inotify-0.9.5, sass-3.4.25, sass-3.4.16,\nsassy-maps-0.4.0] (Gem::LoadError)\nfrom C:/Ruby24-x64/lib/ruby/site_ruby/2.4.0/rubygems/dependency.rb:256:in\n`to_spec'\n        from C:/Ruby24-x64/lib/ruby/site_ruby/2.4.0/rubygems.rb:1231:in `gem'\n        from C:/Ruby24-x64/bin/make:25:in `&lt;main&gt;'\n\n\nGem files will remain installed in\nC:/Users/user/git/project/_vendor/ruby/2.4.0/gems/eventmachine-1.0.7\nfor inspection.\nResults logged to\nC:/Users/user/git/project/_vendor/ruby/2.4.0/gems/eventmachine-1.0.7/ext/gem_make.out\n\nAn error occurred while installing eventmachine (1.0.7), and Bundler cannot\ncontinue.\nMake sure that `gem install eventmachine -v '1.0.7'` succeeds before bundling.\n\nIn Gemfile:\n  guard-livereload was resolved to 2.4.0, which depends on\n    em-websocket was resolved to 0.5.1, which depends on\n      eventmachine\n</code></pre>\n\n<p><strong>BUNDLE UPDATE ERROR</strong></p>\n\n<pre><code>$ bundle update\nFetching gem metadata from https://rubygems.org/............\nFetching gem metadata from https://rubygems.org/...\nResolving dependencies....\nRubyGems 1.8.29 is not threadsafe, so your gems will be installed one at a time. Upgrade to RubyGems 2.1.0 or higher to enable parallel gem installation.\nUsing public_suffix 3.0.0\nUsing addressable 2.5.2 (was 2.3.8)\nUsing sass 3.4.25 (was 3.4.16)\nUsing sassy-maps 0.4.0\nUsing breakpoint 2.7.1 (was 2.5.0)\nUsing bundler 1.16.0.pre.2\nUsing chunky_png 1.3.8 (was 1.3.4)\nUsing coderay 1.1.2 (was 1.1.0)\nUsing multi_json 1.12.2 (was 1.11.2)\nUsing compass-core 1.0.3\nUsing compass-import-once 1.0.5\nUsing rb-fsevent 0.10.2 (was 0.9.5)\nUsing ffi 1.9.18 (x64-mingw32) (was 1.9.10)\nUsing rb-inotify 0.9.10 (was 0.9.5)\nUsing compass 1.0.3\nUsing compass-normalize 1.5\nUsing compass-rgbapng 0.2.1\nUsing compass-validator 3.0.1\nUsing css_parser 1.6.0 (was 1.3.6)\nUsing eventmachine 1.2.5 (x64-mingw32) (was 1.0.7)\nFetching http_parser.rb 0.6.0\nInstalling http_parser.rb 0.6.0 with native extensions\nGem::Installer::ExtensionBuildError: ERROR: Failed to build gem native\nextension.\n\n        C:/Ruby24-x64/bin/ruby.exe extconf.rb\ncreating Makefile\n\nmake \"DESTDIR=\"\nC:/Ruby24-x64/lib/ruby/site_ruby/2.4.0/rubygems/dependency.rb:247:in `to_specs':\nCould not find make (&gt;= 0.a) amongst [addressable-2.5.2, addressable-2.3.8,\nbreakpoint-2.7.1, breakpoint-2.5.0, chunky_png-1.3.8, chunky_png-1.3.4,\ncoderay-1.1.2, coderay-1.1.0, compass-1.0.3, compass-core-1.0.3,\ncompass-import-once-1.0.5, compass-normalize-1.5, compass-rgbapng-0.2.1,\ncompass-validator-3.0.1, css_parser-1.6.0, css_parser-1.3.6,\neventmachine-1.2.5-x64-mingw32, ffi-1.9.18-x64-mingw32, ffi-1.9.10-x64-mingw32,\nmulti_json-1.12.2, multi_json-1.11.2, public_suffix-3.0.0, rb-fsevent-0.10.2,\nrb-fsevent-0.9.5, rb-inotify-0.9.10, rb-inotify-0.9.5, sass-3.4.25, sass-3.4.16,\nsassy-maps-0.4.0] (Gem::LoadError)\nfrom C:/Ruby24-x64/lib/ruby/site_ruby/2.4.0/rubygems/dependency.rb:256:in\n`to_spec'\n        from C:/Ruby24-x64/lib/ruby/site_ruby/2.4.0/rubygems.rb:1231:in `gem'\n        from C:/Ruby24-x64/bin/make:25:in `&lt;main&gt;'\n\n\nGem files will remain installed in\nC:/Users/user/git/project/_vendor/ruby/2.4.0/gems/http_parser.rb-0.6.0\nfor inspection.\nResults logged to\nC:/Users/user/git/project/_vendor/ruby/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/gem_make.out\n\nAn error occurred while installing http_parser.rb (0.6.0), and Bundler cannot\ncontinue.\nMake sure that `gem install http_parser.rb -v '0.6.0'` succeeds before bundling.\n\nIn Gemfile:\n  guard-livereload was resolved to 2.5.2, which depends on\n    em-websocket was resolved to 0.5.1, which depends on\n      http_parser.rb\n</code></pre>\n\n<p><strong>GRUNT ERROR</strong></p>\n\n<pre><code>$ grunt\nRunning \"uglify:dist\" (uglify) task\n&gt;&gt; 1 file created 2.65 kB \u2192 1.3 kB\n\nRunning \"compass:dist\" (compass) task\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/bundler-1.16.0.pre.2/lib/bundler/resolver.rb:276:in `block in verify_gemfile_dependencies_are_found!': Could not find gem 'json x64-mingw32' in any of the gem sources listed in your Gemfile. (Bundler::GemNotFound)\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/bundler-1.16.0.pre.2/lib/bundler/resolver.rb:244:in `each'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/bundler-1.16.0.pre.2/lib/bundler/resolver.rb:244:in `verify_gemfile_dependencies_are_found!'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/bundler-1.16.0.pre.2/lib/bundler/resolver.rb:44:in `start'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/bundler-1.16.0.pre.2/lib/bundler/resolver.rb:22:in `resolve'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/bundler-1.16.0.pre.2/lib/bundler/definition.rb:258:in `resolve'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/bundler-1.16.0.pre.2/lib/bundler/definition.rb:171:in `specs'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/bundler-1.16.0.pre.2/lib/bundler/definition.rb:238:in `specs_for'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/bundler-1.16.0.pre.2/lib/bundler/definition.rb:227:in `requested_specs'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/bundler-1.16.0.pre.2/lib/bundler/runtime.rb:110:in `block in definition_method'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/bundler-1.16.0.pre.2/lib/bundler/runtime.rb:22:in `setup'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/bundler-1.16.0.pre.2/lib/bundler.rb:107:in `setup'\n        from C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/bundler-1.16.0.pre.2/lib/bundler/setup.rb:20:in `&lt;top (required)&gt;'\n        from C:/Ruby24-x64/lib/ruby/site_ruby/2.4.0/rubygems/custom_require.rb:36:in `require'\n        from C:/Ruby24-x64/lib/ruby/site_ruby/2.4.0/rubygems/custom_require.rb:36:in `require'\nWarning: \u2191 Use --force to continue.\n\nAborted due to warnings.\n</code></pre>\n\n<p><strong>Installing http_parser.rb ERROR</strong> </p>\n\n<pre><code>$gem install http_parser.rb 0.6.0 --platform=ruby --verbose\nHEAD https://api.rubygems.org/api/v1/dependencies\n200 OK\nGET https://api.rubygems.org/api/v1/dependencies?gems=http_parser.rb\n200 OK\nGetting SRV record failed: DNS result has no information for _rubygems._tcp.api.rubygems.org\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/.gitignore\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/.gitmodules\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/Gemfile\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/Gemfile.lock\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/LICENSE-MIT\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/README.md\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/Rakefile\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/bench/standalone.rb\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/bench/thin.rb\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/.gitignore\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/RubyHttpParserService.java\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/ext_help.h\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/extconf.rb\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/org/ruby_http_parser/RubyHttpParser.java\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/ruby_http_parser.c\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/.gitkeep\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/http_parser.rb.gemspec\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/lib/http/parser.rb\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/lib/http_parser.rb\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/spec/parser_spec.rb\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/spec/spec_helper.rb\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/spec/support/requests.json\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/spec/support/responses.json\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/tasks/compile.rake\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/tasks/fixtures.rake\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/tasks/spec.rake\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/tasks/submodules.rake\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser/AUTHORS\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser/CONTRIBUTIONS\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser/http_parser.c\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser/http_parser.gyp\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser/http_parser.h\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser/LICENSE-MIT\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser/Makefile\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser/README.md\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser/test.c\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/AUTHORS\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/build.xml\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/ext/primitives.jar\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/http_parser.c\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/http_parser.gyp\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/http_parser.h\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/LICENSE-MIT\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/Makefile\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/README.md\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/src/Http-parser.java.iml\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/src/impl/http_parser/FieldData.java\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/src/impl/http_parser/HTTPCallback.java\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/src/impl/http_parser/HTTPDataCallback.java\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/src/impl/http_parser/HTTPErrorCallback.java\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/src/impl/http_parser/HTTPException.java\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/src/impl/http_parser/HTTPMethod.java\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/src/impl/http_parser/HTTPParser.java\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/src/impl/http_parser/HTTPParserUrl.java\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/src/impl/http_parser/lolevel/HTTPCallback.java\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/src/impl/http_parser/lolevel/HTTPDataCallback.java\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/src/impl/http_parser/lolevel/HTTPErrorCallback.java\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/src/impl/http_parser/lolevel/HTTPParser.java\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/src/impl/http_parser/lolevel/ParserSettings.java\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/src/impl/http_parser/ParserSettings.java\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/src/impl/http_parser/ParserType.java\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/src/impl/http_parser/Util.java\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/src/test/http_parser/lolevel/Message.java\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/src/test/http_parser/lolevel/ParseUrl.java\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/src/test/http_parser/lolevel/Requests.java\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/src/test/http_parser/lolevel/Responses.java\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/src/test/http_parser/lolevel/Test.java\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/src/test/http_parser/lolevel/TestHeaderOverflowError.java\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/src/test/http_parser/lolevel/TestLoaderNG.java\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/src/test/http_parser/lolevel/TestNoOverflowLongBody.javacreating Makefile\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/make-0.3.1/bin/make:4:in `&lt;top (required)&gt;': undefined local variable or method `make' for main:Object (NameError)\n        from C:/Ruby24-x64/bin/make:23:in `load'\n        from C:/Ruby24-x64/bin/make:23:in `&lt;main&gt;'\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/make-0.3.1/bin/make:4:in `&lt;top (required)&gt;': undefined local variable or method `make' for main:Object (NameError)\n        from C:/Ruby24-x64/bin/make:23:in `load'\n        from C:/Ruby24-x64/bin/make:23:in `&lt;main&gt;'\nERROR:  Error installing http_parser.rb:\n        ERROR: Failed to build gem native extension.\n\n    Building has failed. See above output for more information on the failure.\nBuilding has failed. See above output for more information on the failure.\nmake failed, exit code 1\n\nGem files will remain installed in C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0 for inspection.\nResults logged to C:/Ruby24-x64/lib/ruby/gems/2.4.0/extensions/x64-mingw32/2.4.0/http_parser.rb-0.6.0/gem_make.out\nERROR:  Could not find a valid gem '0.6.0' (&gt;= 0) in any repository\n\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/src/test/http_parser/lolevel/UnitTest.java\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/src/test/http_parser/lolevel/Upgrade.java\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/src/test/http_parser/lolevel/Url.java\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/src/test/http_parser/lolevel/Util.java\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/src/test/http_parser/lolevel/WrongContentLength.java\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/test.c\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/tests.dumped\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/tests.utf8\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/TODO\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/tools/byte_constants.rb\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/tools/const_char.rb\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/tools/lowcase.rb\nC:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser/vendor/http-parser-java/tools/parse_tests.rb\nBuilding native extensions.  This could take a while...\ncurrent directory: C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser\nC:/Ruby24-x64/bin/ruby.exe -r ./siteconf20170926-7872-1urktzr.rb extconf.rb\ncurrent directory: C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser\nmake \"DESTDIR=\" clean\ncurrent directory: C:/Ruby24-x64/lib/ruby/gems/2.4.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser\nmake \"DESTDIR=\"\nHEAD https://api.rubygems.org/api/v1/dependencies\n200 OK\nGET https://api.rubygems.org/api/v1/dependencies?gems=0.6.0\n200 OK\nGET https://api.rubygems.org/latest_specs.4.8.gz\n200 OK\n</code></pre>\n\n<p><strong>GEM and Ruby versions</strong></p>\n\n<pre><code>$ gem -v\n2.6.13\n\n$ ruby -v\nruby 2.4.2p198 (2017-09-14 revision 59899) [x64-mingw32]\n</code></pre>\n"}, {"tags": ["ruby", "activerecord", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1506481488, "post_id": 46437860, "comment_id": 79834158, "body": "not really sure what you&#39;re getting at. Why must there be a better way?"}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 1, "creation_date": 1506482136, "post_id": 46437860, "comment_id": 79834299, "body": "Check out <a href=\"http://guides.rubyonrails.org/association_basics.html#bi-directional-associations\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a> and <a href=\"http://guides.rubyonrails.org/association_basics.html#has-many-association-reference\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a> (particularly collection.create). Maybe read the whole page over a few times..."}, {"owner": {"reputation": 6836, "user_id": 458044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c8c35f1a799c3905fc0cab4e030803d?s=128&d=identicon&r=PG", "display_name": "Naren Sisodiya", "link": "https://stackoverflow.com/users/458044/naren-sisodiya"}, "edited": false, "score": 0, "creation_date": 1506489777, "post_id": 46437860, "comment_id": 79836289, "body": "Also, look at scope or default_scope if that help."}], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 8680724, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-q00ehq39Apg/AAAAAAAAAAI/AAAAAAAAADc/5a0I10mG5rU/photo.jpg?sz=128", "display_name": "Exwire", "link": "https://stackoverflow.com/users/8680724/exwire"}, "is_accepted": false, "score": 0, "last_activity_date": 1506672812, "creation_date": 1506672812, "answer_id": 46484545, "question_id": 46437860, "link": "https://stackoverflow.com/questions/46437860/rails-better-way-to-load-child-records-onto-an-existing-parent-object/46484545#46484545", "title": "Rails better way to load child records onto an existing parent object", "body": "<p>since you have access to effort object maybe you can do</p>\n\n<pre><code>@effort = #effort_object\nsplit_times = @effort.split_times\n=&gt; #returns array of data\n</code></pre>\n\n<p>hope this helps</p>\n"}], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1506672812, "creation_date": 1506473641, "last_edit_date": 1506478369, "question_id": 46437860, "link": "https://stackoverflow.com/questions/46437860/rails-better-way-to-load-child-records-onto-an-existing-parent-object", "title": "Rails better way to load child records onto an existing parent object", "body": "<p>I've got a typical has_many relationship:</p>\n\n<pre><code>class Effort &lt; ApplicationRecord\n  has_many :split_times\nend\n</code></pre>\n\n<p>In various circumstances, I end up with an instantiated effort and I create new split_times with <code>split_time.effort_id == effort.id</code>. When I want to pass the effort object along to another service, I have to make sure the effort's split_times are not stale, and I can do that with <code>effort.reload</code>. </p>\n\n<p>But if I want the split_times to be loaded on the effort, I find myself doing:</p>\n\n<pre><code>effort = Effort.where(id: effort.id).eager_load(:split_times).first\n</code></pre>\n\n<p>There has to be a better way...doesn't there?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 2832, "user_id": 2118053, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7a515c88e77c933cfc59ddc8ca139964?s=128&d=identicon&r=PG", "display_name": "inopinatus", "link": "https://stackoverflow.com/users/2118053/inopinatus"}, "edited": false, "score": 0, "creation_date": 1506479999, "post_id": 46437841, "comment_id": 79833855, "body": "I will leave the general case for others to ponder, thanks for that!"}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 4, "last_activity_date": 1506473502, "creation_date": 1506473502, "answer_id": 46437841, "question_id": 46437793, "link": "https://stackoverflow.com/questions/46437793/nested-named-argument-destructuring-in-ruby-block/46437841#46437841", "title": "Nested named argument destructuring in ruby block", "body": "<p><code>|name, species:, age:|</code> works (because of the way keyword arguments are handled). It obviously won't work in the general case, but due to the way keyword arguments work, an array whose last element is a hash cleanly corresponds to a parameter list.</p>\n"}], "owner": {"reputation": 2832, "user_id": 2118053, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7a515c88e77c933cfc59ddc8ca139964?s=128&d=identicon&r=PG", "display_name": "inopinatus", "link": "https://stackoverflow.com/users/2118053/inopinatus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 552, "favorite_count": 0, "accepted_answer_id": 46437841, "answer_count": 1, "score": 1, "last_activity_date": 1506473502, "creation_date": 1506473153, "question_id": 46437793, "link": "https://stackoverflow.com/questions/46437793/nested-named-argument-destructuring-in-ruby-block", "title": "Nested named argument destructuring in ruby block", "body": "<p>I would like to destructure a nested data structure using only block arguments.</p>\n\n<p>The data (simplified for this example) is like this:</p>\n\n<pre><code>response = [\n  [\"James\", { species: \"cat\", age: \"4\" }],\n  [\"Sandy\", { species: \"dog\", age: \"7\" }],\n  [\"Horse\", { species: \"man\", age: \"34\" }]\n]\n</code></pre>\n\n<p>I can't find a syntax valid for destructuring this using only block arguments. I imagined it might be this, combining the nested-array destructuring style with named keyword arguments:</p>\n\n<pre><code>response.map do |name, (species:, age:)|\n  \"#{name}: #{species}, #{age}\"\nend\n</code></pre>\n\n<p>but that gives a syntax error.</p>\n\n<p>Obviously there are plenty of other ways to extract the necessary data e.g. using non-nested keyword arguments:</p>\n\n<pre><code>response.map do |name, data|\n  proc { |species:, age:|\n    \"#{name}: #{species}, #{age}\"        \n  }.(data)\nend\n</code></pre>\n\n<p>or </p>\n\n<pre><code>response.map do |name, data|\n  species, age = data.values_at(:species, :age)\n  \"#{name}: #{species}, #{age}\"        \nend\n</code></pre>\n\n<p>or the very obvious</p>\n\n<pre><code>response.map do |name, data|\n  \"#{name}: #{data[:species]}, #{data[:age]}\"\nend\n</code></pre>\n\n<p>but I'd love to have it in the block arguments, because it appeals to my sense of elegant code. Any ideas?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1506472906, "post_id": 46437734, "comment_id": 79832300, "body": "There is no <code>Numeral</code> core class in Ruby."}], "answers": [{"comments": [{"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1506473520, "post_id": 46437773, "comment_id": 79832456, "body": "Yeah, Numeral is not an option (unless you define a class method). Integer or Numeric do the trick"}, {"owner": {"reputation": 701, "user_id": 2105635, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/veVhN.png?s=128&g=1", "display_name": "Jessi", "link": "https://stackoverflow.com/users/2105635/jessi"}, "edited": false, "score": 0, "creation_date": 1506473712, "post_id": 46437773, "comment_id": 79832499, "body": "hmm, now I get: NoMethodError: undefined method `/&#39; for nil:NilClass"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 701, "user_id": 2105635, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/veVhN.png?s=128&g=1", "display_name": "Jessi", "link": "https://stackoverflow.com/users/2105635/jessi"}, "edited": false, "score": 0, "creation_date": 1506473793, "post_id": 46437773, "comment_id": 79832521, "body": "Move to self /key"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 701, "user_id": 2105635, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/veVhN.png?s=128&g=1", "display_name": "Jessi", "link": "https://stackoverflow.com/users/2105635/jessi"}, "edited": false, "score": 0, "creation_date": 1506473859, "post_id": 46437773, "comment_id": 79832541, "body": "Use self over @number and remove the constructor"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1506473893, "post_id": 46437773, "comment_id": 79832550, "body": "You need to choose whether you want your own class (in which case you can&#39;t write <code>3.to_roman</code> but <code>Numeral.new(3).to_roman</code>), or you want to monkey-patch a core class (in which case, change <code>Numeral</code> to <code>Integer</code>, drop the <code>initialize</code> method, and change every <code>@number</code> to <code>self</code>)."}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 2, "last_activity_date": 1506473017, "creation_date": 1506473017, "answer_id": 46437773, "question_id": 46437734, "link": "https://stackoverflow.com/questions/46437734/minitest-say-method-missing-but-method-is-present-what-am-i-missing/46437773#46437773", "title": "minitest say method missing but method is present what am I missing?", "body": "<p>You're defining <code>to_roman</code> for <code>Numeral</code> objects but 1 is an <code>Integer</code>. Try </p>\n\n<pre><code>class Integer\n</code></pre>\n\n<p>or</p>\n\n<pre><code>class Numeric\n</code></pre>\n\n<p>(superclass of <code>Integer</code>)</p>\n"}], "owner": {"reputation": 701, "user_id": 2105635, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/veVhN.png?s=128&g=1", "display_name": "Jessi", "link": "https://stackoverflow.com/users/2105635/jessi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 46437773, "answer_count": 1, "score": 0, "last_activity_date": 1506473017, "creation_date": 1506472636, "question_id": 46437734, "link": "https://stackoverflow.com/questions/46437734/minitest-say-method-missing-but-method-is-present-what-am-i-missing", "title": "minitest say method missing but method is present what am I missing?", "body": "<p>Why am I getting this undefined method error when the method is defined?\n(I'm now going to wast some text so the dumb \"your post is mostly code\" warning goes away. Since a real developer spends most of their time reading code and this is a simple problem I don't need any more words)</p>\n\n<p>Here is my error message:</p>\n\n<pre><code>$ ruby roman_numerals_test.rb\nRun options: --seed 35835\n\n# Running:\n\nRun options: --seed 35835\n\n# Running:\n\nSSSSSSSSSSEE\n\nError:\nRomanNumeralsTest#test_1:\nNoMethodError: undefined method `to_roman' for 1:Integer\n    roman_numerals_test.rb:8:in `test_1'\n\n\nbin/rails test roman_numerals_test.rb:7\n</code></pre>\n\n<p>Here is my test file:</p>\n\n<pre><code>gem 'minitest', '&gt;= 5.0.0'\nrequire 'minitest/autorun'\nrequire_relative 'roman_numerals'\n\n# Common test data version: 1.0.0 070e8d5\nclass RomanNumeralsTest &lt; Minitest::Test\n  def test_1\n    assert_equal 'I', 1.to_roman\n  end\n\n  def test_2\n    assert_equal 'II', 2.to_roman\n  end\n\n  def test_3\n    skip\n    assert_equal 'III', 3.to_roman\n  end\n\n  def test_4\n    skip\n    assert_equal 'IV', 4.to_roman\n  end\n\n  def test_5\n    skip\n    assert_equal 'V', 5.to_roman\n  end\n\n  def test_6\n    skip\n    assert_equal 'VI', 6.to_roman\n  end\n\n  def test_9\n    skip\n    assert_equal 'IX', 9.to_roman\n  end\n\n  def test_27\n    skip\n    assert_equal 'XXVII', 27.to_roman\n  end\n\n  def test_48\n    skip\n    assert_equal 'XLVIII', 48.to_roman\n  end\n\n  def test_59\n    skip\n    assert_equal 'LIX', 59.to_roman\n  end\n\n  def test_93\n    skip\n    assert_equal 'XCIII', 93.to_roman\n  end\n\n  def test_141\n    skip\n    assert_equal 'CXLI', 141.to_roman\n  end\n\n  def test_163\n    skip\n    assert_equal 'CLXIII', 163.to_roman\n  end\n\n  def test_402\n    skip\n    assert_equal 'CDII', 402.to_roman\n  end\n\n  def test_575\n    skip\n    assert_equal 'DLXXV', 575.to_roman\n  end\n\n  def test_911\n    skip\n    assert_equal 'CMXI', 911.to_roman\n  end\n\n  def test_1024\n    skip\n    assert_equal 'MXXIV', 1024.to_roman\n  end\n\n  def test_3000\n    skip\n    assert_equal 'MMM', 3000.to_roman\n  end\n\n  def test_bookkeeping\n    assert_equal 2, BookKeeping::VERSION\n  end\n\nend\n</code></pre>\n\n<p>And here is my code:</p>\n\n<pre><code>module BookKeeping\n  VERSION = 2\nend\n\nclass Numeral\n\n  def initialize(number)\n    @number = number\n  end\n\n  def to_roman\n    roman_hash = {\n        1000 =&gt; 'M',\n        900  =&gt; 'CM',\n        500 =&gt; 'D',\n        400 =&gt; 'CD',\n        100 =&gt; 'C',\n        90  =&gt; 'XC',\n        50 =&gt; 'L',\n        40 =&gt; 'XL',\n        10 =&gt; 'X',\n        9  =&gt; 'IX',\n        5 =&gt; 'V',\n        4 =&gt; 'IV',\n        1 =&gt; 'I'\n    }\n    my_string = \"\"\n    roman_hash.each do |key, value|\n      (@number / key).times {my_string &lt;&lt; value; @number = @number - key}\n    end\n    my_string\n\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "shoes"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1506476395, "post_id": 46437640, "comment_id": 79833085, "body": "there are lots of gui toolkits. see <a href=\"https://en.wikipedia.org/wiki/List_of_platform-independent_GUI_libraries\" rel=\"nofollow noreferrer\">List_of_platform-independent_GUI_libraries</a> or <a href=\"https://en.wikipedia.org/wiki/List_of_widget_toolkits\" rel=\"nofollow noreferrer\">List_of_widget_toolkits</a>"}, {"owner": {"reputation": 257, "user_id": 6642551, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/1145135395532946/picture?type=large", "display_name": "Jacob Moore", "link": "https://stackoverflow.com/users/6642551/jacob-moore"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1506518887, "post_id": 46437640, "comment_id": 79853892, "body": "Thank you but im more interested in knowing how something like a button would be written in ruby, the code behind the toolkits methods"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 2, "creation_date": 1506707865, "post_id": 46437640, "comment_id": 79943447, "body": "All of the code for Shoes is <a href=\"http://shoesrb.com/contribute/\" rel=\"nofollow noreferrer\">on GitHub</a>."}], "owner": {"reputation": 257, "user_id": 6642551, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/1145135395532946/picture?type=large", "display_name": "Jacob Moore", "link": "https://stackoverflow.com/users/6642551/jacob-moore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1506471791, "creation_date": 1506471791, "question_id": 46437640, "link": "https://stackoverflow.com/questions/46437640/ruby-shoes-gui-toolkit-how-was-this-made", "title": "Ruby shoes gui toolkit. How was this made?", "body": "<p>I've been building a lot of projects over the last few months using Ruby. Every project has been some sort of game that outputs to the command line. The shoes gui toolkit says it is written in Ruby. My question is how would you go about writing a script in ruby that would open a little dialog box with a button, without some sort of toolkit like Shoes. I'd like to know whats going on behind the scenes of this short piece of Shoe's code that brings up a window with a few buttons in it.</p>\n\n<pre><code>Shoes.app {\n        background white\n        stack(margin: 8) {\n          button \"A bed of clams\"\n          button \"A coalition of cheetahs\"\n          button \"A gulp of swallows\"\n        }\n      }\n</code></pre>\n\n<p>I have been under the assumption things like this could only be done with JS/HTML/CSS.</p>\n"}, {"tags": ["ruby", "rest-client"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1506470958, "post_id": 46437514, "comment_id": 79831894, "body": "how about <code>resp.values.map { |invoices| invoices.map { |invoice| invoice[&quot;ReqKey&quot;] } }</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8679596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a48273d248e56bd7c90a589f7fff9dd7?s=128&d=identicon&r=PG&f=1", "display_name": "Ken", "link": "https://stackoverflow.com/users/8679596/ken"}, "is_accepted": false, "score": 0, "last_activity_date": 1506494179, "last_edit_date": 1506494179, "creation_date": 1506471428, "answer_id": 46437591, "question_id": 46437514, "link": "https://stackoverflow.com/questions/46437514/rest-client-gem-with-ruby/46437591#46437591", "title": "rest-client gem with ruby", "body": "<p>I guess I answered my own question.\nRandomly tried     </p>\n\n<pre><code>resp2 = $RESPONSE['Invoices']['Invoice'].size\n</code></pre>\n\n<p>and it worked.</p>\n\n<p>Would still like to know what format this technically is.</p>\n"}], "owner": {"reputation": 1, "user_id": 8679596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a48273d248e56bd7c90a589f7fff9dd7?s=128&d=identicon&r=PG&f=1", "display_name": "Ken", "link": "https://stackoverflow.com/users/8679596/ken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1506494179, "creation_date": 1506470696, "last_edit_date": 1506471304, "question_id": 46437514, "link": "https://stackoverflow.com/questions/46437514/rest-client-gem-with-ruby", "title": "rest-client gem with ruby", "body": "<p>So I am using rest-client gem and am able to get a response from my API request and the response is as follows:</p>\n\n<p><code>{\"Invoice\"=&gt;[{\"ReqKey\"=&gt;\"9\", \"RequestID\"=&gt;\"9B06C27E61BE4B8DB6B9\", \"SyncGuid\"=&gt;\"D98013521663AE4E8251A327B0032A2C\"}, {\"ReqKey\"=&gt;\"12\", \"RequestID\"=&gt;\"E34FAB7ED5D74D30A61E\", \"SyncGuid\"=&gt;\"9A01B67D186C0E4ABF787002624A97C5\"}]}</code></p>\n\n<p>As you can see it is returning an array[2] of Invoice. My question is how do I determine the array size that is returned?</p>\n\n<p>If it helps I am able to pull out values with the following but really need to how big the array is.</p>\n\n<pre><code>resp = $RESPONSE['Invoice'][0]\nvalue = resp.fetch(\"ReqKey\")\n</code></pre>\n\n<p>returns correct value 9</p>\n\n<p>Another question: what format is this response? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "session"], "comments": [{"owner": {"reputation": 3852, "user_id": 1802527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THq66.png?s=128&g=1", "display_name": "Alexis", "link": "https://stackoverflow.com/users/1802527/alexis"}, "edited": false, "score": 0, "creation_date": 1506472664, "post_id": 46437305, "comment_id": 79832240, "body": "I believe that devise is been stored on the custom_session, you should deal with that one at the controller level, try to test it, delete your cookies and sessions and check if they both are been created on the first load"}, {"owner": {"reputation": 138, "user_id": 3602175, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0e2991f27bcfa4f66100afb1ae8bd460?s=128&d=identicon&r=PG&f=1", "display_name": "akaimo", "link": "https://stackoverflow.com/users/3602175/akaimo"}, "reply_to_user": {"reputation": 3852, "user_id": 1802527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THq66.png?s=128&g=1", "display_name": "Alexis", "link": "https://stackoverflow.com/users/1802527/alexis"}, "edited": false, "score": 1, "creation_date": 1506556213, "post_id": 46437305, "comment_id": 79873059, "body": "thanks you are correct, and the custom session would overwrite the app session when created."}], "answers": [{"tags": [], "owner": {"reputation": 138, "user_id": 3602175, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0e2991f27bcfa4f66100afb1ae8bd460?s=128&d=identicon&r=PG&f=1", "display_name": "akaimo", "link": "https://stackoverflow.com/users/3602175/akaimo"}, "is_accepted": true, "score": 1, "last_activity_date": 1506557128, "creation_date": 1506557128, "answer_id": 46458950, "question_id": 46437305, "link": "https://stackoverflow.com/questions/46437305/configure-multiple-named-sessions-in-rails-application/46458950#46458950", "title": "Configure multiple named sessions in Rails application", "body": "<p>After some additional trial and error I moved the session expiry logic into the controller instead of the session_store.rb config per Alexis' recommendation and now both sessions are working as expected.</p>\n\n<p>The controller method I used is more or less akin to the following:</p>\n\n<pre><code>#/app/controllers/custom_session_controller.rb\n\nbefore_action :check_session_expiry\n\ndef check_session_expiry\n  if session[:custom_session_key] &amp;&amp; session[:created_at] &lt; 30.minutes.ago\n    reset_session\n    redirect_to new_custom_session_path, alert: \"session expired\"\n  end\nend\n\n#/config/initializers/session_store.rb\n\nRails.application.config.session_store :cookie_store, key: '_application_session'\nRails.application.config.session_store :cookie_store, key: 'custom_session'\n</code></pre>\n\n<p>I found <a href=\"https://stackoverflow.com/questions/15261914/rails-cookie-based-sessions-mixing-session-scope-with-expiration-times?rq=1\">this other similar question</a> which was helpful in reaching a solution.</p>\n"}], "owner": {"reputation": 138, "user_id": 3602175, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0e2991f27bcfa4f66100afb1ae8bd460?s=128&d=identicon&r=PG&f=1", "display_name": "akaimo", "link": "https://stackoverflow.com/users/3602175/akaimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1093, "favorite_count": 1, "accepted_answer_id": 46458950, "answer_count": 1, "score": 1, "last_activity_date": 1506557128, "creation_date": 1506469009, "last_edit_date": 1506471323, "question_id": 46437305, "link": "https://stackoverflow.com/questions/46437305/configure-multiple-named-sessions-in-rails-application", "title": "Configure multiple named sessions in Rails application", "body": "<p>I have a Rails 5 app that uses the default session store for user authentication through Devise as well as a custom session controller set up to handle access to other resources for unauthenticated users.</p>\n\n<p>The trouble is that although the sessions work properly, the application will create both cookies irrespective of the controller requiring it and end the Devise session after 30 minutes. I am looking for some guidance on how to add a custom session and configure it correctly in Rails.</p>\n\n<p>My incorrect session store config:</p>\n\n<pre><code>#/config/initializers/session_store.rb\n\nRails.application.config.session_store :cookie_store, key: '_application_session'\nRails.application.config.session_store :cookie_store, key: 'custom_session', expire_after: 30.minutes\n</code></pre>\n\n<p>Is this something that needs to be addressed in middleware?</p>\n"}, {"tags": ["ruby", "windows", "sinatra", "rake"], "owner": {"reputation": 880, "user_id": 5279080, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh5.googleusercontent.com/-LoDm6XYbQug/AAAAAAAAAAI/AAAAAAAAABE/t33anFH2T3I/photo.jpg?sz=128", "display_name": "alilland", "link": "https://stackoverflow.com/users/5279080/alilland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 235, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1506467985, "creation_date": 1506467673, "last_edit_date": 1506467985, "question_id": 46437134, "link": "https://stackoverflow.com/questions/46437134/how-do-i-define-the-path-when-running-a-rake-task-with-system-command-from-anoth", "title": "how do I define the path when running a Rake task with system command from another Rake task", "body": "<p>So, I have a rake task that runs as a chron task (its running on windows so this is rufus scheduler instead), this particular rake task sends data via HTTP to a server. If a specifically defined error is sent back in the HTTP response body another rake task is ran with the <code>system</code> command.</p>\n\n<p>Unfortunately this is ran on windows. the rake task is connecting to a database and sending data while each row in the DB is being read so the following error is being thrown, so its saying the \"above path\" is the current directory, and it doesnt see the rake task as an available command</p>\n\n<pre><code>C:\\Users\\ALilland\\Documents\\macros\\experiments\\core_scripts\\app&gt;rake sage_time_records:import\n'\\\\SAGE\\TIMBERLINE OFFICE\\9.5\\ACCOUNTING\\GLOBAL'\nCMD.EXE was started with the above path as the current directory.\nUNC paths are not supported.  Defaulting to Windows directory.\nrake aborted!\nNo Rakefile found (looking for: rakefile, Rakefile, rakefile.rb, Rakefile.rb)\n\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>Rake Task</p>\n\n<pre><code>task :import do\n  ## establish connection\n  # ...\n\n  ## Print out each row\n  while row = db_query.fetch do\n    # ...\n\n    ## define the payload of what will be sent to API\n    # ...\n\n    begin\n      url = \"#{ENV['API']}/time_records\"\n      print \"Sending Time Record to API ... \"\n      response = RestClient.post(url, payload, {accept: :json})\n      puts 'success' if response.code == 201\n    rescue RestClient::ExceptionWithResponse =&gt; error\n      puts 'failed' if error.response.code != 201\n      error_body = JSON.parse(error.response.body)\n      next if error_body['error'] == 'Job Number not found'\n\n      ## calling the other rake task and passing a variable\n      system(\"rake sage_field_employees:import[\\\"#{mapped[:employee]}\\\"]\") if error_body['error'] == 'Field Employee not found'\n      # ...\n    end\n\n  end\n  # ...\nend\n</code></pre>\n"}, {"tags": ["ruby", "macos", "terminal", "path", "rvm"], "comments": [{"owner": {"reputation": 3852, "user_id": 1802527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THq66.png?s=128&g=1", "display_name": "Alexis", "link": "https://stackoverflow.com/users/1802527/alexis"}, "edited": false, "score": 0, "creation_date": 1506473093, "post_id": 46436985, "comment_id": 79832344, "body": "which OS are you running? whenever i forget something about rvm this is my go to guide <a href=\"http://railsapps.github.io/installrubyonrails-ubuntu.html\" rel=\"nofollow noreferrer\">railsapps.github.io/installrubyonrails-ubuntu.html</a>"}, {"owner": {"reputation": 3852, "user_id": 1802527, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THq66.png?s=128&g=1", "display_name": "Alexis", "link": "https://stackoverflow.com/users/1802527/alexis"}, "edited": false, "score": 0, "creation_date": 1506473175, "post_id": 46436985, "comment_id": 79832365, "body": "sorry i missed the tags, mac, don&#39;t really know if is the same"}, {"owner": {"reputation": 168, "user_id": 6476193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba924a9126dbcf128b0939847dca7a4d?s=128&d=identicon&r=PG&f=1", "display_name": "OlaB", "link": "https://stackoverflow.com/users/6476193/olab"}, "edited": false, "score": 0, "creation_date": 1506526425, "post_id": 46436985, "comment_id": 79859367, "body": "From basic knowledge, why dont you create a soft link to the path you want it installed from the path you installed it on, i.e ln -s &quot;currentpath&quot; &quot;intendedpath. That is the binary folder where the exection is, you can always move the wrong path as well after linking them."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1506526459, "post_id": 46436985, "comment_id": 79859379, "body": "You mean you screwed up your path in your shell init file?"}, {"owner": {"reputation": 19, "user_id": 6490492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-dAq1ZwgGpxk/AAAAAAAAAAI/AAAAAAAABQw/8AbP5UYYi8A/photo.jpg?sz=128", "display_name": "Hodari Toure&#39;", "link": "https://stackoverflow.com/users/6490492/hodari-toure"}, "edited": false, "score": 0, "creation_date": 1506531583, "post_id": 46436985, "comment_id": 79862432, "body": "I am having problems moving the path. Each time i try, it never seems to hold. I know i am a novice so i am sure it is a simple procedure, i just have not come across it yet."}, {"owner": {"reputation": 19, "user_id": 6490492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-dAq1ZwgGpxk/AAAAAAAAAAI/AAAAAAAABQw/8AbP5UYYi8A/photo.jpg?sz=128", "display_name": "Hodari Toure&#39;", "link": "https://stackoverflow.com/users/6490492/hodari-toure"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1506531656, "post_id": 46436985, "comment_id": 79862483, "body": "@DaveNewton I am not sure of the difference? I entered &quot;source /etc/profile&quot;  and now my path looks like :/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/Mac&zwnj;&#8203;GPG2/bin"}, {"owner": {"reputation": 19, "user_id": 6490492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-dAq1ZwgGpxk/AAAAAAAAAAI/AAAAAAAABQw/8AbP5UYYi8A/photo.jpg?sz=128", "display_name": "Hodari Toure&#39;", "link": "https://stackoverflow.com/users/6490492/hodari-toure"}, "reply_to_user": {"reputation": 168, "user_id": 6476193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba924a9126dbcf128b0939847dca7a4d?s=128&d=identicon&r=PG&f=1", "display_name": "OlaB", "link": "https://stackoverflow.com/users/6476193/olab"}, "edited": false, "score": 0, "creation_date": 1506638886, "post_id": 46436985, "comment_id": 79913681, "body": "hi @OlaB i have googled that suggestion but i am not sure i am comfortable trying it...but i will. I am just unsure of the correct path."}], "answers": [{"tags": [], "owner": {"reputation": 19, "user_id": 6490492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-dAq1ZwgGpxk/AAAAAAAAAAI/AAAAAAAABQw/8AbP5UYYi8A/photo.jpg?sz=128", "display_name": "Hodari Toure&#39;", "link": "https://stackoverflow.com/users/6490492/hodari-toure"}, "is_accepted": true, "score": 0, "last_activity_date": 1509814569, "creation_date": 1509814569, "answer_id": 47113176, "question_id": 46436985, "link": "https://stackoverflow.com/questions/46436985/i-screwed-up-my-terminal-path-now-i-cant-load-rvm-or-ruby/47113176#47113176", "title": "I screwed up my terminal path now i can&#39;t load rvm or ruby", "body": "<p>i just reinstalled MAMP Pro and now my ruby/ROR works again. I still occasionally get the terminal message but it doesn't crash my program and i can just ignore it. </p>\n"}], "owner": {"reputation": 19, "user_id": 6490492, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-dAq1ZwgGpxk/AAAAAAAAAAI/AAAAAAAABQw/8AbP5UYYi8A/photo.jpg?sz=128", "display_name": "Hodari Toure&#39;", "link": "https://stackoverflow.com/users/6490492/hodari-toure"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 47113176, "answer_count": 1, "score": 1, "last_activity_date": 1509814569, "creation_date": 1506466546, "last_edit_date": 1506526232, "question_id": 46436985, "link": "https://stackoverflow.com/questions/46436985/i-screwed-up-my-terminal-path-now-i-cant-load-rvm-or-ruby", "title": "I screwed up my terminal path now i can&#39;t load rvm or ruby", "body": "<p>I have tried and searched for days to solve this is issue. I am new to programming/coding and I somehow screwed up my path in terminal.</p>\n\n<p>I was following a Ruby on Rails tutorial and it went south. My rvm is installed in the wrong place and nothing i do has fixed it. I am on High Sierra and i have <code>xcode9</code> installed.</p>\n\n<p>I have tried to export <code>:$PATH</code>, I have tried <code>nano</code> editor, I have even tried to implode <code>rvm</code> (it wouldn't let me because i was outside of rvmrc).</p>\n\n<p>When I <code>echo $PATH</code> I get:</p>\n\n<pre><code>:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/MacGPG2/bin:/Applications/.rvm/bin\" before i started trying to fix it, it was \":/usr/local/opt/libiconv/bin:/Applications/.rvm/gems/ruby-2.4.0/bin:/Applications/.rvm/gems/ruby-2.4.0@global/bin:/Applications/.rvm/rubies/ruby-2.4.0/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/MacGPG2/bin:/Applications/.rvm/bin\n</code></pre>\n\n<p>In both cases, the rvm is at the end of the path. </p>\n"}, {"tags": ["ruby", "string", "split"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1506465748, "post_id": 46436825, "comment_id": 79830675, "body": "They have the same effect, so neither is preferable. You can say the same about a third option: <code>&quot;Hello, World&quot;.split(&#47;&#47;)</code>. Note that <code>&quot;Hello, World&quot;.split</code> is commonly used, because it is equivalent to  <code>&quot;Hello, World&quot;.split(&#47;[ \\t\\n\\r\\f\\v]+&#47;)</code> because it splits on strings containing any number and combinations of spaces, tabs, newlines, form-feeds and so on."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1506466902, "post_id": 46436825, "comment_id": 79830951, "body": "One other thing, for <code>str = &quot;Hello, World&quot;</code>, suppose you write <code>str.chars.map(&amp;:upcase) #=&gt; [&quot;H&quot;, &quot;E&quot;, &quot;L&quot;, &quot;L&quot;, &quot;O&quot;, &quot;,&quot;, &quot; &quot;, &quot;W&quot;, &quot;O&quot;, &quot;R&quot;, &quot;L&quot;, &quot;D&quot;]</code>.  Like all methods in the <a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html\" rel=\"nofollow noreferrer\">Enumerable</a> module, <code>map</code>&#39;s receiver is an <a href=\"http://ruby-doc.org/core-2.4.0/Enumerator.html\" rel=\"nofollow noreferrer\">Enumerator</a>, so under the covers Ruby uses <a href=\"http://ruby-doc.org/core-2.4.0/Array.html#method-i-each\" rel=\"nofollow noreferrer\">Array#each</a> to execute <code>str.chars.each.map(&amp;:upcase)</code>..."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1506467118, "post_id": 46436825, "comment_id": 79831007, "body": "... It&#39;s more efficient to simply use <a href=\"http://ruby-doc.org/core-2.4.0/String.html#method-i-each_char\" rel=\"nofollow noreferrer\">String#each_char</a> which, when used without a block, returns an enumerator (rather than constructing a  temporary array). You should write <code>str.each_char.m</code> for all <code>Enumerable</code> methods <code>m</code>."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 3, "creation_date": 1506467564, "post_id": 46436920, "comment_id": 79831097, "body": "Given the example, I assume the OP is only concerned about <code>split</code> when the argument is an empty string. If so, this doesn&#39;t answer the question. clockworkpc, please clarify. Also, why the rush to select an answer? You don&#39;t want to see other answers?"}, {"owner": {"reputation": 308, "user_id": 2218094, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PnUld.jpg?s=128&g=1", "display_name": "SgtPepper", "link": "https://stackoverflow.com/users/2218094/sgtpepper"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1506468779, "post_id": 46436920, "comment_id": 79831379, "body": "What about the last line of his question &quot;Is there a scenario where one is preferable?&quot; The above example is one scenario."}, {"owner": {"reputation": 508, "user_id": 2476604, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/HZVR2.png?s=128&g=1", "display_name": "clockworkpc", "link": "https://stackoverflow.com/users/2476604/clockworkpc"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1506470002, "post_id": 46436920, "comment_id": 79831704, "body": "@CarySwoveland sorry for the ambiguity of my OP, but SgtPepper got it right: What I meant by &quot;is there a scenario...?&quot; was this:  Is there a scenario \u2014 beyond this example \u2014 where #split is preferable #chars? i.e. Is there something I can do (or do better) one or the other?  SgtPepper provided such a response."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1506471333, "post_id": 46436920, "comment_id": 79831969, "body": "clockworkpc, that makes no sense. When <code>split</code>&#39;s argument is anything other than an empty space, it&#39;s &quot;preferable&quot; to <code>chars</code> in the same way that it&#39;s preferable to, say, <code>upcase</code>: neither <code>split</code> nor <code>upcase</code> have <code>split</code>&#39;s functionality in that case. &quot;Preferable&quot; should only be used when comparing two things that both get the job done."}], "tags": [], "owner": {"reputation": 308, "user_id": 2218094, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PnUld.jpg?s=128&g=1", "display_name": "SgtPepper", "link": "https://stackoverflow.com/users/2218094/sgtpepper"}, "is_accepted": false, "score": 3, "last_activity_date": 1506466529, "last_edit_date": 1506466529, "creation_date": 1506466120, "answer_id": 46436920, "question_id": 46436825, "link": "https://stackoverflow.com/questions/46436825/ruby-split-vs-chars-on-a-string/46436920#46436920", "title": "Ruby #split(&quot;&quot;) vs #chars on a string", "body": "<p>You can use <strong>split</strong> for dividing strings into substrings based on a delimiter</p>\n\n<p>For example:</p>\n\n<pre><code>\"a/b-c\".split('/') will return [\"a\", \"b-c\"]\n</code></pre>\n\n<p><strong>chars</strong> instead returns an array of characters in string</p>\n\n<pre><code>\"a/b-c\".chars will return [\"a\", \"/\", \"b\", \"-\", \"c\"]\n</code></pre>\n\n<p>In conclusion, there are plenty of scenarios where one is more suitable than the other one.</p>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 13, "last_activity_date": 1506498690, "creation_date": 1506498690, "answer_id": 46442301, "question_id": 46436825, "link": "https://stackoverflow.com/questions/46436825/ruby-split-vs-chars-on-a-string/46442301#46442301", "title": "Ruby #split(&quot;&quot;) vs #chars on a string", "body": "<blockquote>\n  <p>What is the difference between <code>split</code> and <code>chars</code> [...]?</p>\n</blockquote>\n\n<p><code>string.chars</code> parses the underlying bytes to returns the string's characters, whereas <code>string.split('')</code> uses a regular expression to achieve the same.</p>\n\n<p>As a result, <code>chars</code> is faster and more robust. It even works if the string contains invalid characters:</p>\n\n<pre><code>\"foo\\x80bar\".chars\n#=&gt; [\"f\", \"o\", \"o\", \"\\x80\", \"b\", \"a\", \"r\"]\n</code></pre>\n\n<p>Whereas <code>split</code> fails if the string is malformed (because the regex engine can't handle it):</p>\n\n<pre><code>\"foo\\x80bar\".split('')\n#=&gt; ArgumentError: invalid byte sequence in UTF-8\n</code></pre>\n\n<p>If I'm not mistaken, <code>split('')</code> is equivalent to <code>split(//)</code>.</p>\n\n<blockquote>\n  <p>Is there a scenario where one is preferable?</p>\n</blockquote>\n\n<p><code>split('')</code> can be found in many tutorials. I assume this is because prior to Ruby 2.x, <code>chars</code> returned an enumerator. So in order to get an array you had to use <em>two</em> method calls:</p>\n\n<pre><code>string.chars.to_a\n</code></pre>\n\n<p>or a single call to: (which is also slightly shorter)</p>\n\n<pre><code>string.split('')\n</code></pre>\n\n<p>Nowadays, you'd use <code>chars</code> (or <code>each_char</code> for the pre-2.x behavior)</p>\n"}], "owner": {"reputation": 508, "user_id": 2476604, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/HZVR2.png?s=128&g=1", "display_name": "clockworkpc", "link": "https://stackoverflow.com/users/2476604/clockworkpc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5733, "favorite_count": 3, "accepted_answer_id": 46442301, "answer_count": 2, "score": 10, "last_activity_date": 1506498690, "creation_date": 1506465563, "question_id": 46436825, "link": "https://stackoverflow.com/questions/46436825/ruby-split-vs-chars-on-a-string", "title": "Ruby #split(&quot;&quot;) vs #chars on a string", "body": "<p>What is the difference between #split and #chars in Ruby when splitting a string?</p>\n\n<pre><code>\"Hello, World\".split(\"\")\n#=&gt; [\"H\", \"e\", \"l\", \"l\", \"o\", \",\", \" \", \"W\", \"o\", \"r\", \"l\", \"d\"]\n\n\"Hello, World\".chars\n#=&gt; [\"H\", \"e\", \"l\", \"l\", \"o\", \",\", \" \", \"W\", \"o\", \"r\", \"l\", \"d\"]\n</code></pre>\n\n<p>They both return an array, and they both include the blank space and punctuation.</p>\n\n<p>Is there a scenario where one is preferable?</p>\n"}, {"tags": ["ruby", "docker", "jenkins", "redis"], "comments": [{"owner": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "edited": false, "score": 0, "creation_date": 1506492295, "post_id": 46436780, "comment_id": 79837193, "body": "Are you in a corporate environment with own DNS? Can you try ping or traceroute in the pipeline to see if you are able to reach that IP itself or not?"}], "answers": [{"tags": [], "owner": {"reputation": 2049, "user_id": 2246700, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/63ae5300336319b5b03e0008130b27b6?s=128&d=identicon&r=PG&f=1", "display_name": "narzero", "link": "https://stackoverflow.com/users/2246700/narzero"}, "is_accepted": true, "score": 1, "last_activity_date": 1506723291, "last_edit_date": 1506723291, "creation_date": 1506544391, "answer_id": 46456761, "question_id": 46436780, "link": "https://stackoverflow.com/questions/46436780/cant-connect-to-redis-from-within-a-docker-container-rediscannotconnecterror/46456761#46456761", "title": "Can&#39;t connect to Redis from within a Docker container (Redis::CannotConnectError)", "body": "<p>The Docker container has the IP <code>172.17.0.2</code>. Since I have UFW (firewall) enabled I had to add a rule that allows Docker to connect to Redis on port 6379.</p>\n\n<p>So doing <code>sudo ufw allow from 172.17.0.2 to any port 6379</code> solved the issue.</p>\n"}], "owner": {"reputation": 2049, "user_id": 2246700, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/63ae5300336319b5b03e0008130b27b6?s=128&d=identicon&r=PG&f=1", "display_name": "narzero", "link": "https://stackoverflow.com/users/2246700/narzero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 667, "favorite_count": 0, "accepted_answer_id": 46456761, "answer_count": 1, "score": 0, "last_activity_date": 1506723291, "creation_date": 1506465276, "question_id": 46436780, "link": "https://stackoverflow.com/questions/46436780/cant-connect-to-redis-from-within-a-docker-container-rediscannotconnecterror", "title": "Can&#39;t connect to Redis from within a Docker container (Redis::CannotConnectError)", "body": "<p>I have a Jenkins Pipeline that runs all tests for a Sinatra application inside a Docker container.</p>\n\n<p>Here's what the Pipeline looks like:</p>\n\n<pre><code>#!/usr/bin/env groovy\n\npipeline {\n\n    agent {\n        docker {\n            image 'ruby'\n            args '-u root -v /root/.ssh:/root/.ssh'\n        }\n    }\n\n    stages {\n        stage('Build') {\n            steps {\n                echo 'Building...'\n                sh 'bundle install'\n            }\n        }\n        stage('Test') {\n            steps {\n                echo 'Testing...'\n                sh 'rspec spec'\n            }\n        }\n        stage('Deploy') {\n            steps {\n                echo 'Deploy...'\n                sh 'cap staging deploy'\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>The Sinatra app uses Redis and I can't seem to connect to Redis from within the Docker containing that's running the tests. The Redis db is ran on a different remote server that is accessible. </p>\n\n<p>I'm using <code>redis-rb</code> and the following code to access Redis:</p>\n\n<pre><code>REDIS_DB = Redis.new(url: 'redis://:strongpassword123@server_ip:6379')\n</code></pre>\n\n<p>But the test returns with the following error:</p>\n\n<pre><code>Redis::CannotConnectError:\n       Error connecting to Redis on server_ip:6379 (Redis::TimeoutError)\n     # /usr/local/bundle/gems/redis-4.0.0/lib/redis/client.rb:344:in `rescue in establish_connection'\n     # /usr/local/bundle/gems/redis-4.0.0/lib/redis/client.rb:329:in `establish_connection'\n     # /usr/local/bundle/gems/redis-4.0.0/lib/redis/client.rb:99:in `block in connect'\n     # /usr/local/bundle/gems/redis-4.0.0/lib/redis/client.rb:291:in `with_reconnect'\n     # /usr/local/bundle/gems/redis-4.0.0/lib/redis/client.rb:98:in `connect'\n     # /usr/local/bundle/gems/redis-4.0.0/lib/redis/client.rb:363:in `ensure_connected'\n     # /usr/local/bundle/gems/redis-4.0.0/lib/redis/client.rb:219:in `block in process'\n     # /usr/local/bundle/gems/redis-4.0.0/lib/redis/client.rb:304:in `logging'\n     # /usr/local/bundle/gems/redis-4.0.0/lib/redis/client.rb:218:in `process'\n     # /usr/local/bundle/gems/redis-4.0.0/lib/redis/client.rb:118:in `call'\n     # /usr/local/bundle/gems/redis-4.0.0/lib/redis.rb:877:in `block in get'\n     # /usr/local/bundle/gems/redis-4.0.0/lib/redis.rb:45:in `block in synchronize'\n     # /usr/local/bundle/gems/redis-4.0.0/lib/redis.rb:45:in `synchronize'\n     # /usr/local/bundle/gems/redis-4.0.0/lib/redis.rb:876:in `get'\n</code></pre>\n\n<p>I've tried using a local Redis server but that didn't help either.</p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby", "rake", "ruby-on-rails-5", "asset-pipeline", "spree"], "comments": [{"owner": {"reputation": 3502, "user_id": 2558108, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DUiG3.jpg?s=128&g=1", "display_name": "Qwertie", "link": "https://stackoverflow.com/users/2558108/qwertie"}, "edited": false, "score": 0, "creation_date": 1507259819, "post_id": 46436403, "comment_id": 80147949, "body": "There is probably a bootstrap variables file you are forgetting to import."}], "answers": [{"tags": [], "owner": {"reputation": 1038, "user_id": 708964, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/gIRPQ.png?s=128&g=1", "display_name": "Carl", "link": "https://stackoverflow.com/users/708964/carl"}, "is_accepted": true, "score": 0, "last_activity_date": 1508797890, "creation_date": 1508797890, "answer_id": 46899500, "question_id": 46436403, "link": "https://stackoverflow.com/questions/46436403/asset-pipeline-breaking-after-adding-spree-to-rails-app/46899500#46899500", "title": "Asset Pipeline Breaking After Adding Spree to Rails App", "body": "<p>The problem was a conflict in the boostrap-sprockets call. Removing that import solved the issue.</p>\n"}], "owner": {"reputation": 1038, "user_id": 708964, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/gIRPQ.png?s=128&g=1", "display_name": "Carl", "link": "https://stackoverflow.com/users/708964/carl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 46899500, "answer_count": 1, "score": 0, "last_activity_date": 1508797890, "creation_date": 1506462729, "last_edit_date": 1506511445, "question_id": 46436403, "link": "https://stackoverflow.com/questions/46436403/asset-pipeline-breaking-after-adding-spree-to-rails-app", "title": "Asset Pipeline Breaking After Adding Spree to Rails App", "body": "<p>I am attempting to precompile my assets after adding the spree gem to my Rails 5 app. It was running fine before I added it, but now I can't get my assets to precompile. </p>\n\n<p>application.scss</p>\n\n<pre><code>@import \"bootstrap-sprockets\";\n@import \"bootstrap\";\n@import \"bootsy\";\n@import \"theme\";\n@import \"dropzone\";\n@import \"font-awesome\";\n@import \"spree/frontend/all\";\n@import \"spree/backend/all\";\n@import \"essentials\";\n@import \"custom\";\n</code></pre>\n\n<p>This is what I get with the rake assets:precompile command</p>\n\n<pre><code>rake aborted!\nSass::SyntaxError: Undefined variable: \"$navbar-height\".\n/Users/username/.rvm/gems/ruby-2.4.1/gems/spree_backend-3.3.0/app/assets/stylesheets/spree/backend/components/_sidebar.scss:3\n</code></pre>\n"}, {"tags": ["ruby", "express", "middleware", "rack"], "answers": [{"comments": [{"owner": {"reputation": 456, "user_id": 3122311, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/679c944afa134ee19cbf571de55aae15?s=128&d=identicon&r=PG", "display_name": "Pedro Vin&#237;cius", "link": "https://stackoverflow.com/users/3122311/pedro-vin%c3%adcius"}, "edited": false, "score": 0, "creation_date": 1506464087, "post_id": 46436487, "comment_id": 79830271, "body": "Awesome explanation! Thank you so much!"}], "tags": [], "owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "is_accepted": true, "score": 11, "last_activity_date": 1506493981, "last_edit_date": 1506493981, "creation_date": 1506463217, "answer_id": 46436487, "question_id": 46436376, "link": "https://stackoverflow.com/questions/46436376/what-does-app-callenv-really-do/46436487#46436487", "title": "What does @app.call(env) really do?", "body": "<p><code>@app.call</code> doesn't terminate the execution of your handler - it just calls the next middleware in the chain. It is expected that each middleware will either call the next in the chain and return its return value, or terminate the chain by returning an array of <code>[status_code, body, headers]</code>. Each middleware is expected to pass the array of <code>[status_code, body, headers]</code> back up the chain, by returning that value out of its <code>#call</code> method. Recall that in Ruby, the return value of the last statement of each method is implicitly returned to its caller.</p>\n\n<p>As written, you're going to invoke the remaining middleware in the stack, then discard its result, and then continue on with your handler, run the code, invoke the remaining middleware stack <em>again</em>, and then finally return that result back upstream. </p>\n\n<p>Just explicitly <code>return</code> if you want to bail out of the handler:</p>\n\n<pre><code>def call(env)\n  return @app.call(env) if env['REQUEST_METHOD'] != 'POST'\n\n  body = env['rack.input'].clone\n  body = JSON.parse(body.gets || {}, symbolize_names: true)\n  body[:some_message] = \"Peace, Love and Hope\"\n\n  env.update('rack.input', StringIO.new(JSON.dump(body)))\n\n  @app.call(env)\nend\n</code></pre>\n\n<p>It may be more clear to just run your mutators conditionally, then always <code>@app.call</code> to terminate the handler:</p>\n\n<pre><code>def call(env)\n  mutate!(env) if env['REQUEST_METHOD'] == \"POST\"\n  @app.call(env)\nend\n\ndef mutate!(env)\n  body = env['rack.input'].clone\n  body = JSON.parse(body.gets || {}, symbolize_names: true)\n  body[:some_message] = \"Peace, Love and Hope\"\n  env.update('rack.input', StringIO.new(JSON.dump(body)))\nend\n</code></pre>\n\n<p>Since <code>@app.call</code> is the last statement in <code>#call</code> here, its return value is returned to your middleware's caller.</p>\n"}], "owner": {"reputation": 456, "user_id": 3122311, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/679c944afa134ee19cbf571de55aae15?s=128&d=identicon&r=PG", "display_name": "Pedro Vin&#237;cius", "link": "https://stackoverflow.com/users/3122311/pedro-vin%c3%adcius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1892, "favorite_count": 0, "accepted_answer_id": 46436487, "answer_count": 1, "score": 7, "last_activity_date": 1506493981, "creation_date": 1506462578, "question_id": 46436376, "link": "https://stackoverflow.com/questions/46436376/what-does-app-callenv-really-do", "title": "What does @app.call(env) really do?", "body": "<p>I really love to learn how the things work under de hood, specially when it comes to technology. Currently, I'm studying ruby more deeply and trying to use it only with rack in order to understand how rack based frameworks work.</p>\n\n<p>At this moment, rack middlewares are getting me crazy. Why? Although middlewares are very simple, I'm a little confused about the <code>@app.call(env)</code>. For the sake of clarity, consider the following code:</p>\n\n<pre><code>class MyCustomMiddleware\n  def initialize(app)\n    @app = app\n  end\n\n  def call(env)\n    @app.call(env) if env['REQUEST_METHOD'] != 'POST'\n\n    body = env['rack.input'].clone\n    body = JSON.parse(body.gets || {}, symbolize_names: true)\n    body[:some_message] = \"Peace, Love and Hope\"\n\n    env.update('rack.input', StringIO.new(JSON.dump(body)))\n\n    @app.call(env)\n  env\nend\n</code></pre>\n\n<p>All I want to do is change the request body if (and only if) the request method is <code>POST</code>. If the request method is any other type than \"POST\", I want to pass the request to the next middleware (it works this way in Rack, right?). The problem, is that all the code is being executed, no matter if the request method is <code>POST</code> or not.</p>\n\n<p>Maybe it can be a misunderstanding in regard to rack middlewares, as I'm used to work with <code>Express.js</code>. In <code>Express</code>, you have a stack of middlewares in which the requests pass through, and, each middleware calls the <code>next()</code> method in order to \"release\" the request. I was thinking that <code>@app.call(env)</code> would be similar to the <code>Express</code>' <code>next()</code> method... But looks like not, as the request is not being released when I call it and all the code is being executed.</p>\n\n<p>Can somebody explain me what this method really does and point me where is my error?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1506473724, "post_id": 46436461, "comment_id": 79832500, "body": "It&#39;s perhaps worth noting that <code>_</code> and <code>_a</code> are valid local variables. One could write, for example, <code>[1,2,3].map { |_| 2*_ } #=&gt; [2, 4, 6]</code>. Block variables whose names begin with an underscore are special in one respect, however: <code>[[1,2,3], [3,4,5]].map { |_y  ,x, _y| x } #=&gt; [2, 4]</code>, whereas <code>[[1,2,3], [3,4,5]].map { |y, x, y| x } #=&gt; SyntaxError: (irb):569: duplicated argument name</code>."}], "tags": [], "owner": {"reputation": 2027, "user_id": 3206935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bd2a4aca251933f2cac77579282b640?s=128&d=identicon&r=PG&f=1", "display_name": "ulferts", "link": "https://stackoverflow.com/users/3206935/ulferts"}, "is_accepted": true, "score": 5, "last_activity_date": 1506463054, "creation_date": 1506463054, "answer_id": 46436461, "question_id": 46436341, "link": "https://stackoverflow.com/questions/46436341/should-you-pass-in-block-variables-even-if-they-arent-used/46436461#46436461", "title": "Should you pass in block variables even if they aren&#39;t used?", "body": "<p>This is probably opinionated but the rule in the projects I work on is to pass it in but only as a <code>_value</code> or <code>_</code> as it communicates at the definition of the block that the variable was not forgotten but will not be used. </p>\n\n<p>So in your example this would mean</p>\n\n<pre><code>h.keep_if {|key, _| key % 2 == 0}\n</code></pre>\n\n<p>We usually enforce it via rubocop using <a href=\"http://www.rubydoc.info/gems/rubocop/RuboCop/Cop/Lint/UnusedMethodArgument\" rel=\"noreferrer\">RuboCop::Cop::Lint::UnusedMethodArgument</a></p>\n\n<p>That same rule is applied when a method is overridden and the overriding implementation does not make use of a variable but needs to list it in order to match the original signature. </p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1506475842, "post_id": 46436962, "comment_id": 79832982, "body": "<code>hash.find{|k| puts &quot;k=#{k}&quot;; k.odd?} #=&gt; k=[1, 3] NoMethodError: undefined method &#39;odd?&#39; for [1, 3]:Array</code>. The first value passed to the block is <code>hash.find.next #=&gt; [1, 3]</code> The block variable <code>k</code> is then set equal to that array. Incidentally, this is not an answer, so you should remove it. You could add it to your question, however."}], "tags": [], "owner": {"reputation": 2157, "user_id": 6407868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5f5ea0c071e2a5adff7d131f58cc2011?s=128&d=identicon&r=PG&f=1", "display_name": "the12", "link": "https://stackoverflow.com/users/6407868/the12"}, "is_accepted": false, "score": -1, "last_activity_date": 1506500096, "last_edit_date": 1506500096, "creation_date": 1506466398, "answer_id": 46436962, "question_id": 46436341, "link": "https://stackoverflow.com/questions/46436341/should-you-pass-in-block-variables-even-if-they-arent-used/46436962#46436962", "title": "Should you pass in block variables even if they aren&#39;t used?", "body": "<p>I realized after testing it out in IRB, that is mandatory to pass in the <code>value</code> variable in certain methods to make them work.</p>\n\n<pre><code>hash = {1=&gt;3, 4=&gt;7, 3=&gt;2, 5=&gt;6}\nhash.find{|k|k.odd?} #without value block variable will return an error\nhash.find{|k,v|k.odd?} #returns [1,3]\n</code></pre>\n"}], "owner": {"reputation": 2157, "user_id": 6407868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5f5ea0c071e2a5adff7d131f58cc2011?s=128&d=identicon&r=PG&f=1", "display_name": "the12", "link": "https://stackoverflow.com/users/6407868/the12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 46436461, "answer_count": 2, "score": 1, "last_activity_date": 1506500096, "creation_date": 1506462365, "question_id": 46436341, "link": "https://stackoverflow.com/questions/46436341/should-you-pass-in-block-variables-even-if-they-arent-used", "title": "Should you pass in block variables even if they aren&#39;t used?", "body": "<p>Using HackerRank to brush up on my skills, and saw this piece of code:</p>\n\n<pre><code>&gt; h = {1 =&gt; 1, 2 =&gt; 4, 3 =&gt; 9, 4 =&gt; 16, 5 =&gt; 25}\n =&gt; {1 =&gt; 1, 2 =&gt; 4, 3 =&gt; 9, 4 =&gt; 16, 5 =&gt; 25}\n&gt; h.keep_if {|key, value| key % 2 == 0}\n</code></pre>\n\n<p>I saw that even though the <code>value</code> block variable was not used, it was still passed in. I know that it works either way (with or without <code>value</code>), but is it more correct to pass in variables that you don't plan on using? Or to pass in variables that even though aren't used, should still be passed in, because it's considered better \"form\".</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "erb"], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 1, "last_activity_date": 1506462617, "creation_date": 1506462617, "answer_id": 46436382, "question_id": 46436291, "link": "https://stackoverflow.com/questions/46436291/undefined-method-each-for-nilnilclass-on-an-erb-array-iteration/46436382#46436382", "title": "undefined method `each&#39; for nil:NilClass on an erb array iteration", "body": "<p>The first thing you should understand is that instance variables return <code>nil</code> if they haven't been set. If you say <code>@fake_var == nil</code> it will be true if you never defined <code>@fake_var</code> before this. You can contrast this with regular local variables, which will raise a NoMethodError if you try and use them before they're defined. For example, <code>puts(fake_var)</code> will raise a NoMethodError for fake_var.</p>\n\n<p>Now look at your template. No matter what it will loop over <code>@customers</code>. If <code>@customers</code> has not been set, you'll see a NoMethodError because you can't call <code>each</code> on <code>nil</code>. </p>\n\n<p>Finally, look at your controller action:</p>\n\n<pre><code>  def index\n    if params[:keywords].present?\n      @keywords = params[:keywords]\n      customer_search_term = CustomerSearchTerm.new(@keywords)\n      @customer = Customer.where(\n        customer_search_term.where_clause,\n        customer_search_term.where_args).\n        order(customer_search_term.order)\n    else\n      @customers = []\n    end\n  end\n</code></pre>\n\n<p>Specifically the case when <code>params[:keywords].present?</code>. You never set <code>@customers</code> in this case so it will be <code>nil</code> when the template tries to access it. </p>\n\n<p>I think if you simply replaced <code>@customer =</code> with <code>@customers =</code> it would solve your problem. </p>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 8680724, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-q00ehq39Apg/AAAAAAAAAAI/AAAAAAAAADc/5a0I10mG5rU/photo.jpg?sz=128", "display_name": "Exwire", "link": "https://stackoverflow.com/users/8680724/exwire"}, "is_accepted": false, "score": 0, "last_activity_date": 1506498712, "creation_date": 1506498712, "answer_id": 46442309, "question_id": 46436291, "link": "https://stackoverflow.com/questions/46436291/undefined-method-each-for-nilnilclass-on-an-erb-array-iteration/46442309#46442309", "title": "undefined method `each&#39; for nil:NilClass on an erb array iteration", "body": "<p>you can force it to return array using #to_a which converts nil to empty array</p>\n\n<pre><code>def index\n  return [] unless params[:keywords]\n  @keywords = params[:keywords]\n  customer_search_term = CustomerSearchTerm.new(@keywords)\n  @customer = Customer.where(\n    customer_search_term.where_clause,\n    customer_search_term.where_args).\n    order(customer_search_term.order\n  ).to_a\nend\n</code></pre>\n\n<p><a href=\"https://apidock.com/ruby/Array/to_a\" rel=\"nofollow noreferrer\">https://apidock.com/ruby/Array/to_a</a></p>\n"}], "owner": {"reputation": 2221, "user_id": 5921203, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/lczFa.jpg?s=128&g=1", "display_name": "Steven Aguilar", "link": "https://stackoverflow.com/users/5921203/steven-aguilar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 731, "favorite_count": 0, "accepted_answer_id": 46436382, "answer_count": 2, "score": 0, "last_activity_date": 1506498712, "creation_date": 1506462094, "question_id": 46436291, "link": "https://stackoverflow.com/questions/46436291/undefined-method-each-for-nilnilclass-on-an-erb-array-iteration", "title": "undefined method `each&#39; for nil:NilClass on an erb array iteration", "body": "<p>Im currently working in an Rails 5 application where you can search for a first name or last name and records of the customers of that account would be displayed. However I am getting a Nil object return from search algorithm.</p>\n\n<p>customers_controller:</p>\n\n<pre><code>class CustomersController &lt; ApplicationController\n  def index\n    if params[:keywords].present?\n      @keywords = params[:keywords]\n      customer_search_term = CustomerSearchTerm.new(@keywords)\n      @customer = Customer.where(\n        customer_search_term.where_clause,\n        customer_search_term.where_args).\n        order(customer_search_term.order)\n    else\n      @customers = []\n    end\n  end\nend\n</code></pre>\n\n<p>As you can see if there is no records found is suppose to return an empty array but is returning a Nil object.</p>\n\n<p>customers/index.html.erb</p>\n\n<pre><code>[![&lt;header&gt;\n  &lt;h1 class=\"h2\"&gt;Customer Search&lt;/h1&gt;\n&lt;/header&gt;\n\n&lt;section class=\"search-form\"&gt;\n  &lt;%= form_for :customers, method: :get do |f| %&gt;\n    &lt;div class=\"input-group input-group-lg\"&gt;\n      &lt;%= label_tag :keywords, nil, class: \"sr-only\" %&gt;\n      &lt;%= text_field_tag :keywords, nil,\n                          placeholder: \"First Name, Last Name or Email Address\",\n                          class: \"form-control input-lg\" %&gt;\n\n      &lt;span class=\"input-group-btn\"&gt;\n        &lt;%= submit_tag \"Find Customers\", class: \"btn btn-primary btn-lg\" %&gt;\n      &lt;/span&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;/section&gt;\n\n&lt;section class=\"search-results\"&gt;\n  &lt;header&gt;\n    &lt;h1 class=\"h3\"&gt;Results&lt;/h1&gt;\n  &lt;/header&gt;\n  &lt;table class=\"table table-striped\"&gt;\n    &lt;thead&gt;\n      &lt;tr&gt;\n        &lt;th&gt;First Name&lt;/th&gt;\n        &lt;th&gt;Last Name&lt;/th&gt;\n        &lt;th&gt;Email&lt;/th&gt;\n        &lt;th&gt;Joined&lt;/th&gt;\n      &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n      &lt;% @customers.each do |customer| %&gt;\n        &lt;tr&gt;\n          &lt;td&gt;&lt;%= customer.first_name %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= customer.last_name %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= customer.email %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= l customer.created_at.to_date %&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n      &lt;% end %&gt;\n    &lt;/tbody&gt;\n  &lt;/table&gt;\n&lt;/section&gt;][1]][1]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rbenv"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1506462864, "post_id": 46436229, "comment_id": 79829947, "body": "Have you <a href=\"https://stackoverflow.com/questions/28890719/how-to-install-a-gem-globally-without-sudo-using-rbenv\">configured rbenv to not use sudo</a>? You could also try putting rails in the gemfile, running bundle, then <code>bundle exec rails</code>"}, {"owner": {"reputation": 10157, "user_id": 53491, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c79083b696c8a63b10dc59b286a24ef6?s=128&d=identicon&r=PG", "display_name": "Brian Postow", "link": "https://stackoverflow.com/users/53491/brian-postow"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1506463179, "post_id": 46436229, "comment_id": 79830038, "body": "I&#39;m pretty sure it&#39;s not using sudo. and rails is already in the Gemfile. it installed the first time. rails just doesn&#39;t seem to KNOW it."}, {"owner": {"reputation": 10157, "user_id": 53491, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c79083b696c8a63b10dc59b286a24ef6?s=128&d=identicon&r=PG", "display_name": "Brian Postow", "link": "https://stackoverflow.com/users/53491/brian-postow"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1506463749, "post_id": 46436229, "comment_id": 79830171, "body": "AH! it appears that my problem may have been a remnant of a previous use of rvm? When try in a new shell, it seems to work."}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1506469338, "post_id": 46436229, "comment_id": 79831539, "body": "It said type &quot;sudo gem install rails&quot; and you typed &quot;gem install rails&quot; instead."}, {"owner": {"reputation": 10157, "user_id": 53491, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c79083b696c8a63b10dc59b286a24ef6?s=128&d=identicon&r=PG", "display_name": "Brian Postow", "link": "https://stackoverflow.com/users/53491/brian-postow"}, "edited": false, "score": 0, "creation_date": 1506523382, "post_id": 46436229, "comment_id": 79857254, "body": "yep. because I had seen other things saying I didn&#39;t need sudo..."}], "answers": [{"tags": [], "owner": {"reputation": 3521, "user_id": 1801379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8623bb58fab9617aa3afe078e6b3e8d9?s=128&d=identicon&r=PG", "display_name": "Babar Al-Amin", "link": "https://stackoverflow.com/users/1801379/babar-al-amin"}, "is_accepted": false, "score": 1, "last_activity_date": 1506478536, "creation_date": 1506478536, "answer_id": 46438444, "question_id": 46436229, "link": "https://stackoverflow.com/questions/46436229/installing-rails-in-rbenv-with-an-old-ruby/46438444#46438444", "title": "installing rails in rbenv with an old ruby", "body": "<p>Rehash the shims:</p>\n\n<pre><code>rbenv rehash\n</code></pre>\n\n<p>Now you should be able to run only <code>rails</code> without <code>bundle exec</code> or <code>rbenv exec</code>.</p>\n"}], "owner": {"reputation": 10157, "user_id": 53491, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c79083b696c8a63b10dc59b286a24ef6?s=128&d=identicon&r=PG", "display_name": "Brian Postow", "link": "https://stackoverflow.com/users/53491/brian-postow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1506478536, "creation_date": 1506461802, "last_edit_date": 1506463428, "question_id": 46436229, "link": "https://stackoverflow.com/questions/46436229/installing-rails-in-rbenv-with-an-old-ruby", "title": "installing rails in rbenv with an old ruby", "body": "<p>I'm working on a project in ruby 2.1.10. it should be using rails 4.0.13.</p>\n\n<p>I'm using rbenv.</p>\n\n<p>I've installed everything, I believe. I ran bundle install for the project. eventually I got it to run.</p>\n\n<p>However, now I get:</p>\n\n<pre><code>turlingdrome$ rails\nRails is not currently installed on this system. To get the latest version, simply type:\n\n    $ sudo gem install rails\n\nYou can then rerun your \"rails\" command.\n\nturlingdrome$ gem install rails -v 4.0.13\nSuccessfully installed rails-4.0.13\nParsing documentation for rails-4.0.13\nDone installing documentation for rails after 1 seconds\n1 gem installed\n\nturlingdrome$ which rails\n/Users/brianp/.rbenv/shims/rails\n\nturlingdrome$ rails -v\nRails is not currently installed on this system. To get the latest version, simply type:\n\n    $ sudo gem install rails\n\nYou can then rerun your \"rails\" command.\n\nturlingdrome$ ruby -v\nruby 2.1.10p492 (2016-04-01 revision 54464) [x86_64-darwin16.0]\n</code></pre>\n\n<p>in case it matters, I'm on a mac running 10.12.6</p>\n\n<p>ETA from comment:</p>\n\n<pre><code>turlingdrome$ bundle exec rails -v\nRails 4.0.13\n</code></pre>\n\n<p>so, bundle exec lets me run rails. rbenv exec rails seems to work too.</p>\n\n<p>So, the problem seems to be in the shim! </p>\n"}, {"tags": ["ruby", "checkbox", "watir", "browser-automation"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 1, "creation_date": 1506468481, "post_id": 46436168, "comment_id": 79831308, "body": "I couldn&#39;t repro locally.  Can you point to the site where this behavior is observed?"}, {"owner": {"reputation": 307, "user_id": 3985538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mP4Mk.jpg?s=128&g=1", "display_name": "Nawshad Rehan Rasha", "link": "https://stackoverflow.com/users/3985538/nawshad-rehan-rasha"}, "edited": false, "score": 0, "creation_date": 1507023008, "post_id": 46436168, "comment_id": 80036827, "body": "Can the checkboxes be cleared manually? Have you tried to wait until the checkboxes are present at page?"}], "owner": {"reputation": 309, "user_id": 7788681, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/944b99636158ff1fc3b32064ef0bc44b?s=128&d=identicon&r=PG&f=1", "display_name": "BIGJOHN", "link": "https://stackoverflow.com/users/7788681/bigjohn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1506461475, "creation_date": 1506461475, "question_id": 46436168, "link": "https://stackoverflow.com/questions/46436168/unable-to-clear-checkboxes-using-watir", "title": "Unable to clear checkboxes using Watir", "body": "<p>I am trying to clear two currently checked checkboxes using Watir.</p>\n\n<p>The HTML contains the following:</p>\n\n<pre><code>&lt;input type=\"checkbox\" name=\"checkbox\" class=\"notifications-settings-tickbox\" value=\"PLAYER\" id=\"PLAYER-settings-checkbox\" checked=\"checked\"&gt;\n\n&lt;input type=\"checkbox\" name=\"checkbox\" class=\"notifications-settings-tickbox\" value=\"MUSIC\" id=\"MUSIC-settings-checkbox\" checked=\"checked\"&gt;\n</code></pre>\n\n<p>When the page is loaded, both of these are checked. I am trying to clear them both.</p>\n\n<p>My code is:</p>\n\n<pre><code>    $website.checkboxes(:class =&gt; \"notifications-settings-tickbox\").each do |checkbox|\n        checkbox.clear\n     end\n</code></pre>\n\n<p>But the checkboxes remain checked. I'm not receiving any error message either so i'm a bit unsure as to what's going on.</p>\n\n<p>I've also tried to directly clear each checkbox:</p>\n\n<pre><code>$website.checkbox(:id =&gt; \"PLAYER-settings-checkbox\").clear\n$website.checkbox(:id =&gt; \"MUSIC-settings-checkbox\").clear\n</code></pre>\n\n<p>But have the same outcome.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "kaminari"], "answers": [{"tags": [], "owner": {"reputation": 4538, "user_id": 809830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdd9801d2717096282258b192edc7793?s=128&d=identicon&r=PG", "display_name": "Alex Kojin", "link": "https://stackoverflow.com/users/809830/alex-kojin"}, "is_accepted": false, "score": 1, "last_activity_date": 1506462045, "creation_date": 1506462045, "answer_id": 46436279, "question_id": 46436072, "link": "https://stackoverflow.com/questions/46436072/select-checkbox-pass-array-in-ruby-on-rails-using-kaminari-pagination/46436279#46436279", "title": "Select checkbox pass array in ruby on rails using kaminari pagination", "body": "<p>1). Save all selected users to form's hidden field <code>selected_user_ids</code>. Kaminari should send remote request and update only user's table but not whole page. In this case <code>selected_user_ids</code> will keep all seleted users.</p>\n\n<p>Second way:\nSave all selected users to localStorage. On form submit extract all users ids from localStorage and save them when to hidden field and send form.</p>\n"}], "owner": {"reputation": 321, "user_id": 7768323, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/4dc775ad1110dce42d259e3592704dcd?s=128&d=identicon&r=PG&f=1", "display_name": "jeff", "link": "https://stackoverflow.com/users/7768323/jeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 315, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1506462045, "creation_date": 1506461088, "question_id": 46436072, "link": "https://stackoverflow.com/questions/46436072/select-checkbox-pass-array-in-ruby-on-rails-using-kaminari-pagination", "title": "Select checkbox pass array in ruby on rails using kaminari pagination", "body": "<p>I have my view where I am showing all the records and I need to add a checkbox for multiple selection, I am doing it in the following way:</p>\n\n<pre><code>&lt;%= form_tag(\"/user_selection\", method: 'get', remote: true, class: \"form-horizontal\" ) do %&gt;&lt;!--responde al index--&gt;\n\n  &lt;div class=\"rwd\"&gt;\n    &lt;table class=\"table table-striped table-bordered table-condensed table-hover\"&gt;\n      &lt;thead&gt;\n        &lt;tr&gt;\n          &lt;th&gt;name&lt;/th&gt;\n          &lt;th&gt;last name&lt;/th&gt;\n        &lt;/tr&gt;\n      &lt;/thead&gt;\n      &lt;tbody id=\"container_users\"&gt;\n          &lt;%= render @users %&gt;\n\n      &lt;/tbody&gt;\n    &lt;/table&gt;\n    &lt;%= paginate @users, :param_name =&gt; 'users' %&gt;\n\n  &lt;/div&gt;\n  &lt;%= submit_tag \"send\", data: { disable_with: 'sending...' } %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>partial user</p>\n\n<pre><code>&lt;tr id=\"user_&lt;%= user.Id %&gt;\"&gt;\n  &lt;td&gt;&lt;%=user.try(:name)%&gt;&lt;/td&gt;\n  &lt;td&gt;&lt;%=user.try(:lastname)%&gt;&lt;/td&gt;\n  &lt;td&gt;&lt;%= check_box_tag \"items[]\", user.Id %&gt;&lt;/td&gt;\n&lt;/tr&gt;\n</code></pre>\n\n<p>This way I can select multiple records and send the ids to the controller, the problem comes when I select the records and I go to the next page using the page of kaminari, when passing from page the records of the previous page are no longer selected, like could you solve it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 5360706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vd5tY.jpg?s=128&g=1", "display_name": "Camilo Patino", "link": "https://stackoverflow.com/users/5360706/camilo-patino"}, "is_accepted": false, "score": 0, "last_activity_date": 1506460587, "creation_date": 1506460587, "answer_id": 46435970, "question_id": 46435736, "link": "https://stackoverflow.com/questions/46435736/calculating-average-for-a-row-in-one-record-with-rails/46435970#46435970", "title": "Calculating average for a row in one record with rails", "body": "<p>For what I understand from your question, it seems to me that you cannot wait for the user to complete the tries to send them, I would suggest and the start of the user attempt create a record with an ID in that table to keep track that the user is \"trying\" after each individual try send through a rest service the result of each try with the attempt ID and add it to the existing record, once he has done the final try you can easily calculate the average, if the user turns off the JS at any given moment you have an existing instance in you DB of the user attempt and you can act from there. Let me know if there's anything i'm not understanding.</p>\n"}, {"tags": [], "owner": {"reputation": 8142, "user_id": 1601137, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VbZbR.jpg?s=128&g=1", "display_name": "Kenny Grant", "link": "https://stackoverflow.com/users/1601137/kenny-grant"}, "is_accepted": false, "score": 0, "last_activity_date": 1506461107, "last_edit_date": 1506461107, "creation_date": 1506460772, "answer_id": 46436010, "question_id": 46435736, "link": "https://stackoverflow.com/questions/46435736/calculating-average-for-a-row-in-one-record-with-rails/46436010#46436010", "title": "Calculating average for a row in one record with rails", "body": "<p>Assuming you need to store it, just calculate on final submission:</p>\n\n<pre><code>params[:average] = (params[:first].to_i + params[:second].to_i + params[:third].to_i)/3.0\n</code></pre>\n\n<p>If you're fine with just calculating it, you could do it in sql with something like:</p>\n\n<pre><code>select id, (select avg(c) from (values(first),(second),(third)) table(c)) as average from table;\n</code></pre>\n\n<p>But probably better to avoid that and just store it when updating. </p>\n"}], "owner": {"reputation": 183, "user_id": 5890993, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FvJ97.png?s=128&g=1", "display_name": "Danli Denny Deng", "link": "https://stackoverflow.com/users/5890993/danli-denny-deng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1506461107, "creation_date": 1506459558, "question_id": 46435736, "link": "https://stackoverflow.com/questions/46435736/calculating-average-for-a-row-in-one-record-with-rails", "title": "Calculating average for a row in one record with rails", "body": "<p>I have a table with 4 columns, \"first, second, third, and average\". They are points of each user scores in 3 tries, and then calculate the average score of 3 tries, and enter the computed result into \"average\" column. How can I achieve this on the server side with rails since user can turn off javascript on the client side?</p>\n\n<p>Thank you for your help in advance!\n(rails 5.0.1.0, postgresql 9.5, ruby 2.3)</p>\n"}, {"tags": ["ruby", "hash", "each", "block"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1506459642, "post_id": 46435551, "comment_id": 79828656, "body": "@lurker you can do the same with <code>#each_pair</code>."}], "answers": [{"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": true, "score": 30, "last_activity_date": 1506510542, "last_edit_date": 1506510542, "creation_date": 1506459685, "answer_id": 46435776, "question_id": 46435551, "link": "https://stackoverflow.com/questions/46435551/in-ruby-whats-the-advantage-of-each-pair-over-each-when-iterating-through-a/46435776#46435776", "title": "In Ruby, what&#39;s the advantage of #each_pair over #each when iterating through a hash?", "body": "<p>Because Hash is an Enumerable, it has to have an <code>each</code> method. <code>each_pair</code> may be a clearer name, since it strongly suggests that two-element arrays containing key-value pairs are passed to the block. </p>\n\n<p>They are aliases for each other: they share the same source code.</p>\n"}], "owner": {"reputation": 508, "user_id": 2476604, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/HZVR2.png?s=128&g=1", "display_name": "clockworkpc", "link": "https://stackoverflow.com/users/2476604/clockworkpc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4828, "favorite_count": 2, "accepted_answer_id": 46435776, "answer_count": 1, "score": 14, "last_activity_date": 1506510542, "creation_date": 1506458838, "question_id": 46435551, "link": "https://stackoverflow.com/questions/46435551/in-ruby-whats-the-advantage-of-each-pair-over-each-when-iterating-through-a", "title": "In Ruby, what&#39;s the advantage of #each_pair over #each when iterating through a hash?", "body": "<p>Let's say I want to access the values of a hash like this:</p>\n\n<pre><code>munsters = {\n  \"Herman\" =&gt; { \"age\" =&gt; 32, \"gender\" =&gt; \"male\" },\n  \"Lily\" =&gt; { \"age\" =&gt; 30, \"gender\" =&gt; \"female\" },\n  \"Grandpa\" =&gt; { \"age\" =&gt; 402, \"gender\" =&gt; \"male\" },\n  \"Eddie\" =&gt; { \"age\" =&gt; 10, \"gender\" =&gt; \"male\" },\n  \"Marilyn\" =&gt; { \"age\" =&gt; 23, \"gender\" =&gt; \"female\"}\n}\n</code></pre>\n\n<p>I could use <code>#each</code> with two parameters:</p>\n\n<pre><code>munsters.each do |key, value| \n    puts \"#{name} is a #{values[\"age\"]}-year-old #{values[\"gender\"]}.\"\nend\n</code></pre>\n\n<p>Or I could use <code>#each_pair</code> with two parameters:</p>\n\n<pre><code>munsters.each_pair do |key, value| \n    puts \"#{name} is a #{values[\"age\"]}-year-old #{values[\"gender\"]}.\"\nend\n</code></pre>\n\n<p>Perhaps the difference between the two is not borne out in this simple example, but can someone help me to understand the advantage of using <code>#each_pair</code> over <code>#each</code> ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "image", "trix"], "comments": [{"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 1, "creation_date": 1506469336, "post_id": 46435549, "comment_id": 79831537, "body": "Trix sends the image as multipart to your server. Though once your server has received the image it has to process it and save it (locally or more likely on a remote hosting service such as Amazon AWS S3). You need to add an attachment gem such as Paperclip, Carriewave or Shrine.. it will deal with the file and you can even do some process on this file (resize the image etc..)(will need image magick locally as well). By the way, using Rails for a blog is maybe overkill, unless this is on purpose."}, {"owner": {"reputation": 43, "user_id": 8419523, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/l4yLf.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/8419523/michael"}, "reply_to_user": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1506469459, "post_id": 46435549, "comment_id": 79831570, "body": "Thanks so much! That makes a lot of sense!"}, {"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1506469660, "post_id": 46435549, "comment_id": 79831627, "body": "I use Paperclip and it&#39;s pretty straightforward. Shrine is the most advanced (too much engineered for a blog I guess). They all have specificities (temp file management etc..). Make sure your form sends files as multipart. (Easy to do in HTML but not sure how Trix sends to the server)"}], "owner": {"reputation": 43, "user_id": 8419523, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/l4yLf.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/8419523/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 446, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1506458827, "creation_date": 1506458827, "question_id": 46435549, "link": "https://stackoverflow.com/questions/46435549/how-to-upload-an-image-to-rails-article", "title": "How to upload an image to Rails article", "body": "<p>I'm rebuilding a blog in Rails, and I'm using Trix for my text-editor. I have everything regarding Trix set up and in place. I can drag an image and drop it into the Trix text-editor and when I click Create Article, I get no errors. But when I go to view the article, there is no image. This seems like a very easy fix.</p>\n\n<p>show.html.erb</p>\n\n<pre><code>&lt;h1&gt;Showing Blog Posts&lt;/h1&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Title:&lt;/strong&gt;\n  &lt;%= @article.title %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Text:&lt;/strong&gt;\n  &lt;%= @article.text.html_safe %&gt;\n&lt;/p&gt;\n\n&lt;%= link_to 'Back', articles_path %&gt;\n</code></pre>\n\n<p>article_controller.rb</p>\n\n<pre><code>class ArticlesController &lt; ApplicationController\n    def index\n       @articles = Article.all \n    end\n\n    def show\n       @article = Article.find(params[:id]) \n    end\n\n    def new\n        @article = Article.new\n    end\n\n    def create\n        @article = Article.new(article_params)\n\n        if @article.save\n          redirect_to @article\n        else\n          render 'new'\n        end\n    end\n\n    def update \n       @article = Article.find(params[:id])\n\n       if @article.update(article_params)\n           redirect_to @article\n       else\n           render 'edit'\n       end\n    end\n\n    private\n        def article_params\n            params.require(:article).permit(:title, :text)\n        end\nend\n</code></pre>\n\n<p>articles.coffee\n(code for uploading image to Trix editor)</p>\n\n<pre><code>$ -&gt;\n  document.addEventListener 'trix-attachment-add', (event) -&gt;\n    attachment = event.attachment\n    if attachment.file\n      return sendFile(attachment)\n    return\n\n  document.addEventListener 'trix-attachment-remove', (event) -&gt;\n    attachment = event.attachment\n    deleteFile attachment\n\n  sendFile = (attachment) -&gt;\n    file = attachment.file\n    form = new FormData\n    form.append 'Content-Type', file.type\n    form.append 'image[image]', file\n    xhr = new XMLHttpRequest\n    xhr.open 'POST', '/images', true\n\n    xhr.upload.onprogress = (event) -&gt;\n      progress = undefined\n      progress = event.loaded / event.total * 100\n      attachment.setUploadProgress progress\n\n    xhr.onload = -&gt;\n      response = JSON.parse(@responseText)\n      attachment.setAttributes\n        url: response.url\n        image_id: response.image_id\n        href: response.url\n\n    xhr.send form\n\n  deleteFile = (n) -&gt;\n    $.ajax\n      type: 'DELETE'\n      url: '/images/' + n.attachment.attributes.values.image_id\n      cache: false\n      contentType: false\n      processData: false\n\n  return\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "regex"], "comments": [{"owner": {"reputation": 613, "user_id": 2252927, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/kEOQw.jpg?s=128&g=1", "display_name": "Oxfist", "link": "https://stackoverflow.com/users/2252927/oxfist"}, "edited": false, "score": 0, "creation_date": 1506459253, "post_id": 46435506, "comment_id": 79828480, "body": "You could treat every item in your <code>string_array</code> as a regex and instead of <code>main_array.include?(x)</code> you could check whether <code>main_array[x]</code>, <code>x</code> being a regex, returns <code>nil</code>, in which case there is no match."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1506481478, "post_id": 46435506, "comment_id": 79834154, "body": "You don&#39;t need &quot;(ruby)&quot; in the title since you have a Ruby tag."}], "answers": [{"tags": [], "owner": {"reputation": 308, "user_id": 2218094, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PnUld.jpg?s=128&g=1", "display_name": "SgtPepper", "link": "https://stackoverflow.com/users/2218094/sgtpepper"}, "is_accepted": false, "score": 2, "last_activity_date": 1506460005, "creation_date": 1506460005, "answer_id": 46435840, "question_id": 46435506, "link": "https://stackoverflow.com/questions/46435506/include-a-regex-string-in-an-array/46435840#46435840", "title": "Include a regex string in an array", "body": "<p>You can use methods like <strong>keep_if</strong> and <strong>delete_if</strong>, so if you want to delete strings that match a regex you could do something like this: </p>\n\n<pre><code>array = ['string-123', 'test']\narray.delete_if{|n| n[/string-\\d+/] }\n</code></pre>\n\n<p>That will delete the strings in the array that do not match your regex. Same thing with keep_if method.</p>\n\n<p>Hope it helps!</p>\n"}, {"comments": [{"owner": {"reputation": 131, "user_id": 8496955, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/130af836e960f2242a04e7fa5cbef5a8?s=128&d=identicon&r=PG&f=1", "display_name": "lumos", "link": "https://stackoverflow.com/users/8496955/lumos"}, "edited": false, "score": 0, "creation_date": 1506607374, "post_id": 46437422, "comment_id": 79897339, "body": "&quot;Regexp.union&quot; is perfect! It incorporates into the rest of my script exactly as needed. Thank you so much!"}], "tags": [], "owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "is_accepted": true, "score": 1, "last_activity_date": 1506469856, "creation_date": 1506469856, "answer_id": 46437422, "question_id": 46435506, "link": "https://stackoverflow.com/questions/46435506/include-a-regex-string-in-an-array/46437422#46437422", "title": "Include a regex string in an array", "body": "<p>A good way to do this is with <code>Regexp.union</code>, which combines multiple regular expressions into a single regex handy for matching.</p>\n\n<pre><code>patterns = [/pattern1/, /pattern2/, /string-\\d+/]\nregex = Regexp.union(patterns)\nmain_array.delete_if{|string| string.match(regex)}\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 8496955, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/130af836e960f2242a04e7fa5cbef5a8?s=128&d=identicon&r=PG&f=1", "display_name": "lumos", "link": "https://stackoverflow.com/users/8496955/lumos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 936, "favorite_count": 0, "accepted_answer_id": 46437422, "answer_count": 2, "score": 0, "last_activity_date": 1506494755, "creation_date": 1506458659, "last_edit_date": 1506494755, "question_id": 46435506, "link": "https://stackoverflow.com/questions/46435506/include-a-regex-string-in-an-array", "title": "Include a regex string in an array", "body": "<p>I have an array made up of several strings that I am searching for in another array, like so:</p>\n\n<pre><code>strings_array = [\"string1\", \"string2\", \"string3\"]\nmain_array = [ ## this is populated with string values outside of my script ## ]\n\nmain_array.each { |item|\n  if strings_array.any? { |x| main_array.include?(x) }\n    main_array.delete(item)\n  end\n}\n</code></pre>\n\n<p>This is a simplified version of what my script is actually doing, but that's the gist. It works as is, but I'm wondering how I can make it so that the <code>strings_array</code> can include strings made out of regex. So let's say I have a string in the <code>main_array</code> called \"string-4385\", and I want to delete <em>any</em> string that is composed of <code>string-</code> + a series of integers (without manually adding in the numerical suffix). I tried this:</p>\n\n<pre><code>strings_array = [\"string1\", \"string2\", \"string3\", /string-\\d+/.to_s]\n</code></pre>\n\n<p>This doesn't work, but that's the logic I'm aiming for. Basically, is there a way to include a string with regex like this within an array? Or is there perhaps a better way than this <code>.any?</code> and <code>include?</code> combo that does the job (without needing to type out the complete string value)?</p>\n\n<p>Thank you for any help!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 351, "user_id": 2188585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0890ad5558eca0c75eb4a88b608b6097?s=128&d=identicon&r=PG", "display_name": "Cleber Reizen", "link": "https://stackoverflow.com/users/2188585/cleber-reizen"}, "edited": false, "score": 0, "creation_date": 1506459048, "post_id": 46435277, "comment_id": 79828375, "body": "Thanks for your help. Maybe I will create a module to test this method and try to validate if its true or false..."}], "tags": [], "owner": {"reputation": 17379, "user_id": 1836143, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/8ddoM.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/1836143/alexander"}, "is_accepted": false, "score": 1, "last_activity_date": 1506457793, "creation_date": 1506457793, "answer_id": 46435277, "question_id": 46435117, "link": "https://stackoverflow.com/questions/46435117/rails-5-custom-validate/46435277#46435277", "title": "Rails 5 custom validate", "body": "<p>First of all, no need to return either <code>true</code> or <code>false</code> from this method, just <code>return</code> - you want to either return from the method because the field is valid or add an error. I didn't quite follow the logic of your validation, but regardless of the result you always <code>return false # CPF INVALIDO</code> and the line <code>errors.add(:cpf, \"CPF INV\u00c1LIDO\")</code> is never reached. Bear in mind - whenever you <code>return</code> from a method, you stop the execution, so you have to be sure that there is at least one execution path, that can reach the line, which adds the actual error.</p>\n"}], "owner": {"reputation": 351, "user_id": 2188585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0890ad5558eca0c75eb4a88b608b6097?s=128&d=identicon&r=PG", "display_name": "Cleber Reizen", "link": "https://stackoverflow.com/users/2188585/cleber-reizen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 435, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1506457793, "creation_date": 1506457158, "question_id": 46435117, "link": "https://stackoverflow.com/questions/46435117/rails-5-custom-validate", "title": "Rails 5 custom validate", "body": "<p>I am learning Rails and I stuck with this custom validation. I tried many different approaches to pass the form field called <code>(:cpf)</code> to validate without success. I also tried using ActiveModel::EachValidator, but I get more confused. The validation is a check digit using modulo 11. So this is what I ended up.</p>\n\n<p><strong>controllers/drivers_controller.rb</strong></p>\n\n<pre><code>  def new\n    @driver = Driver.new\n  end\n\n  def create\n    @driver = Driver.new(driver_params)\n    if @driver.save\n      flash[:success] = \"Motorista cadastrado com sucesso!\"\n      redirect_to @driver\n    else\n      render 'new'\n    end\n  end\n</code></pre>\n\n<p><strong>models/driver.rb</strong></p>\n\n<pre><code>class Driver &lt; ApplicationRecord\n\nvalidate :checkcpf\n\nprivate\n\n  def checkcpf\n    return false if cpf.nil?\n    nulos = %w{12345678909 11111111111 22222222222 33333333333 44444444444 55555555555 66666666666 77777777777 88888888888 99999999999 00000000000}\n    valor = cpf.scan /[0-9]/\n    if valor.length == 11\n      unless nulos.member?(valor.join)\n        valor = valor.collect{|x| x.to_i}\n        soma = 10*valor[0]+9*valor[1]+8*valor[2]+7*valor[3]+6*valor[4]+5*valor[5]+4*valor[6]+3*valor[7]+2*valor[8]\n        soma = soma - (11 * (soma/11))\n        resultado1 = (soma == 0 or soma == 1) ? 0 : 11 - soma\n        if resultado1 == valor[9]\n          soma = valor[0]*11+valor[1]*10+valor[2]*9+valor[3]*8+valor[4]*7+valor[5]*6+valor[6]*5+valor[7]*4+valor[8]*3+valor[9]*2\n          soma = soma - (11 * (soma/11))\n          resultado2 = (soma == 0 or soma == 1) ? 0 : 11 - soma\n          return true if resultado2 == valor[10] # CPF VALIDO\n        end\n      end\n    end\n    return false # CPF INVALIDO\n    errors.add(:cpf, \"CPF INV\u00c1LIDO\")\n  end\nend\n</code></pre>\n\n<p>I think I am missing how to pass my cpf field to validate. Either I got a error message or miss the validation.</p>\n\n<p>I will try to use ActiveModel::EachValidator later when I get better understanding from Rails. This is how I usually do, try to get things to work the way I can understand then refactor the Rails way.</p>\n\n<p>I appreciate any help! Thank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 436, "user_id": 8134073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2w0jk.jpg?s=128&g=1", "display_name": "Abdul Rauf", "link": "https://stackoverflow.com/users/8134073/abdul-rauf"}, "is_accepted": true, "score": 5, "last_activity_date": 1506460122, "creation_date": 1506460122, "answer_id": 46435872, "question_id": 46434362, "link": "https://stackoverflow.com/questions/46434362/cannot-load-such-file-bcrypt-ext-loaderror-on-windows/46435872#46435872", "title": "cannot load such file -- bcrypt_ext (LoadError) on windows", "body": "<p>I have managed to solve this issue by adding following line in the Gemfile.... </p>\n\n<pre><code>gem 'bcrypt', git: 'https://github.com/codahale/bcrypt-ruby.git', :require =&gt; 'bcrypt'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 8775206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93ba0a2f03f33dcdc6a29a572be110b3?s=128&d=identicon&r=PG&f=1", "display_name": "P.M", "link": "https://stackoverflow.com/users/8775206/p-m"}, "reply_to_user": {"reputation": 436, "user_id": 8134073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2w0jk.jpg?s=128&g=1", "display_name": "Abdul Rauf", "link": "https://stackoverflow.com/users/8134073/abdul-rauf"}, "edited": false, "score": 0, "creation_date": 1513350916, "post_id": 47455206, "comment_id": 82633538, "body": "Thanks again. For a beginner like me you guys are pure gold."}], "tags": [], "owner": {"reputation": 31, "user_id": 8775206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93ba0a2f03f33dcdc6a29a572be110b3?s=128&d=identicon&r=PG&f=1", "display_name": "P.M", "link": "https://stackoverflow.com/users/8775206/p-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1511438771, "creation_date": 1511438771, "answer_id": 47455206, "question_id": 46434362, "link": "https://stackoverflow.com/questions/46434362/cannot-load-such-file-bcrypt-ext-loaderror-on-windows/47455206#47455206", "title": "cannot load such file -- bcrypt_ext (LoadError) on windows", "body": "<p>After trying several methods, the above worked for me:\n1) Stop all rails servers.\n2) Add : gem 'bcrypt', git: '<a href=\"https://github.com/codahale/bcrypt-ruby.git\" rel=\"nofollow noreferrer\">https://github.com/codahale/bcrypt-ruby.git</a>', :require => 'bcrypt' to the gemfile.\n3) bundle install.</p>\n"}], "owner": {"reputation": 436, "user_id": 8134073, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2w0jk.jpg?s=128&g=1", "display_name": "Abdul Rauf", "link": "https://stackoverflow.com/users/8134073/abdul-rauf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1368, "favorite_count": 0, "accepted_answer_id": 46435872, "answer_count": 2, "score": 0, "last_activity_date": 1511438771, "creation_date": 1506454029, "question_id": 46434362, "link": "https://stackoverflow.com/questions/46434362/cannot-load-such-file-bcrypt-ext-loaderror-on-windows", "title": "cannot load such file -- bcrypt_ext (LoadError) on windows", "body": "<p>I have ruby 2.3.3p222 (2016-11-21 revision 56859) [x64-mingw32] and rails 5.1.4. I am getting following error when i run <code>rails s</code> command. </p>\n\n<pre><code>rails s\nC:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:292:in `require': cannot load such file -- bcrypt_ext (LoadError)\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:292:in `block in require'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:258:in `load_dependency'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/activesupport-5.1.4/lib/active_support/dependencies.rb:292:in `require'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/bcrypt-3.1.11-x64-mingw32/lib/bcrypt.rb:16:in `rescue in &lt;top (required)&gt;'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/bcrypt-3.1.11-x64-mingw32/lib/bcrypt.rb:12:in `&lt;top (required)&gt;'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/bundler-1.16.0.pre.2/lib/bundler/runtime.rb:83:in `require'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/bundler-1.16.0.pre.2/lib/bundler/runtime.rb:83:in `block (2 levels) in require'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/bundler-1.16.0.pre.2/lib/bundler/runtime.rb:78:in `each'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/bundler-1.16.0.pre.2/lib/bundler/runtime.rb:78:in `block in require'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/bundler-1.16.0.pre.2/lib/bundler/runtime.rb:67:in `each'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/bundler-1.16.0.pre.2/lib/bundler/runtime.rb:67:in `require'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/bundler-1.16.0.pre.2/lib/bundler.rb:114:in `require'\n        from E:/Rauf Personal Data/work/rails/shine/config/application.rb:7:in `&lt;top (required)&gt;'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.4/lib/rails/commands/server/server_command.rb:133:in `require'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.4/lib/rails/commands/server/server_command.rb:133:in `block in perform'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.4/lib/rails/commands/server/server_command.rb:130:in `tap'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.4/lib/rails/commands/server/server_command.rb:130:in `perform'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.20.0/lib/thor/command.rb:27:in `run'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.20.0/lib/thor/invocation.rb:126:in `invoke_command'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/thor-0.20.0/lib/thor.rb:387:in `dispatch'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.4/lib/rails/command/base.rb:63:in `perform'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.4/lib/rails/command.rb:44:in `invoke'\n        from C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/railties-5.1.4/lib/rails/commands.rb:16:in `&lt;top (required)&gt;'\n        from bin/rails:4:in `require'\n        from bin/rails:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>I have almost tried every solution but i am unable to resolve this issue. Can any body please help me to sort out this issue. I already tried following: </p>\n\n<p>Firstly uninstall bcrypt and bcrypt-ruby by running these two commands:\ngem uninstall bcrypt and gem uninstall bcrypt-ruby\nInstall it again with gem install bcrypt --platform=ruby\nIn your Gemfile write gem 'bcrypt-ruby', '3.1.5', :require => 'bcrypt'\nRun bundle install</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "bundler"], "comments": [{"owner": {"reputation": 7036, "user_id": 1740079, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Xp2ab.png?s=128&g=1", "display_name": "nicooga", "link": "https://stackoverflow.com/users/1740079/nicooga"}, "edited": false, "score": 0, "creation_date": 1506453927, "post_id": 46434197, "comment_id": 79825900, "body": "The error is <code>Gem::InstallError: nokogiri requires Ruby version &lt; 2.4, &gt;= 2.1.0</code>. Try unlocking the version of <code>nested_form_fields</code> and see whether that makes nokogiri resolve to a version that supports ruby 2.4"}, {"owner": {"reputation": 20989, "user_id": 148844, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/263aa1ae12d9757f78167b80e596c3df?s=128&d=identicon&r=PG", "display_name": "Chloe", "link": "https://stackoverflow.com/users/148844/chloe"}, "reply_to_user": {"reputation": 7036, "user_id": 1740079, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Xp2ab.png?s=128&g=1", "display_name": "nicooga", "link": "https://stackoverflow.com/users/1740079/nicooga"}, "edited": false, "score": 0, "creation_date": 1506454137, "post_id": 46434197, "comment_id": 79826001, "body": "Hmm, it&#39;s not my project. Here is its <a href=\"https://github.com/ncri/nested_form_fields/blob/master/Gemfile\" rel=\"nofollow noreferrer\"><code>Gemfile</code></a> and <a href=\"https://github.com/ncri/nested_form_fields/blob/master/nested_form_fields.gemspec\" rel=\"nofollow noreferrer\"><code>nested_form_fields.gemspec</code></a>. It actually specifies &#39;nokogiri&#39;, &#39;1.6.8.1&#39;."}], "answers": [{"comments": [{"owner": {"reputation": 20989, "user_id": 148844, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/263aa1ae12d9757f78167b80e596c3df?s=128&d=identicon&r=PG", "display_name": "Chloe", "link": "https://stackoverflow.com/users/148844/chloe"}, "edited": false, "score": 0, "creation_date": 1506541909, "post_id": 46435088, "comment_id": 79867868, "body": "How do you change the <code>nested_form_fields</code> dependency? Why do you think it depends on 1.7.0.1?"}, {"owner": {"reputation": 7036, "user_id": 1740079, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Xp2ab.png?s=128&g=1", "display_name": "nicooga", "link": "https://stackoverflow.com/users/1740079/nicooga"}, "reply_to_user": {"reputation": 20989, "user_id": 148844, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/263aa1ae12d9757f78167b80e596c3df?s=128&d=identicon&r=PG", "display_name": "Chloe", "link": "https://stackoverflow.com/users/148844/chloe"}, "edited": false, "score": 0, "creation_date": 1506545016, "post_id": 46435088, "comment_id": 79869450, "body": "Sorry, my assumption was incorrect since nested_form_fields specifies nokogiri as a development dependency, not a runtime dependency. Still I think nokogiri 1.7.1 does not support ruby 2.4 on windows, so you would need to force usage of nokogiri 1.8.1 which does.  Updated the answer."}], "tags": [], "owner": {"reputation": 7036, "user_id": 1740079, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Xp2ab.png?s=128&g=1", "display_name": "nicooga", "link": "https://stackoverflow.com/users/1740079/nicooga"}, "is_accepted": false, "score": 0, "last_activity_date": 1506545836, "last_edit_date": 1506545836, "creation_date": 1506457043, "answer_id": 46435088, "question_id": 46434197, "link": "https://stackoverflow.com/questions/46434197/how-do-i-get-rails-5-0-6-working-on-windows-with-ruby-2-4-and-nokogiri-1-8-1/46435088#46435088", "title": "How do I get Rails 5.0.6 working on Windows with Ruby 2.4 and Nokogiri 1.8.1?", "body": "<p>I don't know how to prove this since the nokogiri team does not release a gemspec, but that version of nokogiri may not support ruby 2.4 on Windows. </p>\n\n<p>Take a look at:\n<a href=\"https://github.com/sparklemotion/nokogiri/blob/v1.7.1/.cross_rubies\" rel=\"nofollow noreferrer\">https://github.com/sparklemotion/nokogiri/blob/v1.7.1/.cross_rubies</a>. IT does not include ruby 2.4.x.</p>\n\n<p>If you absolutely need to upgrade to ruby 2.4 try locking nokogiri version on 1.8.1, which seems to support ruby 2.4 on windows as per <a href=\"https://github.com/sparklemotion/nokogiri/blob/v1.8.1/.cross_rubies\" rel=\"nofollow noreferrer\">https://github.com/sparklemotion/nokogiri/blob/v1.8.1/.cross_rubies</a></p>\n\n<pre><code>gem 'nokogiri', '1.8.1'\n</code></pre>\n"}], "owner": {"reputation": 20989, "user_id": 148844, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/263aa1ae12d9757f78167b80e596c3df?s=128&d=identicon&r=PG", "display_name": "Chloe", "link": "https://stackoverflow.com/users/148844/chloe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 247, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1506545836, "creation_date": 1506453377, "question_id": 46434197, "link": "https://stackoverflow.com/questions/46434197/how-do-i-get-rails-5-0-6-working-on-windows-with-ruby-2-4-and-nokogiri-1-8-1", "title": "How do I get Rails 5.0.6 working on Windows with Ruby 2.4 and Nokogiri 1.8.1?", "body": "<p>I upgraded Ruby from 2.3 to 2.4. When I run bundle, I get</p>\n\n<pre><code>C:\\Users\\Chloe\\workspace&gt;bundle\nFetching gem metadata from https://rubygems.org/.........\nGem::InstallError: nokogiri requires Ruby version &lt; 2.4, &gt;= 2.1.0.\nAn error occurred while installing nokogiri (1.7.0.1), and Bundler cannot\ncontinue.\nMake sure that `gem install nokogiri -v '1.7.0.1'` succeeds before bundling.\n\nIn Gemfile:\n  nested_form_fields was resolved to 0.8.2, which depends on\n    rails was resolved to 5.0.2, which depends on\n      actioncable was resolved to 5.0.2, which depends on\n        actionpack was resolved to 5.0.2, which depends on\n          actionview was resolved to 5.0.2, which depends on\n            rails-dom-testing was resolved to 2.0.2, which depends on\n              nokogiri\n</code></pre>\n\n<p>However, I was able to install Rails manually with <code>gem install rails --version 5.0.6</code>. It installed Nokogiri 1.8.1. (I also installed, then removed Rails 5.0.2.)</p>\n\n<pre><code>C:\\Users\\Chloe\\workspace&gt;gem list nokogiri\n\n*** LOCAL GEMS ***\n\nnokogiri (1.8.1 x64-mingw32)\n</code></pre>\n\n<p>However, <code>bundle</code> and <code>rails -v</code> still won't work.</p>\n\n<pre><code>C:\\Users\\Chloe\\workspace&gt;rails -v\nCould not find nokogiri-1.7.0.1-x64-mingw32 in any of the sources\nRun `bundle install` to install missing gems.\n</code></pre>\n\n<code>Gemfile</code>\n\n<pre><code>gem 'rails', '~&gt; 5.0.2'\nruby '~&gt; 2.4.0'\n...\n</code></pre>\n"}, {"tags": ["ruby", "gtk"], "answers": [{"tags": [], "owner": {"reputation": 37, "user_id": 8544981, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/97a54206de23e202b0641b7a71d3cc4e?s=128&d=identicon&r=PG&f=1", "display_name": "flow daguerre", "link": "https://stackoverflow.com/users/8544981/flow-daguerre"}, "is_accepted": false, "score": 0, "last_activity_date": 1507635699, "creation_date": 1507635699, "answer_id": 46665869, "question_id": 46434176, "link": "https://stackoverflow.com/questions/46434176/ruby-gtk-dialog-not-closing/46665869#46665869", "title": "Ruby Gtk Dialog not closing", "body": "<p>I solved the problem using <code>dialog.signal_connect('response') { dialog.destroy }</code> instead of use <code>dialog.destroy</code> only.</p>\n"}], "owner": {"reputation": 37, "user_id": 8544981, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/97a54206de23e202b0641b7a71d3cc4e?s=128&d=identicon&r=PG&f=1", "display_name": "flow daguerre", "link": "https://stackoverflow.com/users/8544981/flow-daguerre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1507635699, "creation_date": 1506453320, "question_id": 46434176, "link": "https://stackoverflow.com/questions/46434176/ruby-gtk-dialog-not-closing", "title": "Ruby Gtk Dialog not closing", "body": "<p>My gtk dialog windows never close until the last task of the program.</p>\n\n<pre><code>dialog = Gtk::Dialog.new(\n    \"Test dialog\",\n    nil,\n    Gtk::Dialog::MODAL,\n    [ Gtk::Stock::OK, Gtk::Dialog::RESPONSE_OK ],\n    [ Gtk::Stock::CANCEL, Gtk::Dialog::RESPONSE_CANCEL ]\n)\n</code></pre>\n\n<p>And the windows destroy</p>\n\n<pre><code>dialog.run do |response|\ncase response\n  when Gtk::Dialog::RESPONSE_OK\n# do some minor things here\nFile.user # file class for method user\n  end\nend\ndialog.destroy\n}\n</code></pre>\n\n<p>As i said the problem is the windows only close when all task are completed in the <code>File.user</code> class method.I want to close the windows before all the task are ended.I try that but without success</p>\n\n<pre><code>dialog.run do |response|\ncase response\n  when Gtk::Dialog::RESPONSE_OK\n# do some minor things here\ndialog.destroy\nFile.user # file class for method user\n  end\nend\n}\n</code></pre>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1506452798, "post_id": 46433981, "comment_id": 79825319, "body": "Try appending <a href=\"http://rubular.com/r/HIDNcSd09h\" rel=\"nofollow noreferrer\"><code>(?!(?:.*\\&#47;)?src\\&#47;test\\&#47;resources(?:\\&#47;|$))</code> right after <code>^</code></a>. Or, maybe <code>(?!(?:.*\\&#47;)?src\\&#47;test\\&#47;resources\\&#47;[^\\&#47;]+$)</code> or <code>(?!(?:.*\\&#47;)?src\\&#47;test\\&#47;resources\\&#47;[^\\&#47;]*$)</code>"}, {"owner": {"reputation": 3421, "user_id": 425715, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/xGKdY.png?s=128&g=1", "display_name": "scphantm", "link": "https://stackoverflow.com/users/425715/scphantm"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1506456018, "post_id": 46433981, "comment_id": 79826941, "body": "that seems to have done it.  thanks"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1506456201, "post_id": 46433981, "comment_id": 79827019, "body": "Ok, I posted the explanation."}], "answers": [{"tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1506459121, "last_edit_date": 1506459121, "creation_date": 1506456096, "answer_id": 46434853, "question_id": 46433981, "link": "https://stackoverflow.com/questions/46433981/regex-to-filter-everything-except-whats-in-test-resources/46434853#46434853", "title": "regex to filter everything except whats in test resources", "body": "<p>You may add the <code>(?!(?:.*\\/)?src\\/test\\/resources(?:\\/|$))</code> negative lookahead to the pattern:</p>\n\n<pre><code>^(?!(?:.*\\/)?src\\/test\\/resources(?:\\/|$))(?!.*gradle-wrapper\\.jar$).*\\.(?:jar|exe|a|ar|cpio|shar|iso|LBR|lbr|mar|sbx|tar|bz2|F|gz|lz|lzma|lzo|rz|sfark|sz|xz|z|Z|7z|s7z|ace|afa|alz|apk|arc|arj|b1|ba|bh|cab|car|cfs|cpt|dar|dd|dgc|dmg|ear|gca|ha|hki|ice|kgb\n</code></pre>\n\n<p>See the <a href=\"http://rubular.com/r/HIDNcSd09h\" rel=\"nofollow noreferrer\">Rubular demo</a></p>\n\n<p><strong>NOTE</strong>: If you need to match the actual <em>start of the string</em>, replace <code>^</code> with <code>\\A</code> and for <em>end of string</em>, replace <code>$</code> with <code>\\z</code> (in Ruby, <code>^</code>/<code>$</code> match the start/end of the <em>line</em> by default).</p>\n\n<p>The <code>(?!(?:.*\\/)?src\\/test\\/resources(?:\\/|$))</code> lookahead fails the match if the following pattern is found at the start of the input:</p>\n\n<ul>\n<li><code>(?:.*\\/)?</code> - any 0+ chars, as many as possible, followed with <code>/</code></li>\n<li><code>src\\/test\\/resources</code> - a literal string <code>src/test/resources</code></li>\n<li><code>(?:\\/|$)</code> - <code>/</code> or end of string.</li>\n</ul>\n"}], "owner": {"reputation": 3421, "user_id": 425715, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/xGKdY.png?s=128&g=1", "display_name": "scphantm", "link": "https://stackoverflow.com/users/425715/scphantm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 46434853, "answer_count": 1, "score": 1, "last_activity_date": 1506459121, "creation_date": 1506452555, "question_id": 46433981, "link": "https://stackoverflow.com/questions/46433981/regex-to-filter-everything-except-whats-in-test-resources", "title": "regex to filter everything except whats in test resources", "body": "<p>My git server has this as the push filter</p>\n\n<pre><code>^(?!.*gradle-wrapper\\.jar$).*\\.(?:jar|exe|a|ar|cpio|shar|iso|LBR|lbr|mar|sbx|tar|bz2|F|gz|lz|lzma|lzo|rz|sfark|sz|xz|z|Z|7z|s7z|ace|afa|alz|apk|arc|arj|b1|ba|bh|cab|car|cfs|cpt|dar|dd|dgc|dmg|ear|gca|ha|hki|ice|kgb|lzh|lha|lzx|pak|partimg|paq6|paq7|paq8|pea|pim|pit|qda|rar|rk|sda|sea|sen|sfx|shk|sit|sitx|sqx|tar.gz|tgz|tar.Z|tar.bz2|tbz2|tar.lzma|tlz|uc|uc0|uc2|ucn|ur2|ue2|uca|uha|war|wim|xar|xp3|yz1|zip|zipx|zoo|zpaq|zz|dll)$\n</code></pre>\n\n<p>Basically, we don't want archives pushed to the server.  This is fine, but, i was just given a valid argument that archives in the test resources should be permitted.  So given this test set</p>\n\n<pre><code>bla.zip\n/gradle/gradle-wrapper.jar\nmyproject/src/test/resources/testjar.ear\nherproject/src/test/resources/testjar.ear\nsrc/main/resources/testjar.ear\n</code></pre>\n\n<p>The only matches should be <code>src/main/resources/testjar.ear</code> and <code>bla.zip</code>.  If the file is preceded by the sequence <code>src/test/resources</code> it should be valid and not match.  I'm not that good with regex, could someone help me out here?  The git server is gitlab and this regex is in ruby.</p>\n\n<p><a href=\"http://rubular.com/r/MssVyALeCO\" rel=\"nofollow noreferrer\">http://rubular.com/r/MssVyALeCO</a> is the rubular</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "sorting"], "answers": [{"comments": [{"owner": {"reputation": 3065, "user_id": 1483422, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XJSY1.gif?s=128&g=1", "display_name": "ltdev", "link": "https://stackoverflow.com/users/1483422/ltdev"}, "edited": false, "score": 0, "creation_date": 1506452587, "post_id": 46433898, "comment_id": 79825202, "body": "Correct, well spotted! One additional question if thats ok.. Is it considered best practice to have the <code>sort_by</code> block in my view and then append the <code>.each</code> to loop through the objects, or there&#39;s a more elegant way to do it? just for better readability"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 3065, "user_id": 1483422, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XJSY1.gif?s=128&g=1", "display_name": "ltdev", "link": "https://stackoverflow.com/users/1483422/ltdev"}, "edited": false, "score": 0, "creation_date": 1506452661, "post_id": 46433898, "comment_id": 79825244, "body": "I&#39;d leave the <code>sort_by</code> stuff in the action and in the view just <code>@students.each do</code>"}, {"owner": {"reputation": 3065, "user_id": 1483422, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XJSY1.gif?s=128&g=1", "display_name": "ltdev", "link": "https://stackoverflow.com/users/1483422/ltdev"}, "edited": false, "score": 0, "creation_date": 1506454001, "post_id": 46433898, "comment_id": 79825931, "body": "Sorry just one more question. Each student has a birthdate attribute as this example <code>1997-09-26T10:40:00.000+01:00</code>, How can I convert the date to human readable format?  I tried <code>&lt;td&gt;&lt;%= student[&#39;dob&#39;].strftime(&#39;%d-%m-%Y, %H:%M&#39;) %&gt;&lt;&#47;td&gt;</code>, but this breaks the code"}, {"owner": {"reputation": 3065, "user_id": 1483422, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XJSY1.gif?s=128&g=1", "display_name": "ltdev", "link": "https://stackoverflow.com/users/1483422/ltdev"}, "edited": false, "score": 0, "creation_date": 1506454095, "post_id": 46433898, "comment_id": 79825981, "body": "<code>undefined method </code>strftime&#39; for &quot;2017-09-26T20:40:00.000+01:00&quot;:String`"}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 1, "creation_date": 1506454287, "post_id": 46433898, "comment_id": 79826068, "body": "@Ursus, Hey! Good answer, but, as I know - using <code>#sort_by</code> with <code>#reverse</code> - should works faster ;)"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1506454318, "post_id": 46433898, "comment_id": 79826088, "body": "Sure, that&#39;s valid too."}, {"owner": {"reputation": 3065, "user_id": 1483422, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XJSY1.gif?s=128&g=1", "display_name": "ltdev", "link": "https://stackoverflow.com/users/1483422/ltdev"}, "edited": false, "score": 0, "creation_date": 1506454379, "post_id": 46433898, "comment_id": 79826127, "body": "I get only the date (not time) as a mysql format, like 2017-09-26, although I have same format set as you"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 1, "creation_date": 1506454444, "post_id": 46433898, "comment_id": 79826168, "body": "Oh, my fault. Try this one <code>&lt;td&gt;&lt;%= Date.parse(student[&#39;dob&#39;]).strftime(&#39;%d-%m-%Y, %H:%M&#39;) %&gt;&lt;&#47;td&gt;</code>"}, {"owner": {"reputation": 3065, "user_id": 1483422, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XJSY1.gif?s=128&g=1", "display_name": "ltdev", "link": "https://stackoverflow.com/users/1483422/ltdev"}, "edited": false, "score": 0, "creation_date": 1506497582, "post_id": 46433898, "comment_id": 79839971, "body": "Worked with DateTime correct. <code>DateTime.parse(student[&#39;dob&#39;]).strftime(&#39;%d-%m-%Y, %H:%M&#39;)</code>"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 4, "last_activity_date": 1506454348, "last_edit_date": 1506454348, "creation_date": 1506452263, "answer_id": 46433898, "question_id": 46433858, "link": "https://stackoverflow.com/questions/46433858/ruby-sort-array-of-objects-by-attribute-in-descending-order/46433898#46433898", "title": "Ruby - sort array of objects by attribute in descending order", "body": "<p>You missed to make the age a number</p>\n\n<pre><code>@classroom['students'].sort_by { |st| -st['age'].to_i }\n</code></pre>\n\n<p>I added a <code>-</code> because you want them in descending order. Otherwise</p>\n\n<pre><code>@classroom['students'].sort_by { |st| st['age'].to_i }.reverse\n</code></pre>\n"}], "owner": {"reputation": 3065, "user_id": 1483422, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/XJSY1.gif?s=128&g=1", "display_name": "ltdev", "link": "https://stackoverflow.com/users/1483422/ltdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2165, "favorite_count": 0, "accepted_answer_id": 46433898, "answer_count": 1, "score": 2, "last_activity_date": 1506454348, "creation_date": 1506452130, "question_id": 46433858, "link": "https://stackoverflow.com/questions/46433858/ruby-sort-array-of-objects-by-attribute-in-descending-order", "title": "Ruby - sort array of objects by attribute in descending order", "body": "<p>I have this Json array of objects</p>\n\n<pre><code>\"students\": [{\n    \"id\": 1,\n    \"first_name\": \"John\",\n    \"last_name\": \"Doe\",\n    \"age\": \"14\",\n  }, {\n    \"id\": 2,\n    \"first_name\": \"Victoria\",\n    \"last_name\": \"Secret\",\n    \"age\": \"9\",\n  }, {\n    \"id\": 3,\n    \"first_name\": \"Jim\",\n    \"last_name\": \"Morrison\",\n    \"age\": \"16\",\n  }, {\n    \"id\": 4,\n    \"first_name\": \"Jack\",\n    \"last_name\": \"Daniels\",\n    \"age\": \"7\",\n  },\n  }]\n</code></pre>\n\n<p>I want to display them in my <code>index.html.erb</code> <strong>sorted by age</strong> in <strong>DESC</strong> order. I'm half way there, I have manage to sort them, however not in exact DESC order. This is my loop</p>\n\n<pre><code>&lt;% @classroom['students'].sort_by { |st| st['age'] }.each do |student| %&gt;\n</code></pre>\n\n<p>This is the result I want:</p>\n\n<pre><code>16,  Jim,     Morrison\n14,  John,    Doe\n9,  Victoria, Secret\n7,  Jack,     Daniels\n</code></pre>\n\n<p>This is what I get instead:</p>\n\n<pre><code>14,  John,    Doe\n16,  Jim,     Morrison\n7,  Jack,     Daniels\n9,  Victoria, Secret\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "is_accepted": false, "score": 0, "last_activity_date": 1506453087, "last_edit_date": 1506453087, "creation_date": 1506452172, "answer_id": 46433868, "question_id": 46433650, "link": "https://stackoverflow.com/questions/46433650/passing-local-variable-as-parameter-into-rspec-shared-examples-always-nil/46433868#46433868", "title": "Passing local variable as parameter into RSpec shared_examples Always Nil", "body": "<p>Move the definition of <code>id</code> outside the <code>it</code> block to have access to it in the shared examples or use <code>getId</code> when you call <code>include_examples</code>, because <code>it</code> and <code>describe</code> have different scopes of execution.</p>\n\n<pre><code>describe 'a spec' do\n  def getId\n    12345\n  end\n\n  shared_examples 'using the id' do |the_id|\n    it 'should do something with the id' do\n      expect(id).to eq(12345)\n      expect(the_id).to eq(12345)\n    end\n  end\n\n  let(:id) { getId }\n  it 'should retrieve id' do\n    expect(id).to eq(12345)\n  end\n\n  include_examples 'using the id', getId\nend\n</code></pre>\n"}], "owner": {"reputation": 88, "user_id": 7842706, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/34fee7b848d57276c1dd0192894e0171?s=128&d=identicon&r=PG&f=1", "display_name": "jaibhavaya", "link": "https://stackoverflow.com/users/7842706/jaibhavaya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 240, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1506453087, "creation_date": 1506451389, "question_id": 46433650, "link": "https://stackoverflow.com/questions/46433650/passing-local-variable-as-parameter-into-rspec-shared-examples-always-nil", "title": "Passing local variable as parameter into RSpec shared_examples Always Nil", "body": "<p>I have a spec like this:</p>\n\n<pre><code>shared_examples_for 'using the id' do |the_id|\n    it 'should do something with the id' do\n        # do something with the_id\n    end\nend\n\nid = nil\ndescribe 'a spec' do\n    it 'should retrieve id' do\n        id = getId\n        expect(id).to eq(12345)\n    end\n    include_examples 'using the id', id\nend\n</code></pre>\n\n<p>The problem is that once the spec runs and enters the shared example via include_examples, the id is always nil.  I can verify that in the first it block in the spec itself that the id is being set, it seems to be the hand off that is incorrect.</p>\n\n<p>I cannot use it_behaves_like as we are using rspec for journey testing, so order matters.  Every example I see says this should work, I'm out of ideas.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bundler"], "comments": [{"owner": {"reputation": 1472, "user_id": 2567424, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/cf84c50fc86c32c8db69ad465fb58653?s=128&d=identicon&r=PG", "display_name": "rogelio", "link": "https://stackoverflow.com/users/2567424/rogelio"}, "edited": false, "score": 0, "creation_date": 1506451068, "post_id": 46433484, "comment_id": 79824455, "body": "you can use <a href=\"https://github.com/rvm/rvm\" rel=\"nofollow noreferrer\">rvm</a> or <a href=\"https://github.com/rbenv/rbenv\" rel=\"nofollow noreferrer\">rbenv</a>"}, {"owner": {"reputation": 777, "user_id": 4043127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQN72.jpg?s=128&g=1", "display_name": "Luis Menjivar", "link": "https://stackoverflow.com/users/4043127/luis-menjivar"}, "edited": false, "score": 0, "creation_date": 1506451694, "post_id": 46433484, "comment_id": 79824775, "body": "try closing and reopening the command line. And also recommend what rogelio said, using rvm. It helps you switch back and forth many ruby version,s easily, from the command line, among other things."}], "answers": [{"tags": [], "owner": {"reputation": 20989, "user_id": 148844, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/263aa1ae12d9757f78167b80e596c3df?s=128&d=identicon&r=PG", "display_name": "Chloe", "link": "https://stackoverflow.com/users/148844/chloe"}, "is_accepted": true, "score": 0, "last_activity_date": 1506452678, "last_edit_date": 1506452678, "creation_date": 1506452201, "answer_id": 46433877, "question_id": 46433484, "link": "https://stackoverflow.com/questions/46433484/how-do-i-use-the-correct-version-of-ruby/46433877#46433877", "title": "How do I use the correct version of Ruby?", "body": "<p>I still had <code>C:\\ruby23</code> in my path. I removed it, closed &amp; reopened the shell, and now <code>rails</code> was not found. <code>rails</code> must have been using <code>2.3</code>. I ran <code>bundle</code> again and noticed </p>\n\n<pre><code>MSYS2 could not be found. Please run 'ridk install'\nor download and install MSYS2 manually from https://msys2.github.io/\n</code></pre>\n\n<p>A few times. I ran the installer <code>ridk install</code> (even though I already had DevKit installed). I ran <code>bundle</code> again. But that caused an error</p>\n\n<pre><code>Gem::InstallError: nokogiri requires Ruby version &lt; 2.4, &gt;= 2.1.0.\nAn error occurred while installing nokogiri (1.7.0.1), and Bundler cannot\ncontinue.\nMake sure that `gem install nokogiri -v '1.7.0.1'` succeeds before bundling.\n</code></pre>\n\n<p>I ran <code>gem install rails -v 5.0.2</code> (same version as my <code>Gemfile</code>) and it installed fine, using Nokogiri 1.8.1</p>\n\n<pre><code>Fetching: nokogiri-1.8.1-x64-mingw32.gem (100%)\nNokogiri is built with the packaged libraries: libxml2-2.9.5, libxslt-1.1.30, zlib-1.2.11, libiconv-1.15.\nSuccessfully installed nokogiri-1.8.1-x64-mingw32\n</code></pre>\n\n<p>However <code>bundle</code> still fails and still tries to install Nokogiri 1.7.0.1, and <code>rails -v</code> still fails with an error saying it cannot find Nokogiri 1.7.0.1.</p>\n\n<p>Now this is a new question so I'll create a new post.</p>\n"}, {"comments": [{"owner": {"reputation": 20989, "user_id": 148844, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/263aa1ae12d9757f78167b80e596c3df?s=128&d=identicon&r=PG", "display_name": "Chloe", "link": "https://stackoverflow.com/users/148844/chloe"}, "edited": false, "score": 1, "creation_date": 1506452936, "post_id": 46434065, "comment_id": 79825379, "body": "That&#39;s not for Windows."}, {"owner": {"reputation": 430, "user_id": 1010873, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4a13b3f54c622f4e7577eccf245f2578?s=128&d=identicon&r=PG", "display_name": "MarkJL", "link": "https://stackoverflow.com/users/1010873/markjl"}, "reply_to_user": {"reputation": 20989, "user_id": 148844, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/263aa1ae12d9757f78167b80e596c3df?s=128&d=identicon&r=PG", "display_name": "Chloe", "link": "https://stackoverflow.com/users/148844/chloe"}, "edited": false, "score": 0, "creation_date": 1506497630, "post_id": 46434065, "comment_id": 79839997, "body": "Ah yes, I didn&#39;t read the path properly, sorry. If you are going to be developing a lot I suggest switching to a mac or installing a linux distribution, your life will become much easier (except for gaming but that&#39;s getting better)."}], "tags": [], "owner": {"reputation": 430, "user_id": 1010873, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4a13b3f54c622f4e7577eccf245f2578?s=128&d=identicon&r=PG", "display_name": "MarkJL", "link": "https://stackoverflow.com/users/1010873/markjl"}, "is_accepted": false, "score": 0, "last_activity_date": 1506452873, "creation_date": 1506452873, "answer_id": 46434065, "question_id": 46433484, "link": "https://stackoverflow.com/questions/46433484/how-do-i-use-the-correct-version-of-ruby/46434065#46434065", "title": "How do I use the correct version of Ruby?", "body": "<p>I would control your ruby versions using asdf or rvm. These are programming language version control programs which allow you to have multiple versions of a language on your system and control which version is applicable under which project. Here are the links:</p>\n\n<p><a href=\"https://github.com/asdf-vm/asdf\" rel=\"nofollow noreferrer\">https://github.com/asdf-vm/asdf</a></p>\n\n<p><a href=\"https://rvm.io\" rel=\"nofollow noreferrer\">https://rvm.io</a></p>\n\n<p>they are actually very simple to use after a short time. I prefer asdf but if you only use ruby rvm is sufficient.</p>\n"}, {"tags": [], "owner": {"reputation": 968, "user_id": 2226554, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/22287da4edff4cb0ba1ea1767d85a101?s=128&d=identicon&r=PG", "display_name": "Gaurav24", "link": "https://stackoverflow.com/users/2226554/gaurav24"}, "is_accepted": false, "score": 0, "last_activity_date": 1508590086, "creation_date": 1508590086, "answer_id": 46863364, "question_id": 46433484, "link": "https://stackoverflow.com/questions/46433484/how-do-i-use-the-correct-version-of-ruby/46863364#46863364", "title": "How do I use the correct version of Ruby?", "body": "<pre><code> cd project/dir\n touch .ruby-version\n echo \"ruby-x.x.x\" &gt; .ruby-version\n</code></pre>\n\n<p>create .ruby-version file inside your project directory and copy actual ruby version in this file.</p>\n\n<p>This version will get selected as soon as you \"cd' into the \"project/dir\".</p>\n\n<p>Tried and tested only on mac with rvm as a version manager.</p>\n\n<p>you can also specify ruby version in your Gemfile as below (not tested).</p>\n\n<pre><code>  ruby 2.x.x\n</code></pre>\n"}], "owner": {"reputation": 20989, "user_id": 148844, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/263aa1ae12d9757f78167b80e596c3df?s=128&d=identicon&r=PG", "display_name": "Chloe", "link": "https://stackoverflow.com/users/148844/chloe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 954, "favorite_count": 0, "accepted_answer_id": 46433877, "answer_count": 3, "score": 1, "last_activity_date": 1508590086, "creation_date": 1506450714, "question_id": 46433484, "link": "https://stackoverflow.com/questions/46433484/how-do-i-use-the-correct-version-of-ruby", "title": "How do I use the correct version of Ruby?", "body": "<p>I've already run <code>bundle</code>.</p>\n\n<pre><code>C:\\Users\\Chloe\\workspace&gt;rails -v\nYour Ruby version is 2.3.1, but your Gemfile specified ~&gt; 2.4.0\n\nC:\\Users\\Chloe\\workspace&gt;ruby -v\nruby 2.4.2p198 (2017-09-14 revision 59899) [x64-mingw32]\n\nC:\\Users\\Chloe\\workspace&gt;path\nPATH=C:\\ruby24\\bin;...\n</code></pre>\n"}, {"tags": ["html", "ruby", "watir"], "comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1506450436, "post_id": 46433329, "comment_id": 79824122, "body": "Any chance the page you are testing is publicly available or you can create a page that reproduces the problem? There could be a number of reasons why it&#39;s not visible, which makes it hard to debug."}, {"owner": {"reputation": 1, "user_id": 8677701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d72be6843c96eaaa993dbfa9cdfed35c?s=128&d=identicon&r=PG&f=1", "display_name": "Orion Ke", "link": "https://stackoverflow.com/users/8677701/orion-ke"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1506451265, "post_id": 46433329, "comment_id": 79824556, "body": "It&#39;s not publicly available. I haven&#39;t had much success with creating a page to reproduce this problem."}, {"owner": {"reputation": 1, "user_id": 8677701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d72be6843c96eaaa993dbfa9cdfed35c?s=128&d=identicon&r=PG&f=1", "display_name": "Orion Ke", "link": "https://stackoverflow.com/users/8677701/orion-ke"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1506455088, "post_id": 46433329, "comment_id": 79826489, "body": "Is there something in the html code I should be looking for? As far as I can tell, there isn&#39;t any ajax/javascript code being called."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1506456548, "post_id": 46433329, "comment_id": 79827172, "body": "What version of Watir are you using? I&#39;m thinking that this might be the issue that got fixed in Watir 6.8.4."}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1506456925, "post_id": 46433329, "comment_id": 79827336, "body": "Also, update to the latest chromedriver. You can use the webdrivers gem if you need to make sure your driver gets automatically updated."}, {"owner": {"reputation": 1, "user_id": 8677701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d72be6843c96eaaa993dbfa9cdfed35c?s=128&d=identicon&r=PG&f=1", "display_name": "Orion Ke", "link": "https://stackoverflow.com/users/8677701/orion-ke"}, "edited": false, "score": 0, "creation_date": 1506520492, "post_id": 46433329, "comment_id": 79855165, "body": "Definitely have a much older version of Watir. I&#39;ll bump it up and the chromedriver and try again."}, {"owner": {"reputation": 1, "user_id": 8677701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d72be6843c96eaaa993dbfa9cdfed35c?s=128&d=identicon&r=PG&f=1", "display_name": "Orion Ke", "link": "https://stackoverflow.com/users/8677701/orion-ke"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1506529242, "post_id": 46433329, "comment_id": 79861178, "body": "I tried recording the test with Selenium IDE and got it to work immediately. I then used suggestions proposed by @JustinKo for how to use the selenium elements with Watir. In short, I could finally access the element by browser.element(:css, &quot;#back_to_top_anchor &gt; div.top-search.js-top-search &gt; div.container &gt; #search &gt; div.input-group &gt; #q&quot;).send_keys &quot;Test&quot;. Thank you all for your help."}, {"owner": {"reputation": 1, "user_id": 8677701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d72be6843c96eaaa993dbfa9cdfed35c?s=128&d=identicon&r=PG&f=1", "display_name": "Orion Ke", "link": "https://stackoverflow.com/users/8677701/orion-ke"}, "edited": false, "score": 0, "creation_date": 1506530962, "post_id": 46433329, "comment_id": 79862100, "body": "I am curious. Why does it work with css, but not with div?"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1506534511, "post_id": 46433329, "comment_id": 79863909, "body": "@OrionKe, what do you mean by &quot;but not with div&quot;?"}, {"owner": {"reputation": 1, "user_id": 8677701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d72be6843c96eaaa993dbfa9cdfed35c?s=128&d=identicon&r=PG&f=1", "display_name": "Orion Ke", "link": "https://stackoverflow.com/users/8677701/orion-ke"}, "edited": false, "score": 0, "creation_date": 1506539696, "post_id": 46433329, "comment_id": 79866672, "body": "If I try:     @browser.header(id: &quot;back_to_top_anchor&quot;).div(class: &quot;top-search js-top-search&quot;).div(class: &quot;container&quot;).form(id: &quot;search&quot;).div(class: &quot;input-group&quot;).text_field(id: &quot;q&quot;).set &quot;Test&quot;  - I get the InvalidElementStateError"}, {"owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "edited": false, "score": 1, "creation_date": 1506621350, "post_id": 46433329, "comment_id": 79906021, "body": "I&#39;m puzzled when you have ID values why you would need to use such complicated and brittle selectors.  Presuming the HTML is valid and the ID values are unique within the page, I should think you would just be able to select the input directly by ID  <code>browser.element(:css, &quot;#q&quot;).send_keys &quot;Test&quot;</code>  or <code>browser.text_field(id: &quot;q&quot;).set &quot;Test&quot;</code>"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1506626960, "post_id": 46433329, "comment_id": 79909011, "body": "@OrionKe, I see. Unfortunately, that &quot;div&quot; approach is not equivalent. The &quot;div&quot; approach says find the first header element with matching id, then within that find the first div with matching class, then within that find... etc. If the &quot;first&quot; element isn&#39;t the one you want, you get a different result. In contrast, the &quot;css&quot; approach returns the first element that matches the entire chain. Sorry, hard to explain in a comment; I&#39;ll try to finish the blog post I started a couple of years ago."}, {"owner": {"reputation": 1, "user_id": 8677701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d72be6843c96eaaa993dbfa9cdfed35c?s=128&d=identicon&r=PG&f=1", "display_name": "Orion Ke", "link": "https://stackoverflow.com/users/8677701/orion-ke"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1507054290, "post_id": 46433329, "comment_id": 80056077, "body": "Thanks @JustinKo for the clarification. I couldn&#39;t select by the ID because it turned out the the developer had duplicated the id within the same page for several of the menu options. I reported this as a bug after seeing a response posted by Chuck van der Linden to another issue. Until the issue is fixed, I have modified by code to identify by id and index = 1."}], "owner": {"reputation": 1, "user_id": 8677701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d72be6843c96eaaa993dbfa9cdfed35c?s=128&d=identicon&r=PG&f=1", "display_name": "Orion Ke", "link": "https://stackoverflow.com/users/8677701/orion-ke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1506620940, "creation_date": 1506450122, "last_edit_date": 1506620940, "question_id": 46433329, "link": "https://stackoverflow.com/questions/46433329/watir-throws-invalidelementstateerror-when-trying-to-set-value-to-a-search-text", "title": "Watir throws InvalidElementStateError when trying to set value to a search text field", "body": "<p>I am a novice to ruby/watir and trying to automate search functionality on a webpage. When I click on the search icon, it opens a dropdown overlay that looks like a modal window, but is really just a div. When I try to set the value for the search criteria, I run into this exception - </p>\n\n<p>Selenium::WebDriver::Error::InvalidElementStateError: invalid element state: Element is not currently interactable and may not be manipulated\n  (Session info: chrome=60.0.3112.113)\n  (Driver info: chromedriver=2.29.461591 (62ebf098771772160f391d75e589dc567915b233),platform=Windows NT 6.1.7601 SP1 x86_64)</p>\n\n<p>Here's the code that Watir is unable to interact with - </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div class=\"top-search js-top-search\"&gt;\r\n  &lt;div class=\"container\"&gt;\r\n    &lt;form class=\"top-search-form\" id=\"search\" action=\"/search\" accept-charset=\"UTF-8\" method=\"get\"&gt;&lt;input name=\"utf8\" type=\"hidden\" value=\"\u2713\"&gt;\r\n      &lt;input id=\"search_class\" name=\"c\" type=\"hidden\" value=\"users\"&gt;\r\n      &lt;div class=\"input-group\"&gt;\r\n        &lt;div class=\"input-group-btn\"&gt;\r\n          &lt;div class=\"btn btn-default dropdown-toggle search_menu\" data-toggle=\"dropdown\"&gt;\r\n            &lt;span class=\"la la-caret-down\"&gt;&lt;/span&gt;\r\n            &lt;i class=\"la\" id=\"selected_search\"&gt;\r\n              &lt;span&gt;Members&lt;/span&gt;\r\n            &lt;/i&gt;\r\n          &lt;/div&gt;\r\n          &lt;ul class=\"dropdown-menu\"&gt;\r\n            &lt;li&gt;\r\n              &lt;a class=\"search-link\" data-search=\"users\"&gt;\r\n                &lt;i class=\"la la-user\"&gt;&lt;/i&gt;\r\n                Members\r\n              &lt;/a&gt;\r\n            &lt;/li&gt;\r\n            &lt;li&gt;\r\n              &lt;a class=\"search-link\" data-search=\"groups\"&gt;\r\n                &lt;i class=\"la la-users\"&gt;&lt;/i&gt;\r\n                Groups\r\n              &lt;/a&gt;\r\n            &lt;/li&gt;\r\n          &lt;/ul&gt;\r\n        &lt;/div&gt;\r\n        &lt;input type=\"text\" name=\"q\" id=\"q\" class=\"form-control\" autofocus=\"autofocus\" placeholder=\"Select a category and search...\"&gt;\r\n        &lt;div class=\"input-group-btn\"&gt;\r\n          &lt;button class=\"btn-default btn header-search-btn\" id=\"go\"&gt;\r\n            &lt;i class=\"la la-search\"&gt;&lt;/i&gt;\r\n          &lt;/button&gt;\r\n        &lt;/div&gt;\r\n      &lt;/div&gt;\r\n    &lt;/form&gt;\r\n\r\n    &lt;button class=\"btn close_search_bar js_close_search_bar text-danger\"&gt;\r\n      &lt;i class=\"la la-times\"&gt;&lt;/i&gt;\r\n    &lt;/button&gt;\r\n  &lt;/div&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>So far, I've tried the following unsuccessfully - </p>\n\n<ol>\n<li>Look up the text field by xpath and then set it's value. </li>\n<li>Tried to see if the text field is visible - by using xpath, stepping thru each nested block until I get to the text field. Result - Text field isn't visible.</li>\n<li>Tried @browser.windows.last.use to get on the modal window and then set the value.</li>\n</ol>\n\n<p>Any guidance on this is very much appreciated. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2372, "user_id": 8478218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0tjM.jpg?s=128&g=1", "display_name": "krishnar", "link": "https://stackoverflow.com/users/8478218/krishnar"}, "edited": false, "score": 0, "creation_date": 1506449618, "post_id": 46432820, "comment_id": 79823722, "body": "check what url is hitting in console. I think it is  products/enable right?"}, {"owner": {"reputation": 4538, "user_id": 809830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdd9801d2717096282258b192edc7793?s=128&d=identicon&r=PG", "display_name": "Alex Kojin", "link": "https://stackoverflow.com/users/809830/alex-kojin"}, "edited": false, "score": 0, "creation_date": 1506449736, "post_id": 46432820, "comment_id": 79823782, "body": "Show a part of your rails log (log/development.log) for this action."}], "answers": [{"tags": [], "owner": {"reputation": 4538, "user_id": 809830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdd9801d2717096282258b192edc7793?s=128&d=identicon&r=PG", "display_name": "Alex Kojin", "link": "https://stackoverflow.com/users/809830/alex-kojin"}, "is_accepted": true, "score": 0, "last_activity_date": 1506449632, "creation_date": 1506449632, "answer_id": 46433199, "question_id": 46432820, "link": "https://stackoverflow.com/questions/46432820/submit-tag-with-check-box-tag-returning-error/46433199#46433199", "title": "submit_tag with check_box_tag returning error", "body": "<p>Use <code>where</code> to find selected products and when to update them:</p>\n\n<p><code>Product.where(id: params[:selected_products]).update_all(enable: true)</code></p>\n"}], "owner": {"reputation": 59, "user_id": 8678117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f857cf65ba14b28d1f0a2bcd58aa3d1e?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Policastro", "link": "https://stackoverflow.com/users/8678117/victor-policastro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 46433199, "answer_count": 1, "score": 2, "last_activity_date": 1506449632, "creation_date": 1506448050, "question_id": 46432820, "link": "https://stackoverflow.com/questions/46432820/submit-tag-with-check-box-tag-returning-error", "title": "submit_tag with check_box_tag returning error", "body": "<p><br>\nI'm having some trouble with <code>check_box_tag</code> and my method <em>enable</em> (a product can be disabled) in Ruby on Rails.\nI created some checkbox so the user select the products that he wants to set enable = true.\nKeeps returning the error \"Couldn't find Product with 'id'=enable\"</p>\n\n<p>My method <code>enable</code>:</p>\n\n<pre><code>def enable\n   Product.update_all([\"enable=?\", true], :id =&gt; params[:selected_products])\n   redirect_to root_url\nend\n</code></pre>\n\n<p>My <code>routes.rb</code>:</p>\n\n<pre><code>Rails.application.routes.draw do\n  get 'product_export/new'\n\n  get 'product_imports/new'\n\n  resources :users\n  resources :product_imports\n  resources :products do\n    collection do\n      post :import\n      post :export\n      post :enable\n    end\n  end\n\n  root to: 'products#index'\nend\n</code></pre>\n\n<p>and finally my <code>view</code> with the table e the check_box_tag:</p>\n\n<pre><code>&lt;%= form_tag enable_products_path, :method =&gt; :put do %&gt;\n  &lt;%= submit_tag \"Enable products\" %&gt;\n  &lt;table class=\"table table-striped table-responsive\" id=\"productsTable\"&gt;\n    &lt;thead class=\"thead-inverse\"&gt;\n      &lt;tr&gt;\n        &lt;th/&gt;\n        &lt;th&gt;Code&lt;/th&gt;\n        &lt;th&gt;Enable&lt;/th&gt;\n        &lt;th&gt;Bar code&lt;/th&gt;\n        &lt;th&gt;Unit cost&lt;/th&gt;\n        &lt;th&gt;Description&lt;/th&gt;\n        &lt;th&gt;Family&lt;/th&gt;\n        &lt;th&gt;Final&lt;/th&gt;\n        &lt;th&gt;Measure&lt;/th&gt;\n        &lt;th colspan=\"3\"&gt;&lt;/th&gt;\n      &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n      &lt;% @products.each do |product| %&gt;\n        &lt;tr&gt;\n          &lt;td&gt;&lt;%= check_box_tag 'selected_products[]', product.id %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= link_to (product.code), edit_product_path(product) %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= product.enable %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= product.bar_code %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= product.unit_cost %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= product.description %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= product.family %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= product.final %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= product.measure %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= link_to 'Destroy', product, method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n      &lt;% end %&gt;\n    &lt;/tbody&gt;\n  &lt;/table&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Thanks for the help!</p>\n"}, {"tags": ["ruby", "regex", "sublimetext3"], "comments": [{"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 1, "creation_date": 1506447902, "post_id": 46432727, "comment_id": 79822809, "body": "<code>\\b\\d+\\b</code>? Did you do any research? There are a lot of examples of this on stackoverflow and I see a new question identical to yours everyday."}, {"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 0, "creation_date": 1506448019, "post_id": 46432727, "comment_id": 79822867, "body": "<code>if it isn&#39;t preceded or followed by a number</code> - you mean by a non number? It&#39;s kinda hard to find a number that isn&#39;t a number"}, {"owner": {"reputation": 49, "user_id": 7649600, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/g6c4k.png?s=128&g=1", "display_name": "M3rein", "link": "https://stackoverflow.com/users/7649600/m3rein"}, "reply_to_user": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 0, "creation_date": 1506448049, "post_id": 46432727, "comment_id": 79822882, "body": "I&#39;ve definitely done a lot of research. I just must&#39;ve been using improper search tags. Thank you for your answer; works fine."}, {"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 0, "creation_date": 1506448054, "post_id": 46432727, "comment_id": 79822887, "body": "<code>\\D*\\d+\\D*</code> would come to my mind."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 0, "creation_date": 1506448520, "post_id": 46432727, "comment_id": 79823127, "body": "@Jan, Actually, that is not correct. You meant <code>(^|\\D)\\d+(\\D|$)</code> or <code>(^|\\D)\\d+(?!\\d)</code> or <code>(?&lt;!\\d)\\d+(?!\\d)</code>"}], "owner": {"reputation": 49, "user_id": 7649600, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/g6c4k.png?s=128&g=1", "display_name": "M3rein", "link": "https://stackoverflow.com/users/7649600/m3rein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "closed_date": 1506448333, "answer_count": 0, "score": 0, "last_activity_date": 1506448280, "creation_date": 1506447665, "last_edit_date": 1506448280, "question_id": 46432727, "link": "https://stackoverflow.com/questions/46432727/ruby-regex-find-numbers-not-surrounded-by-alphabetical-characters", "closed_reason": "Duplicate", "title": "Ruby Regex find numbers not surrounded by alphabetical characters", "body": "<p>What I'm looking to do is to highlight numbers that aren't in the middle of a word.\nThe <code>001</code> in the following example should <em>not</em> highlight:</p>\n\n<p><code>FrontSprite=trainer001b</code></p>\n\n<p>But the <code>80</code> should in this example:</p>\n\n<p><code>BaseMoney=80</code></p>\n\n<p>Essentially, what this would mean is that any number should be highlighted <strong>if it is preceded or followed by a number</strong>.</p>\n\n<p>I've been struggling a lot with this one. I'm very new to Regex and really can't find a working solution. This Regex would be used in Sublime Text 3.</p>\n"}, {"tags": ["ruby", "paperclip"], "answers": [{"tags": [], "owner": {"reputation": 4538, "user_id": 809830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdd9801d2717096282258b192edc7793?s=128&d=identicon&r=PG", "display_name": "Alex Kojin", "link": "https://stackoverflow.com/users/809830/alex-kojin"}, "is_accepted": false, "score": 0, "last_activity_date": 1506451265, "last_edit_date": 1506451265, "creation_date": 1506450893, "answer_id": 46433521, "question_id": 46432573, "link": "https://stackoverflow.com/questions/46432573/validate-paperclip-transparency/46433521#46433521", "title": "Validate paperclip transparency", "body": "<p><code>paperclip</code> use imagemagick to work(convert, resize) with images. You should use it to detect transparency.</p>\n\n<p>Look into this answer <a href=\"https://stackoverflow.com/questions/2581469/detect-alpha-channel-with-imagemagick\">Detect Alpha Channel with ImageMagick</a></p>\n\n<p>I think will be easier validate uploaded png image before to put it a model with paperclip.</p>\n"}], "owner": {"reputation": 1, "user_id": 8678139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e723d3a466949d562cf0741b2f0eb09f?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/8678139/charlie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1506451265, "creation_date": 1506447093, "question_id": 46432573, "link": "https://stackoverflow.com/questions/46432573/validate-paperclip-transparency", "title": "Validate paperclip transparency", "body": "<p>Is it possible to validate that a png image does not have transparency in it using the paperclip gem? I've looked everywhere and can't seem to find out how to do this. I am currently just using a front end javascript solution for this but I'd prefer not to rely on client side validation.</p>\n"}, {"tags": ["ruby", "linux", "ruby-on-rails-3", "rubygems"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1506448306, "post_id": 46432508, "comment_id": 79823006, "body": "Use rvm. <code>\\curl -sSL https:&#47;&#47;get.rvm.io | bash -s stable --ruby</code>"}, {"owner": {"reputation": 3, "user_id": 8625484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d562452fea28bde271914c98bc187af?s=128&d=identicon&r=PG&f=1", "display_name": "ufulol", "link": "https://stackoverflow.com/users/8625484/ufulol"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1506448581, "post_id": 46432508, "comment_id": 79823172, "body": "@anothermh could you please tell me more verbose what should I do next with this installation process etc"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1506454563, "post_id": 46432508, "comment_id": 79826230, "body": "I recommend reading <a href=\"https://rvm.io/rvm/install\" rel=\"nofollow noreferrer\">Installing RVM</a>. You should use RVM to install Ruby, then after you have installed RVM and Ruby retry your <code>gem install</code> and <code>rails new</code> operations."}, {"owner": {"reputation": 3, "user_id": 8625484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d562452fea28bde271914c98bc187af?s=128&d=identicon&r=PG&f=1", "display_name": "ufulol", "link": "https://stackoverflow.com/users/8625484/ufulol"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1506494408, "post_id": 46432508, "comment_id": 79838254, "body": "@anothermh I get <code>* To start using RVM you need to run </code> <code>source &#47;home&#47;ivan&#47;.rvm&#47;scripts&#47;rvm</code> `     <code>in all your open shell windows, in rare cases you need to reopen all shell windows.</code> `     but then <code>source &#47;home&#47;ivan&#47;.rvm&#47;scripts&#47;rvm WARNING:       Could not source &#39;&#47;home&#47;ivan&#47;.rvm&#47;scripts&#47;scripts&#47;base&#39; as file does not exist.       RVM will likely not work as expected.</code>"}, {"owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "edited": false, "score": 0, "creation_date": 1506524933, "post_id": 46432508, "comment_id": 79858352, "body": "Do you have this at the top of your <code>Gemfile</code>: <code>source &#39;https:&#47;&#47;rubygems.org&#39;</code>"}, {"owner": {"reputation": 3, "user_id": 8625484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d562452fea28bde271914c98bc187af?s=128&d=identicon&r=PG&f=1", "display_name": "ufulol", "link": "https://stackoverflow.com/users/8625484/ufulol"}, "reply_to_user": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "edited": false, "score": 0, "creation_date": 1506550652, "post_id": 46432508, "comment_id": 79871644, "body": "@NickM where is Gemfile located?"}, {"owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "edited": false, "score": 0, "creation_date": 1506603144, "post_id": 46432508, "comment_id": 79894186, "body": "It&#39;s at the root of your app in all versions of Rails"}], "owner": {"reputation": 3, "user_id": 8625484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d562452fea28bde271914c98bc187af?s=128&d=identicon&r=PG&f=1", "display_name": "ufulol", "link": "https://stackoverflow.com/users/8625484/ufulol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 325, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1506446846, "creation_date": 1506446846, "question_id": 46432508, "link": "https://stackoverflow.com/questions/46432508/somethings-wrong-with-my-gems", "title": "Something&#39;s wrong with my gems", "body": "<p>Everytime I run <code>gem install something</code> , I get</p>\n\n<pre><code>Successfully installed bundle-0.0.1\nERROR:  While executing gem ... (NoMethodError)\n    undefined method `source_paths' for #&lt;Gem::Specification:0x6ab2aec bundle-0.0.1&gt;\n</code></pre>\n\n<p>I tried to reinstall gem, tried to reinstall bundle/bundler - no help. When I try <code>rails new blog</code>, I get</p>\n\n<pre><code>An error occurred while installing sqlite3 (1.3.13), and Bundler cannot\ncontinue.\nMake sure that `gem install sqlite3 -v '1.3.13'` succeeds before bundling.\n\nIn Gemfile:\n  sqlite3\n         run  bundle exec spring binstub --all\nCould not find gem 'sqlite3' in any of the gem sources listed in your Gemfile.\n</code></pre>\n\n<p>What can I do to solve this?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1506444643, "post_id": 46431681, "comment_id": 79821062, "body": "Well, of course it&#39;s <i>possible</i>. It&#39;s a question of what&#39;s the cleanest, simplest way. <code>a.sort_by {|x| -b[a.index x] }</code> perhaps."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1506452884, "post_id": 46431681, "comment_id": 79825357, "body": "Another way: <code>a.values_at(*a.each_index.sort_by { |i| -b[i] }) #=&gt; [&quot;c&quot;, &quot;e&quot;, &quot;b&quot;, &quot;d&quot;, &quot;g&quot;, &quot;a&quot;, &quot;f&quot;]</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1506465402, "post_id": 46431681, "comment_id": 79830602, "body": "This is a pure-Ruby question so it should not have a Rails tag. That tag could be a small time-waster for readers only interested in Rails questions, but more importantly, readers who filter-out Rails questions might miss the opportunity to post a great answer."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 3, "creation_date": 1506453116, "post_id": 46432273, "comment_id": 79825475, "body": "...or <code>a.zip(b).sort_by(&amp;:last).map(&amp;:first).reverse #=&gt; [&quot;c&quot;, &quot;e&quot;, &quot;d&quot;, &quot;b&quot;, &quot;g&quot;, &quot;f&quot;, &quot;a&quot;]</code>"}, {"owner": {"reputation": 1648, "user_id": 1610548, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a1572f89ae593aefced85b8494479098?s=128&d=identicon&r=PG", "display_name": "rept", "link": "https://stackoverflow.com/users/1610548/rept"}, "edited": false, "score": 0, "creation_date": 1506459054, "post_id": 46432273, "comment_id": 79828380, "body": "It&#39;s close, but with duplicates the original order should precede.  That&#39;s why the result should be: [&#39;c&#39;, &#39;e&#39;, &#39;b&#39;, &#39;d&#39;, &#39;g&#39;, &#39;a&#39;, &#39;f&#39;]"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 1648, "user_id": 1610548, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a1572f89ae593aefced85b8494479098?s=128&d=identicon&r=PG", "display_name": "rept", "link": "https://stackoverflow.com/users/1610548/rept"}, "edited": false, "score": 1, "creation_date": 1506459762, "post_id": 46432273, "comment_id": 79828714, "body": "@rept That&#39;s a secondary sort consideration, but you didn&#39;t communicate that clearly in your question."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 1, "last_activity_date": 1506445957, "creation_date": 1506445957, "answer_id": 46432273, "question_id": 46431681, "link": "https://stackoverflow.com/questions/46431681/sort-array-a-by-value-in-array-b-in-ruby/46432273#46432273", "title": "Sort array a by value in array b in Ruby", "body": "<p>You can just combine the two, sort, and strip out the original <em>a</em> values:</p>\n\n<pre><code>a.zip(b).sort_by { |_a, _b| -_b }.map { |_a,_| _a }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 3, "last_activity_date": 1506465010, "creation_date": 1506465010, "answer_id": 46436739, "question_id": 46431681, "link": "https://stackoverflow.com/questions/46431681/sort-array-a-by-value-in-array-b-in-ruby/46436739#46436739", "title": "Sort array a by value in array b in Ruby", "body": "<pre><code>a.sort_by.with_index { |_,i| [-b[i], i] }\n  #=&gt; [\"c\", \"e\", \"b\", \"d\", \"g\", \"a\", \"f\"]\n</code></pre>\n\n<p>This uses the indices of elements in <code>a</code> to break ties. I see from a comment on @tadman's answer that that is desired, though it is not a requirement given in the statement of the question. See the third paragraph of the doc for <a href=\"http://ruby-doc.org/core-2.4.0/Array.html#method-i-3C-3D-3E\" rel=\"nofollow noreferrer\">Array#&lt;=></a> for an explanation of how arrays are ordered in sorting operations.</p>\n"}], "owner": {"reputation": 1648, "user_id": 1610548, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a1572f89ae593aefced85b8494479098?s=128&d=identicon&r=PG", "display_name": "rept", "link": "https://stackoverflow.com/users/1610548/rept"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 0, "accepted_answer_id": 46432273, "answer_count": 2, "score": 0, "last_activity_date": 1506465010, "creation_date": 1506443715, "last_edit_date": 1506458761, "question_id": 46431681, "link": "https://stackoverflow.com/questions/46431681/sort-array-a-by-value-in-array-b-in-ruby", "title": "Sort array a by value in array b in Ruby", "body": "<p>I have an array </p>\n\n<pre><code>a = ['a', 'b', 'c', 'd', 'e', 'f', 'g']\n</code></pre>\n\n<p>and another array:</p>\n\n<pre><code>b = [0, 3, 6, 3, 4, 0, 1]\n</code></pre>\n\n<p>Is it possible to sort array <strong>a</strong> according to values in array <strong>b</strong>?</p>\n\n<p>The result should be: </p>\n\n<pre><code>a = ['c', 'e', 'b', 'd', 'g', 'a', 'f']\n</code></pre>\n\n<p>Something like this doesn't seem to exist in Ruby/Rails:</p>\n\n<pre><code>a.sort_with_index{ |elem, index| b[index] }\n</code></pre>\n\n<p>Edit: in response to the duplicate marking: the question being referred to has an array with elements having an ID, and the other array references the ID's directly. This is not the same, and the same solution will not apply...</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 2140, "user_id": 1450389, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VYNKp.jpg?s=128&g=1", "display_name": "Serge Pedroza", "link": "https://stackoverflow.com/users/1450389/serge-pedroza"}, "edited": false, "score": 0, "creation_date": 1510188130, "post_id": 46431650, "comment_id": 81333530, "body": "did you ever find a solution to this?"}, {"owner": {"reputation": 1418, "user_id": 1785316, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/PNOCx.jpg?s=128&g=1", "display_name": "F4Ke", "link": "https://stackoverflow.com/users/1785316/f4ke"}, "edited": false, "score": 0, "creation_date": 1523628488, "post_id": 46431650, "comment_id": 86652556, "body": "I have the <b>exact</b> same problem here today"}], "owner": {"reputation": 8003, "user_id": 1884428, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/Xlvpk.jpg?s=128&g=1", "display_name": "spitfire109", "link": "https://stackoverflow.com/users/1884428/spitfire109"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 231, "favorite_count": 3, "answer_count": 0, "score": 3, "last_activity_date": 1506443616, "creation_date": 1506443616, "question_id": 46431650, "link": "https://stackoverflow.com/questions/46431650/why-are-we-hitting-herokus-h12-request-timeout-if-we-have-racktimeout-set-t", "title": "Why are we hitting Heroku&#39;s H12 &quot;Request timeout&quot; if we have Rack::Timeout set to 10s", "body": "<p>I've gotten some 503s in Heroku even though in <code>config/initializers/timeout.rb</code> I have this:</p>\n\n<pre><code>Rack::Timeout.service_timeout = 10 # seconds\nRack::Timeout.wait_timeout = 5\n</code></pre>\n\n<p>Shouldn't this get triggered before Heroku itself can timeout?</p>\n\n<p>This is <code>config/puma.rb</code></p>\n\n<pre><code>workers Integer(ENV[\"WEB_CONCURRENCY\"] || 2)\nthreads_count = Integer(ENV[\"MAX_THREADS\"] || 5)\nthreads threads_count, threads_count\n\nworker_timeout 15\nworker_shutdown_timeout 8\n\npreload_app!\n\nrackup DefaultRackup\nport ENV[\"PORT\"] || 3000\nenvironment ENV[\"RACK_ENV\"] || \"development\"\n\non_worker_boot do\n    ActiveRecord::Base.establish_connection\nend\n</code></pre>\n\n<p><code>Gemfile</code></p>\n\n<pre><code>gem \"puma\", \"~&gt; 3.10\"\ngem \"rack-timeout\", \"~&gt; 0.4\"\n</code></pre>\n\n<p>Btw, here is an example from the logs</p>\n\n<pre><code>Error at=error code=H12 desc=\"Request timeout\" method=GET path=\"/serviceworker.js\" host=dev.to request_id={ommitted} fwd=\"{ommitted}\" dyno=web.6 connect=0ms service=30000ms status=503 bytes=0 protocol=http\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms"], "comments": [{"owner": {"reputation": 3305, "user_id": 342978, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ee06ba399c5eaf3f5a337a96207c2768?s=128&d=identicon&r=PG", "display_name": "Syl", "link": "https://stackoverflow.com/users/342978/syl"}, "edited": false, "score": 1, "creation_date": 1506442414, "post_id": 46431227, "comment_id": 79819842, "body": "Form_with has been introduced in rails 5 (5.1 ?) use form_for with the correct syntax in rails 4"}, {"owner": {"reputation": 43, "user_id": 8419523, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/l4yLf.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/8419523/michael"}, "reply_to_user": {"reputation": 3305, "user_id": 342978, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ee06ba399c5eaf3f5a337a96207c2768?s=128&d=identicon&r=PG", "display_name": "Syl", "link": "https://stackoverflow.com/users/342978/syl"}, "edited": false, "score": 0, "creation_date": 1506445119, "post_id": 46431227, "comment_id": 79821357, "body": "Thanks for the advice!"}], "answers": [{"tags": [], "owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "is_accepted": true, "score": 2, "last_activity_date": 1506442669, "creation_date": 1506442669, "answer_id": 46431391, "question_id": 46431227, "link": "https://stackoverflow.com/questions/46431227/rails-form-with-results-in-a-nomethoderror/46431391#46431391", "title": "Rails form_with results in a NoMethodError", "body": "<p>You want to use <code>form_for @article do |form|</code> (<a href=\"http://api.rubyonrails.org/v4.2.9/classes/ActionView/Helpers/FormHelper.html#method-i-form_for\" rel=\"nofollow noreferrer\"><code>form_for</code> Documentation</a>, <code>form_tag</code> is used when you want a form tag (HTML tag) that's not necessarily attached to a ActiveRecord object.</p>\n"}], "owner": {"reputation": 43, "user_id": 8419523, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/l4yLf.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/8419523/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2095, "favorite_count": 0, "accepted_answer_id": 46431391, "answer_count": 1, "score": 0, "last_activity_date": 1506442669, "creation_date": 1506442115, "question_id": 46431227, "link": "https://stackoverflow.com/questions/46431227/rails-form-with-results-in-a-nomethoderror", "title": "Rails form_with results in a NoMethodError", "body": "<p>I'm re-building a blog from the ground up and a ran into a problem concerning the form for creating new articles. </p>\n\n<p><code>&lt;%= form_with scope: :article, url: articles_path, local: true do |form| %></code> results in the error <code>undefined method `form_with'</code>. </p>\n\n<p>Rails provides the following suggestion:\n<code>Did you mean?  form_tag</code></p>\n\n<p>Upon trying <code>form_tag</code>, I get the following error: <code>undefined method `label' for nil:NilClass</code></p>\n\n<p><strong>Form for new article using form_with</strong></p>\n\n<pre><code>&lt;h1&gt;New Blog Post&lt;/h1&gt;\n&lt;%= form_with scope: :article, url: articles_path, local: true do |form| %&gt;\n  &lt;p&gt;\n    &lt;%= form.label :title %&gt;&lt;br&gt;\n    &lt;%= form.text_field :title %&gt;\n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%= form.label :text %&gt;&lt;br&gt;\n    &lt;%= form.text_area :text %&gt;\n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%= form.submit %&gt;\n  &lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>articles_controller.rb</p>\n\n<pre><code>class ArticlesController &lt; ApplicationController\n    def index\n       @articles = Article.all \n    end\n\n    def show\n       @article = Article.find(params[:id]) \n    end\n\n    def new\n        @article = Article.new\n    end\n\n    def create\n        @article = Article.new(article_params)\n\n        @article.save\n        redirect_to @article\n    end\n\n    private\n        def article_params\n            params.require(:article).permit(:title, :text)\n        end\nend\n</code></pre>\n\n<p>When I change <code>form_with</code> to <code>form_tag</code> I get the following error: <code>undefined method `label' for nil:NilClass</code></p>\n\n<p>For the record, I'm using </p>\n\n<ol>\n<li>Ruby 2.3.4</li>\n<li>Rails 4.2.5</li>\n</ol>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": true, "score": 4, "last_activity_date": 1506441509, "creation_date": 1506441509, "answer_id": 46431032, "question_id": 46430828, "link": "https://stackoverflow.com/questions/46430828/what-is-a-cleaner-way-of-accessing-a-nested-arrayhash-in-ruby/46431032#46431032", "title": "What is a cleaner way of accessing a nested array+hash in Ruby?", "body": "<p>This is what <a href=\"http://ruby-doc.org/core/Array.html#method-i-dig\" rel=\"nofollow noreferrer\">dig</a> is for:</p>\n\n<pre><code>id = job.args.dig(0, 'arguments', 0)\n</code></pre>\n\n<p><code>dig</code> is defined for Array, Hash, and Struct so it can deal with most kinds of nested structures.</p>\n"}, {"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": false, "score": 4, "last_activity_date": 1506442046, "last_edit_date": 1506442046, "creation_date": 1506441566, "answer_id": 46431054, "question_id": 46430828, "link": "https://stackoverflow.com/questions/46430828/what-is-a-cleaner-way-of-accessing-a-nested-arrayhash-in-ruby/46431054#46431054", "title": "What is a cleaner way of accessing a nested array+hash in Ruby?", "body": "<p>It's hard to give advice on how to better organise the code if we can only see one line of it! Dealing with a messy object like this indicates you may have a wider design issue that could improve the code quality. However...</p>\n\n<p>Based on the above, a \"happy scenario\" is if:</p>\n\n<pre><code>job.args == [{\"arguments\"=&gt;[\"foo\"]}]\n</code></pre>\n\n<p>i.e. An array whose first element is a hash with key <code>'arguments'</code>, which maps to a non-empty array. This looks very messy!</p>\n\n<p>However, you can simplify this to:</p>\n\n<pre><code>job.args.dig(0, 'arguments', 0)\n</code></pre>\n\n<p>This is applying <a href=\"http://ruby-doc.org/core/Array.html#method-i-dig\" rel=\"nofollow noreferrer\"><code>Array#dig</code></a> (note: there's also <a href=\"http://ruby-doc.org/core/Hash.html#method-i-dig\" rel=\"nofollow noreferrer\"><code>Hash#dig</code></a>) to chain the method calls and gracefully respond with <code>nil</code> if any fail.</p>\n\n<p>This answer assumes you are using <strong>ruby version >= <code>2.3.0</code></strong>, since this is when <code>dig</code> was added to the language. If you are running an older version, you could also use <a href=\"https://github.com/koic/backport_dig\" rel=\"nofollow noreferrer\">this gem</a> to back-port the feature.</p>\n"}], "owner": {"reputation": 12440, "user_id": 688266, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/7987473923dcc33913003686350b33f6?s=128&d=identicon&r=PG", "display_name": "Kamilski81", "link": "https://stackoverflow.com/users/688266/kamilski81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 388, "favorite_count": 0, "accepted_answer_id": 46431032, "answer_count": 2, "score": 1, "last_activity_date": 1506442046, "creation_date": 1506440852, "question_id": 46430828, "link": "https://stackoverflow.com/questions/46430828/what-is-a-cleaner-way-of-accessing-a-nested-arrayhash-in-ruby", "title": "What is a cleaner way of accessing a nested array+hash in Ruby?", "body": "<p>I have the following code, and I feel like there is probably a cleaner way to access the objects that I want:</p>\n\n<pre><code>id = job.args.size &gt; 0 &amp;&amp; job.args[0]['arguments'].size &gt; 0 ? job.args[0]['arguments'][0] : nil\n</code></pre>\n"}, {"tags": ["ruby", "nmatrix"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1506441274, "post_id": 46430721, "comment_id": 79819114, "body": "What is that definition for <code>A</code> did you actually mean <code>A = NMatrix.new( [1,0,0],[0,-5,1],[0,0,1], dtype: :float64)</code>? Please post the actual code you are running because asking if you are doing something wrong cannot be answered based on the existing information"}, {"owner": {"reputation": 33, "user_id": 8370072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1442141d79d6abf8d6c9185dee975a3?s=128&d=identicon&r=PG&f=1", "display_name": "M. S.", "link": "https://stackoverflow.com/users/8370072/m-s"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1506441576, "post_id": 46430721, "comment_id": 79819330, "body": "The actual code is :  <code>a_mat = NMatrix.eye(n)*(-(c+1))       a_mat[0,0] = 1       a_mat[n-1,n-1] = 1       (1..n-2).each do |i|         a_mat[i,i-1]=c         a_mat[i, i+1]= 1       end</code> with c = 4  and  <code>B = NMatrix.new([n,1], Array.new(n-1,0) + [nb_days-1], dtype: :float32)</code>  and n = 3 and nb_days = 730"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1506459595, "post_id": 46430721, "comment_id": 79828641, "body": "It&#39;s generally helpful to give an example, but  when you do all input objects should be valid Ruby objects. Also, it&#39;s helpful to assign a variable to each such object so readers can cut-and-paste and refer to those objects by name in answers and comments (and not having to define them). You have assigned them to constants (names beginning withcapital letters). If you meant them to be variables start each name with a lower-case letter. I edited your answer to make those changes."}, {"owner": {"reputation": 33, "user_id": 8370072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1442141d79d6abf8d6c9185dee975a3?s=128&d=identicon&r=PG&f=1", "display_name": "M. S.", "link": "https://stackoverflow.com/users/8370072/m-s"}, "edited": false, "score": 0, "creation_date": 1506498287, "post_id": 46430721, "comment_id": 79840357, "body": "Indeed I had wrotten in mathematical language and not ruby, thank you !"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1506519020, "post_id": 46430721, "comment_id": 79854006, "body": "@M.S. please update your post with the code not a comment. Also in your comment <code>#solve</code> is never called so I have a feeling this isn&#39;t your complete code"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 8370072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1442141d79d6abf8d6c9185dee975a3?s=128&d=identicon&r=PG&f=1", "display_name": "M. S.", "link": "https://stackoverflow.com/users/8370072/m-s"}, "edited": false, "score": 0, "creation_date": 1506500286, "post_id": 46434998, "comment_id": 79841544, "body": "Thank you for your solution. However, I am not quite confortable with it because it is much more expensive in time (you do two computations instead of one: first compute the inverse, which is already a costly computation, and second compute the multiplication). Furthermore this method is less stable when the matrix m has a determinant close to zero."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 33, "user_id": 8370072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1442141d79d6abf8d6c9185dee975a3?s=128&d=identicon&r=PG&f=1", "display_name": "M. S.", "link": "https://stackoverflow.com/users/8370072/m-s"}, "edited": false, "score": 0, "creation_date": 1506574939, "post_id": 46434998, "comment_id": 79877367, "body": "I changed my answer to use LU decomposition."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 0, "last_activity_date": 1506614335, "last_edit_date": 1506614335, "creation_date": 1506456673, "answer_id": 46434998, "question_id": 46430721, "link": "https://stackoverflow.com/questions/46430721/solve-function-of-gem-nmatrix/46434998#46434998", "title": "solve function of gem NMatrix", "body": "<p>To answer part 2 of your question, you can use Ruby's built-in <a href=\"http://ruby-doc.org/stdlib-2.4.0/libdoc/matrix/rdoc/Matrix.html\" rel=\"nofollow noreferrer\">Matrix</a> class.</p>\n\n<pre><code>require 'matrix'\n\nm = Matrix[[1, 0, 0], [4, -5, 1], [0, 0, 1]]\n  #=&gt; Matrix[[1, 0, 0], [4, -5, 1], [0, 0, 1]]\nb = Vector[0, 0, 729]\n  #=&gt; Vector[0, 0, 729]\n\na = m.lup.solve(b).to_a\n  #=&gt; [(0/1), (729/5), (729/1)]\n</code></pre>\n\n<p>If one prefers floats (rather than rational numbers),</p>\n\n<pre><code>a.map(&amp;:to_f)\n  #=&gt; [0.0, 145.8, 729.0]\n</code></pre>\n\n<p>See <a href=\"http://ruby-doc.org/stdlib-2.4.0/libdoc/matrix/rdoc/Matrix.html#method-i-lup\" rel=\"nofollow noreferrer\">Matrix#lup</a> and <a href=\"http://ruby-doc.org/stdlib-2.4.0/libdoc/matrix/rdoc/Matrix/LUPDecomposition.html#method-i-solve\" rel=\"nofollow noreferrer\">Matrix::LUPDecomposition#solve</a>, which solve the linear system using LU decomposition.</p>\n\n<p>If the system of linear equations has no solution (e.g., <code>[[0,0], [0,0]]*x = b</code>) or an infinite number of solutions (that is, <code>m</code> is singular), Ruby will raise an exception. For example,</p>\n\n<pre><code>Matrix[[0,0],[0,0]].lup.solve [1, 1]\n  #=&gt; ExceptionForMatrix::ErrNotRegular: Not Regular Matrix\n</code></pre>\n\n<p><code>require matrix</code> makes both the <a href=\"http://ruby-doc.org/stdlib-2.4.0/libdoc/matrix/rdoc/Matrix.html\" rel=\"nofollow noreferrer\">Matrix</a> and <a href=\"http://ruby-doc.org/stdlib-2.4.0/libdoc/matrix/rdoc/Vector.html\" rel=\"nofollow noreferrer\">Vector</a> classes (and subclasses) available for use.</p>\n"}], "owner": {"reputation": 33, "user_id": 8370072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1442141d79d6abf8d6c9185dee975a3?s=128&d=identicon&r=PG&f=1", "display_name": "M. S.", "link": "https://stackoverflow.com/users/8370072/m-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 46434998, "answer_count": 1, "score": 1, "last_activity_date": 1506614335, "creation_date": 1506440539, "last_edit_date": 1506456127, "question_id": 46430721, "link": "https://stackoverflow.com/questions/46430721/solve-function-of-gem-nmatrix", "title": "solve function of gem NMatrix", "body": "<p>When I tried to use the function \"solve\" in gem NMatrix, I find wrong result...</p>\n\n<p>I am trying to solve the linear system <code>a*x = b</code> where</p>\n\n<pre><code>a = [[1,  0, 0], \n     [4, -5, 1],\n     [0,  0, 1]]\n</code></pre>\n\n<p>and </p>\n\n<pre><code>b = [0, 0, 729]\n</code></pre>\n\n<p>Which should give the answer</p>\n\n<pre><code>x = [0, 145.8, 729]\n</code></pre>\n\n<p>I call the solve function doing <code>a.solve(b)</code> (as explained at <a href=\"http://www.rubydoc.info/gems/nmatrix/0.2.1/NMatrix#solve-instance_method\" rel=\"nofollow noreferrer\">http://www.rubydoc.info/gems/nmatrix/0.2.1/NMatrix#solve-instance_method</a>) but it returns</p>\n\n<pre><code>x = [0, 1.013500790889141e-30, 1.013500790889141e-30]\n</code></pre>\n\n<p>Therefore, I have two questions:</p>\n\n<ol>\n<li>Am I doing something wrong?</li>\n<li>If not, what would be the other solution (excluding GSL) to solve matrix systems with ruby?</li>\n</ol>\n\n<p>Thank you !</p>\n"}, {"tags": ["ruby", "web-services", "savon"], "comments": [{"owner": {"reputation": 223, "user_id": 5310502, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b6f92af37160cf2310ac2ccadcd9b758?s=128&d=identicon&r=PG&f=1", "display_name": "testerBDD", "link": "https://stackoverflow.com/users/5310502/testerbdd"}, "edited": false, "score": 0, "creation_date": 1506450454, "post_id": 46430562, "comment_id": 79824129, "body": "client = Savon.client(wsdl: &#39;globalweather.wsdl&#39;, ssl_verify_mode: :none, ssl_version: :TLSv1)  response = client.call(:get_cities_by_country, xml: &quot;&lt;soap:Envelope xmlns:soap=&#39;<a href=\"http://www.w3.org/2003/05/soap-envelope\" rel=\"nofollow noreferrer\">w3.org/2003/05/soap-envelope</a>&#39; xmlns:web=&#39;<a href=\"http://www.webserviceX.NET\" rel=\"nofollow noreferrer\">webserviceX.NET</a>&#39;&gt;  &lt;soap:Header/&gt;   &lt;soap:Body&gt;      &lt;web:GetCitiesByCountry&gt;         &lt;!--Optional:--&gt;         &lt;web:CountryName&gt;United states&lt;/web:CountryName&gt;      &lt;/web:GetCitiesByCountry&gt;   &lt;/soap:Body&gt;&lt;/soap:Envelope&gt;&quot;)  this is working but if i want to use same request from XML /request.xml, how do i read it"}, {"owner": {"reputation": 3271, "user_id": 387177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce58186c9663c82e5fef7fcca045fa57?s=128&d=identicon&r=PG", "display_name": "Steffen Roller", "link": "https://stackoverflow.com/users/387177/steffen-roller"}, "edited": false, "score": 0, "creation_date": 1507477425, "post_id": 46430562, "comment_id": 80215095, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/21913449/sending-raw-xml-using-savon-2\">Sending raw XML using Savon 2</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3271, "user_id": 387177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce58186c9663c82e5fef7fcca045fa57?s=128&d=identicon&r=PG", "display_name": "Steffen Roller", "link": "https://stackoverflow.com/users/387177/steffen-roller"}, "edited": false, "score": 0, "creation_date": 1506610089, "post_id": 46451322, "comment_id": 79899210, "body": "I think you can drop the <code>require &#39;nokogiri&#39;</code> line."}, {"owner": {"reputation": 223, "user_id": 5310502, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b6f92af37160cf2310ac2ccadcd9b758?s=128&d=identicon&r=PG&f=1", "display_name": "testerBDD", "link": "https://stackoverflow.com/users/5310502/testerbdd"}, "reply_to_user": {"reputation": 3271, "user_id": 387177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce58186c9663c82e5fef7fcca045fa57?s=128&d=identicon&r=PG", "display_name": "Steffen Roller", "link": "https://stackoverflow.com/users/387177/steffen-roller"}, "edited": false, "score": 0, "creation_date": 1506651255, "post_id": 46451322, "comment_id": 79916389, "body": "yeah i use nokagiri for xml datadriven"}], "tags": [], "owner": {"reputation": 223, "user_id": 5310502, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b6f92af37160cf2310ac2ccadcd9b758?s=128&d=identicon&r=PG&f=1", "display_name": "testerBDD", "link": "https://stackoverflow.com/users/5310502/testerbdd"}, "is_accepted": true, "score": 2, "last_activity_date": 1506524748, "creation_date": 1506524748, "answer_id": 46451322, "question_id": 46430562, "link": "https://stackoverflow.com/questions/46430562/savon-passing-xml-as-a-request-to-wsdl-and-getting-response-as-xml/46451322#46451322", "title": "SAVON passing XML as a request to wsdl and getting response as xml", "body": "<p>Hello I found the answer and below is the code</p>\n\n<p>Then (/^I test wsdl$/) do\n    require 'savon'</p>\n\n<pre><code>require 'nokogiri'\n\nxml_file = File.read(\"/test.xml\")\n\nclient = Savon.client(wsdl: '/globalweather.wsdl', ssl_verify_mode: :none, ssl_version: :TLSv1)\n\nresponse = client.call(:get_cities_by_country, xml: xml_file)\nputs response.to_xml\nprint response.to_xml\n</code></pre>\n\n<p>end</p>\n"}], "owner": {"reputation": 223, "user_id": 5310502, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b6f92af37160cf2310ac2ccadcd9b758?s=128&d=identicon&r=PG&f=1", "display_name": "testerBDD", "link": "https://stackoverflow.com/users/5310502/testerbdd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 559, "favorite_count": 0, "accepted_answer_id": 46451322, "answer_count": 1, "score": 0, "last_activity_date": 1506524748, "creation_date": 1506440042, "question_id": 46430562, "link": "https://stackoverflow.com/questions/46430562/savon-passing-xml-as-a-request-to-wsdl-and-getting-response-as-xml", "title": "SAVON passing XML as a request to wsdl and getting response as xml", "body": "<p>I have a third party application and output of this application is an request xml which needs to be passed in to webservice (WSDL)</p>\n\n<p>I need to do integration testing where i will be getting this request xml.</p>\n\n<p>how can i pass this request xml using savon in Ruby ?\nis there anyother way where we can pass request xml and get the output in response xml</p>\n\n<p>i tried using soapui and it works but i am looking for native ruby solution</p>\n"}, {"tags": ["ruby", "selenium", "selenium-webdriver", "automated-tests", "watir"], "comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1506440815, "post_id": 46430524, "comment_id": 79818823, "body": "When the code races through, what is the incorrect behaviour that you see? Is <code>@myvariable</code> being set to the wrong value?"}, {"owner": {"reputation": 591, "user_id": 3755036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4feUb.jpg?s=128&g=1", "display_name": "qaispak", "link": "https://stackoverflow.com/users/3755036/qaispak"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1506442041, "post_id": 46430524, "comment_id": 79819620, "body": "I get the Selenium element does not exist code. It can&#39;t find target_link_element"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1506443620, "post_id": 46430524, "comment_id": 79820518, "body": "Which version of Page-Object and Watir are you using? Can you also share the definition for <code>target_link_element</code> and ideally a page that reproduces the problem?"}, {"owner": {"reputation": 591, "user_id": 3755036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4feUb.jpg?s=128&g=1", "display_name": "qaispak", "link": "https://stackoverflow.com/users/3755036/qaispak"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1506445515, "post_id": 46430524, "comment_id": 79821543, "body": "Watir 6.5.0 Page object 2.2. target_link_element is defined as td(:target_link, :id =&gt; &#39;someID&#39;,:frame=&gt;frame)"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1506448316, "post_id": 46430524, "comment_id": 79823012, "body": "Can you try upgrading Watir to latest? There were a number of fixes in 6.8.x related to not waiting appropriately."}, {"owner": {"reputation": 591, "user_id": 3755036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4feUb.jpg?s=128&g=1", "display_name": "qaispak", "link": "https://stackoverflow.com/users/3755036/qaispak"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1506451322, "post_id": 46430524, "comment_id": 79824586, "body": "Hey, I updated to 6.7.X and it works now! If you could add an answer I will upvote it."}], "answers": [{"comments": [{"owner": {"reputation": 591, "user_id": 3755036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4feUb.jpg?s=128&g=1", "display_name": "qaispak", "link": "https://stackoverflow.com/users/3755036/qaispak"}, "edited": false, "score": 0, "creation_date": 1506453190, "post_id": 46434074, "comment_id": 79825505, "body": "Just for clarification. Watir should wait for pages to be loaded before it goes to the next page by default, right?"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "reply_to_user": {"reputation": 591, "user_id": 3755036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4feUb.jpg?s=128&g=1", "display_name": "qaispak", "link": "https://stackoverflow.com/users/3755036/qaispak"}, "edited": false, "score": 1, "creation_date": 1506454578, "post_id": 46434074, "comment_id": 79826239, "body": "Yes and no. When clicking a button/link that submits a form or starts a navigation, the underlying driver will wait for the page load to finish. If the button/link triggers some JavaScript, which in turn causes the browser to refresh, the driver does not know it needs to wait. However, most of the Watir element calls will wait for the element to appear before taking action/inspecting. In short, most cases will wait but there are some edge cases."}], "tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 2, "last_activity_date": 1506452915, "creation_date": 1506452915, "answer_id": 46434074, "question_id": 46430524, "link": "https://stackoverflow.com/questions/46430524/watir-wont-wait-for-page-to-be-loaded/46434074#46434074", "title": "Watir wont wait for page to be loaded", "body": "<p>You should upgrade to the latest version of Watir, currently v6.8.4. Since v6.5.0, there have been a number of bug fixes that have addressed the issue you are seeing.</p>\n"}], "owner": {"reputation": 591, "user_id": 3755036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4feUb.jpg?s=128&g=1", "display_name": "qaispak", "link": "https://stackoverflow.com/users/3755036/qaispak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "accepted_answer_id": 46434074, "answer_count": 1, "score": 0, "last_activity_date": 1506452915, "creation_date": 1506439904, "question_id": 46430524, "link": "https://stackoverflow.com/questions/46430524/watir-wont-wait-for-page-to-be-loaded", "title": "Watir wont wait for page to be loaded", "body": "<p>I am loading a page and then clicking on an element in that page. Currently I am using sleep to click on it but I don't feel that is robust enough (also, it disappears after a while). </p>\n\n<pre><code> on(page1).buttonForNextPage.click\n   @myvariable = on(page2).target_link_element.wait_until_present().link.text \n</code></pre>\n\n<p>The wait_until_present() seems to be achieving nothing. If I do not add sleeps the code just races through. Only works with sleep (3) but I want to avoid that. </p>\n\n<p>Also, I am using pageobjects gem for my pages. </p>\n"}, {"tags": ["mysql", "ruby", "pipe", "mariadb", "popen"], "comments": [{"owner": {"reputation": 105038, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "edited": false, "score": 0, "creation_date": 1506460553, "post_id": 46430456, "comment_id": 79829044, "body": "I don&#39;t thing a pipe is the right way to connect to MySQL.  Did you install <code>libmysql-ruby</code>, <code>libmysqlcliient-dev</code> and &quot;gem rails rake mysql&quot;?"}, {"owner": {"reputation": 105038, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "edited": false, "score": 0, "creation_date": 1506460656, "post_id": 46430456, "comment_id": 79829083, "body": "See also <a href=\"http://rubyforge.org/tracker/index.php?func=detail&amp;aid=27052&amp;group_id=1598&amp;atid=6231\" rel=\"nofollow noreferrer\">rubyforge.org/tracker/&hellip;</a>"}, {"owner": {"reputation": 2156, "user_id": 7273347, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/381f953406e0dc6301d1d0bdb6f95c24?s=128&d=identicon&r=PG&f=1", "display_name": "airborne", "link": "https://stackoverflow.com/users/7273347/airborne"}, "reply_to_user": {"reputation": 105038, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "edited": false, "score": 0, "creation_date": 1506494957, "post_id": 46430456, "comment_id": 79838574, "body": "Hi, your second link doesn&#39;t seem to work currently. Libmysql sseems to be for Linux OS only (I&#39;m on windows)? <a href=\"https://pkgs.org/download/libmysql-ruby\" rel=\"nofollow noreferrer\">pkgs.org/download/libmysql-ruby</a>"}], "owner": {"reputation": 2156, "user_id": 7273347, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/381f953406e0dc6301d1d0bdb6f95c24?s=128&d=identicon&r=PG&f=1", "display_name": "airborne", "link": "https://stackoverflow.com/users/7273347/airborne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1506440848, "creation_date": 1506439688, "last_edit_date": 1506440848, "question_id": 46430456, "link": "https://stackoverflow.com/questions/46430456/io-popen-with-mysql-mariadb-in-ruby", "title": "IO.popen with MySql (MariaDB) in ruby", "body": "<p>before I start describing my problem I'd like to point out that I'm bound to ruby version 1.8.6 (to explain why is out of the scope of this thread). Hence I can't use gem modules like mysql, mysql2.</p>\n\n<p>What I'm trying to achieve is to write a ruby program which interacts which a MySQL Database on a remote server (in this particular case MariaDB monitor as monitoring module -> s.picture)</p>\n\n<p>I manage to get the following code running:</p>\n\n<pre><code>command=String.new(\"mysql -h hostadress --protocol tcp --user=uname --password=passw dbname\")\nconnection=IO.popen(command,'r+')     \nconnection.puts(\"SELECT \\*FROM table WHERE name=\\\"match\\\" \\\\g\")\nconnection.close_write\ndata=connection.read\np data\n\nconnection=IO.popen(command,'r+')     \nconnection.puts(\"SELECT \\*FROM table WHERE name=\\\"match2\\\"\\\\g\")\nconnection.close_write\ndata=connection.read\np data\n</code></pre>\n\n<p>But as you can see, it's very ugly since I have to open the database again and again (I'm doing this a lot in my actual script). Is there an elegant solution to only open the database once (e.g reopen the pipe)?\n<a href=\"https://i.stack.imgur.com/a6WGY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/a6WGY.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1506439997, "post_id": 46430396, "comment_id": 79818255, "body": "In Rails 4 you would use: <code>Post.count</code> or <code>Post.all.size</code>"}], "answers": [{"comments": [{"owner": {"reputation": 439, "user_id": 1380881, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c4346f78639e8ea7ac77046f0f2459cc?s=128&d=identicon&r=PG", "display_name": "mazing", "link": "https://stackoverflow.com/users/1380881/mazing"}, "edited": false, "score": 1, "creation_date": 1506440228, "post_id": 46430568, "comment_id": 79818417, "body": "Thanks for your explanation. What does AR mean though? Activerecord? And is the performance thing true? Or is it negligible?"}, {"owner": {"reputation": 3305, "user_id": 342978, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ee06ba399c5eaf3f5a337a96207c2768?s=128&d=identicon&r=PG", "display_name": "Syl", "link": "https://stackoverflow.com/users/342978/syl"}, "reply_to_user": {"reputation": 439, "user_id": 1380881, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c4346f78639e8ea7ac77046f0f2459cc?s=128&d=identicon&r=PG", "display_name": "mazing", "link": "https://stackoverflow.com/users/1380881/mazing"}, "edited": false, "score": 3, "creation_date": 1506440599, "post_id": 46430568, "comment_id": 79818665, "body": "Yes, AR means ActiveRecord. About the performance, I think counter cache is related to count through relations. You are probably doing premature optimization. Just focus on making an application clean and organized, speed optimization can come later."}], "tags": [], "owner": {"reputation": 3305, "user_id": 342978, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ee06ba399c5eaf3f5a337a96207c2768?s=128&d=identicon&r=PG", "display_name": "Syl", "link": "https://stackoverflow.com/users/342978/syl"}, "is_accepted": true, "score": 2, "last_activity_date": 1506440061, "creation_date": 1506440061, "answer_id": 46430568, "question_id": 46430396, "link": "https://stackoverflow.com/questions/46430396/understanding-rails-size-vs-count-and-why-size-doesnt-work-in-view/46430568#46430568", "title": "Understanding rails size vs count, and why .size doesn&#39;t work in view?", "body": "<p>count is an AR method, it will use <code>COUNT</code> in the SQL query, and it actually makes AR aware that you are doing a database query, and it return the count value returned by the database.</p>\n\n<p>Size is a method for collections, Post and User are classes, not collections, so AR is never used, and you end up with an error, because you first need to do an AR query to have a collection, even an empty one.</p>\n\n<p>The rails way to do what you try is to use <code>all</code>, that will return a collection.</p>\n\n<pre><code>@post_count = Post.all.size\n@user_count = User.all.size\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 4682040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d320e0cd8ca113734f6f3b15009b76d?s=128&d=identicon&r=PG&f=1", "display_name": "burgund", "link": "https://stackoverflow.com/users/4682040/burgund"}, "is_accepted": false, "score": 3, "last_activity_date": 1506458230, "creation_date": 1506458230, "answer_id": 46435383, "question_id": 46430396, "link": "https://stackoverflow.com/questions/46430396/understanding-rails-size-vs-count-and-why-size-doesnt-work-in-view/46435383#46435383", "title": "Understanding rails size vs count, and why .size doesn&#39;t work in view?", "body": "<p>There are 3 similar methods: </p>\n\n<ul>\n<li><p><code>count</code> which is using SQL query. That's the fastest way but as you have noticed, not always possible to perform.</p></li>\n<li><p><code>length</code> will return length of a collection without performing additional queries if collection is already loaded. It may be ineffective because it will load a whole collection into memory.</p></li>\n<li><p><code>size</code> It's a combination of both <code>count</code> and <code>length</code>. Will perform additional query only if collection is unloaded. </p></li>\n</ul>\n"}], "owner": {"reputation": 439, "user_id": 1380881, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c4346f78639e8ea7ac77046f0f2459cc?s=128&d=identicon&r=PG", "display_name": "mazing", "link": "https://stackoverflow.com/users/1380881/mazing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1263, "favorite_count": 1, "accepted_answer_id": 46430568, "answer_count": 2, "score": 3, "last_activity_date": 1506458230, "creation_date": 1506439503, "question_id": 46430396, "link": "https://stackoverflow.com/questions/46430396/understanding-rails-size-vs-count-and-why-size-doesnt-work-in-view", "title": "Understanding rails size vs count, and why .size doesn&#39;t work in view?", "body": "<p>When I use the method .count, it works just fine and accurately shows the number of posts. When I try .size, it throws an error. Why is this?</p>\n\n<p><strong>My static_controller.rb code (with <em>COUNT</em> as a method)</strong></p>\n\n<pre><code>class StaticController &lt; ApplicationController\n\ndef index\n@post_count = Post.count\n@user_count = User.count\nend\n</code></pre>\n\n<p><strong>index.html.erb (with <em>COUNT</em> as a method)</strong> </p>\n\n<pre><code>&lt;div&gt;\n      &lt;p&gt; &lt;%= @post_count %&gt; &lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>When I change the instances of .count to <code>size</code>, I get this error in the local server: </p>\n\n<p><strong>NoMethodError at /\nundefined method `size' for #</strong></p>\n\n<p><strong>index - app/controllers/static_controller.rb, line 4</strong></p>\n\n<p>Why is this? Is .size not a built in method for rails? If not, how can I fix this issue?</p>\n\n<p>Also, am I correct in understanding that .size is more performant if a counter_cache is applied to the model that the method is being applied to? For example, if my post.rb model has a section where counter_cache is declared, does that automatically make it more fast/performant?</p>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "is_accepted": false, "score": 12, "last_activity_date": 1506444036, "creation_date": 1506444036, "answer_id": 46431763, "question_id": 46430288, "link": "https://stackoverflow.com/questions/46430288/how-to-call-subject-several-times-with-rspec/46431763#46431763", "title": "How to call subject several times with RSpec", "body": "<p>No. <code>let</code> and <code>subject</code> are <a href=\"https://relishapp.com/rspec/rspec-core/v/2-8/docs/helper-methods/let-and-let\" rel=\"noreferrer\">memoized (and lazy-loaded)</a>.</p>\n\n<p>You can change it like this</p>\n\n<pre><code>subject { 3.times { Book.create } }\n\nit 'something happen' do\n  expect { subject }.to change{ Book.count }.from(0).to(3)\nend\n</code></pre>\n\n<p>Or if you (for whatever reason) want to call something 3 times - define a method: </p>\n\n<pre><code>subject { create_book }\n\ndef create_book\n   Book.create\nend\n\nbefore do\n  create_book\nend\n\nit 'something happen' do\n  create_book\n  expect { subject }.to change{ Book.count }.from(2).to(3)\nend\n</code></pre>\n\n<p>Then it will be called 3 times: once in before block, one in it before expectation and once inside the expectation (but the change will be from <code>2</code> not from <code>0</code>, because those 2 times were called before)</p>\n"}, {"tags": [], "owner": {"reputation": 3556, "user_id": 1248725, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/clORt.jpg?s=128&g=1", "display_name": "juliangonzalez", "link": "https://stackoverflow.com/users/1248725/juliangonzalez"}, "is_accepted": false, "score": 3, "last_activity_date": 1541032738, "creation_date": 1541032738, "answer_id": 53093743, "question_id": 46430288, "link": "https://stackoverflow.com/questions/46430288/how-to-call-subject-several-times-with-rspec/53093743#53093743", "title": "How to call subject several times with RSpec", "body": "<p>If you don't want to memoize a result you can also use a Proc</p>\n\n<pre><code>describe MyClass do\n  let(:param_1) { 'some memoized string' }\n  let(described_method) { Proc.new { described_class.do_something(param_1) } }\n\n  it 'can run the method twice without memoization' do\n    expect(described_method.call).to have_key(:success) # =&gt; {success: true}\n    expect(described_method.call).to have_key(:error)   # =&gt; {error: 'cant call do_something with same param twice'}\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 713, "user_id": 975352, "user_type": "registered", "accept_rate": 16, "profile_image": "https://www.gravatar.com/avatar/79470d4708b9927990eb78650fb906ca?s=128&d=identicon&r=PG&f=1", "display_name": "Akira  Noguchi", "link": "https://stackoverflow.com/users/975352/akira-noguchi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3929, "favorite_count": 0, "answer_count": 2, "score": 7, "last_activity_date": 1541032738, "creation_date": 1506439190, "question_id": 46430288, "link": "https://stackoverflow.com/questions/46430288/how-to-call-subject-several-times-with-rspec", "title": "How to call subject several times with RSpec", "body": "<p>I create RSpec test below. I try to call <code>subject</code> several times. But I cannot get expected result. I call <code>subject</code> three times, doesn't it? So, I expect three Book records. Does <code>subject</code> cannot call one time?</p>\n\n<pre><code>require 'rails_helper'\n\nRSpec.describe Book, type: :model do\n  context 'some context' do\n    subject { Book.create }\n\n    before do\n      subject\n    end\n\n    it 'something happen' do\n      subject\n      expect { subject }.to change{ Book.count }.from(0).to(3)\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "watir", "instantiation", "watir-classic"], "comments": [{"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1506439745, "post_id": 46429767, "comment_id": 79818073, "body": "That feature has been deprecated. You can only interact with a browser window that has been created by the current Ruby session. For simple cases I use irb to switch between code and manual browser interaction. For complex cases I use debug points with RubyMine (pry is also an option)."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "reply_to_user": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1506441032, "post_id": 46429767, "comment_id": 79818955, "body": "@titusfortner, when you mention the feature being deprecated, do you mean the Watir feature? Some of the browsers, <a href=\"https://jkotests.wordpress.com/2017/09/15/attach-to-a-manually-opened-chrome-browser-using-debuggeraddress/\" rel=\"nofollow noreferrer\">at least Chrome</a>, do support some limited attachment capability. Or do you mean that Chromedriver is going to deprecate the capability?"}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1506441651, "post_id": 46429767, "comment_id": 79819384, "body": "I&#39;m just saying that Watir used to support it when it was based on the old Windows COM functionality, but now that Watir is based on Selenium, it is reliant on Selenium to support it, which it does not. I don&#39;t believe it is a technical limitation, and the w3c allows for it (<a href=\"https://w3c.github.io/webdriver/webdriver-spec.html#h-note12\" rel=\"nofollow noreferrer\">w3c.github.io/webdriver/webdriver-spec.html#h-note12</a>), but nothing is there for Watir to hook into at this time."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1506441999, "post_id": 46429767, "comment_id": 79819602, "body": "@leandropessoa, can you expand on what your use case is? For example, my Watir-Classic tests used to <code>attach</code> to popup windows. The solution there was to switch to using <code>window(locator).use</code>. In contrast, for my manual testing, I actually did need to <code>attach</code> since I was always opening/closing tabs. If the latter, it would help to know what browsers you need, since as mentioned in the above comments, the availability is browser dependent."}, {"owner": {"reputation": 1, "user_id": 7992545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d5a76af33bb40e00ac6b1ee4bbe73c0?s=128&d=identicon&r=PG&f=1", "display_name": "leandropessoa", "link": "https://stackoverflow.com/users/7992545/leandropessoa"}, "edited": false, "score": 0, "creation_date": 1506443507, "post_id": 46429767, "comment_id": 79820453, "body": "Thank you for replying. my problem is that the desktop application that I&#39;m testing calls the IE page, in which case I need to fill in some information on it. In this same project we tested another WEB application and we used watir 6.XX. So I need some method similar to the &quot;attach&quot; from &quot;watir-classic&quot; to &quot;watir 6.xxx&quot;. (Watir :: Browser.attach (: url, /<a href=\"http://XXX.XXXX.XXXXX/\" rel=\"nofollow noreferrer\">XXX.XXXX.XXXXX</a>)). Sorry for my English."}, {"owner": {"reputation": 1, "user_id": 7992545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d5a76af33bb40e00ac6b1ee4bbe73c0?s=128&d=identicon&r=PG&f=1", "display_name": "leandropessoa", "link": "https://stackoverflow.com/users/7992545/leandropessoa"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1506443812, "post_id": 46429767, "comment_id": 79820620, "body": "@Justin Ko, I tried using browser.window (locator), browser.windows [x] but without success, it seems that this method only identifies daughters pages of the browser that is instantiated"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 1, "creation_date": 1506445503, "post_id": 46429767, "comment_id": 79821537, "body": "Unfortunately, I think you might be out of luck for IE. At the moment, you will need to continue using Watir-Classic."}], "owner": {"reputation": 1, "user_id": 7992545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d5a76af33bb40e00ac6b1ee4bbe73c0?s=128&d=identicon&r=PG&f=1", "display_name": "leandropessoa", "link": "https://stackoverflow.com/users/7992545/leandropessoa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 217, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1506437679, "creation_date": 1506437679, "question_id": 46429767, "link": "https://stackoverflow.com/questions/46429767/how-to-instantiate-a-browser-already-available-using-watir-6-xxx-in-ruby", "title": "how to instantiate a browser already available using watir 6.xxx in ruby?", "body": "<p>how to instantiate a browser already available using watir 6.xxx in ruby?</p>\n\n<p>I tested with \"watir-classic\" and ran, the problem that the whole design was written using watir 6.xx.</p>\n"}, {"tags": ["ruby", "macos", "homebrew", "nokogiri", "libxml2"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1506438520, "post_id": 46429583, "comment_id": 79817223, "body": "This is the first result from a google search: <code>sudo apt-get install libxslt-dev libxml2-dev</code>. Presumably you&#39;ll need to use <code>brew</code> since you&#39;re using a mac, but you get the idea."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1506438550, "post_id": 46429583, "comment_id": 79817248, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/6277456/nokogiri-installation-fails-libxml2-is-missing\">Nokogiri installation fails -libxml2 is missing</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1506442212, "post_id": 46429583, "comment_id": 79819729, "body": "With Homebrew there&#39;s a difference between &quot;installed&quot; and actually linked in properly. Check that everything&#39;s coherent: <code>brew doctor</code>."}, {"owner": {"reputation": 14471, "user_id": 735926, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6b5fa39f5bc4b397eb7e55766eecd8c4?s=128&d=identicon&r=PG", "display_name": "bfontaine", "link": "https://stackoverflow.com/users/735926/bfontaine"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1506526284, "post_id": 46429583, "comment_id": 79859270, "body": "@tadman If it weren\u2019t linked OP would have gotten a message like &quot;<code>Warning: libxml2 2.9.5 is already installed, it\u2019s just not linked.</code>&quot;."}, {"owner": {"reputation": 10157, "user_id": 53491, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c79083b696c8a63b10dc59b286a24ef6?s=128&d=identicon&r=PG", "display_name": "Brian Postow", "link": "https://stackoverflow.com/users/53491/brian-postow"}, "edited": false, "score": 0, "creation_date": 1506614092, "post_id": 46429583, "comment_id": 79901955, "body": "I managed to make this work with rbenv. RMV was causing other larger problems..."}], "owner": {"reputation": 10157, "user_id": 53491, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c79083b696c8a63b10dc59b286a24ef6?s=128&d=identicon&r=PG", "display_name": "Brian Postow", "link": "https://stackoverflow.com/users/53491/brian-postow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 350, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1506437115, "creation_date": 1506437115, "question_id": 46429583, "link": "https://stackoverflow.com/questions/46429583/cant-install-nokogiri-gem-on-mac-libxml2", "title": "Can&#39;t install nokogiri gem on mac (libxml2)", "body": "<p>I'm trying to install the nokogiri gem, but it says: </p>\n\n<pre><code>libxml2 is missing.  Please locate mkmf.log to investigate how it is failing.\n</code></pre>\n\n<p>When I try to install libxml2 with brew, it says: </p>\n\n<pre><code>Warning: libxml2 2.9.5 is already installed\n</code></pre>\n\n<p>Earlier, it said that it was installing a keg-only version because the macOS already had a version of libxml2. </p>\n\n<p>So, gem can't find any copies of libxml2, but brew finds 2? </p>\n\n<p>How do I tell gem where to find libxml2?</p>\n\n<p>looking at mkmf.log, I see that it seems to not know about iconv?</p>\n\n<pre><code>have_iconv?: checking for iconv using --with-opt-* flags... -------------------\n- yes\n\n\"gcc -o conftest -I/Users/brianp/.rvm/rubies/ruby-2.1.10/include/ruby-2.1.0/x86_64-darwin16.0 -I/Users/brianp/.rvm/rubies/ruby-2.1.10/include/ruby-2.1.0/ruby/backward -I/Users/brianp/.rvm/rubies/ruby-2.1.10/include/ruby-2.1.0 -I.  -I/usr/local/opt/libyaml/include -I/usr/local/opt/readline/include -I/usr/local/opt/libksba/include -I/usr/local/opt/openssl/include -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE -D_DARWIN_UNLIMITED_SELECT -D_REENTRANT    -O3 -fno-fast-math -ggdb3 -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wunused-variable -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wshorten-64-to-32 -Wimplicit-function-declaration -Wdivision-by-zero -Wextra-tokens  -fno-common -pipe  -O3 -Wall -Wcast-qual -Wwrite-strings -Wconversion -Wmissing-noreturn -Winline conftest.c  -L. -L/Users/brianp/.rvm/rubies/ruby-2.1.10/lib -L/usr/local/opt/libyaml/lib -L/usr/local/opt/readline/lib -L/usr/local/opt/libksba/lib -L/usr/local/opt/openssl/lib -L. -fstack-protector -L/usr/local/opt/libyaml/lib -L/usr/local/opt/readline/lib -L/usr/local/opt/libksba/lib -L/usr/local/opt/openssl/lib      -lruby.2.1.0  -lpthread -ldl -lobjc  \"\nUndefined symbols for architecture x86_64:\n  \"_iconv\", referenced from:\n      _main in conftest-311f4b.o\n  \"_iconv_open\", referenced from:\n      _main in conftest-311f4b.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nchecked program was:\n/* begin */\n 1: #include \"ruby.h\"\n 2: \n 3: #include &lt;stdlib.h&gt;\n 4: #include &lt;iconv.h&gt;\n 5: \n 6: int main(void)\n 7: {\n 8:     iconv_t cd = iconv_open(\"\", \"\");\n 9:     iconv(cd, NULL, NULL, NULL, NULL);\n10:     return EXIT_SUCCESS;\n11: }\n/* end */\n</code></pre>\n\n<p>again, it says I have iconv, but then it crashes? </p>\n\n<p>I must be misunderstanding a message somewhere.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pdf"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5698563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27cb46aa1bf860ea854e1b7856932852?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Hric", "link": "https://stackoverflow.com/users/5698563/jan-hric"}, "is_accepted": false, "score": 0, "last_activity_date": 1507889391, "creation_date": 1507889391, "answer_id": 46727473, "question_id": 46429380, "link": "https://stackoverflow.com/questions/46429380/ruby-display-pdf-file-which-is-not-public-as-part-of-a-view/46727473#46727473", "title": "Ruby - display PDF file which is not public as part of a view", "body": "<p>the 'file_path' just needs to point to an action in controller which returns the file, such as</p>\n\n<pre><code>def return_file\n  send_file(path, name, type)\nend\n</code></pre>\n\n<p>html:</p>\n\n<pre><code>&lt;object type=\"application/pdf\" data=\"/return_file\" id=\"pdf_content\"&gt;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5698563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27cb46aa1bf860ea854e1b7856932852?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Hric", "link": "https://stackoverflow.com/users/5698563/jan-hric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507889421, "creation_date": 1506436576, "last_edit_date": 1507889421, "question_id": 46429380, "link": "https://stackoverflow.com/questions/46429380/ruby-display-pdf-file-which-is-not-public-as-part-of-a-view", "title": "Ruby - display PDF file which is not public as part of a view", "body": "<p>I'm trying to display a pdf file which is stored on the server as part of a view (not just over the whole page, that's why I cannot just use send_file or send_data).</p>\n\n<pre><code>&lt;object type=\"application/pdf\" data=\"' + file_path + '\" id=\"pdf_content\"&gt;\n</code></pre>\n\n<p>but the file is not public, therefore the browser does not have access to it and will not display it. Any idea how to display the file? </p>\n\n<p>I could, for example, convert it to a base64 image, send it to the view and display it on a canvas but that would be slow and the image will be of lower quality.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1506436852, "post_id": 46428922, "comment_id": 79815941, "body": "Move the <code>accept</code> call into <code>Thread.start</code>, i.e. <code>Thread.start(socket.accept) { ... }</code>. See <a href=\"http://ruby-doc.org/stdlib-2.4.2/libdoc/socket/rdoc/TCPServer.html\" rel=\"nofollow noreferrer\"><code>TCPServer</code></a> for a simple implementation (the 2nd example)."}, {"owner": {"reputation": 25, "user_id": 8226879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/315e27657589ea32194518eeeb3a255f?s=128&d=identicon&r=PG&f=1", "display_name": "LepleyDev", "link": "https://stackoverflow.com/users/8226879/lepleydev"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1506439826, "post_id": 46428922, "comment_id": 79818142, "body": "Oh wow. I didn&#39;t even realize it would try to accept a new connection for every thread if I just passed in the variable <code>socket</code> defined as <code>socket = @server.accept</code>  This seemed to have fixed the issue. You should answer so I can accept. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 8226879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/315e27657589ea32194518eeeb3a255f?s=128&d=identicon&r=PG&f=1", "display_name": "LepleyDev", "link": "https://stackoverflow.com/users/8226879/lepleydev"}, "edited": false, "score": 0, "creation_date": 1506444225, "post_id": 46431434, "comment_id": 79820828, "body": "This makes so much sense, thank you for the detailed explanation!"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 0, "last_activity_date": 1506442844, "creation_date": 1506442844, "answer_id": 46431434, "question_id": 46428922, "link": "https://stackoverflow.com/questions/46428922/ruby-threaderror-for-looping-connection/46431434#46431434", "title": "Ruby - ThreadError for Looping Connection", "body": "<p>Your loop: (simplified)</p>\n\n<pre><code>socket = @server.accept\n\nloop do\n  Thread.start(socket) do |client|\n    # ...\n  end\nend\n</code></pre>\n\n<p>accepts a single connection and then creates new threads as fast as it can, passing each thread the same <code>socket</code> object, so all of the threads start reading data from the same socket concurrently.</p>\n\n<p>To avoid this, you have to move the <code>accept</code> call into the loop:</p>\n\n<pre><code>loop do\n  socket = @server.accept\n\n  Thread.start(socket) do |client|\n    # ...\n  end\nend\n</code></pre>\n\n<p>Or simply:</p>\n\n<pre><code>loop do\n  Thread.start(@server.accept) do |client|\n    # ...\n  end\nend\n</code></pre>\n\n<p><code>accept</code> immediately <em>blocks</em> to wait for a new connection, effectively pausing the loop. Once a connection is established, it creates a new thread to handle that connection and the loop starts over.</p>\n\n<p>A similar example can be found in the documentation for <a href=\"http://ruby-doc.org/stdlib-2.4.2/libdoc/socket/rdoc/TCPServer.html\" rel=\"nofollow noreferrer\"><code>TCPServer</code></a>.</p>\n"}], "owner": {"reputation": 25, "user_id": 8226879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/315e27657589ea32194518eeeb3a255f?s=128&d=identicon&r=PG&f=1", "display_name": "LepleyDev", "link": "https://stackoverflow.com/users/8226879/lepleydev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 46431434, "answer_count": 1, "score": 1, "last_activity_date": 1506442844, "creation_date": 1506435455, "question_id": 46428922, "link": "https://stackoverflow.com/questions/46428922/ruby-threaderror-for-looping-connection", "title": "Ruby - ThreadError for Looping Connection", "body": "<p>I'm working on my first attempts on Sockets and Threading and am running into an issue where I believe I am hitting a thread cap, but not entirely sure. </p>\n\n<p>Basically I have a <code>server.rb</code> which opens a TCPServer and a <code>game.rb</code> which connects to the server. On the server, when the user connects I output some general information and then want to start reading data that is passed through from the <code>game.rb</code>. I believe the problem I am running into is I am just creating a new thread everytime the loop executes and I think I'm meeting the cap. I am also not sure if this is best practice. I wanted to avoid using other APIs until I got a decent grasp on the basics, so I tried to follow the code from <a href=\"https://github.com/sausheong/tanks\" rel=\"nofollow noreferrer\">https://github.com/sausheong/tanks</a>. </p>\n\n<p><strong>server.rb</strong></p>\n\n<pre><code>require 'socket'\n\n# lsof -i :2000\n# kill ID\n\nclass Server\n  def initialize(host, port)\n    puts \"starting arena\"\n\n    @server = TCPServer.open(host, port)\n    @sprites = Hash.new\n    @players = Hash.new\n\n    handle_connection(@server.accept)\n\n  end\n\n  def handle_connection(socket)\n    _, port, host = socket.peeraddr\n    user = \"#{host}:#{port}\"\n    puts \"#{user} has joined!\"\n    puts \"------\"\n\n    loop do\n      thread = Thread.start(socket) do |client|\n        puts 'starting new thread'\n        data = socket.readpartial(4096)\n        data_array = data.split(\"\\n\")\n\n        if data_array &amp;&amp; data_array.any?\n          begin\n            data_array.each do |row|\n              message = row.split(\"|\")\n              puts message\n            end\n          rescue Exception =&gt; exception\n            puts \"exception happened?\"\n            puts exception.inspect\n          end\n        end\n      end\n    end # end loop\n  rescue EOFError =&gt; err\n    puts \"error\"\n    puts \"Closing the connection. Bye!\"\n    socket.close\n    puts err\n  end # handle_connection end\n\nend # class end\n\nServer.new('localhost', 2000)\n</code></pre>\n\n<p><strong>game.rb</strong></p>\n\n<pre><code># create a server\n# join server\n# move Player\n# communicate to server that player moved\n# update players position for server?\n\nrequire 'gosu'\nrequire 'socket'\n\nclass Player\n  def initialize\n    @image = Gosu::Image.new(\"media/starfighter.bmp\")\n    @x = @y = @vel_x = @vel_y = @angle = 0.0\n    @score = 0\n  end\n\n  def warp(x, y)\n    @x, @y = x, y\n  end\n\n  def turn_left\n    @angle -= 4.5\n  end\n\n  def turn_right\n    @angle += 4.5\n  end\n\n  def accelerate\n    @vel_x += Gosu.offset_x(@angle, 0.5)\n    @vel_y += Gosu.offset_y(@angle, 0.5)\n  end\n\n  def move\n    @x += @vel_x\n    @y += @vel_y\n    @x %= 640\n    @y %= 480\n\n    @vel_x *= 0.95\n    @vel_y *= 0.95\n  end\n\n  def draw\n    @image.draw_rot(@x, @y, 1, @angle)\n  end\nend\n\nclass Client\n\n  def initialize(host, port)\n    @client = TCPSocket.open(host, port)\n    send_data(\"321|123\")\n  end\n\n  def send_data(data)\n    @client.write(data)\n  end\n  # puts \"enter your name:\"\n  # client.write gets\n  #\n  # while line = client.gets\n  #   puts line.chop\n  # end\nend\n\nclass Tutorial &lt; Gosu::Window\n  def initialize(server, port)\n    super 640, 480\n    self.caption = \"Tutorial Game\"\n\n    @client = Client.new(server, port)\n\n    @background_image = Gosu::Image.new(\"media/space.png\", :tileable =&gt; true)\n\n    @player = Player.new\n    @player.warp(320, 240)\n  end\n\n  def update\n    if Gosu.button_down? Gosu::KB_LEFT or Gosu::button_down? Gosu::GP_LEFT\n      @player.turn_left\n      @client.send_data(\"left\")\n    end\n    if Gosu.button_down? Gosu::KB_RIGHT or Gosu::button_down? Gosu::GP_RIGHT\n      @player.turn_right\n    end\n    if Gosu.button_down? Gosu::KB_UP or Gosu::button_down? Gosu::GP_BUTTON_0\n      @player.accelerate\n    end\n    @player.move\n  end\n\n  def draw\n    @player.draw\n    @background_image.draw(0, 0, 0)\n  end\n\n  def button_down(id)\n    if id == Gosu::KB_ESCAPE\n      close\n    else\n      super\n    end\n  end\nend\n\nTutorial.new('localhost', 2000).show\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv", "parsing", "encoding"], "answers": [{"comments": [{"owner": {"reputation": 487, "user_id": 1199756, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d7a9202129ddd325f5dd91916dc70db4?s=128&d=identicon&r=PG", "display_name": "Mike Fogg", "link": "https://stackoverflow.com/users/1199756/mike-fogg"}, "edited": false, "score": 0, "creation_date": 1506440746, "post_id": 46428535, "comment_id": 79818772, "body": "thanks for the comment! Unfortunately, this doesn&#39;t work :( I&#39;ll update my post with the results"}, {"owner": {"reputation": 4449, "user_id": 7681659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47bc1a3b7231505d61b7f80642bc1a14?s=128&d=identicon&r=PG&f=1", "display_name": "ashmaroli", "link": "https://stackoverflow.com/users/7681659/ashmaroli"}, "reply_to_user": {"reputation": 487, "user_id": 1199756, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d7a9202129ddd325f5dd91916dc70db4?s=128&d=identicon&r=PG", "display_name": "Mike Fogg", "link": "https://stackoverflow.com/users/1199756/mike-fogg"}, "edited": false, "score": 0, "creation_date": 1506444091, "post_id": 46428535, "comment_id": 79820772, "body": "if the <code>puts</code> command outputs the right string, then perhaps the following should work as well: <b><code>CSV.read(path, {:headers  =&gt; true, :encoding =&gt; &#39;utf-8&#39;}).map(&amp;:to_s)</code></b>"}, {"owner": {"reputation": 487, "user_id": 1199756, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d7a9202129ddd325f5dd91916dc70db4?s=128&d=identicon&r=PG", "display_name": "Mike Fogg", "link": "https://stackoverflow.com/users/1199756/mike-fogg"}, "edited": false, "score": 0, "creation_date": 1506444634, "post_id": 46428535, "comment_id": 79821057, "body": "appreciate the effort! Just pasted that output as an edit to my post. Seems to still have an encoding on it. The gist I pasted in there should have the same encoding (if the github gist maintains it) if you want to test that in irb?"}, {"owner": {"reputation": 487, "user_id": 1199756, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d7a9202129ddd325f5dd91916dc70db4?s=128&d=identicon&r=PG", "display_name": "Mike Fogg", "link": "https://stackoverflow.com/users/1199756/mike-fogg"}, "edited": false, "score": 0, "creation_date": 1506444736, "post_id": 46428535, "comment_id": 79821120, "body": "Also added a link to the actual file in there too!"}, {"owner": {"reputation": 4449, "user_id": 7681659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47bc1a3b7231505d61b7f80642bc1a14?s=128&d=identicon&r=PG&f=1", "display_name": "ashmaroli", "link": "https://stackoverflow.com/users/7681659/ashmaroli"}, "reply_to_user": {"reputation": 487, "user_id": 1199756, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d7a9202129ddd325f5dd91916dc70db4?s=128&d=identicon&r=PG", "display_name": "Mike Fogg", "link": "https://stackoverflow.com/users/1199756/mike-fogg"}, "edited": false, "score": 0, "creation_date": 1506501710, "post_id": 46428535, "comment_id": 79842384, "body": "added another update.. this time, using <code>File</code> and <code>gsub</code>"}, {"owner": {"reputation": 487, "user_id": 1199756, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d7a9202129ddd325f5dd91916dc70db4?s=128&d=identicon&r=PG", "display_name": "Mike Fogg", "link": "https://stackoverflow.com/users/1199756/mike-fogg"}, "edited": false, "score": 0, "creation_date": 1506515847, "post_id": 46428535, "comment_id": 79851683, "body": "that&#39;s the one! Thank you!"}], "tags": [], "owner": {"reputation": 4449, "user_id": 7681659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47bc1a3b7231505d61b7f80642bc1a14?s=128&d=identicon&r=PG&f=1", "display_name": "ashmaroli", "link": "https://stackoverflow.com/users/7681659/ashmaroli"}, "is_accepted": true, "score": 1, "last_activity_date": 1506501900, "last_edit_date": 1506501900, "creation_date": 1506434459, "answer_id": 46428535, "question_id": 46428471, "link": "https://stackoverflow.com/questions/46428471/parse-binary-csv-file-in-ruby/46428535#46428535", "title": "Parse binary CSV file in Ruby", "body": "<pre><code>path = Rails.root.join('data', 'mike/test-csv.csv')\nfile = \"\"\n\nFile.open(path, 'r') do |csv|\n  csv.each_line do |line|\n    file &lt;&lt; line.gsub(/\\u0000/, '')\n  end\nend\nprint file\nprint file.inspect # same as above just wraps the string in a\n                   # single line with \"\\n\" chars\n</code></pre>\n"}], "owner": {"reputation": 487, "user_id": 1199756, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d7a9202129ddd325f5dd91916dc70db4?s=128&d=identicon&r=PG", "display_name": "Mike Fogg", "link": "https://stackoverflow.com/users/1199756/mike-fogg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 617, "favorite_count": 0, "accepted_answer_id": 46428535, "answer_count": 1, "score": 1, "last_activity_date": 1506517203, "creation_date": 1506434209, "last_edit_date": 1506517203, "question_id": 46428471, "link": "https://stackoverflow.com/questions/46428471/parse-binary-csv-file-in-ruby", "title": "Parse binary CSV file in Ruby", "body": "<p>This should have been such an easy thing... buy I can't for the life of me figure out how to parse a CSV file that doesn't seem to have a specific encoding.</p>\n\n<pre><code>File.open(Rails.root.join('data', 'mike/test-csv.csv'), 'rb') { |f| f.read }\n=&gt; \"ID,\\x00Q\\x00u\\x00a\\x00n\\x00t\\x00i\\x00t\\x00y\\n\\x006\\x00e\\x005\\x004\\x009\\x001\\x00e\\x007\\x00-\\x007\\x00f\\x001\\x005\\x00-\\x004\\x001\\x007\\x00d\\x00-\\x00a\\x004\\x000\\x003\\x00-345\\x00,\\x00\\x005\\x000\\x00.\\x000\\x000\\x000\\x000\\x000\\x000\\x000\\x000\\x00\\n\"\n</code></pre>\n\n<p>Here's a gist of it, can't figure out a way to post the specific CSV.</p>\n\n<p>All I get from checking the encoding of the file is that it's in binary format, any thoughts on how I could get it into a normal csv?</p>\n\n<p>Note: This is a downloaded CSV so converting it to another encoding via opening it in excel and exporting (or something like that) is not an option :)</p>\n\n<p>Thanks!</p>\n\n<p><strong>Updating with attempted solution 1:</strong></p>\n\n<pre><code>path = Rails.root.join('data', 'mike/test-csv.csv')\nCSV.read(path, {:headers  =&gt; true, :encoding =&gt; 'utf-8'}).each do |d| \n  puts d \nend\nResult: 6e5491e7-7f15-417d-a403-345,50.00000000\n</code></pre>\n\n<p>While this is correct, it ONLY works with <code>puts</code>, for example:</p>\n\n<pre><code>CSV.read(path, {:headers  =&gt; true, :encoding =&gt; 'utf-8'}).map { |row| row }\n=&gt; [#&lt;CSV::Row \"ID\":\"\\u00006\\u0000e\\u00005\\u00004\\u00009\\u00001\\u0000e\\u00007\\u0000-\\u00007\\u0000f\\u00001\\u00005\\u0000-\\u00004\\u00001\\u00007\\u0000d\\u0000-\\u0000a\\u00004\\u00000\\u00003\\u0000-345\\u0000\" \"\\u0000Q\\u0000u\\u0000a\\u0000n\\u0000t\\u0000i\\u0000t\\u0000y\":\"\\u0000\\u00005\\u00000\\u0000.\\u00000\\u00000\\u00000\\u00000\\u00000\\u00000\\u00000\\u00000\\u0000\"&gt;]\n\nCSV.read(path, {:headers  =&gt; true, :encoding =&gt; 'utf-8'}).map(&amp;:to_s)\n=&gt; [\"\\u00006\\u0000e\\u00005\\u00004\\u00009\\u00001\\u0000e\\u00007\\u0000-\\u00007\\u0000f\\u00001\\u00005\\u0000-\\u00004\\u00001\\u00007\\u0000d\\u0000-\\u0000a\\u00004\\u00000\\u00003\\u0000-345\\u0000,\\u0000\\u00005\\u00000\\u0000.\\u00000\\u00000\\u00000\\u00000\\u00000\\u00000\\u00000\\u00000\\u0000\\n\"]\n</code></pre>\n\n<p>It's unfortunately still not the correct string :( </p>\n\n<p><strong>Final Solution (via @ashmaroli below):</strong></p>\n\n<pre><code>path = Rails.root.join('data', 'mike/test-csv.csv')\ncsv_text = ''\n\nFile.open(path, 'r') do |csv|\n  csv.each_line do |line|\n    csv_text &lt;&lt; line.gsub(/\\u0000/, '')\n  end\nend\n\nCSV.parse(csv_text, headers:true).map do |row| row end\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>[#&lt;CSV::Row \"ID\":\"6e5491e7-7f15-417d-a403-345\" \"Quantity\":\"50.00000000\"&gt;]\n</code></pre>\n\n<p><a href=\"https://gist.github.com/mikefogg/4658171df151c625e5bae58717bd1282\" rel=\"nofollow noreferrer\">Github Gist</a></p>\n\n<p><a href=\"https://nofile.io/f/ZgvXFbAyNkg/test-csv.csv\" rel=\"nofollow noreferrer\">Download Example CSV File</a></p>\n"}]