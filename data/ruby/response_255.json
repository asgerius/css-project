[{"tags": ["ruby", "page-object-gem"], "answers": [{"comments": [{"owner": {"reputation": 548, "user_id": 4701396, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0df3867dea5e05aa77615fdf2be0471b?s=128&d=identicon&r=PG&f=1", "display_name": "Bmoe", "link": "https://stackoverflow.com/users/4701396/bmoe"}, "edited": false, "score": 0, "creation_date": 1575405513, "post_id": 59077554, "comment_id": 104553952, "body": "Thanks for this. I have a similar question that I didn&#39;t think fit here . Link: <a href=\"https://stackoverflow.com/questions/59164940/cheezy-dynamic-finder-for-page-section\" title=\"cheezy dynamic finder for page section\">stackoverflow.com/questions/59164940/&hellip;</a>"}], "tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": false, "score": 2, "last_activity_date": 1574884228, "creation_date": 1574884228, "answer_id": 59077554, "question_id": 59077348, "link": "https://stackoverflow.com/questions/59077348/where-is-the-list-of-the-cheezy-page-object-dynamic-element-finders/59077554#59077554", "title": "Where is the list of the cheezy page-object dynamic element finders?", "body": "<p>The dynamic locators are included:</p>\n\n<ul>\n<li>For the PageObject by <a href=\"https://github.com/cheezy/page-object/blob/d1e64b0fcee4332787c848c10a631a35e83267b8/lib/page-object/element_locators.rb\" rel=\"nofollow noreferrer\">ElementLocators</a></li>\n<li>For the Elements by <a href=\"https://github.com/cheezy/page-object/blob/d1e64b0fcee4332787c848c10a631a35e83267b8/lib/page-object/nested_elements.rb\" rel=\"nofollow noreferrer\">NestedElements</a></li>\n</ul>\n\n<p>For the bulk of the methods, they use the shared <a href=\"https://github.com/cheezy/page-object/blob/d1e64b0fcee4332787c848c10a631a35e83267b8/lib/page-object/locator_generator.rb\" rel=\"nofollow noreferrer\">LocatorGenerator</a>. In there, the list of BASIC_ELEMENTS and ADVANCED_ELEMENTS suffixed by \"_element\" and \"elements\" are the dynamic locator methods.</p>\n\n<p>As an example, for radio elements, there is a \"radio_button\" in the ADVANCED_ELEMENTS array. The dynamic methods would then be:</p>\n\n<ul>\n<li><code>radio_button_element</code> for the first match and</li>\n<li><code>radio_button_elements</code> for all matches.</li>\n</ul>\n"}], "owner": {"reputation": 548, "user_id": 4701396, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0df3867dea5e05aa77615fdf2be0471b?s=128&d=identicon&r=PG&f=1", "display_name": "Bmoe", "link": "https://stackoverflow.com/users/4701396/bmoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574884955, "creation_date": 1574883246, "last_edit_date": 1574884955, "question_id": 59077348, "link": "https://stackoverflow.com/questions/59077348/where-is-the-list-of-the-cheezy-page-object-dynamic-element-finders", "title": "Where is the list of the cheezy page-object dynamic element finders?", "body": "<p>As a reference I am referring to <a href=\"https://github.com/cheezy/page-object/issues/203#issuecomment-37946345\" rel=\"nofollow noreferrer\">this</a> post.</p>\n\n<p>It basically says instead of saying <code>text_field(:tf_elem, id:'id1')</code>. We can do <code>text_field_element(id: 'id1')</code>. I definitely prefer the latter. It also works for multiple elements so <code>text_field_elements</code>. I can't seem to figure out how to do it for radio buttons. I'm trying <code>radio_elements</code> but not working. Undefined method. Frustratingly enough I can't find this information documented anywhere else. How do I get it to work for radio buttons and is there a \"cheat sheat\" for future reference for all the elements using the <code>text_field_element</code>/<code>text_field_elements</code> style? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "macos", "rvm", "macos-mojave"], "comments": [{"owner": {"reputation": 1231, "user_id": 2230115, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sGX51.png?s=128&g=1", "display_name": "iCodeSometime", "link": "https://stackoverflow.com/users/2230115/icodesometime"}, "edited": false, "score": 0, "creation_date": 1574883938, "post_id": 59076727, "comment_id": 104392049, "body": "You don&#39;t mention how long you&#39;re waiting. In my experience ruby is pretty big and will take a good bit of time to compile. It even warns &quot;this may take a while depending on your cpu(s)&quot;  Are you certain it&#39;s not just busy compiling?"}, {"owner": {"reputation": 45, "user_id": 9943328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/971e5236ed4b4554c86600b34fa4ab55?s=128&d=identicon&r=PG&f=1", "display_name": "syamphanindra", "link": "https://stackoverflow.com/users/9943328/syamphanindra"}, "reply_to_user": {"reputation": 1231, "user_id": 2230115, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sGX51.png?s=128&g=1", "display_name": "iCodeSometime", "link": "https://stackoverflow.com/users/2230115/icodesometime"}, "edited": false, "score": 0, "creation_date": 1574884475, "post_id": 59076727, "comment_id": 104392265, "body": "It&#39;s been more than 4hrs it&#39;s still compiling I have installed the same version before I did not face any issue before"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1574891620, "post_id": 59076727, "comment_id": 104394984, "body": "Do you have a virus scanner running on your machine?"}, {"owner": {"reputation": 45, "user_id": 9943328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/971e5236ed4b4554c86600b34fa4ab55?s=128&d=identicon&r=PG&f=1", "display_name": "syamphanindra", "link": "https://stackoverflow.com/users/9943328/syamphanindra"}, "edited": false, "score": 0, "creation_date": 1574917024, "post_id": 59076727, "comment_id": 104400432, "body": "no anti virus is there"}, {"owner": {"reputation": 45, "user_id": 9943328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/971e5236ed4b4554c86600b34fa4ab55?s=128&d=identicon&r=PG&f=1", "display_name": "syamphanindra", "link": "https://stackoverflow.com/users/9943328/syamphanindra"}, "edited": false, "score": 0, "creation_date": 1574965694, "post_id": 59076727, "comment_id": 104422966, "body": "after doing &#39;csrutil disable&#39; it worked for me in OSx 10.14 Mojave."}], "answers": [{"tags": [], "owner": {"reputation": 45, "user_id": 9943328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/971e5236ed4b4554c86600b34fa4ab55?s=128&d=identicon&r=PG&f=1", "display_name": "syamphanindra", "link": "https://stackoverflow.com/users/9943328/syamphanindra"}, "is_accepted": true, "score": 0, "last_activity_date": 1574965758, "creation_date": 1574965758, "answer_id": 59094605, "question_id": 59076727, "link": "https://stackoverflow.com/questions/59076727/rvm-install-2-2-6-hangs-in-compiling-no-progress-at-all-i-have-been-waiting/59094605#59094605", "title": "rvm install 2.2.6 hangs in compiling.... no progress at all I have been waiting for long time to get it complete", "body": "<p>after doing 'csrutil disable' it worked for me in OSx 10.14 Mojave.It is completed the compelling</p>\n"}], "owner": {"reputation": 45, "user_id": 9943328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/971e5236ed4b4554c86600b34fa4ab55?s=128&d=identicon&r=PG&f=1", "display_name": "syamphanindra", "link": "https://stackoverflow.com/users/9943328/syamphanindra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 59094605, "answer_count": 1, "score": -1, "last_activity_date": 1574965758, "creation_date": 1574880490, "last_edit_date": 1574882967, "question_id": 59076727, "link": "https://stackoverflow.com/questions/59076727/rvm-install-2-2-6-hangs-in-compiling-no-progress-at-all-i-have-been-waiting", "title": "rvm install 2.2.6 hangs in compiling.... no progress at all I have been waiting for long time to get it complete", "body": "<p>rvm install 2.2.6 is taking a lot of time to install. I have seen and tried multiple things like\nthis : [enter link description here][1]</p>\n\n<p>[1]: other stackoverflow solution <a href=\"https://stackoverflow.com/questions/26744971/rvm-install-2-1-4-hangs-on-osx\">rvm install 2.1.4 hangs on OSX</a></p>\n\n<p>But still no progress. And I am using macOS Mojave(10.14) Can anyone suggest things for this issue where the issue is happening??</p>\n\n<p>Checking requirements for osx.\nUpdating certificates bundle '/usr/local/etc/openssl@1.1/cert.pem'\nRequirements installation successful.\nInstalling Ruby from source to: /Users/syamp/.rvm/rubies/ruby-2.2.6, this may take a while depending on your cpu(s)...\nruby-2.2.6 - #downloading ruby-2.2.6, this may take a while depending on your connection...\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100 12.7M  100 12.7M    0     0  1581k      0  0:00:08  0:00:08 --:--:-- 2163k\nruby-2.2.6 - #extracting ruby-2.2.6 to /Users/syamp/.rvm/src/ruby-2.2.6.....\nruby-2.2.6 - #applying patch /Users/syamp/.rvm/patches/ruby/2.2.6/fix_installing_bundled_gems.patch.\nruby-2.2.6 - #configuring..........................................................\nruby-2.2.6 - #post-configuration.\nruby-2.2.6 - #compiling..........\\</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ajax", "session-cookies", "pry-rails"], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 11085329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/decc34508e898cbab353d607355ea4d2?s=128&d=identicon&r=PG&f=1", "display_name": "Haroon Azhar Khan", "link": "https://stackoverflow.com/users/11085329/haroon-azhar-khan"}, "is_accepted": false, "score": 0, "last_activity_date": 1575073795, "creation_date": 1575073795, "answer_id": 59112237, "question_id": 59076688, "link": "https://stackoverflow.com/questions/59076688/rails-not-updating-session-hash-on-ajax-request-without-pry/59112237#59112237", "title": "rails not updating session hash on ajax request without pry", "body": "<p>So I  got it to work. I saw  a line  on my terminal right after  the  \"at the  end  of  at to cart method\" message, which said :</p>\n\n<pre><code>\"No template found for ShoppingExperiencesController#add_to_cart, rendering head :no_content\". \n</code></pre>\n\n<p>so I  don't really know  what head :no_content is but  i thought it might have un-do/save  changes made to session by my method. so at the end  of  add_to_cart method i redirected to  index page with </p>\n\n<pre><code>redirect_to  '/' \n</code></pre>\n\n<p>still quite  not  sure  why template  not  being  found un-do my changes  to hash, if anyone  could share  some  light  over this in the  comments  that'll be  great! :)</p>\n"}], "owner": {"reputation": 71, "user_id": 11085329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/decc34508e898cbab353d607355ea4d2?s=128&d=identicon&r=PG&f=1", "display_name": "Haroon Azhar Khan", "link": "https://stackoverflow.com/users/11085329/haroon-azhar-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575073795, "creation_date": 1574880340, "last_edit_date": 1574909532, "question_id": 59076688, "link": "https://stackoverflow.com/questions/59076688/rails-not-updating-session-hash-on-ajax-request-without-pry", "title": "rails not updating session hash on ajax request without pry", "body": "<p>I'm trying  to develop a  cart system(for a practice e-commerce project) on rails  6.</p>\n\n<p>The  code(explaination):</p>\n\n<p>I have a link with class attribute \"add_to_cart_link\" then I  use a  jquery to select  the elements with the mentioned class and set a on click listener on them. The click listener send an ajax request to 'shopping_experience/add_to_cart'.The control then moves to \"add_to_cart\" method inside  shoppingExperience controller. </p>\n\n<p>the problem is that even though the  add_to_cart  method  is executed, it  doesn't update my session hash unless  i use  \"binding.pry\"(this is a feature  of pry gem which is used  for debugging). during  pry whenever  check the state  of the  hash(session hash)  it's always  what its suppose to be and  changed  when i add some  thing to cart.</p>\n\n<p>here is  my  view template(index.html.erb):</p>\n\n<pre><code>&lt;p id=\"notice\"&gt;&lt;%= notice %&gt;&lt;/p&gt;\n&lt;%= link_to 'view cart', display_cart_path %&gt;\n&lt;h1&gt;Items&lt;/h1&gt;\n&lt;table&gt;\n&lt;thead&gt;\n&lt;tr&gt;\n  &lt;th&gt;Name&lt;/th&gt;\n  &lt;th&gt;Price&lt;/th&gt;\n  &lt;th&gt;Quantity&lt;/th&gt;\n  &lt;th&gt;Category&lt;/th&gt;\n  &lt;th colspan=\"3\"&gt;&lt;/th&gt;\n&lt;/tr&gt;\n&lt;/thead&gt;\n\n &lt;tbody&gt;\n  &lt;% @items.each do |item| %&gt;\n    &lt;tr&gt;\n      &lt;td&gt;&lt;%= item.name %&gt;&lt;/td&gt;\n       &lt;td&gt;&lt;%= item.price %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= item.quantity %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= item.category.title %&gt;&lt;/td&gt;\n\n\n    &lt;td&gt;&lt;%= link_to 'Show', item %&gt;&lt;/td&gt;\n    &lt;td&gt; &lt;a class=\"add_to_cart_link\"   data-item_id=&lt;%=item.id %&gt; href=\"#\"&gt; add to cart button&lt;/a&gt; \n    &lt;/td&gt;\n    &lt;td&gt;&lt;%= link_to 'Edit', edit_item_path(item) %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= link_to 'Destroy', item, method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>\n</p>\n\n<p><br></p>\n\n\n\n<p>here  is my custom (myjs.js.erb)</p>\n\n<pre><code>$( document ).ready(function() {\n  $(document).on('click', 'a.add_to_cart_link', function() {\n    console.log(this);\n    console.log($('meta[name=\"csrf-token\"]').attr('content'));\n    var id = $(this).attr(\"data-item_id\")\n    console.log(id)\n    $.ajax({\n        method: \"POST\",\n        headers: {'X-CSRF-Token': $('meta[name=\"csrf-token\"]').attr('content')},\n         url: 'shopping_experience/add_to_cart',\n         data: { item_id: id },     \n    })\n  });\n});\n</code></pre>\n\n<p>add_to cart method:</p>\n\n<pre><code>def add_to_cart\n  if !session[:current_cart] \n    session[:current_cart] =  {:shex_id =&gt; session[:current_cart_id] } \n  end\n\n  #checks if session hash's current cart key doesn't have params[:item_id] key, value pair \n  if  !session[:current_cart].key?(params[:item_id]) \n    # set {units: 1}  as params[item_id] key's  value \n\n    session[:current_cart][params[:item_id]] = {}\n    session[:current_cart][params[:item_id]][:quantity] = 1  \n  else\n    #else  increment  value  of  quantity\n\n    session[:current_cart][params[:item_id]][\"quantity\"] = session[:current_cart][params[:item_id]][\"quantity\"] + 1\n    #ShexItem.create(item_id: params[:item_id], shopping_experience_id: session[:current_cart_id] ) \n  end\n\n  binding.pry\n\n  puts(' at to cart method end')\nend\n</code></pre>\n\n<p>so  if remove  the  the bindin.pry from the end my session has isn't changed at all and i do get a \"at the end of add  to cart method\" message  in my terminal(even when i  remove the  binding.pry). this  means that the add to card  method is  indeed  called  but  my session doesn't get updated  and if  use  pry to debug whats wrong  it starts to work. I feel it  might be related using  an ajax  request because  maybe the session doesnt  get  updated  or  refreshed . i really am struggling  with this can anyone help?</p>\n\n<p>here is the github repo: <a href=\"https://github.com/HaroonAzhar/ship-shop\" rel=\"nofollow noreferrer\">https://github.com/HaroonAzhar/ship-shop</a> (i think the repo is public),</p>\n\n<p>if anyone wants to look up the code more.</p>\n"}, {"tags": ["ruby", "angular", "watir", "page-object-gem"], "answers": [{"tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 2, "last_activity_date": 1574880792, "creation_date": 1574880792, "answer_id": 59076811, "question_id": 59076510, "link": "https://stackoverflow.com/questions/59076510/how-to-access-custom-element-with-hypen-in-name-using-ruby-page-object-gem/59076811#59076811", "title": "How to access custom element with hypen in name using Ruby Page-Object Gem", "body": "<p>The first argument in <code>#element</code> is used as the method name for a locating an element in Watir. For example:</p>\n\n<pre><code>element('element', id: 'id1') #=&gt; translates to browser.element(id: 'id1')\nelement('div', id: 'id1') #=&gt; translates to browser.div(id: 'id1')\n</code></pre>\n\n<p>With 'ng-select', it is blindly applied resulting in running the following. There is an exception since <code>#ng</code> does not exist.</p>\n\n<pre><code>browser.ng - select(id: 'id1')\n</code></pre>\n\n<p>Technically, the first argument is the corresponding Watir method, not just a tag name. If you want a custom tag name, pass it as part of the locator:</p>\n\n<pre><code>element(:element, tag_name: 'ng-select', id: 'id1')\n</code></pre>\n"}], "owner": {"reputation": 548, "user_id": 4701396, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0df3867dea5e05aa77615fdf2be0471b?s=128&d=identicon&r=PG&f=1", "display_name": "Bmoe", "link": "https://stackoverflow.com/users/4701396/bmoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 59076811, "answer_count": 1, "score": 1, "last_activity_date": 1574880792, "creation_date": 1574879450, "question_id": 59076510, "link": "https://stackoverflow.com/questions/59076510/how-to-access-custom-element-with-hypen-in-name-using-ruby-page-object-gem", "title": "How to access custom element with hypen in name using Ruby Page-Object Gem", "body": "<p>I have some angular elements and I want to map them. Trying to do it like so</p>\n\n<p><code>element('ng-select', id: 'id1')</code></p>\n\n<p>Getting an error about Watir</p>\n\n<p><code>NameError: undefined local variable or method 'ng' for #&lt;Watir::HTMLElement:0x04defcc8&gt;</code></p>\n\n<p>That's right. Error says '<code>ng</code>', NOT '<code>ng-select</code>'. What gives? How can I specify that the <code>ng-select</code> tag? I know I can replace <code>ng-select</code> with <code>element</code> but that seems too generic for me. The page-object gem already doesn't have native support for angular tags so I'd like to be descriptive.</p>\n"}, {"tags": ["ruby", "cucumber", "pageobjects", "page-object-gem"], "answers": [{"tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 3, "last_activity_date": 1574877982, "creation_date": 1574877982, "answer_id": 59076103, "question_id": 59075260, "link": "https://stackoverflow.com/questions/59075260/passing-value-to-one-page-object-from-another-page-object/59076103#59076103", "title": "Passing value to one Page Object from Another Page Object", "body": "<p>The current approach will determine the <code>coverage</code> when the class is compiled. I think you want to determine the value when the object is initialized.</p>\n\n<p>I would initialize a SectionA instance within SectionB:</p>\n\n<pre><code>class SectionB\n  include PageObject\n\n  def coverage\n    SectionA.new(root.browser).coverage_value\n  end\n\n  def element_method\n    element('element', id: coverage)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 548, "user_id": 4701396, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0df3867dea5e05aa77615fdf2be0471b?s=128&d=identicon&r=PG&f=1", "display_name": "Bmoe", "link": "https://stackoverflow.com/users/4701396/bmoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 59076103, "answer_count": 1, "score": 0, "last_activity_date": 1574877982, "creation_date": 1574874502, "question_id": 59075260, "link": "https://stackoverflow.com/questions/59075260/passing-value-to-one-page-object-from-another-page-object", "title": "Passing value to one Page Object from Another Page Object", "body": "<p>Using ruby and cheezy page-object gem (along with cucumber).</p>\n\n<p>I have a <code>page_section</code> (section B) who's elements will vary based off the value of another <code>page_section</code> (section A). I can access each <code>page_section</code> fine but I'm trying to pass the value from section B to section A and I can't seem to make it work. I have a variable in section B (not sure of any better way to do it) that I initialize to the value of a span from section A. This doesn't work and gives a <code>NoMethodError</code>. Can anyone help me with what I'm trying to do here? I know the title says Page Objects (and technically they are page objects) but I'm going to be using them as <code>page_sections</code> of the same root page.</p>\n\n<p>Section B code</p>\n\n<pre><code>class SectionB\n  include PageObject\n\n  coverage = on(SectionA).coverage_value\n\n  def element_method\n\n    element('element', id: coverage)\n  end\n\n end\n</code></pre>\n\n<p>Section A code</p>\n\n<pre><code>class SectionA\n  include PageObject\n\n  def coverage_value\n    span_element(id: 'coverage-id')\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby"], "comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1574875142, "post_id": 59075117, "comment_id": 104388250, "body": "Could you show an example of your unsorted and sorted data?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1574875163, "post_id": 59075117, "comment_id": 104388255, "body": "<code>@versions.sort_by! { |version| [version.release_year, version.country_order] }</code> should work. And in your view simply <code>@versions.each do |version|</code> since the controller already sorted the array."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1574875617, "post_id": 59075117, "comment_id": 104388462, "body": "BTW <code>[master.country_code, &#39;UK&#39;, &#39;US&#39;, &#39;DE&#39;, &#39;FR&#39;, &#39;JP&#39;].index(country_code)</code> is a more concise way to express the country order."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1574877582, "post_id": 59075117, "comment_id": 104389380, "body": "You might want to look into <a href=\"https://guides.rubyonrails.org/layouts_and_rendering.html#rendering-collections\" rel=\"nofollow noreferrer\">rendering a collection of partials</a>. <code>&lt;%= render partial: &#39;version_card&#39;, collection: @versions, as: :version %&gt;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 0, "last_activity_date": 1574877439, "creation_date": 1574877439, "answer_id": 59075982, "question_id": 59075117, "link": "https://stackoverflow.com/questions/59075117/is-there-a-way-to-sort-countries-in-rails-based-on-a-particular-order/59075982#59075982", "title": "Is there a way to sort countries in Rails based on a particular order?", "body": "<p>Building on <a href=\"https://stackoverflow.com/questions/59075117/is-there-a-way-to-sort-countries-in-rails-based-on-a-particular-order#comment104388255_59075117\">Stefan's comment</a>, we can first sort by the release year, then a special country order, then by the country itself.</p>\n\n<pre><code>class Version\n  SPECIAL_COUNTRY_ORDER = [\"UK\", \"US\", \"DE\", \"FR\", \"JP\"]\n\n  attr_accessor :country_code, :release_year\n\n  def initialize(country_code:, release_year:)\n    @country_code = country_code\n    @release_year = release_year\n  end\n\n  def special_country_order\n    SPECIAL_COUNTRY_ORDER.index(country_code) || SPECIAL_COUNTRY_ORDER.size\n  end\n\n  def to_s\n    \"#{country_code} #{release_year}\"\n  end\nend\n\nversions = [\n  Version.new(country_code: \"DE\", release_year: 1969),\n  Version.new(country_code: \"UK\", release_year: 1969),\n  Version.new(country_code: \"JP\", release_year: 1999),\n  Version.new(country_code: \"AA\", release_year: 1999),\n  Version.new(country_code: \"BB\", release_year: 1999),\n  Version.new(country_code: \"ZZ\", release_year: 1999),\n  Version.new(country_code: \"BB\", release_year: 2000)\n]\n\nputs versions.sort_by { |version|\n  [version.release_year, version.special_country_order, version.country_code]\n}\n</code></pre>\n\n<p>If a country doesn't have a special country order it gets a number greater than any of the special countries. Since it's greater it sorts below them. Since it's the same number the sort moves on to the next sort key: the country code itself.</p>\n\n<p>Here's what it's sorting by.</p>\n\n<pre><code>[1969, 2, \"DE\"]\n[1969, 0, \"UK\"]\n[1999, 4, \"JP\"]\n[1999, 5, \"AA\"]\n[1999, 5, \"BB\"]\n[1999, 5, \"ZZ\"]\n[2000, 5, \"BB\"]\n</code></pre>\n\n<p>And the result.</p>\n\n<pre><code>UK 1969\nDE 1969\nJP 1999\nAA 1999\nBB 1999\nZZ 1999\nBB 2000\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 12447268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee00ffe9683f0f370e803846ccfdbaf2?s=128&d=identicon&r=PG&f=1", "display_name": "David Gordon", "link": "https://stackoverflow.com/users/12447268/david-gordon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 59075982, "answer_count": 1, "score": 1, "last_activity_date": 1574944179, "creation_date": 1574873971, "last_edit_date": 1574874680, "question_id": 59075117, "link": "https://stackoverflow.com/questions/59075117/is-there-a-way-to-sort-countries-in-rails-based-on-a-particular-order", "title": "Is there a way to sort countries in Rails based on a particular order?", "body": "<p>I am trying to order an array in Rails by countries but I would like certain countries to feature higher than others e.g. United Kingdom at 1, United States at 2, Germany at 3, etc.</p>\n\n<p>The extra bit of complication is that I first need to order by year. So for example if a record was created in 1969 in UK I want that to be first followed by a record in 1969 in Germany.</p>\n\n<p>I tried the following but I do not think I am even close:</p>\n\n<p>My View:</p>\n\n<pre><code>&lt;% @versions.sort_by do |version | version.country_order %&gt;\n   &lt;%= render 'version_card', version: version %&gt;\n &lt;% end %&gt;\n</code></pre>\n\n<p>In the Version model I added this method:</p>\n\n<pre><code>def country_order\n    return 0 if master.country_code == country_code\n    return 1 if country_code == \"UK\"\n    return 2 if country_code == \"US\"\n    return 3 if country_code == \"DE\"\n    return 4 if country_code == \"FR\"\n    return 5 if country_code == \"JP\"\n end\n</code></pre>\n\n<p>And finally in the Master controller (as the Master shows all of the Versions available):</p>\n\n<pre><code>def show\n @versions = Kaminari.paginate_array(versions_search).page(params[:page]).per(VERSIONS_PER_ROW)\n @versions.sort_by! { |version | version.release_year }\nend\n</code></pre>\n\n<p>Thank you</p>\n"}, {"tags": ["arrays", "ruby", "queue", "each", "block"], "comments": [{"owner": {"reputation": 1892, "user_id": 3158810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ebf9e065f654642fecfee399b439030?s=128&d=identicon&r=PG&f=1", "display_name": "G4143", "link": "https://stackoverflow.com/users/3158810/g4143"}, "edited": false, "score": 0, "creation_date": 1574871616, "post_id": 59074362, "comment_id": 104386416, "body": "why doesn&#39;t your queue function return []? Why queue = []?"}, {"owner": {"reputation": 129, "user_id": 10663676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e53116ab119e0bb4c481ff8829db729?s=128&d=identicon&r=PG&f=1", "display_name": "kel.o", "link": "https://stackoverflow.com/users/10663676/kel-o"}, "reply_to_user": {"reputation": 1892, "user_id": 3158810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ebf9e065f654642fecfee399b439030?s=128&d=identicon&r=PG&f=1", "display_name": "G4143", "link": "https://stackoverflow.com/users/3158810/g4143"}, "edited": false, "score": 0, "creation_date": 1574872517, "post_id": 59074362, "comment_id": 104386876, "body": "thats a good observation. no particular reason."}, {"owner": {"reputation": 2560, "user_id": 5112122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206053108358704/picture?type=large", "display_name": "Horacio", "link": "https://stackoverflow.com/users/5112122/horacio"}, "edited": false, "score": 1, "creation_date": 1574872848, "post_id": 59074362, "comment_id": 104387057, "body": "maybe you can check how to do a memoization with ruby."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1574873806, "post_id": 59074362, "comment_id": 104387580, "body": "<i>&quot;I have a method [...] that returns an empty array. I am having trouble pushing modified objects to this array&quot;</i> \u2013 that&#39;s because your method creates a new array every time it is called. You probably want to return the same array instance instead."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1574874773, "post_id": 59074362, "comment_id": 104388074, "body": "<i>&quot;[...] <code>Cell</code> Class, which inherits from <code>Board</code>&quot;</i> \u2013 that sounds odd. Is a cell actually a special kind of board? And does it make sense that a cell knows about queues?"}], "answers": [{"tags": [], "owner": {"reputation": 129, "user_id": 10663676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e53116ab119e0bb4c481ff8829db729?s=128&d=identicon&r=PG&f=1", "display_name": "kel.o", "link": "https://stackoverflow.com/users/10663676/kel-o"}, "is_accepted": true, "score": 1, "last_activity_date": 1574971250, "creation_date": 1574971250, "answer_id": 59095510, "question_id": 59074362, "link": "https://stackoverflow.com/questions/59074362/pushing-objects-into-an-array-is-returning-an-empty-array/59095510#59095510", "title": "Pushing objects into an array is returning an empty array", "body": "<p>Adding an instance variable <code>queue</code> to the board class solved this</p>\n\n<pre><code>class Board\n  def initialize(live_cell_count, queue)\n    @live_cell_count = live_cell_count\n    @queue = queue\n  end\n\n  def queue\n    @queue\n  end\n</code></pre>\n\n<p>Inserting <code>queue.push(cell)</code> in the conditional successfully appends each cell to the <code>queue</code> array.</p>\n\n<pre><code>def rules(cell)\n    if something\n      cell.queue_for_birth\n      @queue.push(cell)\n    else something_else\n      cell.queue_for_death\n      @queue.push(cell)\n    end\n  end\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 10663676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e53116ab119e0bb4c481ff8829db729?s=128&d=identicon&r=PG&f=1", "display_name": "kel.o", "link": "https://stackoverflow.com/users/10663676/kel-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 59095510, "answer_count": 1, "score": 0, "last_activity_date": 1574971250, "creation_date": 1574871306, "question_id": 59074362, "link": "https://stackoverflow.com/questions/59074362/pushing-objects-into-an-array-is-returning-an-empty-array", "title": "Pushing objects into an array is returning an empty array", "body": "<h2>Problem</h2>\n\n<p>I have a method called queue, belonging to the <code>Board</code> Class that returns an empty array. I am having trouble pushing modified objects to this array. Currently it returns an empty array.</p>\n\n<pre><code>def queue\n  queue = []\nend\n</code></pre>\n\n<h2>Functionality Explained</h2>\n\n<p>I have a <code>rules</code> method, that belongs to the <code>Board</code> Class that conditionally calls <code>queue_for_birth</code> or <code>queue_for_death</code></p>\n\n<pre><code>def rules(cell)\n    if something\n      cell.queue_for_birth\n    else something_else\n      cell.queue_for_death\n    end\n  end\n</code></pre>\n\n<p>This method is being called multiple times in an each block contained in the <code>game_logic</code> method also belonging to the <code>Board</code> Class. \nEach time <code>rules</code> is called, and it <code>queues_for_birth</code> or <code>queues_for_death</code>, it should add that instance of cell to an array called queue</p>\n\n<pre><code>def game_logic(cells)\n    cells.each_with_index do |cell,index|\n      if index == 0\n        rules(cell) #push to the queue\n      end\n      if index == 1\n        rules(cell) #push to the queue\n      end\n    ...\n\n</code></pre>\n\n<p>Here is where the logic that adds cells to a queue lives, it belongs to the <code>Cell</code> Class, which inherits from <code>Board</code></p>\n\n<pre><code>def queue_for_birth(queue)\n  @will_survive = true\n  queue &lt;&lt; self\n end\n</code></pre>\n\n<p>However, whenever I call board.queue, an empty array is returned.\n<code>=&gt; []</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 8966, "user_id": 1842294, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/6d25f036774c988f92c5acc6a629fbf9?s=128&d=identicon&r=PG", "display_name": "Seth", "link": "https://stackoverflow.com/users/1842294/seth"}, "edited": false, "score": 0, "creation_date": 1574866811, "post_id": 59072982, "comment_id": 104383774, "body": "What does <code>test.rb</code> look like?"}], "answers": [{"comments": [{"owner": {"reputation": 487, "user_id": 7847797, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-k7pSuJNJeV4/AAAAAAAAAAI/AAAAAAAAApY/6cIE0jxiCM8/photo.jpg?sz=128", "display_name": "jacques Mesnet", "link": "https://stackoverflow.com/users/7847797/jacques-mesnet"}, "edited": false, "score": 0, "creation_date": 1574868580, "post_id": 59073087, "comment_id": 104384767, "body": "It&#39;s exactly what I&#39;m looking for, but I have a problem to pass params generated on my file to the controller   For example:   The line &quot; print result.body &quot; is working, so I&#39;ve try to create a params &quot; @body = result.body &quot; but I cannot acces it into my controller. Any Idea ?"}, {"owner": {"reputation": 8966, "user_id": 1842294, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/6d25f036774c988f92c5acc6a629fbf9?s=128&d=identicon&r=PG", "display_name": "Seth", "link": "https://stackoverflow.com/users/1842294/seth"}, "reply_to_user": {"reputation": 487, "user_id": 7847797, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-k7pSuJNJeV4/AAAAAAAAAAI/AAAAAAAAApY/6cIE0jxiCM8/photo.jpg?sz=128", "display_name": "jacques Mesnet", "link": "https://stackoverflow.com/users/7847797/jacques-mesnet"}, "edited": false, "score": 0, "creation_date": 1574869197, "post_id": 59073087, "comment_id": 104385068, "body": "@jacquesMesnet I&#39;d have to see the code to understand more, but it sounds like you need to define <code>attr_reader :body</code> within the class so that the instance variable can be read within the scope of its caller."}, {"owner": {"reputation": 487, "user_id": 7847797, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-k7pSuJNJeV4/AAAAAAAAAAI/AAAAAAAAApY/6cIE0jxiCM8/photo.jpg?sz=128", "display_name": "jacques Mesnet", "link": "https://stackoverflow.com/users/7847797/jacques-mesnet"}, "edited": false, "score": 1, "creation_date": 1574870171, "post_id": 59073087, "comment_id": 104385612, "body": "I have remade a answer with the code that I&#39;m trying to run bellow"}], "tags": [], "owner": {"reputation": 8966, "user_id": 1842294, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/6d25f036774c988f92c5acc6a629fbf9?s=128&d=identicon&r=PG", "display_name": "Seth", "link": "https://stackoverflow.com/users/1842294/seth"}, "is_accepted": true, "score": 2, "last_activity_date": 1574867093, "creation_date": 1574867093, "answer_id": 59073087, "question_id": 59072982, "link": "https://stackoverflow.com/questions/59072982/pass-a-params-from-a-file-called-into-a-controller/59073087#59073087", "title": "Pass a params from a file called into a controller", "body": "<p>Given a test file such as the following:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># your file\nclass Test\n  def initialize\n    # ...\n  end\n\n  def do_something\n    # ...\n  end\nend\n</code></pre>\n\n<p>All you need to do is require said file and then invoke whatever it is you need to:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># your controller\nrequire \"path/to/file\"\nclass TestController &lt; ApplicationController\n  def test_sms\n    test = Test.new\n    test.do_something\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1574871468, "post_id": 59074003, "comment_id": 104386350, "body": "Instead adding additional information through an answer or comment you should <a href=\"https://stackoverflow.com/posts/59072982/edit\">edit</a> your original question."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1574871627, "post_id": 59074003, "comment_id": 104386419, "body": "<code>@body</code> in <code>TestController</code> is not the same as <code>@body</code> in <code>Test</code>. You should add an attribute reader to <code>Test</code> to read from the attribute. <code>attr_reader :body</code> just under <code>class Test</code>. Then in the controller use <code>print test.body</code>."}, {"owner": {"reputation": 487, "user_id": 7847797, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-k7pSuJNJeV4/AAAAAAAAAAI/AAAAAAAAApY/6cIE0jxiCM8/photo.jpg?sz=128", "display_name": "jacques Mesnet", "link": "https://stackoverflow.com/users/7847797/jacques-mesnet"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1574871892, "post_id": 59074003, "comment_id": 104386559, "body": "Ok thanks for your answer, I&#39;ve edit my post as you suggest to be cleaner. I test your solution right now, but I&#39;m not really sure to understand it. I&#39;m gonna look what is attr_reader on gg"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 1, "creation_date": 1574872326, "post_id": 59074003, "comment_id": 104386782, "body": "See: <a href=\"https://stackoverflow.com/questions/5046831/why-use-rubys-attr-accessor-attr-reader-and-attr-writer\" title=\"why use rubys attr accessor attr reader and attr writer\">stackoverflow.com/questions/5046831/&hellip;</a>"}, {"owner": {"reputation": 487, "user_id": 7847797, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-k7pSuJNJeV4/AAAAAAAAAAI/AAAAAAAAApY/6cIE0jxiCM8/photo.jpg?sz=128", "display_name": "jacques Mesnet", "link": "https://stackoverflow.com/users/7847797/jacques-mesnet"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1574873167, "post_id": 59074003, "comment_id": 104387233, "body": "This was more usefull to explain my particular case : <a href=\"https://stackoverflow.com/questions/10133172/rails-attr-accessor-undefined-method-in-the-setter\" title=\"rails attr accessor undefined method in the setter\">stackoverflow.com/questions/10133172/&hellip;</a>"}, {"owner": {"reputation": 487, "user_id": 7847797, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-k7pSuJNJeV4/AAAAAAAAAAI/AAAAAAAAApY/6cIE0jxiCM8/photo.jpg?sz=128", "display_name": "jacques Mesnet", "link": "https://stackoverflow.com/users/7847797/jacques-mesnet"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1574873187, "post_id": 59074003, "comment_id": 104387241, "body": "Thanks @3limin4t0r !!"}], "tags": [], "owner": {"reputation": 487, "user_id": 7847797, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-k7pSuJNJeV4/AAAAAAAAAAI/AAAAAAAAApY/6cIE0jxiCM8/photo.jpg?sz=128", "display_name": "jacques Mesnet", "link": "https://stackoverflow.com/users/7847797/jacques-mesnet"}, "is_accepted": false, "score": 0, "last_activity_date": 1574871368, "last_edit_date": 1574871368, "creation_date": 1574870115, "answer_id": 59074003, "question_id": 59072982, "link": "https://stackoverflow.com/questions/59072982/pass-a-params-from-a-file-called-into-a-controller/59074003#59074003", "title": "Pass a params from a file called into a controller", "body": "<p>According to @Seth answer, the good solution looks like that. But I cannot access to the params @body created on the file.rb through the controller. Any idea ?</p>\n\n<p>My file :</p>\n\n<pre><code>class Test\n  def initialize\n    # ...\n  end\n\n  def do_something\n    @body = \"Test string params\"\n  end\nend\n</code></pre>\n\n<p>And my controller : </p>\n\n<pre><code>require \"path/to/file\"\nclass TestController &lt; ApplicationController\n  def test_sms\n    test = Test.new\n    test.do_something\n    print @body\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 487, "user_id": 7847797, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-k7pSuJNJeV4/AAAAAAAAAAI/AAAAAAAAApY/6cIE0jxiCM8/photo.jpg?sz=128", "display_name": "jacques Mesnet", "link": "https://stackoverflow.com/users/7847797/jacques-mesnet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 59073087, "answer_count": 2, "score": 1, "last_activity_date": 1574873297, "creation_date": 1574866717, "last_edit_date": 1574873297, "question_id": 59072982, "link": "https://stackoverflow.com/questions/59072982/pass-a-params-from-a-file-called-into-a-controller", "title": "Pass a params from a file called into a controller", "body": "<p>I would like to know how I can run a file.rb directly into controller.\nFor example, I have followed the tuto for Twilio, and it's working using the command : \"ruby test.rb\" into terminal to run the file test.rb into the app folder. </p>\n\n<p>But I don't know how I can run this file directly into my controller. For example :</p>\n\n<pre><code>TestController.rb \n def test_sms\n  run \"test.rb\"\n end\nend\n</code></pre>\n\n<p><strong>UPDATE</strong> </p>\n\n<p>According to @Seth answer, the good solution looks like that. </p>\n\n<p>My file :</p>\n\n<pre><code>class Test\n  attr_accessor :body\n\n  def initialize\n    # ...\n  end\n\n  def do_something\n    self.body = \"Test string params\"\n  end\nend\n</code></pre>\n\n<p>And my controller : </p>\n\n<pre><code>require \"path/to/file\"\nclass TestController &lt; ApplicationController\n  def test_sms\n    test = Test.new\n    test.do_something\n    body = test.body\n    print body\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-5", "nested-attributes", "accepts-nested-attributes"], "comments": [{"owner": {"reputation": 1521, "user_id": 1274846, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/048371ccb94bbd3aae9ac0ca20c0a31c?s=128&d=identicon&r=PG", "display_name": "Trinculo", "link": "https://stackoverflow.com/users/1274846/trinculo"}, "edited": false, "score": 0, "creation_date": 1574865025, "post_id": 59071882, "comment_id": 104382703, "body": "Do you actually see anything in the <code>ActiveRecord::Associations::CollectionProxy</code> or is it empty?"}, {"owner": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "reply_to_user": {"reputation": 1521, "user_id": 1274846, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/048371ccb94bbd3aae9ac0ca20c0a31c?s=128&d=identicon&r=PG", "display_name": "Trinculo", "link": "https://stackoverflow.com/users/1274846/trinculo"}, "edited": false, "score": 0, "creation_date": 1574865157, "post_id": 59071882, "comment_id": 104382781, "body": "Hi @Trinculo, I do see data."}], "answers": [{"comments": [{"owner": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "edited": false, "score": 0, "creation_date": 1574866607, "post_id": 59072796, "comment_id": 104383655, "body": "Thanks @Trinculo, that makes sense. I will go with your approach 2, as i want to invalidate the records in case a condition fails. i think with after_create it would be a bit tricky."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 2, "creation_date": 1574866655, "post_id": 59072796, "comment_id": 104383688, "body": "I&#39;m guessing you mean <a href=\"https://ruby-doc.org/core-2.6.5/Enumerable.html#method-i-select\" rel=\"nofollow noreferrer\"><code>Enumerable#select</code></a>, not <a href=\"https://ruby-doc.org/core-2.6.5/Enumerable.html#method-i-map\" rel=\"nofollow noreferrer\"><code>Enumerable#map</code></a>. <code>dashboard_values.select { |dashboard_value| dashboard_value.filter_type == 0 }</code>"}, {"owner": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "edited": false, "score": 0, "creation_date": 1574868241, "post_id": 59072796, "comment_id": 104384602, "body": "Yes, I ended up using select. Thanks for awesome help guys."}], "tags": [], "owner": {"reputation": 1521, "user_id": 1274846, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/048371ccb94bbd3aae9ac0ca20c0a31c?s=128&d=identicon&r=PG", "display_name": "Trinculo", "link": "https://stackoverflow.com/users/1274846/trinculo"}, "is_accepted": true, "score": 2, "last_activity_date": 1574867123, "last_edit_date": 1574867123, "creation_date": 1574866173, "answer_id": 59072796, "question_id": 59071882, "link": "https://stackoverflow.com/questions/59071882/access-childrens-using-where-condition-for-nested-attributes/59072796#59072796", "title": "Access childrens using where condition for nested attributes", "body": "<p>I believe this is not working because of the <code>before_save</code> action.  When you use <code>where</code> it is performing a database query, but because you are querying the database before it saves, nothing is returned.</p>\n\n<p>I would say you have 2 options:</p>\n\n<ol>\n<li>Convert it to an <code>after_save</code></li>\n<li>Use <code>Enumerable#select</code> instead:</li>\n</ol>\n\n<pre><code>Rails.logger.info self.dashboard_filter_values.select { |filter| filter.filter_type == 1 }\n</code></pre>\n"}], "owner": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 59072796, "answer_count": 1, "score": 1, "last_activity_date": 1574867123, "creation_date": 1574863201, "last_edit_date": 1574865290, "question_id": 59071882, "link": "https://stackoverflow.com/questions/59071882/access-childrens-using-where-condition-for-nested-attributes", "title": "Access childrens using where condition for nested attributes", "body": "<p>I have the following relationship set, dashboard filter values have a column called filter_type which can have value 1 or 0. </p>\n\n<pre><code>class DashboardFilterValue &lt; ApplicationRecord\n  belongs_to :dashboard_filter\nend\n</code></pre>\n\n<pre><code>class DashboardFilter &lt; ApplicationRecord\n  has_many :dashboard_filter_values, dependent: :destroy\n  accepts_nested_attributes_for :dashboard_filter_values\n  before_save :check_parameter_length\n\n  def check_parameter_length\n    Rails.logger.info self.dashboard_filter_values.inspect #prints the ActiveRecord::Associations::CollectionProxy\n    Rails.logger.info self.dashboard_filter_values.where(:filter_type =&gt; 0) #does not print anything\n  end\nend\n</code></pre>\n\n<p>In the <code>before_save</code> callback,\nWhen I use <code>self.dashboard_filter_values.inspect</code>, this prints\n<code>ActiveRecord::Associations::CollectionProxy</code>.</p>\n\n<p>But <code>self.dashboard_filter_values.where(:filter_type =&gt; 0)</code> <strong>does not</strong> print anything, even when there are records which satisfy the condition.</p>\n\n<p>In the <code>before_save</code> callback, how can I use the where condition to filter values that I want.</p>\n\n<p>Any help in this would be really great. Thanks.</p>\n"}, {"tags": ["c++", "ruby", "macos", "rubygems"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1574864616, "post_id": 59071881, "comment_id": 104382438, "body": "I&#39;m using Ruby 2.6.5 (as you are) and successfully installed sassc-2.2.1.gem.  I have Xcode 11.2.1 installed."}, {"owner": {"reputation": 5139, "user_id": 954422, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2542652a616dc8d395194890b4f92a0d?s=128&d=identicon&r=PG", "display_name": "viplezer", "link": "https://stackoverflow.com/users/954422/viplezer"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1574864659, "post_id": 59071881, "comment_id": 104382471, "body": "All the same here, I suspect that something got misconfigured on my machine :/"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1574864737, "post_id": 59071881, "comment_id": 104382530, "body": "Something very wrong with your toolchain there. Have you tried reinstalling it?"}, {"owner": {"reputation": 5139, "user_id": 954422, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2542652a616dc8d395194890b4f92a0d?s=128&d=identicon&r=PG", "display_name": "viplezer", "link": "https://stackoverflow.com/users/954422/viplezer"}, "edited": false, "score": 0, "creation_date": 1574865060, "post_id": 59071881, "comment_id": 104382721, "body": "I reinstalled both XCode and Command Line tools, but nothing helped so far"}, {"owner": {"reputation": 5139, "user_id": 954422, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2542652a616dc8d395194890b4f92a0d?s=128&d=identicon&r=PG", "display_name": "viplezer", "link": "https://stackoverflow.com/users/954422/viplezer"}, "edited": false, "score": 0, "creation_date": 1574865180, "post_id": 59071881, "comment_id": 104382802, "body": "I had some strange symlinks in my /usr/local/include folder. I removed all of them and the issue seems to be solved"}], "answers": [{"comments": [{"owner": {"reputation": 4636, "user_id": 340354, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/ee3aedbe2f83c480b993af431c15a5b7?s=128&d=identicon&r=PG", "display_name": "scrrr", "link": "https://stackoverflow.com/users/340354/scrrr"}, "edited": false, "score": 0, "creation_date": 1587163657, "post_id": 59072909, "comment_id": 108411588, "body": "Thank you! This also solves my non-ruby/c++ conan dependency build problems."}], "tags": [], "owner": {"reputation": 5139, "user_id": 954422, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2542652a616dc8d395194890b4f92a0d?s=128&d=identicon&r=PG", "display_name": "viplezer", "link": "https://stackoverflow.com/users/954422/viplezer"}, "is_accepted": true, "score": 5, "last_activity_date": 1574866490, "creation_date": 1574866490, "answer_id": 59072909, "question_id": 59071881, "link": "https://stackoverflow.com/questions/59071881/problems-with-c-and-gems-on-osx-catalina/59072909#59072909", "title": "Problems with C++ and gems on OSX Catalina", "body": "<p>Turned out that I had a bunch of weird symlinks in my <code>/usr/local/include</code> folder.\nI removed the whole folder and reinstalled Homebrew and everything went back to normal again. </p>\n"}, {"comments": [{"owner": {"reputation": 619, "user_id": 4140007, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/12d4f9e02df2e3f94ac8bd1f90894e34?s=128&d=identicon&r=PG&f=1", "display_name": "Valar Morghulis", "link": "https://stackoverflow.com/users/4140007/valar-morghulis"}, "edited": false, "score": 0, "creation_date": 1610770635, "post_id": 63089082, "comment_id": 116243594, "body": "This saved my day, thanks!"}, {"owner": {"reputation": 14220, "user_id": 136598, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/55c76f58f63ba7cbb85658158b3a82f8?s=128&d=identicon&r=PG&f=1", "display_name": "gaefan", "link": "https://stackoverflow.com/users/136598/gaefan"}, "edited": false, "score": 0, "creation_date": 1612965958, "post_id": 63089082, "comment_id": 116930435, "body": "I tried a bunch of things and this worked for me.  Also takes 2 seconds."}, {"owner": {"reputation": 609, "user_id": 2850811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42393f7e26c5503e7fd26debae1de537?s=128&d=identicon&r=PG", "display_name": "micahbf", "link": "https://stackoverflow.com/users/2850811/micahbf"}, "edited": false, "score": 0, "creation_date": 1613409854, "post_id": 63089082, "comment_id": 117061076, "body": "I get: <code>xcode-select: error: invalid developer directory &#39;&#47;Applications&#47;Xcode.app&#39;</code>"}, {"owner": {"reputation": 741, "user_id": 1841680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/285cb297cf41c630884d8399e466c97a?s=128&d=identicon&r=PG", "display_name": "mimsugara", "link": "https://stackoverflow.com/users/1841680/mimsugara"}, "edited": false, "score": 0, "creation_date": 1613836762, "post_id": 63089082, "comment_id": 117201869, "body": "Probably you never installed Xcode?"}], "tags": [], "owner": {"reputation": 741, "user_id": 1841680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/285cb297cf41c630884d8399e466c97a?s=128&d=identicon&r=PG", "display_name": "mimsugara", "link": "https://stackoverflow.com/users/1841680/mimsugara"}, "is_accepted": false, "score": 4, "last_activity_date": 1595684945, "last_edit_date": 1595684945, "creation_date": 1595684636, "answer_id": 63089082, "question_id": 59071881, "link": "https://stackoverflow.com/questions/59071881/problems-with-c-and-gems-on-osx-catalina/63089082#63089082", "title": "Problems with C++ and gems on OSX Catalina", "body": "<p>Found the solution through a <a href=\"https://forums.swift.org/t/is-anyone-else-getting-this-error-when-building-the-compiler-from-master-on-macos/36113/2\" rel=\"nofollow noreferrer\">swift forum</a> it worked with me it seems that somehow the commandline tools got corrupted or just deprecated.</p>\n<p>TL;DR;</p>\n<ol>\n<li>Remove CommandLine Tools directory: <code>sudo rm -rf /Library/Developer/CommandLineTools</code></li>\n<li>Recreate with: <code>sudo xcode-select -s /Applications/Xcode.app</code></li>\n</ol>\n"}], "owner": {"reputation": 5139, "user_id": 954422, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2542652a616dc8d395194890b4f92a0d?s=128&d=identicon&r=PG", "display_name": "viplezer", "link": "https://stackoverflow.com/users/954422/viplezer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1017, "favorite_count": 0, "accepted_answer_id": 59072909, "answer_count": 2, "score": 6, "last_activity_date": 1595684945, "creation_date": 1574863199, "question_id": 59071881, "link": "https://stackoverflow.com/questions/59071881/problems-with-c-and-gems-on-osx-catalina", "title": "Problems with C++ and gems on OSX Catalina", "body": "<p>I am trying to install a new gem with:</p>\n\n<pre><code>gem install sassc\n</code></pre>\n\n<p>But it fails with C++ issues:</p>\n\n<pre><code>current directory: /usr/local/lib/ruby/gems/2.6.0/gems/sassc-2.2.0/ext\n/usr/local/opt/ruby/bin/ruby -I /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0 -r ./siteconf20191127-10955-52fjdl.rb extconf.rb\ncreating Makefile\n\ncurrent directory: /usr/local/lib/ruby/gems/2.6.0/gems/sassc-2.2.0/ext\nmake \"DESTDIR=\" clean\n\ncurrent directory: /usr/local/lib/ruby/gems/2.6.0/gems/sassc-2.2.0/ext\nmake \"DESTDIR=\"\ncompiling ./libsass/src/units.cpp\nIn file included from ./libsass/src/units.cpp:3:\nIn file included from ./libsass/src/units.hpp:4:\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:314:9: error: no member named 'signbit' in the global namespace\nusing ::signbit;\n      ~~^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:315:9: error: no member named 'fpclassify' in the global namespace\nusing ::fpclassify;\n      ~~^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:316:9: error: no member named 'isfinite' in the global namespace; did you mean 'finite'?\nusing ::isfinite;\n      ~~^\n/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/math.h:749:12: note: 'finite' declared here\nextern int finite(double)\n           ^\nIn file included from ./libsass/src/units.cpp:3:\nIn file included from ./libsass/src/units.hpp:4:\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:317:9: error: no member named 'isinf' in the global namespace\nusing ::isinf;\n      ~~^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:318:9: error: no member named 'isnan' in the global namespace\nusing ::isnan;\n      ~~^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:319:9: error: no member named 'isnormal' in the global namespace\nusing ::isnormal;\n      ~~^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:320:7: error: no member named 'isgreater' in the global namespace; did you mean '::std::greater'?\nusing ::isgreater;\n      ^~\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/functional:728:29: note: '::std::greater' declared here\nstruct _LIBCPP_TEMPLATE_VIS greater : binary_function&lt;_Tp, _Tp, bool&gt;\n                            ^\nIn file included from ./libsass/src/units.cpp:3:\nIn file included from ./libsass/src/units.hpp:4:\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:321:7: error: no member named 'isgreaterequal' in the global namespace; did you mean '::std::greater_equal'?\nusing ::isgreaterequal;\n      ^~\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/functional:757:29: note: '::std::greater_equal' declared here\nstruct _LIBCPP_TEMPLATE_VIS greater_equal : binary_function&lt;_Tp, _Tp, bool&gt;\n                            ^\nIn file included from ./libsass/src/units.cpp:3:\nIn file included from ./libsass/src/units.hpp:4:\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:322:9: error: no member named 'isless' in the global namespace\nusing ::isless;\n      ~~^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:323:9: error: no member named 'islessequal' in the global namespace\nusing ::islessequal;\n      ~~^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:324:9: error: no member named 'islessgreater' in the global namespace\nusing ::islessgreater;\n      ~~^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:325:9: error: no member named 'isunordered' in the global namespace\nusing ::isunordered;\n      ~~^\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1/cmath:326:9: error: no member named 'isunordered' in the global namespace\nusing ::isunordered;\n      ~~^\n13 errors generated.\nmake: *** [units.o] Error 1\n\nmake failed, exit code 2\n</code></pre>\n\n<p>I've tried everything I found on SO but nothing helped so far</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 10927701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eef80517111079e3b8b8ecf3a347972?s=128&d=identicon&r=PG&f=1", "display_name": "Marshmello", "link": "https://stackoverflow.com/users/10927701/marshmello"}, "edited": false, "score": 0, "creation_date": 1574862711, "post_id": 59071693, "comment_id": 104381276, "body": "Thank you for your answer! But i&#39;m getting error like this <code>compile error path&#47;to&#47;file: undefined (?...) sequence: &#47;(?&lt;=-[\\s*])(.*)(?=,)&#47;</code> Ruby 1.8.7"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 69, "user_id": 10927701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eef80517111079e3b8b8ecf3a347972?s=128&d=identicon&r=PG&f=1", "display_name": "Marshmello", "link": "https://stackoverflow.com/users/10927701/marshmello"}, "edited": false, "score": 0, "creation_date": 1574862806, "post_id": 59071693, "comment_id": 104381340, "body": "Oh, sorry, didn&#39;t know your Ruby version."}, {"owner": {"reputation": 69, "user_id": 10927701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eef80517111079e3b8b8ecf3a347972?s=128&d=identicon&r=PG&f=1", "display_name": "Marshmello", "link": "https://stackoverflow.com/users/10927701/marshmello"}, "edited": false, "score": 0, "creation_date": 1574862829, "post_id": 59071693, "comment_id": 104381355, "body": "That&#39;s my fault! Forgot to write that."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 69, "user_id": 10927701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eef80517111079e3b8b8ecf3a347972?s=128&d=identicon&r=PG&f=1", "display_name": "Marshmello", "link": "https://stackoverflow.com/users/10927701/marshmello"}, "edited": false, "score": 1, "creation_date": 1574863023, "post_id": 59071693, "comment_id": 104381470, "body": "I can&#39;t come up with anything else than using split <code>&quot;Jura Alunana 11 - 126, Riga&quot;.split(&quot; - &quot;)[-1].split(&quot;,&quot;)[0]</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1574874315, "post_id": 59071693, "comment_id": 104387851, "body": "The character class <code>[\\s*]</code> matches a whitespace or an asterisk. I don&#39;t think that&#39;s what you want. Note that, in the OP&#39;s example, the comma immediately follows the digits to be extracted, but the question does not specify that there are no intervening characters (or that there is exactly one space--or even no characters other than spaces--between the comma and the digits to be extracted)."}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 2, "last_activity_date": 1576154522, "last_edit_date": 1576154522, "creation_date": 1574862527, "answer_id": 59071693, "question_id": 59071642, "link": "https://stackoverflow.com/questions/59071642/get-element-from-string-between-2-symbols/59071693#59071693", "title": "Get element from string between 2 symbols", "body": "<pre><code>\"Adress 22 - 99, world\"[/(?&lt;=-[\\s*])(.*)(?=,)/]\n# 99\n</code></pre>\n\n<p>There can be for sure a better regex, but this fits the example given. Gets everything between a \"-\" followed by 0 or more whitespaces and \",\".</p>\n"}, {"comments": [{"owner": {"reputation": 69, "user_id": 10927701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eef80517111079e3b8b8ecf3a347972?s=128&d=identicon&r=PG&f=1", "display_name": "Marshmello", "link": "https://stackoverflow.com/users/10927701/marshmello"}, "edited": false, "score": 0, "creation_date": 1574864039, "post_id": 59072065, "comment_id": 104382087, "body": "Thank you! This is working too, but number can be with letter too, like <code>5A</code>, <code>126B</code> and so on. This gsub is ignoring it. But thank you for your time!"}, {"owner": {"reputation": 1510, "user_id": 1845602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d271e8f7cf3322dc3b404ffb9deb4f?s=128&d=identicon&r=PG", "display_name": "Edgar Ortega", "link": "https://stackoverflow.com/users/1845602/edgar-ortega"}, "reply_to_user": {"reputation": 69, "user_id": 10927701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eef80517111079e3b8b8ecf3a347972?s=128&d=identicon&r=PG&f=1", "display_name": "Marshmello", "link": "https://stackoverflow.com/users/10927701/marshmello"}, "edited": false, "score": 0, "creation_date": 1574864363, "post_id": 59072065, "comment_id": 104382292, "body": "@Marshmello then, you need to replace <code>(\\d+)</code> with <code>([\\d|[a-z]]+)</code>, so the final result is <code>&#47;.*- ([\\d|[a-z]]+),.*&#47;i</code>. But this is a correct answer. Check this Rubular link <a href=\"https://rubular.com/r/vl4SR1wOVq479v\" rel=\"nofollow noreferrer\">rubular.com/r/vl4SR1wOVq479v</a>"}], "tags": [], "owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "is_accepted": false, "score": 2, "last_activity_date": 1574863826, "creation_date": 1574863826, "answer_id": 59072065, "question_id": 59071642, "link": "https://stackoverflow.com/questions/59071642/get-element-from-string-between-2-symbols/59072065#59072065", "title": "Get element from string between 2 symbols", "body": "<p>Try using gsub:</p>\n\n<pre><code>str = \"Jura Alunana 11 - 126, Riga\"\nvalue = str.gsub(/.*- (\\d+),.*/, '\\1') # \\1 means the digits inside the first ( ) pair\n#  =&gt; \"126\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1521, "user_id": 1274846, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/048371ccb94bbd3aae9ac0ca20c0a31c?s=128&d=identicon&r=PG", "display_name": "Trinculo", "link": "https://stackoverflow.com/users/1274846/trinculo"}, "is_accepted": false, "score": 0, "last_activity_date": 1574869580, "creation_date": 1574869580, "answer_id": 59073851, "question_id": 59071642, "link": "https://stackoverflow.com/questions/59071642/get-element-from-string-between-2-symbols/59073851#59073851", "title": "Get element from string between 2 symbols", "body": "<p>Here is my take.  I find it a bit easier to read than some of the other solutions.</p>\n\n<pre><code>str = \"Jura Alunana 11 - 126, Riga\"\nstr.match(/-\\s(\\d+),/)\nputs $1\n\n# =&gt; 126\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 69, "user_id": 10927701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eef80517111079e3b8b8ecf3a347972?s=128&d=identicon&r=PG&f=1", "display_name": "Marshmello", "link": "https://stackoverflow.com/users/10927701/marshmello"}, "edited": false, "score": 0, "creation_date": 1576154549, "post_id": 59074934, "comment_id": 104812029, "body": "Why we should use <code>1</code>? What does it means? :)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 69, "user_id": 10927701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eef80517111079e3b8b8ecf3a347972?s=128&d=identicon&r=PG&f=1", "display_name": "Marshmello", "link": "https://stackoverflow.com/users/10927701/marshmello"}, "edited": false, "score": 0, "creation_date": 1576159473, "post_id": 59074934, "comment_id": 104814845, "body": "@Marshmello, see <a href=\"https://ruby-doc.org/core-2.6.3/String.html#method-i-5B-5D\" rel=\"nofollow noreferrer\">String#&#91;&#93;</a>, specifically the form of the method <code>str[regexp, capture]</code>."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1574876091, "last_edit_date": 1574876091, "creation_date": 1574873297, "answer_id": 59074934, "question_id": 59071642, "link": "https://stackoverflow.com/questions/59071642/get-element-from-string-between-2-symbols/59074934#59074934", "title": "Get element from string between 2 symbols", "body": "<pre><code>str = \"Jura Alunana 11 - 126, Riga\"\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>r = /.*-\\D*\\K\\d+(?=.*,)/\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>str[r]\n  #=&gt; \"126\"\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>str1 = \"Jura Alunana 11 - cat 126 ahem 33 , Riga\"\nstr1[r]\n  #=&gt; \"126\"\n</code></pre>\n\n<p>We can make the regular expression self-documenting by defining it in free-spacing mode:</p>\n\n<pre><code>r = /\n    .*       # match 0+ characters\n    -\\D*     # match a hyphen followed by 0+ non-digits\n    \\K       # forget everything matched so far\n    \\d+      # match 1+ digits...\n    (?=.*,)  # ...followed by 0+ characters then a comma (positive lookahead) \n    /x       # free-spacing regex definition mode\n</code></pre>\n\n<p>Alternatively,</p>\n\n<pre><code>r = /\n    .*-\\D* # match 0+ characters, a hyphen then 0+ non-digits\n    (\\d+)  # match 1+ digits in capture group 1\n    .*,    # match 0+ characters then a comma\n    /x     # free-spacing regex definition mode\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>str[r, 1]\n  #=&gt; \"126\"\nstr1[r, 1]\n  #=&gt; \"126\"\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 10927701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eef80517111079e3b8b8ecf3a347972?s=128&d=identicon&r=PG&f=1", "display_name": "Marshmello", "link": "https://stackoverflow.com/users/10927701/marshmello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 59071693, "answer_count": 4, "score": 1, "last_activity_date": 1576154522, "creation_date": 1574862406, "last_edit_date": 1576154311, "question_id": 59071642, "link": "https://stackoverflow.com/questions/59071642/get-element-from-string-between-2-symbols", "title": "Get element from string between 2 symbols", "body": "<p>I'm having string like this:</p>\n\n<p><code>Adress 22 - 99, world</code></p>\n\n<p>I need to get value <code>99</code> from this string, witch is between <code>-</code> and <code>,</code> symbols. Is that possible?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "view"], "comments": [{"owner": {"reputation": 14364, "user_id": 1023609, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14cd00b085c207261db49ac46be4773c?s=128&d=identicon&r=PG", "display_name": "MurifoX", "link": "https://stackoverflow.com/users/1023609/murifox"}, "edited": false, "score": 0, "creation_date": 1574860457, "post_id": 59071020, "comment_id": 104379969, "body": "What do you mean by interpolate the file first? Changing some strings to a input from the user?"}, {"owner": {"reputation": 2215, "user_id": 1996540, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/609b69cbb09257883a4e32d7d5aff098?s=128&d=identicon&r=PG", "display_name": "ZedTuX", "link": "https://stackoverflow.com/users/1996540/zedtux"}, "edited": false, "score": 0, "creation_date": 1574860489, "post_id": 59071020, "comment_id": 104379991, "body": "You need to give us some code and error. Like that, your question is unanswerable."}, {"owner": {"reputation": 373, "user_id": 1395961, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/094a18dfb0afb9fc27b3e57768961948?s=128&d=identicon&r=PG", "display_name": "JoshuaESummers", "link": "https://stackoverflow.com/users/1395961/joshuaesummers"}, "edited": false, "score": 0, "creation_date": 1574862123, "post_id": 59071020, "comment_id": 104380943, "body": "Sorry, I am not close enough to really be writing useful code yet. I don&#39;t know how to get into the problem to start writing. We have tried a lot of things, like having a route to a static page (get &#39;template.rb&#39;, to: &#39;pages#template&#39;), and then having a template method in the pages controller and a template.html.erb file in the pages views, however this was not useful."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1574881548, "post_id": 59071020, "comment_id": 104391062, "body": "Start by: A. Learn how low level ERB templating works. B. Read <a href=\"https://guides.rubyonrails.org/rails_application_templates.html\" rel=\"nofollow noreferrer\">Rails Application Templates</a> and <a href=\"https://guides.rubyonrails.org/generators.html\" rel=\"nofollow noreferrer\">Creating and Customizing Rails Generators &amp; Templates</a>. C. Look at existing work like the <a href=\"https://github.com/lewagon/rails-templates\" rel=\"nofollow noreferrer\">rails-templates</a> gem."}], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 6621345, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_0MlaIGfMOM/AAAAAAAAAAI/AAAAAAAAAIs/PlZIePpL1Ng/photo.jpg?sz=128", "display_name": "Steve McClellan", "link": "https://stackoverflow.com/users/6621345/steve-mcclellan"}, "is_accepted": true, "score": 0, "last_activity_date": 1574866602, "creation_date": 1574866602, "answer_id": 59072947, "question_id": 59071020, "link": "https://stackoverflow.com/questions/59071020/how-to-expose-a-raw-ruby-file-with-interpolation-on-my-rails-project/59072947#59072947", "title": "how to expose a raw ruby file (with interpolation) on my Rails project?", "body": "<p>You're on the right track: the <code>.erb</code> suffix tells the eRuby templating system to run text between <code>&lt;%</code>, <code>&lt;%#</code>, or <code>&lt;%=</code> and <code>%&gt;</code> as Ruby code.</p>\n\n<p>Then, the <code>.erb</code> suffix is stripped from the file name, and what's left is the file that Rails will use for the response. If your view is named <code>template.html.erb</code>, then after the internal Ruby code is evaluated, you will have a <code>template.html</code> file.</p>\n\n<p>If you instead want a <code>template.rb</code> file for your response, your view should be <code>template.rb.erb</code>. Only code between the above delimiters will be evaluated and replaced.</p>\n\n<p>So, if you have a <code>get_custom_text</code> method that returns the string <code>adding some custom text</code>, and you have the following in a <code>template.rb.erb</code> view file:</p>\n\n<pre><code>puts 'Hello, world!'\nputs 'Now &lt;%= get_custom_text %&gt;...'\nputs 'Goodbye, world!'\n</code></pre>\n\n<p>then after evaluation, you'll have a <code>template.rb</code> file that contains:</p>\n\n<pre><code>puts 'Hello, world!'\nputs 'Now adding some custom text...'\nputs 'Goodbye, world!'\n</code></pre>\n"}], "owner": {"reputation": 373, "user_id": 1395961, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/094a18dfb0afb9fc27b3e57768961948?s=128&d=identicon&r=PG", "display_name": "JoshuaESummers", "link": "https://stackoverflow.com/users/1395961/joshuaesummers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "closed_date": 1574897906, "accepted_answer_id": 59072947, "answer_count": 1, "score": 0, "last_activity_date": 1574866602, "creation_date": 1574860286, "question_id": 59071020, "link": "https://stackoverflow.com/questions/59071020/how-to-expose-a-raw-ruby-file-with-interpolation-on-my-rails-project", "closed_reason": "Needs details or clarity", "title": "how to expose a raw ruby file (with interpolation) on my Rails project?", "body": "<p>I would like to be able to generate a public rails template file on my rails project (which is about making rails projects!). This file should look like this to the user:</p>\n\n<p><a href=\"https://raw.githubusercontent.com/lewagon/rails-templates/master/devise.rb\" rel=\"nofollow noreferrer\">https://raw.githubusercontent.com/lewagon/rails-templates/master/devise.rb</a></p>\n\n<p>However we need to interpolate the file first. In my mind having a template.html.erb view and then some how exposing it as a raw ruby file would be ideal. This would mean the final url would look something like:</p>\n\n<p>www.thing.com/projects/1/tempalte.rb, and the contents of this file would be different to the ones at www.thing.com/projects/2/template.rb.</p>\n\n<p>I don't know how to solve this problem, but am researching a lot. If you have any ideas it would be great to know them. Thank you</p>\n"}, {"tags": ["arrays", "regex", "ruby", "string"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1574858767, "post_id": 59070536, "comment_id": 104379054, "body": "<code>&quot; \\t\\n&quot;</code> has no letters in it. It is a sequence of a space, tab and newline chars."}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1574859082, "post_id": 59070536, "comment_id": 104379238, "body": "Try <code>puts &quot; \\t\\n&quot;</code> and count the letters you see in the output yourself. How many are there? =)"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1574859092, "post_id": 59070536, "comment_id": 104379242, "body": "<code>&quot;t&quot;</code> and <code>&quot;\\t&quot;</code> are not the same thing. One is the letter <code>&quot;t&quot;</code> and the other is a <a href=\"https://en.wikipedia.org/wiki/Tab_key#Tab_characters\" rel=\"nofollow noreferrer\">tab character</a>."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1574859888, "post_id": 59070536, "comment_id": 104379675, "body": "<a href=\"https://en.wikibooks.org/wiki/Ruby_Programming/Strings#Escape_sequences\" rel=\"nofollow noreferrer\">en.wikibooks.org/wiki/Ruby_Programming/Strings#Escape_sequen&zwnj;&#8203;ces</a>"}, {"owner": {"reputation": 1521, "user_id": 1274846, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/048371ccb94bbd3aae9ac0ca20c0a31c?s=128&d=identicon&r=PG", "display_name": "Trinculo", "link": "https://stackoverflow.com/users/1274846/trinculo"}, "edited": false, "score": 0, "creation_date": 1574868068, "post_id": 59070536, "comment_id": 104384488, "body": "You can use <code>String#dump</code> though to convert the characters.  Check out my answer."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1574876889, "post_id": 59070536, "comment_id": 104389061, "body": "Do you want something like the following? <code>h = { &quot;\\t&quot;=&gt;&quot;t&quot;, &quot;\\n&quot;=&gt;&quot;n&quot; }; &quot;\\tMy dog has\\nfleas&quot;.gsub(&#47;[\\t\\n]&#47;, h) #=&gt; &quot;tMy dog hasnfleas&quot;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 18299, "user_id": 2191572, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/TWbVr.png?s=128&g=1", "display_name": "MonkeyZeus", "link": "https://stackoverflow.com/users/2191572/monkeyzeus"}, "is_accepted": false, "score": 0, "last_activity_date": 1574860874, "creation_date": 1574860874, "answer_id": 59071192, "question_id": 59070536, "link": "https://stackoverflow.com/questions/59070536/creating-an-array-that-only-contains-the-letters-from-a-string/59071192#59071192", "title": "Creating an array that only contains the letters from a string", "body": "<p>I am not familiar with ruby but you seem to be having string interpolation confusion.</p>\n\n<p>Per <a href=\"https://www.ruby-forum.com/t/new-line-in-string/176797\" rel=\"nofollow noreferrer\">https://www.ruby-forum.com/t/new-line-in-string/176797</a></p>\n\n<pre><code>input = \" \\t\\n\"\n</code></pre>\n\n<p>Gives you a string with a space, tab, and newline.</p>\n\n<p>You probably want to use single quotes to literally get the string you wrote:</p>\n\n<pre><code>input = ' \\t\\n'\n</code></pre>\n\n<p>If you sorely want to stick with double-quotes then I believe this would work:</p>\n\n<pre><code>input = \" \\\\t\\\\n\"\n</code></pre>\n\n<hr>\n\n<p>You should read <a href=\"https://blog.appsignal.com/2016/12/21/ruby-magic-escaping-in-ruby.html\" rel=\"nofollow noreferrer\">https://blog.appsignal.com/2016/12/21/ruby-magic-escaping-in-ruby.html</a> to learn more about string interpolation in Ruby. I would link you to the official docs but my lack of ruby experience translates to a lack of official doc experience.</p>\n"}, {"tags": [], "owner": {"reputation": 553, "user_id": 4742218, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-0wBoIjPuArI/AAAAAAAAAAI/AAAAAAAAAF8/gmwCNq5bAX8/photo.jpg?sz=128", "display_name": "noname", "link": "https://stackoverflow.com/users/4742218/noname"}, "is_accepted": false, "score": 0, "last_activity_date": 1574861200, "creation_date": 1574861200, "answer_id": 59071289, "question_id": 59070536, "link": "https://stackoverflow.com/questions/59070536/creating-an-array-that-only-contains-the-letters-from-a-string/59071289#59071289", "title": "Creating an array that only contains the letters from a string", "body": "<p>So like colleagues explain in comments, the letters which you have in <code>\"\\t\\n\"</code> string are not ordinary letters, only something called <code>special characters</code> so I am not sure but there is not easy way to take this characters from this string cause <code>\\t</code> is like one character. </p>\n\n<p>With normal string like <code>tn</code> you could do something like this</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>\"tn\".split(\"\")\n</code></pre>\n\n<p>and that give you array which you want.</p>\n\n<p>But on special characters like in the example. you could do something like this</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>a = \"\\t\\n\".split(\"\")\n\na.map! do |e|\n  if e == \"\\t\"\n    \"t\"\n  elsif e == \"\\n\"\n    \"n\"\n  end\nend\n</code></pre>\n\n<p>which give you, I believe, results which you want.</p>\n"}, {"tags": [], "owner": {"reputation": 1521, "user_id": 1274846, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/048371ccb94bbd3aae9ac0ca20c0a31c?s=128&d=identicon&r=PG", "display_name": "Trinculo", "link": "https://stackoverflow.com/users/1274846/trinculo"}, "is_accepted": false, "score": 1, "last_activity_date": 1574867959, "creation_date": 1574867959, "answer_id": 59073349, "question_id": 59070536, "link": "https://stackoverflow.com/questions/59070536/creating-an-array-that-only-contains-the-letters-from-a-string/59073349#59073349", "title": "Creating an array that only contains the letters from a string", "body": "<p>Here you go!  You were really close.</p>\n\n<pre><code>input = \" \\t\\n\"\narray = input.dump.scan(/\\w/)\n\n=&gt; [\"t\", \"n\"]\n</code></pre>\n\n<p>The key is to use <code>String#dump</code> (see: <a href=\"https://ruby-doc.org/core-2.6.5/String.html#method-i-dump\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.6.5/String.html#method-i-dump</a>)</p>\n"}], "owner": {"reputation": 11, "user_id": 12445790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19aab734210d72e7598ce2321e2724f8?s=128&d=identicon&r=PG&f=1", "display_name": "JHull1886", "link": "https://stackoverflow.com/users/12445790/jhull1886"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1574867959, "creation_date": 1574858607, "last_edit_date": 1574860816, "question_id": 59070536, "link": "https://stackoverflow.com/questions/59070536/creating-an-array-that-only-contains-the-letters-from-a-string", "title": "Creating an array that only contains the letters from a string", "body": "<p>So I'm trying to change the string <code>\\t\\n</code> into an array of all of word characters in the string. The array I want would look like this: <code>[\"t\",\"n\"]</code>.</p>\n\n<p>So far I've tried:</p>\n\n<pre><code>input = \" \\t\\n\"\narray = input.scan(/\\w/)\n</code></pre>\n\n<p>I've tried this regular expression on this string on rubular and it matches with all of the word characters as I'd like it to.</p>\n\n<p>However, when using <code>input.scan(/\\w)</code> an empty array is returned.</p>\n\n<p>Please forgive my ignorance as I'm still new to this, but why is this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-6", "trix", "actiontext"], "comments": [{"owner": {"reputation": 14364, "user_id": 1023609, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14cd00b085c207261db49ac46be4773c?s=128&d=identicon&r=PG", "display_name": "MurifoX", "link": "https://stackoverflow.com/users/1023609/murifox"}, "edited": false, "score": 0, "creation_date": 1574860618, "post_id": 59070034, "comment_id": 104380073, "body": "Maybe your new layout is missing the javascript: &lt;%= javascript_include_tag &quot;application&quot; %&gt;"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 3892664, "user_type": "registered", "profile_image": "https://graph.facebook.com/1338390042/picture?type=large", "display_name": "Dan Engel", "link": "https://stackoverflow.com/users/3892664/dan-engel"}, "edited": false, "score": 0, "creation_date": 1574908445, "post_id": 59071291, "comment_id": 104398671, "body": "Thank you, the <code>&lt;%= javascript_pack_tag &#39;application&#39; %&gt;</code> was what was missing in the layout!"}], "tags": [], "owner": {"reputation": 136, "user_id": 8951199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7f1bb451406812584a50bd50503c681?s=128&d=identicon&r=PG&f=1", "display_name": "Mirek Sawicz", "link": "https://stackoverflow.com/users/8951199/mirek-sawicz"}, "is_accepted": true, "score": 3, "last_activity_date": 1574861200, "creation_date": 1574861200, "answer_id": 59071291, "question_id": 59070034, "link": "https://stackoverflow.com/questions/59070034/rails-6-actiontext-rich-text-area-works-normally-does-not-appear-when-rendered/59071291#59071291", "title": "Rails 6 ActionText rich_text_area works normally, does not appear when rendered in a layout", "body": "<p>Did you setup your <code>action_text</code> with with Webpacker or with assets pipeline?\nIf you set it up with Webpacker you may have to add <code>&lt;%= javascript_pack_tag 'application' %&gt;</code>\nIf you set it up with assets pipeline then as <a href=\"https://meta.stackexchange.com/users/162425/xyz\">@MurifoX</a> mentioned, you may need the <code>&lt;%= javascript_include_tag 'application' %&gt;</code>.</p>\n"}], "owner": {"reputation": 55, "user_id": 3892664, "user_type": "registered", "profile_image": "https://graph.facebook.com/1338390042/picture?type=large", "display_name": "Dan Engel", "link": "https://stackoverflow.com/users/3892664/dan-engel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1927, "favorite_count": 1, "accepted_answer_id": 59071291, "answer_count": 1, "score": 1, "last_activity_date": 1574861200, "creation_date": 1574856943, "question_id": 59070034, "link": "https://stackoverflow.com/questions/59070034/rails-6-actiontext-rich-text-area-works-normally-does-not-appear-when-rendered", "title": "Rails 6 ActionText rich_text_area works normally, does not appear when rendered in a layout", "body": "<p>I'm rendering a form that utilizes the ActionText input rich_text_area, which is the Rails implementation of the Trix WYSIWYG rich text editor. It's been working fine until I started refactoring my views to use a layout, where the form content can yield different forms. The form renders fine <em>except</em> for the rich_text_areas, which both disappear. Removing the code required to make this a layout returns it back to normal. My code is below. </p>\n\n<p>I'm rendering a form as a partial with the following code:</p>\n\n<pre><code>&lt;%= stylesheet_link_tag \"form\" %&gt;\n&lt;%= form_with model: @family, class: \"form-group\" do |f| %&gt;\n\n  &lt;%= label_tag(:banner_image, 'Select a Banner Image')%&gt;\n  &lt;%= f.file_field :banner_image%&gt;\n  &lt;br&gt;\n  &lt;br&gt;\n\n  &lt;%= label_tag(:zh_family_name, 'Chinese Family Name') %&gt;\n  &lt;%= f.text_field :zh_family_name %&gt;\n  &lt;br&gt;\n  &lt;br&gt;\n  &lt;%= label_tag(:en_family_name, 'English Family Name') %&gt;\n  &lt;%= f.text_field :en_family_name %&gt;\n  &lt;br&gt;\n  &lt;br&gt;\n  &lt;%= label_tag(:en_summary, 'Summary') %&gt;\n  &lt;%= f.text_field :en_summary %&gt;\n  &lt;br&gt;\n  &lt;br&gt;\n  &lt;%= label_tag(:zh_summary, 'Summary Chinese') %&gt;\n  &lt;%= f.text_field :zh_summary %&gt;\n  &lt;br&gt;\n  &lt;br&gt;\n\n  &lt;%= label_tag(:en_content, 'Content') %&gt;  \n  &lt;%= f.rich_text_area :en_content_rt %&gt;\n  &lt;br&gt;\n  &lt;br&gt;\n\n  &lt;%= label_tag(:zh_content, '\u5185\u5bb9') %&gt;\n  &lt;%= f.rich_text_area :zh_content_rt %&gt;\n  &lt;br&gt;\n  &lt;br&gt;\n\n  &lt;%= label_tag(:service_id, 'Select a related service') %&gt;\n  &lt;%= f.collection_select(:service_id, Service.all, :id, :en_title) %&gt;\n  &lt;br&gt;\n  &lt;br&gt;\n  &lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>It works fine and the rich text areas are visible and can be used when this form is loaded in to the edit.html.erb file as a partial like so:</p>\n\n<pre><code>&lt;%= render \"partials/family_form\" %&gt;\n</code></pre>\n\n<p>But I'd like to render it as part of a layout called 'editor', thus I change the edit.html.erb to this:</p>\n\n<pre><code>&lt;% content_for :form do %&gt;\n  &lt;h1&gt;Edit the &lt;em&gt;&lt;%= @family.en_family_name %&gt;&lt;/em&gt; Testimonial &lt;/h1&gt;\n\n  &lt;%= render \"partials/family_form\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>add <code>render layout: 'editor'</code> to the edit function in the controller, and add a layout that looks like this:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n  &lt;meta charset=\"UTF-8\"&gt;\n  &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n  &lt;meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\"&gt;\n  &lt;%= stylesheet_link_tag \"editor\" %&gt;\n  &lt;%= yield :head %&gt;\n&lt;/head&gt;\n&lt;body&gt;\n  &lt;div class=\"main-container\"&gt;\n    &lt;div class=\"sidenav\"&gt;\n      &lt;%= render \"partials/sidenav\" %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"content\"&gt;\n      &lt;%= yield :form %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>I think I've narrowed it down to the <code>render layout: 'editor'</code> code being the source of the problem, since <em>directly</em> pasting the form code into the editor.html.erb layout file produces the same error: everything renders fine except for the rich text areas. </p>\n\n<p>I haven't seen this issue reported on the Trix repo and have tried manually adding <code>require 'action_text'</code> and the ActionText helper to the relevant controller, to no avail. Any help would be greatly appreciated, thanks.</p>\n"}, {"tags": ["mysql", "ruby", "activerecord", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 32469, "user_id": 1529673, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/O6MQS.jpg?s=128&g=1", "display_name": "Strawberry", "link": "https://stackoverflow.com/users/1529673/strawberry"}, "edited": false, "score": 0, "creation_date": 1574858276, "post_id": 59070025, "comment_id": 104378796, "body": "You&#39;re selecting a lot of redundant data there. A good tip is never use <code>SELECT *</code>"}], "answers": [{"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1574865370, "post_id": 59070417, "comment_id": 104382923, "body": "I&#39;d change formatting to <code>stocks = Stock.joins(&lt;&lt;~SQL.squish).where(product_id: 1)</code> followed by the here document text, instead of having the closing bracket after the whole here document."}, {"owner": {"reputation": 2111, "user_id": 1846982, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/9979071c5c3697ae9e8b8f50062a1782?s=128&d=identicon&r=PG&f=1", "display_name": "Bloomberg", "link": "https://stackoverflow.com/users/1846982/bloomberg"}, "edited": false, "score": 0, "creation_date": 1574926099, "post_id": 59070417, "comment_id": 104403358, "body": "@marek_lipka thank you very for the answer, But isn&#39;t it more like inserting raw sql, except for the part .where(product_id: 1) can&#39;t we change the inner join query to Active record query."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 2111, "user_id": 1846982, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/9979071c5c3697ae9e8b8f50062a1782?s=128&d=identicon&r=PG&f=1", "display_name": "Bloomberg", "link": "https://stackoverflow.com/users/1846982/bloomberg"}, "edited": false, "score": 2, "creation_date": 1574926224, "post_id": 59070417, "comment_id": 104403414, "body": "@Prem we can&#39;t if we want to perform custom <code>INNER JOIN</code> query (with nested query) like this. AR can &#39;automatically&#39; perform only relatively simple <code>INNER JOIN</code> and <code>LEFT OUTER JOIN</code> queries."}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 2, "last_activity_date": 1574858212, "creation_date": 1574858212, "answer_id": 59070417, "question_id": 59070025, "link": "https://stackoverflow.com/questions/59070025/how-to-join-in-rails-active-record-using-alias/59070417#59070417", "title": "How to join in rails active record using alias", "body": "<p>You should pass into <code>joins</code> method all your <code>join</code> clause if you want to do some custom joining, like this:</p>\n\n<pre><code>stocks = Stock.joins(&lt;&lt;-SQL\n  INNER JOIN\n  (\n    SELECT product_id, MIN(ask_price) min_price\n    FROM stocks\n    GROUP BY product_id, size\n  ) sub ON stocks.product_id = sub.product_id AND stocks.ask_price = sub.min_price\nSQL).where(product_id: 1)\n</code></pre>\n"}], "owner": {"reputation": 2111, "user_id": 1846982, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/9979071c5c3697ae9e8b8f50062a1782?s=128&d=identicon&r=PG&f=1", "display_name": "Bloomberg", "link": "https://stackoverflow.com/users/1846982/bloomberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 1, "accepted_answer_id": 59070417, "answer_count": 1, "score": 1, "last_activity_date": 1574858212, "creation_date": 1574856906, "question_id": 59070025, "link": "https://stackoverflow.com/questions/59070025/how-to-join-in-rails-active-record-using-alias", "title": "How to join in rails active record using alias", "body": "<p>I am trying to convert following SQL into rails active record query</p>\n\n<pre><code>\"SELECT  * FROM    stocks\n        INNER JOIN\n        (\n            SELECT  product_id, MIN(ask_price) min_price\n            FROM    stocks\n            GROUP   BY product_id,size\n        ) sub ON  stocks.product_id = sub.product_id AND\n                stocks.ask_price = sub.min_price\n                where stocks.product_id = 1\"\n</code></pre>\n\n<p>This query fetches the lowest price of the stock group by product and size of product.</p>\n\n<p>So far I have tried to translate it like this it not right.</p>\n\n<pre><code>sub_query = Stock.select(\"product_id, MIN(ask_price) min_price\").group(:product_id,:size)\nstocks = Stock.joins(\"#{sub_query} stocks.product_id = sub.product_id AND\n                stocks.ask_price = sub.min_price\")\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1574863533, "post_id": 59068619, "comment_id": 104381783, "body": "Named routes are there so you don&#39;t have to hardcode urls. That&#39;s the whole point of named routes. Hardcoding stuff is never a good practice for mantainability."}], "answers": [{"tags": [], "owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "is_accepted": false, "score": 0, "last_activity_date": 1574857250, "creation_date": 1574857250, "answer_id": 59070124, "question_id": 59068619, "link": "https://stackoverflow.com/questions/59068619/rspec-named-routes-or-hard-coded-urls/59070124#59070124", "title": "RSpec: Named routes or hard coded URLs?", "body": "<p>It's the same as with any hardcoded stuff: harder to change later. </p>\n\n<p>If you change your path from <code>/blogs</code> to <code>/interesting_stuff_people_have_to_say</code> it's a one line change if you're using the methods (named routes):</p>\n\n<pre><code> - get :blogs\n + get :blogs, as: :interesting_stuff_people_have_to_say\n</code></pre>\n\n<p>But if you hardcoded the path, you need to change it everywhere you used it. You might even miss some cases: </p>\n\n<pre><code>url = 'blog' + 's' \nredirect_to url\n</code></pre>\n\n<p>Which will cause your specs to fail (if you're lucky and have this covered) or errors on production. </p>\n"}], "owner": {"reputation": 5580, "user_id": 382827, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/68941f6897d0fb799c898958c84f1fbe?s=128&d=identicon&r=PG", "display_name": "Omid Kamangar", "link": "https://stackoverflow.com/users/382827/omid-kamangar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574857250, "creation_date": 1574852280, "last_edit_date": 1574852680, "question_id": 59068619, "link": "https://stackoverflow.com/questions/59068619/rspec-named-routes-or-hard-coded-urls", "title": "RSpec: Named routes or hard coded URLs?", "body": "<p>In a Rails project, and in an RSpec spec file, what are the pros and cons for using a named route, such as <code>blogs_path()</code> vs a hard coded URL, such as <code>/blogs</code>?</p>\n\n<p>I know the answer is highly opinionated, but it will help me (and many others) to get a view of the pros and cons of each approach.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "e-commerce", "shopping-cart"], "comments": [{"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1574851262, "post_id": 59067499, "comment_id": 104374832, "body": "<a href=\"https://snipcart.com/blog/rails-ecommerce-tutorial-refinery-cms\" rel=\"nofollow noreferrer\">snipcart.com/blog/rails-ecommerce-tutorial-refinery-cms</a> might be a good start"}], "answers": [{"tags": [], "owner": {"reputation": 93, "user_id": 11681103, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0JjPfXs2k4k/AAAAAAAAAAI/AAAAAAAAAM4/UxbbALx8CGU/photo.jpg?sz=128", "display_name": "Safwan S M", "link": "https://stackoverflow.com/users/11681103/safwan-s-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1574851428, "creation_date": 1574851428, "answer_id": 59068351, "question_id": 59067499, "link": "https://stackoverflow.com/questions/59067499/how-can-we-develop-e-commerce-website-in-20-days-using-ruby-on-rails-and-making/59068351#59068351", "title": "How can we develop e-commerce website in 20 days using Ruby on Rails and making it fully functional from scratch?", "body": "<p>purchase a bootstrap template, integrate with rails app. then work 24 hours.</p>\n"}, {"tags": [], "owner": {"reputation": 351, "user_id": 5185458, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-iimx9ivDXrk/AAAAAAAAAAI/AAAAAAAAAB8/VXw2I9mXYvo/photo.jpg=k-s128", "display_name": "Salman Mahmud", "link": "https://stackoverflow.com/users/5185458/salman-mahmud"}, "is_accepted": false, "score": 1, "last_activity_date": 1574852264, "creation_date": 1574852264, "answer_id": 59068612, "question_id": 59067499, "link": "https://stackoverflow.com/questions/59067499/how-can-we-develop-e-commerce-website-in-20-days-using-ruby-on-rails-and-making/59068612#59068612", "title": "How can we develop e-commerce website in 20 days using Ruby on Rails and making it fully functional from scratch?", "body": "<p>You can use <code>spree</code> gem to build ecommerce application using rails. <a href=\"https://github.com/spree/spree\" rel=\"nofollow noreferrer\">https://github.com/spree/spree</a></p>\n"}], "owner": {"reputation": 1, "user_id": 2450334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jrbve.jpg?s=128&g=1", "display_name": "Jesal Rathod", "link": "https://stackoverflow.com/users/2450334/jesal-rathod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 355, "favorite_count": 0, "closed_date": 1574898544, "answer_count": 2, "score": -1, "last_activity_date": 1574889817, "creation_date": 1574848689, "question_id": 59067499, "link": "https://stackoverflow.com/questions/59067499/how-can-we-develop-e-commerce-website-in-20-days-using-ruby-on-rails-and-making", "closed_reason": "Not suitable for this site", "title": "How can we develop e-commerce website in 20 days using Ruby on Rails and making it fully functional from scratch?", "body": "<p>I have searched about this but getting more confused as I came to know about Shopify, Spree, Solidus etc. Please suggest me the best option to develop it in 20 days and best flexible gems or any ready made gem or plugin. I'm using Rails 5.2 &amp; Ruby 2.5</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb", "ruby-on-rails-3", "mongodb-query"], "comments": [{"owner": {"reputation": 1247, "user_id": 2109121, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/zwxKQ.jpg?s=128&g=1", "display_name": "vovan", "link": "https://stackoverflow.com/users/2109121/vovan"}, "edited": false, "score": 0, "creation_date": 1574941483, "post_id": 59066780, "comment_id": 104411314, "body": "I suppose you are using Mongoid. Mongoid does not provide ORM for MongoDB aggregation framework. The aggregation allow construct arbitrary object without certain scheme."}], "answers": [{"tags": [], "owner": {"reputation": 9592, "user_id": 9540925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YhOpI.png?s=128&g=1", "display_name": "D. SM", "link": "https://stackoverflow.com/users/9540925/d-sm"}, "is_accepted": false, "score": 0, "last_activity_date": 1583649755, "creation_date": 1583649755, "answer_id": 60585110, "question_id": 59066780, "link": "https://stackoverflow.com/questions/59066780/write-a-complex-mongo-query-in-rails-orm/60585110#60585110", "title": "Write a complex Mongo query in Rails ORM", "body": "<p>Mongoid does not provide a DSL for constructing aggregation pipelines. The driver provides a basic helper to perform aggregation pipeline queries, but returns raw data as BSON::Document instances.</p>\n\n<p><a href=\"https://docs.mongodb.com/ruby-driver/current/tutorials/ruby-driver-aggregation/\" rel=\"nofollow noreferrer\">https://docs.mongodb.com/ruby-driver/current/tutorials/ruby-driver-aggregation/</a></p>\n"}], "owner": {"reputation": 279, "user_id": 11095718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92bb0462a575cf6024810629f19321a4?s=128&d=identicon&r=PG&f=1", "display_name": "G.Brown", "link": "https://stackoverflow.com/users/11095718/g-brown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1583649755, "creation_date": 1574846372, "last_edit_date": 1574850321, "question_id": 59066780, "link": "https://stackoverflow.com/questions/59066780/write-a-complex-mongo-query-in-rails-orm", "title": "Write a complex Mongo query in Rails ORM", "body": "<p>I want to convert mongo query to rails ORM query for the below json. </p>\n\n<p>Rails query is:</p>\n\n<pre><code>db.collection.aggregate([\n  {\n    $match: {\n      \"data.toc.ge.ge._id\": \"5b\"\n    }\n  },\n  {\n    $unwind: \"$data.toc.ge\"\n  },\n  {\n    $unwind: \"$data.toc.ge.ge\"\n  },\n  {\n    $group: {\n      _id: null,\n      book: {\n        $push: \"$data.toc.ge.ge._value\"\n      }\n    }\n  },\n  {\n    $project: {\n      _id: 0,\n      first: {\n        $arrayElemAt: [\n          \"$book\",\n          0\n        ]\n      },\n\n    }\n  }\n])\n\n</code></pre>\n\n<p>Please look at this as well:</p>\n\n<p><a href=\"https://mongoplayground.net/p/fb9IMkC1fCs\" rel=\"nofollow noreferrer\">https://mongoplayground.net/p/fb9IMkC1fCs</a></p>\n\n<p>Collection is the corresponding class and this is what I've tried so far,</p>\n\n<pre><code>unwind2=  {'$unwind': \"$data.toc.ge.ge\"}\nunwind3=  {'$unwind': \"$data.toc.ge.ge.ge\"}\ngroup= {'$group': {_id: nil, book: {'$push': \"$data.toc.ge.ge.ge._display_name\"}}}\nmatch= {'$match': {\"data.toc.ge.ge.ge._id\": \"m121099\"}}\nproject= {'$project': {_id: 0, 'mytopic': {'$arrayElemAt': [\"$book\",0]},}}\n\nanswer = collection.aggregate([match,unwind1,unwind2,unwind3,group,project]).to_a\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "algorithm", "design-patterns", "architecture"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1574844009, "post_id": 59065475, "comment_id": 104370740, "body": "Selecting some columns and reorder them seems simple. But how do you plan the user to define transformations? IMO your example (<i>Full name \u2013 &gt; First name + Last name</i>) doesn&#39;t make sense without adding whitespace. But if the user wants <i>Last name + First name</i>, they probably want a comma in between. There is a lot of hidden complexity. Can you elaborate on that part?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1574844893, "post_id": 59065475, "comment_id": 104371178, "body": "If you can give some examples, it would be much easier to answer. Creating a CSV from an arbitrary hash is not difficult. See <a href=\"https://stackoverflow.com/questions/17325792/convert-array-of-hashes-to-csv-file\" title=\"convert array of hashes to csv file\">stackoverflow.com/questions/17325792/&hellip;</a>"}, {"owner": {"reputation": 1243, "user_id": 10476417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b57114718c234f1f44a28f5396026e?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Aravindan", "link": "https://stackoverflow.com/users/10476417/abhishek-aravindan"}, "edited": false, "score": 0, "creation_date": 1574845511, "post_id": 59065475, "comment_id": 104371474, "body": "If you have well knowledge about rails creating csv document this is possible and its fully customizable . There is no gem to recommend."}, {"owner": {"reputation": 11, "user_id": 4908284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85aae24b76ed1250dd77fbf047bd7fa9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Carey", "link": "https://stackoverflow.com/users/4908284/alex-carey"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1574850677, "post_id": 59065475, "comment_id": 104374496, "body": "@spickermann updated with sample scenarios thank for helping"}], "answers": [{"tags": [], "owner": {"reputation": 2215, "user_id": 1996540, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/609b69cbb09257883a4e32d7d5aff098?s=128&d=identicon&r=PG", "display_name": "ZedTuX", "link": "https://stackoverflow.com/users/1996540/zedtux"}, "is_accepted": false, "score": 0, "last_activity_date": 1574862338, "creation_date": 1574862338, "answer_id": 59071629, "question_id": 59065475, "link": "https://stackoverflow.com/questions/59065475/design-ruby-create-multiple-csv-files-as-per-user-defined-header-from-same-da/59071629#59071629", "title": "Design - Ruby- Create multiple CSV files as per User defined header From same data source", "body": "<p>What you need is the presenter design pattern.</p>\n\n<p>Your controller will request the data and store it in a local variable, and then your will have to load a presenter for your client passing it the data variable.\nIn response you'll get the final CSV to return to the client.</p>\n\n<p>Let's say you clients have uniq codes, so that a <code>Client</code> model instance has a <code>code</code> attribute which is a string.</p>\n\n<p>So your controller would looks like this:</p>\n\n<p><strong>app/controllers/exports_controller.rb</strong></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class ExportsController &lt; ApplicationController\n  def export\n    data = MyService.fetchData # &lt;== data contains the data you gave as an example\n\n    # Gets the right presenter, initialise it, and build the CSV\n    csv = PresenterFactory.for(current_client).new(data).present\n\n    respond_to do |format|\n      format.html\n      format.csv { send_data csv, filename: \"export-name-for-#{current_client.code}.csv\" }\n    end\n  end\nend\n</code></pre>\n\n<p>The <code>PresenterFactory</code> class would be something like that:</p>\n\n<p><strong>app/models/presenter_factory.rb</strong></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class PresenterFactory\n  def self.for(client)\n    # For client with code \"ABCD\" it will return Presenters::Abcd class\n    \"Presenters::#{client.code.capitalize}\".constantize\n  end\nend\n</code></pre>\n\n<p><em>The factory return the client's presenter class</em></p>\n\n<p>And here is an example for a client's presenter class, for a client having the code <code>ABCD</code>:</p>\n\n<p><strong>app/models/presenters/abcd.rb</strong></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>module Presenters\n  class Abcd\n    def initialize(data)\n      @data = data\n    end\n\n    def present\n      CSV.generate(headers: true) do |csv|\n        # Here is the client's specific CSV header\n        csv &lt;&lt; [\n          'Employee ID',\n          'First Name',\n          # ...\n        ]\n\n        @data.each do |row|\n          # Here is the client's specific CSV row\n          csv &lt;&lt; [\n            row[:employee_id],\n            row[:first_name],\n            # ...\n          ]\n        end\n      end\n    end\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1574890900, "last_edit_date": 1574890900, "creation_date": 1574884276, "answer_id": 59077570, "question_id": 59065475, "link": "https://stackoverflow.com/questions/59065475/design-ruby-create-multiple-csv-files-as-per-user-defined-header-from-same-da/59077570#59077570", "title": "Design - Ruby- Create multiple CSV files as per User defined header From same data source", "body": "<p>You can achieve your objective by constructing a <em>transformation hash</em> whose keys are the names of the columns in the desired CSV file, in order, and whose values are procs, which when called with an argument equal to an element of the given array of hashes, returns an element to be written in a row of the CSV file in the column corresponding to the key.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>require 'csv'\n\ndef construct_csv(fname, arr, transform)\n  CSV.open(fname, \"wb\") do |csv|\n    keys = transform.keys  \n    csv &lt;&lt; keys  \n    arr.each { |h| csv &lt;&lt; keys.map { |k| transform[k].call(h) } }\n  end  \nend  \n</code></pre>\n\n<p><strong>Examples</strong></p>\n\n<p>I will now illustrate how this method is used with various transformations. </p>\n\n<p><em>Common data</em></p>\n\n<pre><code>arr = [{:employee_id=&gt;\"001\", :first_name=&gt;\"John\", :last_name=&gt;\"Dee\",\n        :date_of_birth=&gt;\"10/10/1983\", :salary=&gt;\"100000\", :bonus=&gt;\"50000\" },\n       {:employee_id=&gt;\"002\", :first_name=&gt;\"Alex\", :last_name=&gt;\"Peck\",\n        :date_of_birth=&gt;\"11/01/1988\", :salary=&gt;\"120000\", :bonus=&gt;\"70000\" }]\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>FName = 'temp.csv'\n</code></pre>\n\n<p><em>Write a CSV file with the same keys, in the same order, and the same values</em></p>\n\n<pre><code>keys = arr.first.keys\n  #=&gt; [:employee_id, :first_name, :last_name, :date_of_birth, :salary, :bonus] \ntransform = keys.each_with_object({}) { |k,g| g[k] = -&gt;(h) { h[k] } }\n  #=&gt; {:employee_id=&gt;#&lt;Proc:0x00005bd270a0e710@(irb):451 (lambda)&gt;,\n  #    :first_name=&gt;#&lt;Proc:0x00005bd270a13260@(irb):451 (lambda)&gt;,\n  #    ...\n  #    :bonus=&gt;#&lt;Proc:0x00005bd270a19cc8@(irb):451 (lambda)&gt;} \nconstruct_csv(FName, arr, transform)\n</code></pre>\n\n<p>Let's see what was written.</p>\n\n<pre><code>puts File.read(FName)\nemployee_id,first_name,last_name,date_of_birth,salary,bonus\n001,John,Dee,10/10/1983,100000,50000\n002,Alex,Peck,11/01/1988,120000,70000\n</code></pre>\n\n<p><em>Write a CSV file with the columns reordered</em><sup>1</sup></p>\n\n<pre><code>col_order = [:last_name, :first_name, :employee_id, :salary, :bonus,\n             :date_of_birth]\nkeys = arr.first.keys\norder_map = col_order.each_with_object({}) { |k,h| h[k] = keys.index(k) }\n  #=&gt; {:last_name=&gt;2, :first_name=&gt;1, :employee_id=&gt;0, :salary=&gt;4,\n  #    :bonus=&gt;5, :date_of_birth=&gt;3} \ntransform = col_order.each_with_object({}) { |k,g|\n  g[k] = -&gt;(h) { h[keys[order_map[k]]] } }\n  #=&gt; {:last_name=&gt;#&lt;Proc:0x00005bd270f8e5a0@(irb):511 (lambda)&gt;,\n  #    :first_name=&gt;#&lt;Proc:0x00005bd270f8e550@(irb):511 (lambda)&gt;,\n  #    ...\n  #    :date_of_birth=&gt;#&lt;Proc:0x00005bd270f8e3c0@(irb):511 (lambda)&gt;} \nconstruct_csv(FName, arr, transform)\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>puts File.read(FName)\nlast_name,first_name,employee_id,salary,bonus,date_of_birth\nDee,John,001,100000,50000,10/10/1983\nPeck,Alex,002,120000,70000,11/01/1988\n</code></pre>\n\n<p><em>Write a CSV file with a subset of keys, renamed and reordered</em></p>\n\n<pre><code>keymap = { :FirstName=&gt;:first_name, :LastName=&gt;:last_name, :ID=&gt;:employee_id,\n           :Salary=&gt;:salary, :Bonus=&gt;:bonus } \ntransform = keymap.each_with_object({}) { |(new,old),g| g[new] = -&gt;(h) { h[old] } }\n  #=&gt; {:FirstName=&gt;#&lt;Proc:0x00005bd270d50298@(irb):391 (lambda)&gt;,\n  #    :LastName=&gt;#&lt;Proc:0x00005bd270d50220@(irb):391 (lambda)&gt;,\n  #    ...\n  #    :Bonus=&gt;#&lt;Proc:0x00005bd270d830f8@(irb):391 (lambda)&gt;} \nconstruct_csv(FName, arr, transform)\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>puts File.read(FName)\nFirstName,LastName,ID,Salary,Bonus\nJohn,Dee,001,100000,50000\nAlex,Peck,002,120000,70000\n</code></pre>\n\n<p><em>Write a CSV file after removing keys and adding keys whose values are computed</em></p>\n\n<pre><code>keys_to_remove = [:first_name, :last_name]\nkeys_to_add = [:full_name, :compensation]\nkeys = arr.first.keys + keys_to_add - keys_to_remove\n  #=&gt; [:employee_id, :date_of_birth, :salary, :bonus, :full_name,\n  #    :compensation] \ntransform = keys.each_with_object({}) do |k,h|\n  h[k] =\n  case k\n  when :full_name\n    -&gt;(h) { h[:first_name] + \" \" + h[:last_name] }\n  when :compensation\n    -&gt;(h) { h[:salary].to_i + h[:bonus].to_i }\n  else\n    -&gt;(h) { h[k] }\n  end\nend\n  #=&gt; {:employee_id=&gt;#&lt;Proc:0x00005bd271001000@(irb):501 (lambda)&gt;,\n  #    :date_of_birth=&gt;#&lt;Proc:0x00005bd271000f88@(irb):501 (lambda)&gt;,\n  #    :salary=&gt;#&lt;Proc:0x00005bd271000f10@(irb):501 (lambda)&gt;,\n  #    :bonus=&gt;#&lt;Proc:0x00005bd271000ec0@(irb):501 (lambda)&gt;,\n  #    :full_name=&gt;#&lt;Proc:0x00005bd271000e20@(irb):497 (lambda)&gt;,\n  #    :compensation=&gt;#&lt;Proc:0x00005bd271000dd0@(irb):499 (lambda)&gt;} \nconstruct_csv(FName, arr, transform)\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>puts File.read(FName)\nemployee_id,date_of_birth,salary,bonus,full_name,compensation\n001,10/10/1983,100000,50000,John Dee,150000\n002,11/01/1988,120000,70000,Alex Peck,190000\n</code></pre>\n\n<p><sup>1. I don't understand the reason for doing this but it was mentioned as a possible requirement.</sup></p>\n"}], "owner": {"reputation": 11, "user_id": 4908284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85aae24b76ed1250dd77fbf047bd7fa9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Carey", "link": "https://stackoverflow.com/users/4908284/alex-carey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1574890900, "creation_date": 1574841166, "last_edit_date": 1574853343, "question_id": 59065475, "link": "https://stackoverflow.com/questions/59065475/design-ruby-create-multiple-csv-files-as-per-user-defined-header-from-same-da", "title": "Design - Ruby- Create multiple CSV files as per User defined header From same data source", "body": "<p>I am working on requirements we have data in hash around 100+ keys. we need to generate  CSV file as per user-defined header with some transformation, we may end up having 100+ template \nMain changes will be \n1)  Change column name such as  Fname  \u2013> First name\n2)  Data transformation like Full name \u2013 > First name + Last name (adding 2 column)\n3)  Fixing the position of a column \u2013 Fname should be at 35 positions etc.</p>\n\n<p>please suggest is it possible to define declarative way or any gem available.  Can you let me know any design pattern we can apply here?</p>\n\n<p>Some sample scenarios </p>\n\n<p>I have  input like this with many columns (100+)</p>\n\n<pre><code>[ {:employee_id=&gt;\"001\", :first_name=&gt;\"John\",:last_name=&gt;\"Dee\" :date_of_birth=&gt;\"10/10/1983\", :salary=&gt;\"100000\",:bounus =&gt;\"50000\",......},\n  {:employee_id=&gt;\"002\", :first_name=&gt;\"Alex\",:last_name=&gt;\"Peck\" :date_of_birth=&gt;\"11/01/1988\", :salary=&gt;\"120000\",:bounus =&gt;\"70000\", .........},\n ]\n</code></pre>\n\n<p>Some customer need CSV as </p>\n\n<pre><code>Employee ID, First Name, Last Name, Date of birth, Salary, Bonus\n001,John,Dee,10/10/1983,100000,50000,...\n002,Alex,Peck,11/01/1988,120000,70000,...\n</code></pre>\n\n<p>Others  (only header change)</p>\n\n<pre><code>ID, FName, LName, Dob, Salary, Bounus\n001,John,Dee,10/10/1983,100000,50000,...\n002,Alex,Peck,11/01/1988,120000,70000,...\n</code></pre>\n\n<p>another (merge of colum FName, LName -> Fullname)</p>\n\n<pre><code>ID, Fullname, Dob, Salary, Bounus\n001,John Dee,10/10/1983,100000,50000,...\n002,Alex Peck,11/01/1988,120000,70000,...\n</code></pre>\n\n<p>anothers (merge of column Salary, Bonus -> Salary+ Bonus)</p>\n\n<pre><code>ID, FName, LName, Dob, Salary\n001,John,Dee,10/10/1983,150000,...\n002,Alex,Peck,11/01/1988,190000,...\n</code></pre>\n\n<p>anothers ( column order changed also insted of Dob need age)</p>\n\n<pre><code>FName, LName, ID, age, Salary\nJohn,Dee,001,36,150000,...\nAlex,Peck,003,32,190000,...\n</code></pre>\n\n<p>Like many variations with the same input</p>\n\n<p>Thanks for help </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "view"], "comments": [{"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "edited": false, "score": 0, "creation_date": 1574832909, "post_id": 59063558, "comment_id": 104365989, "body": "Are you using <code>devise</code> for authentication?"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1574832944, "post_id": 59063558, "comment_id": 104366001, "body": "What is your question?"}, {"owner": {"reputation": 5, "user_id": 12360110, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBmhN8YbXintC2sZLOoCwqI0IPnqeJp-pjvnTXVRg=k-s128", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/12360110/rajdeep-singh"}, "reply_to_user": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "edited": false, "score": 0, "creation_date": 1574833186, "post_id": 59063558, "comment_id": 104366078, "body": "@Gabbar nope i am using JWT. But this is simply hardcoded, like i have saved phone and specific password in db and just testing it out. I want to know how can i pass params (phone and password in my view ) to controller method (url in seconf form tag)"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1574833267, "post_id": 59063558, "comment_id": 104366100, "body": "@RajdeepSingh Provide <code>rake routes | grep dashboard</code>"}, {"owner": {"reputation": 5, "user_id": 12360110, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBmhN8YbXintC2sZLOoCwqI0IPnqeJp-pjvnTXVRg=k-s128", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/12360110/rajdeep-singh"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1574833270, "post_id": 59063558, "comment_id": 104366104, "body": "@ray How can i pass params in my view to a controller. I am taking params under first form tag and the second form tags redirects it to the controller upon hitting the submit button but without the params."}, {"owner": {"reputation": 5, "user_id": 12360110, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBmhN8YbXintC2sZLOoCwqI0IPnqeJp-pjvnTXVRg=k-s128", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/12360110/rajdeep-singh"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1574833387, "post_id": 59063558, "comment_id": 104366147, "body": "@ray <code>dashboard GET     &#47;dashboard(.:format)       hulks#new</code>"}, {"owner": {"reputation": 5, "user_id": 12360110, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBmhN8YbXintC2sZLOoCwqI0IPnqeJp-pjvnTXVRg=k-s128", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/12360110/rajdeep-singh"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1574833516, "post_id": 59063558, "comment_id": 104366187, "body": "@ray this new method renders the above mentioned view where i enter <code>phone</code> and <code>password</code>. Now upon hitting the submit button i want the pass <code>phone</code> and <code>password</code> to controller method create for authentication. Upon hitting submit button, it rediercts to right controller method but without params."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 2, "creation_date": 1574833587, "post_id": 59063558, "comment_id": 104366210, "body": "You cannot use <code>&lt;%= form_tag dashboard_path do %&gt;</code> for <code>GET</code>. I will suggets to go through basic. Form is submitted for <code>PUT</code>, <code>POST</code> etc. actions with httb verbs. GET actiobs is used just to fetch data."}, {"owner": {"reputation": 5, "user_id": 12360110, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBmhN8YbXintC2sZLOoCwqI0IPnqeJp-pjvnTXVRg=k-s128", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/12360110/rajdeep-singh"}, "edited": false, "score": 0, "creation_date": 1574833686, "post_id": 59063558, "comment_id": 104366239, "body": "But it is working as expected, also i have ended the first <code>form tag</code> before the <code>post form tag</code>."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1574833861, "post_id": 59063558, "comment_id": 104366319, "body": "Why do you have two <code>form_tag</code>s? With two paths?"}, {"owner": {"reputation": 5, "user_id": 12360110, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBmhN8YbXintC2sZLOoCwqI0IPnqeJp-pjvnTXVRg=k-s128", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/12360110/rajdeep-singh"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1574833982, "post_id": 59063558, "comment_id": 104366373, "body": "@jvillian Yes. The flow is when i hit <code>&#47;dashboard</code> it opens up a login page and i enter the details and when i hit submit button it redirects to <code>&#47;sign_in</code> where authetication logic is written and based on that logic it redirects to another (targeted url) or throws an error."}, {"owner": {"reputation": 743, "user_id": 9558225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ME97i.jpg?s=128&g=1", "display_name": "Neeraj Amoli", "link": "https://stackoverflow.com/users/9558225/neeraj-amoli"}, "edited": false, "score": 0, "creation_date": 1574835099, "post_id": 59063558, "comment_id": 104366734, "body": "@RajdeepSingh please inspect web page (press f12) and check your html, you will understand , there will two form action , and your form is redirect according to you youe closest form action . :) please correct that."}, {"owner": {"reputation": 5, "user_id": 12360110, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBmhN8YbXintC2sZLOoCwqI0IPnqeJp-pjvnTXVRg=k-s128", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/12360110/rajdeep-singh"}, "reply_to_user": {"reputation": 743, "user_id": 9558225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ME97i.jpg?s=128&g=1", "display_name": "Neeraj Amoli", "link": "https://stackoverflow.com/users/9558225/neeraj-amoli"}, "edited": false, "score": 0, "creation_date": 1574835673, "post_id": 59063558, "comment_id": 104366967, "body": "@NeerajAmoli my que is how can i pass <code>params</code> in that view."}, {"owner": {"reputation": 743, "user_id": 9558225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ME97i.jpg?s=128&g=1", "display_name": "Neeraj Amoli", "link": "https://stackoverflow.com/users/9558225/neeraj-amoli"}, "edited": false, "score": 0, "creation_date": 1574836165, "post_id": 59063558, "comment_id": 104367160, "body": "@RajdeepSingh brother  did you inspect web page , you need to remove &lt;%= form_tag sign_in_path do %&gt; this line , now rails engine itself send params value to that action which you defined above"}, {"owner": {"reputation": 743, "user_id": 9558225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ME97i.jpg?s=128&g=1", "display_name": "Neeraj Amoli", "link": "https://stackoverflow.com/users/9558225/neeraj-amoli"}, "edited": false, "score": 0, "creation_date": 1574836252, "post_id": 59063558, "comment_id": 104367191, "body": "@RajdeepSingh as you update question now write this line &lt;%= form_tag sign_in_path do %&gt; after h1 tag"}, {"owner": {"reputation": 5, "user_id": 12360110, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBmhN8YbXintC2sZLOoCwqI0IPnqeJp-pjvnTXVRg=k-s128", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/12360110/rajdeep-singh"}, "reply_to_user": {"reputation": 743, "user_id": 9558225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ME97i.jpg?s=128&g=1", "display_name": "Neeraj Amoli", "link": "https://stackoverflow.com/users/9558225/neeraj-amoli"}, "edited": false, "score": 0, "creation_date": 1574836337, "post_id": 59063558, "comment_id": 104367227, "body": "@NeerajAmoli Done"}, {"owner": {"reputation": 743, "user_id": 9558225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ME97i.jpg?s=128&g=1", "display_name": "Neeraj Amoli", "link": "https://stackoverflow.com/users/9558225/neeraj-amoli"}, "edited": false, "score": 0, "creation_date": 1574836391, "post_id": 59063558, "comment_id": 104367242, "body": "@RajdeepSingh congrats :) please support answer ."}, {"owner": {"reputation": 5, "user_id": 12360110, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBmhN8YbXintC2sZLOoCwqI0IPnqeJp-pjvnTXVRg=k-s128", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/12360110/rajdeep-singh"}, "reply_to_user": {"reputation": 743, "user_id": 9558225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ME97i.jpg?s=128&g=1", "display_name": "Neeraj Amoli", "link": "https://stackoverflow.com/users/9558225/neeraj-amoli"}, "edited": false, "score": 0, "creation_date": 1574838208, "post_id": 59063558, "comment_id": 104367964, "body": "@NeerajAmoli i have low reputation. Please tell me if there is any way i can do that, i will be glad."}, {"owner": {"reputation": 743, "user_id": 9558225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ME97i.jpg?s=128&g=1", "display_name": "Neeraj Amoli", "link": "https://stackoverflow.com/users/9558225/neeraj-amoli"}, "edited": false, "score": 0, "creation_date": 1574838415, "post_id": 59063558, "comment_id": 104368060, "body": "@RajdeepSingh No issue brother , btw are you not able to press comments left upper traingular symbol :)"}, {"owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "reply_to_user": {"reputation": 743, "user_id": 9558225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ME97i.jpg?s=128&g=1", "display_name": "Neeraj Amoli", "link": "https://stackoverflow.com/users/9558225/neeraj-amoli"}, "edited": false, "score": 1, "creation_date": 1574839368, "post_id": 59063558, "comment_id": 104368479, "body": "@NeerajAmoli You should post your solution as an answer, when the OP accepts the answer, you get 15, he gets 2. That&#39;s how the reputation increases."}, {"owner": {"reputation": 743, "user_id": 9558225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ME97i.jpg?s=128&g=1", "display_name": "Neeraj Amoli", "link": "https://stackoverflow.com/users/9558225/neeraj-amoli"}, "reply_to_user": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "edited": false, "score": 0, "creation_date": 1574840606, "post_id": 59063558, "comment_id": 104369027, "body": "@RajdeepSingh please write your original question , as you write your question code as a right answer:)"}, {"owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "reply_to_user": {"reputation": 743, "user_id": 9558225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ME97i.jpg?s=128&g=1", "display_name": "Neeraj Amoli", "link": "https://stackoverflow.com/users/9558225/neeraj-amoli"}, "edited": false, "score": 0, "creation_date": 1574842111, "post_id": 59063558, "comment_id": 104369757, "body": "@NeerajAmoli I am the different Rajdeep you tagged lol!"}], "answers": [{"comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1574840317, "post_id": 59065109, "comment_id": 104368911, "body": "Is this an answer? How is this different to the code already posted in the question?"}, {"owner": {"reputation": 5, "user_id": 12360110, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBmhN8YbXintC2sZLOoCwqI0IPnqeJp-pjvnTXVRg=k-s128", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/12360110/rajdeep-singh"}, "edited": false, "score": 0, "creation_date": 1574840939, "post_id": 59065109, "comment_id": 104369206, "body": "i will re edit and post the original code to avoid confusion. Sorry"}], "tags": [], "owner": {"reputation": 743, "user_id": 9558225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ME97i.jpg?s=128&g=1", "display_name": "Neeraj Amoli", "link": "https://stackoverflow.com/users/9558225/neeraj-amoli"}, "is_accepted": true, "score": 2, "last_activity_date": 1574858820, "last_edit_date": 1574858820, "creation_date": 1574839708, "answer_id": 59065109, "question_id": 59063558, "link": "https://stackoverflow.com/questions/59063558/passing-params-from-views-to-controller/59065109#59065109", "title": "Passing params from views to controller", "body": "<p>There are two <code>form_tag</code> in your example. Just change it to this:</p>\n\n<pre><code> &lt;h1&gt;Log In&lt;/h1&gt;\n &lt;%= form_tag sign_in_path do %&gt;\n &lt;div class=\"field\"&gt;\n   &lt;%= label_tag :phone %&gt;&lt;br&gt;\n   &lt;%= text_field_tag :phone %&gt;\n &lt;/div&gt;\n&lt;div class=\"field\"&gt;\n  &lt;%= label_tag :password %&gt;&lt;br&gt;\n  &lt;%= password_field_tag :password %&gt;\n&lt;/div&gt;\n&lt;div class=\"actions\"&gt;\n &lt;%= submit_tag \"Log In\"%&gt;\n&lt;/div&gt;\n</code></pre>\n\n  \n"}], "owner": {"reputation": 5, "user_id": 12360110, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBmhN8YbXintC2sZLOoCwqI0IPnqeJp-pjvnTXVRg=k-s128", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/12360110/rajdeep-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 59065109, "answer_count": 1, "score": 0, "last_activity_date": 1574858820, "creation_date": 1574832405, "last_edit_date": 1574841049, "question_id": 59063558, "link": "https://stackoverflow.com/questions/59063558/passing-params-from-views-to-controller", "title": "Passing params from views to controller", "body": "<p>I have a login form view for my rails app.</p>\n\n<p><strong>Login form code -</strong> </p>\n\n<pre><code>&lt;h1&gt;Log In&lt;/h1&gt;\n&lt;%= form_tag dashboard_path do %&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= label_tag :phone %&gt;&lt;br&gt;\n    &lt;%= text_field_tag :phone %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= label_tag :password %&gt;&lt;br&gt;\n    &lt;%= password_field_tag :password %&gt;\n  &lt;/div&gt;\n  &lt;% end %&gt;\n  &lt;%= form tag sign_in_path do %&gt;\n  &lt;div class=\"actions\"&gt;\n    &lt;%= submit_tag \"Log In\"%&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>So what I am trying here is that the submit button redirects to controller#action (sign_in_path) with <code>phone</code> and <code>password</code> as params that I entered in login page.</p>\n\n<p>This login code is copied as I have zero html/angular knowledge also I am using jbuilder for rest of the views and not ERB.</p>\n\n<p><strong>UPDATE</strong> - \n<code>stdout</code> after first <code>GET</code> request</p>\n\n<p><code>Started GET \"/dashboard\" for 127.0.0.1 at 2019-11-27 11:29:49 +0530\nProcessing by HulksController#new as HTML\n  Rendering hulks/new.html.erb\n  Rendered hulks/new.html.erb (Duration: 1.0ms | Allocations: 590)\nCompleted 200 OK in 2ms (Views: 1.9ms | ActiveRecord: 0.0ms | Allocations: 1172)</code></p>\n\n<p><code>stdout</code> after second <code>post</code> request, after hitting the login button.</p>\n\n<p><code>Started POST \"/sign_in\" for 127.0.0.1 at 2019-11-27 11:30:03 +0530\nProcessing by HulksController#create as HTML\n  Parameters: {\"commit\"=&gt;\"Log In\"}\nApp 11639 output: {\"commit\"=&gt;\"Log In\", \"controller\"=&gt;\"hulks\", \"action\"=&gt;\"create\"}\nApp 11639 output: \nCompleted 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 1273)\n</code></p>\n"}, {"tags": ["arrays", "ruby", "loops", "methods", "increment"], "answers": [{"comments": [{"owner": {"reputation": 28433, "user_id": 1565525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2e3a5d0911464ffa3d7ac48475cf98d?s=128&d=identicon&r=PG", "display_name": "Fabio", "link": "https://stackoverflow.com/users/1565525/fabio"}, "edited": false, "score": 0, "creation_date": 1574833521, "post_id": 59063705, "comment_id": 104366189, "body": "<code>.keys</code>? Does <code>select</code> return <code>Hash</code>?"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 28433, "user_id": 1565525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2e3a5d0911464ffa3d7ac48475cf98d?s=128&d=identicon&r=PG", "display_name": "Fabio", "link": "https://stackoverflow.com/users/1565525/fabio"}, "edited": false, "score": 1, "creation_date": 1574833619, "post_id": 59063705, "comment_id": 104366217, "body": "@Fabio: When applied to a <code>Hash</code>, <a href=\"https://apidock.com/ruby/Hash/select\" rel=\"nofollow noreferrer\">yes</a>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1574838663, "post_id": 59063705, "comment_id": 104368168, "body": "A variant of the calculation of <code>counts</code> that was popular when I was a kid is <code>counts = contributors.each_with_object({}) { |contributor, counts|  counts[contributor] = (counts[contributor] || 0) + 1 }</code>."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 2, "last_activity_date": 1574834339, "last_edit_date": 1574834339, "creation_date": 1574833149, "answer_id": 59063705, "question_id": 59063487, "link": "https://stackoverflow.com/questions/59063487/how-to-manually-increment-in-ruby/59063705#59063705", "title": "How to manually increment in ruby?", "body": "<p>Using <code>Array#count</code> in a loop is suboptimal (complexity <code>O(N^2)</code>).</p>\n\n<p>To increment a variable, you use <code>v += 1</code>. This is the natural way of doing it:</p>\n\n<pre><code>counts = contributors.each_with_object(Hash.new(0)) { |contributor, counts|\n  counts[contributor] += 1\n}\nmore_than_twice = counts.select { |contributor, count| count &gt; 2 }.keys\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1574839670, "last_edit_date": 1574839670, "creation_date": 1574834778, "answer_id": 59064010, "question_id": 59063487, "link": "https://stackoverflow.com/questions/59063487/how-to-manually-increment-in-ruby/59064010#59064010", "title": "How to manually increment in ruby?", "body": "<pre><code>class Author\n  attr_reader :name\n  def initialize(name)\n    @name = name\n  end\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>contributors = [[\"Dassey Davidson\", 1], [\"Alice Allison\", 3],\n                [\"Bob Bryce\", 3]].\n  flat_map { |name, reps| [Author.new(name)] * reps }\n  #=&gt; [#&lt;Author:0x00005bd271073ce0 @name=\"Dassey Davidson\"&gt;,\n  #    #&lt;Author:0x00005bd271073c68 @name=\"Alice Allison\"&gt;,\n  #    #&lt;Author:0x00005bd271073c68 @name=\"Alice Allison\"&gt;,\n  #    #&lt;Author:0x00005bd271073c68 @name=\"Alice Allison\"&gt;,\n  #    #&lt;Author:0x00005bd271073bc8 @name=\"Bob Bryce\"&gt;,\n  #    #&lt;Author:0x00005bd271073bc8 @name=\"Bob Bryce\"&gt;,\n  #    #&lt;Author:0x00005bd271073bc8 @name=\"Bob Bryce\"&gt;] \n</code></pre>\n\n<p>We can object the desired array as follows.</p>\n\n<pre><code>contributors.group_by(&amp;:itself).\n             select { |_, arr| arr.size &gt; 2 }.\n             keys\n  #=&gt; [#&lt;Author:0x00005bd271073c68 @name=\"Alice Allison\"&gt;,\n  #    #&lt;Author:0x00005bd271073bc8 @name=\"Bob Bryce\"&gt;] \n</code></pre>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.6.3/Enumerable.html#method-i-group_by\" rel=\"nofollow noreferrer\">Enumerable#group_by</a>, <a href=\"https://ruby-doc.org/core-2.6.5/Object.html#method-i-itself\" rel=\"nofollow noreferrer\">Object#itself</a> and <a href=\"https://ruby-doc.org/core-2.6.3/Hash.html#method-i-select\" rel=\"nofollow noreferrer\">Hash#select</a> (which, unlike <code>Array#select</code> and <code>Enumerable#select</code>, returns a hash).</p>\n\n<p>The steps are as follows:</p>\n\n<pre><code>g = contributors.group_by(&amp;:itself)\n  #=&gt; {#&lt;Author:0x00005bd271073ce0 @name=\"Dassey Davidson\"&gt;=&gt;\n  #      [#&lt;Author:0x00005bd271073ce0 @name=\"Dassey Davidson\"&gt;],\n  #    #&lt;Author:0x00005bd271073c68 @name=\"Alice Allison\"&gt;=&gt;\n  #      [#&lt;Author:0x00005bd271073c68 @name=\"Alice Allison\"&gt;,\n  #       #&lt;Author:0x00005bd271073c68 @name=\"Alice Allison\"&gt;,\n  #       #&lt;Author:0x00005bd271073c68 @name=\"Alice Allison\"&gt;],\n  #    #&lt;Author:0x00005bd271073bc8 @name=\"Bob Bryce\"&gt;=&gt;\n  #      [#&lt;Author:0x00005bd271073bc8 @name=\"Bob Bryce\"&gt;,\n  #       #&lt;Author:0x00005bd271073bc8 @name=\"Bob Bryce\"&gt;,\n  #       #&lt;Author:0x00005bd271073bc8 @name=\"Bob Bryce\"&gt;]} \n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>h = g.select { |_, arr| arr.size &gt; 2 }\n  #=&gt; {#&lt;Author:0x00005bd271073c68 @name=\"Alice Allison\"&gt;=&gt;\n  #      [#&lt;Author:0x00005bd271073c68 @name=\"Alice Allison\"&gt;,\n  #       #&lt;Author:0x00005bd271073c68 @name=\"Alice Allison\"&gt;,\n  #       #&lt;Author:0x00005bd271073c68 @name=\"Alice Allison\"&gt;],\n  #    #&lt;Author:0x00005bd271073bc8 @name=\"Bob Bryce\"&gt;=&gt;\n  #      [#&lt;Author:0x00005bd271073bc8 @name=\"Bob Bryce\"&gt;,\n  #       #&lt;Author:0x00005bd271073bc8 @name=\"Bob Bryce\"&gt;,\n  #       #&lt;Author:0x00005bd271073bc8 @name=\"Bob Bryce\"&gt;]} \n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>h.keys\n  #=&gt; &lt;as above&gt;\n</code></pre>\n\n<p>This approach, using <code>Enumerable#group_by</code>, and @Amadan's, using the form of <code>Hash::new</code> that uses a default value of zero, are the two standard ways of dealing with problems of this kind. The choice is largely a matter of taste. I generally prefer the <code>Hash::new</code> method, but either will do.</p>\n\n<p>Some time ago I proposed that a method <a href=\"https://bugs.ruby-lang.org/issues/11815\" rel=\"nofollow noreferrer\">Array#difference</a> be added to the Ruby core.<sup>1</sup> Alas, the proposal went nowhere. Here it would provide a simple solution:</p>\n\n<pre><code>(contributors.difference((contributors.uniq * 2).flatten)).uniq\n</code></pre>\n\n<p><sup>1 Not to be confused with the method <a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-i-difference\" rel=\"nofollow noreferrer\">Array#difference</a> that made its debut in v2.6.</sup>  </p>\n"}], "owner": {"reputation": 13, "user_id": 12294781, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tGrRHKk6Fmc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdsrXytcNJeJtZk8IpxZEEbFLbL0Q/photo.jpg?sz=128", "display_name": "Natali K", "link": "https://stackoverflow.com/users/12294781/natali-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1574840263, "creation_date": 1574832098, "last_edit_date": 1574840263, "question_id": 59063487, "link": "https://stackoverflow.com/questions/59063487/how-to-manually-increment-in-ruby", "title": "How to manually increment in ruby?", "body": "<p>Given an array of objects, whats a more \"manual\" way of incrementing to find the object that occurs greater than 2 times? I've figured out two \"shorter\" methods of solving this but am wondering if there's a more abstract way, a way to \"manually\" increment with a counter of some sort... The result should return an array of contributors that occur more than twice.</p>\n\n<p>i.e. <code>[#&lt;Author:0x00007ff447a94c58 @name=\"Alice Allison\"&gt;, #&lt;Author:0x00007ff447a94c08 @name=\"Bob Bryce\"&gt;]</code></p>\n\n<pre><code>contributors = \n=&gt; #[&lt;Author:0x00007fccbc220a48 @name=\"Dassey Davidson\"&gt;,\n#&lt;Author:0x00007fe1d9374de0 @name=\"Alice Allison\"&gt;,\n#&lt;Author:0x00007fe1d9374de0 @name=\"Alice Allison\"&gt;,\n#&lt;Author:0x00007fe1d9374de0 @name=\"Alice Allison\"&gt;,\n#&lt;Author:0x00007fe1d9374d90 @name=\"Bob Bryce\"&gt;,\n#&lt;Author:0x00007fe1d9374d90 @name=\"Bob Bryce\"&gt;,\n#&lt;Author:0x00007fe1d9374d90 @name=\"Bob Bryce\"&gt;]\n\n\n# method 1:\ndef contributing_authors\n  contributors.select do |contributor| \n    contributors.count(contributor) &gt; 2 \n  end.uniq\nend \n\n\n# method 2:\ndef new_contributing_authors\n  storage = []\n  contributors.each do |contributor|\n    if contributors.count(contributor) &gt; 2\n      storage &lt;&lt; contributor\n    end\n  end \n  storage.uniq\nend \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 7980, "user_id": 952129, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/H85gp.jpg?s=128&g=1", "display_name": "Said Kaldybaev", "link": "https://stackoverflow.com/users/952129/said-kaldybaev"}, "edited": false, "score": 0, "creation_date": 1574818386, "post_id": 59060701, "comment_id": 104362806, "body": "this might help <a href=\"https://stackoverflow.com/questions/55642198/problems-with-infinite-time-range-in-rails\" title=\"problems with infinite time range in rails\">stackoverflow.com/questions/55642198/&hellip;</a> I&#39;m afraid date and far-future is the only option"}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1574820175, "post_id": 59060891, "comment_id": 104363115, "body": "Looking for infinity is likely to make the sysadmin or DBA descend on him for killing the system&#39;s response time. Storing and searching for <code>&gt;=</code> a start date seems safer."}, {"owner": {"reputation": 3612, "user_id": 2865270, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1198391393/picture?type=large", "display_name": "Fred Willmore", "link": "https://stackoverflow.com/users/2865270/fred-willmore"}, "edited": false, "score": 1, "creation_date": 1574836710, "post_id": 59060891, "comment_id": 104367368, "body": "I will need to make Foo&#39;s behavior and that of any object that interacts with Foo conditional on the existence of the limit, in addition to its actual value. I would like the code&#39;s purpose to be easily understood by looking at it. I could create a value for the limit thats 300 years in the future, but that requires any object that interacts with Foo to know the specific value I\u2019ve chosen to represent a nonexistent limit. But both Ruby and Postgres support an unlimited date range. I trust Ruby and Postgres to implement this data structure without needing to count to infinity."}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1574818903, "last_edit_date": 1574818903, "creation_date": 1574810881, "answer_id": 59060891, "question_id": 59060701, "link": "https://stackoverflow.com/questions/59060701/how-can-i-save-an-infinite-date-range-to-postgres-in-ruby-on-rails/59060891#59060891", "title": "How can I save an infinite date range to Postgres in Ruby on Rails?", "body": "<p>But WHY do you need infinity?  Can you just do something like:</p>\n\n<pre><code>[*Date.today..(300.years.from_now).to_date]\n</code></pre>\n\n<p>Or maybe just</p>\n\n<pre><code>range = [Date.today, Date.new(2300,1,1)]\n</code></pre>\n\n<p>If your program is still relevant in 2300, call me.  Until then, I'll be waiting. :)</p>\n"}, {"comments": [{"owner": {"reputation": 7980, "user_id": 952129, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/H85gp.jpg?s=128&g=1", "display_name": "Said Kaldybaev", "link": "https://stackoverflow.com/users/952129/said-kaldybaev"}, "edited": false, "score": 1, "creation_date": 1574818442, "post_id": 59061721, "comment_id": 104362817, "body": "are you sure it will be stored, I don&#39;t think so."}, {"owner": {"reputation": 2412, "user_id": 1253504, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ba0b6bef219b34fa4f2d014046ff987?s=128&d=identicon&r=PG", "display_name": "kasperite", "link": "https://stackoverflow.com/users/1253504/kasperite"}, "reply_to_user": {"reputation": 7980, "user_id": 952129, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/H85gp.jpg?s=128&g=1", "display_name": "Said Kaldybaev", "link": "https://stackoverflow.com/users/952129/said-kaldybaev"}, "edited": false, "score": 0, "creation_date": 1574818662, "post_id": 59061721, "comment_id": 104362864, "body": "yes, it does. Tested with ruby 2.5.5, rails 5.1.7, postgres 9.6"}, {"owner": {"reputation": 3612, "user_id": 2865270, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1198391393/picture?type=large", "display_name": "Fred Willmore", "link": "https://stackoverflow.com/users/2865270/fred-willmore"}, "edited": false, "score": 1, "creation_date": 1576518353, "post_id": 59061721, "comment_id": 104917513, "body": "so I just discovered that while this works: <code>Date.today...Date::Infinity.new</code>, this gives me an error: <code>(-Date::Infinity.new)...Date.today</code> - <code>*** ArgumentError Exception: bad value for range</code>."}], "tags": [], "owner": {"reputation": 2412, "user_id": 1253504, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ba0b6bef219b34fa4f2d014046ff987?s=128&d=identicon&r=PG", "display_name": "kasperite", "link": "https://stackoverflow.com/users/1253504/kasperite"}, "is_accepted": true, "score": 1, "last_activity_date": 1574820213, "last_edit_date": 1574820213, "creation_date": 1574817782, "answer_id": 59061721, "question_id": 59060701, "link": "https://stackoverflow.com/questions/59060701/how-can-i-save-an-infinite-date-range-to-postgres-in-ruby-on-rails/59061721#59061721", "title": "How can I save an infinite date range to Postgres in Ruby on Rails?", "body": "<p>You could try</p>\n\n<pre><code>Foo.create(effective_date_range: (Date.today...Date::Infinity.new))\n</code></pre>\n\n<p>The value in PostgreSQl will look like this: <code>[2019-11-27,)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 3612, "user_id": 2865270, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1198391393/picture?type=large", "display_name": "Fred Willmore", "link": "https://stackoverflow.com/users/2865270/fred-willmore"}, "is_accepted": false, "score": 0, "last_activity_date": 1574876125, "creation_date": 1574876125, "answer_id": 59075646, "question_id": 59060701, "link": "https://stackoverflow.com/questions/59060701/how-can-i-save-an-infinite-date-range-to-postgres-in-ruby-on-rails/59075646#59075646", "title": "How can I save an infinite date range to Postgres in Ruby on Rails?", "body": "<p>I prefer the accepted answer, but this also works and might prove useful if someone is working with different versions of Ruby/Rails/Postgres:</p>\n\n<pre><code>Foo.create(effective_date_range: \"[#{Date.today.to_s(:db)},)\")\n</code></pre>\n"}], "owner": {"reputation": 3612, "user_id": 2865270, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1198391393/picture?type=large", "display_name": "Fred Willmore", "link": "https://stackoverflow.com/users/2865270/fred-willmore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 416, "favorite_count": 0, "accepted_answer_id": 59061721, "answer_count": 3, "score": 2, "last_activity_date": 1574876125, "creation_date": 1574809667, "question_id": 59060701, "link": "https://stackoverflow.com/questions/59060701/how-can-i-save-an-infinite-date-range-to-postgres-in-ruby-on-rails", "title": "How can I save an infinite date range to Postgres in Ruby on Rails?", "body": "<p>I'm using:\nRails 5.2.3\nRuby 2.6.3\nPostgreSQL 11.2</p>\n\n<p>I have a model Foo with a field effective_date_range, here is the migration to create:</p>\n\n<pre><code>class CreateFoos &lt; ActiveRecord::Migration[5.2]\n  def change\n    create_table :foos do |t|\n      t.daterange :effective_date_range\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>I get an error trying to create a record with an endless date range:</p>\n\n<pre><code>Foo.create(effective_date_range: (Date.today...nil))\n&gt; RangeError: cannot get the last element of endless range\n</code></pre>\n\n<p>Ruby 2.6.3 and Postgres 11.2 both support unlimited ranges. How can I get ActiveRecord to talk nice to Postgres?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "graphql"], "comments": [{"owner": {"reputation": 1444, "user_id": 188870, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f1945436277d2a4ae7ba54e77cdeb853?s=128&d=identicon&r=PG", "display_name": "unflores", "link": "https://stackoverflow.com/users/188870/unflores"}, "edited": false, "score": 0, "creation_date": 1574811286, "post_id": 59060696, "comment_id": 104361168, "body": "Typically when people refer to DRY it is about not repeating knowledge. The amount of times a variable name shows up is not necessarily a problem. Something not being DRY would be if you saw the same function declared in multiple different files or the same constant living being declared in multiple different places. That constant should have one concrete source. While you may find it annoying, I don&#39;t actually see a problem with this code."}, {"owner": {"reputation": 336, "user_id": 12288625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a40ab3426d36dd22579dbfcfa7a67248?s=128&d=identicon&r=PG", "display_name": "gueorgui", "link": "https://stackoverflow.com/users/12288625/gueorgui"}, "reply_to_user": {"reputation": 1444, "user_id": 188870, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f1945436277d2a4ae7ba54e77cdeb853?s=128&d=identicon&r=PG", "display_name": "unflores", "link": "https://stackoverflow.com/users/188870/unflores"}, "edited": false, "score": 0, "creation_date": 1574873551, "post_id": 59060696, "comment_id": 104387449, "body": "@unflores That makes sense, it just seems odd to me that there would be no way around this verbosity as Ruby got me used to more concise code :) Thanks for your feedback!"}, {"owner": {"reputation": 1444, "user_id": 188870, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f1945436277d2a4ae7ba54e77cdeb853?s=128&d=identicon&r=PG", "display_name": "unflores", "link": "https://stackoverflow.com/users/188870/unflores"}, "edited": false, "score": 0, "creation_date": 1574895311, "post_id": 59060696, "comment_id": 104396102, "body": "Honestly, I&#39;ve spent way to much time in the past trying to remove duplication with meta-programming of some sort only to realize that I can&#39;t search on it. There are plenty of cases for keeping things DRY, but sometimes more code is the right answer. /shrug"}], "answers": [{"comments": [{"owner": {"reputation": 336, "user_id": 12288625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a40ab3426d36dd22579dbfcfa7a67248?s=128&d=identicon&r=PG", "display_name": "gueorgui", "link": "https://stackoverflow.com/users/12288625/gueorgui"}, "edited": false, "score": 1, "creation_date": 1574873488, "post_id": 59061210, "comment_id": 104387411, "body": "Thank you, this is exactly the sort of thing I was trying to figure out. I&#39;ve accepted the answer!"}], "tags": [], "owner": {"reputation": 1231, "user_id": 2230115, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sGX51.png?s=128&g=1", "display_name": "iCodeSometime", "link": "https://stackoverflow.com/users/2230115/icodesometime"}, "is_accepted": false, "score": 2, "last_activity_date": 1574873943, "last_edit_date": 1574873943, "creation_date": 1574813415, "answer_id": 59061210, "question_id": 59060696, "link": "https://stackoverflow.com/questions/59060696/graphql-ruby-how-to-write-dry-mutations-with-multiple-parameters/59061210#59061210", "title": "GraphQL Ruby: How to write DRY mutations with multiple parameters?", "body": "<p>If you'd like, you could do something like this:</p>\n\n<pre><code>[\n  :email,\n  :password,\n  :family_name,\n  :family_name_phonetic,\n  :given_name,\n  :given_name_phonetic\n].each do |arg|\n  argument arg, String, required: true\nend\n</code></pre>\n\n<p>You might think any more than this is overkill, but Ruby is <em>very</em> flexible. If you really wanted to, you could even do something like</p>\n\n<pre><code>def resolve(email:, password:,\n            family_name:, family_name_phonetic:,\n            given_name:, given_name_phonetic:,\n            newsletter_optin:)\n  result = {\n    token: nil,\n    user: nil\n  }\n  params = method(__method__).parameters.map(&amp;:last)\n  opts = params.map{|p| [p, eval(p.to_s)]}.to_h\n  new_user = User.new(opts)\n  if new_user.save!\n    result[:token] = new_user.token\n    result[:user] = new_user\n  end\n  result\nend\n</code></pre>\n\n<p>You can see <a href=\"https://stackoverflow.com/a/26552104/2230115\">this answer</a> for an explanation</p>\n\n<p>If you wanted even more than this, you could use a more detailed field list, and <code>define_method</code> - you could get it all the way to the point where you only type e.g. <code>:email</code> once.</p>\n\n<p>Would that be better? Maybe, if you've got hundreds of these to do.\nOr if you want to start defining things at runtime.</p>\n"}, {"tags": [], "owner": {"reputation": 336, "user_id": 12288625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a40ab3426d36dd22579dbfcfa7a67248?s=128&d=identicon&r=PG", "display_name": "gueorgui", "link": "https://stackoverflow.com/users/12288625/gueorgui"}, "is_accepted": true, "score": 4, "last_activity_date": 1574900599, "creation_date": 1574900599, "answer_id": 59080174, "question_id": 59060696, "link": "https://stackoverflow.com/questions/59060696/graphql-ruby-how-to-write-dry-mutations-with-multiple-parameters/59080174#59080174", "title": "GraphQL Ruby: How to write DRY mutations with multiple parameters?", "body": "<p>Answering my own question. The correct way to not have to deal with so many parameters is to use Input Objects instead of separate parameters. From <a href=\"https://graphql-ruby.org/type_definitions/input_objects.html\" rel=\"nofollow noreferrer\">the graphql-ruby documentation</a>: </p>\n\n<blockquote>\n  <p>Input object types are complex inputs for GraphQL operations. They\u2019re great for fields that need a lot of structured input, like mutations or search fields.</p>\n</blockquote>\n\n<p>So I've defined my Input Object as such:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>module Types\n  class UserAttributes &lt; Types::BaseInputObject\n    description 'Attributes for creating or updating a user'\n    argument :email, String, required: true\n    argument :password, String, required: true\n    argument :family_name, String, required: true\n    argument :family_name_phonetic, String, required: true\n    argument :given_name, String, required: true\n    argument :given_name_phonetic, String, required: true\n    argument :newsletter_optin, Boolean, required: false\n  end\nend\n</code></pre>\n\n<p>and then refactored my mutation like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>module Mutations\n  class SignUpMutation &lt; Mutations::BaseMutation\n    argument :attributes, Types::UserAttributes, required: true\n\n    field :token, String, null: true\n    field :user, Types::UserType, null: true\n\n    def resolve(attributes:)\n      result = {\n        token: nil,\n        user: nil\n      }\n      new_user = User.new(attributes.to_hash)\n      if new_user.save!\n        result[:token] = new_user.token\n        result[:user] = new_user\n      end\n      result\n    end\n  end\nend\n</code></pre>\n\n<p>Finally, this code feels more ruby-like :)</p>\n"}, {"tags": [], "owner": {"reputation": 28805, "user_id": 1177636, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/9UlG1.jpg?s=128&g=1", "display_name": "Yi Zeng", "link": "https://stackoverflow.com/users/1177636/yi-zeng"}, "is_accepted": false, "score": 1, "last_activity_date": 1582487205, "creation_date": 1582487205, "answer_id": 60366166, "question_id": 59060696, "link": "https://stackoverflow.com/questions/59060696/graphql-ruby-how-to-write-dry-mutations-with-multiple-parameters/60366166#60366166", "title": "GraphQL Ruby: How to write DRY mutations with multiple parameters?", "body": "<p>You may try double splat (**) operator.</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>module Mutations\n  class SignUpMutation &lt; Mutations::BaseMutation\n    argument :email, String, required: true\n    argument :password, String, required: true\n    argument :family_name, String, required: true\n    argument :family_name_phonetic, String, required: true\n    argument :given_name, String, required: true\n    argument :given_name_phonetic, String, required: true\n    argument :newsletter_optin, Boolean, required: false\n\n    field :token, String, null: true\n    field :user, Types::UserType, null: true\n\n    def resolve(**arguments)\n      result = {\n        token: nil,\n        user: nil\n      }\n\n      new_user = User.new(\n        email: arguments[:email],\n        password: arguments[:password],\n        family_name: arguments[:family_name],\n        family_name_phonetic: arguments[:family_name_phonetic],\n        given_name: arguments[:given_name],\n        given_name_phonetic: arguments[:given_name_phonetic],\n        newsletter_optin: arguments[:newsletter_optin]\n      )\n\n      if new_user.save!\n        result[:token] = new_user.token\n        result[:user] = new_user\n      end\n\n      result\n    end\n  end\nend\n</code></pre>\n\n<p>Of course, creating a new type like you have done would be neater. But there're cases you can combine them together, like</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>module Mutations\n  class SignUpMutation &lt; Mutations::BaseMutation\n    argument :another_attribute, String, required: true\n    argument :attributes, Types::UserAttributes, required: true\n\n    field :token, String, null: true\n    field :user, Types::UserType, null: true\n\n    def resolve(**arguments)\n      result = {\n        token: nil,\n        user: nil\n      }\n\n      # use arguments[:another_attribute] for something else.\n\n      new_user = User.new(arguments[:attributes].to_hash)\n\n      if new_user.save!\n        result[:token] = new_user.token\n        result[:user] = new_user\n      end\n\n      result\n    end\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 768, "user_id": 924050, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/YMPTF.jpg?s=128&g=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/924050/robin"}, "is_accepted": false, "score": 0, "last_activity_date": 1596142657, "last_edit_date": 1596142657, "creation_date": 1596142227, "answer_id": 63181198, "question_id": 59060696, "link": "https://stackoverflow.com/questions/59060696/graphql-ruby-how-to-write-dry-mutations-with-multiple-parameters/63181198#63181198", "title": "GraphQL Ruby: How to write DRY mutations with multiple parameters?", "body": "<p>In your case I would use input objects as well, but what would you do if you had an existing API with clients relying on the schema and you want to &quot;DRY up&quot; those duplicated arguments that are all the same across different mutations/fields?</p>\n<p>If you just go ahead and implement a new input object you'll change the schema and the clients will very likely break. I suppose there is no way of keeping the schema identical when moving existing arguments into an input object, right?</p>\n"}, {"tags": [], "owner": {"reputation": 86, "user_id": 7185662, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n0lS0.jpg?s=128&g=1", "display_name": "Lubdhak", "link": "https://stackoverflow.com/users/7185662/lubdhak"}, "is_accepted": false, "score": 0, "last_activity_date": 1598996731, "creation_date": 1598996731, "answer_id": 63695863, "question_id": 59060696, "link": "https://stackoverflow.com/questions/59060696/graphql-ruby-how-to-write-dry-mutations-with-multiple-parameters/63695863#63695863", "title": "GraphQL Ruby: How to write DRY mutations with multiple parameters?", "body": "<p>A better approach without disturbing the existing GraphQL schema would be to define a InputType with all the common arguments like:</p>\n<pre><code>module Types\n    module Inputs\n        class CommonInputType &lt; Types::Root::BaseInputObject\n            graphql_name(&quot;my_common_input_type&quot;)\n\n            argument :email, String, required: true\n            argument :newsletter_optin, Boolean, required: true\n            ...\n            argument :posts, [Types::Inputs::Post], required: true\n        end\n    end\nend\n</code></pre>\n<p>&amp; use it in some mutation with additional arguments like:</p>\n<pre><code>module Mutations\n    class CreateUser &lt; Mutations::BaseMutation\n\n        argument :additional_arg_one, ID, required: true\n        argument :additional_arg_two, String, required: false\n        ...\n\n        Types::Inputs::CommonInputType.arguments.each do |arg,properties|\n          argument arg.to_sym, properties.graphql_definition.type\n        end\n\n    end\nend\n</code></pre>\n"}], "owner": {"reputation": 336, "user_id": 12288625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a40ab3426d36dd22579dbfcfa7a67248?s=128&d=identicon&r=PG", "display_name": "gueorgui", "link": "https://stackoverflow.com/users/12288625/gueorgui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1686, "favorite_count": 0, "accepted_answer_id": 59080174, "answer_count": 5, "score": 3, "last_activity_date": 1598996731, "creation_date": 1574809650, "question_id": 59060696, "link": "https://stackoverflow.com/questions/59060696/graphql-ruby-how-to-write-dry-mutations-with-multiple-parameters", "title": "GraphQL Ruby: How to write DRY mutations with multiple parameters?", "body": "<p>I'm writing a <a href=\"https://github.com/waiting-for-dev/devise-jwt/\" rel=\"nofollow noreferrer\">devise-jwt</a>-based authentication system for my <a href=\"https://graphql-ruby.org/\" rel=\"nofollow noreferrer\">graphql-ruby</a> using app. In the process, I've made a mutation for creating a new user account, which takes 7 parameters, which creates quite a lot of repetition in my code:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>module Mutations\n  class SignUpMutation &lt; Mutations::BaseMutation\n    argument :email, String, required: true\n    argument :password, String, required: true\n    argument :family_name, String, required: true\n    argument :family_name_phonetic, String, required: true\n    argument :given_name, String, required: true\n    argument :given_name_phonetic, String, required: true\n    argument :newsletter_optin, Boolean, required: false\n\n    field :token, String, null: true\n    field :user, Types::UserType, null: true\n\n    def resolve(email:, password:,\n                family_name:, family_name_phonetic:,\n                given_name:, given_name_phonetic:,\n                newsletter_optin:\n               )\n      result = {\n        token: nil,\n        user: nil\n      }\n      new_user = User.new(\n        email: email,\n        password: password,\n        family_name: family_name,\n        family_name_phonetic: family_name_phonetic,\n        given_name: given_name,\n        given_name_phonetic: given_name_phonetic,\n        newsletter_optin: newsletter_optin\n      )\n      if new_user.save!\n        result[:token] = new_user.token\n        result[:user] = new_user\n      end\n      result\n    end\n  end\nend\n\n</code></pre>\n\n<p>How could I DRY this up to avoid repeating the names of the mutation arguments all over the place?</p>\n\n<p>Thank you in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 4, "creation_date": 1574809764, "post_id": 59060635, "comment_id": 104360733, "body": "It doesn\u2019t matter when you do it; it\u2019s just code. But you\u2019re describing instance modification, not class modification, and there\u2019s probably a better way to implement it."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 1, "creation_date": 1574809912, "post_id": 59060635, "comment_id": 104360771, "body": "Can you give an example of what you may have tried. see <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}, {"owner": {"reputation": 1, "user_id": 10806319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2313e1e532eae4da91067ca730afeffc?s=128&d=identicon&r=PG&f=1", "display_name": "dani", "link": "https://stackoverflow.com/users/10806319/dani"}, "edited": false, "score": 0, "creation_date": 1574811046, "post_id": 59060635, "comment_id": 104361108, "body": "Thank you for your quick response.  I haven&#39;t try it yet, just wanted to know if it is possible. I&#39;ll make an attempt and I&#39;ll send some feedback.  Thank you."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1574811928, "post_id": 59060635, "comment_id": 104361316, "body": "Look at what ActiveRecord does with the models. It loads the schema before finalizing the creation of the object, something done inside the <code>class Base</code> block."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1574820521, "post_id": 59060635, "comment_id": 104363175, "body": "Please see &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the linked pages and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">mcve</a>&quot;.  Rather than ask before you&#39;ve tried something, the SO way is to research, research, research, try, try, try a lot more, and THEN ask. SO isn&#39;t a tutorial site, it&#39;s to help fix problems with your code."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1574836183, "post_id": 59060635, "comment_id": 104367174, "body": "What you&#39;re describing isn&#39;t monkey patching,  IMO."}, {"owner": {"reputation": 1, "user_id": 10806319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2313e1e532eae4da91067ca730afeffc?s=128&d=identicon&r=PG&f=1", "display_name": "dani", "link": "https://stackoverflow.com/users/10806319/dani"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1574858268, "post_id": 59060635, "comment_id": 104378788, "body": "@jvillian: I also agree but, I didn&#39;t know any other name to call it which described what I want to do. From the other answers, I can see now that I just trying to extend the class/instance at runtime..."}, {"owner": {"reputation": 1, "user_id": 10806319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2313e1e532eae4da91067ca730afeffc?s=128&d=identicon&r=PG&f=1", "display_name": "dani", "link": "https://stackoverflow.com/users/10806319/dani"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1574860231, "post_id": 59060635, "comment_id": 104379868, "body": "@the Tin Man: Thank you for correcting the text. I think it is valid for me to ask for hints that could assist me on how to Approach an issue. Anyway, I do appreciate this forum and I&#39;ll do my best to follow the rules on how to write a question..."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10806319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2313e1e532eae4da91067ca730afeffc?s=128&d=identicon&r=PG&f=1", "display_name": "dani", "link": "https://stackoverflow.com/users/10806319/dani"}, "edited": false, "score": 1, "creation_date": 1574858059, "post_id": 59061676, "comment_id": 104378643, "body": "Yes, this is what I had in mind also. I will try it. Thanks."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 4, "last_activity_date": 1574817405, "creation_date": 1574817405, "answer_id": 59061676, "question_id": 59060635, "link": "https://stackoverflow.com/questions/59060635/ruby-monkey-patching-on-the-fly/59061676#59061676", "title": "ruby monkey patching on the fly", "body": "<p>tl;dr: Adding methods to an instance is possible.</p>\n\n<p>Answer: Adding methods to an instance is not possible. Instances in Ruby don't have methods. But each instance can have a singleton class, where one can add methods, which will then be only available on the single instance that this singleton class is made for.</p>\n\n<pre><code>class Foo\nend\n\nfoo = Foo.new\n\ndef foo.bark\n  puts \"Woof\"\nend\nfoo.bark\n\nclass &lt;&lt; foo\n  def chew\n    puts \"Crunch\"\n  end\nend\nfoo.chew\n\nfoo.define_singleton_method(:mark) do\n  puts \"Widdle\"\nend\nfoo.mark\n</code></pre>\n\n<p>are just some of the ways to define a singleton method for an object.</p>\n\n<pre><code>module Happy\n  def cheer\n    puts \"Wag\"\n  end\nend\nfoo.extend(Happy)\nfoo.cheer\n</code></pre>\n\n<p>This takes another approach, it will insert the module between the singleton class and the real class in the inheritance chain. This way, too, the module is available to the instance, but not on the whole class.</p>\n"}, {"tags": [], "owner": {"reputation": 1231, "user_id": 2230115, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sGX51.png?s=128&g=1", "display_name": "iCodeSometime", "link": "https://stackoverflow.com/users/2230115/icodesometime"}, "is_accepted": false, "score": 1, "last_activity_date": 1574817414, "creation_date": 1574817414, "answer_id": 59061678, "question_id": 59060635, "link": "https://stackoverflow.com/questions/59060635/ruby-monkey-patching-on-the-fly/59061678#59061678", "title": "ruby monkey patching on the fly", "body": "<p>Sure you can!</p>\n\n<pre><code>method_name_only_known_at_runtime = 'hello'\nstring_only_known_at_runtime = 'Hello World!'\n\ntest = Object.new\ntest.define_singleton_method(method_name_only_known_at_runtime) do\n  puts(string_only_known_at_runtime)\nend\n\ntest.hello\n#&gt; Hello World!\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 0, "last_activity_date": 1574851782, "creation_date": 1574851782, "answer_id": 59068468, "question_id": 59060635, "link": "https://stackoverflow.com/questions/59060635/ruby-monkey-patching-on-the-fly/59068468#59068468", "title": "ruby monkey patching on the fly", "body": "<blockquote>\n  <p>Prior to the instance being instantiated, I would like to extend</p>\n</blockquote>\n\n<p>Given a class <code>Foo</code> which does something within its <code>initialize</code> method:</p>\n\n<pre><code>class Foo\n  attr_accessor :name\n\n  def initialize(name)\n    self.name = name\n  end\nend\n</code></pre>\n\n<p>And a module <code>FooExtension</code> which wants to alter that behavior:</p>\n\n<pre><code>module FooExtension\n  def name=(value)\n    @name = value.reverse.upcase\n  end\nend\n</code></pre>\n\n<p>You could patch it via <a href=\"https://ruby-doc.org/core-2.6.5/Module.html#method-i-prepend\" rel=\"nofollow noreferrer\"><code>prepend</code></a>:</p>\n\n<pre><code>module FooPatcher\n  def initialize(*)\n    extend(FooExtension) if $do_extend # replace with actual logic\n    super\n  end\nend\n\nFoo.prepend(FooPatcher)\n</code></pre>\n\n<p>Or you could <code>extend</code> even before calling <code>initialize</code> by providing your own <a href=\"https://ruby-doc.org/core-2.6.5/Class.html#method-i-new\" rel=\"nofollow noreferrer\"><code>new</code></a> class method:</p>\n\n<pre><code>class Foo\n  def self.new(*args)\n    obj = allocate\n    obj.extend(FooExtension) if $do_extend # replace with actual logic\n    obj.send(:initialize, *args)\n    obj\n  end\nend\n</code></pre>\n\n<p>Both variants produce the same result:</p>\n\n<pre><code>$do_extend = false\n\nFoo.new('hello')\n#=&gt; #&lt;Foo:0x00007ff66582b640 @name=\"hello\"&gt;\n\n$do_extend = true\n\nFoo.new('hello')\n#=&gt; #&lt;Foo:0x00007ff66582b280 @name=\"OLLEH\"&gt;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10806319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2313e1e532eae4da91067ca730afeffc?s=128&d=identicon&r=PG&f=1", "display_name": "dani", "link": "https://stackoverflow.com/users/10806319/dani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1574851782, "creation_date": 1574809165, "last_edit_date": 1574820421, "question_id": 59060635, "link": "https://stackoverflow.com/questions/59060635/ruby-monkey-patching-on-the-fly", "title": "ruby monkey patching on the fly", "body": "<p>Is there a way to implement monkey patching while an object is being instantiated?</p>\n\n<p>When I call:</p>\n\n<pre><code>a = Foo.new\n</code></pre>\n\n<p>Prior to the instance being instantiated, I would like to extend the Foo class based on information which I will read from a data store. As such, each time I call <code>Foo.new</code>, the extension(s) that will be added to that instance of the class would change dynamically.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1574820878, "post_id": 59060283, "comment_id": 104363232, "body": "<code>Date.parse</code> is useful but it&#39;s also able to stab anyone trying to parse U.S. dates or a mix of U.S. and non-U.S. dates. <code>strptime</code> is much safer. Try <code>Date.parse(&#39;10&#47;31&#47;2019&#39;)</code>."}], "tags": [], "owner": {"reputation": 689, "user_id": 12423932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f358225ae926f27c3eb0d33e7a101581?s=128&d=identicon&r=PG&f=1", "display_name": "Enrico Cortinovis", "link": "https://stackoverflow.com/users/12423932/enrico-cortinovis"}, "is_accepted": false, "score": 0, "last_activity_date": 1574820802, "last_edit_date": 1574820802, "creation_date": 1574807154, "answer_id": 59060283, "question_id": 59060183, "link": "https://stackoverflow.com/questions/59060183/converting-string-attributes-into-date-and-time-format/59060283#59060283", "title": "converting string attributes into date and time format", "body": "<p>If you store your date and time in a single variable like this</p>\n\n<pre><code>Tue, 10 Aug 2010 01:20:19 -0400 (EDT)\n</code></pre>\n\n<p>You can use the very handy <code>Date.parse()</code> function:</p>\n\n<pre><code>str = \"Tue, 10 Aug 2010 01:20:19 -0400 (EDT)\"\ndate = Date.parse str\n=&gt; #&lt;Date: 4910837/2,0,2299161&gt;\nputs date\n2010-08-10\n</code></pre>\n\n<p>This is probably the simplest method to convert a string to a date.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1574808747, "post_id": 59060422, "comment_id": 104360423, "body": "I see you had the sense (unlike moi) to avoid converting <code>Event.first.time</code> to a <code>Time</code> or <code>DateTime</code> object and then back to the same string."}], "tags": [], "owner": {"reputation": 893, "user_id": 3394889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3c58b23ce03f0e71522820d13404d5a?s=128&d=identicon&r=PG&f=1", "display_name": "The Wizard", "link": "https://stackoverflow.com/users/3394889/the-wizard"}, "is_accepted": false, "score": 3, "last_activity_date": 1574820716, "last_edit_date": 1574820716, "creation_date": 1574807978, "answer_id": 59060422, "question_id": 59060183, "link": "https://stackoverflow.com/questions/59060183/converting-string-attributes-into-date-and-time-format/59060422#59060422", "title": "converting string attributes into date and time format", "body": "<p>You should have a look at the <a href=\"https://apidock.com/ruby/DateTime/strftime\" rel=\"nofollow noreferrer\"><code>strftime</code></a> method provided in Ruby.</p>\n\n<p>You already have the time you would like to display, to get the date in your format you need to provide the following directives to <code>strftime</code>:</p>\n\n<ol>\n<li><code>%A</code> - Gives the full weekday name, for example <code>\"Sunday\"</code>.</li>\n<li><code>%B</code> - Gives the full month name, for example <code>\"December\"</code>.</li>\n<li><code>%d</code> - Gives the day of the month, zero-padded for example <code>09</code></li>\n</ol>\n\n<p>Combining these together you should be able to do the following:</p>\n\n<pre><code>  &gt; \"#{Date.parse(Event.first.date).strftime('%A, %B %d')} #{Event.first.time}\"\n  =&gt; \"Saturday, December 21 7:30 PM\"\n</code></pre>\n\n<p>Once again all the information on <code>strftime</code> is available in the <a href=\"https://apidock.com/ruby/DateTime/strftime\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1574808824, "last_edit_date": 1574808824, "creation_date": 1574808162, "answer_id": 59060453, "question_id": 59060183, "link": "https://stackoverflow.com/questions/59060183/converting-string-attributes-into-date-and-time-format/59060453#59060453", "title": "converting string attributes into date and time format", "body": "<pre><code>require 'time'\n\ndate_str = \"21/12/2019\"\ntime_str = \"7:30 PM\"\n</code></pre>\n\n<p><strong>Step 1: Use <a href=\"https://ruby-doc.org/stdlib-2.6.3/libdoc/date/rdoc/DateTime.html#method-c-strptime\" rel=\"nofollow noreferrer\">DateTime::strptime</a> to convert strings to a <code>DateTime</code> object</strong></p>\n\n<pre><code>dt = DateTime.strptime(date_str + time_str, '%d/%m/%Y%H:%M %p')\n  #=&gt; #&lt;DateTime: 2019-12-21T19:30:00+00:00 ((2458839j,70200s,0n),+0s,2299161j)&gt;\n</code></pre>\n\n<p><strong>Step 2: Use <a href=\"https://ruby-doc.org/stdlib-2.6.3/libdoc/date/rdoc/DateTime.html#method-i-strftime\" rel=\"nofollow noreferrer\">DateTime::strftime</a> to convert the <code>DateTime</code> object to the desired string</strong></p>\n\n<pre><code>dt.strftime(\"%A, %B %d %l:%m %p\") \n  #=&gt; \"Saturday, December 21  7:30 PM\"\n</code></pre>\n\n<p>Note:</p>\n\n<pre><code>DateTime.parse(\"I never use DateTime::parse, Data::parse or Time::parse \" +   \n               \"because you never know what you may get\")\n  #=&gt; #&lt;DateTime: 2019-05-01T00:00:00+00:00 ((2458605j,0s,0n),+0s,2299161j)&gt;\n</code></pre>\n\n<p>Use <code>strptime</code>! </p>\n"}, {"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 1, "last_activity_date": 1574820743, "last_edit_date": 1574820743, "creation_date": 1574808331, "answer_id": 59060488, "question_id": 59060183, "link": "https://stackoverflow.com/questions/59060183/converting-string-attributes-into-date-and-time-format/59060488#59060488", "title": "converting string attributes into date and time format", "body": "<p>You can use <code>DateTime.strptime</code>:</p>\n\n<pre><code>date = Event.first.date\ntime = Event.first.time\ndt = DateTime.strptime(\"#{date} #{time}\", \"%d/%m/%Y %l:%M %p\")\n</code></pre>\n\n<p>So in your view:</p>\n\n<pre><code>dt.strftime(\"%A, %B, %d %l:%M %p\")\n</code></pre>\n"}], "owner": {"reputation": 990, "user_id": 7240463, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/RQUCc.jpg?s=128&g=1", "display_name": "current_user", "link": "https://stackoverflow.com/users/7240463/current-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1574820802, "creation_date": 1574806634, "last_edit_date": 1574820603, "question_id": 59060183, "link": "https://stackoverflow.com/questions/59060183/converting-string-attributes-into-date-and-time-format", "title": "converting string attributes into date and time format", "body": "<p>I have two model attributes called \"date\" and \"time\" that are strings:</p>\n\n<pre><code>004 &gt; Event.first.date\n  =&gt; \"21/12/2019\"\n005 &gt; Event.first.time\n  =&gt; \"7:30 PM\"\n</code></pre>\n\n<p>I want to display the date and time of the event in the show page as:</p>\n\n<pre><code>Saturday, December 21 7:30 PM\n</code></pre>\n\n<p>My ruby version is 2.6.3.</p>\n"}, {"tags": ["regex", "ruby", "comments"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 7, "creation_date": 1574799834, "post_id": 59058763, "comment_id": 104357046, "body": "Yeah, just don&#39;t do <code>&#47;puts &quot;#{stop_the_cooling_system_on_the_nuclear_plant}&quot;&#47;</code>."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 4, "creation_date": 1574800203, "post_id": 59058763, "comment_id": 104357182, "body": "I.e. this type of commenting is not safe for anything critical, because it is still possible to execute code inside a Ruby regexp."}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 4, "creation_date": 1574803704, "post_id": 59058763, "comment_id": 104358658, "body": "Better get to know your editor. About all of them allow block commenting where you just highlight the lines to be commented / uncommented and press a shortcut, e.g. <code>CMD</code> + <code>&#47;</code> in Atom."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1574820810, "post_id": 59058763, "comment_id": 104363225, "body": "I agree with everyone: let editor help. However, if you&#39;re dead-set on non-comment block comment, use <code>if false ... end</code>, which can&#39;t have any side-effects (and include a comment so no-one trying to read the code thinks you&#39;re crazy, just weird.)"}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1574806961, "creation_date": 1574806961, "answer_id": 59060250, "question_id": 59058763, "link": "https://stackoverflow.com/questions/59058763/is-it-ok-to-use-multi-line-regular-expression-to-comment-out-code-in-ruby/59060250#59060250", "title": "Is it OK to use multi line regular expression to comment out code in Ruby?", "body": "<p>As Holger points out, most editors have \"toggle comments\" which makes for a much more reliable way to enable/disable chunks of code. This is the recommended method. Your regular expression approach is too lazy by half, it would be utterly baffling to anyone reading the code at a glance to verify what's going on.</p>\n\n<p>Making commits with inadvertently disabled code is a thing that will happen, so you want your comments to be both obvious and easy to repair.</p>\n\n<p>Which one looks better:</p>\n\n<pre><code>def example\n  do_important_stuff!\n  /\n  other(thing: true)\n  do_super_important_stuff(factor: 9000)\n  /\n  do_other_stuff\nend\n</code></pre>\n\n<p>Versus the more intuitive:</p>\n\n<pre><code>def example\n  do_important_stuff!\n  # other(thing: true)\n  # do_super_important_stuff(factor: 9000)\n  do_other_stuff\nend\n</code></pre>\n\n<p>As with many editors, Stack Overflow's syntax highlighting immediately shows that there's code here that's commented out. The other version just looks <em>bizarre</em>.</p>\n\n<p>If you find it too tedious to enable/disable commenting you probably need to let your editor help you out, or configure it to make it easier to do that.</p>\n"}, {"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 2, "last_activity_date": 1574820595, "creation_date": 1574820595, "answer_id": 59062035, "question_id": 59058763, "link": "https://stackoverflow.com/questions/59058763/is-it-ok-to-use-multi-line-regular-expression-to-comment-out-code-in-ruby/59062035#59062035", "title": "Is it OK to use multi line regular expression to comment out code in Ruby?", "body": "<p>Using Tadman's example</p>\n\n<pre><code>def example\n  do_important_stuff!\n  /\n  other(thing: true)\n  do_super_important_stuff(factor: 9000)\n  /\n  do_other_stuff\nend\n</code></pre>\n\n<p>This creates a Regex object every time the method is called, which is not free. It takes time, memory and extra work for the garbage collection process.</p>\n"}], "owner": {"reputation": 301, "user_id": 6482263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rcvBS.png?s=128&g=1", "display_name": "mustafa candan", "link": "https://stackoverflow.com/users/6482263/mustafa-candan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1574820595, "creation_date": 1574799486, "question_id": 59058763, "link": "https://stackoverflow.com/questions/59058763/is-it-ok-to-use-multi-line-regular-expression-to-comment-out-code-in-ruby", "title": "Is it OK to use multi line regular expression to comment out code in Ruby?", "body": "<p>When commenting out codes in ruby we have 2 main options </p>\n\n<ol>\n<li>Adding sharp to start of the line <code># puts \"somecode\"</code></li>\n<li>Putting your code between <code>\n=start \nputs \"somecode\" \n=end</code> </li>\n</ol>\n\n<p>I am lazy and sometimes i put the code between slashes like the code below. Its crates a multiple line regex expression. What kind of side effects this practice can cause?</p>\n\n<p>CODE</p>\n\n<pre><code>puts \"hello\"\n/\nputs \"world\"\n/\nputs \"peace\"\n</code></pre>\n\n<p>OUTPUT</p>\n\n<pre><code>hello\npeace\n</code></pre>\n"}, {"tags": ["json", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1574794596, "post_id": 59057610, "comment_id": 104354761, "body": "Values like this <code>1800Jalisco750ml</code> must be wrapped within quotes"}, {"owner": {"reputation": 2489, "user_id": 8122487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5782932caf3a7e16ff702705ff8c0a1d?s=128&d=identicon&r=PG&f=1", "display_name": "RaphaMex", "link": "https://stackoverflow.com/users/8122487/raphamex"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1574795036, "post_id": 59057610, "comment_id": 104354947, "body": "@SebastianPalma Exactly, that&#39;s the root issue, any way to parse and be tolerant to those values?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1574801248, "post_id": 59057610, "comment_id": 104357649, "body": "You don&#39;t want to try writing a CSV parser. CSV is a very messy data format will all sorts of gotchas. Ruby&#39;s CSV parser is pretty robust, but, again, because CSV is a mess, odds are always good something will break. Using JSON or YAML are better choices in my opinion. As for leaving your question open, don&#39;t put your solution in the question itself. Instead create an answer explaining and documenting the fix. SO will start a countdown and after it expires will allow you to select that answer as the correct one. Remove the &quot;edit:&quot; from your question also. (And don&#39;t use &quot;edit&quot; tags.)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1574828552, "post_id": 59057610, "comment_id": 104364872, "body": "I deleted my answer. You pointed out, &quot;...It seems however that strings with , get split into several strings, which I need to avoid.&quot; I seem to have missed that effect of my answer. :-)."}], "answers": [{"tags": [], "owner": {"reputation": 2489, "user_id": 8122487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5782932caf3a7e16ff702705ff8c0a1d?s=128&d=identicon&r=PG&f=1", "display_name": "RaphaMex", "link": "https://stackoverflow.com/users/8122487/raphamex"}, "is_accepted": true, "score": 1, "last_activity_date": 1574815206, "last_edit_date": 1574815206, "creation_date": 1574803028, "answer_id": 59059449, "question_id": 59057610, "link": "https://stackoverflow.com/questions/59057610/how-to-parse-jsonb-array-of-strings-in-ruby/59059449#59059449", "title": "How to parse JSONB array of strings in Ruby", "body": "<p>\"<a href=\"https://stackoverflow.com/questions/43262126/array-agg-in-postgres-selectively-quotes/43262446#43262446\">Array_agg in postgres selectively quotes</a>\" shows that PostgreSQL's <code>json_agg</code> returns proper JSON, which prevents my issue.</p>\n"}], "owner": {"reputation": 2489, "user_id": 8122487, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5782932caf3a7e16ff702705ff8c0a1d?s=128&d=identicon&r=PG&f=1", "display_name": "RaphaMex", "link": "https://stackoverflow.com/users/8122487/raphamex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 59059449, "answer_count": 1, "score": 0, "last_activity_date": 1574816064, "creation_date": 1574794204, "last_edit_date": 1574816064, "question_id": 59057610, "link": "https://stackoverflow.com/questions/59057610/how-to-parse-jsonb-array-of-strings-in-ruby", "title": "How to parse JSONB array of strings in Ruby", "body": "<p>I found many answers for parsing JSON or JSONB but it seems PostgreSQL has its own way of doing things.</p>\n\n<p>I have a CSV dump from PostgreSQL that I want to parse in Ruby.</p>\n\n<p>A column of the dump was made with <code>array_agg</code>. It is an array of strings. Unfortunately, PostgreSQL decided not to double-quote some values. It may believe they are numbers.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'json'\n\noriginal_names = \"[\\\"1800 Reposado 750ML\\\",1800Jalisco750ml,\\\"1800 Tequila Reposado, Jalisco, Mexico (750ml)\\\"]\"\narray = JSON.parse original_names\n# Raises: 434: unexpected token at 'Jalisco750ml,\"...' (JSON::ParserError)\n</code></pre>\n\n<p>I have tried to add the quotes myself, but it fails because of the other string that contain commas.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>array = JSON.parse original_names.gsub(/,([^\"|,]+),/, ',\"\\1\",')\n# Raises: 434: unexpected token at 'Jalisco\", Mexico (750ml)\"]' (JSON::ParserError)\n</code></pre>\n\n<p>I spent an hour trying workarounds and now I believe I need to implement the parser myself. Does anyone have a better way?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1574791203, "post_id": 59056807, "comment_id": 104353231, "body": "Are you sure those are unique values? What does <code>@@types_of_clothes.inspect</code> reveal? <code>uniq</code> will only work if the values them selves respond to <code>eql?</code> properly which a custom class may not."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1574791316, "post_id": 59056807, "comment_id": 104353280, "body": "It&#39;s worth noting that using class variables like this an anti-pattern and it&#39;s better to intermediate between class and instance of classes with class methods, like in this case <code>self.types</code> could wrap around an internal array or <code>Set</code>."}, {"owner": {"reputation": 1247, "user_id": 2109121, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/zwxKQ.jpg?s=128&g=1", "display_name": "vovan", "link": "https://stackoverflow.com/users/2109121/vovan"}, "edited": false, "score": 0, "creation_date": 1574941687, "post_id": 59056807, "comment_id": 104411420, "body": "try <code>@@types_of_clothes &lt;&lt; @type.strip</code>"}], "owner": {"reputation": 1, "user_id": 11746910, "user_type": "registered", "profile_image": "https://graph.facebook.com/897169133952635/picture?type=large", "display_name": "Mrmld Sky", "link": "https://stackoverflow.com/users/11746910/mrmld-sky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574790844, "creation_date": 1574790844, "question_id": 59056807, "link": "https://stackoverflow.com/questions/59056807/cannot-make-array-unique-in-ruby", "title": "Cannot make array unique in Ruby", "body": "<p>I want to make ClothingCollection in ruby, one of the tasks of which is to return an array of types of clothes.\nI have 17 files (name of clothing, type and for what weather it is made) and 5 types.</p>\n\n<pre><code>require_relative 'clothing'\n\nclass ClothingCollection\n  @@types_of_clothes = []\n\n  def initialize(clothing)\n    @type = clothing.type_of_clothing\n  end\n\n  def set_type_to_catalog\n    unless @@types_of_clothes.include?(@type)\n      @@types_of_clothes &lt;&lt; @type\n    end\n  end\nend\n</code></pre>\n\n<p>Please, what's wrong with this code?\nIt returns 10 types</p>\n\n<pre><code>hat\njeans\ntop\nouterwear\nshoes\nhat\njeans\ntop\nouterwear\nshoes\n</code></pre>\n\n<p>I have also tried the <code>.uniq</code> method and it also does not work</p>\n"}, {"tags": ["arrays", "ruby", "string", "unpack"], "comments": [{"owner": {"reputation": 582, "user_id": 930389, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/feb18ca725c2c9fe55f92761dcedcc23?s=128&d=identicon&r=PG", "display_name": "JamesPD", "link": "https://stackoverflow.com/users/930389/jamespd"}, "edited": false, "score": 0, "creation_date": 1574789233, "post_id": 59056297, "comment_id": 104352246, "body": "@Yule is vscode, if that matters"}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1574789363, "post_id": 59056297, "comment_id": 104352305, "body": "To see what&#39;s going on, try <code>byte1, byte2 = [ 65, 66 ]</code> and hover over the variables then\u2026"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "reply_to_user": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1574789428, "post_id": 59056297, "comment_id": 104352337, "body": "@Arkku That&#39;s essentially what&#39;s happening now. The issue is because the second example doesn&#39;t destructure the result, so it&#39;s just the normally-returned array."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "reply_to_user": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "edited": false, "score": 0, "creation_date": 1574789517, "post_id": 59056297, "comment_id": 104352384, "body": "@Arkku But that doesn&#39;t explain anything--OP is asking why they&#39;re different, and it&#39;s the second example that is confusing the OP."}], "answers": [{"tags": [], "owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "is_accepted": true, "score": 3, "last_activity_date": 1574789197, "creation_date": 1574789197, "answer_id": 59056382, "question_id": 59056297, "link": "https://stackoverflow.com/questions/59056297/why-does-ruby-unpack-sometimes-return-an-array-but-sometimes-return-values/59056382#59056382", "title": "Why does Ruby unpack sometimes return an array, but sometimes return values?", "body": "<p>In the first example you're destructuring the returned array.</p>\n\n<p>In the second example you're not.</p>\n\n<p><code>unpack</code> always returns an array (as described in the docs) but what you <em>do</em> with that array will affect what's displayed in your editor/IDE. In the second example you're setting a single value to the return value of <code>unpack</code>, the array.</p>\n"}], "owner": {"reputation": 582, "user_id": 930389, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/feb18ca725c2c9fe55f92761dcedcc23?s=128&d=identicon&r=PG", "display_name": "JamesPD", "link": "https://stackoverflow.com/users/930389/jamespd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 59056382, "answer_count": 1, "score": 0, "last_activity_date": 1574789197, "creation_date": 1574788907, "question_id": 59056297, "link": "https://stackoverflow.com/questions/59056297/why-does-ruby-unpack-sometimes-return-an-array-but-sometimes-return-values", "title": "Why does Ruby unpack sometimes return an array, but sometimes return values?", "body": "<p>In the code below I use unpack() to ready some bytes from a string:</p>\n\n<pre><code>  # unpack two bytes\n  byte1, byte2 = \"ABCDEFG\".unpack(\"CC\")\n  # unpack one byte\n  byte3 = \"ABCDEFG\".unpack(\"C\")\n</code></pre>\n\n<p>When I hover over <code>byte1</code> I see <code>65</code>, when I hover over <code>byte2</code> I see <code>66</code>, but when I hover over <code>byte3</code> I see <code>[0] = 65</code>. Why is this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "edited": false, "score": 0, "creation_date": 1574788200, "post_id": 59055992, "comment_id": 104351742, "body": "What file output are your writing to? It seems that a normal plain text file the width of a space character should be the same as any letter. You should also checkout <a href=\"https://apidock.com/ruby/String/ljust\" rel=\"nofollow noreferrer\">apidock.com/ruby/String/ljust</a>"}, {"owner": {"reputation": 548, "user_id": 12438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVweC.png?s=128&g=1", "display_name": "norioumata", "link": "https://stackoverflow.com/users/12438293/norioumata"}, "reply_to_user": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "edited": false, "score": 0, "creation_date": 1574789656, "post_id": 59055992, "comment_id": 104352452, "body": "@yule I am writing to a normal plain text file. yes, a space character is the same but the length of &quot;Number&quot; is 6 but this is not the same as 6 spaces in the file so it is showing wrong."}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1574789665, "post_id": 59055992, "comment_id": 104352456, "body": "With a monospace font, &quot;number&quot; and &quot;      &quot; are the same size, your example has 9 spaces."}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1574789721, "post_id": 59055992, "comment_id": 104352481, "body": "If you want to have correct indentation then use a monospace font, you can&#39;t do much with a simple text file."}], "owner": {"reputation": 548, "user_id": 12438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVweC.png?s=128&g=1", "display_name": "norioumata", "link": "https://stackoverflow.com/users/12438293/norioumata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574787858, "creation_date": 1574787858, "question_id": 59055992, "link": "https://stackoverflow.com/questions/59055992/format-text-with-indentation", "title": "Format text with indentation", "body": "<p>I am writing multi-lines in the file.</p>\n\n<pre><code>Number  Name\n        Jack\n</code></pre>\n\n<p>The first line is a header.\nI am going to write lines like the above format.\nIf the number is null, I am writing a line like this.</p>\n\n<pre><code>file.print \"Jack\".indentation(\"Number\".length + 2)\n</code></pre>\n\n<p>There are 2 spaces between <code>Number</code> and <code>Name</code> in the header.\nBut it is showing like this since the length 6 spaces are not the same as \"Number\".</p>\n\n<pre><code>Number  Name\n         Jack\n</code></pre>\n\n<p>Is there any solution to format better?</p>\n"}, {"tags": ["ruby", "docker", "remote-debugging", "rubymine", "puma"], "comments": [{"owner": {"reputation": 723, "user_id": 4568433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-A0ltyCE72fA/AAAAAAAAAAI/AAAAAAAAADY/4U7GU992t_E/photo.jpg?sz=128", "display_name": "Alexandr Evstigneev", "link": "https://stackoverflow.com/users/4568433/alexandr-evstigneev"}, "edited": false, "score": 0, "creation_date": 1575090122, "post_id": 59054977, "comment_id": 104457544, "body": "what version of RubyMine is this?"}], "answers": [{"tags": [], "owner": {"reputation": 261, "user_id": 963865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2df915a8744038976a5fbe5ba7459aca?s=128&d=identicon&r=PG", "display_name": "Hu3nn1", "link": "https://stackoverflow.com/users/963865/hu3nn1"}, "is_accepted": false, "score": 2, "last_activity_date": 1574784393, "creation_date": 1574784393, "answer_id": 59054978, "question_id": 59054977, "link": "https://stackoverflow.com/questions/59054977/rubymine-termination-timed-out-worker/59054978#59054978", "title": "RubyMine: Termination timed out worker", "body": "<p>I just figured it out.</p>\n\n<p>My solution is set <code>WEB_CONCURRENCY</code> to 0 (<code>config/puma.rb</code>)</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>workers ENV.fetch(\"WEB_CONCURRENCY\") { 0 }\n</code></pre>\n\n<p>For the production system I change the value in the <code>.env</code> file.</p>\n\n<pre><code>WEB_CONCURRENCY=2\n</code></pre>\n\n<p>Source: \n* <a href=\"https://github.com/JetBrains/sample_rails_app/blob/master/config/puma.rb\" rel=\"nofollow noreferrer\">https://github.com/JetBrains/sample_rails_app/blob/master/config/puma.rb</a></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># Note that workers are not supported for JRuby or Windows\n#workers ENV.fetch(\"WEB_CONCURRENCY\") { 2 }\n</code></pre>\n"}], "owner": {"reputation": 261, "user_id": 963865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2df915a8744038976a5fbe5ba7459aca?s=128&d=identicon&r=PG", "display_name": "Hu3nn1", "link": "https://stackoverflow.com/users/963865/hu3nn1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1574784393, "creation_date": 1574784393, "question_id": 59054977, "link": "https://stackoverflow.com/questions/59054977/rubymine-termination-timed-out-worker", "title": "RubyMine: Termination timed out worker", "body": "<p>I\u00b4ve a problem to debug my application in docker. My setup is correct I think because without debugger everything works fine.</p>\n\n<p>Ports</p>\n\n<pre><code>command: bash -c \"rm -f tmp/pids/server.pid &amp;&amp; bundle exec rails s -p 3000 -b '0.0.0.0'\"\n    volumes:\n      - .:/usr/src/app\n    ports:\n      - \"3000:3000\"\n      - \"1234:1234\"\n      - \"26162:26162\"\n      - \"26168:26168\"\n</code></pre>\n\n<p>The error: (The site is not responding)</p>\n\n<pre><code>Fast Debugger (ruby-debug-ide 0.7.0, debase 0.2.4.1, file filtering is supported) listens on 0.0.0.0:1234\n=&gt; Booting Puma\n=&gt; Rails 5.2.3 application starting in development \n=&gt; Run `rails server -h` for more startup options\n[8] Puma starting in cluster mode...\n[8] * Version 4.0.1 (ruby 2.6.2-p47), codename: 4 Fast 4 Furious\n[8] * Min threads: 5, max threads: 5\n[8] * Environment: development\n[8] * Process workers: 2\n[8] * Preloading application\n[8] * Listening on tcp://0.0.0.0:3000\n[8] Use Ctrl-C to stop\n[8] ! Terminating timed out worker: 16\n[8] ! Terminating timed out worker: 18\n[8] ! Terminating timed out worker: 20\n[8] ! Terminating timed out worker: 21\n[8] ! Terminating timed out worker: 24\n[8] ! Terminating timed out worker: 25\n[8] ! Terminating timed out worker: 28\n[8] ! Terminating timed out worker: 29\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/rUm63.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rUm63.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/1SeBt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1SeBt.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby", "comments", "slash"], "answers": [{"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1574801526, "post_id": 59054400, "comment_id": 104357780, "body": "<a href=\"https://ruby-doc.org/core-2.6.5/doc/syntax/literals_rdoc.html#label-Regular+Expressions\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.6.5/doc/syntax/&hellip;</a>"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 6, "last_activity_date": 1574782631, "creation_date": 1574782631, "answer_id": 59054400, "question_id": 59054336, "link": "https://stackoverflow.com/questions/59054336/what-is-the-functions-of-slash-in-ruby/59054400#59054400", "title": "What is the functions of slash in ruby", "body": "<p>You create a multiline regexp here:</p>\n\n<pre><code>r = /\na\n/\nr.class\n#=&gt; Regexp\n</code></pre>\n\n<p>And in your case, you first puts <code>hello</code>, then you create a regex of </p>\n\n<pre><code>\\\\nputs \"world\"\\\\n\n</code></pre>\n\n<p>then you puts <code>peace</code></p>\n"}], "owner": {"reputation": 301, "user_id": 6482263, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rcvBS.png?s=128&g=1", "display_name": "mustafa candan", "link": "https://stackoverflow.com/users/6482263/mustafa-candan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 59054400, "answer_count": 1, "score": 3, "last_activity_date": 1574782649, "creation_date": 1574782441, "last_edit_date": 1574782649, "question_id": 59054336, "link": "https://stackoverflow.com/questions/59054336/what-is-the-functions-of-slash-in-ruby", "title": "What is the functions of slash in ruby", "body": "<p>When I put slashes at the beginning and the end of the some code block in ruby they behave like comments. Why is that?</p>\n\n<p>CODE</p>\n\n<pre><code>puts \"hello\"\n/\nputs \"world\"\n/\nputs \"peace\"\n</code></pre>\n\n<p>OUTPUT</p>\n\n<pre><code>hello\npeace\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rspec-rails"], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1574774826, "post_id": 59051998, "comment_id": 104343983, "body": "Followup: actually set that cookie in the test."}, {"owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "edited": false, "score": 0, "creation_date": 1574774985, "post_id": 59051998, "comment_id": 104344057, "body": "But <code>current_shop</code> wasn&#39;t nil in the controller. The controller runs well. Are you referring to the chained method (customer_details) being <code>nil</code>?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "edited": false, "score": 1, "creation_date": 1574775049, "post_id": 59051998, "comment_id": 104344100, "body": "@AfolabiOlaoluwaAkinwumi: &quot;current_shop wasn&#39;t nil / the controller runs well&quot; - not in this test, it doesn&#39;t. It probably runs well in your development env. Because you have that cookie set there."}, {"owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1574775096, "post_id": 59051998, "comment_id": 104344121, "body": "Oh okay. Thanks. Any resources you can point me to @SergioTulentsev?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "edited": false, "score": 0, "creation_date": 1574775194, "post_id": 59051998, "comment_id": 104344176, "body": "@AfolabiOlaoluwaAkinwumi: I&#39;d start with googling &quot;rspec controller spec set cookie&quot; (or something like that)"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 3, "last_activity_date": 1574774703, "creation_date": 1574774703, "answer_id": 59051998, "question_id": 59051955, "link": "https://stackoverflow.com/questions/59051955/nomethoderror-undefined-method-customer-details-for-nilnilclass-in-rspec/59051998#59051998", "title": "NoMethodError: undefined method &#39;customer_details&#39; for nil:NilClass in RSpec", "body": "<p><code>current_shop</code> is <code>nil</code> in your controller. It's not enough that you set <code>shop</code> in your spec code. Instance variables from specs are not shared with a controller under test.</p>\n\n<p>Ensure that the shop you're creating in </p>\n\n<pre><code>    @shop = create(:shop)\n</code></pre>\n\n<p>has field <code>shopify_domain</code> set to whatever value has <code>cookies[:shopify_domain]</code> in your test request.</p>\n"}], "owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "accepted_answer_id": 59051998, "answer_count": 1, "score": 0, "last_activity_date": 1574774714, "creation_date": 1574774536, "last_edit_date": 1574774714, "question_id": 59051955, "link": "https://stackoverflow.com/questions/59051955/nomethoderror-undefined-method-customer-details-for-nilnilclass-in-rspec", "title": "NoMethodError: undefined method &#39;customer_details&#39; for nil:NilClass in RSpec", "body": "<p>My RSpec test failed but I couldn't figure out how I could fix that. Calling <code>.all</code> method on the Class pass but it fails with associations.</p>\n\n<p><strong>Error Message</strong></p>\n\n<pre><code>  0) CustomerDetail #index when logged in should render customer details index page\n     Failure/Error: @customer_details = current_shop.customer_details.load\n\n     NoMethodError:\n       undefined method `customer_details' for nil:NilClass\n     # ./app/controllers/customer_details_controller.rb:9:in `index'\n</code></pre>\n\n<p><strong>ApplicationController</strong></p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  layout 'embedded_app'\n\n  def current_shop\n    @current_shop ||= Shop.find_by(shopify_domain: cookies[:shopify_domain])\n  end\nend\n</code></pre>\n\n<p><strong>Here is the Controller</strong></p>\n\n<pre><code>class CustomerDetailsController &lt; ApplicationController\n  before_action :authenticate_user!\n\n  def index\n    # This failed the test below and complains that NoMethodError: undefined method 'customer_details' for nil:NilClass\n    @customer_details = current_shop.customer_details.load\n\n    #This pass the test below\n    @customer_details = CustomerDetail.all.load\n  end\nend\n</code></pre>\n\n<p><strong>Models</strong></p>\n\n<pre><code>class Shop &lt; ActiveRecord::Base\n  include ShopifyApp::SessionStorage\n\n  has_many :customer_details\n\n  def api_version\n    ShopifyApp.configuration.api_version\n  end\nend\n\nclass CustomerDetail &lt; ApplicationRecord\n  belongs_to :shop\nend\n\n</code></pre>\n\n<p><strong>RSpec</strong></p>\n\n<pre><code>context 'when logged in' do\n  before do\n    @shop = create(:shop)\n    @user = create(:user)\n    sign_in @user\n  end\n\n  it 'should return a 200 response' do\n    get customer_details_index_path\n    expect(response).to have_http_status '200'\n  end\n\n  it 'should render customer details index page' do\n     get customer_details_index_path\n     expect(response).to render_template(:index)\n  end\nend\n</code></pre>\n\n<p>Any help will be appreciated. </p>\n"}, {"tags": ["ruby", "ruby-on-rails-3"], "answers": [{"tags": [], "owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "is_accepted": false, "score": 0, "last_activity_date": 1574775317, "creation_date": 1574775317, "answer_id": 59052167, "question_id": 59051929, "link": "https://stackoverflow.com/questions/59051929/activerecord-associationshas-one-access-parent-object/59052167#59052167", "title": "ActiveRecord Associations(has_one) - Access parent object", "body": "<p>There is a bit of confusion which you made with <code>includes</code>. This will not include the objects, but prepares them in case they are needed. </p>\n\n<p>Because you have an association between <code>Parent</code> and <code>Child</code>, you can already get the parents in view, but this will request the parent for every children hence you'll run in n+1 queries.</p>\n\n<p>To put it in code:</p>\n\n<pre><code>Child.all.each { |c| c.parent }; nil\n</code></pre>\n\n<p>will trigger:</p>\n\n<pre><code>Parent Load (0.2ms)  SELECT  \"parents\".* FROM \"parents\" WHERE \"parents\".\"id\" = $1 LIMIT 1   [[\"id\", 4750516]]\nParent Load (0.2ms)  SELECT  \"parents\".* FROM \"parents\" WHERE \"parents\".\"id\" = $1 LIMIT 1   [[\"id\", 4772539]]\nParent Load (0.1ms)  SELECT  \"parents\".* FROM \"parents\" WHERE \"parents\".\"id\" = $1 LIMIT 1   [[\"id\", 4806512]]\n</code></pre>\n\n<p>What you do there with includes, will make it look like:</p>\n\n<pre><code>SELECT \"children\".* FROM \"children\"\nParent Load (3.3ms)  SELECT \"parents\".* FROM \"parents\" WHERE \"parents\".\"id\" IN (4750516, 4772539, 4806512)\n</code></pre>\n\n<p>So, if you want to use it in the view, you'll actually have something like <code>@childrens</code> so don't be afraid to iterate over and call <code>.parent</code>.</p>\n\n<p>You can read more about eager loading <a href=\"https://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1574776026, "post_id": 59052363, "comment_id": 104344664, "body": "Beat me too it :) For reference: <a href=\"https://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html\" rel=\"nofollow noreferrer\">ActiveModel::Serializers::JSON#as_json</a>"}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 3, "last_activity_date": 1574775936, "creation_date": 1574775936, "answer_id": 59052363, "question_id": 59051929, "link": "https://stackoverflow.com/questions/59051929/activerecord-associationshas-one-access-parent-object/59052363#59052363", "title": "ActiveRecord Associations(has_one) - Access parent object", "body": "<p>You can use <code>as_json</code> with the <code>include</code> option to get each child parent:</p>\n\n<pre><code>Child.includes(:parent).as_json(include: :parent)\n</code></pre>\n\n<p>For that you get a couple of queries. One for the children, the other one  for each children parents (IN clause):</p>\n\n<pre><code>Child Load (1.0ms)  SELECT \"children\".* FROM \"children\"\nParent Load (1.2ms)  SELECT \"parents\".* FROM \"parents\" WHERE \"parents\".\"id\" IN ($1, $2)  [[\"id\", 1], [\"id\", 2]]\n</code></pre>\n\n<p>You can limit the columns you're retrieving from the database (with <code>select</code>) as well as each object in the JSON object (that doesn't apply a SQL filter).</p>\n"}, {"tags": [], "owner": {"reputation": 548, "user_id": 12438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVweC.png?s=128&g=1", "display_name": "norioumata", "link": "https://stackoverflow.com/users/12438293/norioumata"}, "is_accepted": false, "score": 1, "last_activity_date": 1574778730, "creation_date": 1574778730, "answer_id": 59053218, "question_id": 59051929, "link": "https://stackoverflow.com/questions/59051929/activerecord-associationshas-one-access-parent-object/59053218#59053218", "title": "ActiveRecord Associations(has_one) - Access parent object", "body": "<pre><code>Child.includes(:parent).as_json(include: :parent)\n</code></pre>\n\n<p>This helped me!</p>\n"}], "owner": {"reputation": 548, "user_id": 12438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVweC.png?s=128&g=1", "display_name": "norioumata", "link": "https://stackoverflow.com/users/12438293/norioumata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 59052363, "answer_count": 3, "score": 3, "last_activity_date": 1574778730, "creation_date": 1574774430, "question_id": 59051929, "link": "https://stackoverflow.com/questions/59051929/activerecord-associationshas-one-access-parent-object", "title": "ActiveRecord Associations(has_one) - Access parent object", "body": "<pre><code>class Parent &lt; ApplicationRecord\n  has_one: child\nend\n\n\nclass Child &lt; ApplicationRecord\n  belongs_to :parent\nend\n\n\nchildrens = Child.includes(:parent)\n\nputs childrens.to_json\n[{\"id\":1,\"parent_id\":1,\"name\":\"Jack\"},{\"id\":2,\"parent_id\":2,\"name\":\"Oleg\"}]\n</code></pre>\n\n<p>In this case, we can access parent object like this: child.parent</p>\n\n<p>But it is not possible to access parent object in view.\nIs there any way to include parent objects in each child?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "rubygems", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1574774295, "post_id": 59051381, "comment_id": 104343670, "body": "The error tells you exactly which line of code contains a problem: <code>Rakefile:7</code>. You must have a <code>require &#39;byebug&#39;</code> there, despite the fact that <code>byebug</code> is not installed on production. The fix? Just delete that line. All libraries specified in the <code>Gemfile</code> will be <code>require</code>d automatically anyway, unless you specify otherwise."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1574774371, "post_id": 59051381, "comment_id": 104343707, "body": "(And hopefully you don&#39;t have any instances of <code>byebug</code> in the actual code, which you expect to execute on production!!)"}, {"owner": {"reputation": 163, "user_id": 3659426, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100000158681631/picture?type=large", "display_name": "frostblooded", "link": "https://stackoverflow.com/users/3659426/frostblooded"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1574776896, "post_id": 59051381, "comment_id": 104345116, "body": "I double-checked the code for byebug usages just in case. It is only mentioned in gemfile and the gemfile.lock type files and &quot;rails_helper.rb&quot; which is used by Rspec, but I doubt it has anything to do with this. Interesting that I didn&#39;t notice the Rakefile in the logs, but it doesn&#39;t seem to help much. The Rakefile is very basic. It is only <a href=\"https://pastebin.com/WY2iqdgc\" rel=\"nofollow noreferrer\">pastebin.com/WY2iqdgc</a>. So line 7 is ` MyApp::Application.load_tasks`. As far as I can see, it should just load the tasks from the lib folder. Why does it try to load byebug?"}, {"owner": {"reputation": 163, "user_id": 3659426, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100000158681631/picture?type=large", "display_name": "frostblooded", "link": "https://stackoverflow.com/users/3659426/frostblooded"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1574776947, "post_id": 59051381, "comment_id": 104345150, "body": "Plus, I don&#39;t really see why this broke after the upgrade."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1574777833, "post_id": 59051381, "comment_id": 104345623, "body": "Ah... And (again, looking through the call stack) what is <code>is-release_pack-1.0.27&#47;lib&#47;tasks&#47;is&#47;release_pack_tasks.rake:&zwnj;&#8203;2</code>? My <b>guess</b> is that&#39;s a custom gem you&#39;ve made, and there&#39;s a <code>require &#39;byebug&#39;</code> stuck in the code?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1574777960, "post_id": 59051381, "comment_id": 104345693, "body": "You could try temporarily removing <code>byebug</code> from the <code>Gemfile</code> completely, to reproduce the error locally. And (if my suspicion is correct) you could add some test coverage in your gems, to ensure they&#39;re not <code>require</code>ing libraries that are not explicitly stated in their dependencies."}, {"owner": {"reputation": 2180, "user_id": 1659807, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/KzDNe.png?s=128&g=1", "display_name": "duykhoa", "link": "https://stackoverflow.com/users/1659807/duykhoa"}, "edited": false, "score": 0, "creation_date": 1574787994, "post_id": 59051381, "comment_id": 104351636, "body": "It seems like you are putting <code>debugger</code> or <code>byebug</code> somewhere in the code. Try to make a search in project wide to find it."}, {"owner": {"reputation": 163, "user_id": 3659426, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100000158681631/picture?type=large", "display_name": "frostblooded", "link": "https://stackoverflow.com/users/3659426/frostblooded"}, "edited": false, "score": 0, "creation_date": 1574842973, "post_id": 59051381, "comment_id": 104370176, "body": "Solved it! Indeed there was a <code>require &#39;byebug&#39;</code> that was in my custom gem and that is why I couldn&#39;t find it from the main app. It seems that the <code>require &#39;byebug&#39;</code> was in a rake task and the rake tasks are loaded from Rakefile:7. Also, the byebug was added recently and somehow I hadn&#39;t noticed the problem until now, so it seems that the problem had nothing to do with upgrading Ruby or Rails. I feel really dumb for not being able to figure it out myself from the stacktrace. Thank you, all!"}], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 3659426, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100000158681631/picture?type=large", "display_name": "frostblooded", "link": "https://stackoverflow.com/users/3659426/frostblooded"}, "edited": false, "score": 0, "creation_date": 1574843233, "post_id": 59051506, "comment_id": 104370308, "body": "As I mentioned in another comment, <code>Rakefile:7</code> loads all tasks and in one of my custom gems, I had a task that had <code>require &#39;byebug&#39;</code> that I hadn&#39;t noticed I had added recently. Turns out the stacktrace says it all."}, {"owner": {"reputation": 2215, "user_id": 1996540, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/609b69cbb09257883a4e32d7d5aff098?s=128&d=identicon&r=PG", "display_name": "ZedTuX", "link": "https://stackoverflow.com/users/1996540/zedtux"}, "reply_to_user": {"reputation": 163, "user_id": 3659426, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100000158681631/picture?type=large", "display_name": "frostblooded", "link": "https://stackoverflow.com/users/3659426/frostblooded"}, "edited": false, "score": 0, "creation_date": 1574850291, "post_id": 59051506, "comment_id": 104374239, "body": "That&#39;s why I wrote &quot;somewhere in your code it seem to be required&quot;, and that&#39;s nice you found out where it was."}], "tags": [], "owner": {"reputation": 2215, "user_id": 1996540, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/609b69cbb09257883a4e32d7d5aff098?s=128&d=identicon&r=PG", "display_name": "ZedTuX", "link": "https://stackoverflow.com/users/1996540/zedtux"}, "is_accepted": true, "score": 3, "last_activity_date": 1574773030, "creation_date": 1574773030, "answer_id": 59051506, "question_id": 59051381, "link": "https://stackoverflow.com/questions/59051381/heroku-deploy-fails-after-upgrading-to-ruby-2-6-5/59051506#59051506", "title": "Heroku deploy fails after upgrading to Ruby 2.6.5", "body": "<blockquote>\n  <p>Also, byebug is specified in the Gemfile as a development and test gem. Why is it installed on Heroku?</p>\n</blockquote>\n\n<p>Actually it isn't, and that's the reason of your error. The gem is missing, and somewhere in your code it seem to be required.</p>\n\n<p>Especially look at the <code>Rakefile</code> file at line 7.</p>\n\n<blockquote>\n  <p>What also confuses me is that I am using ruby 2.6.5, but in the log, the gems seem to be using ruby 2.6.0?</p>\n</blockquote>\n\n<p>You are using Ruby 2.6.x series so the folder is named <code>2.6.0</code> and the same would be if you'll use Ruby 2.6.0, 2.6.1, 2.6.2, you named it.</p>\n\n<p>Hopefully this will help you.</p>\n"}], "owner": {"reputation": 163, "user_id": 3659426, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100000158681631/picture?type=large", "display_name": "frostblooded", "link": "https://stackoverflow.com/users/3659426/frostblooded"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 59051506, "answer_count": 1, "score": 2, "last_activity_date": 1574773030, "creation_date": 1574772645, "question_id": 59051381, "link": "https://stackoverflow.com/questions/59051381/heroku-deploy-fails-after-upgrading-to-ruby-2-6-5", "title": "Heroku deploy fails after upgrading to Ruby 2.6.5", "body": "<p>I migrated my app to Ruby 2.6.5 and Rails 5.2.3 recently. All the tests passed and the app acts normally on my local machine. When deploying to Heroku, I get the following error:</p>\n\n<pre><code>remote: -----&gt; Detecting rails configuration        \nremote: -----&gt; Detecting rake tasks        \nremote: [1m[31m        \nremote:  !        \nremote:  !     Could not detect rake tasks        \nremote:  !     ensure you can run `$ bundle exec rake -P` against your app        \nremote:  !     and using the production group of your Gemfile.        \nremote:  !     rake aborted!        \nremote:  !     LoadError: cannot load such file -- byebug        \nremote:  !     /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/polyglot-0.3.5/lib/polyglot.rb:65:in `require'        \nremote:  !     /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/polyglot-0.3.5/lib/polyglot.rb:65:in `require'        \nremote:  !     /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:291:in `block in require'        \nremote:  !     /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:257:in `load_dependency'        \nremote:  !     /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:291:in `require'        \nremote:  !     /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/is-release_pack-1.0.27/lib/tasks/is/release_pack_tasks.rake:2:in `&lt;top (required)&gt;'        \nremote:  !     /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:285:in `load'        \nremote:  !     /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:285:in `block in load'        \nremote:  !     /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:257:in `load_dependency'        \nremote:  !     /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:285:in `load'        \nremote:  !     /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/railties-5.2.3/lib/rails/engine.rb:650:in `block in run_tasks_blocks'        \nremote:  !     /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/railties-5.2.3/lib/rails/engine.rb:650:in `each'        \nremote:  !     /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/railties-5.2.3/lib/rails/engine.rb:650:in `run_tasks_blocks'        \nremote:  !     /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/railties-5.2.3/lib/rails/application.rb:514:in `block in run_tasks_blocks'        \nremote:  !     /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/railties-5.2.3/lib/rails/engine/railties.rb:15:in `each'        \nremote:  !     /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/railties-5.2.3/lib/rails/engine/railties.rb:15:in `each'        \nremote:  !     /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/railties-5.2.3/lib/rails/application.rb:514:in `run_tasks_blocks'        \nremote:  !     /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/railties-5.2.3/lib/rails/engine.rb:459:in `load_tasks'        \nremote:  !     /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/railties-5.2.3/lib/rails/railtie.rb:190:in `public_send'        \nremote:  !     /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/railties-5.2.3/lib/rails/railtie.rb:190:in `method_missing'        \nremote:  !     /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/Rakefile:7:in `&lt;top (required)&gt;'        \nremote:  !     /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/rake-13.0.1/lib/rake/rake_module.rb:29:in `load'        \nremote:  !     /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/rake-13.0.1/lib/rake/rake_module.rb:29:in `load_rakefile'        \nremote:  !     /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/rake-13.0.1/lib/rake/application.rb:703:in `raw_load_rakefile'        \nremote:  !     /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/rake-13.0.1/lib/rake/application.rb:104:in `block in load_rakefile'        \nremote:  !     /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/rake-13.0.1/lib/rake/application.rb:186:in `standard_exception_handling'        \nremote:  !     /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/rake-13.0.1/lib/rake/application.rb:103:in `load_rakefile'        \nremote:  !     /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/rake-13.0.1/lib/rake/application.rb:82:in `block in run'        \nremote:  !     /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/rake-13.0.1/lib/rake/application.rb:186:in `standard_exception_handling'        \nremote:  !     /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/rake-13.0.1/lib/rake/application.rb:80:in `run'        \nremote:  !     /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/rake-13.0.1/exe/rake:27:in `&lt;top (required)&gt;'        \nremote:  !     vendor/bundle/bin/rake:29:in `load'        \nremote:  !     vendor/bundle/bin/rake:29:in `&lt;main&gt;'        \nremote:  ![0m        \nremote: /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/helpers/rake_runner.rb:106:in `load_rake_tasks!': Could not detect rake tasks (LanguagePack::Helpers::RakeRunner::CannotLoadRakefileError)        \nremote: ensure you can run `$ bundle exec rake -P` against your app        \nremote: and using the production group of your Gemfile.        \nremote: rake aborted!        \nremote: LoadError: cannot load such file -- byebug        \nremote: /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/polyglot-0.3.5/lib/polyglot.rb:65:in `require'        \nremote: /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/polyglot-0.3.5/lib/polyglot.rb:65:in `require'        \nremote: /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:291:in `block in require'        \nremote: /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:257:in `load_dependency'        \nremote: /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:291:in `require'        \nremote: /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/is-release_pack-1.0.27/lib/tasks/is/release_pack_tasks.rake:2:in `&lt;top (required)&gt;'        \nremote: /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:285:in `load'        \nremote: /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:285:in `block in load'        \nremote: /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:257:in `load_dependency'        \nremote: /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/activesupport-5.2.3/lib/active_support/dependencies.rb:285:in `load'        \nremote: /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/railties-5.2.3/lib/rails/engine.rb:650:in `block in run_tasks_blocks'        \nremote: /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/railties-5.2.3/lib/rails/engine.rb:650:in `each'        \nremote: /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/railties-5.2.3/lib/rails/engine.rb:650:in `run_tasks_blocks'        \nremote: /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/railties-5.2.3/lib/rails/application.rb:514:in `block in run_tasks_blocks'        \nremote: /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/railties-5.2.3/lib/rails/engine/railties.rb:15:in `each'        \nremote: /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/railties-5.2.3/lib/rails/engine/railties.rb:15:in `each'        \nremote: /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/railties-5.2.3/lib/rails/application.rb:514:in `run_tasks_blocks'        \nremote: /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/railties-5.2.3/lib/rails/engine.rb:459:in `load_tasks'        \nremote: /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/railties-5.2.3/lib/rails/railtie.rb:190:in `public_send'        \nremote: /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/railties-5.2.3/lib/rails/railtie.rb:190:in `method_missing'        \nremote: /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/Rakefile:7:in `&lt;top (required)&gt;'        \nremote: /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/rake-13.0.1/lib/rake/rake_module.rb:29:in `load'        \nremote: /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/rake-13.0.1/lib/rake/rake_module.rb:29:in `load_rakefile'        \nremote: /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/rake-13.0.1/lib/rake/application.rb:703:in `raw_load_rakefile'        \nremote: /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/rake-13.0.1/lib/rake/application.rb:104:in `block in load_rakefile'        \nremote: /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/rake-13.0.1/lib/rake/application.rb:186:in `standard_exception_handling'        \nremote: /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/rake-13.0.1/lib/rake/application.rb:103:in `load_rakefile'        \nremote: /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/rake-13.0.1/lib/rake/application.rb:82:in `block in run'        \nremote: /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/rake-13.0.1/lib/rake/application.rb:186:in `standard_exception_handling'        \nremote: /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/rake-13.0.1/lib/rake/application.rb:80:in `run'        \nremote: /tmp/build_6756fdcd8f59060ad0f641b5f38a6571/vendor/bundle/ruby/2.6.0/gems/rake-13.0.1/exe/rake:27:in `&lt;top (required)&gt;'        \nremote: vendor/bundle/bin/rake:29:in `load'        \nremote: vendor/bundle/bin/rake:29:in `&lt;main&gt;'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/ruby.rb:961:in `rake'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/rails2.rb:79:in `has_jobs_work_task?'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/rails2.rb:53:in `block in default_process_types'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/instrument.rb:18:in `block (2 levels) in instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/instrument.rb:40:in `yield_with_block_depth'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/instrument.rb:17:in `block in instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/vendor/ruby/heroku-16/lib/ruby/2.5.0/benchmark.rb:308:in `realtime'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/instrument.rb:16:in `instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/base.rb:48:in `instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/base.rb:44:in `instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/rails2.rb:46:in `default_process_types'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/rails3.rb:29:in `block in default_process_types'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/instrument.rb:18:in `block (2 levels) in instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/instrument.rb:40:in `yield_with_block_depth'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/instrument.rb:17:in `block in instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/vendor/ruby/heroku-16/lib/ruby/2.5.0/benchmark.rb:308:in `realtime'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/instrument.rb:16:in `instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/base.rb:48:in `instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/base.rb:44:in `instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/rails3.rb:23:in `default_process_types'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/rails4.rb:26:in `block in default_process_types'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/instrument.rb:18:in `block (2 levels) in instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/instrument.rb:40:in `yield_with_block_depth'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/instrument.rb:17:in `block in instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/vendor/ruby/heroku-16/lib/ruby/2.5.0/benchmark.rb:308:in `realtime'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/instrument.rb:16:in `instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/base.rb:48:in `instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/base.rb:44:in `instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/rails4.rb:25:in `default_process_types'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/base.rb:105:in `write_release_yaml'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/base.rb:82:in `compile'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/ruby.rb:113:in `block in compile'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/instrument.rb:18:in `block (2 levels) in instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/instrument.rb:40:in `yield_with_block_depth'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/instrument.rb:17:in `block in instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/vendor/ruby/heroku-16/lib/ruby/2.5.0/benchmark.rb:308:in `realtime'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/instrument.rb:16:in `instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/base.rb:48:in `instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/base.rb:44:in `instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/ruby.rb:90:in `compile'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/rails2.rb:62:in `block in compile'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/instrument.rb:18:in `block (2 levels) in instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/instrument.rb:40:in `yield_with_block_depth'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/instrument.rb:17:in `block in instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/vendor/ruby/heroku-16/lib/ruby/2.5.0/benchmark.rb:308:in `realtime'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/instrument.rb:16:in `instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/base.rb:48:in `instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/base.rb:44:in `instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/rails2.rb:60:in `compile'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/rails3.rb:42:in `block in compile'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/instrument.rb:18:in `block (2 levels) in instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/instrument.rb:40:in `yield_with_block_depth'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/instrument.rb:17:in `block in instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/vendor/ruby/heroku-16/lib/ruby/2.5.0/benchmark.rb:308:in `realtime'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/instrument.rb:16:in `instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/base.rb:48:in `instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/base.rb:44:in `instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/rails3.rb:41:in `compile'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/rails4.rb:41:in `block in compile'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/instrument.rb:18:in `block (2 levels) in instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/instrument.rb:40:in `yield_with_block_depth'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/instrument.rb:17:in `block in instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/vendor/ruby/heroku-16/lib/ruby/2.5.0/benchmark.rb:308:in `realtime'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/instrument.rb:16:in `instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/base.rb:48:in `instrument'        \nremote:     from /app/tmp/buildpacks/b7af5642714be4eddaa5f35e2b4c36176b839b4abcd9bfe57ee71c358d71152b4fd2cf925c5b6e6816adee359c4f0f966b663a7f8649b0729509d510091abc07/lib/language_pack/base.rb:44:in `instrument'        \n...\n</code></pre>\n\n<h3>Some other things that seem odd</h3>\n\n<p>What also confuses me is that I am using ruby 2.6.5, but in the log, the gems seem to be using ruby 2.6.0? Also, byebug is specified in the Gemfile as a development and test gem. Why is it installed on Heroku?</p>\n\n<p>I find the line <code>remote:        Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin -j4 --deployment</code> strange, because <code>--without</code> accepts a space-separated list and here I can see a :-separated list.</p>\n\n<h3>More info</h3>\n\n<p>Except for these odd things, it seems that Heroku has successfully detected that the new Ruby should be used</p>\n\n<pre><code>remote: -----&gt; Using Ruby version: ruby-2.6.5        \nremote: -----&gt; Installing dependencies using bundler 2.0.2        \nremote:        Ruby version change detected. Clearing bundler cache.        \nremote:        Old: ruby 2.4.6p354 (2019-04-01 revision 67394) [x86_64-linux]        \nremote:        New: ruby 2.6.5p114 (2019-10-01 revision 67812) [x86_64-linux]        \nremote:        Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin -j4 --deployment\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "edited": false, "score": 0, "creation_date": 1574772196, "post_id": 59051119, "comment_id": 104342494, "body": "Do you see these queries in the logs? Or where did you get these from?"}, {"owner": {"reputation": 2213, "user_id": 653116, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e2a963eac3ca6834296281cc905125c9?s=128&d=identicon&r=PG", "display_name": "jayesh", "link": "https://stackoverflow.com/users/653116/jayesh"}, "reply_to_user": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "edited": false, "score": 0, "creation_date": 1574772675, "post_id": 59051119, "comment_id": 104342790, "body": "I see this query in the Query review tool :<a href=\"https://github.com/ankane/pghero/blob/master/guides/Docker.md\" rel=\"nofollow noreferrer\">github.com/ankane/pghero/blob/master/guides/Docker.md</a>  And also in AWS RDS Performance Insights"}, {"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "edited": false, "score": 0, "creation_date": 1574773135, "post_id": 59051119, "comment_id": 104343063, "body": "Do you want to see what part of the application is calling this and not the &quot;user&quot; right? :)"}, {"owner": {"reputation": 2213, "user_id": 653116, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e2a963eac3ca6834296281cc905125c9?s=128&d=identicon&r=PG", "display_name": "jayesh", "link": "https://stackoverflow.com/users/653116/jayesh"}, "reply_to_user": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "edited": false, "score": 0, "creation_date": 1574773277, "post_id": 59051119, "comment_id": 104343148, "body": "Yes I like to know what part of the application is calling and why and why with that high frequency what I see in query analyze tool it calls 34%  or overall query and i see it was 3k 1/min"}, {"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "edited": false, "score": 0, "creation_date": 1574773533, "post_id": 59051119, "comment_id": 104343292, "body": "Ok, let&#39;s see if my answer helps @jayesh"}, {"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "edited": false, "score": 0, "creation_date": 1574927371, "post_id": 59051119, "comment_id": 104403888, "body": "Any news with this? Did marginalia helped you figure out the places queries are called?"}], "answers": [{"tags": [], "owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "is_accepted": false, "score": 0, "last_activity_date": 1574773484, "creation_date": 1574773484, "answer_id": 59051637, "question_id": 59051119, "link": "https://stackoverflow.com/questions/59051119/rails-application-keep-heating-pg-type-and-pg-attribute-table-how-to-reduse-this/59051637#59051637", "title": "Rails Application keep heating pg_type and pg_attribute table how to reduse this call", "body": "<p>For development (also production error tracking) you can use <a href=\"https://github.com/basecamp/marginalia\" rel=\"nofollow noreferrer\">marginalia</a></p>\n\n<p>It will attach comments in the SQL queries with data about controller and action_name. Here is how it looks for one of my apps:</p>\n\n<p><a href=\"https://i.stack.imgur.com/jpWKQ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jpWKQ.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Alternatively, for more serious tracking and performance optimization, I'd choose to make an account on <a href=\"https://newrelic.com/\" rel=\"nofollow noreferrer\">newrelic</a>. They provide all kinds of high quality insights and custom instrumentation about your app.</p>\n"}, {"comments": [{"owner": {"reputation": 2213, "user_id": 653116, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e2a963eac3ca6834296281cc905125c9?s=128&d=identicon&r=PG", "display_name": "jayesh", "link": "https://stackoverflow.com/users/653116/jayesh"}, "edited": false, "score": 0, "creation_date": 1589091086, "post_id": 59546620, "comment_id": 109151137, "body": "rake db:schema:cache:dump not work for postgress DB"}], "tags": [], "owner": {"reputation": 32417, "user_id": 29347, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/ebc47ee771e1695743e6b79c0821f37f?s=128&d=identicon&r=PG", "display_name": "Kit Sunde", "link": "https://stackoverflow.com/users/29347/kit-sunde"}, "is_accepted": false, "score": 2, "last_activity_date": 1577810730, "creation_date": 1577810730, "answer_id": 59546620, "question_id": 59051119, "link": "https://stackoverflow.com/questions/59051119/rails-application-keep-heating-pg-type-and-pg-attribute-table-how-to-reduse-this/59546620#59546620", "title": "Rails Application keep heating pg_type and pg_attribute table how to reduse this call", "body": "<p>Rails itself calls that to resolve the rails models. It's how it understands what types are in your model. You can create a schema file by running <code>rake db:schema:cache:dump</code> which will make rails load that instead of asking the db over time.</p>\n"}], "owner": {"reputation": 2213, "user_id": 653116, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e2a963eac3ca6834296281cc905125c9?s=128&d=identicon&r=PG", "display_name": "jayesh", "link": "https://stackoverflow.com/users/653116/jayesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1577810730, "creation_date": 1574771744, "question_id": 59051119, "link": "https://stackoverflow.com/questions/59051119/rails-application-keep-heating-pg-type-and-pg-attribute-table-how-to-reduse-this", "title": "Rails Application keep heating pg_type and pg_attribute table how to reduse this call", "body": "<p>I am using ruby ruby-2.1.2, Rails 4.1.3 with Postgres and we see application keep heating pg_type and pg_attribute table.</p>\n\n<p>How to validate and see who calling this query?</p>\n\n<pre><code>Query 1 : SELECT oid, typname, typelem, typdelim, typinput FROM pg_type\nQuery 2 :  SELECT a.attname, format_type(a.atttypid, a.atttypmod),\n                     pg_get_expr(d.adbin, d.adrelid), a.attnotnull, a.atttypid, a.atttypmod\n                FROM pg_attribute a LEFT JOIN pg_attrdef d\n                  ON a.attrelid = d.adrelid AND a.attnum = d.adnum\n               WHERE a.attrelid = ?::regclass\n                 AND a.attnum &gt; ? AND NOT a.attisdropped\n               ORDER BY a.attnum\n</code></pre>\n"}, {"tags": ["ruby", "compression", "gzip", "zlib"], "answers": [{"comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 1, "creation_date": 1574771575, "post_id": 59050934, "comment_id": 104342105, "body": "<a href=\"https://github.com/ruby/zlib/pull/10\" rel=\"nofollow noreferrer\">It has been fixed one month ago.</a>."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1574773060, "post_id": 59050934, "comment_id": 104343021, "body": "I checked the current releases and it is not yet included. So it will be in in Ruby 2.6.6 or 2.7.0 most likely."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1574776901, "post_id": 59050934, "comment_id": 104345119, "body": "They could also publish a new version of the <code>zlib</code> gem. Somebody just has to ask for it as I don&#39;t believe they have a schedule or plans (like for Ruby releases)."}, {"owner": {"reputation": 23, "user_id": 12437472, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAf8gBy2sj64llaxUZYZ0ui5gUJmhPTAbpSVbwi5A=k-s128", "display_name": "abhijeet anand", "link": "https://stackoverflow.com/users/12437472/abhijeet-anand"}, "edited": false, "score": 0, "creation_date": 1574835942, "post_id": 59050934, "comment_id": 104367082, "body": "Thanks! I was actually writing a test case for the compression method when I found out this issue. Ignoring the header bytes while comparison solves my problem."}], "tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": true, "score": 2, "last_activity_date": 1574787019, "last_edit_date": 1574787019, "creation_date": 1574771040, "answer_id": 59050934, "question_id": 59050216, "link": "https://stackoverflow.com/questions/59050216/ruby-zlib-compression-gives-different-outputs-for-the-same-input/59050934#59050934", "title": "Ruby Zlib compression gives different outputs for the same input", "body": "<h3>Option 1 - fixed mtime:</h3>\n\n<p>Yes. The compression time is stored in the header. You can use the <code>mtime</code> method to set the time to a fixed value, which will resolve your problem:</p>\n\n<pre><code>gz = Zlib::GzipWriter.new(output)\ngz.mtime = 1\ngz.write(data)\ngz.close\n</code></pre>\n\n<p>Note that <a href=\"https://ruby-doc.org/stdlib-2.4.0/libdoc/zlib/rdoc/Zlib/GzipWriter.html#method-i-mtime-3D\" rel=\"nofollow noreferrer\">the Ruby documentation</a> says that setting <code>mtime</code> to zero will disable the timestamp. I tried it, and it does not work. I also looked at the source code, and it appears this functionality is missing. Seems like a bug. So you have to set it to something else than 0 (but see comments below - it will be fixed in future releases).</p>\n\n<h3>Option 2 - skip the header:</h3>\n\n<p>Another option is to just skip the header when checking for similar data. The header is 10 bytes long, so to only check the data:</p>\n\n<pre><code>data = compress_data(input).bytes[10..-1]\n</code></pre>\n\n<p>Note that you do not need to call <code>to_a</code> on <code>bytes</code>. It is already an Array:</p>\n\n<blockquote>\n  <p>String.bytes -> an_array</p>\n  \n  <p>Returns an array of bytes in str.  This is a shorthand for str.each_byte.to_a.</p>\n</blockquote>\n"}], "owner": {"reputation": 23, "user_id": 12437472, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAf8gBy2sj64llaxUZYZ0ui5gUJmhPTAbpSVbwi5A=k-s128", "display_name": "abhijeet anand", "link": "https://stackoverflow.com/users/12437472/abhijeet-anand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 59050934, "answer_count": 1, "score": 2, "last_activity_date": 1574787019, "creation_date": 1574768622, "question_id": 59050216, "link": "https://stackoverflow.com/questions/59050216/ruby-zlib-compression-gives-different-outputs-for-the-same-input", "title": "Ruby Zlib compression gives different outputs for the same input", "body": "<p>I have this ruby method for compressing a string -</p>\n\n<pre><code>    def compress_data(data)\n        output = StringIO.new\n        gz = Zlib::GzipWriter.new(output)\n        gz.write(data)\n        gz.close\n\n        compressed_data = output.string\n        compressed_data\n    end\n</code></pre>\n\n<p>When I call this method with the same input, I get different outputs at different times. I am trying to get the byte array for the compressed outputs and compare them. \nThe output is <code>Different</code> when I run the below -</p>\n\n<pre><code>input = \"hello world\"\n\noutput1 = (compress_data input).bytes.to_a\nsleep 1\noutput2 = (compress_data input).bytes.to_a\nif output1 == output2\n    puts 'Same'\nelse\n    puts 'Different'\nend\n</code></pre>\n\n<p>The output is <code>Same</code> when I remove the sleep. Does the compression algorithm have something to do with the current time?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "datetime", "timezone"], "answers": [{"comments": [{"owner": {"reputation": 203, "user_id": 11769090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb45aab61b40ec221ad590a73332914?s=128&d=identicon&r=PG&f=1", "display_name": "Priyanga", "link": "https://stackoverflow.com/users/11769090/priyanga"}, "edited": false, "score": 0, "creation_date": 1574765335, "post_id": 59049155, "comment_id": 104338875, "body": "I have tried this. But it was converting from my local timezone to UTC. Actually i need to convert from chennai timezone to UTC not from my local timezone."}, {"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "reply_to_user": {"reputation": 203, "user_id": 11769090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb45aab61b40ec221ad590a73332914?s=128&d=identicon&r=PG&f=1", "display_name": "Priyanga", "link": "https://stackoverflow.com/users/11769090/priyanga"}, "edited": false, "score": 0, "creation_date": 1574765514, "post_id": 59049155, "comment_id": 104338968, "body": "Ah, I see. Just a clarification before I edit, you&#39;re receiving this from sowewhere and parse it? Or it is set in the <code>config.time_zone</code> ? What does <code>Time.zone</code> returns?"}, {"owner": {"reputation": 203, "user_id": 11769090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb45aab61b40ec221ad590a73332914?s=128&d=identicon&r=PG&f=1", "display_name": "Priyanga", "link": "https://stackoverflow.com/users/11769090/priyanga"}, "edited": false, "score": 0, "creation_date": 1574765597, "post_id": 59049155, "comment_id": 104339019, "body": "Yes, I am receiving the date from somewhere in channai timezone."}, {"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "reply_to_user": {"reputation": 203, "user_id": 11769090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb45aab61b40ec221ad590a73332914?s=128&d=identicon&r=PG&f=1", "display_name": "Priyanga", "link": "https://stackoverflow.com/users/11769090/priyanga"}, "edited": false, "score": 0, "creation_date": 1574765993, "post_id": 59049155, "comment_id": 104339260, "body": "@Priyanga Does this help now?"}, {"owner": {"reputation": 203, "user_id": 11769090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb45aab61b40ec221ad590a73332914?s=128&d=identicon&r=PG&f=1", "display_name": "Priyanga", "link": "https://stackoverflow.com/users/11769090/priyanga"}, "edited": false, "score": 0, "creation_date": 1574766186, "post_id": 59049155, "comment_id": 104339368, "body": "You are saying that first I want to change the time to my local timezone and then change to UTC right?"}, {"owner": {"reputation": 173, "user_id": 10442723, "user_type": "registered", "profile_image": "https://graph.facebook.com/1867306933351812/picture?type=large", "display_name": "Aman Relan", "link": "https://stackoverflow.com/users/10442723/aman-relan"}, "reply_to_user": {"reputation": 203, "user_id": 11769090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb45aab61b40ec221ad590a73332914?s=128&d=identicon&r=PG&f=1", "display_name": "Priyanga", "link": "https://stackoverflow.com/users/11769090/priyanga"}, "edited": false, "score": 0, "creation_date": 1574771056, "post_id": 59049155, "comment_id": 104341843, "body": "@Priyanga no, what he wants to say is to parse the time and change it to whatever you want the timezone to be, by specifying <code>time.in_time_zone(&quot;Pacific Time (US &amp; Canada)&quot;)</code>, in your case, simply add <code>.utc</code> to the variable storing the time, which will give you time in utc"}, {"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "reply_to_user": {"reputation": 203, "user_id": 11769090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb45aab61b40ec221ad590a73332914?s=128&d=identicon&r=PG&f=1", "display_name": "Priyanga", "link": "https://stackoverflow.com/users/11769090/priyanga"}, "edited": false, "score": 0, "creation_date": 1574795134, "post_id": 59049155, "comment_id": 104354994, "body": "No, I gave you an example how to switch to any timezone. You can call <code>utc</code> wherever you want, id est, you can directly go from Chennai timezone to UTC. @Priyanga let me know if my answer helped."}, {"owner": {"reputation": 203, "user_id": 11769090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb45aab61b40ec221ad590a73332914?s=128&d=identicon&r=PG&f=1", "display_name": "Priyanga", "link": "https://stackoverflow.com/users/11769090/priyanga"}, "edited": false, "score": 0, "creation_date": 1574829487, "post_id": 59049155, "comment_id": 104365094, "body": "Yeah, I got an idea from your answer. Thanks @radubogdan"}, {"owner": {"reputation": 203, "user_id": 11769090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb45aab61b40ec221ad590a73332914?s=128&d=identicon&r=PG&f=1", "display_name": "Priyanga", "link": "https://stackoverflow.com/users/11769090/priyanga"}, "edited": false, "score": 0, "creation_date": 1574829538, "post_id": 59049155, "comment_id": 104365110, "body": "I had tried it by setting Time.zone to the chennai timezone before i am going to convert it."}, {"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "reply_to_user": {"reputation": 203, "user_id": 11769090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb45aab61b40ec221ad590a73332914?s=128&d=identicon&r=PG&f=1", "display_name": "Priyanga", "link": "https://stackoverflow.com/users/11769090/priyanga"}, "edited": false, "score": 0, "creation_date": 1574927426, "post_id": 59049155, "comment_id": 104403909, "body": "@Priyanga When you get the time, it already has the timezone, see <code>+05:30</code>. If you don&#39;t have that, yes, assume is Chennai and set the server timezone to it."}], "tags": [], "owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "is_accepted": false, "score": 0, "last_activity_date": 1574771388, "last_edit_date": 1574771388, "creation_date": 1574765132, "answer_id": 59049155, "question_id": 59048931, "link": "https://stackoverflow.com/questions/59048931/convert-particular-timezone-to-utc-timezone/59049155#59049155", "title": "Convert particular timezone to UTC timezone", "body": "<h3>Using server time</h3>\n\n<p>You can call <a href=\"https://apidock.com/rails/ActiveSupport/TimeWithZone/utc\" rel=\"nofollow noreferrer\">ActiveSupport::TimeWithZone#utc</a> on the result.</p>\n\n<p>Example:</p>\n\n<pre><code>Time.zone.now.utc\n</code></pre>\n\n<p>Keep in mind that <code>.now</code> is using the server time zone when <code>config.time_zone</code> is set.</p>\n\n<h3>When you receive a time</h3>\n\n<p>If you are getting the datetime in Chennai timezone it will probably look like this: <code>2019-11-26T12:20:00.655+05:30</code></p>\n\n<p>To convert it in different time zone, use:</p>\n\n<pre><code>time = Time.parse(\"2019-11-26T12:20:00.655+05:30\")\npacific_time = time.in_time_zone(\"Pacific Time (US &amp; Canada)\")\n\n# and then UTC if you want\npacific_time.utc\n</code></pre>\n"}], "owner": {"reputation": 203, "user_id": 11769090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fb45aab61b40ec221ad590a73332914?s=128&d=identicon&r=PG&f=1", "display_name": "Priyanga", "link": "https://stackoverflow.com/users/11769090/priyanga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574771388, "creation_date": 1574764485, "last_edit_date": 1574764990, "question_id": 59048931, "link": "https://stackoverflow.com/questions/59048931/convert-particular-timezone-to-utc-timezone", "title": "Convert particular timezone to UTC timezone", "body": "<p>For example my local time_zone is <code>Canada</code> and i am getting date in <code>Chennai</code> timezone. How can I convert the <code>Chennai timezone to UTC</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "module", "activesupport-concern"], "answers": [{"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 1, "last_activity_date": 1574806987, "last_edit_date": 1574806987, "creation_date": 1574768335, "answer_id": 59050122, "question_id": 59048531, "link": "https://stackoverflow.com/questions/59048531/how-to-map-active-record-class-specific-attribute-to-corresponding-general-purpo/59050122#59050122", "title": "How to map active record class specific attribute to corresponding general purpose concern methods in rails", "body": "<p>You should really start again and reconsider your approach  completely as Ruby actually has <a href=\"https://ruby-doc.org/core-2.5.1/Range.html#method-i-last\" rel=\"nofollow noreferrer\">ranges</a> which are built for this very purpose:</p>\n\n<pre><code>DATE_RANGES =  {\n  asap: Date.today..Date.today,\n  same_day: Date.today.begininng_of_day..Date.today.begininng_of_day,\n  next_day: Date.tomorrow.begininng_of_day..Date.tomorrow.end_of_day,\n  two_day: Date.today.advance(days: 2).beginning_of_day..Date.today.advance(days: 2).beginning_of_day,\n  seven_day: Date.today..Date.today.advance(days: 7)\n}\n</code></pre>\n\n<p>ActiveRecord will create BETWEEN queries when you pass a range to <code>.where</code>:</p>\n\n<pre><code>tricenarians = User.where(birth_day: 30.years.ago...40.years.ago)\n# SELECT users.* FROM users WHERE users.birth_day BETWEEN ? AND ?\n</code></pre>\n\n<p>If you are using Postgres it actually has <a href=\"https://www.postgresql.org/docs/9.3/rangetypes.html\" rel=\"nofollow noreferrer\">native timestamp and date range types</a> so you can store the range in a single column. Otherwise you can get the bounds with <code>Range#begin</code> and <code>Range#end</code>.</p>\n\n<p>Don't fall in the temptation of using the user friedly labels as hash keys. Either use the I18n module or <code>String#dasherize</code>. Strongly coupling the two is a mistake since just updating the label presented to users will break any reference in your code.</p>\n\n<blockquote>\n  <p>I need to ensure the mapping between my class specific attribute names\n  and my general concern concepts.</p>\n</blockquote>\n\n<p>You can make your module configurable by creating a class method and saving the names of the columns in <a href=\"https://www.codegram.com/blog/understanding-class-instance-variables-in-ruby/\" rel=\"nofollow noreferrer\">class instance variables</a> or by dynamically creating methods.</p>\n\n<pre><code>module DateSchedulable\n  # ...\n  class_methods do \n    def date_label(attribute_name)\n      class_eval do\n        @_date_label_attribute = attribute_name\n      end\n      # or\n      class_eval do\n        define_singleton_method :date_label_attribute do\n          attribute_name\n        end\n      end\n    end\n    # ...\n  end\nend\n</code></pre>\n\n<p>This kind of metaprogramming is how Rails builds stuff like callbacks, validations and associations. Be sure you read up the mixin pattern because you're going to need a good understanding of Ruby flavor OOP.</p>\n"}], "owner": {"reputation": 2285, "user_id": 4620141, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152601898256854/picture?type=large", "display_name": "David Geismar", "link": "https://stackoverflow.com/users/4620141/david-geismar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1574806987, "creation_date": 1574763261, "question_id": 59048531, "link": "https://stackoverflow.com/questions/59048531/how-to-map-active-record-class-specific-attribute-to-corresponding-general-purpo", "title": "How to map active record class specific attribute to corresponding general purpose concern methods in rails", "body": "<p>I have a concern in my rails app that goal is to convert a label to a date range. Basically I have a string date_label which takes a value like \"tomorrow\" that helps compute two date fields like date_end and date_end which are actual dates. The concepts date_label, date_start, date_end are the \"common concern concepts\" but they need to be mapped to the corresponding active record fields that have specific names in the active record class in which the concern is included.</p>\n\n<p>Here is the concern code so far :</p>\n\n<pre><code>module DateSchedulable\n  extend ActiveSupport::Concern\n  included do\n    before_save :compute_date_range\n  end\n\n  LABEL_TO_DATE_RANGE =  {\n    'asap': { start: Date.today, end: Date.today },\n    'same-day': { start: Date.today, end: Date.today },\n    'next-day': { start: Date.tomorrow, end: Date.tomorrow },\n    'two-day': { start: Date.today, end: Date.today + 2.days },\n    'seven-day': { start: Date.today, end: Date.today + 7.days }\n  }\n\n  def compute_date_range\n    if self.date_label_changed?\n      date_range = get_date_label_range(self.date_label)\n      self.date_start = date_range[:start]\n      self.date_end = date_range[:end]\n    end\n  end\n\n  def get_date_label_range(date_label)\n    if LABEL_TO_DATE_RANGE[date_label.to_sym]\n      LABEL_TO_DATE_RANGE[date_label.to_sym]\n    elsif Date.is_parseable?(date_label)\n      date = Date.parse(date_label)\n      { start: date, end: date }\n    else\n      { start: nil, end: nil }\n    end\n  end\nend\n</code></pre>\n\n<p>Im especially concerned about how to handle this <code>date_label_changed?</code> in <code>compute_date_range</code>.</p>\n\n<p>I need, for instance, to include this concern in the class <code>HelpList</code> which has the following active record attributes <code>\"default_requested_date_label\", \"default_requested_date_start\",\"default_requested_date_end\"</code>. I need to ensure the mapping between my class specific attribute names and my general concern concepts. Ideally I would maybe like to writte something like :</p>\n\n<pre><code>class HelpList\n  include DateSchedulable\n  date_label :default_requested_date_label\n  date_start :default_requested_date_start\n  date_end   :default_requested_date_end\nend\n</code></pre>\n\n<p>But Im really open to suggestion and would like to know if there is an elegant way to handle this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1574763257, "post_id": 59048494, "comment_id": 104337681, "body": "Does this method occur when you&#39;re trying to start the application or on creation? Can we see the command that triggers it please?"}, {"owner": {"reputation": 3, "user_id": 12436848, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PuCHKzRGZ0A/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf5om-3D_6pNGmyqPzIgj_6mRXXzA/photo.jpg?sz=128", "display_name": "khurram rashid", "link": "https://stackoverflow.com/users/12436848/khurram-rashid"}, "reply_to_user": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1574763414, "post_id": 59048494, "comment_id": 104337772, "body": "when i creating the database or trying to run the server then it occurs    commands: rails s and rails or rake db create or migrate"}, {"owner": {"reputation": 381, "user_id": 11658553, "user_type": "registered", "profile_image": "https://graph.facebook.com/2454813811242759/picture?type=large", "display_name": "H&#249;ng Nguy\u1ec5n", "link": "https://stackoverflow.com/users/11658553/h%c3%b9ng-nguy%e1%bb%85n"}, "edited": false, "score": 0, "creation_date": 1574763597, "post_id": 59048494, "comment_id": 104337880, "body": "you might want to check this <a href=\"https://stackoverflow.com/questions/55442564/how-do-i-fix-in-ruby-on-rails-the-undefined-method-alias-method-chain-error\" title=\"how do i fix in ruby on rails the undefined method alias method chain error\">stackoverflow.com/questions/55442564/&hellip;</a>"}, {"owner": {"reputation": 3, "user_id": 12436848, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PuCHKzRGZ0A/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf5om-3D_6pNGmyqPzIgj_6mRXXzA/photo.jpg?sz=128", "display_name": "khurram rashid", "link": "https://stackoverflow.com/users/12436848/khurram-rashid"}, "edited": false, "score": 0, "creation_date": 1574763859, "post_id": 59048494, "comment_id": 104338031, "body": "but in that they are using the postgresql here i am using MSSQL Server, i only have this problem using MSSQL Server"}, {"owner": {"reputation": 3, "user_id": 12436848, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PuCHKzRGZ0A/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf5om-3D_6pNGmyqPzIgj_6mRXXzA/photo.jpg?sz=128", "display_name": "khurram rashid", "link": "https://stackoverflow.com/users/12436848/khurram-rashid"}, "edited": false, "score": 0, "creation_date": 1574764343, "post_id": 59048494, "comment_id": 104338316, "body": "in my app i must have to use MSSQL Server"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1574781132, "post_id": 59048494, "comment_id": 104347621, "body": "Which rails version you use? Which gem do you use for connecting to MSSQL? I found <a href=\"https://github.com/rails-sqlserver/activerecord-sqlserver-adapter/issues/636\" rel=\"nofollow noreferrer\">github.com/rails-sqlserver/activerecord-sqlserver-adapter/&hellip;</a>"}, {"owner": {"reputation": 3, "user_id": 12436848, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PuCHKzRGZ0A/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf5om-3D_6pNGmyqPzIgj_6mRXXzA/photo.jpg?sz=128", "display_name": "khurram rashid", "link": "https://stackoverflow.com/users/12436848/khurram-rashid"}, "edited": false, "score": 0, "creation_date": 1574832191, "post_id": 59048494, "comment_id": 104365743, "body": "gem &#39;activerecord&#39; gem &#39;tiny_tds&#39; gem &#39;activerecord-sqlserver-adapter&#39;, ruby &#39;2.6.3&#39;,  gem &#39;rails&#39;, &#39;~&gt; 6.0.1&#39;  these versions i am using  and also freetds too"}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1574934950, "post_id": 59048494, "comment_id": 104407696, "body": "@khurramrashid try to downgrade rail to 5th version"}], "owner": {"reputation": 3, "user_id": 12436848, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PuCHKzRGZ0A/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf5om-3D_6pNGmyqPzIgj_6mRXXzA/photo.jpg?sz=128", "display_name": "khurram rashid", "link": "https://stackoverflow.com/users/12436848/khurram-rashid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574763156, "creation_date": 1574763156, "question_id": 59048494, "link": "https://stackoverflow.com/questions/59048494/connection-problem-using-mssql-with-rails", "title": "connection problem using mssql with rails", "body": "<p><strong>NoMethodError: undefined method `alias_method_chain' for #\nDid you mean?  alias_method</strong></p>\n\n<p>this error occurs when making new app in rails with sql server....\nhow this issue can be resolved ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "minitest", "activesupport"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1574762493, "post_id": 59048110, "comment_id": 104337226, "body": "&quot;why does it say that it needs only ruby 1.8.11&quot;? -- There is no such thing as ruby v1.8.11. There&#39;s 1.8.7, 1.9.0, 1.9.1, 1.9.2, 1.9.3, 2.0.0, ... Anyway, I&#39;m speculating, but presumably the <b>rails</b> version - in isolation - worked with a lower ruby version, but a dependency does not."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1574762505, "post_id": 59048110, "comment_id": 104337237, "body": "Please share the <code>Gemfile</code> and <code>Gemfile.lock</code>."}, {"owner": {"reputation": 31, "user_id": 11629182, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YsA7mYLSY0g/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3refiI4kGCX6wtbDpS1oRHZFzya1Pw/mo/photo.jpg?sz=128", "display_name": "UIDevAsh", "link": "https://stackoverflow.com/users/11629182/uidevash"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1574763415, "post_id": 59048110, "comment_id": 104337773, "body": "My bad. It was <code>&gt;= 1.9.3</code>. I pasted the version of rubygems. I have edited the question."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1574763719, "post_id": 59048110, "comment_id": 104337957, "body": "I&#39;ll repeat myself: Can you please share the <code>Gemfile</code> and <code>Gemfile.lock</code>? I don&#39;t know why your project is loading those gem versions without seeing a dependency tree; I can only speculate. In particular, according to that screenshot, <code>activesupport v4.1.11</code> only depends on <code>minitest ~&gt;5.1</code> -- so there&#39;s no reason why it should be &quot;forcing&quot; you to use <code>5.13.0</code>, given that it&#39;s incompatible with the ruby version. Furthermore, your <code>Gemfile</code> cannot contain <code>gem &#39;rails&#39;, &#39;3.2.21&#39;</code> -- that must be what the <code>Gemfile</code> <i>used to</i> contain. Please show the <i>current</i> state of both files."}, {"owner": {"reputation": 1274, "user_id": 2408170, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/jeCWW.jpg?s=128&g=1", "display_name": "Matt West", "link": "https://stackoverflow.com/users/2408170/matt-west"}, "edited": false, "score": 1, "creation_date": 1589086003, "post_id": 59048110, "comment_id": 109150134, "body": "Did this ever get resolved? Still a problem in 2020 for those of us dealing with legacy ruby and rails code..."}, {"owner": {"reputation": 31, "user_id": 11629182, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YsA7mYLSY0g/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3refiI4kGCX6wtbDpS1oRHZFzya1Pw/mo/photo.jpg?sz=128", "display_name": "UIDevAsh", "link": "https://stackoverflow.com/users/11629182/uidevash"}, "reply_to_user": {"reputation": 1274, "user_id": 2408170, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/jeCWW.jpg?s=128&g=1", "display_name": "Matt West", "link": "https://stackoverflow.com/users/2408170/matt-west"}, "edited": false, "score": 0, "creation_date": 1592538237, "post_id": 59048110, "comment_id": 110467355, "body": "@MattWest Sorry for the late reply.   Instead of spending time to solve this, i decided to upgrade ruby to 2.6.5 and rails to 6. I had to make a lot of code changes, but it helped in getting rid of most of the vulnerable Gem versions."}], "owner": {"reputation": 31, "user_id": 11629182, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YsA7mYLSY0g/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3refiI4kGCX6wtbDpS1oRHZFzya1Pw/mo/photo.jpg?sz=128", "display_name": "UIDevAsh", "link": "https://stackoverflow.com/users/11629182/uidevash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 247, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1574763336, "creation_date": 1574761975, "last_edit_date": 1574763336, "question_id": 59048110, "link": "https://stackoverflow.com/questions/59048110/updating-rails-to-4-1-11at-ruby-2-1-fails-because-of-minitest-5-13-0requires", "title": "Updating rails to 4.1.11(at ruby 2.1) fails because of minitest 5.13.0(requires ruby 2.2)", "body": "<p>I have <code>ruby 2.1</code> installed and I am trying to upgrade rails to <code>4.1.11</code> from <code>3.2.21</code>.\nRails <a href=\"https://rubygems.org/gems/rails/versions/4.1.11\" rel=\"nofollow noreferrer\">4.1.11</a> needs <code>ruby &gt;= 1.9.3</code>. When i run <code>bundle install</code>, it fails saying <code>'minitest requires Ruby version ~&gt; 2.2'</code>. </p>\n\n<p><a href=\"https://i.stack.imgur.com/Eoxqe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Eoxqe.png\" alt=\"enter image description here\"></a></p>\n\n<p>If rails has minitest(which needs 2.2 of ruby) as a dependency, why does it say that it needs only ruby <code>&gt;= 1.9.3</code> ? </p>\n\n<p>Minitest <code>5.12.0</code> doesnot require ruby <code>2.2</code>. Is there a way to make rails use that version of minitest?</p>\n\n<p>In my gemfile, i just have <code>gem 'rails', '3.2.21'</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 2, "creation_date": 1574759755, "post_id": 59047402, "comment_id": 104335692, "body": "<code>my_hash.values</code> gives you an array; then, per your previous question: <code>my_hash.values.all?(&amp;:zero?)</code>. Alternately, <code>my_hash.all? { |k, v| v.zero? }</code>."}, {"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "edited": false, "score": 0, "creation_date": 1574759765, "post_id": 59047402, "comment_id": 104335697, "body": "Amadan will come and give you the same answer with <code>.values</code> on <code>my_hash</code>"}, {"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "edited": false, "score": 0, "creation_date": 1574759801, "post_id": 59047402, "comment_id": 104335719, "body": "Haha, nice one. Was pretty close... 10 seconds"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1574770686, "post_id": 59047402, "comment_id": 104341648, "body": "<code>[&#39;foo&#39;=&gt;12.20, &#39;bar&#39;=&gt;10.0]</code> creates an array containing a hash. It&#39;s equivalent to <code>[{&#39;foo&#39;=&gt;12.20, &#39;bar&#39;=&gt;10.0}]</code> whereas you probably want <code>{&#39;foo&#39;=&gt;12.20, &#39;bar&#39;=&gt;10.0}</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1010, "user_id": 475825, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ff1fff61c57ef1f50fa4ad0d7f807e7f?s=128&d=identicon&r=PG", "display_name": "Stobbej", "link": "https://stackoverflow.com/users/475825/stobbej"}, "edited": false, "score": 1, "creation_date": 1574760974, "post_id": 59047735, "comment_id": 104336301, "body": "why call <code>first</code>?"}, {"owner": {"reputation": 99, "user_id": 12167911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/huEtd.jpg?s=128&g=1", "display_name": "ayza", "link": "https://stackoverflow.com/users/12167911/ayza"}, "reply_to_user": {"reputation": 1010, "user_id": 475825, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ff1fff61c57ef1f50fa4ad0d7f807e7f?s=128&d=identicon&r=PG", "display_name": "Stobbej", "link": "https://stackoverflow.com/users/475825/stobbej"}, "edited": false, "score": 0, "creation_date": 1574761143, "post_id": 59047735, "comment_id": 104336399, "body": "i think your my_hash variable is: <code>[{&quot;foo&quot;=&gt;0.0, &quot;bar&quot;=&gt;0, &quot;whatever&quot;=&gt;0.0}]</code>"}], "tags": [], "owner": {"reputation": 99, "user_id": 12167911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/huEtd.jpg?s=128&g=1", "display_name": "ayza", "link": "https://stackoverflow.com/users/12167911/ayza"}, "is_accepted": false, "score": 0, "last_activity_date": 1574761268, "last_edit_date": 1574761268, "creation_date": 1574760726, "answer_id": 59047735, "question_id": 59047402, "link": "https://stackoverflow.com/questions/59047402/check-values-in-a-hash/59047735#59047735", "title": "Check values in a hash", "body": "<p>use below code if my_hash is:\n<code>[{\"foo\"=&gt;0.0, \"bar\"=&gt;0, \"whatever\"=&gt;0.0}]</code></p>\n\n<pre><code>my_hash.first.values.all?{|item| item.zero?}\n\n</code></pre>\n\n<p>or if my_hash is array, just:</p>\n\n<pre><code>my_hash.all?{|item| item.zero?}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 515, "user_id": 5924564, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6i09CKFBb2E/AAAAAAAAAAI/AAAAAAAAAMw/E-23EUWi1ao/photo.jpg?sz=128", "display_name": "Nataraja B", "link": "https://stackoverflow.com/users/5924564/nataraja-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1574761767, "creation_date": 1574761767, "answer_id": 59048056, "question_id": 59047402, "link": "https://stackoverflow.com/questions/59047402/check-values-in-a-hash/59048056#59048056", "title": "Check values in a hash", "body": "<p>Check all values in the hash are zero or not?    </p>\n\n<pre><code> 2.2.3 :006 &gt; h={\"foo\"=&gt;0.0, \"bar\"=&gt;0, \"whatever\"=&gt;0.0}\n      =&gt; {\"foo\"=&gt;0.0, \"bar\"=&gt;0, \"whatever\"=&gt;0.0} \n 2.2.3 :007 &gt; h.values.all?{|a| a.zero?}\n      =&gt; true\n</code></pre>\n\n<p>If it is an array of hash then</p>\n\n<pre><code>2.2.3 :001 &gt; h = ['foo'=&gt;0.0, 'bar'=&gt;0, 'whatever'=&gt;0.0]\n =&gt; [{\"foo\"=&gt;0.0, \"bar\"=&gt;0, \"whatever\"=&gt;0.0}] \n2.2.3 :004 &gt; h[0].values.all?{|a| a.zero? }\n =&gt; true\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>2.2.3 :014 &gt; h\n =&gt; [{\"foo\"=&gt;0.0, \"bar\"=&gt;0, \"whatever\"=&gt;0.0}] \n2.2.3 :015 &gt; h.first.values.all?{|a| a.zero?}\n =&gt; true \n</code></pre>\n\n<p>Any element is zero</p>\n\n<pre><code>2.2.3 :009 &gt; h={\"foo\"=&gt;0.0, \"bar\"=&gt;2, \"whatever\"=&gt;1.1}\n =&gt; {\"foo\"=&gt;0.0, \"bar\"=&gt;2, \"whatever\"=&gt;1.1} \n2.2.3 :010 &gt; h.values.any?{|a| a.zero?}\n =&gt; true \n2.2.3 :011 &gt; h={\"foo\"=&gt;0.2, \"bar\"=&gt;2, \"whatever\"=&gt;1.1}\n =&gt; {\"foo\"=&gt;0.2, \"bar\"=&gt;2, \"whatever\"=&gt;1.1} \n2.2.3 :012 &gt; h.values.any?{|a| a.zero?}\n =&gt; false \n</code></pre>\n"}], "owner": {"reputation": 4117, "user_id": 842225, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/33a910e7c34ca92a8a02b12e016d4674?s=128&d=identicon&r=PG&f=1", "display_name": "user842225", "link": "https://stackoverflow.com/users/842225/user842225"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1574761767, "creation_date": 1574759664, "question_id": 59047402, "link": "https://stackoverflow.com/questions/59047402/check-values-in-a-hash", "title": "Check values in a hash", "body": "<p>I am working on a legacy Rails project that uses Ruby 1.8 .</p>\n\n<p>I have an hash of key-value where value is a float number. </p>\n\n<p>For example, <code>my_hash = ['foo'=&gt;12.20, 'bar'=&gt;10.0]</code>. How can I check if <code>my_hash</code> contains all zero values? e.g. <code>['foo'=&gt;0, 'bar'=&gt;0, 'whatever'=&gt;0]</code> or <code>['foo'=&gt;0.0, 'bar'=&gt;0, 'whatever'=&gt;0.0]</code>. </p>\n\n<p>I know I can loop through &amp; check element one by one, but I just wonder is there a more elegant way?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 4117, "user_id": 842225, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/33a910e7c34ca92a8a02b12e016d4674?s=128&d=identicon&r=PG&f=1", "display_name": "user842225", "link": "https://stackoverflow.com/users/842225/user842225"}, "edited": false, "score": 0, "creation_date": 1574759426, "post_id": 59046761, "comment_id": 104335539, "body": "I actually asked wrongly. For my current question, your answer is correct, I will post another question for my exact case which contains key and value."}, {"owner": {"reputation": 4117, "user_id": 842225, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/33a910e7c34ca92a8a02b12e016d4674?s=128&d=identicon&r=PG&f=1", "display_name": "user842225", "link": "https://stackoverflow.com/users/842225/user842225"}, "edited": false, "score": 0, "creation_date": 1574759674, "post_id": 59046761, "comment_id": 104335657, "body": "<a href=\"https://stackoverflow.com/questions/59047402/check-values-in-a-hash\" title=\"check values in a hash\">stackoverflow.com/questions/59047402/check-values-in-a-hash</a>"}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 3, "last_activity_date": 1574757375, "creation_date": 1574757375, "answer_id": 59046761, "question_id": 59046710, "link": "https://stackoverflow.com/questions/59046710/check-elements-all-have-the-same-value/59046761#59046761", "title": "check elements all have the same value", "body": "<blockquote>\n  <p>Are all <code>my_array</code> elements zero?</p>\n</blockquote>\n\n<pre><code>my_array.all?(&amp;:zero?)\n</code></pre>\n\n<p>Note that it is impossible to check this without a loop, whether implicit or explicit. An implicit loop like the above just reads prettier, but it does exactly the same thing as \"loop through &amp; check element one by one\".</p>\n"}, {"comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1574758719, "post_id": 59047040, "comment_id": 104335168, "body": "These all do at least two loops each (except the last one, but it constructs an extra array), which makes them slower than <code>.all?(&amp;:zero?)</code>; it is also less readable; and the <code>min, max, zero</code> ones are wrong (Ruby does not support Python-style relational operator chaining). If they had any advantage I would upvote, but they don&#39;t."}, {"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1574758886, "post_id": 59047040, "comment_id": 104335258, "body": "Good point with relation chain, I&#39;ll edit. @Amadan like I said when I started the answer, your answer is the best approach. The purpose of my answer was to challenge the mind and present some other perspective over the problem not to offer a &quot;fast&quot; solution. This is O(n) all the way ..."}, {"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1574759022, "post_id": 59047040, "comment_id": 104335341, "body": "@Amadan btw, the first one does one loop ;)"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1574759050, "post_id": 59047040, "comment_id": 104335350, "body": ":D True. It also did not exist when I wrote the comment. You&#39;re right, for learning the language these are nice; but I really, really hope no-one will use any of these in production code. (As I said, I couldn&#39;t upvote, but I didn&#39;t downvote, either.)"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1574759267, "post_id": 59047040, "comment_id": 104335470, "body": "Also, the <code>min, max, zero</code> problem is not resolved by parentheses. You resolve the parentheses, they give you a <code>Boolean</code>, and you&#39;re left testing if <code>true == 0</code> or <code>false == 0</code>, both of which result in <code>false</code>."}], "tags": [], "owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "is_accepted": false, "score": 0, "last_activity_date": 1574759582, "last_edit_date": 1574759582, "creation_date": 1574758401, "answer_id": 59047040, "question_id": 59046710, "link": "https://stackoverflow.com/questions/59046710/check-elements-all-have-the-same-value/59047040#59047040", "title": "check elements all have the same value", "body": "<p>It's exactly how Amadan said it is if you want to go idiomatic. Use <a href=\"https://ruby-doc.org/core-2.6.5/Enumerable.html#method-i-all-3F\" rel=\"nofollow noreferrer\">Enum#all?</a></p>\n\n<p>If you want some ideas to hack around it:</p>\n\n<pre><code># uniq\narray.uniq == [0]\narray.uniq == [0.0] \n\n# min and uniq\nmy_array.uniq.count == 1 &amp;&amp; my_array.min.zero?\nmy_array.uniq.count == 1 &amp;&amp; my_array.uniq.first.zero?\n\n# min, max, zero\nmin = my_array.min\n(min == my_array.max) &amp;&amp; min.zero?\n\n# construct ==\nmy_array == ([0] * my_array.count)\nmy_array == ([0.0] * my_array.count)\n</code></pre>\n"}], "owner": {"reputation": 4117, "user_id": 842225, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/33a910e7c34ca92a8a02b12e016d4674?s=128&d=identicon&r=PG&f=1", "display_name": "user842225", "link": "https://stackoverflow.com/users/842225/user842225"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 59046761, "answer_count": 2, "score": 0, "last_activity_date": 1574759582, "creation_date": 1574757179, "question_id": 59046710, "link": "https://stackoverflow.com/questions/59046710/check-elements-all-have-the-same-value", "title": "check elements all have the same value", "body": "<p>I am working on a legacy Rails project that uses Ruby 1.8  , I have an array of float numbers. it can contain values like <code>my_array = [12.20, 10.0, 3.5]</code>. How can I check if my_array contains all zero values? e.g. <code>[0,0,0]</code> or <code>[0.0,0.0]</code>. I know I can loop through &amp; check element one by one, but I just wonder is there a more elegant way?</p>\n"}, {"tags": ["ruby", "state-machine", "ruby-on-rails-6"], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 11791120, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YudKqIBg5no/AAAAAAAAAAI/AAAAAAAAFmQ/9BOpzLXMSjE/photo.jpg?sz=128", "display_name": "Lisbeth", "link": "https://stackoverflow.com/users/11791120/lisbeth"}, "edited": false, "score": 1, "creation_date": 1574755603, "post_id": 59046283, "comment_id": 104333679, "body": "BTW: I won&#39;t use array if there&#39;s only one thing to do in [after|before] transition  <code>after_transition on: :fire_answered, do: :run_metrics</code>"}, {"owner": {"reputation": 900, "user_id": 1644132, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/RCs3f.png?s=128&g=1", "display_name": "codemilan", "link": "https://stackoverflow.com/users/1644132/codemilan"}, "edited": false, "score": 0, "creation_date": 1574756299, "post_id": 59046283, "comment_id": 104333999, "body": "I get &quot;stacklevel too deep&quot; on solution provided by you."}, {"owner": {"reputation": 27, "user_id": 11791120, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YudKqIBg5no/AAAAAAAAAAI/AAAAAAAAFmQ/9BOpzLXMSjE/photo.jpg?sz=128", "display_name": "Lisbeth", "link": "https://stackoverflow.com/users/11791120/lisbeth"}, "reply_to_user": {"reputation": 900, "user_id": 1644132, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/RCs3f.png?s=128&g=1", "display_name": "codemilan", "link": "https://stackoverflow.com/users/1644132/codemilan"}, "edited": false, "score": 1, "creation_date": 1574846116, "post_id": 59046283, "comment_id": 104371792, "body": "hmm, I&#39;m not sure whether it can write <code>transition from: [:created, :sent], to: :sent</code> that <code>from</code> and <code>to</code> are same event......"}, {"owner": {"reputation": 900, "user_id": 1644132, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/RCs3f.png?s=128&g=1", "display_name": "codemilan", "link": "https://stackoverflow.com/users/1644132/codemilan"}, "edited": false, "score": 0, "creation_date": 1574863046, "post_id": 59046283, "comment_id": 104381481, "body": "Yeah, machine can transition within same state."}], "tags": [], "owner": {"reputation": 27, "user_id": 11791120, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YudKqIBg5no/AAAAAAAAAAI/AAAAAAAAFmQ/9BOpzLXMSjE/photo.jpg?sz=128", "display_name": "Lisbeth", "link": "https://stackoverflow.com/users/11791120/lisbeth"}, "is_accepted": false, "score": 0, "last_activity_date": 1574755505, "creation_date": 1574755505, "answer_id": 59046283, "question_id": 59045582, "link": "https://stackoverflow.com/questions/59045582/why-state-machines-events-not-being-triggered-on-model-callback/59046283#59046283", "title": "Why state_machine&#39;s events not being triggered on model callback?", "body": "<p>To fire a event, you should use model instance to call the method.\nEx: <code>model_instance.event_name</code></p>\n\n<p>so, in your case, you may have to use like the following</p>\n\n<pre><code>def set_appropriate_events\n    self.fire_sent if sent_time.present? &amp;&amp; response_time.blank?\n    self.fire_answered if sent_time.present? &amp;&amp; response_time.present?\n    self.fire_review if needs_review?\nend\n</code></pre>\n\n<p>just call the event and it should work</p>\n"}, {"tags": [], "owner": {"reputation": 741, "user_id": 6894749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gbstY.jpg?s=128&g=1", "display_name": "Thang", "link": "https://stackoverflow.com/users/6894749/thang"}, "is_accepted": false, "score": 0, "last_activity_date": 1574778808, "creation_date": 1574778808, "answer_id": 59053250, "question_id": 59045582, "link": "https://stackoverflow.com/questions/59045582/why-state-machines-events-not-being-triggered-on-model-callback/59053250#59053250", "title": "Why state_machine&#39;s events not being triggered on model callback?", "body": "<p>You are using this gem the wrong way. If you only want to update to a specific state after save then assigns the state value you want to the instance's attribute directly.</p>\n\n<pre><code>def set_appropriate_events\n  self.state = \"sent\" if sent_time.present? &amp;&amp; response_time.blank?\n  self.state = \"review\" if sent_time.present? &amp;&amp; response_time.present?\n  self.state = \"answer\" if needs_review?\nend\n</code></pre>\n\n<p>Notice: Above code will not trigger the <code>gem's callbacks</code> (like <code>after_transition</code>)</p>\n\n<p>If you want to do a specific task and also update the state after save, DO NOT use state machine transitions, call the machine methods inside your callback method.</p>\n\n<pre><code>def set_appropriate_events\n  if sent_time.present? &amp;&amp; response_time.present?\n    self.state = \"review\"\n    run_metrics\n  end\n  ...\nend\n</code></pre>\n"}], "owner": {"reputation": 900, "user_id": 1644132, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/RCs3f.png?s=128&g=1", "display_name": "codemilan", "link": "https://stackoverflow.com/users/1644132/codemilan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 147, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1574778808, "creation_date": 1574752421, "question_id": 59045582, "link": "https://stackoverflow.com/questions/59045582/why-state-machines-events-not-being-triggered-on-model-callback", "title": "Why state_machine&#39;s events not being triggered on model callback?", "body": "<p>Below is my model code, gem used for state_machine functionality is 'state_machines-activerecord':  </p>\n\n<pre><code>class Response &lt; ApplicationRecord\n  state_machine initial: :created do\n\n    after_transition on: :fire_answered, do: [:run_metrics]\n\n    after_transition on: :fire_review, do: [:check_review]\n\n    event :fire_sent do\n      transition from: [:created, :sent], to: :sent\n    end\n    event :fire_review do\n      transition from: [:sent, :answered], to: :review\n    end\n    event :fire_answered do\n      transition from: [:sent, :review, :answered], to: :answered\n    end\n  end\n\n  before_save :set_appropriate_events\n\n  def set_appropriate_events\n    self.state_event = 'fire_sent' if sent_time.present? &amp;&amp; response_time.blank?\n    self.state_event = 'fire_answered' if sent_time.present? &amp;&amp; response_time.present?\n    self.state_event = 'fire_review' if needs_review?\n  end\nend  \n</code></pre>\n\n<p>Callback runs value of 'self.state_event' is also set based on conditions, but event is not fired and no state is updated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "carrierwave"], "comments": [{"owner": {"reputation": 381, "user_id": 11658553, "user_type": "registered", "profile_image": "https://graph.facebook.com/2454813811242759/picture?type=large", "display_name": "H&#249;ng Nguy\u1ec5n", "link": "https://stackoverflow.com/users/11658553/h%c3%b9ng-nguy%e1%bb%85n"}, "edited": false, "score": 0, "creation_date": 1574763915, "post_id": 59044813, "comment_id": 104338063, "body": "check <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> to ask a good question then edit or ask another one."}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1574772199, "post_id": 59044813, "comment_id": 104342496, "body": "Show your model and your carrierwave uploader."}, {"owner": {"reputation": 11, "user_id": 10021125, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1p96AQ_mVJ8/AAAAAAAAAAI/AAAAAAAACVc/ORtZgoEm4Ps/photo.jpg?sz=128", "display_name": "poojak gupta", "link": "https://stackoverflow.com/users/10021125/poojak-gupta"}, "reply_to_user": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1575007613, "post_id": 59044813, "comment_id": 104431726, "body": "@arieljuod I can show my model method due to some privacy concern .. can u suggest me where to lookup ?"}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1575038374, "post_id": 59044813, "comment_id": 104445065, "body": "Just the <code>mount</code> uploader line and the uploader code."}], "owner": {"reputation": 11, "user_id": 10021125, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1p96AQ_mVJ8/AAAAAAAAAAI/AAAAAAAACVc/ORtZgoEm4Ps/photo.jpg?sz=128", "display_name": "poojak gupta", "link": "https://stackoverflow.com/users/10021125/poojak-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574764840, "creation_date": 1574748955, "last_edit_date": 1574764840, "question_id": 59044813, "link": "https://stackoverflow.com/questions/59044813/how-to-access-image-on-browser-and-on-rails-console-i-am-getting-an-error", "title": "How to access image On browser and on rails Console? I am getting an error", "body": "<p>Vendorpart(id: integer, makemodel_id: integer, part_id: integer, price: float, year: integer, created_at: datetime, updated_at: datetime, user_id: integer, image: string, description: text, grade: string, makemodelname: string, partname: string, quantity: integer, featuers: string, weight: integer, productcategories_id: integer, eproccategory_id: integer, days: integer, is_sell: boolean, is_eproc: boolean)</p>\n\n<p>Vendorpart.first\n</p>\n\n<p>Vendorpart.find(1).image\nNoMethodError: private method <code>select' called for nil:NilClass\n    from /home/ryientsoft/.rvm/gems/ruby-2.2.0/gems/carrierwave-1.3.1/lib/carrierwave/uploader/versions.rb:247:in</code>active_versions'\n    from /home/ryientsoft/.rvm/gems/ruby-2.2.0/gems/carrierwave-1.3.1/lib/carrierwave/uploader/versions.rb:297:in <code>retrieve_versions_from_store!'\n    from /home/ryientsoft/.rvm/gems/ruby-2.2.0/gems/carrierwave-1.3.1/lib/carrierwave/uploader/callbacks.rb:16:in</code>block in with_callbacks'\n    from /home/ryientsoft/.rvm/gems/ruby-2.2.0/gems/carrierwave-1.3.1/lib/carrierwave/uploader/callbacks.rb:16:in <code>each'\n    from /home/ryientsoft/.rvm/gems/ruby-2.2.0/gems/carrierwave-1.3.1/lib/carrierwave/uploader/callbacks.rb:16:in</code>with_callbacks'\n    from /home/ryientsoft/.rvm/gems/ruby-2.2.0/gems/carrierwave-1.3.1/lib/carrierwave/uploader/store.rb:85:in <code>retrieve_from_store!'\n    from /home/ryientsoft/.rvm/gems/ruby-2.2.0/gems/carrierwave-1.3.1/lib/carrierwave/mounter.rb:35:in</code>block in uploaders'\n    from /home/ryientsoft/.rvm/gems/ruby-2.2.0/gems/carrierwave-1.3.1/lib/carrierwave/mounter.rb:33:in <code>map'\n    from /home/ryientsoft/.rvm/gems/ruby-2.2.0/gems/carrierwave-1.3.1/lib/carrierwave/mounter.rb:33:in</code>uploaders'\n    from /home/ryientsoft/.rvm/gems/ruby-2.2.0/gems/carrierwave-1.3.1/lib/carrierwave/mount.rb:142:in <code>image'\n    from /home/ryientsoft/.rvm/gems/ruby-2.2.0/gems/carrierwave-1.3.1/lib/carrierwave/mount.rb:366:in</code>image'\n    from (irb):14\n    from /home/ryientsoft/.rvm/gems/ruby-2.2.0/gems/railties-4.0.0/lib/rails/commands/console.rb:90:in <code>start'\n    from /home/ryientsoft/.rvm/gems/ruby-2.2.0/gems/railties-4.0.0/lib/rails/commands/console.rb:9:in</code>start'\n    from /home/ryientsoft/.rvm/gems/ruby-2.2.0/gems/railties-4.0.0/lib/rails/commands.rb:64:in <code>&lt;top (required)&gt;'\n    from bin/rails:4:in</code>require'\n    from bin/rails:4:in `'</p>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1574740848, "post_id": 59043184, "comment_id": 104328981, "body": "what does the current diff look like?"}, {"owner": {"reputation": 710, "user_id": 10147020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pbSiH.png?s=128&g=1", "display_name": "Basin", "link": "https://stackoverflow.com/users/10147020/basin"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1574742777, "post_id": 59043184, "comment_id": 104329441, "body": "@lacostenycoder, updated with current failing messages"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1574744643, "post_id": 59043184, "comment_id": 104329898, "body": "Maybe have a look at this question <a href=\"https://stackoverflow.com/questions/19660735/pretty-print-arrays-on-failure\" title=\"pretty print arrays on failure\">stackoverflow.com/questions/19660735/&hellip;</a>"}], "owner": {"reputation": 710, "user_id": 10147020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pbSiH.png?s=128&g=1", "display_name": "Basin", "link": "https://stackoverflow.com/users/10147020/basin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574742739, "creation_date": 1574737857, "last_edit_date": 1574742739, "question_id": 59043184, "link": "https://stackoverflow.com/questions/59043184/better-failing-message-for-asserting-attributes-of-multiple-objects-in-the-colle", "title": "Better failing message for asserting attributes of multiple objects in the collection", "body": "<p>For asserting that object has expected attributes I come up with custom methods</p>\n\n<pre><code>def be_active_sales_order_with(quantity)\n  expected = {\n    :order_type =&gt; \"sales\",\n    :activated_at =&gt; be_within(1.minute).of(Time.current),\n    :quantity =&gt; quantity\n  }\n\n  have_attributes(expected)\nend\n</code></pre>\n\n<p>When method above used with one object, failing message provide clearly formatted difference which attribute's value is different than expected.</p>\n\n<p>Failing message: </p>\n\n<p>expected # to have attributes {:order_type => \"sales\", :activated_at => (be within 300 of 2019-11-26 15:56:17), :quantity => 3} but had attributes {:order_type => \"sales\", :activated_at => 2019-11-24 15:56:17.000000000, :quantity => 3}<br>\n            Diff:<br>\n            @@ -1,5 +1,5 @@<br>\n             :order_type => \"sales\",<br>\n            -:activated_at => (be within 300 of 2019-11-26 15:56:17),<br>\n            +:activated_at => 2019-11-24 15:56:17.000000000,<br>\n             :quantity => 3,  </p>\n\n<pre><code>it \"creates single order\" do\n   # configuration for single order\n\n   orders = create_order.call(quantity: 3)\n\n   expect(orders.only).to be_active_sales_order_with(3)\nend\n</code></pre>\n\n<p>But for case when multiple orders can be created failing message difficult to read without debugging failed test.</p>\n\n<pre><code>it \"creates multiple orders\" do\n   # configuration for multiple order\n\n   orders = create_order.call(quantity: 3)\n\n   expect(orders).to contain_exactly(\n     be_active_sales_order_with(3),\n     be_active_sales_order_with(3),\n     be_active_sales_order_with(3)\n   )\nend\n</code></pre>\n\n<p>Failing message:   </p>\n\n<p>expected collection contained:  [(have attributes {:order_type => \"sales\", :activated_at => (be within 300 of 2019-11-26 15:56:17), :quantity => 3})]<br>\nactual collection contained:    [#Order id: 885385454, customer_id: 367693892, topic: nil, created_at: \"2019-..., segment_key: \"9bf937d687eaff19\", stock_id: nil, notified_by: nil, use_discount: false, user_id: 548091186]<br>\nthe missing elements were:      [(have attributes {:order_type => \"sales\", :activated_at => (be within 300 of 2019-11-26 15:56:17), :quantity => 3})]<br>\nthe extra elements were:        [#Order id: 885385454, customer_id: 367693892, topic: nil, created_at: \"2019-..., segment_key: \"9bf937d687eaff19\", stock_id: nil, notified_by: nil, use_discount: false, user_id: 548091186]</p>\n\n<p>How I can build more readable message, which provide readable difference between expected and actual object's attributes</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "date"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1574746646, "post_id": 59042525, "comment_id": 104330468, "body": "<a href=\"https://stackoverflow.com/questions/7579153/rails-3-how-to-format-a-date-in-other-than-english-languages\">This SO question</a> may be of interest."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12433643, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DzdrJNPr6Q0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdr7QXGEfpib7z-k29qifCOC9g-Mg/photo.jpg?sz=128", "display_name": "MorroKombat", "link": "https://stackoverflow.com/users/12433643/morrokombat"}, "edited": false, "score": 0, "creation_date": 1574735560, "post_id": 59042756, "comment_id": 104327839, "body": "So I guess this is the only option I have left. I will go with this approach. Thanks!"}], "tags": [], "owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "is_accepted": true, "score": 1, "last_activity_date": 1574734582, "creation_date": 1574734582, "answer_id": 59042756, "question_id": 59042525, "link": "https://stackoverflow.com/questions/59042525/rails-ruby-format-string-into-date-with-locale/59042756#59042756", "title": "Rails/Ruby - Format string into Date with locale", "body": "<p>If you have the date month in english, you can use Date.strptime with this format:</p>\n\n<pre><code>date_str = '5 apr 19'\ndate = Date.strptime(date_str, '%d %b %y')\n</code></pre>\n\n<p>Since that method only accepts english I would just translate the month, only a few months changes:</p>\n\n<pre><code>date_str = '5 abr 19'\n\nmonths = {'ene' =&gt; 'jan', 'abr' =&gt; 'apr', 'ago' =&gt; 'aug', 'dic' =&gt; 'dec'}    \ndate_str_aux = date_str.gsub(/ene|abr|ago|dic/, months) # only replace the months that should be translated\n\ndate = Date.strptime(date_str_aux, '%d %b %y')\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12433643, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DzdrJNPr6Q0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdr7QXGEfpib7z-k29qifCOC9g-Mg/photo.jpg?sz=128", "display_name": "MorroKombat", "link": "https://stackoverflow.com/users/12433643/morrokombat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 59042756, "answer_count": 1, "score": 0, "last_activity_date": 1574734582, "creation_date": 1574732708, "question_id": 59042525, "link": "https://stackoverflow.com/questions/59042525/rails-ruby-format-string-into-date-with-locale", "title": "Rails/Ruby - Format string into Date with locale", "body": "<p>Is there a way in rails with localize or in plain ruby with Date.strptime to convert a string into a date but with a specific months locales?</p>\n\n<p>For example, I have the following string -> <code>'5 abr 19'</code> where <code>abr == april</code> but in spanish, and I need it to convert it to a Date object.</p>\n"}, {"tags": ["ruby", "cron", "centos", "middleman"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1574741784, "post_id": 59041801, "comment_id": 104329214, "body": "Is this a root crontab or your own user crontab? I&#39;m guessing RVM is not loaded properly."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1574751074, "post_id": 59041801, "comment_id": 104331862, "body": "@nonick : How did you ensure that the envrionment when run from crontab is the same as from the command line? In this case, I would first of all check that the PATH is identical."}, {"owner": {"reputation": 3, "user_id": 5036518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3d6ec0c407d3c109a56ffee6ebec4eb?s=128&d=identicon&r=PG&f=1", "display_name": "nonick", "link": "https://stackoverflow.com/users/5036518/nonick"}, "reply_to_user": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1574777787, "post_id": 59041801, "comment_id": 104345596, "body": "@user1934428 : I am setting the PATH in crontab to be the same as the output from &quot;echo $PATH&quot;"}, {"owner": {"reputation": 3, "user_id": 5036518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3d6ec0c407d3c109a56ffee6ebec4eb?s=128&d=identicon&r=PG&f=1", "display_name": "nonick", "link": "https://stackoverflow.com/users/5036518/nonick"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1574777816, "post_id": 59041801, "comment_id": 104345615, "body": "@Casper : i am calling &quot;crontab -e&quot; as user (not root). I tried it as root as well, but same problem :("}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1574781565, "post_id": 59041801, "comment_id": 104347895, "body": "This should help. How to run RVM scripts from crontab: <a href=\"https://rvm.io/deployment/cron\" rel=\"nofollow noreferrer\">rvm.io/deployment/cron</a>"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1574781854, "post_id": 59041801, "comment_id": 104348094, "body": "@nonick : In the snippet you posted, I see only the <code>SHELL</code> variable being defined in the crontab, which I find odd, because you set it to be <code>bash</code>, but you run your script bei <code>sh</code>. Wouldn&#39;t it make sense then to run your script under bash? And, I don&#39;t see that you would define PATH in your crontab. Maybe it would be helpful if we can see all relevant crontab lines."}, {"owner": {"reputation": 3, "user_id": 5036518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3d6ec0c407d3c109a56ffee6ebec4eb?s=128&d=identicon&r=PG&f=1", "display_name": "nonick", "link": "https://stackoverflow.com/users/5036518/nonick"}, "reply_to_user": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1575299092, "post_id": 59041801, "comment_id": 104509731, "body": "@user1934428 : sorry, the snippet was not complete, however switching to sh in combination with what Casper suggested actually worked!! So thank you very much!"}, {"owner": {"reputation": 3, "user_id": 5036518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3d6ec0c407d3c109a56ffee6ebec4eb?s=128&d=identicon&r=PG&f=1", "display_name": "nonick", "link": "https://stackoverflow.com/users/5036518/nonick"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 1, "creation_date": 1575299117, "post_id": 59041801, "comment_id": 104509748, "body": "@Casper : The link you posted about rvm + cron led me to the solution, explicitly specifying that path helped. Thanks a lot!"}], "owner": {"reputation": 3, "user_id": 5036518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3d6ec0c407d3c109a56ffee6ebec4eb?s=128&d=identicon&r=PG&f=1", "display_name": "nonick", "link": "https://stackoverflow.com/users/5036518/nonick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574726133, "creation_date": 1574726133, "question_id": 59041801, "link": "https://stackoverflow.com/questions/59041801/crontab-does-not-work-combined-with-ruby-middleman-centos", "title": "crontab does not work combined with ruby/middleman CENTOS", "body": "<p>I am trying to run a cronjob which triggers a middleman server to build my project every minute. I ran into various problems with the crontab environment not being the same as my shell environment and tried pretty much EVERY combination out there which supposedly helps, including specifying the full path to everything, setting the variables inside the cronjob and many other things. The issue still remains: For some reason, when executing from the shell, <code>middleman build</code> does exactly what it should.</p>\n\n<p>When I put the exact same line into a script called launcher.sh: </p>\n\n<pre><code>source $HOME/.bash_profile\ncd /home/ec2-user/git_directory/ &amp;&amp; git pull\n/usr/local/rvm/gems/ruby-2.6.5/bin/middleman build\n</code></pre>\n\n<p>and I run the script from the command line, it works perfectly (i.e. gets the current repo and then builds it). </p>\n\n<p>When I run it from within a cronjob, I am getting all kinds of weird errors. My crontab looks as follows:</p>\n\n<pre><code>SHELL=/bin/bash\n* * * * * sh $HOME/launcher.sh\n</code></pre>\n\n<p>and the error I am getting is</p>\n\n<pre><code>/usr/bin/env: ruby_executable_hooks: No such file or directory\n</code></pre>\n\n<p>I don't understand why, given the same environments, running the very same command from the command line vs. from crontab makes a difference. Can anyone point me into the right direction here? </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 893, "user_id": 3394889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3c58b23ce03f0e71522820d13404d5a?s=128&d=identicon&r=PG&f=1", "display_name": "The Wizard", "link": "https://stackoverflow.com/users/3394889/the-wizard"}, "edited": false, "score": 0, "creation_date": 1574725515, "post_id": 59041691, "comment_id": 104325699, "body": "Is your select a mistype (should error)? You are passing 2 arguments when you should only be passing one."}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 893, "user_id": 3394889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3c58b23ce03f0e71522820d13404d5a?s=128&d=identicon&r=PG&f=1", "display_name": "The Wizard", "link": "https://stackoverflow.com/users/3394889/the-wizard"}, "edited": false, "score": 0, "creation_date": 1574725673, "post_id": 59041691, "comment_id": 104325744, "body": "As is it works, it takes my <code>LineItem</code>&#39;s and groups them by <code>vendor_name</code> and then sorts them by count.  I can then display them to the front end sorted by count along with which count belongs to which <code>vendor_name</code>"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 893, "user_id": 3394889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3c58b23ce03f0e71522820d13404d5a?s=128&d=identicon&r=PG&f=1", "display_name": "The Wizard", "link": "https://stackoverflow.com/users/3394889/the-wizard"}, "edited": false, "score": 0, "creation_date": 1574729950, "post_id": 59041691, "comment_id": 104326755, "body": "@TheWizard is that what you were referring to or did I miss the ball?"}, {"owner": {"reputation": 893, "user_id": 3394889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3c58b23ce03f0e71522820d13404d5a?s=128&d=identicon&r=PG&f=1", "display_name": "The Wizard", "link": "https://stackoverflow.com/users/3394889/the-wizard"}, "edited": false, "score": 0, "creation_date": 1574730935, "post_id": 59041691, "comment_id": 104326933, "body": "Yep, all good sorry. I was using a different version of Rails"}], "answers": [{"tags": [], "owner": {"reputation": 741, "user_id": 6894749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gbstY.jpg?s=128&g=1", "display_name": "Thang", "link": "https://stackoverflow.com/users/6894749/thang"}, "is_accepted": false, "score": -1, "last_activity_date": 1574736398, "creation_date": 1574736398, "answer_id": 59042978, "question_id": 59041691, "link": "https://stackoverflow.com/questions/59041691/how-to-use-select-but-allow-all-fields-from-model/59042978#59042978", "title": "How to use select but allow all fields from model", "body": "<p>I am quite confused about your code and your expectation. You are selecting the <code>COUNT</code> but the expected result is <code>id</code> instead of <code>count</code>?</p>\n\n<p>If you want to group by <code>vendor_name</code> and show the count of <code>group_by</code> you can try</p>\n\n<p><code>line_items.group(:vendor_name).count</code></p>\n"}, {"comments": [{"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1574799370, "post_id": 59042982, "comment_id": 104356846, "body": "Is there any way to avoid doing logic inside the loop"}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "reply_to_user": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1574799892, "post_id": 59042982, "comment_id": 104357070, "body": "I guess it depends on what logic you want to do. Or do you mean avoiding the whole loop?"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1574801436, "post_id": 59042982, "comment_id": 104357737, "body": "Well I want a loop to display everything but I was avoiding the looping and getting more records directly on the front end.  If you see my answer down at the bottom of the page, thats what I was aiming to do with group but without needing all of the associations like that (my answer) goes."}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1574801636, "post_id": 59042982, "comment_id": 104357841, "body": "Like is there a way to <code>LineItem.group(:vendor_name)</code>-this groups by vendor_name but then instead of it only returning <code>id: nil, vendor_name: &quot;admin&quot;</code>, to get more information? Because what I am aiming to get is the sum of another LineItem attribute where <code>vendor_name</code> is the in common association."}], "tags": [], "owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "is_accepted": false, "score": 0, "last_activity_date": 1574736450, "creation_date": 1574736450, "answer_id": 59042982, "question_id": 59041691, "link": "https://stackoverflow.com/questions/59041691/how-to-use-select-but-allow-all-fields-from-model/59042982#59042982", "title": "How to use select but allow all fields from model", "body": "<p>You can't select the rest of the columns since you have different values for each coulmn inside the group (like... if you have 2 LineItem in the same group, which ID do you expect to have?)</p>\n\n<p>You could apply aggregate functions (like COUNT, MAX, MIN, etc) to other columns on the SELECT to tell the database which columns you want for each column I guess.</p>\n\n<p>Personally, I would first get the groups ordered by count and then do more queries when needed to fetch the actual record for the groups.</p>\n\n<pre><code>counts = LineItem.group(:vendor_name).count\n# counts should be something like: {vendor_1: X, vendor_2, Y, vendor_3: Z}\n\n# order the vendors using the count for each vendor\nordered_vendors = counts.keys.sort_by { |ven| counts[ven] }\n\nordered_vendors.each do |vendor|\n  # do something with each vendor, fetch LineItems, etc\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1574798864, "post_id": 59043046, "comment_id": 104356647, "body": "I trieddoing <code>vendor_line_items = LineItem.select(&#39;COUNT(*) AS count&#39;, &#39;vendor_name&#39;, &#39;SUM(line_item_revenue)&#39;).group(:vendor_name).order(&#39;count DESC&#39;)</code> but only <code>vendor_name</code> and id came up again.  Basically, what I want to display is the LineItem vendor_name, count of those line items and the sum of line_item_revenue, which is the price*quantity"}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "reply_to_user": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1574799994, "post_id": 59043046, "comment_id": 104357116, "body": "@uno try giving a name to the sum like <code>SUM(line_item_revenue) AS summed</code>"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1574801926, "post_id": 59043046, "comment_id": 104357946, "body": "Do you mean like; <code>vendor_line_items = LineItem.select(&#39;COUNT(*) AS count&#39;, &#39;vendor_name&#39;, &#39;SUM(line_item_revenue) AS summed&#39;).group(:vendor_name).order(&#39;count DESC&#39;)</code> ? This gave me same results.  There has got to be another way to get more attributes in the results ! ~:)"}, {"owner": {"reputation": 893, "user_id": 3394889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3c58b23ce03f0e71522820d13404d5a?s=128&d=identicon&r=PG&f=1", "display_name": "The Wizard", "link": "https://stackoverflow.com/users/3394889/the-wizard"}, "edited": false, "score": 0, "creation_date": 1574805604, "post_id": 59043046, "comment_id": 104359383, "body": "Did you try calling .attributes on each of the line items?"}], "tags": [], "owner": {"reputation": 893, "user_id": 3394889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3c58b23ce03f0e71522820d13404d5a?s=128&d=identicon&r=PG&f=1", "display_name": "The Wizard", "link": "https://stackoverflow.com/users/3394889/the-wizard"}, "is_accepted": false, "score": 0, "last_activity_date": 1574736873, "creation_date": 1574736873, "answer_id": 59043046, "question_id": 59041691, "link": "https://stackoverflow.com/questions/59041691/how-to-use-select-but-allow-all-fields-from-model/59043046#59043046", "title": "How to use select but allow all fields from model", "body": "<p>The reason why you only see the count and the vendor name is because that is all you are grouping by. Suppose in the database, you have 5 different Vendor A shown below.</p>\n\n<pre><code>vendor_name   | product_name \n-----------------------------\nVendor A      | test        \nVendor A      | test2        \nVendor A      | test3        \nVendor A      | test4 \nVendor A      | test5  \n...     \n</code></pre>\n\n<p>When you run your query, SQL will not know what to display for product_name as the group_by will only show 1 row instead of 5. <a href=\"https://stackoverflow.com/questions/21217778/select-multiple-columns-from-a-table-but-group-by-one\">Have a read about it here</a>. </p>\n\n<p>To achieve this you will need to either to group by the other columns too or use a min/max select to pick a value to display. Here is an example:</p>\n\n<pre><code>vendor_line_items = LineItem.select('COUNT(*) AS count', 'vendor_name', 'MAX(product_name)').group(:vendor_name).order('count DESC')\n</code></pre>\n\n<p>Now each of those results, you can call the <code>attributes</code> method.\nWhich will give you the following hash:</p>\n\n<pre><code>vendor_line_items.each do |x|\n  result = x.attributes\n  # Here result will be a hash.\n  # {\"count\" =&gt; 5, \"vendor_name\" =&gt; \"Vendor A\", \"product_name\" =&gt; \"test5\"}\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "is_accepted": false, "score": 0, "last_activity_date": 1574804473, "last_edit_date": 1574804473, "creation_date": 1574799678, "answer_id": 59058795, "question_id": 59041691, "link": "https://stackoverflow.com/questions/59041691/how-to-use-select-but-allow-all-fields-from-model/59058795#59058795", "title": "How to use select but allow all fields from model", "body": "<p>(Not accepted answer unless a better way is received)</p>\n\n<p>I did:</p>\n\n<pre><code>vendor_line_items = Vendor.joins(:line_items).group(:id).order('COUNT(line_items.id) DESC')\n</code></pre>\n\n<p>This gives me what I want by ordering the results by vendor.line_items.count and allowing me to get all of the associations to display any param I want.</p>\n\n<p>I assume this way is much slower than what I was previously doing as it fetches all records and then on the front end goes through associations to get more records.</p>\n\n<p>In the original way I was doing this.  It is what I want minus an extra parameter that I would want the SUM of.  The parameter is a decimal attribute.  In the same way I count the LineItem that have the same vendor_name, I want to sum of the LineItem.attribute that share the same vendor_name.</p>\n\n<p>Better Answer:</p>\n\n<pre><code>LineItem.select(:vendor_name, 'sum(line_item_revenue) as line_item_revenue', 'COUNT(*) as count').group(:vendor_name)\n</code></pre>\n\n<p>This seems to get me what I want with less queries (i believe) --- correct me if I am wrong on the queries.</p>\n"}], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1574804473, "creation_date": 1574725211, "question_id": 59041691, "link": "https://stackoverflow.com/questions/59041691/how-to-use-select-but-allow-all-fields-from-model", "title": "How to use select but allow all fields from model", "body": "<p>I do the following so I am able to group all LineItem's together by count and display the LineItem by count along with the <code>vendor_name</code></p>\n\n<pre><code>line_items = LineItem.all\nvendor_line_items = line_items.group(:vendor_name).select('COUNT(*) as count', 'vendor_name').order('count desc')\n</code></pre>\n\n<p>My issue is that I am only able to receive the following params: <code>id: nil, vendor_name: \"name_here\"</code></p>\n\n<p>Is there a way to accomplish the same thing but allow all params from the model to be passed?</p>\n"}, {"tags": ["ruby", "plugins", "alias", "redmine", "alias-method"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 9206887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/523be7de69d2878156195817102d53af?s=128&d=identicon&r=PG&f=1", "display_name": "Ben S", "link": "https://stackoverflow.com/users/9206887/ben-s"}, "edited": false, "score": 0, "creation_date": 1575012271, "post_id": 59043779, "comment_id": 104433229, "body": "Thanks so much for the detailed response! I made a PR on the original library - if you could have a quick look i&#39;d appreciate it heaps: <a href=\"https://github.com/GEROMAX/redmine_subtask_list_accordion/pull/14\" rel=\"nofollow noreferrer\">github.com/GEROMAX/redmine_subtask_list_accordion/pull/14</a>"}], "tags": [], "owner": {"reputation": 322, "user_id": 1601669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/499868feae0e633d5d9794e49cfe06bd?s=128&d=identicon&r=PG", "display_name": "jkraemer", "link": "https://stackoverflow.com/users/1601669/jkraemer"}, "is_accepted": true, "score": 1, "last_activity_date": 1574743251, "last_edit_date": 1574743251, "creation_date": 1574742646, "answer_id": 59043779, "question_id": 59041480, "link": "https://stackoverflow.com/questions/59041480/improving-on-hacky-ruby-method-alias-fix-for-conflicting-redmine-plugins/59043779#59043779", "title": "Improving on hacky ruby &#39;method_alias&#39; fix for conflicting redmine plugins?", "body": "<p><code>alias_method</code> creates a <em>copy</em> of the named method in the context where it is called. </p>\n\n<p>Now, if the original method (second argument to <code>alias_method</code>) is defined somewhere up the inheritance chain and changed in any way later on, you still have that copy around that did not change. Which might explain the behavior you see.</p>\n\n<p>As for the rewriting: As a rule of thumb, throw out all method aliasing (in both plugins) and use <code>Module#prepend</code>. <a href=\"https://stackoverflow.com/questions/4470108/when-monkey-patching-an-instance-method-can-you-call-the-overridden-method-from#4471202\">This SO Answer</a> is a nice overview of good and bad techniques for (monkey) patching Ruby code.</p>\n\n<p>Patching Rails' view helpers as appears to be the case in your plugins can be tricky due to the way Rails handles them (and results may vary depending on code loading order). Wherever possible, avoid it or create new helper modules and add them to the relevant controllers using something like</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>module RedmineSubtaskListAccordion\n  module IssuesHelper\n    def render_descendants_tree(issue)\n      if sla_has_grandson_issues?(issue) &amp;&amp;  !subtask_tree_client_processing?\n        render_descendants_tree_accordion(issue)\n      else\n        super # this will call the stock Redmine IssuesHelper#render_descendants_tree method\n      end\n    end\n  end\nend\n\n# in init.rb:\nIssuesController.class_eval do\n  helper RedmineSubtaskListAccordion::IssuesHelper\nend\n</code></pre>\n\n<p>I happened to write a <a href=\"https://jkraemer.net/2018/05/add-a-project-settings-tab-for-your-redmine-plugin\" rel=\"nofollow noreferrer\">blog post</a> about this exact thing a while ago. Hope it's OK to refer to that here.</p>\n\n<p>Obviously there may still be conflicts if two plugins expect a certain Redmine method they are changing to behave in the way it does in stock Redmine, but removing method aliasing and not trying to monkey patch already existing helpers in my experience helps to avoid many problems.</p>\n\n<p>Update: Most of the other methods in that particular module you linked to actually do not belong there, but could for example be mixed into the <code>Issue</code> model (like <code>sla_has_grandson_issues?</code> or declared as methods in the top level plugin namespace (all the settings and Redmine version related stuff - eg <code>RedmineSubtaskListAccordion.tree_render_34?</code>).</p>\n"}], "owner": {"reputation": 25, "user_id": 9206887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/523be7de69d2878156195817102d53af?s=128&d=identicon&r=PG&f=1", "display_name": "Ben S", "link": "https://stackoverflow.com/users/9206887/ben-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 59043779, "answer_count": 1, "score": 1, "last_activity_date": 1574743251, "creation_date": 1574723720, "question_id": 59041480, "link": "https://stackoverflow.com/questions/59041480/improving-on-hacky-ruby-method-alias-fix-for-conflicting-redmine-plugins", "title": "Improving on hacky ruby &#39;method_alias&#39; fix for conflicting redmine plugins?", "body": "<p>Using redmine 3.x, I have a dependency conflict between two plugins - <a href=\"http://www.redmine.org/plugins/redmine_subtask_list_accordion\" rel=\"nofollow noreferrer\">redmine subtask list accordion</a> and <a href=\"https://www.redmine.org/plugins/redmine_subtasks_inherited_fields\" rel=\"nofollow noreferrer\">Subtask list inherited fields</a>. Installing both raises 500 errors when trying to view an issue.</p>\n\n<pre><code>    ActionView::Template::Error (undefined method `sla_has_grandson_issues?' for #&lt;#&lt;Class:0x000056319e27d668&gt;:0x00007f237ad02588&gt;):\n    1: &lt;% if sla_has_grandson_issues?(@issue) %&gt;\n    2:   &lt;%= content_for :header_tags do\n    3:     stylesheet_link_tag(sla_use_css, :plugin =&gt; \"redmine_subtask_list_accordion\") +\n    4:     javascript_include_tag(\"subtask_list_accordion\" + (subtask_tree_client_processing? ? \"_client\" : \"\"), :plugin =&gt; \"redmine_subtask_list_accordion\")\n  plugins/redmine_subtask_list_accordion/app/views/issues/_subtask_list_accordion_partial.html.erb:1:in `_292e8187f64bee60c61b7b15c99630ab'\n</code></pre>\n\n<p>After lots of trial and error we fixed the issue by adding the following to the original source code of the first plugin:</p>\n\n<pre><code>  included do\n    alias_method :render_descendants_tree_original, :render_descendants_tree\n    alias_method :render_descendants_tree, :switch_render_descendants_tree\n    alias_method :sla_use_css, :sla_use_css\n    alias_method :switch_render_descendants_tree, :switch_render_descendants_tree\n    alias_method :render_descendants_tree_accordion, :render_descendants_tree_accordion\n    alias_method :expand_tree_at_first?,  :expand_tree_at_first?\n    alias_method :sla_has_grandson_issues?, :sla_has_grandson_issues?\n    alias_method :subtask_tree_client_processing?, :subtask_tree_client_processing?\n    alias_method :subtask_list_accordion_tree_render_32?, :subtask_list_accordion_tree_render_32?\n    alias_method :subtask_list_accordion_tree_render_33?, :subtask_list_accordion_tree_render_33?\n    alias_method :subtask_list_accordion_tree_render_34?, :subtask_list_accordion_tree_render_34?\n</code></pre>\n\n<p>This is the original code:</p>\n\n<p><a href=\"https://github.com/GEROMAX/redmine_subtask_list_accordion/blob/master/lib/redmine_subtask_list_accordion/patches/issues_helper_patch.rb\" rel=\"nofollow noreferrer\">https://github.com/GEROMAX/redmine_subtask_list_accordion/blob/master/lib/redmine_subtask_list_accordion/patches/issues_helper_patch.rb</a></p>\n\n<p>Which has the first two <em>alias_method</em> calls from the above source code. </p>\n\n<p>By making an alias method with the same name for each method in the original class, the code works fine. However this seems like a hacky fix, and I don't understand <strong>why</strong> it works. Can someone explain why the fix works and how to <em>rewrite it properly</em>?</p>\n"}, {"tags": ["css", "ruby", "xpath", "web-scraping", "nokogiri"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 1, "creation_date": 1574741361, "post_id": 59041432, "comment_id": 104329105, "body": "Scrap means &quot;throw away&quot;.  I think you mean &quot;scrape&quot; ?"}, {"owner": {"reputation": 21, "user_id": 12432735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cee3ff1be4aff74ed49b6bedd703fa8?s=128&d=identicon&r=PG&f=1", "display_name": "matrix-9", "link": "https://stackoverflow.com/users/12432735/matrix-9"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1574748713, "post_id": 59041432, "comment_id": 104331079, "body": "Yes, my bad. I already edited it."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1574818935, "post_id": 59041432, "comment_id": 104362909, "body": "Please see &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the linked pages and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">mcve</a>&quot;. We need the minimal HTML in your question that will demonstrate the problem, along with the minimal running code that demonstrates it. If that page or site are unavailable your question won&#39;t make sense to those searching for a similar solution in the future, which is what SO is about."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1574819993, "post_id": 59041432, "comment_id": 104363086, "body": "The page you&#39;re using doesn&#39;t contain the ID you&#39;re searching for. Try <code>wget -O - https:&#47;&#47;webcat.schaeffler.com&#47;web&#47;schaeffler&#47;pl&#47;PKW&#47;index.xh&zwnj;&#8203;tml | grep searchByConstraints</code> and you should get some matches. Change the grep pattern to the full string and you won&#39;t get a match. That means the page is changing dynamically so you&#39;ll have to find a different way to locate the information you&#39;re after."}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1574820066, "post_id": 59043808, "comment_id": 104363101, "body": "A bigger problem is the CSS selector isn&#39;t right for the page. Either the page is changing dynamically or the selector is wrong. Either way the question isn&#39;t asked well."}, {"owner": {"reputation": 21, "user_id": 12432735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cee3ff1be4aff74ed49b6bedd703fa8?s=128&d=identicon&r=PG&f=1", "display_name": "matrix-9", "link": "https://stackoverflow.com/users/12432735/matrix-9"}, "edited": false, "score": 0, "creation_date": 1574970724, "post_id": 59043808, "comment_id": 104424454, "body": "It gave me the same result, an empty string. But I solved it using XPATH than CSS."}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1574818801, "last_edit_date": 1574818801, "creation_date": 1574742863, "answer_id": 59043808, "question_id": 59041432, "link": "https://stackoverflow.com/questions/59041432/how-to-scrape-url-text-when-the-id-contains-special-characters-using-nokogiri/59043808#59043808", "title": "How to scrape URL/text, when the id contains special characters using Nokogiri", "body": "<p>Those ids are non-standard CSS so you can't search them as if they were a normal tag, which would be something like <code>&lt;div id=\"this-is-normal\"&gt;</code>. Instead you need to match a pattern in the div's id.</p>\n\n<p>I think this is what you need:</p>\n\n<pre><code>@page.css('div[id^=\"searchByConstraints:form:j_idt491\"]')\n</code></pre>\n\n<p>So for you it's:</p>\n\n<pre><code>x.marka('div[id^=\"searchByConstraints:form:j_idt491\"]')\n</code></pre>\n\n<p>As a side note, I would suggest you name your class <code>Scrapper</code> or <code>Scrape</code>\nand also it's better practice to name your instance variable after the class, so </p>\n\n<pre><code>scrapper = Scrapper.new\nscrapper.marka('blah') # etc. maybe you mean marker?\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 12432735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cee3ff1be4aff74ed49b6bedd703fa8?s=128&d=identicon&r=PG&f=1", "display_name": "matrix-9", "link": "https://stackoverflow.com/users/12432735/matrix-9"}, "is_accepted": true, "score": 0, "last_activity_date": 1574971958, "creation_date": 1574971958, "answer_id": 59095613, "question_id": 59041432, "link": "https://stackoverflow.com/questions/59041432/how-to-scrape-url-text-when-the-id-contains-special-characters-using-nokogiri/59095613#59095613", "title": "How to scrape URL/text, when the id contains special characters using Nokogiri", "body": "<p>I had figured how to solve it. I used XPATH than CSS.</p>\n\n<p>I change this code:</p>\n\n<pre><code>  def marka(css)\n      @page.css(css).text\n  end\n</code></pre>\n\n<pre><code>puts x.marka(\"a#searchByConstraints:form:j_idt491:0:j_idt493:0:j_idt495\")\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>def marka(css)\n    @page.xpath(css).text\nend\n</code></pre>\n\n<pre><code>puts x.marka(\"//*[@id='searchByConstraints:form:j_idt491:0:j_idt493:0:j_idt495']\")\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 12432735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cee3ff1be4aff74ed49b6bedd703fa8?s=128&d=identicon&r=PG&f=1", "display_name": "matrix-9", "link": "https://stackoverflow.com/users/12432735/matrix-9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 59095613, "answer_count": 2, "score": 2, "last_activity_date": 1575000257, "creation_date": 1574723363, "last_edit_date": 1575000257, "question_id": 59041432, "link": "https://stackoverflow.com/questions/59041432/how-to-scrape-url-text-when-the-id-contains-special-characters-using-nokogiri", "title": "How to scrape URL/text, when the id contains special characters using Nokogiri", "body": "<p>I'm trying to scrape some data from <a href=\"https://webcat.schaeffler.com/web/schaeffler/pl/PKW/applicationSearch.xhtml\" rel=\"nofollow noreferrer\">https://webcat.schaeffler.com/web/schaeffler/pl/PKW/applicationSearch.xhtml</a>.</p>\n\n<p>I started to build the structure of my application:</p>\n\n<pre><code>require 'nokogiri'\nrequire 'open-uri'\n\nclass Scrape\n\n  def first(strona)\n      @page = Nokogiri::HTML(open(strona))\n  end\n\n  def marka(css)\n      @page.css(css).text\n  end\n\nend\n\nx = Scrape.new\n\nx.first(\"https://webcat.schaeffler.com/web/schaeffler/pl/PKW/index.xhtml\")\nputs x.marka(\"a#searchByConstraints:form:j_idt491:0:j_idt493:0:j_idt495\")\n</code></pre>\n\n<p>It should put \"ABARTH\", but <code>id</code> includes special characters like <code>\":\"</code> and the only thing that I get is: </p>\n\n<pre><code>unexpected '0' after ':' (Nokogiri::CSS::SyntaxError)\n</code></pre>\n\n<p>I found the solution on \"<a href=\"https://stackoverflow.com/questions/25108319/is-there-a-way-to-escape-non-alphanumeric-characters-in-nokogiri-css\">Is there a way to escape non-alphanumeric characters in Nokogiri css?</a>\", so I changed the last line in my code to:</p>\n\n<pre><code>puts x.marka('*[id=\"searchByConstraints:form:j_idt491:0:j_idt493:0:j_idt495\"]')\n</code></pre>\n\n<p>It returns an empty string, but I don't know why.</p>\n\n<p>The element on the target site looks like:</p>\n\n<pre><code>&lt;a id=\"searchByConstraints:form:j_idt491:0:j_idt493:0:j_idt495\" href=\"/web/schaeffler/pl/PKW/3854/applicationSearch.xhtml\" title=\"ABARTH\"&gt;ABARTH&lt;/a&gt;\n</code></pre>\n\n<p>I did something wrong or it doesn't work in my case.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1574721388, "post_id": 59040336, "comment_id": 104324613, "body": "You may want to consider using <code>shopify-money</code> \u2014 it&#39;s only going to get more complicated. <a href=\"https://github.com/Shopify/money\" rel=\"nofollow noreferrer\">github.com/Shopify/money</a>"}], "answers": [{"tags": [], "owner": {"reputation": 11603, "user_id": 234593, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8e2ee1b00d372ad8f6ed5e87385ffef5?s=128&d=identicon&r=PG", "display_name": "Kache", "link": "https://stackoverflow.com/users/234593/kache"}, "is_accepted": true, "score": 0, "last_activity_date": 1574721712, "last_edit_date": 1574721712, "creation_date": 1574717430, "answer_id": 59040379, "question_id": 59040336, "link": "https://stackoverflow.com/questions/59040336/how-to-format-a-price-correctly-regardless-of-decimal-format/59040379#59040379", "title": "How to format a price correctly regardless of decimal format", "body": "<p>It looks like <code>price</code> is already a <code>Numeric</code> object. Check out <code>sprintf</code> for simple Type-aware padding, for example:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>sprintf('%.2f', 44.5) # =&gt; \"44.50\"\n\n# so you should do something like this:\nsprintf('%.2f', price.to_f)\n</code></pre>\n\n<p>A suggestion:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def try_format_currency(price)\n  sprintf('%.2f', Float(price))\nrescue =&gt; ex\n  # log error if you want\n  nil\nend\n</code></pre>\n\n<ul>\n<li>Use <code>Float()</code> conversion, which can raise, which will clearly express that <code>price</code> is \"untrustworthy\" input, and might not be a proper number</li>\n<li>Express the same thing in the naming of the method</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 629, "user_id": 8122327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2a936a33692423f5560172fb1b4ae04?s=128&d=identicon&r=PG&f=1", "display_name": "gsumk", "link": "https://stackoverflow.com/users/8122327/gsumk"}, "is_accepted": false, "score": 1, "last_activity_date": 1574721448, "last_edit_date": 1574721448, "creation_date": 1574718143, "answer_id": 59040526, "question_id": 59040336, "link": "https://stackoverflow.com/questions/59040336/how-to-format-a-price-correctly-regardless-of-decimal-format/59040526#59040526", "title": "How to format a price correctly regardless of decimal format", "body": "<p>You can use <code>number_to_currency</code> without a unit:</p>\n\n<pre><code>&gt;&gt; number_to_currency(45,unit:\"\")\n=&gt; \"45.00\"\n&gt;&gt; number_to_currency(45.5,unit:\"\")\n=&gt; \"45.50\"\n&gt;&gt; number_to_currency(45.55,unit:\"\")\n=&gt; \"45.55\"\n&gt;&gt;\n</code></pre>\n\n<p>See <a href=\"https://apidock.com/rails/ActionView/Helpers/NumberHelper/number_to_currency\" rel=\"nofollow noreferrer\"><code>number_to_currency</code></a> for more information. </p>\n"}], "owner": {"reputation": 3234, "user_id": 994581, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5ff79a62688297a354a41d772f20a547?s=128&d=identicon&r=PG", "display_name": "yellowreign", "link": "https://stackoverflow.com/users/994581/yellowreign"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 59040379, "answer_count": 2, "score": 0, "last_activity_date": 1574721712, "creation_date": 1574717171, "last_edit_date": 1574721658, "question_id": 59040336, "link": "https://stackoverflow.com/questions/59040336/how-to-format-a-price-correctly-regardless-of-decimal-format", "title": "How to format a price correctly regardless of decimal format", "body": "<p>I want it to be able to read in  JSON and save it correctly regardless whether the value is <code>44.5</code>, <code>44</code> or <code>44.99</code>. The price attributes are a decimal format.</p>\n\n<p>The error is happening in the <code>convert_price</code> method.  The price in the JSON response can be <code>44</code>, <code>44.50</code> or <code>44.99</code>.  However, I noticed that sometimes the last decimal is cut off, like in the error <code>44.5</code>.</p>\n\n<p>I'm receiving this error:</p>\n\n<pre><code>undefined method 'match' for float 74.5:Float\n</code></pre>\n\n<p>My code is:</p>\n\n<pre><code># read in JSON and create books\ndef create_item\n  job_items_url = \"https://foobar.com&amp;format=json\"\n  response = open(job_items_url).read.to_s\n  books = JSON.parse(response)\n\n  Book.create(reg_price: convert_price(item['reg_price']),\n    sale_price: convert_price(item['sale_price']))\n  end\n\n# format the price\ndef convert_price(price)\n  return nil if price.blank? || price.to_f.zero?\n  price = \"#{price}.00\" unless price.match(/[,.]\\d{2}\\z/)\n  price.delete(',.').to_f / 100\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1574733807, "post_id": 59040571, "comment_id": 104327495, "body": "Thanks. I just ended up doing it from runtime with <code>$VERBOSE = nil</code>"}], "tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": true, "score": 3, "last_activity_date": 1574718838, "last_edit_date": 1574718838, "creation_date": 1574718386, "answer_id": 59040571, "question_id": 59039468, "link": "https://stackoverflow.com/questions/59039468/how-can-i-figure-out-where-a-log-message-came-from-and-disable-it/59040571#59040571", "title": "How can I figure out where a log message came from (and disable it)?", "body": "<p>It's a <code>Kernel.warn</code> call in <a href=\"https://github.com/resque/redis-namespace/blob/e7da8a2bc63f27cccb4bda70bb580d470212d39d/lib/redis/namespace.rb#L352\" rel=\"nofollow noreferrer\"><code>redis-namespace</code></a>.</p>\n\n<p>You can disable warnings in Ruby with the <code>-W0</code> command line option.</p>\n\n<p>More info on disabling warnings here:<br>\n<a href=\"https://stackoverflow.com/questions/5591509/suppress-ruby-warnings-when-running-specs\">Suppress Ruby warnings when running specs</a></p>\n"}, {"comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1574723000, "post_id": 59040700, "comment_id": 104325077, "body": "Fair enough but I am just investigating the existing Redis setup of the company I recently joined, not adding this gem myself :)"}], "tags": [], "owner": {"reputation": 11603, "user_id": 234593, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8e2ee1b00d372ad8f6ed5e87385ffef5?s=128&d=identicon&r=PG", "display_name": "Kache", "link": "https://stackoverflow.com/users/234593/kache"}, "is_accepted": false, "score": 0, "last_activity_date": 1574719698, "last_edit_date": 1574719698, "creation_date": 1574719079, "answer_id": 59040700, "question_id": 59039468, "link": "https://stackoverflow.com/questions/59039468/how-can-i-figure-out-where-a-log-message-came-from-and-disable-it/59040700#59040700", "title": "How can I figure out where a log message came from (and disable it)?", "body": "<p>There are several reasons you may want to consider being rid of <code>redis-namespace</code> altogether.</p>\n\n<p>First of all, Redis already has a built-in namespacing mechanism called \"Databases\".</p>\n\n<p>You can read more about it here: <a href=\"http://www.mikeperham.com/2015/09/24/storing-data-with-redis/#data-partitioning\" rel=\"nofollow noreferrer\">http://www.mikeperham.com/2015/09/24/storing-data-with-redis/#data-partitioning</a></p>\n"}], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 59040571, "answer_count": 2, "score": 2, "last_activity_date": 1574719698, "creation_date": 1574712911, "last_edit_date": 1574714082, "question_id": 59039468, "link": "https://stackoverflow.com/questions/59039468/how-can-i-figure-out-where-a-log-message-came-from-and-disable-it", "title": "How can I figure out where a log message came from (and disable it)?", "body": "<p>I am calling a redis command:</p>\n\n<pre><code>$redis.call [\"MEMORY\", \"USAGE\", \"Job--9813\"]\n</code></pre>\n\n<p>and when doing this I get a message logged:</p>\n\n<pre><code>Passing 'call' command to redis as is;\nblind passthrough has been deprecated and will be removed in redis-namespace 2.0\n(at (pry):37in '&lt;main&gt;')\n</code></pre>\n\n<p>I understand the warning but want to run the code anyway (for hundreds of thousands of keys) without spamming my terminal with these messages. How can i figure out where the message came from? I searched on the <a href=\"https://github.com/redis/redis-rb\" rel=\"nofollow noreferrer\"><code>redis-rb</code></a> repo, and couldn't find anything. How can I disable it?</p>\n"}, {"tags": ["ruby", "automation", "header", "rubygems", "faraday"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1574719528, "post_id": 59038376, "comment_id": 104324033, "body": "Have you first verified that your Authorization is valid? I.e. can you access other pages with Faraday and the auth headers that you provide?"}, {"owner": {"reputation": 11, "user_id": 12418191, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA4WD4JTZt1ghLuu7-4Kj56dXupSx6SmXU7EMayVcQ=k-s128", "display_name": "Vanessa Bioni", "link": "https://stackoverflow.com/users/12418191/vanessa-bioni"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1574789903, "post_id": 59038376, "comment_id": 104352580, "body": "Yes, the  Authorization is valid. But the post method is not working. Cant send it. My request is not even generating log in the server. I tried to print the URL sent and it is showing this:  #&lt;Faraday::Connection:0x000000000aac8820&gt;"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1574792232, "post_id": 59038376, "comment_id": 104353716, "body": "I just tested your code on my server and it posts fine. Have you checked the content of <code>$api[&#39;upload&#39;]</code> to verify that it really does contain something. I.e. the correct URL as text."}, {"owner": {"reputation": 11, "user_id": 12418191, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA4WD4JTZt1ghLuu7-4Kj56dXupSx6SmXU7EMayVcQ=k-s128", "display_name": "Vanessa Bioni", "link": "https://stackoverflow.com/users/12418191/vanessa-bioni"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1574801151, "post_id": 59038376, "comment_id": 104357618, "body": "Yes, I replaced the variable for the real URL. As I said in the previous comment, when I print the &quot;conn&quot; I got this on my console:#&lt;Faraday::Connection:0x000000000....&gt;"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1574802843, "post_id": 59038376, "comment_id": 104358309, "body": "Unfortunately there&#39;s too little information to be able to solve your problem from here. Try one of the other approaches from here. There are many good answers, including ones that do not require external libraries. <a href=\"https://stackoverflow.com/questions/184178/ruby-how-to-post-a-file-via-http-as-multipart-form-data\" title=\"ruby how to post a file via http as multipart form data\">stackoverflow.com/questions/184178/&hellip;</a>"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1574803067, "post_id": 59038376, "comment_id": 104358394, "body": "You could also try to attach a debug logger to Faraday, to see what it is doing internally: <a href=\"https://github.com/envylabs/faraday-detailed_logger\" rel=\"nofollow noreferrer\">github.com/envylabs/faraday-detailed_logger</a>  If you get some output or new information, you can then add it to your question."}, {"owner": {"reputation": 11, "user_id": 12418191, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA4WD4JTZt1ghLuu7-4Kj56dXupSx6SmXU7EMayVcQ=k-s128", "display_name": "Vanessa Bioni", "link": "https://stackoverflow.com/users/12418191/vanessa-bioni"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1574863883, "post_id": 59038376, "comment_id": 104381993, "body": "I did it, now there is another problem. I updated de question."}, {"owner": {"reputation": 11, "user_id": 12418191, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA4WD4JTZt1ghLuu7-4Kj56dXupSx6SmXU7EMayVcQ=k-s128", "display_name": "Vanessa Bioni", "link": "https://stackoverflow.com/users/12418191/vanessa-bioni"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 1, "creation_date": 1574884319, "post_id": 59038376, "comment_id": 104392202, "body": "I solved the problem."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 12418191, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA4WD4JTZt1ghLuu7-4Kj56dXupSx6SmXU7EMayVcQ=k-s128", "display_name": "Vanessa Bioni", "link": "https://stackoverflow.com/users/12418191/vanessa-bioni"}, "is_accepted": false, "score": 1, "last_activity_date": 1574884501, "creation_date": 1574884501, "answer_id": 59077614, "question_id": 59038376, "link": "https://stackoverflow.com/questions/59038376/faraday-gem-does-not-send-filedata/59077614#59077614", "title": "Faraday Gem does not send fileData", "body": "<p>I solved the problem.</p>\n\n<p>It was on the type of file. Instead of using <code>'file/pdf'</code> I changed to <code>'application/pdf'</code> and worked. </p>\n\n<p>For each type of file there is a different way of usage:</p>\n\n<pre><code>pdf:\napplication/pdf\ndocx:\napplication/vnd.openxmlformats-officedocument.wordprocessingml.document\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12418191, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA4WD4JTZt1ghLuu7-4Kj56dXupSx6SmXU7EMayVcQ=k-s128", "display_name": "Vanessa Bioni", "link": "https://stackoverflow.com/users/12418191/vanessa-bioni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574884501, "creation_date": 1574707910, "last_edit_date": 1574864151, "question_id": 59038376, "link": "https://stackoverflow.com/questions/59038376/faraday-gem-does-not-send-filedata", "title": "Faraday Gem does not send fileData", "body": "<p>I am doing an API automation in Ruby using the <code>Faraday</code> Gem to automate a file upload in my API.</p>\n\n<p>I have the follow problem: I need to upload the file as form-data, but it is not working.</p>\n\n<p>Here's the latest syntax that I'm using:</p>\n\n<pre><code>conn = Faraday.new($api['upload']) do |f|\n  f.request :multipart\n  f.adapter Faraday.default_adapter\nend \n\nformdata = { :file =&gt; Faraday::UploadIO.new('./arquivo/pequeno.pdf', 'file/pdf') }\nheaders = {'Content-Type' =&gt; 'multipart/form-data', 'Authorization' =&gt; 'Bearer ' + @token, 'uuidUser' =&gt; @uuid}\n\nconn.post('/upload', formdata, headers)\n</code></pre>\n\n<p>Also, I cannot get the response body or code. I got the error that method body or code or status does not exist.</p>\n\n<p>Do you have any idea what I may be doing wrong?</p>\n\n<p>I put the the logger to see further what is happening, and this is the result:</p>\n\n<pre><code>W, [2019-11-27T11:15:15.385754 #4208]  WARN -- : HTTP 500\nD, [2019-11-27T11:15:15.386412 #4208] DEBUG -- : \"x-content-type-options: nosniff\\nx-xss-protection: 1; mode=block\\ncache-control: no-cache, no-store, max-age=0, must-revalidate\\npragma: no-cache\\nexpires: 0\\nx-frame-options: DENY\\ncontent-type: application/json;charset=UTF-8\\ntransfer-encoding: chunked\\ndate: Wed, 27 Nov 2019 14:15:14 GMT\\nconnection: close\\n\\n{\\\"exception\\\":\\\"org.springframework.web.multipart.MultipartException\\\",\\\"status\\\":500,\\\"error\\\":[\\\"Failed to parse multipart servlet request; nested exception is java.io.IOException: org.apache.tomcat.util.http.fileupload.FileUploadException: the request was rejected because no multipart boundary was found\\\"]}\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 2205, "user_id": 6460122, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/WTsp7.jpg?s=128&g=1", "display_name": "ricks", "link": "https://stackoverflow.com/users/6460122/ricks"}, "edited": false, "score": 0, "creation_date": 1574706054, "post_id": 59037908, "comment_id": 104318647, "body": "Could you please add the query being ran in the console when the view is loaded"}, {"owner": {"reputation": 19, "user_id": 11161751, "user_type": "registered", "profile_image": "https://graph.facebook.com/2148488921864046/picture?type=large", "display_name": "Sarah", "link": "https://stackoverflow.com/users/11161751/sarah"}, "reply_to_user": {"reputation": 2205, "user_id": 6460122, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/WTsp7.jpg?s=128&g=1", "display_name": "ricks", "link": "https://stackoverflow.com/users/6460122/ricks"}, "edited": false, "score": 0, "creation_date": 1574706377, "post_id": 59037908, "comment_id": 104318781, "body": "Is that the same as the info being put out in the server?"}, {"owner": {"reputation": 2205, "user_id": 6460122, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/WTsp7.jpg?s=128&g=1", "display_name": "ricks", "link": "https://stackoverflow.com/users/6460122/ricks"}, "edited": false, "score": 0, "creation_date": 1574706587, "post_id": 59037908, "comment_id": 104318874, "body": "When you load the page it should show you the exact query being ran in your logs. When you use active record to build queries in your logs it will show you something like <code>SELECT * FROM events WHERE &#39;start_date::date&gt;=CURRENT_DATE&#39; ORDER BY start_date ASC</code>"}, {"owner": {"reputation": 2205, "user_id": 6460122, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/WTsp7.jpg?s=128&g=1", "display_name": "ricks", "link": "https://stackoverflow.com/users/6460122/ricks"}, "edited": false, "score": 0, "creation_date": 1574707050, "post_id": 59037908, "comment_id": 104319096, "body": "Oops, scratch that last comment. I see what you are trying to do. It looks like the query is correct, are you sure nothing front end is modifying the order? Any JS?"}, {"owner": {"reputation": 19, "user_id": 11161751, "user_type": "registered", "profile_image": "https://graph.facebook.com/2148488921864046/picture?type=large", "display_name": "Sarah", "link": "https://stackoverflow.com/users/11161751/sarah"}, "reply_to_user": {"reputation": 2205, "user_id": 6460122, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/WTsp7.jpg?s=128&g=1", "display_name": "ricks", "link": "https://stackoverflow.com/users/6460122/ricks"}, "edited": false, "score": 0, "creation_date": 1574707304, "post_id": 59037908, "comment_id": 104319223, "body": "I&#39;ll go through my files and edit the post with anything relevant"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 11161751, "user_type": "registered", "profile_image": "https://graph.facebook.com/2148488921864046/picture?type=large", "display_name": "Sarah", "link": "https://stackoverflow.com/users/11161751/sarah"}, "edited": false, "score": 1, "creation_date": 1574708915, "post_id": 59038551, "comment_id": 104319931, "body": "Thank you! I&#39;ll go try that"}, {"owner": {"reputation": 19, "user_id": 11161751, "user_type": "registered", "profile_image": "https://graph.facebook.com/2148488921864046/picture?type=large", "display_name": "Sarah", "link": "https://stackoverflow.com/users/11161751/sarah"}, "edited": false, "score": 1, "creation_date": 1574709973, "post_id": 59038551, "comment_id": 104320395, "body": "That seems to work! I never thought of needing to change the column type. Thanks so much!"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1574718014, "post_id": 59038551, "comment_id": 104323485, "body": "Proper field definitions in a database make a world of difference in how a database behaves and performs. It&#39;s important to go through tutorials for your DBM to learn how to create the schemas otherwise you could write an application that creeps along, consumes huge amounts of CPU or disk, or is so inflexible you can&#39;t do anything but the bare essentials."}], "tags": [], "owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "is_accepted": true, "score": 2, "last_activity_date": 1574717842, "last_edit_date": 1574717842, "creation_date": 1574708745, "answer_id": 59038551, "question_id": 59037908, "link": "https://stackoverflow.com/questions/59037908/how-to-properly-order-dates-from-my-apps-database/59038551#59038551", "title": "How to properly order dates from my app&#39;s database", "body": "<p>The problem here is that <code>start_date</code> is saved as a string rather than a time.  When you try to sort by the string it just alphabetizes the output so all January get grouped together.  </p>\n\n<p>if you change:</p>\n\n<pre><code>t.string \"start_date\"\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>t.date_time \"start_date\"\n</code></pre>\n\n<p>it should work.  You will have to migrate the existing data obviously. </p>\n"}], "owner": {"reputation": 19, "user_id": 11161751, "user_type": "registered", "profile_image": "https://graph.facebook.com/2148488921864046/picture?type=large", "display_name": "Sarah", "link": "https://stackoverflow.com/users/11161751/sarah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 59038551, "answer_count": 1, "score": 0, "last_activity_date": 1574717842, "creation_date": 1574705910, "last_edit_date": 1574708103, "question_id": 59037908, "link": "https://stackoverflow.com/questions/59037908/how-to-properly-order-dates-from-my-apps-database", "title": "How to properly order dates from my app&#39;s database", "body": "<p>I'm having trouble getting event dates pulled from my database to render in proper order. I'm using bootstrap-datepicker in my simple_form for the user to use. My events controller currently is:</p>\n\n<pre><code> ```def index\n        @events = Event.order(start_date: :asc).where('start_date::date &gt;= CURRENT_DATE')\n    end```\n</code></pre>\n\n<p>The events do get rendered to the page with the correct date but they seem to only be getting ordered by month and ignoring the year. For example the events taking place in January of 2021 will be listed above March 2020, because January comes before March. </p>\n\n<p>I've tried looking for how the order method in ruby works as well as searching as other posts, but I haven't been successful. Any thoughts?</p>\n\n<p>Logs: </p>\n\n<pre><code>```Started GET \"/events\" for ::1 at 2019-11-25 10:26:28 -0800\nProcessing by EventsController#index as HTML\n  Rendering events/index.html.erb within layouts/application\n  User Load (0.3ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 ORDER BY \"users\".\"id\" ASC LIMIT $2  [[\"id\", 1], [\"LIMIT\", 1]]\n  \u21b3 app/views/events/index.html.erb:10\n  Event Load (0.3ms)  SELECT \"events\".* FROM \"events\" WHERE (start_date::date &gt;= CURRENT_DATE) ORDER BY \"events\".\"start_date\" ASC\n  \u21b3 app/views/events/index.html.erb:27\n  Rendered events/index.html.erb within layouts/application (4.4ms)\nCompleted 200 OK in 174ms (Views: 171.2ms | ActiveRecord: 0.6ms)```\n</code></pre>\n\n<p>application.js: </p>\n\n<pre><code>```//= require rails-ujs\n//= require activestorage\n//= require jquery\n//= require jquery_ujs\n//= require popper\n//= require tether\n//= require bootstrap-sprockets\n//= require_tree .\n//= require bootstrap-datepicker\n$(function() {\n    $('input.datepicker').data({behaviour: \"datepicker\"}).datepicker();\n});```\n</code></pre>\n\n<p>simple_form: </p>\n\n<pre><code>```&lt;div class=\"event-box col-5 offset-3\"&gt;\n    &lt;br/&gt;\n    &lt;h1 align=\"center\" style=\"font-size: 25px;\"&gt;Create New Event&lt;/h1&gt;\n    &lt;%= simple_form_for @event do |f| %&gt;\n        &lt;%= f.input :title %&gt;\n        &lt;%= f.input :start_date, as: :string, input_html: { class: \"datepicker\" }%&gt;\n        &lt;%= f.input :end_date, as: :string, input_html: { class: \"datepicker\" }%&gt;\n        &lt;%= f.input :location %&gt;\n        &lt;%= f.input :details %&gt;\n        &lt;br /&gt;\n        &lt;div align=\"center\"&gt;\n            &lt;%= f.submit 'Create', class: 'btn btn-primary' %&gt;\n        &lt;/div&gt;\n    &lt;% end %&gt;   \n    &lt;br/&gt;\n&lt;/div&gt;\n\n&lt;script&gt;\n$('#datepicker').datepicker({format: 'mm-dd-yyyy'});\n&lt;/script&gt;```\n</code></pre>\n\n<p>events table: </p>\n\n<pre><code>```create_table \"events\", force: :cascade do |t|\n    t.string \"title\"\n    t.string \"start_date\"\n    t.string \"end_date\"\n    t.string \"location\"\n    t.text \"details\"\n    t.integer \"event_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.string \"event\"\n    t.index [\"event_id\"], name: \"index_events_on_event_id\"\n  end```\n</code></pre>\n"}, {"tags": ["ruby", "rubygems", "bundler"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1574705048, "post_id": 59037439, "comment_id": 104318157, "body": "<i>Following files may not be writable, so sudo is needed</i>, did you try <code>sudo bundle install</code>?"}, {"owner": {"reputation": 5742, "user_id": 1906131, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/40b31f70737db5a1ae964c9b9998c22e?s=128&d=identicon&r=PG", "display_name": "Rober", "link": "https://stackoverflow.com/users/1906131/rober"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1574706322, "post_id": 59037439, "comment_id": 104318763, "body": "This is the warning that I get when running with sudo: Don&#39;t run Bundler as root. Bundler can ask for sudo if it is needed, and installing your bundle as root will break this application for all non-root users on this machine. After that, I get the same error."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1575350051, "post_id": 59037439, "comment_id": 104526274, "body": "Upgrade json to &gt;= 2."}], "owner": {"reputation": 5742, "user_id": 1906131, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/40b31f70737db5a1ae964c9b9998c22e?s=128&d=identicon&r=PG", "display_name": "Rober", "link": "https://stackoverflow.com/users/1906131/rober"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574706371, "creation_date": 1574703927, "last_edit_date": 1574706371, "question_id": 59037439, "link": "https://stackoverflow.com/questions/59037439/ruby-bundler-an-error-occurred-while-installing-json-1-8-1", "title": "Ruby bundler: An error occurred while installing json (1.8.1)", "body": "<p>I have upgraded my ruby version to ruby ruby 2.4.2p198 (2017-09-14 revision 59899) [x86_64-darwin19]</p>\n\n<p>When I run bundle to update my gems, I get next error that I have no idea what to do with: </p>\n\n<pre><code>    bundle\n    Fetching gem metadata from http://rubygems.org/..............\nFetching https://github.com/stripe/stripe-ruby\nFetching rake 10.1.0\nInstalling rake 10.1.0\nFetching i18n 0.6.5\nInstalling i18n 0.6.5\nFetching minitest 4.7.5\nInstalling minitest 4.7.5\nFetching multi_json 1.14.1\nInstalling multi_json 1.14.1\nFetching atomic 1.1.14\nInstalling atomic 1.1.14 with native extensions\nFetching thread_safe 0.1.3\nInstalling thread_safe 0.1.3\nFetching tzinfo 0.3.37\nInstalling tzinfo 0.3.37\nFetching activesupport 4.0.0\nInstalling activesupport 4.0.0\nFetching builder 3.1.4\nInstalling builder 3.1.4\nFetching erubis 2.7.0\nInstalling erubis 2.7.0\nFetching rack 1.5.2\nInstalling rack 1.5.2\nFetching rack-test 0.6.2\nInstalling rack-test 0.6.2\nFetching actionpack 4.0.0\nInstalling actionpack 4.0.0\nFetching mime-types 1.25\nInstalling mime-types 1.25\nFetching polyglot 0.3.3\nInstalling polyglot 0.3.3\nFetching treetop 1.4.15\nInstalling treetop 1.4.15\nFetching mail 2.5.4\nInstalling mail 2.5.4\nFetching actionmailer 4.0.0\nInstalling actionmailer 4.0.0\nFetching activemodel 4.0.0\nInstalling activemodel 4.0.0\nFetching activerecord-deprecated_finders 1.0.3\nInstalling activerecord-deprecated_finders 1.0.3\nFetching arel 4.0.0\nInstalling arel 4.0.0\nFetching activerecord 4.0.0\nInstalling activerecord 4.0.0\nFetching addressable 2.3.6\nInstalling addressable 2.3.6\nFetching gyoku 1.3.1\nInstalling gyoku 1.3.1\nFetching mini_portile 0.5.3\nInstalling mini_portile 0.5.3\nFetching nokogiri 1.6.1\nInstalling nokogiri 1.6.1 with native extensions\nFetching akami 1.3.1\nInstalling akami 1.3.1\nUsing bundler 1.17.3\nFetching chronic 0.10.2\nInstalling chronic 0.10.2\nFetching coffee-script-source 1.6.3\nInstalling coffee-script-source 1.6.3\nFetching execjs 2.0.1\nInstalling execjs 2.0.1\nFetching coffee-script 2.2.0\nInstalling coffee-script 2.2.0\nFetching thor 0.18.1\nInstalling thor 0.18.1\nFetching railties 4.0.0\nInstalling railties 4.0.0\nFetching coffee-rails 4.0.0\nInstalling coffee-rails 4.0.0\nFetching css_parser 1.3.5\nInstalling css_parser 1.3.5\nFetching hike 1.2.3\nInstalling hike 1.2.3\nFetching htmlentities 4.3.2\nInstalling htmlentities 4.3.2\nFetching httpi 2.4.1\nInstalling httpi 2.4.1\nFetching jbuilder 1.5.1\nInstalling jbuilder 1.5.1\nFetching jquery-rails 3.0.4\nInstalling jquery-rails 3.0.4\nFetching json 1.8.1\nInstalling json 1.8.1 with native extensions\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    current directory: /Users/Rober/.rvm/rubies/ruby-2.4.2/lib/ruby/gems/2.4.0/gems/json-1.8.1/ext/json/ext/generator\n/Users/Rober/.rvm/rubies/ruby-2.4.2/bin/ruby -I /Users/Rober/.rvm/rubies/ruby-2.4.2/lib/ruby/site_ruby/2.4.0 -r ./siteconf20191125-59844-rge3ax.rb extconf.rb\ncreating Makefile\n\ncurrent directory: /Users/Rober/.rvm/rubies/ruby-2.4.2/lib/ruby/gems/2.4.0/gems/json-1.8.1/ext/json/ext/generator\nmake \"DESTDIR=\" clean\n\ncurrent directory: /Users/Rober/.rvm/rubies/ruby-2.4.2/lib/ruby/gems/2.4.0/gems/json-1.8.1/ext/json/ext/generator\nmake \"DESTDIR=\"\ncompiling generator.c\nIn file included from generator.c:1:\n./../fbuffer/fbuffer.h:175:47: error: too few arguments provided to function-like macro invocation\n    VALUE result = rb_str_new(FBUFFER_PAIR(fb));\n                                              ^\n/Users/Rober/.rvm/rubies/ruby-2.4.2/include/ruby-2.4.0/ruby/intern.h:795:9: note: macro 'rb_str_new' defined here\n#define rb_str_new(str, len) RB_GNUC_EXTENSION_BLOCK(   \\\n        ^\nIn file included from generator.c:1:\n./../fbuffer/fbuffer.h:175:11: warning: incompatible pointer to integer conversion initializing 'VALUE' (aka 'unsigned long') with an expression of type 'VALUE (const char *,\nlong)' (aka 'unsigned long (const char *, long)') [-Wint-conversion]\n    VALUE result = rb_str_new(FBUFFER_PAIR(fb));\n          ^        ~~~~~~~~~~\ngenerator.c:840:25: error: use of undeclared identifier 'rb_cFixnum'\n    } else if (klass == rb_cFixnum) {\n                        ^\ngenerator.c:842:25: error: use of undeclared identifier 'rb_cBignum'\n    } else if (klass == rb_cBignum) {\n                        ^\n1 warning and 3 errors generated.\nmake: *** [generator.o] Error 1\n\nmake failed, exit code 2\n\nGem files will remain installed in /Users/Rober/.rvm/rubies/ruby-2.4.2/lib/ruby/gems/2.4.0/gems/json-1.8.1 for inspection.\nResults logged to /Users/Rober/.rvm/rubies/ruby-2.4.2/lib/ruby/gems/2.4.0/extensions/x86_64-darwin-19/2.4.0/json-1.8.1/gem_make.out\n\nAn error occurred while installing json (1.8.1), and Bundler cannot continue.\nMake sure that `gem install json -v '1.8.1' --source 'http://rubygems.org/'` succeeds before bundling.\n\nIn Gemfile:\n  sdoc was resolved to 0.3.20, which depends on\n    rdoc was resolved to 3.12.2, which depends on\n      json\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 38258, "user_id": 560593, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99c93a3c235763708dd7263e197acdc6?s=128&d=identicon&r=PG", "display_name": "Patrick Evans", "link": "https://stackoverflow.com/users/560593/patrick-evans"}, "edited": false, "score": 0, "creation_date": 1574704245, "post_id": 59037436, "comment_id": 104317800, "body": "You call/use  <code>autosize</code> on its own, it doesnt make itself a jquery plugin. Eg <code>autosize(element)</code>, <code>autosize.update(element)</code>, etc"}, {"owner": {"reputation": 261, "user_id": 6252815, "user_type": "registered", "profile_image": "https://graph.facebook.com/1174293045936640/picture?type=large", "display_name": "Max Kirsch", "link": "https://stackoverflow.com/users/6252815/max-kirsch"}, "reply_to_user": {"reputation": 38258, "user_id": 560593, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99c93a3c235763708dd7263e197acdc6?s=128&d=identicon&r=PG", "display_name": "Patrick Evans", "link": "https://stackoverflow.com/users/560593/patrick-evans"}, "edited": false, "score": 0, "creation_date": 1574705557, "post_id": 59037436, "comment_id": 104318402, "body": "But I need to define / load it anywhere I guess. Otherwise I get <code>Uncaught ReferenceError: autosize is not defined</code>"}, {"owner": {"reputation": 1686, "user_id": 3749576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64aacb83ff9853fd34495f700a5d8451?s=128&d=identicon&r=PG", "display_name": "Juan Marco", "link": "https://stackoverflow.com/users/3749576/juan-marco"}, "edited": false, "score": 0, "creation_date": 1580909336, "post_id": 59037436, "comment_id": 106252288, "body": "There&#39;s an <a href=\"https://github.com/jackmoore/autosize/issues/377\" rel=\"nofollow noreferrer\">open issue</a> with <code>autosize</code> that might relate to the issue your experiencing."}], "owner": {"reputation": 261, "user_id": 6252815, "user_type": "registered", "profile_image": "https://graph.facebook.com/1174293045936640/picture?type=large", "display_name": "Max Kirsch", "link": "https://stackoverflow.com/users/6252815/max-kirsch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 374, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1574708080, "creation_date": 1574703909, "last_edit_date": 1574708080, "question_id": 59037436, "link": "https://stackoverflow.com/questions/59037436/jquery-autosize-is-not-a-function-when-using-autosize-js", "title": "jQuery(...).autosize is not a function when using autosize.js", "body": "<p>I'm trying to get autosize.js to work in my Rails 6 application but it doesn't matter what I try, it's not working.</p>\n\n<p>Every time I try to use it on a textarea I'm getting this error:</p>\n\n<blockquote>\n  <p>jQuery(...).autosize is not a function</p>\n</blockquote>\n\n<p>What I did:</p>\n\n<p>I added the plugin via yarn with <code>yarn add autosize</code>\nThen I required it in my application.js, I tried different solutions: </p>\n\n<pre><code>require(\"autosize\")\nrequire(\"autosize/dist/autosize\")\n</code></pre>\n\n<p>Then I imported it in different ways to try if it works somehow (as all other plugins are working).\nWhat I tried:</p>\n\n<pre><code>import 'autosize'\nimport autosize from 'autosize'\n</code></pre>\n\n<p>Then I tried setting a global scope for the variable:</p>\n\n<pre><code>global.autosize = autosize;\n</code></pre>\n\n<p>For initialization I followed the readme:</p>\n\n<pre><code>autosize($('textarea'));\n</code></pre>\n\n<p>I even tried to remove the yarn package and download the files. But still the same error.</p>\n\n<p>Any more suggestions on what I could do to make it work?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Okay, at least I found the problem: The textareas are generated by AJAX, so they are dynamically generated. On other textareas that are not dynamically it's working. \nI tried:</p>\n\n<pre><code>$(document).on('focus', 'textarea', function(){\n            autosize($('textarea'));\n});\n</code></pre>\n\n<p>and visually it's working, but I still get the same error and can't submit the data.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "model-view-controller", "minitest"], "comments": [{"owner": {"reputation": 1559, "user_id": 1646268, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/12e4f98cd941f6b4f1c6c84dce0c8518?s=128&d=identicon&r=PG", "display_name": "ehp", "link": "https://stackoverflow.com/users/1646268/ehp"}, "edited": false, "score": 0, "creation_date": 1574705136, "post_id": 59037435, "comment_id": 104318193, "body": "Are you defining this inside an integration test? That is, does the <code>test &quot;should redirect membership dashboard if create password&quot;</code>method live inside a class which inherits from <code>ActionDispatch::IntegrationTest</code>?"}, {"owner": {"reputation": 21, "user_id": 12368787, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAN4RtiYWElbD2_7WcUdWeF8U82zM3vXM9rgBAMWQ=k-s128", "display_name": "lux", "link": "https://stackoverflow.com/users/12368787/lux"}, "reply_to_user": {"reputation": 1559, "user_id": 1646268, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/12e4f98cd941f6b4f1c6c84dce0c8518?s=128&d=identicon&r=PG", "display_name": "ehp", "link": "https://stackoverflow.com/users/1646268/ehp"}, "edited": false, "score": 0, "creation_date": 1574707540, "post_id": 59037435, "comment_id": 104319332, "body": "Thanks ehp for your answer. I&#39;m inheriting from ActionController::TestCase. You&#39;re right, the test where I used &quot;follow_redirect!&quot; was inheriting from ActionDispatch::IntegrationTest."}], "owner": {"reputation": 21, "user_id": 12368787, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAN4RtiYWElbD2_7WcUdWeF8U82zM3vXM9rgBAMWQ=k-s128", "display_name": "lux", "link": "https://stackoverflow.com/users/12368787/lux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574703903, "creation_date": 1574703903, "question_id": 59037435, "link": "https://stackoverflow.com/questions/59037435/when-testing-nomethoderror-undefined-method-follow-redirect", "title": "When testing: NoMethodError: undefined method `follow_redirect!&#39;", "body": "<p>I'm getting a <strong>NoMethodError</strong> when trying to test the redirection of a post method using '<strong>follow_redirect!</strong>'.</p>\n\n<p>This is the error:</p>\n\n<pre><code>NoMethodError:   NoMethodError: undefined method `follow_redirect!' for #&lt;ChangePasswordsControllerTest:0x00005586ffd3c030&gt;\n</code></pre>\n\n<p>Here is my controller.</p>\n\n<pre><code>def create\n    @user = current_user\n    if @user.authenticate(params[:user][:old_password])\n      if @user.update_attributes(params.require(:user).permit(:old_password, :password, :password_confirmation))\n        flash[:success] = \"La contrase\u00f1a se cambi\u00f3 correctamente\"\n        redirect_to membership_dashboard_path\n      else\n        flash[:warning] = \"No se pudo cambiar la contrase\u00f1a\"\n        render 'new'\n      end\n    else\n      flash[:warning] = \"La contrase\u00f1a actual no es correcta.\"\n      render 'new'\n    end\n  end \n</code></pre>\n\n<p>And here is my test</p>\n\n<pre><code>test \"should redirect membership dashboard if create password\" do\n    get :new\n    post :create, params: { user: {\n      old_password: '1234',\n      password: \"123456\",\n      password_confirmation: \"123456\" }\n    }\n    assert_equal 'La contrase\u00f1a se cambi\u00f3 correctamente', flash[:success]\n    assert_redirected_to membership_dashboard_path\n    follow_redirect!\n    assert_response :success\n  end\n</code></pre>\n\n<p>It runs fine if I remove the last two lines</p>\n\n<pre><code>    follow_redirect!\n    assert_response :success\n</code></pre>\n\n<p>The weirdest thing is that I'm already using 'follow_redirect!' in another test and it's fine!</p>\n\n<p>Does anyone know how to fix this?</p>\n"}, {"tags": ["ruby", "big-o"], "comments": [{"owner": {"reputation": 601, "user_id": 2179112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dae92dd58d619263a99d1eaee40ad8bc?s=128&d=identicon&r=PG", "display_name": "Heinrich supports Monica", "link": "https://stackoverflow.com/users/2179112/heinrich-supports-monica"}, "edited": false, "score": 1, "creation_date": 1574703342, "post_id": 59037160, "comment_id": 104317380, "body": "To help the community understand your question better, consider clarifying what &#39;m&#39; and &#39;n&#39; mean in relation to your code."}, {"owner": {"reputation": 1031, "user_id": 2387766, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4accddb78a8c5b94aa1e76fdb36fdb95?s=128&d=identicon&r=PG", "display_name": "Karen", "link": "https://stackoverflow.com/users/2387766/karen"}, "reply_to_user": {"reputation": 601, "user_id": 2179112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dae92dd58d619263a99d1eaee40ad8bc?s=128&d=identicon&r=PG", "display_name": "Heinrich supports Monica", "link": "https://stackoverflow.com/users/2179112/heinrich-supports-monica"}, "edited": false, "score": 0, "creation_date": 1574703814, "post_id": 59037160, "comment_id": 104317595, "body": "@Heinrich Unfortunately the solution didn&#39;t provide any context about what m is :( I assumed that it had something to do with the window size. And I&#39;ll add an edit for what the n represents!"}, {"owner": {"reputation": 1031, "user_id": 2387766, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4accddb78a8c5b94aa1e76fdb36fdb95?s=128&d=identicon&r=PG", "display_name": "Karen", "link": "https://stackoverflow.com/users/2387766/karen"}, "reply_to_user": {"reputation": 601, "user_id": 2179112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dae92dd58d619263a99d1eaee40ad8bc?s=128&d=identicon&r=PG", "display_name": "Heinrich supports Monica", "link": "https://stackoverflow.com/users/2179112/heinrich-supports-monica"}, "edited": false, "score": 0, "creation_date": 1574703877, "post_id": 59037160, "comment_id": 104317641, "body": "Question edited! The n represents how many times the loop iterates"}], "answers": [{"comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1574705971, "post_id": 59037790, "comment_id": 104318601, "body": "<code>array.slice</code>, <code>window.max</code>, and <code>window.min</code> are all O(m). Though I&#39;m not sure <code>array.slice</code> iterates, it can also copy memory (technically O(m) but with a very different constant). It can also be just pointer references which are copy-on-write. I&#39;m not sure which Ruby does."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 0, "creation_date": 1574706386, "post_id": 59037790, "comment_id": 104318786, "body": "Yes, it copies the memory. <code>Array#slice</code> calls <code>rb_ary_aref</code> calls <code>rb_ary_aref2</code> calls <code>rb_ary_subseq</code> calls <a href=\"https://github.com/ruby/ruby/blob/0e8219f591f3f17cb7ee361e8a60dbef08145883/array.c#L1109\" rel=\"nofollow noreferrer\"><code>ary_make_partial</code></a> which uses memcpy. Technically O(m), but it has a much lower constant than iterative <code>window.max&#47;min</code> and will be swamped by their cost."}, {"owner": {"reputation": 1031, "user_id": 2387766, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4accddb78a8c5b94aa1e76fdb36fdb95?s=128&d=identicon&r=PG", "display_name": "Karen", "link": "https://stackoverflow.com/users/2387766/karen"}, "edited": false, "score": 0, "creation_date": 1574710951, "post_id": 59037790, "comment_id": 104320820, "body": "Thank you for the explanation!! Both of these answers were more than enough!"}], "tags": [], "owner": {"reputation": 28433, "user_id": 1565525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2e3a5d0911464ffa3d7ac48475cf98d?s=128&d=identicon&r=PG", "display_name": "Fabio", "link": "https://stackoverflow.com/users/1565525/fabio"}, "is_accepted": false, "score": 2, "last_activity_date": 1574705973, "last_edit_date": 1574705973, "creation_date": 1574705498, "answer_id": 59037790, "question_id": 59037160, "link": "https://stackoverflow.com/questions/59037160/why-is-the-time-complexity-for-this-on-m/59037790#59037790", "title": "Why is the time complexity for this O(n * m)?", "body": "<p>Line <code>array.slice(i, window_size)</code> cannot be considered as a constant, because <code>array.slice</code> will iterate array at least once O(m),<br>\nwhen you put this inside loop it makes <code>n * m</code>, where<br>\n - <code>n</code> amount of iterations in <code>num_windows.times</code> loop<br>\n - <code>m</code> amount of iterations in <code>array.slice</code> internal loop   </p>\n\n<p>Amount of iterations inside <code>array.slice</code> probably will be equal <code>[array.length, window_size].min</code></p>\n\n<p>Line <code>current_range = window.max - window.min</code> will be just O(2*m), because <code>min</code> and <code>max</code> iterates array once</p>\n\n<p>So for whole method you end up with O(n * 2m) and if we ignore constants - O(n * m)</p>\n"}, {"tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 2, "last_activity_date": 1574706860, "last_edit_date": 1574706860, "creation_date": 1574705848, "answer_id": 59037890, "question_id": 59037160, "link": "https://stackoverflow.com/questions/59037160/why-is-the-time-complexity-for-this-on-m/59037890#59037890", "title": "Why is the time complexity for this O(n * m)?", "body": "<p>We can simplify this to only the non-constant parts.</p>\n\n<pre><code>num_windows = array.length - window_size + 1\n\nnum_windows.times do |i|\n  window = array.slice(i, window_size)\n  current_range = window.max - window.min\nend\n</code></pre>\n\n<p>For each element of <code>array</code>, O(array.length), it looks at a <code>window_size</code> chunk twice, 2*O(window_size). <code>num_windows</code> is n, <code>window_size</code> is m, so that's O(n*m) <strong><em>when array.length is significantly larger than window_size</em></strong>. We'll come back to that.</p>\n\n<p>Perhaps we can see it clearer if we spell out <code>max</code> and <code>min</code> longhand.</p>\n\n<pre><code>num_windows = array.length - window_size + 1\n\n# n times\nnum_windows.times do |i|\n  # m times, but with a very, very low constant\n  window = array.slice(i, window_size)\n\n  # m times\n  max = window.each_with_object(nil) { |n,m|\n    m = n if !m &amp;&amp; n &gt; m\n  }\n\n  # m times\n  min = window.each_with_object(nil) { |n,m|\n    m = n if !m &amp;&amp; n &lt; m\n  }\n\n  current_range = max - min\nend\n</code></pre>\n\n<p><code>num_windows.times</code> starts us with O(n) where n = num_windows. Easy.</p>\n\n<p>Each iteration grabs a <code>window_size</code>, or m, size <code>window</code> and then <code>window.max</code> and <code>window.min</code> have to scan <code>window</code> twice. That's O(m). Do that n times and it's O(n*m).</p>\n\n<p>As Fabio notes, <code>array.slice(i, window_size)</code> is also O(m), but it uses <code>memcpy</code> which has such a low constant it will be totally swamped by <code>window.min</code> and <code>window.max</code>. We can ignore it. See <a href=\"https://stackoverflow.com/a/394654/14660\">https://stackoverflow.com/a/394654/14660</a> for more.</p>\n\n<hr>\n\n<p>As a backup, we can plug some numbers in. (I realize I have an off-by-one error here with window_size. It's illustrative to realize that for the purposes of Big-O it doesn't matter. Also I'm lazy and don't want to recalculate.)</p>\n\n<pre><code>array.length = 1000\nwindow_size = 10\n\nnum_windows = 990\n990 * 2*10  = 19800 # actual\n1000 * 10   = 10000 # O(n*m)\n</code></pre>\n\n<p>The numbers don't have to match, just the ratios as they change. Double the size of array.length, roughly double the cost.</p>\n\n<pre><code>array.length = 2000\nwindow_size = 10\nnum_windows = 1990\n\n1990 * 2*10 = 39800 # actual\n2000 * 10   = 20000 # O(n*m)\n</code></pre>\n\n<p>Double the size of window_size, roughly double the cost.</p>\n\n<pre><code>array.length = 2000\nwindow_size = 20\nnum_windows = 1980\n\n1980 * 2*20  = 79200 # actual\n2000 * 20    = 40000 # O(n*m)\n</code></pre>\n\n<p>But as window_size gets close to array.length we get closer to O(n).</p>\n\n<pre><code>array.length = 100\nwindow_size = 99\nnum_windows = 2\n\n2 * 2*99   = 396   # actual\n100 * 99   = 9,900 # O(n*m)\n100        = 100   # O(n)\n</code></pre>\n\n<p>Double the length and double the window_size, O(n*m) says we should be quadrupled. But we only triple which is getting closer to O(n).</p>\n\n<pre><code>array.length = 200\nwindow_size = 198\nnum_windows = 3\n\n3 * 2*198  = 1188   # actual\n200 * 198  = 39600 # O(n*m)\n200        = 200   # O(n)\n</code></pre>\n"}], "owner": {"reputation": 1031, "user_id": 2387766, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4accddb78a8c5b94aa1e76fdb36fdb95?s=128&d=identicon&r=PG", "display_name": "Karen", "link": "https://stackoverflow.com/users/2387766/karen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 59037890, "answer_count": 2, "score": 0, "last_activity_date": 1574706860, "creation_date": 1574702841, "last_edit_date": 1574703843, "question_id": 59037160, "link": "https://stackoverflow.com/questions/59037160/why-is-the-time-complexity-for-this-on-m", "title": "Why is the time complexity for this O(n * m)?", "body": "<p>I was practicing calculating the big Oh for methods using the RAM model, and I'm having trouble understanding why the overall time complexity for this is n * m (the n refers to how many times the loop iterates). From my understanding, the first two lines in the method are just constants and the times loop has a complexity of O(n * however many steps are in the loop for each iteration). I understand that calling .max and .min have a combined complexity of O(n^2). So doesn't that mean that the overall time complexity calculation will look something like this?</p>\n\n<pre><code>line 1 = constants\nline 2 = constants\nline 3-7 = n * (n^2 + constants)\nline 8 = constants\noverall time_complexity = n^3 + constants = n^3\n</code></pre>\n\n<p>Below is the source code for the method that I'm analyzing:</p>\n\n<pre><code> # O(n * m) naive solution\n    def max_windowed_range(array, window_size)\n      num_windows = array.length - window_size + 1\n      best_range = nil\n\n      num_windows.times do |i|\n        window = array.slice(i, window_size)\n        current_range = window.max - window.min\n\n        best_range = current_range if !best_range || current_range &gt; best_range\n      end\n\n      best_range\n    end\n</code></pre>\n"}, {"tags": ["css", "ruby-on-rails", "ruby", "carrierwave"], "comments": [{"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1574696700, "post_id": 59035157, "comment_id": 104313818, "body": "Do you have any javascipt that could be messing with your images setting that style? Check the browser network tab and verify if the original HTML (the original request response) has or doesn&#39;t has that hidden style. If it&#39;s not hidden at first then some javascript is hidding them."}, {"owner": {"reputation": 26, "user_id": 10197480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CDQ4K.png?s=128&g=1", "display_name": "Riba Ishtiaq", "link": "https://stackoverflow.com/users/10197480/riba-ishtiaq"}, "reply_to_user": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1574766666, "post_id": 59035157, "comment_id": 104339644, "body": "@arieljuod Thanks, the javascript was hidding the image"}], "owner": {"reputation": 26, "user_id": 10197480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CDQ4K.png?s=128&g=1", "display_name": "Riba Ishtiaq", "link": "https://stackoverflow.com/users/10197480/riba-ishtiaq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574695692, "creation_date": 1574695692, "question_id": 59035157, "link": "https://stackoverflow.com/questions/59035157/rails-carrierwave-images-not-showing-up", "title": "Rails carrierwave Images not showing up", "body": "<p>All the images have <code>hidden</code> tag and <code>display: none;</code> by default</p>\n\n<p>The html code for images after uploading:</p>\n\n<p><code>&lt;img src=\"/uploads/ad/image/6/thumb_95adae32e516d173eb84c081c5629f5d.png\" hidden=\"\" style=\"display: none !important;\"&gt;</code></p>\n\n<p>index.html.erb (code for images):</p>\n\n<pre><code>   &lt;%= link_to image_tag(ad.image_url(:thumb)), ad %&gt;\n</code></pre>\n\n<p>new.html.erb:</p>\n\n<pre><code>    &lt;%= f.file_field :image %&gt;\n</code></pre>\n\n<p>image_uploader.rb code:</p>\n\n<pre><code>class ImageUploader &lt; CarrierWave::Uploader::Base\n   include CarrierWave::MiniMagick\n\n  storage :file\n  # storage :fog\n\n  def store_dir\n    \"uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}\"\n  end\n\n   version :thumb do\n     process resize_to_fit: [400, 300]\n   end\n\n   version :default do\n    process resize_to_fit: [800, 600]\n    end\n\n   def extension_whitelist\n     %w(jpg jpeg gif png)\n   end\n\nend\n</code></pre>\n\n<p>ad.rb:</p>\n\n<pre><code>    mount_uploader :image, ImageUploader\n</code></pre>\n\n<p>add_image_to_ad migration:</p>\n\n<pre><code>class AddImageToAds &lt; ActiveRecord::Migration[5.2]\n  def change\n    add_column :ads, :image, :string\n  end\nend\n</code></pre>\n\n<p>ads_controller.rb:</p>\n\n<pre><code> def ad_params\n      params.require(:ad).permit(:brand, :condition, :title, :description, :price, :image)\n end\n</code></pre>\n"}, {"tags": ["ruby", "variables", "methods", "definition", "args"], "comments": [{"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "edited": false, "score": 0, "creation_date": 1574694679, "post_id": 59034716, "comment_id": 104312724, "body": "What do you check with <code>if index == index</code>, are you missing an <code>@</code> or do you call this recursively and removed the code?"}, {"owner": {"reputation": 129, "user_id": 10663676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e53116ab119e0bb4c481ff8829db729?s=128&d=identicon&r=PG&f=1", "display_name": "kel.o", "link": "https://stackoverflow.com/users/10663676/kel-o"}, "reply_to_user": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "edited": false, "score": 0, "creation_date": 1574694904, "post_id": 59034716, "comment_id": 104312818, "body": "this is nested in an each block. depending on the index, cells have different values. For example, at index 0, I&#39;m checking if cells at 1, 5, and a 6 are alive; at index 1, I&#39;m checking if cells at 0, 2, 5, 6 an 7 are alive."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1574698407, "post_id": 59034716, "comment_id": 104314774, "body": "@kel.o what&#39;s the purpose of <code>index</code>? Within your <code>get_count</code> method, <code>index</code> isn&#39;t used (aside from <code>index == index</code> which is always <code>true</code>)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1574716381, "post_id": 59034716, "comment_id": 104322916, "body": "What is <code>cells</code>? It does not appear to be an array or hash (or proc) as it is not passed as an argument to <code>get_count</code>, or a method."}, {"owner": {"reputation": 129, "user_id": 10663676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e53116ab119e0bb4c481ff8829db729?s=128&d=identicon&r=PG&f=1", "display_name": "kel.o", "link": "https://stackoverflow.com/users/10663676/kel-o"}, "edited": false, "score": 0, "creation_date": 1574780683, "post_id": 59034716, "comment_id": 104347362, "body": "cells is an array."}, {"owner": {"reputation": 129, "user_id": 10663676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e53116ab119e0bb4c481ff8829db729?s=128&d=identicon&r=PG&f=1", "display_name": "kel.o", "link": "https://stackoverflow.com/users/10663676/kel-o"}, "edited": false, "score": 0, "creation_date": 1574781818, "post_id": 59034716, "comment_id": 104348067, "body": "cells is a method that returns an array"}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 10663676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e53116ab119e0bb4c481ff8829db729?s=128&d=identicon&r=PG&f=1", "display_name": "kel.o", "link": "https://stackoverflow.com/users/10663676/kel-o"}, "edited": false, "score": 0, "creation_date": 1574695229, "post_id": 59034867, "comment_id": 104313007, "body": "this is nested in an each block; depending on the index, cells have different values. For example, at index 0, I&#39;m checking if cells at 1, 5, and a 6 are alive and tallying up the count; at index 1, I&#39;m checking if cells at 0, 2, 5, 6 an 7 are alive.  Should I remove the index==index line from the method and place it outside of the method, something like , for index 0, get_count(1,5,6). for index 1, get_count(0,2,5,6,7) ?"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 129, "user_id": 10663676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e53116ab119e0bb4c481ff8829db729?s=128&d=identicon&r=PG&f=1", "display_name": "kel.o", "link": "https://stackoverflow.com/users/10663676/kel-o"}, "edited": false, "score": 0, "creation_date": 1574696248, "post_id": 59034867, "comment_id": 104313554, "body": "You shouldn&#39;t nest method definitions inside blocks, unless they are dynamic. Then you&#39;d use the <code>define_method</code> method. I&#39;m not entirely sure what you&#39;re producing here. Regardless both <code>index</code>s refer to the method argument <code>index</code>, not to the outer <code>index</code>."}, {"owner": {"reputation": 129, "user_id": 10663676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e53116ab119e0bb4c481ff8829db729?s=128&d=identicon&r=PG&f=1", "display_name": "kel.o", "link": "https://stackoverflow.com/users/10663676/kel-o"}, "edited": false, "score": 0, "creation_date": 1574696447, "post_id": 59034867, "comment_id": 104313668, "body": "sorry, I should&#39;ve been more clear. The method definition isnt nested in the block. I&#39;m calling the method in a block mutiple times. I&#39;m doing a new tally for each index. ie. for index 0, perform this tally. for index 1, perform this tally.for index 2 perform this tally. I would change the contents of my original post, but that would likely change the scope of this question."}, {"owner": {"reputation": 129, "user_id": 10663676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e53116ab119e0bb4c481ff8829db729?s=128&d=identicon&r=PG&f=1", "display_name": "kel.o", "link": "https://stackoverflow.com/users/10663676/kel-o"}, "edited": false, "score": 0, "creation_date": 1574696869, "post_id": 59034867, "comment_id": 104313913, "body": "I edited the OP to clarify... a bit more context; this is my take on Conways game of life."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 129, "user_id": 10663676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e53116ab119e0bb4c481ff8829db729?s=128&d=identicon&r=PG&f=1", "display_name": "kel.o", "link": "https://stackoverflow.com/users/10663676/kel-o"}, "edited": false, "score": 0, "creation_date": 1574699824, "post_id": 59034867, "comment_id": 104315574, "body": "@kel.o If you&#39;re looking for an full example of the game of life. I&#39;ve created a full working version <a href=\"https://codereview.stackexchange.com/a/209723/176723\">here</a> some time ago."}, {"owner": {"reputation": 129, "user_id": 10663676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e53116ab119e0bb4c481ff8829db729?s=128&d=identicon&r=PG&f=1", "display_name": "kel.o", "link": "https://stackoverflow.com/users/10663676/kel-o"}, "edited": false, "score": 0, "creation_date": 1574701666, "post_id": 59034867, "comment_id": 104316576, "body": "the latter answer is very clean and exactly what I was looking for!"}, {"owner": {"reputation": 129, "user_id": 10663676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e53116ab119e0bb4c481ff8829db729?s=128&d=identicon&r=PG&f=1", "display_name": "kel.o", "link": "https://stackoverflow.com/users/10663676/kel-o"}, "edited": false, "score": 0, "creation_date": 1574702276, "post_id": 59034867, "comment_id": 104316872, "body": "please edit the get_count params in line 6 of your last solution, it looks like you forgot to remove the first argument <code>0</code> that we were previously assigning to the index"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1574707982, "post_id": 59034867, "comment_id": 104319505, "body": "I haven&#39;t been able to understand the question, largely because I don&#39;t see how <code>cells</code> is visible within the method <code>get_count</code>. It&#39;s can&#39;t be a method, proc, array or hash. What is it?"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1574709425, "post_id": 59034867, "comment_id": 104320166, "body": "@CarySwoveland My guess is that it&#39;s a method that returns some sort of array or hash."}], "tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": true, "score": 2, "last_activity_date": 1574704414, "last_edit_date": 1574704414, "creation_date": 1574694800, "answer_id": 59034867, "question_id": 59034716, "link": "https://stackoverflow.com/questions/59034716/how-do-you-assign-a-variable-amount-of-arguments-in-method-definition/59034867#59034867", "title": "How do you assign a variable amount of arguments in method definition?", "body": "<p>I would iterate through the <code>args</code>, this way you only check what is actually given.</p>\n\n<pre><code>def get_count(index, *args)\n  return unless index == index\n  args.count { |arg| cells[arg].alive? }\nend\n</code></pre>\n\n<p>Note that <code>index == index</code> is always <code>true</code>, so I'm not sure why that's in there.</p>\n\n<hr>\n\n<p>From you edit I assume that you want to evaluate the passed <code>index</code> against the <code>index</code> variable at the point where you invoke <code>get_count</code>. This can be done in multiple ways. I personally would keep iteration details in the iteration block. This also keeps the method <code>get_count</code> cleaner.</p>\n\n<pre><code>def get_count(*args)\n  args.count { |arg| cells[arg].alive? }\nend\n\ncells.each_with_index do |cell, index|\n  rules(cell, get_count(1,5,6)) if index == 0\n  rules(cell, get_count(0,2,5,6)) if index == 1\nend\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 10663676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e53116ab119e0bb4c481ff8829db729?s=128&d=identicon&r=PG&f=1", "display_name": "kel.o", "link": "https://stackoverflow.com/users/10663676/kel-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 59034867, "answer_count": 1, "score": 0, "last_activity_date": 1574704414, "creation_date": 1574694303, "last_edit_date": 1574702106, "question_id": 59034716, "link": "https://stackoverflow.com/questions/59034716/how-do-you-assign-a-variable-amount-of-arguments-in-method-definition", "title": "How do you assign a variable amount of arguments in method definition?", "body": "<p>I have a method that takes an index as the first argument and a variable amount of other arguments. I call this method multiple times in my code, passing it a range of 2-4 additional arguments, these arguments are passed to <code>cells</code>.</p>\n\n<p>My issue is, for instances when I only need to pass 2 or 3 arguments, the last <code>cells</code> goes unassigned</p>\n\n<pre><code>def get_count(index,*args)\n  if index == index\n    live_count = 0\n    if cells[args1].alive?\n      live_count += 1\n    end\n    if cells[args2].alive?\n      live_count += 1\n    end\n    if cells[args3].alive?\n      live_count += 1\n    end\n    if cells[args4].alive?\n      live_count += 1\n    end\n    return live_count\n   end\n  end\n</code></pre>\n\n<p>Is there an elegant way to pass only the amount of arguments I need without breaking this?</p>\n\n<p>Edit:\nI'm calling this method multiple times in an each block</p>\n\n<pre><code>    cells.each_with_index do |cell, index|\n      get_count(0,1,5,6)\n      rules(cell, get_count(0,1,5,6))\n\n      get_count(1,0,2,5,6)\n      rules(cell, get_count(1,0,2,5,6))\n</code></pre>\n\n<p>What it's doing is getting tally on each iteration and executing a function defined in <code>rules</code>. The tally resets upon each iteration.</p>\n\n<p>What this is doing is looking at a 2d array of objects </p>\n\n<pre><code>[[0],[1],[2],[3],[4],\n[5],[6],[7],[8],[9]]\n</code></pre>\n\n<p>At each index, it performs count on a specific set of other indexes. example, at index 0, it looks at index 1,5, and 6. It then executes the rules function and proceeds to do the same thing at the next index.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 3517, "user_id": 1112901, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/uYaHi.jpg?s=128&g=1", "display_name": "Xavier", "link": "https://stackoverflow.com/users/1112901/xavier"}, "edited": false, "score": 0, "creation_date": 1574694060, "post_id": 59034588, "comment_id": 104312377, "body": "<code>persona.fonts</code> I think i tried everything but this! Thanks!"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 1, "last_activity_date": 1574693893, "creation_date": 1574693893, "answer_id": 59034588, "question_id": 59034488, "link": "https://stackoverflow.com/questions/59034488/rails-can-not-get-a-value-throug-a-habtm-relation/59034588#59034588", "title": "Rails, Can not get a value throug a HABTM&#160;relation", "body": "<p>Try:</p>\n\n<pre><code>Font.includes(:personas).where(\"personas.id\": persona.id)\n</code></pre>\n\n<p>or simpler:</p>\n\n<pre><code>persona.fonts\n</code></pre>\n"}], "owner": {"reputation": 3517, "user_id": 1112901, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/uYaHi.jpg?s=128&g=1", "display_name": "Xavier", "link": "https://stackoverflow.com/users/1112901/xavier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12, "favorite_count": 0, "accepted_answer_id": 59034588, "answer_count": 1, "score": 1, "last_activity_date": 1574693913, "creation_date": 1574693595, "last_edit_date": 1574693913, "question_id": 59034488, "link": "https://stackoverflow.com/questions/59034488/rails-can-not-get-a-value-throug-a-habtm-relation", "title": "Rails, Can not get a value throug a HABTM&#160;relation", "body": "<p>I\u00a0have 2 models with a HABTM relation like:</p>\n\n<p><code>font.rb</code> with </p>\n\n<pre><code>  has_and_belongs_to_many :personas\n</code></pre>\n\n<p>and <code>persona.rb</code></p>\n\n<pre><code>  has_and_belongs_to_many :fonts\n</code></pre>\n\n<p>I\u00a0try to get all the fonts linked to a specific persona with</p>\n\n<pre><code>    Font.includes(:personas).where(persona: persona)\n</code></pre>\n\n<p>But I get an error: <code>SQLite3::SQLException: no such column: fonts.persona</code></p>\n\n<p>Any tips?</p>\n"}, {"tags": ["ruby", "dataframe", "daru"], "answers": [{"tags": [], "owner": {"reputation": 351, "user_id": 5952539, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-50-xRkQJ7Vw/AAAAAAAAAAI/AAAAAAAAAB4/2NXakJBGptY/photo.jpg?sz=128", "display_name": "janpeterka", "link": "https://stackoverflow.com/users/5952539/janpeterka"}, "is_accepted": true, "score": 0, "last_activity_date": 1574692165, "creation_date": 1574692165, "answer_id": 59034078, "question_id": 59034077, "link": "https://stackoverflow.com/questions/59034077/how-to-get-distinct-count-in-aggregate/59034078#59034078", "title": "How to get distinct count in aggregate", "body": "<p>I found one way to do this:</p>\n\n<pre><code>data_frame = data_frame.group_by(:job_id)\n                       .aggregate(job_id: :max,\n                                  bid_id: lambda{ |x| x.uniq.size })\n</code></pre>\n\n<p>or maybe better yet:</p>\n\n<pre><code>data_frame = data_frame.group_by(:job_id)\n                       .aggregate(job_id: :max,\n                                  bid_id: -&gt;(x) { x.uniq.size })\n</code></pre>\n\n<p>I am not sure if it is the right way, but it seems to work.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/18554920/pandas-aggregate-count-distinct\">This</a> pandas solution helped me.</p>\n"}], "owner": {"reputation": 351, "user_id": 5952539, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-50-xRkQJ7Vw/AAAAAAAAAAI/AAAAAAAAAB4/2NXakJBGptY/photo.jpg?sz=128", "display_name": "janpeterka", "link": "https://stackoverflow.com/users/5952539/janpeterka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 59034078, "answer_count": 1, "score": 0, "last_activity_date": 1574692165, "creation_date": 1574692165, "question_id": 59034077, "link": "https://stackoverflow.com/questions/59034077/how-to-get-distinct-count-in-aggregate", "title": "How to get distinct count in aggregate", "body": "<p>I simply want to get distinct_count aggregation.</p>\n\n<p>I have this code:</p>\n\n<pre><code>data_frame = data_frame.group_by(:job_id)\n                       .aggregate(job_id: :max, bid_id: :count)\n</code></pre>\n\n<p>I want something like this:</p>\n\n<pre><code>data_frame = data_frame.group_by(:job_id)\n                       .aggregate(job_id: :max, bid_id: :distinct_count)\n</code></pre>\n\n<p>I know there is no statistical method like that implemented yet, is there any other way?</p>\n"}, {"tags": ["ios", "ruby", "cocoapods", "rbenv", "podfile"], "comments": [{"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "edited": false, "score": 0, "creation_date": 1574692089, "post_id": 59033798, "comment_id": 104311302, "body": "Did you try this? <a href=\"https://github.com/CocoaPods/CocoaPods/issues/1837\" rel=\"nofollow noreferrer\">github.com/CocoaPods/CocoaPods/issues/1837</a>"}, {"owner": {"reputation": 6678, "user_id": 5185570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/1qKHK.jpg?s=128&g=1", "display_name": "Peter G.", "link": "https://stackoverflow.com/users/5185570/peter-g"}, "reply_to_user": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "edited": false, "score": 0, "creation_date": 1574692575, "post_id": 59033798, "comment_id": 104311562, "body": "Yes, the output is here <a href=\"https://stackoverflow.com/q/59033566/5185570\">stackoverflow.com/q/59033566/5185570</a>"}], "answers": [{"comments": [{"owner": {"reputation": 6678, "user_id": 5185570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/1qKHK.jpg?s=128&g=1", "display_name": "Peter G.", "link": "https://stackoverflow.com/users/5185570/peter-g"}, "edited": false, "score": 0, "creation_date": 1574766283, "post_id": 59034158, "comment_id": 104339421, "body": "I&#39;m getting the ruby version <code>ruby 2.6.5p114 (2019-10-01 revision 67812) [x86_64-darwin19]</code> and the expected output <code>Digest::SHA1</code>. But the error when doing <code>pod install</code> is still the same in the same terminal window."}], "tags": [], "owner": {"reputation": 2225, "user_id": 8239116, "user_type": "registered", "profile_image": "https://graph.facebook.com/1378592525566201/picture?type=large", "display_name": "Aurangzaib Rana", "link": "https://stackoverflow.com/users/8239116/aurangzaib-rana"}, "is_accepted": false, "score": 4, "last_activity_date": 1574692477, "creation_date": 1574692477, "answer_id": 59034158, "question_id": 59033798, "link": "https://stackoverflow.com/questions/59033798/loaderror-library-not-found-for-class-digestsha1-digest-sha1/59034158#59034158", "title": "LoadError - library not found for class Digest::SHA1 -- digest/sha1", "body": "<p>there is issue with ruby version.\nInstall latest</p>\n\n<pre><code>brew install ruby\n</code></pre>\n\n<p>below command will overwrite the previous version</p>\n\n<pre><code>brew link --overwrite ruby\n</code></pre>\n\n<p>close this terminal and open new terminal.check your version  </p>\n\n<pre><code>ruby -v\n</code></pre>\n\n<p>check issue resolve or not </p>\n\n<pre><code>ruby -r digest/sha1 -e 'p Digest::SHA1'\n</code></pre>\n\n<p>expected output : Digest::SHA1</p>\n"}, {"tags": [], "owner": {"reputation": 29579, "user_id": 316700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6f952bee7570a3db2ecba5b06c0062b3?s=128&d=identicon&r=PG", "display_name": "fguillen", "link": "https://stackoverflow.com/users/316700/fguillen"}, "is_accepted": false, "score": 31, "last_activity_date": 1576509607, "creation_date": 1576509607, "answer_id": 59359503, "question_id": 59033798, "link": "https://stackoverflow.com/questions/59033798/loaderror-library-not-found-for-class-digestsha1-digest-sha1/59359503#59359503", "title": "LoadError - library not found for class Digest::SHA1 -- digest/sha1", "body": "<p>For the me problem started after an unsolicited system update.</p>\n\n<p>Uninstalling ruby and installing it again solved the issue:</p>\n\n<pre><code>rbenv uninstall 2.5.1\nrbenv install 2.5.1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4402, "user_id": 692622, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/29d3327801aa145c77d873604a2f71c0?s=128&d=identicon&r=PG", "display_name": "iCyborg", "link": "https://stackoverflow.com/users/692622/icyborg"}, "is_accepted": false, "score": 2, "last_activity_date": 1587381892, "creation_date": 1587381892, "answer_id": 61321308, "question_id": 59033798, "link": "https://stackoverflow.com/questions/59033798/loaderror-library-not-found-for-class-digestsha1-digest-sha1/61321308#61321308", "title": "LoadError - library not found for class Digest::SHA1 -- digest/sha1", "body": "<p>Since this worked me, I am posting it as a comment.</p>\n\n<p>After running </p>\n\n<pre><code>rbenv uninstall 2.5.1\n</code></pre>\n\n<p>if the below command is giving you an error (with ruby not installing)</p>\n\n<pre><code>rbenv install 2.5.1\n</code></pre>\n\n<p>maybe run this (for mac path)</p>\n\n<pre><code>RUBY_CONFIGURE_OPTS=--with-openssl-dir=/usr/local/Cellar/openssl/1.0.2q rbenv install 2.3.5\n</code></pre>\n"}], "owner": {"reputation": 6678, "user_id": 5185570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/1qKHK.jpg?s=128&g=1", "display_name": "Peter G.", "link": "https://stackoverflow.com/users/5185570/peter-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18594, "favorite_count": 3, "answer_count": 3, "score": 16, "last_activity_date": 1587381892, "creation_date": 1574691213, "question_id": 59033798, "link": "https://stackoverflow.com/questions/59033798/loaderror-library-not-found-for-class-digestsha1-digest-sha1", "title": "LoadError - library not found for class Digest::SHA1 -- digest/sha1", "body": "<p>When running <code>pod install</code> it runs into a problem when installing <code>yoga</code>. Seems to be a problem with my ruby environment?</p>\n\n<pre><code>$ pod install\nAnalyzing dependencies\nFetching podspec for `Folly` from `../node_modules/react-native/third-party-podspecs/Folly.podspec`\nFetching podspec for `Permission-Camera` from `../node_modules/react-native-permissions/ios/Camera.podspec`\nFetching podspec for `Permission-LocationAlways` from `../node_modules/react-native-permissions/ios/LocationAlways.podspec`\nFetching podspec for `Permission-LocationWhenInUse` from `../node_modules/react-native-permissions/ios/LocationWhenInUse.podspec`\nFetching podspec for `RNPermissions` from `../node_modules/react-native-permissions`\nFetching podspec for `React` from `../node_modules/react-native/`\nFetching podspec for `yoga` from `../node_modules/react-native/ReactCommon/yoga`\n</code></pre>\n\n<h3>Command</h3>\n\n<pre><code>/Users/User/.rbenv/versions/2.3.1/bin/pod install\n</code></pre>\n\n<h3>Stack</h3>\n\n<pre><code>   CocoaPods : 1.5.3\n        Ruby : ruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-darwin15]\n    RubyGems : 2.5.1\n        Host : Mac OS X 10.15.1 (19B88)\n       Xcode : 11.2.1 (11B500)\n         Git : git version 2.24.0\nRuby lib dir : /Users/User/.rbenv/versions/2.3.1/lib\nRepositories : master - https://github.com/CocoaPods/Specs.git @ 7f8d90dc76a619c74dfe5b8d17317599f6175fc3\n</code></pre>\n\n<h3>Plugins</h3>\n\n<pre><code>cocoapods-deintegrate : 1.0.2\ncocoapods-plugins     : 1.0.0\ncocoapods-search      : 1.0.0\ncocoapods-stats       : 1.0.0\ncocoapods-trunk       : 1.3.1\ncocoapods-try         : 1.1.0\n</code></pre>\n\n<h3>Podfile</h3>\n\n<pre class=\"lang-rb prettyprint-override\"><code># Uncomment the next line to define a global platform for your project\n platform :ios, '9.0'\n\ntarget 'default' do\n  # Uncomment the next line if you're using Swift or would like to use dynamic frameworks\n  # use_frameworks!\n\n  # Your 'node_modules' directory is probably in the root of your project,\n  # but if not, adjust the `:path` accordingly\n  pod 'React', :path =&gt; '../node_modules/react-native/'\n  pod 'yoga', :path =&gt; '../node_modules/react-native/ReactCommon/yoga'\n  pod 'Folly', :podspec =&gt; '../node_modules/react-native/third-party-podspecs/Folly.podspec'\n\n  # Pods for default\n  pod 'GoogleIDFASupport'\n\n  # Pods for ReactPushNotifications - Add these lines\n  pod 'Firebase/Core'\n  pod 'Firebase/Messaging'\n  pod 'Firebase/Storage'\n\n  # Pods for react-native-permissions\n  pod 'RNPermissions', :path =&gt; '../node_modules/react-native-permissions'\n  permissions_path = '../node_modules/react-native-permissions/ios'\n  pod 'Permission-Camera', :path =&gt; \"#{permissions_path}/Camera.podspec\"\n  pod 'Permission-LocationAlways', :path =&gt; \"#{permissions_path}/LocationAlways.podspec\"\n  pod 'Permission-LocationWhenInUse', :path =&gt; \"#{permissions_path}/LocationWhenInUse.podspec\"\nend\n</code></pre>\n\n<h3>Error</h3>\n\n<pre><code>LoadError - library not found for class Digest::SHA1 -- digest/sha1\n/Users/User/.rbenv/versions/2.3.1/lib/ruby/2.3.0/digest.rb:16:in `const_missing'\n/Users/User/.rvm/gems/ruby-2.4.1/gems/cocoapods-core-1.5.3/lib/cocoapods-core/specification.rb:566:in `checksum'\n/Users/User/.rvm/gems/ruby-2.4.1/gems/cocoapods-1.5.3/lib/cocoapods/installer/analyzer.rb:641:in `block in generate_version_locking_dependencies'\n/Users/User/.rvm/gems/ruby-2.4.1/gems/cocoapods-1.5.3/lib/cocoapods/installer/analyzer.rb:640:in `reject'\n/Users/User/.rvm/gems/ruby-2.4.1/gems/cocoapods-1.5.3/lib/cocoapods/installer/analyzer.rb:640:in `generate_version_locking_dependencies'\n/Users/User/.rvm/gems/ruby-2.4.1/gems/cocoapods-1.5.3/lib/cocoapods/installer/analyzer.rb:87:in `analyze'\n/Users/User/.rvm/gems/ruby-2.4.1/gems/cocoapods-1.5.3/lib/cocoapods/installer.rb:243:in `analyze'\n/Users/User/.rvm/gems/ruby-2.4.1/gems/cocoapods-1.5.3/lib/cocoapods/installer.rb:154:in `block in resolve_dependencies'\n/Users/User/.rvm/gems/ruby-2.4.1/gems/cocoapods-1.5.3/lib/cocoapods/user_interface.rb:64:in `section'\n/Users/User/.rvm/gems/ruby-2.4.1/gems/cocoapods-1.5.3/lib/cocoapods/installer.rb:153:in `resolve_dependencies'\n/Users/User/.rvm/gems/ruby-2.4.1/gems/cocoapods-1.5.3/lib/cocoapods/installer.rb:116:in `install!'\n/Users/User/.rvm/gems/ruby-2.4.1/gems/cocoapods-1.5.3/lib/cocoapods/command/install.rb:41:in `run'\n/Users/User/.rvm/gems/ruby-2.4.1@global/gems/claide-1.0.2/lib/claide/command.rb:334:in `run'\n/Users/User/.rvm/gems/ruby-2.4.1/gems/cocoapods-1.5.3/lib/cocoapods/command.rb:52:in `run'\n/Users/User/.rvm/gems/ruby-2.4.1/gems/cocoapods-1.5.3/bin/pod:55:in `&lt;top (required)&gt;'\n/Users/User/.rbenv/versions/2.3.1/bin/pod:23:in `load'\n/Users/User/.rbenv/versions/2.3.1/bin/pod:23:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby", "md5", "sha1", "rbenv", "libcrypto"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 1, "creation_date": 1574693233, "post_id": 59033566, "comment_id": 104311928, "body": "What happens if you try what the error message suggested? <code>gem pristine executable-hooks --version 1.3.2</code>?"}, {"owner": {"reputation": 6678, "user_id": 5185570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/1qKHK.jpg?s=128&g=1", "display_name": "Peter G.", "link": "https://stackoverflow.com/users/5185570/peter-g"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1574768510, "post_id": 59033566, "comment_id": 104340501, "body": "Tried that, seems that I have a linking problem (see updated question)."}], "answers": [{"comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1574769628, "post_id": 59050345, "comment_id": 104341087, "body": "Ok. Good. This should work also if you wish to stick with RVM. Remember to set the new Ruby as default after you install."}], "tags": [], "owner": {"reputation": 6678, "user_id": 5185570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/1qKHK.jpg?s=128&g=1", "display_name": "Peter G.", "link": "https://stackoverflow.com/users/5185570/peter-g"}, "is_accepted": true, "score": 1, "last_activity_date": 1574769143, "creation_date": 1574769143, "answer_id": 59050345, "question_id": 59033566, "link": "https://stackoverflow.com/questions/59033566/library-not-loaded-libcrypto/59050345#59050345", "title": "Library not loaded (libcrypto)", "body": "<p>I did a quick test:</p>\n\n<pre><code>rvm 2.6.5\n</code></pre>\n\n<p>To determine that <code>ruby-2.6.5</code> was not installed, so I installed it:</p>\n\n<pre><code>rvm install \"ruby-2.6.5\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": false, "score": 1, "last_activity_date": 1574769411, "creation_date": 1574769411, "answer_id": 59050433, "question_id": 59033566, "link": "https://stackoverflow.com/questions/59033566/library-not-loaded-libcrypto/59050433#59050433", "title": "Library not loaded (libcrypto)", "body": "<p>You say you are using the system Ruby from <code>/usr/local/</code> yet the error messages are from an RVM installation.</p>\n\n<p>You need to either uninstall RVM, or set the system Ruby as default for RVM:</p>\n\n<pre><code>rvm --default use system\n</code></pre>\n\n<p>More discussion here:<br>\n<a href=\"https://stackoverflow.com/questions/5660605/disable-rvm-or-use-ruby-which-was-installed-without-rvm/5660661\">Disable RVM or use Ruby which was installed without RVM?</a></p>\n"}], "owner": {"reputation": 6678, "user_id": 5185570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/1qKHK.jpg?s=128&g=1", "display_name": "Peter G.", "link": "https://stackoverflow.com/users/5185570/peter-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1631, "favorite_count": 0, "accepted_answer_id": 59050345, "answer_count": 2, "score": 0, "last_activity_date": 1574769411, "creation_date": 1574690378, "last_edit_date": 1574768453, "question_id": 59033566, "link": "https://stackoverflow.com/questions/59033566/library-not-loaded-libcrypto", "title": "Library not loaded (libcrypto)", "body": "<p>After updating <code>ruby</code> and <code>rubyenv</code> packages I'm facing an error. The <code>libcrypto</code> library is not loaded.</p>\n\n<p>When executing the suggested command it seems that it is searching for <code>openssl</code> in ruby <code>/Users/User/.rvm/rubies/ruby-2.4.1</code>. But on my system I use <code>/usr/local/Cellar/ruby/2.6.5</code>.</p>\n\n<pre><code>$ gem pristine executable-hooks --version 1.3.2\nError loading RubyGems plugin \"/Users/User/.rvm/gems/ruby-2.4.1@global/gems/gem-wrappers-1.2.7/lib/rubygems_plugin.rb\": dlopen(/Users/User/.rvm/rubies/ruby-2.4.1/lib/ruby/2.4.0/x86_64-darwin16/openssl.bundle, 9): Library not loaded: /usr/local/opt/openssl/lib/libssl.1.0.0.dylib\n  Referenced from: /Users/User/.rvm/rubies/ruby-2.4.1/lib/ruby/2.4.0/x86_64-darwin16/openssl.bundle\n  Reason: image not found - /Users/User/.rvm/rubies/ruby-2.4.1/lib/ruby/2.4.0/x86_64-darwin16/openssl.bundle (LoadError)\nERROR:  Loading command: pristine (LoadError)\n    dlopen(/Users/User/.rvm/rubies/ruby-2.4.1/lib/ruby/2.4.0/x86_64-darwin16/openssl.bundle, 9): Library not loaded: /usr/local/opt/openssl/lib/libssl.1.0.0.dylib\n  Referenced from: /Users/User/.rvm/rubies/ruby-2.4.1/lib/ruby/2.4.0/x86_64-darwin16/openssl.bundle\n  Reason: image not found - /Users/User/.rvm/rubies/ruby-2.4.1/lib/ruby/2.4.0/x86_64-darwin16/openssl.bundle\nERROR:  While executing gem ... (NoMethodError)\n    undefined method `invoke_with_build_args' for nil:NilClass\n</code></pre>\n\n<p>I used the above command to diagnose another error (maybe this helps):</p>\n\n<pre><code>$ bundle install --system\nIgnoring executable-hooks-1.3.2 because its extensions are not built.  Try: gem pristine executable-hooks --version 1.3.2\nIgnoring gem-wrappers-1.2.7 because its extensions are not built.  Try: gem pristine gem-wrappers --version 1.2.7\nIgnoring unf_ext-0.0.7.4 because its extensions are not built.  Try: gem pristine unf_ext --version 0.0.7.4\n/Users/User/.rbenv/versions/2.3.1/lib/ruby/2.3.0/digest.rb:16:in `const_missing': library not found for class Digest::MD5 -- digest/md5 (LoadError)\n    from /Users/User/.rvm/gems/ruby-2.4.1@global/gems/bundler-1.15.1/lib/bundler/source/rubygems/remote.rb:26:in `cache_slug'\n    from /Users/User/.rvm/gems/ruby-2.4.1@global/gems/bundler-1.15.1/lib/bundler/fetcher/compact_index.rb:107:in `cache_path'\n    from /Users/User/.rvm/gems/ruby-2.4.1@global/gems/bundler-1.15.1/lib/bundler/fetcher/compact_index.rb:83:in `compact_index_client'\n    from /Users/User/.rvm/gems/ruby-2.4.1@global/gems/bundler-1.15.1/lib/bundler/cli.rb:630:in `warn_on_outdated_bundler'\n    from /Users/User/.rvm/gems/ruby-2.4.1@global/gems/bundler-1.15.1/lib/bundler/cli.rb:15:in `ensure in start'\n    from /Users/User/.rvm/gems/ruby-2.4.1@global/gems/bundler-1.15.1/lib/bundler/cli.rb:16:in `start'\n    from /Users/User/.rvm/gems/ruby-2.4.1@global/gems/bundler-1.15.1/exe/bundle:35:in `block in &lt;top (required)&gt;'\n    from /Users/User/.rvm/gems/ruby-2.4.1@global/gems/bundler-1.15.1/lib/bundler/friendly_errors.rb:121:in `with_friendly_errors'\n    from /Users/User/.rvm/gems/ruby-2.4.1@global/gems/bundler-1.15.1/exe/bundle:27:in `&lt;top (required)&gt;'\n    from /Users/User/.rbenv/versions/2.3.1/bin/bundle:23:in `load'\n    from /Users/User/.rbenv/versions/2.3.1/bin/bundle:23:in `&lt;main&gt;'\nmdm:ios si$ export PATH=\"/usr/local/opt/openssl@1.1/bin:$PATH\"\nmdm:ios si$ bundle install --system\nIgnoring executable-hooks-1.3.2 because its extensions are not built.  Try: gem pristine executable-hooks --version 1.3.2\nIgnoring gem-wrappers-1.2.7 because its extensions are not built.  Try: gem pristine gem-wrappers --version 1.2.7\nIgnoring unf_ext-0.0.7.4 because its extensions are not built.  Try: gem pristine unf_ext --version 0.0.7.4\n/Users/User/.rbenv/versions/2.3.1/lib/ruby/2.3.0/digest.rb:16:in `const_missing': library not found for class Digest::MD5 -- digest/md5 (LoadError)\n    from /Users/User/.rvm/gems/ruby-2.4.1@global/gems/bundler-1.15.1/lib/bundler/source/rubygems/remote.rb:26:in `cache_slug'\n    from /Users/User/.rvm/gems/ruby-2.4.1@global/gems/bundler-1.15.1/lib/bundler/fetcher/compact_index.rb:107:in `cache_path'\n    from /Users/User/.rvm/gems/ruby-2.4.1@global/gems/bundler-1.15.1/lib/bundler/fetcher/compact_index.rb:83:in `compact_index_client'\n    from /Users/User/.rvm/gems/ruby-2.4.1@global/gems/bundler-1.15.1/lib/bundler/cli.rb:630:in `warn_on_outdated_bundler'\n    from /Users/User/.rvm/gems/ruby-2.4.1@global/gems/bundler-1.15.1/lib/bundler/cli.rb:15:in `ensure in start'\n    from /Users/User/.rvm/gems/ruby-2.4.1@global/gems/bundler-1.15.1/lib/bundler/cli.rb:16:in `start'\n    from /Users/User/.rvm/gems/ruby-2.4.1@global/gems/bundler-1.15.1/exe/bundle:35:in `block in &lt;top (required)&gt;'\n    from /Users/User/.rvm/gems/ruby-2.4.1@global/gems/bundler-1.15.1/lib/bundler/friendly_errors.rb:121:in `with_friendly_errors'\n    from /Users/User/.rvm/gems/ruby-2.4.1@global/gems/bundler-1.15.1/exe/bundle:27:in `&lt;top (required)&gt;'\n    from /Users/User/.rbenv/versions/2.3.1/bin/bundle:23:in `load'\n    from /Users/User/.rbenv/versions/2.3.1/bin/bundle:23:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "local-storage"], "comments": [{"owner": {"reputation": 488, "user_id": 9435027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33947735a725563de5c7e57e533522d3?s=128&d=identicon&r=PG", "display_name": "Margon", "link": "https://stackoverflow.com/users/9435027/margon"}, "edited": false, "score": 0, "creation_date": 1574688752, "post_id": 59032822, "comment_id": 104309367, "body": "Redux memory is not persistent, they use cookie or localStorage to save data.  You can use a different user model (like &quot;user metadata&quot; or &quot;user customization&quot;) and retrieve the information when needed"}, {"owner": {"reputation": 129, "user_id": 8605123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5d48206e3bf26f22392d1f67df5c34?s=128&d=identicon&r=PG&f=1", "display_name": "Jessicascn", "link": "https://stackoverflow.com/users/8605123/jessicascn"}, "reply_to_user": {"reputation": 488, "user_id": 9435027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33947735a725563de5c7e57e533522d3?s=128&d=identicon&r=PG", "display_name": "Margon", "link": "https://stackoverflow.com/users/9435027/margon"}, "edited": false, "score": 0, "creation_date": 1574688897, "post_id": 59032822, "comment_id": 104309458, "body": "Ok, good to know. The only difference I see with Redux is that JS is asynchronous, whereas Ruby is not. So if I implement this and have 100.000 users clicking on divs it might become SUPER slow, no?"}, {"owner": {"reputation": 488, "user_id": 9435027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33947735a725563de5c7e57e533522d3?s=128&d=identicon&r=PG", "display_name": "Margon", "link": "https://stackoverflow.com/users/9435027/margon"}, "edited": false, "score": 0, "creation_date": 1574689088, "post_id": 59032822, "comment_id": 104309583, "body": "Yeah it could be slow, because they are 100.000 actions sent to backend.  That&#39;s why usually you have a localStorage or cookie to save this informations"}, {"owner": {"reputation": 129, "user_id": 8605123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5d48206e3bf26f22392d1f67df5c34?s=128&d=identicon&r=PG&f=1", "display_name": "Jessicascn", "link": "https://stackoverflow.com/users/8605123/jessicascn"}, "reply_to_user": {"reputation": 488, "user_id": 9435027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33947735a725563de5c7e57e533522d3?s=128&d=identicon&r=PG", "display_name": "Margon", "link": "https://stackoverflow.com/users/9435027/margon"}, "edited": false, "score": 0, "creation_date": 1574689252, "post_id": 59032822, "comment_id": 104309688, "body": "Yes, JS would still be quicker because it would not wait one by one :/ Thanks, I&#39;ll think about it"}, {"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "edited": false, "score": 0, "creation_date": 1574689602, "post_id": 59032822, "comment_id": 104309918, "body": "@Jessicascn I post an answer since I had many ideas I couldn&#39;t add them here without a description. Regarding your 100K users clicking on divs concern, you&#39;ll probably need to have that async and is fairly easy to have it for Rails as well. No need for React."}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 8605123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5d48206e3bf26f22392d1f67df5c34?s=128&d=identicon&r=PG&f=1", "display_name": "Jessicascn", "link": "https://stackoverflow.com/users/8605123/jessicascn"}, "edited": false, "score": 0, "creation_date": 1574690387, "post_id": 59033217, "comment_id": 104310403, "body": "Hello, thanks a lot for this, I&#39;ll have a look! When you say in your comment &quot;you need to have async&quot;, how do you implement that with Rails ? I did not even know that was possible, this is great!"}, {"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "reply_to_user": {"reputation": 129, "user_id": 8605123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5d48206e3bf26f22392d1f67df5c34?s=128&d=identicon&r=PG&f=1", "display_name": "Jessicascn", "link": "https://stackoverflow.com/users/8605123/jessicascn"}, "edited": false, "score": 0, "creation_date": 1574691731, "post_id": 59033217, "comment_id": 104311123, "body": "Depending on the level of experience, there are multiple options. I think the easiest is to make some JS calls to controller actions and enqueue jobs using ActiveJob to persist the changes. A more advanced alternative is something like concurrent-ruby gem."}], "tags": [], "owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "is_accepted": false, "score": 2, "last_activity_date": 1574689345, "creation_date": 1574689345, "answer_id": 59033217, "question_id": 59032822, "link": "https://stackoverflow.com/questions/59032822/keep-front-end-state-with-rails/59033217#59033217", "title": "Keep front-end state with Rails", "body": "<p>React/Redux will not save you since nothing magical happens there except for some convenient binding. Behind the curtains they use the same \"browser features\".</p>\n\n<p>I'm afraid you need to find the best trade-off for you. I'll post some ideas:</p>\n\n<h3>Stick to localStorage</h3>\n\n<p>Probably not need to say much here since you investigated this.</p>\n\n<h3>Bound to Chrome</h3>\n\n<p>Since Chrome 25, they gave access to <a href=\"https://developer.chrome.com/extensions/storage\" rel=\"nofollow noreferrer\">storage.sync</a> and you can develop your system around this. Always try to retrieve data, if there is any and then remember to persist new data and sync it. Maybe other browsers support this, but the downside is you'll have to have the code for those as well.</p>\n\n<h3>Experiment with webRTC</h3>\n\n<p>You can transfer data between two browsers using webRTC. While I don't have many experience with this, I can't recommend it, but it's definetly an approach you'd like to consider.</p>\n\n<p>Maybe check this project: <a href=\"https://github.com/cjb/serverless-webrtc\" rel=\"nofollow noreferrer\">https://github.com/cjb/serverless-webrtc</a></p>\n\n<h3>Create your own storage</h3>\n\n<p>Pick up a storage (I think even firebase/dynamodb will work) and build a system to save user preferences. If you have Auth0, you can keep some logic in there and since they are offering SSO, it will be fairly easy to check for those customizations.</p>\n\n<p>Remember, since you don't want to use localStorage, you'll need to keep sessions and save this preference under a user_id or something.</p>\n\n<p>In my opinion, there is no best solution for this but only what you want to trade in order to support this. If you don't mind keeping the whole business logic, I don't see why creating a storage for this will make it too slow. Measure the load and optimize along the way.</p>\n"}, {"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 1, "last_activity_date": 1574694238, "creation_date": 1574694238, "answer_id": 59034690, "question_id": 59032822, "link": "https://stackoverflow.com/questions/59032822/keep-front-end-state-with-rails/59034690#59034690", "title": "Keep front-end state with Rails", "body": "<p>It sounds like this is a user preferences type of configuration.  As such, you can probably just store the settings as single field in your User modal.  For that you could use either a serializable hash or json type.  </p>\n\n<p>So assuming you have a <code>app/models/user.rb</code></p>\n\n<p>Add an run migration</p>\n\n<pre><code>rails g migration add_view_options_to_users view_options:text\nrake db:migrate\n</code></pre>\n\n<p>Add this to your model</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  serialize :view_options, Hash\nend\n</code></pre>\n\n<p>Then in your users controller you can post to your update action so you'll want to add a field to <code>permitted_params</code></p>\n\n<pre><code>private\n\ndef permitted_params\n  params.require(:user).permit(:view_options, #other options etc.)\nend\n</code></pre>\n\n<p>From here you'll need to write some javascript to post view_options to users/update or custom route if you prefer. But basically each field's value will be saved inside a controller action so something like:</p>\n\n<pre><code>def update\n  @user = User.find(params[:id])\n  opts = @user.view_options || {}\n  user.view_options = opts.merge(params[:view_options])\n  if @user.save\n    render json: { status: true, user_id: @user.id }\n  else\n    render json: { status: false, errors: @user.errors.full_messages }\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 8605123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd5d48206e3bf26f22392d1f67df5c34?s=128&d=identicon&r=PG&f=1", "display_name": "Jessicascn", "link": "https://stackoverflow.com/users/8605123/jessicascn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1574694238, "creation_date": 1574688078, "question_id": 59032822, "link": "https://stackoverflow.com/questions/59032822/keep-front-end-state-with-rails", "title": "Keep front-end state with Rails", "body": "<p>I have a Rails app and I would like to save the state of my divs if a user is logged in.</p>\n\n<p>Exemple: someone is logged in and clicks on a div to hide it. I would like that to be stored somewhere so if he opens the page again, this div will still be hidden.</p>\n\n<p>I don't want to use local storage, because I want the state to be saved if I go on a mobile or another computer/browser too. It needs to be the same everywhere, depending on the user.</p>\n\n<p>I was thinking about storing each state of each div as boolean in my user model, but this idea does not sound clean at all and I don't think I'll be able to sleep at night if I do this</p>\n\n<p>Any idea?\nI think React/Redux would handle that easily (maybe not and it's just local too?) but at the moment I am stuck with Rails..</p>\n\n<p>Thanks a lot!</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 6059, "user_id": 301419, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/03850242d6e9a3b36279cdaf6f231d0f?s=128&d=identicon&r=PG&f=1", "display_name": "Alok Swain", "link": "https://stackoverflow.com/users/301419/alok-swain"}, "edited": false, "score": 0, "creation_date": 1574687390, "post_id": 59032470, "comment_id": 104308681, "body": "Shouldn&#39;t the output be <code>[{:tid=&gt;&quot;m121459&quot;, :uid=&gt;&quot;S2G1&quot;, :total_duration=&gt;713}]</code>"}, {"owner": {"reputation": 279, "user_id": 11095718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92bb0462a575cf6024810629f19321a4?s=128&d=identicon&r=PG&f=1", "display_name": "G.Brown", "link": "https://stackoverflow.com/users/11095718/g-brown"}, "reply_to_user": {"reputation": 6059, "user_id": 301419, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/03850242d6e9a3b36279cdaf6f231d0f?s=128&d=identicon&r=PG&f=1", "display_name": "Alok Swain", "link": "https://stackoverflow.com/users/301419/alok-swain"}, "edited": false, "score": 0, "creation_date": 1574687687, "post_id": 59032470, "comment_id": 104308841, "body": "@AlokSwain yes. You&#39;re correct"}], "answers": [{"tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 3, "last_activity_date": 1574687044, "creation_date": 1574687044, "answer_id": 59032521, "question_id": 59032470, "link": "https://stackoverflow.com/questions/59032470/remove-hash-from-array-based-on-key-in-ruby/59032521#59032521", "title": "Remove Hash from array based on key in Ruby", "body": "<p>Elements of the array are hashes, so you need to treat them as hashes:</p>\n\n<pre><code>@array.delete_if{|h| h[:total_duration] == 0}\n# =&gt; [{:tid=&gt;\"m121459\", :uid=&gt;\"S2G1\", :total_duration=&gt;713}]\n@array\n#=&gt; [{:tid=&gt;\"m121459\", :uid=&gt;\"S2G1\", :total_duration=&gt;713}] \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6059, "user_id": 301419, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/03850242d6e9a3b36279cdaf6f231d0f?s=128&d=identicon&r=PG&f=1", "display_name": "Alok Swain", "link": "https://stackoverflow.com/users/301419/alok-swain"}, "is_accepted": false, "score": 4, "last_activity_date": 1574687071, "creation_date": 1574687071, "answer_id": 59032530, "question_id": 59032470, "link": "https://stackoverflow.com/questions/59032470/remove-hash-from-array-based-on-key-in-ruby/59032530#59032530", "title": "Remove Hash from array based on key in Ruby", "body": "<pre><code>@array = [{:tid=&gt;\"p121709\", :uid=&gt;\"S2G1\", :total_duration=&gt;0},\n{:tid=&gt;\"p121710\", :uid=&gt;\"S2G1\", :total_duration=&gt;0},\n{:tid=&gt;\"m121459\", :uid=&gt;\"S2G1\", :total_duration=&gt;713}]\n\n@array.reject!{|e| e[:total_duration].zero?}\n</code></pre>\n\n<p>P.S - I think the output you need is <code>[{:tid=&gt;\"m121459\", :uid=&gt;\"S2G1\", :total_duration=&gt;713}]</code> <code>@array</code> has one element which is a <code>Hash</code> and not what is posted in the question i.e. <code>[{{:tid=&gt;\"m121459\", :uid=&gt;\"S2G1\", :total_duration=&gt;713}}]</code></p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1574708520, "post_id": 59032591, "comment_id": 104319727, "body": "To date appear to have four identical answers. The first two were given within seconds of each other, so I can&#39;t object to having both. Having more, given minutes later, such as yours, serve no purpose.  You may not have not noticed the others before posting but that is no matter. That is the reason for my downvote."}], "tags": [], "owner": {"reputation": 93, "user_id": 11681103, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0JjPfXs2k4k/AAAAAAAAAAI/AAAAAAAAAM4/UxbbALx8CGU/photo.jpg?sz=128", "display_name": "Safwan S M", "link": "https://stackoverflow.com/users/11681103/safwan-s-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1574694152, "last_edit_date": 1574694152, "creation_date": 1574687276, "answer_id": 59032591, "question_id": 59032470, "link": "https://stackoverflow.com/questions/59032470/remove-hash-from-array-based-on-key-in-ruby/59032591#59032591", "title": "Remove Hash from array based on key in Ruby", "body": "<pre><code>@array.delete_if{|x| x[:total_duration] == 0}\n</code></pre>\n\n<p>this will solve your problem</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1574708688, "post_id": 59032801, "comment_id": 104319810, "body": "To date appear to have four identical answers. The first two were given within seconds of each other, so I can&#39;t object to having both. Having more, such as yours, given 16 minutes after the first, serve no purpose. That is the reason for my downvote."}], "tags": [], "owner": {"reputation": 54, "user_id": 12111186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395f046764506c5f11272af2d96dfdd9?s=128&d=identicon&r=PG&f=1", "display_name": "Amol Mohite", "link": "https://stackoverflow.com/users/12111186/amol-mohite"}, "is_accepted": false, "score": 1, "last_activity_date": 1574688009, "creation_date": 1574688009, "answer_id": 59032801, "question_id": 59032470, "link": "https://stackoverflow.com/questions/59032470/remove-hash-from-array-based-on-key-in-ruby/59032801#59032801", "title": "Remove Hash from array based on key in Ruby", "body": "<p>Try this   </p>\n\n<pre><code>@array = [\n    {:tid=&gt;\"p121709\", :uid=&gt;\"S2G1\", :total_duration=&gt;0},\n    {:tid=&gt;\"p121710\", :uid=&gt;\"S2G1\", :total_duration=&gt;0},\n    {:tid=&gt;\"m121459\", :uid=&gt;\"S2G1\", :total_duration=&gt;713}]\n\n    @array.delete_if{|e| e[:total_duration]== 0}\n    # =&gt; [{:tid=&gt;\"m121459\", :uid=&gt;\"S2G1\", :total_duration=&gt;713}]\n</code></pre>\n\n<p>Hope this will help for you.</p>\n"}], "owner": {"reputation": 279, "user_id": 11095718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92bb0462a575cf6024810629f19321a4?s=128&d=identicon&r=PG&f=1", "display_name": "G.Brown", "link": "https://stackoverflow.com/users/11095718/g-brown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 59032521, "answer_count": 4, "score": 1, "last_activity_date": 1574694152, "creation_date": 1574686895, "last_edit_date": 1574687379, "question_id": 59032470, "link": "https://stackoverflow.com/questions/59032470/remove-hash-from-array-based-on-key-in-ruby", "title": "Remove Hash from array based on key in Ruby", "body": "<p>I'm new to Ruby. This is my array containing multiple hash. Now, I want to remove all Hash whose ':total_duration' is 0. This is what I've tried, but nothing is happening.</p>\n\n<pre><code>@array = \n[{:tid=&gt;\"p121709\", :uid=&gt;\"S2G1\", :total_duration=&gt;0},\n{:tid=&gt;\"p121710\", :uid=&gt;\"S2G1\", :total_duration=&gt;0},\n{:tid=&gt;\"m121459\", :uid=&gt;\"S2G1\", :total_duration=&gt;713}]\n</code></pre>\n\n<pre><code>@op_arr.delete_if { |key, total_duration| [key].include? 0 }\n</code></pre>\n\n<p>The output should be </p>\n\n<pre><code>@array = [{:tid=&gt;\"m121459\", :uid=&gt;\"S2G1\", :total_duration=&gt;713}]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 1, "creation_date": 1574681370, "post_id": 59030725, "comment_id": 104305381, "body": "Are you sure that <code>file.original_filename</code> and <code>current_user.id</code> are not nil?"}, {"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1574683849, "post_id": 59030725, "comment_id": 104306802, "body": "You don&#39;t mention any params. If you get your file and other data from the frontend you need to call things like <code>record.attachment.attach(params[:report][:file])</code> Et .."}, {"owner": {"reputation": 1156, "user_id": 4955546, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3ypcYA0ACXs/AAAAAAAAAAI/AAAAAAAABgY/gcCpBwKBymI/photo.jpg?sz=128", "display_name": "Sikandar Tariq", "link": "https://stackoverflow.com/users/4955546/sikandar-tariq"}, "edited": false, "score": 1, "creation_date": 1574685307, "post_id": 59030725, "comment_id": 104307555, "body": "you&#39;re using <code>attr_accessor</code> for <code>:file_name, and :user_id</code>... are you sure you&#39;ve these columns in the database?"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1574686122, "post_id": 59030725, "comment_id": 104307975, "body": "^ If so, remove the <code>attr_accessor</code>s for <code>:file_name</code> and <code>:user_id</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1603, "user_id": 4111480, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/efe2b8fc71222d6b38cf9f0e866a9878?s=128&d=identicon&r=PG&f=1", "display_name": "Yorkshireman", "link": "https://stackoverflow.com/users/4111480/yorkshireman"}, "is_accepted": false, "score": 0, "last_activity_date": 1574690526, "creation_date": 1574690526, "answer_id": 59033623, "question_id": 59030725, "link": "https://stackoverflow.com/questions/59030725/active-record-only-saving-time-stamps-not-record/59033623#59033623", "title": "Active record only saving time stamps not record", "body": "<p>There's not really enough information here to diagnose the problem because what you've done in the code you've provided is fine. It's likely that there is a problem in the code for your model and/or the <code>file_name</code> and <code>user_id</code> columns do not exist in your database.</p>\n"}], "owner": {"reputation": 314, "user_id": 6637390, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/fDP1p.jpg?s=128&g=1", "display_name": "rail_engine", "link": "https://stackoverflow.com/users/6637390/rail-engine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574690526, "creation_date": 1574681202, "question_id": 59030725, "link": "https://stackoverflow.com/questions/59030725/active-record-only-saving-time-stamps-not-record", "title": "Active record only saving time stamps not record", "body": "<p>Hi trying to save a record directly from the model</p>\n\n<pre><code>attr_accessor :file, :current_user, :file_name, :user_id\n\ndef create_record_and_save_attachment\n    record = Report.new(file_name: file.original_filename, user_id: current_user.id)\n    if record.save\n      record.attachment.attach(file)\n    end\nend\n</code></pre>\n\n<p>dont know why it is only saving timestamps. </p>\n\n<p>getting this </p>\n\n<pre><code>Report Create (0.6ms)  INSERT INTO \"reports\" (\"created_at\", \"updated_at\")\n</code></pre>\n\n<p>please note i and getting values for file and current_user</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "edited": false, "score": 0, "creation_date": 1574668067, "post_id": 59026853, "comment_id": 104298747, "body": "try to assign the <code>@funds_destination.project_funds_details[-3..-1]</code> in a separate instance variable and use that variable in the form. Hope it helps!"}, {"owner": {"reputation": 43, "user_id": 7467410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce30cdafa79d275b3c91c55bc957dde3?s=128&d=identicon&r=PG&f=1", "display_name": "fkchaud", "link": "https://stackoverflow.com/users/7467410/fkchaud"}, "reply_to_user": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "edited": false, "score": 0, "creation_date": 1574681465, "post_id": 59026853, "comment_id": 104305431, "body": "@Emu hmmm I could try something like that. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 7467410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce30cdafa79d275b3c91c55bc957dde3?s=128&d=identicon&r=PG&f=1", "display_name": "fkchaud", "link": "https://stackoverflow.com/users/7467410/fkchaud"}, "edited": false, "score": 0, "creation_date": 1574681389, "post_id": 59028861, "comment_id": 104305387, "body": "I mentioned the cancel button, but it has the same behaviour if you just go back or click any link of the sidebar"}, {"owner": {"reputation": 11, "user_id": 4078877, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001852313028/picture?type=large", "display_name": "Manju Sagar", "link": "https://stackoverflow.com/users/4078877/manju-sagar"}, "reply_to_user": {"reputation": 43, "user_id": 7467410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce30cdafa79d275b3c91c55bc957dde3?s=128&d=identicon&r=PG&f=1", "display_name": "fkchaud", "link": "https://stackoverflow.com/users/7467410/fkchaud"}, "edited": false, "score": 0, "creation_date": 1574921064, "post_id": 59028861, "comment_id": 104401626, "body": "in line #47 you are buildinga PFD for each subsection then why are you assigning all the PFD&#39;s with @funds_destination.project_funds_details[-3..-1] in #line 49. Since you are assigning the has many colletion it will have call to DB and save the data which you have passed in #line 49."}, {"owner": {"reputation": 43, "user_id": 7467410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce30cdafa79d275b3c91c55bc957dde3?s=128&d=identicon&r=PG&f=1", "display_name": "fkchaud", "link": "https://stackoverflow.com/users/7467410/fkchaud"}, "edited": false, "score": 0, "creation_date": 1574921220, "post_id": 59028861, "comment_id": 104401672, "body": "Yeah, I understand that I should do it in another variable like Emu said. But even tho, there is no way to make a local assignation that doesn&#39;t impact on the DB?"}, {"owner": {"reputation": 11, "user_id": 4078877, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001852313028/picture?type=large", "display_name": "Manju Sagar", "link": "https://stackoverflow.com/users/4078877/manju-sagar"}, "reply_to_user": {"reputation": 43, "user_id": 7467410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce30cdafa79d275b3c91c55bc957dde3?s=128&d=identicon&r=PG&f=1", "display_name": "fkchaud", "link": "https://stackoverflow.com/users/7467410/fkchaud"}, "edited": false, "score": 0, "creation_date": 1574921603, "post_id": 59028861, "comment_id": 104401791, "body": "instead of assigning you can use build in line 49. @funds_destination.build_project_funds_details = @funds_destination.project_funds_details[-3..-1]"}, {"owner": {"reputation": 43, "user_id": 7467410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce30cdafa79d275b3c91c55bc957dde3?s=128&d=identicon&r=PG&f=1", "display_name": "fkchaud", "link": "https://stackoverflow.com/users/7467410/fkchaud"}, "edited": false, "score": 0, "creation_date": 1574921672, "post_id": 59028861, "comment_id": 104401822, "body": "But build will add PFDs. I want to show only the last 3"}, {"owner": {"reputation": 11, "user_id": 4078877, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001852313028/picture?type=large", "display_name": "Manju Sagar", "link": "https://stackoverflow.com/users/4078877/manju-sagar"}, "reply_to_user": {"reputation": 43, "user_id": 7467410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce30cdafa79d275b3c91c55bc957dde3?s=128&d=identicon&r=PG&f=1", "display_name": "fkchaud", "link": "https://stackoverflow.com/users/7467410/fkchaud"}, "edited": false, "score": 0, "creation_date": 1574921835, "post_id": 59028861, "comment_id": 104401885, "body": "Remove #line 49 and loop in UI using below code @funds_destination.project_funds_details[-3..-1].each..."}, {"owner": {"reputation": 43, "user_id": 7467410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce30cdafa79d275b3c91c55bc957dde3?s=128&d=identicon&r=PG&f=1", "display_name": "fkchaud", "link": "https://stackoverflow.com/users/7467410/fkchaud"}, "edited": false, "score": 0, "creation_date": 1574922358, "post_id": 59028861, "comment_id": 104402056, "body": "Oh. I didn&#39;t think about that, I feel so dumb. Thanks"}], "tags": [], "owner": {"reputation": 11, "user_id": 4078877, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001852313028/picture?type=large", "display_name": "Manju Sagar", "link": "https://stackoverflow.com/users/4078877/manju-sagar"}, "is_accepted": false, "score": 0, "last_activity_date": 1574674789, "creation_date": 1574674789, "answer_id": 59028861, "question_id": 59026853, "link": "https://stackoverflow.com/questions/59026853/making-an-assignment-in-a-has-many-relationship-is-making-an-update-in-the-db/59028861#59028861", "title": "Making an assignment in a has_many relationship is making an update in the DB", "body": "<p>Better solution will be, when you click on the cancel button, capture the event and redirect to index action. I think problem will be on form routing. Correct me if i was wrong. </p>\n"}], "owner": {"reputation": 43, "user_id": 7467410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce30cdafa79d275b3c91c55bc957dde3?s=128&d=identicon&r=PG&f=1", "display_name": "fkchaud", "link": "https://stackoverflow.com/users/7467410/fkchaud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574674789, "creation_date": 1574666128, "question_id": 59026853, "link": "https://stackoverflow.com/questions/59026853/making-an-assignment-in-a-has-many-relationship-is-making-an-update-in-the-db", "title": "Making an assignment in a has_many relationship is making an update in the DB", "body": "<p>I'm trying to use a somewhat complex grouping and Rails is making it very hard for me.</p>\n\n<p>I have a <code>FundsDestination</code> model which has a <code>has_many</code> relationship with <code>ProjectFundsDetail</code>. This one has <code>belongs_to</code> relationships with <code>Project</code> and <code>Subsection</code> and an <code>amount</code> attribute. When I'm creating my <code>FundsDestination</code>, the idea is that I input the full amount for each Subsection, and I select many projects, and when I save it, it should distribute those amounts among each Project, creating a <code>ProjectFundsDetail</code> for each project and subsection. In the View, I'm actually making one PFD for each Subsection, and distributing the amounts on the <code>create</code> action. This is working fine already.</p>\n\n<p>But then I have to edit that <code>FundsDestination</code>. If I just load the <code>FundsDestination</code>, it will show a PFD for each PFD, but remember I only want to show one PFD for each Subsection, so I have to group them. In order to do that, I came up with this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def edit\n  @funds_destination = FundsDestination.find(params[:id])\n\n  Subsection.enabled.each do |subsection|\n    amount = @funds_destination\n             .project_funds_details.readonly!\n             .select { |pfd| pfd.subsection == subsection }\n             .sum(&amp;:funds_amount)\n    @funds_destination.project_funds_details.build(subsection: subsection, funds_amount: amount)\n  end\n  @funds_destination.project_funds_details = @funds_destination.project_funds_details[-3..-1]  # line 49\nend\n</code></pre>\n\n<p>This actually works fine too in the edit, and it works fine when I save it. But then I tried to cancel instead of saving, and I found out that (in the FundsDestination index) the FD that I was editing now didn't have any PFD. I checked on the DB and the PFD had the <code>funds_destination_id</code> set to <code>null</code>. When I check the server log, I see this is happening when I enter to edit:</p>\n\n<pre><code>    Started GET \"/funds_resolutions/1/funds_destinations/2/edit\" for 127.0.0.1 at 2019-11-25 03:33:22 -0300\n    Processing by FundsDestinationsController#edit as HTML\n      Parameters: {\"funds_resolution_id\"=&gt;\"1\", \"id\"=&gt;\"2\"}\n      [...] blah blah [...]\n       (0.2ms)  BEGIN\n      \u21b3 app/controllers/funds_destinations_controller.rb:49\n      ProjectFundsDetail Update All (9.8ms)  UPDATE `project_funds_details` SET `project_funds_details`.`funds_destination_id` = NULL WHERE `project_funds_details`.`funds_destination_id` = 2 AND `project_funds_details`.`id` IN (562, 563, 564, 565, 566, 567, 568, 569, 570, 571, 572, 573, 574, 575, 576, 577, 578, 579, 580, 581, 582, 583, 584, 585, 586, 587, 588, 589, 590, 591, 592, 593, 594, 595, 596, 597, 598, 599, 600, 601, 602, 603, 604, 605, 606, 607, 608, 609, 610, 611, 612, 613, 614, 615, 616, 617, 618, 619, 620, 621, 622, 623, 624, 625, 626, 627, 628, 629, 630)\n      \u21b3 app/controllers/funds_destinations_controller.rb:49\n       (49.3ms)  COMMIT\n      \u21b3 app/controllers/funds_destinations_controller.rb:49\n      Rendering funds_destinations/edit.html.erb within layouts/application\n    Completed 200 OK in 502ms (Views: 302.9ms | ActiveRecord: 64.8ms)\n</code></pre>\n\n<p>In line 49 (marked in the first code block with a comment) it's running an UPDATE query. It looks like as I'm assigning a different array of PFDs, then Rails decides that it has to apply that, even when I'm not using <code>save()</code>.</p>\n\n<p>How can I avoid that UPDATE? Any idea will be very useful. Thanks in advance.</p>\n"}, {"tags": ["ruby", "docker", "wkhtmltopdf", "alpine"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10464534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb5823652bc6e61b7d733bc11f70592?s=128&d=identicon&r=PG&f=1", "display_name": "George", "link": "https://stackoverflow.com/users/10464534/george"}, "edited": false, "score": 0, "creation_date": 1574682596, "post_id": 59029347, "comment_id": 104306064, "body": "thank you for your answer, I tried your second solution because I do not want to update the base image, but there is the new error: &#39;&#39;&#39;Step 3/15 : RUN apk add  --no-cache --repository  <a href=\"http://dl-cdn.alpinelinux.org/alpine/v3.10/main/\" rel=\"nofollow noreferrer\">dl-cdn.alpinelinux.org/alpine/v3.10/main</a> wkhtmltopdf  ---&gt; Running in 2c971af8636b fetch <a href=\"http://dl-cdn.alpinelinux.org/alpine/v3.10/main/x86_64/APKINDEX.tar.gz\" rel=\"nofollow noreferrer\">dl-cdn.alpinelinux.org/alpine/v3.10/main/x86_64/APKINDEX.tar&zwnj;&#8203;.gz</a> fetch <a href=\"http://dl-cdn.alpinelinux.org/alpine/v3.7/main/x86_64/APKINDEX.tar.gz\" rel=\"nofollow noreferrer\">dl-cdn.alpinelinux.org/alpine/v3.7/main/x86_64/APKINDEX.tar.&zwnj;&#8203;gz</a> fetch <a href=\"http://dl-cdn.alpinelinux.org/alpine/v3.7/community/x86_64/APKINDEX.tar.gz\" rel=\"nofollow noreferrer\">dl-cdn.alpinelinux.org/alpine/v3.7/community/x86_64/&hellip;</a> ERROR: unsatisfiable constraints:   wkhtmltopdf (missing): ...."}, {"owner": {"reputation": 34972, "user_id": 3288890, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/sSQpx.jpg?s=128&g=1", "display_name": "Adiii", "link": "https://stackoverflow.com/users/3288890/adiii"}, "reply_to_user": {"reputation": 21, "user_id": 10464534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb5823652bc6e61b7d733bc11f70592?s=128&d=identicon&r=PG&f=1", "display_name": "George", "link": "https://stackoverflow.com/users/10464534/george"}, "edited": false, "score": 0, "creation_date": 1574682743, "post_id": 59029347, "comment_id": 104306157, "body": "can you you share your base image url?"}, {"owner": {"reputation": 21, "user_id": 10464534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb5823652bc6e61b7d733bc11f70592?s=128&d=identicon&r=PG&f=1", "display_name": "George", "link": "https://stackoverflow.com/users/10464534/george"}, "edited": false, "score": 0, "creation_date": 1574685114, "post_id": 59029347, "comment_id": 104307453, "body": "here is my base image url: <a href=\"https://github.com/docker-library/ruby/blob/c9644fe5c95cd71913db348baa41240f05d882b3/2.5/alpine3.7/Dockerfile\" rel=\"nofollow noreferrer\">github.com/docker-library/ruby/blob/&hellip;</a>"}, {"owner": {"reputation": 34972, "user_id": 3288890, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/sSQpx.jpg?s=128&g=1", "display_name": "Adiii", "link": "https://stackoverflow.com/users/3288890/adiii"}, "reply_to_user": {"reputation": 21, "user_id": 10464534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb5823652bc6e61b7d733bc11f70592?s=128&d=identicon&r=PG&f=1", "display_name": "George", "link": "https://stackoverflow.com/users/10464534/george"}, "edited": false, "score": 0, "creation_date": 1574685780, "post_id": 59029347, "comment_id": 104307786, "body": "docker hub link please"}], "tags": [], "owner": {"reputation": 34972, "user_id": 3288890, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/sSQpx.jpg?s=128&g=1", "display_name": "Adiii", "link": "https://stackoverflow.com/users/3288890/adiii"}, "is_accepted": false, "score": 1, "last_activity_date": 1574682783, "last_edit_date": 1574682783, "creation_date": 1574676306, "answer_id": 59029347, "question_id": 59026248, "link": "https://stackoverflow.com/questions/59026248/how-to-install-wkhtmltopdf-on-docker-ruby-2-5-1-alpine-linux/59029347#59029347", "title": "How to install wkhtmltopdf on Docker Ruby-2.5.1 Alpine Linux?", "body": "<p>Update your base image, seem like it pulling from <strong>v3.7</strong>, as you can see the error</p>\n\n<pre><code>fetch http://dl-cdn.alpinelinux.org/alpine/v3.7/community/x86_64/APKINDEX.tar.gz\n</code></pre>\n\n<p>Where v3.7 does not contain wkhtmltopdf</p>\n\n<p><a href=\"https://pkgs.alpinelinux.org/packages?name=wkhtmltopdf&amp;branch=v3.7\" rel=\"nofollow noreferrer\">v3.7 wkhtmltopdf not exist</a></p>\n\n<p>or if you do not want  update the image then you can install it from <a href=\"https://pkgs.alpinelinux.org/packages?name=wkhtmltopdf&amp;branch=v3.10\" rel=\"nofollow noreferrer\">v3.10 wkhtmltopdf</a></p>\n\n<pre><code>RUN apk add  --no-cache --repository  http://dl-cdn.alpinelinux.org/alpine/v3.10/main/ wkhtmltopdf=0.12.5-r0\n</code></pre>\n\n<p>Btw this base image will work without modification.</p>\n\n<p><a href=\"https://github.com/docker-library/ruby/blob/bf0e16e7511c97fdf351fdfc2e7e17478a4eaf16/2.5/alpine3.9/Dockerfile\" rel=\"nofollow noreferrer\">2.5-alpine3.9</a></p>\n"}, {"comments": [{"owner": {"reputation": 34972, "user_id": 3288890, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/sSQpx.jpg?s=128&g=1", "display_name": "Adiii", "link": "https://stackoverflow.com/users/3288890/adiii"}, "edited": false, "score": 0, "creation_date": 1574676469, "post_id": 59029364, "comment_id": 104302722, "body": "without from it will never reached to run command. see the question OP using <code>ruby-2.5.1:alpine</code>"}, {"owner": {"reputation": 21, "user_id": 10464534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb5823652bc6e61b7d733bc11f70592?s=128&d=identicon&r=PG&f=1", "display_name": "George", "link": "https://stackoverflow.com/users/10464534/george"}, "edited": false, "score": 0, "creation_date": 1574682767, "post_id": 59029364, "comment_id": 104306168, "body": "thank you, I am using FROM  of course but the error is because in alpine v3.7 wkhtmltopdf does not exists, and I need a way to install it somehow"}], "tags": [], "owner": {"reputation": 11, "user_id": 12425377, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB4lj9PUe175spCI8lOw7cWs5iTvAAfA__mtbNC=k-s128", "display_name": "OzSEO Agency", "link": "https://stackoverflow.com/users/12425377/ozseo-agency"}, "is_accepted": false, "score": 0, "last_activity_date": 1574681755, "last_edit_date": 1574681755, "creation_date": 1574676354, "answer_id": 59029364, "question_id": 59026248, "link": "https://stackoverflow.com/questions/59026248/how-to-install-wkhtmltopdf-on-docker-ruby-2-5-1-alpine-linux/59029364#59029364", "title": "How to install wkhtmltopdf on Docker Ruby-2.5.1 Alpine Linux?", "body": "<p>Did you use the from ? use</p>\n\n<pre><code>FROM ruby:2.5.1-alpine\n\nRUN apk --update add ttf-ubuntu-font-family wkhtmltopdf\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10464534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb5823652bc6e61b7d733bc11f70592?s=128&d=identicon&r=PG&f=1", "display_name": "George", "link": "https://stackoverflow.com/users/10464534/george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 986, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1574682783, "creation_date": 1574663008, "last_edit_date": 1574675928, "question_id": 59026248, "link": "https://stackoverflow.com/questions/59026248/how-to-install-wkhtmltopdf-on-docker-ruby-2-5-1-alpine-linux", "title": "How to install wkhtmltopdf on Docker Ruby-2.5.1 Alpine Linux?", "body": "<pre><code>RUN apk --update add ttf-ubuntu-font-family wkhtmltopdf\n</code></pre>\n\n<p>I am trying to install wkhtml using this command on docker image <code>ruby-2.5.1:alpine</code> but error is:</p>\n\n<pre><code>fetch http://dl-cdn.alpinelinux.org/alpine/v3.7/main/x86_64/APKINDEX.tar.gz\nfetch http://dl-cdn.alpinelinux.org/alpine/v3.7/community/x86_64/APKINDEX.tar.gz\nERROR: unsatisfiable constraints:\n  wkhtmltopdf (missing):\n    required by: world[wkhtmltopdf]\nThe command '/bin/sh -c apk --update add ttf-ubuntu-font-family wkhtmltopdf' returned a non-zero code: 1\n</code></pre>\n\n<p>is there any way to install it? thanks in advance</p>\n"}, {"tags": ["ruby", "httparty"], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 1, "last_activity_date": 1574671242, "creation_date": 1574671242, "answer_id": 59027886, "question_id": 59025945, "link": "https://stackoverflow.com/questions/59025945/questions-with-making-calls-to-an-api/59027886#59027886", "title": "Questions with making calls to an API", "body": "<p>The JSON response you get from <a href=\"https://boards-api.greenhouse.io/v1/boards/flatironschoolcareers/jobs\" rel=\"nofollow noreferrer\">https://boards-api.greenhouse.io/v1/boards/flatironschoolcareers/jobs</a> looks like this:</p>\n\n<pre><code>{\n  \"jobs\": [\n    {\n      \"absolute_url\": \"https://boards.greenhouse.io/flatironschoolcareers/jobs/4460392002\",\n      \"internal_job_id\": 4375855002,\n      \"location\": {\n        \"name\": \"New York, NY\"\n      },\n      \"metadata\": [\n        {\n          \"id\": 4019377002,\n          \"name\": \"Employment Type\",\n          \"value\": \"Full-time\",\n          \"value_type\": \"single_select\"\n        },\n      ...\n</code></pre>\n\n<p>HTTParty converts that response to Ruby objects. So just like in that JSON response, <code>response</code> has a top level <code>\"jobs\"</code> key which contains an array of jobs.</p>\n\n<p>In order to get the 1st job you'd use:</p>\n\n<pre><code>response[\"jobs\"][0]\n#=&gt; {\"absolute_url\"=&gt;\"https://boa...\", \"internal_job_id\"=&gt;4375855002, ...}\n</code></pre>\n\n<p>and to get it's <code>absolute_url</code>:</p>\n\n<pre><code>response[\"jobs\"][0][\"absolute_url\"]\n#=&gt; \"https://boards.greenhouse.io/flatironschoolcareers/jobs/4460392002\"\n</code></pre>\n\n<p>And to traverse all jobs you call <code>each</code> on the array, i.e.:</p>\n\n<pre><code>response[\"jobs\"].each do |job|\n  puts job[\"absolute_url\"]\nend\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>https://boards.greenhouse.io/flatironschoolcareers/jobs/4460392002\nhttps://boards.greenhouse.io/flatironschoolcareers/jobs/4460383002\nhttps://boards.greenhouse.io/flatironschoolcareers/jobs/4472889002\n...\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12236433, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L8vj7iROdwE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfOmE9lEhHW99hpJ2szuhjnYDIg3A/photo.jpg?sz=128", "display_name": "Raymond Gonzalez", "link": "https://stackoverflow.com/users/12236433/raymond-gonzalez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574671242, "creation_date": 1574661209, "last_edit_date": 1574669986, "question_id": 59025945, "link": "https://stackoverflow.com/questions/59025945/questions-with-making-calls-to-an-api", "title": "Questions with making calls to an API", "body": "<p>I've been working on creating a CLI gem for a job board. I've been setting up my API class, but I have been struggling to get it to work correctly in terms of successful calls; I'm using HTTParty to parse. When I have been testing this, it keeps giving me a method error for \"[]\". I've gone over everything, made sure the syntax is correct but have hit a wall in figuring out what seems to break this. Here is the method I created to list all of the jobs on the specific board:</p>\n\n<pre><code>def all_jobs_call\n  url = \"https://boards-api.greenhouse.io/v1/boards/flatironschoolcareers/jobs\"\n  response = HTTParty.get(url)\n  response[\"absolute_url\"][\"location\"][\"metadata\"][\"id\"][\"title\"].each do |job|\n    absolute_url = job[\"absolute_url\"]\n    location = job[\"location\"]\n    metadata = job[\"metadata\"]\n    id = job[\"id\"]\n    title = job[\"title\"]\n  end\nend\n</code></pre>\n\n<p>I would greatly appreciate any insight as to what I could be doing wrong or if I'm missing something glaring. Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 176, "user_id": 8182291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/135f6960e27f824a1e79a530815a4562?s=128&d=identicon&r=PG&f=1", "display_name": "Vatsal Jain", "link": "https://stackoverflow.com/users/8182291/vatsal-jain"}, "edited": false, "score": 1, "creation_date": 1574667233, "post_id": 59025925, "comment_id": 104298464, "body": "How are you specifying the rails env in prod ?"}], "answers": [{"tags": [], "owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "is_accepted": false, "score": 0, "last_activity_date": 1574680833, "creation_date": 1574680833, "answer_id": 59030609, "question_id": 59025925, "link": "https://stackoverflow.com/questions/59025925/mixed-rails-environment-on-server/59030609#59030609", "title": "Mixed Rails environment on server", "body": "<p>It's likely that your Apache/Passenger setup is setting the environment to production. This is only for web (HTTP) requests that come through Apache.</p>\n\n<p>As a default rake/rails is run in development mode unless specified otherwise. You can do this by setting the constant RAILS_ENV. This can either by setting in a bash script or as your run the command, e.g.:</p>\n\n<p><code>RAILS_ENV=production rake about</code></p>\n"}], "owner": {"reputation": 5, "user_id": 2801821, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RJ88s.jpg?s=128&g=1", "display_name": "Artem Kulakov", "link": "https://stackoverflow.com/users/2801821/artem-kulakov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574680833, "creation_date": 1574661057, "last_edit_date": 1574662313, "question_id": 59025925, "link": "https://stackoverflow.com/questions/59025925/mixed-rails-environment-on-server", "title": "Mixed Rails environment on server", "body": "<p>For some reason the Rails application I work with has a mixed environment. For example the application uses config/environments/production.rb and is logging to log/production.rb, but uses development settings from config/database.yml and \"rake about\" shows development mode:</p>\n\n<pre><code>About your application's environment\nRails version             4.2.7.1\nRuby version              2.1.9-p495 (x86_64-linux-gnu)\nRubyGems version          2.4.5.4\nRack version              1.6.5\nJavaScript Runtime        Node.js (V8)\nMiddleware                Rack::Sendfile, ActionDispatch::Static, Rack::Lock, #&lt;ActiveSupport::Cache::Strategy::LocalCache::Middleware:0x0000000633e5b8&gt;, Rack::Runtime, Rack::MethodOverride, ActionDispatch::RequestId, Rails::Rack::Logger, ActionDispatch::ShowExceptions, ActionDispatch::DebugExceptions, ActionDispatch::RemoteIp, ActionDispatch::Reloader, ActionDispatch::Callbacks, ActiveRecord::Migration::CheckPending, ActiveRecord::ConnectionAdapters::ConnectionManagement, ActiveRecord::QueryCache, ActionDispatch::Cookies, ActionDispatch::Session::CookieStore, ActionDispatch::Flash, ActionDispatch::ParamsParser, Rack::Head, Rack::ConditionalGet, Rack::ETag, Warden::Manager, HttpAcceptLanguage::Middleware, OmniAuth::Strategies::GoogleOauth2\nApplication root          /var/www/[#########]\nEnvironment               development\nDatabase adapter          mysql2\nDatabase schema version   20191114203932\n</code></pre>\n\n<p>Server runs Apache and Passenger.</p>\n\n<p>How can I turn on production mode for all parts of Rails application?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "haml"], "comments": [{"owner": {"reputation": 1156, "user_id": 4955546, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3ypcYA0ACXs/AAAAAAAAAAI/AAAAAAAABgY/gcCpBwKBymI/photo.jpg?sz=128", "display_name": "Sikandar Tariq", "link": "https://stackoverflow.com/users/4955546/sikandar-tariq"}, "edited": false, "score": 1, "creation_date": 1574671283, "post_id": 59025846, "comment_id": 104299980, "body": "It&#39;s a long shot but can you please confirm that <code>name</code> of the first user is not <code>nil&#47;empty string</code> ?"}, {"owner": {"reputation": 738, "user_id": 8206178, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20kpbzWvNqw/AAAAAAAAAAI/AAAAAAAAAAs/qNar8diO6Ms/photo.jpg?sz=128", "display_name": "Varinder Sohal", "link": "https://stackoverflow.com/users/8206178/varinder-sohal"}, "reply_to_user": {"reputation": 1156, "user_id": 4955546, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3ypcYA0ACXs/AAAAAAAAAAI/AAAAAAAABgY/gcCpBwKBymI/photo.jpg?sz=128", "display_name": "Sikandar Tariq", "link": "https://stackoverflow.com/users/4955546/sikandar-tariq"}, "edited": false, "score": 0, "creation_date": 1574671714, "post_id": 59025846, "comment_id": 104300171, "body": "@SikandarTariq Yeah I confirm that the name of the first user is not nit or empty. If I choose more then 1 name then it also added empty value"}], "answers": [{"comments": [{"owner": {"reputation": 738, "user_id": 8206178, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20kpbzWvNqw/AAAAAAAAAAI/AAAAAAAAAAs/qNar8diO6Ms/photo.jpg?sz=128", "display_name": "Varinder Sohal", "link": "https://stackoverflow.com/users/8206178/varinder-sohal"}, "edited": false, "score": 0, "creation_date": 1574676347, "post_id": 59029003, "comment_id": 104302639, "body": "Thankyou for your reply!! but it is not working. I tried to change the <code>&#39;name&#39;</code> into <code>&#39;id&#39;</code>"}, {"owner": {"reputation": 741, "user_id": 6894749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gbstY.jpg?s=128&g=1", "display_name": "Thang", "link": "https://stackoverflow.com/users/6894749/thang"}, "reply_to_user": {"reputation": 738, "user_id": 8206178, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20kpbzWvNqw/AAAAAAAAAAI/AAAAAAAAAAs/qNar8diO6Ms/photo.jpg?sz=128", "display_name": "Varinder Sohal", "link": "https://stackoverflow.com/users/8206178/varinder-sohal"}, "edited": false, "score": 0, "creation_date": 1574678127, "post_id": 59029003, "comment_id": 104303676, "body": "May I ask what is the initial value of <code>f.object.assignedto</code>?"}, {"owner": {"reputation": 738, "user_id": 8206178, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20kpbzWvNqw/AAAAAAAAAAI/AAAAAAAAAAs/qNar8diO6Ms/photo.jpg?sz=128", "display_name": "Varinder Sohal", "link": "https://stackoverflow.com/users/8206178/varinder-sohal"}, "edited": false, "score": 0, "creation_date": 1574750408, "post_id": 59029003, "comment_id": 104331629, "body": "Its initial value is first user`s name"}, {"owner": {"reputation": 741, "user_id": 6894749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gbstY.jpg?s=128&g=1", "display_name": "Thang", "link": "https://stackoverflow.com/users/6894749/thang"}, "reply_to_user": {"reputation": 738, "user_id": 8206178, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20kpbzWvNqw/AAAAAAAAAAI/AAAAAAAAAAs/qNar8diO6Ms/photo.jpg?sz=128", "display_name": "Varinder Sohal", "link": "https://stackoverflow.com/users/8206178/varinder-sohal"}, "edited": false, "score": 0, "creation_date": 1574753387, "post_id": 59029003, "comment_id": 104332801, "body": "Can the initial value be the user&#39;s <code>id</code> that you want to select by default? Or it has to be the <code>name</code>?"}, {"owner": {"reputation": 738, "user_id": 8206178, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20kpbzWvNqw/AAAAAAAAAAI/AAAAAAAAAAs/qNar8diO6Ms/photo.jpg?sz=128", "display_name": "Varinder Sohal", "link": "https://stackoverflow.com/users/8206178/varinder-sohal"}, "edited": false, "score": 0, "creation_date": 1574757747, "post_id": 59029003, "comment_id": 104334652, "body": "By default selected value is name not id ."}], "tags": [], "owner": {"reputation": 741, "user_id": 6894749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gbstY.jpg?s=128&g=1", "display_name": "Thang", "link": "https://stackoverflow.com/users/6894749/thang"}, "is_accepted": false, "score": 0, "last_activity_date": 1574675243, "creation_date": 1574675243, "answer_id": 59029003, "question_id": 59025846, "link": "https://stackoverflow.com/questions/59025846/array-returns-first-element-blank-in-my-rails3-2-11-multi-select/59029003#59029003", "title": "Array returns first element blank in my Rails(3.2.11) multi-select", "body": "<p>Properly because the second arg is <code>'name'</code> instead of <code>'id'</code>.</p>\n\n<p>Try\n<code>options_from_collection_for_select(User.all, 'id', 'name', f.object.assignedto)</code></p>\n"}], "owner": {"reputation": 738, "user_id": 8206178, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20kpbzWvNqw/AAAAAAAAAAI/AAAAAAAAAAs/qNar8diO6Ms/photo.jpg?sz=128", "display_name": "Varinder Sohal", "link": "https://stackoverflow.com/users/8206178/varinder-sohal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574675243, "creation_date": 1574660593, "last_edit_date": 1574662180, "question_id": 59025846, "link": "https://stackoverflow.com/questions/59025846/array-returns-first-element-blank-in-my-rails3-2-11-multi-select", "title": "Array returns first element blank in my Rails(3.2.11) multi-select", "body": "<p>When I selected multiple values from select list then array returns the first value empty.</p>\n\n<pre><code>= f.select :assignedto, options_from_collection_for_select(User.all, 'name', 'name',f.object.assignedto),{}, { :multiple =&gt; true}\n</code></pre>\n\n<p>I tried with <code>{:include_blank =&gt; false}</code> and <code>{:include_hidden =&gt; false}</code> but this is not working for rails 3.2.11. I have many solutions to handle this empty value in the controller but I want to stop adding empty value in the array.</p>\n"}, {"tags": ["regex", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 5, "last_activity_date": 1574666282, "last_edit_date": 1574666282, "creation_date": 1574655030, "answer_id": 59025134, "question_id": 59025074, "link": "https://stackoverflow.com/questions/59025074/how-to-check-if-the-string-matches-a-regex/59025134#59025134", "title": "How to check if the string matches a regex", "body": "<p><code>===</code> is the subsumption operator, where <code>big_concept === specific_concept</code> tests whether the <code>big_concept</code> subsumes the <code>specific_concept</code>. With regular expressions, you want to test whether the class of strings described by a regular expression subsumes a specific string; so you would write it as <code>rule === \"1t\"</code>. This usage is described at <a href=\"https://ruby-doc.org/core-2.6.5/Regexp.html#method-i-3D-3D-3D\" rel=\"nofollow noreferrer\"><code>RegExp#===</code></a>.</p>\n\n<p><code>\"1t\" === rule</code> tests whether the string <code>\"1t\"</code> subsumes the regular expression; but strings only subsume (by Ruby's rules) objects that are identical to the string when stringified (with <code>to_s</code>). <code>rule</code> stringifies to <code>\"(?-mix:^[0-9][a-z]$)\"</code>, which is different from <code>\"1t\"</code>, therefore <code>false</code>. This usage is described at <a href=\"https://ruby-doc.org/core-2.6.5/String.html#method-i-3D-3D-3D\" rel=\"nofollow noreferrer\"><code>String#===</code></a>.</p>\n\n<p>With that, here's your code, corrected (and expanded :D ):</p>\n\n<pre><code>rule = /^[0-9][a-z]$/\n\nputs \"rb -------------------------\"\np \"rb\".match? rule #=&gt; false\np !!(\"rb\".match? rule) #=&gt; false\np !!(\"rb\" =~ rule) #=&gt; false\np !(\"rb\" !~ rule) #=&gt; false\np rule === \"rb\" #=&gt; false\np !!(\"rb\"[rule]) #=&gt; false\np rule.match? \"rb\" #=&gt; false\np !!(rule.match \"rb\") #=&gt; false\n\nputs \"1t -------------------------\"\np \"1t\".match? rule #=&gt; true\np !!(\"1t\".match rule) #=&gt; true\np !!(\"1t\" =~ rule) #=&gt; true\np !(\"1t\" !~ rule) #=&gt; true\np rule === \"1t\" #=&gt; true\np !!(\"1t\"[rule]) #=&gt; true\np rule.match? \"1t\" #=&gt; true\np !!(rule.match \"1t\") #=&gt; true\n</code></pre>\n"}], "owner": {"reputation": 1133, "user_id": 11645617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nr756.jpg?s=128&g=1", "display_name": "Weilory", "link": "https://stackoverflow.com/users/11645617/weilory"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 0, "accepted_answer_id": 59025134, "answer_count": 1, "score": 2, "last_activity_date": 1574666282, "creation_date": 1574654459, "last_edit_date": 1574655044, "question_id": 59025074, "link": "https://stackoverflow.com/questions/59025074/how-to-check-if-the-string-matches-a-regex", "title": "How to check if the string matches a regex", "body": "<p>I am learning regex, using:</p>\n\n<ul>\n<li><a href=\"https://blog.arkency.com/the-equals-equals-equals-case-equality-operator-in-ruby/\" rel=\"nofollow noreferrer\">https://blog.arkency.com/the-equals-equals-equals-case-equality-operator-in-ruby/</a></li>\n<li><a href=\"https://www.rubyguides.com/2015/06/ruby-regex/\" rel=\"nofollow noreferrer\">https://www.rubyguides.com/2015/06/ruby-regex/</a></li>\n</ul>\n\n<p>I have clear information and was running happily with the tutorials until I kicked the stone: </p>\n\n<pre><code>rule = /^[0-9][a-z]$/\n\nputs \"rb -------------------------\"\np \"rb\".match? rule #=&gt; false\np !!(\"rb\" =~ rule) #=&gt; false\np \"rb\" === rule #=&gt; false\n\nputs \"1t -------------------------\"\np \"1t\".match? rule #=&gt; true\np !!(\"1t\" =~ rule) #=&gt; true\np \"1t\" === rule #=&gt; false \n</code></pre>\n\n<p>Can someone explain why the last one is false?</p>\n"}, {"tags": ["ruby", "rubygems", "sorbet"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1574653967, "post_id": 59024003, "comment_id": 104294765, "body": "So you&#39;re asking for opinions?"}, {"owner": {"reputation": 15586, "user_id": 54500, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/gg5v8.jpg?s=128&g=1", "display_name": "pat", "link": "https://stackoverflow.com/users/54500/pat"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1574665849, "post_id": 59024003, "comment_id": 104297936, "body": "@theTinMan the Sorbet team direct people to ask questions here, especially if things aren&#39;t clear from their documentation, and hence I&#39;m doing so. I don&#39;t feel I&#39;m asking for opinions, but rather: how should I do things to ensure they work with the Sorbet team&#39;s expectations and code."}], "answers": [{"comments": [{"owner": {"reputation": 46, "user_id": 1245642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hwaXu.jpg?s=128&g=1", "display_name": "bagman", "link": "https://stackoverflow.com/users/1245642/bagman"}, "edited": false, "score": 0, "creation_date": 1576714475, "post_id": 59056079, "comment_id": 104992461, "body": "I should note that this doesn&#39;t seem to add them into tests, which certainly makes this less helpful"}], "tags": [], "owner": {"reputation": 46, "user_id": 1245642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hwaXu.jpg?s=128&g=1", "display_name": "bagman", "link": "https://stackoverflow.com/users/1245642/bagman"}, "is_accepted": false, "score": 3, "last_activity_date": 1574788164, "creation_date": 1574788164, "answer_id": 59056079, "question_id": 59024003, "link": "https://stackoverflow.com/questions/59024003/adding-sorbet-rbi-files-to-gems/59056079#59056079", "title": "Adding Sorbet RBI files to gems", "body": "<p>My understanding (I'm in a similar boat) based reading through <a href=\"https://sorbet.org/docs/rbi#rbis-within-gems\" rel=\"nofollow noreferrer\">the custom RBI content</a> is that they recommend writing the definitions in a <code>rbi</code> directory in the gem root directory. I don't think they should go in the the <code>sorbet</code> directory since that file gets quite large (and you don't want to have gem users having to download MBs of repeated definitions).</p>\n\n<p>I've been putting the <code>typed</code> sigils in the library files that I have definitions for and having the RBI files separate. The <code>srb tc</code> picks up the definitions (and complains as appropriate). This means that I don't need to add sorbet as a gem dependency (other than for development).</p>\n"}], "owner": {"reputation": 15586, "user_id": 54500, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/gg5v8.jpg?s=128&g=1", "display_name": "pat", "link": "https://stackoverflow.com/users/54500/pat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1574788164, "creation_date": 1574643960, "question_id": 59024003, "link": "https://stackoverflow.com/questions/59024003/adding-sorbet-rbi-files-to-gems", "title": "Adding Sorbet RBI files to gems", "body": "<p>I'm investigating what it might take to add Sorbet RBI files to gems that I maintain, and I'm trying to figure out the proper process for this. I don't want to have Sorbet as a runtime dependency for the gems, though, so that means having all the type information in a separate RBI file.</p>\n\n<p>My current queries around this are:</p>\n\n<ul>\n<li>Do I add my own <code>rbi</code> file at, say, <code>./sorbet/rbi/gemname.rbi</code>? And is that where Sorbet will look by default if I package that into the published gem file?</li>\n<li>Should I include the other auto-generated RBI files (in <code>./sorbet/rbi/sorbet-typed</code> and <code>./sorbet/rbi/hidden-definitions</code>) in the published gem file?</li>\n<li>Should I include the <code>typed</code> pragma comment in my gem's files, even though the type information is separated into an RBI file? If so, should it reflect the type information that's present in the file the comment is in, or should it reflect the type information available via the RBI file?</li>\n</ul>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 2, "creation_date": 1574651954, "post_id": 59023666, "comment_id": 104294352, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/53053754/ruby-rspec-expect-error-when-testing-method\">Ruby, rspec Expect error when testing method</a>"}, {"owner": {"reputation": 710, "user_id": 10147020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pbSiH.png?s=128&g=1", "display_name": "Basin", "link": "https://stackoverflow.com/users/10147020/basin"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1574660350, "post_id": 59023666, "comment_id": 104296219, "body": "@anothermh, sorry, but no, linked question is about <code>expect(value)</code> vs <code>expect { expression }</code>, my question is specifically about behavior of <code>change</code>, because given expression or values will be evaluated twice."}], "answers": [{"comments": [{"owner": {"reputation": 710, "user_id": 10147020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pbSiH.png?s=128&g=1", "display_name": "Basin", "link": "https://stackoverflow.com/users/10147020/basin"}, "edited": false, "score": 1, "creation_date": 1574737101, "post_id": 59025030, "comment_id": 104328162, "body": "Thanks, I see cases where one can be preferred than another."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 3, "last_activity_date": 1574654011, "creation_date": 1574654011, "answer_id": 59025030, "question_id": 59023666, "link": "https://stackoverflow.com/questions/59023666/is-there-are-a-difference-between-changereceiver-message-and-change-block/59025030#59025030", "title": "Is there are a difference between change(receiver, message) and change { block }", "body": "<p>Not everything maps so neatly to the <code>send</code> approach. For example:</p>\n\n<pre><code>expect { createRecord.call }.to change { Record.count(OtherRecord.param) }.by(1)\n</code></pre>\n\n<p>Where there's no way to represent that as a simple <code>send(*args)</code> as:</p>\n\n<pre><code>expect { createRecord.call }.to change(Record, :count, OtherRecord.param).by(1)\n</code></pre>\n\n<p>This evaluates <code>OtherRecord.param</code> as the <code>expect</code> line executes, not at the right before and after interval.</p>\n\n<p>It's provided for feature-completeness and to give you complete control.</p>\n\n<p>In short the block form <em>runs the exact block twice</em> while the other evaluates the arguments once and makes a <code>send</code> call twice.</p>\n"}], "owner": {"reputation": 710, "user_id": 10147020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pbSiH.png?s=128&g=1", "display_name": "Basin", "link": "https://stackoverflow.com/users/10147020/basin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 59025030, "answer_count": 1, "score": 4, "last_activity_date": 1574654011, "creation_date": 1574640461, "question_id": 59023666, "link": "https://stackoverflow.com/questions/59023666/is-there-are-a-difference-between-changereceiver-message-and-change-block", "title": "Is there are a difference between change(receiver, message) and change { block }", "body": "<p>I found that assertion method <code>change</code> used in two different ways</p>\n\n<pre><code>expect { createRecord.call }.to change(Record, :count).by(1)\n</code></pre>\n\n<p>vs</p>\n\n<pre><code>expect { createRecord.call }.to change { Record.count }.by(1)\n</code></pre>\n\n<p>I tried to dig into source code, and found that passed block will be called if block provided.<br>\nWithout block message will be \"sent\" to the receiver.   </p>\n\n<p>I was wonder are there some scenarios where one should be preferred over another?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bigdecimal"], "comments": [{"owner": {"reputation": 2630, "user_id": 1706670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7a901672979d5870dc01f9787c0b2a4?s=128&d=identicon&r=PG", "display_name": "PGill", "link": "https://stackoverflow.com/users/1706670/pgill"}, "edited": false, "score": 0, "creation_date": 1574635340, "post_id": 59022857, "comment_id": 104291347, "body": "you may want to convert <code>&quot;&quot;</code> or <code>nil</code> to 0 before passing to <code>BigDecimal</code>. <code>BigDecimal(tt[:billed_amt].to_i)</code>. or you can use <code>to_d</code> method <code>tt[:billed_amt].to_s.to_d</code>"}], "answers": [{"tags": [], "owner": {"reputation": 893, "user_id": 3394889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a3c58b23ce03f0e71522820d13404d5a?s=128&d=identicon&r=PG&f=1", "display_name": "The Wizard", "link": "https://stackoverflow.com/users/3394889/the-wizard"}, "is_accepted": true, "score": 2, "last_activity_date": 1574653914, "last_edit_date": 1574653914, "creation_date": 1574634630, "answer_id": 59023071, "question_id": 59022857, "link": "https://stackoverflow.com/questions/59022857/ruby-2-4-and-bigdecimal-error-invalid-value/59023071#59023071", "title": "Ruby 2.4 and BigDecimal error (invalid value)", "body": "<p>This is correct behaviour. You can read about it in \"<a href=\"https://jamescrisp.org/2017/09/26/bigdecimal-fix-for-rails-4-with-ruby-2-4/\" rel=\"nofollow noreferrer\">BigDecimal fix for Rails 4 with Ruby 2.4</a>\". </p>\n\n<p>Big Decimal 1.3.0, which ships with Ruby 2.4, was changed to throw an exception on invalid values to the constructor rather than returning 0 as it did in Ruby 2.3. This was done so that it was more consistent with the other numeric types (Integer, Float, e.t.c.).</p>\n\n<p>There have been <a href=\"https://github.com/ruby/bigdecimal/issues/95\" rel=\"nofollow noreferrer\">suggestions to revert this functionality</a> however it is likely it won't happen as BigDecimal needs to be consistent with the other numeric types.</p>\n"}], "owner": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 658, "favorite_count": 0, "accepted_answer_id": 59023071, "answer_count": 1, "score": 2, "last_activity_date": 1574653914, "creation_date": 1574632841, "question_id": 59022857, "link": "https://stackoverflow.com/questions/59022857/ruby-2-4-and-bigdecimal-error-invalid-value", "title": "Ruby 2.4 and BigDecimal error (invalid value)", "body": "<p>Given a value in a hash like this:</p>\n\n<pre><code>billed_amt:\"\"\n</code></pre>\n\n<p>This code then:</p>\n\n<pre><code>BigDecimal.new(tt[:billed_amt].to_s)\n</code></pre>\n\n<p>results in this error:</p>\n\n<pre><code>ArgumentError: invalid value for BigDecimal(): \"\"\n</code></pre>\n\n<p>Is this correct behaviour?  I have tried updating the gem with no luck.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2198, "user_id": 3842598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/468955b0edcf30e61a2937cb8b754a1a?s=128&d=identicon&r=PG&f=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/3842598/christian"}, "edited": false, "score": 0, "creation_date": 1574637172, "post_id": 59022740, "comment_id": 104291714, "body": "When Im read the docuenation correctly, it returns an array with of hashes, which should be pretty simple to handle. I am not sure if this logic belongs to your view."}], "answers": [{"tags": [], "owner": {"reputation": 2599, "user_id": 12201472, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PcsKV9F65CQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3repCiEtFeVMa1z1D-JpXuqg5wlw6w/photo.jpg?sz=128", "display_name": "Marian13", "link": "https://stackoverflow.com/users/12201472/marian13"}, "is_accepted": false, "score": 1, "last_activity_date": 1574738515, "last_edit_date": 1574738515, "creation_date": 1574638090, "answer_id": 59023442, "question_id": 59022740, "link": "https://stackoverflow.com/questions/59022740/how-to-iterate-over-multiple-hash-values-with-espinita-in-rails/59023442#59023442", "title": "How to iterate over multiple hash values with Espinita in Rails", "body": "<p>If you have an opportunity to update Espinita in your project, I would recommend you to do it because <a href=\"https://github.com/continuum/espinita/commit/442be7470494291fd58caea1fff94cc3f60fa792#diff-17c2ff2b5a7163666ef4a508d9c34b2aR67\" rel=\"nofollow noreferrer\">they changed the format</a> of the hash returned by <code>history_from_audits_for</code>.</p>\n\n<p>In the newer version, you will have something like this in the \"<a href=\"https://github.com/continuum/espinita#history-and-restoration\" rel=\"nofollow noreferrer\">History and Restoration</a>\" documentation:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>model.history_from_audits_for([:name, :settings])\n=&gt; [{:changes=&gt;{:name=&gt;\"Baz\", :settings=&gt;\"\"}, :changed_at=&gt;2015-05-03 15:33:58 -0700},\n {:changes=&gt;{:name=&gt;\"Arglebargle\", :settings=&gt;\"IHOP\"}, :changed_at=&gt;2015-03-24 15:33:58 -0700},\n {:changes=&gt;{:name=&gt;\"Walrus\"}, :changed_at=&gt;2014-05-13 15:33:58 -0700}]\n</code></pre>\n\n<p>and your iteration will be as simple as:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&lt;% @contract.contract_information.history_from_audits_for([:contract_title, :assigned_to, :deadline]).each do |audit| %&gt;\n  &lt;% audit[:changes].each do |attribute, value| %&gt;\n    &lt;tr&gt;\n      &lt;%= value %&gt;\n      &lt;%= audit[:changed_at].strftime(\"%m/%d/%Y\") %&gt;\n    &lt;/tr&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>But, if you don't have a chance and you are using Rails > 3.0.0 consider the following approach:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&lt;% @contract.contract_information.history_from_audits_for([:contract_title, :assigned_to, :deadline]).each do |audit| %&gt;\n  &lt;% audit.except(:changed_at).each do |attribute, value| %&gt;\n    &lt;tr&gt;\n      &lt;%= value %&gt;\n      &lt;%= audit[:changed_at].strftime(\"%m/%d/%Y\") %&gt;\n    &lt;/tr&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>using <a href=\"https://apidock.com/rails/Hash/except\" rel=\"nofollow noreferrer\"><code>Hash#except</code></a>.</p>\n\n<p>Retrieve User from Audit</p>\n\n<pre><code>&lt;%= @contract.contract_information.audits.last.user.username %&gt;\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 12132223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d771bc90c127ff051746fe96cb03607f?s=128&d=identicon&r=PG&f=1", "display_name": "dw4050", "link": "https://stackoverflow.com/users/12132223/dw4050"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574738515, "creation_date": 1574631909, "last_edit_date": 1574701565, "question_id": 59022740, "link": "https://stackoverflow.com/questions/59022740/how-to-iterate-over-multiple-hash-values-with-espinita-in-rails", "title": "How to iterate over multiple hash values with Espinita in Rails", "body": "<p>I am using <a href=\"https://github.com/continuum/espinita\" rel=\"nofollow noreferrer\">Espinita</a> to keep track of changes to my model and have multiple attributes that I would like to display in the view.</p>\n\n<p>I haven't figured out how to iterate over each value without using an <code>||</code> in the iterator. I want to get the attribute name, the changed value and the date. </p>\n\n<p>This is show.html:</p>\n\n<pre><code>&lt;% @contract.contract_information.history_from_audits_for([:contract_title, :assigned_to, :action_requested..:deadline]).each do |changes| %&gt;\n\n&lt;tr&gt;\n  &lt;%= changes[:contract_title] || changes[:assigned_to] || changes[:deadline] %&gt;\n  &lt;%= changes[:changed_at].strftime(\"%m/%d/%Y\") %&gt;\n&lt;/tr&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>How do I iterate over each audit without referencing the attribute name?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>After making the recommended changes. I now receive the attributes/values in array form. Is there a way to beautify the results in the view?</p>\n\n<p>Output</p>\n\n<pre><code>11/20/2019  [:contract_stage, \"\"] [:action_requested, \"\"] [:reason_for_contract_request, \"\"] [:existing_or_returning, \"\"] [:background_check_status, \"\"] [:priority, \"\"] [:deadline_date, Wed, 20 Nov 2019] [:commencement_date, Wed, 20 Nov 2019]  davie200\n</code></pre>\n\n<p>View</p>\n\n<pre><code> &lt;% @contract.contract_information.history_from_audits_for([:contract_stage, :action_requested, :reason_for_contract_request, :deadline_date, :commencement_date, :existing_or_returning, :background_check_status, :priority]).each do |audit| %&gt;\n          &lt;% audit.except(:changed_at).each do |attribute, value| %&gt;\n            &lt;tr&gt;\n             &lt;td&gt;&lt;%= audit[:changed_at].strftime(\"%m/%d/%Y\") %&gt;&lt;/td&gt;\n              &lt;td&gt;\n                &lt;% value.each do |val| %&gt;\n                  &lt;%= val %&gt;\n                &lt;% end %&gt;\n              &lt;/td&gt;\n              &lt;td&gt;&lt;%= @contract.contract_information.audits.last.user.username %&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n          &lt;% end %&gt;\n        &lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1574630851, "post_id": 59022384, "comment_id": 104290253, "body": "Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. See: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">How to create a Minimal, Reproducible Example</a>. Your code does nothing currently. Provide something that actually demonstrates the problem."}, {"owner": {"reputation": 731, "user_id": 3813229, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3d1734bfe19a7636567a4958ec87ddf2?s=128&d=identicon&r=PG&f=1", "display_name": "queroga_vqz", "link": "https://stackoverflow.com/users/3813229/queroga-vqz"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1574631310, "post_id": 59022384, "comment_id": 104290374, "body": "@theTinMan, any tips on how should I improve it? when I try to map the results into a list I get <code>no implicit conversion of Symbol into Integer</code>, as i typed in the question"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1574634980, "post_id": 59022384, "comment_id": 104291268, "body": "Provide the minimal code that incorporates the required <code>require</code> statements, loads the data into a string (a here-to document is useful for that) and then show how you try to process it. The data is basically <a href=\"https://ruby-doc.org/stdlib-2.6.5/libdoc/yaml/rdoc/YAML.html\" rel=\"nofollow noreferrer\">YAML</a> so that documentation explains how to load from a string. See <a href=\"https://stackoverflow.com/a/11726198/128421\">stackoverflow.com/a/11726198/128421</a> also. Try that many times and if you still can&#39;t figure it out ask a specific question about it."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1574636468, "post_id": 59022384, "comment_id": 104291568, "body": "As hints, <code>weekly_budget</code> isn&#39;t a symbol, and you have to navigate through a nested array in each hash value. And for fun there are <a href=\"https://www.schneems.com/2014/12/15/hashie-considered-harmful.html\" rel=\"nofollow noreferrer\">schneems.com/2014/12/15/hashie-considered-harmful.html</a> and <a href=\"https://code.dblock.org/2017/02/24/the-demonic-possession-of-hashie-mash.html\" rel=\"nofollow noreferrer\">code.dblock.org/2017/02/24/&hellip;</a>"}, {"owner": {"reputation": 731, "user_id": 3813229, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3d1734bfe19a7636567a4958ec87ddf2?s=128&d=identicon&r=PG&f=1", "display_name": "queroga_vqz", "link": "https://stackoverflow.com/users/3813229/queroga-vqz"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1574636658, "post_id": 59022384, "comment_id": 104291607, "body": "@theTinMan oh my god man, the second article title made me laugh so hard. been struggling with this for about two days, on a legacy system. thanks for the links"}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1574654790, "post_id": 59023971, "comment_id": 104294930, "body": "It&#39;s good that you got it working, however this code doesn&#39;t match the variable in your question, and it doesn&#39;t contribute to a working solution for anyone else searching to solve the same problem."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1574717017, "post_id": 59023971, "comment_id": 104323146, "body": "<a href=\"https://ruby-doc.org/core-2.6.5/Enumerable.html#method-i-flat_map\" rel=\"nofollow noreferrer\"><code>flat_map</code></a> could be useful. Again, please read the very first and third comments. The code you supply should be runnable, without having to add additional code. On SO we ask and answer questions to help others, not just to satisfy your need. Part of that is providing code that works to demonstrate the problem without anyone having to add additional code to make it work. That is detailed in <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>."}], "tags": [], "owner": {"reputation": 731, "user_id": 3813229, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3d1734bfe19a7636567a4958ec87ddf2?s=128&d=identicon&r=PG&f=1", "display_name": "queroga_vqz", "link": "https://stackoverflow.com/users/3813229/queroga-vqz"}, "is_accepted": true, "score": -1, "last_activity_date": 1574716483, "last_edit_date": 1574716483, "creation_date": 1574643604, "answer_id": 59023971, "question_id": 59022384, "link": "https://stackoverflow.com/questions/59022384/how-to-retrieve-values-from-hashhashiemash/59023971#59023971", "title": "How to retrieve values from hash:Hashie::Mash", "body": "<p>For anyone that stumbles across this hashie hell, this is what I did to solve my problem.</p>\n\n<p>Transform it into an array:</p>\n\n<pre><code>by_uniq_client_id = clients_budget_items.values.map{|y| y.uniq{|t| t.client_id }} \n\nweekly_budgets = by_uniq_client_id.flatten.map{|x| x.weekly_budget}\n</code></pre>\n"}], "owner": {"reputation": 731, "user_id": 3813229, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3d1734bfe19a7636567a4958ec87ddf2?s=128&d=identicon&r=PG&f=1", "display_name": "queroga_vqz", "link": "https://stackoverflow.com/users/3813229/queroga-vqz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 59023971, "answer_count": 1, "score": 0, "last_activity_date": 1574716483, "creation_date": 1574629381, "last_edit_date": 1574631608, "question_id": 59022384, "link": "https://stackoverflow.com/questions/59022384/how-to-retrieve-values-from-hashhashiemash", "title": "How to retrieve values from hash:Hashie::Mash", "body": "<p>I'm trying to retrieve the weekly budget sum from this Hashie, without success.</p>\n\n<pre><code>#sample hashie\n#client_budget_items\n\n849:\n- !ruby/hash:Hashie::Mash\n  id: 511144069\n  weekly_budget: 5\n  client_id: 55\n850:\n- !ruby/hash:Hashie::Mash\n  id: 511144064\n  weekly_budget: 30\n  client_id: 55\n851:\n- !ruby/hash:Hashie::Mash\n  id: 511144066\n  weekly_budget: 10\n  client_id: 65\n852:\n- !ruby/hash:Hashie::Mash\n  id: 511144070\n  client_id: 65\n  weekly_budget: 20\n</code></pre>\n\n<p>I tried:</p>\n\n<pre><code>weekly_budgets = client_budget_items.map{|y| y[:weekly_budget]}.compact\n</code></pre>\n\n<p>to get all the values in an array, then sum it up, but I keep getting:</p>\n\n<pre><code>no implicit conversion of Symbol into Integer\n</code></pre>\n\n<p>How do I traverse a Hashie::Mash?</p>\n"}, {"tags": ["ruby", "xeroizer"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1574631054, "post_id": 59022281, "comment_id": 104290310, "body": "Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. See: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">How to create a Minimal, Reproducible Example</a>. Your code example doesn&#39;t run. Please provide a version that actually will run, don&#39;t make us write a harness. Help us help you."}, {"owner": {"reputation": 3014, "user_id": 987074, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/rWIWG.jpg?s=128&g=1", "display_name": "bdx", "link": "https://stackoverflow.com/users/987074/bdx"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1574637548, "post_id": 59022281, "comment_id": 104291779, "body": "I&#39;ve updated the code snippet with the gem being required and the setup of the API code, however you still won&#39;t be able to run it as it requires being signed up to the Xero API, and to have a Xero account. This is not a case where I&#39;m asking why it isn&#39;t working; I know why it isn&#39;t working, I don&#39;t know how to resolve it in the bounds of the Xeroizer gem. I want to find a way to prevent the Xeroizer gem from having to revalidate all the records it already downloaded, I&#39;m just not sure how to do that without causing unforeseen side effects."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1574656066, "post_id": 59022281, "comment_id": 104295201, "body": "Add that information to the question, incorporating it where you would have put it if it&#39;d been there initially. Don&#39;t use &quot;edited&quot; or &quot;updated&quot; tags as we can see what&#39;s changed if necessary. Trying to debug code that we can&#39;t run makes it very difficult to help you and could possibly be considered off-topic."}], "answers": [{"tags": [], "owner": {"reputation": 3014, "user_id": 987074, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/rWIWG.jpg?s=128&g=1", "display_name": "bdx", "link": "https://stackoverflow.com/users/987074/bdx"}, "is_accepted": true, "score": 0, "last_activity_date": 1574723047, "creation_date": 1574723047, "answer_id": 59041384, "question_id": 59022281, "link": "https://stackoverflow.com/questions/59022281/xeroizer-ratelimitexceeded-when-using-batch-save/59041384#59041384", "title": "Xeroizer RateLimitExceeded when using batch_save", "body": "<p>I've come to a solution for this, new working code snippet below for reference.</p>\n\n<p>This may be a bit hacky as it's setting the <code>complete_record_downloaded</code> flag on the object which doesn't quite match the state of the object so there could be side effects for other methods I'm not aware of, but for my purposes this appears to work as intended.</p>\n\n<p>The <code>find_in_batches</code> method retrieves the line items along with the other necessary Invoice attributes for updating them successfully so that solves the issue I was having.</p>\n\n<p>After reading the Xero API documentation again I found that sending an update to an Invoice requires listing at least all the Line Item IDs otherwise they'll be removed during the update, which explains why this step was necessary.</p>\n\n<pre><code>issue_date = Date.new(2019,11,22)\n# Retrieving this broad selection of invoices here as it's used later in this worker for other purposes\nxero_all_invoices = []\nxeroizer.Invoice.find_in_batches(where: \"AmountDue&gt;0\") do |batch|\n  batch.each do |invoice|\n    invoice.complete_record_downloaded = true\n    xero_all_invoices &lt;&lt; invoice\n  end\nend\n\nxero_invoices = xero_all_invoices.select{|i| i.date == issue_date &amp;&amp; i.status == 'DRAFT'}\nxeroizer.Invoice.batch_save do\n  xero_invoices.each{|i| i.status = 'AUTHORISED' }\nend\n# Save successful\n</code></pre>\n"}], "owner": {"reputation": 3014, "user_id": 987074, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/rWIWG.jpg?s=128&g=1", "display_name": "bdx", "link": "https://stackoverflow.com/users/987074/bdx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 59041384, "answer_count": 1, "score": 0, "last_activity_date": 1574723047, "creation_date": 1574628721, "last_edit_date": 1574637436, "question_id": 59022281, "link": "https://stackoverflow.com/questions/59022281/xeroizer-ratelimitexceeded-when-using-batch-save", "title": "Xeroizer RateLimitExceeded when using batch_save", "body": "<p>I'm using the Xero API to retrieve all Invoices in this month, then retrieving all CreditNotes, then I plan to allocate credits as appropriate.</p>\n\n<p>Before doing that, I need to authorise all my Invoices and CreditNotes. When I get to the point of saving the updates, I'm hitting the <code>Xeroizer::OAuth::RateLimitExceeded</code> exception, being thrown by the validation step which seems to be individually retrieving each record via <strong>#download_complete_record!</strong> at <strong>lib/xeroizer/record/record_association_helper.rb:131</strong>.</p>\n\n<p>I've tried manually setting the complete_record_downloaded flag on all the objects before saving them but then I'm getting validation errors saying the invoices have no line items, which is expected.</p>\n\n<p>This is what I'm trying to do, is there a different way I should be approaching this so it doesn't try to revalidate all the records before sending the updates?</p>\n\n<pre><code>require 'xeroizer'\nkey = Rails.application.secrets.xero[:key]\nsecret = Rails.application.secrets.xero[:secret]\ncert = Rails.application.secrets.xero[:cert]\nxeroizer = Xeroizer::PrivateApplication.new(key, secret, cert)\n\nissue_date = Date.new(2019,11,22)\n# Retrieving this broad selection of invoices here as it's used later in this worker for other purposes\nxero_all_invoices = xeroizer.Invoice.all(where: \"AmountDue&gt;0\")\n\nxero_invoices = xero_all_invoices.select{|i| i.date == issue_date &amp;&amp; i.status == 'DRAFT'}\nxeroizer.Invoice.batch_save do\n  xero_invoices.each{|i| i.status = 'AUTHORISED' }\nend\n\n# At this point, the Xeroizer::OAuth::RateLimitExceeded exception is thrown.\n</code></pre>\n\n<p>The relevant part of the backtrace from the exception is as follows:</p>\n\n<pre><code>.../xeroizer/http.rb:175:in `handle_oauth_error!'\n.../xeroizer/http.rb:124:in `http_request'\n.../xeroizer/http.rb:31:in `http_get'\n.../xeroizer/record/base_model.rb:152:in `find'\n.../xeroizer/record/base.rb:100:in `download_complete_record!'\n.../xeroizer/record/record_association_helper.rb:131:in `block in define_association_attribute'\n.../xeroizer/record/base.rb:54:in `[]'\n.../xeroizer/record/validators/associated_validator.rb:12:in `valid?'\n.../xeroizer/record/validators/validator.rb:15:in `validate'\n.../xeroizer/record/validation_helper.rb:59:in `block in valid?'\n.../xeroizer/record/validation_helper.rb:58:in `each'\n.../xeroizer/record/validation_helper.rb:58:in `valid?'\n.../xeroizer/record/base_model.rb:161:in `each'\n.../xeroizer/record/base_model.rb:161:in `all?'\n.../xeroizer/record/base_model.rb:161:in `save_records'\n</code></pre>\n\n<p>For reference, I've asked the <a href=\"https://github.com/waynerobinson/xeroizer/issues/497\" rel=\"nofollow noreferrer\">same question</a> on the Xeroizer gem issues page but had no response so asking here now.</p>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 879, "user_id": 2774883, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/eb01ee8489cb3b7d0d54a753596430fe?s=128&d=identicon&r=PG", "display_name": "springloaded", "link": "https://stackoverflow.com/users/2774883/springloaded"}, "edited": false, "score": 0, "creation_date": 1574669384, "post_id": 59022443, "comment_id": 104299250, "body": "Thank you. That particular gem is a command line tool that is rather limited in scope. Would a logger still make more sense in that case? I took inspiration from other tools and they usually output their messages to stderr before closing. I wanted to avoid leaving the user confused with a ruby stack trace and error."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 879, "user_id": 2774883, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/eb01ee8489cb3b7d0d54a753596430fe?s=128&d=identicon&r=PG", "display_name": "springloaded", "link": "https://stackoverflow.com/users/2774883/springloaded"}, "edited": false, "score": 1, "creation_date": 1574700408, "post_id": 59022443, "comment_id": 104315904, "body": "@springloaded Logger comes with Ruby, no reason not to use it. If nothing else Logger lets you easily provide verbosity levels."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 0, "last_activity_date": 1574631240, "last_edit_date": 1574631240, "creation_date": 1574629908, "answer_id": 59022443, "question_id": 59022237, "link": "https://stackoverflow.com/questions/59022237/how-to-test-that-a-piece-of-code-that-outputs-to-stderr-while-it-raises-an-excep/59022443#59022443", "title": "How to test that a piece of code that outputs to stderr while it raises an exception with RSpec?", "body": "<p><a href=\"https://relishapp.com/rspec/rspec-expectations/docs/built-in-matchers/output-matcher#output-to-stderr-matcher\" rel=\"nofollow noreferrer\">RSpec cannot catch <code>STDERR</code> nor <code>STDOUT</code></a>.</p>\n\n<blockquote>\n  <p>Note: to_stdout and to_stderr work by temporarily replacing $stdout or $stderr, so they're not able to intercept stream output that explicitly uses STDOUT/STDERR or that uses a reference to $stdout/$stderr that was stored before the matcher is used.</p>\n</blockquote>\n\n<p><code>STDERR</code> is a constant and cannot (really <em>should</em> not) be changed. Simplest solution is to use <code>$stderr</code> instead. Better yet, use <a href=\"https://ruby-doc.org/core/Warning.html#method-i-warn\" rel=\"nofollow noreferrer\"><code>warn</code></a> to make your intentions plain and allow warnings to be redirected.</p>\n\n<p>Second problem is <a href=\"https://stackoverflow.com/questions/51021/what-is-the-difference-between-raising-exceptions-vs-throwing-exceptions-in-ruby#51037\"><code>throw</code> and <code>raise</code> are not equivalent</a>. <code>throw</code> is for control flow, <code>raise</code> is for exceptions. <code>throw</code> is like Ruby's <code>goto</code>. Use <code>raise</code> instead.</p>\n\n<pre><code>class MyClass\n  # You don't need an empty initialize, it is inherited from Object.\n\n  def will_raise\n    print_message_to_stderr\n    raise MyError\n  end\n\n  def print_message_to_stderr\n    warn 'Boom!'\n  end\nend\n\nclass MyError &lt; RuntimeError\nend\n\nRSpec.describe MyClass do\n  it 'outputs to stderr and raises MyError' do\n    instance = described_class.new\n\n    expect {\n      instance.will_raise\n    }.to output(\"Boom!\\n\").to_stderr\n    .and raise_error(MyError)\n  end\nend\n</code></pre>\n\n<p>Since your \"warning\" immediately precedes an exception, it's not really a warning, it's an error message. If you make it part of the Exception it will make handling errors much simpler. Do this by <a href=\"https://ruby-doc.org/core/Exception.html#method-c-new\" rel=\"nofollow noreferrer\">providing a default message</a>. If the message is complex, you can override <a href=\"https://ruby-doc.org/core/Exception.html#method-i-message\" rel=\"nofollow noreferrer\"><code>#message</code></a>.</p>\n\n<p>Now the error and message can be caught and controlled as one unit. The code and tests are much simpler.</p>\n\n<pre><code>class MyClass\n  def will_raise\n    raise MyError\n  end\nend\n\nclass MyError &lt; RuntimeError\n  def initialize(message = \"Boom!\")\n    super\n  end\nend\n\nRSpec.describe MyClass do\n  it 'raises MyError' do\n    instance = described_class.new\n\n    expect {\n      instance.will_raise\n    }.to raise_error(MyError, \"Boom!\")\n  end\nend\n</code></pre>\n\n<p>True warnings and informational messages are better done via <a href=\"https://ruby-doc.org/stdlib-2.6.5/libdoc/logger/rdoc/Logger.html\" rel=\"nofollow noreferrer\"><code>Logger</code></a>. Logged messages are easier to control and redirect.</p>\n\n<pre><code>require 'logger'\n\nclass MyClass\n  def logger\n    @logger ||= Logger.new(STDERR)\n  end\n\n  def will_raise\n    logger.warn(\"Lookout!\")\n    raise MyError\n  end\nend\n\nclass MyError &lt; RuntimeError\n  def initialize(message = \"Boom!\")\n    super\n  end\nend\n</code></pre>\n\n<p>One generally does not test log messages, they're usually turned off during testing, but if you really wanted to you can check using a <a href=\"https://relishapp.com/rspec/rspec-mocks/v/3-9/docs/basics/expecting-messages\" rel=\"nofollow noreferrer\">message expectation</a> and <a href=\"https://relishapp.com/rspec/rspec-mocks/v/3-9/docs/setting-constraints/matching-arguments\" rel=\"nofollow noreferrer\"><code>with</code> to specify its arguments</a>.</p>\n\n<pre><code>RSpec.describe MyClass do\n  it 'raises MyError and logs a warning' do\n    instance = described_class.new\n\n    expect(instance.logger).to receive(:warn)\n      .with(\"Lookout!\")\n\n    expect {\n      instance.will_raise\n    }.to raise_error(MyError, \"Boom!\")\n  end\nend\n</code></pre>\n\n<p>Generally you don't want to be trapping output if you can avoid it. You want to check method calls instead.</p>\n"}], "owner": {"reputation": 879, "user_id": 2774883, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/eb01ee8489cb3b7d0d54a753596430fe?s=128&d=identicon&r=PG", "display_name": "springloaded", "link": "https://stackoverflow.com/users/2774883/springloaded"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1574631240, "creation_date": 1574628360, "question_id": 59022237, "link": "https://stackoverflow.com/questions/59022237/how-to-test-that-a-piece-of-code-that-outputs-to-stderr-while-it-raises-an-excep", "title": "How to test that a piece of code that outputs to stderr while it raises an exception with RSpec?", "body": "<p>Consider the following methods:</p>\n\n<pre><code>  class MyClass\n    def initialize\n    end\n\n    def will_throw\n      print_message_to_stderr\n      throw MyError\n    end\n\n    def print_message_to_stderr\n      STDERR.puts 'Boom!'\n    end\n  end\n</code></pre>\n\n<p>I would like to test that <code>will_throw</code> does output a message to stderr first:</p>\n\n<pre><code>it 'outputs to stderr' do\n  instance = MyClass.new\n\n  expect { instance.will_throw }.to output('Boom!').to_stderr\nend\n</code></pre>\n\n<p>This, however, doesn't succeed because the exception is thrown and the test suite blows up.</p>\n\n<p>On the other hand, this is always green no matter what, and even when the test should fail:</p>\n\n<pre><code>it 'outputs to stderr' do\n  instance = MyClass.new\n\n  expect { instance.will_throw }.to output('Boom!').to_stderr\n  rescue MyError\n  end\nend\n</code></pre>\n\n<p>How can I test this properly (using RSpec and plain Ruby)?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "image-processing", "imagemagick", "shrine"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 12087575, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vh52b.png?s=128&g=1", "display_name": "sink66", "link": "https://stackoverflow.com/users/12087575/sink66"}, "edited": false, "score": 1, "creation_date": 1574630258, "post_id": 59022139, "comment_id": 104290090, "body": "Q 1\uff1aIt worked! Q 2 :  My application wants to fix the image size at 120x120 and will not reprocess it later. So there is no need to keep other sizes. In this use case, for example, <a href=\"https://github.com/carrierwaveuploader/carrierwave#adding-versions\" rel=\"nofollow noreferrer\">carrierwave</a> seems to be able to resize the original image itself with <code>process resize_to_fit</code>. My usage may not match Shrine ... Thank you for answering."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1574631353, "post_id": 59022139, "comment_id": 104290384, "body": "+1 for keeping the original file around. Algorithms improve as do image-encoding methods that allow us to reduce storage size or improve the quality of a rendered image, and having the original allows other new and exciting uses for them."}, {"owner": {"reputation": 622, "user_id": 3912172, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh5.googleusercontent.com/-ew7buDv25h8/AAAAAAAAAAI/AAAAAAAAad4/u7xhG9Yx9F8/photo.jpg?sz=128", "display_name": "andyrue", "link": "https://stackoverflow.com/users/3912172/andyrue"}, "edited": false, "score": 0, "creation_date": 1581460210, "post_id": 59022139, "comment_id": 106439494, "body": "I agree that keeping the original file around is best practice, but I also feel there should be a way to easily override this within Shrine. Sometimes you really don&#39;t care about the original and for space reasons, don&#39;t want to keep it."}, {"owner": {"reputation": 7938, "user_id": 988414, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/376e4eb9dc6c2e33d1330262edc4f109?s=128&d=identicon&r=PG", "display_name": "janko-m", "link": "https://stackoverflow.com/users/988414/janko-m"}, "edited": false, "score": 1, "creation_date": 1581522714, "post_id": 59022139, "comment_id": 106464591, "body": "I will keep this in mind, and possibly add this ability in the future. For the time being, <a href=\"https://discourse.shrinerb.com/t/keep-original-file-after-processing/50\" rel=\"nofollow noreferrer\">this discussion</a> has some suggestions on how to achieve this with the current API."}], "tags": [], "owner": {"reputation": 7938, "user_id": 988414, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/376e4eb9dc6c2e33d1330262edc4f109?s=128&d=identicon&r=PG", "display_name": "janko-m", "link": "https://stackoverflow.com/users/988414/janko-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1574631212, "last_edit_date": 1574631212, "creation_date": 1574627712, "answer_id": 59022139, "question_id": 59021782, "link": "https://stackoverflow.com/questions/59021782/how-to-upload-while-resizing-the-original-image-itself-in-shrine/59022139#59022139", "title": "How to upload while resizing the original image itself in Shrine", "body": "<ol>\n<li><p>You can add the following patch, which will trigger derivatives creation as part of promoting cached file to permanent storage:</p>\n\n<pre><code># put this in your initializer\nclass Shrine::Attacher\n  def promote(*)\n    create_derivatives\n    super\n  end\nend\n</code></pre></li>\n<li><p>You can just override the model method that retrieves the attached file to return the resized version. You can use the <code>included</code> plugin to do this for all models using this uploader:</p>\n\n<pre><code>class ImageUploader &lt; Shrine\n  # ...\n  plugin :included do |name|\n    define_method(name) { super(:resized) }\n  end\nend\n</code></pre></li>\n</ol>\n\n<p>As for the second question: It will still keep the original file in the storage, but just return the resized version instead by default. It's generally better to do this in a view decorator instead.</p>\n\n<p>You always want to keep the original file in the storage, because you never know when you'll need to reprocess it. It can happen that you find your current resizing logic not to be ideal for certain filetypes and sizes, in which case you'll need to regenerate the resized version for previous attachments. And you wouldn't be able to do that if you didn't have the original file anymore.</p>\n"}], "owner": {"reputation": 33, "user_id": 12087575, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vh52b.png?s=128&g=1", "display_name": "sink66", "link": "https://stackoverflow.com/users/12087575/sink66"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 725, "favorite_count": 1, "accepted_answer_id": 59022139, "answer_count": 1, "score": 3, "last_activity_date": 1574631212, "creation_date": 1574625339, "question_id": 59021782, "link": "https://stackoverflow.com/questions/59021782/how-to-upload-while-resizing-the-original-image-itself-in-shrine", "title": "How to upload while resizing the original image itself in Shrine", "body": "<p>I use Shrine in a Ruby on Rails application to create the process of resizing and uploading images to storage.</p>\n\n<p>My current code is:</p>\n\n<hr>\n\n<p><strong>image_uploader.rb</strong></p>\n\n<pre><code>require \"image_processing/mini_magick\"\n\nclass ImageUploader &lt; Shrine\n  plugin :derivatives\n\n  Attacher.derivatives_processor do |original|\n    magick = ImageProcessing::MiniMagick.source(original)\n    {\n      resized: magick.resize_to_limit!(120, 120)\n    }\n  end\n\nend\n</code></pre>\n\n<p><strong>user.rb</strong></p>\n\n<pre><code>class User &lt; ApplicationRecord\n  include ImageUploader::Attachment(:image)\n  before_save :image_resize\n\n  def image_resize\n    self.image_derivatives!\n  end\nend\n</code></pre>\n\n<hr>\n\n<p>I implemented it while reading the <a href=\"https://shrinerb.com/docs/plugins/derivatives\" rel=\"nofollow noreferrer\">official documentation</a>, but this is not desirable in two ways.</p>\n\n<ol>\n<li>Requires trigger in model code. Can it be completed with only <code>image_uploader.rb</code>?</li>\n<li>Access to images generated with this code requires a \"resized\" prefix(e.g. <code>@user.image(:resized).url</code>), and the original image will also remain in storage. I want to process the <strong>original image itself.</strong></li>\n</ol>\n\n<p>Is there a way to upload while solving these two issues?</p>\n"}, {"tags": ["ruby", "algorithm", "search", "binary"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1574627303, "post_id": 59021523, "comment_id": 104289365, "body": "Note: <code>return nil</code> is the same as <code>return</code>."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1574634157, "post_id": 59021523, "comment_id": 104291055, "body": "It&#39;s not necessary, or desirable, for you to apologize for a lack of experience on SO. We want to see certain things in a question, and if you&#39;ve done your research and tried, tried, tried and still can&#39;t figure it and follow the guides for &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the linked pages then we&#39;ll take it from there. I think you did pretty good, minus the apologies."}], "answers": [{"comments": [{"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1574642362, "post_id": 59022038, "comment_id": 104292655, "body": "Also note that Arrays already have a <a href=\"https://www.rubydoc.info/stdlib/core/Array#bsearch-instance_method\" rel=\"nofollow noreferrer\">bsearch</a> method."}, {"owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "reply_to_user": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1574645889, "post_id": 59022038, "comment_id": 104293274, "body": "@steenslag OP did say he was trying to work through the algorithms in a book."}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1574647853, "post_id": 59022038, "comment_id": 104293649, "body": "sure! But for future readers it can be useful to know there <i>is</i> an existing method."}], "tags": [], "owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "is_accepted": true, "score": 1, "last_activity_date": 1574633974, "last_edit_date": 1574633974, "creation_date": 1574627083, "answer_id": 59022038, "question_id": 59021523, "link": "https://stackoverflow.com/questions/59021523/how-to-control-nil-in-this-binary-search-algorithm/59022038#59022038", "title": "How to control nil in this binary_search algorithm", "body": "<p>You're close. </p>\n\n<p>First, the gyration to compute the middle index isn't needed. Just say</p>\n\n<pre><code>mid = list.length / 2\n</code></pre>\n\n<p>Integer division in Ruby truncates, so the result is always the integer you want. </p>\n\n<p>The second recursive call is a problem. It can return nil. So you need to save the return value and only do the index arithmetic if it's not nil.</p>\n\n<p>Finally note that since Ruby naturally returns the last value it computes, all your <code>return</code>s can be omitted. This makes the function read as an expression, which is more Ruby-like.</p>\n\n<pre><code>def recursive_binary_search(list, item)\n  if list.length == 0\n    nil\n  elsif list.length == 1\n    if list.first == item\n      0\n    else\n      nil\n    end\n  else\n    mid = list.length / 2\n    guess = list[mid]\n    if guess == item\n      mid\n    elsif guess &lt; item\n      result = recursive_binary_search(list[mid+1..-1], item)\n      if result.nil?\n        nil\n      else\n        1 + result + mid\n      end\n    else\n      recursive_binary_search(list[0..mid-1], item)\n    end\n  end\nend\n</code></pre>\n\n<p>The only case where <code>return</code> is needed is to exit a function immediately when more computation is possible.</p>\n\n<p>Finally note that though this is great for learning, in a real implementation you'd avoid tail recursion in Ruby because, unlike some other languages, Ruby is not guaranteed to optimize it as a loop. Since binary search can be very naturally implemented without recursive calls, you'd want to do that instead.</p>\n"}], "owner": {"reputation": 13, "user_id": 7809946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2778e304a6a550f1bfe75b6428448ebb?s=128&d=identicon&r=PG&f=1", "display_name": "f1729", "link": "https://stackoverflow.com/users/7809946/f1729"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 59022038, "answer_count": 1, "score": 0, "last_activity_date": 1574633974, "creation_date": 1574623553, "last_edit_date": 1574631478, "question_id": 59021523, "link": "https://stackoverflow.com/questions/59021523/how-to-control-nil-in-this-binary-search-algorithm", "title": "How to control nil in this binary_search algorithm", "body": "<p>I'm reading the Grokking Algorithms book, and I'm implementing the binary_search function but recursively, so, my algorithm works if the item is in the list. </p>\n\n<p>Any suggestions on how to control when I have a nil?</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def recursive_binary_search(list, item)\n  if list.length == 0\n    return nil\n  elsif list.length == 1\n    print list\n    if list.first == item\n      return 0\n    else\n      return nil\n    end\n  else\n    low = 0\n    high = list.length - 1\n    mid = (low + Float(high - low)/2).round()\n    guess = list[mid]\n\n    if guess == item\n      return mid\n    elsif guess &lt; item\n      return mid + 1 + recursive_binary_search(list[mid+1..-1], item)\n    else\n      return recursive_binary_search(list[0..mid-1], item)\n    end\n  end\nend\n\nmy_list = [1, 3, 5, 7, 9]\n\nputs recursive_binary_search(my_list, 100) # =&gt; nil\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "edited": false, "score": 0, "creation_date": 1574623668, "post_id": 59021467, "comment_id": 104288445, "body": "Can you paste the devise generated migration file?"}], "answers": [{"comments": [{"owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "reply_to_user": {"reputation": 1, "user_id": 12425568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cf807e9b1571d18950833e8cfe50094?s=128&d=identicon&r=PG&f=1", "display_name": "user12425568", "link": "https://stackoverflow.com/users/12425568/user12425568"}, "edited": false, "score": 0, "creation_date": 1574624271, "post_id": 59021562, "comment_id": 104288614, "body": "If your app isn&#39;t on  production yet, you can drop the db, remove the earlier migration for <code>users</code> table and then rerun  <code>rails db:migrate</code>"}], "tags": [], "owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1574623834, "creation_date": 1574623834, "answer_id": 59021562, "question_id": 59021467, "link": "https://stackoverflow.com/questions/59021467/raise-activerecordpendingmigrationerror-if-activerecordmigrator-needs-migrat/59021562#59021562", "title": "raise ActiveRecord::PendingMigrationError if ActiveRecord::Migrator.needs_migration?(connection)", "body": "<p>Since the <code>email</code> is already present in the users table, you need to remove the following line from devise generated migration file</p>\n\n<pre><code>t.string :email\n</code></pre>\n\n<p>More info here</p>\n\n<p><a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Change-an-already-existing-table-to-add-devise-required-columns\" rel=\"nofollow noreferrer\">https://github.com/plataformatec/devise/wiki/How-To:-Change-an-already-existing-table-to-add-devise-required-columns</a></p>\n"}], "owner": {"reputation": 1, "user_id": 12425568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cf807e9b1571d18950833e8cfe50094?s=128&d=identicon&r=PG&f=1", "display_name": "user12425568", "link": "https://stackoverflow.com/users/12425568/user12425568"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1574623834, "creation_date": 1574623232, "question_id": 59021467, "link": "https://stackoverflow.com/questions/59021467/raise-activerecordpendingmigrationerror-if-activerecordmigrator-needs-migrat", "title": "raise ActiveRecord::PendingMigrationError if ActiveRecord::Migrator.needs_migration?(connection)", "body": "<p>I've been trying to fix my error but it's not working for me. My application it was working perfectly until I generate devise user. No one of the solutions on stackoverflow worked it. Thanks.</p>\n\n<p>SQLite3::SQLException: duplicate column name: email: ALTER TABLE \"users\" ADD \"email\" varchar DEFAULT '' NOT NULL</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cookies"], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1574620763, "creation_date": 1574620763, "answer_id": 59021112, "question_id": 59020974, "link": "https://stackoverflow.com/questions/59020974/cannot-convert-data-from-cookies/59021112#59021112", "title": "Cannot convert data from cookies", "body": "<p>Just change your method to</p>\n\n<pre><code>def actions_counter\n  if cookies[:actions]\n    cookies[:actions] = cookies[:actions].to_i + 1\n  else\n    cookies[:actions] = 0\n  end\nend\n</code></pre>\n\n<p>The issue is that Ruby understands <code>cookies[:\"actions\"].to_i += 1</code> as</p>\n\n<pre><code>cookies[:\"actions\"].to_i = cookies[:\"actions\"].to_i + 1\n        # and this ^^^^^^^^ doesn't make sense\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 12274081, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0Sb30wxuTys/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc-hHDKdk2bthA8tdaQ1vGtEA5RrQ/photo.jpg?sz=128", "display_name": "SsPay", "link": "https://stackoverflow.com/users/12274081/sspay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19, "favorite_count": 0, "accepted_answer_id": 59021112, "answer_count": 1, "score": 0, "last_activity_date": 1574620763, "creation_date": 1574619917, "question_id": 59020974, "link": "https://stackoverflow.com/questions/59020974/cannot-convert-data-from-cookies", "title": "Cannot convert data from cookies", "body": "<p>I want to make a method that will count the number of user actions on the site. \nI have the code:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>    def actions_counter\n      if cookies[:\"actions\"] != nil\n        cookies[:\"actions\"].to_i += 1\n      else\n        cookies[:\"actions\"] = 0\n      end\n    end\n</code></pre>\n\n<p>But for some reason this does not work.</p>\n\n<pre><code>NoMethodError in PostsController#show\nundefined method `to_i=' for \"1\":String Did you mean? to_i to_r to_f to_s to_d to_c\n</code></pre>\n"}, {"tags": ["sql", "ruby", "string", "where-clause", "sql-like"], "comments": [{"owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "edited": false, "score": 4, "creation_date": 1574605690, "post_id": 59018698, "comment_id": 104283349, "body": "Which RDBMS are you using: oracle, sql-server, mysql... Please add the relevant tag to your question."}], "answers": [{"tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": false, "score": 4, "last_activity_date": 1574605732, "creation_date": 1574605732, "answer_id": 59018725, "question_id": 59018698, "link": "https://stackoverflow.com/questions/59018698/how-can-i-make-this-query-not-casesensitive/59018725#59018725", "title": "how can I make this query not CaSeSeNsITIVe?", "body": "<p>A typical solution is to turn both values to lower case before comparing them:</p>\n\n<pre><code>@courses = Course.where('LOWER(name) LIKE LOWER(?)', \"%#{params[:name]}%\")\n</code></pre>\n\n<p>Depending on your RDMBS, <code>LOWER()</code> might not be available.</p>\n\n<p>Also depending on your RDBMS, there could be more efficient options available (since using a string function basically defeats an existing index). For example in MySQL, you set a case-insensitive collation on the concerned column, which will make all string comparisons case-insensitive by default, while allowing the use of an index.</p>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 2, "last_activity_date": 1574612038, "creation_date": 1574612038, "answer_id": 59019707, "question_id": 59018698, "link": "https://stackoverflow.com/questions/59018698/how-can-i-make-this-query-not-casesensitive/59019707#59019707", "title": "how can I make this query not CaSeSeNsITIVe?", "body": "<p>When you use a Postgres database then you might want to consider <a href=\"https://www.postgresql.org/docs/current/functions-matching.html#FUNCTIONS-LIKE\" rel=\"nofollow noreferrer\"><code>ILIKE</code></a> which is the case insensitive version of <code>LIKE</code>:</p>\n\n<pre><code>@courses = Course.where('name ILIKE ?', \"%#{params[:name]}%\")\n</code></pre>\n"}], "owner": {"reputation": 2050, "user_id": 5695646, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-nEigl1xsDV4/AAAAAAAAAAI/AAAAAAAAANE/WGykpWYiogM/photo.jpg?sz=128", "display_name": "Yshmarov", "link": "https://stackoverflow.com/users/5695646/yshmarov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 59019707, "answer_count": 2, "score": 0, "last_activity_date": 1602297430, "creation_date": 1574605572, "last_edit_date": 1602297430, "question_id": 59018698, "link": "https://stackoverflow.com/questions/59018698/how-can-i-make-this-query-not-casesensitive", "title": "how can I make this query not CaSeSeNsITIVe?", "body": "<p>how can I make this query not Case sensitive?</p>\n\n<pre><code>  @courses = Course.where('name LIKE ?', \"%#{params[:name]}%\")\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1574558903, "post_id": 59013766, "comment_id": 104275210, "body": "When you say &quot;it didn&#39;t work&quot;, what happened exactly? Add that information into the question as if it&#39;d been there all along."}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1574581725, "post_id": 59013766, "comment_id": 104278093, "body": "Did you try setting an environment variable <code>HTTP_PROXY</code>, that has worked for me."}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 11339227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44ce876a444914f96aec19ee346f7dd5?s=128&d=identicon&r=PG&f=1", "display_name": "PY_NEWBIE", "link": "https://stackoverflow.com/users/11339227/py-newbie"}, "edited": false, "score": 0, "creation_date": 1574667870, "post_id": 59016971, "comment_id": 104298668, "body": "I don&#39;t know what to do with this file. Could you help me"}, {"owner": {"reputation": 314, "user_id": 9948990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0153057b15f61830fd2df6e2fad26562?s=128&d=identicon&r=PG&f=1", "display_name": "moe zarrinfam", "link": "https://stackoverflow.com/users/9948990/moe-zarrinfam"}, "reply_to_user": {"reputation": 77, "user_id": 11339227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44ce876a444914f96aec19ee346f7dd5?s=128&d=identicon&r=PG&f=1", "display_name": "PY_NEWBIE", "link": "https://stackoverflow.com/users/11339227/py-newbie"}, "edited": false, "score": 0, "creation_date": 1574669937, "post_id": 59016971, "comment_id": 104299461, "body": "at the end of the file all type of samples are existing in comments. uncomment and fill them with your values."}], "tags": [], "owner": {"reputation": 314, "user_id": 9948990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0153057b15f61830fd2df6e2fad26562?s=128&d=identicon&r=PG&f=1", "display_name": "moe zarrinfam", "link": "https://stackoverflow.com/users/9948990/moe-zarrinfam"}, "is_accepted": false, "score": 0, "last_activity_date": 1574593394, "creation_date": 1574593394, "answer_id": 59016971, "question_id": 59013766, "link": "https://stackoverflow.com/questions/59013766/how-to-install-rails-through-a-proxy/59016971#59016971", "title": "How to install Rails through a proxy", "body": "<p>better to use proxychains to proxy all requests inside your command:</p>\n\n<pre><code>proxychains gem install rails\n</code></pre>\n\n<p><strong>after install you have to create configuration file on <code>~/.proxychains/proxychains.conf</code></strong></p>\n\n<p><a href=\"https://github.com/haad/proxychains\" rel=\"nofollow noreferrer\">proxychains github</a></p>\n"}], "owner": {"reputation": 77, "user_id": 11339227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44ce876a444914f96aec19ee346f7dd5?s=128&d=identicon&r=PG&f=1", "display_name": "PY_NEWBIE", "link": "https://stackoverflow.com/users/11339227/py-newbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1574667697, "creation_date": 1574557233, "last_edit_date": 1574667697, "question_id": 59013766, "link": "https://stackoverflow.com/questions/59013766/how-to-install-rails-through-a-proxy", "title": "How to install Rails through a proxy", "body": "<p>I was trying to install Ruby on Rails onto my PC, when I got this error:</p>\n\n<pre><code>gem install rails - ERROR: While executing gem (Net::HTTPServerException) 407 \u201cProxy Authentication Required\u201d [on hold]\n</code></pre>\n\n<p>I tried:</p>\n\n<pre><code>gem install --http-proxy http://{domain}%5C{username}:{password}@{proxy.address}:{port}/ rails\n</code></pre>\n\n<p>got the error in the title</p>\n\n<p>I also tried:</p>\n\n<pre><code>gem install -p http://pynewbie:mypassword@the-proxy-host.com:8888 rails \n</code></pre>\n\n<p>and got the error </p>\n\n<pre><code>ERROR: Could not find a valid gem 'rails' (&gt;= 0), here is why: Unable to download data from https://rubygems.org/ - no such name(https://rubygems.org/specs.4.8.gz) \n</code></pre>\n"}, {"tags": ["ruby", "class", "hash", "instance-variables"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1574558980, "post_id": 59013559, "comment_id": 104275220, "body": "Please properly format your question for readability. It helps us help you. See &quot;<a href=\"https://stackoverflow.com/help/formatting\">How do I format my posts...</a>&quot;. Also see &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">mcve</a>&quot; as it looks like you can reduce your example code. Put in the very minimum necessary to demonstrate the problem."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1574560409, "post_id": 59013559, "comment_id": 104275409, "body": "For trivial cases consider using <a href=\"https://ruby-doc.org/core-2.6.5/Module.html#method-i-attr_reader\" rel=\"nofollow noreferrer\"><code>attr_reader</code></a>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1574600734, "post_id": 59013559, "comment_id": 104282066, "body": "<i>&quot;values that are instance variables from the Rooms class&quot;</i> \u2013 just &quot;instances&quot;, not &quot;instance variables&quot;. BTW, it might be easier to think in terms of message passing. <code>hotel.check_in(...)</code> send the message <code>check_in</code> to the <code>hotel</code> object. <code>rooms</code> sends the message <code>rooms</code> to <code>self</code> (which returns a hash), <code>...[room_name]</code> sends the message <code>[]</code> to that hash etc."}], "answers": [{"tags": [], "owner": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "is_accepted": false, "score": 0, "last_activity_date": 1574571423, "creation_date": 1574571423, "answer_id": 59014803, "question_id": 59013559, "link": "https://stackoverflow.com/questions/59013559/ruby-access-instance-method-from-another-class/59014803#59014803", "title": "Ruby access instance method from another class", "body": "<blockquote>\n  <p>Is it because I have defined @rooms[room_name] = Room.new(capacity) in my initialize method, which allows access to Rooms class? </p>\n</blockquote>\n\n<p>Exactly, you understand :)</p>\n\n<p>If we add some logging, it's easy to see ..</p>\n\n<pre><code>    def check_in(person, room_name)\n        puts rooms[room_name].class # =&gt; Room\n        open_room = rooms[room_name].add_occupant(person)\n    end\n</code></pre>\n\n<p>As we see with <code>puts</code>, <code>rooms[room_name]</code> returns an instance of <code>Room</code>, therefore we are allowed to call the <code>add_occupant</code> method. </p>\n\n<p>Think of the <code>rooms</code> hash as the hotel registration book.</p>\n"}], "owner": {"reputation": 23, "user_id": 12204583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2a336e177a1ea63e17725f536514d93?s=128&d=identicon&r=PG&f=1", "display_name": "fr_awd", "link": "https://stackoverflow.com/users/12204583/fr-awd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574571423, "creation_date": 1574554786, "last_edit_date": 1574568788, "question_id": 59013559, "link": "https://stackoverflow.com/questions/59013559/ruby-access-instance-method-from-another-class", "title": "Ruby access instance method from another class", "body": "<pre><code>class Room #room.rb\n    def initialize(capacity)\n        @capacity = capacity\n        @occupants = []\n    end\n\n    def capacity\n        @capacity\n    end\n\n    def occupants\n        @occupants\n    end\n\n    def full?\n        return false if occupants.length &lt; capacity\n        return true if occupants.length == capacity      \n    end\n\n    def add_occupant(name)\n        if !self.full?\n            occupants &lt;&lt; name\n            return true\n        end\n        return false\n    end\n\nend\n</code></pre>\n\n<pre><code>#hotel.rb\nrequire_relative \"room\"\n\nclass Hotel\n    def initialize(name, hash)\n        @rooms = {}\n        hash.each do |room_name,capacity|\n            @rooms[room_name] = Room.new(capacity)\n        end\n    end\n\n    def rooms\n        @rooms\n    end\n\n    def check_in(person, room_name)\n        open_room = rooms[room_name].add_occupant(person)\n    end\n\nend\n\nhotel = Hotel.new(\"some hotel\", \"Basement\"=&gt;4, \"Attic\"=&gt;1)\nrooms = hotel.instance_variable_get(:@rooms)\nhotel.check_in(\"Rick\", \"Attic\")\n\n</code></pre>\n\n<p>In the <code>def check_in</code> instance method, the spec requires call Room#add_occupant on the correct Room instance.</p>\n\n<p>My first thought was to define Room.new for add_occupants, so I used <code>rooms[room_name] = Rooms.new.add_occupants(person)</code>. However this would not work due to the arguments (given 0 expected 1)</p>\n\n<p>The solution that met the spec was <code>rooms[room_name].add_occupant(person)</code></p>\n\n<p>How does this allow access to the instance method <code>def add_occupant</code> in Room class from the <code>def check_in</code> instance method in the Hotel Class?</p>\n\n<p>I have come to realize that rooms is a hash with values that are instance variables from the Rooms class. Is it because I have defined <code>@rooms[room_name] = Room.new(capacity)</code> in my initialize method, which allows access to Rooms class? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cloudinary", "rails-activestorage"], "comments": [{"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1574614348, "post_id": 59013452, "comment_id": 104285706, "body": "what&#39;s event.rb look like?"}, {"owner": {"reputation": 53, "user_id": 11485879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c9567224c3240945fd857b2b664091?s=128&d=identicon&r=PG&f=1", "display_name": "Zekarias Semegnew", "link": "https://stackoverflow.com/users/11485879/zekarias-semegnew"}, "reply_to_user": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1574631255, "post_id": 59013452, "comment_id": 104290359, "body": "@JoshBrody    event.rb is as follow:            <code>class Event &lt; ApplicationRecord       belongs_to :user       has_one_attached :event_image       end</code>"}, {"owner": {"reputation": 586, "user_id": 11707957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34a3973f2d30dac1e736bdc53db04548?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksandar Kostadinov", "link": "https://stackoverflow.com/users/11707957/aleksandar-kostadinov"}, "edited": false, "score": 0, "creation_date": 1574940517, "post_id": 59013452, "comment_id": 104410760, "body": "Cloudinary has recently released their official ActiveStorage support in the cloudinary_gem - <a href=\"https://cloudinary.com/documentation/rails_activestorage\" rel=\"nofollow noreferrer\">cloudinary.com/documentation/rails_activestorage</a>. I would suggest using that specifically rather than any 3rd party gems for this."}, {"owner": {"reputation": 53, "user_id": 11485879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c9567224c3240945fd857b2b664091?s=128&d=identicon&r=PG&f=1", "display_name": "Zekarias Semegnew", "link": "https://stackoverflow.com/users/11485879/zekarias-semegnew"}, "reply_to_user": {"reputation": 586, "user_id": 11707957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34a3973f2d30dac1e736bdc53db04548?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksandar Kostadinov", "link": "https://stackoverflow.com/users/11707957/aleksandar-kostadinov"}, "edited": false, "score": 0, "creation_date": 1574954698, "post_id": 59013452, "comment_id": 104418364, "body": "@Aleksandar Kostadinov  I have tried it, though couldnt work for me. I switched to Carrierwave. It works fine with Carrierwave.  Thanks for your help"}], "owner": {"reputation": 53, "user_id": 11485879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c9567224c3240945fd857b2b664091?s=128&d=identicon&r=PG&f=1", "display_name": "Zekarias Semegnew", "link": "https://stackoverflow.com/users/11485879/zekarias-semegnew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 654, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574679477, "creation_date": 1574553726, "last_edit_date": 1574679477, "question_id": 59013452, "link": "https://stackoverflow.com/questions/59013452/getting-nomethoderror-undefined-method-upload-for-nilnilclass-error", "title": "Getting &quot;NoMethodError: undefined method `upload&#39; for nil:NilClass&quot; error", "body": "<p>I am developing an android application that uses Ruby on Rails in the back end. I used Rails for creating the <code>REST API</code>. I need to upload images along with other data. Basically, I have <code>\"user\"</code> and <code>\"Event\"</code> objects. Each user can create many events. The user can attach an image along with the description of the event. I use Postgres DB for the textual data store, and it works fine. But the problem is when I use cloud api <code>\"Cloudinary\"</code> for the <code>images</code>. I could't know what the problem is. I am getting the following error:</p>\n\n<pre><code>  {\n    \"status\": 500,\n    \"error\": \"Internal Server Error\",\n    \"exception\": \"#&lt;NoMethodError: undefined method `upload' for nil:NilClass&gt;\",\n    \"traces\": {\n        \"Application Trace\": [\n            {\n                \"exception_object_id\": 78590280,\n                \"id\": 26,\n                \"trace\": \"app/controllers/events_controller.rb:23:in `create'\"\n            }\n        ],\n        \"Framework Trace\": [\n            {\n                \"exception_object_id\": 78590280,\n                \"id\": 0,\n                \"trace\": \"activestorage (6.0.1) app/models/active_storage/blob.rb:194:in `upload_without_unfurling'\"\n            },\n            {\n                \"exception_object_id\": 78590280,\n                \"id\": 1,\n                \"trace\": \"activestorage (6.0.1) lib/active_storage/attached/changes/create_one.rb:25:in `upload'\"\n            },.....\n</code></pre>\n\n<p>When I test the API from Postman, I have done the following steps:</p>\n\n<p>I added the following gems in <code>Gemfile</code>:</p>\n\n<pre><code>gem 'cloudinary', require: false\n\n\ngem 'activestorage-cloudinary-service'\n</code></pre>\n\n<p>Then I run:</p>\n\n<pre><code>bundle\nrails active_storage:install\nrails db:migrate\n</code></pre>\n\n<p>I added the following in <code>config/storage.yml</code>:</p>\n\n<pre><code>    cloudinary:\n  service: Cloudinary\n  cloud_name: &lt;%= ENV['CLOUDINARY_CLOUD_NAME'] %&gt;\n  api_key:    &lt;%= ENV['CLOUDINARY_API_KEY'] %&gt;\n  api_secret: &lt;%= ENV['CLOUDINARY_API_SECRET'] %&gt;\n</code></pre>\n\n<p>And I added the following line in the <code>config/environments/**</code> files:</p>\n\n<pre><code>config.active_storage.service = :cloudinary\n</code></pre>\n\n<p>Routes.rb loks like the following:</p>\n\n<pre><code>Rails.application.routes.draw do\n  resources :events do\n    get :event_image, on: :member\n  end\n  resources :users\n  # For details on the DSL available within this file, see https://guides.rubyonrails.org/routing.html\nend\n</code></pre>\n\n<p>And <code>EventsController</code> is the following:</p>\n\n<pre><code>class EventsController &lt; ApplicationController\n  before_action :set_event, only: [:show, :update, :destroy]\n\n  # GET /events\n  def index\n    @events = Event.all.with_attached_event_image\n\n    render json: @events.map {|event|\n    event.as_json.merge({event_image: url_for(event.event_image)})}\n  end\n\n\n  # GET /events/1\n  def show\n  event = Event.find(params[:id])\n  render json: event.attributes.merge(event_image: url_for(event.event_image))\n\n  end\n  # POST /events\n  def create\n    @event = Event.new(event_params)\n  #  Cloudinary::Uploader.upload(@event.event_image)\n    if @event.save\n      render json: @event, status: :created, location: @event\n    else\n      render json: @event.errors, status: :unprocessable_entity\n    end\n  end\n\n  # PATCH/PUT /events/1\n  def update\n    if @event.update(event_params)\n      render json: @event\n    else\n      render json: @event.errors, status: :unprocessable_entity\n    end\n  end\n\n  # DELETE /events/1\n  def destroy\n     @event.destroy\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_event\n      @event = Event.find(params[:id])\n    end\n\n    # Only allow a trusted parameter \"white list\" through.\n    def event_params\n      params.require(:event).permit(:title, :description, :country, :city, :event_location, :event_date, :event_time, :event_status, :user_id, :event_image)\n    end\nend\n</code></pre>\n\n<p>Remember: The API works well using local storage! The error is when I switch the storage service to <code>:cloudinary</code>. Can anyone help, please?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-6"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 2, "creation_date": 1574538388, "post_id": 59011353, "comment_id": 104270871, "body": "Welcome to stackoverflow. Please note that this post does not constitute an appropriate question for this site. You should take a moment to read <a href=\"https://stackoverflow.com/help/how-to-ask\">How do I ask a good question?</a> then come back here and update your post based on <i>all</i> the guidelines there. Specifically, you need to include an actual question in your post, the steps you&#39;ve taken to resolve the issue, an explanation of how you got there, and preferably a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1574542138, "post_id": 59011353, "comment_id": 104271864, "body": "Can you reproduce this on a <i>new</i> Rails project?"}], "answers": [{"comments": [{"owner": {"reputation": 773, "user_id": 537025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dfc49166318a6c56ad40ecb53189888?s=128&d=identicon&r=PG", "display_name": "courtsimas", "link": "https://stackoverflow.com/users/537025/courtsimas"}, "edited": false, "score": 0, "creation_date": 1600233639, "post_id": 59219804, "comment_id": 113018906, "body": "I&#39;ve run into this issue and still had the application_controller present in the right place."}, {"owner": {"reputation": 3638, "user_id": 1977104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fe5f45f44332caa3a105c05382c8e7b?s=128&d=identicon&r=PG", "display_name": "Wasif Hossain", "link": "https://stackoverflow.com/users/1977104/wasif-hossain"}, "reply_to_user": {"reputation": 773, "user_id": 537025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dfc49166318a6c56ad40ecb53189888?s=128&d=identicon&r=PG", "display_name": "courtsimas", "link": "https://stackoverflow.com/users/537025/courtsimas"}, "edited": false, "score": 0, "creation_date": 1600324303, "post_id": 59219804, "comment_id": 113052586, "body": "@courtsimas would you take the chance to create a new post with the backtrace along with the app controller and config/application.rb files. you may share the post link here if you like me to take a look :)"}, {"owner": {"reputation": 470, "user_id": 7265288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4de415bf7efe7c8e9e68e64430d7ea?s=128&d=identicon&r=PG&f=1", "display_name": "randmin", "link": "https://stackoverflow.com/users/7265288/randmin"}, "edited": false, "score": 0, "creation_date": 1612238445, "post_id": 59219804, "comment_id": 116697768, "body": "If you have ApplicationController, check for syntax errors there"}], "tags": [], "owner": {"reputation": 3638, "user_id": 1977104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fe5f45f44332caa3a105c05382c8e7b?s=128&d=identicon&r=PG", "display_name": "Wasif Hossain", "link": "https://stackoverflow.com/users/1977104/wasif-hossain"}, "is_accepted": false, "score": 2, "last_activity_date": 1575664643, "last_edit_date": 1575664643, "creation_date": 1575663473, "answer_id": 59219804, "question_id": 59011353, "link": "https://stackoverflow.com/questions/59011353/rails-6-uninitialized-constant-actiontextengineapplicationcontroller-namee/59219804#59219804", "title": "Rails 6: uninitialized constant ActionText::Engine::ApplicationController (NameError)", "body": "<p>Most likely your app is missing <code>ApplicationController</code> class. can you double-check the case please if it's present under <code>app/controllers/application_controller.rb</code></p>\n\n<p>If you don't find the file straightaway, don't be worried! It may be likely that your app is structured in such a way that does not depend on defining <code>ApplicationController</code>. ActionText has a long-standing issue, due to which you may have difficulty in using it.</p>\n\n<p>You can keep track of this open issue that discusses about using <code>ActionText</code> in projects which do <strong>NOT</strong> depend on default <code>ApplicationController</code> class: <a href=\"https://github.com/rails/rails/issues/37183\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/issues/37183</a></p>\n\n<p>If this is not your case, then you can simply overcome the issue by creating the class in the above mentioned directory.</p>\n\n<p>Enjoy!</p>\n"}], "owner": {"reputation": 21, "user_id": 12422014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70b7d18b245d6352f193bd49aff7682?s=128&d=identicon&r=PG&f=1", "display_name": "IanLucas1320", "link": "https://stackoverflow.com/users/12422014/ianlucas1320"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2305, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1575664752, "creation_date": 1574537154, "last_edit_date": 1575664752, "question_id": 59011353, "link": "https://stackoverflow.com/questions/59011353/rails-6-uninitialized-constant-actiontextengineapplicationcontroller-namee", "title": "Rails 6: uninitialized constant ActionText::Engine::ApplicationController (NameError)", "body": "<pre><code>Puma caught this error: uninitialized constant ActionText::Engine::ApplicationController (NameError)\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/actiontext-6.0.1/lib/action_text/engine.rb:43:in `block (2 levels) in &lt;class:Engine&gt;'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/callbacks.rb:429:in `instance_exec'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/callbacks.rb:429:in `block in make_lambda'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/callbacks.rb:201:in `block (2 levels) in halting'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/callbacks.rb:607:in `block (2 levels) in default_terminator'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/callbacks.rb:606:in `catch'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/callbacks.rb:606:in `block in default_terminator'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/callbacks.rb:202:in `block in halting'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/callbacks.rb:514:in `block in invoke_before'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/callbacks.rb:514:in `each'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/callbacks.rb:514:in `invoke_before'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/callbacks.rb:134:in `run_callbacks'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/execution_wrapper.rb:119:in `complete!'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/execution_wrapper.rb:76:in `ensure in block in run!'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/execution_wrapper.rb:76:in `block in run!'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/execution_wrapper.rb:70:in `tap'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/activesupport-6.0.1/lib/active_support/execution_wrapper.rb:70:in `run!'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/actionpack-6.0.1/lib/action_dispatch/middleware/executor.rb:12:in `call'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/actionpack-6.0.1/lib/action_dispatch/middleware/static.rb:126:in `call'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/rack-2.0.7/lib/rack/sendfile.rb:111:in `call'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/actionpack-6.0.1/lib/action_dispatch/middleware/host_authorization.rb:83:in `call'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/webpacker-4.2.0/lib/webpacker/dev_server_proxy.rb:23:in `perform_request'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/rack-proxy-0.6.5/lib/rack/proxy.rb:57:in `call'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/railties-6.0.1/lib/rails/engine.rb:526:in `call'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/puma-4.3.0/lib/puma/configuration.rb:228:in `call'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/puma-4.3.0/lib/puma/server.rb:667:in `handle_request'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/puma-4.3.0/lib/puma/server.rb:470:in `process_client'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/puma-4.3.0/lib/puma/server.rb:328:in `block in run'\nC:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/puma-4.3.0/lib/puma/thread_pool.rb:134:in `block in spawn_thread'\n</code></pre>\n"}, {"tags": ["ruby", "postgresql"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 1, "creation_date": 1574533447, "post_id": 59010491, "comment_id": 104269512, "body": "The problem is on line number 1 of <code>customer.rb</code>, maybe post that file too."}, {"owner": {"reputation": 21, "user_id": 12148116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/425b43a132b63f807bf321d6bbed68fe?s=128&d=identicon&r=PG&f=1", "display_name": "John Hannah", "link": "https://stackoverflow.com/users/12148116/john-hannah"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1574538861, "post_id": 59010491, "comment_id": 104270993, "body": "I\u2019ve changed the require relative but not clear on why it\u2019s an issue. Another eye over it would be good.  It\u2019s been a long day \u2026:)"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1574541200, "post_id": 59010491, "comment_id": 104271598, "body": "If you think of it like this, then it will mostly make sense: <code>require</code> is used to load gems, and <code>require_relative</code> is used to load your own files. For more in-depth explanation, you will have to do some Googling, but with that basic understanding you will do OK in most cases."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 12148116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/425b43a132b63f807bf321d6bbed68fe?s=128&d=identicon&r=PG&f=1", "display_name": "John Hannah", "link": "https://stackoverflow.com/users/12148116/john-hannah"}, "edited": false, "score": 0, "creation_date": 1574606829, "post_id": 59012940, "comment_id": 104283686, "body": "Thanks. I have change the require/requyire_relatives but I&#39;m going to have to research the order of the classes to get this right I think. I have customers who will go to see a film and then have tickets is the join table. I&#39;ve had a go at swapping them around but still have the error."}], "tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 1, "last_activity_date": 1574548807, "creation_date": 1574548807, "answer_id": 59012940, "question_id": 59010491, "link": "https://stackoverflow.com/questions/59010491/require-cannot-load-such-file-pry-byebug-loaderror/59012940#59012940", "title": "&#39;require&#39;: cannot load such file -- pry-byebug (LoadError)", "body": "<p>I recommend you to load all the files in the executable file (<code>console.rb</code>).</p>\n\n<p>As you did it all the classes will be available in all the files when you run <code>console.rb</code>.</p>\n\n<p>So in the top of <code>console.rb</code> write something like</p>\n\n<pre><code>require 'pry'\nrequire_relative 'db/sql_runner'\nrequire_relative 'models/film'\nrequire_relative 'models/ticket'\nrequire_relative 'models/customer'\n</code></pre>\n\n<p>(The sequence of these lines can be changed depending on the sequence of loading classes)</p>\n\n<p>Also check word form of your classes. Usually class name is singular, not plural. And check all the filenames. Usually filename is snake_case of ClassName</p>\n"}], "owner": {"reputation": 21, "user_id": 12148116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/425b43a132b63f807bf321d6bbed68fe?s=128&d=identicon&r=PG&f=1", "display_name": "John Hannah", "link": "https://stackoverflow.com/users/12148116/john-hannah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 585, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1574661699, "creation_date": 1574531174, "last_edit_date": 1574661699, "question_id": 59010491, "link": "https://stackoverflow.com/questions/59010491/require-cannot-load-such-file-pry-byebug-loaderror", "title": "&#39;require&#39;: cannot load such file -- pry-byebug (LoadError)", "body": "<p>I'm doing some training at the moment (so newbie) and I'm trying to run the console.rb file in a Ruby/psql project. The project has customers, films and tickets.</p>\n\n<p>The object if to do CRUD commands on the data once I can get the console.rb file to run.</p>\n\n<p>I have empty db tables at the moment for the three .rb files.</p>\n\n<pre><code>RUBY VERSION:\nruby 2.6.3p62 (2019-04-16 revision 67580) [x86_64-darwin18]\n\nPSQL VERSION:\npsql (PostgreSQL) 11.5\n</code></pre>\n\n<p>File structure for the project is as follows:</p>\n\n<pre><code>specs\n - film_spec.rb (empty)\n - ticket_spec.rb (empty)\n - customer_spec.rb (empty)\n\nmodels\n - film.rb\n - ticket.rb\n - customer.rb\n\ndb\n - cinema_homework.sql\n - sql_runner.rb\n - customer_spec.rb (empty)\n\nconsole.rb\n</code></pre>\n\n<p>The console file is:</p>\n\n<pre><code>require('pry')\nrequire_relative('models/customers')\nrequire_relative('models/films')\nrequire_relative('models/tickets')\n\nTickets.delete_all()\nCustomers.delete_all()\nFilms.delete_all()\n\ncustomer1 = Customers.new({'name' =&gt; 'Geddy', 'funds' =&gt; 100})\ncustomers1.save()\n\ncustomer2 etc\n\ncustomers3 ett\n\n\nfilm1 = Films.new({'title' =&gt; 'A Show of Hands', 'price' =&gt; 20})\nfilm1.save()\n\nfilm2 etc ...\n\nfilm3 etc ...\n\nticket1 = Tickets.new({'customers_id' =&gt; customers1.id, 'films_id' =&gt; film1.id})\nticket1.save()\n\nticket2 etc ...\n\nticket3 etc ...\n\nbinding.pry\n\nnil\n</code></pre>\n\n<p>I get this error but for the life of me cannot work out what is going on. Any help is greatly appreciated.</p>\n\n<pre><code>Traceback (most recent call last):\n    3: from console.rb:2:in `&lt;main&gt;'\n    2: from console.rb:2:in `require_relative'\n    1: from /Users/johnhannah/codeclan/week_3/day_5/cinema_homework/models/customers.rb:1:in `&lt;top (required)&gt;'\n/Users/johnhannah/codeclan/week_3/day_5/cinema_homework/models/customers.rb:1:in `require_relative': cannot load such file -- /Users/johnhannah/codeclan/week_3/day_5/cinema_homework/db/sql_runner (LoadError)\n</code></pre>\n\n<p>Customers.rb</p>\n\n<pre><code>\nrequire_relative('../db/sql_runner.rb')\n\nclass Customers\n\n  attr_reader :id\n  attr_accessor :name, :funds\n\n  def initialize(options)\n    @id = options['id'].to_i if options['id']\n    @name = options['name']\n    @funds = options['funds'].to_i\n  end\n\n  def save()\n    sql = \"INSERT INTO customers (name, funds)\n    VALUES ($1, $2)\n    RETURNING id\"\n    values = [@name, @funds]\n    customers = SqlRunner.run(sql, values).first\n    @id = customers['id'].to_i\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1574533022, "post_id": 59010329, "comment_id": 104269387, "body": "You might try updating IRB (<code>gem update irb</code>) as the current version is 1.1.0. Running the assignment on my Mac OS works without errors. What does your <code>locale</code> command show? Copy and paste the information from the command-line into your question and format it appropriately. Don&#39;t use &quot;edited&quot; or &quot;updated&quot; tags as we can see what changed, just insert it as if it&#39;d always been there."}, {"owner": {"reputation": 17424, "user_id": 278842, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/df6877d3f05e542ca5975b4670600f2e?s=128&d=identicon&r=PG", "display_name": "Christopher Oezbek", "link": "https://stackoverflow.com/users/278842/christopher-oezbek"}, "edited": false, "score": 0, "creation_date": 1574540529, "post_id": 59010329, "comment_id": 104271434, "body": "Works fine under WSL with <code>LANG=C.UTF-8</code>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1574542284, "post_id": 59010329, "comment_id": 104271901, "body": "What&#39;s your terminal set to? If it&#39;s not UTF-8 that would explain. The terminal and the terminal&#39;s environment (<code>LANG</code>) should match."}, {"owner": {"reputation": 31, "user_id": 12421634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa39fc5827df47844b1926e92afc3e48?s=128&d=identicon&r=PG&f=1", "display_name": "marc a. didier", "link": "https://stackoverflow.com/users/12421634/marc-a-didier"}, "edited": false, "score": 0, "creation_date": 1574562025, "post_id": 59010329, "comment_id": 104275625, "body": "Got it! Made it work by changing LANG=C to LANG=C.UTF-8. Thanks for your help!"}, {"owner": {"reputation": 930, "user_id": 3577922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eURpm.jpg?s=128&g=1", "display_name": "Masa Sakano", "link": "https://stackoverflow.com/users/3577922/masa-sakano"}, "edited": false, "score": 0, "creation_date": 1574562334, "post_id": 59010329, "comment_id": 104275656, "body": "I have no idea why the results differ between attempts. But my guess for the error is <code>LANG</code> environmental variable is not set to accept UTF-8, as pointed out, given the output in the successful attempts shows <code>&quot;O\\u00EF&quot;</code> as opposed to <code>&quot;O&#239;&quot;</code>. Have you tried <code>s=&quot;O\\u00EF&quot;</code> ? If this works, it means irb handles the String correctly internally."}], "owner": {"reputation": 31, "user_id": 12421634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa39fc5827df47844b1926e92afc3e48?s=128&d=identicon&r=PG&f=1", "display_name": "marc a. didier", "link": "https://stackoverflow.com/users/12421634/marc-a-didier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1574532808, "creation_date": 1574530252, "last_edit_date": 1574532808, "question_id": 59010329, "link": "https://stackoverflow.com/questions/59010329/what-is-the-mess-with-ruby-encoding", "title": "What is the mess with ruby encoding?", "body": "<p>I'm currently having troubles with Ruby string encoding. It's supposed to be UTF-8 by default but when I'm using IRB I get:</p>\n\n<pre><code>irb(main):001:0&gt; s=\"O\u00ef\"\nTraceback (most recent call last):\n        3: from /usr/bin/irb:23:in `&lt;main&gt;'\n        2: from /usr/bin/irb:23:in `load'\n        1: from /usr/share/gems/gems/irb-1.0.0/exe/irb:11:in `&lt;top (required)&gt;'\nSyntaxError ((irb):1: invalid multibyte char (US-ASCII))\n(irb):1: invalid multibyte char (US-ASCII)\nirb(main):002:0&gt; s=\"O\u00ef\"\n=&gt; \"O\\u00EF\"\nirb(main):003:0&gt; s=\"O\u00ef\"\nTraceback (most recent call last):\n        3: from /usr/bin/irb:23:in `&lt;main&gt;'\n        2: from /usr/bin/irb:23:in `load'\n        1: from /usr/share/gems/gems/irb-1.0.0/exe/irb:11:in `&lt;top (required)&gt;'\nSyntaxError ((irb):3: invalid multibyte char (US-ASCII))\n(irb):3: invalid multibyte char (US-ASCII)\nirb(main):004:0&gt; s=\"O\u00ef\"\n=&gt; \"O\\u00EF\"\n</code></pre>\n\n<p>Typing exactly the same assignment leads to different results.\nWhat's happening? What did I miss?</p>\n\n<pre><code>$ irb -v      \nirb 1.0.0 (2018-12-18)\n$ gem -v   \n3.0.3\n$ ruby -v\nruby 2.6.5p114 (2019-10-01 revision 67812) [x86_64-linux]\n$ uname -a\nLinux P9X79 5.3.6-200.fc30.x86_64 #1 SMP Mon Oct 14 13:11:01 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux\n</code></pre>\n"}, {"tags": ["ruby", "rvm"], "comments": [{"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 1, "creation_date": 1574538403, "post_id": 59008131, "comment_id": 104270875, "body": "This question is wrongly marked as a duplicate: the default is clearly set correctly, visible from the output from <code>rvm list</code>. You should check if there is a <code>.rvmrc</code> or <code>.ruby-version</code> file in the directory which will automatically set the ruby version regardless of the default."}], "answers": [{"comments": [{"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 1, "creation_date": 1574538966, "post_id": 59008465, "comment_id": 104271025, "body": "We clearly see the default <i>is</i> set correctly, marked with the asterisk, so this is not correct/helpful."}, {"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "reply_to_user": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1574544839, "post_id": 59008465, "comment_id": 104272554, "body": "As @nathanvda stated, my default was set correctly, the issue is a .ruby-version file."}], "tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": false, "score": 3, "last_activity_date": 1574586868, "last_edit_date": 1574586868, "creation_date": 1574517991, "answer_id": 59008465, "question_id": 59008131, "link": "https://stackoverflow.com/questions/59008131/rvm-not-keeping-ruby-version/59008465#59008465", "title": "RVM not keeping ruby version", "body": "<p>EDIT: As OP stated, they were correctly setting the default but having it overriden by a .ruby-version file, see above and ignore below</p>\n\n<p>You're telling RVM to use 2.6.5, not setting it as the default.</p>\n\n<p>Try:</p>\n\n<pre><code>rvm --default use 2.6.5\n</code></pre>\n\n<p>See \"<a href=\"https://rvm.io/rvm/basics\" rel=\"nofollow noreferrer\">The Basics of RVM</a>\" for more information.</p>\n"}, {"comments": [{"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 1, "creation_date": 1574544644, "post_id": 59011652, "comment_id": 104272498, "body": ".ruby-version file was the issue and Thank you! for looking carefully"}], "tags": [], "owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "is_accepted": true, "score": 3, "last_activity_date": 1574538921, "creation_date": 1574538921, "answer_id": 59011652, "question_id": 59008131, "link": "https://stackoverflow.com/questions/59008131/rvm-not-keeping-ruby-version/59011652#59011652", "title": "RVM not keeping ruby version", "body": "<p>In the <code>rvm list</code> we clearly see the default is set correctly (marked with the asterisk), so check your current folder for the presence of a <code>.rvmrc</code> or <code>.ruby-version</code> file which will overrule the rvm default version.</p>\n"}], "owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 59011652, "answer_count": 2, "score": 2, "last_activity_date": 1574586868, "creation_date": 1574515500, "question_id": 59008131, "link": "https://stackoverflow.com/questions/59008131/rvm-not-keeping-ruby-version", "title": "RVM not keeping ruby version", "body": "<p>I have to keep setting my ruby version.  How to I make sure RVM keeps the version I need?</p>\n\n<p>When I do <code>rvm list</code>, I get:</p>\n\n<pre><code>   ruby-2.1.0 [ x86_64 ]\n   ruby-2.1.2 [ x86_64 ]\n   ruby-2.4.4 [ x86_64 ]\n   ruby-2.5.1 [ x86_64 ]\n   ruby-2.5.2 [ x86_64 ]\n   ruby-2.5.3 [ x86_64 ]\n   ruby-2.6.1 [ x86_64 ]\n=&gt; ruby-2.6.3 [ x86_64 ]\n * ruby-2.6.5 [ x86_64 ]\n</code></pre>\n\n<p>So then I do <code>rvm use 2.6.5</code> and it changes to 2.6.5, but as soon as I close and open the terminal again, I whichs back to 2.6.3. What am I doing wrong? I set the default 2.6.5, it just does not seem to listen.</p>\n"}, {"tags": ["ruby", "windows", "dll", "fiddle", "ruby-ffi"], "comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 1, "creation_date": 1574505113, "post_id": 59006378, "comment_id": 104262349, "body": "The DLL likely depends on other DLLs which Fiddle can&#39;t find. Try it again but call <code>SetDllDirectory()</code> to add the <code>gr&#47;bin</code> folder to the search path before loading the DLL."}, {"owner": {"reputation": 676, "user_id": 9344150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b13c12af25a724e0c1fd61cdb45fdca2?s=128&d=identicon&r=PG&f=1", "display_name": "kojix2", "link": "https://stackoverflow.com/users/9344150/kojix2"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1574511829, "post_id": 59006378, "comment_id": 104263703, "body": "Thank you cremno. you&#39;re right! Now It works."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 1, "creation_date": 1574529916, "post_id": 59006378, "comment_id": 104268512, "body": "perhaps post an actual example of working solution so that others may find this more helpful?"}], "answers": [{"tags": [], "owner": {"reputation": 676, "user_id": 9344150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b13c12af25a724e0c1fd61cdb45fdca2?s=128&d=identicon&r=PG&f=1", "display_name": "kojix2", "link": "https://stackoverflow.com/users/9344150/kojix2"}, "is_accepted": false, "score": 1, "last_activity_date": 1574752225, "creation_date": 1574752225, "answer_id": 59045531, "question_id": 59006378, "link": "https://stackoverflow.com/questions/59006378/how-can-i-load-windows-dll-files-with-ruby-fiddle/59045531#59045531", "title": "How can I load Windows DLL files with Ruby fiddle?", "body": "<p>I answer my own questions.</p>\n\n<p><strong>1. Use <code>RubyInstaller::Runtime.add_dll_directory</code></strong></p>\n\n<p>DLL loading\n<a href=\"https://github.com/oneclick/rubyinstaller2/wiki/For-gem-developers#-dll-loading\" rel=\"nofollow noreferrer\">https://github.com/oneclick/rubyinstaller2/wiki/For-gem-developers#-dll-loading</a></p>\n\n<ul>\n<li>The <code>PATH</code> environment variable is ignored for all DLL searches.</li>\n<li>Environment variable <code>RUBY_DLL_PATH</code> is interpreted at the ruby startup - later changes doesn't affect the running process. </li>\n<li>Use the Ruby function <code>add_dll_directory</code> to do runtime changes to DLL search paths.</li>\n</ul>\n\n<p><strong>2. Use <code>SetDllDirectory()</code></strong></p>\n\n<p>Alternatively, you can run SetDllDirectory.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'fiddle/import'\nrequire 'fiddle/types'\nmodule WinAPI\n  extend Fiddle::Importer\n  dlload 'kernel32.dll'\n  include Fiddle::Win32Types\n  extern 'int SetDllDirectory(LPCSTR)'\nend\nWinAPI.SetDllDirectory(File.expand_path(path))\n</code></pre>\n"}], "owner": {"reputation": 676, "user_id": 9344150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b13c12af25a724e0c1fd61cdb45fdca2?s=128&d=identicon&r=PG&f=1", "display_name": "kojix2", "link": "https://stackoverflow.com/users/9344150/kojix2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 636, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1574752225, "creation_date": 1574502639, "question_id": 59006378, "link": "https://stackoverflow.com/questions/59006378/how-can-i-load-windows-dll-files-with-ruby-fiddle", "title": "How can I load Windows DLL files with Ruby fiddle?", "body": "<p>I am trying to create a <a href=\"https://github.com/sciapp/gr\" rel=\"nofollow noreferrer\">GR framework</a> binding for ruby.\nI use Fiddle. Fiddle is a default extension to translate a foreign function interface (FFI) with ruby. It Works well on Linux and Mac. But on Windows, I got following error. </p>\n\n<p>code hoge.rb</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'fiddle/import'\n\nmodule M\n   extend extend Fiddle::Importer\n   dlload File.expand_path('gr/bin/libGR.dll').gsub(\"/\", \"\\\\\")\nend\n</code></pre>\n\n<p>error</p>\n\n<pre><code>Traceback (most recent call last):\n        7: from hoge.rb:3:in `&lt;main&gt;'\n        6: from hoge.rb:5:in `&lt;module:M&gt;'\n        5: from C:/Ruby26-x64/lib/ruby/2.6.0/fiddle/import.rb:77:in `dlload'\n        4: from C:/Ruby26-x64/lib/ruby/2.6.0/fiddle/import.rb:77:in `collect'\n        3: from C:/Ruby26-x64/lib/ruby/2.6.0/fiddle/import.rb:87:in `block in dlload'\n        2: from C:/Ruby26-x64/lib/ruby/2.6.0/fiddle.rb:47:in `dlopen'\n        1: from C:/Ruby26-x64/lib/ruby/2.6.0/fiddle.rb:47:in `new'\nC:/Ruby26-x64/lib/ruby/2.6.0/fiddle.rb:47:in `initialize': No such file or directory (Fiddle::DLError)\n        5: from hoge.rb:3:in `&lt;main&gt;'\n        4: from hoge.rb:5:in `&lt;module:M&gt;'\n        3: from C:/Ruby26-x64/lib/ruby/2.6.0/fiddle/import.rb:77:in `dlload'\n        2: from C:/Ruby26-x64/lib/ruby/2.6.0/fiddle/import.rb:77:in `collect'\n        1: from C:/Ruby26-x64/lib/ruby/2.6.0/fiddle/import.rb:86:in `block in dlload'\nC:/Ruby26-x64/lib/ruby/2.6.0/fiddle/import.rb:89:in `rescue in block in dlload': can't load C:\\Users\\kojix2\\gr\\bin\\libgr.dll (Fiddle::DLError)\n</code></pre>\n\n<ul>\n<li>Windows 10</li>\n<li>Ruby 2.6.5 + DevKit</li>\n</ul>\n\n<p>ruby-ffi works well. </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'ffi'\n\nmodule M\n   extend FFI::Library\n   ffi_lib File.expand_path('gr/bin/libGR.dll').gsub(\"/\", \"\\\\\")\nend\n</code></pre>\n\n<p>But I want to use fiddle instead of ruby-ffi in this time.\nWhat should I do next?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 2, "creation_date": 1574506061, "post_id": 59006125, "comment_id": 104262498, "body": "Its very unclear what you are trying to do here. Are you trying to send a request server side from your controller to the external website and check if the response code is 200 or 400. Or are you trying to create a form that posts to another site which will then redirect the user back? Or are you trying to create an ajax request to the external website?"}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1574509640, "post_id": 59006125, "comment_id": 104263260, "body": "You have to be very clear where you want to post to and who will handle this. E.g. you can create a webpage which posts to another website, then you will have to handle the response in the browser (so javascript). If you want your own server to handle it, you have to first post the form-content to your own server (rails), which will then post it to the other server, and handle the response and then send a response back to the browser."}], "answers": [{"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 0, "last_activity_date": 1574506375, "last_edit_date": 1574506375, "creation_date": 1574505462, "answer_id": 59006719, "question_id": 59006125, "link": "https://stackoverflow.com/questions/59006125/how-can-a-controller-respond-with-an-action-to-redirect-from-another-website-in/59006719#59006719", "title": "How can a controller respond with an action to redirect from another website in Ruby", "body": "<p>This is just the basics of how to post a form to an external website. You'll have to fill in the details yourself since I have no clue what the external website does or what that script is supposed to accomplish.</p>\n\n<p>Setting up a form to post to a remote url is pretty easy:</p>\n\n<pre><code># Rails 4 and earlier\n&lt;% form_tag(\"http://example.com/test.php\", method: :post) %&gt;\n  &lt;%= hidden_field_tag :key, ENV[\"EXAMPLE_PUBLIC_KEY\"] %&gt;\n  &lt;%= hidden_field_tag :title, current_user.books.title %&gt;\n  &lt;%= hidden_field_tag :ref, SecureRandom.random_number %&gt;\n  &lt;%= submit_tag %&gt;\n&lt;% end %&gt;\n\n# Rails 5+\n&lt;%= form_with(url: \"http://example.com/test.php\", method: :post) do |f| %&gt;\n  &lt;%= f.hidden_field :key, value: ENV[\"EXAMPLE_PUBLIC_KEY\"] %&gt;\n  # ...\n&lt;% end %&gt;\n</code></pre>\n\n<p>Handling the callback from the external website isn't really different then any other route in your rails app:</p>\n\n<pre><code>get '/some/path', to: 'foo#bar'\n</code></pre>\n\n<p>You just create a route that responds to GET, and configure whatever service that handles the form submission to redirect back to it.</p>\n"}], "owner": {"reputation": 25, "user_id": 11439790, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-YkgTfQ-Trt4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfYbgZm2xHUtE0PWnMTZhoqXGjjHA/mo/photo.jpg?sz=128", "display_name": "Geni", "link": "https://stackoverflow.com/users/11439790/geni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 59006719, "answer_count": 1, "score": 0, "last_activity_date": 1574506375, "creation_date": 1574500226, "last_edit_date": 1574505409, "question_id": 59006125, "link": "https://stackoverflow.com/questions/59006125/how-can-a-controller-respond-with-an-action-to-redirect-from-another-website-in", "title": "How can a controller respond with an action to redirect from another website in Ruby", "body": "<p>I am a newbie in ruby. I want to post a form data which includes an API key and some other field data to another website which will verify and send an http response 200 or 400 to my website. If I am able to connect to the api, the website responds with a URL redirect to my website with additional query string which my website will respond to. I don't how to do the following:</p>\n\n<p>How to make my site respond to the redirect I get from the website through a controller and action. Assuming the controller is:</p>\n\n<pre><code> class BooksController &lt; ApplicationController\n\n  def create\n   Do something\n\n   flash[:notice] = \" book was created successfully\"\n  end\n\nend\n</code></pre>\n\n<p>Configure my route to respond to the redirect</p>\n\n<p>here is the code I am trying to use on view</p>\n\n<pre><code>   &lt;form action=\"/master/master\" method=\"POST\" &gt;\n    &lt;script\n    src=\"https://js.example.co/v7/inline.js\" \n    data-key= &lt;%= ENV[\"EXAMPLE_PUBLIC_KEY\"] %&gt;\n    data-email= &lt;%= current_user.email %&gt; \n    data-booktitle= &lt;%= current_user.books.title %&gt;\n    data-ref= &lt;% SecureRandom.random_number %&gt; \n &gt;\n  &lt;/script&gt; \n  &lt;/form&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1574500420, "post_id": 59005897, "comment_id": 104261439, "body": "What result are you getting? Seems correct to me. You can call <code>.to_sql</code> instead of <code>.count</code> to see the actual query."}, {"owner": {"reputation": 2495, "user_id": 1538101, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/586aa5393df4f5c6d2ba6b89a930c8e2?s=128&d=identicon&r=PG", "display_name": "Jeremie Ges", "link": "https://stackoverflow.com/users/1538101/jeremie-ges"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1574500610, "post_id": 59005897, "comment_id": 104261482, "body": "I added the .to_sql -- I kinda see why this is not working (the query is not &quot;clustered&quot; with ()) but I have no clue how to explain it / fix it."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1574501041, "post_id": 59005897, "comment_id": 104261564, "body": "The issue here is that <code>WHERE user_tags.value = &quot;brunette&quot; AND user_tags.value = &#39;no&#39;</code> will only return rows for which both conditions are true, not rows with two joined entities.  You have to use having with a count of the joined rows. The answer here depends on the db. I asked a question a while back for postgres that got pretty good answers. <a href=\"https://stackoverflow.com/questions/36131803/sql-where-joined-set-must-contain-all-values-but-may-contain-more\" title=\"sql where joined set must contain all values but may contain more\">stackoverflow.com/questions/36131803/&hellip;</a>"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1574501574, "post_id": 59005897, "comment_id": 104261680, "body": "It seems your user_tags table isn&#39;t correctly or completely normalized. A <code>where</code> filter will <i>throw out</i> those rows with label other than &quot;hair_color&quot; and value &quot;brunette&quot;, so you can&#39;t re-apply a filter for those with label &quot;polite&quot; and value &quot;no&quot;."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1574501767, "post_id": 59005897, "comment_id": 104261714, "body": "Additionally what you are doing here is not tagging at all. Its just a <a href=\"https://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model\" rel=\"nofollow noreferrer\">EAV table</a> in disguise. Tags just have a single value. Like for example on stackoverflow you can attach the tags <code>ruby</code>, <code>ruby-on-rails</code>. In your example the equivilent would be the tags <code>blonde</code>, <code>brunette</code>, <code>polite</code> and <code>impolite</code>."}, {"owner": {"reputation": 2495, "user_id": 1538101, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/586aa5393df4f5c6d2ba6b89a930c8e2?s=128&d=identicon&r=PG", "display_name": "Jeremie Ges", "link": "https://stackoverflow.com/users/1538101/jeremie-ges"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1574502348, "post_id": 59005897, "comment_id": 104261819, "body": "@max I&#39;m using Postgres, would you mind sharing an example? Thanks for the EAV thingy :)"}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1574509859, "post_id": 59005897, "comment_id": 104263305, "body": "For a simple tagging solution, you could also look at gem <a href=\"https://github.com/mbleigh/acts-as-taggable-on\" rel=\"nofollow noreferrer\">act_as_taggable_on</a> (why reinvent the wheel?)"}], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1574503746, "post_id": 59006474, "comment_id": 104262076, "body": "Beware however that when you use <code>.group</code> with <code>.count</code> you get a hash with the counts per group so <code>User.joins(:tags).group(:id).count</code> will give you <code>{2=&gt;2, 1=&gt;2, 3=&gt;2}</code> and not an integer as you might expect."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 1, "last_activity_date": 1574509403, "last_edit_date": 1574509403, "creation_date": 1574503399, "answer_id": 59006474, "question_id": 59005897, "link": "https://stackoverflow.com/questions/59005897/how-to-use-an-activerecord-query-to-find-records-based-on-association-tags/59006474#59006474", "title": "How to use an ActiveRecord query to find records based on association tags", "body": "<p>If you really want to build a tag system and not just a <a href=\"https://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model\" rel=\"nofollow noreferrer\">EAV monstrosity</a> this is how you do it.</p>\n\n<p>Start by creating a normalised tags table and a user_tags join table:</p>\n\n<pre><code>class CreateTags &lt; ActiveRecord::Migration[6.0]\n  def change\n    create_table :tags do |t|\n      t.string :name, unique: true\n      t.timestamps\n    end\n  end\nend\n\nclass CreateUserTags &lt; ActiveRecord::Migration[6.0]\n  def change\n    create_table :user_tags do |t|\n      t.references :user, null: false, foreign_key: true\n      t.references :tag, null: false, foreign_key: true\n      t.timestamps\n    end\n    add_index [:user_id, :tag_id], unique: true\n  end\nend\n</code></pre>\n\n<p>Then setup the associations:</p>\n\n<pre><code>class Tag &lt; ApplicationRecord\n  has_many :user_tags\n  has_many :users, through: :user_tags\n  validates_uniqueness_of :name\nend\n\nclass UserTag &lt; ApplicationRecord\n  belongs_to :user\n  belongs_to :tag\n  validates_uniqueness_of :tag_id, scope: :user_id\nend\n\nclass User &lt; ApplicationRecord\n  has_many :user_tags\n  has_many :tags, through: :user_tags\nend\n</code></pre>\n\n<p>To query a user with multiple tags you can then do:</p>\n\n<pre><code>User.joins(:tags)\n    .where(tags: { name: ['Brunette', 'Impolite'] } )\n    .group('users.id')\n    .having('count(*) = 2')\n</code></pre>\n\n<p>You could also just roll this into a class method:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_many :user_tags\n  has_many :tags, through: :user_tags\n\n  def self.with_tags(*tags)\n    raise ArgumentError, 'must pass more than one tag' if tags.none?\n    self.joins(:tags)\n        .where(tags: { name: tags } )\n        .group('users.id')\n        .having('count(*) = ?', tags.length)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 2495, "user_id": 1538101, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/586aa5393df4f5c6d2ba6b89a930c8e2?s=128&d=identicon&r=PG", "display_name": "Jeremie Ges", "link": "https://stackoverflow.com/users/1538101/jeremie-ges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 59006474, "answer_count": 1, "score": 1, "last_activity_date": 1574534547, "creation_date": 1574498035, "last_edit_date": 1574534547, "question_id": 59005897, "link": "https://stackoverflow.com/questions/59005897/how-to-use-an-activerecord-query-to-find-records-based-on-association-tags", "title": "How to use an ActiveRecord query to find records based on association tags", "body": "<p>I have a database with these current values:</p>\n\n<pre><code>User\nid | name\n1  | Sara\n2  | Alice\n3  | Samantha\n\nUserTag\nid | user_id | label      | value\n1  | 1       | hair_color | blonde\n2  | 1       | polite     | no\n\n3  | 2       | hair_color | brunette\n4  | 2       | polite     | yes\n\n5  | 3       | hair_color | brunette\n6  | 3       | polite     | no\n</code></pre>\n\n<p>And the associated models:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class User &lt; ApplicationRecord\n  has_many :tags,\n    class_name: 'UserTag',\n    foreign_key: :user_id,\n    dependent: :destroy,\n    inverse_of: :user\nend\n\nclass UserTag &lt; ApplicationRecord\n  belongs_to :user, inverse_of: :tags, touch: true\nend\n</code></pre>\n\n<p>I want to find all the \"brunette\" users who are \"not polite\", basically, \"Samantha\".  I tried the following without success:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># Returns 0\nUser.joins(:tags)\n.where(user_tags: { label: 'hair_color', value: 'brunette' })\n.where(user_tags: { label: 'polite', value: 'no' })\n.count\n</code></pre>\n\n<pre><code># .to_sql\n\"SELECT \\\"users\\\".* FROM \\\"users\\\" INNER JOIN \\\"user_tags\\\" ON \\\"user_tags\\\".\\\"user_id\\\" = \\\"users\\\".\\\"id\\\" WHERE \\\"user_tags\\\".\\\"label\\\" = 'hair_color' AND \\\"user_tags\\\".\\\"value\\\" = 'brunette' AND \\\"user_tags\\\".\\\"label\\\" = 'polite' AND \\\"user_tags\\\".\\\"value\\\" = 'no'\"\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby", "erb"], "comments": [{"owner": {"reputation": 6315, "user_id": 5411198, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/FabOI.jpg?s=128&g=1", "display_name": "sergio MAGA", "link": "https://stackoverflow.com/users/5411198/sergio-maga"}, "edited": false, "score": 1, "creation_date": 1574492259, "post_id": 59005116, "comment_id": 104260038, "body": "Try running your script with erb, then redirect to a text file: <code>erb play.erb &gt; file.txt</code>."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1574492923, "post_id": 59005116, "comment_id": 104260131, "body": "How you evaluate ERB from within a Ruby script is first <code>require &#39;erb&#39;</code> then <code>ERB.new(text).result(binding)</code>. Either that or the command line utility will work"}, {"owner": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "edited": false, "score": 0, "creation_date": 1574519135, "post_id": 59005116, "comment_id": 104265406, "body": "Also, it would be customary to use 2 extensions, in this case: <code>your_erb_template.txt.erb</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2560, "user_id": 5112122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206053108358704/picture?type=large", "display_name": "Horacio", "link": "https://stackoverflow.com/users/5112122/horacio"}, "is_accepted": false, "score": 2, "last_activity_date": 1574534351, "last_edit_date": 1574534351, "creation_date": 1574499404, "answer_id": 59006030, "question_id": 59005116, "link": "https://stackoverflow.com/questions/59005116/how-to-use-a-erb-file-in-ruby-to-write-some-text-in-a-text-file/59006030#59006030", "title": "How to use a ERB file in Ruby to write some text in a text file", "body": "<p>ERB is in Ruby's Standard Library, so try something like this:</p>\n\n<pre><code>require 'erb'\n\nTEMPLATE_FILE = 'template.erb'\n\n$wgplaying = true\n$template = \"This is my template\"\n$wginword = true\n$wgplaying = true\n$a = \"something\"\n\nrender = ERB.new(File.read(TEMPLATE_FILE),trim_mode: \"&gt;\")\nputs render.result\n</code></pre>\n\n<p>The <a href=\"https://ruby-doc.org/stdlib-2.6.5/libdoc/erb/rdoc/ERB.html#method-c-new\" rel=\"nofollow noreferrer\"><code>new</code></a> method has many options. </p>\n\n<p>These are the <code>trim_mode</code> options:</p>\n\n<pre><code>%  enables Ruby code processing for lines beginning with %\n&lt;&gt; omit newline for lines starting with &lt;% and ending in %&gt;\n&gt;  omit newline for lines ending in %&gt;\n-  omit blank lines ending in -%&gt;\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 11257578, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bF0wRNvA2VU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc7AiHcBmjO2C7F6HCkKx5GNMBQ9Q/mo/photo.jpg?sz=128", "display_name": "tangjikededela", "link": "https://stackoverflow.com/users/11257578/tangjikededela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574534351, "creation_date": 1574490192, "last_edit_date": 1574533431, "question_id": 59005116, "link": "https://stackoverflow.com/questions/59005116/how-to-use-a-erb-file-in-ruby-to-write-some-text-in-a-text-file", "title": "How to use a ERB file in Ruby to write some text in a text file", "body": "<p>I have a play.erb file:</p>\n\n<pre><code>&lt;p&gt;Welcome!&lt;br&gt;&lt;p&gt;\n&lt;% if $wgplaying==true %&gt;\n        Template: &lt;%= $template %&gt;\n&lt;% end %&gt;\n&lt;br&gt;&lt;br&gt;\n\n&lt;% if $wginword==true &amp;&amp; $wgplaying==true &amp;&amp; $a!='' %&gt;\n        Character &lt;%= $a %&gt; is in word.\n&lt;% end %&gt;\n\n&lt;% if $wginword==false &amp;&amp; $wgplaying==true &amp;&amp; $a!='' %&gt;\n        Character &lt;%= $a %&gt; is not in word.\n&lt;% end %&gt;   \n\n&lt;br&gt;&lt;br&gt;\n</code></pre>\n\n<p>I want to write </p>\n\n<pre><code>\"Character &lt;%= $a %&gt; is in word.\"\n</code></pre>\n\n<p>or </p>\n\n<pre><code>\"Character &lt;%= $a %&gt; is not in word.\" \n</code></pre>\n\n<p>in a text file, but I do not know what command should I use. Or, should I do this in a Ruby file?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubocop"], "comments": [{"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 1, "creation_date": 1574530829, "post_id": 59004940, "comment_id": 104268796, "body": "Does that new line between have any white space created by automatic indentation of the editor? if so, remove it"}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1574539955, "post_id": 59004940, "comment_id": 104271290, "body": "Not a big rubocop fan, I can imagine it has its use in a big team. As the answer stated: you probably have spaces on the empty line, which might be an editor setting. Not really something I would want to invest time in. Also, I actually prefer your <code>before</code> so I would probably ignore the <code>EmptyLineAfterGuardClause</code> rule. Alternatively, I would even be tempted to write <code>new_record? ? false : bars.any?</code>. I do not really see the need for the &quot;quick&quot; exit here? (but of course this all is a matter of taste)"}, {"owner": {"reputation": 114, "user_id": 7612601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10102696064836548/picture?type=large", "display_name": "vivipoit", "link": "https://stackoverflow.com/users/7612601/vivipoit"}, "reply_to_user": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1574577688, "post_id": 59004940, "comment_id": 104277577, "body": "@nathanvda, That&#39;s a great suggestion. Thank you! I don&#39;t use one line statements as often as I probably should."}], "answers": [{"tags": [], "owner": {"reputation": 6315, "user_id": 5411198, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/FabOI.jpg?s=128&g=1", "display_name": "sergio MAGA", "link": "https://stackoverflow.com/users/5411198/sergio-maga"}, "is_accepted": true, "score": 2, "last_activity_date": 1574494791, "last_edit_date": 1574494791, "creation_date": 1574491295, "answer_id": 59005223, "question_id": 59004940, "link": "https://stackoverflow.com/questions/59004940/rubocop-cops-disagree-layout-emptylineafterguardclause-vs-layout-trailingwhites/59005223#59005223", "title": "rubocop cops disagree: Layout/EmptyLineAfterGuardClause vs Layout/TrailingWhitespace", "body": "<p>To suppress <code>TrailingWhitespace</code> cop remove any space or tab in the line between <code>return false if new_record?</code> and  <code>bars.any?</code>:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def readonly?\n  return false if new_record?\n\n  bars.any?\nend\n</code></pre>\n\n<p>Trailing whitespace <a href=\"https://ruby-doc.org/core-2.6.5/Regexp.html#class-Regexp-label-Character+Classes\" rel=\"nofollow noreferrer\"><code>\\s</code></a> is any space, tab, carriage return at the end of a line, without any other characters following it.</p>\n"}], "owner": {"reputation": 114, "user_id": 7612601, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10102696064836548/picture?type=large", "display_name": "vivipoit", "link": "https://stackoverflow.com/users/7612601/vivipoit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 811, "favorite_count": 0, "accepted_answer_id": 59005223, "answer_count": 1, "score": 1, "last_activity_date": 1574494791, "creation_date": 1574488267, "question_id": 59004940, "link": "https://stackoverflow.com/questions/59004940/rubocop-cops-disagree-layout-emptylineafterguardclause-vs-layout-trailingwhites", "title": "rubocop cops disagree: Layout/EmptyLineAfterGuardClause vs Layout/TrailingWhitespace", "body": "<p><code>Ruby 2.6.5</code>\n<code>Rails 5.2.3</code></p>\n\n<p>When I ran <code>rubocop app/models/foo.rb</code>, I got:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>app/models/foo.rb:24:5: C: Layout/EmptyLineAfterGuardClause: Add empty line after guard clause.\n    return false if new_record?\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\n1 file inspected, 1 offense detected\n</code></pre>\n\n<p>So I made the change:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># before\ndef readonly?\n  return false if new_record?\n  bars.any?\nend\n\n#after\ndef readonly?\n  return false if new_record?\n\n  bars.any?\nend\n</code></pre>\n\n<p>And got:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>app/models/foo.rb:25:1: C: Layout/TrailingWhitespace: Trailing whitespace detected.\n\n1 file inspected, 1 offense detected\n</code></pre>\n\n<p>Fixing one triggered the other and vice-versa forever.</p>\n\n<p>If I want this file to pass rubocop and be good in terms of Ruby/Rails way, which cop is best to ignore?</p>\n"}, {"tags": ["ruby", "macos", "hanami"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1574482029, "post_id": 59004089, "comment_id": 104258762, "body": "Output of <code>which hanami</code>?"}, {"owner": {"reputation": 23, "user_id": 3355226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66426009b8a0d90d6184850184ba856b?s=128&d=identicon&r=PG&f=1", "display_name": "tomoyuki-kosaka", "link": "https://stackoverflow.com/users/3355226/tomoyuki-kosaka"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1574506849, "post_id": 59004089, "comment_id": 104262661, "body": "<code>hanami not found</code> I&#39;m using zsh."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1574537237, "post_id": 59004089, "comment_id": 104270574, "body": "How <i>exactly</i> did you install it? Run <code>gem env</code> and copy/paste the output into your question, formatting it appropriately for readability. Don&#39;t use &quot;edited&quot; or &quot;updated&quot; tags to mark it because we can see what&#39;s changed."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1574537745, "post_id": 59004089, "comment_id": 104270701, "body": "Have you tried running <code>rehash</code> from the command-line?"}, {"owner": {"reputation": 23, "user_id": 3355226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66426009b8a0d90d6184850184ba856b?s=128&d=identicon&r=PG&f=1", "display_name": "tomoyuki-kosaka", "link": "https://stackoverflow.com/users/3355226/tomoyuki-kosaka"}, "edited": false, "score": 0, "creation_date": 1574545546, "post_id": 59004089, "comment_id": 104272725, "body": "I tried run <code>rehash</code> but no effect."}, {"owner": {"reputation": 23, "user_id": 3355226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66426009b8a0d90d6184850184ba856b?s=128&d=identicon&r=PG&f=1", "display_name": "tomoyuki-kosaka", "link": "https://stackoverflow.com/users/3355226/tomoyuki-kosaka"}, "edited": false, "score": 0, "creation_date": 1574600136, "post_id": 59004089, "comment_id": 104281936, "body": "Sorry, I can&#39;t attach the output of <code>gem env</code>. How to do it? Edit the first post is always show errors... I&#39;m not so much familiar with stack overflow..."}, {"owner": {"reputation": 23, "user_id": 3355226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66426009b8a0d90d6184850184ba856b?s=128&d=identicon&r=PG&f=1", "display_name": "tomoyuki-kosaka", "link": "https://stackoverflow.com/users/3355226/tomoyuki-kosaka"}, "edited": false, "score": 0, "creation_date": 1574639095, "post_id": 59004089, "comment_id": 104292037, "body": "This happens not only on one computer but also several, at least two. Do I need to install another application before the install the hanami gem?"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 3355226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66426009b8a0d90d6184850184ba856b?s=128&d=identicon&r=PG&f=1", "display_name": "tomoyuki-kosaka", "link": "https://stackoverflow.com/users/3355226/tomoyuki-kosaka"}, "edited": false, "score": 0, "creation_date": 1575114530, "post_id": 59110992, "comment_id": 104461909, "body": "Thank you! I see. I need add the EXECUTABLE DIRECTORY: to PATH. Now I can run hanami command."}, {"owner": {"reputation": 59, "user_id": 2902145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/anMup.png?s=128&g=1", "display_name": "Captain Husayn Penguin", "link": "https://stackoverflow.com/users/2902145/captain-husayn-penguin"}, "reply_to_user": {"reputation": 23, "user_id": 3355226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66426009b8a0d90d6184850184ba856b?s=128&d=identicon&r=PG&f=1", "display_name": "tomoyuki-kosaka", "link": "https://stackoverflow.com/users/3355226/tomoyuki-kosaka"}, "edited": false, "score": 0, "creation_date": 1579363911, "post_id": 59110992, "comment_id": 105745302, "body": "@tomoyuki-kosaka Yeah! of course! \ud83d\ude04 I hope this edit has no errors,"}], "tags": [], "owner": {"reputation": 59, "user_id": 2902145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/anMup.png?s=128&g=1", "display_name": "Captain Husayn Penguin", "link": "https://stackoverflow.com/users/2902145/captain-husayn-penguin"}, "is_accepted": false, "score": 1, "last_activity_date": 1579363872, "last_edit_date": 1579363872, "creation_date": 1575061688, "answer_id": 59110992, "question_id": 59004089, "link": "https://stackoverflow.com/questions/59004089/how-to-install-and-run-hanami-new-bookshelf-from-zsh/59110992#59110992", "title": "How to install and run &quot;hanami new bookshelf&quot; from zsh", "body": "<p>Same issue here; with a fresh installed MacOS Sierra, ruby &amp; etc.</p>\n\n<p><code>gem env</code> output:</p>\n\n<pre><code>RubyGems Environment:\n  - RUBYGEMS VERSION: 3.0.6\n  - RUBY VERSION: 2.6.5 (2019-10-01 patchlevel 114) [x86_64-darwin16]\n  - INSTALLATION DIRECTORY: /usr/local/lib/ruby/gems/2.6.0\n  - USER INSTALLATION DIRECTORY: /Users/captainhusaynpenguin/.gem/ruby/2.6.0\n  - RUBY EXECUTABLE: /usr/local/opt/ruby/bin/ruby\n  - GIT EXECUTABLE: /usr/local/bin/git\n  - EXECUTABLE DIRECTORY: /usr/local/lib/ruby/gems/2.6.0/bin\n  - SPEC CACHE DIRECTORY: /Users/captainhusaynpenguin/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: /usr/local/Cellar/ruby/2.6.5/etc\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x86_64-darwin-16\n  - GEM PATHS:\n     - /usr/local/lib/ruby/gems/2.6.0\n     - /Users/captainhusaynpenguin/.gem/ruby/2.6.0\n     - /usr/local/Cellar/ruby/2.6.5/lib/ruby/gems/2.6.0\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n  - SHELL PATH:\n     - /usr/local/opt/ruby/bin\n     - /usr/local/opt/ruby/bin\n     - /usr/local/opt/ruby/bin\n     - /usr/local/bin\n     - /usr/bin\n     - /bin\n     - /usr/sbin\n     - /sbin\n</code></pre>\n\n<p>and finally, with the answer to a <a href=\"https://stackoverflow.com/questions/2392293/ruby-gems-returns-command-not-found\">similar question</a> by rubiii:</p>\n\n<p>adding the <code>EXECUTABLE DIRECTORY</code> to PATH was the solution.</p>\n\n<p>Quick command from above example:</p>\n\n<pre><code>export PATH=$PATH:/usr/local/lib/ruby/gems/2.6.0/bin\n</code></pre>\n\n<p>For <a href=\"https://www.architectryan.com/2012/10/02/add-to-the-path-on-mac-os-x-mountain-lion/#.Uydjga1dXDg\" rel=\"nofollow noreferrer\">permanently adding it to path</a>:</p>\n\n<pre><code>sudo nano /etc/paths\n</code></pre>\n\n<p>was the fix.</p>\n"}], "owner": {"reputation": 23, "user_id": 3355226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66426009b8a0d90d6184850184ba856b?s=128&d=identicon&r=PG&f=1", "display_name": "tomoyuki-kosaka", "link": "https://stackoverflow.com/users/3355226/tomoyuki-kosaka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1579363872, "creation_date": 1574477225, "last_edit_date": 1574537412, "question_id": 59004089, "link": "https://stackoverflow.com/questions/59004089/how-to-install-and-run-hanami-new-bookshelf-from-zsh", "title": "How to install and run &quot;hanami new bookshelf&quot; from zsh", "body": "<p>I installed the <a href=\"https://hanamirb.org/\" rel=\"nofollow noreferrer\">Hanami</a> gem and ran <code>hanami new bookshelf</code> but got</p>\n\n<pre><code>zsh: command not found: hanami\n</code></pre>\n\n<p>I'm running:</p>\n\n<pre><code>macos 10.15.1  \nhomebrew: 2.1.16  \nruby: 2.6.5p114  \nrubygem: 3.0.6  \nhanami: 1.3.3  \n</code></pre>\n\n<p>Does anyone know how to resolve this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5.2"], "comments": [{"owner": {"reputation": 2624, "user_id": 1880203, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/5c7a5fcd85529e17f9aa86c1e9a5490e?s=128&d=identicon&r=PG", "display_name": "Chiperific", "link": "https://stackoverflow.com/users/1880203/chiperific"}, "edited": false, "score": 0, "creation_date": 1574478007, "post_id": 59003970, "comment_id": 104258218, "body": "The view you posted: is that the exact same for both #edit and #new? If not, please post both views."}, {"owner": {"reputation": 2624, "user_id": 1880203, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/5c7a5fcd85529e17f9aa86c1e9a5490e?s=128&d=identicon&r=PG", "display_name": "Chiperific", "link": "https://stackoverflow.com/users/1880203/chiperific"}, "edited": false, "score": 0, "creation_date": 1574478189, "post_id": 59003970, "comment_id": 104258249, "body": "Why pass <code>@form_type</code> to the partial? Just add it as a hidden field in the view."}, {"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "reply_to_user": {"reputation": 2624, "user_id": 1880203, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/5c7a5fcd85529e17f9aa86c1e9a5490e?s=128&d=identicon&r=PG", "display_name": "Chiperific", "link": "https://stackoverflow.com/users/1880203/chiperific"}, "edited": false, "score": 0, "creation_date": 1574478274, "post_id": 59003970, "comment_id": 104258257, "body": "There is no new action."}, {"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "reply_to_user": {"reputation": 2624, "user_id": 1880203, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/5c7a5fcd85529e17f9aa86c1e9a5490e?s=128&d=identicon&r=PG", "display_name": "Chiperific", "link": "https://stackoverflow.com/users/1880203/chiperific"}, "edited": false, "score": 0, "creation_date": 1574478360, "post_id": 59003970, "comment_id": 104258267, "body": "Form type is passed to the helper to help show the fields to update."}, {"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "reply_to_user": {"reputation": 2624, "user_id": 1880203, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/5c7a5fcd85529e17f9aa86c1e9a5490e?s=128&d=identicon&r=PG", "display_name": "Chiperific", "link": "https://stackoverflow.com/users/1880203/chiperific"}, "edited": false, "score": 0, "creation_date": 1574478406, "post_id": 59003970, "comment_id": 104258272, "body": "The fields display differently based on the form type"}, {"owner": {"reputation": 2624, "user_id": 1880203, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/5c7a5fcd85529e17f9aa86c1e9a5490e?s=128&d=identicon&r=PG", "display_name": "Chiperific", "link": "https://stackoverflow.com/users/1880203/chiperific"}, "edited": false, "score": 0, "creation_date": 1574478460, "post_id": 59003970, "comment_id": 104258284, "body": "#edit is GET, #update is POST. How are you passing the <code>[:form]</code> param to the edit page?"}, {"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "reply_to_user": {"reputation": 2624, "user_id": 1880203, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/5c7a5fcd85529e17f9aa86c1e9a5490e?s=128&d=identicon&r=PG", "display_name": "Chiperific", "link": "https://stackoverflow.com/users/1880203/chiperific"}, "edited": false, "score": 0, "creation_date": 1574478558, "post_id": 59003970, "comment_id": 104258296, "body": "See above url.  ?form=address"}], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1574498218, "post_id": 59004256, "comment_id": 104260992, "body": "This answer is technically incorrect. &quot;When your form submits, it&#39;s doing so in the context of a User, so all the User params are nested under user (hence simple_form_for User).&quot; - just no. The form builder creates nested inputs by naming them <code>model_name[attribute]</code>. If you have multiple inputs the query string will look like <code>?user[name]=bob&amp;user[email]=bob@example.com</code> but it can contain multiple other parameters like for example <code>?user[name]=bob&amp;form_type=address&amp;foo=bar</code>."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1574498347, "post_id": 59004256, "comment_id": 104261021, "body": "For POST request its the same except passed in the request body."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1574498669, "post_id": 59004256, "comment_id": 104261086, "body": "&quot;You could try doing something like /profiles/edit?user=[form=address] but I bet probably isn&#39;t allowed and you could spend hours trying to make a URL look like a POST form submission.&quot;. <code>&#47;profiles&#47;edit?user[form]=address</code>. Not very hard at all."}], "tags": [], "owner": {"reputation": 2624, "user_id": 1880203, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/5c7a5fcd85529e17f9aa86c1e9a5490e?s=128&d=identicon&r=PG", "display_name": "Chiperific", "link": "https://stackoverflow.com/users/1880203/chiperific"}, "is_accepted": false, "score": 0, "last_activity_date": 1574542423, "last_edit_date": 1592644375, "creation_date": 1574479323, "answer_id": 59004256, "question_id": 59003970, "link": "https://stackoverflow.com/questions/59003970/make-parameter-accessible-by-two-actions-in-same-way-paramsuserform/59004256#59004256", "title": "Make parameter accessible by two actions in same way. params[:user][:form]", "body": "<p><em><strong>Updated with @Max's corrections</strong></em></p>\n<p>Your issue is with how you are passing the param to the <code>edit</code> controller action (which is a GET request) vs. how the form passes params to the <code>update</code> controller action (which is a POST request, so the form values are in the request body).</p>\n<p>With GET requests, everything you pass past the <code>?</code> gets &quot;parameterized&quot;.</p>\n<p>When you pass <code>/profiles/edit?form=address</code> then <code>params[:form]</code> is available.</p>\n<p>When your form submits, the form builder creates nested inputs by naming them with a <code>model_name[attribute]</code> convention.</p>\n<h3>To achieve what you asked, you can just do <code>/profiles/edit?user[form]=address</code></h3>\n<p>IMHO, you should do <code>params[:form]</code> in both contexts instead of <code>params[:user][:form]</code>.</p>\n<p>You can get <code>params[:form]</code> in your partial by not using the <code>simple_form</code> helpers.</p>\n<p>Try a standard <a href=\"https://apidock.com/rails/ActionView/Helpers/FormTagHelper/text_field_tag\" rel=\"nofollow noreferrer\">text_field_tag</a> instead of a <code>f.field</code> tag. Make sure to set the HTML name  value as <code>form</code>:</p>\n<p><code>text_field_tag 'form' @form_type</code></p>\n<p>Then when you render the view, you should see something like this:</p>\n<p><strong>what you have:</strong>\n<code>&lt;input id=&quot;user_form&quot; name=&quot;user[form]&quot; type=&quot;text&quot; /&gt;</code></p>\n<p><strong>what you want:</strong>\n<code>&lt;input id=&quot;form&quot; name=&quot;form&quot; type=&quot;text&quot; /&gt;</code></p>\n<p>Also, I'd suggest switching your param to <code>form_type</code> since SimpleForm might use <code>#user_form</code> as the ID of the form (<code>&lt;form id=&quot;user_form&quot; ...&gt;</code>) and that would make any Javascript lookups by ID get conflicty.</p>\n"}, {"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 1, "last_activity_date": 1574518728, "last_edit_date": 1574518728, "creation_date": 1574497402, "answer_id": 59005833, "question_id": 59003970, "link": "https://stackoverflow.com/questions/59003970/make-parameter-accessible-by-two-actions-in-same-way-paramsuserform/59005833#59005833", "title": "Make parameter accessible by two actions in same way. params[:user][:form]", "body": "<p>Rails (technically its Rack) nests inputs by the name attribute. So if you submit this form:</p>\n\n<pre><code>&lt;form action=\"/somepath\"&gt;\n  &lt;input name=\"foo\" value=\"1\" type/&gt;\n  &lt;input name=\"bar[baz]\" value=\"2\" type/&gt;\n  &lt;input name=\"moo[woo]\" value=\"3\"/&gt;\n  &lt;input type=\"submit\" value=\"send\"&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>You would get the following params hash:</p>\n\n<pre><code>{ \n   foo: 1,\n   bar: {\n     baz: 2\n   },\n   moo: {\n     woo: 3\n   }\n}\n</code></pre>\n\n<p>The raw parameters would look like:</p>\n\n<pre><code>foo=1&amp;bar[baz]=2&amp;moo[woo]=3\n</code></pre>\n\n<p>Rack treats these parameters the same way regardless if they are sent via the query string or in the form body.</p>\n\n<p>So if you want to pass the key as <code>params[:user][:form]</code> in the query you want the url <code>/profiles/edit?user[form]=address</code>. </p>\n\n<p>You can create a link by:</p>\n\n<pre><code># Im just guessing the name of the helper\n&lt;%= link_to 'Edit', profiles_edit_path(user: { form: 'address' }) %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1574542972, "post_id": 59011497, "comment_id": 104272072, "body": "Very good point about using nested routes. That would most likely be a much better design"}], "tags": [], "owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "is_accepted": false, "score": 2, "last_activity_date": 1574544640, "last_edit_date": 1574544640, "creation_date": 1574538057, "answer_id": 59011497, "question_id": 59003970, "link": "https://stackoverflow.com/questions/59003970/make-parameter-accessible-by-two-actions-in-same-way-paramsuserform/59011497#59011497", "title": "Make parameter accessible by two actions in same way. params[:user][:form]", "body": "<p>First, I believe the <code>form</code>-type (address, I wonder what the other options are? profile, account, details ...) is not saved to the user, it is just a parameter you need on the controller side to know which part of the profile to update (imho it would not make sense to save the <code>form</code> parameter in the profile). So I am guessing you have some kind of multi-page form and solve it this way. </p>\n\n<p>Well the easiest way imho, is to keep your url as is, and in your form write: </p>\n\n<pre><code>&lt;%= simple_form_for current_user, url: profiles_path, wrapper: :input_group  do |f| %&gt;\n  &lt;%= render_user_form(f, @form_type, self) %&gt;\n  &lt;%= hidden_field_tag :form, @form_type %&gt;\n  &lt;div class=\"action\"&gt;\n    &lt;%= f.submit 'Update', class: ''%&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This will add a hidden field, but not in the context of the user, so it will just be <code>params[:form]</code>. This I believe will be more correct. </p>\n\n<p>Secondly, I have some small remarks with regards to your approach: </p>\n\n<ul>\n<li>why not use <code>profile</code> singular? It is imho your intention to send the user to their profile (and there is only one, right?). In your routes you can write <code>resource :profile</code>. See documentation for <a href=\"https://guides.rubyonrails.org/routing.html#singular-resources\" rel=\"nofollow noreferrer\">singular resource</a> (which coincidentally uses the profile example)</li>\n<li>why not use nested resources for the different parts of a profile: this could also more naturally map to your data-model (or maybe it should): a user has an address (and probably more than one --a current, a delivery, invoicing, ...), has extra info, and then your urls would look like <code>profile/address/edit</code> (and then you would not have to handle the <code>render_user_form</code> with a form-type so akwardly).</li>\n</ul>\n"}], "owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 59005833, "answer_count": 3, "score": 1, "last_activity_date": 1574544640, "creation_date": 1574475406, "question_id": 59003970, "link": "https://stackoverflow.com/questions/59003970/make-parameter-accessible-by-two-actions-in-same-way-paramsuserform", "title": "Make parameter accessible by two actions in same way. params[:user][:form]", "body": "<h3>Route:</h3>\n\n<p>edit action:\n<code>/profiles/edit?form=address</code></p>\n\n<h2>Controller</h2>\n\n<pre><code>before_action :form_type, only: %i[edit update]\n\ndef edit\nend\n\ndef update\nend\n\ndef form_type\n     @form_type = params[:form] || params[:user][:form]\nend\n</code></pre>\n\n<h3>View</h3>\n\n<pre><code>&lt;%= simple_form_for current_user, url: profiles_path, wrapper: :input_group  do |f| %&gt;\n                &lt;%= render_user_form(f, @form_type, self) %&gt;\n                &lt;%= f.input :form, as: :hidden , :input_html =&gt; {value: @form_type} %&gt;\n                &lt;div class=\"action\"&gt;\n                  &lt;%= f.submit 'Update', class: ''%&gt;\n                &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>When my parameters get passed to the controller, on the edit page, it passes through to params[:form], but for the update action it's accessible as params[:user][:form]. How do I get the edit page to also make the param accessible the same way as.. params[:user][:form].</p>\n\n<p>I prefer to access as params[:user][:form], not as params[:form], for both actions, if possible.</p>\n"}]