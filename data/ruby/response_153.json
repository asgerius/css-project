[{"tags": ["ruby-on-rails", "ruby", "database", "entity-relationship-model", "relational-model"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1513208221, "post_id": 47803650, "comment_id": 82568911, "body": "Is there a question?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1513208247, "post_id": 47803650, "comment_id": 82568922, "body": "Also, drop the attr_accessors. They&#39;re not doing what you think they do."}, {"owner": {"reputation": 47, "user_id": 7916042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52bc30847413a8a50ac646028bec7585?s=128&d=identicon&r=PG&f=1", "display_name": "mlbiche", "link": "https://stackoverflow.com/users/7916042/mlbiche"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1513208571, "post_id": 47803650, "comment_id": 82569018, "body": "@SergioTulentsev Well, my test doesn&#39;t produce what I an expecting so I&#39;m looking for a solution in order to have the correct behaviour (p2.save returning false because the article is already bought by a client)."}, {"owner": {"reputation": 47, "user_id": 7916042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52bc30847413a8a50ac646028bec7585?s=128&d=identicon&r=PG&f=1", "display_name": "mlbiche", "link": "https://stackoverflow.com/users/7916042/mlbiche"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1513208701, "post_id": 47803650, "comment_id": 82569049, "body": "@SergioTulentsev Can you be more precise about atr_accessors ? What I have understood is that attr_accessors are equivalent to declaring getter/setter in Java ?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1513239706, "post_id": 47803650, "comment_id": 82578631, "body": "&quot;are equivalent to declaring getter/setter in Java&quot; - correct, but this is counter-productive here. You don&#39;t <i>need</i> them in your models.  Declaring them overwrites getters/setters generated by active record. As a result, these properties won&#39;t get persisted."}, {"owner": {"reputation": 47, "user_id": 7916042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52bc30847413a8a50ac646028bec7585?s=128&d=identicon&r=PG&f=1", "display_name": "mlbiche", "link": "https://stackoverflow.com/users/7916042/mlbiche"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1513245963, "post_id": 47803650, "comment_id": 82582378, "body": "@SergioTulentsev Ok, thank you, I&#39;m understanding ! :)"}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 7916042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52bc30847413a8a50ac646028bec7585?s=128&d=identicon&r=PG&f=1", "display_name": "mlbiche", "link": "https://stackoverflow.com/users/7916042/mlbiche"}, "edited": false, "score": 0, "creation_date": 1513248221, "post_id": 47809149, "comment_id": 82583976, "body": "Thank you for your detailed answer. <code>validates :article_id, uniqueness: {scope: :seller_id}</code> translates the fact that an article_id is unique for a given seller_id. Am I understanding right ?"}, {"owner": {"reputation": 126, "user_id": 3445654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446f71c9a05348d9a1d7a9476299b652?s=128&d=identicon&r=PG&f=1", "display_name": "Ankush", "link": "https://stackoverflow.com/users/3445654/ankush"}, "reply_to_user": {"reputation": 47, "user_id": 7916042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52bc30847413a8a50ac646028bec7585?s=128&d=identicon&r=PG&f=1", "display_name": "mlbiche", "link": "https://stackoverflow.com/users/7916042/mlbiche"}, "edited": false, "score": 0, "creation_date": 1513320869, "post_id": 47809149, "comment_id": 82616709, "body": "It caters to the requirement of same seller not being able to sell the same article regardless of the amount of articles. This validation would not allow you the have any duplicate pair of article_id and seller_id in purchasing table. So I should rather say that one seller can sell one particular article only once. If your requirement is different, your design should change likewise. I hope it helps!"}, {"owner": {"reputation": 47, "user_id": 7916042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52bc30847413a8a50ac646028bec7585?s=128&d=identicon&r=PG&f=1", "display_name": "mlbiche", "link": "https://stackoverflow.com/users/7916042/mlbiche"}, "edited": false, "score": 0, "creation_date": 1513425988, "post_id": 47809149, "comment_id": 82654974, "body": "Thank you for your answer. It clarifies everything. Finally, I think I should update my model as you say, it isn&#39;t so relevant"}], "tags": [], "owner": {"reputation": 126, "user_id": 3445654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446f71c9a05348d9a1d7a9476299b652?s=128&d=identicon&r=PG&f=1", "display_name": "Ankush", "link": "https://stackoverflow.com/users/3445654/ankush"}, "is_accepted": true, "score": 1, "last_activity_date": 1513241069, "creation_date": 1513241069, "answer_id": 47809149, "question_id": 47803650, "link": "https://stackoverflow.com/questions/47803650/translating-database-models-to-models-on-ruby-on-rails/47809149#47809149", "title": "Translating Database Models to Models on Ruby On Rails", "body": "<p>You are adding the index on incorrect columns on purchasings table. As per the requirement, the article_id and seller_id should not get repeated ideally. So you actually need is a uniqueness constraint on seller_id, and article_id column. You can do so by creating an unique index on the composition of two columns seller_id, and article id on the database layer. You should also add the application layer validation on the purchasing model.</p>\n\n<pre><code>class Purchasing &lt; ApplicationRecord\nattr_accessor :client_id, :seller_id, :article_id\n\nbelongs_to :client, :class_name =&gt; \"Client\"\nbelongs_to :seller, :class_name =&gt; \"Seller\"\nbelongs_to :article, :class_name =&gt; \"Article\"\n\nvalidates :client_id, :presence =&gt; true\nvalidates :seller_id, :presence =&gt; true\nvalidates :article_id, :presence =&gt; true\n\nvalidates :article_id, uniqueness: {scope: :seller_id}\nend\n</code></pre>\n\n<p>Now you should also write a database migration to add the unique index on these two columns.</p>\n\n<pre><code>    class AddUniquenessConstraintInPurshasing &lt; ActiveRecord::Migration\n       def change\n         add_index :purchasings, [:article_id, :seller_id], :unique =&gt; true\n    end\n</code></pre>\n\n<p>end      </p>\n"}], "owner": {"reputation": 47, "user_id": 7916042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52bc30847413a8a50ac646028bec7585?s=128&d=identicon&r=PG&f=1", "display_name": "mlbiche", "link": "https://stackoverflow.com/users/7916042/mlbiche"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 47809149, "answer_count": 1, "score": 1, "last_activity_date": 1513241069, "creation_date": 1513207614, "last_edit_date": 1513208313, "question_id": 47803650, "link": "https://stackoverflow.com/questions/47803650/translating-database-models-to-models-on-ruby-on-rails", "title": "Translating Database Models to Models on Ruby On Rails", "body": "<p>I am beginning Ruby On Rails through a purchase/resale platform project at school. I'm having an issue with my models when I try to translate them from my relational model.</p>\n\n<p>Firstly, I've modelled my database. Here is simplified the entity-relationship model :</p>\n\n<p><a href=\"https://i.stack.imgur.com/I1Zru.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/I1Zru.png\" alt=\"Entity-relationship model\"></a></p>\n\n<p>I've then translated it in a relational model :</p>\n\n<p><a href=\"https://i.stack.imgur.com/wG0kY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wG0kY.png\" alt=\"Relational model\"></a></p>\n\n<p>Finally, I've implemented it in Ruby On Rails.</p>\n\n<ul>\n<li><p>I've implemented a model Client :</p>\n\n<pre><code>class Client &lt; ApplicationRecord\n    attr_accessor :name\n\n    validates :name, :presence =&gt; true\n\n    has_many :purchasings, :dependent =&gt; :destroy\n\n    has_many :sellers, :through =&gt; :purchasings\n    has_many :articles, :through =&gt; :purchasings\nend\n</code></pre></li>\n<li><p>I've implemented a model Seller :</p>\n\n<pre><code>class Seller &lt; ApplicationRecord\n    attr_accessor :name\n\n    validates :name, :presence =&gt; true\n\n    has_many :purchasings, :dependent =&gt; :destroy\n\n    has_many :sellers, :through =&gt; :purchasings\n    has_many :articles, :through =&gt; :purchasings\nend\n</code></pre></li>\n<li><p>I've implemented a model Article</p>\n\n<pre><code>class Article &lt; ApplicationRecord\n    attr_accessor :quantity\n\n    validates :quantity, :presence =&gt; true\n\n    has_one :purchasing, :dependent =&gt; :destroy\n\n    has_one :client, :through =&gt; :purchasings\n    has_one :seller, :through =&gt; :purchasings\nend\n</code></pre></li>\n<li><p>I've implemented a model Purchasing :</p>\n\n<pre><code>class Purchasing &lt; ApplicationRecord\n    attr_accessor :client_id, :seller_id, :article_id\n\n    belongs_to :client, :class_name =&gt; \"Client\"\n    belongs_to :seller, :class_name =&gt; \"Seller\"\n    belongs_to :article, :class_name =&gt; \"Article\"\n\n    validates :client_id, :presence =&gt; true\n    validates :seller_id, :presence =&gt; true\n    validates :article_id, :presence =&gt; true\nend\n</code></pre></li>\n<li><p>I've modified the Purchasing database migration :</p>\n\n<pre><code>class CreatePurchasing &lt; ActiveRecord::Migration[5.1]\n    def change\n        [...]\n\n        add_index :purchasings, :client_id\n        add_index :purchasings, :seller_id\n        add_index :purchasings, :article_id\n        add_index :purchasings, [:client_id, :seller_id], :unique =&gt; true\n    end\n\n    def down\n        [...]\n    end\nend\n</code></pre></li>\n</ul>\n\n<p>I know this is incorrect because when I execute the following code on the Rails console :</p>\n\n<pre><code>cl1 = Client.create(:name =&gt; \"John\")\ncl2 = Client.create(:name =&gt; \"James\")\nsel1 = Seller.create(:nom =&gt; \"Jack\")\nsel2 = Seller.create(:nom =&gt; \"Jil\")\na1 = Article.create(:quantity =&gt; 5)\n\np1 = Purchasing.new(:client =&gt; cl1, :client_id =&gt; cl1.id, :seller =&gt; sel1, :seller_id =&gt; sel1.id, :article =&gt; a1, :article_id =&gt; a1.id)\np1.save\np2 = Purchasing.new(:client =&gt; cl2, :client_id =&gt; cl2.id, :seller =&gt; sel1, :seller_id =&gt; sel1.id, :article =&gt; a1, :article_id =&gt; a1.id)\np2.save\n</code></pre>\n\n<p><code>p2.save</code> returns true whereas an article can't be sold by a same seller and bought by two clients different.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 2, "creation_date": 1513207425, "post_id": 47803567, "comment_id": 82568644, "body": "What do you think is wrong with that? It seems perfectly fine to me."}, {"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "reply_to_user": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 0, "creation_date": 1513207526, "post_id": 47803567, "comment_id": 82568677, "body": "<code>a &amp;&amp;= nil.a</code> should always be <code>nil</code> instead of raising error sometimes. <code>a &amp;&amp;= 1.to_s</code> should always assign <code>&#39;1&#39;</code> to <code>a</code> instead of <code>nil</code> sometimes."}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 1, "creation_date": 1513207857, "post_id": 47803567, "comment_id": 82568809, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2982947/ruby-edge-case\">Ruby &amp;&amp;= edge case</a>"}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 1, "creation_date": 1513207948, "post_id": 47803567, "comment_id": 82568834, "body": "Particularly, <code>&amp;&amp;=</code> is NOT a shortcut for <code>x = x &amp;&amp; y</code>. It is a shortcut for <code>x = x &amp;&amp; y if x</code>. The <code>if x</code> is causing your confusion, I think..."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1513213044, "post_id": 47803567, "comment_id": 82570227, "body": "They said <code>x = x &amp;&amp; y if x</code>, so your <code>a = num &amp;&amp; num.to_s if num</code> is wrong and should be <code>a = a &amp;&amp; num.to_s if a</code>."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 1, "creation_date": 1513213249, "post_id": 47803567, "comment_id": 82570282, "body": "And where&#39;s the evidence for &quot;by most people&#39;s standard&quot;? You&#39;re not most people."}, {"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1513216538, "post_id": 47803567, "comment_id": 82571041, "body": "@StefanPochmann you made a point there. but this is not the equivalent of what the style guide suggests. <code>a &amp;&amp;= b.c</code> != <code>a = b &amp;&amp; b.c</code> And it seems that&#39;s how most people are understanding it."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1513267078, "post_id": 47803567, "comment_id": 82596537, "body": "So far in 2017, 243 SO questions concerned apparent Ruby bugs. Two of those identified actual bugs.  (Disclaimer: my estimates.)"}, {"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1513268338, "post_id": 47803567, "comment_id": 82597392, "body": "@StefanPochmann The style guide suggests using it to replace \u2018a = b &amp;&amp; b.some_method\u2019. But they have different intended purpose. If you <b>read</b> the style guide you will see that. And <b>imho</b> that\u2019s miss leading and can cause unintended bug."}, {"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1513268725, "post_id": 47803567, "comment_id": 82597648, "body": "@CarySwoveland this is not a bug you\u2019re right. But it\u2019s one of those <b>uh what?</b> operations that throw some people off. And apparently not many people understand what \u2018&amp;&amp;=\u2018 actually does and hence the blog post and the other SO thread. And now this thread is going to give people a better understanding of what it does (at least to me)."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1513269474, "post_id": 47803567, "comment_id": 82598137, "body": "You began with &quot;Encountered a weird bug.&quot;, not &quot;Encountered a Ruby behavior I don&#39;t understand&quot;.  Other than that, it&#39;s a good question. My comment was in jest (refecting my observations over time) and not directed at your question specifically."}, {"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1513269936, "post_id": 47803567, "comment_id": 82598428, "body": "@StefanPochmann <a href=\"https://github.com/bbatsov/ruby-style-guide/blob/master/README.md#self-assignment\" rel=\"nofollow noreferrer\">github.com/bbatsov/ruby-style-guide/blob/master/&hellip;</a>"}, {"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1513269991, "post_id": 47803567, "comment_id": 82598465, "body": "@CarySwoveland good point. I thought it was a bug. But now I changed my mind. I\u2019ll fix that"}, {"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1513270051, "post_id": 47803567, "comment_id": 82598505, "body": "@StefanPochmann <a href=\"https://github.com/bbatsov/ruby-style-guide/blob/master/README.md#double-amper-preprocess\" rel=\"nofollow noreferrer\">github.com/bbatsov/ruby-style-guide/blob/master/&hellip;</a>"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1513270077, "post_id": 47803567, "comment_id": 82598528, "body": "@EdmundLee Those don&#39;t show what you claim."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1513271144, "post_id": 47803567, "comment_id": 82599182, "body": "@EdmundLee Presumably you mean the guide&#39;s <code>something = something &amp;&amp; something.downcase</code> vs <code>something &amp;&amp;= something.downcase</code>. Which is <b>not</b> <code>something = somethingELSE &amp;&amp; somethingELSE.downcase</code> vs <code>something &amp;&amp;= somethingELSE.downcase</code>. You messed that up just like you messed up when you took <code>x = x &amp;&amp; y if x</code> and incorrectly turned it into <code>a = num &amp;&amp; num.to_s if num</code> instead of <code>a = a &amp;&amp; num.to_s if a</code> like I told you earlier and which you still didn&#39;t fix. You can&#39;t just use different things where the rules are about same things."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1513271569, "post_id": 47803567, "comment_id": 82599415, "body": "@EdmundLee If you saw the rule <i>&quot;If person X kills someone then person X must go to prison&quot;</i>, do you honestly think it&#39;s ok to interpret that as <i>&quot;If person X kills someone then person Y must go to prison&quot;</i>? Really?"}], "answers": [{"comments": [{"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1513208987, "post_id": 47803809, "comment_id": 82569143, "body": "In your last block of code, only if <code>a</code>, <code>b</code> or <code>c</code> is defined. Otherwise, it throws an error before it gets to the next nested block."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1513209075, "post_id": 47803809, "comment_id": 82569174, "body": "That&#39;s because this isn&#39;t using the <code>&amp;&amp;=</code> operator which has the side-effect of defining the thing on the left side of it. It doesn&#39;t necessarily <i>populate</i> that variable, though. You can see this in action by calling <code>local_variables</code> before and after you run <code>a &amp;&amp;= nil</code>"}, {"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1513209154, "post_id": 47803809, "comment_id": 82569196, "body": "And what confused me was, before <code>a</code> was defined, <code>a &amp;&amp;= 1</code> doesn&#39;t explode. But it seems it should according to your explanation (since <code>a</code> should be evaluated first)?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1513209289, "post_id": 47803809, "comment_id": 82569243, "body": "The left hand side is <i>conditionally</i> evaluated depending on the value of <code>a</code>, but <code>a</code> is implicitly created as a variable even if that variable is never assigned a value. Sometimes Ruby will &quot;variableify&quot; things if it deems that necessary, like the degenerate case of <code>a = a</code> which &quot;works&quot;."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1513210090, "post_id": 47803809, "comment_id": 82569503, "body": "@StefanPochmann that&#39;s a good point, I&#39;ll edit it. Got mired in a C++ debate on another question and lost track here."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1513210448, "post_id": 47803809, "comment_id": 82569604, "body": "@StefanPochmann I think that got it, where now it stays as <i>whatever</i> if the first <code>if</code> doesn&#39;t pass. This is surprisingly hard to get right!"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1513210908, "post_id": 47803809, "comment_id": 82569715, "body": "@StefanPochmann Thanks for the feedback here. I&#39;ve moved a more complete summary up to the top of the answer with credit."}, {"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1513211048, "post_id": 47803809, "comment_id": 82569751, "body": "I am going to make this conclusion. <b>Don&#39;t use <code>&amp;&amp;=</code></b>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1513211110, "post_id": 47803809, "comment_id": 82569763, "body": "@EdmundLee Yeah, it&#39;s rare to see that in production code as it means &quot;define if only already defined&quot;. I see <code>||=</code> all the time, though."}, {"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1513211437, "post_id": 47803809, "comment_id": 82569831, "body": "@tadman it&#39;s actually recommended in ruby style guide. Created a PR and hopefully it got merged. I will post the link to my edit."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1513251932, "post_id": 47803809, "comment_id": 82586343, "body": "@tadman Actually, your &quot;long-form version&quot; is still not equivalent. Well, maybe it is if <code>a</code> really literally is just <code>a</code>. But not if it&#39;s for example <code>h[0]</code>: <a href=\"https://ideone.com/q8uuJg\" rel=\"nofollow noreferrer\">ideone.com/q8uuJg</a> Your version creates the entry while <code>&amp;&amp;=</code> doesn&#39;t."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1513253619, "post_id": 47803809, "comment_id": 82587450, "body": "@HolgerJust Yeah, it wasn&#39;t written very well. I took the liberty now to put the context first and to add an &quot;only&quot; (that lack had been bugging me already)."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 1, "creation_date": 1513253813, "post_id": 47803809, "comment_id": 82587559, "body": "@tadman Hope that edit is ok. I btw cleaned up (i.e., removed) my obsolete comments."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 8, "last_activity_date": 1514914821, "last_edit_date": 1514914821, "creation_date": 1513208763, "answer_id": 47803809, "question_id": 47803567, "link": "https://stackoverflow.com/questions/47803567/in-ruby-operator-is-flaky/47803809#47803809", "title": "In ruby &amp;&amp;= operator is flaky?", "body": "<p>It's worth noting a few things, several mentioned by Stefan below, about the properties of <code>&amp;&amp;=</code>:</p>\n\n<ul>\n<li>The variable on the left hand side is always considered <em>defined</em> whether or not an assignment is actually made.</li>\n<li>A defined variable assumes the value of <code>nil</code> if no value has been explicitly assigned.</li>\n<li>The term on the right hand side is only evaluated if <code>a</code> is logically true, or more specifically, if <code>a</code> is not one of <code>nil</code> or <code>false</code>.</li>\n<li>As such, if <code>a</code> is not logically true, then the right hand side only has to be <em>syntactically valid</em>, as it won't get evaluated. That means broken code like <code>nil.a</code> is acceptable under those specific conditions, it will get parsed but is otherwise ignored.</li>\n<li>If <code>a</code> is <code>nil</code> or <code>false</code> then the value of <code>a</code> is not changed.</li>\n</ul>\n\n<p>A long-form version of <code>a &amp;&amp;= b</code> is actually:</p>\n\n<pre><code>a = if (a)\n  b\nelse\n  a\nend\n</code></pre>\n\n<p>Where <code>b</code> can be any expression, including things like <code>a &amp;&amp;= b &amp;&amp;= c</code></p>\n\n<p>As to your example, this is to do with if the right hand side of the expression gets evaluated or not. In the first case <code>a</code> is undefined, so it won't be.</p>\n\n<p>Later on when you actually define <code>a</code> as something then it must execute the right hand side, so you end up evaluating <code>nil.a</code> and it explodes.</p>\n\n<p>You can do anything you want in this case:</p>\n\n<pre><code>nil &amp;&amp; whatever(this!, will!, not!, ever!, run!)\n</code></pre>\n\n<p>It's not flaky, it's just not behaving like you think it is. <code>&amp;&amp;</code> is one of those things that's <em>short-circuit</em> evaluated. That is in:</p>\n\n<pre><code>a &amp;&amp; b &amp;&amp; c &amp;&amp; d\n</code></pre>\n\n<p>The actual interpretation is:</p>\n\n<pre><code>if a\n  if b\n    if c\n      d\n    end\n  end\nend\n</code></pre>\n\n<p>So in this representation it's obvious that if any of those conditions fail it bails out and skips the rest.</p>\n\n<p>One thing to observe is that <code>a</code> pops into existence using <code>&amp;&amp;=</code> automatically:</p>\n\n<pre><code>local_variables\n# =&gt; [:_]\na &amp;&amp;= true\n# =&gt; nil\nlocal_variables\n# =&gt; [:a,:_]\n</code></pre>\n\n<p>This is not true with <code>&amp;&amp;</code>.</p>\n"}], "owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 47803809, "answer_count": 1, "score": 0, "last_activity_date": 1514914821, "creation_date": 1513207023, "last_edit_date": 1513270020, "question_id": 47803567, "link": "https://stackoverflow.com/questions/47803567/in-ruby-operator-is-flaky", "title": "In ruby &amp;&amp;= operator is flaky?", "body": "<p>Encountered a weird behavior in Ruby. Wonder if it's just me. I am on ruby 2.3.3. And here's the log. Operate them in order, you should be able to reproduce it.</p>\n\n<pre><code>[1] pry(main)&gt; a &amp;&amp;= nil.a\n=&gt; nil\n[2] pry(main)&gt; a &amp;&amp;= 1.to_s\n=&gt; nil\n[3] pry(main)&gt; a = 1 &amp;&amp; 1.to_s\n=&gt; \"1\"\n[4] pry(main)&gt; a &amp;&amp;= 1.to_s\n=&gt; \"1\"\n[5] pry(main)&gt; a &amp;&amp;= nil.a\nNoMethodError: undefined method `a' for nil:NilClass\nfrom (pry):5:in `__pry__'\n</code></pre>\n\n<p>Look at <a href=\"https://stackoverflow.com/a/2983028/4164651\">1</a> and [5], as well as <a href=\"http://www.rubyinside.com/what-rubys-double-pipe-or-equals-really-does-5488.html\" rel=\"nofollow noreferrer\">2</a> and [4]</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>There is a <a href=\"https://stackoverflow.com/a/2983028/4164651\">similar question on SO</a>. And a <a href=\"http://www.rubyinside.com/what-rubys-double-pipe-or-equals-really-does-5488.html\" rel=\"nofollow noreferrer\">blog post</a> that tries to explain it. But I don't think they explain it.</p>\n\n<p>In the <a href=\"https://stackoverflow.com/a/2983028/4164651\">SO thread</a>, it says <code>&amp;&amp;=</code> is a shortcut for <code>x = x &amp;&amp; y if x</code>. But consider this:</p>\n\n<pre><code>num = 1\na &amp;&amp;= num.to_s\n# =&gt; nil\n</code></pre>\n\n<p>vs</p>\n\n<pre><code>num = 1\na = num &amp;&amp; num.to_s if num\n# =&gt; \"1\"\n</code></pre>\n\n<p>And in ruby if <code>a</code> is undefined, <code>a = a</code> gives you <code>nil</code>. <code>x = x &amp;&amp; y if x</code> by itself is a strange operation.</p>\n\n<pre><code>x = x &amp;&amp; y if x\n</code></pre>\n\n<p>This should be the same as below</p>\n\n<pre><code>if x\n  x = x &amp;&amp; y\nend\n</code></pre>\n\n<p>But this throws an error because <code>x</code> is not defined. So which part is actually evaluated first? Is it <code>x = x &amp;&amp; y</code> or <code>if x</code>?</p>\n"}, {"tags": ["ruby", "uuid", "guid", "ifc"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 9095892, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VPyEtfBZ1Ec/AAAAAAAAAAI/AAAAAAAAGKI/fa9-I5Xn2LM/photo.jpg?sz=128", "display_name": "Jan Brouwer", "link": "https://stackoverflow.com/users/9095892/jan-brouwer"}, "edited": false, "score": 0, "creation_date": 1513285492, "post_id": 47803405, "comment_id": 82606573, "body": "This solution seems very efficient, but it seems to do one thing different from the official specification, which I failed to mention in the question. The official IfcGloballyUniqueId always begins with a 0, 1, 2 or 3. So instead of having a padding at the end of the string it seems to start with a set of 2 bits, and then 21 sets of 6 bits. Instead of 22 sets of 6 bits with padding on the end. Is it possible to tweak the hex or base64 in this way?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 25, "user_id": 9095892, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VPyEtfBZ1Ec/AAAAAAAAAAI/AAAAAAAAGKI/fa9-I5Xn2LM/photo.jpg?sz=128", "display_name": "Jan Brouwer", "link": "https://stackoverflow.com/users/9095892/jan-brouwer"}, "edited": false, "score": 0, "creation_date": 1513288992, "post_id": 47803405, "comment_id": 82608190, "body": "It&#39;s possible, but it&#39;s probably best addressed in another question that can focus on that particular aspect of the problem."}, {"owner": {"reputation": 25, "user_id": 9095892, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VPyEtfBZ1Ec/AAAAAAAAAAI/AAAAAAAAGKI/fa9-I5Xn2LM/photo.jpg?sz=128", "display_name": "Jan Brouwer", "link": "https://stackoverflow.com/users/9095892/jan-brouwer"}, "edited": false, "score": 0, "creation_date": 1513375512, "post_id": 47803405, "comment_id": 82645103, "body": "I created a separate question for this part of the problem: <a href=\"https://stackoverflow.com/questions/47839720/ruby-base64-encode-128-bit-number-by-starting-with-a-2-bit-character-to-prevent\" title=\"ruby base64 encode 128 bit number by starting with a 2 bit character to prevent\">stackoverflow.com/questions/47839720/&hellip;</a>"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 0, "last_activity_date": 1513206099, "creation_date": 1513206099, "answer_id": 47803405, "question_id": 47803212, "link": "https://stackoverflow.com/questions/47803212/how-can-i-convert-a-uuid-to-a-string-using-a-custom-character-set-in-ruby/47803405#47803405", "title": "How can I convert a UUID to a string using a custom character set in Ruby?", "body": "<p>Base64 encoding is pretty close to what you want here, but the mappings are different. No big deal, you can fix that:</p>\n\n<pre><code>require 'securerandom'\nrequire 'base64'\n\n# Define the two mappings here, side-by-side\nBASE64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nIFCB64 = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_$'\n\ndef ifcb64(hex)\n  # Convert from hex to binary, then from binary to Base64\n  # Trim off the == padding, then convert mappings with `tr`\n  Base64.encode64([ hex.tr('-', '') ].pack('H*')).gsub(/\\=*\\n/, '').tr(BASE64, IFCB64)\nend\n\nifcb64(SecureRandom.uuid)\n# =&gt; \"fa9P7E3qJEc1tPxgUuPZHm\"\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 9095892, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VPyEtfBZ1Ec/AAAAAAAAAAI/AAAAAAAAGKI/fa9-I5Xn2LM/photo.jpg?sz=128", "display_name": "Jan Brouwer", "link": "https://stackoverflow.com/users/9095892/jan-brouwer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 878, "favorite_count": 0, "accepted_answer_id": 47803405, "answer_count": 1, "score": 0, "last_activity_date": 1514150140, "creation_date": 1513204919, "last_edit_date": 1514150140, "question_id": 47803212, "link": "https://stackoverflow.com/questions/47803212/how-can-i-convert-a-uuid-to-a-string-using-a-custom-character-set-in-ruby", "title": "How can I convert a UUID to a string using a custom character set in Ruby?", "body": "<p>I want to create a valid IFC GUID (IfcGloballyUniqueId) according to the specification here:\n<a href=\"http://www.buildingsmart-tech.org/ifc/IFC2x3/TC1/html/ifcutilityresource/lexical/ifcgloballyuniqueid.htm\" rel=\"nofollow noreferrer\">http://www.buildingsmart-tech.org/ifc/IFC2x3/TC1/html/ifcutilityresource/lexical/ifcgloballyuniqueid.htm</a></p>\n\n<p>It's basically a UUID or GUID (128 bit) mapped to a set of 22 characters to limit storage space in a text file.</p>\n\n<p>I currently have this workaround, but it's merely an approximation:</p>\n\n<pre><code>guid = '';22.times{|i|guid&lt;&lt;'0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_$'[rand(64)]}\n</code></pre>\n\n<p>It seems best to use ruby SecureRandom to generate a 128 bit UUID, like in this example (<a href=\"https://ruby-doc.org/stdlib-2.3.0/libdoc/securerandom/rdoc/SecureRandom.html\" rel=\"nofollow noreferrer\">https://ruby-doc.org/stdlib-2.3.0/libdoc/securerandom/rdoc/SecureRandom.html</a>):</p>\n\n<pre><code>SecureRandom.uuid #=&gt; \"2d931510-d99f-494a-8c67-87feb05e1594\"\n</code></pre>\n\n<p>This UUID needs to be mapped to a string with a length of 22 characters according to this format:</p>\n\n<pre><code>           1         2         3         4         5         6 \n 0123456789012345678901234567890123456789012345678901234567890123\n\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_$\";\n</code></pre>\n\n<p>I don't understand this exactly.\nShould the 32-character long hex-number be converted to a 128-character long binary number, then devided in 22 sets of 6 bits(except for one that gets the remaining 2 bits?) for which each can be converted to a decimal number from 0 to 64? Which then in turn can be replaced by the corresponding character from the conversion table?</p>\n\n<p>I hope someone can verify if I'm on the right track here.</p>\n\n<p>And if I am, is there a computational faster way in Ruby to convert the 128 bit number to the 22 sets of 0-64 than using all these separate conversions?</p>\n\n<hr>\n\n<p><strong>Edit</strong>: For anyone having the same problem, this is my solution for now:</p>\n\n<pre><code>require 'securerandom'\n\n# possible characters in GUID\nguid64 = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_$'\nguid = \"\"\n\n# SecureRandom.uuid: creates a 128 bit UUID hex string\n# tr('-', ''): removes the dashes from the hex string\n# pack('H*'): converts the hex string to a binary number (high nibble first) (?) is this correct?\n#   This reverses the number so we end up with the leftover bit on the end, which helps with chopping the sting into pieces.\n#   It needs to be reversed again to end up with a string in the original order.\n# unpack('b*'): converts the binary number to a bit string (128 0's and 1's) and places it into an array\n# [0]: gets the first (and only) value from the array\n# to_s.scan(/.{1,6}/m): chops the string into pieces 6 characters(bits) with the leftover on the end.\n\n[SecureRandom.uuid.tr('-', '')].pack('H*').unpack('b*')[0].to_s.scan(/.{1,6}/m).each do |num|\n\n  # take the number (0 - 63) and find the matching character in guid64, add the found character to the guid string\n  guid &lt;&lt; guid64[num.to_i(2)]\nend\nguid.reverse\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1513200891, "post_id": 47802409, "comment_id": 82566247, "body": "Have you considered using a PORO Service Class? Seems like a good use case for one."}, {"owner": {"reputation": 57, "user_id": 9040062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f7d419eb8d7487349a8656414a5592?s=128&d=identicon&r=PG&f=1", "display_name": "proofexak", "link": "https://stackoverflow.com/users/9040062/proofexak"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1513200963, "post_id": 47802409, "comment_id": 82566271, "body": "i will consider it tomorrow maybe another answer will come out but thanks anyway!"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1513200973, "post_id": 47802409, "comment_id": 82566275, "body": "You can try validating the uniqueness by passing an scope <code>validates :appointment_date, uniqueness: { scope: :appointment_time }</code>"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1513201139, "post_id": 47802409, "comment_id": 82566346, "body": "@SebastianPalma - That won&#39;t allow <i>any</i> appointments on the same date/time, correct? Perhaps add <code>employee_id</code> to the uniqueness scope?"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 9040062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f7d419eb8d7487349a8656414a5592?s=128&d=identicon&r=PG&f=1", "display_name": "proofexak", "link": "https://stackoverflow.com/users/9040062/proofexak"}, "edited": false, "score": 0, "creation_date": 1513356199, "post_id": 47802754, "comment_id": 82636728, "body": "First solution is interesting i will have to save it somewhere but the second solution works like a charm! I have set time to be like this: 7:30 - 8:00 - 8:30 - ..... - 14:00 and it works just fine. Thx for the answer!"}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 2, "last_activity_date": 1513202414, "creation_date": 1513202414, "answer_id": 47802754, "question_id": 47802409, "link": "https://stackoverflow.com/questions/47802409/validation-with-two-diffrent-objects-but-same-class/47802754#47802754", "title": "validation with two diffrent objects but same class", "body": "<p>You could simply use a model validation like so </p>\n\n<pre><code> class Appointment &lt; ActiveRecord::Base\n    validate :available_time\n\n    private\n    def available_time\n      other_appointments = Appointment.where(\n                             appointment_date: self.appointment_date,\n                             appointment_time: self.appointment_time,\n                             employee_id: self.employee_id\n                           ) \n      unless other_appointments.empty?\n        [:appointment_date,:appointment_time].each do |attr|\n          errors.add(attr,\"is not available\")\n        end\n      end       \n    end\n end\n</code></pre>\n\n<p>Obviously if your appointments have a time frame e.g. 30 minutes you would need to alter this as it will only check against exact matches. </p>\n\n<p>Also exact matches can be handled but uniqueness checking as mentioned by @SebastianPalma like so </p>\n\n<pre><code>class Appointment &lt; ActiveRecord::Base\n  validates :appointment_date, uniqueness: {scope: [:employee_id,:appointment_time] }\n  # Or \n  validates :appointment_time, uniqueness: {scope: [:employee_id, :appointment_date] } \nend\n</code></pre>\n\n<p>The first will add the error to <code>appointment_date</code> the second to <code>appointment_time</code> or both adds both (but will run multiple queries so better to write your own or pick one field to considered invalid)</p>\n"}], "owner": {"reputation": 57, "user_id": 9040062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f7d419eb8d7487349a8656414a5592?s=128&d=identicon&r=PG&f=1", "display_name": "proofexak", "link": "https://stackoverflow.com/users/9040062/proofexak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 47802754, "answer_count": 1, "score": 1, "last_activity_date": 1513202414, "creation_date": 1513200631, "question_id": 47802409, "link": "https://stackoverflow.com/questions/47802409/validation-with-two-diffrent-objects-but-same-class", "title": "validation with two diffrent objects but same class", "body": "<p>So i have this model Appointment:</p>\n\n<pre><code>validates :purpose, :extra, :appointment_date, :appointment_time, presence: true\n</code></pre>\n\n<p>and now this is situation: i want to get error if someone will want to make appointment in the same day and the same time. So i have to compare two objects of the same class and i have no idea how i can do it.</p>\n\n<p>only one thing comes into my mind</p>\n\n<pre><code>def allready_booked?\n  @employee = Employee.find(params[:employee_id]) &lt;----- this is the part i dont know how to do it\n  @appointments = Appointment.where(appointment_date: appointment_date).where(employee_id: employee.id)\n  @appoitnments.each do |appo|\n    if(appo.appointment_date == appointment_date)\n      errors.add(:appoitnemnt_date, \"is already booked\")\n    end\n  end\nend\n</code></pre>\n\n<p>And yes employee_id is in Appointment model</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 8946657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7afba30ba96d2db09a3a6bb76e5326e4?s=128&d=identicon&r=PG&f=1", "display_name": "Roman", "link": "https://stackoverflow.com/users/8946657/roman"}, "is_accepted": false, "score": 2, "last_activity_date": 1513198537, "last_edit_date": 1513198537, "creation_date": 1513198078, "answer_id": 47801867, "question_id": 47801649, "link": "https://stackoverflow.com/questions/47801649/undefined-method-model-name-for-class0x007f043631a380/47801867#47801867", "title": "undefined method `model_name&#39; for #&lt;Class:0x007f043631a380&gt;", "body": "<p>Make sure your controller and views name is plural.  Try ClassesController and views/classes/new.html.erb. </p>\n"}, {"comments": [{"owner": {"reputation": 784, "user_id": 3449093, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/DFSHe.gif?s=128&g=1", "display_name": "Malvinka", "link": "https://stackoverflow.com/users/3449093/malvinka"}, "edited": false, "score": 0, "creation_date": 1513203844, "post_id": 47801928, "comment_id": 82567424, "body": "Renaming to plural didn&#39;t change anything. Renaming every Class into Klass did the thing. Thank you!"}], "tags": [], "owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "is_accepted": true, "score": 4, "last_activity_date": 1513198704, "last_edit_date": 1513198704, "creation_date": 1513198374, "answer_id": 47801928, "question_id": 47801649, "link": "https://stackoverflow.com/questions/47801649/undefined-method-model-name-for-class0x007f043631a380/47801928#47801928", "title": "undefined method `model_name&#39; for #&lt;Class:0x007f043631a380&gt;", "body": "<p>Your code seem good. It is probably because class is a reserved word in rails : <a href=\"https://reservedwords.herokuapp.com/\" rel=\"noreferrer\">https://reservedwords.herokuapp.com/</a></p>\n\n<p>Try to name your models and controllers something that would not look like some ruby code.</p>\n\n<p>EDIT: What Roman says is correct. Your controller is always plural. Try renaming your controller first as ClassesController.</p>\n"}, {"tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 4, "last_activity_date": 1513199585, "creation_date": 1513199585, "answer_id": 47802195, "question_id": 47801649, "link": "https://stackoverflow.com/questions/47801649/undefined-method-model-name-for-class0x007f043631a380/47802195#47802195", "title": "undefined method `model_name&#39; for #&lt;Class:0x007f043631a380&gt;", "body": "<p>The <code>Class.new</code> line is probably unintentionally referencing the Ruby class <a href=\"https://ruby-doc.org/core-2.4.2/Class.html\" rel=\"nofollow noreferrer\"><code>Class</code></a>. You could try namespacing your <code>Class</code>, for instance:</p>\n\n<pre><code>module MyModels\n  class Class &lt; ActiveRecord::Base\n  end\nend\n</code></pre>\n\n<p>and then using <code>MyModels::Class</code> would <em>probably</em> work, but I try to avoid naming things <code>Class</code>. I'm not sure, since you have 2 classes at the root named the same if there's any other way to specify which you're referencing, and if you specifically <code>require</code> and re-define <code>Class</code>, I'm not even sure what types of problems would ensue, but I'm sure it wouldn't be my ideal afternoon.</p>\n\n<p>One thing that I often see done, when the name is needed, is to name custom <code>Class</code> classes and <code>class</code> variables as <code>Klass</code> and <code>klass</code>. Most coders (that I know, at least), wouldn't even blink twice seeing something like that named with a <strong>K</strong>.</p>\n"}, {"tags": [], "owner": {"reputation": 1142, "user_id": 4049271, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Gi0hoisDjNQ/AAAAAAAAAAI/AAAAAAAAADQ/Hyba4MAdFI0/photo.jpg?sz=128", "display_name": "Rahul Sharma", "link": "https://stackoverflow.com/users/4049271/rahul-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1513223195, "creation_date": 1513223195, "answer_id": 47805585, "question_id": 47801649, "link": "https://stackoverflow.com/questions/47801649/undefined-method-model-name-for-class0x007f043631a380/47805585#47805585", "title": "undefined method `model_name&#39; for #&lt;Class:0x007f043631a380&gt;", "body": "<p>You can not use a reserved keyword in rails and ruby as your model name.</p>\n\n<p>Your class name should be like SchoolClass or something like that.</p>\n"}], "owner": {"reputation": 784, "user_id": 3449093, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/DFSHe.gif?s=128&g=1", "display_name": "Malvinka", "link": "https://stackoverflow.com/users/3449093/malvinka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 47801928, "answer_count": 4, "score": 0, "last_activity_date": 1513223195, "creation_date": 1513197074, "last_edit_date": 1513203483, "question_id": 47801649, "link": "https://stackoverflow.com/questions/47801649/undefined-method-model-name-for-class0x007f043631a380", "title": "undefined method `model_name&#39; for #&lt;Class:0x007f043631a380&gt;", "body": "<p>I ran through similar problems here but nothing seems to match my problem. I got the error <code>undefined method model_name for #&lt;Class:0x007f043631a380&gt;</code>. It points to line #1 of my /app/views/classes/new.html.erb file:</p>\n\n<pre><code>&lt;%= form_for @class do | f | %&gt;\n    &lt;div class = \u201cform-group\u201d&gt;\n        &lt;%= f.label :name %&gt;\n        &lt;%= f.text_field :name, class: \u2018form-control\u2019 %&gt;\n</code></pre>\n\n<p>My app/controllers/classes_controller.rb:</p>\n\n<pre><code>class ClassesController &lt; ApplicationController\n    def new\n        @class = Class.new\n    end\nend\n</code></pre>\n\n<p>My app/models/class.rb:</p>\n\n<pre><code>class Class &lt; ActiveRecord::Base\n     validates :name, presence: true\n     validates :teacher, presence: true\n     validates :day, presence: true\n     validates :start_time, presence: true\n     validates :duration, presence: true, numericality: { only_integer: true }\nend\n</code></pre>\n\n<p>I am very new to RoR and don't really know where to look for a problem. Could you give me direction?</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1513195054, "post_id": 47801163, "comment_id": 82563442, "body": "What&#39;s the value of @products?, there you can set the limit to 1 or to get only the first record. Also <code>to_a</code> is not needed if the value of @products is an ActiveRecord_Relation object."}, {"owner": {"reputation": 321, "user_id": 7768323, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/4dc775ad1110dce42d259e3592704dcd?s=128&d=identicon&r=PG&f=1", "display_name": "jeff", "link": "https://stackoverflow.com/users/7768323/jeff"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1513196678, "post_id": 47801163, "comment_id": 82564300, "body": "@sebastian thanks for answer, the value of products is #&lt;ActiveRecord::Result:0x89d5dfd4&gt;, but how can I get the first record?"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1513196798, "post_id": 47801163, "comment_id": 82564352, "body": "Try with <code>Product.select(:id, :product, :stock).first.attributes.keys</code>."}, {"owner": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "edited": false, "score": 0, "creation_date": 1513200208, "post_id": 47801163, "comment_id": 82565931, "body": "If all you need is column names from a table, why don&#39;t you just statically render the column names you know you&#39;ll be receiving? \u2013 <code>&lt;th&gt;ID&lt;&#47;th&gt;&lt;th&gt;Product&lt;&#47;th&gt;&lt;th&gt;Stock&lt;&#47;th&gt;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 321, "user_id": 7768323, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/4dc775ad1110dce42d259e3592704dcd?s=128&d=identicon&r=PG&f=1", "display_name": "jeff", "link": "https://stackoverflow.com/users/7768323/jeff"}, "edited": false, "score": 0, "creation_date": 1513203567, "post_id": 47801271, "comment_id": 82567318, "body": "thanks for your answer, this works, but when it does not return any value to me I get this error: ActionView::Template::Error (undefined method `keys&#39; for nil:NilClass):"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "reply_to_user": {"reputation": 321, "user_id": 7768323, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/4dc775ad1110dce42d259e3592704dcd?s=128&d=identicon&r=PG&f=1", "display_name": "jeff", "link": "https://stackoverflow.com/users/7768323/jeff"}, "edited": false, "score": 0, "creation_date": 1513212161, "post_id": 47801271, "comment_id": 82570015, "body": "@luis31 See modified answer."}], "tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": true, "score": 1, "last_activity_date": 1513211894, "last_edit_date": 1513211894, "creation_date": 1513195377, "answer_id": 47801271, "question_id": 47801163, "link": "https://stackoverflow.com/questions/47801163/render-an-array-in-rails-showing-only-the-first-record/47801271#47801271", "title": "render an array in rails, showing only the first record", "body": "<p>You have said that <code>@products</code> is an Array of Hashes, but it may be an empty Array. If it is empty, we need to substitute an empty Hash for the result of <code>#first</code>.</p>\n\n<p>Then you can take the first element and get the keys, then iterate over the resulting array:</p>\n\n<pre><code>&lt;% (@products.first || {}).keys.each do |key| %&gt;\n  &lt;th&gt;&lt;%= key %&gt;&lt;/th&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 321, "user_id": 7768323, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/4dc775ad1110dce42d259e3592704dcd?s=128&d=identicon&r=PG&f=1", "display_name": "jeff", "link": "https://stackoverflow.com/users/7768323/jeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 47801271, "answer_count": 1, "score": -1, "last_activity_date": 1513211894, "creation_date": 1513194953, "question_id": 47801163, "link": "https://stackoverflow.com/questions/47801163/render-an-array-in-rails-showing-only-the-first-record", "title": "render an array in rails, showing only the first record", "body": "<p>I am rendering an array in this way:</p>\n\n<pre><code>    &lt;%@products.to_a.each do |foo|%&gt;\n      &lt;th&gt;&lt;%= foo %&gt;&lt;/th&gt;\n   &lt;%end%&gt;\n</code></pre>\n\n<p>and give me back the following:</p>\n\n<pre><code>&lt;th&gt;{\"ID\"=&gt;\"50538713\", \"Product\"=&gt;\"choco\", \"Stock\"=&gt;0}&lt;/th&gt;\n&lt;th&gt;{\"ID\"=&gt;\"10000750\", \"Product\"=&gt;\"pepsi\", \"Stock\"=&gt;0}&lt;/th&gt;\n&lt;th&gt;{\"ID\"=&gt;\"100538713\", \"Product\"=&gt;\"milk\", \"Stock\"=&gt;0}&lt;/th&gt;\n</code></pre>\n\n<p>but I only need the first record with only the headings like \"ID\", \"Product\", \"Stock\"</p>\n\n<p>How could I just show the headers?</p>\n"}, {"tags": ["ruby", "solr", "sunspot"], "comments": [{"owner": {"reputation": 10211, "user_id": 3622940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aba3004ab3636065081033d7789d6a0d?s=128&d=identicon&r=PG", "display_name": "Unihedron", "link": "https://stackoverflow.com/users/3622940/unihedron"}, "edited": false, "score": 0, "creation_date": 1513198640, "post_id": 47801093, "comment_id": 82565229, "body": "Excellent, what&#39;s your question?"}], "answers": [{"tags": [], "owner": {"reputation": 5616, "user_id": 2529954, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ShWjR.jpg?s=128&g=1", "display_name": "EricLavault", "link": "https://stackoverflow.com/users/2529954/ericlavault"}, "is_accepted": true, "score": 0, "last_activity_date": 1513265315, "creation_date": 1513265315, "answer_id": 47816886, "question_id": 47801093, "link": "https://stackoverflow.com/questions/47801093/get-final-score-by-sum-of-multiple-fields-boost/47816886#47816886", "title": "Get final score by sum of multiple fields boost", "body": "<p>It seems you are mixing up scoring and boosting, I think your question should be titled <em>Compute total score by summing each field score</em> (regardless of the boosts). </p>\n\n<p>Field scores are computed based on field matches, and they can be applied arbitrary set of additive or multiplicative boosts (functions and/or matching subqueries). But in the end what you want is to compute the global score by summing each field score, not the boosts themselves.</p>\n\n<p><a href=\"https://lucene.apache.org/solr/guide/6_6/the-dismax-query-parser.html\" rel=\"nofollow noreferrer\"><strong>DisMax</strong></a> query parser for example precisely allows you to control how the final score is computed using the <code>tie</code> (Tie Breaker) parameter :</p>\n\n<blockquote>\n  <p>The tie parameter specifies a float value (which should be something\n  much less than 1) to use as tiebreaker in DisMax queries.</p>\n  \n  <p>When a term from the user\u2019s input is tested against multiple fields,\n  more than one field may match. If so, each field will generate a\n  different score based on how common that word is in that field (for\n  each document relative to all other documents). The tie parameter lets\n  you control how much the final score of the query will be influenced\n  by the scores of the lower scoring fields compared to the highest\n  scoring field.</p>\n  \n  <p>A value of \"0.0\" - the default - makes the query a pure \"disjunction\n  max query\": that is, only the maximum scoring subquery contributes to\n  the final score. A value of \"1.0\" makes the query a pure \"disjunction\n  sum query\" where it doesn\u2019t matter what the maximum scoring sub query\n  is, because the final score will be the sum of the subquery scores.\n  Typically a low value, such as 0.1, is useful.</p>\n</blockquote>\n\n<p>In your situation you need a <strong>disjunction sum query</strong> so you might want to set the <code>tie</code> to <code>1.0</code>. </p>\n"}], "owner": {"reputation": 3, "user_id": 9095454, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-faAJtIyMljI/AAAAAAAAAAI/AAAAAAAAAEI/MQ1ECkurUVE/photo.jpg?sz=128", "display_name": "Matias Mansilla", "link": "https://stackoverflow.com/users/9095454/matias-mansilla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 47816886, "answer_count": 1, "score": 0, "last_activity_date": 1513265315, "creation_date": 1513194644, "last_edit_date": 1513205033, "question_id": 47801093, "link": "https://stackoverflow.com/questions/47801093/get-final-score-by-sum-of-multiple-fields-boost", "title": "Get final score by sum of multiple fields boost", "body": "<p>I want to build a search that prioritizes the amount of field matches instead of one field over another. All the fields would have the same boost value and the final score should be calculated by sum matched fields boost. If the full text matches two fields and each field have boost 1, the final score would be 1 + 1 = 2. </p>\n\n<p>Let's use an example:</p>\n\n<p><code>class Event &lt; ApplicationRecord\n  searchable do\n    text :title\n    text :category\n    text :artist_name\n  end\nend\n</code></p>\n\n<p>Suppose I have two events:</p>\n\n<p><strong>Event 1:</strong> <em>Name:</em> \"Christmas festival\" <em>Artist name:</em> \"AC/DC\"</p>\n\n<p><strong>Event 2:</strong> <em>Name:</em> \"New year festival\"  <em>Artist name:</em> \"Queen\"</p>\n\n<p>So, if the user searches just \"festival\", both events are returned with the same score because it matches both event's name.\nBut, if the user searches \"festival AC/DC\", I want to return <em>Event 1</em> in the first place or just <em>Event 1</em> because it matches the event name (festival) and the artist name (AC/DC). While <em>Event 2</em> just matches the event name (festival). <em>Event 1</em> score should be 2 while <em>Event 2</em> score should be 1.</p>\n\n<p>Any suggestion about How can I do that? Is this even possible?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "monkeypatching", "peddler"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1513193933, "post_id": 47800809, "comment_id": 82562901, "body": "Can you please clarify? I do not see a reason to modify this method since it appears to accept <code>items</code> as an <code>Array</code> of <code>Struct</code> or <code>Hash</code> objects what is the reason you cannot provide the items with the <code>per_unit_declared_value</code> set? How are you calling this method?"}, {"owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1513194976, "post_id": 47800809, "comment_id": 82563402, "body": "@engineersmnky I updated the question to show how I&#39;m calling the method.. and I get the same error. I don&#39;t think the <code>items</code> struct is expecting this value, that&#39;s why I think I have to change it"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1513195137, "post_id": 47800809, "comment_id": 82563493, "body": "What Error you have not posted an error and according to <a href=\"http://docs.developer.amazonservices.com/en_US/fba_outbound/FBAOutbound_Datatypes.html#CreateFulfillmentOrderItem\" rel=\"nofollow noreferrer\">This</a> that is an acceptable value"}, {"owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1513196757, "post_id": 47800809, "comment_id": 82564331, "body": "from the original question..  I am trying to monkey patch this method to also send the  declared value."}, {"owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1513196818, "post_id": 47800809, "comment_id": 82564362, "body": "and I updated the post with the error I&#39;m getting"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1513200145, "post_id": 47800809, "comment_id": 82565905, "body": "You misspelled &quot;declared&quot; (<code>:per_unit_declard_value</code> &lt;= note the missing &quot;e&quot;). This is most likely your problem (I cannot test since I don&#39;t have an account)"}], "owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513196798, "creation_date": 1513193420, "last_edit_date": 1513196798, "question_id": 47800809, "link": "https://stackoverflow.com/questions/47800809/monkey-patch-the-peddler-gem", "title": "Monkey Patch the Peddler Gem", "body": "<p>This gem sends data to Amazon. However, its missing one data element that I need to send. Basically the <code>declared value</code> of the item. I am trying to monkey patch this method to also send the <code>declared value</code>.</p>\n\n<p>The method I'm using inside this gem is <code>create_fulfillment_order</code> <a href=\"http://www.rubydoc.info/gems/peddler/MWS%2FFulfillmentOutboundShipment%2FClient:create_fulfillment_order\" rel=\"nofollow noreferrer\">here is a link to the method</a>, and the method is also pasted below. What I need to do is change the <code>items</code> struct from this:</p>\n\n<pre><code>(:seller_sku, :seller_fulfillment_order_item_id, :quantity)\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>(:seller_sku, :seller_fulfillment_order_item_id, :quantity, :per_unit_declared_value)\n</code></pre>\n\n<p>And then this is the complete code for the method</p>\n\n<pre><code>def create_fulfillment_order(seller_fulfillment_order_id, displayable_order_id, displayable_order_date_time, displayable_order_comment, shipping_speed_category, destination_address, items, opts = {})\n  if opts.key?(:cod_settings)\n    opts['CODSettings'] = opts.delete(:cod_settings)\n  end\n\n  operation('CreateFulfillmentOrder')\n    .add(\n      opts.merge(\n        'SellerFulfillmentOrderId' =&gt; seller_fulfillment_order_id,\n        'DisplayableOrderId' =&gt; displayable_order_id,\n        'DisplayableOrderDateTime' =&gt; displayable_order_date_time,\n        'DisplayableOrderComment' =&gt; displayable_order_comment,\n        'ShippingSpeedCategory' =&gt; shipping_speed_category,\n        'DestinationAddress' =&gt; destination_address,\n        'Items' =&gt; items\n      )\n    )\n    .structure!('Items', 'member')\n    .structure!('NotificationEmailList', 'member')\n\n  run\nend\n</code></pre>\n\n<p>I call the method like this:</p>\n\n<pre><code>client = MWS::FulfillmentOutboundShipment::Client.new(\n  marketplace_id:        \"XXXXXX\",\n  merchant_id:           \"XXXXX\",\n  aws_access_key_id:     \"XXXX\",\n  aws_secret_access_key: \"XXXXX+\",\n  auth_token:            \"XXXXXX\")\n\n\nAddress = Struct.new(:name, :line_1, :line_2, :line_3, :city, :state_or_province_code,\n                      :country_code, :postal_code)\n\naddress = Address.new(\"Todd T\", \"19712 50th Ave W\", \"#5\", \"\", \"Lynnwood\",\"WA\" ,\"US\" , \"98036\" )\n\nValue = Struct.new(:currency_code, :value)\n\nvalue = Value.new(\"CAD\", \"10\")\n\nItem = Struct.new(:seller_sku, :seller_fulfillment_order_item_id, :quantity, :per_unit_declard_value)\n\nsku = []\nfirst = Item.new(\"636391317719\", \"s2\", 1, value)\nsku &lt;&lt; first\n\nbegin\n  client.create_fulfillment_order(\"z536\", \"z536\", Time.now.getutc, \"Thank You\", \"Standard\", address, sku)\nrescue Exception =&gt; e\npp e.response\nend\n</code></pre>\n\n<p>The error I'm getting is <code>The request must contain the parameter PerUnitDeclaredValue.</code></p>\n"}, {"tags": ["ruby", "sinatra"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 1, "creation_date": 1513192660, "post_id": 47800290, "comment_id": 82562271, "body": "do you have a database?"}, {"owner": {"reputation": 5806, "user_id": 1420382, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/b00f469c4ccbb33bba69611325c29a3e?s=128&d=identicon&r=PG", "display_name": "Reck", "link": "https://stackoverflow.com/users/1420382/reck"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 1, "creation_date": 1513194952, "post_id": 47800290, "comment_id": 82563387, "body": "Not in this scenario. Ideally the request should just be stored in memory."}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 1, "creation_date": 1513196188, "post_id": 47800290, "comment_id": 82564045, "body": "HTTP is stateless by design so you&#39;ll need to persist the request somewhere.  Database, a file, whatever you want."}], "answers": [{"tags": [], "owner": {"reputation": 5806, "user_id": 1420382, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/b00f469c4ccbb33bba69611325c29a3e?s=128&d=identicon&r=PG", "display_name": "Reck", "link": "https://stackoverflow.com/users/1420382/reck"}, "is_accepted": false, "score": 0, "last_activity_date": 1513249375, "creation_date": 1513249375, "answer_id": 47811741, "question_id": 47800290, "link": "https://stackoverflow.com/questions/47800290/how-can-i-get-sinatra-to-store-the-last-request-made-to-it/47811741#47811741", "title": "How can I get Sinatra to store the last request made to it", "body": "<p>So I figured it out. I just wrote some Rack Middleware to keep track of it.</p>\n\n<pre><code>module MockService\n  class StoreLastRequest\n    def initialize(app)\n      @app = app\n    end\n\n    def call(env)\n      @@last_request = { method: env['REQUEST_METHOD'], uri: env['REQUEST_URI'] }\n      @app.call(env)\n    end\n\n    def self.last_request\n      @@last_request\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 5806, "user_id": 1420382, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/b00f469c4ccbb33bba69611325c29a3e?s=128&d=identicon&r=PG", "display_name": "Reck", "link": "https://stackoverflow.com/users/1420382/reck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513249375, "creation_date": 1513191408, "question_id": 47800290, "link": "https://stackoverflow.com/questions/47800290/how-can-i-get-sinatra-to-store-the-last-request-made-to-it", "title": "How can I get Sinatra to store the last request made to it", "body": "<p>This is a bit of a weird question, but I'm trying to write a custom mocking library using Sinatra. I'd very much like my library to be able to store the last request made to it, but I'm having a really hard time getting Sinatra to do so. Has anyone else encountered this particular problem? And before you ask, using Webmock is not an option.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "omniauth"], "comments": [{"owner": {"reputation": 1718, "user_id": 2144445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14196c924af54a8bcaf08e5ca40048b3?s=128&d=identicon&r=PG", "display_name": "inye", "link": "https://stackoverflow.com/users/2144445/inye"}, "edited": false, "score": 2, "creation_date": 1513197023, "post_id": 47800205, "comment_id": 82564471, "body": "I think you do not have to define current_user method ( <code>def current_user</code> ) in application controller because Devise already do. You only have to call <code>current_user</code> variable to get the current user."}, {"owner": {"reputation": 1718, "user_id": 2144445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14196c924af54a8bcaf08e5ca40048b3?s=128&d=identicon&r=PG", "display_name": "inye", "link": "https://stackoverflow.com/users/2144445/inye"}, "edited": false, "score": 0, "creation_date": 1513252183, "post_id": 47800205, "comment_id": 82586514, "body": "Great. I will post the answer"}], "answers": [{"tags": [], "owner": {"reputation": 1718, "user_id": 2144445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14196c924af54a8bcaf08e5ca40048b3?s=128&d=identicon&r=PG", "display_name": "inye", "link": "https://stackoverflow.com/users/2144445/inye"}, "is_accepted": true, "score": 1, "last_activity_date": 1513252361, "creation_date": 1513252361, "answer_id": 47812724, "question_id": 47800205, "link": "https://stackoverflow.com/questions/47800205/devise-is-not-assigning-data-to-current-user-resource-variables-after-successful/47812724#47812724", "title": "Devise is not assigning data to current_user,resource variables after successfull signin", "body": "<p>You NOT have to define current_user method ( <code>def current_user</code> ) in application controller because Devise already do.</p>\n\n<p>You only have to call <code>current_user</code> variable to get the current user, like</p>\n\n<pre><code>def index\n    if current_user.first_name == \"Jhon\"\n        redirect_to :other_path\n    end\nend\n</code></pre>\n"}], "owner": {"reputation": 512, "user_id": 6950578, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/2d06a05f48e9f4b810136e8a4348c014?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6950578/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 47812724, "answer_count": 1, "score": 0, "last_activity_date": 1513252361, "creation_date": 1513191100, "last_edit_date": 1513194825, "question_id": 47800205, "link": "https://stackoverflow.com/questions/47800205/devise-is-not-assigning-data-to-current-user-resource-variables-after-successful", "title": "Devise is not assigning data to current_user,resource variables after successfull signin", "body": "<p>I am stuck in a problem that after integrating omniauth in my application devise is behaving strange and it is not assigning logged in user to variables <code>current_user</code>, <code>resource</code>.</p>\n\n<h2>Where I think the problem is</h2>\n\n<p>I have checked all the things and I think the problem is with this line in the application controller.</p>\n\n<pre><code>def current_user\n    @current_user ||= User.find(session[:user_id]) if session[:user_id]\n  end\n</code></pre>\n\n<p>I have checked the session and it has no data in `.</p>\n\n<p><strong>The same code was working fine but after omniauth every thing is got ruined.</strong> I am worried that how to solve it now.</p>\n\n<h2>Application Controller</h2>\n\n<p>Here is the code of my application controller</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  add_flash_types :success, :warning, :danger, :info\n  protect_from_forgery prepend: true\n  #before_filter :require_no_authentication, only: [:new, :create, :cancel]\n  before_filter :configure_permitted_parameters, if: :devise_controller?\n  layout :layout_by_resource\n\n def current_user\n    @current_user ||= User.find(session[:user_id]) if session[:user_id]\n  end\n\n  helper_method :current_user\n\n  def logged_in_using_omniauth\n    session[:logged_in_using_omniauth].present?\n  end\n  helper_method :logged_in_using_omniauth\n\n  private\n\n  def layout_by_resource\n    if devise_controller?\n      \"admin\"\n    else\n      \"application\"\n    end\n  end\n\n  protected\n\n  def after_sign_in_path_for(resource)\n    #console\n\n    if(resource.admin)\n      #render plain: resource\n      #console\n      '/admins'\n    else\n      '/donations/donor_history'\n    end\n  end\n\n  def after_sign_out_path_for(resource)\n    '/users/sign_in' #your path\n  end\n\n  def configure_permitted_parameters\n    devise_parameter_sanitizer.permit(:sign_up) do |user_params|\n      user_params.permit(:admin, :email, :password, :password_confirmation,:first_name,:last_name)\n    end\n    devise_parameter_sanitizer.permit(:account_update) do |user_params|\n      user_params.permit(:admin, :email, :password, :password_confirmation,:current_password,:first_name,:last_name)\n    end\n  end\n\nend\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/phSTH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/phSTH.png\" alt=\"error message, &quot;NoMethodError undefined method id for nil class&quot;\"></a></p>\n\n<h2>Routes</h2>\n\n<p>Here is the code of routes</p>\n\n<pre><code>Rails.application.routes.draw do\n\n  devise_for :users,  controllers: {confirmations: 'confirmations',registrations: 'users/registrations',omniauth_callbacks: 'users/omniauth_callbacks' } do\n    get \"confirmation\", to: \"confirmations#after_confirmation_path_for\"\n     delete 'sign_out', :to =&gt; 'devise/sessions#destroy', :as =&gt; :destroy_user_session\n  end\n\n  devise_for :models\n\n  get 'donor_email_receipt', :to =&gt; 'donations#donor_email_receipt', :as =&gt; :donor_email_receipt\n  get 'donations/donor_history/' =&gt; 'donations#donor_history'\n  get 'donations/donor_signup/' =&gt; 'donations#donor_signup'\n  post 'donations/donor_signup/' =&gt; 'donations#donor_signup'\n  post 'donations/sms_service/' =&gt; 'donations#sms_service'\n  post 'donations/create_user_account' =&gt; 'donations#create_user_account'\n  post 'donations/add_user_payroll' =&gt; 'donations#add_user_payroll'\n\n  resources :donations, except: [:new, :create]\n\n  resources :campaigns do\n    resources :donations, only: [:new, :create, :create_user_account]\n    get 'donations/create_user_account' =&gt; 'donations#create_user_account'\n  end\n  resources :organizations\n\n  post 'admins/social_sharing_switch/' =&gt; 'admins#social_sharing_switch'\n  get 'admins/error_detail/' =&gt; 'admins#error_detail'\n  get 'admins/generate_report/:id' =&gt; 'admins#generate_report'\n  get 'admins/create_company/' =&gt; 'admins#create_company'\n  post 'admins/create_company/' =&gt; 'admins#create_company'\n  get 'admins/revenue_detail/' =&gt; 'admins#revenue_detail'\n  get 'admins/create_account' =&gt; 'admins#create_account'\n  get 'admins/view_account' =&gt; 'admins#view_account'\n  get 'admins/view_company/:id' =&gt; 'admins#view_company'\n  constraints RouteConstraint.new do\n    get 'admins/donation_analysis' =&gt; 'admins#donation_analysis'\n  end\n\n  get 'admins/link_expiry' =&gt; 'admins#link_expiry'\n  get 'admins/edit_profile' =&gt; 'admins#edit_profile'\n  post 'admins/update_profile' =&gt; 'admins#update_profile'\n  match '/admins/create_account', to: 'admins#create_account', via: 'post'\n  match '/admins/:id', to: 'admins#destroy', via: 'get' , as: 'admin_destroy'\n\n  resources :admins\n\n  get 'crons/expirylink_alert' =&gt; 'crons#expirylink_alert'\n\n\n  devise_scope :user do\n    get '/users/sign_out' =&gt; 'devise/sessions#destroy'\n  end\n\n  def user_params\n  params.require(:user).permit(:name, :email, :password, :password_confirmation)\nend\n\n\n  root to: \"campaigns#latest\"\nend\n</code></pre>\n"}, {"tags": ["html", "ruby", "image", "rendering"], "comments": [{"owner": {"reputation": 1848, "user_id": 4089357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628dc1c999e767d7aff0e988631a9878?s=128&d=identicon&r=PG&f=1", "display_name": "Abdullah", "link": "https://stackoverflow.com/users/4089357/abdullah"}, "edited": false, "score": 0, "creation_date": 1513190720, "post_id": 47800032, "comment_id": 82561308, "body": "it could be the case that image source path is not correct."}, {"owner": {"reputation": 1, "user_id": 9067426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c798afe6784bbacdc0fc0dd9c9328ed1?s=128&d=identicon&r=PG&f=1", "display_name": "Ax4368065489", "link": "https://stackoverflow.com/users/9067426/ax4368065489"}, "reply_to_user": {"reputation": 1848, "user_id": 4089357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628dc1c999e767d7aff0e988631a9878?s=128&d=identicon&r=PG&f=1", "display_name": "Abdullah", "link": "https://stackoverflow.com/users/4089357/abdullah"}, "edited": false, "score": 0, "creation_date": 1513190836, "post_id": 47800032, "comment_id": 82561368, "body": "the image ist located at app/assets/images/exercises and name is also correct. I tried another image in images folder, too with same results"}, {"owner": {"reputation": 1848, "user_id": 4089357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628dc1c999e767d7aff0e988631a9878?s=128&d=identicon&r=PG&f=1", "display_name": "Abdullah", "link": "https://stackoverflow.com/users/4089357/abdullah"}, "edited": false, "score": 0, "creation_date": 1513191098, "post_id": 47800032, "comment_id": 82561506, "body": "try adding <code>&#47;images&#47;exercises&#47;picture.png</code>?"}, {"owner": {"reputation": 1, "user_id": 9067426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c798afe6784bbacdc0fc0dd9c9328ed1?s=128&d=identicon&r=PG&f=1", "display_name": "Ax4368065489", "link": "https://stackoverflow.com/users/9067426/ax4368065489"}, "reply_to_user": {"reputation": 1848, "user_id": 4089357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628dc1c999e767d7aff0e988631a9878?s=128&d=identicon&r=PG&f=1", "display_name": "Abdullah", "link": "https://stackoverflow.com/users/4089357/abdullah"}, "edited": false, "score": 0, "creation_date": 1513191411, "post_id": 47800032, "comment_id": 82561653, "body": "already tried that before, doesn&#39;t make a change.. the problem here is not the path in my opinion, it&#39;s that the image_tag is not rendered so no matter what you type in there it is not shown  and I am using raw so I don&#39;t understand where the problem is"}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1513192032, "post_id": 47800032, "comment_id": 82561957, "body": "<a href=\"https://www.google.com/search?q=assets+pipeline+rails+production+site%3Astackoverflow.com\" rel=\"nofollow noreferrer\">google.com/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1044, "user_id": 9095554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pNvJI.jpg?s=128&g=1", "display_name": "Fabiano", "link": "https://stackoverflow.com/users/9095554/fabiano"}, "is_accepted": false, "score": 0, "last_activity_date": 1513193148, "last_edit_date": 1513193148, "creation_date": 1513191955, "answer_id": 47800437, "question_id": 47800032, "link": "https://stackoverflow.com/questions/47800032/image-tag-not-rendered-from-code-in-database/47800437#47800437", "title": "image_tag not rendered from Code in Database", "body": "<p>Do you have the Assets Pipeline on? If you do, this could happen because of the generated hash that it put on your static assets to avoid cache problems. The thing is that the <code>image_tag</code> helper resolves this. It's a trade-off, but you could disable the Assets Pipeline and see if it works. To keep it on and do this, you will need  a more elaborated solution.</p>\n\n<p>You can try if it is that by disabling the assets digesting:</p>\n\n<blockquote>\n  <p>config.assets.digest = false</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 0, "last_activity_date": 1513201673, "last_edit_date": 1513201673, "creation_date": 1513200936, "answer_id": 47802466, "question_id": 47800032, "link": "https://stackoverflow.com/questions/47800032/image-tag-not-rendered-from-code-in-database/47802466#47802466", "title": "image_tag not rendered from Code in Database", "body": "<p>Alternatively you can have <code>ERB</code> interpret <code>@exercise.explanation</code></p>\n\n<pre><code>&lt;%= ERB.new(@exercise.explanation).result(binding) %&gt;\n</code></pre>\n\n<p>This will take your <code>@exercise.explanation</code> and process it through <code>ERB</code> which appears to be what you are hoping for.</p>\n\n<p><strong>Caveat</strong>:</p>\n\n<p>Be very careful what you allow to be stored in these \"template\" fields as things can go bad if you do not/can not sanitize this input. <code>ERB#result</code> is essentially a call to <code>eval</code> (which can be very dangerous)   </p>\n"}], "owner": {"reputation": 1, "user_id": 9067426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c798afe6784bbacdc0fc0dd9c9328ed1?s=128&d=identicon&r=PG&f=1", "display_name": "Ax4368065489", "link": "https://stackoverflow.com/users/9067426/ax4368065489"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1513201673, "creation_date": 1513190418, "question_id": 47800032, "link": "https://stackoverflow.com/questions/47800032/image-tag-not-rendered-from-code-in-database", "title": "image_tag not rendered from Code in Database", "body": "<p>I have stored html code in a database field which is passed to the rails app.</p>\n\n<pre><code>&lt;%= raw @exercise.explanation %&gt;\n</code></pre>\n\n<p>The normal text is rendered correctly, it\u00b4s in the <code>&lt;p&gt; .. &lt;/p&gt;</code>; but inside there the image codes are just displayed so output on the page is:</p>\n\n<p>This is correct rendered text.</p>\n\n<pre><code>&lt;%= image_tag (\"exercises/picture.png\"), style: 'height:auto; width:50%;' %&gt;\n</code></pre>\n\n<p>Further text.</p>\n\n<p>When I use <code>&lt;img src=\"exercises/picture.png\"&gt;</code> or <code>&lt;img src=\"picture.png\"&gt;</code>inside the database entry, no picture is loaded either, just the broken image symbol of the browser.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "answers": [{"comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1513188812, "post_id": 47799514, "comment_id": 82560415, "body": "Not sure what you&#39;re doing with <code>@select_hours.map {|value| [value, value]}</code>, but can be also done at the moment of declaring select_hours."}, {"owner": {"reputation": 57, "user_id": 9040062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f7d419eb8d7487349a8656414a5592?s=128&d=identicon&r=PG&f=1", "display_name": "proofexak", "link": "https://stackoverflow.com/users/9040062/proofexak"}, "edited": false, "score": 0, "creation_date": 1513193502, "post_id": 47799514, "comment_id": 82562681, "body": "well i use it for selecting a time in form_for and i found this method on stackoverflow ^^ but anyway thanks for the response it worked out perfectly! And now thanks to you i will start using callbacks :)"}, {"owner": {"reputation": 57, "user_id": 9040062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f7d419eb8d7487349a8656414a5592?s=128&d=identicon&r=PG&f=1", "display_name": "proofexak", "link": "https://stackoverflow.com/users/9040062/proofexak"}, "edited": false, "score": 0, "creation_date": 1513199323, "post_id": 47799514, "comment_id": 82565554, "body": "oh right i forgot about this, sorry. Well youre right about @hour but my controller look a bit empty right now but overall thats nice as f*ck. Thanks mate for help!"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 57, "user_id": 9040062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f7d419eb8d7487349a8656414a5592?s=128&d=identicon&r=PG&f=1", "display_name": "proofexak", "link": "https://stackoverflow.com/users/9040062/proofexak"}, "edited": false, "score": 0, "creation_date": 1513199671, "post_id": 47799514, "comment_id": 82565713, "body": "Glad to help ;)"}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 1, "last_activity_date": 1513213512, "last_edit_date": 1513213512, "creation_date": 1513188129, "answer_id": 47799514, "question_id": 47799383, "link": "https://stackoverflow.com/questions/47799383/nomethoderror-for-nil-after-rendering-view-in-controller/47799514#47799514", "title": "NoMethodError for nil after rendering view in controller", "body": "<p>You can use a callback in your controller and set up <code>@select_hours</code> for those two actions, this way if the update fails, the value will be present, but you don't have to assign the variable twice, like:</p>\n\n<pre><code>before_action :set_select_hours, only: %i[edit update]\nbefore_action :set_employee,     only: %i[edit update]\nbefore_action :set_hour,         only: %i[edit update]\n\ndef edit; end\n\ndef update\n  if @hour.update(working_hour_params)\n    redirect_to employee_working_hours_path(@employee)\n  else\n    render :edit\n  end\nend\n\nprivate\n\ndef set_select_hours\n  @select_hours = (0..12).flat_map do |index|\n    [\"#{07 + index}:00\", \"#{07 + index}:30\"]\n  end\nend\n\ndef set_employee\n  @employee = current_user.employee\nend\n\ndef set_hour\n  @hour = @employee.working_hours.find(params[:id])\nend\n</code></pre>\n\n<p>I think @employee can also be setted within a before callback.</p>\n\n<p>I've added flat map to create and fill an array starting from the range, it's the \"same\" as before, just you don't need to initialize the array, use the for loop, and push the content for it.</p>\n"}], "owner": {"reputation": 57, "user_id": 9040062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7f7d419eb8d7487349a8656414a5592?s=128&d=identicon&r=PG&f=1", "display_name": "proofexak", "link": "https://stackoverflow.com/users/9040062/proofexak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 47799514, "answer_count": 1, "score": 2, "last_activity_date": 1513213512, "creation_date": 1513187566, "last_edit_date": 1513213403, "question_id": 47799383, "link": "https://stackoverflow.com/questions/47799383/nomethoderror-for-nil-after-rendering-view-in-controller", "title": "NoMethodError for nil after rendering view in controller", "body": "<p>So I have this in my view _form.erb:</p>\n\n<pre><code>&lt;div class=\"form-group\"&gt;\n    &lt;%= f.label :start_hour %&gt;&lt;br&gt;\n    &lt;%= f.select :start_hour, @select_hours.map {|value| [value, value]} %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>And this in edit.erb:</p>\n\n<pre><code>&lt;%= render 'form' %&gt;\n</code></pre>\n\n<p>And this in my controller</p>\n\n<pre><code>    def edit\n        @user = current_user\n        @employee = @user.employee\n        @hour = @employee.working_hours.find(params[:id])\n        @select_hours = Array.new\n        for i in 0..12\n          @select_hours.push(\"#{07+i}:00\")\n          @select_hours.push(\"#{07+i}:30\")\n        end\n    end\n</code></pre>\n\n<p>And then my update in my controller</p>\n\n<pre><code>def update\n    @employee = current_user.employee\n    @hour = @employee.working_hours.find(params[:id])\n    if @hour.update(working_hour_params)\n      redirect_to employee_working_hours_path(@employee)\n    else\n      render :edit\n    end\nend\n</code></pre>\n\n<p>And here's my problem: </p>\n\n<p>When I click update AND have wrong <code>start_hour</code> (custom validation, works when creating not editing), so <code>@hour</code> will not update. It renders again this view but with error that there is no method <code>map</code> for <code>nil</code> (so for <code>@select_hours</code>).</p>\n\n<p>So how can I fix this?</p>\n"}, {"tags": ["ruby", "chef-infra", "erb", "knife"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1513187931, "post_id": 47799283, "comment_id": 82559987, "body": "So I am still unclear as to what the actual issue is here other than it appears you are concerned about the fact that your code can only process approximately 2 nodes a second (which depending on what is actually happening) seems fairly fast to me."}, {"owner": {"reputation": 251, "user_id": 3899844, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9e128f3ffadb9aabd33775e3115608bc?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy", "link": "https://stackoverflow.com/users/3899844/tommy"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1513191312, "post_id": 47799283, "comment_id": 82561606, "body": "My only concern is the build time. I would like to reduce   the build time for which I am looking out for more processing of templates in less time. Would like to get some suggestion on such implementation"}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1513192026, "post_id": 47799283, "comment_id": 82561953, "body": "Are you sure it&#39;s the template rendering? The first thing I would do is optimize the search query with bigger page sizes and <code>filter_keys</code>."}, {"owner": {"reputation": 251, "user_id": 3899844, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9e128f3ffadb9aabd33775e3115608bc?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy", "link": "https://stackoverflow.com/users/3899844/tommy"}, "edited": false, "score": 0, "creation_date": 1513213629, "post_id": 47799283, "comment_id": 82570386, "body": "Looking at the timestamps of templating from client log, I am seeing the query is taking 30 seconds to fetch (which is not at all an issue for me) while the templating start time and end time shows more  Than  90minutes."}, {"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1513255148, "post_id": 47799283, "comment_id": 82588398, "body": "Seriously, you do try to render 10k files on a machine already doing a bunch of IO (network mainly) every 5 mins or so over those 10k hosts and you&#39;re wondering why you have an IO bottleneck ? Just check the load on your nagios host, I would bet it&#39;s over the number of available cores and as such its not surprising you&#39;re ending up with delays."}, {"owner": {"reputation": 251, "user_id": 3899844, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9e128f3ffadb9aabd33775e3115608bc?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy", "link": "https://stackoverflow.com/users/3899844/tommy"}, "edited": false, "score": 0, "creation_date": 1513262594, "post_id": 47799283, "comment_id": 82593437, "body": "@tensabai We have distributed monitoring in place where the checks are being done from another tier of servers (gearman). CPU load is fine as its a distributed setup and we are running on physical server. Its not due to the load for us as i can confirm that. My concern is to move template rendering rate from 2 per second to 6."}, {"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1513266136, "post_id": 47799283, "comment_id": 82595908, "body": "CPU load may be fine, IO load is likely to be killed with blocking IOs to/from satellites and disks IOs to store nagios logs and render the templates. Without any clue of what you&#39;re doing in the templates it&#39;s divination to guess what&#39;s happening. And I&#39;ll take your words about the load even if I doubt it (would be curious of what <code>uptime</code> returns and how much cores are available)."}], "owner": {"reputation": 251, "user_id": 3899844, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9e128f3ffadb9aabd33775e3115608bc?s=128&d=identicon&r=PG&f=1", "display_name": "Tommy", "link": "https://stackoverflow.com/users/3899844/tommy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513191131, "creation_date": 1513187158, "last_edit_date": 1513191131, "question_id": 47799283, "link": "https://stackoverflow.com/questions/47799283/how-to-improve-chef-erb-templating-performance-over-large-data", "title": "How to improve chef erb templating performance over large data", "body": "<p>Edit: I am trying to render really large number of host nagios files based on the  host info from chef server with search api. My main problem is that i have very large number of nodes connected to my chef server around 10000 nodes. I am trying to create nagios host files using search api and then render host templates. I am seeing very long time performing the converge for every run interval, I am currently running nagiosserver cookbook on nagios server which is almost taking more than 90minutes. \nWhat is the best approach for this scenario, how can I decrease the build time. please advice.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "currency", "money-rails"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1513195773, "post_id": 47798894, "comment_id": 82563851, "body": "It appears to be for <a href=\"https://github.com/RubyMoney/money-rails/blob/master/lib/money-rails/active_record/monetizable.rb#L63\" rel=\"nofollow noreferrer\">inference purposes</a> e.g <code>monetize :price</code> with the default configuration will assume <code>price_cents</code> and <code>price_currency</code>. You can see &quot;_cents&quot; is the default postfix for the <code>amount</code> columns in the <a href=\"https://github.com/RubyMoney/money-rails#configuration-parameters\" rel=\"nofollow noreferrer\">default configuration</a>."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1513196487, "post_id": 47798894, "comment_id": 82564199, "body": "Since the default currency is &#39;USD&#39; and a cent is the smallest denomination of the US monetary system it makes the most sense for this to be the postfix. That being said it is not required to be cents but one does not need to separate by the currency type this is simply just a convention and can be configured as you see fit as the &quot;_cents&quot; column or whatever you choose to call it will contain the subunit value based on the Currency. e.g. cents has a subunit_to_unit of 100 because there are 100 cents in a whole"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1513196654, "post_id": 47798894, "comment_id": 82564288, "body": "<a href=\"https://github.com/RubyMoney/money-rails/blob/master/spec/active_record/monetizable_spec.rb#L89\" rel=\"nofollow noreferrer\">This Spec Test</a> makes it pretty clear where you can see in USD the cents is expected to be 2,000,000 but in CLP (which has a subunit_to_unit of 1) the &quot;cents&quot; is expected to be the same as the amount 20,000"}, {"owner": {"reputation": 2300, "user_id": 2874507, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-bTf3QWEeXi0/AAAAAAAAAAI/AAAAAAAAAvA/G7Uh0JZWsOk/photo.jpg?sz=128", "display_name": "Abhilash", "link": "https://stackoverflow.com/users/2874507/abhilash"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1513220800, "post_id": 47798894, "comment_id": 82572071, "body": "@engineersmnky Thankyou for making it clear. Please provide as an answer so I can accept."}], "answers": [{"comments": [{"owner": {"reputation": 2300, "user_id": 2874507, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-bTf3QWEeXi0/AAAAAAAAAAI/AAAAAAAAAvA/G7Uh0JZWsOk/photo.jpg?sz=128", "display_name": "Abhilash", "link": "https://stackoverflow.com/users/2874507/abhilash"}, "edited": false, "score": 1, "creation_date": 1513191264, "post_id": 47799856, "comment_id": 82561579, "body": "Thank you for the answer. But this was not the query.. My query is about the reason for the conventions I mentioned in question and how it can help me in my case. Sorry if the question was not clear."}, {"owner": {"reputation": 1717, "user_id": 1034924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecedc78563223e4f7742bbfc66992905?s=128&d=identicon&r=PG", "display_name": "nzajt", "link": "https://stackoverflow.com/users/1034924/nzajt"}, "reply_to_user": {"reputation": 2300, "user_id": 2874507, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-bTf3QWEeXi0/AAAAAAAAAAI/AAAAAAAAAvA/G7Uh0JZWsOk/photo.jpg?sz=128", "display_name": "Abhilash", "link": "https://stackoverflow.com/users/2874507/abhilash"}, "edited": false, "score": 0, "creation_date": 1513201400, "post_id": 47799856, "comment_id": 82566439, "body": "You have the wrong columns in your database. Once you fix that issue it will work for you."}], "tags": [], "owner": {"reputation": 1717, "user_id": 1034924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecedc78563223e4f7742bbfc66992905?s=128&d=identicon&r=PG", "display_name": "nzajt", "link": "https://stackoverflow.com/users/1034924/nzajt"}, "is_accepted": false, "score": 0, "last_activity_date": 1513189693, "creation_date": 1513189693, "answer_id": 47799856, "question_id": 47798894, "link": "https://stackoverflow.com/questions/47798894/money-rails-gem-column-naming-conventions/47799856#47799856", "title": "money-rails gem column naming conventions", "body": "<p>So you need to remove the columns unit_price, discount_price, final_price from the table orders. And add them back correctly with <code>add_monetize</code>.</p>\n\n<p>create a new migration file that looks like this:</p>\n\n<pre><code>class FixPricesInOrders &lt; ActiveRecord::Migration[5.0]\n  def change\n    # Remove Columns\n    remove_column :orders, :unit_price\n    remove_column :orders, :discount_price\n    remove_column :orders, :final_price\n    # Add money\n    add_monetize :orders, :unit_price\n    add_monetize :orders, :discount_price\n    add_monetize :orders, :final_price\n  end\nend\n</code></pre>\n\n<p>From <a href=\"https://github.com/RubyMoney/money-rails\" rel=\"nofollow noreferrer\">https://github.com/RubyMoney/money-rails</a></p>\n\n<p>\"Due to the addition of the money column type for PostgreSQL in Rails 4.2, you will need to use add_monetize instead of add_money column.\"</p>\n\n<p>Then make sure you add the following to <code>app/models/order.rb</code></p>\n\n<pre><code>monetize :unit_price\nmonetize :discount_price\nmonetize :final_price\n</code></pre>\n"}], "owner": {"reputation": 2300, "user_id": 2874507, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-bTf3QWEeXi0/AAAAAAAAAAI/AAAAAAAAAvA/G7Uh0JZWsOk/photo.jpg?sz=128", "display_name": "Abhilash", "link": "https://stackoverflow.com/users/2874507/abhilash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 627, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1513189693, "creation_date": 1513185677, "question_id": 47798894, "link": "https://stackoverflow.com/questions/47798894/money-rails-gem-column-naming-conventions", "title": "money-rails gem column naming conventions", "body": "<p>I have an <code>Order</code> model with <code>unit_price</code>, <code>discount_price</code>, <code>final_price</code> etc..\nAll are <code>integer</code> fields in <code>postgres</code> db. Currently its rounding amount to the next integer and saves that. But now I found that this is not a good approach as it might cause some errors/issues in future. So I \nplanned to save money values in penny by doing(<code>USD*100</code>) but when displaying shows it in GBP by writing some helpers.</p>\n\n<p>But I found this gem now <a href=\"https://github.com/RubyMoney/money-rails\" rel=\"nofollow noreferrer\">money-rails</a> which could do what I want. I am trying to wrap my head around this gem,but I cant really figure out some conventions used here also not sure its suitable for my purpose</p>\n\n<p>My default currency is <code>GBP</code>. </p>\n\n<p>I can see that this gem uses the convention <code>_cents</code> by default</p>\n\n<pre><code>monetize :price_cents #from docs\n</code></pre>\n\n<p>Above assume a db column <code>price_cents</code>. \nHere why we should use cents as a static column? Whats the purpose of that? Other than being explicit any other uses here? </p>\n\n<p>If its for a purpose like for <code>cents</code> it automatically look for <code>USD</code>, if penny looks for <code>GBP</code> &amp; soforth... then for each currency our app supports we will endup creating new db columns like <code>price_penny</code>, <code>price_cent</code> etc.. which is not that great if there are lot of currencies. Or can I use a generic name here like price_smallest and use this regardless of currecy type?\n Also </p>\n\n<p>I cant figure out the exact usecase here properly. Could someone shed some light into this topic? </p>\n\n<blockquote>\n  <p>Note: My app doesn't have plans for supporting other currencies now.\n  But could be added in future. So good to consider that now I think..</p>\n</blockquote>\n"}, {"tags": ["ruby", "regex"], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 3, "last_activity_date": 1513185637, "last_edit_date": 1513185637, "creation_date": 1513185307, "answer_id": 47798805, "question_id": 47798740, "link": "https://stackoverflow.com/questions/47798740/get-2-values-from-string-using-regex/47798805#47798805", "title": "Get 2 values from string using regex", "body": "<p>I think you need <code>scan</code> instead <code>match</code>, try:</p>\n\n<pre><code>p \"[5, 3]\".scan(/\\d/) \n</code></pre>\n\n<p>What I can say is <em><code>match</code> returns the first match as <a href=\"http://ruby-doc.org/core-2.4.1/MatchData.html\" rel=\"nofollow noreferrer\"><code>MatchData</code></a>, while <code>scan</code> returns everything what the regex matches</em>.</p>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.4.0/String.html#method-i-scan\" rel=\"nofollow noreferrer\"><code>String#scan</code></a> and <a href=\"https://ruby-doc.org/core-2.1.4/Regexp.html#method-i-match\" rel=\"nofollow noreferrer\"><code>Regexp#match</code></a>.</p>\n"}], "owner": {"reputation": 1228, "user_id": 5594008, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/05617707e2d7092fc6e202cdcf38c629?s=128&d=identicon&r=PG&f=1", "display_name": "Headmaster", "link": "https://stackoverflow.com/users/5594008/headmaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "closed_date": 1513186132, "accepted_answer_id": 47798805, "answer_count": 1, "score": 0, "last_activity_date": 1513185637, "creation_date": 1513185111, "question_id": 47798740, "link": "https://stackoverflow.com/questions/47798740/get-2-values-from-string-using-regex", "closed_reason": "Duplicate", "title": "Get 2 values from string using regex", "body": "<p>I got a string <code>\"[5, 3]\"</code> and I want to extract 5 and 3 from it using regex. </p>\n\n<pre><code>p \"[5, 3]\".match(/\\d,\\s\\d/) # &lt;MatchData \"5, 3\"&gt;\np \"[5, 3]\".match(/\\d/) # &lt;MatchData \"5\"&gt;\n</code></pre>\n\n<p>I can't extract both numbers at same time</p>\n"}, {"tags": ["ruby", "mechanize"], "comments": [{"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1513186498, "post_id": 47798435, "comment_id": 82559209, "body": "If you&#39;re using Ruby 2.3+ you can use <code>title = row.at(&quot;div.title a&quot;)&amp;.text</code>"}, {"owner": {"reputation": 606, "user_id": 5143565, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/UL3LT.jpg?s=128&g=1", "display_name": "Rubyx", "link": "https://stackoverflow.com/users/5143565/rubyx"}, "reply_to_user": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1513194322, "post_id": 47798435, "comment_id": 82563110, "body": "I&#39;m just tried with Ruby 2.3+ and it works. Can you explain what <code>&amp;</code> does?"}], "owner": {"reputation": 606, "user_id": 5143565, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/UL3LT.jpg?s=128&g=1", "display_name": "Rubyx", "link": "https://stackoverflow.com/users/5143565/rubyx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513184095, "creation_date": 1513184095, "question_id": 47798435, "link": "https://stackoverflow.com/questions/47798435/extract-text-by-row-using-mechanize", "title": "Extract text by row using Mechanize", "body": "<p>I'm trying to extract some datas from a page.</p>\n\n<p>My page is:</p>\n\n<pre><code>&lt;div class=\"row\"&gt;\n    &lt;div class=\"title\"&gt;\n        &lt;a href=\"#\"&gt;Orange&lt;/a&gt;\n    &lt;/div&gt;\n    &lt;div class=\"color\"&gt;\n        &lt;a href=\"#\"&gt;orange&lt;/a&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;div class=\"row\"&gt;\n    &lt;div class=\"title\"&gt;\n        &lt;a href=\"#\"&gt;Banana&lt;/a&gt;\n    &lt;/div&gt;\n    &lt;div class=\"color\"&gt;\n        &lt;a href=\"#\"&gt;yellow&lt;/a&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I want to extract <code>title</code> and <code>color</code> by row.</p>\n\n<p>This is my script:</p>\n\n<pre><code>require 'mechanize'\n\nmechanize = Mechanize.new\npage = mechanize.get(\"#{url}\")\n\npage.search(\"div.row\").each do |row|\n    title = row.at(\"div.title a\")\n    email = row.at(\"div.color a\")\n    puts title\n    puts email\nend\n</code></pre>\n\n<p>It works but results are like this:</p>\n\n<pre><code>&lt;a href=\"#\"&gt;Orange&lt;/a&gt;\n&lt;a href=\"#\"&gt;orange&lt;/a&gt;\n&lt;a href=\"#\"&gt;Banana&lt;/a&gt;\n&lt;a href=\"#\"&gt;yellow&lt;/a&gt;\n</code></pre>\n\n<p>I would like to extract only texts.\nI try with <code>title = row.at(\"div.title a\").text</code> but I have an error <code>undefined method 'text' for nil:NilClass (NoMethodError)</code></p>\n\n<p>Any idea? thx</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "actionmailer"], "answers": [{"tags": [], "owner": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "is_accepted": true, "score": 5, "last_activity_date": 1513184258, "creation_date": 1513184258, "answer_id": 47798485, "question_id": 47798373, "link": "https://stackoverflow.com/questions/47798373/rails-devise-custom-mailers/47798485#47798485", "title": "Rails Devise custom mailers", "body": "<p>To use a custom mailer, create a class that extends <code>Devise::Mailer</code>, like this:</p>\n\n<pre><code>class MyMailer &lt; Devise::Mailer   \n  helper :application # gives access to all helpers defined within `application_helper`.\n  include Devise::Controllers::UrlHelpers # Optional. eg. `confirmation_url`\n  default template_path: 'devise/mailer' # to make sure that your mailer uses the devise views\nend\n</code></pre>\n\n<p>Then, in your <code>config/initializers/devise.rb</code>, set <code>config.mailer</code> to <code>\"MyMailer\"</code>.</p>\n\n<p>You may now use your <code>MyMailer</code> in the same way as any other mailer. In case you want to override specific mails to add extra headers, you can do so by simply overriding the method and calling <code>super</code> at the end of your custom method, to trigger Devise's default behavior. </p>\n\n<p>For instance, we can add a new header for the <code>confirmation_instructions</code> e-mail as follows:</p>\n\n<pre><code>def confirmation_instructions(record, token, opts={})\n  headers[\"Custom-header\"] = \"Bar\"\n  super\nend\n</code></pre>\n\n<p>You can also override any of the basic headers (from, reply_to, etc) by manually setting the options hash:</p>\n\n<pre><code>def confirmation_instructions(record, token, opts={})\n  headers[\"Custom-header\"] = \"Bar\"\n  opts[:from] = 'my_custom_from@domain.com'\n  opts[:reply_to] = 'my_custom_from@domain.com'\n  super\nend\n</code></pre>\n\n<p>In order to get preview (if <code>User</code> is your devise model name):</p>\n\n<pre><code># test/mailers/previews/my_mailer_preview.rb\n# Preview all emails at http://localhost:3000/rails/mailers/my_mailer\n\nclass MyMailerPreview &lt; ActionMailer::Preview\n\n  def confirmation_instructions\n    MyMailer.confirmation_instructions(User.first, \"faketoken\", {})\n  end\n\n  def reset_password_instructions\n    MyMailer.reset_password_instructions(User.first, \"faketoken\", {})\n  end\n\n  def unlock_instructions\n    MyMailer.unlock_instructions(User.first, \"faketoken\", {})\n  end\nend\n</code></pre>\n\n<p>In order to control which queue name the mailer queues up new email, add the following method to your class (<code>MyMailer</code>, above):</p>\n\n<pre><code>def deliver_later\n   Devise::Mailer.delay(queue: 'my_queue').send(...)\nend\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 7593455, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d06ace30b747ea263e32854fa6ac94ff?s=128&d=identicon&r=PG&f=1", "display_name": "YoloSnake", "link": "https://stackoverflow.com/users/7593455/yolosnake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3146, "favorite_count": 2, "accepted_answer_id": 47798485, "answer_count": 1, "score": 3, "last_activity_date": 1513184669, "creation_date": 1513183910, "last_edit_date": 1513184669, "question_id": 47798373, "link": "https://stackoverflow.com/questions/47798373/rails-devise-custom-mailers", "title": "Rails Devise custom mailers", "body": "<p>I want to add new mailer methods to Devise that mostly copy the workflow of the built-in ones but with some added parameters and different views.</p>\n\n<p>For example reset_password_instructions is used in two cases:</p>\n\n<ol>\n<li>When an existing user simply wants to reset his password.</li>\n<li>When a user invites another user, that user is saved in the database with a randomized password. He is sent an email with a reset_password_token that should redirect him to the edit password page so he could later sign in.</li>\n</ol>\n\n<p>Same functionality, but I want the second email to have a different view, and also I need to be able to pass in the name of the person who sent the invitation.</p>\n\n<p>It is very confusing because Devise mailers call a bunch of other methods and helpers so I don't know what methods to rewrite in order to achieve this.</p>\n"}, {"tags": ["ruby", "amazon-web-services", "aws-sdk", "amazon-ses"], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 1, "last_activity_date": 1513183809, "creation_date": 1513183809, "answer_id": 47798341, "question_id": 47798137, "link": "https://stackoverflow.com/questions/47798137/send-email-with-aws-ses-with-image-attachment-ruby/47798341#47798341", "title": "Send Email with AWS SES with image attachment - Ruby", "body": "<p>The notation for hash-style arguments is:</p>\n\n<pre><code>destinations: {\n  to_addresses: [ ... ],\n  cc_addresses: [ ... ],\n}\n</code></pre>\n\n<p>You're declaring <code>destinations</code> with <code>[ ... ]</code> which means array, and that hash notation inside is invalid.</p>\n"}], "owner": {"reputation": 55, "user_id": 8172461, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/20867da9160bcd0a4989c60f0c5c4746?s=128&d=identicon&r=PG&f=1", "display_name": "belshnickleson97", "link": "https://stackoverflow.com/users/8172461/belshnickleson97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "accepted_answer_id": 47798341, "answer_count": 1, "score": 0, "last_activity_date": 1528201087, "creation_date": 1513183146, "last_edit_date": 1528201087, "question_id": 47798137, "link": "https://stackoverflow.com/questions/47798137/send-email-with-aws-ses-with-image-attachment-ruby", "title": "Send Email with AWS SES with image attachment - Ruby", "body": "<p>I am trying to send an email with AWS SES send_raw_email. My email address is verified on AWS. I am not able to figure out how to format my <code>destinations:</code> </p>\n\n<pre><code>  destinations: [\n    to_addresses: [\"example@gmail.com\"]\n    cc_addresses: [\"example@gmail.com\"]]\n</code></pre>\n\n<p>The above code throws this error <code>ArgumentError: expected params[:destinations][0] to be a String, got value {:to_addresses=&gt;[\"example@gmail.com\"], :cc_addresses=&gt;[\"example@gmail.com\"]} (class: Hash) instead.</code></p>\n\n<p>I am basing my code off of this <a href=\"http://docs.aws.amazon.com/sdkforruby/api/Aws/SES/Client.html\" rel=\"nofollow noreferrer\">documentation</a> </p>\n\n<p>In case it's helpful, what I am trying to do is send an email that has attached images to it. </p>\n\n<p>Any help is greatly appreciated! Thank you </p>\n"}, {"tags": ["ruby", "bash", "heroku", "rubygems", "rake"], "comments": [{"owner": {"reputation": 4323, "user_id": 2057091, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7kWv6.png?s=128&g=1", "display_name": "Aserre", "link": "https://stackoverflow.com/users/2057091/aserre"}, "edited": false, "score": 0, "creation_date": 1513181183, "post_id": 47797438, "comment_id": 82555678, "body": "have you installed <code>rake</code> on your bash on windows setup ? is it on the $PATH ? is <code>heroku</code> a windows command or a linux command ?"}, {"owner": {"reputation": 9, "user_id": 8945756, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5nhZ1KMn4Sc/AAAAAAAAAAI/AAAAAAAABLI/eHtdbW2jIG0/photo.jpg?sz=128", "display_name": "Elena Hickey", "link": "https://stackoverflow.com/users/8945756/elena-hickey"}, "reply_to_user": {"reputation": 4323, "user_id": 2057091, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7kWv6.png?s=128&g=1", "display_name": "Aserre", "link": "https://stackoverflow.com/users/2057091/aserre"}, "edited": false, "score": 0, "creation_date": 1513182014, "post_id": 47797438, "comment_id": 82556221, "body": "heroku is a windows command. All of my files are windows files. In the bash ubuntu shell i can not change directories to my app files, i keep getting &quot;bash: /mnt/c/: Is a directory&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 8945756, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5nhZ1KMn4Sc/AAAAAAAAAAI/AAAAAAAABLI/eHtdbW2jIG0/photo.jpg?sz=128", "display_name": "Elena Hickey", "link": "https://stackoverflow.com/users/8945756/elena-hickey"}, "edited": false, "score": 0, "creation_date": 1513188339, "post_id": 47797673, "comment_id": 82560174, "body": "I&#39;ve used run rake &amp; rake both have returned the same result"}, {"owner": {"reputation": 214, "user_id": 1233365, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5db4f404eff399b87bd97d619e77a8c1?s=128&d=identicon&r=PG", "display_name": "Miguel de Sousa", "link": "https://stackoverflow.com/users/1233365/miguel-de-sousa"}, "reply_to_user": {"reputation": 9, "user_id": 8945756, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5nhZ1KMn4Sc/AAAAAAAAAAI/AAAAAAAABLI/eHtdbW2jIG0/photo.jpg?sz=128", "display_name": "Elena Hickey", "link": "https://stackoverflow.com/users/8945756/elena-hickey"}, "edited": false, "score": 0, "creation_date": 1513266560, "post_id": 47797673, "comment_id": 82596202, "body": "If you don&#39;t give any more info it&#39;s harder to help"}], "tags": [], "owner": {"reputation": 214, "user_id": 1233365, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5db4f404eff399b87bd97d619e77a8c1?s=128&d=identicon&r=PG", "display_name": "Miguel de Sousa", "link": "https://stackoverflow.com/users/1233365/miguel-de-sousa"}, "is_accepted": false, "score": -1, "last_activity_date": 1513181782, "creation_date": 1513181782, "answer_id": 47797673, "question_id": 47797438, "link": "https://stackoverflow.com/questions/47797438/heroku-bash-rake-command-not-found-windows-10/47797673#47797673", "title": "heroku, bash: rake: command not found ,Windows 10", "body": "<p>You're running that command on heroku platform.</p>\n\n<p>And, as seen on <a href=\"https://devcenter.heroku.com/articles/rake\" rel=\"nofollow noreferrer\">documentation</a>, you should run your command as</p>\n\n<blockquote>\n  <p>heroku run rake db:migrate -a [appname]</p>\n</blockquote>\n\n<p>My guess would be that you have something in some script that tries to execute rake.</p>\n\n<p>You can use the --trace argument to see the detailed execution.</p>\n"}], "owner": {"reputation": 9, "user_id": 8945756, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5nhZ1KMn4Sc/AAAAAAAAAAI/AAAAAAAABLI/eHtdbW2jIG0/photo.jpg?sz=128", "display_name": "Elena Hickey", "link": "https://stackoverflow.com/users/8945756/elena-hickey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 347, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513188160, "creation_date": 1513181059, "last_edit_date": 1513188160, "question_id": 47797438, "link": "https://stackoverflow.com/questions/47797438/heroku-bash-rake-command-not-found-windows-10", "title": "heroku, bash: rake: command not found ,Windows 10", "body": "<p>I have searched through the slack forums and nothing seems to be working for my instance! </p>\n\n<p>A little background; I am working with a Angular1, Heroku-Postgresql, Nodejs, Ruby&amp;Rails application. Previously developed by someone else and has been passed down to me.</p>\n\n<p>When I run in Windows Powershell</p>\n\n<pre><code>heroku rake db:migrate -a [app]\n</code></pre>\n\n<p>my console returns </p>\n\n<pre><code>Running rake db:migrate on [app]... up, run.7474 (Free) bash: rake: command not found\n</code></pre>\n\n<p>I have tried \"<em>heroku run rake db:migrate</em>\", does not work. </p>\n\n<p>Installed <em>bash on ubuntu on windows</em>, added appropriate gem files, heroku, etc. created a symbolic link <code>sudo ln -s /var/lib/gems/1.8/bin/rake</code>\n&amp; still get <code>bash: rake: command not found</code></p>\n\n<p>Tried to <em>run rake</em> inside the heroku bash shell, and still get 'not found'.</p>\n\n<p>Updated gemfiles, ruby files, added ruby bin to my environment variables. </p>\n\n<p>So what gives? I am not familiar with Bash Ubuntu. Any guidance on what steps to take/try would be tremendous help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "performance", "ruby-on-rails-4", "query-performance"], "comments": [{"owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "edited": false, "score": 1, "creation_date": 1513181249, "post_id": 47797415, "comment_id": 82555718, "body": "You can do it in two queries: 1) <code>Post.where(user_id: nil).update_all active: false</code> 2) <code>Post.where(&#39;user_id IS NOT NULL&#39;).update_all active: true</code>. But it won&#39;t fire callbacks"}, {"owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "edited": false, "score": 0, "creation_date": 1513181409, "post_id": 47797415, "comment_id": 82555820, "body": "<code>Post.all</code> will build objects for every record what leads to big memory consumption as well"}, {"owner": {"reputation": 836, "user_id": 8757289, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/mNoqN.png?s=128&g=1", "display_name": "script", "link": "https://stackoverflow.com/users/8757289/script"}, "reply_to_user": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "edited": false, "score": 0, "creation_date": 1513182434, "post_id": 47797415, "comment_id": 82556512, "body": "Thanks that&#39;s what i need"}, {"owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "reply_to_user": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "edited": false, "score": 0, "creation_date": 1513184180, "post_id": 47797415, "comment_id": 82557757, "body": "@jeffdill2 I don&#39;t know. I guess the answer has to be more comprehensive. And I think there is a way to do it with one request using something like sql <code>case</code> statement"}, {"owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "edited": false, "score": 0, "creation_date": 1513184308, "post_id": 47797415, "comment_id": 82557833, "body": "By the way @k00ka gave the best option"}, {"owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "reply_to_user": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "edited": false, "score": 0, "creation_date": 1513184554, "post_id": 47797415, "comment_id": 82557991, "body": "@jeffdill2 no problem, I will consider it in the future"}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1513181430, "post_id": 47797513, "comment_id": 82555827, "body": "@ndn Nah. The best approach in any case would be to remove <code>active</code> field from the database and implement <code>def active; user.present?; end</code>."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1513181541, "post_id": 47797513, "comment_id": 82555913, "body": "You don&#39;t know that. An <code>active</code> post might mean something completely different and it&#39;s just that OP wants to populate it with these values initially."}, {"owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "edited": false, "score": 0, "creation_date": 1513181586, "post_id": 47797513, "comment_id": 82555949, "body": "You don&#39;t have to use plain SQL. It&#39;s not Rails way. ActiveRecord allows to do it as well"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "edited": false, "score": 0, "creation_date": 1513181607, "post_id": 47797513, "comment_id": 82555967, "body": "@user3309314 Rails sucks, I never use Rails way if possible."}, {"owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "edited": false, "score": 0, "creation_date": 1513181675, "post_id": 47797513, "comment_id": 82556008, "body": "@mudasobwa as you wish"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1513181687, "post_id": 47797513, "comment_id": 82556015, "body": "@ndn I know that if you need to populate any field with some other field\u2019s values then something went wrong with the design :)"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1513181805, "post_id": 47797513, "comment_id": 82556095, "body": "@mudasobwa, why so? Imagine that OP wants to implement a new feature that allows users to soft delete their posts. In order to do that, users can set the post as active/inactive. The question is what to do with the existing data. It is perfectly sensible to create a one time rake task to mark posts without a user as inactive and ones with - as active."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1513181934, "post_id": 47797513, "comment_id": 82556162, "body": "@ndn Eh? \u201cposts without a user\u201d? Even if this is legit (also I doubt it might be,) they should not be soft-deleted all of a sudden."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1513182079, "post_id": 47797513, "comment_id": 82556251, "body": "I agree that the fact that users are hard deleted if posts are soft deleted is a bit of a wtf. But even then, if floating posts should be hidden all of the sudden can be a business decision. Also this was just one interpretation of <code>active</code>, it might mean something completely different."}, {"owner": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "edited": false, "score": 0, "creation_date": 1513191885, "post_id": 47797513, "comment_id": 82561884, "body": "This answer is only setting <code>active</code> when a user isn&#39;t present. It&#39;s not accounting for setting <code>active</code> to false when a user <i>is</i> present."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1513181291, "creation_date": 1513181291, "answer_id": 47797513, "question_id": 47797415, "link": "https://stackoverflow.com/questions/47797415/optimize-the-query-for-better-performance/47797513#47797513", "title": "Optimize the query for better performance", "body": "<pre><code>Post.connection.execute \\\n  \"UPDATE posts SET active = TRUE WHERE user_id IS NOT NULL\"\n</code></pre>\n\n<hr>\n\n<p>The proper approach would be to remove <code>active</code> field from the database and implement the ruby getter in <code>Post</code> class:</p>\n\n<pre><code>def active\n  user.present?\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1128, "user_id": 3410287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/313ef3d2368206228678a2a208bec181?s=128&d=identicon&r=PG", "display_name": "k00ka", "link": "https://stackoverflow.com/users/3410287/k00ka"}, "is_accepted": false, "score": 5, "last_activity_date": 1513184496, "last_edit_date": 1513184496, "creation_date": 1513183266, "answer_id": 47798170, "question_id": 47797415, "link": "https://stackoverflow.com/questions/47797415/optimize-the-query-for-better-performance/47798170#47798170", "title": "Optimize the query for better performance", "body": "<p>This should do the trick - and it's FAST...</p>\n\n<pre><code>Post.update_all(\"active = (user_id IS NOT NULL)\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3307, "user_id": 2266827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Frcc8.png?s=128&g=1", "display_name": "jeffdill2", "link": "https://stackoverflow.com/users/2266827/jeffdill2"}, "is_accepted": true, "score": 3, "last_activity_date": 1513185191, "creation_date": 1513185191, "answer_id": 47798767, "question_id": 47797415, "link": "https://stackoverflow.com/questions/47797415/optimize-the-query-for-better-performance/47798767#47798767", "title": "Optimize the query for better performance", "body": "<p>Here's another option that does it in two queries without any raw SQL (just plain ol' Rails):</p>\n\n<pre><code>Post.where(user_id: nil).update_all(active: false)\nPost.where.not(user_id: nil).update_all(active: true)\n</code></pre>\n\n<p>And, believe it or not, this actually runs faster in the database than doing it in one query that's using an expression \u2013 <code>active = (user_id IS NOT NULL)</code> \u2013\u00a0to populate <code>active</code>.</p>\n\n<p>Here are the speed results from testing on a table with only 20,000 records:</p>\n\n<pre><code># Single (expression-based) query\n&lt;Benchmark::Tms:0x00007fd251a52780 @cstime=0.0, @cutime=0.0, @label=\"\", @real=2.3656239999982063, @stime=0.0, @total=0.009999999999999787, @utime=0.009999999999999787&gt;\n\n# Two (purely column-based) queries\n&lt;Benchmark::Tms:0x00007fd2518c36d0 @cstime=0.0, @cutime=0.0, @label=\"\", @real=2.309347999995225, @stime=0.0, @total=0.0, @utime=0.0&gt;\n</code></pre>\n"}], "owner": {"reputation": 836, "user_id": 8757289, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/mNoqN.png?s=128&g=1", "display_name": "script", "link": "https://stackoverflow.com/users/8757289/script"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 47798767, "answer_count": 3, "score": 2, "last_activity_date": 1513185795, "creation_date": 1513181011, "last_edit_date": 1513185795, "question_id": 47797415, "link": "https://stackoverflow.com/questions/47797415/optimize-the-query-for-better-performance", "title": "Optimize the query for better performance", "body": "<p>So I have this function.</p>\n\n<p>Let say I have <strong>millions</strong> of posts.</p>\n\n<p>How can I optimize this function?</p>\n\n<pre><code>def fun\n  Post.all.each do |post|\n    if post.user.present?\n       post.active = true\n    else\n       post.active = false\n    end\n    post.save\n  end\nend\n</code></pre>\n\n<p>Like do this in fewer line with better performance because this is not a very good approach.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "actionmailer"], "comments": [{"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1513182742, "post_id": 47797193, "comment_id": 82556724, "body": "Have a look at delayed jobs, something like <a href=\"http://api.rubyonrails.org/classes/ActionMailer/MessageDelivery.html\" rel=\"nofollow noreferrer\">ActionMailer</a> or <a href=\"https://github.com/javan/whenever\" rel=\"nofollow noreferrer\">Whenever</a>. Without more info on what you&#39;ve tried and your code, it&#39;ll be hard to get a specific answer - have a look at <a href=\"https://stackoverflow.com/help/mcve\">this guide</a> and see if you can tighten it up at all and I&#39;m sure people&#39;ll help out :)"}, {"owner": {"reputation": 41, "user_id": 8611220, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/v2oas.jpg?s=128&g=1", "display_name": "\u122doll\u03b9n", "link": "https://stackoverflow.com/users/8611220/%e1%88%adoll%ce%b9n"}, "reply_to_user": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1513188466, "post_id": 47797193, "comment_id": 82560244, "body": "Ok, thanks. I&#39;ll look into it"}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1513184367, "post_id": 47797522, "comment_id": 82557875, "body": "This runs the very real risk of mailing people multiple times if you&#39;re not careful."}, {"owner": {"reputation": 41, "user_id": 8611220, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/v2oas.jpg?s=128&g=1", "display_name": "\u122doll\u03b9n", "link": "https://stackoverflow.com/users/8611220/%e1%88%adoll%ce%b9n"}, "edited": false, "score": 0, "creation_date": 1513369396, "post_id": 47797522, "comment_id": 82642648, "body": "Yes, it&#39;s not exactly what I&#39;m looking for."}, {"owner": {"reputation": 616, "user_id": 2675376, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000498640121/picture?type=large", "display_name": "Juan Manuel Rodulfo Salcedo", "link": "https://stackoverflow.com/users/2675376/juan-manuel-rodulfo-salcedo"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1515684845, "post_id": 47797522, "comment_id": 83402402, "body": "@tadman how is that even possible? only if you change the created_at field of a user... see that you are checking with == not &gt;=."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1515692284, "post_id": 47797522, "comment_id": 83407196, "body": "@JuanManuelRodulfoSalcedo You should have some kind of other field like <code>last_mailed_at</code> which can be part of the clause, too, where you update that if you successfully send mail. This means if the cron job runs twice one day you&#39;re not going to send twice."}], "tags": [], "owner": {"reputation": 616, "user_id": 2675376, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000498640121/picture?type=large", "display_name": "Juan Manuel Rodulfo Salcedo", "link": "https://stackoverflow.com/users/2675376/juan-manuel-rodulfo-salcedo"}, "is_accepted": false, "score": -1, "last_activity_date": 1513204920, "last_edit_date": 1513204920, "creation_date": 1513181316, "answer_id": 47797522, "question_id": 47797193, "link": "https://stackoverflow.com/questions/47797193/schedule-an-email-two-weeks-after-signup-with-actionmailer/47797522#47797522", "title": "Schedule an Email Two Weeks After Signup with ActionMailer", "body": "<p>Make a ruby method that get users where:</p>\n\n<pre><code>user.created_at.to_date == DateTime.now.to_date - 2.week\n</code></pre>\n\n<p>Then make a <code>crontab</code> calling that method every day.</p>\n\n<p>profit.</p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 8611220, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/v2oas.jpg?s=128&g=1", "display_name": "\u122doll\u03b9n", "link": "https://stackoverflow.com/users/8611220/%e1%88%adoll%ce%b9n"}, "reply_to_user": {"reputation": 616, "user_id": 2675376, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000498640121/picture?type=large", "display_name": "Juan Manuel Rodulfo Salcedo", "link": "https://stackoverflow.com/users/2675376/juan-manuel-rodulfo-salcedo"}, "edited": false, "score": 0, "creation_date": 1516911500, "post_id": 47839401, "comment_id": 83895309, "body": "At least I found a solution. Better than anyone else could do."}], "tags": [], "owner": {"reputation": 41, "user_id": 8611220, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/v2oas.jpg?s=128&g=1", "display_name": "\u122doll\u03b9n", "link": "https://stackoverflow.com/users/8611220/%e1%88%adoll%ce%b9n"}, "is_accepted": true, "score": -1, "last_activity_date": 1513369524, "creation_date": 1513369524, "answer_id": 47839401, "question_id": 47797193, "link": "https://stackoverflow.com/questions/47797193/schedule-an-email-two-weeks-after-signup-with-actionmailer/47839401#47839401", "title": "Schedule an Email Two Weeks After Signup with ActionMailer", "body": "<p>To those interested in this, I ended up just making a Ruby function that checked which users had signed up more than two weeks ago every time I visited the Admin Panel on my site. If any user had been registered for 2 weeks or more, but had not yet received the 2-week email, a div would appear with a button to manually send the email to that user. This seemed easier to me than trying to create a scheduler simply because I would visit the Admin Panel every day.</p>\n"}], "owner": {"reputation": 41, "user_id": 8611220, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/v2oas.jpg?s=128&g=1", "display_name": "\u122doll\u03b9n", "link": "https://stackoverflow.com/users/8611220/%e1%88%adoll%ce%b9n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 47839401, "answer_count": 2, "score": -2, "last_activity_date": 1513369524, "creation_date": 1513180316, "question_id": 47797193, "link": "https://stackoverflow.com/questions/47797193/schedule-an-email-two-weeks-after-signup-with-actionmailer", "title": "Schedule an Email Two Weeks After Signup with ActionMailer", "body": "<p>I have a web application that has ActionMailer already successfully running, and it sends an email to the user when they complete the signup. At the same time this email gets sent, I would also like an email to be scheduled to send to them two weeks in the future. Is there any way to do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "class-members"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 4, "creation_date": 1513181457, "post_id": 47796953, "comment_id": 82555861, "body": "I strongly suggest you follow some sort of &quot;intro to ruby&quot; tutorial. I appreciate you know how to write code in other languages, but this code <b>looks</b> like it&#39;s written in another language!"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8682127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ac04fc69f7460f0d2afa6399190df76?s=128&d=identicon&r=PG", "display_name": "progan01", "link": "https://stackoverflow.com/users/8682127/progan01"}, "edited": false, "score": 0, "creation_date": 1513182902, "post_id": 47797200, "comment_id": 82556834, "body": "Aha - of course the : was making id the key rather than using the parameter id, thanks - also for the conventions pointers."}, {"owner": {"reputation": 11, "user_id": 8682127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ac04fc69f7460f0d2afa6399190df76?s=128&d=identicon&r=PG", "display_name": "progan01", "link": "https://stackoverflow.com/users/8682127/progan01"}, "edited": false, "score": 0, "creation_date": 1513183258, "post_id": 47797200, "comment_id": 82557099, "body": "I have things working now, cheers. Not sure how to &#39;accept as correct&#39;."}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1513183265, "post_id": 47797200, "comment_id": 82557103, "body": "Perhaps better to use the inbuilt <code>fetch</code> method here rather than persisting with <code>get</code>?"}, {"owner": {"reputation": 11, "user_id": 8682127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ac04fc69f7460f0d2afa6399190df76?s=128&d=identicon&r=PG", "display_name": "progan01", "link": "https://stackoverflow.com/users/8682127/progan01"}, "edited": false, "score": 0, "creation_date": 1513183370, "post_id": 47797200, "comment_id": 82557190, "body": "Hi - It is as I was thinking in other language idioms. My train of thought would be that the client list should remain private and accessed through a getter. NB : The class once completed will be linked as a &#39;require_relative&#39; from my main working class - It will just provide a hard-coded lookup - stored in the hash."}], "tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": true, "score": 5, "last_activity_date": 1513181072, "last_edit_date": 1513181072, "creation_date": 1513180337, "answer_id": 47797200, "question_id": 47796953, "link": "https://stackoverflow.com/questions/47796953/return-members-of-a-hashmap-through-a-class-get-method/47797200#47797200", "title": "Return members of a hashmap through a class get method", "body": "<p>You've got two problems. First, you are using the symbol syntax in your hash, which works only if your keys are symbols. If you want keys to be strings, you need to use hash-rocket syntax: <code>@@clients = {'DP000459' =&gt; 'BP'}</code>.</p>\n\n<p>Second, your method returns <code>clients[:id]</code> regardless of what parameter is provided. The key is the symbol <code>:id</code> rather than the local variable <code>id</code>. You need to change this to <code>@@clients[id]</code>.</p>\n\n<p>Here's a cleaned-up version of what you want:</p>\n\n<pre><code>class ClientMap\n\n  def initialize\n    @@clients = {'DP000459' =&gt; 'BP'}\n    @@clients.default = 'client?'\n  end\n\n  def get(id)\n    @@clients[id]\n  end\nend\n</code></pre>\n\n<p>I've also taken the liberty of making the spacing more Ruby-idiomatic.</p>\n\n<p>Finally, for variable names in Ruby, <a href=\"https://github.com/bbatsov/ruby-style-guide#snake-case-symbols-methods-vars\" rel=\"nofollow noreferrer\">use snake_case</a>:</p>\n\n<pre><code>&gt;&gt; client_map = ClientMap.new\n&gt;&gt; c_key = 'DP000459'\n&gt;&gt; client_map.get(c_key)\n#&gt; \"BP\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1513180978, "post_id": 47797306, "comment_id": 82555537, "body": "@SergioTulentsev sure"}, {"owner": {"reputation": 11, "user_id": 8682127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ac04fc69f7460f0d2afa6399190df76?s=128&d=identicon&r=PG", "display_name": "progan01", "link": "https://stackoverflow.com/users/8682127/progan01"}, "edited": false, "score": 0, "creation_date": 1513182833, "post_id": 47797306, "comment_id": 82556783, "body": "Thanks for the advice, I will review. I realise the code looked like it was Ruby words superimposed over another language haha"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1513183196, "post_id": 47797306, "comment_id": 82557060, "body": "The OP is using Hash#default properly. Other problems were causing the code not to work."}], "tags": [], "owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "is_accepted": false, "score": 0, "last_activity_date": 1513180962, "last_edit_date": 1513180962, "creation_date": 1513180655, "answer_id": 47797306, "question_id": 47796953, "link": "https://stackoverflow.com/questions/47796953/return-members-of-a-hashmap-through-a-class-get-method/47797306#47797306", "title": "Return members of a hashmap through a class get method", "body": "<p>Look at these code:</p>\n\n<pre><code>h = { foo: 'bar' }               # =&gt; {:foo=&gt;\"bar\"}\nh.default = 'some default value' # =&gt; \"some default value\"\nh[:foo]                          # =&gt; \"bar\"\nh[:non_existing_key]             # =&gt; \"some default value\"\n</code></pre>\n\n<p>You can read <a href=\"https://docs.ruby-lang.org/en/2.0.0/Hash.html#method-i-default\" rel=\"nofollow noreferrer\">here</a> about Hash#default method</p>\n\n<blockquote>\n  <p>Returns the default value, the value that would be returned by hsh if\n  key did not exist in hsh</p>\n</blockquote>\n"}], "owner": {"reputation": 11, "user_id": 8682127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ac04fc69f7460f0d2afa6399190df76?s=128&d=identicon&r=PG", "display_name": "progan01", "link": "https://stackoverflow.com/users/8682127/progan01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 47797200, "answer_count": 2, "score": -1, "last_activity_date": 1513220543, "creation_date": 1513179577, "last_edit_date": 1513220543, "question_id": 47796953, "link": "https://stackoverflow.com/questions/47796953/return-members-of-a-hashmap-through-a-class-get-method", "title": "Return members of a hashmap through a class get method", "body": "<p>The following returns the <code>default</code> <code>\"client?\"</code>:</p>\n\n<pre><code>class ClientMap\n    def initialize\n        @@clients = {\"DP000459\": \"BP\"}\n        @@clients.default = \"client?\"\n    end\n\n    def get(id)\n        return @@clients[:id]\n    end\nend\n\nclientMap = ClientMap.new\ncKey = \"DP000459\"\nputs clientMap.get(cKey)\n</code></pre>\n\n<p>Could anybody explain why I cannot retrieve anything but the 'default'?</p>\n"}, {"tags": ["c", "ruby", "linux", "gcc", "ffi"], "comments": [{"owner": {"reputation": 19910, "user_id": 8012646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T8yOZ.png?s=128&g=1", "display_name": "\u30ed\u30fc\u30a6", "link": "https://stackoverflow.com/users/8012646/%e3%83%ad%e3%83%bc%e3%82%a6"}, "edited": false, "score": 0, "creation_date": 1513193152, "post_id": 47796477, "comment_id": 82562511, "body": "I think I&#39;ve found the issue: the problem is in the <code>g++</code> line, not the <code>gcc</code> one. I&#39;ve update the answer."}], "answers": [{"comments": [{"owner": {"reputation": 409, "user_id": 8116088, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/118e7985cfe1aa9a8dcc0c149d22f6dc?s=128&d=identicon&r=PG&f=1", "display_name": "user8116088", "link": "https://stackoverflow.com/users/8116088/user8116088"}, "edited": false, "score": 0, "creation_date": 1513179324, "post_id": 47796729, "comment_id": 82554473, "body": "That didn&#39;t help. Tried both: &quot;gcc -Wall -O2 -fPIC -ltiff -I/usr/lib/x86_64-linux-gnu -I/usr/include/x86_64-linux-gnu -c /&lt;path_to_source&gt;/main.c -o obj/Release/main.o&quot; and &quot;gcc -Wall -O2 -fPIC -L /usr/lib/x86_64-linux-gnu/libtiff.so -I/usr/lib/x86_64-linux-gnu -I/usr/include/x86_64-linux-gnu -c /&lt;path_to_source&gt;/main.c -o obj/Release/main.o&quot; Compiles fine but same error."}, {"owner": {"reputation": 409, "user_id": 8116088, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/118e7985cfe1aa9a8dcc0c149d22f6dc?s=128&d=identicon&r=PG&f=1", "display_name": "user8116088", "link": "https://stackoverflow.com/users/8116088/user8116088"}, "edited": false, "score": 0, "creation_date": 1513180551, "post_id": 47796729, "comment_id": 82555263, "body": "Sorry, but that didn&#39;t work either. I tried it both ways, with and without the libtiff.so on the end of the directory: &quot;gcc -Wall -O2 -fPIC -ltiff -L /usr/lib/x86_64-linux-gnu/ -I/usr/lib/x86_64-linux-gnu -I/usr/include/x86_64-linux-gnu -c /&lt;path_to_source/main.c -o obj/Release/main.o&quot; and &quot;gcc -Wall -O2 -fPIC -ltiff -L /usr/lib/x86_64-linux-gnu/libtiff.so -I/usr/lib/x86_64-linux-gnu -I/usr/include/x86_64-linux-gnu -c /&lt;path_to_source&gt;/main.c -o obj/Release/main.o&quot;"}, {"owner": {"reputation": 409, "user_id": 8116088, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/118e7985cfe1aa9a8dcc0c149d22f6dc?s=128&d=identicon&r=PG&f=1", "display_name": "user8116088", "link": "https://stackoverflow.com/users/8116088/user8116088"}, "edited": false, "score": 0, "creation_date": 1513180711, "post_id": 47796729, "comment_id": 82555345, "body": "from the same command line I&#39;m running the ruby script: echo $LIBRARY_PATH /usr/lib/x86_64-linux-gnu/... so yes it&#39;s in the path, but whether it is or isn&#39;t doesn&#39;t seem to make a difference."}, {"owner": {"reputation": 19910, "user_id": 8012646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T8yOZ.png?s=128&g=1", "display_name": "\u30ed\u30fc\u30a6", "link": "https://stackoverflow.com/users/8012646/%e3%83%ad%e3%83%bc%e3%82%a6"}, "reply_to_user": {"reputation": 409, "user_id": 8116088, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/118e7985cfe1aa9a8dcc0c149d22f6dc?s=128&d=identicon&r=PG&f=1", "display_name": "user8116088", "link": "https://stackoverflow.com/users/8116088/user8116088"}, "edited": false, "score": 0, "creation_date": 1513181010, "post_id": 47796729, "comment_id": 82555562, "body": "@Andrew sorry, I actually meant <code>LD_LIBRARY_PATH</code>"}, {"owner": {"reputation": 19910, "user_id": 8012646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T8yOZ.png?s=128&g=1", "display_name": "\u30ed\u30fc\u30a6", "link": "https://stackoverflow.com/users/8012646/%e3%83%ad%e3%83%bc%e3%82%a6"}, "reply_to_user": {"reputation": 409, "user_id": 8116088, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/118e7985cfe1aa9a8dcc0c149d22f6dc?s=128&d=identicon&r=PG&f=1", "display_name": "user8116088", "link": "https://stackoverflow.com/users/8116088/user8116088"}, "edited": false, "score": 0, "creation_date": 1513181416, "post_id": 47796729, "comment_id": 82555825, "body": "@Andrew you can check the library dependencies of <code>libtiffconverter.so</code> with <code>ldd libtiffconverter.so</code> and look whether they actually refer to an existing library."}, {"owner": {"reputation": 409, "user_id": 8116088, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/118e7985cfe1aa9a8dcc0c149d22f6dc?s=128&d=identicon&r=PG&f=1", "display_name": "user8116088", "link": "https://stackoverflow.com/users/8116088/user8116088"}, "edited": false, "score": 0, "creation_date": 1513184973, "post_id": 47796729, "comment_id": 82558245, "body": "&quot;export  LD_LIBRARY_PATH=/usr/lib/x86_64-linux-gnu/&quot; didn&#39;t help. I&#39;ve updated the question above with the output of ldd."}, {"owner": {"reputation": 409, "user_id": 8116088, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/118e7985cfe1aa9a8dcc0c149d22f6dc?s=128&d=identicon&r=PG&f=1", "display_name": "user8116088", "link": "https://stackoverflow.com/users/8116088/user8116088"}, "edited": false, "score": 1, "creation_date": 1513204341, "post_id": 47796729, "comment_id": 82567589, "body": "Your last update worked. -ltiff on the g++ line did the trick. I didn&#39;t need the -L option. Thank you so much!"}], "tags": [], "owner": {"reputation": 19910, "user_id": 8012646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T8yOZ.png?s=128&g=1", "display_name": "\u30ed\u30fc\u30a6", "link": "https://stackoverflow.com/users/8012646/%e3%83%ad%e3%83%bc%e3%82%a6"}, "is_accepted": true, "score": 1, "last_activity_date": 1513193411, "last_edit_date": 1513193411, "creation_date": 1513178893, "answer_id": 47796729, "question_id": 47796477, "link": "https://stackoverflow.com/questions/47796477/ruby-ffi-and-a-custom-c-library/47796729#47796729", "title": "Ruby, ffi, and a custom C library", "body": "<h3>The Problem</h3>\n\n<blockquote>\n  <p><code>/usr/bin/ruby: symbol lookup error: /&lt;path_to_lib&gt;/libtiffconverter.so: undefined symbol: TIFFOpen</code></p>\n</blockquote>\n\n<p>The function <code>TIFFOpen()</code> used by your <code>ConvertTIFF()</code> is not found. This function belongs to the <em>LibTIFF</em> library. You need to link your project against this library.</p>\n\n<h3>The Solution: Linking against LibTIFF</h3>\n\n<p>Add the option <code>-ltiff</code> to your <code>g++</code> line above, i.e.:</p>\n\n<pre><code>g++ -shared  obj/Release/main.o  -o bin/Release/libtiffconverter.so -s -ltiff\n</code></pre>\n\n<p>You can check whether your just generated <code>libtiffconverter.so</code> actually depends on the LibTIFF library (it should) this way:</p>\n\n<pre><code>ldd libtiffconverter.so | grep  libtiff\n</code></pre>\n\n<p>The following is an example output of the command above:</p>\n\n<pre><code>libtiff.so.5 =&gt; /usr/lib/x86_64-linux-gnu/libtiff.so.5 (0x00007fda361a8000)\n</code></pre>\n\n<hr>\n\n<p>You <em>may</em> also need to add the <code>-L</code> option to the <code>g++</code> line above followed by the directory where your <code>libtiff.so</code> is located. In order to obtain its location you can do the following:</p>\n\n<pre><code>find / -name 'libtiff*'\n</code></pre>\n"}], "owner": {"reputation": 409, "user_id": 8116088, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/118e7985cfe1aa9a8dcc0c149d22f6dc?s=128&d=identicon&r=PG&f=1", "display_name": "user8116088", "link": "https://stackoverflow.com/users/8116088/user8116088"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 47796729, "answer_count": 1, "score": 1, "last_activity_date": 1513260146, "creation_date": 1513178197, "last_edit_date": 1513260146, "question_id": 47796477, "link": "https://stackoverflow.com/questions/47796477/ruby-ffi-and-a-custom-c-library", "title": "Ruby, ffi, and a custom C library", "body": "<p>I'm trying to create a custom C library I can call from Ruby using FFI. My library will wrap certain libtiff functions with my own code, and the resulting higher-level functions will be called from within Ruby via the FFI interface.</p>\n\n<p>I've got test code working in C, that compiles successfully to a .so file. I've got that same code plumbed into Ruby via FFI, and can successfully call simple functions from ruby code.</p>\n\n<p>However, when I include libtiff in my C library code and define a function that uses some of the libtiff routines, the ruby code throws errors similar to the following at runtime.</p>\n\n<pre><code>/usr/bin/ruby: symbol lookup error: /&lt;path_to_lib&gt;/libtiffconverter.so: undefined symbol: TIFFOpen\n</code></pre>\n\n<p>My guess is this has something to do with the way the compiler/linker is doing things. I'm very rusty with C... haven't touched it in 15+ years, and I'm not sure exactly what to do to resolve the problem. I'm using, the Code::Blocks IDE, and have my code in a dynamic library project. As long as I don't include libtiff, everything works as expected. Once I do... though the code compiles, I get symbol lookup errors for anything in libtiff.so.</p>\n\n<p>Here's my test library module code that generates the above error:</p>\n\n<pre><code>#include \"tiffio.h\"\n\nint AddInt(int i1, int i2)\n{\n    return i1 + i2;\n}\n\nvoid ConvertTIFF()\n{\n    TIFF* tif = TIFFOpen(\"test0.tiff\", \"r\");\n    if (tif) {\n        uint32 imagelength;\n        tdata_t buf;\n        uint32 row;\n\n        TIFFGetField(tif, TIFFTAG_IMAGELENGTH, &amp;imagelength);\n        buf = _TIFFmalloc(TIFFScanlineSize(tif));\n        for (row = 0; row &lt; imagelength; row++)\n            TIFFReadScanline(tif, buf, row, 0);\n        _TIFFfree(buf);\n        TIFFClose(tif);\n    }\n}\n</code></pre>\n\n<p>Here are the compiler commands</p>\n\n<pre><code>gcc -Wall -O2 -fPIC -I/usr/lib/x86_64-linux-gnu -I/usr/include/x86_64-linux-gnu -c /&lt;path_to_source&gt;/main.c -o obj/Release/main.o\ng++ -shared  obj/Release/main.o  -o bin/Release/libtiffconverter.so -s\n</code></pre>\n\n<p><code>AddInt()</code> called from ruby via FFI, works just fine. <code>ConvertTIFF()</code> does not. Any help is much appreciated.  </p>\n\n<p><strong>UPDATE 1:</strong></p>\n\n<p>Here's the ldd output of my custom library:</p>\n\n<pre><code>bridge:~/tmp/tmp$ ldd libtiffconverter.so\n    linux-vdso.so.1 =&gt;  (0x00007ffd20db8000)\n    libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f4c9a84e000)\n    /lib64/ld-linux-x86-64.so.2 (0x000055a601577000)\n</code></pre>\n\n<p><strong>UPDATE 2:</strong></p>\n\n<p>Here's the ldd output now that things are working:</p>\n\n<pre><code>bridge:~/tmp/tmp$ ldd libtiffconverter.so \n    linux-vdso.so.1 =&gt;  (0x00007ffff4db7000)\n    libtiff.so.5 =&gt; /usr/lib/x86_64-linux-gnu/libtiff.so.5 (0x00007fabcbea4000)\n    libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007fabcbacb000)\n    liblzma.so.5 =&gt; /lib/x86_64-linux-gnu/liblzma.so.5 (0x00007fabcb8a8000)\n    libjbig.so.0 =&gt; /usr/lib/x86_64-linux-gnu/libjbig.so.0 (0x00007fabcb69a000)\n    libjpeg.so.8 =&gt; /usr/lib/x86_64-linux-gnu/libjpeg.so.8 (0x00007fabcb441000)\n    libz.so.1 =&gt; /lib/x86_64-linux-gnu/libz.so.1 (0x00007fabcb226000)\n    libm.so.6 =&gt; /lib/x86_64-linux-gnu/libm.so.6 (0x00007fabcaf1d000)\n    /lib64/ld-linux-x86-64.so.2 (0x000056320a73f000)\n    libdl.so.2 =&gt; /lib/x86_64-linux-gnu/libdl.so.2 (0x00007fabcad19000)\n</code></pre>\n"}, {"tags": ["ruby", "windows", "irb"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1513187683, "post_id": 47796437, "comment_id": 82559854, "body": "Have you looked at the <code>File</code> class at all? There is no reason to redirect irb output in this case. All you need to do is write the output you want to a <code>File</code>."}, {"owner": {"reputation": 1, "user_id": 9094528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea8a23e2e34dcf5d590208e7cf12691?s=128&d=identicon&r=PG&f=1", "display_name": "Ivel Rustyd", "link": "https://stackoverflow.com/users/9094528/ivel-rustyd"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1514474914, "post_id": 47796437, "comment_id": 82988543, "body": "would this make it a notepad file?"}, {"owner": {"reputation": 1, "user_id": 9094528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea8a23e2e34dcf5d590208e7cf12691?s=128&d=identicon&r=PG&f=1", "display_name": "Ivel Rustyd", "link": "https://stackoverflow.com/users/9094528/ivel-rustyd"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1514474962, "post_id": 47796437, "comment_id": 82988558, "body": "like open it and it opens notepad up with the output in it"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1514475490, "post_id": 47796437, "comment_id": 82988787, "body": "Correct something as simple as <code>File.open(&#39;&#47;path&#47;to&#47;file.txt&#39;,&#39;w&#39;) { |f| f.puts YOUR_LIST_OF_NAMES }</code> will work. Since you have posted no code about the list at all a comment is probably the best I do."}, {"owner": {"reputation": 1, "user_id": 9094528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea8a23e2e34dcf5d590208e7cf12691?s=128&d=identicon&r=PG&f=1", "display_name": "Ivel Rustyd", "link": "https://stackoverflow.com/users/9094528/ivel-rustyd"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1514478492, "post_id": 47796437, "comment_id": 82990307, "body": "hate to bother you again, I thought I could figure it out myself but couldn&#39;t the code you gave me no matter what i put in place of &#39; /path/to/file.txt &#39; it always comes back with couldn&#39;t find such directory"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1514478750, "post_id": 47796437, "comment_id": 82990425, "body": "Then the path you are supplying is incorrect. Not sure I can help you there since I have no idea what your directory structure looks like or even what OS you are on"}, {"owner": {"reputation": 1, "user_id": 9094528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea8a23e2e34dcf5d590208e7cf12691?s=128&d=identicon&r=PG&f=1", "display_name": "Ivel Rustyd", "link": "https://stackoverflow.com/users/9094528/ivel-rustyd"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1514479558, "post_id": 47796437, "comment_id": 82990825, "body": "windows 7 and the path is Libraries\\Documents\\list.txt"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1514481099, "post_id": 47796437, "comment_id": 82991596, "body": "That is not a path. That is a shortcut to your My Documents. The path would be &quot;/Users/YOUR USER NAME/Documents/list.txt&quot; (<b>note</b> use the forward slashes not the back slashes like you would normally on windows)"}], "owner": {"reputation": 1, "user_id": 9094528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea8a23e2e34dcf5d590208e7cf12691?s=128&d=identicon&r=PG&f=1", "display_name": "Ivel Rustyd", "link": "https://stackoverflow.com/users/9094528/ivel-rustyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513179067, "creation_date": 1513178069, "last_edit_date": 1513179067, "question_id": 47796437, "link": "https://stackoverflow.com/questions/47796437/i-want-to-redirect-my-irb-output-into-a-folder-of-my-choice-such-as-a-word-file", "title": "I want to redirect my irb output into a folder of my choice such as a word file", "body": "<p>so i have been trying to make a tillable list of names that will be put in alphabetic order and i got it to work but then realized this list helped me none if i didn't get it printed somewhere i could read it without the code obscuring it so i need only the output to be sent to a word / notepad file so i can use my output properly if you can help it would be EXTREMELY helpful to me please help also it may or may not help i just thought i should tell you im on windows if that changes anything</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sequel", "tiny-tds"], "answers": [{"comments": [{"owner": {"reputation": 7568, "user_id": 492969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b936bf1ffa62366b2c107de33361cc41?s=128&d=identicon&r=PG", "display_name": "three", "link": "https://stackoverflow.com/users/492969/three"}, "edited": false, "score": 0, "creation_date": 1515946975, "post_id": 47816728, "comment_id": 83485635, "body": "didn&#39;t know this extension existed. I wrote my own thing that downcased and underscored all column names so that I&#39;d have ruby style names."}], "tags": [], "owner": {"reputation": 11331, "user_id": 132053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f183bcc4176b308c9edabe79299e448f?s=128&d=identicon&r=PG", "display_name": "Jeremy Evans", "link": "https://stackoverflow.com/users/132053/jeremy-evans"}, "is_accepted": true, "score": 1, "last_activity_date": 1513264772, "creation_date": 1513264772, "answer_id": 47816728, "question_id": 47796268, "link": "https://stackoverflow.com/questions/47796268/how-to-keep-original-column-names-with-sequel/47816728#47816728", "title": "How to Keep Original Column Names with Sequel", "body": "<p>You can modify the default mangling on MSSQL by using the identifier_mangling extension:</p>\n\n<pre><code>DB.extension(:identifier_mangling)\nDB.identifier_input_method = DB.identifier_output_method = nil\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 5658363, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7bfe7e621c2df3b31ecaaa12d87b42f6?s=128&d=identicon&r=PG&f=1", "display_name": "JosephGage", "link": "https://stackoverflow.com/users/5658363/josephgage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 47816728, "answer_count": 1, "score": 0, "last_activity_date": 1513264772, "creation_date": 1513177603, "question_id": 47796268, "link": "https://stackoverflow.com/questions/47796268/how-to-keep-original-column-names-with-sequel", "title": "How to Keep Original Column Names with Sequel", "body": "<p>I have database with upper camelCase naming conventions eg. <code>MyColumn</code>. When using the <a href=\"https://github.com/jeremyevans/sequel\" rel=\"nofollow noreferrer\">Sequel</a> gem in my rails app to access the database the column is renamed to <code>mycolumn</code> as a model variable name or hash key. How can I preserve the original database column names in my code?</p>\n\n<p>I am using a SQL Server DB with tiny-tds adapter. I am also using the sequel-rails gem.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rake", "bundler", "rbenv"], "comments": [{"owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 0, "creation_date": 1513178081, "post_id": 47796053, "comment_id": 82553640, "body": "Is this in dev environment? Make sure that the app doesn&#39;t eager load and doesn&#39;t cache classes"}, {"owner": {"reputation": 506, "user_id": 4265498, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/WR15z.jpg?s=128&g=1", "display_name": "Sp&#228;tzle", "link": "https://stackoverflow.com/users/4265498/sp%c3%a4tzle"}, "reply_to_user": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 0, "creation_date": 1513179981, "post_id": 47796053, "comment_id": 82554909, "body": "yes, this is dev env. What has eager loading in a model/controller to do with it?"}, {"owner": {"reputation": 3015, "user_id": 1518336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/238d1c14366d5d0dd398b088c99f7b4c?s=128&d=identicon&r=PG", "display_name": "Daniel Westendorf", "link": "https://stackoverflow.com/users/1518336/daniel-westendorf"}, "edited": false, "score": 0, "creation_date": 1513186136, "post_id": 47796053, "comment_id": 82559013, "body": "Do you get the errors if you <code>bundle exec rake task</code> instead?"}, {"owner": {"reputation": 506, "user_id": 4265498, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/WR15z.jpg?s=128&g=1", "display_name": "Sp&#228;tzle", "link": "https://stackoverflow.com/users/4265498/sp%c3%a4tzle"}, "edited": false, "score": 0, "creation_date": 1513247876, "post_id": 47796053, "comment_id": 82583736, "body": "I get similar errors, this time regarding <code>rb-readline</code> o_O"}], "answers": [{"comments": [{"owner": {"reputation": 506, "user_id": 4265498, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/WR15z.jpg?s=128&g=1", "display_name": "Sp&#228;tzle", "link": "https://stackoverflow.com/users/4265498/sp%c3%a4tzle"}, "edited": false, "score": 0, "creation_date": 1515490142, "post_id": 48158426, "comment_id": 83309131, "body": "Well, running <code>bin&#47;rake</code> was error free, thanks. I&#39;ll try reverting bundler to an older version and report back."}], "tags": [], "owner": {"reputation": 79, "user_id": 3851094, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G2mme.jpg?s=128&g=1", "display_name": "tm.", "link": "https://stackoverflow.com/users/3851094/tm"}, "is_accepted": false, "score": 1, "last_activity_date": 1515447506, "creation_date": 1515447506, "answer_id": 48158426, "question_id": 47796053, "link": "https://stackoverflow.com/questions/47796053/rake-gives-a-pile-of-warnings-but-eventually-works/48158426#48158426", "title": "Rake gives a pile of warnings, but eventually works", "body": "<p>Instead of running <code>rake</code>, try <code>bin/rake</code> (assuming you're starting in your project's root directory). If <code>bin/rake</code> is gone for some reason, you could create a new Rails project elsewhere and copying it from there.</p>\n\n<p>On Rails 5, you could also run <code>rails test</code> (or <code>bin/rails test</code>).</p>\n\n<p>I think it may have something to do with recent versions of bundler which made some breaking changes. You might be able to revert bundler to 1.15.x as well (but I haven't tested this).</p>\n"}], "owner": {"reputation": 506, "user_id": 4265498, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/WR15z.jpg?s=128&g=1", "display_name": "Sp&#228;tzle", "link": "https://stackoverflow.com/users/4265498/sp%c3%a4tzle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 734, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1515447506, "creation_date": 1513177033, "question_id": 47796053, "link": "https://stackoverflow.com/questions/47796053/rake-gives-a-pile-of-warnings-but-eventually-works", "title": "Rake gives a pile of warnings, but eventually works", "body": "<p>I don't know what the hell happened to my app, it's probably since running <code>bundle install</code> lately, but each <code>rake</code> command is preceded by a pile of warnings. e.g, running <code>rake db:migrate</code> (My project is under <code>/railsProjects/matal-x</code>):</p>\n\n<pre><code>/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake/version.rb:3: warning: already initialized constant Rake::VERSION\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake/version.rb:3: warning: previous definition of VERSION was here\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake/version.rb:6: warning: already initialized constant Rake::Version::MAJOR\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake/version.rb:6: warning: previous definition of MAJOR was here\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake/version.rb:6: warning: already initialized constant Rake::Version::MINOR\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake/version.rb:6: warning: previous definition of MINOR was here\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake/version.rb:6: warning: already initialized constant Rake::Version::BUILD\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake/version.rb:6: warning: previous definition of BUILD was here\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake/version.rb:6: warning: already initialized constant Rake::Version::OTHER\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake/version.rb:6: warning: previous definition of OTHER was here\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake/version.rb:8: warning: already initialized constant Rake::Version::NUMBERS\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake/version.rb:8: warning: previous definition of NUMBERS was here\nWARNING: Possible conflict with Rake extension: String#ext already exists\nWARNING: Possible conflict with Rake extension: String#pathmap already exists\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake/linked_list.rb:110: warning: already initialized constant Rake::LinkedList::EMPTY\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake/linked_list.rb:110: warning: previous definition of EMPTY was here\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake/scope.rb:41: warning: already initialized constant Rake::Scope::EMPTY\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake/scope.rb:41: warning: previous definition of EMPTY was here\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake/file_utils.rb:10: warning: already initialized constant FileUtils::RUBY\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake/file_utils.rb:10: warning: previous definition of RUBY was here\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake/file_utils.rb:109: warning: already initialized constant FileUtils::LN_SUPPORTED\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake/file_utils.rb:109: warning: previous definition of LN_SUPPORTED was here\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake/file_utils_ext.rb:17: warning: already initialized constant Rake::FileUtilsExt::DEFAULT\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake/file_utils_ext.rb:17: warning: previous definition of DEFAULT was here\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake/file_list.rb:44: warning: already initialized constant Rake::FileList::ARRAY_METHODS\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake/file_list.rb:44: warning: previous definition of ARRAY_METHODS was here\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake/file_list.rb:47: warning: already initialized constant Rake::FileList::MUST_DEFINE\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake/file_list.rb:47: warning: previous definition of MUST_DEFINE was here\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake/file_list.rb:51: warning: already initialized constant Rake::FileList::MUST_NOT_DEFINE\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake/file_list.rb:51: warning: previous definition of MUST_NOT_DEFINE was here\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake/file_list.rb:55: warning: already initialized constant Rake::FileList::SPECIAL_RETURN\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake/file_list.rb:55: warning: previous definition of SPECIAL_RETURN was here\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake/file_list.rb:61: warning: already initialized constant Rake::FileList::DELEGATING_METHODS\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake/file_list.rb:61: warning: previous definition of DELEGATING_METHODS was here\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake/file_list.rb:86: warning: already initialized constant Rake::FileList::GLOB_PATTERN\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake/file_list.rb:86: warning: previous definition of GLOB_PATTERN was here\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake/file_list.rb:381: warning: already initialized constant Rake::FileList::DEFAULT_IGNORE_PATTERNS\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake/file_list.rb:381: warning: previous definition of DEFAULT_IGNORE_PATTERNS was here\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake/file_list.rb:387: warning: already initialized constant Rake::FileList::DEFAULT_IGNORE_PROCS\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake/file_list.rb:387: warning: previous definition of DEFAULT_IGNORE_PROCS was here\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake/promise.rb:12: warning: already initialized constant Rake::Promise::NOT_SET\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake/promise.rb:12: warning: previous definition of NOT_SET was here\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake/application.rb:13: warning: already initialized constant Rake::CommandLineOptionError\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake/application.rb:13: warning: previous definition of CommandLineOptionError was here\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake/application.rb:41: warning: already initialized constant Rake::Application::DEFAULT_RAKEFILES\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake/application.rb:41: warning: previous definition of DEFAULT_RAKEFILES was here\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake/task_arguments.rb:108: warning: already initialized constant Rake::EMPTY_TASK_ARGS\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake/task_arguments.rb:108: warning: previous definition of EMPTY_TASK_ARGS was here\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake/invocation_chain.rb:55: warning: already initialized constant Rake::InvocationChain::EMPTY\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake/invocation_chain.rb:55: warning: previous definition of EMPTY was here\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake/early_time.rb:21: warning: already initialized constant Rake::EARLY\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake/early_time.rb:21: warning: previous definition of EARLY was here\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake/late_time.rb:17: warning: already initialized constant Rake::LATE\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake/late_time.rb:17: warning: previous definition of LATE was here\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake/backtrace.rb:4: warning: already initialized constant Rake::Backtrace::SYS_KEYS\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake/backtrace.rb:4: warning: previous definition of SYS_KEYS was here\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake/backtrace.rb:5: warning: already initialized constant Rake::Backtrace::SYS_PATHS\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake/backtrace.rb:5: warning: previous definition of SYS_PATHS was here\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake/backtrace.rb:8: warning: already initialized constant Rake::Backtrace::SUPPRESSED_PATHS\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake/backtrace.rb:8: warning: previous definition of SUPPRESSED_PATHS was here\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake/backtrace.rb:12: warning: already initialized constant Rake::Backtrace::SUPPRESSED_PATHS_RE\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake/backtrace.rb:12: warning: previous definition of SUPPRESSED_PATHS_RE was here\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake/backtrace.rb:16: warning: already initialized constant Rake::Backtrace::SUPPRESS_PATTERN\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake/backtrace.rb:16: warning: previous definition of SUPPRESS_PATTERN was here\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake.rb:70: warning: already initialized constant FileList\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake.rb:70: warning: previous definition of FileList was here\n/home/guy/railsProjects/matal-x/vendor/ruby/2.1.0/gems/rake-12.3.0/lib/rake.rb:71: warning: already initialized constant RakeFileUtils\n/home/guy/.rbenv/versions/2.1.1/lib/ruby/gems/2.1.0/gems/rake-12.3.0/lib/rake.rb:71: warning: previous definition of RakeFileUtils was here\n</code></pre>\n\n<p>eventually the command is being run (e.i the column is being added to the table) but this is very strange.</p>\n\n<p>I run Rails 4.2.5 over ruby 2.1.1 (using rbenv), so I'm a bit surprised to see gems being installed under 2.1.0, but I'm not sure this has anything to do with my problem since I haven't updated my ruby version for a long time.</p>\n\n<p>I've already tried removing rake using <code>gem uninstall</code> and then reinstalling, even got to desperately trying <code>gem clean</code> and now nothing works. When I try running <code>bundle install</code> or <code>bundle update</code> it doesnt' do anything, even though I delete Gemfile.lock.</p>\n\n<p>Any Ideas? reverting to an older commit means about two weeks of work getting lost or at least re-written.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "private", "protected"], "comments": [{"owner": {"reputation": 616, "user_id": 2675376, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000498640121/picture?type=large", "display_name": "Juan Manuel Rodulfo Salcedo", "link": "https://stackoverflow.com/users/2675376/juan-manuel-rodulfo-salcedo"}, "edited": false, "score": 1, "creation_date": 1513177088, "post_id": 47795995, "comment_id": 82552908, "body": "everything below."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1513177634, "post_id": 47795995, "comment_id": 82553311, "body": "&quot;Does it mean that private method has ended and protected methods section has started?&quot; - yes"}], "answers": [{"tags": [], "owner": {"reputation": 2094, "user_id": 4444642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/19c1553c16a518fddd0831ed37e85a3c?s=128&d=identicon&r=PG&f=1", "display_name": "jbehrens94", "link": "https://stackoverflow.com/users/4444642/jbehrens94"}, "is_accepted": true, "score": 3, "last_activity_date": 1513177694, "creation_date": 1513177694, "answer_id": 47796295, "question_id": 47795995, "link": "https://stackoverflow.com/questions/47795995/using-private-and-protected-methods-in-one-controller-in-rails/47796295#47796295", "title": "Using private and protected methods in one controller in Rails", "body": "<p>To simply answer your question: yes, when you have the following code:</p>\n\n<pre><code>private\n  ....\n\nprotected\n  ....\n</code></pre>\n\n<p>Then private stops where protected begins.</p>\n"}], "owner": {"reputation": 898, "user_id": 6162996, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/oLM0m.jpg?s=128&g=1", "display_name": "Alexander Gorg", "link": "https://stackoverflow.com/users/6162996/alexander-gorg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 1, "accepted_answer_id": 47796295, "answer_count": 1, "score": 0, "last_activity_date": 1513177694, "creation_date": 1513176860, "last_edit_date": 1513177460, "question_id": 47795995, "link": "https://stackoverflow.com/questions/47795995/using-private-and-protected-methods-in-one-controller-in-rails", "title": "Using private and protected methods in one controller in Rails", "body": "<p>All the articles say about the difference between private and protected methods, however there's no clearance about using it.</p>\n\n<p>So if  code something like:</p>\n\n<pre><code>private\n  def my_method\n    #some code\n  end\n</code></pre>\n\n<p>Does private affect only the my_method or everything below?</p>\n\n<p><strong>UPDATE:</strong> \nAnd if affects everything what if I want to use protected methods as well?\nIf I code below my_method:</p>\n\n<pre><code>protected\n  def another_method\n    #some code\n  end\n</code></pre>\n\n<p>Does it mean that private method has ended and protected methods section has started?</p>\n"}, {"tags": ["ruby", "passenger"], "answers": [{"comments": [{"owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 0, "creation_date": 1513443910, "post_id": 47835061, "comment_id": 82660324, "body": "yes, you understand correctly. I think overriding the template will indeed do what I need, although I guess I&#39;d have to remember to re-overwrite any time I upgrade Passenger to a new version?  That is obviously un-optimal. If anyone from Phusion is reading this, I&#39;d recommend making this a config option, perhaps simply config the path to use for that template."}, {"owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "edited": false, "score": 0, "creation_date": 1513443953, "post_id": 47835061, "comment_id": 82660340, "body": "although I guess I can have my capistrano deploy script copy a template to the overwrite location on every deploy, that is at least a little bit better."}], "tags": [], "owner": {"reputation": 136, "user_id": 8483055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f141098f4463cff998350be10ee707e4?s=128&d=identicon&r=PG&f=1", "display_name": "OnixSO", "link": "https://stackoverflow.com/users/8483055/onixso"}, "is_accepted": false, "score": 1, "last_activity_date": 1513350688, "creation_date": 1513350688, "answer_id": 47835061, "question_id": 47795899, "link": "https://stackoverflow.com/questions/47795899/phusion-passenger-customizing-internal-passenger-error-while-still-passing-thr/47835061#47835061", "title": "Phusion Passenger: customizing internal passenger error, while still passing through Rails errors", "body": "<p>Let's see if I understand correctly. If the user is served with for example an HTTP 500 error page, this can come from three different sources:</p>\n\n<ol>\n<li>Your rails app (usually)</li>\n<li>Passenger (probably rarely, e.g. spawn error)</li>\n<li>Apache (overrides 1. and 2.)</li>\n</ol>\n\n<p>And what you would like is for the user to get: 1. + (customized by you) 2.</p>\n\n<p>The default way to override 2. is indeed to use option 3., but that would also override 1., which  you don't want.</p>\n\n<p>I don't think there is presently another option in Passenger to override 2., but you could overwrite the template that Passenger uses. In case friendly error pages are set to off, the template is:</p>\n\n<pre><code>`passenger-config about resourcesdir`/templates/undisclosed_error.html.template\n</code></pre>\n"}], "owner": {"reputation": 20735, "user_id": 307106, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6a13e655e637138f8d571cec3f9cea76?s=128&d=identicon&r=PG", "display_name": "jrochkind", "link": "https://stackoverflow.com/users/307106/jrochkind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513350688, "creation_date": 1513176606, "question_id": 47795899, "link": "https://stackoverflow.com/questions/47795899/phusion-passenger-customizing-internal-passenger-error-while-still-passing-thr", "title": "Phusion Passenger: customizing internal passenger error, while still passing through Rails errors", "body": "<p>I would like my ordinary Rails error pages to be passed on to the user-agent. I can of course customize these pages using normal Rails techniques.</p>\n\n<p>But if there's an internal passenger error (usually when passenger can't start the app at all), I would like to customize that page. Is there any way to do that?</p>\n\n<p>If I (apache) set PassengerErrorOverride on, then I can configure the internal passenger error page on the apache side -- but I also lose all of my customized ordinary Rails error pages, I think.</p>\n\n<p>Is there any way to keep my custom Rails error page bodies under normal operation, but still customize the internal Passenger fatal error screen somehow?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-postgresql"], "answers": [{"tags": [], "owner": {"reputation": 314, "user_id": 6637390, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/fDP1p.jpg?s=128&g=1", "display_name": "rail_engine", "link": "https://stackoverflow.com/users/6637390/rail-engine"}, "is_accepted": true, "score": 0, "last_activity_date": 1513739232, "creation_date": 1513739232, "answer_id": 47898224, "question_id": 47794780, "link": "https://stackoverflow.com/questions/47794780/rails-tenant-schema-switching-with-background-jobs-not-working/47898224#47898224", "title": "Rails Tenant schema switching with background jobs not working", "body": "<p>you are missing ActiveRecord::Base.establish_connection.connection try this \nsample code below :</p>\n\n<pre><code>namespace :debtor_email_data_fix do\n</code></pre>\n\n<p>desc 'update data'</p>\n\n<p>task email_normalize_to_downcase: :environment do\n    create_connection_with_db\n    Apartment::Tenant.switch!('app')</p>\n\n<pre><code>Email.find_each do |t|\n  t.update(address: t.address.downcase)\nend\n</code></pre>\n\n<p>end</p>\n\n<p>task all: [:email_normalize_to_downcase] do\n  end</p>\n\n<p>private</p>\n\n<p>def create_connection_with_db\n    ActiveRecord::Base.establish_connection.connection\n  end\nend</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8106529"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 47898224, "answer_count": 1, "score": 0, "last_activity_date": 1513739232, "creation_date": 1513173455, "last_edit_date": 1513224207, "question_id": 47794780, "link": "https://stackoverflow.com/questions/47794780/rails-tenant-schema-switching-with-background-jobs-not-working", "title": "Rails Tenant schema switching with background jobs not working", "body": "<p>Setting up a scheduled rake task using Whenever gem. \nRequired to switch to a specific schema (Using Apartment gem in my project)</p>\n\n<p>Code in config/schedule.rb</p>\n\n<pre><code>env :PATH, ENV['PATH']\nenv :GEM_PATH, ENV['GEM_PATH']\nset :output, \"#{Whenever.path}/log/scheduler.log\"\nevery 1.minute do\n  rake \"db:my_task\"\nend\n</code></pre>\n\n<p>Code in lib/tasks/my_task.rake</p>\n\n<pre><code>namespace :db do\n  task :my_task =&gt; :environment do\n    Apartment::Tenant.switch(\"subdomain\") do\n       #My Code here\n    end\n  end\nend\n</code></pre>\n\n<p>Produces the following error in logs log/scheduler.logs</p>\n\n<pre><code>  rake aborted!\n  Apartment::TenantNotFound: One of the following schema(s) is invalid: \"subdomain\" \"public\"\n/var/lib/gems/2.3.0/gems/apartment-1.2.0/lib/apartment/adapters/postgresql_adapter.rb:72:in `rescue in connect_to_new'\n/var/lib/gems/2.3.0/gems/apartment-1.2.0/lib/apartment/adapters/postgresql_adapter.rb:65:in `connect_to_new'\n/var/lib/gems/2.3.0/gems/apartment-1.2.0/lib/apartment/adapters/abstract_adapter.rb:91:in `block in switch!'\n/var/lib/gems/2.3.0/gems/activesupport-5.1.3/lib/active_support/callbacks.rb:97:in `run_callbacks'\n/var/lib/gems/2.3.0/gems/apartment-1.2.0/lib/apartment/adapters/abstract_adapter.rb:88:in `switch!'\n/var/lib/gems/2.3.0/gems/apartment-1.2.0/lib/apartment/adapters/abstract_adapter.rb:105:in `switch'\n/home/user1/Desktop/SPERICORN/kidversity/lib/tasks/dynamic_age_setter.rake:4:in `block (2 levels) in &lt;top (required)&gt;'\n/var/lib/gems/2.3.0/gems/rake-12.0.0/exe/rake:27:in `&lt;top (required)&gt;'\nActiveRecord::StatementInvalid: Could not find schema kochi\n/var/lib/gems/2.3.0/gems/apartment-1.2.0/lib/apartment/adapters/postgresql_adapter.rb:66:in `connect_to_new'\n/var/lib/gems/2.3.0/gems/apartment-1.2.0/lib/apartment/adapters/abstract_adapter.rb:91:in `block in switch!'\n/var/lib/gems/2.3.0/gems/activesupport-5.1.3/lib/active_support/callbacks.rb:97:in `run_callbacks'\n/var/lib/gems/2.3.0/gems/apartment-1.2.0/lib/apartment/adapters/abstract_adapter.rb:88:in `switch!'\n/var/lib/gems/2.3.0/gems/apartment-1.2.0/lib/apartment/adapters/abstract_adapter.rb:105:in `switch'\n/home/user1/Desktop/SPERICORN/kidversity/lib/tasks/dynamic_age_setter.rake:4:in `block (2 levels) in &lt;top (required)&gt;'\n/var/lib/gems/2.3.0/gems/rake-12.0.0/exe/rake:27:in `&lt;top (required)&gt;'\nTasks: TOP =&gt; db:dynamic_age_setter\n(See full trace by running task with --trace)\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1513182150, "post_id": 47794224, "comment_id": 82556299, "body": "It would be helpful if you could update the question with the sample data formatted for ruby (i.e. as an array of hashes) - that way people can copy the code and attempt to fix, rather than having to input it all manually. That be possible? If so, happy to take a look :)"}, {"owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "edited": false, "score": 0, "creation_date": 1513182159, "post_id": 47794224, "comment_id": 82556308, "body": "Try to do something like this: <code>Production.select(&#39;column1&#39;, &#39;column2&#39;, &#39;sum(column3)&#39;)...</code>. Right now you call sum method with :quantity as argument. Of course it gives the error"}, {"owner": {"reputation": 33, "user_id": 2074146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8866d8e8f8b7f6f1b3885259b8bab3de?s=128&d=identicon&r=PG", "display_name": "koelslaw", "link": "https://stackoverflow.com/users/2074146/koelslaw"}, "reply_to_user": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1513182639, "post_id": 47794224, "comment_id": 82556645, "body": "@SRack I am not sure how to produce a hash. Let chase that one down..."}], "owner": {"reputation": 33, "user_id": 2074146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8866d8e8f8b7f6f1b3885259b8bab3de?s=128&d=identicon&r=PG", "display_name": "koelslaw", "link": "https://stackoverflow.com/users/2074146/koelslaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1513171793, "creation_date": 1513171793, "question_id": 47794224, "link": "https://stackoverflow.com/questions/47794224/rails-group-by-date-and-sum-quantity-mysql", "title": "rails group by date and sum quantity mysql", "body": "<p>I am trying to create a cross-tab of info. I can get it to group by date but I am having a hard time totaling them by unit code. I am also struggling with how to make the view display correctly. I would like to show the date in the column instead of it showing as a row. I used <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Calculations.html#method-i-sum\" rel=\"nofollow noreferrer\">this</a> as guidance to sum. I also looked at <a href=\"https://stackoverflow.com/questions/23158176/group-sum-hashes-by-month-including-when-no-data\">this</a> but its a little over my head to be honest. </p>\n\n<p>Sample Data</p>\n\n<pre><code>|Productiondate| Unit Code | Quantity\n|   2017-1-1   |   Part 1  |   2    | \n|   2017-1-1   |   Part 1  |   3    | \n|   2017-1-22  |   Part 1  |   1    |\n|   2017-1-1   |   Part 2  |   3    |\n|   2017-1-10  |   Part 2  |   1    |\n|   2017-1-22  |   Part 2  |   1    |\n</code></pre>\n\n<p>End Result Table</p>\n\n<pre><code>|Unit Code | Week 1 | Week 2 | Week 3\n-------------------------------------\n|   Part 1 |   5    |   0    |  1  |\n|   Part 2 |   3    |   1    |  1  |\n</code></pre>\n\n<p>reportcontroller.rb</p>\n\n<pre><code>def workorder_production\n    #@productions = Production.all\n    #@production_weeks = @productions.group_by { |t| t.created_at.beginning_of_week } \n    productions = Production.select(:unitcode, :created_at, sum(:quantity).group_by { |t| t.created_at.beginning_of_week })\n  end\n</code></pre>\n\n<p>The lines that are commented above will work but will not total the quantity When I try the uncomment portion I get </p>\n\n<blockquote>\n  <p>NoMethodError undefined method `sum'</p>\n</blockquote>\n\n<p>workorder_production.html.erb</p>\n\n<pre><code>&lt;% @production_weeks.sort.each do |week, productions| %&gt;\n  &lt;h2&gt;Week Number &lt;%= week.strftime('%U') %&gt;&lt;/h2&gt;\n  &lt;% for production in productions %&gt;\n    &lt;div class=\"production\"&gt;\n      &lt;p&gt;Unit Code: &lt;%= production.unitcode %&gt; Qty: &lt;%= production.quantity %&gt;&lt;/p&gt;\n\n          &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ember.js", "devise"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1513171920, "post_id": 47793858, "comment_id": 82549441, "body": "What have you tried so far? What difficulty are you having? One google search and I found <a href=\"https://github.com/the-refinery/ember-devise-simple-auth\" rel=\"nofollow noreferrer\">github.com/the-refinery/ember-devise-simple-auth</a> -- does that answer your question?? I&#39;m voting to close, as StackOverflow is not really an appropriate place to recommend or find a book, tool, software library, tutorial or other off-site resource."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1513172088, "post_id": 47793858, "comment_id": 82549557, "body": "For what it&#39;s worth, I&#39;m currently working on a (very big) set of rails applications, with EmberJS front-ends. The authentication mechanism van vary quite a lot, depending on what you&#39;re actually trying to achieve. For example, are you integrating OAuth - e.g. facebook login? Does your authentication need to work <i>across multiple</i> sites? Are you using JWTs? Any other protocols, such as LDAP or SAML or AD? Are you integrating with legacy platforms? (How?) ..... I could write a whole <i>book</i> on the topic; you need to at least be more specific about your application design."}], "owner": {"reputation": 1178, "user_id": 2649707, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/10a73731821817bdab1abf9958e6787d?s=128&d=identicon&r=PG", "display_name": "Bruno Casali", "link": "https://stackoverflow.com/users/2649707/bruno-casali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513170622, "creation_date": 1513170622, "question_id": 47793858, "link": "https://stackoverflow.com/questions/47793858/share-authentication-between-rails-4-devise-and-ember-js", "title": "Share authentication between rails 4 (devise) and ember.js", "body": "<p>In our company we decide to move our monolithic application currently developed in rails 4.2 to ember.js. And keep all back-end in rails. The first step I see, is authentication.</p>\n\n<p>How to share devise authentication with my new fresh ember.js 2.17 app, without re-authenticate?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "string", "parsing"], "comments": [{"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1513171723, "post_id": 47793823, "comment_id": 82549311, "body": "Chomp removes <i>trailing</i> characters (default is the newline). You want both: <code>line.chomp.split(&quot;:&quot;)</code>"}, {"owner": {"reputation": 506, "user_id": 2428762, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/adff7188450a9655d0b1d00f330b9edd?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/2428762/josh"}, "reply_to_user": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1513173946, "post_id": 47793823, "comment_id": 82550733, "body": "I see. I was under the impression chomp would &quot;split&quot; at the last found supplied (or default) delimiter in a string and then drop everything after (including the delimiter)."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1513183368, "post_id": 47793823, "comment_id": 82557188, "body": "BTW, your current approach is completely broken for folded header bodies."}], "answers": [{"comments": [{"owner": {"reputation": 506, "user_id": 2428762, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/adff7188450a9655d0b1d00f330b9edd?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/2428762/josh"}, "edited": false, "score": 0, "creation_date": 1513173521, "post_id": 47794467, "comment_id": 82550459, "body": "Of course. I tried it exactly like that originally, but forgot that split returns an array so I had left off the <code>[0]</code>. That led me down a rabbit hole of confusion. Thank you so much. This is exactly what I was trying to do."}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1513174935, "post_id": 47794467, "comment_id": 82551386, "body": "This being said, I recommend using a mail parsing gem and not doing it yourself."}, {"owner": {"reputation": 506, "user_id": 2428762, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/adff7188450a9655d0b1d00f330b9edd?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/2428762/josh"}, "edited": false, "score": 0, "creation_date": 1513179701, "post_id": 47794467, "comment_id": 82554716, "body": "LOL. I completely agree. Normally I would, but, I&#39;m trying to learn how mail parsing works. ;)"}, {"owner": {"reputation": 10487, "user_id": 5708620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f8c70394b748ed7ec1a3a11a749b1?s=128&d=identicon&r=PG&f=1", "display_name": "Danny_ds", "link": "https://stackoverflow.com/users/5708620/danny-ds"}, "edited": false, "score": 0, "creation_date": 1514473757, "post_id": 47794467, "comment_id": 82987983, "body": "Also: the scan should stop after the first blank line (which marks the end of the headerblock). This avoids scanning the full body (including any attachments), which can be large -- or the body could even contain matching fields which would produce wrong results."}], "tags": [], "owner": {"reputation": 1848, "user_id": 4089357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628dc1c999e767d7aff0e988631a9878?s=128&d=identicon&r=PG&f=1", "display_name": "Abdullah", "link": "https://stackoverflow.com/users/4089357/abdullah"}, "is_accepted": true, "score": 1, "last_activity_date": 1513173648, "last_edit_date": 1513173648, "creation_date": 1513172596, "answer_id": 47794467, "question_id": 47793823, "link": "https://stackoverflow.com/questions/47793823/parsing-lines-of-text-from-external-file-in-ruby/47794467#47794467", "title": "Parsing lines of text from external file in Ruby", "body": "<p>Try this</p>\n\n<pre><code>raw_email = File.open(\"sample-email.txt\", \"r\")\nparsed_email = {}\n\nraw_email.each do |line|\n  case line.split(\":\")[0]\n  when \"Delivered-To\"\n    parsed_email[:to] = line\n  when \"From\"\n    parsed_email[:from] = line\n  when \"Date\"\n    parsed_email[:date] = line\n  when \"Subject\"\n    parsed_email[:subject] = line\n  end\nend\n\nputs parsed_email\n=&gt; {:to=&gt;\"Delivered-To: user1@example.com\\n\", :from=&gt;\"From: John Doe &lt;user2@example.com&gt;\\n\", :date=&gt;\"Date: Tue, 12 Dec 2017 13:30:14 -0500\\n\", :subject=&gt;\"Subject: Testing the parser\\n\"}\n</code></pre>\n\n<p><strong>Explanation</strong>\nYou need to split line on <code>:</code> and select first. Like this <code>line.split(\":\")[0]</code></p>\n"}], "owner": {"reputation": 506, "user_id": 2428762, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/adff7188450a9655d0b1d00f330b9edd?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/2428762/josh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 47794467, "answer_count": 1, "score": 0, "last_activity_date": 1513173648, "creation_date": 1513170503, "question_id": 47793823, "link": "https://stackoverflow.com/questions/47793823/parsing-lines-of-text-from-external-file-in-ruby", "title": "Parsing lines of text from external file in Ruby", "body": "<p>I am trying to parse a raw email. The desired result is a hash of the lines that contain specific headers.</p>\n\n<p>This is the Ruby file:</p>\n\n<pre><code>raw_email = File.open(\"sample-email.txt\", \"r\")\nparsed_email = Hash.new('')\n\nraw_email.each do |line|\n  puts line\n  header = line.chomp(\":\")\n  puts header\n  if header == \"Delivered-To\"\n    parsed_email[:to] = line\n  elsif header == \"From\"\n    parsed_email[:from] = line\n  elsif header == \"Date\"\n    parsed_email[:date] = line\n  elsif header == \"Subject\"\n    parsed_email[:subject] = line\n  end\nend\n\nputs parsed_email\n</code></pre>\n\n<p>And this is the raw email:</p>\n\n<pre><code>Delivered-To: user1@example.com\nFrom: John Doe &lt;user2@example.com&gt;\nDate: Tue, 12 Dec 2017 13:30:14 -0500\nSubject: Testing the parser\nTo: user1@example.com\nContent-Type: multipart/alternative; \nboundary=\"123456789abcdefghijklmnopqrs\"\n\n--123456789abcdefghijklmnopqrs\nContent-Type: text/plain; charset=\"UTF-8\"\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Integer nec \nodio. Praesent libero. Sed cursus ante dapibus diam. Sed nisi. Nulla \nquis sem at nibh elementum imperdiet. Duis sagittis ipsum.\n\n--123456789abcdefghijklmnopqrs\nContent-Type: text/html; charset=\"UTF-8\"\n\n&lt;div dir=\"ltr\"&gt;Lorem ipsum dolor sit amet, consectetur adipiscing \nelit. Integer nec odio. Praesent libero. Sed cursus ante dapibus diam. \nSed nisi. Nulla quis sem at nibh elementum imperdiet. Duis sagittis \nipsum.&lt;br clear=\"all\"&gt;\n&lt;/div&gt;\n\n--089e082c24dc944a9f056028d791--\n</code></pre>\n\n<p>The puts statements are just for my own testing to see if data is being passed along. </p>\n\n<p>What I am getting is each full line put twice and an empty hash put at the end.</p>\n\n<p>I have also tried changing different bits to strings or arrays and I've also tried using <code>line.split(\":\", 1)</code> instead of <code>line.chomp(\":\")</code></p>\n\n<p>Can someone please explain why this isn't working?</p>\n"}, {"tags": ["ruby", "erb"], "answers": [{"comments": [{"owner": {"reputation": 1848, "user_id": 4089357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/628dc1c999e767d7aff0e988631a9878?s=128&d=identicon&r=PG&f=1", "display_name": "Abdullah", "link": "https://stackoverflow.com/users/4089357/abdullah"}, "reply_to_user": {"reputation": 410, "user_id": 2284090, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BVnp6.jpg?s=128&g=1", "display_name": "artSir", "link": "https://stackoverflow.com/users/2284090/artsir"}, "edited": false, "score": 2, "creation_date": 1513173379, "post_id": 47794425, "comment_id": 82550371, "body": "@artSir This should be working, please share you updated code wheren you make this change."}], "tags": [], "owner": {"reputation": 1135, "user_id": 251045, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jgiVA.png?s=128&g=1", "display_name": "lightalloy", "link": "https://stackoverflow.com/users/251045/lightalloy"}, "is_accepted": true, "score": 0, "last_activity_date": 1513172447, "creation_date": 1513172447, "answer_id": 47794425, "question_id": 47793807, "link": "https://stackoverflow.com/questions/47793807/ruby-iterate-from-an-object-using-erb/47794425#47794425", "title": "Ruby Iterate from an object using ERB", "body": "<p>Your hash has symbols as keys (not strings), so you can access name this way: <code>value[:name]</code>.</p>\n"}], "owner": {"reputation": 410, "user_id": 2284090, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BVnp6.jpg?s=128&g=1", "display_name": "artSir", "link": "https://stackoverflow.com/users/2284090/artsir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 47794425, "answer_count": 1, "score": 0, "last_activity_date": 1513268422, "creation_date": 1513170452, "last_edit_date": 1513268422, "question_id": 47793807, "link": "https://stackoverflow.com/questions/47793807/ruby-iterate-from-an-object-using-erb", "title": "Ruby Iterate from an object using ERB", "body": "<p>I'm new, was tasked to do a front end job but I thought i can figure out ERB easily.</p>\n\n<p>In my app.rb\nvariables defined</p>\n\n<pre><code>def find_listings\n   3.times.map { random_item }\nend\n\ndef random_item\n  {\n    name: 'blah',\n    location: 'LA'\n   }\nend\n\nget '/' do\n   @listings = find_listings\n   erb :index\nend\n</code></pre>\n\n<p>In my ERB file I am trying to iterate</p>\n\n<p>index.erb</p>\n\n<pre><code>&lt;% @listings.each do |value | %&gt;    \n        &lt;strong&gt;&lt;%= value %&gt;&lt;br/&gt;\n        &lt;%# This returns {:name=&gt;\"blah\", :location=&gt;\"New York\"} %&gt;\n        &lt;strong&gt;&lt;%= value['name']%&gt;&lt;/strong&gt;&lt;br/&gt;\n        &lt;%# This returns nothing %&gt;  \n&lt;% end %&gt;\n</code></pre>\n\n<p>How do i get the name value?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 3865, "user_id": 4540175, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a789c8057fed1368f96c15cfbdba6421?s=128&d=identicon&r=PG&f=1", "display_name": "gates", "link": "https://stackoverflow.com/users/4540175/gates"}, "edited": false, "score": 0, "creation_date": 1513170136, "post_id": 47793234, "comment_id": 82548233, "body": "Question is too broad, if you split the question into multiple questions .. I am pretty sure that you would find the answers you are looking for already answered here in SO"}], "answers": [{"comments": [{"owner": {"reputation": 468, "user_id": 5250893, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8fb78756da1f1e5597d4ad7f72e2eb22?s=128&d=identicon&r=PG&f=1", "display_name": "pbms", "link": "https://stackoverflow.com/users/5250893/pbms"}, "edited": false, "score": 0, "creation_date": 1513185337, "post_id": 47795572, "comment_id": 82558478, "body": "Ok If I use has_many through, how to save the join table data? Is it like User.save or Category.save?"}, {"owner": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "reply_to_user": {"reputation": 468, "user_id": 5250893, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8fb78756da1f1e5597d4ad7f72e2eb22?s=128&d=identicon&r=PG&f=1", "display_name": "pbms", "link": "https://stackoverflow.com/users/5250893/pbms"}, "edited": false, "score": 1, "creation_date": 1513186698, "post_id": 47795572, "comment_id": 82559339, "body": "In that case, you will have three tables: <code>User</code>, <code>Category</code> and <code>UserCategory</code>. you will save the join table using <code>user_category.save</code>. Please make sure you create your join table in a separate migration. Also, look at this answer <a href=\"https://stackoverflow.com/questions/47460064/update-join-table-habtm/47460832#47460832\" title=\"update join table habtm\">stackoverflow.com/questions/47460064/update-join-table-habtm&zwnj;&#8203;/&hellip;</a>"}, {"owner": {"reputation": 468, "user_id": 5250893, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8fb78756da1f1e5597d4ad7f72e2eb22?s=128&d=identicon&r=PG&f=1", "display_name": "pbms", "link": "https://stackoverflow.com/users/5250893/pbms"}, "edited": false, "score": 0, "creation_date": 1513232713, "post_id": 47795572, "comment_id": 82575356, "body": "I&#39;m using has many through, Now how to save data for join table with function getting data from api? EX: {{&quot;user_id&quot;:1,&quot;category_id&quot;:1},{&quot;user_id&quot;:1,&quot;category_id&quot;:2}&zwnj;&#8203;}"}, {"owner": {"reputation": 126, "user_id": 3445654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/446f71c9a05348d9a1d7a9476299b652?s=128&d=identicon&r=PG&f=1", "display_name": "Ankush", "link": "https://stackoverflow.com/users/3445654/ankush"}, "edited": false, "score": 0, "creation_date": 1513323270, "post_id": 47795572, "comment_id": 82617684, "body": "Why are you using <b>has_many through</b> if there are only two columns user_id and category_id? HABTM should suffice. As for saving the data in join table. You can do the following. <code>User.find(1).categories = Category.where(id: [1,2])</code>"}, {"owner": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "edited": false, "score": 0, "creation_date": 1513323369, "post_id": 47795572, "comment_id": 82617719, "body": "he wants to save multiple category details in the join table. please read the question again"}], "tags": [], "owner": {"reputation": 486, "user_id": 1665347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33a7f9904f3dc29abba5f7b8fce31aa3?s=128&d=identicon&r=PG", "display_name": "a131", "link": "https://stackoverflow.com/users/1665347/a131"}, "is_accepted": true, "score": 1, "last_activity_date": 1513175765, "creation_date": 1513175765, "answer_id": 47795572, "question_id": 47793234, "link": "https://stackoverflow.com/questions/47793234/rails-habtm-to-model/47795572#47795572", "title": "rails HABTM to model", "body": "<p>Never use HABTM, if you want to add attributes to your join table and interact with your join table.</p>\n\n<p>Use has_many though. You can read more about it in the docs below</p>\n\n<p><a href=\"http://guides.rubyonrails.org/association_basics.html#choosing-between-has-many-through-and-has-and-belongs-to-many\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/association_basics.html#choosing-between-has-many-through-and-has-and-belongs-to-many</a></p>\n"}], "owner": {"reputation": 468, "user_id": 5250893, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8fb78756da1f1e5597d4ad7f72e2eb22?s=128&d=identicon&r=PG&f=1", "display_name": "pbms", "link": "https://stackoverflow.com/users/5250893/pbms"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 47795572, "answer_count": 1, "score": 1, "last_activity_date": 1513175765, "creation_date": 1513168675, "last_edit_date": 1513170218, "question_id": 47793234, "link": "https://stackoverflow.com/questions/47793234/rails-habtm-to-model", "title": "rails HABTM to model", "body": "<p>I have 2 models user and category. each user will select multiple categories of data, I'm using HABTM. Is this right method?. If yes How can I store multiple category details with each user in join table?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "heroku", "memory"], "comments": [{"owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 0, "creation_date": 1513178188, "post_id": 47793140, "comment_id": 82553712, "body": "If the issue is memory on boot then you can try jruby and then allocate as much or as little memory to JVM as you need"}, {"owner": {"reputation": 51, "user_id": 9093761, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IB07HBTlDE4/AAAAAAAAAAI/AAAAAAAAAM4/0gF1SZL-7I4/photo.jpg?sz=128", "display_name": "Michal", "link": "https://stackoverflow.com/users/9093761/michal"}, "reply_to_user": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 1, "creation_date": 1513290123, "post_id": 47793140, "comment_id": 82608692, "body": "Thanks Ruslan, I think I found the reason for this issue. It&#39;s connected with asset_path and image_tag . I will dig this more and share the results here. I will test jruby anyway, when I will fix this issue."}, {"owner": {"reputation": 2094, "user_id": 237129, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff94ffd9e21dd379044ea0317634b97b?s=128&d=identicon&r=PG", "display_name": "jtzero", "link": "https://stackoverflow.com/users/237129/jtzero"}, "edited": false, "score": 0, "creation_date": 1523049188, "post_id": 47793140, "comment_id": 86415616, "body": "mildly related here are some ruby gc tuning params <a href=\"https://collectiveidea.com/blog/archives/2015/02/19/optimizing-rails-for-memory-usage-part-2-tuning-the-gc\" rel=\"nofollow noreferrer\">collectiveidea.com/blog/archives/2015/02/19/&hellip;</a>"}], "owner": {"reputation": 51, "user_id": 9093761, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IB07HBTlDE4/AAAAAAAAAAI/AAAAAAAAAM4/0gF1SZL-7I4/photo.jpg?sz=128", "display_name": "Michal", "link": "https://stackoverflow.com/users/9093761/michal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 0, "score": 5, "last_activity_date": 1513168382, "creation_date": 1513168382, "question_id": 47793140, "link": "https://stackoverflow.com/questions/47793140/how-ruby-allocate-memory-on-boot", "title": "How Ruby allocate memory on boot?", "body": "<p>I'm using rails on Heorku. After restarting my app on heroku, I've got about 400-500 MB memory peak (about 20M objects is allocated). Also it takes some time before it is ready to use. If I'm for example on home page and don't use any other controller than application controller it's fine. But when I go to some page, where another controller is used, the peak happens and it's always the same size, doesn't matter which page I'm requesting.</p>\n\n<p>I've tried to measure it somehow, but without any success.\nI'm using Scout, where I can see this memory bloat, but it doesn't help me a lot, because it shows a peak depends which page I requested first.</p>\n\n<p>It looks like Ruby allocates some memory \"in case\", based on my app structure, models, controllers... (?) . Doesn anybody have something similar? Is it something that is expected?</p>\n\n<p>I have thousands of records in DB, but even if I clear my DB, ruby reserve this memory in the same way.\nRuby ver. 2.4.2, Rails 5.1.4\nI'm using some fragment caching and when app is loaded (with memory 400-500MB) it's working normally, isn't slow.</p>\n"}, {"tags": ["ruby", "ubuntu", "ssh", "proxy"], "answers": [{"tags": [], "owner": {"reputation": 194, "user_id": 7809709, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ucGeK.jpg?s=128&g=1", "display_name": "Anton Semenichenko", "link": "https://stackoverflow.com/users/7809709/anton-semenichenko"}, "is_accepted": true, "score": 1, "last_activity_date": 1513177509, "creation_date": 1513177509, "answer_id": 47796239, "question_id": 47792314, "link": "https://stackoverflow.com/questions/47792314/rails-gateway-gem-daemon-find-and-kill-the-process-in-ubuntu/47796239#47796239", "title": "Rails Gateway GEM daemon: find and kill the process in Ubuntu", "body": "<p>The service is called <strong>dnsmasq</strong>\nand it's easy to filter with <strong>htop</strong> and kill </p>\n"}], "owner": {"reputation": 194, "user_id": 7809709, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ucGeK.jpg?s=128&g=1", "display_name": "Anton Semenichenko", "link": "https://stackoverflow.com/users/7809709/anton-semenichenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 47796239, "answer_count": 1, "score": 2, "last_activity_date": 1513177509, "creation_date": 1513165826, "question_id": 47792314, "link": "https://stackoverflow.com/questions/47792314/rails-gateway-gem-daemon-find-and-kill-the-process-in-ubuntu", "title": "Rails Gateway GEM daemon: find and kill the process in Ubuntu", "body": "<p>I'm using this GEM: <a href=\"https://github.com/net-ssh/net-ssh-gateway\" rel=\"nofollow noreferrer\">https://github.com/net-ssh/net-ssh-gateway</a></p>\n\n<p>It creates a gateway and proxy that listens on defined port <code>localhost:1080</code></p>\n\n<p>I'm a little bit confused about how to detect a gateway (if so) and proxy daemon, as the gateway is open until <code>!shutdown</code> command is given. My code is very raw and sometimes it throws errors. When I'm trying to run it one more time I'm getting an exception that notifies that a gateway is already open. I want to kill it manually using <code>htop</code></p>\n\n<p>How to grep a gateway daemon and kill it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1513161620, "post_id": 47790927, "comment_id": 82542933, "body": "Does <code>SearchSuggestion.where(term: [@item.title])</code> always returns one element?, because you&#39;re getting an empty ActiveRecord::Relation as result. You could try by checking first if has results or not."}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1513162016, "post_id": 47790927, "comment_id": 82543187, "body": "I placed a <code>byebug point</code> under the where statement and it returns this:<code>SearchSuggestion Load (0.5ms)  SELECT  &quot;search_suggestions&quot;.* FROM &quot;search_suggestions&quot; WHERE &quot;search_suggestions&quot;.&quot;term&quot; = &#39;Rolex&#39; LIMIT $1  [[&quot;LIMIT&quot;, 11]] #&lt;ActiveRecord::Relation []&gt;</code>"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1513162260, "post_id": 47790927, "comment_id": 82543353, "body": "It&#39;s <code>[]</code> so you can&#39;t use <code>assign_attributes</code> in an empty result. You could do something like <code>@search_suggestion.update_attributes(:items_count =&gt; +1 ) if @search_suggestion.present?</code>"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1513166949, "post_id": 47790927, "comment_id": 82546213, "body": "I used your code along with this :<code>@search_suggestion = SearchSuggestion.find_by(term: @item.title) (1.2ms)  COMMIT   SearchSuggestion Load (0.5ms)  SELECT  &quot;search_suggestions&quot;.* FROM &quot;search_suggestions&quot; WHERE &quot;search_suggestions&quot;.&quot;term&quot; = $1 LIMIT $2  [[&quot;term&quot;, &quot;Rolex&quot;], [&quot;LIMIT&quot;, 1]]    (0.1ms)  BEGIN    (0.2ms)  COMMIT</code> but nothing gets updated"}], "answers": [{"comments": [{"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513162207, "post_id": 47790989, "comment_id": 82543318, "body": "Thanks for the reply @Dima I. Belinski... if I change to <code>find</code> and add the <code>.present?</code> code, it return this: <code>Couldn&#39;t find SearchSuggestion with &#39;id&#39;={:term=&gt;[&quot;Rolex&quot;]}</code>"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513166765, "post_id": 47790989, "comment_id": 82546107, "body": "I used the first peace of code because I want o update just the one object, it doesn&#39;t return an error... <code>SearchSuggestion Load (0.7ms)  SELECT  &quot;search_suggestions&quot;.* FROM &quot;search_suggestions&quot; WHERE &quot;search_suggestions&quot;.&quot;term&quot; = $1 LIMIT $2  [[&quot;term&quot;, &quot;Rolex&quot;], [&quot;LIMIT&quot;, 1]]</code> but no update is happening"}, {"owner": {"reputation": 351, "user_id": 5583496, "user_type": "registered", "profile_image": "https://graph.facebook.com/952848168094244/picture?type=large", "display_name": "Dima I. Belinski", "link": "https://stackoverflow.com/users/5583496/dima-i-belinski"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513168955, "post_id": 47790989, "comment_id": 82547441, "body": "You are shure that you have <code>SearchSuggestion</code> record with <code>term: &quot;Rolex&quot;</code> ?"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513169027, "post_id": 47790989, "comment_id": 82547483, "body": "<code>SearchSuggestion Load (0.5ms) SELECT &quot;search_suggestions&quot;.* FROM &quot;search_suggestions&quot; LIMIT $1 [[&quot;LIMIT&quot;, 11]] =&gt; #&lt;ActiveRecord::Relation [#&lt;SearchSuggestion id: 323, term: &quot;rolex&quot;, popularity: nil, created_at: &quot;2017-12-13 08:10:34&quot;, updated_at: &quot;2017-12-13 08:10:34&quot;, items_count: 0&gt;, #&lt;SearchSuggestion id: 324, term: &quot;round&quot;, popularity: nil, created_at: &quot;2017-12-13 08:10:34&quot;, updated_at: &quot;2017-12-13 08:10:34&quot;, items_count: 0&gt;, #&lt;SearchSuggestion id: 325, term: &quot;rocker&quot;, popularity: nil, created_at: &quot;2017-12-13 08:10:34&quot;, updated_at: &quot;2017-12-13 10:51:04&quot;, items_count: 1&gt;]</code>"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513169058, "post_id": 47790989, "comment_id": 82547495, "body": "After SearchSuggestions.all in rails c"}, {"owner": {"reputation": 351, "user_id": 5583496, "user_type": "registered", "profile_image": "https://graph.facebook.com/952848168094244/picture?type=large", "display_name": "Dima I. Belinski", "link": "https://stackoverflow.com/users/5583496/dima-i-belinski"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513169060, "post_id": 47790989, "comment_id": 82547498, "body": "maybe you need use <code>find_or_create_by</code>, in this case, if you don&#39;t have <code>SearchSuggestion</code>  with <code>term: &quot;Rolex&quot;</code>, it will be created"}, {"owner": {"reputation": 351, "user_id": 5583496, "user_type": "registered", "profile_image": "https://graph.facebook.com/952848168094244/picture?type=large", "display_name": "Dima I. Belinski", "link": "https://stackoverflow.com/users/5583496/dima-i-belinski"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513169117, "post_id": 47790989, "comment_id": 82547545, "body": "your term rolex is downcase, but you search capitalized"}, {"owner": {"reputation": 351, "user_id": 5583496, "user_type": "registered", "profile_image": "https://graph.facebook.com/952848168094244/picture?type=large", "display_name": "Dima I. Belinski", "link": "https://stackoverflow.com/users/5583496/dima-i-belinski"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513169146, "post_id": 47790989, "comment_id": 82547564, "body": "<code>SearchSuggestion.find_by(term: @item.title.downcase)</code>"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513169444, "post_id": 47790989, "comment_id": 82547756, "body": "That worked!!! finaly!!! Thanks for the help@Dima I. Belinsk... i did this and it worked. please update answer so ai can accept <code>@search_suggestion = SearchSuggestion.find_by(term: @item.title.downcase)     @search_suggestion.update_attribute(:items_count, @search_suggestion.items_count +=1 ) if @search_suggestion.present?</code>"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513179494, "post_id": 47790989, "comment_id": 82554566, "body": "@Theopap can you share <code>item_params</code> code , i can help you to optimise your code. ?"}], "tags": [], "owner": {"reputation": 351, "user_id": 5583496, "user_type": "registered", "profile_image": "https://graph.facebook.com/952848168094244/picture?type=large", "display_name": "Dima I. Belinski", "link": "https://stackoverflow.com/users/5583496/dima-i-belinski"}, "is_accepted": true, "score": 3, "last_activity_date": 1513169572, "last_edit_date": 1513169572, "creation_date": 1513161564, "answer_id": 47790989, "question_id": 47790927, "link": "https://stackoverflow.com/questions/47790927/rails-increment-a-column-and-update-attributes/47790989#47790989", "title": "Rails: Increment a column and update attributes", "body": "<p><code>where</code> returns collection. use <code>find</code> or <code>@search_suggestion.last.update_attributes</code></p>\n\n<pre><code>@search_suggestion = SearchSuggestion.find_by(term: @item.title.downcase)\nif @search_suggestion.present?\n  @search_suggestion.increment!(:items_count)\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513162640, "post_id": 47791265, "comment_id": 82543583, "body": "Thanks for the reply @Gabbar... I got this <code>undefined method increment!&#39; for nil:NilClass</code>"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513162759, "post_id": 47791265, "comment_id": 82543660, "body": "it simply means that there are not <code>SearchSuggestion</code> with term <code>@item.title</code>."}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513162855, "post_id": 47791265, "comment_id": 82543727, "body": "can you tell me do you want to update all record with term @item.title or only one record, because your <code>SearchSuggestion.where(term: [@item.title])</code> will return an array.?"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513162928, "post_id": 47791265, "comment_id": 82543777, "body": "<code>SearchSuggestion.find(term: @item.title)</code> use this instead of that, and check i have modified this answer."}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513163146, "post_id": 47791265, "comment_id": 82543942, "body": "@Theopap check the modified answer and let me know for further guidance"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513167183, "post_id": 47791265, "comment_id": 82546367, "body": "I used your code but the <code>items_count column doesn&#39;t get incrmenented! (0.4ms)  COMMIT   SearchSuggestion Load (0.8ms)  SELECT  &quot;search_suggestions&quot;.* FROM &quot;search_suggestions&quot; WHERE &quot;search_suggestions&quot;.&quot;term&quot; = $1 LIMIT $2  [[&quot;term&quot;, &quot;Rolex&quot;], [&quot;LIMIT&quot;, 1]]    (0.3ms)  BEGIN    (0.2ms)  COMMIT</code>"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513167438, "post_id": 47791265, "comment_id": 82546518, "body": "as i told you that there are no ot <code>SearchSuggestion</code> with term <code>@item.title</code> so if its not present than it will not be incremented as i have added a condition <code>if @search_suggestion.present? </code>"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513167601, "post_id": 47791265, "comment_id": 82546618, "body": "So who can I find it if not like this: <code>@search_suggestion = SearchSuggestion.find_by_term(@item.title)</code>?????"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513167609, "post_id": 47791265, "comment_id": 82546625, "body": "@Theopap hmm so far as i get that you haven&#39;t save <code>@item</code> before search so i have added <code>@item.save!</code> and lets try again."}], "tags": [], "owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "is_accepted": false, "score": 0, "last_activity_date": 1513167540, "last_edit_date": 1513167540, "creation_date": 1513162407, "answer_id": 47791265, "question_id": 47790927, "link": "https://stackoverflow.com/questions/47790927/rails-increment-a-column-and-update-attributes/47791265#47791265", "title": "Rails: Increment a column and update attributes", "body": "<p>to increment you can try this</p>\n\n<p><code>@search_suggestion.increment!(:items_count)</code></p>\n\n<p>so code will look like</p>\n\n<pre><code>def items_create\n  @categories = Category.all\n  @item = Item.new(item_params)\n  @item.store_id = current_store.id\n  @item.save!\n  @item.update(account_id: current_store.account.id)\n  @search_suggestion = SearchSuggestion.find_by_term(@item.title)\n  @search_suggestion.increment!(:items_count) if @search_suggestion.present? \n\nrespond_to do |format|\n  if @item.save\n    format.html { redirect_to store_items_index_path(current_store), notice: 'Item was successfully created.' }\n    format.json { render :template =&gt; \"stores/items/show\", status: :created, location: @item }\n  else\n    format.html { render :template =&gt; \"stores/items/new\" }\n    format.json { render json: @item.errors, status: :unprocessable_entity }\n  end\n end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513167326, "post_id": 47791289, "comment_id": 82546447, "body": "Thanks for the reply @user7333505 I get this: <code>undefined method </code>exist?&#39; for nil:NilClass`"}, {"owner": {"reputation": 947, "user_id": 7333505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade96347d4304c3c3e72b914f61d1792?s=128&d=identicon&r=PG&f=1", "display_name": "Ritesh Ranjan", "link": "https://stackoverflow.com/users/7333505/ritesh-ranjan"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513167411, "post_id": 47791289, "comment_id": 82546500, "body": "please use present? in place of exist?, and try"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513167539, "post_id": 47791289, "comment_id": 82546568, "body": "already foe that... it doesn&#39;t return an error but the <code>Items_count</code> column doesn not get incremented"}, {"owner": {"reputation": 947, "user_id": 7333505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade96347d4304c3c3e72b914f61d1792?s=128&d=identicon&r=PG&f=1", "display_name": "Ritesh Ranjan", "link": "https://stackoverflow.com/users/7333505/ritesh-ranjan"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513167767, "post_id": 47791289, "comment_id": 82546737, "body": "yes that because search_suggestion is not present in your database.You should create new  &quot;@search_suggestion&quot; if not present. or test by already present &quot;@search_suggestion&quot; in your data base."}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513167946, "post_id": 47791289, "comment_id": 82546838, "body": "<code>SearchSuggestion Load (0.5ms)  SELECT  &quot;search_suggestions&quot;.* FROM &quot;search_suggestions&quot; LIMIT $1  [[&quot;LIMIT&quot;, 11]]  =&gt; #&lt;ActiveRecord::Relation [#&lt;SearchSuggestion id: 323, term: &quot;rolex&quot;, popularity: nil, created_at: &quot;2017-12-13 08:10:34&quot;, updated_at: &quot;2017-12-13 08:10:34&quot;, items_count: 0&gt;, #&lt;SearchSuggestion id: 324, term: &quot;round&quot;, popularity: nil, created_at: &quot;2017-12-13 08:10:34&quot;, updated_at: &quot;2017-12-13 08:10:34&quot;, items_count: 0&gt;, #&lt;SearchSuggestion id: 325, term: &quot;rocker&quot;, popularity: nil, created_at: &quot;2017-12-13 08:10:34&quot;, updated_at: &quot;2017-12-13 10:51:04&quot;, items_count: 1&gt;]</code>"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513168017, "post_id": 47791289, "comment_id": 82546894, "body": "After SearchSuggestions.all in rails c"}, {"owner": {"reputation": 947, "user_id": 7333505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade96347d4304c3c3e72b914f61d1792?s=128&d=identicon&r=PG&f=1", "display_name": "Ritesh Ranjan", "link": "https://stackoverflow.com/users/7333505/ritesh-ranjan"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513168050, "post_id": 47791289, "comment_id": 82546906, "body": "please provide me @item.title"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513168159, "post_id": 47791289, "comment_id": 82546966, "body": "How should I do that?"}, {"owner": {"reputation": 947, "user_id": 7333505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade96347d4304c3c3e72b914f61d1792?s=128&d=identicon&r=PG&f=1", "display_name": "Ritesh Ranjan", "link": "https://stackoverflow.com/users/7333505/ritesh-ranjan"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513168404, "post_id": 47791289, "comment_id": 82547117, "body": "you have not saved the &quot;@item&quot; and trying &quot;@item.title&quot;, it will always be nill"}, {"owner": {"reputation": 947, "user_id": 7333505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade96347d4304c3c3e72b914f61d1792?s=128&d=identicon&r=PG&f=1", "display_name": "Ritesh Ranjan", "link": "https://stackoverflow.com/users/7333505/ritesh-ranjan"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513168472, "post_id": 47791289, "comment_id": 82547167, "body": "try directly to passing through params"}, {"owner": {"reputation": 947, "user_id": 7333505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade96347d4304c3c3e72b914f61d1792?s=128&d=identicon&r=PG&f=1", "display_name": "Ritesh Ranjan", "link": "https://stackoverflow.com/users/7333505/ritesh-ranjan"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513168566, "post_id": 47791289, "comment_id": 82547219, "body": "give me item_params and retry once i update my answer"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513168636, "post_id": 47791289, "comment_id": 82547262, "body": "<code>def item_params     params.require(:item).permit(:title, :description, :price, :category_id, :store_id, :account_id,                                  :latitude, :term, attachments: [])   end</code>"}, {"owner": {"reputation": 947, "user_id": 7333505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade96347d4304c3c3e72b914f61d1792?s=128&d=identicon&r=PG&f=1", "display_name": "Ritesh Ranjan", "link": "https://stackoverflow.com/users/7333505/ritesh-ranjan"}, "reply_to_user": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "edited": false, "score": 0, "creation_date": 1513169243, "post_id": 47791289, "comment_id": 82547623, "body": "try this @search_suggestion = SearchSuggestion.find_by_term(params[:title])"}], "tags": [], "owner": {"reputation": 947, "user_id": 7333505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade96347d4304c3c3e72b914f61d1792?s=128&d=identicon&r=PG&f=1", "display_name": "Ritesh Ranjan", "link": "https://stackoverflow.com/users/7333505/ritesh-ranjan"}, "is_accepted": false, "score": 2, "last_activity_date": 1513170929, "last_edit_date": 1513170929, "creation_date": 1513162483, "answer_id": 47791289, "question_id": 47790927, "link": "https://stackoverflow.com/questions/47790927/rails-increment-a-column-and-update-attributes/47791289#47791289", "title": "Rails: Increment a column and update attributes", "body": "<p>Where return the collection of object. To update an object we need the instance of the object.So </p>\n\n<pre><code>@search_suggestion = SearchSuggestion.find_or_creat_by_term(@item.title)\n</code></pre>\n\n<p>update_attributes works on the instance of an object. Also here you can use update_attribute instead :</p>\n\n<pre><code>@search_suggestion.update_attribute(:items_count, @search_suggestion.items_count +=1 ) if @search_suggestion.exist?\n</code></pre>\n"}], "owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5468, "favorite_count": 1, "accepted_answer_id": 47790989, "answer_count": 3, "score": 3, "last_activity_date": 1513170929, "creation_date": 1513161400, "question_id": 47790927, "link": "https://stackoverflow.com/questions/47790927/rails-increment-a-column-and-update-attributes", "title": "Rails: Increment a column and update attributes", "body": "<p>I'm trying to increment a column and update attributes when creating an item:</p>\n\n<pre><code>def items_create\n  @categories = Category.all\n  @item = Item.new(item_params)\n  @item.store_id = current_store.id\n  @item.update(account_id: current_store.account.id)\n  @search_suggestion = SearchSuggestion.where(term: [@item.title])\n  @search_suggestion.update_attributes(:items_count =&gt; +1 )\n\nrespond_to do |format|\n  if @item.save\n    format.html { redirect_to store_items_index_path(current_store), notice: 'Item was successfully created.' }\n    format.json { render :template =&gt; \"stores/items/show\", status: :created, location: @item }\n  else\n    format.html { render :template =&gt; \"stores/items/new\" }\n    format.json { render json: @item.errors, status: :unprocessable_entity }\n  end\n end\nend\n</code></pre>\n\n<p>and I find the object:</p>\n\n<pre><code> CACHE SearchSuggestion Load (0.0ms)  SELECT  \"search_suggestions\".* FROM \"search_suggestions\" WHERE \"search_suggestions\".\"term\" = 'Rolex' LIMIT $1  [[\"LIMIT\", 11]]\n</code></pre>\n\n<p>but Im getting this error:</p>\n\n<pre><code>NoMethodError (undefined method `update_attributes' for #&lt;ActiveRecord::Relation []&gt;\nDid you mean?  update_all):\n</code></pre>\n\n<p>Any ideas what I might be doing wrong?</p>\n"}, {"tags": ["ruby", "capybara", "integration-testing", "poltergeist"], "comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 1, "creation_date": 1513186647, "post_id": 47790774, "comment_id": 82559299, "body": "There is no way that code woks on chrome or firefox since since the driver for those doesn&#39;t support <code>trigger</code> (and you shouldn&#39;t be using <code>trigger</code> if doing testing anyway) .  Beyond that, to get any more help you need to provide the exact failure message you&#39;re getting and some example of the HTML you&#39;re trying to interact with - see <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}, {"owner": {"reputation": 615, "user_id": 2514731, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fac64eadf567c70c7206bcf7d95bbaa5?s=128&d=identicon&r=PG", "display_name": "beginerdeveloper", "link": "https://stackoverflow.com/users/2514731/beginerdeveloper"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1513215926, "post_id": 47790774, "comment_id": 82570889, "body": "sorry when i run with chrome or firefox i change trigger to clink funtion"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 1, "creation_date": 1513220515, "post_id": 47790774, "comment_id": 82572019, "body": "Then you need to figure out why you need to use <code>trigger</code> with Poltergeist and fix that issue (which will probably fix your intermittent failures too).  <code>trigger</code> should be avoided as much as possible when testing apps (if just scraping pages it&#39;s fine) since it means your tests aren&#39;t actually doing what a user would do, and therefore have dubious value."}, {"owner": {"reputation": 615, "user_id": 2514731, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fac64eadf567c70c7206bcf7d95bbaa5?s=128&d=identicon&r=PG", "display_name": "beginerdeveloper", "link": "https://stackoverflow.com/users/2514731/beginerdeveloper"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1513233500, "post_id": 47790774, "comment_id": 82575720, "body": "so what i should use instead of trigger can you tell me"}, {"owner": {"reputation": 615, "user_id": 2514731, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fac64eadf567c70c7206bcf7d95bbaa5?s=128&d=identicon&r=PG", "display_name": "beginerdeveloper", "link": "https://stackoverflow.com/users/2514731/beginerdeveloper"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1513233589, "post_id": 47790774, "comment_id": 82575756, "body": "i am testing with website page"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 1, "creation_date": 1513236354, "post_id": 47790774, "comment_id": 82577066, "body": "You should be using <code>click</code> when testing - so <code>page.find(&#39;input[type=&quot;submit&quot;]&#39;).click</code> or even better would be <code>page.click_button(&#39;the text of the submit button&#39;)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 615, "user_id": 2514731, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fac64eadf567c70c7206bcf7d95bbaa5?s=128&d=identicon&r=PG", "display_name": "beginerdeveloper", "link": "https://stackoverflow.com/users/2514731/beginerdeveloper"}, "edited": false, "score": 0, "creation_date": 1514518922, "post_id": 47939097, "comment_id": 83003348, "body": "can you give me a key work about that headless browser"}, {"owner": {"reputation": 646, "user_id": 1140726, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2QYng.jpg?s=128&g=1", "display_name": "Dono", "link": "https://stackoverflow.com/users/1140726/dono"}, "reply_to_user": {"reputation": 615, "user_id": 2514731, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fac64eadf567c70c7206bcf7d95bbaa5?s=128&d=identicon&r=PG", "display_name": "beginerdeveloper", "link": "https://stackoverflow.com/users/2514731/beginerdeveloper"}, "edited": false, "score": 1, "creation_date": 1514996372, "post_id": 47939097, "comment_id": 83136555, "body": "I am not sure I fully understand your question. This is headless chrome: <a href=\"https://chromium.googlesource.com/chromium/src/+/lkgr/headless/README.md\" rel=\"nofollow noreferrer\">chromium.googlesource.com/chromium/src/+/lkgr/headless/&hellip;</a> Another option I have come across is SlimerJS <a href=\"https://slimerjs.org/\" rel=\"nofollow noreferrer\">slimerjs.org</a>  Both of these have very good documentation on how to get started."}], "tags": [], "owner": {"reputation": 646, "user_id": 1140726, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2QYng.jpg?s=128&g=1", "display_name": "Dono", "link": "https://stackoverflow.com/users/1140726/dono"}, "is_accepted": true, "score": 1, "last_activity_date": 1513935299, "creation_date": 1513935299, "answer_id": 47939097, "question_id": 47790774, "link": "https://stackoverflow.com/questions/47790774/poltergeist-cant-find-the-element-sometimes/47939097#47939097", "title": "Poltergeist can&#39;t find the element sometimes", "body": "<p>PhantomJS is no longer being actively supported. Use Chrome Headless or another headless browser solution. </p>\n"}], "owner": {"reputation": 615, "user_id": 2514731, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fac64eadf567c70c7206bcf7d95bbaa5?s=128&d=identicon&r=PG", "display_name": "beginerdeveloper", "link": "https://stackoverflow.com/users/2514731/beginerdeveloper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 47939097, "answer_count": 1, "score": 0, "last_activity_date": 1513935299, "creation_date": 1513160948, "last_edit_date": 1513161123, "question_id": 47790774, "link": "https://stackoverflow.com/questions/47790774/poltergeist-cant-find-the-element-sometimes", "title": "Poltergeist can&#39;t find the element sometimes", "body": "<p>I am using phantomjs 2.1.1, ruby 2.3.1p112. Here is my code:</p>\n\n<pre><code>  Capybara.default_driver = :poltergeist    \n  page.find('input[type=\"submit\"]').trigger(\"click\")\n  page.should have_content(\"#{user.email} created.\")\n</code></pre>\n\n<p>This code works on chorme's and firefox's webdriver but doesn't work sometimes with poltergeist. I don't know why. Can any one help, please?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1513160278, "post_id": 47790385, "comment_id": 82542026, "body": "<i>&quot;it did not produce the desired result&quot;</i> \u2013 what <i>is</i> the desired result? How does <code>rna</code> look like and what is <code>rna_convert</code> supposed to return?"}, {"owner": {"reputation": 137, "user_id": 9088996, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210197125475879/picture?type=large", "display_name": "Dari Obukhova", "link": "https://stackoverflow.com/users/9088996/dari-obukhova"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1513161900, "post_id": 47790385, "comment_id": 82543122, "body": "Thanks for your comments. The desired result is to produce .dat file with new sequence of letters from which &quot;AUG&quot;, &quot;UAA&quot;, &quot;UAG&quot;, &quot;UGA&quot; are deleted. And all my trials did not produce any results. The length of file I want to apply this method for is quite big also (.dat)"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1513163020, "post_id": 47790385, "comment_id": 82543853, "body": "&quot;it did not produce the desired result&quot; is not a precise enough error description for us to help you. <i>What</i> doesn&#39;t work? <i>How</i> doesn&#39;t it work? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1513163039, "post_id": 47790385, "comment_id": 82543868, "body": "Can you provide a <i>precise</i> specification of what it is that you want to happen, including any and all rules, exceptions from those rules, corner cases, special cases, boundary cases, and edge cases? Can you provide sample inputs and outputs demonstrating what you expect to happen, both in normal cases, and in all the exceptions, corner cases, special cases, boundary cases, and edge cases? Please, also provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 9088996, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210197125475879/picture?type=large", "display_name": "Dari Obukhova", "link": "https://stackoverflow.com/users/9088996/dari-obukhova"}, "edited": false, "score": 0, "creation_date": 1513161130, "post_id": 47790550, "comment_id": 82542608, "body": "Thanks for your comments. The desired result is to produce .dat file with new sequence of letters from which &quot;AUG&quot;, &quot;UAA&quot;,  &quot;UAG&quot;, &quot;UGA&quot; are deleted. And all my trials did not produce any results. The length of file I want to apply this method for is quite big also"}], "tags": [], "owner": {"reputation": 745, "user_id": 3033467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8a33988a3dc0d009236304ff4ad8d615?s=128&d=identicon&r=PG&f=1", "display_name": "user3033467", "link": "https://stackoverflow.com/users/3033467/user3033467"}, "is_accepted": true, "score": 0, "last_activity_date": 1513160387, "creation_date": 1513160387, "answer_id": 47790550, "question_id": 47790385, "link": "https://stackoverflow.com/questions/47790385/how-to-delete-several-repeating-triplets-from-a-big-text-using-ruby/47790550#47790550", "title": "How to delete several repeating triplets from a big text using Ruby?", "body": "<pre><code>string = 'AAAAUG'\nRNAtoAA.rna_convert(string)\nputs string\n# AAA\n</code></pre>\n\n<p>Seems to work as expected<br>\nIf you want to return the updated string, use this:</p>\n\n<pre><code>class RNAtoAA\n  def self.rna_convert(rna)\n    rna.slice!\"AUG\"\n    return rna\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1513164755, "creation_date": 1513164755, "answer_id": 47791988, "question_id": 47790385, "link": "https://stackoverflow.com/questions/47790385/how-to-delete-several-repeating-triplets-from-a-big-text-using-ruby/47791988#47791988", "title": "How to delete several repeating triplets from a big text using Ruby?", "body": "<p>You need to read the file in chunks so that the memory isn't swamped.\nThis example creates a testfile and uses it as source for a filtered version.\nIf you were to create a gigabyte big testfile you need to do the same thing for the creation of the testfile.\nIf your file contains linefeeds this could be simpler by lazy loading the lines but I'm going to assume it hasn't.</p>\n\n<pre><code># create a testfile\npatterns = [\"AUG\", \"UAA\", \"UAG\", \"UGA\",\"AAA\", \"BBB\", \"CCC\"]\nlarge_string = \"\"\n1_000_000.times{large_string &lt;&lt; patterns.sample}\nFile.write(\"rna.dat\", large_string)\n\n#read the file, remove some patterns and write in a new file\nfiltered = [\"AUG\", \"UAA\", \"UAG\", \"UGA\"]\nFile.open(\"filtered.dat\", \"w\") do |out_file|\n  File.open(\"rna.dat\", \"r\") do |in_file|\n    while chunk = in_file.read(3)\n      # Read small chunks of 3 bytes to limit memory usage\n      out_file.write chunk unless filtered.include? chunk\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 9088996, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210197125475879/picture?type=large", "display_name": "Dari Obukhova", "link": "https://stackoverflow.com/users/9088996/dari-obukhova"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 47790550, "answer_count": 2, "score": -1, "last_activity_date": 1513164755, "creation_date": 1513159931, "last_edit_date": 1513160089, "question_id": 47790385, "link": "https://stackoverflow.com/questions/47790385/how-to-delete-several-repeating-triplets-from-a-big-text-using-ruby", "title": "How to delete several repeating triplets from a big text using Ruby?", "body": "<pre><code>class RNAtoAA\n  def self.rna_convert(rna)\n    rna.slice!\"AUG\"\n  end\nend\n</code></pre>\n\n<p>I tried this to delete \"AUG\" (I also need to delete 2 more repeating patterns) but it did not produce the desired result. I also tried <code>.gsub(\"AUG\", \"UAA\")</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rspec", "rspec3"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1513156380, "post_id": 47789236, "comment_id": 82539570, "body": "Is this a test-only issue, i.e. does it work when you open the URLs in a browser?"}, {"owner": {"reputation": 271, "user_id": 6929856, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b914dd226ff7b648e0820d82dcd6a02e?s=128&d=identicon&r=PG&f=1", "display_name": "ankur", "link": "https://stackoverflow.com/users/6929856/ankur"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1513156515, "post_id": 47789236, "comment_id": 82539650, "body": "It is working fine when I am trying to hit from browser"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1513156638, "post_id": 47789236, "comment_id": 82539719, "body": "Can you open any other URLs in your tests without freezing the system, i.e. is the problem specific to the <code>ErrorsController</code>?"}, {"owner": {"reputation": 271, "user_id": 6929856, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b914dd226ff7b648e0820d82dcd6a02e?s=128&d=identicon&r=PG&f=1", "display_name": "ankur", "link": "https://stackoverflow.com/users/6929856/ankur"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1513156785, "post_id": 47789236, "comment_id": 82539808, "body": "Yes I can open other URL in errors_controller except 404 and 500"}, {"owner": {"reputation": 271, "user_id": 6929856, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b914dd226ff7b648e0820d82dcd6a02e?s=128&d=identicon&r=PG&f=1", "display_name": "ankur", "link": "https://stackoverflow.com/users/6929856/ankur"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1513157477, "post_id": 47789236, "comment_id": 82540247, "body": "@Stefan - Do you have any idea where am I doing wrong?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1513157581, "post_id": 47789236, "comment_id": 82540303, "body": "No, unfortunately not. I just wanted to rule out a general problem with your test setup."}], "answers": [{"tags": [], "owner": {"reputation": 100, "user_id": 2425565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cc6f8733d6c5a8b795a5e3fb0a9f7df?s=128&d=identicon&r=PG", "display_name": "Omkar", "link": "https://stackoverflow.com/users/2425565/omkar"}, "is_accepted": false, "score": 0, "last_activity_date": 1513749540, "creation_date": 1513749540, "answer_id": 47899661, "question_id": 47789236, "link": "https://stackoverflow.com/questions/47789236/test-cases-for-checking-page-500-404/47899661#47899661", "title": "Test cases for checking page 500 &amp; 404", "body": "<p>In your code, you are setting status 200 when /errors/500 gets called.</p>\n\n<pre><code>  def show\n    # external_error? returns false.\n    status = external_error? ? 500 : 200\n    render page , status: status # Status is 200.\n  end\n</code></pre>\n\n<p>Use debuggers like <code>pry</code> or <code>byebug</code> to check status. There is not any problem in your test case. Try this.</p>\n\n<pre><code>class ErrorsController &lt; ApplicationController\n  skip_before_filter :authenticate_user!\n\n  EXTERNAL_ERRORS = ['sso']\n  VALID_ERRORS = ['404', '403', '500', 'maintenance'] + EXTERNAL_ERRORS\n\n  def show\n    status = error_500? ? 500 : 200\n    render page , status: status\n  end\n\n  def blocked\n  end\n\n  private\n\n  def page\n    if VALID_ERRORS.include?(params[:id])\n      params[:id]\n    else\n      raise(ActionController::RoutingError.new(\"/errors/#{params[:id]} not found\"))\n    end\n  end\n\n  def external_error?\n    EXTERNAL_ERRORS.include?(params[:id])\n  end\n\n  def error_500?\n    ['500'].include?(params[:id]) || external_error?\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 271, "user_id": 6929856, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b914dd226ff7b648e0820d82dcd6a02e?s=128&d=identicon&r=PG&f=1", "display_name": "ankur", "link": "https://stackoverflow.com/users/6929856/ankur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 535, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1513749540, "creation_date": 1513156195, "question_id": 47789236, "link": "https://stackoverflow.com/questions/47789236/test-cases-for-checking-page-500-404", "title": "Test cases for checking page 500 &amp; 404", "body": "<p>I am trying to pass the test cases for pages 404 &amp; 500. But I am having a lot of problems<br/></p>\n\n<p>1) Firstly I have a page 500.html.erb inside app/views/errors/ which is not getting called. <br/>\n2) If I run the below test my system freeze and I need to restart my system<br/>\n3) If I comment this line   <strong>expect{get \"/errors/foo\"}.to raise_exception(ActionController::RoutingError)</strong>.  So in my controller Action name <strong>page</strong> 500 gets passed as params but still, my system get freeze<br/></p>\n\n<p>Can anyone help me to fix this issue</p>\n\n<p><strong>errors_spec.rb</strong></p>\n\n<pre><code> require \"spec_helper\"\n\n    describe \"Errors\" do\n\n      before do\n        allow(Rails).to receive(:env).and_return(ActiveSupport::StringInquirer.new(\"production\"))\n      end\n\n      it \"renders the 500 page\" do\n         get \"/errors/500\"\n         expect(response.status).to eq(500)\n      end\n\n      it \"renders the 404 page\" do\n        get \"/errors/404\"\n        expect(response.status).to eq(404)\n      end\n\n      it \"raises an exception if the page doesn't exist\" do\n        expect {get \"/errors/foo\"}.to raise_exception(ActionController::RoutingError)\n      end\n    end \n</code></pre>\n\n<p><strong>errors_controller.rb</strong></p>\n\n<pre><code>class ErrorsController &lt; ApplicationController\n  skip_before_filter :authenticate_user!\n\n  EXTERNAL_ERRORS = ['sso']\n  VALID_ERRORS = ['404', '403', '500', 'maintenance'] + EXTERNAL_ERRORS\n\n  def show\n    status = external_error? ? 500 : 200\n    render page , status: status\n  end\n\n  def blocked\n  end\n\n  private\n\n  def page\n    if VALID_ERRORS.include?(params[:id])\n      params[:id]\n    else\n      raise(ActionController::RoutingError.new(\"/errors/#{params[:id]} not found\"))\n    end\n  end\n\n  def external_error?\n    EXTERNAL_ERRORS.include?(params[:id])\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "jruby"], "answers": [{"tags": [], "owner": {"reputation": 6788, "user_id": 454312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jNMNF.jpg?s=128&g=1", "display_name": "kares", "link": "https://stackoverflow.com/users/454312/kares"}, "is_accepted": false, "score": 0, "last_activity_date": 1513611187, "creation_date": 1513611187, "answer_id": 47871616, "question_id": 47787911, "link": "https://stackoverflow.com/questions/47787911/compile-jruby-files-to-a-different-directory/47871616#47871616", "title": "compile jruby files to a different directory", "body": "<p>try running <code>**jrubyc** --help</code> ... you should get :</p>\n\n<pre><code>jrubyc [options] (FILE|DIRECTORY)\n\n  -d, --dir DIR            Use DIR as the base path\n  -p, --prefix PREFIX      Prepend PREFIX to the file path and package. Default is no prefix.\n  -t, --target TARGET      Output files to TARGET directory\n  -J OPTION                Pass OPTION to javac for javac compiles\n      --java               Generate Java classes (.java) for a script containing Ruby class definitions\n      --javac              Generate Java classes (.java and .class) for a script containing Ruby class definitions\n  -c CLASSPATH,            Add a jar to the classpath for building\n      --classpath\n      --sha1               Compile to a class named using the SHA1 hash of the source file\n      --handles            Also generate all direct handle classes for the source file\n      --verbose            Log verbose output while compile\n</code></pre>\n\n<p>so you'll need to specify <code>--target TARGET/DIR</code></p>\n"}], "owner": {"reputation": 265, "user_id": 6897476, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/7d1f4b7fe23115a3cf52a7cc6a792f94?s=128&d=identicon&r=PG&f=1", "display_name": "danynl", "link": "https://stackoverflow.com/users/6897476/danynl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1513611187, "creation_date": 1513151193, "question_id": 47787911, "link": "https://stackoverflow.com/questions/47787911/compile-jruby-files-to-a-different-directory", "title": "compile jruby files to a different directory", "body": "<p>I have a jruby application in the following folder structure :</p>\n\n<pre><code>lib/*.class files\nsrc/*.rb files\n</code></pre>\n\n<p>I want to compile all the .rb files in <code>src</code> using <code>jrubyc *.rb</code> and have it automatically moved to <code>lib</code> after the compiling all the files.</p>\n\n<p>Is there a way to specify a 'target' directory for all my newly compiled <code>.class</code> files?</p>\n\n<p>I have looked at <code>jruby -help</code> but cannot find an option for that.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "simple-form"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 7237898, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c809043b04e2ea5d549389cce53636c?s=128&d=identicon&r=PG&f=1", "display_name": "Chionn K", "link": "https://stackoverflow.com/users/7237898/chionn-k"}, "edited": false, "score": 0, "creation_date": 1513147643, "post_id": 47786677, "comment_id": 82535165, "body": "My code on computer is correct. Just miss type a &quot; ] &quot; on stackoverflow when ask this question. The problem is still exist."}, {"owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "reply_to_user": {"reputation": 21, "user_id": 7237898, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c809043b04e2ea5d549389cce53636c?s=128&d=identicon&r=PG&f=1", "display_name": "Chionn K", "link": "https://stackoverflow.com/users/7237898/chionn-k"}, "edited": false, "score": 0, "creation_date": 1513147777, "post_id": 47786677, "comment_id": 82535212, "body": "can you paste controller code as well. Have you permit category in controller?/"}], "tags": [], "owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "is_accepted": true, "score": 1, "last_activity_date": 1513145688, "creation_date": 1513145688, "answer_id": 47786677, "question_id": 47786557, "link": "https://stackoverflow.com/questions/47786557/trying-to-use-simple-form-radio-button-to-input-value/47786677#47786677", "title": "Trying to use simple_form radio button to input value", "body": "<p>You have missed <code>]</code>,  change line</p>\n\n<pre><code>&lt;%= f.collection_radio_buttons :category, [[1,\"Joke \"],[2,\"Gossip \"],[3,\"option3 \"],[4,\"option4 \"], :first, :last %&gt;\n</code></pre>\n\n<p>with </p>\n\n<pre><code>&lt;%= f.collection_radio_buttons :category, [[1,\"Joke \"],[2,\"Gossip \"],[3,\"option3 \"],[4,\"option4 \"]], :first, :last %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "is_accepted": false, "score": 0, "last_activity_date": 1513148048, "creation_date": 1513148048, "answer_id": 47787176, "question_id": 47786557, "link": "https://stackoverflow.com/questions/47786557/trying-to-use-simple-form-radio-button-to-input-value/47787176#47787176", "title": "Trying to use simple_form radio button to input value", "body": "<p>your <code>category</code> column is integer type so i think secound argument of array should be integer instead of string, lets try this.</p>\n\n<pre><code>&lt;%= f.collection_radio_buttons :category, [[\"Joke \",1],[\"Gossip \",2],[\"option3 \",3],[\"option4 \",4]], :first, :last %&gt;\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7237898, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c809043b04e2ea5d549389cce53636c?s=128&d=identicon&r=PG&f=1", "display_name": "Chionn K", "link": "https://stackoverflow.com/users/7237898/chionn-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 47786677, "answer_count": 2, "score": 0, "last_activity_date": 1513148048, "creation_date": 1513145085, "last_edit_date": 1513146253, "question_id": 47786557, "link": "https://stackoverflow.com/questions/47786557/trying-to-use-simple-form-radio-button-to-input-value", "title": "Trying to use simple_form radio button to input value", "body": "<p>I am trying to use simple_form radio button collection to categorize my post, however, it seems the value cannot be read by model. </p>\n\n<p>The following are codes</p>\n\n<pre><code>class CreatePosts &lt; ActiveRecord::Migration\n def change\n create_table :posts do |t|\n  t.text :content\n  t.integer :category\n  t.references :user, index: true, foreign_key: true\n  t.references :comment\n\n  t.timestamps null: false\nend\nend\nend \n</code></pre>\n\n<p>And while I made the post like the following </p>\n\n<pre><code>&lt;%= simple_form_for:post do |f| %&gt;\n   &lt;%= f.collection_radio_buttons :category, [[1,\"Joke \"],[2,\"Gossip \"],[3,\"option3 \"],[4,\"option4 \"]], :first, :last %&gt;\n   &lt;%= f.text_area :content  %&gt;\n   &lt;%= f.button :submit, \"Post\" %&gt;          \n&lt;% end %&gt;\n</code></pre>\n\n<p>No matter what I click on the radio button. the results are the same</p>\n\n<pre><code>Post Load (12.7ms)  SELECT  \"posts\".* FROM \"posts\" ORDER BY \"posts\".\"id\" DESC LIMIT $1  [[\"LIMIT\", 1]]\n =&gt; #&lt;Post id: 17, content: \"test again\",  category: nil, user_id: 1, created_at: \"2017-12-13 05:47:09\", updated_at: \"2017-12-13 05:47:09\"&gt;\n</code></pre>\n\n<p><strong>category: nil</strong> </p>\n\n<p>How to input the value by click a radio button?</p>\n"}, {"tags": ["ruby", "asynchronous", "io", "eventmachine"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1513145126, "post_id": 47786300, "comment_id": 82534120, "body": "Can&#39;t you do <code>puts</code> instead of first <code>send_data</code> call?"}, {"owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1513145444, "post_id": 47786300, "comment_id": 82534246, "body": "Of course I can, but it&#39;ll print the line on server side only. But I want to get this message immediately on client side and after 3 seconds get the second message on client also."}], "answers": [{"comments": [{"owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "edited": false, "score": 0, "creation_date": 1513156290, "post_id": 47788970, "comment_id": 82539509, "body": "Thanks. It&#39;s what I wanted"}], "tags": [], "owner": {"reputation": 3817, "user_id": 1049590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5d6b30416d6161f885822052a93ad3a?s=128&d=identicon&r=PG", "display_name": "Hampei", "link": "https://stackoverflow.com/users/1049590/hampei"}, "is_accepted": true, "score": 2, "last_activity_date": 1513155316, "creation_date": 1513155316, "answer_id": 47788970, "question_id": 47786300, "link": "https://stackoverflow.com/questions/47786300/sleep-with-eventmachine/47788970#47788970", "title": "Sleep with EventMachine", "body": "<p>Don't use sleep, use a timer.</p>\n\n<pre><code>require 'eventmachine'\n\nmodule Handler\n  def receive_data(data)\n    send_data \"#{Time.now}: Received data: #{data}\"\n    EventMachine::Timer.new(3) do\n      send_data \"#{Time.now}: Message after 3 seconds\\r\\n\"\n    end\n  end\nend\n\nEventMachine.run do\n  EventMachine.start_server('127.0.0.1', 1234, Handler)\nend\n</code></pre>\n"}], "owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 0, "accepted_answer_id": 47788970, "answer_count": 1, "score": 2, "last_activity_date": 1513155316, "creation_date": 1513143856, "question_id": 47786300, "link": "https://stackoverflow.com/questions/47786300/sleep-with-eventmachine", "title": "Sleep with EventMachine", "body": "<p>I'm trying EventMachine and have an simple server:</p>\n\n<pre><code>require 'eventmachine'                                                                                                     \n\nmodule Handler                                                                                                             \n  def receive_data(data)                                                                                                   \n    send_data \"#{Time.now}: Received data: #{data}\"                                                                        \n    sleep 3                                                                                                                \n    send_data \"#{Time.now}: Message after 3 seconds\\r\\n\"                                                                   \n  end                                                                                                                      \nend                                                                                                                        \n\nEventMachine.run do                                                                                                        \n  EventMachine.start_server('0.0.0.0', 1234, Handler)                                                                      \nend\n</code></pre>\n\n<p>When I run the server and connect to it via telnet I have the following:</p>\n\n<pre><code>root@edfe43af3db3:/# telnet localhost 1234\nTrying 127.0.0.1...\nConnected to localhost.\nEscape character is '^]'.\nhello world\n2017-12-13 05:35:26 +0000: Received data: hello world\n2017-12-13 05:35:29 +0000: Message after 3 seconds\n</code></pre>\n\n<p>It seems fine but it behaves in an unexpected way. When I send <code>hello world</code> to the server I expect to get back <code>Received data: hello world</code> message practically at the same time and after 3 seconds I expect to get <code>Message after 3 seconds</code> message. But now after sending a command to server at first I get back nothing and after 3 seconds I get two messages together. </p>\n\n<p>How can I achieve desired manner?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1513142982, "post_id": 47786033, "comment_id": 82533272, "body": "What do you mean by &quot;rails object&quot;? What sorts of differences? What does your example mean? What does &quot;deep compare&quot; mean? &quot;Also the changes&quot;? You probably need to work on your question."}, {"owner": {"reputation": 1449, "user_id": 232852, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fc411fe37f4dcb88c271948afae553c?s=128&d=identicon&r=PG", "display_name": "Ross", "link": "https://stackoverflow.com/users/232852/ross"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1513144517, "post_id": 47786033, "comment_id": 82533863, "body": "Updated the question"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1513145093, "post_id": 47786033, "comment_id": 82534102, "body": "Your <code>User</code> model doesn&#39;t have a unique constraint on <code>id</code>? How do you distinguish between <code>user1</code> that has <code>id: 1</code> and <code>user2</code> that also has <code>id: 1</code>? What do you imagine the result of this &#39;deep compare&#39; to be? A boolean? A hash? Something else?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1513156836, "post_id": 47786033, "comment_id": 82539840, "body": "What is your expected result?"}, {"owner": {"reputation": 1449, "user_id": 232852, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fc411fe37f4dcb88c271948afae553c?s=128&d=identicon&r=PG", "display_name": "Ross", "link": "https://stackoverflow.com/users/232852/ross"}, "edited": false, "score": 0, "creation_date": 1513161963, "post_id": 47786033, "comment_id": 82543152, "body": "Expecting to see the difference between the 2 object, maybe a hash {name: &quot;first last1&quot;, books: {1: {status: deleted}}, college: {name: &#39;pqw&#39; }}  for only the things that are different"}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1513152749, "last_edit_date": 1513152749, "creation_date": 1513145193, "answer_id": 47786579, "question_id": 47786033, "link": "https://stackoverflow.com/questions/47786033/how-to-deep-compare-2-ruby-objects/47786579#47786579", "title": "How to deep compare 2 ruby objects", "body": "<p><code>ActiveRecord#==</code> just checks that <code>self</code> and the other object are instances of the same class and have the same <code>id</code>. If you want to compare their attributes and associations you need to write a custom method yourself.</p>\n\n<p>Something like this might work:</p>\n\n<pre><code># in models/application_record.rb\ndef attributes_eq?(other)\n  self == other &amp;&amp; attributes == other.attributes\nend\n\n# in models/user.rb\ndef attributes_eq?(other)\n  super &amp;&amp;\n    college.attributes_eq?(other.college) &amp;&amp;\n    books_ids == other.book_ids &amp;&amp;\n    books.zip(other.books).all? { |a, b| a.attributes_eq?(b) }\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 616, "user_id": 2675376, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000498640121/picture?type=large", "display_name": "Juan Manuel Rodulfo Salcedo", "link": "https://stackoverflow.com/users/2675376/juan-manuel-rodulfo-salcedo"}, "is_accepted": false, "score": 0, "last_activity_date": 1513177571, "creation_date": 1513177571, "answer_id": 47796258, "question_id": 47786033, "link": "https://stackoverflow.com/questions/47786033/how-to-deep-compare-2-ruby-objects/47796258#47796258", "title": "How to deep compare 2 ruby objects", "body": "<p>Define your own == method in User and define your custom logic.</p>\n\n<pre><code>def ==(obj)\n  #check all attributes or whatever you want to compare, if at somepoint you find a false checking attrs, return false, otherwise return true.\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 397, "user_id": 289935, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0cd6a5737e7c1e206867c0eb2a3cd256?s=128&d=identicon&r=PG", "display_name": "Guy Argo", "link": "https://stackoverflow.com/users/289935/guy-argo"}, "is_accepted": false, "score": 1, "last_activity_date": 1547796665, "creation_date": 1547796665, "answer_id": 54249479, "question_id": 47786033, "link": "https://stackoverflow.com/questions/47786033/how-to-deep-compare-2-ruby-objects/54249479#54249479", "title": "How to deep compare 2 ruby objects", "body": "<p>Serialize both objects using Marshal.dump</p>\n\n<pre><code>def deep_equals(a, b)\n  Marshal.dump(a) == Marshal.dump(b)\nend```\n</code></pre>\n"}], "owner": {"reputation": 1449, "user_id": 232852, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fc411fe37f4dcb88c271948afae553c?s=128&d=identicon&r=PG", "display_name": "Ross", "link": "https://stackoverflow.com/users/232852/ross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1086, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1547796665, "creation_date": 1513142571, "last_edit_date": 1513151233, "question_id": 47786033, "link": "https://stackoverflow.com/questions/47786033/how-to-deep-compare-2-ruby-objects", "title": "How to deep compare 2 ruby objects", "body": "<p>I am looking for a way to compare 2 rails object and find the difference.</p>\n\n<p>Ex.</p>\n\n<pre><code>class User\n  has_many :books\n  belongs_to :college\nend\n\nclass Book \n belongs_to :user\nend \n\nclass College\n  has_many :users\nend \n</code></pre>\n\n<p>How do I deep compare two user objects and find the differences also the changes in the associated objects</p>\n\n<p>Now suppose I have 2 instances of user object</p>\n\n<p>user1 = User.first  ==> {id: 1, name: 'first last', age: 22}</p>\n\n<p>user1 has 2 books with name book1 and book2 and belongs to college C1 {name: 'pqr'}</p>\n\n<p>now I have another instance user2 which is a modified version of user1, </p>\n\n<p>Now user2 is => {id: 2, name: 'first last1', age: 23} and user2 object has only one book book1 ( book2 is deleted from association ). And college C1 name is changed to {name: 'pqw'}</p>\n"}, {"tags": ["ruby", "hammingweight"], "comments": [{"owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 2, "creation_date": 1513143284, "post_id": 47786024, "comment_id": 82533411, "body": "Is that literally what the array looks like or is it made of strings? Because if it&#39;s literal numbers then they&#39;re not <i>actually</i> in binary and things are going to be a bit awkward."}, {"owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "edited": false, "score": 0, "creation_date": 1513143922, "post_id": 47786024, "comment_id": 82533628, "body": "What is the logic behind the grouping?"}, {"owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "reply_to_user": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "edited": false, "score": 0, "creation_date": 1513143948, "post_id": 47786024, "comment_id": 82533634, "body": "@Santhosh It&#39;s in the title. It counts the number of <code>1</code> in each string."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1513147371, "post_id": 47786024, "comment_id": 82535050, "body": "Numbers with leading <code>0</code> are interpreted as octal numbers, so <code>010</code> is <code>8</code>."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1513156095, "post_id": 47786024, "comment_id": 82539406, "body": "What is the code you are having trouble with? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ? Please, provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1513156125, "post_id": 47786024, "comment_id": 82539419, "body": "Can you provide a <i>precise</i> specification of what it is that you want to happen, including any and all rules, exceptions from those rules, corner cases, special cases, boundary cases, and edge cases? Can you provide sample inputs and outputs demonstrating what you expect to happen, both in normal cases, and in all the exceptions, corner cases, special cases, boundary cases, and edge cases? Please, also provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1513156163, "post_id": 47786024, "comment_id": 82539433, "body": "&quot;Can anybody help me how to achieve it in ruby?&quot; \u2013 You can achieve it by writing a program which does that. If you have a problem with your program, carefully read the documentation of all the methods, classes, modules, and libraries you are using, write tests for your programs, trace the execution with pen and paper, single-step it in a debugger, then sleep on it, start again from the beginning, sleep on it again, and <i>then and only then</i> narrow your problem down to a concise, focused, simple, short, reproducible <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and ask a focused, narrow question on <a href=\"https://stackoverflow.com\">Stack Overflow</a>."}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 5883397, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c652808cfca2eb51a61b5cbeceb23b11?s=128&d=identicon&r=PG&f=1", "display_name": "asha", "link": "https://stackoverflow.com/users/5883397/asha"}, "edited": false, "score": 0, "creation_date": 1513143995, "post_id": 47786211, "comment_id": 82533660, "body": "Thanks @silvio. I have converted into string and did like above, it worked."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1513148145, "post_id": 47786211, "comment_id": 82535393, "body": "If you were working with integers, e.g. <code>a = [0b001, 0b010, ...]</code>, you could find the number of set bits in a similar fashion: <code>a.group_by { |n| n.digits(2).count(1) }.values</code>"}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1513168268, "post_id": 47786211, "comment_id": 82547031, "body": "Note that the solution @Stefan provides uses <code>Integer#digits</code> which requires Ruby 2.4."}], "tags": [], "owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "is_accepted": true, "score": 2, "last_activity_date": 1513143451, "creation_date": 1513143451, "answer_id": 47786211, "question_id": 47786024, "link": "https://stackoverflow.com/questions/47786024/how-to-create-a-sub-array-of-given-array-of-binary-numbers-based-on-number-of-1/47786211#47786211", "title": "How to create a sub array of given array of binary numbers based on number of 1&#39;s in Ruby?", "body": "<p>I'm going to assume you're working with strings (<code>\"001\"</code>) and not decimal/octal literals (<code>001</code>). If that's not the case, I strongly suggest casting to strings to make things easier on you.</p>\n\n<p>We can count the number of ones in a string <code>x</code> with <code>x.count('1')</code>. Then we can take a list of strings and organize it by this value with <code>a.group_by(...)</code>. This gives a hash, so if you just want the values (as your suggested output suggests), then you simply take the <code>values</code> of it.</p>\n\n<pre><code>a.group_by { |x| x.count('1') }.values\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1513184812, "last_edit_date": 1513184812, "creation_date": 1513145565, "answer_id": 47786655, "question_id": 47786024, "link": "https://stackoverflow.com/questions/47786024/how-to-create-a-sub-array-of-given-array-of-binary-numbers-based-on-number-of-1/47786655#47786655", "title": "How to create a sub array of given array of binary numbers based on number of 1&#39;s in Ruby?", "body": "<p>Using <code>Enumerable#group_by</code>, as @Silvio has done, seems the most direct way to solve this problem, but here are a couple of other approaches one could use.</p>\n\n<pre><code>a = \"001, 010, 100, 011, 101, 110, 111, 1000, 1001, 1010\".split(', ')\n  #=&gt; [\"001\", \"010\", \"100\", \"011\", \"101\", \"110\", \"111\", \"1000\", \"1001\", \"1010\"]\n</code></pre>\n\n<p><strong>Construct a hash whose keys, <code>k</code>, are numbers of ones and whose values are arrays containing the elements from the original array whose numbers of one1 equal <code>k</code></strong></p>\n\n<pre><code>a.each_with_object({}) { |s,h| (h[s.count('1')] ||= []) &lt;&lt; s }.values\n  #=&gt; [[\"001\", \"010\", \"100\", \"1000\"], [\"011\", \"101\", \"110\", \"1001\", \"1010\"], [\"111\"]]\n</code></pre>\n\n<p>Note <code>values</code> is applied to the hash returned by the block, namely</p>\n\n<pre><code>{1=&gt;[\"001\", \"010\", \"100\", \"1000\"], 2=&gt;[\"011\", \"101\", \"110\", \"1001\", \"1010\"], 3=&gt;[\"111\"]}\n</code></pre>\n\n<p>Consider the expression, <code>(h[s.count('1')] ||= []) &lt;&lt; s</code>. Let</p>\n\n<pre><code>cnt = s.count('1')\n</code></pre>\n\n<p>Then <code>(h[cnt] ||= []) &lt;&lt; s</code> expands to the following when parsed.</p>\n\n<pre><code>(h[cnt] = h[cnt] || []) &lt;&lt; s\n</code></pre>\n\n<p>If <code>h</code> does not have a key <code>cnt</code>, then <code>h[cnt]</code> on the right of the equality equals <code>nil</code>, so the expression reduces to</p>\n\n<pre><code>(h[cnt] = []) &lt;&lt; s\n</code></pre>\n\n<p>so <code>h[cnt] #=&gt; [s]</code>. On the other hand, if <code>h</code> does have a key <code>cnt</code>, <code>h[cnt]</code> equals an array, which is truthy, so we execute</p>\n\n<pre><code>h[cnt] &lt;&lt; s\n</code></pre>\n\n<p>Note that in <code>h[cnt] = h[cnt] || []</code>, the method on the left of the equality is <a href=\"http://ruby-doc.org/core-2.4.0/Hash.html#method-i-5B-5D-3D\" rel=\"nofollow noreferrer\">Hash#[]=</a>, whereas we have <a href=\"http://ruby-doc.org/core-2.4.0/Hash.html#method-i-5B-5D\" rel=\"nofollow noreferrer\">Hash#[]</a> is on the right of the equality.</p>\n\n<p><strong>Sort then slice</strong></p>\n\n<pre><code>a.sort_by { |s| s.count('1') }.slice_when { |s1,s2| s1.count('1') &lt; s2.count('1') }.to_a\n  #=&gt; [[\"001\", \"010\", \"100\", \"1000\"], [\"011\", \"101\", \"110\", \"1001\", \"1010\"], [\"111\"]]\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 5883397, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c652808cfca2eb51a61b5cbeceb23b11?s=128&d=identicon&r=PG&f=1", "display_name": "asha", "link": "https://stackoverflow.com/users/5883397/asha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 47786211, "answer_count": 2, "score": -3, "last_activity_date": 1513184812, "creation_date": 1513142513, "last_edit_date": 1513148294, "question_id": 47786024, "link": "https://stackoverflow.com/questions/47786024/how-to-create-a-sub-array-of-given-array-of-binary-numbers-based-on-number-of-1", "title": "How to create a sub array of given array of binary numbers based on number of 1&#39;s in Ruby?", "body": "<p>Example: </p>\n\n<p>Here is binary numbers array:</p>\n\n<p><code>a = [001, 010, 100, 011, 101, 110, 111, 1000, 1001, 1010]</code></p>\n\n<p>I want output like below:</p>\n\n<p><code>[ [ 001, 010, 100, 1000 ], [ 011, 101, 110, 1001, 1010 ], [ 111 ] ]</code></p>\n\n<p>Can anybody help me how to achieve it in ruby? </p>\n"}, {"tags": ["ruby", "regex"], "answers": [{"tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 5, "last_activity_date": 1513141412, "creation_date": 1513141412, "answer_id": 47785810, "question_id": 47785594, "link": "https://stackoverflow.com/questions/47785594/ruby-regular-expression-error/47785810#47785810", "title": "Ruby regular expression error", "body": "<p><code>\\xHH</code> syntax is only valid for UTF-8 characters <code>\\x00</code> to <code>\\x7F</code>. <code>\\x80</code> to <code>\\xFF</code> are valid in US-ASCII encoding, but not <code>UTF-8</code>; to use higher characters in UTF-8, use <code>\\uHHHH</code>. Thus, these all work:</p>\n\n<pre><code>/\\u00A0/\n\n/#{\"\\\\xA0\".encode('US-ASCII')}/\n\nRegexp.new(\"\\\\xA0\".encode('US-ASCII'))\n\n# encoding: US-ASCII\n/\\xA0/\n</code></pre>\n\n<p>although they do different things, depending on what encoding you are matching. For example:</p>\n\n<pre><code># encoding: UTF-8\nRegexp.new(\"\\\\xA0\".encode('US-ASCII')) =~ \"\\u00A0\"\n# =&gt; Encoding::CompatibilityError: incompatible encoding regexp match (ASCII-8BIT regexp with UTF-8 string)\n</code></pre>\n"}], "owner": {"reputation": 4181, "user_id": 3337677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2a3cb5dc363dbc123686e074c4c3181e?s=128&d=identicon&r=PG&f=1", "display_name": "packetie", "link": "https://stackoverflow.com/users/3337677/packetie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 1, "accepted_answer_id": 47785810, "answer_count": 1, "score": 1, "last_activity_date": 1513141412, "creation_date": 1513140040, "question_id": 47785594, "link": "https://stackoverflow.com/questions/47785594/ruby-regular-expression-error", "title": "Ruby regular expression error", "body": "<p>When running a ruby script with regex, </p>\n\n<pre><code>s = object.value.gsub(/(\\A[\\s\\xA0]*|[\\s\\xA0]*\\Z)/n, '')\n</code></pre>\n\n<p>Got error</p>\n\n<pre><code>invalid multibyte escape: /(\\A[\\s\\xA0]*|[\\s\\xA0]*\\Z)/ (SyntaxError)\n</code></pre>\n\n<p>Any idea why?  Ruby version <code>2.3.1p112 (2016-04-26 revision 54768) [x86_64-linux]</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "unit-testing", "attr-encrypted"], "answers": [{"tags": [], "owner": {"reputation": 421, "user_id": 2473275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20777f23254acdc35a5f9de0f14fd8a3?s=128&d=identicon&r=PG", "display_name": "Jami Couch", "link": "https://stackoverflow.com/users/2473275/jami-couch"}, "is_accepted": true, "score": 0, "last_activity_date": 1513139649, "creation_date": 1513139649, "answer_id": 47785536, "question_id": 47785210, "link": "https://stackoverflow.com/questions/47785210/rails-test-throwing-deprecation-warning-over-attr-encrypted/47785536#47785536", "title": "Rails test throwing Deprecation Warning over attr_encrypted", "body": "<p>The deprecation warning is something the attr_encrypted gem needs to fix, but it seems there is a workaround by adding the attribute call as mentioned in the warning.</p>\n\n<p>See <a href=\"https://github.com/attr-encrypted/attr_encrypted/issues/260\" rel=\"nofollow noreferrer\">https://github.com/attr-encrypted/attr_encrypted/issues/260</a></p>\n"}], "owner": {"reputation": 299, "user_id": 8897013, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f57438fb7d0ee1c49f779a3b7e7102e4?s=128&d=identicon&r=PG&f=1", "display_name": "user8897013", "link": "https://stackoverflow.com/users/8897013/user8897013"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "accepted_answer_id": 47785536, "answer_count": 1, "score": 0, "last_activity_date": 1513139649, "creation_date": 1513137115, "question_id": 47785210, "link": "https://stackoverflow.com/questions/47785210/rails-test-throwing-deprecation-warning-over-attr-encrypted", "title": "Rails test throwing Deprecation Warning over attr_encrypted", "body": "<p>Rails test is throwing a deprecation warning over a gem (attr_encrypted) which is already updated to the latest version. It reads:</p>\n\n<p><code>DEPRECATION WARNING: &lt;custom_attribute_name&gt; is not an attribute known</code> <code>to Active Record. This behavior is deprecated and will be removed in</code> \n<code>the next version of Rails. If you'd like &lt;custom_attribute_name&gt; to be</code> <code>managed by Active Record, add attribute :&lt;custom_attribute_name&gt; to</code> <code>your class.</code></p>\n\n<p>Not sure what it is asking me to do... it must be declared using attr_encrypted.</p>\n"}, {"tags": ["ruby", "sinatra"], "comments": [{"owner": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "edited": false, "score": 0, "creation_date": 1513128108, "post_id": 47783991, "comment_id": 82529587, "body": "Did you try to install oj gem or add it to Gemfile if you use bundler?"}, {"owner": {"reputation": 3399, "user_id": 8936320, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vF3VX.jpg?s=128&g=1", "display_name": "Ishan Patel", "link": "https://stackoverflow.com/users/8936320/ishan-patel"}, "reply_to_user": {"reputation": 2093, "user_id": 3309314, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3683a7a05e7e97a67c262b774db00d08?s=128&d=identicon&r=PG&f=1", "display_name": "user3309314", "link": "https://stackoverflow.com/users/3309314/user3309314"}, "edited": false, "score": 0, "creation_date": 1513129534, "post_id": 47783991, "comment_id": 82529989, "body": "Hi @user3309314, thanks. I am using bundler. Can you please help me how can I add oj gem to Gemfile?"}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1513130118, "post_id": 47783991, "comment_id": 82530152, "body": "Start here: <a href=\"http://bundler.io/v1.5/gemfile.html\" rel=\"nofollow noreferrer\">bundler.io/v1.5/gemfile.html</a>"}, {"owner": {"reputation": 3399, "user_id": 8936320, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vF3VX.jpg?s=128&g=1", "display_name": "Ishan Patel", "link": "https://stackoverflow.com/users/8936320/ishan-patel"}, "edited": false, "score": 0, "creation_date": 1513130187, "post_id": 47783991, "comment_id": 82530166, "body": "Awesome I just did <code>bundle install</code> and it worked. Thanks"}, {"owner": {"reputation": 3399, "user_id": 8936320, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vF3VX.jpg?s=128&g=1", "display_name": "Ishan Patel", "link": "https://stackoverflow.com/users/8936320/ishan-patel"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1513130249, "post_id": 47783991, "comment_id": 82530179, "body": "Thanks @orde, that&#39;s a great explanation."}], "answers": [{"comments": [{"owner": {"reputation": 3399, "user_id": 8936320, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vF3VX.jpg?s=128&g=1", "display_name": "Ishan Patel", "link": "https://stackoverflow.com/users/8936320/ishan-patel"}, "edited": false, "score": 0, "creation_date": 1513135132, "post_id": 47784785, "comment_id": 82531319, "body": "That is brilliant explanation. Thank you so much @danieldeveloper001"}, {"owner": {"reputation": 2602, "user_id": 7372188, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/52O7P.jpg?s=128&g=1", "display_name": "dandev486", "link": "https://stackoverflow.com/users/7372188/dandev486"}, "reply_to_user": {"reputation": 3399, "user_id": 8936320, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vF3VX.jpg?s=128&g=1", "display_name": "Ishan Patel", "link": "https://stackoverflow.com/users/8936320/ishan-patel"}, "edited": false, "score": 0, "creation_date": 1513135290, "post_id": 47784785, "comment_id": 82531365, "body": "You&#39;re more than welcome, glad that I could help you, please, let me know if there is something more that you want to know. Regards :)"}], "tags": [], "owner": {"reputation": 2602, "user_id": 7372188, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/52O7P.jpg?s=128&g=1", "display_name": "dandev486", "link": "https://stackoverflow.com/users/7372188/dandev486"}, "is_accepted": true, "score": 4, "last_activity_date": 1513133389, "creation_date": 1513133389, "answer_id": 47784785, "question_id": 47783991, "link": "https://stackoverflow.com/questions/47783991/require-cannot-load-such-file-oj-loaderror/47784785#47784785", "title": "`require&#39;: cannot load such file -- oj (LoadError)", "body": "<p>Just with the intention of providing a detailed and structured answer for others, since you have already solved the issue. When developing a Ruby application, if code that lives in an external gem is required, you can use <a href=\"http://bundler.io/\" rel=\"nofollow noreferrer\">Bundler</a> to keep track and manage your dependencies. It uses a file called <a href=\"http://bundler.io/v1.16/man/gemfile.5.html\" rel=\"nofollow noreferrer\">Gemfile</a> to register the dependencies that your project relies on, as well as the source from where these dependencies will be pulled to your machine. A basic syntax example of Gemfile.</p>\n\n<pre><code># Registering the sources of gem packages\nsource 'https://rubygems.org'\n[...]\n\n# Requiring a gem for this project\ngem 'package_1' # registers a dependency\ngem 'package_2', '&gt;=2.0.0' # registers a dependency, with minimum version required\ngem 'package_3', '&gt;= 1.5.0', '&lt; 1.9.0' # registers a dependency, with minimum and maximum version required\n[...]\n</code></pre>\n\n<p>With all this set up, when you run <a href=\"http://bundler.io/v1.16/man/bundle-install.1.html\" rel=\"nofollow noreferrer\">bundle install</a>, the dependencies that are specified in your gemfile are pulled to your machine and you can run the program. If you want to check more information for a gem on your machine, you can run <a href=\"http://bundler.io/v1.16/man/bundle-info.1.html\" rel=\"nofollow noreferrer\">bundle info package</a> (below an example for mysql gem)</p>\n\n<pre><code>  * mysql (2.9.1)\n    Summary: This is the MySQL API module for Ruby\n    Homepage: http://github.com/luislavena/mysql-gem\n    Path: /var/lib/gems/2.3.0/gems/mysql-2.9.1\n</code></pre>\n"}], "owner": {"reputation": 3399, "user_id": 8936320, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vF3VX.jpg?s=128&g=1", "display_name": "Ishan Patel", "link": "https://stackoverflow.com/users/8936320/ishan-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 723, "favorite_count": 0, "closed_date": 1513153317, "accepted_answer_id": 47784785, "answer_count": 1, "score": 0, "last_activity_date": 1566498978, "creation_date": 1513126816, "last_edit_date": 1566498978, "question_id": 47783991, "link": "https://stackoverflow.com/questions/47783991/require-cannot-load-such-file-oj-loaderror", "closed_reason": "Not suitable for this site", "title": "`require&#39;: cannot load such file -- oj (LoadError)", "body": "<p>I only know the basics of the Ruby and trying to fix this error. There were same questions already but couldn't get it solved from those. </p>\n\n<p>When I run following command in my Ruby Project</p>\n\n<pre><code>rerun 'ruby app.rb'\n</code></pre>\n\n<p>I got the following error. </p>\n\n<pre><code>[rerun] Webhook-receiver launched\n\n/Users/myhome/.rbenv/versions/2.4.2/lib/ruby/2.4.0/\nrubygems/core_ext/kernel_require.rb:55:\nin `require': cannot load such file -- oj (LoadError)\n\nfrom  /Users/myhome/.rbenv/versions/2.4.2/lib/ruby/2.4.0/rubygems/\ncore_ext/kernel_require.rb:55:\nin `require' from app.rb:2:in `&lt;main&gt;'\n\n[rerun] Webhook-receiver Launch Failed\n[rerun] Watching . for **/*.{rb,js,coffee,css,scss,sass,erb,html,haml,ru,yml,slim,md,feature}\n</code></pre>\n\n<p>How can I solve this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "localhost"], "comments": [{"owner": {"reputation": 370, "user_id": 3798525, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xPLE1.jpg?s=128&g=1", "display_name": "Danilo C&#226;ndido", "link": "https://stackoverflow.com/users/3798525/danilo-c%c3%a2ndido"}, "edited": false, "score": 0, "creation_date": 1513128880, "post_id": 47783612, "comment_id": 82529789, "body": "Can you post the error stack trace?"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "edited": false, "score": 0, "creation_date": 1513145487, "post_id": 47783612, "comment_id": 82534271, "body": "<code>skip_before_action :verify_authenticity_token</code> add this line next to your <code>protect_from_forgery with: :exception</code>"}, {"owner": {"reputation": 326, "user_id": 3013354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad9dbf3df6d9dc0944bb224014a3bc2b?s=128&d=identicon&r=PG", "display_name": "nekogami", "link": "https://stackoverflow.com/users/3013354/nekogami"}, "reply_to_user": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "edited": false, "score": 0, "creation_date": 1513154672, "post_id": 47783612, "comment_id": 82538576, "body": "@Gabbar if he does that, what is the point of keeping protect_from_forgery then ...  First, what is your error ? You say that it occurs on <a href=\"http://localhost:3000/pages/home\" rel=\"nofollow noreferrer\">localhost:3000/pages/home</a>  but forgery check should only occur on action other than GET and you url kind a look like a GET request to me."}], "answers": [{"comments": [{"owner": {"reputation": 633, "user_id": 2611472, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/67a5db98d0cd9027b372cf17a3b6b19f?s=128&d=identicon&r=PG", "display_name": "westman2222", "link": "https://stackoverflow.com/users/2611472/westman2222"}, "edited": false, "score": 0, "creation_date": 1513172958, "post_id": 47794550, "comment_id": 82550076, "body": "Thx I&#39;ll give this a go tonight"}, {"owner": {"reputation": 633, "user_id": 2611472, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/67a5db98d0cd9027b372cf17a3b6b19f?s=128&d=identicon&r=PG", "display_name": "westman2222", "link": "https://stackoverflow.com/users/2611472/westman2222"}, "edited": false, "score": 0, "creation_date": 1513212746, "post_id": 47794550, "comment_id": 82570159, "body": "I am now getting this error: Missing helper file helpers/c:/sites/cookies/app/helpers/application_helper.rb_h&zwnj;&#8203;elper.rb"}], "tags": [], "owner": {"reputation": 123, "user_id": 3205777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zi6Bd.jpg?s=128&g=1", "display_name": "Ravi Prakash", "link": "https://stackoverflow.com/users/3205777/ravi-prakash"}, "is_accepted": false, "score": 1, "last_activity_date": 1513172832, "creation_date": 1513172832, "answer_id": 47794550, "question_id": 47783612, "link": "https://stackoverflow.com/questions/47783612/protect-from-forgery-with-exception-rails-5/47794550#47794550", "title": "protect_from_forgery with: :exception rails 5", "body": "<p>protect_from_forgery is rails feature to protect unauthorized attacks by other users. So, if you are getting this error means you are trying to authenticate on that page.\nYou can add <code>skip_before_action :verify_authenticity_token</code> to skip it.</p>\n"}], "owner": {"reputation": 633, "user_id": 2611472, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/67a5db98d0cd9027b372cf17a3b6b19f?s=128&d=identicon&r=PG", "display_name": "westman2222", "link": "https://stackoverflow.com/users/2611472/westman2222"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 904, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513213335, "creation_date": 1513123943, "last_edit_date": 1513213335, "question_id": 47783612, "link": "https://stackoverflow.com/questions/47783612/protect-from-forgery-with-exception-rails-5", "title": "protect_from_forgery with: :exception rails 5", "body": "<p>I am working on a new rails project and having some trouble right off the bat with this error  in my localhost development environment: </p>\n\n<pre><code>protect_from_forgery with: :exception\n</code></pre>\n\n<p>My application helper file: </p>\n\n<pre><code> class ApplicationController &lt; ActionController::Base\n  protect_from_forgery with: :exception\nend\n</code></pre>\n\n<p>Any ideas how I can circumvent and/or resolve this error? </p>\n\n<p>A thing to note, this is happening on </p>\n\n<pre><code>http://localhost:3000/pages/home\n</code></pre>\n\n<p>but not</p>\n\n<p><a href=\"http://localhost:3000\" rel=\"nofollow noreferrer\">http://localhost:3000</a></p>\n\n<p>This is my application trace: </p>\n\n<pre><code>artwe@DESKTOP-9MER9I4 /c/sites/cookies (master)\n$ rails --trace\n** Invoke default (first_time)\n** Invoke test (first_time)\n** Execute test\n** Execute default\nRun options: --seed 1992\n\n# Running:\n\nE\n\nError:\nPagesControllerTest#test_should_get_home:\nAbstractController::Helpers::MissingHelperError: Missing helper file helpers/c:/sites/cookies/app/helpers/application_helper.rb_helper.rb\n    app/controllers/application_controller.rb:1:in `&lt;top (required)&gt;'\n    app/controllers/pages_controller.rb:1:in `&lt;top (required)&gt;'\n    test/controllers/pages_controller_test.rb:5:in `block in &lt;class:PagesControllerTest&gt;'\n\n\nbin/rails test test/controllers/pages_controller_test.rb:4\n\n\n\nFinished in 1.552152s, 0.6443 runs/s, 0.0000 assertions/s.\n1 runs, 0 assertions, 0 failures, 1 errors, 0 skips\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1513160562, "post_id": 47783426, "comment_id": 82542212, "body": "Does look somewhat appropriate, since <a href=\"https://github.com/ruby/ruby/blob/b81ac5150a43143a3562ba56add07abbbc764607/lib/securerandom.rb#L147-L149\" rel=\"nofollow noreferrer\"><code>hex</code> does <code>unpack(&quot;H*&quot;)</code></a>. (I just really think they shouldn&#39;t go through hex in the first place.)"}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 1, "last_activity_date": 1513122599, "creation_date": 1513122599, "answer_id": 47783426, "question_id": 47783251, "link": "https://stackoverflow.com/questions/47783251/ruby-write-hex-string-to-binary-file-by-keeping-hex-values/47783426#47783426", "title": "Ruby Write Hex String To Binary File By Keeping Hex Values", "body": "<p>You can turn it into a single element array and <a href=\"https://ruby-doc.org/core-2.4.2/Array.html#method-i-pack\" rel=\"nofollow noreferrer\"><code>pack</code></a> it as hex. For instance, when I run your code:</p>\n\n<pre><code>require 'securerandom'\n\nlength = 2 ** 6\nrandom_hex_string = SecureRandom.hex (length)\nrandom_hex_string.insert(0,\"0102\")\nrandom_hex_string.insert(30*1,\"36\")\n\nputs random_hex_string\nFile.open(\"file.txt\", 'w+b') do |file|\n  file.write([random_hex_string].pack('H*')) # see also 'h'\nend\n</code></pre>\n\n<p>I get the output</p>\n\n<blockquote>\n  <p>010299e84e9e4541d08cb800462b6f36a87ff118d6291368e96e8907598a2dfd4090658fea1dab6ed460ab512ddc54522329f6b4ddd287e4302ef603ce60e85e631591</p>\n</blockquote>\n\n<p>and then running</p>\n\n<pre><code>$ hexdump  file.txt \n0000000 01 02 99 e8 4e 9e 45 41 d0 8c b8 00 46 2b 6f 36\n0000010 a8 7f f1 18 d6 29 13 68 e9 6e 89 07 59 8a 2d fd\n0000020 40 90 65 8f ea 1d ab 6e d4 60 ab 51 2d dc 54 52\n0000030 23 29 f6 b4 dd d2 87 e4 30 2e f6 03 ce 60 e8 5e\n0000040 63 15 91                                       \n0000043\n</code></pre>\n\n<p>Unless, I'm mistaken, it matches up perfectly with the output from the script.</p>\n\n<hr>\n\n<p>I've never messed with Array#pack before, and haven't done much with hex, but this seems to be giving the results you require, so should be a step in the right direction at least.</p>\n"}, {"comments": [{"owner": {"reputation": 183, "user_id": 7227066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/179155d8eea3a673b857d006d399c90d?s=128&d=identicon&r=PG&f=1", "display_name": "vvvnn", "link": "https://stackoverflow.com/users/7227066/vvvnn"}, "edited": false, "score": 0, "creation_date": 1513157888, "post_id": 47789511, "comment_id": 82540482, "body": "It is already answered with a correct solution. Thank you,  This is also working well."}], "tags": [], "owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "is_accepted": false, "score": 1, "last_activity_date": 1513157059, "creation_date": 1513157059, "answer_id": 47789511, "question_id": 47783251, "link": "https://stackoverflow.com/questions/47783251/ruby-write-hex-string-to-binary-file-by-keeping-hex-values/47789511#47789511", "title": "Ruby Write Hex String To Binary File By Keeping Hex Values", "body": "<p>Why ask for hex when you don't actually want hex? Just do this:</p>\n\n<pre><code>random_bytes = SecureRandom.random_bytes(length)\nrandom_bytes.insert(0, \"\\x01\\x02\")\nrandom_bytes.insert(15, \"\\x36\")\n</code></pre>\n"}], "owner": {"reputation": 183, "user_id": 7227066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/179155d8eea3a673b857d006d399c90d?s=128&d=identicon&r=PG&f=1", "display_name": "vvvnn", "link": "https://stackoverflow.com/users/7227066/vvvnn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 856, "favorite_count": 0, "accepted_answer_id": 47783426, "answer_count": 2, "score": 0, "last_activity_date": 1513157059, "creation_date": 1513121482, "question_id": 47783251, "link": "https://stackoverflow.com/questions/47783251/ruby-write-hex-string-to-binary-file-by-keeping-hex-values", "title": "Ruby Write Hex String To Binary File By Keeping Hex Values", "body": "<p>I want to generate random bytes in Ruby, but I also want to insert some  constant values into specific positions of  the random bytes.</p>\n\n<pre><code>random_hex_string = SecureRandom.hex (length)\nrandom_hex_string.insert(0,\"0102\")\nrandom_hex_string.insert(30*1,\"36\")\n</code></pre>\n\n<p>So I generate random hex bytes and insert my hex values there. The problem is that I have now a string not a byte array. So when I print it:</p>\n\n<pre><code>File.open(\"file.txt\", 'w+b') do |f|\nf.write(random_hex_string)\n</code></pre>\n\n<p>It - not surprisingly - converts the hex string into binary then writes it. So my hex values are not kept. To be more clear, when I write my hex string to the file, and then I want to see the same hex values when I hex dump the file. How can I do this?  </p>\n"}, {"tags": ["ruby", "windows", "io", "stdin"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1513123235, "post_id": 47782937, "comment_id": 82528367, "body": "[Disclaimer: I didn&#39;t even look at your code.] You might want to try JRuby. Ironically, it is more compatible with Ruby than YARV (aka &quot;Ruby&quot;) itself on Windows, and more &quot;native&quot;. The reason is that YARV&#39;s implementation of I/O and process management is just a thin wrapper around POSIX, and things working different (or not at all) is actually expected and not considered a bug. JRuby OTOH <i>must</i> emulate everything anyway, by virtue of being hosted on the Java platform, and thus works consistently on <i>all</i> platforms, and tries to closely match the behavior of YARV on Linux."}, {"owner": {"reputation": 16731, "user_id": 1135819, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/UKALF.jpg?s=128&g=1", "display_name": "betabandido", "link": "https://stackoverflow.com/users/1135819/betabandido"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1513153003, "post_id": 47782937, "comment_id": 82537660, "body": "@J&#246;rgWMittag It indeed works with JRuby... So, your guess is that there would not be even an attempt to address this in YARV if reported, right?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1513158522, "post_id": 47782937, "comment_id": 82540904, "body": "It doesn&#39;t hurt to try, does it? You just need to be prepared to get &quot;<code>open3</code> depends on POSIX <code>open</code> and Windows is not POSIX, use a POSIX environment such as cygwin or Bash for Windows instead&quot; as an answer."}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 1908108, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/094648b667bcbfba58605871bba6a1b7?s=128&d=identicon&r=PG", "display_name": "dpneumo", "link": "https://stackoverflow.com/users/1908108/dpneumo"}, "edited": false, "score": 0, "creation_date": 1540052732, "post_id": 48101445, "comment_id": 92726224, "body": "This works nicely. Have used it with Vagrant to adapt bridged network to the existing environment as I move my laptop from one work setting to another. See this <a href=\"https://gist.github.com/dpneumo/04dff92ad038c79b8b70f0fbb35f1beb\" rel=\"nofollow noreferrer\">gist</a>"}], "tags": [], "owner": {"reputation": 16731, "user_id": 1135819, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/UKALF.jpg?s=128&g=1", "display_name": "betabandido", "link": "https://stackoverflow.com/users/1135819/betabandido"}, "is_accepted": true, "score": 1, "last_activity_date": 1515090535, "creation_date": 1515090535, "answer_id": 48101445, "question_id": 47782937, "link": "https://stackoverflow.com/questions/47782937/forwarding-stdin-to-a-subprocess-in-ruby-on-windows/48101445#48101445", "title": "Forwarding stdin to a subprocess in Ruby on Windows", "body": "<p>The following code snippet based on <code>IO.popen</code> seems to work. It executes a command, and it returns the command output as an array containing the output lines. Optionally, the output is written to stdout too.</p>\n\n<pre><code>def run(cmd, directory: Dir.pwd, print_output: true)\n  out = IO.popen(cmd, err: %i[child out], chdir: directory) do |io|\n    begin\n      out = ''\n      loop do\n        chunk = io.readpartial(4096)\n        print chunk if print_output\n        out += chunk\n      end\n    rescue EOFError; end\n    out\n  end\n\n  $?.exitstatus.zero? || (raise \"Error running command #{cmd}\")\n\n  out.split(\"\\n\")\n     .map { |line| line.tr(\"\\r\\n\", '') }\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 1908108, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/094648b667bcbfba58605871bba6a1b7?s=128&d=identicon&r=PG", "display_name": "dpneumo", "link": "https://stackoverflow.com/users/1908108/dpneumo"}, "is_accepted": false, "score": 0, "last_activity_date": 1540068111, "creation_date": 1540068111, "answer_id": 52909947, "question_id": 47782937, "link": "https://stackoverflow.com/questions/47782937/forwarding-stdin-to-a-subprocess-in-ruby-on-windows/52909947#52909947", "title": "Forwarding stdin to a subprocess in Ruby on Windows", "body": "<p>@betabandido\nThis works as well.</p>\n\n<pre><code>def run(cmd, directory: Dir.pwd, print_output: true)\n  out = IO.popen(cmd, err: %i[child out], chdir: directory) do |io|\n    io.readlines\n  end\n  raise \"Error running command #{cmd}\" unless $?.exitstatus.zero?\n  print out if print_output\n  out\nend\n</code></pre>\n"}], "owner": {"reputation": 16731, "user_id": 1135819, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/UKALF.jpg?s=128&g=1", "display_name": "betabandido", "link": "https://stackoverflow.com/users/1135819/betabandido"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "accepted_answer_id": 48101445, "answer_count": 2, "score": 0, "last_activity_date": 1540068111, "creation_date": 1513119501, "question_id": 47782937, "link": "https://stackoverflow.com/questions/47782937/forwarding-stdin-to-a-subprocess-in-ruby-on-windows", "title": "Forwarding stdin to a subprocess in Ruby on Windows", "body": "<p>I am developing a wrapper for <a href=\"https://www.terraform.io\" rel=\"nofollow noreferrer\">Terraform</a>, which at some point during its execution, it may request user input. So, my application must forward everything typed on its stdin to the subprocess' stdin. The following solution works on Linux, but in Windows the subprocess (Terraform) seems to never receive the input:</p>\n\n<pre><code>require 'open3'\n\ndef exec(cmd)\n  Open3.popen3(cmd) do |stdin, stdout, stderr, thread|\n    stdout_thread = Thread.new do\n      IO.copy_stream(stdout, STDOUT)\n    end\n\n    stderr_thread = Thread.new do\n      IO.copy_stream(stderr, STDERR)\n    end\n\n    stdin_thread = Thread.new do\n      IO.copy_stream(STDIN, stdin)\n    end\n\n    puts \"Return code: #{thread.value}\"\n\n    stdin_thread.join\n    stdout_thread.join\n    stderr_thread.join\n  end\nend\n\nexec('terraform destroy')\n</code></pre>\n\n<p>This solution actually works on Windows when executing some applications that require user input different than Terraform. But, the following two implementations (in Go and Python) are capable of forwarding their stdin to Terraform on Windows. So, it might be the case that my Ruby code has some issue, or perhaps Ruby's implementation for Windows has some limitation when dealing with process execution and input forwarding.</p>\n\n<p>Is anyone aware of such a limitation?</p>\n\n<p>Python example:</p>\n\n<pre><code>import subprocess\nimport sys\n\nwith subprocess.Popen(['terraform', 'destroy'],\n                      stdin=sys.stdin, stdout=sys.stdout) as proc:\n    proc.wait()\n</code></pre>\n\n<p>Go example:</p>\n\n<pre><code>package main\n\nimport (\n    \"io\"\n    \"log\"\n    \"os\"\n    \"os/exec\"\n)\n\nfunc main() {\n    cmd := exec.Command(\"terraform\", \"destroy\")\n    stdin, err := cmd.StdinPipe()\n    if err != nil { log.Fatal(err) }\n\n    stdout, err := cmd.StdoutPipe()\n    if err != nil { log.Fatal(err) }\n\n    stderr, err := cmd.StderrPipe()\n    if err != nil { log.Fatal(err) }\n\n    go func() {\n        defer stdout.Close()\n        io.Copy(os.Stdout, stdout)\n    }()\n    go func() {\n        defer stderr.Close()\n        io.Copy(os.Stderr, stderr)\n    }()\n    go func() {\n        defer stdin.Close()\n        io.Copy(stdin, os.Stdin)\n    }()\n\n    err = cmd.Run()\n    log.Printf(\"Command finished with error: %v\", err)\n}\n</code></pre>\n"}, {"tags": ["ruby", "eigenvector"], "comments": [{"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1513152469, "post_id": 47781915, "comment_id": 82537374, "body": "The result looks wrong to me too (as we can also see by doing a <code>m*m.eigen.eigenvectors[2]</code>). It would be helpful if you could submit a bug report using your example. Maybe you can find even a small matrix which yields incorrect results?"}, {"owner": {"reputation": 1446, "user_id": 9214985, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BbCIR.png?s=128&g=1", "display_name": "rwp", "link": "https://stackoverflow.com/users/9214985/rwp"}, "edited": false, "score": 1, "creation_date": 1518288574, "post_id": 47781915, "comment_id": 84447562, "body": "Could this have anything to do with the eigenvalues being complex, rather than real? Your matrix is not symmetric, so is certainly not guaranteed to have real eigenvalues. Doing the eigen-decomposition with numpy.linalg.eig() in Python, one finds that two of the eigenvalues are complex. If R&#39;s eigen method is geared towards symmetric matrices, then it would be no surprise if it struggled to correctly find any of the eigenvectors correctly."}, {"owner": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 0, "creation_date": 1527987587, "post_id": 47781915, "comment_id": 88334968, "body": "It could be the eigenvectors are not normalized, as done in Numpy. Just for the record, I tried your example with Ruby stdlib and Python&#39;s Numpy. Eigenvalues match (different precision though), but the vectors don&#39;t, even normalized (I just checked the 3rd you mention)."}, {"owner": {"reputation": 861, "user_id": 4885772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1f39850aa1c1cd4c404ac970730c901?s=128&d=identicon&r=PG", "display_name": "Th&#233;ophile", "link": "https://stackoverflow.com/users/4885772/th%c3%a9ophile"}, "reply_to_user": {"reputation": 1446, "user_id": 9214985, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BbCIR.png?s=128&g=1", "display_name": "rwp", "link": "https://stackoverflow.com/users/9214985/rwp"}, "edited": false, "score": 0, "creation_date": 1527994181, "post_id": 47781915, "comment_id": 88335913, "body": "@rwp I should have mentioned that I was constructing the matrices especially to have an eigenvalue of $1$, corresponding to an eigenvector whose entries are real and positive. This is guaranteed by the Perron-Frobenius theorem. True, the other eigenvalues are complex, but the eigenvalue of $1$ seems more important, as it has the biggest absolute value."}, {"owner": {"reputation": 861, "user_id": 4885772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1f39850aa1c1cd4c404ac970730c901?s=128&d=identicon&r=PG", "display_name": "Th&#233;ophile", "link": "https://stackoverflow.com/users/4885772/th%c3%a9ophile"}, "reply_to_user": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 0, "creation_date": 1527994623, "post_id": 47781915, "comment_id": 88335975, "body": "@EricPlaton But the vector above is a multiple of $[1,1,1,1]$, not $[7,4,4,9]$, so it isn&#39;t just a normalization problem."}, {"owner": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 0, "creation_date": 1527994797, "post_id": 47781915, "comment_id": 88335988, "body": "Yes. My comment is convoluted. Normalization addresses the \u201cexplosion\u201d. The problem is the mismatch with Numpy."}, {"owner": {"reputation": 861, "user_id": 4885772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1f39850aa1c1cd4c404ac970730c901?s=128&d=identicon&r=PG", "display_name": "Th&#233;ophile", "link": "https://stackoverflow.com/users/4885772/th%c3%a9ophile"}, "reply_to_user": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 1, "creation_date": 1527997099, "post_id": 47781915, "comment_id": 88336233, "body": "@EricPlaton Ah, I see. I recall trying this on a different computer several months ago, and it gave the correct result. I thought at the time that the problem was fixed (e.g., from using a more recent version of Ruby), but I tried installing 2.5.1 just now, and I get the same problem. Hmm."}, {"owner": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 0, "creation_date": 1527998509, "post_id": 47781915, "comment_id": 88336405, "body": "My tests were on Ruby 2.3.1."}], "answers": [{"comments": [{"owner": {"reputation": 861, "user_id": 4885772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1f39850aa1c1cd4c404ac970730c901?s=128&d=identicon&r=PG", "display_name": "Th&#233;ophile", "link": "https://stackoverflow.com/users/4885772/th%c3%a9ophile"}, "edited": false, "score": 0, "creation_date": 1614901949, "post_id": 55759791, "comment_id": 117534615, "body": "I&#39;m still troubled, but thank you for the detailed explanation. :)"}], "tags": [], "owner": {"reputation": 11603, "user_id": 234593, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8e2ee1b00d372ad8f6ed5e87385ffef5?s=128&d=identicon&r=PG", "display_name": "Kache", "link": "https://stackoverflow.com/users/234593/kache"}, "is_accepted": true, "score": 2, "last_activity_date": 1555666888, "creation_date": 1555666888, "answer_id": 55759791, "question_id": 47781915, "link": "https://stackoverflow.com/questions/47781915/floating-point-error-in-ruby-matrix-calculation/55759791#55759791", "title": "floating point error in Ruby matrix calculation", "body": "<p>No, this is not troubling. That matrix likely just doesn't work well with that particular eigenvector algorithm implementation. <a href=\"https://en.wikipedia.org/wiki/Eigenvalue_algorithm#Direct_calculation\" rel=\"nofollow noreferrer\">Efficient and stable general eigenvector computation is nontrivial</a>, after all.</p>\n\n<p>The <code>Matrix</code> library is adapted from <a href=\"https://math.nist.gov/javanumerics/jama/\" rel=\"nofollow noreferrer\">JAMA, a Java matrix package</a>, which says it does a <a href=\"https://en.wikipedia.org/wiki/Numerical_computation\" rel=\"nofollow noreferrer\">numerical computation</a> and not a <a href=\"https://en.wikipedia.org/wiki/Computer_algebra\" rel=\"nofollow noreferrer\">symbolic computation</a>:</p>\n\n<blockquote>\n  <p><strong>Not Covered.</strong> JAMA is by no means a complete linear algebra environment ... it focuses on the principle mathematical functionality required to do numerical linear algebra</p>\n</blockquote>\n\n<h1>The QR Algorithm: Numerical Computation</h1>\n\n<p>Looking at the source code for <a href=\"https://github.com/ruby/ruby/blob/v2_6_3/lib/matrix/eigenvalue_decomposition.rb\" rel=\"nofollow noreferrer\"><code>Matrix::EigenvalueDecomposition</code></a>, I've found that it names the usage of the <a href=\"https://en.wikipedia.org/wiki/QR_algorithm\" rel=\"nofollow noreferrer\">QR algorithm</a>. I don't fully understand the intricacies of the mathematics, but I think I might understand <em>why</em> this computation fails. The mechanism of computation works as stated:</p>\n\n<blockquote>\n  <p>At the k-th step (starting with k = 0), we compute the QR decomposition A<sub>k</sub>=Q<sub>k</sub>R<sub>k</sub> ...  Under certain conditions,<sup>[4]</sup> the matrices A<sub>k</sub> converge to a triangular matrix, the Schur form of A. The eigenvalues of a triangular matrix are listed on the diagonal, and the eigenvalue problem is solved.</p>\n</blockquote>\n\n<p>In \"pseudo\" Ruby, this conceptually means:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>working_matrix = orig_matrix.dup\nall_q_matrices = []\nloop do\n  q, r = working_matrix.qr_decomposition\n  all_q_matrices &lt;&lt; q\n  next_matrix = r * q\n  break if difference_between(working_matrix, next_matrix) &lt; accuracy_threshold\nend\neigenvalues = working_matrix.diagonal_values\n</code></pre>\n\n<p>For eigenvectors, it continues:</p>\n\n<blockquote>\n  <p>upon convergence, AQ = Q\u039b, where \u039b is the diagonal matrix of eigenvalues to which A converged, and where Q is a composite of all the orthogonal similarity transforms required to get there. Thus the columns of Q are the eigenvectors.</p>\n</blockquote>\n\n<p>In \"pseudo\" Ruby, continued:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>eigenvectors = all_q_matrices.inject(:*).columns\n</code></pre>\n\n<h1>Floating Point Error in Numerical Computations</h1>\n\n<p>We can see that an iteration of numerical computations are made to compute the approximate eigenvalues, and as a side-effect, a bunch of approximate <code>Q</code> matrices are collected. Then, these approximated <code>Q</code> matrices are composed together to form the eigenvectors.</p>\n\n<p>The compounding of approximations is what probably caused the wildly inaccurate results. An example of catastrophic cancellation on Math StackExchange shows a <a href=\"https://math.stackexchange.com/a/1920553\">simple quadratic computation with 400% relative error</a>. You might be able to imagine how an iterative matrix algorithm with repeated arithmetic operations could do much worse.</p>\n\n<p><strong>A Grain of Salt</strong></p>\n\n<p>Again, I don't have a deep understanding of the mathematics of the algorithm nor the implementation, so I don't know <em>precisely</em> what parts of the computation caused your specific 85110032990182200% error, but I hope you now can understand how it may have happened.</p>\n"}], "owner": {"reputation": 861, "user_id": 4885772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1f39850aa1c1cd4c404ac970730c901?s=128&d=identicon&r=PG", "display_name": "Th&#233;ophile", "link": "https://stackoverflow.com/users/4885772/th%c3%a9ophile"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 610, "favorite_count": 4, "accepted_answer_id": 55759791, "answer_count": 1, "score": 24, "last_activity_date": 1555666888, "creation_date": 1513114412, "last_edit_date": 1518310338, "question_id": 47781915, "link": "https://stackoverflow.com/questions/47781915/floating-point-error-in-ruby-matrix-calculation", "title": "floating point error in Ruby matrix calculation", "body": "<p>I'm writing some code that involves finding the eigenvectors of a given matrix, and was surprised that Ruby produces some unreasonable results in simple cases.</p>\n\n<p>For example, the following matrix has an eigenvector associated with eigenvalue 1:</p>\n\n<pre><code>&gt; m = Matrix[[0r, 1/2r, 1/2r, 1/3r],\n             [0r,  0r,  1/4r, 1/3r],\n             [0r, 1/4r,  0r,  1/3r],\n             [1r, 1/4r, 1/4r,  0r]]\n</code></pre>\n\n<p>Ruby finds the eigenvalues well enough, but the eigenvector explodes:</p>\n\n<pre><code>&gt; m.eigen.eigenvalues[2]\n=&gt; 1.0000000000000009\n\nm.eigen.eigenvectors[2]\n=&gt; Vector[5.957702309312754e+15, 5.957702309312748e+15, 5.957702309312743e+15, 5.957702309312753e+15]\n</code></pre>\n\n<p>The actual eigenvector should be (7, 4, 4, 9).</p>\n\n<p>Isn't this troubling? If Ruby can't handle tiny matrices, then how can we trust it at all? Or am I doing something wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "minitest"], "answers": [{"comments": [{"owner": {"reputation": 704, "user_id": 1208108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/940bd70b3a317123fc85322151ee0c5f?s=128&d=identicon&r=PG", "display_name": "codebee", "link": "https://stackoverflow.com/users/1208108/codebee"}, "edited": false, "score": 0, "creation_date": 1513113370, "post_id": 47781515, "comment_id": 82524694, "body": "I am using Minitest. When I tried your way, it prints this after each test: &#39;do this before all tests&#39; and does not print this at all &#39;do this before each test&#39;."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 704, "user_id": 1208108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/940bd70b3a317123fc85322151ee0c5f?s=128&d=identicon&r=PG", "display_name": "codebee", "link": "https://stackoverflow.com/users/1208108/codebee"}, "edited": false, "score": 0, "creation_date": 1513113651, "post_id": 47781515, "comment_id": 82524821, "body": "I apologize, you absolutely stated Minitest in your title and I just missed it."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 704, "user_id": 1208108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/940bd70b3a317123fc85322151ee0c5f?s=128&d=identicon&r=PG", "display_name": "codebee", "link": "https://stackoverflow.com/users/1208108/codebee"}, "edited": false, "score": 0, "creation_date": 1513113999, "post_id": 47781515, "comment_id": 82524958, "body": "As penance, I did a quick search. Did you look at <a href=\"http://ruslanledesma.com/2016/07/21/before-all-after-all-in-minitest.html\" rel=\"nofollow noreferrer\">this article</a>? It seems related to your question."}, {"owner": {"reputation": 704, "user_id": 1208108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/940bd70b3a317123fc85322151ee0c5f?s=128&d=identicon&r=PG", "display_name": "codebee", "link": "https://stackoverflow.com/users/1208108/codebee"}, "edited": false, "score": 0, "creation_date": 1513114132, "post_id": 47781515, "comment_id": 82525017, "body": "Thanks. Yes that&#39;s where I started, but they didn&#39;t have any examples with what I am trying to do, even though it seems intuitive by definition."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 1, "last_activity_date": 1513112742, "creation_date": 1513112742, "answer_id": 47781515, "question_id": 47781358, "link": "https://stackoverflow.com/questions/47781358/multiple-before-blocks-in-minitest-describe-block/47781515#47781515", "title": "Multiple &#39;before&#39; blocks in Minitest &#39;describe&#39; block", "body": "<p>This may be clumsy, but you could try:</p>\n\n<pre><code>RSpec.describe '#bunch_of_tests' do\n\n  before(:all) do\n    p 'do this before all tests'\n  end\n\n  describe \"before each\" do \n    before(:each) do\n      p 'do this before each test'\n    end\n\n    describe 'this is 1st test' do\n      it 'runs 1st test' do\n      end\n    end\n\n    describe 'this is 2nd test' do\n      it 'runs 2nd test' do\n      end\n    end\n  end\n\nend\n</code></pre>\n\n<p>Which yields:</p>\n\n<pre><code>#bunch_of_tests\n\"do this before all tests\"\n  before each\n    this is 1st test\n\"do this before each test\"\n      runs 1st test\n    this is 2nd test\n\"do this before each test\"\n      runs 2nd test\n\nFinished in 0.40184 seconds (files took 3.5 seconds to load)\n2 examples, 0 failures\n</code></pre>\n"}], "owner": {"reputation": 704, "user_id": 1208108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/940bd70b3a317123fc85322151ee0c5f?s=128&d=identicon&r=PG", "display_name": "codebee", "link": "https://stackoverflow.com/users/1208108/codebee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 301, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513113497, "creation_date": 1513112036, "last_edit_date": 1513113497, "question_id": 47781358, "link": "https://stackoverflow.com/questions/47781358/multiple-before-blocks-in-minitest-describe-block", "title": "Multiple &#39;before&#39; blocks in Minitest &#39;describe&#39; block", "body": "<p>I am trying to have two 'before' blocks under a describe block, but only the latter one runs.</p>\n\n<pre><code>describe '#bunch_of_tests' do\n\n  before(:all) do\n    p 'do this before all tests'\n  end\n\n  before(:each) do\n    p 'do this before each test'\n  end\n\ndescribe 'this is 1st test' do\n  it 'runs 1st test' do\n  end\nend\n\ndescribe 'this is 2nd test' do\n  it 'runs 2nd test' do\n  end\nend\n\nend\n</code></pre>\n\n<p>The problem is that this statement never gets printed:\n'do this before all tests'</p>\n\n<p>My expectation is that this should run once before all the tests. 'before(:each)' block is working as expected.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "carrierwave"], "comments": [{"owner": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "edited": false, "score": 0, "creation_date": 1513113437, "post_id": 47781130, "comment_id": 82524726, "body": "In our application we are creating one zip file with all files the client wants to download. Will it work for you?"}, {"owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "reply_to_user": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "edited": false, "score": 0, "creation_date": 1513114306, "post_id": 47781130, "comment_id": 82525113, "body": "That seems ideal @MrShemek. Any chance you could point me towards an example of what you&#39;re talking about or libraries that are good for that type of thing?"}], "answers": [{"tags": [], "owner": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "is_accepted": true, "score": 2, "last_activity_date": 1513115517, "creation_date": 1513115517, "answer_id": 47782137, "question_id": 47781130, "link": "https://stackoverflow.com/questions/47781130/download-multiple-files-with-carrierwave/47782137#47782137", "title": "Download multiple files with Carrierwave", "body": "<p>In our application, we are allowing clients to download multiple files as a ZIP file.</p>\n\n<h2>Example from my application</h2>\n\n<p>1) collect objects you want to ZIP</p>\n\n<pre><code>@objects_to_zip = Files.all\n</code></pre>\n\n<p>2) convert each object to a hash (not necessary but makes our life easier):</p>\n\n<pre><code>@objects_to_zip = @objects_to_zip.map(&amp;:convert_object_to_a_hash)\n\n\n#/app/models/file.rb\ndef convert_object_to_a_hash\n  {\n    name: sanitized_filename(FILE_NAME),\n    extension: 'FILE_EXTENSION',\n    content: FILE_CONTENT\n  }\nend\n\ndef sanitized_filename(file_name)\n  max_name_length = 50\n\n  Zaru.sanitize!(file_name, :padding=&gt;(255-max_name_length)).gsub(/[[:punct:]]+/, ' ').gsub(/\\p{S}/, ' ').gsub(/[[:space:]]+/, '_').downcase\nend\n</code></pre>\n\n<p>3) create an archive and send the result to the client</p>\n\n<pre><code>send_data(create_archive(@objects_to_zip), :type =&gt; 'application/zip', :filename =&gt; \"#{ZIP_FILENAME}.zip\")\n\n#app/helpers/zip_helpers.rb\nmodule ZipHelpers\n\n  def create_archive(files)\n    string_io = Zip::OutputStream.write_buffer do |zio|\n      Array(files).each do |file|\n        zio.put_next_entry(\"#{file.fetch(:name).gsub('/', '-')}.#{file.fetch(:extension)}\")\n        zio.write file.fetch(:content)\n      end\n    end\n    string_io.rewind\n    string_io.read\n  end\n\nend\n</code></pre>\n\n<p>We are using two gems (but I am not sure if both of them are required here):<br>\n- rubyzip<br>\n- zip-zip  </p>\n\n<h2>Warning</h2>\n\n<p>As far as I remember there is one problem with file names. If your file contains, for instance, Chinese characters, it will not unzip correctly on Windows machines. We solved it by removing those characters, and we added some strings (like file ID) to avoid empty filenames.</p>\n\n<p>Hope that will help you.</p>\n"}], "owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 607, "favorite_count": 0, "accepted_answer_id": 47782137, "answer_count": 1, "score": 3, "last_activity_date": 1513115517, "creation_date": 1513110989, "question_id": 47781130, "link": "https://stackoverflow.com/questions/47781130/download-multiple-files-with-carrierwave", "title": "Download multiple files with Carrierwave", "body": "<p>I've enabled multiple uploading with Carrierwave. But now I'm trying to figure out how to download all of the uploads in one bulk action. </p>\n\n<p>To be clear. I have an <code>Attachment</code> table that can have files. When I upload multiple files Carrierwave saves them just fine. </p>\n\n<p>CURRENT ATTEMPT (NOT WORKING)</p>\n\n<pre><code>&lt;div&gt;\n  &lt;%= \"#{index + 1}. Upload:\" %&gt;\n  &lt;%= link_to \"Download\", attachment.files[0].identifier, download: attachment.files[0].identifier %&gt;\n  &lt;%= attachment.files[0].identifier %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<h3>ERROR WHEN TRYING TO DOWNLOAD ONE FILE FROM THE FILES ARRAY:</h3>\n\n<pre><code>ActionController::UnknownFormat (ComplianceSubmissionsController#edit is missing a template for this request format and variant.\n\nrequest.formats: [\"text/html\"]\nrequest.variant: []):\n</code></pre>\n\n<p>This error is not the real problem I suspect. </p>\n\n<p>What I'm looking for is a way to bulk download files saved on S3 and uploaded with Carrierwave, it's been difficult to find good documentation on this as Carrierwave does not have any on this case.</p>\n"}, {"tags": ["ruby", "bitwise-and"], "comments": [{"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1513107867, "post_id": 47780351, "comment_id": 82521954, "body": "<a href=\"https://stackoverflow.com/a/2340415/525478\">stackoverflow.com/a/2340415/525478</a>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1513107877, "post_id": 47780351, "comment_id": 82521960, "body": "Hint: <code>String#to_i</code> accepts parameter."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1513171432, "post_id": 47780351, "comment_id": 82549117, "body": "What number does <code>11111111010011111111111010000001</code> represent?"}], "answers": [{"tags": [], "owner": {"reputation": 161, "user_id": 1293233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db25312c07c7c84b2ef3574f90074c95?s=128&d=identicon&r=PG", "display_name": "simplaY", "link": "https://stackoverflow.com/users/1293233/simplay"}, "is_accepted": true, "score": 4, "last_activity_date": 1513109693, "creation_date": 1513109693, "answer_id": 47780821, "question_id": 47780351, "link": "https://stackoverflow.com/questions/47780351/how-to-bitwise-and-two-bit-strings-in-ruby/47780821#47780821", "title": "How to bitwise AND two bit strings in Ruby?", "body": "<p>The following code should do what you are looking for:</p>\n\n<pre><code>str  = \"11111111010011111111111010000001\"\nstr2 = \"11000000000000000000000000000011\"\n\nresult = str.to_i(2) &amp; str2.to_i(2)\n\nresult.to_s(2)\n=&gt; \"11000000000000000000000000000001\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 3, "last_activity_date": 1513111459, "last_edit_date": 1513111459, "creation_date": 1513111054, "answer_id": 47781138, "question_id": 47780351, "link": "https://stackoverflow.com/questions/47780351/how-to-bitwise-and-two-bit-strings-in-ruby/47781138#47781138", "title": "How to bitwise AND two bit strings in Ruby?", "body": "<p>You can use <code>to_i</code> to convert from binary notation and <code>to_s</code> to convert back to it by specifying the base as an argument. 2 is binary, 8 is octal, 16 is hex.</p>\n\n<p>For example a generic solution here:</p>\n\n<pre><code>def binary_add(*items)\n  items.map { |i| i.to_i(2) }.reduce(:&amp;).to_s(2)\nend\n</code></pre>\n\n<p>Where that uses <code>map</code> to convert all the items to integers, then combines those together with <code>&amp;</code> into a singular value. That value's then converted back to a base-two string.</p>\n\n<p>Which can be called like this:</p>\n\n<pre><code>binary_add(\n  \"11111111010011111111111010000001\",\n  \"11000000000000000000000000000011\"\n)\n\n# =&gt; \"11000000000000000000000000000001\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 2, "last_activity_date": 1513156139, "last_edit_date": 1513156139, "creation_date": 1513155487, "answer_id": 47789023, "question_id": 47780351, "link": "https://stackoverflow.com/questions/47780351/how-to-bitwise-and-two-bit-strings-in-ruby/47789023#47789023", "title": "How to bitwise AND two bit strings in Ruby?", "body": "<p>Without converting to and from integer:</p>\n\n<pre><code>str.gsub('1') { str2[$~.begin(0)] }\n#=&gt; \"11000000000000000000000000000001\"\n</code></pre>\n\n<p>It replaces each <code>1</code> in <code>str</code> with the corresponding character in <code>str2</code>.</p>\n\n<p><a href=\"http://ruby-doc.org/core-2.4.2/Regexp.html#class-Regexp-label-Special+global+variables\" rel=\"nofollow noreferrer\"><code>$~</code></a> returns the match and <a href=\"http://ruby-doc.org/core-2.4.2/MatchData.html#method-i-begin\" rel=\"nofollow noreferrer\"><code>begin</code></a> its index.</p>\n"}], "owner": {"reputation": 47, "user_id": 9090602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c45da1661939260978ef0dc4bf917ad?s=128&d=identicon&r=PG&f=1", "display_name": "Kev", "link": "https://stackoverflow.com/users/9090602/kev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 0, "accepted_answer_id": 47780821, "answer_count": 3, "score": 2, "last_activity_date": 1513169037, "creation_date": 1513107710, "last_edit_date": 1513169037, "question_id": 47780351, "link": "https://stackoverflow.com/questions/47780351/how-to-bitwise-and-two-bit-strings-in-ruby", "title": "How to bitwise AND two bit strings in Ruby?", "body": "<p>The input data I have are bit strings, assumed to be a binary numbers, each 4 bytes:</p>\n\n<pre><code>str  = \"11111111010011111111111010000001\"\nstr2 = \"11000000000000000000000000000011\"\n</code></pre>\n\n<p>And I would like to combine the two strings using a bitwise AND, like so</p>\n\n<pre><code>str &amp; str2 #=&gt; \"11000000000000000000000000000001\"\n</code></pre>\n\n<p>I have tried converting both strings to integers using <code>str.to_i</code> but Ruby treats the input as base 10, rather than base 2:</p>\n\n<pre><code>str.to_i #=&gt; 11111111010011111111111010000001\n</code></pre>\n\n<p>How can I solve this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 947, "user_id": 7333505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade96347d4304c3c3e72b914f61d1792?s=128&d=identicon&r=PG&f=1", "display_name": "Ritesh Ranjan", "link": "https://stackoverflow.com/users/7333505/ritesh-ranjan"}, "edited": false, "score": 1, "creation_date": 1513143011, "post_id": 47780286, "comment_id": 82533285, "body": "Please post the params being send during the submission of the form"}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 8883284, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-xmS4vtu8uvM/AAAAAAAAAAI/AAAAAAAAAaI/LgUjMM_2s6c/photo.jpg?sz=128", "display_name": "miklki14567", "link": "https://stackoverflow.com/users/8883284/miklki14567"}, "edited": false, "score": 0, "creation_date": 1513113287, "post_id": 47780739, "comment_id": 82524651, "body": "Alright, I tried making a nested form but I&#39;m getting an error message which reads <code>undefined method </code>build&#39; for nil:NilClass` so I must have done something wrong."}, {"owner": {"reputation": 947, "user_id": 7333505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade96347d4304c3c3e72b914f61d1792?s=128&d=identicon&r=PG&f=1", "display_name": "Ritesh Ranjan", "link": "https://stackoverflow.com/users/7333505/ritesh-ranjan"}, "reply_to_user": {"reputation": 119, "user_id": 8883284, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-xmS4vtu8uvM/AAAAAAAAAAI/AAAAAAAAAaI/LgUjMM_2s6c/photo.jpg?sz=128", "display_name": "miklki14567", "link": "https://stackoverflow.com/users/8883284/miklki14567"}, "edited": false, "score": 0, "creation_date": 1513278682, "post_id": 47780739, "comment_id": 82603290, "body": "Please provide org_name or update your view after using nested form"}], "tags": [], "owner": {"reputation": 947, "user_id": 7333505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade96347d4304c3c3e72b914f61d1792?s=128&d=identicon&r=PG&f=1", "display_name": "Ritesh Ranjan", "link": "https://stackoverflow.com/users/7333505/ritesh-ranjan"}, "is_accepted": false, "score": 0, "last_activity_date": 1513405684, "last_edit_date": 1513405684, "creation_date": 1513109338, "answer_id": 47780739, "question_id": 47780286, "link": "https://stackoverflow.com/questions/47780286/cant-save-data-from-collection-select-helper-to-model/47780739#47780739", "title": "Can&#39;t save data from collection_select helper to model", "body": "<p>In organization.rb model:</p>\n\n<pre><code>class Organization &lt; ApplicationRecord\n  has_many :deals, through: :contacts\n  has_many :contacts, dependent: :destroy\n\n  def org_name\n    \"#{name}\"\n  end\nend\n</code></pre>\n\n<p>in your new.html.erb file:</p>\n\n<pre><code>&lt;%= form.fields_for :organizations do |o| %&gt;\n  &lt;%= o.collection_select(:organization_id, Organization.all,\n                          :id, :org_name,\n                          {:prompt =&gt; 'Please select the organization'}) %&gt;\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 8883284, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh3.googleusercontent.com/-xmS4vtu8uvM/AAAAAAAAAAI/AAAAAAAAAaI/LgUjMM_2s6c/photo.jpg?sz=128", "display_name": "miklki14567", "link": "https://stackoverflow.com/users/8883284/miklki14567"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1513405684, "creation_date": 1513107446, "last_edit_date": 1513278681, "question_id": 47780286, "link": "https://stackoverflow.com/questions/47780286/cant-save-data-from-collection-select-helper-to-model", "title": "Can&#39;t save data from collection_select helper to model", "body": "<p>I'm trying to save an organization to a contact model via a form using a collection_select helper but it's not saving the data to a model. I can't seem to understand why. </p>\n\n<p>I am using <strong>Rails 5.1.4</strong></p>\n\n<p>Here are my <strong>contact.rb</strong> model:</p>\n\n<pre><code>class Contact &lt; ApplicationRecord\nbelongs_to :organization\nhas_many :deals\nend\n</code></pre>\n\n<p>Here is my <strong>organization.rb</strong> model:</p>\n\n<pre><code>class Organization &lt; ApplicationRecord\nhas_many :deals, through: :contacts\nhas_many :contacts, dependent: :destroy\nend\n</code></pre>\n\n<p>Here is my <strong>schema.rb</strong>:</p>\n\n<pre><code>create_table \"contacts\", force: :cascade do |t|\nt.string \"contact_name\"\nt.integer \"organization_id\"\nt.datetime \"created_at\", null: false\nt.datetime \"updated_at\", null: false\nt.index [\"organization_id\"], name: \n\"index_contacts_on_organization_id\"\nend\n\ncreate_table \"organizations\", force: :cascade do |t|\nt.string \"org_name\"\nt.datetime \"created_at\", null: false\nt.datetime \"updated_at\", null: false\nend\n</code></pre>\n\n<p>Here is my <strong>contacts_controller.rb</strong>:</p>\n\n<pre><code>def new\n@contact = Contact.new\nend\n\ndef edit\n@contact = Contact.find(params[:id])\nend\n\ndef create\n@contact = Contact.new(contact_params)\n\nif @contact.save\nredirect_to @contact\nelse\nrender 'new'\nend\nend\n\nprivate\n\ndef contact_params\nparams.require(:contact).permit(:contact_name, :organization_id,\n                                organizations_attributes: [:org_name, \n:id])\nend \n</code></pre>\n\n<p>Here is my <strong>new.html.erb</strong> file:</p>\n\n<pre><code>&lt;h1&gt;New Contact&lt;/h1&gt;\n\n&lt;%= form_with scope: :contact, url: contacts_path, local: true do |form| %&gt;\n\n&lt;p&gt;\n&lt;%= form.label :contact_name %&gt;&lt;br&gt;\n&lt;%= form.text_field :contact_name %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n&lt;%= form.label :organization %&gt;&lt;br&gt;\n&lt;%= form.collection_select(:organization_id, Organization.all, :id, :org_name) %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n&lt;%= form.submit %&gt;\n&lt;/p&gt;\n&lt;% end %&gt;\n&lt;hr&gt;\n</code></pre>\n\n\n\n<p>Edit: I added params for my controller and schema.</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "email"], "answers": [{"tags": [], "owner": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "is_accepted": false, "score": 1, "last_activity_date": 1513107956, "creation_date": 1513107956, "answer_id": 47780416, "question_id": 47780282, "link": "https://stackoverflow.com/questions/47780282/format-html-in-plain-text-mail-format-ror/47780416#47780416", "title": "Format HTML in plain text mail format (RoR)", "body": "<p>Have you tried this <code>strip_tags</code>?</p>\n\n<p><code>strip_tags(@greeting)</code></p>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html#method-i-strip_tags\" rel=\"nofollow noreferrer\">stip_tags Documentation</a></p>\n"}], "owner": {"reputation": 47, "user_id": 6105893, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a3df7ff9bbb1b204ac3664e7bd45e0d3?s=128&d=identicon&r=PG", "display_name": "Leandro Pons Malheiros", "link": "https://stackoverflow.com/users/6105893/leandro-pons-malheiros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1513107956, "creation_date": 1513107441, "question_id": 47780282, "link": "https://stackoverflow.com/questions/47780282/format-html-in-plain-text-mail-format-ror", "title": "Format HTML in plain text mail format (RoR)", "body": "<p>I'm trying to set a html user sign in a plain text rails mail view.</p>\n\n<p>When I was using multi part, html_safe was working, but when I changed it to a single format view, it doesn't work, even on a html partial.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>send_proposals_email.text.erb -\n\n&lt;%= @greeting %&gt;,\n  ...\n&lt;%= @user.sign.html_safe %&gt;\n</code></pre>\n\n<p>And it gets me a </p>\n\n<pre><code>&lt;p&gt;Atenciosamente,&lt;/p&gt;\n\n&lt;p&gt;Leandro Pons Malheiros&lt;/p&gt;\n</code></pre>\n\n<p>Anyone knows a way to avoid spam and make this work?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 8117, "user_id": 1207687, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/cOUI4.jpg?s=128&g=1", "display_name": "Wes Foster", "link": "https://stackoverflow.com/users/1207687/wes-foster"}, "edited": false, "score": 0, "creation_date": 1513107744, "post_id": 47780144, "comment_id": 82521888, "body": "Stack Overflow is not Google. There are plenty of resources for this online. The Rails Documentation is just one of them."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1513108854, "post_id": 47780421, "comment_id": 82522512, "body": "I guess, the underlying question is why would we want to use transient accessors in active models?"}, {"owner": {"reputation": 3, "user_id": 9012967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/860a2196720da09d85a8e09dde0719b5?s=128&d=identicon&r=PG&f=1", "display_name": "Namit Srivastava", "link": "https://stackoverflow.com/users/9012967/namit-srivastava"}, "edited": false, "score": 0, "creation_date": 1513109377, "post_id": 47780421, "comment_id": 82522797, "body": "Hi Jvillian, actually I am new to ruby and programming in general. So, I just want to know reason behind this getter and setter method stuff?  Let us say we use puts &quot;Hello world&quot; to display output Hello World. So, in the same manner why we need to set and read as below mentioned manner  &gt; foo.bar = :baz  =&gt; :baz"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1513109650, "post_id": 47780421, "comment_id": 82522941, "body": "Why would you use setters and getters? That is a <i>very</i> basic question. I do not believe SO is intended to be a tutoring site. There are many resources available to you on the web. I suggest you start with those."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 0, "last_activity_date": 1513109327, "last_edit_date": 1513109327, "creation_date": 1513107980, "answer_id": 47780421, "question_id": 47780144, "link": "https://stackoverflow.com/questions/47780144/when-we-need-attr-accessor-in-our-rails-app/47780421#47780421", "title": "When we need attr_accessor in our rails app?", "body": "<p>You don't <em>need</em> <code>attr_accessor</code>. <code>attr_accessor</code> is a convenience method. It's there to save you time. If you don't care about saving time, then don't use it.</p>\n\n<p>Let's take a look.</p>\n\n<p>If you fire up your console and define a class </p>\n\n<pre><code>&gt; class Foo\n&gt;   \n&gt; end\n</code></pre>\n\n<p>And create a new <code>Foo</code> like this:</p>\n\n<pre><code>&gt; foo = Foo.new\n =&gt; #&lt;Foo:0x00000008f2b9a0&gt; \n</code></pre>\n\n<p>You'll find that foo responds to neither <code>bar=</code> (a <code>setter</code>) nor <code>bar</code> a <code>getter</code>):</p>\n\n<pre><code>&gt; foo.bar = :baz\nNoMethodError: undefined method `bar=' for #&lt;Foo:0x00000008f2b9a0&gt;\n\n&gt; foo.bar\nNoMethodError: undefined method `bar' for #&lt;Foo:0x00000008f2b9a0&gt;\n</code></pre>\n\n<p>Or, you could define <code>Foo</code> like this:</p>\n\n<pre><code>&gt; class Foo\n&gt;   \n&gt;   def bar=(val)\n&gt;     @bar = val\n&gt;   end\n&gt; \n&gt;   def bar\n&gt;     @bar\n&gt;   end\n&gt;   \n&gt; end\n\n&gt; foo = Foo.new\n =&gt; #&lt;Foo:0x00000004b6dec0&gt; \n\n&gt; foo.bar = :baz\n =&gt; :baz \n\n&gt; foo.bar\n =&gt; :baz \n</code></pre>\n\n<p>In which case, <code>foo</code> now responds to <code>bar=</code> and <code>bar</code>.</p>\n\n<p>Alternatively, you can simply do:</p>\n\n<pre><code>&gt; class Foo\n&gt;   attr_accessor :bar\n&gt;   \n&gt; end\n\n&gt; foo = Foo.new\n =&gt; #&lt;Foo:0x00000005192bc0&gt; \n\n&gt; foo.bar = :baz\n =&gt; :baz \n\n&gt; foo.bar\n =&gt; :baz\n</code></pre>\n\n<p>So, would you <em>really</em> prefer to define all your own getters and setters? Or, just use <code>attr_accessor</code>?</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 9012967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/860a2196720da09d85a8e09dde0719b5?s=128&d=identicon&r=PG&f=1", "display_name": "Namit Srivastava", "link": "https://stackoverflow.com/users/9012967/namit-srivastava"}, "edited": false, "score": 0, "creation_date": 1513145801, "post_id": 47785461, "comment_id": 82534410, "body": "Thanks alot for sharing your valuable knowledge!!!!."}, {"owner": {"reputation": 2602, "user_id": 7372188, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/52O7P.jpg?s=128&g=1", "display_name": "dandev486", "link": "https://stackoverflow.com/users/7372188/dandev486"}, "reply_to_user": {"reputation": 3, "user_id": 9012967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/860a2196720da09d85a8e09dde0719b5?s=128&d=identicon&r=PG&f=1", "display_name": "Namit Srivastava", "link": "https://stackoverflow.com/users/9012967/namit-srivastava"}, "edited": false, "score": 0, "creation_date": 1513146195, "post_id": 47785461, "comment_id": 82534589, "body": "That&#39;s allright @NamitSrivastava, if I wasn&#39;t clear in my explanation or there is still any question, please let me know! ;)"}], "tags": [], "owner": {"reputation": 2602, "user_id": 7372188, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/52O7P.jpg?s=128&g=1", "display_name": "dandev486", "link": "https://stackoverflow.com/users/7372188/dandev486"}, "is_accepted": true, "score": 1, "last_activity_date": 1513139148, "creation_date": 1513139148, "answer_id": 47785461, "question_id": 47780144, "link": "https://stackoverflow.com/questions/47780144/when-we-need-attr-accessor-in-our-rails-app/47785461#47785461", "title": "When we need attr_accessor in our rails app?", "body": "<p>Well, since you're new to programming in general as said above, here is a detailed, but yet aimed to be simple explanation.</p>\n\n<p>Ruby is one of many languages that follows the <a href=\"https://en.wikipedia.org/wiki/Object-oriented_programming\" rel=\"nofollow noreferrer\">object oriented programming</a> paradigm (OOP). So let's say that you are developing a system to manage products from a store and you want to represent these real world products in your code. You can achieve this by using a <a href=\"https://en.wikipedia.org/wiki/Class_(computer_programming)\" rel=\"nofollow noreferrer\">class</a>, which will contain <strong>actions</strong> that your real world product can perform and <strong>qualities</strong> that it has. Let's assume your product is a TV.</p>\n\n<p>The <strong>actions</strong> are defined in OOP with <a href=\"https://en.wikipedia.org/wiki/Method_(computer_programming)\" rel=\"nofollow noreferrer\">methods</a>. What can you perform with a TV? You can turn it on, turn it of, increase or decrease the volume and set the currrent channel.</p>\n\n<pre><code>Television\n|-&gt; TurnOn\n|-&gt; TurnOff\n|-&gt; IncreaseVolume\n|-&gt; DecreaseVolume\n|-&gt; SetChannel\n</code></pre>\n\n<p>The <strong>qualities</strong> are defined in OOP with <a href=\"https://en.wikipedia.org/wiki/Property_(programming)\" rel=\"nofollow noreferrer\">properties</a> and they can make each of your representations, that are called <a href=\"https://en.wikipedia.org/wiki/Instance_(computer_science)\" rel=\"nofollow noreferrer\">instances</a>, unique. What are some qualities of the TV? Its state (ON or OFF), its current channel and its current volume. Below, a possible set of TV properties.</p>\n\n<pre><code>Television\n|-&gt; State =&gt; ON\n|-&gt; Channel =&gt; 9\n|-&gt; Volume =&gt; 50\n</code></pre>\n\n<p>Awesome, right? So you have a television class, that contains some operations that it can perform and some properties that represents its current state. Let's say now that you want to use your brand new television. You need to know if it is already on or off, in which channel it is and what volume is set. Several languages implement it in several ways, but let's keep our focus on Ruby, shall we?</p>\n\n<p>A ruby class can expose its properties in three ways, with <a href=\"https://ruby-doc.org/core-2.1.1/Module.html#method-i-attr_accessor\" rel=\"nofollow noreferrer\">accessors</a>, <a href=\"https://ruby-doc.org/core-2.1.1/Module.html#method-i-attr_reader\" rel=\"nofollow noreferrer\">readers</a> and <a href=\"https://ruby-doc.org/core-2.1.1/Module.html#method-i-attr_writer\" rel=\"nofollow noreferrer\">writers</a>. With accessors, you can both <strong>read</strong> and <strong>write</strong> values, with readers you can <strong>read</strong> and with writers you can <strong>write</strong>. Why is this important anyways? In OOP you have this concept of <a href=\"https://en.wikipedia.org/wiki/Encapsulation_(computer_programming)\" rel=\"nofollow noreferrer\">encapsulation</a> where you should only expose what is needed and with the needed access, to avoid, for instance, someone to make your TV current volume jumping from 50 to 100 in a single operation, while the TV should increase it or decrease it by 1. So you should only expose to the consumer of your classes, the properties and operations in a way that doesn't hurt the way it should work (business rules).</p>\n\n<p>Take a deep look at these concepts and you'll probably be good to go and better understand ruby accessors, it's just a syntax to provide access to your object state with read and write permissions from outside of your class ;)</p>\n"}], "owner": {"reputation": 3, "user_id": 9012967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/860a2196720da09d85a8e09dde0719b5?s=128&d=identicon&r=PG&f=1", "display_name": "Namit Srivastava", "link": "https://stackoverflow.com/users/9012967/namit-srivastava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "closed_date": 1513146389, "accepted_answer_id": 47785461, "answer_count": 2, "score": -3, "last_activity_date": 1513139148, "creation_date": 1513106899, "last_edit_date": 1513107450, "question_id": 47780144, "link": "https://stackoverflow.com/questions/47780144/when-we-need-attr-accessor-in-our-rails-app", "closed_reason": "Needs more focus", "title": "When we need attr_accessor in our rails app?", "body": "<p>Can anyone please explain why we need attr_accessor in our rails application(Real scenario when we actually need it)? How it is going to helpful in our application inspite of fact that its existence is temporary? </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1513106529, "post_id": 47780025, "comment_id": 82521270, "body": "No, not a bug. <code>Array.new(4, Array.new(4,false))</code> sets each row of <code>f</code> to the <i>same</i> 4-element array from <code>Array.new(4,false)</code>. It doesn&#39;t execute <code>Array.new(4,false)</code> 4 times. So <code>f</code> is an array of 4 references to the same 4-element object."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 1, "creation_date": 1513106586, "post_id": 47780025, "comment_id": 82521304, "body": "Yes, your code has a bug."}, {"owner": {"reputation": 342, "user_id": 8521403, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VpsRu.jpg?s=128&g=1", "display_name": "AlexLuo", "link": "https://stackoverflow.com/users/8521403/alexluo"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1513106684, "post_id": 47780025, "comment_id": 82521354, "body": "@lurker hah, that&#39;s really tricky. Thank you for pointing out."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1513108064, "post_id": 47780025, "comment_id": 82522057, "body": "Your example is pretty much the exact same example as the one in the documentation, which explains this exact behavior. It has also been asked and answered numerous times already on <a href=\"https://stackoverflow.com\">Stack Overflow</a>."}], "answers": [{"tags": [], "owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "is_accepted": true, "score": 1, "last_activity_date": 1513107047, "last_edit_date": 1513107047, "creation_date": 1513106671, "answer_id": 47780098, "question_id": 47780025, "link": "https://stackoverflow.com/questions/47780025/in-ruby-is-this-a-two-dimensional-array-bug/47780098#47780098", "title": "In ruby, is this a two dimensional array bug?", "body": "<p>It is not a bug. <code>Array.new(4, Array.new(4,false))</code> creates an array of 4 elements where each element is the <em>same</em> array object determined by a single call to <code>Array.new(4, false)</code>. It does not execute <code>Array.new(4,false)</code> 4 times, once for each element of <code>f</code>. So you end up with <code>f</code> as an array of 4 references to the same object (a single 4-element array, <code>[false, false, false, false]</code>).</p>\n\n<p>If you want to have an array of 4 different 4-element arrays, there are many ways to do this in Ruby. One way is:</p>\n\n<pre><code>f = Array.new(4) { Array.new(4, false) }\n</code></pre>\n\n<p>This will execute <code>Array.new(4, false)</code> separately for each entry in your <code>Array.new(4)</code>.</p>\n\n<pre><code>2.4.0 :002 &gt;  f = Array.new(4) { Array.new(4, false) }\n =&gt; [[false, false, false, false], [false, false, false, false], [false, false, false, false], [false, false, false, false]]\n2.4.0 :003 &gt; f.each do |array|\n2.4.0 :004 &gt;   p array.inspect\n2.4.0 :005?&gt; end\n\"[false, false, false, false]\"\n\"[false, false, false, false]\"\n\"[false, false, false, false]\"\n\"[false, false, false, false]\"\n =&gt; [[false, false, false, false], [false, false, false, false], [false, false, false, false], [false, false, false, false]]\n2.4.0 :006 &gt; f[1][1] = true\n =&gt; true\n2.4.0 :007 &gt; p \"after setting f[1][1]\"\n\"after setting f[1][1]\"\n =&gt; \"after setting f[1][1]\"\n2.4.0 :008 &gt; f.each do |array|\n2.4.0 :009 &gt;   p array.inspect\n2.4.0 :010?&gt; end\n\"[false, false, false, false]\"\n\"[false, true, false, false]\"\n\"[false, false, false, false]\"\n\"[false, false, false, false]\"\n =&gt; [[false, false, false, false], [false, true, false, false], [false, false, false, false], [false, false, false, false]]\n2.4.0 :011 &gt;\n</code></pre>\n\n<p>For reference, see the Ruby documentation for <a href=\"https://docs.ruby-lang.org/en/2.4.0/Array.html#class-Array-label-Creating+Arrays\" rel=\"nofollow noreferrer\">Creating Arrays</a>.</p>\n"}], "owner": {"reputation": 342, "user_id": 8521403, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/VpsRu.jpg?s=128&g=1", "display_name": "AlexLuo", "link": "https://stackoverflow.com/users/8521403/alexluo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "closed_date": 1513108239, "accepted_answer_id": 47780098, "answer_count": 1, "score": 0, "last_activity_date": 1513107047, "creation_date": 1513106364, "question_id": 47780025, "link": "https://stackoverflow.com/questions/47780025/in-ruby-is-this-a-two-dimensional-array-bug", "closed_reason": "Duplicate", "title": "In ruby, is this a two dimensional array bug?", "body": "<p>I have a method:</p>\n\n<pre><code>def test\n    f = Array.new(4,Array.new(4,false))\n    f.each do |array|\n        p array.inspect\n    end\n    f[1][1] = true\n    p \"after setting f[1][1]\"\n    f.each do |array|\n        p array.inspect\n    end\nend\n</code></pre>\n\n<p>This is the output:</p>\n\n<pre><code>\"[false, false, false, false]\"\n\"[false, false, false, false]\"\n\"[false, false, false, false]\"\n\"[false, false, false, false]\"\n\"after setting f[1][1]\"\n\"[false, true, false, false]\"\n\"[false, true, false, false]\"\n\"[false, true, false, false]\"\n\"[false, true, false, false]\"\n</code></pre>\n\n<p>As you can see all values in col 1 became true, why could that happen??? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "devise", "actionmailer"], "owner": {"reputation": 41, "user_id": 8611220, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/v2oas.jpg?s=128&g=1", "display_name": "\u122doll\u03b9n", "link": "https://stackoverflow.com/users/8611220/%e1%88%adoll%ce%b9n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1513104137, "creation_date": 1513104137, "question_id": 47779467, "link": "https://stackoverflow.com/questions/47779467/actionmailer-with-cloud9-devise-heroku-godaddy-results-in-opentimeout", "title": "ActionMailer with Cloud9 &gt; Devise &gt; Heroku &gt; GoDaddy Results in OpenTimeout", "body": "<p>I used Cloud9 to develop my site and eventually deployed it to Heroku, then connected that to a GoDaddy domain I have. I also purchased an Office 365 email from GoDaddy.</p>\n\n<p>I'm trying to figure out how to send an automatic email after a user signs up to my site. I use the Devise gem to handle user registration. I followed the RailsCast #206 (Action Mailer in Rails) to the T and have looked at many different tutorials and forums to see if I could get any help, but to no avail. The user sign up works until there is a long delay and I eventually receive the following error:</p>\n\n<pre><code>Completed 500 Internal Server Error in 30518ms (ActiveRecord: 1.5ms)\n\nNet::OpenTimeout (execution expired):\n</code></pre>\n\n<p>Other times I have received an <code>EOFError</code>. My login information is working because I do not receive a connection error.</p>\n\n<p>Here is a snippet in my <code>user.rb</code> model:</p>\n\n<pre><code>after_create :welcome_send\n\ndef welcome_send\n  UserMailer.signup_confirmation(self).deliver\nend\n</code></pre>\n\n<p>This is <code>user_mailer.rb</code>:</p>\n\n<pre><code>class UserMailer &lt; ApplicationMailer\n  default :from =&gt; \"info@my1040academy.com\"\n\n  def signup_confirmation(user)\n    @greeting = \"Hi\"\n    @user = user\n    attachments[\"512.png\"] = File.read(\"#{Rails.root}/public/512.png\")\n    mail(:to =&gt; \"#{user.first_name} &lt;#{user.email}&gt;\", :subject =&gt; \"Registered\")\n  end\nend\n</code></pre>\n\n<p><code>setup_mail.rb</code> in <code>config/init</code>:</p>\n\n<pre><code>ActionMailer::Base.smtp_settings = {\n  :address              =&gt; \"smtp.office365.com\",\n  :port                 =&gt; 587,\n  :domain               =&gt; \"my1040academy.com\",\n  :user_name            =&gt; ENV['my full email address'],\n  :password             =&gt; ENV['my password'],\n  :authentication       =&gt; :login,\n  :enable_starttls_auto =&gt; true\n}\n\nActionMailer::Base.default_url_options[:host] = \"my1040academy.com\"\n</code></pre>\n\n<p><code>signup_confirmation.text.erb</code>:</p>\n\n<pre><code>UserMailer#signup_confirmation\n\n&lt;%= @greeting %&gt;, find me in app/views/user_mailer/signup_confirmation.text.erb\n\nWelcome, &lt;%= @user.email %&gt;.\n</code></pre>\n\n<p>This one has me stumped. Any help would be very much appreciated!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rspec-rails"], "answers": [{"comments": [{"owner": {"reputation": 3015, "user_id": 1518336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/238d1c14366d5d0dd398b088c99f7b4c?s=128&d=identicon&r=PG", "display_name": "Daniel Westendorf", "link": "https://stackoverflow.com/users/1518336/daniel-westendorf"}, "edited": false, "score": 0, "creation_date": 1513103345, "post_id": 47779031, "comment_id": 82519656, "body": "Alternatively to these options, you can create your own matcher. Here is an example. <a href=\"https://gist.github.com/danielwestendorf/84058a8b458a4f3cfe87e13bd8b9ca9c\" rel=\"nofollow noreferrer\">gist.github.com/danielwestendorf/&hellip;</a>"}, {"owner": {"reputation": 1166, "user_id": 2217750, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cKXxI.jpg?s=128&g=1", "display_name": "Darkisa", "link": "https://stackoverflow.com/users/2217750/darkisa"}, "edited": false, "score": 0, "creation_date": 1513103430, "post_id": 47779031, "comment_id": 82519691, "body": "Thanks Ursus. I actually found the problem. I didn&#39;t seed my test database with data so I had it right, just didn&#39;t set everything up right. smh."}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 11, "last_activity_date": 1513102932, "last_edit_date": 1513102932, "creation_date": 1513102421, "answer_id": 47779031, "question_id": 47778983, "link": "https://stackoverflow.com/questions/47778983/rspec-check-the-count-of-an-array/47779031#47779031", "title": "RSpec check the count of an array", "body": "<p>Try</p>\n\n<pre><code>expect(assigns(:products)).to_not be_empty\n</code></pre>\n\n<p>This works because the array responds to <code>empty?</code>. Another way could be</p>\n\n<pre><code>expect(assigns(:products).count).to be_positive\n</code></pre>\n\n<p>Because integers respond to <code>positive?</code></p>\n\n<p>While if you wanted to check an actual count</p>\n\n<pre><code>expect(assigns(:products).count).to eq 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6538, "user_id": 430418, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e92dbe16dbf6d5938bd97d561ee7dde4?s=128&d=identicon&r=PG", "display_name": "schmijos", "link": "https://stackoverflow.com/users/430418/schmijos"}, "is_accepted": false, "score": 1, "last_activity_date": 1597736079, "creation_date": 1597736079, "answer_id": 63463864, "question_id": 47778983, "link": "https://stackoverflow.com/questions/47778983/rspec-check-the-count-of-an-array/63463864#63463864", "title": "RSpec check the count of an array", "body": "<p>You could also turn it around a bit into the following:</p>\n<pre class=\"lang-rb prettyprint-override\"><code>expect(assigns(:products)).to have_attributes(count: be_positive)\n</code></pre>\n<p>This allows you to use <code>subject</code>, like this for example:</p>\n<pre class=\"lang-rb prettyprint-override\"><code>subject { assigns(:products) }\n\nit { is_expected.to have_attributes(count: be_positive) }\n</code></pre>\n"}], "owner": {"reputation": 1166, "user_id": 2217750, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cKXxI.jpg?s=128&g=1", "display_name": "Darkisa", "link": "https://stackoverflow.com/users/2217750/darkisa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8529, "favorite_count": 1, "accepted_answer_id": 47779031, "answer_count": 2, "score": 10, "last_activity_date": 1597736079, "creation_date": 1513102181, "question_id": 47778983, "link": "https://stackoverflow.com/questions/47778983/rspec-check-the-count-of-an-array", "title": "RSpec check the count of an array", "body": "<p>I am testing my controller action for practice. In my controller, I just want to get all the distinct products by name from my database:</p>\n\n<pre><code>  def shop\n    @products = Product.select('distinct on (name) *').sort_by &amp;:order\n  end\n</code></pre>\n\n<p>I've checked this manually and it works fine. Now I am setting up my test using my RSpec and I want to test that @products is an array greater than 0:</p>\n\n<pre><code>RSpec.describe PagesController, type: :controller do\n  describe 'GET #shop' do\n    it 'should get all proudcts' do\n      get :shop\n      expect(assigns(:products).count).to be &gt; 0 \n    end\n  end\nend\n</code></pre>\n\n<p>Now, I've tried several different combinations of the expect... but it keeps telling me that its either nil or 0, which I know it's not. How can I test that an array is greater 0?</p>\n"}, {"tags": ["ruby", "vagrant", "vagrantfile"], "owner": {"reputation": 481, "user_id": 285272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d630c7289108adf28753211d90952c9f?s=128&d=identicon&r=PG", "display_name": "Prof. Moriarty", "link": "https://stackoverflow.com/users/285272/prof-moriarty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1513101283, "creation_date": 1513101283, "question_id": 47778744, "link": "https://stackoverflow.com/questions/47778744/how-can-i-access-a-vagrant-config-object-as-a-string-variable-in-a-vagrantfile", "title": "How can I access a Vagrant Config object as a string variable in a Vagrantfile?", "body": "<p>A Vagrant base box sets <code>config.ssh.username</code> to a certain value. I have a <code>Vagrantfile</code> where I want to use that value in a string. If I create a string like <code>\"prefix_#{config.ssh.username}_suffix\"</code> the expansion looks like <code>prefix_\\#\\&lt;Object:0x000000010127e780\\&gt;_suffix</code>. How can I get the string value that was stored in the <code>config.ssh</code> namespace?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1513096153, "post_id": 47777228, "comment_id": 82515602, "body": "how about using a  <a href=\"http://guides.rubyonrails.org/active_record_validations.html#performing-custom-validations\" rel=\"nofollow noreferrer\">custom validator</a> and gsubbing the escaped html entities before performing the regex?"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1513096262, "post_id": 47777228, "comment_id": 82515685, "body": "Is this a rails question? If so tag it appropriately."}, {"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1513097580, "post_id": 47777228, "comment_id": 82516526, "body": "@maxpleaner How would you do this? You mean you would use gsub to replace the html characters by &lt;p&gt; before enforcing the regex ? Seems overkill.can&#39;t i just validate these html entity characters are not found by the regex?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1513097712, "post_id": 47777228, "comment_id": 82516595, "body": "I see no need for escaping characters. Doesn&#39;t <code>r = Regexp.new(&quot;&lt;p&gt;|&amp;lt;p&amp;gt;&quot;) #=&gt; &#47;&lt;p&gt;|&amp;lt;p&amp;gt;&#47;</code> work (i.e., <code>str !~ r</code>)?"}, {"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1513098534, "post_id": 47777228, "comment_id": 82517075, "body": "@CarySwoveland i just know my validate does not work , and as there is the presence of special characters so i assumed maybe but only maybe they were the cause of the failure"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1513100302, "post_id": 47777228, "comment_id": 82518035, "body": "<code>&quot;!&amp;lt;p&amp;gt;&quot; =~ &#47;\\A((?!&amp;lt;p&amp;gt;).)*\\z&#47;i #=&gt; nil</code>. Cannot reproduce. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>!"}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 1, "creation_date": 1513101004, "post_id": 47777228, "comment_id": 82518404, "body": "I think you should take a different approach using the <code>sanitize</code> helper. Insert something like <code>before_validation :sanitize_content, :on =&gt; :create</code> and then in your <code>sanitize_content</code> method use <code>ActionController::Base.helpers.sanitize(field, tags)</code> configured appropriately. Your meager attempt at preventing <code>p</code> tags is easily fooled (e.g. by whitespace <code>&lt; p&gt;</code>)"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1513101170, "post_id": 47777228, "comment_id": 82518493, "body": "^^ This. I&#39;m 95% sure you&#39;re asking the wrong question here. Trying to block HTML input via a regex validation screams of bad design; there&#39;s almost certainly a better solution to your problem."}, {"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "edited": false, "score": 0, "creation_date": 1513101393, "post_id": 47777228, "comment_id": 82518617, "body": "thanks people, will try to digest all your comments in 3 hours from now. and will answer and try to provide better ways to check/test this."}], "answers": [{"tags": [], "owner": {"reputation": 1553, "user_id": 4149820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb809f7e739416524f3c380fe8f4fe45?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/4149820/thomas"}, "is_accepted": true, "score": 2, "last_activity_date": 1513100574, "creation_date": 1513100574, "answer_id": 47778537, "question_id": 47777228, "link": "https://stackoverflow.com/questions/47777228/ruby-regexp-does-not-catch-targeted-expression/47778537#47778537", "title": "Ruby regexp does not catch targeted expression", "body": "<p>You can try to validate that a regexp is not match. You will have simplier regexp that are easier to implement :</p>\n\n<pre><code>validates :message_content, format: { without: /&lt;p&gt;/i, message: 'pb1' }\nvalidates :message_content, format: { without: /&amp;lt;p&amp;gt;/i, message: 'pb2' }\n</code></pre>\n"}], "owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 47778537, "answer_count": 1, "score": 0, "last_activity_date": 1513100574, "creation_date": 1513095935, "last_edit_date": 1513098877, "question_id": 47777228, "link": "https://stackoverflow.com/questions/47777228/ruby-regexp-does-not-catch-targeted-expression", "title": "Ruby regexp does not catch targeted expression", "body": "<p>I am using a validation to reject any string containing <code>&lt;p&gt;</code> or <code>&amp;lt;p&amp;gt;</code> (equivalent in html characters of the p html tag).</p>\n\n<p>I tried with a string that did contain it and strings with <code>&lt;p&gt;</code> tag are rejected but not those with <code>&amp;lt;p&amp;gt;</code> </p>\n\n<pre><code>validates_format_of :message_content,\n                      :with =&gt; /\\A((?!&lt;p&gt;).)*\\z/i,\n                      :message =&gt; \"pb1\"             \n\n\nvalidates_format_of :message_content,\n                      :with =&gt; /\\A((?!&amp;lt;p&amp;gt;).)*\\z/i,\n                      :message =&gt; \"pb2\"  \n</code></pre>\n\n<p>Should I escape some of the special characters of <code>!&amp;lt;p&amp;gt;</code> ,which could create issues for the regexp ? How ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "simple-form"], "answers": [{"tags": [], "owner": {"reputation": 906, "user_id": 3197490, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eSYi9.jpg?s=128&g=1", "display_name": "haffla", "link": "https://stackoverflow.com/users/3197490/haffla"}, "is_accepted": true, "score": 2, "last_activity_date": 1513092996, "creation_date": 1513092996, "answer_id": 47776259, "question_id": 47776155, "link": "https://stackoverflow.com/questions/47776155/simple-form-not-respecting-input-html/47776259#47776259", "title": "Simple Form Not Respecting Input HTML", "body": "<p>As min and max you have to pass a <code>Date</code> object.</p>\n\n<p><code>Date.today - 100.years</code></p>\n"}], "owner": {"reputation": 2417, "user_id": 343495, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/823c21aefa18ab5a917aea66cc3c0519?s=128&d=identicon&r=PG", "display_name": "Drew", "link": "https://stackoverflow.com/users/343495/drew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 47776259, "answer_count": 1, "score": 0, "last_activity_date": 1513093544, "creation_date": 1513092614, "last_edit_date": 1513093544, "question_id": 47776155, "link": "https://stackoverflow.com/questions/47776155/simple-form-not-respecting-input-html", "title": "Simple Form Not Respecting Input HTML", "body": "<p>So I have the following line:</p>\n\n<pre><code>&lt;%= f.input :birth_date, as: :date, label: \"Date of Birth\", html5: true, input_html: {min: Time.now.year - 100.year, max: Time.now} %&gt;\n</code></pre>\n\n<p>Which is generating:</p>\n\n<pre><code>&lt;input class=\"form-Field-control date required dr-FormField-control\" aria-invalid=\"true\" name=\"recommends_insurance_term_life_referral[birth_date]\" id=\"recommends_insurance_term_life_referral_birth_date\" type=\"date\"&gt;\n</code></pre>\n\n<p>Any thoughts as to that for which I had not accounted?</p>\n"}, {"tags": ["ruby", "regex", "filepath"], "comments": [{"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1513108341, "post_id": 47774918, "comment_id": 82522231, "body": "What determines the part of the path you want to keep?"}], "answers": [{"comments": [{"owner": {"reputation": 1105, "user_id": 391122, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/63c655bc5282d3f343574aef29de460a?s=128&d=identicon&r=PG", "display_name": "Jared", "link": "https://stackoverflow.com/users/391122/jared"}, "reply_to_user": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1513108175, "post_id": 47775180, "comment_id": 82522123, "body": "Nice catch on the second example.  I mixed up the two erb sampless"}], "tags": [], "owner": {"reputation": 1105, "user_id": 391122, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/63c655bc5282d3f343574aef29de460a?s=128&d=identicon&r=PG", "display_name": "Jared", "link": "https://stackoverflow.com/users/391122/jared"}, "is_accepted": true, "score": 1, "last_activity_date": 1513108199, "last_edit_date": 1513108199, "creation_date": 1513089412, "answer_id": 47775180, "question_id": 47774918, "link": "https://stackoverflow.com/questions/47774918/remove-part-of-file-path-in-ruby/47775180#47775180", "title": "Remove part of file path in Ruby", "body": "<p>Assuming you have your array of file paths in an array you could do.</p>\n\n<pre><code>file_paths.map{|path| path.gsub(/.*(\\/Redbull\\/.*)/, $1) }\n</code></pre>\n\n<p>This will replace each item with whatever is below the \"Redbull\" directory</p>\n\n<p>Alternatively if you didn't want to preprocess that list you could just put it in your display code, but that will make it less clear as to what you need to send the displaying logic.</p>\n\n<pre><code>&lt;%= var(file_list_array).map{|file| \"&lt;li&gt;#{file.gsub(/.*(\\/Redbull\\/.*)/, $1)}&lt;/li&gt;\"}.join(\"\\n\")%&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 106, "user_id": 8605251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eeaabe86032c54162c11f43848d625b?s=128&d=identicon&r=PG&f=1", "display_name": "Raga", "link": "https://stackoverflow.com/users/8605251/raga"}, "is_accepted": false, "score": 0, "last_activity_date": 1513097334, "creation_date": 1513097334, "answer_id": 47777648, "question_id": 47774918, "link": "https://stackoverflow.com/questions/47774918/remove-part-of-file-path-in-ruby/47777648#47777648", "title": "Remove part of file path in Ruby", "body": "<p>Try this</p>\n\n<pre><code>file_list_array[0].split(\"06_CPAS\")[1]\n</code></pre>\n\n<p>assuming you want to split from <code>\"06_CPAS\"</code> . You can pass it as a variable too like this</p>\n\n<pre><code>split_str = \"06_CPAS\"\nindex = 0\nfile_list_array[index].split(split_str)[1]\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9089217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53b0ba07e3e0d3004d461ccd7a6e6d07?s=128&d=identicon&r=PG&f=1", "display_name": "user9089217", "link": "https://stackoverflow.com/users/9089217/user9089217"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 47775180, "answer_count": 2, "score": 0, "last_activity_date": 1513108199, "creation_date": 1513088622, "question_id": 47774918, "link": "https://stackoverflow.com/questions/47774918/remove-part-of-file-path-in-ruby", "title": "Remove part of file path in Ruby", "body": "<p>I am are receiving  an array as a variable</p>\n\n<p>Is an example</p>\n\n<pre><code>[\"/a/b/01_Sources/02_Transferred/06_CPAS/Redbull/from_MediaHouse/Transcripts/MI201711200143.xlsx\", \"/a/b/01_Sources/02_Transferred/06_CPAS/Redbull/from_MediaHouse/Transcripts/MI201703030110.pdf\"]\n</code></pre>\n\n<p>The following statement creates this list:</p>\n\n<pre><code>&lt;%= var(file_list_array).map{|file| \"&lt;li&gt;#{File.basename(file)}&lt;/li&gt;\"}.join(\"\\n\")%&gt;\n</code></pre>\n\n<p><li>MI201711200143.xlsx</li>\n<li>MI201703030110.pdf</li></p>\n\n<p>The following statement creates this list</p>\n\n<pre><code>&lt;%= var(file_list_array).map{|file| \"&lt;li&gt;#{file}&lt;/li&gt;\"}.join(\"\\n\")%&gt;\n</code></pre>\n\n<p><li>/a/b/01_Sources/02_Transferred/06_CPAS/Redbull/from_MediaHouse/Transcripts/MI201711200143.xlsx</li></p>\n\n<p><li>/a/b/01_Sources/02_Transferred/06_CPAS/Redbull/from_MediaHouse/Transcripts/MI201703030110.pdf</li></p>\n\n<p><strong>But what I would really like:</strong></p>\n\n<p><li>/Redbull/from_MediaHouse/Transcripts/MI201711200143.xlsx</li></p>\n\n<p><li>/Redbull/from_MediaHouse/Transcripts/MI201703030110.pdf</li></p>\n\n<p>What do I need to change to get that ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1513088159, "post_id": 47774688, "comment_id": 82510387, "body": "Is <code>effectif</code> supposed to be a count of tasks?  You could just do <code>@task.users_tasks.count</code> or (if it&#39;s specific to a user) <code>@task.users_tasks.where(user: @user).count</code>"}, {"owner": {"reputation": 554, "user_id": 8066456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fcdc1b0ee11fa7ab705b178bd0a888da?s=128&d=identicon&r=PG&f=1", "display_name": "stig Garet", "link": "https://stackoverflow.com/users/8066456/stig-garet"}, "reply_to_user": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1513088255, "post_id": 47774688, "comment_id": 82510460, "body": "Thanks @SteveTurczyn bu it&#39;s a really heavy request, so I would like to avoid it"}], "answers": [{"comments": [{"owner": {"reputation": 554, "user_id": 8066456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fcdc1b0ee11fa7ab705b178bd0a888da?s=128&d=identicon&r=PG&f=1", "display_name": "stig Garet", "link": "https://stackoverflow.com/users/8066456/stig-garet"}, "edited": false, "score": 0, "creation_date": 1513090518, "post_id": 47774993, "comment_id": 82511996, "body": "Thanks for your answer @MrShemek, it looks a good solution to solve it"}], "tags": [], "owner": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "is_accepted": false, "score": 0, "last_activity_date": 1513088881, "creation_date": 1513088881, "answer_id": 47774993, "question_id": 47774688, "link": "https://stackoverflow.com/questions/47774688/verify-if-relation-was-saved-or-deleted/47774993#47774993", "title": "Verify if relation was saved or deleted", "body": "<p><code>delete_all</code> returns a number of affected rows. I think it will be enough to compare <code>@ut.count</code> with the return of <code>delete_all</code>. Simply assign those two values to variables and compare them:</p>\n\n<pre><code>@ut = UsersTask.where(task_id: @task.id).where(user_id: @user.id)\n@tasks_to_delete = @ut.size\n@deleted_tasks = @ut.delete_all\n\nif @tasks_to_delete.eql?(@deleted_tasks)\n  @task.update(effectif: (@task.effectif -= 1))\nend\n</code></pre>\n\n<p>Or, if you do not want to load <code>UsersTasks</code> into <code>@ut</code>, you can do:</p>\n\n<pre><code>users_task_number = UsersTask.count\n@ut = UsersTask.where(task_id: @task.id).where(user_id: @user.id).delete_all\nif UsersTask.count.eql?(users_task_number - @ut)\n  @task.update(effectif: (@task.effectif -= 1))\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 554, "user_id": 8066456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fcdc1b0ee11fa7ab705b178bd0a888da?s=128&d=identicon&r=PG&f=1", "display_name": "stig Garet", "link": "https://stackoverflow.com/users/8066456/stig-garet"}, "edited": false, "score": 0, "creation_date": 1513090771, "post_id": 47775579, "comment_id": 82512159, "body": "Great solution @jacquesMesnet, it&#39;s a really cool and elegant solution for my case !! Thanks"}], "tags": [], "owner": {"reputation": 487, "user_id": 7847797, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-k7pSuJNJeV4/AAAAAAAAAAI/AAAAAAAAApY/6cIE0jxiCM8/photo.jpg?sz=128", "display_name": "jacques Mesnet", "link": "https://stackoverflow.com/users/7847797/jacques-mesnet"}, "is_accepted": true, "score": 1, "last_activity_date": 1513090689, "creation_date": 1513090689, "answer_id": 47775579, "question_id": 47774688, "link": "https://stackoverflow.com/questions/47774688/verify-if-relation-was-saved-or-deleted/47775579#47775579", "title": "Verify if relation was saved or deleted", "body": "<p>You can make something like that :</p>\n\n<pre><code>respond_to do |format|\n  if @task.users.include?(@user)\n    format.js {render inline: \"location.reload();\" }\n  else\n    UsersTask.where(task_id: @task.id, user_id: @user.id).first_or_create\n    @task.update(effectif: (@task.effectif += 1))\n    format.js \n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 554, "user_id": 8066456, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/fcdc1b0ee11fa7ab705b178bd0a888da?s=128&d=identicon&r=PG&f=1", "display_name": "stig Garet", "link": "https://stackoverflow.com/users/8066456/stig-garet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 47775579, "answer_count": 2, "score": 0, "last_activity_date": 1513090689, "creation_date": 1513087877, "question_id": 47774688, "link": "https://stackoverflow.com/questions/47774688/verify-if-relation-was-saved-or-deleted", "title": "Verify if relation was saved or deleted", "body": "<p>I would like to check if a relation was saved directly into the controller.  But currently I cannot find the solution</p>\n\n<p>My code :</p>\n\n<pre><code>@ut = UsersTask.where(task_id: @task.id).where(user_id: @user.id).delete_all\nif @ut.destroyed?\n  @task.update(effectif: (@task.effectif -= 1))\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1513087108, "post_id": 47774256, "comment_id": 82509669, "body": "I guess <code>symbolize_keys</code> is only available when working with Rails. The most known way to do it is <code>hash.map { |key, value| [key.to_sym, value] }.to_h</code>"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1513087346, "post_id": 47774256, "comment_id": 82509834, "body": "Your question is unclear. Strings <i>are</i> perfectly normal keys of a hash."}, {"owner": {"reputation": 31, "user_id": 8589234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631507c7d11759891bae23d7702f7b8?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Abd&#243;n", "link": "https://stackoverflow.com/users/8589234/miguel-abd%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1513087373, "post_id": 47774256, "comment_id": 82509852, "body": "Thanks Sebastian, its works!!! :) Machine!!"}, {"owner": {"reputation": 31, "user_id": 8589234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631507c7d11759891bae23d7702f7b8?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Abd&#243;n", "link": "https://stackoverflow.com/users/8589234/miguel-abd%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1513087458, "post_id": 47774256, "comment_id": 82509904, "body": "Jorg, and how print? i tried hash[:name] but it says nil"}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 2, "creation_date": 1513087901, "post_id": 47774256, "comment_id": 82510208, "body": "You can do <code>hash[&#39;name&#39;]</code>  and that works."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1513088332, "post_id": 47774256, "comment_id": 82510505, "body": "If you want to retrieve a value from a hash, you obviously need to use the same key you used to store it."}, {"owner": {"reputation": 31, "user_id": 8589234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631507c7d11759891bae23d7702f7b8?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Abd&#243;n", "link": "https://stackoverflow.com/users/8589234/miguel-abd%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1513089994, "post_id": 47774256, "comment_id": 82511648, "body": "Thank you all, I already managed to solve my problem."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 8589234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631507c7d11759891bae23d7702f7b8?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Abd&#243;n", "link": "https://stackoverflow.com/users/8589234/miguel-abd%c3%b3n"}, "edited": false, "score": 0, "creation_date": 1513088406, "post_id": 47774798, "comment_id": 82510562, "body": "Thanks, i use 2.4.2."}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "reply_to_user": {"reputation": 31, "user_id": 8589234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631507c7d11759891bae23d7702f7b8?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Abd&#243;n", "link": "https://stackoverflow.com/users/8589234/miguel-abd%c3%b3n"}, "edited": false, "score": 1, "creation_date": 1513089625, "post_id": 47774798, "comment_id": 82511376, "body": "ETA for Ruby 2.5 is 12/25, btw"}], "tags": [], "owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "is_accepted": false, "score": 7, "last_activity_date": 1515091107, "last_edit_date": 1515091107, "creation_date": 1513088194, "answer_id": 47774798, "question_id": 47774256, "link": "https://stackoverflow.com/questions/47774256/change-hash-keys-from-string-to-symbol/47774798#47774798", "title": "Change Hash keys from String to Symbol", "body": "<p>If you have Ruby 2.5:</p>\n\n<pre><code>hash.transform_keys!(&amp;:to_sym)\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 8589234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631507c7d11759891bae23d7702f7b8?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Abd&#243;n", "link": "https://stackoverflow.com/users/8589234/miguel-abd%c3%b3n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2817, "favorite_count": 0, "closed_date": 1513283526, "answer_count": 1, "score": -2, "last_activity_date": 1515091107, "creation_date": 1513086527, "last_edit_date": 1513090020, "question_id": 47774256, "link": "https://stackoverflow.com/questions/47774256/change-hash-keys-from-string-to-symbol", "closed_reason": "Duplicate", "title": "Change Hash keys from String to Symbol", "body": "<p>I need to change the keys of a Hash, I am currently given the key as a String and I need it to be the normal key of a hash. I leave the example below.</p>\n\n<p>I have tried some methods that I found as Symbolize_keys, but they have not worked, says that the method does not exist and I use it as it is in Ruby's Apidock.</p>\n\n<p>i have this: </p>\n\n<pre><code>hash = {\"name\"=&gt;\"Jhon\",\"lastname\"=&gt;\"Doe\"}\n</code></pre>\n\n<p>and i need to convert This:</p>\n\n<pre><code>hash = {:name=&gt;\"Jhon\",:lastname=&gt;\"Doe\"}\n</code></pre>\n\n<p>Thanks Friends</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model", "tags"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1513086613, "post_id": 47774187, "comment_id": 82509350, "body": "What&#39;s the specific error? full code I mean?"}, {"owner": {"reputation": 289, "user_id": 4810811, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vXi1E0cZ7Tw/AAAAAAAAAAI/AAAAAAAAAIE/52imSQINK8Q/photo.jpg?sz=128", "display_name": "Niklas", "link": "https://stackoverflow.com/users/4810811/niklas"}, "edited": false, "score": 0, "creation_date": 1513086705, "post_id": 47774187, "comment_id": 82509400, "body": "Also post complete error message :)"}, {"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1513086721, "post_id": 47774187, "comment_id": 82509412, "body": "<code>tastingnotes</code> method returns string with comma seperated and you did <code>map</code> for a string in <code>&lt;%= raw @roast.tastingnotes.map(&amp;:name)</code>"}, {"owner": {"reputation": 1366, "user_id": 240241, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/112dd0b8d8b9af0e45fd5daca0a23401?s=128&d=identicon&r=PG", "display_name": "Simon Cooper", "link": "https://stackoverflow.com/users/240241/simon-cooper"}, "edited": false, "score": 0, "creation_date": 1513086815, "post_id": 47774187, "comment_id": 82509482, "body": "Just updated post with error from console."}], "answers": [{"comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1513087554, "post_id": 47774270, "comment_id": 82509977, "body": "This could be a comment, instead an answer."}], "tags": [], "owner": {"reputation": 289, "user_id": 4810811, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vXi1E0cZ7Tw/AAAAAAAAAAI/AAAAAAAAAIE/52imSQINK8Q/photo.jpg?sz=128", "display_name": "Niklas", "link": "https://stackoverflow.com/users/4810811/niklas"}, "is_accepted": false, "score": 1, "last_activity_date": 1513086591, "creation_date": 1513086591, "answer_id": 47774270, "question_id": 47774187, "link": "https://stackoverflow.com/questions/47774187/undefined-method-map-when-trying-to-create-tags/47774270#47774270", "title": "Undefined method &#39;map&#39; when trying to create &#39;tags&#39;", "body": "<p>You should use pluck instead.\n<a href=\"https://apidock.com/rails/ActiveRecord/Calculations/pluck\" rel=\"nofollow noreferrer\">https://apidock.com/rails/ActiveRecord/Calculations/pluck</a></p>\n"}, {"comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 2, "creation_date": 1513087664, "post_id": 47774405, "comment_id": 82510051, "body": "As @Niklas suggested, better would be to use pluck instead map."}, {"owner": {"reputation": 1366, "user_id": 240241, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/112dd0b8d8b9af0e45fd5daca0a23401?s=128&d=identicon&r=PG", "display_name": "Simon Cooper", "link": "https://stackoverflow.com/users/240241/simon-cooper"}, "edited": false, "score": 0, "creation_date": 1513089570, "post_id": 47774405, "comment_id": 82511334, "body": "@Rajarshi I now get <code>undefined method &#39;tastingnotes_path&#39;</code>"}, {"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1513135533, "post_id": 47774405, "comment_id": 82531430, "body": "Simon please check your routes.rb"}], "tags": [], "owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "is_accepted": false, "score": 2, "last_activity_date": 1513135483, "last_edit_date": 1513135483, "creation_date": 1513087022, "answer_id": 47774405, "question_id": 47774187, "link": "https://stackoverflow.com/questions/47774187/undefined-method-map-when-trying-to-create-tags/47774405#47774405", "title": "Undefined method &#39;map&#39; when trying to create &#39;tags&#39;", "body": "<p>You did</p>\n\n<pre><code> def tastingnotes\n    notes.map(&amp;:name).join(', ')\n  end\n</code></pre>\n\n<p>which return String of comma seperated like \"choco, beer\"</p>\n\n<p>Now you did map to a string in below</p>\n\n<pre><code>&lt;%= raw @roast.tastingnotes.map(&amp;:name).map { |t| link_to t, tastingnotes_path(t) }.join(', ') %&gt;\n</code></pre>\n\n<p>You can try</p>\n\n<pre><code>  def tastingnotes\n    notes.pluck(:name)\n  end\n</code></pre>\n\n<p>and</p>\n\n<pre><code>&lt;%= raw @roast.tastingnotes.map { |t| link_to t, tastingnotes_path(t) } %&gt;\n</code></pre>\n"}], "owner": {"reputation": 1366, "user_id": 240241, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/112dd0b8d8b9af0e45fd5daca0a23401?s=128&d=identicon&r=PG", "display_name": "Simon Cooper", "link": "https://stackoverflow.com/users/240241/simon-cooper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1513135483, "creation_date": 1513086303, "last_edit_date": 1513086709, "question_id": 47774187, "link": "https://stackoverflow.com/questions/47774187/undefined-method-map-when-trying-to-create-tags", "title": "Undefined method &#39;map&#39; when trying to create &#39;tags&#39;", "body": "<p>I'm repurposing this guide <a href=\"https://rubyplus.com/articles/4241-Tagging-from-Scratch-in-Rails-5\" rel=\"nofollow noreferrer\">https://rubyplus.com/articles/4241-Tagging-from-Scratch-in-Rails-5</a> to allow me to have 'tastingsnotes' as a tag on a 'roast.rb' model.</p>\n\n<p>However, I'm getting the error <code>undefined method 'map'</code> when trying to show the record in the browser.  I'm fairly sure this is down to me not mapping the tags correctly somehow.  I can see when I try to edit the record, I have the tags there.</p>\n\n<p>The logic is that I have a model called 'Roasts' I want the user to be a able to add a comma-separated list of tasting notes.  I'm therefore treating these as tags. </p>\n\n<p><strong>roast.rb</strong></p>\n\n<pre><code>class Roast &lt; ApplicationRecord\n  has_many :tastings\n  has_many :notes, through: :tastings\n\n  def self.tagged_with(name)\n    Note.find_by!(name: name).roasts\n  end\n\n  def self.note_counts\n    Note.select('notes.*, count(tastings.note_id) as count').joins(:tastings).group('tastings.note_id')\n  end\n\n  def tastingnotes\n    notes.map(&amp;:name).join(', ')\n  end\n\n  def tastingnotes=(names)\n    self.notes = names.split(',').map do |n|\n      Note.where(name: n.strip).first_or_create!\n    end\n  end\nend\n</code></pre>\n\n<p><strong>note.rb</strong></p>\n\n<pre><code>class Note &lt; ApplicationRecord\n  has_many :tastings\n  has_many :roasts, through: :tastings\nend\n</code></pre>\n\n<p><strong>tasting.rb</strong></p>\n\n<pre><code>class Tasting &lt; ApplicationRecord\n  belongs_to :note\n  belongs_to :roast\nend\n</code></pre>\n\n<p><strong>roasts/_form.html.rb</strong></p>\n\n<pre><code>//items not pasted for brevity\n      &lt;div class=\"form-group\"&gt;\n        &lt;%= form.label :tastingnotes, \"Notes (separated by commas)\", class: 'control-label' %&gt;&lt;br  /&gt;\n        &lt;%= form.text_area :tastingnotes, id: :roast_tastingnotes, class: \"form-control\" %&gt;\n      &lt;/div&gt;\n//items not pasted for brevity\n</code></pre>\n\n<p><strong>roasts/show.html.rb</strong></p>\n\n<pre><code>//items not pasted for brevity\n&lt;p&gt;\n  &lt;strong&gt;Tasting Notes&lt;/strong&gt;\n  &lt;%= raw @roast.tastingnotes.map(&amp;:name).map { |t| link_to t, tastingnotes_path(t) }.join(', ') %&gt;\n&lt;/p&gt;\n//items not pasted for brevity\n</code></pre>\n\n<p>Console error:</p>\n\n<pre><code>Completed 500 Internal Server Error in 18ms (ActiveRecord: 1.1ms)\n\n\n\nActionView::Template::Error (undefined method `map' for \"chocolate, citrus\":String\nDid you mean?  tap):\n    39:\n    40: &lt;p&gt;\n    41:   &lt;strong&gt;Tasting Notes&lt;/strong&gt;\n    42:   &lt;%= raw @roast.tastingnotes.map(&amp;:name).map { |t| link_to t, tastingnotes_path(t) }.join(', ') %&gt;\n    43: &lt;/p&gt;\n    44:\n    45:\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1495, "user_id": 4183221, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6c8c97c10914500e21d7735ca85a07db?s=128&d=identicon&r=PG&f=1", "display_name": "Ramesh Pareek", "link": "https://stackoverflow.com/users/4183221/ramesh-pareek"}, "edited": false, "score": 1, "creation_date": 1513086451, "post_id": 47774096, "comment_id": 82509256, "body": "Please read ruby documentation. This may help you though, if you know the basics. <a href=\"https://stackoverflow.com/questions/10643614/how-to-call-methods-of-an-external-class-in-ruby\" title=\"how to call methods of an external class in ruby\">stackoverflow.com/questions/10643614/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2602, "user_id": 7372188, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/52O7P.jpg?s=128&g=1", "display_name": "dandev486", "link": "https://stackoverflow.com/users/7372188/dandev486"}, "is_accepted": false, "score": 0, "last_activity_date": 1523926062, "last_edit_date": 1523926062, "creation_date": 1513135046, "answer_id": 47784979, "question_id": 47774096, "link": "https://stackoverflow.com/questions/47774096/how-to-call-on-a-function-from-an-outside-rb-file-and-assign-the-output-of-the-f/47784979#47784979", "title": "how to call on a function from an outside rb file and assign the output of the function to a variable within the main rb file?", "body": "<p>Assuming that you have an external file, let's say <strong>car.rb</strong>...</p>\n\n<pre><code>class Car\n  def initialize(id, name)\n    @id = id\n    @name = name\n  end\n\n  def show_car\n    puts \"Car ##{@id}: #{@name}\"\n  end\n\n  def get_name\n    @name\n  end\nend\n</code></pre>\n\n<p>... you can call a function of that external file like this in your, let's say, <strong>program.rb</strong> if they are in the same folder...</p>\n\n<pre><code>require('./car')\n\nc = Car.new(1, 'VW 1300')\nc.show_car\n\ncar_name = c.get_name\nputs car_name\n</code></pre>\n\n<p>... or like this if the file <strong>car.rb</strong> is in a <strong>model</strong> folder...</p>\n\n<pre><code>require('./model/car')\n\nc = Car.new(1, 'VW 1300')\nc.show_car\n\ncar_name = c.get_name\nputs car_name\n</code></pre>\n\n<p>The last line of a ruby method is always equivalent to the <em>return operation</em>, even if you don't say it explicitely. Got it? :)</p>\n"}], "owner": {"reputation": 137, "user_id": 9088996, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210197125475879/picture?type=large", "display_name": "Dari Obukhova", "link": "https://stackoverflow.com/users/9088996/dari-obukhova"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523926062, "creation_date": 1513086031, "last_edit_date": 1513135856, "question_id": 47774096, "link": "https://stackoverflow.com/questions/47774096/how-to-call-on-a-function-from-an-outside-rb-file-and-assign-the-output-of-the-f", "title": "how to call on a function from an outside rb file and assign the output of the function to a variable within the main rb file?", "body": "<pre><code>class DNATORNA\n  def self.of_dna(dna)\n    raise ArgumentError, 'Incorrect nucleotide' if dna.include? 'U'\n    dna.tr('GCTA', 'CGAU')\n  end\nend\n</code></pre>\n\n<p>I want to use this code to obtain RNA sequence from DNA sequence in other file and proceed on working with RNA sequence. </p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "ruby-on-rails-4", "jquery-ui-autocomplete"], "comments": [{"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1513088944, "post_id": 47773973, "comment_id": 82510911, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/47696204/rails-5-jquery-autocomplete\">Rails 5: Jquery autocomplete</a>"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "reply_to_user": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1513089342, "post_id": 47773973, "comment_id": 82511161, "body": "@SRack... I never got to solve this one and I  would appreciate some help. I added this question in order for it to be more new and thus more visible for potential help. Thanks!"}, {"owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "reply_to_user": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1513099820, "post_id": 47773973, "comment_id": 82517763, "body": "Anybody?......."}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1513100785, "post_id": 47773973, "comment_id": 82518290, "body": "Have you tried using a <code>before_destroy</code> callback, to remove any search suggestions that shouldn&#39;t be there post-deletion? Re marking as duplicate, I think it&#39;s frowned upon to copy / paste an exact question if you haven&#39;t received an answer, and these are usually closed - it pollutes the database. More info on this in <a href=\"https://meta.stackexchange.com/questions/7046/how-do-i-get-attention-for-one-of-my-own-questions-without-a-good-answer\">here</a>. Update the original with progress, or post a variation on the question with a little more research - that way people&#39;ll be able to help more readily :)"}], "owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 430, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513089168, "creation_date": 1513085695, "last_edit_date": 1513089168, "question_id": 47773973, "link": "https://stackoverflow.com/questions/47773973/rails-5-implement-autocomplete-according-to-database-table", "title": "Rails 5: Implement autocomplete according to database table", "body": "<p>I'm trying to implement autocomplete according to the values created inside a table.</p>\n\n<p>and this is the setup I have:</p>\n\n<pre><code>//= require jquery\n//= require rails-ujs\n//= require jquery-ui\n//= require bootstrap\n//= require_tree .\n</code></pre>\n\n<p>items.js</p>\n\n<pre><code>$(document).ready(function() {\n    $(\"#search\").autocomplete({\n        source: \"/search_suggestions\",\n        autoFocus: true,\n        select: function(event, ui) {\n            $(event.target).val(ui.item.value);\n            $('#search').closest(\"form\").submit();\n            return false;\n       }\n    });\n});\n</code></pre>\n\n<p>this is the search action inside the model items.rb</p>\n\n<pre><code>def self.search(term)\n  return where(\"0=1\") if term !~ /\\w{4}/\n  where(\"lower(title) LIKE lower(:term)\", term: \"%#{term}%\")\nend\n</code></pre>\n\n<p>after that I created a search_suggestions resource:</p>\n\n<pre><code>rails g resource search_suggestion term popularity:integer\nrails db:migrate\n</code></pre>\n\n<p>search_suggestions.rb</p>\n\n<pre><code>class SearchSuggestion &lt; ActiveRecord::Base\n\n  def self.terms_for(prefix)\n    suggestions = where(\"term like ?\", \"#{prefix}_%\")\n    suggestions.order(\"popularity desc\").limit(10).pluck(:term)\n  end\n\n\n  def self.index_terms(terms)\n    terms.each do |term|\n      where(term: term.downcase).first_or_initialize.tap do |suggestion|\n        suggestion.increment! :popularity\n        suggestion.save!\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>search_suggestions_controller.rb</p>\n\n<pre><code>def index\n  render json: SearchSuggestion.terms_for(params[:term])\nend\n</code></pre>\n\n<p>app/services/index_items_service.rb</p>\n\n<pre><code>class IndexItemsService\n  def call\n    Item.find_each do |item|\n      SearchSuggestion.index_terms([item.title].concat(item.title.split))\n    end\n    true\n  end\nend\n</code></pre>\n\n<p>and I created the following rake task in order to update the search_suggestion index according to the setup I have inside the search_suggestions.rb model:</p>\n\n<pre><code>namespace :search_suggestions do\n  desc \"Generate search suggestions from items\"\n  task :index =&gt; :environment do\n    IndexItemsService.new.call\n  end\nend\n</code></pre>\n\n<p>routes.rb</p>\n\n<pre><code>resources :search_suggestions\n</code></pre>\n\n<p>and if I enter rake <code>search_sugegstions:index</code> the rake finishes without any errors and it does update the search_suggestion table database with all current items. But if I delete an item, the deleted item still appears inside the search_suggestion table database even after I run the rake command.</p>\n\n<p>Any ideas how I can fix this error??</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "has-many-through"], "answers": [{"tags": [], "owner": {"reputation": 846, "user_id": 5805239, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/53b5c6384585bfc78c2b95b354d99a32?s=128&d=identicon&r=PG", "display_name": "Aakanksha", "link": "https://stackoverflow.com/users/5805239/aakanksha"}, "is_accepted": false, "score": 0, "last_activity_date": 1513084276, "creation_date": 1513084276, "answer_id": 47773529, "question_id": 47773413, "link": "https://stackoverflow.com/questions/47773413/activerecordhasmanythroughordererror-for-the-has-many-through-association/47773529#47773529", "title": "ActiveRecord::HasManyThroughOrderError for the has many through association", "body": "<p>There's a typo in your association:</p>\n\n<p>In <strong><code>role.rb</code></strong>, try replacing</p>\n\n<p><code>has_many :profile, through: :profile_roles</code> with</p>\n\n<p><code>has_many :profiles, through: :profile_roles</code> in </p>\n\n<p>Does this work now?</p>\n"}, {"comments": [{"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1513098194, "post_id": 47773531, "comment_id": 82516889, "body": "This do the job @rohit?"}], "tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": false, "score": 0, "last_activity_date": 1513084277, "creation_date": 1513084277, "answer_id": 47773531, "question_id": 47773413, "link": "https://stackoverflow.com/questions/47773413/activerecordhasmanythroughordererror-for-the-has-many-through-association/47773531#47773531", "title": "ActiveRecord::HasManyThroughOrderError for the has many through association", "body": "<p>It's not just a typo is it?</p>\n\n<p><code>has_many :profile, through: :profile_roles</code></p>\n\n<p><code>:profile</code> should be <code>:profiles</code> I think?</p>\n"}], "owner": {"reputation": 671, "user_id": 3445936, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cd8z6.jpg?s=128&g=1", "display_name": "Rohit Lingayat", "link": "https://stackoverflow.com/users/3445936/rohit-lingayat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 254, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1513084844, "creation_date": 1513083951, "last_edit_date": 1513084844, "question_id": 47773413, "link": "https://stackoverflow.com/questions/47773413/activerecordhasmanythroughordererror-for-the-has-many-through-association", "title": "ActiveRecord::HasManyThroughOrderError for the has many through association", "body": "<p>We are upgrading the Rails version from 5.0.6 to 5.1.4</p>\n\n<p>I have the following code :</p>\n\n<pre><code>class Profile &lt; ApplicationRecord\n  simple_roles\n  has_many :profile_roles\n  has_many :roles, through: :profile_roles\nend\n\nclass ProfileRole &lt; ApplicationRecord\n  belongs_to :role\n  belongs_to :profile\nend\n\nclass Role &lt; ApplicationRecord\n  has_many :profile_roles\n  has_many :profile, through: :profile_roles\nend\n</code></pre>\n\n<p>I got the error while doing the <code>Profile.first.roles</code> .</p>\n\n<p><code>ActiveRecord::HasManyThroughOrderError: Cannot have a has_many :through association 'Profile#roles' which goes through 'Profile#user_roles' before the through association is defined.</code></p>\n\n<p>can anyone suggest me any solution for this.</p>\n"}, {"tags": ["arrays", "ruby", "string", "size"], "comments": [{"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1513084352, "post_id": 47773199, "comment_id": 82507818, "body": "1M character bytes (<code>&quot;a&quot; * 10**6</code>) or actually used memory?"}, {"owner": {"reputation": 41, "user_id": 8726428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ea1a976192ce1f9d8fa6bff8661faee?s=128&d=identicon&r=PG&f=1", "display_name": "Avi", "link": "https://stackoverflow.com/users/8726428/avi"}, "reply_to_user": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1513084656, "post_id": 47773199, "comment_id": 82508045, "body": "Lets say i want to send data as a string message to a server to do some testing. I want to be able to send data of 1 MB and 10MB size. So one character is 1 byte?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1513085553, "post_id": 47773199, "comment_id": 82508667, "body": "No, there is no guarantee that one character is one byte. Ruby Implementations are free to implement strings however they wish. Note also that for strings encoded in, say, UTF-32 or UTF-16, character will typically be <i>larger</i> than a byte."}, {"owner": {"reputation": 41, "user_id": 8726428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ea1a976192ce1f9d8fa6bff8661faee?s=128&d=identicon&r=PG&f=1", "display_name": "Avi", "link": "https://stackoverflow.com/users/8726428/avi"}, "edited": false, "score": 2, "creation_date": 1513085827, "post_id": 47773199, "comment_id": 82508858, "body": "Hm ok, however, &quot;ok&quot;.bytesize =&gt; 2 So this means that it is still not 2 bytes?"}], "answers": [{"tags": [], "owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "is_accepted": false, "score": 2, "last_activity_date": 1513087695, "last_edit_date": 1513087695, "creation_date": 1513085073, "answer_id": 47773770, "question_id": 47773199, "link": "https://stackoverflow.com/questions/47773199/ruby-string-size-in-mb/47773770#47773770", "title": "Ruby string size in MB", "body": "<p>To create a million-character string:</p>\n\n<pre><code>\"a\" * 10**6\n</code></pre>\n\n<p>If you want it to read well and are using Rails or don't mind requiring <code>active_support/core_ext</code> then you can do the following:</p>\n\n<pre><code>\"a\" * 1.megabyte\n\"a\" * 10.megabytes\n</code></pre>\n\n<p>This uses the traditional definition of megabyte (power of 2 instead of 10).</p>\n\n<p>Note that this is assuming you're sending ASCII characters to a service, not trying to estimate how Ruby stores them.</p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 2, "last_activity_date": 1513085420, "creation_date": 1513085420, "answer_id": 47773876, "question_id": 47773199, "link": "https://stackoverflow.com/questions/47773199/ruby-string-size-in-mb/47773876#47773876", "title": "Ruby string size in MB", "body": "<p>This is not possible. The Ruby Language Specification only specifies the <em>behavior</em> of strings, not how they are stored. It is perfectly legal, for example, for an implementation to compress strings (in which case the size of the string in memory will be smaller than you think), to de-duplicate them (in which case the size will be 0). Rubinius, for example, stores strings as <em>ropes</em>, as far as I know, which means that parts of strings may be shared with parts of other strings, so the notion of \"size\" isn't even well-defined in that case.</p>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 717804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03e045053520969398da6fc0992812e8?s=128&d=identicon&r=PG", "display_name": "user717804", "link": "https://stackoverflow.com/users/717804/user717804"}, "is_accepted": false, "score": 0, "last_activity_date": 1567111866, "creation_date": 1567111866, "answer_id": 57717586, "question_id": 47773199, "link": "https://stackoverflow.com/questions/47773199/ruby-string-size-in-mb/57717586#57717586", "title": "Ruby string size in MB", "body": "<p>You can set the size of the internal String buffer these days with the <code>capacity:</code> keyword argument. It's great if you know the size of a String up front, since you'll then not need reallocs as you shovel on repeatedly.</p>\n\n<pre><code>String.new(capacity: 10**6)\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 8726428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ea1a976192ce1f9d8fa6bff8661faee?s=128&d=identicon&r=PG&f=1", "display_name": "Avi", "link": "https://stackoverflow.com/users/8726428/avi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1691, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1567111866, "creation_date": 1513083336, "question_id": 47773199, "link": "https://stackoverflow.com/questions/47773199/ruby-string-size-in-mb", "title": "Ruby string size in MB", "body": "<p>This is probably a simple question. However I am simply wondering how to I create a string or array in ruby so that I know that it is 1MB large. Or any size for that matter.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "simple-form"], "answers": [{"tags": [], "owner": {"reputation": 351, "user_id": 5583496, "user_type": "registered", "profile_image": "https://graph.facebook.com/952848168094244/picture?type=large", "display_name": "Dima I. Belinski", "link": "https://stackoverflow.com/users/5583496/dima-i-belinski"}, "is_accepted": false, "score": 1, "last_activity_date": 1513082929, "last_edit_date": 1513082929, "creation_date": 1513082367, "answer_id": 47772894, "question_id": 47772560, "link": "https://stackoverflow.com/questions/47772560/allow-updating-an-attribute-of-a-user-model-only-once/47772894#47772894", "title": "Allow updating an attribute of a User model only once", "body": "<p>Add new column to User  like :edited</p>\n\n<pre><code>def change\n  add_column :users, :eited, :boolean, default: false\nend\n</code></pre>\n\n<p>In your model User add calback after_update</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  after_update :set_edited!\n  before_update :check_if_edited!\n\n  def is_edited?\n    edited?\n  end\n\n  private\n\n  def check_if_edited!\n    # there you can set the error message or what you want\n    errors.add(:base, :invalid, message: \"Your message\")) if edited?\n  end\n\n  def set_edited!\n    transaction do\n      self.edited = true\n      self.save!\n    end\n  end\nend\n</code></pre>\n\n<p>In your user controller add restriction to update user if is_edited?</p>\n\n<pre><code>def update\n  if current_user.is_edited?\n    // preform action\n  end\nend\n</code></pre>\n\n<p>P.S. migrate logic to assign attributes to model User</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  after_create :assign_attributes\n\n  private\n\n  def assign_attributes\n    transaction do\n      self.password = SecureRandom.base64()\n      name_array = name.split(' ')\n      self.username = nameArray[0][0].downcase + nameArray[-1][0..6].downcase\n     self.save!\n    end\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1513082793, "post_id": 47772896, "comment_id": 82506812, "body": "Unless there are other things that can update <code>.updated_at</code> on the User record."}], "tags": [], "owner": {"reputation": 947, "user_id": 7333505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade96347d4304c3c3e72b914f61d1792?s=128&d=identicon&r=PG&f=1", "display_name": "Ritesh Ranjan", "link": "https://stackoverflow.com/users/7333505/ritesh-ranjan"}, "is_accepted": false, "score": 0, "last_activity_date": 1513082377, "creation_date": 1513082377, "answer_id": 47772896, "question_id": 47772560, "link": "https://stackoverflow.com/questions/47772560/allow-updating-an-attribute-of-a-user-model-only-once/47772896#47772896", "title": "Allow updating an attribute of a User model only once", "body": "<p>According to me the best way would be to use call_back in user model:</p>\n\n<pre><code>before_update{|user|\n  user.write_user_name_changed unless user.created_at == user.updated_at\n}\n\n\n\n def write_user_name_changed\n    self.user_name_changed = params[:username]\n    true\n  end\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 8007673, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/dae64d77b3f65090e78d28e5597d16ae?s=128&d=identicon&r=PG", "display_name": "Chris Catley", "link": "https://stackoverflow.com/users/8007673/chris-catley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1513082929, "creation_date": 1513081374, "question_id": 47772560, "link": "https://stackoverflow.com/questions/47772560/allow-updating-an-attribute-of-a-user-model-only-once", "title": "Allow updating an attribute of a User model only once", "body": "<p>An admin account creates a user account, this automatically generates a username determined by the user's first and surname.\nOnce the username is created I want the user to be able to update it only once - Note: This can be at any time or after multiple logins, but once the username has been changed once it needs to be set in stone.</p>\n\n<p>Using Rails and simple_form. The edit form is below.</p>\n\n<pre><code>= simple_form_for(current_user) do |f|\n  = f.error_notification\n  .form-inputs\n    = f.input :name, required: true, label: 'Name'\n    = f.input :username, required: true\n    = f.input :email, required: true\n    = f.input :password, required: true, placeholder: (\"#{@minimum_password_length} characters minimum\" if @minimum_password_length)\n    = f.input :password_confirmation, required: true\n\n\n  .form-actions\n    = f.button :submit, \"Update Profile\", class: 'btn btn-primary btn-block btn-lg'\n</code></pre>\n\n<p>Admin/Users controller.</p>\n\n<pre><code>  def create\n    @user = User.new(user_params)\n    @user.password = SecureRandom.base64()\n    nameArray = @user.name.split(' ')\n    @user.username = nameArray[0][0].downcase + nameArray[-1][0..6].downcase\n    respond_to do |format|\n      if @user.save\n        @user.send_reset_password_instructions\n        format.html do\n          redirect_to [:admin, @user],\n          notice: \"#{@user} was successfully created. A confirmation email was sent to: #{@user.email}\"\n        end\n      else\n        format.html do\n          flash[:alert] = \"User #{@user} already exists, or you have not filled in all of the required fields.\"  \n          render :new\n        end\n      end\n    end\n  end\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1513081119, "post_id": 47772412, "comment_id": 82505699, "body": "For non symbol keys, you must use <code>=&gt;</code>. See <a href=\"https://stackoverflow.com/a/10004344/5025116\">mu&#39;s</a> answer."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1513081331, "post_id": 47772412, "comment_id": 82505833, "body": "<i>&quot;my program works fine with this hash&quot;</i> \u2013 despite the missing commas?"}, {"owner": {"reputation": 51, "user_id": 8790733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vLmYk.jpg?s=128&g=1", "display_name": "Tiago Mateus", "link": "https://stackoverflow.com/users/8790733/tiago-mateus"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1513081609, "post_id": 47772412, "comment_id": 82506014, "body": "@Stefan Sorry, I forgot to write the commas here, but I have them in my code xD"}], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 2, "last_activity_date": 1513085008, "last_edit_date": 1513085008, "creation_date": 1513081216, "answer_id": 47772495, "question_id": 47772412, "link": "https://stackoverflow.com/questions/47772412/no-implicit-conversion-of-nil-into-string-when-using-hash-without/47772495#47772495", "title": "no implicit conversion of nil into String when using hash without =&gt;", "body": "<p>In the latter your keys are saved as symbols. So you should refer to them as:</p>\n\n<pre><code>hash[:keyone]\n</code></pre>\n\n<p>And if symbols are just fine, this is even better</p>\n\n<pre><code>hash = {\n  keyone: 'valueone',\n  keytwo: 'valuetwo',\n  keythree: 'valuethree'\n}\n</code></pre>\n\n<p>But, if you need string keys, you have to stick with the \"old\" syntax</p>\n\n<pre><code>hash = {\n  'keyone' =&gt; 'valueone',\n  'keytwo' =&gt; 'valuetwo',\n  'keythree' =&gt; 'valuethree'\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "is_accepted": false, "score": 0, "last_activity_date": 1513081297, "creation_date": 1513081297, "answer_id": 47772529, "question_id": 47772412, "link": "https://stackoverflow.com/questions/47772412/no-implicit-conversion-of-nil-into-string-when-using-hash-without/47772529#47772529", "title": "no implicit conversion of nil into String when using hash without =&gt;", "body": "<p>The <a href=\"https://ruby-doc.org/core-2.4.2/doc/syntax/literals_rdoc.html#label-Hashes\" rel=\"nofollow noreferrer\">new notation</a> uses symbols for keys:</p>\n\n<pre><code>hash = {\n    keyone: 'valueone',\n    keytwo: 'valuetwo',\n    keythree: 'valuethree'\n}\nputs hash\n# {:keyone=&gt;\"valueone\", :keytwo=&gt;\"valuetwo\", :keythree=&gt;\"valuethree\"}\n</code></pre>\n\n<p>Your code also misses the commas between the items.</p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 2, "last_activity_date": 1513082191, "creation_date": 1513082191, "answer_id": 47772837, "question_id": 47772412, "link": "https://stackoverflow.com/questions/47772412/no-implicit-conversion-of-nil-into-string-when-using-hash-without/47772837#47772837", "title": "no implicit conversion of nil into String when using hash without =&gt;", "body": "<blockquote>\n  <p>I only changed the hash notation.</p>\n</blockquote>\n\n<p>No, you didn't. You also changed the type of the key objects from <code>String</code>s to <code>Symbol</code>s.</p>\n\n<pre><code>{ 'key': 'value' }\n</code></pre>\n\n<p>is <em>not</em> equivalent to </p>\n\n<pre><code>{ 'key' =&gt; 'value' }\n</code></pre>\n\n<p>it is equivalent to </p>\n\n<pre><code>{ :key =&gt; 'value' }\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 8790733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vLmYk.jpg?s=128&g=1", "display_name": "Tiago Mateus", "link": "https://stackoverflow.com/users/8790733/tiago-mateus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1744, "favorite_count": 0, "accepted_answer_id": 47772495, "answer_count": 3, "score": 0, "last_activity_date": 1513085008, "creation_date": 1513080964, "last_edit_date": 1513081651, "question_id": 47772412, "link": "https://stackoverflow.com/questions/47772412/no-implicit-conversion-of-nil-into-string-when-using-hash-without", "title": "no implicit conversion of nil into String when using hash without =&gt;", "body": "<p>\nmy program works fine with this hash\n</p>\n\n<pre><code>hash = \n    {\n    'keyone'=&gt; 'valueone',\n    'keytwo'=&gt; 'valuetwo',\n    'keythree'=&gt; 'valuethree'\n    }\n</code></pre>\n\n<p>\nbut someone pointed out the this notation is old and that now I should use:</p>\n\n<pre><code>  hash = \n        {\n        'keyone': 'valueone',\n        'keytwo': 'valuetwo',\n        'keythree': 'valuethree'\n        }\n</code></pre>\n\n\n\n<p>I get this error:</p>\n\n<pre><code>no implicit conversion of nil into String (TypeError)\n</code></pre>\n\n<p>I only changed the hash notation.\nCan someone explain what is happening?</p>\n"}, {"tags": ["ruby", "chef-infra", "chef-recipe"], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 9082786, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1faa8c4bf5ad32c93b92e5ee4e0e8fe2?s=128&d=identicon&r=PG&f=1", "display_name": "Akash Sarpate", "link": "https://stackoverflow.com/users/9082786/akash-sarpate"}, "edited": false, "score": 0, "creation_date": 1513146711, "post_id": 47780370, "comment_id": 82534797, "body": "Sorry i am new to Ruby"}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 59, "user_id": 9082786, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1faa8c4bf5ad32c93b92e5ee4e0e8fe2?s=128&d=identicon&r=PG&f=1", "display_name": "Akash Sarpate", "link": "https://stackoverflow.com/users/9082786/akash-sarpate"}, "edited": false, "score": 0, "creation_date": 1513152813, "post_id": 47780370, "comment_id": 82537567, "body": "That&#39;s totally okay :) It feels a little more aesthetically pleasing to only run the volume list once but when getting started I would stick to the &quot;simple and works in all cases&quot; method, you can refactor it in the future as you level-up your Ruby skills."}, {"owner": {"reputation": 59, "user_id": 9082786, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1faa8c4bf5ad32c93b92e5ee4e0e8fe2?s=128&d=identicon&r=PG&f=1", "display_name": "Akash Sarpate", "link": "https://stackoverflow.com/users/9082786/akash-sarpate"}, "edited": false, "score": 0, "creation_date": 1513164011, "post_id": 47780370, "comment_id": 82544529, "body": "I know we can copy-paste getter code into this recipe but powershell recipe will run on remote server where values for  bkp_id = List_volume_attached_acc.list_volume_acc will not as it&#39;s dependent libraries are not present. so my getter recipe runs on chef server and powershell will run on client machine. i want to take values from 1st script and it should assign in 2nd script which will run on client machine"}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 59, "user_id": 9082786, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1faa8c4bf5ad32c93b92e5ee4e0e8fe2?s=128&d=identicon&r=PG&f=1", "display_name": "Akash Sarpate", "link": "https://stackoverflow.com/users/9082786/akash-sarpate"}, "edited": false, "score": 0, "creation_date": 1513190975, "post_id": 47780370, "comment_id": 82561439, "body": "That is not something Chef can do."}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 0, "last_activity_date": 1513107764, "creation_date": 1513107764, "answer_id": 47780370, "question_id": 47772316, "link": "https://stackoverflow.com/questions/47772316/how-to-assign-variable-value-to-custom-node-attribute-and-use-this-value-in-anot/47780370#47780370", "title": "How to assign variable value to custom node attribute and use this value in another recipe", "body": "<p>Given you don't seem super comfortable with complex Ruby coding, I would just copy-paste the getter code in to the other recipe too. It's pretty small and doesn't seem likely to change often so duplicating the code is probably easier than working out how to use <code>node.run_state</code>.</p>\n"}], "owner": {"reputation": 59, "user_id": 9082786, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1faa8c4bf5ad32c93b92e5ee4e0e8fe2?s=128&d=identicon&r=PG&f=1", "display_name": "Akash Sarpate", "link": "https://stackoverflow.com/users/9082786/akash-sarpate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 258, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1513107764, "creation_date": 1513080624, "question_id": 47772316, "link": "https://stackoverflow.com/questions/47772316/how-to-assign-variable-value-to-custom-node-attribute-and-use-this-value-in-anot", "title": "How to assign variable value to custom node attribute and use this value in another recipe", "body": "<p>I have ids and iq:</p>\n\n<pre><code> bkp_id = List_volume_attached_acc.list_volume_acc('ocid1.instance.oc1.iad.adlad')\nids = bkp_id.map(&amp;:ipv4)\niq = bkp_id.map(&amp;:iqn)\nnode['ids'] = ids\n</code></pre>\n\n<p>I have to use them in another recipe (powershell script which will run on chef client). It is like this:</p>\n\n<pre><code>powershell_script \"run-isci\" do\ncode &lt;&lt;-EOH\nSet-Service -Name msiscsi -StartupType Automatic\nStart-Service msiscsi\nNew-IscsiTargetPortal -TargetPortalAddress #{node['iscsi']['ids']}\nConnect-IscsiTarget -NodeAddress #{node['iscsi']['iq']} -TargetPortalAddress #{node['iscsi']['ids']} -IsPersistent $True\n\nEOH\nend\n</code></pre>\n\n<p>How can I assign values to ids and iq as node attributes so that I can use them in the second recipe?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rhel"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1513078152, "post_id": 47771357, "comment_id": 82503814, "body": "Try to install the respective <code>-devel</code> library, should be smth like <code>sudo yum install libopenssl-devel</code>."}, {"owner": {"reputation": 13, "user_id": 6710799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29b832b824a9b069a5e65432b813f33d?s=128&d=identicon&r=PG&f=1", "display_name": "Subhojit Bhowmick", "link": "https://stackoverflow.com/users/6710799/subhojit-bhowmick"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1513079615, "post_id": 47771357, "comment_id": 82504703, "body": "There were no available packages listed for <code>devel</code> for OpenSSL 1.0.2 in my system. Wasn&#39;t able to find any online also for RHEL 7.3"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1513079729, "post_id": 47771357, "comment_id": 82504775, "body": "That\u2019s kinda surprising, since <code>rpmfind</code> lists a lot <a href=\"http://rpmfind.net/linux/rpm2html/search.php?query=openssl-devel\" rel=\"nofollow noreferrer\">rpmfind.net/linux/rpm2html/search.php?query=openssl-devel</a>."}, {"owner": {"reputation": 13, "user_id": 6710799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29b832b824a9b069a5e65432b813f33d?s=128&d=identicon&r=PG&f=1", "display_name": "Subhojit Bhowmick", "link": "https://stackoverflow.com/users/6710799/subhojit-bhowmick"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1513080863, "post_id": 47771357, "comment_id": 82505527, "body": "Awesome, thanks a lot. That worked smoothly. I just installed the appropriate <code>devel</code> for the fedora version instead of the one for RHEL 7.3 and it fine after that. Thanks so much for the help."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1513081235, "post_id": 47771357, "comment_id": 82505760, "body": "Welcome. If you are running the redhat distro constantly, I would suggest you file a bug in their bugtracker. This library should be included."}], "owner": {"reputation": 13, "user_id": 6710799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29b832b824a9b069a5e65432b813f33d?s=128&d=identicon&r=PG&f=1", "display_name": "Subhojit Bhowmick", "link": "https://stackoverflow.com/users/6710799/subhojit-bhowmick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 402, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513077540, "creation_date": 1513077540, "question_id": 47771357, "link": "https://stackoverflow.com/questions/47771357/installing-rails-5-1-4-on-rhel-7-3", "title": "Installing Rails 5.1.4 on RHEL 7.3", "body": "<p>I am trying to install Rails 5.1.4 on a RHEL 7.3 server. Ruby version 2.4.2 is installed on the node along with OpenSSL 1.0.2 .</p>\n\n<p>While install rails I am getting the below error.</p>\n\n<pre><code># gem install rails\nError loading RubyGems plugin \"/usr/local/rvm/gems/ruby-\n2.4.2@global/gems/executable-hooks-1.3.2/lib/rubygems_plugin.rb\": \n/lib64/libcrypto.so.10: version `OPENSSL_1.0.2' not found (required by \n/usr/local/rvm/rubies/ruby-2.4.2/lib/ruby/2.4.0/x86_64-linux/openssl.so) - \n/usr/local/rvm/rubies/ruby-2.4.2/lib/ruby/2.4.0/x86_64-linux/openssl.so (LoadError)\nError loading RubyGems plugin \"/usr/local/rvm/gems/ruby-\n2.4.2@global/gems/gem-wrappers-1.3.2/lib/rubygems_plugin.rb\": \n/lib64/libcrypto.so.10: version `OPENSSL_1.0.2' not found (required by \n/usr/local/rvm/rubies/ruby-2.4.2/lib/ruby/2.4.0/x86_64-linux/openssl.so) - \n/usr/local/rvm/rubies/ruby-2.4.2/lib/ruby/2.4.0/x86_64-linux/openssl.so (LoadError)\nERROR:  Loading command: install (LoadError)\n/lib64/libcrypto.so.10: version `OPENSSL_1.0.2' not found (required by /usr/local/rvm/rubies/ruby-2.4.2/lib/ruby/2.4.0/x86_64-linux/openssl.so) - /usr/local/rvm/rubies/ruby-2.4.2/lib/ruby/2.4.0/x86_64-linux/openssl.so\nERROR:  While executing gem ... (NoMethodError)\nundefined method `invoke_with_build_args' for nil:NilClass\n#\n\n\n# rvm list\nrvm rubies\n* ruby-2.4.1 [ x86_64 ]\n=&gt; ruby-2.4.2 [ x86_64 ]\n# =&gt; - current\n# =* - current &amp;&amp; default\n#  * - default\n\n# openssl version\nOpenSSL 1.0.2n  7 Dec 2017\n</code></pre>\n\n<p>I have updated the OpenSSL version to try to fix it but the error did not change.</p>\n\n<p>Also updated to Ruby 2.4.2.</p>\n\n<p>Any help would be appreciated.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby", "selenium-chromedriver", "watir"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user844705"}, "edited": false, "score": 0, "creation_date": 1513076483, "post_id": 47770904, "comment_id": 82502820, "body": "I get a DNS error for www.somewebsite.com. Are you sure that the actual url you are using is not timing out?"}, {"owner": {"reputation": 71, "user_id": 9071718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8409ac71758a2669b7452db1ff8d7e77?s=128&d=identicon&r=PG&f=1", "display_name": "jp2017", "link": "https://stackoverflow.com/users/9071718/jp2017"}, "edited": false, "score": 0, "creation_date": 1513085775, "post_id": 47770904, "comment_id": 82508823, "body": "Sorry I cannot share the website url."}, {"owner": {"reputation": 71, "user_id": 9071718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8409ac71758a2669b7452db1ff8d7e77?s=128&d=identicon&r=PG&f=1", "display_name": "jp2017", "link": "https://stackoverflow.com/users/9071718/jp2017"}, "edited": false, "score": 0, "creation_date": 1513086632, "post_id": 47770904, "comment_id": 82509362, "body": "I&#39;m getting the same error message even with www.google.com"}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 2, "creation_date": 1513087083, "post_id": 47770904, "comment_id": 82509654, "body": "First, remove watir-webdriver from your gemfile. Your code works if you remove the {headless: true} parameter? You get a ReadTimeout when a site takes too long to load, so it is typically a network issue."}, {"owner": {"reputation": 71, "user_id": 9071718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8409ac71758a2669b7452db1ff8d7e77?s=128&d=identicon&r=PG&f=1", "display_name": "jp2017", "link": "https://stackoverflow.com/users/9071718/jp2017"}, "edited": false, "score": 0, "creation_date": 1513875088, "post_id": 47770904, "comment_id": 82827311, "body": "I have removed watir-webdriver from the gemfile. It does work when I remove the (headless:true). It just doesn&#39;t work when I include the headless. Any solution to this?"}, {"owner": {"reputation": 71, "user_id": 9071718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8409ac71758a2669b7452db1ff8d7e77?s=128&d=identicon&r=PG&f=1", "display_name": "jp2017", "link": "https://stackoverflow.com/users/9071718/jp2017"}, "edited": false, "score": 0, "creation_date": 1515687485, "post_id": 47770904, "comment_id": 83404196, "body": "This error seems cause by URL start with https://"}], "owner": {"reputation": 71, "user_id": 9071718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8409ac71758a2669b7452db1ff8d7e77?s=128&d=identicon&r=PG&f=1", "display_name": "jp2017", "link": "https://stackoverflow.com/users/9071718/jp2017"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 631, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1513076541, "creation_date": 1513076222, "last_edit_date": 1513076541, "question_id": 47770904, "link": "https://stackoverflow.com/questions/47770904/chrome-headless-netreadtimeout-netreadtimeout", "title": "Chrome Headless - Net::ReadTimeout: Net::ReadTimeout", "body": "<p>I'm using Window and I want to use the Chrome Headless with Watir Automation. I have the following code in my Hooks file but when I run the script I'm getting the error message below: </p>\n\n<pre><code>Before do\n   @browser = Watir::Browser.new :chrome, headless: true\n   @browser.goto \"www.somewebsite.com\"       \nend \n</code></pre>\n\n<p>Error Message:   <code>Net::ReadTimeout: Net::ReadTimeout</code></p>\n\n<p>I have downloaded the latest ChromeDriver  v2.34 and the browser v63. \nSee my Gemfile here:<a href=\"https://gist.github.com/anonymous/0b526bf12ce744fedf38b0cca38693e0\" rel=\"nofollow noreferrer\">https://gist.github.com/anonymous/0b526bf12ce744fedf38b0cca38693e0</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "authentication", "post", "devise"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1513077842, "post_id": 47770902, "comment_id": 82503599, "body": "Have you tried debugging it at all? Put a breakpoint in your code, and try executing each command. Try running the steps manually. If you have written any custom controller code, try putting breakpoints in there, to see what happens."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1513078041, "post_id": 47770902, "comment_id": 82503735, "body": "A few possible issues that I would <b>guess</b> could be causing problems are: (1) Why are you doing: <code>password: Devise::Encryptor.digest(User, &quot;aaaaaa&quot;)</code>? You can just do <code>password: &quot;aaaaa&quot;</code>. You&#39;re setting the password here, not the encrypted password! (2) Does accessing <code>@david.password</code> actually work, after creating the record? I&#39;m not sure. I suspect this virtual attribute may get reset to <code>nil</code>. (3) Do you have any additional requirements to log in, e.g. a password format policy or the need to be <code>confirmed_at</code>?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1513078331, "post_id": 47770902, "comment_id": 82503934, "body": "Oh, and in fact -- I just realised: With your second approach, <b>why are you creating the user, THEN sending <code>post user_registration_path</code></b>?? That&#39;s clearly not going to work... The user cannot already exist before they register!"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1513078431, "post_id": 47770902, "comment_id": 82504013, "body": "I guess to summarise this rambling, I would say: What do you <i>expect</i> to happen here? What does your application actually <i>do</i>? For example, it&#39;s quite common to send a confirmation email before the user can actually log in."}, {"owner": {"reputation": 910, "user_id": 8321582, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4fOTd.jpg?s=128&g=1", "display_name": "Siyavash", "link": "https://stackoverflow.com/users/8321582/siyavash"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1513078586, "post_id": 47770902, "comment_id": 82504111, "body": "Thank you for the issues you have pointed out. I am       post user_registration_path, &#39;user[email]&#39; =&gt; &quot;sisisissadis@gmail.com&quot;, &#39;user[password]&#39; =&gt;  &quot;aaaaaaaa&quot;, &#39;user[password_confirmation]&#39; =&gt;  &quot;aaaaaaaa&quot;  This is what i am doing right now and it passes the test when in fact it shouldn&#39;t because one user cannot sign up with the same email address more than once.  What do you expect to happen here? I expect the user to be added to database @TomLord"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1513078965, "post_id": 47770902, "comment_id": 82504335, "body": "<i>&quot;it passes the test when in fact it shouldn&#39;t because one user cannot sign up with the same email address more than once&quot;</i> -- You never tested that the user cannot sign up twice. You only tested <code>assert_equal &quot;&#47;&quot;, path</code>."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1513079009, "post_id": 47770902, "comment_id": 82504363, "body": "<i>&quot;I expect the user to be added to database&quot;</i> -- You never tested that the user is added to the database. Again, you only tested <code>assert_equal &quot;&#47;&quot;, path</code>."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1513079088, "post_id": 47770902, "comment_id": 82504420, "body": "Also, I thought those were two attempts at performing the same test; but now you say they are two separate scenarios. (Which makes more sense, since they <i>are</i> separate scenarios!) But in that case, you should obviously be running some different assertion."}], "owner": {"reputation": 910, "user_id": 8321582, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4fOTd.jpg?s=128&g=1", "display_name": "Siyavash", "link": "https://stackoverflow.com/users/8321582/siyavash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1513076346, "creation_date": 1513076210, "last_edit_date": 1513076346, "question_id": 47770902, "link": "https://stackoverflow.com/questions/47770902/ruby-on-rails-devise-integration-testing", "title": "Ruby on rails - Devise - Integration Testing", "body": "<p>I am trying to test my sign up page but I don't understand why it doesn't work. </p>\n\n<pre><code>   #SIGN UP FLOWS\n    test \"signed up user with valid info is redirected to root\" do\n     get root_path\n\n     post user_registration_path, :user_email =&gt; \"asasas@as.com\", :user_password =&gt;  \"asasas\", :user_password_confirmation =&gt;  \"asasas\"\n     follow_redirect!\n     assert_equal \"/\", path\n    end\n</code></pre>\n\n<p>I have also tried :</p>\n\n<pre><code>   #SIGN UP FLOWS\n    test \"signed up user with valid info is redirected to posts\" do\n     get root_path\n     @david = User.create(email: \"aaaasadasadaddamdaaa@aaa.com\", password: Devise::Encryptor.digest(User, \"aaaaaa\"))\n     post user_registration_path, 'user[email]' =&gt; @david.email, 'user[password]' =&gt;  @david.password, 'user[password_confirmation]' =&gt;  @david.password\n\n     assert_equal \"/\", path\n   end\n</code></pre>\n\n<p>Instead of going to my root which is <code>/</code> It stays on the same page. I tried to do <code>follow_redirect!</code> but it gives me the error that reduction is not possible because <code>RuntimeError: not a redirect! 200 OK</code>. </p>\n\n<p>What am I doing wrong? I have looked at devise GitHub page but there is no information about registration testing. </p>\n"}, {"tags": ["ruby", "elasticsearch", "logstash"], "answers": [{"tags": [], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "is_accepted": false, "score": 1, "last_activity_date": 1513075598, "creation_date": 1513075598, "answer_id": 47770697, "question_id": 47770696, "link": "https://stackoverflow.com/questions/47770696/convert-packed-string-of-bytes-from-protobuf-to-formatted-via-logstash/47770697#47770697", "title": "Convert packed string of bytes from protobuf to formatted via logstash", "body": "<p>In order to accomplish this, you will need to write a bit of ruby yourself. </p>\n\n<p>But don't worry, it's easier than it sounds, you can just inline ruby into the logstash config file. </p>\n\n<p>First:</p>\n\n<ul>\n<li>Set your output codec to <code>rubydebug</code> so it prints the data structure - you'll need this to identify which fields you want. </li>\n</ul>\n\n<p>So for my example (snipped for brevity):</p>\n\n<p>We are interested in the <code>rData</code> field. </p>\n\n<pre><code>\"socketProtocol\" =&gt; 1,\n    \"@timestamp\" =&gt; 2017-12-12T10:26:41.910Z,\n   \"requestorId\" =&gt; \"\",\n          \"port\" =&gt; 47788,\n      \"response\" =&gt; {\n            \"rcode\" =&gt; 0,\n              \"rrs\" =&gt; [\n        [0] {\n             \"rType\" =&gt; 1,\n             \"rData\" =&gt; \"\\xD8:\\xC9$\",\n            \"rClass\" =&gt; 1,\n             \"rName\" =&gt; \"www.google.com.\",\n              \"rTtl\" =&gt; 300\n        }\n    ],\n</code></pre>\n\n<p>We also have a few examples of longer <code>rData</code> fields, where the value in rubydebug is:</p>\n\n<pre><code>\"rData\" =&gt; \"*\\x00\\x14P@\\t\\b\\v\\x00\\x00\\x00\\x00\\x00\\x00 \\x04\",\n</code></pre>\n\n<p>Which ends up rendering into Elasticsearch as: </p>\n\n<pre><code>\"rData\": \"*\\u0000\\u0014P@\\t\\b\\u000b\\u0000\\u0000\\u0000\\u0000\\u0000\\u0000 \\u0004\",\n</code></pre>\n\n<p>So we extract this using <code>event.get(\"response\")</code> so we can test the existence (necessary, because in my use case there'll be <code>response</code> fields with no data):</p>\n\n<pre><code>filter {\n  if [response] {\n    ruby {\n      code =&gt; \n\n        # response rData can be a different things.\n        #usually an ipV4 address, or an ipv6. \n        #But they're usually written in different formats - ipv4 is dotted quads,\n        #where ipv6 is hex and double-bytes\n        #so we look at the (unpacked) string length, and see if there are 4 (or more) 'uint64s' in there. \n        #and substitute accordingly. \n        '\n        response = event.get(\"response\")\n        if ( response and response[\"rrs\"] and response[\"rrs\"][0] and response[\"rrs\"][0][\"rData\"] ) \n           rdata = response[\"rrs\"][0][\"rData\"]\n           hex_value = rdata.unpack(\"H*\").join(\"\")\n           ip_value =  rdata.unpack(\"C4\").join(\".\")\n           length_rdata =    rdata.unpack(\"L*\").length\n           if ( length_rdata &gt;= 4 ) \n             event.set(\"[response][decoded_rdata]\", hex_value )\n           else\n             event.set(\"[response][decoded_rdata]\", ip_value) \n           end\n        end\n       '\n    }\n  }\n} \n</code></pre>\n\n<p>Note - this tests the length of the <code>rData</code> value, and if it's \"long\" then assumes it's an ipv6 address and formats as hex, and if it's short, assumes that it's ipv4 and formats as the conventional 'dotted' quad. </p>\n\n<p>It then adds to a new subfield, <code>response.decoded_rdata</code> which is probably more useful for elasticsearch than nesting any deeper. </p>\n\n<p>We also have an additional snippet to handle the 'byte' encoding of the <code>from</code>/<code>to</code>/<code>messageId</code> field which is largely similar:</p>\n\n<pre><code>  ruby {\n    code =&gt;  \n       #take to and from fields, and assume they're packed IP addresses. \n       #take messageId and convert to hex. \n       'event.set(\"from\", event.get(\"from\").unpack(\"C4\").join(\".\"));\n        event.set(\"to\", event.get(\"to\").unpack(\"C4\").join(\".\"));\n        event.set(\"messageId\", event.get(\"messageId\").unpack(\"H*\").join(\"\"));\n       '\n  }\n</code></pre>\n"}], "owner": {"reputation": 51521, "user_id": 2566198, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y34ZA.jpg?s=128&g=1", "display_name": "Sobrique", "link": "https://stackoverflow.com/users/2566198/sobrique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513075598, "creation_date": 1513075598, "question_id": 47770696, "link": "https://stackoverflow.com/questions/47770696/convert-packed-string-of-bytes-from-protobuf-to-formatted-via-logstash", "title": "Convert packed string of bytes from protobuf to formatted via logstash", "body": "<p>I've got a protobuf that I'm trying to feed through logstash. Some of the values look binary formatted:</p>\n\n<p>When printing through the <code>rubydebug</code> codec </p>\n\n<p>I'm getting values like:</p>\n\n<pre><code>rData =&gt; '\\xD8:\\xC9$'\n</code></pre>\n\n<p>This appears to be because by <code>protobuf</code> template has:</p>\n\n<pre><code>optional :bytes, :rData, 5\n</code></pre>\n\n<p>Which ... does what it says on the tin - hands the raw bytes through to logstash, which then assumes they are text. </p>\n\n<p>So, that <code>rData</code> line would decode as <code>216.58.201.36</code> which is the response for <code>www.google.com</code>. </p>\n\n<p>How can I convert this into a useful format in elasticsearch? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "web-applications"], "answers": [{"tags": [], "owner": {"reputation": 351, "user_id": 5583496, "user_type": "registered", "profile_image": "https://graph.facebook.com/952848168094244/picture?type=large", "display_name": "Dima I. Belinski", "link": "https://stackoverflow.com/users/5583496/dima-i-belinski"}, "is_accepted": false, "score": 1, "last_activity_date": 1513075376, "creation_date": 1513075376, "answer_id": 47770619, "question_id": 47770464, "link": "https://stackoverflow.com/questions/47770464/rails-loads-picture-only-on-reload-not-if-link-clicked/47770619#47770619", "title": "Rails loads Picture only on reload, not if link clicked", "body": "<p>You use turbolinks.</p>\n\n<p>try to put your js-slider code like this</p>\n\n<pre><code>$(document).on('turbolinks:load', function() {\n  $( document ).ready(function() {\n    // your js-slider code here\n  })\n});\n</code></pre>\n\n<p>or just put this in <code>application.js</code> and require <code>owl-carousel</code> from <code>aplication.js</code></p>\n"}, {"tags": [], "owner": {"reputation": 157, "user_id": 1843919, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/993a0.png?s=128&g=1", "display_name": "Rebel Rider", "link": "https://stackoverflow.com/users/1843919/rebel-rider"}, "is_accepted": false, "score": 0, "last_activity_date": 1513077010, "creation_date": 1513077010, "answer_id": 47771183, "question_id": 47770464, "link": "https://stackoverflow.com/questions/47770464/rails-loads-picture-only-on-reload-not-if-link-clicked/47771183#47771183", "title": "Rails loads Picture only on reload, not if link clicked", "body": "<p>try to add below code for home link like:</p>\n\n<pre><code>&lt;%= link_to('home', home_path, data: { no_turbolink: false}) %&gt;\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 4134801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/252b67c8608718d6ea8b1297ed177495?s=128&d=identicon&r=PG&f=1", "display_name": "Donvini", "link": "https://stackoverflow.com/users/4134801/donvini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1513077010, "creation_date": 1513074970, "question_id": 47770464, "link": "https://stackoverflow.com/questions/47770464/rails-loads-picture-only-on-reload-not-if-link-clicked", "title": "Rails loads Picture only on reload, not if link clicked", "body": "<p>Since 2 days I'm trying to solve a really strange issue. On first Visit of my rails web app loads a picture, but if you click on Home in the navbar to get to the same page, the picture doesn't load. If you reload the page after this, it appears again.\n<a href=\"http://138.68.101.23:3000\" rel=\"nofollow noreferrer\">For you to see yourself</a>\nI am totally clueless on how to solve this and whats the cause..</p>\n"}, {"tags": ["ruby", "export-to-csv"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1513078247, "post_id": 47770220, "comment_id": 82503881, "body": "Would you please remove the whole unrelated parsing code and provide the input you have as is?"}], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 4416520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c929ccc6c9b5cb3c333447031c4879c2?s=128&d=identicon&r=PG&f=1", "display_name": "magicfishy", "link": "https://stackoverflow.com/users/4416520/magicfishy"}, "is_accepted": false, "score": 0, "last_activity_date": 1513332448, "last_edit_date": 1513332448, "creation_date": 1513332061, "answer_id": 47829867, "question_id": 47770220, "link": "https://stackoverflow.com/questions/47770220/how-to-create-a-new-csv-row-of-data-per-x-amount-of-strings-in-an-array/47829867#47829867", "title": "How to create a new CSV row of data per X amount of strings in an array", "body": "<p>I figured it out. I needed the array that I was feeding into my csv to create a new row after every 7 strings in the array. Here's how I did it:</p>\n\n<p>arr = an array that has some given amount of strings, always divisible by 7</p>\n\n<pre><code>rows = arr.each_slice(7)\nCSV.open(\"#{file_name}\", \"ab\") do |csv|\n   csv &lt;&lt; [title, asin]\n   rows.each do |row|\n      csv &lt;&lt; row\n   end\nend\n</code></pre>\n"}], "owner": {"reputation": 76, "user_id": 4416520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c929ccc6c9b5cb3c333447031c4879c2?s=128&d=identicon&r=PG&f=1", "display_name": "magicfishy", "link": "https://stackoverflow.com/users/4416520/magicfishy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 18, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513332448, "creation_date": 1513074229, "last_edit_date": 1513080033, "question_id": 47770220, "link": "https://stackoverflow.com/questions/47770220/how-to-create-a-new-csv-row-of-data-per-x-amount-of-strings-in-an-array", "title": "How to create a new CSV row of data per X amount of strings in an array", "body": "<p>I'm trying to create a spreadsheet from an array.</p>\n\n<pre><code> #Loop through each .olpOffer (product listing) and gather content from various elements\n parse_page.css('.olpOffer').each do |a|\n    if a.css('.olpSellerName img').empty?\n        seller = a.css('.olpSellerName').text.strip \n    else\n        seller = a.css('.olpSellerName img').attr('alt').value \n    end\n    offer_price = a.css('.olpOfferPrice').text.strip\n    prime = a.css('.supersaver').text.strip\n    shipping_info = a.css('.olpShippingInfo').text.strip.squeeze(\" \").gsub!(/(\\n)/, '')\n    condition = a.css('.olpCondition').text.strip\n    fba = \"FBA\" unless a.css('.olpBadge').empty?\n\n    #Push data from each product listing into array\n    arr.push(seller,offer_price,prime,shipping_info,condition,fba)\n  end\n    #Need to make each product listing's data begin in new row [HELP!!]\n    CSV.open(\"file.csv\", \"wb\") do |csv|\n        csv &lt;&lt; [\"Seller\", \"Price\", \"Prime\", \"Shipping\", \"Condition\", \"FBA\"]\n\n        end\n    end\n</code></pre>\n\n<p>I need to reset the row that the array is writing to after the <code>\"FBA\"</code> column so that I don't end up with one huge row of data in row 2.</p>\n\n<p>I can't figure out how to correlate each string to a specific column header. Should I not use an array?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rubygems", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "is_accepted": true, "score": 0, "last_activity_date": 1513073484, "creation_date": 1513073484, "answer_id": 47770001, "question_id": 47769912, "link": "https://stackoverflow.com/questions/47769912/how-to-compare-an-input-value-with-database-value-in-rails-model/47770001#47770001", "title": "How to compare an input value with database value in rails model?", "body": "<p>try below code in model:</p>\n\n<pre><code>validate :paid_amount_and_price\ndef paid_amount_and_price_check\n    unless paid_amount.to_f == price.to_f\n      errors.add(:paid_amount, \"Must be equal to the price to process further!\")\n    end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 947, "user_id": 7333505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade96347d4304c3c3e72b914f61d1792?s=128&d=identicon&r=PG&f=1", "display_name": "Ritesh Ranjan", "link": "https://stackoverflow.com/users/7333505/ritesh-ranjan"}, "is_accepted": false, "score": 1, "last_activity_date": 1513075484, "last_edit_date": 1513075484, "creation_date": 1513074610, "answer_id": 47770347, "question_id": 47769912, "link": "https://stackoverflow.com/questions/47769912/how-to-compare-an-input-value-with-database-value-in-rails-model/47770347#47770347", "title": "How to compare an input value with database value in rails model?", "body": "<p>We don't have to use any custom validation here, try this:</p>\n\n<pre><code>validates_numericality_of :paid_amount,\n                          equal_to: -&gt;(object) { object.price.to_f },\n                          message: \"Must be equal to the price to process further!\"\n</code></pre>\n\n<p>or </p>\n\n<pre><code>validates :paid_amount, \n          :numericality =&gt; { equal_to: -&gt;(object) { object.price.to_f },\n                             message: \"Must be equal to the price to process further!\" }\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 7783163, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f925474fc294a6ada25188df69c528eb?s=128&d=identicon&r=PG&f=1", "display_name": "Sudeep Ghimiray", "link": "https://stackoverflow.com/users/7783163/sudeep-ghimiray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "accepted_answer_id": 47770001, "answer_count": 2, "score": 0, "last_activity_date": 1513075484, "creation_date": 1513073229, "question_id": 47769912, "link": "https://stackoverflow.com/questions/47769912/how-to-compare-an-input-value-with-database-value-in-rails-model", "title": "How to compare an input value with database value in rails model?", "body": "<p>I have a model called CustomizedBooking where I need to validate paid amount value equal to the price column of the database.\nFollowing is code snippet </p>\n\n<pre><code>validate :paid_amount_and_price\ndef paid_amount_and_price_check\n    if paid_amount == price column value of the database\n    errors.add(:paid_amount, \"Must be equal to the price to process further!\")\nend\n</code></pre>\n\n<p>Please! somebody, suggest me</p>\n"}, {"tags": ["ruby", "ubuntu-16.04"], "owner": {"reputation": 165, "user_id": 2230106, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/31d02cb2e259be9323213c1bbfe00218?s=128&d=identicon&r=PG", "display_name": "youngster", "link": "https://stackoverflow.com/users/2230106/youngster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1513070566, "creation_date": 1513070566, "question_id": 47769057, "link": "https://stackoverflow.com/questions/47769057/install-specific-version-of-ruby-with-rvm", "title": "Install specific version of ruby with rvm", "body": "<p>I followed <a href=\"https://www.digitalocean.com/community/tutorials/how-to-install-ruby-and-set-up-a-local-programming-environment-on-ubuntu-16-04\" rel=\"nofollow noreferrer\">those</a> steps to install rvm on ubuntu 16.04 now when I try to install specific ruby version (1.9.1) I have this error </p>\n\n<pre><code>Error running '__rvm_make -j4',\nplease read /home/igor/.rvm/log/1513069679_ruby-1.9.1-p431/make.log\nThere has been an error while running make. Halting the installation.\n</code></pre>\n\n<p>Error log says </p>\n\n<pre><code> gcc -shared -o ../../.ext/x86_64-linux/curses.so curses.o -L. -L../.. -L.  \n-rdynamic -Wl,-export-dynamic    -Wl,-R -Wl,/home/igor/.rvm/rubies/ruby-\n 1.9.1-p431/lib -L/home/igor/.rvm/rubies/ruby-1.9.1-p431/lib -lruby -\n lncurses -ltinfo  -lpthread -lrt -ldl -lcrypt -lm   -lc\n make[1]: Leaving directory '/home/igor/.rvm/src/ruby-1.9.1-p431/ext/curses'\n compiling dbm\n make[1]: Entering directory '/home/igor/.rvm/src/ruby-1.9.1-p431/ext/dbm'\n gcc -I. -I../../.ext/include/x86_64-linux -I../.././include -\n I../.././ext/dbm -DRUBY_EXTCONF_H=\\\"extconf.h\\\"    -fPIC  -O2 -g -Wall -\n Wno-parentheses  -fPIC  -o dbm.o -c dbm.c\n gcc -shared -o ../../.ext/x86_64-linux/dbm.so dbm.o -L. -L../.. -L.  -\n rdynamic -Wl,-export-dynamic    -Wl,-R -Wl,/home/igor/.rvm/rubies/ruby-\n 1.9.1-p431/lib -L/home/igor/.rvm/rubies/ruby-1.9.1-p431/lib -lruby -\n lgdbm_compat -lgdbm  -lpthread -lrt -ldl -lcrypt -lm   -lc\n make[1]: Leaving directory '/home/igor/.rvm/src/ruby-1.9.1-p431/ext/dbm'\n compiling digest\n make[1]: Entering directory '/home/igor/.rvm/src/ruby-1.9.1-\n p431/ext/digest'\n gcc -I. -I../../.ext/include/x86_64-linux -I../.././include -\n I../.././ext/digest -DRUBY_EXTCONF_H=\\\"extconf.h\\\"    -fPIC  -O2 -g -Wall -\n Wno-parentheses  -fPIC  -o digest.o -c digest.c\n mkdir -p ../../.ext/include/ruby\n mkdir -p ../../.ext/common/digest\n cp ../.././ext/digest/lib/digest.rb ../../.ext/common\n cp ../.././ext/digest/lib/digest/hmac.rb ../../.ext/common/digest\n cp ../.././ext/digest/digest.h ../../.ext/include/ruby\n cp: cannot create regular file '../../.ext/common/digest': File exists\n Makefile:163: recipe for target '../../.ext/common/digest/hmac.rb' failed\n make[1]: *** [../../.ext/common/digest/hmac.rb] Error 1\n make[1]: *** Waiting for unfinished jobs....\n make[1]: Leaving directory '/home/igor/.rvm/src/ruby-1.9.1-\n p431/ext/digest'\n uncommon.mk:134: recipe for target 'mkmain.sh' failed\n make: *** [mkmain.sh] Error 1\n ++ return 2\n</code></pre>\n\n<p>Can you please help me solve this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1513068340, "post_id": 47768304, "comment_id": 82497844, "body": "<a href=\"http://guides.rubyonrails.org/routing.html#overriding-named-route-parameters\" rel=\"nofollow noreferrer\">Overriding Named Route Parameters</a> explains how you can change the <code>:id</code> part in your routes to another attribute."}], "answers": [{"comments": [{"owner": {"reputation": 40, "user_id": 4416188, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001344398413/picture?type=large", "display_name": "Long Ma Gi&#225;o", "link": "https://stackoverflow.com/users/4416188/long-ma-gi%c3%a1o"}, "edited": false, "score": 0, "creation_date": 1513069097, "post_id": 47768489, "comment_id": 82498274, "body": "Can I re routes the link . Like <a href=\"http://localhost:3000/coins/coolbook\" rel=\"nofollow noreferrer\">localhost:3000/coins/coolbook</a> to <a href=\"http://localhost:3000/coolbook\" rel=\"nofollow noreferrer\">localhost:3000/coolbook</a>"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1513069589, "post_id": 47768489, "comment_id": 82498567, "body": "You can do it in routes.rb: <code>match &#39;&#47;:id&#39;, to: &#39;coins#show&#39;</code>. But i would not suggest removing the resource type &quot;coins&quot; from the path."}, {"owner": {"reputation": 40, "user_id": 4416188, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001344398413/picture?type=large", "display_name": "Long Ma Gi&#225;o", "link": "https://stackoverflow.com/users/4416188/long-ma-gi%c3%a1o"}, "edited": false, "score": 0, "creation_date": 1513075753, "post_id": 47768489, "comment_id": 82502352, "body": "thank you bro . I just play to make a coin info page . so it&#39;s like coin.com/btc rather than coin.com/coins/btc"}], "tags": [], "owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "is_accepted": true, "score": 2, "last_activity_date": 1513068668, "creation_date": 1513068668, "answer_id": 47768489, "question_id": 47768304, "link": "https://stackoverflow.com/questions/47768304/how-can-i-make-the-object-path-url-relate-to-object-name/47768489#47768489", "title": "How can I make the object path / url relate to object name?", "body": "<p>you should use <a href=\"https://github.com/norman/friendly_id\" rel=\"nofollow noreferrer\">friendly_id</a> gem and its very simple</p>\n"}], "owner": {"reputation": 40, "user_id": 4416188, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001344398413/picture?type=large", "display_name": "Long Ma Gi&#225;o", "link": "https://stackoverflow.com/users/4416188/long-ma-gi%c3%a1o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 47768489, "answer_count": 1, "score": 1, "last_activity_date": 1513068668, "creation_date": 1513067961, "last_edit_date": 1513068008, "question_id": 47768304, "link": "https://stackoverflow.com/questions/47768304/how-can-i-make-the-object-path-url-relate-to-object-name", "title": "How can I make the object path / url relate to object name?", "body": "<p>I have the object like </p>\n\n<pre><code>class Book\n  include Mongoid::Document\n  include Mongoid::Timestamps\n  field :name, type: String\n  field :notes, type: String\nend\n</code></pre>\n\n<p>My url to one of my object when I show it was like <code>http://localhost:3000/coins/5a2e9e460d5fdd0a32153c31</code></p>\n\n<p>How can I make the url relate to the object name (#{book.name}) like </p>\n\n<pre><code>http://localhost:3000/coins/harrypotter\n</code></pre>\n\n<p>or</p>\n\n<pre><code>http://localhost:3000/coins/mazerunner\n</code></pre>\n\n<p>or</p>\n\n<pre><code>http://localhost:3000/coins/coolbook\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "utf-8"], "answers": [{"comments": [{"owner": {"reputation": 498, "user_id": 5468335, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/635925496550308/picture?type=large", "display_name": "dungmidside", "link": "https://stackoverflow.com/users/5468335/dungmidside"}, "edited": false, "score": 0, "creation_date": 1513065558, "post_id": 47767549, "comment_id": 82496489, "body": "Thanks you but still not working. I make sure path of image <code>logo.png</code> is correct. If the path don&#39;t correct, it will give an error."}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "reply_to_user": {"reputation": 498, "user_id": 5468335, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/635925496550308/picture?type=large", "display_name": "dungmidside", "link": "https://stackoverflow.com/users/5468335/dungmidside"}, "edited": false, "score": 0, "creation_date": 1513066082, "post_id": 47767549, "comment_id": 82496694, "body": "Have you replaced your_path with your own path"}, {"owner": {"reputation": 498, "user_id": 5468335, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/635925496550308/picture?type=large", "display_name": "dungmidside", "link": "https://stackoverflow.com/users/5468335/dungmidside"}, "edited": false, "score": 0, "creation_date": 1513068169, "post_id": 47767549, "comment_id": 82497756, "body": "Yeah, I have. Do you have any idea?"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "reply_to_user": {"reputation": 498, "user_id": 5468335, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/635925496550308/picture?type=large", "display_name": "dungmidside", "link": "https://stackoverflow.com/users/5468335/dungmidside"}, "edited": false, "score": 0, "creation_date": 1513068351, "post_id": 47767549, "comment_id": 82497849, "body": "<code>&lt;meta charset=&quot;utf-8&quot;&gt;</code> add this in your <code>application.html.erb</code> in your <code>header</code> tag"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "reply_to_user": {"reputation": 498, "user_id": 5468335, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/635925496550308/picture?type=large", "display_name": "dungmidside", "link": "https://stackoverflow.com/users/5468335/dungmidside"}, "edited": false, "score": 0, "creation_date": 1513068476, "post_id": 47767549, "comment_id": 82497918, "body": "its a similar question like this <a href=\"https://stackoverflow.com/questions/41590314/encodinginvalidbytesequenceerror-in-homeindex-xa9-on-utf-8\" title=\"encodinginvalidbytesequenceerror in homeindex xa9 on utf 8\">stackoverflow.com/questions/41590314/&hellip;</a>"}], "tags": [], "owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "is_accepted": false, "score": 0, "last_activity_date": 1513064812, "creation_date": 1513064812, "answer_id": 47767549, "question_id": 47767404, "link": "https://stackoverflow.com/questions/47767404/ruby-on-rails-encoding-error-invalidbytesequenceerror-xb4-on-utf-8/47767549#47767549", "title": "Ruby on Rails - Encoding Error - InvalidByteSequenceError - \\xB4 on UTF-8", "body": "<p>I think you missed the <code>url</code> on click image it will be redirected though you can use give solution , and make sure you have given correct path of image <code>logo.png</code> </p>\n\n<pre><code>&lt;body&gt;\n  &lt;%=link_to your_link_path do %&gt;\n    &lt;%=image_tag('logo.png') %&gt;\n  &lt;%end%&gt;\n&lt;/body&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 106, "user_id": 8605251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eeaabe86032c54162c11f43848d625b?s=128&d=identicon&r=PG&f=1", "display_name": "Raga", "link": "https://stackoverflow.com/users/8605251/raga"}, "reply_to_user": {"reputation": 498, "user_id": 5468335, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/635925496550308/picture?type=large", "display_name": "dungmidside", "link": "https://stackoverflow.com/users/5468335/dungmidside"}, "edited": false, "score": 0, "creation_date": 1513065978, "post_id": 47767747, "comment_id": 82496651, "body": "can you try putting a <code>*.jpg</code> file instead and see. Also check the permissions and the size of the image. You may be right, it may be related <code>sublime</code> as well. Try using &#39;Notepad++&#39; or <code>vim</code>"}], "tags": [], "owner": {"reputation": 106, "user_id": 8605251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eeaabe86032c54162c11f43848d625b?s=128&d=identicon&r=PG&f=1", "display_name": "Raga", "link": "https://stackoverflow.com/users/8605251/raga"}, "is_accepted": false, "score": 1, "last_activity_date": 1513065591, "creation_date": 1513065591, "answer_id": 47767747, "question_id": 47767404, "link": "https://stackoverflow.com/questions/47767404/ruby-on-rails-encoding-error-invalidbytesequenceerror-xb4-on-utf-8/47767747#47767747", "title": "Ruby on Rails - Encoding Error - InvalidByteSequenceError - \\xB4 on UTF-8", "body": "<p>You may have to give the <code>root_path</code> as well like below</p>\n\n<pre><code>&lt;body&gt;\n   &lt;%= link_to image_tag('logo.png'), root_path %&gt;\n&lt;/body&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8930748"}, "is_accepted": false, "score": 1, "last_activity_date": 1513066581, "creation_date": 1513066581, "answer_id": 47767998, "question_id": 47767404, "link": "https://stackoverflow.com/questions/47767404/ruby-on-rails-encoding-error-invalidbytesequenceerror-xb4-on-utf-8/47767998#47767998", "title": "Ruby on Rails - Encoding Error - InvalidByteSequenceError - \\xB4 on UTF-8", "body": "<p>I have done this like: </p>\n\n<pre><code>  &lt;%=link_to image_tag('logo.png'), buildings_path %&gt;\n</code></pre>\n\n<p>This link will display as image and will directed to given path if clicked.</p>\n"}, {"tags": [], "owner": {"reputation": 1113, "user_id": 4701098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4QnL4.jpg?s=128&g=1", "display_name": "Samy Kacimi", "link": "https://stackoverflow.com/users/4701098/samy-kacimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1513076361, "creation_date": 1513076361, "answer_id": 47770954, "question_id": 47767404, "link": "https://stackoverflow.com/questions/47767404/ruby-on-rails-encoding-error-invalidbytesequenceerror-xb4-on-utf-8/47770954#47770954", "title": "Ruby on Rails - Encoding Error - InvalidByteSequenceError - \\xB4 on UTF-8", "body": "<pre><code>&lt;%= link_to image_url('logo.png') %&gt;\n</code></pre>\n\n<p>Is this what you want ?</p>\n\n<p>NB : <code>image_tag</code> generates an <code>&lt;img&gt;</code> HTML element with your image as src, thus you were trying to put an <code>&lt;img&gt;</code> as href of your link.</p>\n"}], "owner": {"reputation": 498, "user_id": 5468335, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/635925496550308/picture?type=large", "display_name": "dungmidside", "link": "https://stackoverflow.com/users/5468335/dungmidside"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 365, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1513076361, "creation_date": 1513064188, "last_edit_date": 1513068113, "question_id": 47767404, "link": "https://stackoverflow.com/questions/47767404/ruby-on-rails-encoding-error-invalidbytesequenceerror-xb4-on-utf-8", "title": "Ruby on Rails - Encoding Error - InvalidByteSequenceError - \\xB4 on UTF-8", "body": "<p>Rails ver: 5.1.4\n<br>\nI want to link a image from 'app/assets/images/logo.png'.\n<br>\nFile <code>index.html.erb</code></p>\n\n<pre><code>&lt;body&gt;\n    &lt;%= link_to image_tag('logo.png') %&gt;\n&lt;/body&gt;\n</code></pre>\n\n<p>When I run, It give me a Error: <code>Encoding::InvalidByteSequenceError</code> and description show <code>\"\\xB4\" on UTF-8</code>.\nI thinks it's an Encoding error when I save file. I tried to save all of my file in UTF-8 (editor SublimeText) but it still not working. Is anyone meet same error?\n<br>\nThanks everyone !</p>\n"}, {"tags": ["ruby", "authentication", "23andme-api"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6438616, "user_type": "registered", "profile_image": "https://graph.facebook.com/1014414701986123/picture?type=large", "display_name": "Kseniia Ryuma", "link": "https://stackoverflow.com/users/6438616/kseniia-ryuma"}, "edited": false, "score": 0, "creation_date": 1513120445, "post_id": 47772851, "comment_id": 82527563, "body": "Lauri, I made sure that URI matches the redirect URI. Still having the error for redirection"}], "tags": [], "owner": {"reputation": 3548, "user_id": 2318810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34138f17ed66a94d22d50402d3ee71d2?s=128&d=identicon&r=PG", "display_name": "Lauri", "link": "https://stackoverflow.com/users/2318810/lauri"}, "is_accepted": false, "score": 0, "last_activity_date": 1513087431, "last_edit_date": 1513087431, "creation_date": 1513082237, "answer_id": 47772851, "question_id": 47766695, "link": "https://stackoverflow.com/questions/47766695/exchange-auth-code-for-a-token-fails-with-23andme-api/47772851#47772851", "title": "Exchange auth code for a token fails with 23andMe API", "body": "<p>Typically with OAuth2 when fetching token, given redirect URI should match the redirect URI of OAuth application. The error indicates that it does not match. </p>\n\n<p>Also you are setting <code>'Content-Type' =&gt; 'application/json'</code> header for the request, do you mean <code>'Accept' =&gt; 'application/json'</code>?</p>\n"}], "owner": {"reputation": 1, "user_id": 6438616, "user_type": "registered", "profile_image": "https://graph.facebook.com/1014414701986123/picture?type=large", "display_name": "Kseniia Ryuma", "link": "https://stackoverflow.com/users/6438616/kseniia-ryuma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513087431, "creation_date": 1513060895, "question_id": 47766695, "link": "https://stackoverflow.com/questions/47766695/exchange-auth-code-for-a-token-fails-with-23andme-api", "title": "Exchange auth code for a token fails with 23andMe API", "body": "<p>The 23andme web site has an API and they give the <a href=\"https://api.23andme.com/docs/authentication/\" rel=\"nofollow noreferrer\">following instructions</a>:</p>\n\n<blockquote>\n  <p>Send a POST /token/ request with these parameters (client_id and\n  client_secret are on your dashboard):</p>\n</blockquote>\n\n<pre><code>curl https://api.23andme.com/token/\n     -d client_id=xxx \\\n     -d client_secret=yyy \\\n     -d grant_type=authorization_code \\\n     -d code=zzz \\\n     -d \"redirect_uri=https://localhost:5000/receive_code/\"\n     -d \"scope=basic%20rs3094315\"\n</code></pre>\n\n<p>Here's my code:</p>\n\n<pre><code>require 'net/http'\nrequire 'openssl'\nrequire 'json'\ndef get_token\n    uri = URI.parse(\"https://api.23andme.com/token\")\n    https = Net::HTTP.new(uri.host, uri.port)\n    https.use_ssl = true\n    https.verify_mode = OpenSSL::SSL::VERIFY_NONE\n\n    request = Net::HTTP::Post.new(uri.path,\n                initheader = {'Content-Type' =&gt;'application/json'})\n\n    request.set_form_data({\"client_id\"     =&gt; 'bc81e2eb4fa77a0a8a2344aa99b5fb1e',\n                           \"client_secret\" =&gt; 'd19160ac880a0d7a13abb87b90f66d8e',\n                           \"grant_type\"    =&gt; 'authorization_code',\n                           \"code\"          =&gt; 'a210a1d0beba7e3a1ef7f4133d7a3d3c',\n                           \"redirect_uri\"  =&gt; 'http://localhost:3000',\n                           \"scope\"         =&gt; 'names basic haplogroups relatives'})\n\n    response = https.request(request)\n    data = JSON.load response.read_body\n    return data\nend\n\nputs get_token\n</code></pre>\n\n<p>quite straightforward, however I keep getting the following error:</p>\n\n<pre><code>{\"error_description\"=&gt;\"redirect_uri doesn't match\", \"error\"=&gt;\"invalid_request\"}\n</code></pre>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["ruby", "postgresql", "sequel"], "answers": [{"tags": [], "owner": {"reputation": 4985, "user_id": 142474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/4811245/picture?type=large", "display_name": "arbales", "link": "https://stackoverflow.com/users/142474/arbales"}, "is_accepted": false, "score": 0, "last_activity_date": 1513056398, "creation_date": 1513056398, "answer_id": 47765848, "question_id": 47765660, "link": "https://stackoverflow.com/questions/47765660/query-for-associated-sequel-models-based-on-attributes-in-join-table/47765848#47765848", "title": "Query for associated Sequel models based on attributes in join table", "body": "<p>Another way I've found I can do this is:</p>\n\n<pre><code>Listing.eager(item: :stores).where(active: true).all\n</code></pre>\n\n<p>This results in three queries up-front, but the entire chain of associations I'm interested in is loaded. Then I collect the items out of the array of Listings. </p>\n\n<p>Also unsure if this is The Right Way. </p>\n"}], "owner": {"reputation": 4985, "user_id": 142474, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/4811245/picture?type=large", "display_name": "arbales", "link": "https://stackoverflow.com/users/142474/arbales"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1581279273, "creation_date": 1513055195, "last_edit_date": 1581279273, "question_id": 47765660, "link": "https://stackoverflow.com/questions/47765660/query-for-associated-sequel-models-based-on-attributes-in-join-table", "title": "Query for associated Sequel models based on attributes in join table", "body": "<p>Given <code>Sequel::Model</code> Items and Stores, joined through <code>Listings</code>, I would like to find <code>Items</code> and their associated <code>Stores</code> based on attributes of the listing. </p>\n\n<pre><code>DB.create_table? :items\n  primary_key :id\nend\n\nDB.create_table? :stores\n  primary_key :id\nend\n\nDB.create_table? :listings\n  foreign_key :store_id\n  foreign_key :item_id\n  TrueClass :active, null: true\n  String :name\nend\n\nclass Item &lt; Sequel::Model\n  many_to_many :stores, join_table: :listings\nend\n\nclass Store &lt; Sequel::Model\n  many_to_many :items, join_table: :listings\nend\n\nclass Listing &lt; Sequel::Model\nend\n</code></pre>\n\n<p>I'm able to use <code>.association_join</code> and a <code>.where</code> clause to do this (shown below), but (A) I'm not sure if this is correct (B) it yields a result with props from both joined tables and (C) Calling <code>#stores</code> on a resulting <code>Item</code> results in another query. </p>\n\n<pre><code>Item.association_join(:stores).where(active: true, name: 'Sears').eager(:stores).first()\n</code></pre>\n\n<p>My end goal is an <strong>dataset</strong> of <code>Item</code>s that will eagerly load <code>#stores</code>.    </p>\n\n<p>What's the best way to approach doing this? Thanks!</p>\n"}, {"tags": ["ruby", "rake", "rack", "rake-task", "rakefile"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 9060134, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/06d93febaaf8284b9cfd2c6be69c2da5?s=128&d=identicon&r=PG&f=1", "display_name": "Kakki", "link": "https://stackoverflow.com/users/9060134/kakki"}, "edited": false, "score": 0, "creation_date": 1513052698, "post_id": 47765184, "comment_id": 82491913, "body": "works.  however, <code>ENV[&quot;RACK_ENV&quot;]</code> is empty. how can I set it?"}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 1, "last_activity_date": 1513051523, "creation_date": 1513051523, "answer_id": 47765184, "question_id": 47765129, "link": "https://stackoverflow.com/questions/47765129/simple-rake-task-causes-an-exception-not-a-rails-app/47765184#47765184", "title": "Simple rake task causes an exception. Not a Rails app", "body": "<p>You are telling Rake which file to run (with the <code>-f</code> option), but you aren't telling it which <em>task</em> to run, so by default it is looking for one marked as a default. You haven't marked anything as the default, so it doesn't know what to do and errors out with this message. You can run something like:</p>\n\n<pre><code>rake -f tasks/main.rake db:test1\n</code></pre>\n\n<p>to run that specific task, or alternatively mark it as the default task:</p>\n\n<pre><code>namespace :db do\n  task :test1 do\n    puts \"hello\"\n  end\nend\n\ntask :default =&gt; ['db:test1']\n</code></pre>\n\n<p>and run with</p>\n\n<pre><code>rake -f main.rake\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 9060134, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/06d93febaaf8284b9cfd2c6be69c2da5?s=128&d=identicon&r=PG&f=1", "display_name": "Kakki", "link": "https://stackoverflow.com/users/9060134/kakki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513051523, "creation_date": 1513051019, "question_id": 47765129, "link": "https://stackoverflow.com/questions/47765129/simple-rake-task-causes-an-exception-not-a-rails-app", "title": "Simple rake task causes an exception. Not a Rails app", "body": "<p>I have a Roda app where I have a file \"tasks/rake\" with a simple content:</p>\n\n<pre><code>namespace :db do\n  task :test1 do\n    puts \"hello\"\n  end\nend\n</code></pre>\n\n<p>Running \"rake -f tasks/main.rake\" causes an exception:</p>\n\n<pre><code>rake aborted!\nDon't know how to build task 'default' (see --tasks)\n/home/user123/.gem/ruby/2.4.2/gems/rake-12.3.0/exe/rake:27:in `&lt;top (required)&gt;'\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>How to fix this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 361, "user_id": 6665764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wh8CZ.jpg?s=128&g=1", "display_name": "inveterateliterate", "link": "https://stackoverflow.com/users/6665764/inveterateliterate"}, "is_accepted": true, "score": 3, "last_activity_date": 1513052088, "last_edit_date": 1513052088, "creation_date": 1513051288, "answer_id": 47765159, "question_id": 47765097, "link": "https://stackoverflow.com/questions/47765097/ruby-on-rails-nested-parameters-permition/47765159#47765159", "title": "Ruby on Rails, nested parameters permition", "body": "<p>Your <code>has_many</code> call at the top of your <code>Saloon</code> class should pluralize <code>saloon_address</code> like so:</p>\n\n<pre><code>class Saloon &lt; ApplicationRecord    \n   has_many :saloon_addresses\n\n   accepts_nested_attributes_for :saloon_address\nend\n</code></pre>\n\n<p>Likewise, your attributes in the params should be pluralized:</p>\n\n<pre><code>def saloon_params\n  params.require(:saloon).permit(:name, :specialty, :online, :services, :average_price, :telephone, saloon_addresses_attributes: [:saloon_id, :street, :complement, :number, :city, :state, :zip_code, :latitude, :longitude])\nend\n</code></pre>\n\n<p>Lastly I don't know if this was just a typing error when you wrote the question, but <code>saloon_address</code> appears to be mispelled in the error (extra s). That would be an issue if you have mistyped the model like that somewhere in the code.</p>\n\n<blockquote>\n  <p>Unpermitted parameter: :saloon_addresss</p>\n</blockquote>\n"}], "owner": {"reputation": 135, "user_id": 827322, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8f1456c0e215c0109c1f6acb0167cca7?s=128&d=identicon&r=PG", "display_name": "user827322", "link": "https://stackoverflow.com/users/827322/user827322"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 47765159, "answer_count": 1, "score": 0, "last_activity_date": 1513131925, "creation_date": 1513050787, "last_edit_date": 1513131925, "question_id": 47765097, "link": "https://stackoverflow.com/questions/47765097/ruby-on-rails-nested-parameters-permition", "title": "Ruby on Rails, nested parameters permition", "body": "<p>i'm trying to save in my database some informations in a model, that have another model, like so:</p>\n\n<pre><code>class Saloon &lt; ApplicationRecord    \n   has_many :saloon_address\n\n   accepts_nested_attributes_for :saloon_address\nend\n</code></pre>\n\n<p>and it has addresses:</p>\n\n<pre><code>class SaloonAddress &lt; ApplicationRecord\n    belongs_to :saloon\nend\n</code></pre>\n\n<p>and this is my view:</p>\n\n<pre><code>&lt;%= form_with scope: :saloon, local: true, :url =&gt; \"/saloon\" do |form| %&gt;\n    &lt;p&gt;\n        &lt;%= form.label :name %&gt;&lt;br&gt;\n        &lt;%= form.text_field :name %&gt;\n    &lt;/p&gt;\n\n    &lt;p&gt;\n        &lt;%= form.label :specialty %&gt;&lt;br&gt;\n        &lt;%= form.text_field :specialty %&gt;\n    &lt;/p&gt;\n\n    &lt;p&gt;\n        &lt;%= form.label :services %&gt;&lt;br&gt;\n        &lt;%= form.text_field :services %&gt;\n    &lt;/p&gt;\n\n    &lt;p&gt;\n        &lt;%= form.label :telephone %&gt;&lt;br&gt;\n        &lt;%= form.text_field :telephone %&gt;\n    &lt;/p&gt;\n\n    &lt;p&gt;\n        &lt;%= form.label :online %&gt;&lt;br&gt;\n        &lt;%= form.check_box :online %&gt;\n    &lt;/p&gt;\n\n    &lt;%= form.fields_for :saloon_address do |address| %&gt;\n        &lt;p&gt;\n            &lt;%= address.label :zip_code %&gt;&lt;br&gt;\n            &lt;%= address.text_field :zip_code %&gt;\n        &lt;/p&gt;\n        &lt;p&gt;\n            &lt;%= address.label :street %&gt;&lt;br&gt;\n            &lt;%= address.text_field :street %&gt;\n        &lt;/p&gt;\n        &lt;p&gt;\n            &lt;%= address.label :complement %&gt;&lt;br&gt;\n            &lt;%= address.text_field :complement %&gt;\n        &lt;/p&gt;\n        &lt;p&gt;\n            &lt;%= address.label :number %&gt;&lt;br&gt;\n            &lt;%= address.text_field :number %&gt;\n        &lt;/p&gt;\n        &lt;p&gt;\n            &lt;%= address.label :city %&gt;&lt;br&gt;\n            &lt;%= address.text_field :city %&gt;\n        &lt;/p&gt;\n        &lt;p&gt;\n            &lt;%= address.label :state %&gt;&lt;br&gt;\n            &lt;%= address.text_field :state %&gt;\n        &lt;/p&gt;\n        &lt;p&gt;\n            &lt;%= address.label :zip_code %&gt;&lt;br&gt;\n            &lt;%= address.text_field :zip_code %&gt;\n        &lt;/p&gt;\n    &lt;% end %&gt;\n\n    &lt;p&gt;\n        &lt;%= form.submit %&gt;\n    &lt;/p&gt;\n &lt;% end %&gt;\n</code></pre>\n\n<p>and my controller:</p>\n\n<pre><code>class SaloonController &lt; ApplicationController\n    def new\n    end\n\n    def show\n        @saloon = Saloon.find params[:id]\n    end\n\n    def index\n        @saloons = Saloon.all\n    end\n\n    def create\n        @saloon = Saloon.create(saloon_params)\n        redirect_to @saloon\n    end\n\n    private \n\n    def saloon_params\n        params.require(:saloon).permit(:name, :specialty, :online, :services, :average_price, :telephone,\n            saloon_address_attributes: [:saloon_id, :street, :complement, :number, :city, :state, :zip_code, :latitude, :longitude])\n    end\nend\n</code></pre>\n\n<p>but when i try to save, i always get the message:</p>\n\n<blockquote>\n  <p>Unpermitted parameter: :saloon_addresss</p>\n</blockquote>\n\n<p>any ideias of what is happening?</p>\n\n<p>I've searched and tried so many different ways to permit, but i couldn't achieve it.</p>\n\n<p><strong>Update</strong></p>\n\n<p>I've done like the first answer:</p>\n\n<pre><code>class Saloon &lt; ApplicationRecord    \n    has_many :saloon_addresses\n\n    accepts_nested_attributes_for :saloon_addresses\nend\n</code></pre>\n\n<p>But now i'm getting this error:</p>\n\n<pre><code>Started POST \"/saloon\" for 127.0.0.1 at 2017-12-13 00:21:25 -0200\nProcessing by SaloonController#create as HTML\nParameters: {\"utf8\"=&gt;\"\u2713\", \n\"authenticity_token\"=&gt;\"uF10p+ZHFiuard/CPxlt/yDgWhfzg2ttxdAWB81JTgLb+rC3ZTY+sNAgOWG3HRE8VKzHYP09QjkrL4ZMxQ3FFw==\", \"saloon\"=&gt;{\"name\"=&gt;\"asdjha\", \"specialty\"=&gt;\"dsakhadksj\", \"services\"=&gt;\"sdakha\", \"telephone\"=&gt;\"21312312\", \"online\"=&gt;\"1\", \"saloon_addresses\"=&gt;{\"zip_code\"=&gt;\"213213\", \"street\"=&gt;\"sadasjdsa\", \"complement\"=&gt;\"dsakhjdkasjh\", \"number\"=&gt;\"23\", \"city\"=&gt;\"sadjh\", \"state\"=&gt;\"sadhj\"}}, \"commit\"=&gt;\"Save Saloon\"}\nCompleted 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)\n\n\n\nActiveRecord::AssociationTypeMismatch (SaloonAddress(#70246611463840) expected, got [\"street\", \"sadasjdsa\"] which is an instance of Array(#70246530918320)):\n\napp/controllers/saloon_controller.rb:14:in `create'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "authentication"], "comments": [{"owner": {"reputation": 800, "user_id": 1296731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15c5fb48bb7bde61c4113e386bffe571?s=128&d=identicon&r=PG", "display_name": "s3tjan", "link": "https://stackoverflow.com/users/1296731/s3tjan"}, "edited": false, "score": 0, "creation_date": 1513052937, "post_id": 47765077, "comment_id": 82491974, "body": "Are you sure there are no users with the same <code>name</code>?"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1513057055, "post_id": 47765077, "comment_id": 82493066, "body": "Check <code>User.where(name: params[:session][:name].downcase).count</code>. If it is more than 1, fix your controller logic."}], "answers": [{"tags": [], "owner": {"reputation": 74, "user_id": 6392323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b186c66fda6d1a2d20732a8d8fe0503e?s=128&d=identicon&r=PG&f=1", "display_name": "theberbie", "link": "https://stackoverflow.com/users/6392323/theberbie"}, "is_accepted": false, "score": 0, "last_activity_date": 1513051620, "creation_date": 1513051620, "answer_id": 47765197, "question_id": 47765077, "link": "https://stackoverflow.com/questions/47765077/ruby-on-rails-check-user-active-before-login/47765197#47765197", "title": "Ruby on Rails - Check user active before login", "body": "<p>I don't have enough points to add a comment, but I'd like to ask you whether you are using Devise? </p>\n\n<p>If you are, you can add a filter to the controller:</p>\n\n<p><code>before_action :authenticate_user!</code> You can also specify which methods to apply to the filter </p>\n\n<p><code>before_action :authenticate_user!, only: [:index]</code></p>\n\n<p>Hope this helps</p>\n"}, {"tags": [], "owner": {"reputation": 546, "user_id": 8557909, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ToZLBvHWDiU/AAAAAAAAAAI/AAAAAAAAB4I/Utfioowi5sg/photo.jpg?sz=128", "display_name": "Ahmad Ali", "link": "https://stackoverflow.com/users/8557909/ahmad-ali"}, "is_accepted": false, "score": 0, "last_activity_date": 1513058867, "creation_date": 1513058867, "answer_id": 47766297, "question_id": 47765077, "link": "https://stackoverflow.com/questions/47765077/ruby-on-rails-check-user-active-before-login/47766297#47766297", "title": "Ruby on Rails - Check user active before login", "body": "<p>I think it would be better if we leave the implementation of create in session_controller as devise provides. As you already making a find query to the user, lets make it in before_action in sessions_controller. It will fulfil your requirement to check state before checking user credentials.</p>\n\n<p><em>in sessions_controller</em></p>\n\n<pre><code>before_action :authenticate_user_state, only: [:create]\n\nprivate\n\ndef authenticate_user_state\n  user = User.find_by name: params[:session][:name].downcase\n\n  redirect_to new_user_session_path, alert: 'Login Failed'\nend\n</code></pre>\n\n<p>I hope that helps you.</p>\n"}], "owner": {"reputation": 498, "user_id": 5468335, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/635925496550308/picture?type=large", "display_name": "dungmidside", "link": "https://stackoverflow.com/users/5468335/dungmidside"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1011, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1513058867, "creation_date": 1513050652, "question_id": 47765077, "link": "https://stackoverflow.com/questions/47765077/ruby-on-rails-check-user-active-before-login", "title": "Ruby on Rails - Check user active before login", "body": "<p>I'm trying to check attribute <code>state</code> of model <code>user</code> before successful login (name &amp; pass correct). Using sessions <code>sessions_controler</code>\n<br>\nUser model</p>\n\n<pre><code>class User &lt; ApplicationRecord\n    has_secure_password\nend\n</code></pre>\n\n<p>Migration</p>\n\n<pre><code>class CreateUsers &lt; ActiveRecord::Migration[5.1]\n    def change\n        create_table :users do |t|\n            t.string :name\n            t.string :email\n            t.string :password_digest\n            t.integer :type\n            t.integer :state\n\n            t.timestamps\n        end\n    end\nend\n</code></pre>\n\n<p>My <code>session_controller</code> create action ( state = 0:inactive / 1: active)</p>\n\n<pre><code>def create\n    user = User.find_by name: params[:session][:name].downcase\n\n    if user &amp;&amp; user.authenticate(params[:session][:password]) &amp;&amp; user.state == 1\n        flash[:success] = \"Login successed\"\n        log_in user\n        redirect_to user\n    else\n        flash[:danger] = \"Login failed\"\n        render :new\n    end\nend\n</code></pre>\n\n<p>Rails routes</p>\n\n<pre><code>get 'login' =&gt; 'sessions#new'\npost \"login\" =&gt; \"sessions#create\"\n</code></pre>\n\n<p>But result of <code>user.state == 1</code> in <code>session_controller</code> always <code>false</code>. I am sure that user I used for checking have <code>state 1</code> in database.\n<br>\nThanks everyone for helping</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 37, "user_id": 8222717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51dd09bddee8e02ebea634a9225f92a7?s=128&d=identicon&r=PG&f=1", "display_name": "Math2Hard", "link": "https://stackoverflow.com/users/8222717/math2hard"}, "reply_to_user": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1513050595, "post_id": 47764890, "comment_id": 82491422, "body": "The specific problem I was having is during the @db.prepare portion, it throws out that the database column doesn&#39;t exist."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1513071042, "post_id": 47764890, "comment_id": 82499459, "body": "Ouch. Never <i>ever</i> use a fast hash such as SHA256 for password hashing. Always use a password hashing algorithm for password hashing, such as bcrypt (well-reviewed, well-tested, well-known, well-understood, but not fully resistant to the ever-growing computing power of GPGPUs) or scrypt (resistant to GPGPU,  but younger and thus less well-researched and tested). Also, never <i>ever</i> store password hashes unsalted."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 8222717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51dd09bddee8e02ebea634a9225f92a7?s=128&d=identicon&r=PG&f=1", "display_name": "Math2Hard", "link": "https://stackoverflow.com/users/8222717/math2hard"}, "edited": false, "score": 0, "creation_date": 1513050795, "post_id": 47764944, "comment_id": 82491467, "body": "This was my idea as well, but I don&#39;t have writing permission."}], "tags": [], "owner": {"reputation": 31012, "user_id": 25398, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3690dee254e9aa9d98ff964a70e89f23?s=128&d=identicon&r=PG", "display_name": "Cody Caughlan", "link": "https://stackoverflow.com/users/25398/cody-caughlan"}, "is_accepted": false, "score": 3, "last_activity_date": 1513049565, "creation_date": 1513049565, "answer_id": 47764944, "question_id": 47764890, "link": "https://stackoverflow.com/questions/47764890/ruby-password-hashing/47764944#47764944", "title": "Ruby password hashing", "body": "<p>Use <code>bcrypt</code> for password storage, hashing validation.</p>\n\n<p>Using BCrypt for password hashing has several advantages over the builtin Digest classes. Also it the built-in security. Passwords are automatically salted. Furthermore, BCrypt has a parameter cost which exponentially scales the computation time.</p>\n\n<pre><code>gem install bcrypt\n</code></pre>\n\n<p>An example:</p>\n\n<h3>The <em>User</em> model</h3>\n\n<pre><code>require 'bcrypt'\n\nclass User &lt; ActiveRecord::Base\n  # users.password_hash in the database is a :string\n  include BCrypt\n\n  def password\n    @password ||= Password.new(password_hash)\n  end\n\n  def password=(new_password)\n    @password = Password.create(new_password)\n    self.password_hash = @password\n  end\nend\n</code></pre>\n\n<h3>Creating an account</h3>\n\n<pre><code>def create\n  @user = User.new(params[:user])\n  @user.password = params[:password]\n  @user.save!\nend\n</code></pre>\n\n<h3>Authenticating a user</h3>\n\n<pre><code>def login\n  @user = User.find_by_email(params[:email])\n  if @user.password == params[:password]\n    give_token\n  else\n    redirect_to home_url\n  end\nend\n</code></pre>\n\n<p>Links: <a href=\"https://github.com/codahale/bcrypt-ruby\" rel=\"nofollow noreferrer\">https://github.com/codahale/bcrypt-ruby</a></p>\n"}], "owner": {"reputation": 37, "user_id": 8222717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51dd09bddee8e02ebea634a9225f92a7?s=128&d=identicon&r=PG&f=1", "display_name": "Math2Hard", "link": "https://stackoverflow.com/users/8222717/math2hard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1804, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1513049565, "creation_date": 1513049221, "question_id": 47764890, "link": "https://stackoverflow.com/questions/47764890/ruby-password-hashing", "title": "Ruby password hashing", "body": "<p>I'm having trouble correctly hashing the passwords for new users that register on to a makeshift website. Users have a username, password and an avatar which is loaded via filename and subsequently stored onto an SQL database. Any help would be appreciated.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>    def register(user, filename, file, password, confirm)\n      if(password != confirm) then return false end\n      if(not_found(user) == user) \n        user = html_clean(user)\n        password = html_clean(password)\n        upload_file(filename, file)\n        n = SecureRandom.hex\n        p = password + n\n        hashed = Digest::SHA256.hexdigest p\n        @db.prepare(\"INSERT INTO Users VALUES(?,?,#{filename},\n       {n}\\\")\").execute([user,hashed])\n      end\n      true\n    end  \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "data-structures", "min-heap"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1513044675, "post_id": 47764124, "comment_id": 82490077, "body": "There is a simple difference between the two snippets: the second doesn&#39;t do anything. It is unclear what further information you seek."}, {"owner": {"reputation": 1, "user_id": 6495639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49d4ec6cc14289e9cfc6032b5d3a2e0c?s=128&d=identicon&r=PG&f=1", "display_name": "Marie-&#201;lise", "link": "https://stackoverflow.com/users/6495639/marie-%c3%89lise"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1513046974, "post_id": 47764124, "comment_id": 82490588, "body": "Ah, ok. I thought the second version would create a root node, like in a binary search tree."}], "owner": {"reputation": 1, "user_id": 6495639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49d4ec6cc14289e9cfc6032b5d3a2e0c?s=128&d=identicon&r=PG&f=1", "display_name": "Marie-&#201;lise", "link": "https://stackoverflow.com/users/6495639/marie-%c3%89lise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1513042858, "creation_date": 1513042858, "question_id": 47764124, "link": "https://stackoverflow.com/questions/47764124/minheap-which-approach-is-best-when-adding-nodes-to-an-array", "title": "MinHeap: which approach is best when adding nodes to an array?", "body": "<p>I'm working on building a minheap in Ruby and was wondering what the implications would be of using the push method vs an assignment operator. (This is just a theoretical question to understand Ruby better!)</p>\n\n<pre><code>@items = Array.new()\n\ndef insert(node)\n  if @items.empty?\n    @items.push(node)\n  end \nend \n\ndef insert(node)\n  if @items.empty?\n    root = node \n  end \nend \n</code></pre>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "video"], "answers": [{"tags": [], "owner": {"reputation": 947, "user_id": 1730761, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/WlcFp.jpg?s=128&g=1", "display_name": "yeuem1vannam", "link": "https://stackoverflow.com/users/1730761/yeuem1vannam"}, "is_accepted": true, "score": 1, "last_activity_date": 1513044188, "creation_date": 1513044188, "answer_id": 47764289, "question_id": 47764099, "link": "https://stackoverflow.com/questions/47764099/ror-randomise-video-to-play-on-homepage/47764289#47764289", "title": "RoR - Randomise Video to play on homepage", "body": "<p>Your code is straightforward to the solution, but you have to fix 3 points:</p>\n\n<ul>\n<li>Your random logic does not work as you think. Your <code>@videos</code> just an array of string <code>\"app/assets/videos\"</code>, not array of files</li>\n<li>You should use <code>video_tag</code> with your random-ed video. Since you use it with <code>\"test-3.mp4, test-4.mp4\"</code> string, that why it generated a wrong video HTML. </li>\n<li>The <code>video_tag</code> need video file name, not file, so again your random logic did not solve it.</li>\n</ul>\n\n<p>To achieve the result, </p>\n\n<ul>\n<li><p>Your random logic should look like</p>\n\n<pre><code>videos = Dir.glob(\"#{Rails.root}/app/assets/videos/*.mp4\")\nrandom_video_path = videos.sample\n@random_video_name = File.basename(random_video_path)\n</code></pre></li>\n<li><p>And use it in your view</p>\n\n<pre><code>&lt;%= video_tag @random_video_name, autoplay: true, loop: true, muted: true, class: \"video\" %&gt;\n</code></pre></li>\n</ul>\n\n<p>Rails will do the rest for you, including generating the correct video URL.</p>\n"}], "owner": {"reputation": 111, "user_id": 6433334, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/10154054040866294/picture?type=large", "display_name": "Biggztyle", "link": "https://stackoverflow.com/users/6433334/biggztyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 47764289, "answer_count": 1, "score": 1, "last_activity_date": 1513044188, "creation_date": 1513042629, "question_id": 47764099, "link": "https://stackoverflow.com/questions/47764099/ror-randomise-video-to-play-on-homepage", "title": "RoR - Randomise Video to play on homepage", "body": "<p>Trying to serve a random video on each time a user either comes to the website or refreshes the homepage. This will allow it to look different and refreshing each time.</p>\n\n<p><strong>Current code for the home.html</strong></p>\n\n<pre><code>&lt;div class=\"home-banner basic-banner static video-container hidden-xs hidden-sm\"&gt;\n\n    &lt;%= @random_video %&gt;&lt;%= video_tag \"test-3.mp4, test-4.mp4\", autoplay: true, loop: true, muted: true, class: \"video\" %&gt;\n    &lt;div class=\"container\"&gt;\n        &lt;div class=\"title text-center\"&gt;\n            &lt;h1 class=\"border border-color-white border-thick\"&gt;PARADISE&lt;br&gt;BELOW&lt;/h1&gt;\n        &lt;/div&gt;\n    &lt;/div&gt; \n&lt;/div&gt;\n</code></pre>\n\n<p>Videos are coming from /app/assets/videos/</p>\n\n<p><strong>Static Controller</strong></p>\n\n<pre><code>  def home\n    @tour_category = TourCategory.all\n       @videos  = [\"app/assets/videos\"]\n       @random_no = rand(2)\n       @random_video = @videos[@random_no]\n  end\n</code></pre>\n\n<p>The random functions works, although it only displays the title of the video on on load or refresh. example: test-3.mp4 , refresh : test-4.mp4</p>\n\n<p>So now its only to get the videos to play correctly instead of showing the title.</p>\n\n<p>Been looking at this for help: <a href=\"http://www.java2s.com/Code/Ruby/Rails/Displayrandomimage.htm\" rel=\"nofollow noreferrer\">http://www.java2s.com/Code/Ruby/Rails/Displayrandomimage.htm</a></p>\n\n<p>Thanks for the help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7654186, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pAWpr.jpg?s=128&g=1", "display_name": "Mari Sava", "link": "https://stackoverflow.com/users/7654186/mari-sava"}, "is_accepted": false, "score": 0, "last_activity_date": 1570626132, "last_edit_date": 1570626132, "creation_date": 1570625856, "answer_id": 58304688, "question_id": 47763385, "link": "https://stackoverflow.com/questions/47763385/could-not-find-railties-4-2/58304688#58304688", "title": "Could not find &#39;railties&#39; (= 4.2)", "body": "<p><code>gem install railties</code> - it should fix your problem. At least it helped me</p>\n"}, {"tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": false, "score": 0, "last_activity_date": 1570626279, "creation_date": 1570626279, "answer_id": 58304840, "question_id": 47763385, "link": "https://stackoverflow.com/questions/47763385/could-not-find-railties-4-2/58304840#58304840", "title": "Could not find &#39;railties&#39; (= 4.2)", "body": "<p>You get the error because you have explicitly specified that you want to use the <code>rails</code> executable from the gem with version 4.2 on your command line.</p>\n\n<p>Rubygems doesn't resolve approximate versions here. Instead, you have to specify the exact version you want to use (or omit the version from the command line to use the executable from the newest version of the gem installed.</p>\n\n<p>Thus, you can use</p>\n\n<pre><code>rails _4.2.7.1_ new my_app\n</code></pre>\n\n<p>or (given that Rails 4.2.7.1 is the newest version of the rails gem installed to your computer), you can also just use</p>\n\n<pre><code>rails new my_app\n</code></pre>\n"}], "owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1570626279, "creation_date": 1513036779, "last_edit_date": 1513037322, "question_id": 47763385, "link": "https://stackoverflow.com/questions/47763385/could-not-find-railties-4-2", "title": "Could not find &#39;railties&#39; (= 4.2)", "body": "<p>I try to create a new Rails application with Rails 4.2:</p>\n\n<pre><code>$ rails _4.2_ new my_app\n</code></pre>\n\n<p>I get the following error:</p>\n\n<blockquote>\n  <p>/Users/myuser/.rvm/rubies/ruby-2.1.2/lib/ruby/2.1.0/rubygems/dependency.rb:298:in\n  `to_specs': Could not find 'railties' (= 4.2) - did find:\n  [railties-4.2.7.1,railties-4.1.10,railties-4.1.5,railties-4.1.0.beta2]\n  (Gem::LoadError)</p>\n</blockquote>\n\n<p>These are the railties I have:</p>\n\n<pre><code>$ gem list | grep railties\nrailties (4.2.7.1, 4.1.10, 4.1.5, 4.1.0.beta2)\n</code></pre>\n\n<p>Why is it demanding that I use railties 4.2 and not one of the others I have, such as 4.2.7.1?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "variables", "methods", "integration-testing"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 7155188, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10155315097260606/picture?type=large", "display_name": "Sarah Kim", "link": "https://stackoverflow.com/users/7155188/sarah-kim"}, "edited": false, "score": 0, "creation_date": 1513140841, "post_id": 47764222, "comment_id": 82532650, "body": "That&#39;s a completely idiotic mistake lol Thanks for catching that. Now that&#39;s fixed, I&#39;m getting another error on superclass mismatch for LoginTest as a type error...."}, {"owner": {"reputation": 800, "user_id": 1296731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15c5fb48bb7bde61c4113e386bffe571?s=128&d=identicon&r=PG", "display_name": "s3tjan", "link": "https://stackoverflow.com/users/1296731/s3tjan"}, "reply_to_user": {"reputation": 21, "user_id": 7155188, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10155315097260606/picture?type=large", "display_name": "Sarah Kim", "link": "https://stackoverflow.com/users/7155188/sarah-kim"}, "edited": false, "score": 0, "creation_date": 1513168438, "post_id": 47764222, "comment_id": 82547142, "body": "Glad to help! :) Could you be more specific about the new error you are getting..."}, {"owner": {"reputation": 800, "user_id": 1296731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15c5fb48bb7bde61c4113e386bffe571?s=128&d=identicon&r=PG", "display_name": "s3tjan", "link": "https://stackoverflow.com/users/1296731/s3tjan"}, "reply_to_user": {"reputation": 21, "user_id": 7155188, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10155315097260606/picture?type=large", "display_name": "Sarah Kim", "link": "https://stackoverflow.com/users/7155188/sarah-kim"}, "edited": false, "score": 0, "creation_date": 1513432063, "post_id": 47764222, "comment_id": 82656630, "body": "have you able to solve your issue with above solution?"}], "tags": [], "owner": {"reputation": 800, "user_id": 1296731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15c5fb48bb7bde61c4113e386bffe571?s=128&d=identicon&r=PG", "display_name": "s3tjan", "link": "https://stackoverflow.com/users/1296731/s3tjan"}, "is_accepted": false, "score": 0, "last_activity_date": 1513043653, "creation_date": 1513043653, "answer_id": 47764222, "question_id": 47763323, "link": "https://stackoverflow.com/questions/47763323/integration-test-rails-error-undefined-local-variable-or-method-login-form-pat/47764222#47764222", "title": "Integration Test Rails Error: undefined local variable or method &quot;login_form_path&quot;", "body": "<p>You are missing <code>do</code> in your test: <code>test 'bob cannot login with bad password'</code></p>\n\n<pre><code>test 'bob cannot login with bad password' do\n  get login_form_path\n  assert_response :success\n\n  login(@bob.email, 'bad_password')\n\n  assert_template 'login_form'\nend\n</code></pre>\n\n<p>See the first example of the <a href=\"http://api.rubyonrails.org/v5.1/classes/ActionDispatch/IntegrationTest.html\" rel=\"nofollow noreferrer\">ActionDispatch::IntegrationTest</a> API documentation for more information</p>\n"}], "owner": {"reputation": 21, "user_id": 7155188, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10155315097260606/picture?type=large", "display_name": "Sarah Kim", "link": "https://stackoverflow.com/users/7155188/sarah-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513043653, "creation_date": 1513036383, "question_id": 47763323, "link": "https://stackoverflow.com/questions/47763323/integration-test-rails-error-undefined-local-variable-or-method-login-form-pat", "title": "Integration Test Rails Error: undefined local variable or method &quot;login_form_path&quot;", "body": "<p>I keep getting an error on:\nMy routes file has login_form already. What am I missing on? What is this error?</p>\n\n<pre><code>`&lt;class:LoginTest&gt;': undefined local variable or method `login_form_path' for LoginTest:Class (NameError)\n</code></pre>\n\n<p>In my login_test.rb, I have:</p>\n\n<pre><code>require 'test_helper'\n\nclass LoginTest &lt; ActionDispatch::IntegrationTest\n  setup do\n    @bob = user(:bob)\n  end\n\n  test 'bob can login' do\n    get login_form_path\n    assert_response :success\n\n    login(@bob.email, 'abc123')\n\n    assert_template 'show_user'\n  end\n\n  test 'bob cannot login with bad password'\n    get login_form_path\n    assert_response :success\n\n    login(@bob.email, 'bad_password')\n\n    assert_template 'login_form'\n  end\n</code></pre>\n\n<p>In my routes.rb:</p>\n\n<pre><code>Rails.application.routes.draw do\n  resources :logins\n  resources :users\n  root 'html#login_form'\n  get '/login', to: 'html#login_form', as: :login_form\n  post '/login', to: 'sessions#create_session', as: :create_session\n  get '/logout', to: 'sessions#destroy_session', as: :destroy_session\n  get '/users/:id', to: 'html#show_user', as: :show_user\n  get '/accounts/:id', to: 'html#show_account', as: :show_account\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "namespaces"], "answers": [{"tags": [], "owner": {"reputation": 487, "user_id": 1212793, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/VTr5Z.jpg?s=128&g=1", "display_name": "bgottlob", "link": "https://stackoverflow.com/users/1212793/bgottlob"}, "is_accepted": true, "score": 1, "last_activity_date": 1513052033, "creation_date": 1513052033, "answer_id": 47765247, "question_id": 47763287, "link": "https://stackoverflow.com/questions/47763287/two-ruby-gems-using-the-same-namespace/47765247#47765247", "title": "Two Ruby gems using the same namespace", "body": "<p>This seems like a perfectly acceptable way to structure your gems. In your code sample, <code>Foo::Bar</code> and <code>Foo::Baz</code> will be two completely different classes within the same namespace, and they will not clash with each other. This is true even if you used the same method names within the two classes:</p>\n\n<pre><code>module Foo\n  class Bar\n    def do_thing\n      puts \"Bar!\"\n    end\n  end\nend\n\nmodule Foo\n  class Baz\n    def do_thing\n      puts \"Baz!\"\n    end\n  end\nend\n</code></pre>\n\n<p>In this modified example, <code>Foo::Bar#do_thing</code> will output <code>\"Bar!\"</code> and <code>Foo::Baz#do_thing</code> will output <code>\"Baz!\"</code>, since they are separate methods in separate classes. This approach allows you to swap out <code>Foo::Baz</code> objects for <code>Foo::Bar</code> objects to change behavior, since they have the same interface.</p>\n\n<p>If you wanted your third-party API gem to extend the functionality of your vanilla API gem, you may want to consider adjusting your approach to use inheritance.</p>\n"}], "owner": {"reputation": 133, "user_id": 5500952, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd5656e612529f90cfe0e5e8ea9dcb35?s=128&d=identicon&r=PG&f=1", "display_name": "tjukes", "link": "https://stackoverflow.com/users/5500952/tjukes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "accepted_answer_id": 47765247, "answer_count": 1, "score": 1, "last_activity_date": 1513052033, "creation_date": 1513036102, "question_id": 47763287, "link": "https://stackoverflow.com/questions/47763287/two-ruby-gems-using-the-same-namespace", "title": "Two Ruby gems using the same namespace", "body": "<p>I am creating two gems that wrap the same API. One is a vanilla client library that just wraps API endpoints, the second integrates with a third-party API and provides another layer of abstraction over the first. They do not have any overlapping methods. </p>\n\n<p>Is it considered acceptable for the second to extend the namespace of the first? </p>\n\n<p>For example: </p>\n\n<pre><code># vanilla client lib\nmodule Foo\n  class Bar\n    def do_bar\n      puts \"Bar!\"\n    end\n  end\nend\n\n# more complex client lib\nmodule Foo\n  class Baz\n    def do_baz\n      puts \"Baz!\"\n    end\n  end\nend\n</code></pre>\n\n<p>Based on <a href=\"https://stackoverflow.com/questions/8112045/load-two-ruby-modules-gems-with-the-same-name\">this question</a> it looks like AWS does this. Are there cases where this is okay and where it isn't?</p>\n"}, {"tags": ["ruby", "rails-activerecord"], "answers": [{"tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 0, "last_activity_date": 1513049290, "creation_date": 1513049290, "answer_id": 47764903, "question_id": 47762890, "link": "https://stackoverflow.com/questions/47762890/querying-with-activerecord-enum/47764903#47764903", "title": "Querying with ActiveRecord Enum", "body": "<p>You might have been looking at the <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Enum.html\" rel=\"nofollow noreferrer\">Rails 5 documentation for ActiveRecord::Enum</a> while intending to use the <a href=\"http://api.rubyonrails.org/v4.2.6/classes/ActiveRecord/Enum.html\" rel=\"nofollow noreferrer\">Rails 4.2.6 documentation for ActiveRecord::Enum</a>. In Rails 4.2.6, the docs state:</p>\n\n<blockquote>\n  <p>Where conditions on an enum attribute must use the ordinal value of an enum.</p>\n</blockquote>\n\n<p>and don't show any examples of what you're doing, whereas in the Rails 5 docs, that statement about requiring the ordinal value is missing and they <em>do</em> show the examples you're using.</p>\n"}], "owner": {"reputation": 1648, "user_id": 1610548, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a1572f89ae593aefced85b8494479098?s=128&d=identicon&r=PG", "display_name": "rept", "link": "https://stackoverflow.com/users/1610548/rept"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 47764903, "answer_count": 1, "score": 0, "last_activity_date": 1513049290, "creation_date": 1513033667, "question_id": 47762890, "link": "https://stackoverflow.com/questions/47762890/querying-with-activerecord-enum", "title": "Querying with ActiveRecord Enum", "body": "<p>I have the following Enum in my model</p>\n\n<pre><code>  enum email_reminders: { disabled_reminders: 0, default_reminders: 1, friendly_reminders: 2 }\n</code></pre>\n\n<p>When I do :</p>\n\n<pre><code>Company.where.not(email_reminders: :disabled_reminders).to_sql\n</code></pre>\n\n<p>I get this result:</p>\n\n<pre><code> =&gt; \"SELECT \\\"companies\\\".* FROM \\\"companies\\\" WHERE (\\\"companies\\\".\\\"email_reminders\\\" != NULL)\"\n</code></pre>\n\n<p>When I do:</p>\n\n<pre><code>Company.where(email_reminders: [:default_reminders, :friendly_reminders]).to_sql\n</code></pre>\n\n<p>I get</p>\n\n<pre><code>=&gt; \"SELECT \\\"companies\\\".* FROM \\\"companies\\\" WHERE \\\"companies\\\".\\\"email_reminders\\\" IN (NULL, NULL)\"\n</code></pre>\n\n<p>According to the documentation this should work fine?  I'm using ActiveRecord 4.2.6</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ssh"], "comments": [{"owner": {"reputation": 4998, "user_id": 1404425, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/wsCfz.jpg?s=128&g=1", "display_name": "Arman H", "link": "https://stackoverflow.com/users/1404425/arman-h"}, "edited": false, "score": 1, "creation_date": 1513046783, "post_id": 47762814, "comment_id": 82490543, "body": "Your server is specified as <code>45.33.11.11</code>, but the SSH is timing out from <code>45.79.147.60</code>. Are you certain that your server IP is correct in the deploy file? Did you set up your SSH key (<code>~&#47;.ssh&#47;id_rsa.pub</code>) to work with your server?"}, {"owner": {"reputation": 189, "user_id": 3980673, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9cb0521b3e34887ea0ff6b88094b2bb7?s=128&d=identicon&r=PG&f=1", "display_name": "Jan", "link": "https://stackoverflow.com/users/3980673/jan"}, "reply_to_user": {"reputation": 4998, "user_id": 1404425, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/wsCfz.jpg?s=128&g=1", "display_name": "Arman H", "link": "https://stackoverflow.com/users/1404425/arman-h"}, "edited": false, "score": 0, "creation_date": 1513117853, "post_id": 47762814, "comment_id": 82526505, "body": "Yes sorry, I just put these 1s in as a placeholder"}, {"owner": {"reputation": 4998, "user_id": 1404425, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/wsCfz.jpg?s=128&g=1", "display_name": "Arman H", "link": "https://stackoverflow.com/users/1404425/arman-h"}, "edited": false, "score": 1, "creation_date": 1513136519, "post_id": 47762814, "comment_id": 82531667, "body": "Try running the deploy command directly, outside of Capistrano. If it works, your SSH key is not being referenced correctly  by Cap, verify the set up. If it does not work, then something is wrong with the SSH key altogether. Cannot guide you further without any additional debug information."}, {"owner": {"reputation": 189, "user_id": 3980673, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9cb0521b3e34887ea0ff6b88094b2bb7?s=128&d=identicon&r=PG&f=1", "display_name": "Jan", "link": "https://stackoverflow.com/users/3980673/jan"}, "reply_to_user": {"reputation": 4998, "user_id": 1404425, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/wsCfz.jpg?s=128&g=1", "display_name": "Arman H", "link": "https://stackoverflow.com/users/1404425/arman-h"}, "edited": false, "score": 0, "creation_date": 1513196098, "post_id": 47762814, "comment_id": 82563998, "body": "ssh -T git@bitbucket.org and ssh and both ssh -T deploy@45.33.95.53 give me successful responses so I guess the ssh keys are fine. I updated the above question with the feedback for the ssh requests."}, {"owner": {"reputation": 189, "user_id": 3980673, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9cb0521b3e34887ea0ff6b88094b2bb7?s=128&d=identicon&r=PG&f=1", "display_name": "Jan", "link": "https://stackoverflow.com/users/3980673/jan"}, "reply_to_user": {"reputation": 4998, "user_id": 1404425, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/wsCfz.jpg?s=128&g=1", "display_name": "Arman H", "link": "https://stackoverflow.com/users/1404425/arman-h"}, "edited": false, "score": 0, "creation_date": 1513196684, "post_id": 47762814, "comment_id": 82564302, "body": "@ArmanH what do you mean by running the deploy command directly? It is a capistrano specific command..."}, {"owner": {"reputation": 4998, "user_id": 1404425, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/wsCfz.jpg?s=128&g=1", "display_name": "Arman H", "link": "https://stackoverflow.com/users/1404425/arman-h"}, "edited": false, "score": 0, "creation_date": 1513206795, "post_id": 47762814, "comment_id": 82568452, "body": "I meant to try doing a <code>git push</code> to the server directly, which Capistrano does under the hood for you."}, {"owner": {"reputation": 189, "user_id": 3980673, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9cb0521b3e34887ea0ff6b88094b2bb7?s=128&d=identicon&r=PG&f=1", "display_name": "Jan", "link": "https://stackoverflow.com/users/3980673/jan"}, "reply_to_user": {"reputation": 4998, "user_id": 1404425, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/wsCfz.jpg?s=128&g=1", "display_name": "Arman H", "link": "https://stackoverflow.com/users/1404425/arman-h"}, "edited": false, "score": 0, "creation_date": 1513260800, "post_id": 47762814, "comment_id": 82592171, "body": "I think Capistrano pushes from bitbucket to server..."}], "answers": [{"tags": [], "owner": {"reputation": 189, "user_id": 3980673, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9cb0521b3e34887ea0ff6b88094b2bb7?s=128&d=identicon&r=PG&f=1", "display_name": "Jan", "link": "https://stackoverflow.com/users/3980673/jan"}, "is_accepted": true, "score": 1, "last_activity_date": 1513286653, "creation_date": 1513286653, "answer_id": 47822279, "question_id": 47762814, "link": "https://stackoverflow.com/questions/47762814/capistrano-cap-production-deployinitial-netsshconnectiontimeout/47822279#47822279", "title": "Capistrano cap production deploy:initial Net::SSH::ConnectionTimeout", "body": "<p>The problem was that I had two conflicting settings between the deploy.rb and production.rb</p>\n\n<p>make sure that your settings in both files are correct.\nin my production.rb I had the following line:</p>\n\n<pre><code>server '53.33.95.53', user: 'deploy', roles: %w{web app}\n</code></pre>\n\n<p>Which was overwriting the current ip address and was causing the timeout.</p>\n"}], "owner": {"reputation": 189, "user_id": 3980673, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9cb0521b3e34887ea0ff6b88094b2bb7?s=128&d=identicon&r=PG&f=1", "display_name": "Jan", "link": "https://stackoverflow.com/users/3980673/jan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1496, "favorite_count": 0, "accepted_answer_id": 47822279, "answer_count": 1, "score": 0, "last_activity_date": 1513286653, "creation_date": 1513033209, "last_edit_date": 1513196187, "question_id": 47762814, "link": "https://stackoverflow.com/questions/47762814/capistrano-cap-production-deployinitial-netsshconnectiontimeout", "title": "Capistrano cap production deploy:initial Net::SSH::ConnectionTimeout", "body": "<p>I am following this tutorial for setting up a webserver for a simple rails app: <a href=\"https://www.digitalocean.com/community/tutorials/deploying-a-rails-app-on-ubuntu-14-04-with-capistrano-nginx-and-puma\" rel=\"nofollow noreferrer\">https://www.digitalocean.com/community/tutorials/deploying-a-rails-app-on-ubuntu-14-04-with-capistrano-nginx-and-puma</a> with nginx and capistrano.</p>\n\n<p>my deploy.rb file:</p>\n\n<pre><code># Change these\nserver '45.33.11.11', port: 22, roles: [:web, :app, :db], primary: true\n\nset :repo_url,        'git@bitbucket.org:slucha/supplement.git'\nset :application,     'supplementtests'\nset :user,            'deploy'\nset :puma_threads,    [4, 16]\nset :puma_workers,    0\n\n# Don't change these unless you know what you're doing\nset :pty,             true\nset :use_sudo,        false\nset :stage,           :production\nset :deploy_via,      :remote_cache\nset :deploy_to,       \"/home/#{fetch(:user)}/apps/#{fetch(:application)}\"\nset :puma_bind,       \"unix://#{shared_path}/tmp/sockets/#{fetch(:application)}-puma.sock\"\nset :puma_state,      \"#{shared_path}/tmp/pids/puma.state\"\nset :puma_pid,        \"#{shared_path}/tmp/pids/puma.pid\"\nset :puma_access_log, \"#{release_path}/log/puma.error.log\"\nset :puma_error_log,  \"#{release_path}/log/puma.access.log\"\nset :ssh_options,     { forward_agent: true, user: fetch(:user), keys: %w(~/.ssh/id_rsa.pub) }\nset :puma_preload_app, true\nset :puma_worker_timeout, nil\nset :puma_init_active_record, true  # Change to false when not using ActiveRecord\n\n## Defaults:\n# set :scm,           :git\n# set :branch,        :master\n# set :format,        :pretty\n# set :log_level,     :debug\n# set :keep_releases, 5\n\n## Linked Files &amp; Directories (Default None):\n# set :linked_files, %w{config/database.yml}\n# set :linked_dirs,  %w{bin log tmp/pids tmp/cache tmp/sockets vendor/bundle public/system}\n\nnamespace :puma do\n  desc 'Create Directories for Puma Pids and Socket'\n  task :make_dirs do\n    on roles(:app) do\n      execute \"mkdir #{shared_path}/tmp/sockets -p\"\n      execute \"mkdir #{shared_path}/tmp/pids -p\"\n    end\n  end\n\n  before :start, :make_dirs\nend\n\nnamespace :deploy do\n  desc \"Make sure local git is in sync with remote.\"\n  task :check_revision do\n    on roles(:app) do\n      unless `git rev-parse HEAD` == `git rev-parse origin/master`\n        puts \"WARNING: HEAD is not the same as origin/master\"\n        puts \"Run `git push` to sync changes.\"\n        exit\n      end\n    end\n  end\n\n  desc 'Initial Deploy'\n  task :initial do\n    on roles(:app) do\n      before 'deploy:restart', 'puma:start'\n      invoke 'deploy'\n    end\n  end\n\n  desc 'Restart application'\n  task :restart do\n    on roles(:app), in: :sequence, wait: 5 do\n      invoke 'puma:restart'\n    end\n  end\n\n  before :starting,     :check_revision\n  after  :finishing,    :compile_assets\n  after  :finishing,    :cleanup\n  after  :finishing,    :restart\nend\n\n# ps aux | grep puma    # Get puma pid\n# kill -s SIGUSR2 pid   # Restart puma\n# kill -s SIGTERM pid   # Stop puma\n</code></pre>\n\n<p>and Capfile</p>\n\n<pre><code># Load DSL and Setup Up Stages\nrequire 'capistrano/setup'\nrequire 'capistrano/deploy'\n\nrequire 'capistrano/rails'\nrequire 'capistrano/bundler'\nrequire 'capistrano/rvm'\nrequire 'capistrano/puma'\nrequire \"capistrano/scm/git\"\n\n\n\n# Loads custom tasks from `lib/capistrano/tasks' if you have any defined.\nDir.glob('lib/capistrano/tasks/*.rake').each { |r| import r }\n\ninstall_plugin Capistrano::Puma\ninstall_plugin Capistrano::SCM::Git\n</code></pre>\n\n<p>Nginx is installed, ssh keys are set up for both  bitbucket ssh and deploy keys for the repo and rvm ist also installed on the server</p>\n\n<p>The <code>cap staging deploy:check</code> command passes without errors but when I try to run <code>cap production deploy:initial</code> I get the following error</p>\n\n<pre><code>** Invoke production (first_time)\n** Execute production\n** Invoke load:defaults (first_time)\n** Execute load:defaults\n** Invoke bundler:map_bins (first_time)\n** Execute bundler:map_bins\n** Invoke deploy:set_rails_env (first_time)\n** Execute deploy:set_rails_env\n** Invoke deploy:set_linked_dirs (first_time)\n** Execute deploy:set_linked_dirs\n** Invoke deploy:set_rails_env \n** Invoke rvm:hook (first_time)\n** Execute rvm:hook\ncap aborted!\nSSHKit::Runner::ExecuteError: Exception while executing as root@45.79.147.60: Net::SSH::ConnectionTimeout\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/sshkit-1.15.1/lib/sshkit/runners/parallel.rb:15:in `rescue in block (2 levels) in execute'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/sshkit-1.15.1/lib/sshkit/runners/parallel.rb:11:in `block (2 levels) in execute'\nNet::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/net-ssh-4.2.0/lib/net/ssh/transport/session.rb:90:in `rescue in initialize'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/net-ssh-4.2.0/lib/net/ssh/transport/session.rb:57:in `initialize'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/net-ssh-4.2.0/lib/net/ssh.rb:237:in `new'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/net-ssh-4.2.0/lib/net/ssh.rb:237:in `start'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/sshkit-1.15.1/lib/sshkit/backends/connection_pool.rb:59:in `call'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/sshkit-1.15.1/lib/sshkit/backends/connection_pool.rb:59:in `with'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/sshkit-1.15.1/lib/sshkit/backends/netssh.rb:176:in `with_ssh'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/sshkit-1.15.1/lib/sshkit/backends/netssh.rb:129:in `execute_command'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/sshkit-1.15.1/lib/sshkit/backends/abstract.rb:141:in `block in create_command_and_execute'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/sshkit-1.15.1/lib/sshkit/backends/abstract.rb:141:in `tap'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/sshkit-1.15.1/lib/sshkit/backends/abstract.rb:141:in `create_command_and_execute'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/sshkit-1.15.1/lib/sshkit/backends/abstract.rb:55:in `test'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/capistrano-rvm-0.1.2/lib/capistrano/tasks/rvm.rake:21:in `block (3 levels) in &lt;top (required)&gt;'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/sshkit-1.15.1/lib/sshkit/backends/abstract.rb:29:in `instance_exec'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/sshkit-1.15.1/lib/sshkit/backends/abstract.rb:29:in `run'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/sshkit-1.15.1/lib/sshkit/runners/parallel.rb:12:in `block (2 levels) in execute'\nErrno::ETIMEDOUT: Connection timed out - connect(2) for 45.79.147.60:22\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/2.2.0/socket.rb:65:in `connect'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/2.2.0/socket.rb:65:in `connect_internal'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/2.2.0/socket.rb:140:in `connect'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/2.2.0/socket.rb:338:in `block in tcp'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/2.2.0/socket.rb:232:in `each'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/2.2.0/socket.rb:232:in `foreach'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/2.2.0/socket.rb:328:in `tcp'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/net-ssh-4.2.0/lib/net/ssh/transport/session.rb:70:in `initialize'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/net-ssh-4.2.0/lib/net/ssh.rb:237:in `new'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/net-ssh-4.2.0/lib/net/ssh.rb:237:in `start'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/sshkit-1.15.1/lib/sshkit/backends/connection_pool.rb:59:in `call'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/sshkit-1.15.1/lib/sshkit/backends/connection_pool.rb:59:in `with'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/sshkit-1.15.1/lib/sshkit/backends/netssh.rb:176:in `with_ssh'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/sshkit-1.15.1/lib/sshkit/backends/netssh.rb:129:in `execute_command'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/sshkit-1.15.1/lib/sshkit/backends/abstract.rb:141:in `block in create_command_and_execute'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/sshkit-1.15.1/lib/sshkit/backends/abstract.rb:141:in `tap'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/sshkit-1.15.1/lib/sshkit/backends/abstract.rb:141:in `create_command_and_execute'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/sshkit-1.15.1/lib/sshkit/backends/abstract.rb:55:in `test'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/capistrano-rvm-0.1.2/lib/capistrano/tasks/rvm.rake:21:in `block (3 levels) in &lt;top (required)&gt;'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/sshkit-1.15.1/lib/sshkit/backends/abstract.rb:29:in `instance_exec'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/sshkit-1.15.1/lib/sshkit/backends/abstract.rb:29:in `run'\n/home/jan/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/sshkit-1.15.1/lib/sshkit/runners/parallel.rb:12:in `block (2 levels) in execute'\nTasks: TOP =&gt; rvm:hook\n</code></pre>\n\n<p>Any ideas why there is a timeout?  </p>\n\n<p>UPDATE</p>\n\n<p>ssh -T git@bitbucket.org gives message:</p>\n\n<pre><code>logged in as slucha.\n\nYou can use git or hg to connect to Bitbucket. Shell access is disabled.\n</code></pre>\n\n<p>ssh -T deploy@45.33.95.53 gives</p>\n\n<pre><code>Welcome to Ubuntu 16.04.3 LTS (GNU/Linux 4.9.64-x86_64-linode88 x86_64)\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "elasticsearch", "searchkick"], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 3869473, "user_type": "registered", "profile_image": "https://graph.facebook.com/1247629440/picture?type=large", "display_name": "Marek Dlugos", "link": "https://stackoverflow.com/users/3869473/marek-dlugos"}, "edited": false, "score": 0, "creation_date": 1557079504, "post_id": 47764653, "comment_id": 98637137, "body": "Where did you put it?"}, {"owner": {"reputation": 184, "user_id": 1377648, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6XBkU.jpg?s=128&g=1", "display_name": "AKN", "link": "https://stackoverflow.com/users/1377648/akn"}, "reply_to_user": {"reputation": 127, "user_id": 3869473, "user_type": "registered", "profile_image": "https://graph.facebook.com/1247629440/picture?type=large", "display_name": "Marek Dlugos", "link": "https://stackoverflow.com/users/3869473/marek-dlugos"}, "edited": false, "score": 0, "creation_date": 1557112843, "post_id": 47764653, "comment_id": 98643584, "body": "<code>rails console</code>"}], "tags": [], "owner": {"reputation": 184, "user_id": 1377648, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6XBkU.jpg?s=128&g=1", "display_name": "AKN", "link": "https://stackoverflow.com/users/1377648/akn"}, "is_accepted": false, "score": 4, "last_activity_date": 1579216501, "last_edit_date": 1579216501, "creation_date": 1513047130, "answer_id": 47764653, "question_id": 47761704, "link": "https://stackoverflow.com/questions/47761704/searchkick-elasticsearch-not-indexing-forbidden-12-index-read-only/47764653#47764653", "title": "Searchkick: Elasticsearch not indexing &quot;FORBIDDEN/12/index read-only&quot;?", "body": "<p>I had the same issue today, and the following worked for me:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Model.search_index.clean_indices\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 321, "user_id": 3880374, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fRf5K.jpg?s=128&g=1", "display_name": "ktravers", "link": "https://stackoverflow.com/users/3880374/ktravers"}, "is_accepted": false, "score": 4, "last_activity_date": 1519962105, "creation_date": 1519962105, "answer_id": 49062497, "question_id": 47761704, "link": "https://stackoverflow.com/questions/47761704/searchkick-elasticsearch-not-indexing-forbidden-12-index-read-only/49062497#49062497", "title": "Searchkick: Elasticsearch not indexing &quot;FORBIDDEN/12/index read-only&quot;?", "body": "<p>This solution from <a href=\"https://github.com/salihsagdilek\" rel=\"nofollow noreferrer\">salihsagdilekon</a> on <a href=\"https://github.com/ankane/searchkick/issues/1040#issuecomment-354158085\" rel=\"nofollow noreferrer\">https://github.com/ankane/searchkick/issues/1040</a> resolved this same issue for me:</p>\n\n<pre><code>curl -XPUT -H \"Content-Type: application/json\" &gt; http://localhost:9200/_all/_settings -d '{\"index.blocks.read_only_allow_delete\": null}'\n</code></pre>\n"}], "owner": {"reputation": 1402, "user_id": 609489, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/fef05b31d37c679848a1958c21e5c9a1?s=128&d=identicon&r=PG", "display_name": "lightsaber", "link": "https://stackoverflow.com/users/609489/lightsaber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1594, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1579216501, "creation_date": 1513027673, "question_id": 47761704, "link": "https://stackoverflow.com/questions/47761704/searchkick-elasticsearch-not-indexing-forbidden-12-index-read-only", "title": "Searchkick: Elasticsearch not indexing &quot;FORBIDDEN/12/index read-only&quot;?", "body": "<p>I've setup a new development environment on my iMac and moved my rails app from a macbook air. It was working fine and indexing the data as well. Using the same version of gems. When indexing it gives following error.</p>\n\n<pre><code>Searchkick::ImportError: {\"type\"=&gt;\"cluster_block_exception\", \"reason\"=&gt;\"blocked by: [FORBIDDEN/12/index read-only / allow delete (api)];\"} on item with id '74'\n</code></pre>\n\n<p>Is there any way I can solve this issue by modifying my elasticsearch.yml?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4706, "user_id": 481229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/OJflZ.jpg?s=128&g=1", "display_name": "Agush", "link": "https://stackoverflow.com/users/481229/agush"}, "edited": false, "score": 0, "creation_date": 1513027190, "post_id": 47761521, "comment_id": 82484549, "body": "run <code>rake routes</code> and post the output"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8853999"}, "reply_to_user": {"reputation": 4706, "user_id": 481229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/OJflZ.jpg?s=128&g=1", "display_name": "Agush", "link": "https://stackoverflow.com/users/481229/agush"}, "edited": false, "score": 0, "creation_date": 1513027481, "post_id": 47761521, "comment_id": 82484692, "body": "okey here is the routes"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1513029896, "post_id": 47761521, "comment_id": 82485835, "body": "You have 2 paths for <code>get &quot;admin&#47;login&quot;</code> which means the second one will win."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8853999"}, "edited": false, "score": 0, "creation_date": 1513027601, "post_id": 47761661, "comment_id": 82484748, "body": "but i want like localhost:3000/this-is-post not like localhost:3000/post/this-is-post"}], "tags": [], "owner": {"reputation": 101, "user_id": 6468979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18fec93fc55accce55bc06ebffa9c69f?s=128&d=identicon&r=PG&f=1", "display_name": "Kiran Dodani", "link": "https://stackoverflow.com/users/6468979/kiran-dodani"}, "is_accepted": false, "score": 0, "last_activity_date": 1513027608, "last_edit_date": 1513027608, "creation_date": 1513027462, "answer_id": 47761661, "question_id": 47761521, "link": "https://stackoverflow.com/questions/47761521/admin-login-route-is-going-post-page/47761661#47761661", "title": "admin/login route is going post page", "body": "<p>Seems like the issue is on these two lines.</p>\n\n<pre><code>get ':id' =&gt; 'posts#show'\nget 'posts/:id' =&gt; redirect('%{id}')\n</code></pre>\n\n<p>Try this</p>\n\n<pre><code>get 'posts/:id' =&gt; 'posts#show'\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8853999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513027608, "creation_date": 1513026826, "last_edit_date": 1513027413, "question_id": 47761521, "link": "https://stackoverflow.com/questions/47761521/admin-login-route-is-going-post-page", "title": "admin/login route is going post page", "body": "<p>my routes.rb</p>\n\n<pre><code>  get '/admin/login' =&gt; 'admin/sessions#new'\n  get '/admin/logout' =&gt; 'admin/sessions#destroy'\n  get '/admin' =&gt; 'admin/dashboard#index'\n\n  get 'blog' =&gt; 'blogs#index'\n  get ':id' =&gt; 'posts#show'\n  get 'posts/:id' =&gt; redirect('%{id}')\n  get 'blog/:id' =&gt; 'blogs#show'\n  get 'category/:id' =&gt; 'posts#index'\n\n  namespace :admin do\n    resources :sessions, only: [:new, :create, :destroy]\n    resources :login, only: [:index, :edit]\n    resources :categories\n    resources :admins, only: [:index, :edit, :update, :new, :create, :destroy]\n    resources :dashboard, only:[:index]\n    resources :settings, only:[:new, :create, :edit, :update]\n    resources :posts\n    resources :blogs\n  end\n\n  resources :home, only:[:index]\n  resources :posts, only:[:index, :show]\n  resources :blogs, only:[:index, :show]\n</code></pre>\n\n<p>when i try go to the /admin/login page it is seems like post page or something. but i can see the login form. just it is not admin page (i mean there is no my admin css or something it is seems like admin login form in my normal front end post page. and when i try login with my username and password it is giving this error:</p>\n\n<pre><code>ActionView::MissingTemplate in Admin::Posts#new\n</code></pre>\n\n<p>then im deleting this part from routes.rb</p>\n\n<pre><code>  get 'blog' =&gt; 'blogs#index'\n  get ':id' =&gt; 'posts#show'\n  get 'posts/:id' =&gt; redirect('%{id}')\n  get 'blog/:id' =&gt; 'blogs#show'\n  get 'category/:id' =&gt; 'posts#index'\n</code></pre>\n\n<p>then i can go to the admin page. then im pasting this part again and still can use admin panel with no errors i dont understand. </p>\n\n<p>can someone help? (sorry for my english)</p>\n\n<p>here is the rake routes</p>\n\n<pre><code>              Prefix Verb   URI Pattern                          Controller#Action\n                 root GET    /                                    home#index\n          admin_login GET    /admin/login(.:format)               admin/sessions#new\n         admin_logout GET    /admin/logout(.:format)              admin/sessions#destroy\n                admin GET    /admin(.:format)                     admin/dashboard#index\n                 blog GET    /blog(.:format)                      blogs#index\n                      GET    /:id(.:format)                       posts#show\n                      GET    /posts/:id(.:format)                 redirect(301, %{id})\n                      GET    /blog/:id(.:format)                  blogs#show\n                      GET    /category/:id(.:format)              posts#index\n       admin_sessions POST   /admin/sessions(.:format)            admin/sessions#create\n    new_admin_session GET    /admin/sessions/new(.:format)        admin/sessions#new\n        admin_session DELETE /admin/sessions/:id(.:format)        admin/sessions#destroy\n    admin_login_index GET    /admin/login(.:format)               admin/login#index\n     edit_admin_login GET    /admin/login/:id/edit(.:format)      admin/login#edit\n     admin_categories GET    /admin/categories(.:format)          admin/categories#index\n                      POST   /admin/categories(.:format)          admin/categories#create\n   new_admin_category GET    /admin/categories/new(.:format)      admin/categories#new\n  edit_admin_category GET    /admin/categories/:id/edit(.:format) admin/categories#edit\n       admin_category GET    /admin/categories/:id(.:format)      admin/categories#show\n                      PATCH  /admin/categories/:id(.:format)      admin/categories#update\n                      PUT    /admin/categories/:id(.:format)      admin/categories#update\n                      DELETE /admin/categories/:id(.:format)      admin/categories#destroy\n         admin_admins GET    /admin/admins(.:format)              admin/admins#index\n                      POST   /admin/admins(.:format)              admin/admins#create\n      new_admin_admin GET    /admin/admins/new(.:format)          admin/admins#new\n     edit_admin_admin GET    /admin/admins/:id/edit(.:format)     admin/admins#edit\n          admin_admin PATCH  /admin/admins/:id(.:format)          admin/admins#update\n                      PUT    /admin/admins/:id(.:format)          admin/admins#update\n                      DELETE /admin/admins/:id(.:format)          admin/admins#destroy\nadmin_dashboard_index GET    /admin/dashboard(.:format)           admin/dashboard#index\n       admin_settings POST   /admin/settings(.:format)            admin/settings#create\n    new_admin_setting GET    /admin/settings/new(.:format)        admin/settings#new\n   edit_admin_setting GET    /admin/settings/:id/edit(.:format)   admin/settings#edit\n        admin_setting PATCH  /admin/settings/:id(.:format)        admin/settings#update\n                      PUT    /admin/settings/:id(.:format)        admin/settings#update\n          admin_posts GET    /admin/posts(.:format)               admin/posts#index\n                      POST   /admin/posts(.:format)               admin/posts#create\n       new_admin_post GET    /admin/posts/new(.:format)           admin/posts#new\n      edit_admin_post GET    /admin/posts/:id/edit(.:format)      admin/posts#edit\n           admin_post GET    /admin/posts/:id(.:format)           admin/posts#show\n                      PATCH  /admin/posts/:id(.:format)           admin/posts#update\n                      PUT    /admin/posts/:id(.:format)           admin/posts#update\n                      DELETE /admin/posts/:id(.:format)           admin/posts#destroy\n          admin_blogs GET    /admin/blogs(.:format)               admin/blogs#index\n                      POST   /admin/blogs(.:format)               admin/blogs#create\n       new_admin_blog GET    /admin/blogs/new(.:format)           admin/blogs#new\n      edit_admin_blog GET    /admin/blogs/:id/edit(.:format)      admin/blogs#edit\n           admin_blog GET    /admin/blogs/:id(.:format)           admin/blogs#show\n                      PATCH  /admin/blogs/:id(.:format)           admin/blogs#update\n                      PUT    /admin/blogs/:id(.:format)           admin/blogs#update\n                      DELETE /admin/blogs/:id(.:format)           admin/blogs#destroy\n           home_index GET    /home(.:format)                      home#index\n                posts GET    /posts(.:format)                     posts#index\n                 post GET    /posts/:id(.:format)                 posts#show\n                blogs GET    /blogs(.:format)                     blogs#index\n                      GET    /blogs/:id(.:format)                 blogs#show\n</code></pre>\n"}]