[{"tags": ["ruby", "phone-number"], "answers": [{"comments": [{"owner": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "reply_to_user": {"reputation": 275, "user_id": 6596100, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ca8b3362fc24a7c688c80a162ce8300e?s=128&d=identicon&r=PG&f=1", "display_name": "YoYoYo I&#39;m Awesome", "link": "https://stackoverflow.com/users/6596100/yoyoyo-im-awesome"}, "edited": false, "score": 0, "creation_date": 1470872350, "post_id": 38885174, "comment_id": 65130971, "body": "@YoYoYoI&#39;mAwesome I don&#39;t have a testing environment at hand. I thought it was <code>9</code> but I guess it&#39;s <code>8</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1471014664, "post_id": 38885174, "comment_id": 65199190, "body": "format_phone_number(&quot;9876785678 ext:&quot;) #=&gt; &quot;(987)678-5678 ext:&quot;, but it should be &quot;(987)678-5678)&quot;."}], "tags": [], "owner": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "is_accepted": false, "score": 1, "last_activity_date": 1470872358, "last_edit_date": 1470872358, "creation_date": 1470872159, "answer_id": 38885174, "question_id": 38885063, "link": "https://stackoverflow.com/questions/38885063/add-the-in-the-phone-number-along-with-the-ext/38885174#38885174", "title": "Add the &#39;-&#39; in the phone number, along with the ext", "body": "<p>The following should closely resemble what you're looking for. When you insert a character into a string then you have to remember that you're increasing the length of the string by 1. Also, using a negative index with insert, inserts the character at position <code>num.length - index</code>.</p>\n\n<pre><code>def format_phone_number(num)\n  if num.length &gt;= 10\n    num.insert(0, '(').insert(4, ')').insert(8, '-')\n  end\nend\n</code></pre>\n\n<p>I'm not sure what you want to return if the phone number is not the appropriate length. </p>\n"}, {"comments": [{"owner": {"reputation": 275, "user_id": 6596100, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ca8b3362fc24a7c688c80a162ce8300e?s=128&d=identicon&r=PG&f=1", "display_name": "YoYoYo I&#39;m Awesome", "link": "https://stackoverflow.com/users/6596100/yoyoyo-im-awesome"}, "edited": false, "score": 0, "creation_date": 1470872542, "post_id": 38885177, "comment_id": 65131026, "body": "OOOOH! That makes a lot more sense, alright thank you!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1470896894, "post_id": 38885177, "comment_id": 65137752, "body": "It&#39;s good that you checks if there are fewer than 10 characters, but that&#39;s only one among many potential problems. For example, if <code>num = &quot;987678567800000000X0&quot;</code> this returns <code>&quot;(987)678-567800000000X0&quot;</code>. If <code>num = &quot;9876542123 xet: 3S4&quot;</code>, it returns <code>(987)654-2123 xet: 3S4&quot;</code>."}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1470929861, "post_id": 38885177, "comment_id": 65160283, "body": "@Cary Swoveland: Agreed.  I just wanted to demo a simple approach for checking invalid input."}], "tags": [], "owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "is_accepted": true, "score": 1, "last_activity_date": 1470875465, "last_edit_date": 1470875465, "creation_date": 1470872201, "answer_id": 38885177, "question_id": 38885063, "link": "https://stackoverflow.com/questions/38885063/add-the-in-the-phone-number-along-with-the-ext/38885177#38885177", "title": "Add the &#39;-&#39; in the phone number, along with the ext", "body": "<p>You have to deal with the side-effect that you are changing the size of the string on each call to <code>insert</code>:</p>\n\n<pre><code>def format_phone_number(num)\n  num.insert(0, '(')\n  puts num                       #=&gt; (9876785678\n  puts num.size                  #=&gt; 11\n  num.insert(4, ')')\n  puts num                       #=&gt; (987)6785678\n  puts num.size                  #=&gt; 12\n  num.insert(8, '-')\n  puts num                       #=&gt; (987)678-5678 \n  puts num.size                  #=&gt; 13 \nend\n\nformat_phone_number(\"9876785678\")\n</code></pre>\n\n<p>To handle phone numbers of less than 10 characters, you could <code>raise</code> an exception:</p>\n\n<pre><code>def format_phone_number(num)\n  raise \"Less than 10 chars\" if num.size &lt; 10\n  num.insert(0, '(').insert(4, ')').insert(8, '-')\nend\n\nformat_phone_number \"9876785678\"            #=&gt; (987)654-2123   \nformat_phone_number \"9876542123 ext: 6789\"  #=&gt; (987)654-2123 ext: 6789\nformat_phone_number \"9876542123 ext:\"       #=&gt; (987)654-2123 ext: \nformat_phone_number \"987678567\"             #=&gt; in `format_phone_number': Less than 10 chars (RuntimeError) \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 275, "user_id": 6596100, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ca8b3362fc24a7c688c80a162ce8300e?s=128&d=identicon&r=PG&f=1", "display_name": "YoYoYo I&#39;m Awesome", "link": "https://stackoverflow.com/users/6596100/yoyoyo-im-awesome"}, "is_accepted": false, "score": 0, "last_activity_date": 1470872230, "creation_date": 1470872230, "answer_id": 38885180, "question_id": 38885063, "link": "https://stackoverflow.com/questions/38885063/add-the-in-the-phone-number-along-with-the-ext/38885180#38885180", "title": "Add the &#39;-&#39; in the phone number, along with the ext", "body": "<p>I don't really understand why, but this worked:</p>\n\n<pre><code>def format_phone_number(num)\n  num.insert(0, '(').insert(4, ')').insert(8, '-')\nend\n</code></pre>\n\n<p>When I input:</p>\n\n<pre><code>1234567894 -&gt; (123)456-7894\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 275, "user_id": 6596100, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ca8b3362fc24a7c688c80a162ce8300e?s=128&d=identicon&r=PG&f=1", "display_name": "YoYoYo I&#39;m Awesome", "link": "https://stackoverflow.com/users/6596100/yoyoyo-im-awesome"}, "edited": false, "score": 0, "creation_date": 1470929854, "post_id": 38888263, "comment_id": 65160281, "body": "That&#39;s great and all but it doesn&#39;t help me insert the information into the phone numbers, it just requires it."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 275, "user_id": 6596100, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ca8b3362fc24a7c688c80a162ce8300e?s=128&d=identicon&r=PG&f=1", "display_name": "YoYoYo I&#39;m Awesome", "link": "https://stackoverflow.com/users/6596100/yoyoyo-im-awesome"}, "edited": false, "score": 0, "creation_date": 1471014116, "post_id": 38888263, "comment_id": 65198825, "body": "As I understand, you merely want to format the string in a particular way. You don&#39;t have to use <code>String#insert</code> for that."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1471320025, "last_edit_date": 1471320025, "creation_date": 1470894951, "answer_id": 38888263, "question_id": 38885063, "link": "https://stackoverflow.com/questions/38885063/add-the-in-the-phone-number-along-with-the-ext/38888263#38888263", "title": "Add the &#39;-&#39; in the phone number, along with the ext", "body": "<p>This question nicely illustrates the benefit of using regular expressions for these types of problems. Let's compare a method that employs a regex with one that does not, for the same level of functionality (as embodied in the examples).</p>\n\n<p><strong>Use a regular expression</strong></p>\n\n<pre><code>R = /\n    \\A                  # match beginning of string\n    (\\d{3})             # match 3 digits in capture group 1\n    (\\d{3})             # match 3 digits in capture group 2\n    (\\d{4})             # match 3 digits in capture group 3\n    (                   # begin capture group 4 \n      \\sext:            # match space, string\n      (?:\\s\\d+)?        # optionally match space, &gt;= 1 digits in non-capture group\n      \\z                # match end of string\n      |                 # or\n      \\z                # match end of string\n    )                   # end capture group 4\n    /x                  # free-spacing regex definition mode\n\ndef format_phone_number(num)\n  return nil unless (num.strip) =~ R\n  ext = ($4 == \" ext:\") ? '' : $4\n  \"(%s)%s-%s%s\" % [$1, $2, $3, ext]\nend\n\nformat_phone_number \"9876542123 ext: 6789\"  #=&gt; \"(987)654-2123 ext: 6789\" \nformat_phone_number \"9876542123 ext: 6789 \" #=&gt; \"(987)654-2123 ext: 6789\" \nformat_phone_number \"9876785678 ext:\"       #=&gt; \"(987)678-5678\" \nformat_phone_number \"9876785678\"            #=&gt; \"(987)678-5678\" \nformat_phone_number \"4543456\"               #=&gt; nil \nformat_phone_number \"#9876785678\"           #=&gt; nil \nformat_phone_number \"98765421234 ext: 6789\" #=&gt; nil \nformat_phone_number \"9876542123 ext.: 6789\" #=&gt; nil \nformat_phone_number \"9876542123 ext:6789\"   #=&gt; nil \nformat_phone_number \"9876542123 ext: 6789#\" #=&gt; nil \nformat_phone_number \"9876542123ext: 6789\"   #=&gt; nil \n</code></pre>\n\n<p><strong>Don't use a regular expression</strong></p>\n\n<pre><code>def format_phone_number(num)\n  str = num.strip\n  return nil if str.size &lt; 10\n  nbr, ext = str[0,10], str[10..-1]\n  ext = \"\" if ext == \" ext:\"\n  return nil unless (Integer(nbr) rescue false)\n  return nil unless ext.empty? || ext[0,6] == \" ext: \"\n  return nil unless (ext.empty? || (Integer(ext[6..-1]) rescue false))\n  \"(%s)%s-%s%s\" % [num[0,3], num[3,3], num[6,4], ext]\nend\n\nformat_phone_number \"9876542123 ext: 6789\"  #=&gt; \"(987)654-2123 ext: 6789\" \nformat_phone_number \"9876542123 ext: 6789 \" #=&gt; \"(987)654-2123 ext: 6789\" \nformat_phone_number \"9876785678 ext:\"       #=&gt; \"(987)678-5678\" \nformat_phone_number \"9876785678\"            #=&gt; \"(987)678-5678\" \nformat_phone_number \"4543456\"               #=&gt; nil \nformat_phone_number \"#9876785678\"           #=&gt; nil \nformat_phone_number \"98765421234 ext: 6789\" #=&gt; nil \nformat_phone_number \"9876542123 ext.: 6789\" #=&gt; nil \nformat_phone_number \"9876542123 ext:6789\"   #=&gt; nil \nformat_phone_number \"9876542123 ext: 6789#\" #=&gt; nil \nformat_phone_number \"9876542123ext: 6789\"   #=&gt; nil \n</code></pre>\n"}], "owner": {"reputation": 275, "user_id": 6596100, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ca8b3362fc24a7c688c80a162ce8300e?s=128&d=identicon&r=PG&f=1", "display_name": "YoYoYo I&#39;m Awesome", "link": "https://stackoverflow.com/users/6596100/yoyoyo-im-awesome"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 38885177, "answer_count": 4, "score": 0, "last_activity_date": 1471320025, "creation_date": 1470871358, "question_id": 38885063, "link": "https://stackoverflow.com/questions/38885063/add-the-in-the-phone-number-along-with-the-ext", "title": "Add the &#39;-&#39; in the phone number, along with the ext", "body": "<p>I need a way to add the '-' into a phone number, verify that it is the correct length, add parenthesis around the area code, and default to nil if no extension is given. For example:</p>\n\n<pre><code>9876542123 ext: 6789 -&gt; Should end up -&gt; (987)654-2123 ext: 6789\n4543456 -&gt; should fail\n9876785678 ext: -&gt; should end up -&gt; (987)678-5678\n</code></pre>\n\n<p>How can I do this without a regular expression?</p>\n\n<p>What I've attempted:</p>\n\n<pre><code>def format_phone_number(num)\n  num.insert(0, '(').insert(-3, ')').insert(-4, '-')\nend\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>(12345678-)94\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "actioncontroller"], "comments": [{"owner": {"reputation": 1150, "user_id": 5213790, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JsYim.jpg?s=128&g=1", "display_name": "mrvncaragay", "link": "https://stackoverflow.com/users/5213790/mrvncaragay"}, "edited": false, "score": 1, "creation_date": 1470872135, "post_id": 38885031, "comment_id": 65130921, "body": "when you read the rails guide regarding <code>CRUD</code> it says that <code>update</code> correspond to <code>PATCH&#47;PUT</code> not <code>get</code>    <a href=\"http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/routing.html#crud-verbs-and-actions</a>"}, {"owner": {"reputation": 21, "user_id": 6640755, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/0a46045350833f13dbf7abf9aee8a6c7?s=128&d=identicon&r=PG&f=1", "display_name": "nums11", "link": "https://stackoverflow.com/users/6640755/nums11"}, "reply_to_user": {"reputation": 1150, "user_id": 5213790, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JsYim.jpg?s=128&g=1", "display_name": "mrvncaragay", "link": "https://stackoverflow.com/users/5213790/mrvncaragay"}, "edited": false, "score": 0, "creation_date": 1470872913, "post_id": 38885031, "comment_id": 65131108, "body": "When I put patch/put I get an error saying no route matches [get]"}], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 2925286, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ULRfC.jpg?s=128&g=1", "display_name": "Abdullah Barrak", "link": "https://stackoverflow.com/users/2925286/abdullah-barrak"}, "is_accepted": false, "score": 0, "last_activity_date": 1470872831, "creation_date": 1470872831, "answer_id": 38885249, "question_id": 38885031, "link": "https://stackoverflow.com/questions/38885031/actioncontrollerparametermissing-in-userscontrollerupdate/38885249#38885249", "title": "ActionController::ParameterMissing in UsersController#update", "body": "<p><code>user</code> has to be present in the request params because you required it in user_params. You can change link_to to use query parameters as follows:</p>\n\n<pre><code>link_to \"Refresh\", {controller: 'users', action: 'update', nick_name: \"#{user.nick_name}\", score: \"#{get_score}\"}, style: '...'\n</code></pre>\n\n<p>Or change update route to contain those parameters in the url. </p>\n\n<pre><code># routes.rb\nget '/update/:nick_name/:score' =&gt; 'users#update'\n</code></pre>\n\n<p>Tip: You probably should change it to PUT and use form instead, since update action alters state in the server.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6102243, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wHabv0G0-JA/AAAAAAAAAAI/AAAAAAAAAFA/w8p0mqvl6Fc/photo.jpg?sz=128", "display_name": "Matt Jackson", "link": "https://stackoverflow.com/users/6102243/matt-jackson"}, "is_accepted": false, "score": 0, "last_activity_date": 1470881450, "creation_date": 1470881450, "answer_id": 38886228, "question_id": 38885031, "link": "https://stackoverflow.com/questions/38885031/actioncontrollerparametermissing-in-userscontrollerupdate/38886228#38886228", "title": "ActionController::ParameterMissing in UsersController#update", "body": "<p>Looks like whatever you are using to pass through your params to make the request is not properly nested under a user key.</p>\n"}], "owner": {"reputation": 21, "user_id": 6640755, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/0a46045350833f13dbf7abf9aee8a6c7?s=128&d=identicon&r=PG&f=1", "display_name": "nums11", "link": "https://stackoverflow.com/users/6640755/nums11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 350, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1470881450, "creation_date": 1470871126, "question_id": 38885031, "link": "https://stackoverflow.com/questions/38885031/actioncontrollerparametermissing-in-userscontrollerupdate", "title": "ActionController::ParameterMissing in UsersController#update", "body": "<p>I have a small game in which after the game is over the user is linked to a view that displays a leader board of all users and their scores. To do this I have treated the link as an update action so that the users score can be updated after the game is over, however, upon clicking the link I get an error saying \"param is missing or the value is empty: user\". I am also wondering if this is being caused because there is no form to be filled simply a variable being updated.</p>\n\n<p>Controllers:</p>\n\n<pre><code>class UsersController &lt; ApplicationController\ndef new\n    @user = User.new\nend\n\ndef create\n    @user = User.new(user_params)\n    if @user.save\n        session[:user_id] = @user.id \n        redirect_to '/play'\n    else\n        render '/'\n    end\nend\n\ndef update\n    @user = User.find(current_user)\n    if @user.update(user_params)\n        redirect_to '/leaderboard'\n    else\n        render '/play'\n    end\nend\n\nprivate\ndef user_params\n    params.require(:user).permit(:nick_name, :score)\nend\nend\n\n\n\nclass ScoresController &lt; ApplicationController\nbefore_action :require_user, only: [:index]\n\ndef index\n    @user = User.find(current_user)     \n    @score = @user.score\n    @score = 0\nend\n\ndef leaderboard\n    @users = User.all\nend\nend\n</code></pre>\n\n<p>View-link:</p>\n\n<pre><code>    &lt;div class=\"game-over\"&gt;&lt;%= link_to 'Game Over', \"/update\", :style =&gt; 'text-decoration:none; color:white;' %&gt;&lt;/div&gt;\n</code></pre>\n\n<p>Routes:</p>\n\n<pre><code>Rails.application.routes.draw do\n  root 'users#new', as: :users\n  post '/' =&gt; 'users#create'\n\n  get '/logout' =&gt; 'sessions#destroy'\n\n  get '/play' =&gt; 'scores#index', as: :user \n  get '/update' =&gt; 'users#update'\n  get '/leaderboard' =&gt; 'scores#leaderboard'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "go", "time"], "answers": [{"comments": [{"owner": {"reputation": 5712, "user_id": 915672, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e098cd6eb0f9064f197a2a6e016f3d63?s=128&d=identicon&r=PG&f=1", "display_name": "praks5432", "link": "https://stackoverflow.com/users/915672/praks5432"}, "edited": false, "score": 0, "creation_date": 1470872479, "post_id": 38885097, "comment_id": 65131014, "body": "Ah thanks! I was also wondering - what if I want to get <code>2014-11-17 23:02:03 +0000 UTC</code> in Go, how would I do that?"}, {"owner": {"reputation": 665, "user_id": 6312602, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-J2fMlfN4Ghc/AAAAAAAAAAI/AAAAAAAAACc/IIPzG0rPYuA/photo.jpg?sz=128", "display_name": "Jesse Amano", "link": "https://stackoverflow.com/users/6312602/jesse-amano"}, "reply_to_user": {"reputation": 5712, "user_id": 915672, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e098cd6eb0f9064f197a2a6e016f3d63?s=128&d=identicon&r=PG&f=1", "display_name": "praks5432", "link": "https://stackoverflow.com/users/915672/praks5432"}, "edited": false, "score": 0, "creation_date": 1470872680, "post_id": 38885097, "comment_id": 65131050, "body": "Use <code>time.Format</code> to lay out your times as strings in the format you want, again using the sentinel value <code>Mon Jan 2 15:04:05 -0700 MST 2006</code> (mnemonic: 1/2 3:04:05 pm &#39;06, -0700).  So for this case: <code>time.Format(&quot;2006-01-02 15:04:05 -0700 MST&quot;)</code>"}, {"owner": {"reputation": 665, "user_id": 6312602, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-J2fMlfN4Ghc/AAAAAAAAAAI/AAAAAAAAACc/IIPzG0rPYuA/photo.jpg?sz=128", "display_name": "Jesse Amano", "link": "https://stackoverflow.com/users/6312602/jesse-amano"}, "reply_to_user": {"reputation": 5712, "user_id": 915672, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e098cd6eb0f9064f197a2a6e016f3d63?s=128&d=identicon&r=PG&f=1", "display_name": "praks5432", "link": "https://stackoverflow.com/users/915672/praks5432"}, "edited": false, "score": 0, "creation_date": 1470872799, "post_id": 38885097, "comment_id": 65131085, "body": "(I kind of wish they&#39;d gone with <code>2001-02-03 4:05:06 pm, -0700 MST</code> as their mnemonic sentinel value, but whatever.)"}, {"owner": {"reputation": 5712, "user_id": 915672, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e098cd6eb0f9064f197a2a6e016f3d63?s=128&d=identicon&r=PG&f=1", "display_name": "praks5432", "link": "https://stackoverflow.com/users/915672/praks5432"}, "edited": false, "score": 0, "creation_date": 1470873147, "post_id": 38885097, "comment_id": 65131161, "body": "wait..so how do I get a time like <code>2014-11-17 23:02:03 +0000</code>?"}, {"owner": {"reputation": 665, "user_id": 6312602, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-J2fMlfN4Ghc/AAAAAAAAAAI/AAAAAAAAACc/IIPzG0rPYuA/photo.jpg?sz=128", "display_name": "Jesse Amano", "link": "https://stackoverflow.com/users/6312602/jesse-amano"}, "reply_to_user": {"reputation": 5712, "user_id": 915672, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e098cd6eb0f9064f197a2a6e016f3d63?s=128&d=identicon&r=PG&f=1", "display_name": "praks5432", "link": "https://stackoverflow.com/users/915672/praks5432"}, "edited": false, "score": 0, "creation_date": 1470873584, "post_id": 38885097, "comment_id": 65131269, "body": "If you want a <code>time.Time</code> variable with a value representing <code>2014-11-16 23:02:03 +0000</code>, then call <code>time.Parse(&quot;2006-01-02 15:04:05 -0700&quot;, &quot;2014-11-16 23:02:03 +0000&quot;)</code>.  If you already have that in some <code>var t time.Time</code>, and you want to print it as a string in that format, then call <code>t.Format(&quot;2006-01-02 15:04:05 -0700&quot;)</code>."}], "tags": [], "owner": {"reputation": 665, "user_id": 6312602, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-J2fMlfN4Ghc/AAAAAAAAAAI/AAAAAAAAACc/IIPzG0rPYuA/photo.jpg?sz=128", "display_name": "Jesse Amano", "link": "https://stackoverflow.com/users/6312602/jesse-amano"}, "is_accepted": true, "score": 2, "last_activity_date": 1470871615, "creation_date": 1470871615, "answer_id": 38885097, "question_id": 38884784, "link": "https://stackoverflow.com/questions/38884784/ruby-and-golang-time-parsing/38885097#38885097", "title": "Ruby and Golang time parsing", "body": "<p>The format string provided in <a href=\"https://golang.org/pkg/time/#Parse\" rel=\"nofollow\">the docs</a> contains some redundant information (MST and -0700 in particular convey the same information\u2014a UTC offset in hours*100+minutes).</p>\n\n<p>So, just leave \"MST\" out of your format string.</p>\n"}], "owner": {"reputation": 5712, "user_id": 915672, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e098cd6eb0f9064f197a2a6e016f3d63?s=128&d=identicon&r=PG&f=1", "display_name": "praks5432", "link": "https://stackoverflow.com/users/915672/praks5432"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 365, "favorite_count": 0, "accepted_answer_id": 38885097, "answer_count": 1, "score": 0, "last_activity_date": 1470871615, "creation_date": 1470869339, "question_id": 38884784, "link": "https://stackoverflow.com/questions/38884784/ruby-and-golang-time-parsing", "title": "Ruby and Golang time parsing", "body": "<p>I understand how to parse times from strings using Golang. </p>\n\n<p>Currently, I make a request in rails/ruby that is handled by Go, in which I pass in a time parameter. </p>\n\n<p>This is what I'm doing in rails</p>\n\n<pre><code>  resp = connection.get \"url\", {\n    updated_at: updated_at\n  }.compact\n</code></pre>\n\n<p>and <code>updated_at</code> is <code>Time.now - 1.day</code>.</p>\n\n<p>In Go, this is how I'm parsing the time, after getting it out.</p>\n\n<pre><code>updatedAt, err := time.Parse(\"2006-01-02 15:04:05 -0700 MST\", updatedAtVar)\n</code></pre>\n\n<p>The above works if time looks like </p>\n\n<pre><code>2014-11-17 23:02:03 +0000 UTC\n</code></pre>\n\n<p>but Ruby spits out a time that looks like</p>\n\n<pre><code>2016-08-10 22:29:51 +0000\n</code></pre>\n\n<p>which, when parsing results in </p>\n\n<pre><code>0001-01-01 00:00:00 +0000 UTC\n</code></pre>\n\n<p>What can I pass into my param such that go will parse the time correctly? </p>\n"}, {"tags": ["ruby", "macos", "crontab"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1470869260, "post_id": 38884756, "comment_id": 65130188, "body": "how are you installing these gems? Have you run <code>gem install</code> for them all? Or, if they&#39;re in the project&#39;s Gemfile, try <code>bundle exec ruby</code> instead."}, {"owner": {"reputation": 33, "user_id": 4971555, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/829424080480317/picture?type=large", "display_name": "Diogo Amaral", "link": "https://stackoverflow.com/users/4971555/diogo-amaral"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1470869700, "post_id": 38884756, "comment_id": 65130319, "body": "if I execute with bundle receive error <code>&#47;bin&#47;sh: bundle: command not found</code> I&#39;ll edit my post adding my ruby version and how I install the gems"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 4971555, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/829424080480317/picture?type=large", "display_name": "Diogo Amaral", "link": "https://stackoverflow.com/users/4971555/diogo-amaral"}, "edited": false, "score": 0, "creation_date": 1470870202, "post_id": 38884818, "comment_id": 65130442, "body": "I dont find <code>&#47;usr&#47;local&#47;bin&#47;ruby</code> and the response of <code>ruby -v</code> was      ruby 2.3.0p0 (2015-12-25 revision 53290) [x86_64-darwin14]"}, {"owner": {"reputation": 33, "user_id": 4971555, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/829424080480317/picture?type=large", "display_name": "Diogo Amaral", "link": "https://stackoverflow.com/users/4971555/diogo-amaral"}, "edited": false, "score": 0, "creation_date": 1470870438, "post_id": 38884818, "comment_id": 65130506, "body": "I looked for ruby binaries with <code>which ruby</code> and found it in <code>&#47;Users&#47;diogo&#47;.rvm&#47;rubies&#47;ruby-2.3.0&#47;bin&#47;ruby</code> I changed the crontab to execute with this path and the error is the same ;("}, {"owner": {"reputation": 1740, "user_id": 2832874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e377f3e2140297d32460ae9a4b38ff98?s=128&d=identicon&r=PG", "display_name": "vielmetti", "link": "https://stackoverflow.com/users/2832874/vielmetti"}, "reply_to_user": {"reputation": 33, "user_id": 4971555, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/829424080480317/picture?type=large", "display_name": "Diogo Amaral", "link": "https://stackoverflow.com/users/4971555/diogo-amaral"}, "edited": false, "score": 0, "creation_date": 1470870675, "post_id": 38884818, "comment_id": 65130549, "body": "Ah, you are using <code>rvm</code>. Did you look at <a href=\"https://rvm.io/integration/cron\" rel=\"nofollow noreferrer\">rvm.io/integration/cron</a> (Using rvm wtih cron). It references calling a wrapper like so <code>1 0  * * * &#47;usr&#47;local&#47;rvm&#47;wrappers&#47;ruby-2.1.1@projectX&#47;ruby &#47;path&#47;to&#47;script.rb</code>"}], "tags": [], "owner": {"reputation": 1740, "user_id": 2832874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e377f3e2140297d32460ae9a4b38ff98?s=128&d=identicon&r=PG", "display_name": "vielmetti", "link": "https://stackoverflow.com/users/2832874/vielmetti"}, "is_accepted": true, "score": 1, "last_activity_date": 1470869529, "creation_date": 1470869529, "answer_id": 38884818, "question_id": 38884756, "link": "https://stackoverflow.com/questions/38884756/crontab-dont-execute-require/38884818#38884818", "title": "crontab dont execute require", "body": "<p>You should always fully specify the paths of all files when executing them out of cron, since the environment provided by cron will be different from your login environment. That might mean replacing the invocation of <code>ruby</code> with the full path to your ruby binary (maybe <code>/usr/local/bin/ruby</code>). </p>\n\n<p>Try running <code>ruby -v</code> out of cron to see what version you are picking up. On my Mac OS system I have two:</p>\n\n<pre><code>Edwards-MacBook-Air:~ emv$ /usr/bin/ruby -v\nruby 2.0.0p648 (2015-12-16 revision 53162) [universal.x86_64-darwin15]\nEdwards-MacBook-Air:~ emv$ /usr/local/bin/ruby -v\nruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-darwin15]\n</code></pre>\n\n<p>one from the operating system, and one from Homebrew.</p>\n"}], "owner": {"reputation": 33, "user_id": 4971555, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/829424080480317/picture?type=large", "display_name": "Diogo Amaral", "link": "https://stackoverflow.com/users/4971555/diogo-amaral"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 38884818, "answer_count": 1, "score": 0, "last_activity_date": 1470869881, "creation_date": 1470869125, "last_edit_date": 1470869881, "question_id": 38884756, "link": "https://stackoverflow.com/questions/38884756/crontab-dont-execute-require", "title": "crontab dont execute require", "body": "<p>I'm using a osx and I created a ruby script in the path: <code>/Users/diogo/workspace/outros/crawler_trf</code> with name <code>get_news.rb</code></p>\n\n<p>So I tried to execute it via crontab with the following line: <code>*/1 * * * * 'ruby /Users/diogo/workspace/outros/crawler_trf/get_news.rb' &gt; /tmp/crawler_trf.out</code> and I've got the error: <code>/bin/sh: ruby /Users/diogo/workspace/outros/crawler_trf/get_news.rb: No such file or directory</code></p>\n\n<p>After some searches and a question here I solved this problem removing the quotes and now my crontab looks like that: <code>*/1 * * * * cd /Users/diogo/workspace/outros/crawler_trf/ &amp;&amp; ruby get_news.rb &gt; /tmp/crawler_trf.out</code></p>\n\n<p>But now I'm having a new error that is:</p>\n\n<pre><code>/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- mail (LoadError)\nfrom /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:55:in `require'\nfrom get_news.rb:3:in `&lt;main&gt;'\n</code></pre>\n\n<p>The beginning of my file is:</p>\n\n<pre><code>require 'nokogiri'\nrequire 'open-uri'\nrequire 'mail'\n</code></pre>\n\n<p>My ruby version is 2.3.0 and I have it specified in <code>.ruby-version</code> and using gemset specified in `.ruby-gemset</p>\n\n<p>I installed the gems via bundle</p>\n\n<p>I really had searching for my answers for long but I didn't found nothing.</p>\n"}, {"tags": ["ruby", "factory-bot", "factory"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1470874854, "post_id": 38884623, "comment_id": 65131595, "body": "try making the <code>application</code> accessible to the factory, even passing it as an argument"}], "answers": [{"comments": [{"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1470934960, "post_id": 38889039, "comment_id": 65163145, "body": "How do you mean by making &quot;<code>application</code> available to the Factory&quot;?"}, {"owner": {"reputation": 5286, "user_id": 455770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mMHwz.jpg?s=128&g=1", "display_name": "Rots", "link": "https://stackoverflow.com/users/455770/rots"}, "reply_to_user": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1470950159, "post_id": 38889039, "comment_id": 65170968, "body": "Simply that <code>application</code> is in scope to where the Factory is defined. You&#39;ll see it further up the code as <code>application = Application.new</code>."}], "tags": [], "owner": {"reputation": 5286, "user_id": 455770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mMHwz.jpg?s=128&g=1", "display_name": "Rots", "link": "https://stackoverflow.com/users/455770/rots"}, "is_accepted": false, "score": 1, "last_activity_date": 1470898763, "last_edit_date": 1470898763, "creation_date": 1470897722, "answer_id": 38889039, "question_id": 38884623, "link": "https://stackoverflow.com/questions/38884623/how-to-create-a-factory-that-takes-references-in-the-initialization-with-factory/38889039#38889039", "title": "How to create a factory that takes references in the initialization with FactoryGirl?", "body": "<p>I think i'm missinterpreting your question, but this code works fine. Might be because I've made <code>application</code> available to the Factory as per max pleaner's comment:</p>\n\n<p><strong>client.rb</strong></p>\n\n<pre><code>require 'factory_girl'\n\nclass Application\n        attr_accessor :uid\n        attr_accessor :secret\nend\n\nclass Client\n        attr_accessor :uid\n        attr_accessor :secret\n        attr_accessor :extended\n\n        def initialize (uid, secret, extended)\n                @uid = uid\n                @secret = secret\n                @extended = extended\n        end\nend\n\napplication = Application.new\napplication.uid = 123\napplication.secret = \"secret\"    \n\nFactoryGirl.define do\n  factory :application do\n    name         'Test application'\n    redirect_uri 'http://another-site.com/redirect'\n  end\nend\n\nFactoryGirl.define do\n  factory :client do\n    site         'http://localhost:3000'\n    raise_errors  false\n\n    initialize_with{new(application.uid, application.secret, attributes)}\n  end\nend\n</code></pre>\n\n<p>Code runs fine from console with <code>ruby client.rb</code></p>\n"}], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470898763, "creation_date": 1470868438, "question_id": 38884623, "link": "https://stackoverflow.com/questions/38884623/how-to-create-a-factory-that-takes-references-in-the-initialization-with-factory", "title": "How to create a factory that takes references in the initialization with FactoryGirl?", "body": "<p>I am looking for a way to convert the following to a factory:</p>\n\n<pre><code>client = Client.new(application.uid, application.secret, \n                    site:'http://localhost:3000', raise_errors:false)\n</code></pre>\n\n<p>Factory for the application:</p>\n\n<pre><code>FactoryGirl.define do\n  factory :application do\n    name         'Test application'\n    redirect_uri 'http://another-site.com/redirect'\n  end\nend\n</code></pre>\n\n<p>The application attributes <code>uid</code> and <code>secret</code> are not defined in the factory, but upon creation.</p>\n\n<p>The following does not work (<code>raises undefined method 'application'</code>):</p>\n\n<pre><code>FactoryGirl.define do\n  factory :client do\n    site         'http://localhost:3000'\n    raise_errors  false\n\n    initialize_with{new(application.uid, application.secret, attributes)}\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "macos", "crontab"], "answers": [{"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 0, "last_activity_date": 1470864601, "creation_date": 1470864601, "answer_id": 38883884, "question_id": 38883680, "link": "https://stackoverflow.com/questions/38883680/crontab-dont-find-recognize-path/38883884#38883884", "title": "Crontab dont find/recognize path", "body": "<p><code>cron</code> is feeding your command:</p>\n\n<pre><code>'ruby /Users/diogo/workspace/outros/crawler_trf/get_news.rb' &gt; /tmp/crawler_trf.out\n</code></pre>\n\n<p>to <code>/bin/sh</code> as-is but there is no <code>'ruby /Users/diogo/...'</code> command, there probably is a <code>ruby</code> command that can take <code>/Users/diogo/...</code> as an argument though so drop the quotes:</p>\n\n<pre><code>*/1 * * * * ruby /Users/diogo/workspace/outros/crawler_trf/get_news.rb &gt; /tmp/crawler_trf.out\n</code></pre>\n\n<p>You might want to include the full path to <code>ruby</code> as well or at least make sure there's a <code>PATH</code> setting in your <code>crontab</code>.</p>\n"}], "owner": {"reputation": 33, "user_id": 4971555, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/829424080480317/picture?type=large", "display_name": "Diogo Amaral", "link": "https://stackoverflow.com/users/4971555/diogo-amaral"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19, "favorite_count": 0, "accepted_answer_id": 38883884, "answer_count": 1, "score": 0, "last_activity_date": 1470864601, "creation_date": 1470863698, "question_id": 38883680, "link": "https://stackoverflow.com/questions/38883680/crontab-dont-find-recognize-path", "title": "Crontab dont find/recognize path", "body": "<p>I'm using a osx and I created a ruby script in the path: <code>/Users/diogo/workspace/outros/crawler_trf</code> with name <code>get_news.rb</code></p>\n\n<p>So I tried to execute it via crontab with the following line: <code>*/1 * * * * 'ruby /Users/diogo/workspace/outros/crawler_trf/get_news.rb' &gt; /tmp/crawler_trf.out</code> and I've got the error: <code>/bin/sh: ruby /Users/diogo/workspace/outros/crawler_trf/get_news.rb: No such file or directory</code></p>\n\n<p>I really had searching for my answers for long but I didn't found nothing.</p>\n"}, {"tags": ["ruby", "tk"], "comments": [{"owner": {"reputation": 404, "user_id": 1888553, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WznXZ.jpg?s=128&g=1", "display_name": "Derrell Durrett", "link": "https://stackoverflow.com/users/1888553/derrell-durrett"}, "edited": false, "score": 0, "creation_date": 1470866349, "post_id": 38883659, "comment_id": 65129319, "body": "(NB: I didn&#39;t go look at the Tk* interface.) I don&#39;t see where &#39;<code>button_variables</code>&#39; are set? It seems possible that&#39;s a part of the problem..."}, {"owner": {"reputation": 179, "user_id": 2418839, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/831f269745f2902732d71ff9f69d3ac7?s=128&d=identicon&r=PG", "display_name": "Burdette Lamar", "link": "https://stackoverflow.com/users/2418839/burdette-lamar"}, "reply_to_user": {"reputation": 404, "user_id": 1888553, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WznXZ.jpg?s=128&g=1", "display_name": "Derrell Durrett", "link": "https://stackoverflow.com/users/1888553/derrell-durrett"}, "edited": false, "score": 0, "creation_date": 1470875751, "post_id": 38883659, "comment_id": 65131787, "body": "Setting each <code>button_variables[i]</code> did not change the  behavior."}, {"owner": {"reputation": 179, "user_id": 2418839, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/831f269745f2902732d71ff9f69d3ac7?s=128&d=identicon&r=PG", "display_name": "Burdette Lamar", "link": "https://stackoverflow.com/users/2418839/burdette-lamar"}, "reply_to_user": {"reputation": 404, "user_id": 1888553, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WznXZ.jpg?s=128&g=1", "display_name": "Derrell Durrett", "link": "https://stackoverflow.com/users/1888553/derrell-durrett"}, "edited": false, "score": 0, "creation_date": 1470924945, "post_id": 38883659, "comment_id": 65156558, "body": "And thanks, Derrell."}], "answers": [{"comments": [{"owner": {"reputation": 1626, "user_id": 1136063, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a8d63377824449cc8627aae609579f50?s=128&d=identicon&r=PG", "display_name": "MarkDBlackwell", "link": "https://stackoverflow.com/users/1136063/markdblackwell"}, "edited": false, "score": 0, "creation_date": 1553557623, "post_id": 38902484, "comment_id": 97420577, "body": "Since you say that this code works, please accept your own answer. This accords with StackOverflow standard practice."}], "tags": [], "owner": {"reputation": 179, "user_id": 2418839, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/831f269745f2902732d71ff9f69d3ac7?s=128&d=identicon&r=PG", "display_name": "Burdette Lamar", "link": "https://stackoverflow.com/users/2418839/burdette-lamar"}, "is_accepted": false, "score": 0, "last_activity_date": 1470935832, "creation_date": 1470935832, "answer_id": 38902484, "question_id": 38883659, "link": "https://stackoverflow.com/questions/38883659/how-to-create-ruby-tk-radiobuttons-in-nested-loops/38902484#38902484", "title": "How to create Ruby Tk radiobuttons in nested loops", "body": "<p>The value passed as <code>variable</code> is the name of a <em>global</em> variable.</p>\n\n<p>The outer loop needs to dynamically define an instance variable, via <code>instance_variable_set</code>:</p>\n\n<p>This code works:</p>\n\n<pre><code>require 'tk'\n\ndevice_names = %w/Foo Bar Baz/\naction_names = %w/Start Pause Stop Nuke/\n\nroot = TkRoot.new\n\ndevice_names.each do |device_name|\n  TkLabel.new(root) do\n    text device_name\n    pack {}\n  end\n  instance_variable_set(\"@#{device_name}\", nil)\n  action_names.each do |action_name|\n    TkRadiobutton.new(root) do\n      text action_name\n      value action_name\n      variable device_name\n      pack {}\n    end\n  end\nend\n\nTk.mainloop\n</code></pre>\n"}], "owner": {"reputation": 179, "user_id": 2418839, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/831f269745f2902732d71ff9f69d3ac7?s=128&d=identicon&r=PG", "display_name": "Burdette Lamar", "link": "https://stackoverflow.com/users/2418839/burdette-lamar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470935832, "creation_date": 1470863614, "last_edit_date": 1470923124, "question_id": 38883659, "link": "https://stackoverflow.com/questions/38883659/how-to-create-ruby-tk-radiobuttons-in-nested-loops", "title": "How to create Ruby Tk radiobuttons in nested loops", "body": "<p>Using Ruby Tk, I'm wanting to create sets of radio buttons in nested loops:  an outer loop for devices (Foo, Bar, Baz), and inner loop for actions on each device (Start, Stop, Pause, Nuke).</p>\n\n<p>Current code:</p>\n\n<pre><code>require 'tk'\n\ndevice_names = %w/Foo Bar Baz/\naction_names = %w/Start Pause Stop Nuke/\n\nbutton_variables = Array.new(device_names.size)\n\nroot = TkRoot.new\n\nfoo = bar = nil\n\ndevice_names.each_with_index do |device_name, i|\n  TkLabel.new(root) do\n    text device_name\n    pack {}\n  end\n  action_names.each_with_index do |action_name, j|\n    TkRadiobutton.new(root) do\n      text action_name\n      value j\n      variable button_variables[i]\n      pack {}\n    end\n  end\nend\n\nTk.mainloop\n</code></pre>\n\n<p>This produces the 12 radiobuttons, but when I click on any of the 4 Pause buttons, for example, all 4 Pause buttons are set.</p>\n\n<p>Other variations of the code produce the 12 radiobuttons, but all as one set;  i.e., only one of the 12 is set at any given time.</p>\n\n<p>What's needed to group these into 3 sets of 4 radiobuttons?</p>\n\n<p>(This code is pared down from a much larger application, which is why it does not make much sense symantically.)</p>\n"}, {"tags": ["ruby", "xcode", "rvm"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1470863638, "post_id": 38883370, "comment_id": 65128151, "body": "Where have you searched and what did you read? Did you read through <a href=\"https://rvm.io/integration\" rel=\"nofollow noreferrer\">rvm.io/integration</a>? We need you to tell us what you tried and where you looked, otherwise we&#39;ll suggest things that could be duplicates of your effort, which wastes both our times. &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the linked pages talk about this."}, {"owner": {"reputation": 14218, "user_id": 440168, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a5b33ee3aa7798d88427679a16d7ad25?s=128&d=identicon&r=PG", "display_name": "k06a", "link": "https://stackoverflow.com/users/440168/k06a"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1470863894, "post_id": 38883370, "comment_id": 65128281, "body": "@theTinMan I have read <code>man</code> and some docs in web, but found only <code>rvm environment</code> command, it contains info I need, but it is not simple to extract this info directly."}, {"owner": {"reputation": 2374, "user_id": 1941418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8940942c798e82d460e0c058acfb3b7?s=128&d=identicon&r=PG", "display_name": "smefju", "link": "https://stackoverflow.com/users/1941418/smefju"}, "edited": false, "score": 0, "creation_date": 1471250201, "post_id": 38883370, "comment_id": 65257862, "body": "@k06a is my post helpful?"}, {"owner": {"reputation": 14218, "user_id": 440168, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a5b33ee3aa7798d88427679a16d7ad25?s=128&d=identicon&r=PG", "display_name": "k06a", "link": "https://stackoverflow.com/users/440168/k06a"}, "reply_to_user": {"reputation": 2374, "user_id": 1941418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8940942c798e82d460e0c058acfb3b7?s=128&d=identicon&r=PG", "display_name": "smefju", "link": "https://stackoverflow.com/users/1941418/smefju"}, "edited": false, "score": 0, "creation_date": 1471267426, "post_id": 38883370, "comment_id": 65265725, "body": "@smefju sorry, but no. My problem is to make Xcode to use RVM&#39;s Ruby instead of it&#39;s own Ruby version."}, {"owner": {"reputation": 2374, "user_id": 1941418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8940942c798e82d460e0c058acfb3b7?s=128&d=identicon&r=PG", "display_name": "smefju", "link": "https://stackoverflow.com/users/1941418/smefju"}, "edited": false, "score": 0, "creation_date": 1471267688, "post_id": 38883370, "comment_id": 65265870, "body": "take a look at this topic: <a href=\"http://stackoverflow.com/questions/15776319/how-to-make-xcode-use-the-correct-version-of-ruby-when-running-a-script\" title=\"how to make xcode use the correct version of ruby when running a script\">stackoverflow.com/questions/15776319/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2374, "user_id": 1941418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8940942c798e82d460e0c058acfb3b7?s=128&d=identicon&r=PG", "display_name": "smefju", "link": "https://stackoverflow.com/users/1941418/smefju"}, "is_accepted": false, "score": 2, "last_activity_date": 1471267677, "last_edit_date": 1495535629, "creation_date": 1470866265, "answer_id": 38884236, "question_id": 38883370, "link": "https://stackoverflow.com/questions/38883370/is-there-any-way-to-ask-rvm-for-current-ruby-path/38884236#38884236", "title": "Is there any way to ask RVM for current Ruby path?", "body": "<p>You can use <code>which ruby</code>. It will point to the binary from currently used Ruby. Take a look at this page: <a href=\"https://rvm.io/rvm/basics\" rel=\"nofollow noreferrer\">https://rvm.io/rvm/basics</a>.</p>\n\n<p>You should also take a look at this topic: <a href=\"https://stackoverflow.com/questions/15776319/how-to-make-xcode-use-the-correct-version-of-ruby-when-running-a-script\">How to make xcode use the correct version of ruby when running a script?</a></p>\n"}], "owner": {"reputation": 14218, "user_id": 440168, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a5b33ee3aa7798d88427679a16d7ad25?s=128&d=identicon&r=PG", "display_name": "k06a", "link": "https://stackoverflow.com/users/440168/k06a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1471267677, "creation_date": 1470862519, "question_id": 38883370, "link": "https://stackoverflow.com/questions/38883370/is-there-any-way-to-ask-rvm-for-current-ruby-path", "title": "Is there any way to ask RVM for current Ruby path?", "body": "<p>I am trying to ask RVM for current Ruby path, to call it from bash. This happens in Xcode environment, where <code>ruby</code> is Xcode's one, but I wanna to solve it like this (just example, not really works):</p>\n\n<pre><code>$(rvm which) my-script.rb\n</code></pre>\n\n<p>Help me to ask RVM for current Ruby path :)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 0, "creation_date": 1470862596, "post_id": 38883294, "comment_id": 65127705, "body": "Please proofread your question. You seem to be missing what appears to be a very important word: &quot;prevent a user to edit a record that is not the ,&quot;"}, {"owner": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 0, "creation_date": 1470865943, "post_id": 38883294, "comment_id": 65129170, "body": "Do it the same way you do it in your &#39;new&#39; and &#39;create&#39; actions, use &#39;current_user.pins&#39;, that would give you only the pins that belong to the logged in user."}], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1470875050, "creation_date": 1470875050, "answer_id": 38885507, "question_id": 38883294, "link": "https://stackoverflow.com/questions/38883294/authorization-crud-ruby-on-rails/38885507#38885507", "title": "authorization crud ruby on rails", "body": "<p>In your update action, instead of this: <code>if @pin.update(pin_params)</code></p>\n\n<p>do something like this:</p>\n\n<pre><code>pin = current_user&amp;.pins.find_by(id: params[:id])\nif pin\n  # do the update here because the pin belongs to current_user\nelse\n  # raise a 403 'permission denied' error or something\nend\n</code></pre>\n\n<p>in case you're not familiar with the safe navigation operator, <code>user&amp;.pins</code> is the same as <code>if !user.nil? then user.pins else nil end</code>.</p>\n\n<p>So for ruby versios before 2.3 you can do <code>pin = current_user.pins.find_by(id: params[:id]) if current_user</code></p>\n"}, {"tags": [], "owner": {"reputation": 325, "user_id": 4643690, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9_dmW_kS7R0/AAAAAAAAAAI/AAAAAAAAAAw/AeA0aY62T0w/photo.jpg?sz=128", "display_name": "bk chovatiya", "link": "https://stackoverflow.com/users/4643690/bk-chovatiya"}, "is_accepted": true, "score": 2, "last_activity_date": 1470933381, "creation_date": 1470933381, "answer_id": 38901855, "question_id": 38883294, "link": "https://stackoverflow.com/questions/38883294/authorization-crud-ruby-on-rails/38901855#38901855", "title": "authorization crud ruby on rails", "body": "<pre><code>before_action :set_user_pins, only: [:edit, :update, :destroy, :show]\n\ndef set_user_pins\n  @pin = current_user.pins.find_by(id: params[:id])\n  redirect_request if @pin.blank?\nend\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 5641033, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh5.googleusercontent.com/-GNXaCp-BYX0/AAAAAAAAAAI/AAAAAAAAAWI/w5QNSoJ_tdo/photo.jpg?sz=128", "display_name": "Carlos Uriel Pati&#241;o Santiago", "link": "https://stackoverflow.com/users/5641033/carlos-uriel-pati%c3%b1o-santiago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 38901855, "answer_count": 2, "score": -1, "last_activity_date": 1470933381, "creation_date": 1470862247, "question_id": 38883294, "link": "https://stackoverflow.com/questions/38883294/authorization-crud-ruby-on-rails", "title": "authorization crud ruby on rails", "body": "<p>I'm starting with ruby on rails , and I want to know how to prevent a user to edit a record that is not the , this is my code:</p>\n\n<pre><code>class PinsController &lt; ApplicationController\n    before_action :find_pin, only: [:show, :edit, :update, :destroy, :upvote]\n    before_action :authenticate_user!, except: [:index , :show]\n    def index\n        @pins = Pin.all.order(\"created_at DESC\")\n    end\n\n    def show\n    end\n\n    def new\n        @pin = current_user.pins.build\n    end\n\n    def create\n        @pin = current_user.pins.build(pin_params)\n\n        if @pin.save\n            redirect_to @pin, notice: \"Pin creado\"\n        else\n            render 'new'\n        end\n    end\n\n    def edit\n    end\n\n    def update\n        if @pin.update(pin_params)\n            redirect_to @pin, notice: \"Actualizado correctamente\"\n        else\n            render 'edit'\n        end\n    end\n\n    def destroy\n        @pin.destroy\n        redirect_to root_path\n    end\n\n    def upvote\n        @pin.upvote_by current_user\n        redirect_to :back\n    end\n\n    private\n\n    def pin_params\n        params.require(:pin).permit(:title, :description, :image)\n    end\n\n    def find_pin\n        @pin = Pin.find(params[:id])\n    end\nend\n</code></pre>\n\n<p>and also in the view I have two buttons, one to edit and delete another , as I can do so only if you aparescan is the creator of the record ?</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "heroku", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 6580665, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c0b14d9f0b1deef9c2b8ea478eb24f5?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/6580665/alex"}, "edited": false, "score": 0, "creation_date": 1470862573, "post_id": 38883254, "comment_id": 65127699, "body": "Alright, no more errors on development...but now the dropdowns are broken on both development and production. And I&#39;m still getting reference errors on production."}, {"owner": {"reputation": 185, "user_id": 4789427, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10200544047161494/picture?type=large", "display_name": "Jarrel09", "link": "https://stackoverflow.com/users/4789427/jarrel09"}, "reply_to_user": {"reputation": 49, "user_id": 6580665, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c0b14d9f0b1deef9c2b8ea478eb24f5?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/6580665/alex"}, "edited": false, "score": 0, "creation_date": 1470862848, "post_id": 38883254, "comment_id": 65127826, "body": "Odd. Did you restart the server? Precompile if necessary?"}, {"owner": {"reputation": 49, "user_id": 6580665, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c0b14d9f0b1deef9c2b8ea478eb24f5?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/6580665/alex"}, "edited": false, "score": 0, "creation_date": 1470863617, "post_id": 38883254, "comment_id": 65128142, "body": "Yep. Ran <code>rake assets:clean</code>, <code>rake assets:precompile</code>, and restarted the server. Pushed to Heroku, and dropdowns are still broken, on both development and production...but I&#39;m not getting any more reference errors in the web console."}, {"owner": {"reputation": 185, "user_id": 4789427, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10200544047161494/picture?type=large", "display_name": "Jarrel09", "link": "https://stackoverflow.com/users/4789427/jarrel09"}, "reply_to_user": {"reputation": 49, "user_id": 6580665, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c0b14d9f0b1deef9c2b8ea478eb24f5?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/6580665/alex"}, "edited": false, "score": 0, "creation_date": 1470864388, "post_id": 38883254, "comment_id": 65128530, "body": "Can you edit your question to include your <code>application.scss</code> file as well?"}, {"owner": {"reputation": 185, "user_id": 4789427, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10200544047161494/picture?type=large", "display_name": "Jarrel09", "link": "https://stackoverflow.com/users/4789427/jarrel09"}, "reply_to_user": {"reputation": 49, "user_id": 6580665, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c0b14d9f0b1deef9c2b8ea478eb24f5?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/6580665/alex"}, "edited": false, "score": 0, "creation_date": 1470869739, "post_id": 38883254, "comment_id": 65130325, "body": "Just did some quick research. Check out my edited answer"}, {"owner": {"reputation": 185, "user_id": 4789427, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10200544047161494/picture?type=large", "display_name": "Jarrel09", "link": "https://stackoverflow.com/users/4789427/jarrel09"}, "reply_to_user": {"reputation": 49, "user_id": 6580665, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c0b14d9f0b1deef9c2b8ea478eb24f5?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/6580665/alex"}, "edited": false, "score": 0, "creation_date": 1470953253, "post_id": 38883254, "comment_id": 65172248, "body": "According to the screenshot you have an error in your css code. It&#39;s showing you have an unexpected &#39;:&#39;. Play around in the console and examine that specific line of code that it references to correct the error"}, {"owner": {"reputation": 49, "user_id": 6580665, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c0b14d9f0b1deef9c2b8ea478eb24f5?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/6580665/alex"}, "edited": false, "score": 0, "creation_date": 1470997267, "post_id": 38883254, "comment_id": 65188257, "body": "Solved the problem. Thanks for your help!"}], "tags": [], "owner": {"reputation": 185, "user_id": 4789427, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10200544047161494/picture?type=large", "display_name": "Jarrel09", "link": "https://stackoverflow.com/users/4789427/jarrel09"}, "is_accepted": false, "score": 0, "last_activity_date": 1470869833, "last_edit_date": 1470869833, "creation_date": 1470862113, "answer_id": 38883254, "question_id": 38883198, "link": "https://stackoverflow.com/questions/38883198/rails-with-bootstrap-jquery-and-jquery-ui-not-working-on-heroku/38883254#38883254", "title": "Rails with Bootstrap, jQuery, and jQuery-UI not working on Heroku", "body": "<p>You need to move <code>bootstrap-sprockets</code> after the jquery_ujs. Your file should look like this:</p>\n\n<pre><code>//= require jquery\n//= require jquery_ujs\n//= require bootstrap-sprockets\n//= require_tree .\n</code></pre>\n\n<p>In the documentation <a href=\"https://github.com/twbs/bootstrap-sass\" rel=\"nofollow\">here</a> it mentions this.</p>\n\n<p>Also, looks like you have to require modules when using sass with jquery-ui-rails. Answer found in <a href=\"https://github.com/joliss/jquery-ui-rails/issues/89\" rel=\"nofollow\">this</a> thread. Change your application.css.scss to this:</p>\n\n<pre><code> @import 'jquery-ui/core.css';\n @import 'jquery-ui/datepicker.css';\n @import 'jquery-ui/theme.css';\n @import \"bootstrap-sprockets\";\n @import \"bootstrap\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 6580665, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c0b14d9f0b1deef9c2b8ea478eb24f5?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/6580665/alex"}, "is_accepted": true, "score": 0, "last_activity_date": 1470997220, "creation_date": 1470997220, "answer_id": 38915590, "question_id": 38883198, "link": "https://stackoverflow.com/questions/38883198/rails-with-bootstrap-jquery-and-jquery-ui-not-working-on-heroku/38915590#38915590", "title": "Rails with Bootstrap, jQuery, and jQuery-UI not working on Heroku", "body": "<p>I finally figured out the problem, making dropdowns work on both development and production. <a href=\"http://i.stack.imgur.com/sKYKg.png\" rel=\"nofollow\">The problem was that I was requiring Bootstrap twice.</a> In fact, I was requiring everything twice. So I decided to look at my <code>application.html.erb</code>, and lo and behold, this is what I found:</p>\n\n<pre><code>&lt;%= csrf_meta_tags %&gt;\n\n  &lt;%= stylesheet_link_tag    'application', media: 'all' %&gt;\n  &lt;%= javascript_include_tag 'application' %&gt;\n  &lt;%= javascript_include_tag :application %&gt;\n&lt;/head&gt;\n</code></pre>\n\n<p>Nope, not good. Everything was being included twice. So I removed the first <code>javascript_include_tag</code>, and all my problems were solved!</p>\n\n<p>Final <code>application.js</code>:</p>\n\n<pre><code>//= require jquery\n//= require jquery_ujs\n//= require bootstrap-sprockets\n//= require_tree .\n</code></pre>\n\n<p>Final <code>application.css.scss</code>:</p>\n\n<pre><code>@import 'jquery-ui/core.css';\n@import 'jquery-ui/datepicker.css';\n@import 'jquery-ui/theme.css';\n@import \"bootstrap-sprockets\";\n@import \"bootstrap\";\n\n.basic {\n td {\n    padding: 5px;\n  }\n  border-collapse: collapse;\n}\n\n.alert-alert {\n  @extend .alert-warning;\n}\n\n.alert-notice {\n  @extend .alert-info;\n}\n\n#accordion  {\n  h3:focus {\n    outline: none;\n  }\n  .ui-state-active {\n    background-color: #00AAE3;\n  }\n}\n</code></pre>\n\n<p>Final <code>application.html.erb</code> (the source of all my problems):</p>\n\n<pre><code>  &lt;%= stylesheet_link_tag    'application', media: 'all' %&gt;\n  &lt;%= javascript_include_tag :application %&gt;\n&lt;/head&gt;\n</code></pre>\n\n<p>Yep, stupid mistake and easily overlooked.</p>\n"}], "owner": {"reputation": 49, "user_id": 6580665, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c0b14d9f0b1deef9c2b8ea478eb24f5?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/6580665/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1403, "favorite_count": 0, "accepted_answer_id": 38915590, "answer_count": 2, "score": 0, "last_activity_date": 1470997220, "creation_date": 1470861882, "last_edit_date": 1470995937, "question_id": 38883198, "link": "https://stackoverflow.com/questions/38883198/rails-with-bootstrap-jquery-and-jquery-ui-not-working-on-heroku", "title": "Rails with Bootstrap, jQuery, and jQuery-UI not working on Heroku", "body": "<p>I have an application on Rails 5 that uses Bootstrap, jQuery, and jquery_ui. I use jquery_ui for dropdown menus. </p>\n\n<p>Dropdowns are broken on both development and production, I have no idea how to fix this.</p>\n\n<p><a href=\"http://i.stack.imgur.com/aycRj.png\" rel=\"nofollow\">A screenshot of the errors/warnings in the web console (production)</a> -- apparently I can't embed images, so I have to make do with a link.</p>\n\n<p>Gemfile:</p>\n\n<pre><code>source 'https://rubygems.org'\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '~&gt; 5.0.0'\n\n# Use sqlite3 as the database for Active Record\ngem 'sqlite3', group: :development\n\n\n#### HEROKU SPECIFIC GEMS #####\ngem 'pg', '0.18.1', group: :production\n################################\n\n# Use Puma as the app server\ngem 'puma', '~&gt; 3.0'\n\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.2'\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\ngem 'jquery-ui-rails', '~&gt; 5.0', '&gt;= 5.0.5'\n\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.5'\n\n# Authentication with Devise\ngem 'devise'\n\n# Bootstrap framework\ngem 'bootstrap-sass', '~&gt; 3.3', '&gt;= 3.3.6'\n\n# Markdown parser\ngem 'redcarpet', '~&gt; 3.3', '&gt;= 3.3.4'\n\n# Markdown syntax highlighting\ngem 'coderay'\n\n# Admin panel\ngem 'remotipart', github: 'mshibuya/remotipart'\ngem 'rails_admin', '&gt;= 1.0.0.rc'\n\n# Forms the easy way\ngem 'simple_form', '~&gt; 3.2', '&gt;= 3.2.1'\n\ngem 'seed_dump'\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug', platform: :mri\nend\n\ngroup :development do\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; anywhere in the code.\n  gem 'web-console'\n  gem 'listen', '~&gt; 3.0.5'\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\n  gem 'spring-watcher-listen', '~&gt; 2.0.0'\nend\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n\nruby '2.3.1'\n</code></pre>\n\n<p>Application.js:</p>\n\n<pre><code>// This is a manifest file that'll be compiled into application.js, which will include all the files\n// listed below.\n//\n// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,\n// or any plugin's vendor/assets/javascripts directory can be referenced here using a relative path.\n//\n// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the\n// compiled file. JavaScript code in this file should be added after the last require_* statement.\n//\n// Read Sprockets README (https://github.com/rails/sprockets#sprockets-directives) for details\n// about supported directives.\n//\n//= require jquery\n//= require jquery_ujs\n//= require bootstrap-sprockets\n//= require_tree .\n</code></pre>\n\n<p>Application.css.scss</p>\n\n<pre><code>/*\n * This is a manifest file that'll be compiled into application.css, which will include all the files\n * listed below.\n *\n * Any CSS and SCSS file within this directory, lib/assets/stylesheets, vendor/assets/stylesheets,\n * or any plugin's vendor/assets/stylesheets directory can be referenced here using a relative path.\n *\n * You're free to add application-wide styles to this file and they'll appear at the bottom of the\n * compiled file so the styles you add here take precedence over styles defined in any other CSS/SCSS\n * files in this directory. Styles in this file should be added after the last require_* statement.\n * It is generally better to create a new file per style scope.\n *\n */\n @import 'jquery-ui/core.css';\n @import 'jquery-ui/datepicker.css';\n @import 'jquery-ui/theme.css';\n @import \"bootstrap-sprockets\";\n @import \"bootstrap\";\n\n .basic {\n  td {\n    padding: 5px;\n  }\n  border-collapse: collapse;\n}\n\n.alert-alert {\n  @extend .alert-warning;\n}\n\n.alert-notice {\n  @extend .alert-info;\n}\n\n#accordion  {\n  h3:focus {\n    outline: none;\n  }\n  .ui-state-active {\n    background-color: #00AAE3;\n  }\n}\n</code></pre>\n\n<p>...where am I going wrong? I've been researching this for the past three days and no dice.</p>\n\n<h2>Edit:</h2>\n\n<p>Ran some tests. If I put Bootstrap above jQuery in Application.js, dropdowns work on development but not on production (like so):</p>\n\n<pre><code>//= require bootstrap-sprockets\n//= require jquery\n//= require jquery_ujs\n//= require_tree .\n</code></pre>\n\n<p>However, I get reference errors (\"can't find variable jQuery\") on development (no errors on production).</p>\n\n<p>If I require them in the order that I do in Application.js above my edit, I don't get any reference errors, but dropdowns are broken on both development and production.</p>\n\n<p>Either way, I can't get them to work on production.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "model-view-controller", "methods"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1470860805, "post_id": 38882727, "comment_id": 65126798, "body": "<code>nil.to_i</code> is zero, so if either of those values is nil the multiplication will return zero."}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1470860992, "post_id": 38882727, "comment_id": 65126901, "body": "On the attempts I used, neither would have been zero. I used 2 for quantity and &#163;1.50 for price. But the output was zero."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1470861202, "post_id": 38882727, "comment_id": 65127011, "body": "It&#39;s probably because of the currency symbol. <code>&#39;1.50&#39;.to_i</code> is 1, <code>&#39;1.50&#39;.to_f</code> is 1.50, and <code>&#39;&#163;1.50&#39;.to_i</code> is 0. This is how ruby string-to-integer conversion works. You should use floats for currency and strip out the <code>&#163;</code> before converting"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1470861439, "post_id": 38882727, "comment_id": 65127126, "body": "Is it as simple as just using .to_f then?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1470861657, "post_id": 38882727, "comment_id": 65127243, "body": "no, because of the <code>&#163;</code> sign. If you know for certain the first character of the string will be <code>&#163;</code>, you can just do <code>string[1..-1].to_f</code>. Or see <a href=\"https://github.com/RubyMoney/monetize\" rel=\"nofollow noreferrer\">the <code>monetize</code> gem</a> i.e. <code>Monetize.parse(&#39;&#163;100.01&#39;).to_f</code>"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1470862756, "post_id": 38882727, "comment_id": 65127790, "body": "I&#39;ve set the currency default under the monetize gem to &#163; so this is probably it then. So, I should do event.price.string[1..-1].to_f then?"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1470866272, "post_id": 38882727, "comment_id": 65129287, "body": "It&#39;s actually the money-rails gem I have installed. Do I need to install monetize also? It looks like the &#163; symbol is the issue as you describe above. I&#39;d be grateful if you could clarify in a little more detail what the string[1..-1].to_f refers to and where I put this. Apologies if I seem a little slow - I&#39;m a bit new to the money stuff."}, {"owner": {"reputation": 2487, "user_id": 267693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7kQYV.jpg?s=128&g=1", "display_name": "Ken Ratanachai S.", "link": "https://stackoverflow.com/users/267693/ken-ratanachai-s"}, "edited": false, "score": 0, "creation_date": 1470868847, "post_id": 38882727, "comment_id": 65130058, "body": "please show your model code."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1470868950, "post_id": 38882727, "comment_id": 65130090, "body": "It&#39;s okay to ask. To change the string &quot;$1.01&quot; to the float <code>1.01</code> you can use <code>string[0..-1].to_f</code>, which removes the first character and converts what remains. <code>Monetize.parse(&quot;$1.01&quot;).to_f</code> does the same thing. The <code>money</code> gem used to provide the <code>parse</code> method but it has been moved to <code>monetize</code>. I don&#39;t see any reason why you would need to use a rails-specific gem for this i.e. <code>money-rails</code>."}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1471002092, "post_id": 38882727, "comment_id": 65191166, "body": "My issue is where to put the string[0..-1].to_f method - do I place it in a method in the Booking model?"}], "answers": [{"comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1470863184, "post_id": 38883038, "comment_id": 65127971, "body": "Forgive me if I&#39;m wrong and I&#39;m happy to be so. But, in the context of an instance method, I believe <code>self</code> resolves to the instance, not the class. If, in the context of an instance method, you want to get to class variable, you&#39;d do something like <code>self.class.class_variable</code>. So, <code>quantity * event.price</code> <b>should</b> be the same as <code>self.quantity * self.event.price</code>. Again, apologies in advance if I&#39;ve gotten this wrong."}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1470863585, "post_id": 38883038, "comment_id": 65128133, "body": "You may be right but I think it has more to do with the responses above - the &#163; sign is rendering the output to 0(zero). I think this is the main issue."}, {"owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 2, "creation_date": 1470867475, "post_id": 38883038, "comment_id": 65129674, "body": "@jvillian is completely correct; the only times that prepending <code>self.</code> to a method makes any difference are: 1) defining a class method, 2) calling a method on self which is shadowed by a local variable of the same name, 3) disambiguating a setter on self from a local variable assignment, and 4) calling private methods (which will fail when called with an explicit receiver, even if that receiver is self... except in the case of a private setter, for which an exception is made to avoid syntax ambiguity)."}], "tags": [], "owner": {"reputation": 187, "user_id": 6569140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28c91af48cee9e57bc8f078fde90a46c?s=128&d=identicon&r=PG&f=1", "display_name": "Chaitanya Kale", "link": "https://stackoverflow.com/users/6569140/chaitanya-kale"}, "is_accepted": false, "score": -2, "last_activity_date": 1470861206, "creation_date": 1470861206, "answer_id": 38883038, "question_id": 38882727, "link": "https://stackoverflow.com/questions/38882727/ruby-how-to-multiply-variables-within-a-method/38883038#38883038", "title": "Ruby - how to multiply variables within a method", "body": "<p>If you are calling <code>booking.new</code> that means you are creating an instance of the class where as <code>self.</code> means you are using a class variable. </p>\n\n<p>Remove the <code>self</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1471000320, "post_id": 38887747, "comment_id": 65190089, "body": "Hi, I&#39;ve tried to implement the above methods but I get an &#39;undefined method gsub&#39; error. How do I rectify this? I feel I&#39;m very close to getting the answer to my question. Hope you&#39;re able to respond."}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1471001708, "post_id": 38887747, "comment_id": 65190929, "body": "check if the value you are getting for amount is string or convert it to string using <code>amount.to_s</code>"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1471001964, "post_id": 38887747, "comment_id": 65191070, "body": "Should I use amount in the method as I don&#39;t have this stored in my booking or events table? Putting amount.to_s in the above method just brings a syntax error."}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1471002081, "post_id": 38887747, "comment_id": 65191156, "body": "amount is your event.price which you are passing to this method"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1471002097, "post_id": 38887747, "comment_id": 65191171, "body": "what value do you have in event.price"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1471002208, "post_id": 38887747, "comment_id": 65191232, "body": "event.price is an integer so do I need to convert it to a string or a float to accept money?"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1471002285, "post_id": 38887747, "comment_id": 65191272, "body": "strip_currency method will take care converting it to string replacing currency symbol and converting it back to float"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1471002409, "post_id": 38887747, "comment_id": 65191362, "body": "The above now strips away the errors but I&#39;m still not getting the amount showing - it still shows as 0.00(zero) when I click through to the payment page."}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1471002645, "post_id": 38887747, "comment_id": 65191525, "body": "Should it be event.price_pennies to reflect the create method in the booking controller?"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1471003008, "post_id": 38887747, "comment_id": 65191737, "body": "No that doesn&#39;t work either. I need to find an equation that will strip out the &#163; symbol. I wonder if the answer above works but I&#39;m, not sure where I put string[0..-1].to_f in my MVC."}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1471005425, "post_id": 38887747, "comment_id": 65193135, "body": "what you can do is just save float value in your @event.price and while displaying it in html join the currency symbol"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1471005469, "post_id": 38887747, "comment_id": 65193159, "body": "That way you don&#39;t have to strip any symbols you can directly multiply it with whatever number you want"}], "tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 0, "last_activity_date": 1471001840, "last_edit_date": 1471001840, "creation_date": 1470892553, "answer_id": 38887747, "question_id": 38882727, "link": "https://stackoverflow.com/questions/38882727/ruby-how-to-multiply-variables-within-a-method/38887747#38887747", "title": "Ruby - how to multiply variables within a method", "body": "<p>You can use regex to strip your currency symbol</p>\n\n<pre><code>def total_amount\n  quantity.to_i * strip_currency(event.price)\nend\n\nprivate\n\ndef strip_currency(amount = '')\n  amount.to_s.gsub(/[^\\d\\.]/, '').to_f\nend\n</code></pre>\n"}], "owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1261, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1471001840, "creation_date": 1470860127, "last_edit_date": 1470895228, "question_id": 38882727, "link": "https://stackoverflow.com/questions/38882727/ruby-how-to-multiply-variables-within-a-method", "title": "Ruby - how to multiply variables within a method", "body": "<p>I'm using a method to try and multiply two variables as follows -</p>\n\n<pre><code>def total_amount\n  self.quantity.to_i * self.event.price.to_i\nend\n</code></pre>\n\n<p>I'm building an events app using Ruby on Rails and the aim of the method is to allow one user to book multiple spaces for a paid event.</p>\n\n<p>The method simply isn't working as when I click through to make a payment the amount simply shows as 0(zero). The method is in my booking model, in my bookings controller I have the following code -</p>\n\n<pre><code>class BookingsController &lt; ApplicationController\n\n  before_action :authenticate_user!\n\n  def new\n    @event = Event.find(params[:event_id])\n    @booking = @event.bookings.new(quantity: params[:quantity])\n    @booking.user = current_user\n  end\n\n  def create\n    @event = Event.find(params[:event_id])\n    @booking = @event.bookings.new(booking_params)\n    @booking.user = current_user\n\n    Booking.transaction do\n      @event.reload\n      if @event.bookings.count &gt; @event.number_of_spaces\n        flash[:warning] = \"Sorry, this event is fully booked.\"\n        raise ActiveRecord::Rollback, \"event is fully booked\"\n      end\n    end\n\n    if @booking.save\n      # CHARGE THE USER WHO'S BOOKED\n      # #{} == puts a variable into a string\n      Stripe::Charge.create(\n        amount: @event.price_pennies,\n        currency: \"gbp\",\n        card: @booking.stripe_token,\n        description: \"Booking number #{@booking.id}\")\n      flash[:success] = \"Your place on our event has been booked\"\n      redirect_to event_path(@event)\n    else\n      flash[:error] = \"Payment unsuccessful\"\n      render \"new\"\n    end\n\n    if @event.is_free?\n\n      @booking.save!\n      flash[:success] = \"Your place on our event has been booked\"\n      redirect_to event_path(@event)\n    end\n  end\n\n  private\n\n  def booking_params\n      params.require(:booking).permit(:stripe_token, :quantity)\n  end\nend\n</code></pre>\n\n<p>I have an input space on my events.show form which allows the user to input the number of spaces they require. The booking form has the following line of code which should reflect the total amount required -</p>\n\n<pre><code>&lt;p&gt;Total Amount&lt;%= @booking.total_amount %&gt;&lt;/p&gt;\n</code></pre>\n\n<p>I added <code>.to_i</code> to both variables as without this I received a NilClass error. How can I amend this so the method creates the correct output?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "proc"], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 3, "last_activity_date": 1470859446, "creation_date": 1470859446, "answer_id": 38882553, "question_id": 38882485, "link": "https://stackoverflow.com/questions/38882485/lambda-notation-in-rails-how-is-it-used-what-is-the-argument-in-the-parenthesi/38882553#38882553", "title": "Lambda notation in Rails. How is it used? What is the argument in the parenthesis inside a lambda in a scope?", "body": "<blockquote>\n  <p>If object represents the resulting AR collection</p>\n</blockquote>\n\n<p>Nope, <code>object</code> represents a parameter to the scope. If you have this scope, for example:</p>\n\n<pre><code>class User\n  scope :created_after, -&gt;(timestamp) { where('created_at &gt; ?', timestamp) }\nend\n</code></pre>\n\n<p>then you can call it like this: </p>\n\n<pre><code>User.created_after(3.days.ago)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "edited": false, "score": 0, "creation_date": 1470860975, "post_id": 38882578, "comment_id": 65126887, "body": "ah that&#39;s a thorough explanation as to why it&#39;s a a lambda/proc."}, {"owner": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "edited": false, "score": 0, "creation_date": 1470862040, "post_id": 38882578, "comment_id": 65127424, "body": "What about when used in a has_many like this: <code>has_many :subclass_point_analytics, -&gt; (object) { where(&quot;assessment_id = ?&quot;, object.assessment_id) }, :foreign_key =&gt; &#39;gid&#39;,  :dependent =&gt; :destroy</code>. What is <code>object</code>"}, {"owner": {"reputation": 12441, "user_id": 645132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3ce3855f059c1eea934e5316d5c22181?s=128&d=identicon&r=PG", "display_name": "agmcleod", "link": "https://stackoverflow.com/users/645132/agmcleod"}, "reply_to_user": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "edited": false, "score": 1, "creation_date": 1470885818, "post_id": 38882578, "comment_id": 65133940, "body": "Doesn&#39;t change from Segio&#39;s point. It&#39;s what ever arguments you pass to the scope when you call it in your controller/model."}], "tags": [], "owner": {"reputation": 12441, "user_id": 645132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3ce3855f059c1eea934e5316d5c22181?s=128&d=identicon&r=PG", "display_name": "agmcleod", "link": "https://stackoverflow.com/users/645132/agmcleod"}, "is_accepted": true, "score": 1, "last_activity_date": 1470859548, "creation_date": 1470859548, "answer_id": 38882578, "question_id": 38882485, "link": "https://stackoverflow.com/questions/38882485/lambda-notation-in-rails-how-is-it-used-what-is-the-argument-in-the-parenthesi/38882578#38882578", "title": "Lambda notation in Rails. How is it used? What is the argument in the parenthesis inside a lambda in a scope?", "body": "<blockquote>\n  <p>But what is the object inside that lambda parenthesis?</p>\n</blockquote>\n\n<p>The line is syntax sugar for this: </p>\n\n<pre><code>lambda { |object| where(\"publish_date &gt; ?\", 1.month.ago) }\n</code></pre>\n\n<p>The <code>object</code> value is an argument to the lambda.</p>\n\n<blockquote>\n  <p>If object represents the resulting AR collection...why does that make sense?</p>\n</blockquote>\n\n<p>As Sergio said, it represents additional args you can pass.</p>\n\n<blockquote>\n  <p>What's going on behind the scenes? Why is a Proc needed here?</p>\n</blockquote>\n\n<p>The proc is more of a forced solution to older problems. So when you used to define scopes like this:</p>\n\n<pre><code>scope :created_after, Time.now\n</code></pre>\n\n<p>Time.now would run immediately when the rails app booted. So it wouldn't re-evaluate Time.now each time you ran the scope. Lambda ensures your logic executes each time.</p>\n"}], "owner": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1750, "favorite_count": 0, "accepted_answer_id": 38882578, "answer_count": 2, "score": 0, "last_activity_date": 1470860578, "creation_date": 1470859210, "last_edit_date": 1470860578, "question_id": 38882485, "link": "https://stackoverflow.com/questions/38882485/lambda-notation-in-rails-how-is-it-used-what-is-the-argument-in-the-parenthesi", "title": "Lambda notation in Rails. How is it used? What is the argument in the parenthesis inside a lambda in a scope?", "body": "<p>Say I have an <code>Order</code> model:</p>\n\n<pre><code>class Order &lt; ActiveRecord::Base\n   scope :last_month, -&gt;(object) { where(\u201cpublish_date &gt; ?\u201d, 1.month.ago) }\nend\n</code></pre>\n\n<p>So, that's apparently how to define a scope in Rails. But what is the object inside that lambda parenthesis? If <code>object</code> represents the resulting AR collection...why does that make sense? What's going on behind the scenes? Why is a Proc needed here?</p>\n"}, {"tags": ["ruby", "chef-infra"], "comments": [{"owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "edited": false, "score": 0, "creation_date": 1470859972, "post_id": 38882392, "comment_id": 65126390, "body": "Never seen this, too. Maybe some custom tooling around Chef?"}], "answers": [{"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 0, "last_activity_date": 1470862202, "creation_date": 1470862202, "answer_id": 38883283, "question_id": 38882392, "link": "https://stackoverflow.com/questions/38882392/documentation-for-chefs-attribute-construct-in-metadata-rb-file/38883283#38883283", "title": "Documentation for chef&#39;s attribute construct in metadata.rb file", "body": "<p>The metadata fields still exist but nothing in the Chef ecosystem ever used them (except maybe old versions of Rightscale but that's not really \"Chef ecosystem\" anymore). Because of this we remove most of the docs about the feature. You can delete at will most likely, unless you have custom tools that use the data.</p>\n"}], "owner": {"reputation": 3155, "user_id": 2250246, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/07a1afc443e2dd57dc381a4e917c9e2b?s=128&d=identicon&r=PG", "display_name": "user2250246", "link": "https://stackoverflow.com/users/2250246/user2250246"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470862202, "creation_date": 1470858901, "question_id": 38882392, "link": "https://stackoverflow.com/questions/38882392/documentation-for-chefs-attribute-construct-in-metadata-rb-file", "title": "Documentation for chef&#39;s attribute construct in metadata.rb file", "body": "<p>I am new to chef and seeing the following code in metadata.rb file for a project handed over to me from someone.</p>\n\n<pre><code>attribute 'setup',\n   :required =&gt; 'required',\n   :default =&gt; 'internal',\n   :format =&gt; {\n     :category =&gt; '1.Global',\n     :order =&gt; 1,\n     :filter =&gt; {'all' =&gt; {'visible' =&gt; 'true'}},\n     :form =&gt; {'field' =&gt; 'select', 'options_for_select' =&gt; [\n         ['External', 'external'], ['Internal','internal']\n       ]\n     }\n   }\n</code></pre>\n\n<p>I have gone through both <a href=\"https://docs.chef.io/config_rb_metadata.html\" rel=\"nofollow\">https://docs.chef.io/config_rb_metadata.html</a> and \n<a href=\"https://docs.chef.io/attributes.html\" rel=\"nofollow\">https://docs.chef.io/attributes.html</a> but unable to understand most of the non-obvious constructs like category, order, filter, form etc.</p>\n\n<p>Are these not part of the standard chef packages?</p>\n"}, {"tags": ["json", "ruby", "parsing", "hash", "gsub"], "comments": [{"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 3, "creation_date": 1470858893, "post_id": 38882325, "comment_id": 65125800, "body": "Just use <code>my_hashes.to_json</code> to transform it into a JSON string. You may need to <code>require &#39;json&#39;</code> first."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1470860725, "post_id": 38882325, "comment_id": 65126762, "body": "Why convert the hash to JSON and then CSV? Why not go straight to CSV using <a href=\"http://ruby-doc.org/stdlib-2.3.1/libdoc/csv/rdoc/index.html\" rel=\"nofollow noreferrer\"><code>csv</code> from the standard library</a>?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1470864096, "post_id": 38882325, "comment_id": 65128396, "body": "This is an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>. Instead of converting the hashes you need to describe what you&#39;re trying to do, then look at a better way to accomplish it."}, {"owner": {"reputation": 1512, "user_id": 5513336, "user_type": "registered", "accept_rate": 16, "profile_image": "https://i.stack.imgur.com/bc7pn.jpg?s=128&g=1", "display_name": "Leia_Organa", "link": "https://stackoverflow.com/users/5513336/leia-organa"}, "edited": false, "score": 0, "creation_date": 1470936070, "post_id": 38882325, "comment_id": 65163726, "body": "Thank you for the suggestions. I have found a way to solve the problem, and am working on refactoring the code now."}], "answers": [{"comments": [{"owner": {"reputation": 1512, "user_id": 5513336, "user_type": "registered", "accept_rate": 16, "profile_image": "https://i.stack.imgur.com/bc7pn.jpg?s=128&g=1", "display_name": "Leia_Organa", "link": "https://stackoverflow.com/users/5513336/leia-organa"}, "edited": false, "score": 0, "creation_date": 1470936163, "post_id": 38882870, "comment_id": 65163773, "body": "Yes, you&#39;re totally correct. Hopefully I&#39;ve wised up a bit more after working with JSON a bit."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 2, "last_activity_date": 1470860610, "creation_date": 1470860610, "answer_id": 38882870, "question_id": 38882325, "link": "https://stackoverflow.com/questions/38882325/using-gsub-to-replace-with-in-an-array-of-hashes/38882870#38882870", "title": "Using gsub to replace &quot;=&gt;&quot; with &quot;:&quot; in an array of hashes", "body": "<p>Changing <code>=&gt;</code> to <code>:</code> wouldn't make a Ruby hash to a JSON object. And in fact you cannot just change a hash like that at all. Because the written representation of a hash is not the same as the interpreted version in memory.</p>\n\n<p>But that doesn't solve your problem: You need a <code>JSON</code> representation of a Ruby hash, just use <code>to_json</code>:</p>\n\n<pre><code>my_hashes = [\n {\"colorName\"=&gt;\"first\", \"hexValue\"=&gt;\"#f00\"}, \n {\"colorName\"=&gt;\"green\", \"hexValue\"=&gt;\"#0f0\"}, \n {\"colorName\"=&gt;\"blue\", \"hexValue\"=&gt;\"#00f\"}, \n {\"colorName\"=&gt;\"cyan\", \"hexValue\"=&gt;\"#0ff\"}, \n {\"colorName\"=&gt;\"magenta\", \"hexValue\"=&gt;\"#f0f\"}, \n {\"colorName\"=&gt;\"yellow\", \"hexValue\"=&gt;\"#ff0\"}, \n {\"colorName\"=&gt;\"black\", \"hexValue\"=&gt;\"#000\"}\n]\n\nrequire 'json'\nmy_hashes.to_json\n#=&gt; \"[{\"colorName\":\"first\",\"hexValue\":\"#f00\"},{\"colorName\":\"green\",\"hexValue\":\"#0f0\"},{\"colorName\":\"blue\",\"hexValue\":\"#00f\"},{\"colorName\":\"cyan\",\"hexValue\":\"#0ff\"},{\"colorName\":\"magenta\",\"hexValue\":\"#f0f\"},{\"colorName\":\"yellow\",\"hexValue\":\"#ff0\"},{\"colorName\":\"black\",\"hexValue\":\"#000\"}]\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2201, "user_id": 1488801, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/6uYLp.jpg?s=128&g=1", "display_name": "James Elderfield", "link": "https://stackoverflow.com/users/1488801/james-elderfield"}, "edited": false, "score": 0, "creation_date": 1470916688, "post_id": 38895502, "comment_id": 65150394, "body": "You could improve this answer by providing some explanation, rather than just code."}, {"owner": {"reputation": 1512, "user_id": 5513336, "user_type": "registered", "accept_rate": 16, "profile_image": "https://i.stack.imgur.com/bc7pn.jpg?s=128&g=1", "display_name": "Leia_Organa", "link": "https://stackoverflow.com/users/5513336/leia-organa"}, "edited": false, "score": 0, "creation_date": 1470936123, "post_id": 38895502, "comment_id": 65163754, "body": "Thank you for the advice!"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1470992338, "post_id": 38895502, "comment_id": 65184980, "body": "The <code>gsub</code> call is useless, because there are no <code>=&gt;</code> in the json created by <code>to_json</code>."}], "tags": [], "owner": {"reputation": 325, "user_id": 4643690, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9_dmW_kS7R0/AAAAAAAAAAI/AAAAAAAAAAw/AeA0aY62T0w/photo.jpg?sz=128", "display_name": "bk chovatiya", "link": "https://stackoverflow.com/users/4643690/bk-chovatiya"}, "is_accepted": false, "score": 1, "last_activity_date": 1470916035, "creation_date": 1470916035, "answer_id": 38895502, "question_id": 38882325, "link": "https://stackoverflow.com/questions/38882325/using-gsub-to-replace-with-in-an-array-of-hashes/38895502#38895502", "title": "Using gsub to replace &quot;=&gt;&quot; with &quot;:&quot; in an array of hashes", "body": "<pre><code>my_hashes=[{\"colorName\"=&gt;\"first\", \"hexValue\"=&gt;\"#f00\"}]\n\nnew_data = my_hashes.to_json.gsub(/\\=\\&gt;/, ':')\n\ndata = Json.parse new_data\n</code></pre>\n"}], "owner": {"reputation": 1512, "user_id": 5513336, "user_type": "registered", "accept_rate": 16, "profile_image": "https://i.stack.imgur.com/bc7pn.jpg?s=128&g=1", "display_name": "Leia_Organa", "link": "https://stackoverflow.com/users/5513336/leia-organa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 537, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1470916035, "creation_date": 1470858670, "question_id": 38882325, "link": "https://stackoverflow.com/questions/38882325/using-gsub-to-replace-with-in-an-array-of-hashes", "title": "Using gsub to replace &quot;=&gt;&quot; with &quot;:&quot; in an array of hashes", "body": "<p>I think I've written myself in a corner. Basically, I have an array of hashes, like so. </p>\n\n<pre><code> my_hashes = [{\"colorName\"=&gt;\"first\", \"hexValue\"=&gt;\"#f00\"}, {\"colorName\"=&gt;\"green\", \"hexValue\"=&gt;\"#0f0\"}, \n    {\"colorName\"=&gt;\"blue\", \"hexValue\"=&gt;\"#00f\"}, {\"colorName\"=&gt;\"cyan\", \"hexValue\"=&gt;\"#0ff\"}, \n    {\"colorName\"=&gt;\"magenta\", \"hexValue\"=&gt;\"#f0f\"}, {\"colorName\"=&gt;\"yellow\", \"hexValue\"=&gt;\"#ff0\"}, \n    {\"colorName\"=&gt;\"black\", \"hexValue\"=&gt;\"#000\"}]\n</code></pre>\n\n<p>I need to use JSON.parse to eventually be able to transform these hashes into CSV format. The only problem is I can't get JSON.parse to work as long as the \"=>\" symbol is present. I've tried just doing a regular gsub('=>', ':') but it appears that I cannot use it as this is an array of hashes. I've tried variations of the following method:</p>\n\n<pre><code>my_hashes.each do |hash| \n    hash.each do |key, value|\n        key.gsub!('=&gt;', ':')\n        value.gsub!('=&gt;', ':')\n    end\nend\n</code></pre>\n\n<p>I need these hash values to stay intact, so even if I transform them intro strings, if I transform them back they'll still have the '=>' symbol available. Any advice?</p>\n"}, {"tags": ["ruby", "rest", "ruby-on-rails-4", "facebook-graph-api", "ruby-on-rails-3.2"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1470860901, "post_id": 38882297, "comment_id": 65126843, "body": "See <a href=\"https://www.ruby-toolbox.com/categories/scheduling\" rel=\"nofollow noreferrer\">gems for scheduling</a>"}, {"owner": {"reputation": 1436, "user_id": 2096740, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/67b4b0da1074e71906237509810c7eac?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/2096740/arjun"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1470861180, "post_id": 38882297, "comment_id": 65127000, "body": "About the data saving part, I could easily use hash to do it. So please see the updated question."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1470861856, "post_id": 38882297, "comment_id": 65127336, "body": "what is the update? what specific info are you looking for? please show your attempt."}, {"owner": {"reputation": 1436, "user_id": 2096740, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/67b4b0da1074e71906237509810c7eac?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/2096740/arjun"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1470862354, "post_id": 38882297, "comment_id": 65127582, "body": "Idea is to add the api response in an array/hash everytime the api is  called. Preferably in a manner of key=datetime and value=likes, so that a question of, &quot;Show the likes for each day of month&quot; can be answered."}, {"owner": {"reputation": 1436, "user_id": 2096740, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/67b4b0da1074e71906237509810c7eac?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/2096740/arjun"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1470862714, "post_id": 38882297, "comment_id": 65127765, "body": "I guess that Graph.new line would overwrite everytime. What is the proper method"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1470863049, "post_id": 38882297, "comment_id": 65127906, "body": "use persistent storage, i.e. a database"}], "owner": {"reputation": 1436, "user_id": 2096740, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/67b4b0da1074e71906237509810c7eac?s=128&d=identicon&r=PG", "display_name": "arjun", "link": "https://stackoverflow.com/users/2096740/arjun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1470862275, "creation_date": 1470858546, "last_edit_date": 1470862275, "question_id": 38882297, "link": "https://stackoverflow.com/questions/38882297/save-api-response-data-daily-without-overwriting", "title": "Save API response data daily without overwriting", "body": "<p><strong>UPDATED</strong>  </p>\n\n<p>I have setup a model Graph with a single attribute, <code>:data</code></p>\n\n<p>I request, for eg, Facebook page and store the likes in data.</p>\n\n<p>How can I schedule that API call everyday, such that two things are achievable<br>\n1. Value stored in <code>:data</code> is a hash of key - <code>updated_at</code> and value <code>:data</code>. This hash being added with value everyday without risk of overwriting.<br>\n2. All the <code>:data</code> stored everyday can be recalled in a page and presented like a monthly graph, or a calculation is done, for eg, to show avg likes per day, etc.</p>\n\n<p>Controller  </p>\n\n<pre><code>def index\n    @fb = Graph.fb_page(\"facebook\")\n    @data = Graph.new(:fb =&gt; [@fb])\n    @data.save\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1470857803, "post_id": 38882082, "comment_id": 65125251, "body": "What do you need this token for? Read about <code>before_create</code> activerecord hook."}], "answers": [{"tags": [], "owner": {"reputation": 20798, "user_id": 493749, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/415fb73080f1d9f0922c80153f8e95a6?s=128&d=identicon&r=PG", "display_name": "Chris Cashwell", "link": "https://stackoverflow.com/users/493749/chris-cashwell"}, "is_accepted": false, "score": 1, "last_activity_date": 1470858511, "last_edit_date": 1470858511, "creation_date": 1470858205, "answer_id": 38882205, "question_id": 38882082, "link": "https://stackoverflow.com/questions/38882082/how-can-i-create-with-base64-tokens-automatically-for-my-products/38882205#38882205", "title": "How can I create with base64 tokens automatically for my products?", "body": "<p>You can simply generate a random URL-safe base64 string using <a href=\"http://ruby-doc.org/stdlib-2.1.2/libdoc/securerandom/rdoc/SecureRandom.html#method-c-urlsafe_base64\" rel=\"nofollow\"><code>SecureRandom#urlsafe_base64</code></a> and populate the <code>token</code> field.</p>\n\n<pre><code>before_create :generate_token\n\ndef generate_token\n  self.token ||= SecureRandom.urlsafe_base64\nend\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 5632941, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/763489957117785/picture?type=large", "display_name": "Julio Manuel Chan Martin", "link": "https://stackoverflow.com/users/5632941/julio-manuel-chan-martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470858511, "creation_date": 1470857749, "last_edit_date": 1470858362, "question_id": 38882082, "link": "https://stackoverflow.com/questions/38882082/how-can-i-create-with-base64-tokens-automatically-for-my-products", "title": "How can I create with base64 tokens automatically for my products?", "body": "<p>I building with ruby on rails and I want to generate unique Base64 tokens for my model automatically. In all the examples I've seen, the token is generate for the name or a password. How can I generate tokens in general?</p>\n\n<p>My model looks something like this:</p>\n\n<pre><code>{        \n  \"id\": 2,\n  \"name\": \"cookies\",\n  \"description\": \"box 150g\",\n  \"logo_url\": null,\n  \"token\": null\n}\n</code></pre>\n"}, {"tags": ["ruby", "selenium", "testing", "cucumber", "capybara"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5278362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zT8b1.jpg?s=128&g=1", "display_name": "Josh Jones", "link": "https://stackoverflow.com/users/5278362/josh-jones"}, "edited": false, "score": 0, "creation_date": 1471035095, "post_id": 38883750, "comment_id": 65209523, "body": "Thank you! Going to play with it some more, but I suspect have_css might be the right path to follow."}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 1, "last_activity_date": 1470864238, "last_edit_date": 1470864238, "creation_date": 1470863915, "answer_id": 38883750, "question_id": 38881895, "link": "https://stackoverflow.com/questions/38881895/how-to-test-for-multiple-instances-of-strings-that-match-the-same-regex-on-a-pag/38883750#38883750", "title": "How to test for multiple instances of strings that match the same regex on a page with Capybara / Ruby", "body": "<p>To use a regex you need to pass a regex not a string. So to check if the page matches your regex 3 times it would be</p>\n\n<pre><code>expect(page).to have_text(/\\$[\\d]{0,1},{0,1}[\\d]{2,3},{0,1}[\\d]{0,3}/, count: 3)\n</code></pre>\n\n<p>If <code>@page.price</code> refers to a piece of the page that contains all 3 prices then it would be</p>\n\n<pre><code>expect(@page.price).to have_text(/\\$[\\d]{0,1},{0,1}[\\d]{2,3},{0,1}[\\d]{0,3}/, count: 3)\n</code></pre>\n\n<p>However judging from the \"ambiguous error\" I'm guessing that your @page.price selector may actually be selecting an element that only has one price in it?  If thats the case you want something more like</p>\n\n<pre><code>expect(page).to have_css('div.psfm-hf-ft-price', text: /\\$[\\d]{0,1},{0,1}[\\d]{2,3},{0,1}[\\d]{0,3}/, count: 3)\n</code></pre>\n\n<p>which will check that the page has 3 elements matching the given css selector which each have content matching the regex</p>\n"}], "owner": {"reputation": 13, "user_id": 5278362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zT8b1.jpg?s=128&g=1", "display_name": "Josh Jones", "link": "https://stackoverflow.com/users/5278362/josh-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470864238, "creation_date": 1470857004, "question_id": 38881895, "link": "https://stackoverflow.com/questions/38881895/how-to-test-for-multiple-instances-of-strings-that-match-the-same-regex-on-a-pag", "title": "How to test for multiple instances of strings that match the same regex on a page with Capybara / Ruby", "body": "<p>Trying to test a page that has 3 house prices on it. Each house price could be anything as low as $10,000 and as high as $1,000,000, so I wrote a regex to try to catch any possible iterations of the numbers:</p>\n\n<pre><code>\\$[\\d]{0,1},{0,1}[\\d]{2,3},{0,1}[\\d]{0,3}\n</code></pre>\n\n<p>The problem that I'm running into is that I can't figure out how to correctly form the Capybara expression to verify that there are 3 iterations. The first attempt here:</p>\n\n<pre><code>Then(/^I should see (\\d+) listings which contain the price in the correct format$/) do |times|\n expect(@page.price).to have_text(\"\\$[\\d]{0,1},{0,1}[\\d]{2,3},{0,1}[\\d]{0,3}\", :count =&gt; times)\nend\n</code></pre>\n\n<p>... gives this error:</p>\n\n<pre><code>Then I should see 3 listings which contain the price in the correct format\n# features/step_definitions/feature_format.rb:6\nUnused parameters passed to Capybara::Queries::SelectorQuery : [\"$[d]{0,1},{0,1}[d]{2,3},{0,1}[d]{0,3}\"]\nUnused parameters passed to Capybara::Queries::SelectorQuery : [\"$[d]{0,1},{0,1}[d]{2,3},{0,1}[d]{0,3}\"]\nUnused parameters passed to Capybara::Queries::SelectorQuery : [\"$[d]{0,1},{0,1}[d]{2,3},{0,1}[d]{0,3}\"]\n</code></pre>\n\n<p>The second attempt here:</p>\n\n<pre><code>Then(/^I should see (\\d+) listings which contain the price in the correct format$/) do |times|\n for i in 1..times.to_i do\n  expect(@page.price).to assert_text(\"\\$[\\d]{0,1},{0,1}[\\d]{2,3},{0,1}[\\d]{0,3}\")\n  end\n end\n</code></pre>\n\n<p>... gives this error:</p>\n\n<pre><code>Then I should see 3 listings which contain the price in the correct format \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 # features/step_definitions/feature_format.rb:6\n \u00a0 \u00a0 \u00a0Ambiguous match, found 3 elements matching css \"div.psfm-hf-ft-price\" (Capybara::Ambiguous)\n</code></pre>\n\n<p>Does anybody know what's going wrong here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation", "include", "inclusion"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1470856104, "post_id": 38881575, "comment_id": 65124340, "body": "What about <code>inclusion: { in: %w(cat).flat_map {|s| [s, s.pluralize] }, message: &quot;must contain the word cat&quot; }</code>?"}, {"owner": {"reputation": 163, "user_id": 6432023, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbf6670724daaa9b481e1521a81666c2?s=128&d=identicon&r=PG&f=1", "display_name": "Christian O&#39;Rourke", "link": "https://stackoverflow.com/users/6432023/christian-orourke"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1470864131, "post_id": 38881575, "comment_id": 65128412, "body": "@ArupRakshit Actually I realized a terrible flaw in my code, while the flat_map method works, the include validator returns an error if the post contains anything but the word cat or cats, really not sure how to fix this but by using validates_with and defining a custom class. Thanks for the help though! I didn&#39;t know about flat_map until now."}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1470894844, "post_id": 38881575, "comment_id": 65136814, "body": "Hey, I hope you found out the solution. Let me know if you still stuck."}], "owner": {"reputation": 163, "user_id": 6432023, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbf6670724daaa9b481e1521a81666c2?s=128&d=identicon&r=PG&f=1", "display_name": "Christian O&#39;Rourke", "link": "https://stackoverflow.com/users/6432023/christian-orourke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 305, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1470855750, "creation_date": 1470855750, "question_id": 38881575, "link": "https://stackoverflow.com/questions/38881575/how-to-have-rails-5-inclusion-validation-accept-either-a-word-or-its-plural", "title": "How to have Rails 5 inclusion validation accept either a word or it&#39;s plural", "body": "<p>I have been teaching myself Rails for a while and am making a cat based website based off of Hartl's tutorial for practice. I want all user's to have to include either the word \"cat\" or \"cats\" in their posts. To do this I thought it would be easiest to use the inclusion validation on my micropost model, however I am not sure how to have the validation work in the case that the user makes a post containing \"cats\" instead of \"cat\", or containing both words. I feel like I'm missing something pretty simple. Any help would be much appreciated!\nHere is my micropost model file:</p>\n\n<pre><code>class Micropost &lt; ApplicationRecord\n  belongs_to :user\n  default_scope -&gt; { order(created_at: :desc) }\n  mount_uploader :picture, PictureUploader\n  validates  :user_id, presence: true\n  validates  :content, presence: true, length: { maximum: 140 },\n    inclusion: { in: %w(cat), message: \"must contain the word cat\" }\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 4866971, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c0caaf42449180e78e11c47b30feba4f?s=128&d=identicon&r=PG&f=1", "display_name": "Nechama Goldman", "link": "https://stackoverflow.com/users/4866971/nechama-goldman"}, "edited": false, "score": 0, "creation_date": 1470901929, "post_id": 38881700, "comment_id": 65140738, "body": "Thanks @salinn!! The way you described the relationships is helpful. Would you be able to give me guidance on how to update the apartment controller to implement crud for photos and galleries?"}, {"owner": {"reputation": 2188, "user_id": 1489914, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/7PReX.jpg?s=128&g=1", "display_name": "Tall Paul", "link": "https://stackoverflow.com/users/1489914/tall-paul"}, "reply_to_user": {"reputation": 45, "user_id": 4866971, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c0caaf42449180e78e11c47b30feba4f?s=128&d=identicon&r=PG&f=1", "display_name": "Nechama Goldman", "link": "https://stackoverflow.com/users/4866971/nechama-goldman"}, "edited": false, "score": 0, "creation_date": 1470916530, "post_id": 38881700, "comment_id": 65150278, "body": "@NechamaGoldman so the way I described you wouldn&#39;t have to update anything with the apartment controller. What you would do is go through your normal steps then on the show page for the controller you would add a photo section and put the form for photos. I don&#39;t think you need a gallery here personally. Does that make sense?"}], "tags": [], "owner": {"reputation": 2188, "user_id": 1489914, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/7PReX.jpg?s=128&g=1", "display_name": "Tall Paul", "link": "https://stackoverflow.com/users/1489914/tall-paul"}, "is_accepted": false, "score": 0, "last_activity_date": 1470856201, "creation_date": 1470856201, "answer_id": 38881700, "question_id": 38880920, "link": "https://stackoverflow.com/questions/38880920/how-to-save-multiple-images-to-a-resource-in-rails/38881700#38881700", "title": "How to save multiple images to a resource in rails", "body": "<p>How I have approached this problem in the past is two have two other models. I would create one model that is a gallery and one that is a photo. </p>\n\n<p>The Photo can have more information on it you care about name or description. The photo links to the gallery so it knows which gallery it belongs to.</p>\n\n<p>The Gallery then has just a name and links to an apartment. I like separating it out a it in case you want to do anything special like pick which photo is first in a gallery or something. </p>\n\n<p>If you don't care then you could easily just do another crud model with photos and give it the apartment_id.</p>\n\n<p>I would handle photo uploads later and not at the start of listing the apartment, it will help get people more invested when the barrier to listing an apartment is lower. </p>\n\n<p>So the commands I would run if you are doing the it with a gallery are </p>\n\n<p><code>rails g scaffold gallery name:string apartment:belongs_to</code></p>\n\n<p><code>rails g scaffold photo name:string information:text photo_url:string gallery:belongs_to</code></p>\n\n<p>or with no gallery</p>\n\n<p><code>rails g scaffold photo name:string information:text photo_url:string apartment:belongs_to</code></p>\n\n<p>You will have to update the photos model and controller to work with carrierwave after this though. </p>\n"}], "owner": {"reputation": 45, "user_id": 4866971, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c0caaf42449180e78e11c47b30feba4f?s=128&d=identicon&r=PG&f=1", "display_name": "Nechama Goldman", "link": "https://stackoverflow.com/users/4866971/nechama-goldman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 211, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1470856201, "creation_date": 1470853526, "question_id": 38880920, "link": "https://stackoverflow.com/questions/38880920/how-to-save-multiple-images-to-a-resource-in-rails", "title": "How to save multiple images to a resource in rails", "body": "<p>I am new to rails and creating a real estate application that store information about apartments.</p>\n\n<p>I have an Apartment model, views and a controller that work so I can CRUD apartments.</p>\n\n<p>Now, I'd like to add the ability to add multiple images to an apartment.</p>\n\n<p>I've installed the gem carrierwave, mini_magick and fog gems.</p>\n\n<p>I created an Image model with that has a picture(string) column and and apartment_id(integer) column. Then I created a belongs_to/has_many relationship between Image and Apartment.</p>\n\n<p>My question is: How can I create an instance of the Image model in the Create Apartment view?</p>\n\n<p>I'd assume I'd do something like this in the apartment controller, but I'm not sure:</p>\n\n<pre><code>  def new\n    @apartment = Apartment.new\n  end\n\n  def create\n    @apartment = current_user.apartments.new(apartment_params)\n    **@image = @apartment.images.new(?)**\n\n    if @apartment.save **&amp;&amp; @image.save**\n       flash[:notice] = \"Congratulations! Your apartment has been added.\"\n       redirect_to apartments_path\n    else\n       flash[:error] = \"There was an error saving your listing. Please try again.\"\n       render :new\n    end\n  end\n\nprivate\n\ndef apartment_params\n  params.require(:apartment).permit(:street, :from_date, :to_date, :to_date_open, :flex_dates, :price, :price_neg, :agent_fee, :furnished, :package, :flights, :beds, :baths, :description)\nend\n</code></pre>\n\n<p>Also, I'm not sure how to change the code in the view:</p>\n\n<pre><code>&lt;%= form_for(@apartment) do |f| %&gt;\n  &lt;% if @apartment.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;ul&gt;\n      &lt;% @apartment.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :street %&gt;&lt;br&gt;\n    &lt;%= f.text_field :street %&gt;\n  &lt;/div&gt;\n\n  **&lt;div class=\"field\"&gt;\n    &lt;%= f.label :picture %&gt;\n    &lt;%= f.file_field :picture %&gt;\n    &lt;%#= f.hidden_field :picture_cache %&gt;\n  &lt;/div&gt;**\n</code></pre>\n\n<p>Any guidance on how to add images while creating a new apartment would be great.</p>\n\n<p>Thanks in advance!!</p>\n"}, {"tags": ["ruby", "sqlite", "heroku"], "answers": [{"comments": [{"owner": {"reputation": 1886, "user_id": 4076298, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e3153752818310fdadf9b6d7ac67989d?s=128&d=identicon&r=PG", "display_name": "scosman", "link": "https://stackoverflow.com/users/4076298/scosman"}, "edited": false, "score": 0, "creation_date": 1470943851, "post_id": 38897756, "comment_id": 65167967, "body": "We need in-memory tables. I love postgres, and we use it for our &quot;real&quot; database, but we really do just need short lived local sqlite tables in this use case."}], "tags": [], "owner": {"reputation": 1, "user_id": 6673597, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001438994358/picture?type=large", "display_name": "Lydie Khashina", "link": "https://stackoverflow.com/users/6673597/lydie-khashina"}, "is_accepted": false, "score": -1, "last_activity_date": 1470922119, "creation_date": 1470922119, "answer_id": 38897756, "question_id": 38880914, "link": "https://stackoverflow.com/questions/38880914/sqlite-on-heroku-production-in-memory/38897756#38897756", "title": "sqlite on Heroku (production, in memory)", "body": "<p>Unfortunately, Heroku doesn't support SQLite on its architecture basis. You should migrate to PostgreSQL. But I know the solution without migrating - Dokkur - Heroku analogue.</p>\n"}, {"comments": [{"owner": {"reputation": 1886, "user_id": 4076298, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e3153752818310fdadf9b6d7ac67989d?s=128&d=identicon&r=PG", "display_name": "scosman", "link": "https://stackoverflow.com/users/4076298/scosman"}, "edited": false, "score": 0, "creation_date": 1470943780, "post_id": 38901462, "comment_id": 65167930, "body": "We need a local, in-memory option for some aggressive number crunching. Adding a remote database is overkill, not fast enough and really the wrong tool for the job. Thanks though."}, {"owner": {"reputation": 1886, "user_id": 4076298, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e3153752818310fdadf9b6d7ac67989d?s=128&d=identicon&r=PG", "display_name": "scosman", "link": "https://stackoverflow.com/users/4076298/scosman"}, "edited": false, "score": 0, "creation_date": 1471008525, "post_id": 38901462, "comment_id": 65195150, "body": "@simonie not looking for faster. sqlite is a very differnt tool compared to redis. It&#39;s serverless, in process, supports SQL, temporary tables, and paging to disk."}], "tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": false, "score": -1, "last_activity_date": 1470932088, "creation_date": 1470932088, "answer_id": 38901462, "question_id": 38880914, "link": "https://stackoverflow.com/questions/38880914/sqlite-on-heroku-production-in-memory/38901462#38901462", "title": "sqlite on Heroku (production, in memory)", "body": "<p>I don't think you have a lot of options here. Heroku doesn't allow the use of SQLite.</p>\n\n<p>You can still use a PG table as a generic, short-lived, database. Or if you just need a simple storage and you don't need advanced querying mechanisms, you can use Redis.</p>\n\n<p>Both are available from Heroku.</p>\n"}], "owner": {"reputation": 1886, "user_id": 4076298, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e3153752818310fdadf9b6d7ac67989d?s=128&d=identicon&r=PG", "display_name": "scosman", "link": "https://stackoverflow.com/users/4076298/scosman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 549, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1471008747, "creation_date": 1470853516, "last_edit_date": 1471008747, "question_id": 38880914, "link": "https://stackoverflow.com/questions/38880914/sqlite-on-heroku-production-in-memory", "title": "sqlite on Heroku (production, in memory)", "body": "<p>We want to use sqlite, via the sqlite3 gem in Ruby in a production app on Heroku. However, heroku detects the gem, and blocks our deploys.</p>\n\n<p>We're aware heroku's filesystem is ephemeral, but we're using SQLLite's in memory mode for a short lived database in a background worker. Heroku blocks the gem because they worry people will attempt to use it as a persistent database and be surprised when their data disappears (see link below). I can appreciate their concern, but we have a legitimate use case, and are still blocked.</p>\n\n<p>Are there are any work arounds to the nanny-check heroku adds if you have a legitimate use case for sqlite? </p>\n\n<p>Edit: Please note, we are not looking for alternative tool suggestions. We already have a \"real\" database with terabytes of data. We're loading data into a local temp DB as a legit optimization. sqlite lite works great on Heroku using any other language binding. I'm just looking for a way around Heroku's nanny-check to use Ruby + sqlite.</p>\n\n<p><a href=\"https://devcenter.heroku.com/articles/sqlite3\" rel=\"nofollow\">https://devcenter.heroku.com/articles/sqlite3</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "proxy"], "answers": [{"comments": [{"owner": {"reputation": 2374, "user_id": 1941418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8940942c798e82d460e0c058acfb3b7?s=128&d=identicon&r=PG", "display_name": "smefju", "link": "https://stackoverflow.com/users/1941418/smefju"}, "reply_to_user": {"reputation": 37, "user_id": 6701663, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/58a949ec9c1b2edc32c751c02507a455?s=128&d=identicon&r=PG&f=1", "display_name": "hernan", "link": "https://stackoverflow.com/users/6701663/hernan"}, "edited": false, "score": 0, "creation_date": 1470854274, "post_id": 38880810, "comment_id": 65123331, "body": "Your second error says that proxy credentials are invalid or a further steps are needed to use it. However you should be able to download rails gem without proxy unless there is some block from ISP or someone). Anyway, are you able to install gem directly from the console?"}, {"owner": {"reputation": 37, "user_id": 6701663, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/58a949ec9c1b2edc32c751c02507a455?s=128&d=identicon&r=PG&f=1", "display_name": "hernan", "link": "https://stackoverflow.com/users/6701663/hernan"}, "edited": false, "score": 0, "creation_date": 1470855196, "post_id": 38880810, "comment_id": 65123810, "body": "i cannot install the gem from my console because i have the error that is above. I tried to install it bydownloading the gem and then executing the command &quot;gem install --local rails-5.0.0.gem&quot; and i had this error: ERROR:  Could not find a valid gem &#39;railties&#39; (= 5.0.0) in any repository"}], "tags": [], "owner": {"reputation": 2374, "user_id": 1941418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8940942c798e82d460e0c058acfb3b7?s=128&d=identicon&r=PG", "display_name": "smefju", "link": "https://stackoverflow.com/users/1941418/smefju"}, "is_accepted": false, "score": 0, "last_activity_date": 1470853170, "creation_date": 1470853170, "answer_id": 38880810, "question_id": 38880515, "link": "https://stackoverflow.com/questions/38880515/error-in-proxy-in-rubymine/38880810#38880810", "title": "error in proxy in rubymine", "body": "<p>It should be \"<a href=\"https://rubygems.org/\" rel=\"nofollow\">https://rubygems.org/</a>\" instead of \"https rubygems.org/\" (missing <code>://</code>). Make sure that you have a proper value for <code>source</code> in Gemfile.</p>\n"}], "owner": {"reputation": 37, "user_id": 6701663, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/58a949ec9c1b2edc32c751c02507a455?s=128&d=identicon&r=PG&f=1", "display_name": "hernan", "link": "https://stackoverflow.com/users/6701663/hernan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 225, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470853548, "creation_date": 1470852113, "last_edit_date": 1470853548, "question_id": 38880515, "link": "https://stackoverflow.com/questions/38880515/error-in-proxy-in-rubymine", "title": "error in proxy in rubymine", "body": "<p>0\nvotar en contra\nfavorito\nI've tried to run a gem in rubymine and I have the following error:</p>\n\n<blockquote>\n  <p>ERROR: Could not find a valid gem 'rails' (>= 0), here is why: Unable\n  to download data from <a href=\"https://rubygems.org/\" rel=\"nofollow\">https://rubygems.org/</a> - no such name\n  (<a href=\"https://rubygems.org/specs.4.8.gz\" rel=\"nofollow\">https://rubygems.org/specs.4.8.gz</a>)</p>\n</blockquote>\n\n<p>Then I configured the proxy like this:</p>\n\n<pre><code>set http_proxy=http://user:pass@serv:port\n</code></pre>\n\n<p>and I had the following error:</p>\n\n<blockquote>\n  <p>ERROR: While executing gem ... (Net::HTTPServerException) 407 \"Proxy\n  Authentication Required ( Forefront TMG requires authorization to\n  fulfill the request. Access to the Web Proxy filter is denied. )\"</p>\n</blockquote>\n\n<p>Could you know what can it be?</p>\n\n<p>thank you!</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1470853605, "post_id": 38880400, "comment_id": 65122942, "body": "Why the rush to select an answer? You may discourage other answers and short-circuit those still preparing answers."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1470853850, "post_id": 38880400, "comment_id": 65123087, "body": "<code>a</code>, <code>b</code>, <code>c</code> and <code>d</code> are not valid objects, so readers cannot test without going to the trouble of modifying your code. You need to add <code>def initialize(color, name, type); @color, @name, @type = color, name, type; end</code>, define <code>a = Font(&quot;blue&quot;, &quot;s&quot;, &quot;bold&quot;)</code> and similar for  <code>b</code>, <code>c</code> and <code>d</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1470865735, "post_id": 38880400, "comment_id": 65129076, "body": "I mean <code>a = Font.new(&quot;blue&quot;, &quot;s&quot;, &quot;bold&quot;)</code>..."}], "answers": [{"tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": true, "score": 11, "last_activity_date": 1470851850, "creation_date": 1470851850, "answer_id": 38880444, "question_id": 38880400, "link": "https://stackoverflow.com/questions/38880400/remove-duplicates-from-array-of-objects-based-on-multiple-attributes-in-ruby/38880444#38880444", "title": "Remove duplicates from array of objects based on multiple attributes in ruby", "body": "<p>You can try:</p>\n\n<pre><code>uniq_fonts = fonts.uniq { |f| [ f.name, f.color ] }\n</code></pre>\n\n<p>You can defined your own <code>values_at</code> method like:</p>\n\n<pre><code>class Font\n  attr_accessor :color, :name, :type\n\n  def values_at *args\n    args.map { |method_name| self.public_send method_name }\n  end\nend\n</code></pre>\n\n<p>And then do like :</p>\n\n<pre><code>fonts.uniq { |f| f.values_at(:name, :color)}\n</code></pre>\n"}], "owner": {"reputation": 583, "user_id": 3000299, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/DkgW8.png?s=128&g=1", "display_name": "sujay", "link": "https://stackoverflow.com/users/3000299/sujay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2888, "favorite_count": 1, "accepted_answer_id": 38880444, "answer_count": 1, "score": 2, "last_activity_date": 1470851850, "creation_date": 1470851693, "question_id": 38880400, "link": "https://stackoverflow.com/questions/38880400/remove-duplicates-from-array-of-objects-based-on-multiple-attributes-in-ruby", "title": "Remove duplicates from array of objects based on multiple attributes in ruby", "body": "<p>I have an array of objects which may contain objects with same attribute values. I am trying to remove the duplicates based on multiple attributes (not just one attribute value)</p>\n\n<pre><code>class Font\n attr_accessor :color, :name, :type\nend\n\na = &lt;@color=\"blue\", @name=\"s\", @type=\"bold\"&gt;\nb = &lt;@color=\"blue\", @name=\"r\", @type=\"italic\"&gt; \nc = &lt;@color=\"green\", @name=\"t\", @type=\"bold\"&gt;\nd = &lt;@color=\"blue\", @name=\"s\", @type=\"some_other_type\"&gt;\n\nfonts = [a, b, c, d]\n</code></pre>\n\n<p>I need to eliminate duplicates based on the values of color, name (I don't care about type)</p>\n\n<p><strong>what I have tried</strong></p>\n\n<pre><code>uniq_fonts = fonts.uniq { |f| f.name.to_s + f.color.to_s}\n</code></pre>\n\n<p><strong>is there any cleaner way in which I can achieve the same result?</strong></p>\n\n<p>Note: \nthese are objects and not hashes. I know we could have used:</p>\n\n<pre><code>fonts.uniq { |f| f.values_at(:name, :color)}\n</code></pre>\n\n<p>if they were hash</p>\n"}, {"tags": ["ruby", "capistrano"], "comments": [{"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1470855744, "post_id": 38880355, "comment_id": 65124130, "body": "You can enhance verbosity with <code>set :format_options, command_output: true, log_file: &#39;log&#47;capistrano.log&#39;, color: :auto, truncate: :auto</code> maybe you get a hint where it hangs. In theroy this should be default and a log/capistrano.log should exists already."}, {"owner": {"reputation": 326, "user_id": 2372318, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8b976a18795b40b2a0406f9e27c975fe?s=128&d=identicon&r=PG", "display_name": "Jose Faro", "link": "https://stackoverflow.com/users/2372318/jose-faro"}, "reply_to_user": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1470858939, "post_id": 38880355, "comment_id": 65125832, "body": "Thanks man, I did that and I didn&#39;t get any info. Also I connected through ssh to the server and I was able to verify that the files from step 02 were uploaded correctly to the server, and there were both of them uploaded fine."}, {"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1470859316, "post_id": 38880355, "comment_id": 65126025, "body": "Does <code>cap production git:wrapper</code> return or does it also hang?"}, {"owner": {"reputation": 326, "user_id": 2372318, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8b976a18795b40b2a0406f9e27c975fe?s=128&d=identicon&r=PG", "display_name": "Jose Faro", "link": "https://stackoverflow.com/users/2372318/jose-faro"}, "reply_to_user": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1470859737, "post_id": 38880355, "comment_id": 65126257, "body": "Well, I have an error at least... I will search a bit about it."}, {"owner": {"reputation": 326, "user_id": 2372318, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8b976a18795b40b2a0406f9e27c975fe?s=128&d=identicon&r=PG", "display_name": "Jose Faro", "link": "https://stackoverflow.com/users/2372318/jose-faro"}, "reply_to_user": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1470859952, "post_id": 38880355, "comment_id": 65126369, "body": "1 thing I noticed was this ---- &quot;Errno::ETIMEDOUT: Connection timed out - connect(2) for 109.73.225.169:22&quot; --- it is like my port setup is changed on execution to port 22 again, but I entered server connection port to 18765. How can I change that?"}, {"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1470893764, "post_id": 38880355, "comment_id": 65136427, "body": "You can change port per server or globaly via <code>ssh_options</code>"}], "owner": {"reputation": 326, "user_id": 2372318, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8b976a18795b40b2a0406f9e27c975fe?s=128&d=identicon&r=PG", "display_name": "Jose Faro", "link": "https://stackoverflow.com/users/2372318/jose-faro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 834, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1470860348, "creation_date": 1470851555, "last_edit_date": 1470860348, "question_id": 38880355, "link": "https://stackoverflow.com/questions/38880355/capistrano-deploy-stuck-at-step-03", "title": "Capistrano deploy - stuck at step 03", "body": "<p>I've been playing with capistrano deploy, I managed to connect to my server, but now I am stuck at step 03, but I don't have log errors and I don't know which might be the next thing to do.</p>\n\n<p>Help is highly appreciate. I don't whant you to solve by me of course not. I just want some guidance, thank you.</p>\n\n<pre><code>$ cap production deploy --trace\n** Invoke production (first_time)\n** Execute production\n** Invoke load:defaults (first_time)\n** Execute load:defaults\n** Invoke bundler:map_bins (first_time)\n** Execute bundler:map_bins\n** Invoke deploy (first_time)\n** Execute deploy\n** Invoke deploy:starting (first_time)\n** Execute deploy:starting\n** Invoke deploy:check (first_time)\n** Execute deploy:check\n** Invoke git:check (first_time)\n** Invoke git:wrapper (first_time)\n** Execute git:wrapper\n00:00 git:wrapper\n      01 mkdir -p /tmp\n    \u2714 01 vlmg@vlmg.mx 0.249s\n      Uploading /tmp/git-ssh-vlmg-forms-production-ubuntu.sh 100.0%\n      02 chmod 700 /tmp/git-ssh-vlmg-forms-production-ubuntu.sh\n    \u2714 02 vlmg@vlmg.mx 0.055s\n</code></pre>\n\n<hr>\n\n<p>This is my deploy.rb</p>\n\n<pre><code># config valid only for current version of Capistrano\nlock '3.6.0'\n\nset :application, 'vlmg-forms'\nset :repo_url, 'git@github.com:jose-octomedia/ar-vlmg-contact-forms.git'\n\n# Default branch is :master\n# ask :branch, `git rev-parse --abbrev-ref HEAD`.chomp\n\n# Default deploy_to directory is /var/www/my_app_name\n#set :deploy_to, '/'\n\n# Default value for :scm is :git\n# set :scm, :git\n\n# Default value for :format is :airbrussh.\n# set :format, :airbrussh\n\n# You can configure the Airbrussh format using :format_options.\n# These are the defaults.\n# set :format_options, command_output: true, log_file: 'log/capistrano.log', color: :auto, truncate: :auto\n\n# Default value for :pty is false\nset :pty, true\n\n# Default value for :linked_files is []\n# append :linked_files, 'config/database.yml', 'config/secrets.yml'\n\n# Default value for linked_dirs is []\n# append :linked_dirs, 'log', 'tmp/pids', 'tmp/cache', 'tmp/sockets', 'public/system'\n\n# Default value for default_env is {}\n# set :default_env, { path: \"/opt/ruby/bin:$PATH\" }\n\n# Default value for keep_releases is 5\n# set :keep_releases, 5\n\ndesc 'Restart application'\n    task :restart do\n    on roles(:web), in: :sequence, wait: 5 do\n      execute \"service thin restart\"  ## -&gt; line you should add\n    end\nend\n</code></pre>\n\n<hr>\n\n<p>And this is my production.rb file</p>\n\n<pre><code># server-based syntax\n# ======================\n# Defines a single server with a list of roles and multiple properties.\n# You can define all roles on a single server, or split them:\nserver 'vlmg.mx', user: 'vlmg', roles: %w{web}, primary: true, port: 15555\n# server 'example.com', user: 'deploy', roles: %w{app web}, other_property: :other_value\n# server 'db.example.com', user: 'deploy', roles: %w{db}\n\nset :deploy_to, \"/home/vlmg/subdomains/ar.vlmg.mx\"\n\n\n# role-based syntax\n# ==================\n\n# Defines a role with one or multiple servers. The primary server in each\n# group is considered to be the first unless any  hosts have the primary\n# property set. Specify the username and a domain or IP for the server.\n# Don't use `:all`, it's a meta role.\n\n#role :app, %w{admin@example.com}, my_property: :my_value\nrole :web, %w{vlmg@vlmg.mx}\n# role :db,  %w{deploy@example.com}\n\n\n\n# Configuration\n# =============\n# You can set any configuration variable like in config/deploy.rb\n# These variables are then only loaded and set in this stage.\n# For available Capistrano configuration variables see the documentation page.\n# http://capistranorb.com/documentation/getting-started/configuration/\n# Feel free to add new variables to customise your setup.\n\n\n\n# Custom SSH Options\n# ==================\n# You may pass any option but keep in mind that net/ssh understands a\n# limited set of options, consult the Net::SSH documentation.\n# http://net-ssh.github.io/net-ssh/classes/Net/SSH.html#method-c-start\n#\n# Global options\n# --------------\n  set :ssh_options, {\n    keys: %w(/home/ubuntu/.ssh/id_rsa),\n    forward_agent: true\n    #auth_methods: %w(password)\n  }\n#\n# The server-based syntax can be used to override options:\n# ------------------------------------\n# server 'example.com',\n#   user: 'user_name',\n#   roles: %w{web app},\n#   ssh_options: {\n#     user: 'user_name', # overrides user setting above\n#     keys: %w(/home/ubuntu/.ssh/id_rsa),\n#    forward_agent: false,\n##     auth_methods: %w(publickey password)\n#     # password: 'please use keys'\n#   }\n</code></pre>\n\n<hr>\n\n<p>Edit: In response of enabling the logs. This is the results.\nStill nothing in the logs that could help to solve.</p>\n\n<pre><code>     INFO ---------------------------------------------------------------------------\n     INFO START 2016-08-10 19:49:49 +0000 cap production deploy\n     INFO ---------------------------------------------------------------------------\n     INFO [204569e4] Running /usr/bin/env mkdir -p /tmp as vlmg@vlmg.mx\n    DEBUG [204569e4] Command: /usr/bin/env mkdir -p /tmp\n     INFO [9596edc0] Running /usr/bin/env mkdir -p /tmp as vlmg@vlmg.mx\n    DEBUG [9596edc0] Command: /usr/bin/env mkdir -p /tmp\n     INFO [9596edc0] Finished in 0.288 seconds with exit status 0 (successful).\n    DEBUG Uploading /tmp/git-ssh-vlmg-forms-production-ubuntu.sh 0.0%\n     INFO Uploading /tmp/git-ssh-vlmg-forms-production-ubuntu.sh 100.0%\n     INFO [1014be51] Running /usr/bin/env chmod 700 /tmp/git-ssh-vlmg-forms-production-ubuntu.sh as vlmg@vlmg.mx\n    DEBUG [1014be51] Command: /usr/bin/env chmod 700 /tmp/git-ssh-vlmg-forms-production-ubuntu.sh\n     INFO [1014be51] Finished in 0.057 seconds with exit status 0 (successful).\n</code></pre>\n\n<hr>\n\n<p>After last command this are the results, basically the same, hanging for 20-30 seconds then:</p>\n\n<pre><code>  00:00 git:wrapper\n        01 mkdir -p /tmp\n      \u2714 01 vlmg@vlmg.mx 0.265s\n        Uploading /tmp/git-ssh-vlmg-forms-production-ubuntu.sh 100.0%\n        02 chmod 700 /tmp/git-ssh-vlmg-forms-production-ubuntu.sh\n      \u2714 02 vlmg@vlmg.mx 0.063s\n  (Backtrace restricted to imported tasks)\n  cap aborted!\n  Net::SSH::ConnectionTimeout: Net::SSH::ConnectionTimeout\n\n  Errno::ETIMEDOUT: Connection timed out - connect(2) for 109.73.225.169:22\n\n  Tasks: TOP =&gt; git:wrapper\n  (See full trace by running task with --trace)\n</code></pre>\n\n<hr>\n\n<p>This step 03 is solved, thanks. Solution was specify port on ssh connection too.</p>\n\n<pre><code>set :ssh_options, {\n    keys: %w(/home/ubuntu/.ssh/id_rsa),\n    forward_agent: true,\n    port: 15555,\n    #auth_methods: %w(password)\n}\n</code></pre>\n\n<p>Now I have new errors, but I think that should could be in another post.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "watir-webdriver"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1470860861, "post_id": 38880224, "comment_id": 65126822, "body": "FWIW: it&#39;s much easier to reproduce issues if the (minimal amount of) HTML and watir-webdriver code is present in the question.  Screenshots create more hoops  to jump through."}], "answers": [{"comments": [{"owner": {"reputation": 888, "user_id": 676923, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/bf9fae8c752b1862e3c556a173ac4456?s=128&d=identicon&r=PG", "display_name": "Tanoro", "link": "https://stackoverflow.com/users/676923/tanoro"}, "edited": false, "score": 0, "creation_date": 1470852338, "post_id": 38880479, "comment_id": 65122209, "body": "That moment you feel like a complete derp. I have been staring at this for 30 minutes and never spotted that. Thanks!"}], "tags": [], "owner": {"reputation": 1599, "user_id": 617090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/66NEM.jpg?s=128&g=1", "display_name": "kcdragon", "link": "https://stackoverflow.com/users/617090/kcdragon"}, "is_accepted": true, "score": 0, "last_activity_date": 1470851979, "creation_date": 1470851979, "answer_id": 38880479, "question_id": 38880224, "link": "https://stackoverflow.com/questions/38880224/watir-not-locating-tags-in-simple-html/38880479#38880479", "title": "Watir not locating tags in simple HTML", "body": "<p>I don't think it is returning <code>nil</code>. You are doing a <code>puts</code>. The value of the <code>puts</code> is <code>nil</code>. The result of what you passed to <code>puts</code> is on the line right before <code>nil</code>. Try removing the <code>puts</code> and you should get the object directly.</p>\n"}, {"tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": false, "score": 1, "last_activity_date": 1470852278, "creation_date": 1470852278, "answer_id": 38880559, "question_id": 38880224, "link": "https://stackoverflow.com/questions/38880224/watir-not-locating-tags-in-simple-html/38880559#38880559", "title": "Watir not locating tags in simple HTML", "body": "<p>The output is being interpreted incorrectly. The <code>nil</code> is the value returned from calling <code>puts</code>. It has nothing to do with Watir or the element being interacted with. You will see the same thing with other objects:</p>\n\n<pre><code>puts \"test\"\n#=&gt; \"test\"\n#=&gt; nil\n</code></pre>\n\n<p>Watir only goes and locates the element when you ask it to do something with it. For example, </p>\n\n<pre><code>browser.span(class: 'ShipmentBreadcrumb')\n</code></pre>\n\n<p>Simply creates an instance of a Watir::Span. It does not look for the element on the page or try to retrieve any data about it.  It isn't until you call something on the instance that it goes and looks for the element.</p>\n\n<pre><code>puts browser.span(class: 'ShipmentBreadcrumb')\n#=&gt; #&lt;Watir::Span&gt;\n#=&gt; nil\nputs browser.span(class: 'ShipmentBreadcrumb').text\n#=&gt; \"Sporting Goods\"\n#=&gt; nil\n</code></pre>\n"}], "owner": {"reputation": 888, "user_id": 676923, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/bf9fae8c752b1862e3c556a173ac4456?s=128&d=identicon&r=PG", "display_name": "Tanoro", "link": "https://stackoverflow.com/users/676923/tanoro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 38880479, "answer_count": 2, "score": 0, "last_activity_date": 1470852278, "creation_date": 1470851154, "question_id": 38880224, "link": "https://stackoverflow.com/questions/38880224/watir-not-locating-tags-in-simple-html", "title": "Watir not locating tags in simple HTML", "body": "<p>I just started using Ruby and Webdriver to process strings of HTML. I waded through the learning curve, but either I am still doing something wrong or Watir's consistency is meh.</p>\n\n<p>I am trying to get Watir to locate a couple of span tags because I want the text in between them. I can <strong>puts</strong> the HTML into my console just fine. I can see the tags I want. For some reason, my every attempt to path to them returns nil.<a href=\"https://i.stack.imgur.com/shzab.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/shzab.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["javascript", "ruby", "testing", "cucumber", "watir"], "comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1470937715, "post_id": 38879573, "comment_id": 65164544, "body": "Perhaps you need to share the JavaScript file that you want to modify? I&#39;m not sure that we can answer how to change it without knowing what we are changing. That said, I do no understand why you need to modify the JavaScript files. It sounds like an unusual practice. Watir should be used to interact with the browser as a user would."}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1471970395, "post_id": 38879573, "comment_id": 65560199, "body": "@JustinKo I think the OP wants to modify the application to add unique IDs to elements, in order to make the tests easier to write and more stable.  srinivas, am I correct?"}, {"owner": {"reputation": 1, "user_id": 6701417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/032353e2118e95c56a421f3b56040d75?s=128&d=identicon&r=PG&f=1", "display_name": "srinivas", "link": "https://stackoverflow.com/users/6701417/srinivas"}, "reply_to_user": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1473367753, "post_id": 38879573, "comment_id": 66125962, "body": "@Wayne Conrad u cannot be more correct :P thanks !!! i want to add data-test-id to every element before i use it in my testing script, so i have more stable builds in the long run. can you guide me through how to do that"}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1473371858, "post_id": 38879573, "comment_id": 66127647, "body": "Sadly I cannot guide you, for two reasons: I am not an expert at Ruby web programming, but also you&#39;ve shown no code.  Without any code or other context, I think we would have to give too broad of an answer."}], "owner": {"reputation": 1, "user_id": 6701417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/032353e2118e95c56a421f3b56040d75?s=128&d=identicon&r=PG&f=1", "display_name": "srinivas", "link": "https://stackoverflow.com/users/6701417/srinivas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1470937348, "creation_date": 1470848770, "last_edit_date": 1470937348, "question_id": 38879573, "link": "https://stackoverflow.com/questions/38879573/how-can-i-add-a-new-id-to-the-web-elements-in-a-javascript-file", "title": "How can I add a new Id to the web elements in a JavaScript file?", "body": "<p>I am testing an application that uses the <code>Ruby</code> and <code>Cucumber</code> frameworks and there are many JavaScript files that describe: every action in the application, every element's: <code>ID</code>, <code>Class</code>, <code>Name</code>, etc. As a tester, I want to go through the JavaScript files to add unique IDs to every element; I have to capture (<code>data-test-id</code>), so that I have a stable test case, which does not break with new builds.</p>\n\n<p>I am not very familiar with JavaScript and would like to get some help with respect to the best way to make the changes I have described, particularly about how to identify where I must add/change the element <code>ID</code>?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "rubocop", "ruby-style-guide"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1470848521, "post_id": 38879364, "comment_id": 65120057, "body": "Put <code># rubocop:disable ...</code> / <code># rubocop:enable ...</code> around this method. Rubocop is good to suggest, but her recommendations are not graved in stone."}, {"owner": {"reputation": 3498, "user_id": 161869, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0dHDQ.png?s=128&g=1", "display_name": "Chris Hough", "link": "https://stackoverflow.com/users/161869/chris-hough"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1470848597, "post_id": 38879364, "comment_id": 65120097, "body": "I get that, and it is kinda the easy way out. I would rather see if there are different ways to accomplish this."}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1470905291, "post_id": 38883196, "comment_id": 65142726, "body": "This code now looks like FORTRAN written with Ruby syntax. You just flew back 40 years using Rubocop Satistaction Time Machine. We (hopefully) ran out of an era of procedural programming and this code is one of worst examples of it (<code>assign_item_attributes(select_included_option(select_item_o&zwnj;&#8203;ptions(parse_relatio&zwnj;&#8203;nships[&#39;options&#39;][&#39;d&zwnj;&#8203;ata&#39;])))</code>.) I downvoted because it is enormously huge step back comparing to what you\u2019ve had before."}, {"owner": {"reputation": 3498, "user_id": 161869, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0dHDQ.png?s=128&g=1", "display_name": "Chris Hough", "link": "https://stackoverflow.com/users/161869/chris-hough"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1470943615, "post_id": 38883196, "comment_id": 65167854, "body": "I collaborated with another senior on this and was advised this is quite acceptable.  While it may not be your personal preference it does not mean it was inaccurate let alone uncommon in Ruby.  Your answer never worked and did not pass the cops so it could not be accepted."}], "tags": [], "owner": {"reputation": 3498, "user_id": 161869, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0dHDQ.png?s=128&g=1", "display_name": "Chris Hough", "link": "https://stackoverflow.com/users/161869/chris-hough"}, "is_accepted": true, "score": 0, "last_activity_date": 1470861874, "creation_date": 1470861874, "answer_id": 38883196, "question_id": 38879364, "link": "https://stackoverflow.com/questions/38879364/ruby-method-refactor-multi-line-assignment-to-pass-rubocop/38883196#38883196", "title": "Ruby method refactor multi line assignment to pass RuboCop", "body": "<p>I was able to refactor this making it far cleaner and pass all the cops! Hooray!</p>\n\n<pre><code>  def parse_items\n    assign_item_attributes(select_included_option(select_item_options(parse_relationships['options']['data'])))\n  end\n\n  def select_included_option(options)\n    options.map do |opt|\n      parse_included.detect { |x| x['id'] == opt['id'] }\n    end\n  end\n\n  def assign_item_attributes(options)\n    options.compact.map do |opt|\n      {\n        group_id: @payload['id'],\n        originator_id: opt['id'],\n        price: opt['attributes']['price'],\n        description: opt['attributes']['name'],\n        exp_quantity: opt['attributes']['quantity'].to_i,\n        title: parse_attributes['name'],\n        image_originator_url: parse_image,\n        updated_at: parse_timestamp\n      }\n    end\n  end\n\n  def select_item_options(options)\n    options.select { |opt| opt['type'] == 'product_options' }\n  end\n</code></pre>\n"}], "owner": {"reputation": 3498, "user_id": 161869, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0dHDQ.png?s=128&g=1", "display_name": "Chris Hough", "link": "https://stackoverflow.com/users/161869/chris-hough"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 985, "favorite_count": 0, "accepted_answer_id": 38883196, "answer_count": 1, "score": -1, "last_activity_date": 1569518304, "creation_date": 1470848057, "last_edit_date": 1569518304, "question_id": 38879364, "link": "https://stackoverflow.com/questions/38879364/ruby-method-refactor-multi-line-assignment-to-pass-rubocop", "title": "Ruby method refactor multi line assignment to pass RuboCop", "body": "<p>I have been trying to tune this method that sets up complex assignment and I am looking for other options to make this function pass the cops. </p>\n\n<p>Would anyone have thoughts to point me in the right direction? </p>\n\n<p>Right now, I am tinkering with breaking out the two inner .map calls.  </p>\n\n<p><strong>Failing Cops</strong></p>\n\n<pre><code>Assignment Branch Condition size for parse_items is too high. [24.08/15]\n  def parse_items\nAvoid multi-line chains of blocks.\n    end.compact.map do |opt|\n</code></pre>\n\n<p><strong>The problem code</strong></p>\n\n<pre><code>  def parse_items\n    options = parse_relationships\n    options = options.select { |opt| opt['type'] == 'product_options' }\n    options.map do |opt|\n      parse_included.detect { |x| x['id'] == opt['id'] }\n    end.compact.map do |opt|\n      {\n        group_id: @payload['id'],\n        originator_id: opt['id'],\n        price: opt['attributes']['price'],\n        description: opt['attributes']['name'],\n        exp_quantity: opt['attributes']['quantity'].to_i,\n        title: parse_attributes['name'],\n        image_originator_url: 'image_for_product',\n        updated_at: timestamp\n      }\n    end\n  end\n</code></pre>\n\n<p><strong>Helper Methods</strong></p>\n\n<pre><code>  private\n\n  def parse_data\n    @payload['data']\n  rescue\n    []\n  end\n\n  def parse_included\n    @payload['included']\n  rescue\n    []\n  end\n\n  def parse_attributes\n    @payload['data']['attributes']\n  rescue\n    []\n  end\n\n  def parse_relationships\n    @payload['data']['relationships']['options']['data']\n  rescue\n    []\n  end\n\n  def timestamp\n    Time.parse(parse_attributes['updated_at'])\n  end\n</code></pre>\n\n<p><strong>Updated Errors</strong></p>\n\n<p>In the spec: wrong number of arguments (given 2, expected 1) for <code>Failure/Error: SELECT = -&gt;(opt) { opt['type'] == 'product_options' }</code> </p>\n\n<p>Assignment Branch Condition size for parse_items is too high. [17/15]</p>\n\n<p><strong>Updated Code</strong></p>\n\n<pre><code>  SELECT = -&gt;(opt) { opt['type'] == 'product_options' }\n  MAP = -&gt;(opt) { parse_included.detect { |x| x['id'] == opt['id'] } }\n  def parse_items\n    parse_relationships.select(&amp;SELECT).map(&amp;MAP).compact.map do |opt|\n      {\n        group_id: @payload['id'],\n        originator_id: opt['id'],\n        price: opt['attributes']['price'],\n        description: opt['attributes']['name'],\n        exp_quantity: opt['attributes']['quantity'].to_i,\n        title: parse_attributes['name'],\n        image_originator_url: 'image_for_product',\n        updated_at: timestamp\n      }\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby", "rubygems", "bundler"], "owner": {"reputation": 1848, "user_id": 657644, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/28f86578bc070ea2fbde98810ddf63d0?s=128&d=identicon&r=PG", "display_name": "PascalTurbo", "link": "https://stackoverflow.com/users/657644/pascalturbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1470847721, "creation_date": 1470847721, "question_id": 38879275, "link": "https://stackoverflow.com/questions/38879275/is-it-possible-to-install-bundler-using-bundler-standalone", "title": "Is it possible to install bundler using bundler --standalone", "body": "<p>I know this may sound weird - maybe like search for \"google\" using google - but I'm fighting with a problem using the standalone feature of bundler.</p>\n\n<p>Background:</p>\n\n<p>I'm creating a rpm for \"single click\" installation of a rails application. What I don't want is to build all the necessary gems on the target server - I want to deliver them within the rpm file.</p>\n\n<p>So I did the \"hack\" using </p>\n\n<pre><code>bundle install --standalone default --binstubs bin/\n</code></pre>\n\n<p>But rails require bundler. Shure there are ways to remove bundler from rails - but this isn't easy in an grown application. So I don't have a problem with using bundler in my production setup.</p>\n\n<p>But bundler won't install bundler to the standalone folder - and I couldn't figure out how to do this</p>\n\n<p>Is there a way to work arround this? Or is there a better way without building the gems locally and without refactoring the rails app?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 868, "user_id": 647552, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4ef20f72eb9bd4f293c5f8837ef2c064?s=128&d=identicon&r=PG", "display_name": "J Plato", "link": "https://stackoverflow.com/users/647552/j-plato"}, "edited": false, "score": 0, "creation_date": 1470852903, "post_id": 38878610, "comment_id": 65122540, "body": "The problem, as you&#39;ve discovered, is that TreatmentPlan and  ArbitraryBillableItem are two separate tables. Have you considered combining them into a single table and using single-table inheritance to subclass both from the same parent?  Another, less conventional approach would be to use a database view to generate a result set from the two tables. You can create an ActiveRecord model that uses a view as its table, and therefore you&#39;ll have a result set that is an ActiveRecord relation rather than an array (which is what you&#39;ll get with the plus operator)"}, {"owner": {"reputation": 2028, "user_id": 1657377, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/4iVGJ.png?s=128&g=1", "display_name": "jethroo", "link": "https://stackoverflow.com/users/1657377/jethroo"}, "edited": false, "score": 0, "creation_date": 1470856711, "post_id": 38878610, "comment_id": 65124668, "body": "so your are following <a href=\"http://stackoverflow.com/a/5887290/1657377\">stackoverflow.com/a/5887290/1657377</a> (kind of), I would rather suggest to take the time to reconsider your abstraction(s) if it feels odd, basically you are encapsulating things in payments just to provide them to master_payments anyhow so why the abstraction in the first place?"}, {"owner": {"reputation": 86, "user_id": 4567072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b817d6ac3107d647d1db0222af41cd5?s=128&d=identicon&r=PG&f=1", "display_name": "Zezilp", "link": "https://stackoverflow.com/users/4567072/zezilp"}, "reply_to_user": {"reputation": 868, "user_id": 647552, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4ef20f72eb9bd4f293c5f8837ef2c064?s=128&d=identicon&r=PG", "display_name": "J Plato", "link": "https://stackoverflow.com/users/647552/j-plato"}, "edited": false, "score": 0, "creation_date": 1470860882, "post_id": 38878610, "comment_id": 65126831, "body": "@JPlato I had not previously looked into views, it does seem to be most of what I would be looking for seeing as my current issue is how it doesn&#39;t &quot;feel correct&quot; to have it done through a method given the rails active record conventions.. Unfortunately combining them will also probably not be an option at this point in time, given the complexity of the change on the application side."}, {"owner": {"reputation": 86, "user_id": 4567072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b817d6ac3107d647d1db0222af41cd5?s=128&d=identicon&r=PG&f=1", "display_name": "Zezilp", "link": "https://stackoverflow.com/users/4567072/zezilp"}, "reply_to_user": {"reputation": 2028, "user_id": 1657377, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/4iVGJ.png?s=128&g=1", "display_name": "jethroo", "link": "https://stackoverflow.com/users/1657377/jethroo"}, "edited": false, "score": 0, "creation_date": 1470860929, "post_id": 38878610, "comment_id": 65126863, "body": "@jethroo I have certainly spent time considering if the master payment table should exist or not. And although it does not necessarily need to be there it was originally added to the database as a tool to collect payments made together for line item breakdowns. Unfortunately as i said in my last comment the application is a couple of years past an easy change to these tables&#39; setup"}], "answers": [{"comments": [{"owner": {"reputation": 86, "user_id": 4567072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b817d6ac3107d647d1db0222af41cd5?s=128&d=identicon&r=PG&f=1", "display_name": "Zezilp", "link": "https://stackoverflow.com/users/4567072/zezilp"}, "edited": false, "score": 0, "creation_date": 1470920641, "post_id": 38886072, "comment_id": 65153280, "body": "with the polymorphic relationship pointing to &quot;payable&quot; this setup won&#39;t quite work.  This also would suffer from the drawback I was trying to get around that it is not controlled via the rails active record association helpers"}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1470880918, "last_edit_date": 1470880918, "creation_date": 1470880185, "answer_id": 38886072, "question_id": 38878610, "link": "https://stackoverflow.com/questions/38878610/rails-has-many-association-through-a-belongs-to-polymorphic-association/38886072#38886072", "title": "Rails has_many association through a belongs_to polymorphic association", "body": "<p>This seems too simple but would it work?</p>\n\n<pre><code>def payables\n  self.payments.joins(:treatment_plans, :arbitrary_billable_items).distinct\nend\n</code></pre>\n"}], "owner": {"reputation": 86, "user_id": 4567072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b817d6ac3107d647d1db0222af41cd5?s=128&d=identicon&r=PG&f=1", "display_name": "Zezilp", "link": "https://stackoverflow.com/users/4567072/zezilp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 283, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470880918, "creation_date": 1470845530, "last_edit_date": 1470847190, "question_id": 38878610, "link": "https://stackoverflow.com/questions/38878610/rails-has-many-association-through-a-belongs-to-polymorphic-association", "title": "Rails has_many association through a belongs_to polymorphic association", "body": "<p>In my database there are 4 models</p>\n\n<pre><code>class MasterPayment &lt; ActiveRecord::Base\n  has_many :payments\nend\n\nclass Payment &lt; ActiveRecord::Base\n  belongs_to :master_payment\n  belongs_to :payable, polymorphic: :true\nend\n\nclass TreatmentPlan &lt; ActiveRecord::Base\n  has_many :payments, as: :payable\nend\n\nclass ArbitraryBillableItem &lt; ActiveRecord::Base\n  has_many :payments, as: :payable\nend\n</code></pre>\n\n<p>What i would like to do is set up an association in MasterPayment that will associate payables to master payments.</p>\n\n<p>Currently, the closest i could find was setting up the master payment model as follows</p>\n\n<pre><code>class MasterPayment &lt; ActiveRecord::Base\n  has_many :payments\n  has_many :treatment_plans, through: :payments, source: :payable, source_type: \"TreatmentPlan\"\n  has_many :arbitrary_billable_items, through: :payments, source: :payable, source_type: \"ArbitraryBillableItem\"\n\n  def payables\n    self.treatment_plans + self.arbitrary_billable_items\n  end\nend\n</code></pre>\n\n<p>The only problem i have with this is that it doesn't feel like the \"correct\" way to do it.</p>\n\n<p>The only reason i can see for rails not having a solution to this is because you would presumably have to union the tables to return it in one sql statement.</p>\n\n<p>Is there an alternative way to accomplish this that will make more use of the active record associations?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1470844123, "post_id": 38877845, "comment_id": 65117470, "body": "Have you considered using <a href=\"https://github.com/plataformatec/simple_form\" rel=\"nofollow noreferrer\">simple_form</a>? It handles all of this for you out-of-the-box; placing error messages below the relevant input fields."}, {"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1470844198, "post_id": 38877845, "comment_id": 65117527, "body": "@TomLord I am more just trying to figure out this odd behavior and making it work as expected.  I agree the implementation above could be better, but  I just want to be able to display the submitted value, as opposed to displaying <code>0</code> for whatever reason it is doing that."}], "answers": [{"comments": [{"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1470844739, "post_id": 38878311, "comment_id": 65117852, "body": "so how do I display the value submitted? Ex: input of <code>&#39;abcd&#39;</code>?"}, {"owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "reply_to_user": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1470845109, "post_id": 38878311, "comment_id": 65118078, "body": "You would have to figure out a way to pass the bad string to your view. It would be much easier to just display the default error message and omit the invalid user input."}, {"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1470845279, "post_id": 38878311, "comment_id": 65118182, "body": "It is odd to me that this is so difficult.  If I did not have any of that additional input text and just left it like this: <code>&lt;%= f.text_field :age %&gt;</code> then when it fails validations it properly re-displays whatever value  was submitted.  How is that able to grab the submitted entry upon failed validation?  Maybe if I figured that out then I could apply it to this situation.  Seems like Rails is doing some magic..."}, {"owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "reply_to_user": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1470849822, "post_id": 38878311, "comment_id": 65120771, "body": "See the edit about adding a custom error message. That should do the trick."}, {"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1470853306, "post_id": 38878311, "comment_id": 65122768, "body": "That does not give me the ability to redisplay the users submitted value within the form input.  I want to know how I can grab the users submitted value and redisplay it within the input."}], "tags": [], "owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "is_accepted": false, "score": 0, "last_activity_date": 1470849796, "last_edit_date": 1470849796, "creation_date": 1470844631, "answer_id": 38878311, "question_id": 38877845, "link": "https://stackoverflow.com/questions/38877845/re-display-invalid-data-entry-when-expecting-a-number-upon-validation-error/38878311#38878311", "title": "Re-display invalid data entry when expecting a number upon validation error", "body": "<p>This is failing because you're calling <code>f.object.age</code> in an interpolated string, not the value submitted. </p>\n\n<p>Since you're validating the numericality on age, your <code>'abcd'</code> input will never pass validation and therefore would never saved. </p>\n\n<p>So when you're  calling <code>.age</code> on that object, you're only getting the default value, or the last value that passed validation and was saved. Your <code>'abcd'</code> string would never have been saved.</p>\n\n<p>An easier way to show the error would be to do:</p>\n\n<p><code>f.object.errors.full_messages_for(:age)</code></p>\n\n<p>You could also try adding a custom error message:</p>\n\n<p><code>validates_numericality_of :age, message: '%{value} is not a valid age'</code></p>\n"}, {"tags": [], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "is_accepted": true, "score": 0, "last_activity_date": 1470949540, "last_edit_date": 1470949540, "creation_date": 1470948512, "answer_id": 38905875, "question_id": 38877845, "link": "https://stackoverflow.com/questions/38877845/re-display-invalid-data-entry-when-expecting-a-number-upon-validation-error/38905875#38905875", "title": "Re-display invalid data entry when expecting a number upon validation error", "body": "<p>This works.  Just grab the submitted value from the <code>params</code> hash:</p>\n\n<pre><code>&lt;div class=\"field\"&gt;\n  &lt;%= f.label :age %&gt;\n\n  &lt;% if f.object.age %&gt;\n    &lt;% if f.object.errors.include?(:age) %&gt;\n      &lt;%= f.text_field :age, value: \"Submitted #{params[:blog][:age]} is bad\" %&gt;\n     &lt;% else %&gt;\n      &lt;%= f.text_field :age %&gt;\n    &lt;% end %&gt;\n  &lt;% else %&gt;\n    &lt;%= f.text_field :age %&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>It appears that <code>f.object.age</code> does not work because the <code>age</code> attribute is of type <code>integer</code>.  because of this: within the writer method for the <code>age</code> attribute:</p>\n\n<pre><code>def age=(value)\n  ...\nend\n</code></pre>\n\n<p>Somewhere within that setter what probably happens is that rails attempts to convert the submitted value with: <code>to_i</code>.  When you do <code>to_i</code> on a string it returns <code>0</code>, so when you attempt <code>f.object.age</code> it will return <code>0</code> because the writer attempted to convert the string.</p>\n\n<p>The other tricky thing is the <code>text_field</code> method.  Rails has some magic going on in there.  For example: if there was nothing special going on: the following <em>would</em> successfully display the submitted value as opposed to <code>0</code>:</p>\n\n<pre><code>&lt;%= f.text_field :age %&gt;\n</code></pre>\n\n<p>So somewhere within the <code>text_field</code> method, rails looks to see if that attribute of <code>age</code> was invalid, and if it was, then it specifies as the <code>value</code> the <em>submitted</em> value.  </p>\n\n<p>Without digging into the rails source code, it is tough to say how <code>text_field</code> figures out if the attribute was previously submitted, AND if the submitted value was invalid.  Thus: if one dug within the rails source code I am sure you could clean up the conditionals up above once you figure out how <code>text_field</code> displays the submitted value (ex: <code>'abcd'</code> as opposed to the converted value from the setter (ex: <code>'0'</code>).  </p>\n\n<p>Nonetheless: the above code works and does what is desired.</p>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 38905875, "answer_count": 2, "score": 0, "last_activity_date": 1470949540, "creation_date": 1470843254, "last_edit_date": 1470919244, "question_id": 38877845, "link": "https://stackoverflow.com/questions/38877845/re-display-invalid-data-entry-when-expecting-a-number-upon-validation-error", "title": "Re-display invalid data entry when expecting a number upon validation error", "body": "<p>Let us say that the user submits a form.  One of the fields was invalid, so the form gets re-rendered.  When in the process of re-rendering the form: I check to see if the submitted value for that attribute was invalid.  If so: then show that invalid data entry with some additional text.</p>\n\n<p>Here is what I have so far.  It is close but isn't working completely:</p>\n\n<pre><code>&lt;%= form_for(blog) do |f| %&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :age %&gt;\n\n    &lt;% if f.object.age %&gt;\n      &lt;% if f.object.errors.include?(:age) %&gt;\n        &lt;%= f.text_field :age, value: \"Submitted: #{f.object.age} was bad\" %&gt;\n      &lt;% else %&gt;\n        &lt;%= f.text_field :age %&gt;\n      &lt;% end %&gt;\n    &lt;% else %&gt;\n      &lt;%= f.text_field :age %&gt;\n    &lt;% end %&gt;\n\n  &lt;/div&gt;\n\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>So I am saying: \"Hey Rails: if the user has already submitted this form, <em>and</em> the value the user submitted for this attribute of <code>age</code> was invalid, then re-render the submitted value within the input, along with some additional text.\" </p>\n\n<p>The issue I am having is that it will not show the error input correctly.  For example: if the user inputs \"abcd\" into the input field, then when the form re-renders upon failing validations, the input field <em>should</em> say: \"Submitted: abcd was bad\".  Instead it says \"Submitted: 0 was bad\".</p>\n\n<p>I am close.  The ultimate question is: Why is it displaying <code>0</code>?  Why isn't it displaying <code>\"abcd\"</code>? The next question is: \"How can I make it display <code>\"abcd\"</code>?</p>\n\n<p>Is this behavior because I have the following validation? :</p>\n\n<pre><code>    validates :age, numericality: true\n</code></pre>\n\n<p>If so: how can I have the validation to ensure it is a number, but also re-display the value the user entered?</p>\n"}, {"tags": ["ruby", "regex"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1470866124, "post_id": 38878736, "comment_id": 65129231, "body": "Why the positive lookbehind rather than simply <code>\\b</code>, which has zero-width?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1470892843, "post_id": 38878736, "comment_id": 65136055, "body": "@CarySwoveland It just looks clearer to me: it reads \u201cafter this and before that.\u201d Like a matter of habit."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1470845892, "creation_date": 1470845892, "answer_id": 38878736, "question_id": 38877456, "link": "https://stackoverflow.com/questions/38877456/can-i-use-positive-lookbehind-to-return-a-match-in-ruby/38878736#38878736", "title": "Can I use positive lookbehind to return a match in Ruby?", "body": "<pre><code>words = \"booster bailings balling failing\"\nwords.scan /(?&lt;=\\b)b\\w*?(?=ing\\b)/\n#\u21d2 [\"ball\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1470853242, "creation_date": 1470853242, "answer_id": 38880830, "question_id": 38877456, "link": "https://stackoverflow.com/questions/38877456/can-i-use-positive-lookbehind-to-return-a-match-in-ruby/38880830#38880830", "title": "Can I use positive lookbehind to return a match in Ruby?", "body": "<p>Here are two ways to extract the desired information. </p>\n\n<pre><code>str = \"blathering fumbling blinging b\u00e9rgering blings\"\n\nstr.scan(/\\bb[[:alpha:]]*(?=ing\\b)/)\n  #=&gt; [\"blather\", \"bling\", \"b\u00e9rger\"]\n\nstr.scan(/\\b(b[[:alpha:]]*)ing\\b/).flatten\n  #=&gt; [\"blather\", \"bling\", \"b\u00e9rger\"]\n</code></pre>\n\n<p>whereas</p>\n\n<pre><code>str.scan(/\\bb[a-zA-Z]*(?=ing\\b)/)\n  #=&gt; [\"blather\", \"bling\"]\n</code></pre>\n"}], "owner": {"reputation": 4504, "user_id": 3681199, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/70b2072de3d0d43e1af48fd2d416157f?s=128&d=identicon&r=PG&f=1", "display_name": "Nona", "link": "https://stackoverflow.com/users/3681199/nona"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 315, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1470853242, "creation_date": 1470842266, "question_id": 38877456, "link": "https://stackoverflow.com/questions/38877456/can-i-use-positive-lookbehind-to-return-a-match-in-ruby", "title": "Can I use positive lookbehind to return a match in Ruby?", "body": "<p>Suppose that I want to find all words in a given string that start with b and end with ing . However, I only want to return the portion of the\nword that precedes the ing. Thus, if the word is bailing, I should only\nmatch and return bail.</p>\n\n<p>The below Ruby regex will certainly match:</p>\n\n<pre><code>\\bt[a-zA-Z]*ing\\b\n</code></pre>\n\n<p>but it doesn't return just the \"bail\" portion.  Can I use some kind of lookahead or lookbehind assertion?  If not, what is a good way to do this in Ruby?</p>\n"}, {"tags": ["ruby", "hash"], "answers": [{"comments": [{"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 2, "creation_date": 1470842149, "post_id": 38877318, "comment_id": 65116039, "body": "I fear he wants to split at keys :c and :e, not each two elements."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1470848330, "last_edit_date": 1470848330, "creation_date": 1470841921, "answer_id": 38877318, "question_id": 38877241, "link": "https://stackoverflow.com/questions/38877241/an-equivalent-split-method-for-hashes/38877318#38877318", "title": "An equivalent .split method for hashes", "body": "<p>To slice before elements use <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-slice_before\" rel=\"nofollow\"><code>Enumerable#slice_before</code></a>:</p>\n\n<pre><code>{ :a=&gt;1, :b=&gt;2, :c=&gt;3, :d=&gt;4, :e=&gt;5, :f=&gt;6 }.slice_before do |e|\n  %i[c e].include? e.first\nend.map(&amp;:to_h)\n</code></pre>\n\n<p>Generic implementation (without checks):</p>\n\n<pre><code>\u03bb = lambda do |hash, *delimiters|\n  hash.slice_before do |e|\n    delimiters.include? e.first\n  end.map(&amp;:to_h)\nend\n\u03bb.({ :a=&gt;1, :b=&gt;2, :c=&gt;3, :d=&gt;4, :e=&gt;5, :f=&gt;6 }, :c, :e)\n#\u21d2 [ {:a=&gt;1, :b=&gt;2}, {:c=&gt;3, :d=&gt;4}, {:e=&gt;5, :f=&gt;6} ]\n</code></pre>\n\n<p>To slice a hash by pieces of the same size, use <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-each_slice\" rel=\"nofollow\"><code>Enumerable#each_slice</code></a>:</p>\n\n<pre><code>{ :a=&gt;1, :b=&gt;2, :c=&gt;3, :d=&gt;4, :e=&gt;5, :f=&gt;6 }.each_slice(2).map &amp;:to_h\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1470842989, "post_id": 38877621, "comment_id": 65116661, "body": "You&#39;r right, when you use ruby &gt;= 1.9. My statement is right for ruby &lt; 1.9"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1470843161, "post_id": 38877621, "comment_id": 65116801, "body": "When you refer to the ancient version of the language, please specify this explicitly. After all, this solution is 102% not ruby idiomatic. One should not use ruby syntax to write php code."}], "tags": [], "owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "is_accepted": false, "score": -1, "last_activity_date": 1470844160, "last_edit_date": 1470844160, "creation_date": 1470842656, "answer_id": 38877621, "question_id": 38877241, "link": "https://stackoverflow.com/questions/38877241/an-equivalent-split-method-for-hashes/38877621#38877621", "title": "An equivalent .split method for hashes", "body": "<p>With pure ruby (MRI &lt; 1.9) it is not possible to fullfill the task. A ruby Hash has no order of the keys in this versions. So you need  ActiveSupport::OrderedHash which supports an order of keys. In MRI versions >=1.9 it works directly</p>\n\n<pre><code> # in case hs is of type  ActiveSupport::OrderedHash.new\n # ds = delimiters\n\n result = []\n result_hash = {}\n next_del = delimiters.shift\n hs.keys.each do |key|\n   if next_del == key\n     result  &lt;&lt; result_hash\n     result_hash = {}\n     next_del =  delimiters.shift\n   end\n   result_hash[key] = hs[key] \n end  \n result  &lt;&lt; result_hash\n result\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 6663731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4aebfc06d425582c904e9d60f3f782c?s=128&d=identicon&r=PG&f=1", "display_name": "supasuma", "link": "https://stackoverflow.com/users/6663731/supasuma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1470848330, "creation_date": 1470841712, "question_id": 38877241, "link": "https://stackoverflow.com/questions/38877241/an-equivalent-split-method-for-hashes", "title": "An equivalent .split method for hashes", "body": "<p>I need to split a hash based on multiple arguments, which will be keys, and return as an array of hashes.  Basically, I need a method that performs the same job as .split() does for strings, but with multiple delimiters - is there such a thing for hashes? </p>\n\n<p>example: </p>\n\n<p><strong>Input</strong> \n<code>({ :a=&gt;1, :b=&gt;2, :c=&gt;3, :d=&gt;4, :e=&gt;5, :f=&gt;6 },:c, :e)</code> </p>\n\n<p><strong>Output</strong> \n<code>[ {:a=&gt;1, :b=&gt;2}, {:c=&gt;3, :d=&gt;4}, {:e=&gt;5, :f=&gt;6} ]</code> </p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "templates", "turbolinks"], "answers": [{"tags": [], "owner": {"reputation": 354, "user_id": 4909929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccfe2b48c23efcea2ada16ce6f29d2ba?s=128&d=identicon&r=PG", "display_name": "Kirill Zhuravlov", "link": "https://stackoverflow.com/users/4909929/kirill-zhuravlov"}, "is_accepted": true, "score": 0, "last_activity_date": 1470842453, "creation_date": 1470842453, "answer_id": 38877528, "question_id": 38877043, "link": "https://stackoverflow.com/questions/38877043/im-adding-a-free-w3layout-templates-and-javascript-runs-twice-in-rails-4-2-app/38877528#38877528", "title": "I&#39;m adding a free w3layout templates and javascript runs twice in rails 4.2 app", "body": "<p>I found the solution. The problem was not in the </p>\n\n<p><code>&lt;!--animate--&gt;\n    &lt;script&gt;\n        new WOW().init();\n    &lt;/script&gt;\n&lt;!--//end-animate--&gt;</code></p>\n\n<p>The reason was in this code </p>\n\n<pre><code>&lt;!-- Placed at the end of the document so the pages load faster --&gt;\n&lt;script src=\"js/bootstrap.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>It was at the end of the template so I don't seen it at once.</p>\n"}], "owner": {"reputation": 354, "user_id": 4909929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccfe2b48c23efcea2ada16ce6f29d2ba?s=128&d=identicon&r=PG", "display_name": "Kirill Zhuravlov", "link": "https://stackoverflow.com/users/4909929/kirill-zhuravlov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 38877528, "answer_count": 1, "score": 0, "last_activity_date": 1470843265, "creation_date": 1470841237, "last_edit_date": 1470843265, "question_id": 38877043, "link": "https://stackoverflow.com/questions/38877043/im-adding-a-free-w3layout-templates-and-javascript-runs-twice-in-rails-4-2-app", "title": "I&#39;m adding a free w3layout templates and javascript runs twice in rails 4.2 app", "body": "<p>I'm adding a free w3layout template <a href=\"https://w3layouts.com/scrutiny-a-education-category-responsive-web-template/\" rel=\"nofollow\">Link to template</a> to my new rails 4.2 app and when I put all files in their places it seems that the javascript event runs twice. It is visible when you reload the page (F5). </p>\n\n<p>I think the reason why - is this code below and also turbolinks. But without it the event runs once and immediately to all parts of template. The question is - How can I manage these .js files to only run once, but smoothly. I'm not very good at javascript.</p>\n\n<pre><code>&lt;!--animate--&gt;\n    &lt;script&gt;\n        new WOW().init();\n    &lt;/script&gt;\n&lt;!--//end-animate--&gt;\n</code></pre>\n\n<p>All js files I put in <code>app/assets/javascript</code></p>\n\n<p>Here's the <a href=\"https://github.com/tjai89/helen-commercial\" rel=\"nofollow\">link</a> to full github project. And this is <a href=\"https://github.com/tjai89/helen-commercial/blob/master/app/views/layouts/application.html.erb\" rel=\"nofollow\">application.html.erb</a> where I think all the problems are. App runs locally.</p>\n"}, {"tags": ["ruby", "amazon-web-services", "amazon-rds"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6700833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b2f0af2331512064bfc23561d1ba47a?s=128&d=identicon&r=PG&f=1", "display_name": "Ganeko Guereta", "link": "https://stackoverflow.com/users/6700833/ganeko-guereta"}, "edited": false, "score": 0, "creation_date": 1470903343, "post_id": 38877595, "comment_id": 65141605, "body": "After several tests I imagined it to be so, but my question is about snapshots. I do not want to create a new instance from scratch, I want load the snapshot of my actual instance. Is there any way to do this or am I wrong?  My scenario:  db_instance = auroratest db_cluster = auroratest-cluster db_cluster_snapshot = my_cluster_snapshot  I can&#39;t create db_snapshot because instance it&#39;s on cluster yet.  How can I create/attach one copy (or snapshot) of my db_instance &quot;auroratest&quot; to restored cluster?"}, {"owner": {"reputation": 28154, "user_id": 1574489, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/78b4ada3c932261e1d23faf65db29ebc?s=128&d=identicon&r=PG", "display_name": "Matt Houser", "link": "https://stackoverflow.com/users/1574489/matt-houser"}, "reply_to_user": {"reputation": 3, "user_id": 6700833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b2f0af2331512064bfc23561d1ba47a?s=128&d=identicon&r=PG&f=1", "display_name": "Ganeko Guereta", "link": "https://stackoverflow.com/users/6700833/ganeko-guereta"}, "edited": false, "score": 0, "creation_date": 1470915967, "post_id": 38877595, "comment_id": 65149927, "body": "Aurora does not have single instances. Aurora uses a cluster sitting behind an instance. You cannot have an instance without a cluster. When you restore a cluster from a snapshot, that&#39;s like restoring a MySQL instance from a snapshot. But a restored cluster does not have any instances, so you need to add instances to your cluster. Again, the data is in the cluster, not the instance for Aurora."}], "tags": [], "owner": {"reputation": 28154, "user_id": 1574489, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/78b4ada3c932261e1d23faf65db29ebc?s=128&d=identicon&r=PG", "display_name": "Matt Houser", "link": "https://stackoverflow.com/users/1574489/matt-houser"}, "is_accepted": true, "score": 0, "last_activity_date": 1470842587, "creation_date": 1470842587, "answer_id": 38877595, "question_id": 38876387, "link": "https://stackoverflow.com/questions/38876387/amazon-rds-restore-cluster-snapshot-no-db-instance/38877595#38877595", "title": "Amazon RDS: Restore cluster snapshot no db instance", "body": "<p>Restoring an Aurora (cluster) snapshot involves 2 steps:</p>\n\n<ol>\n<li>Restore the cluster snapshot to an Aurora cluster, then</li>\n<li>Add RDS instances to your cluster.</li>\n</ol>\n\n<p>So, once you've restored your RDS cluster, follow that with a call to <code>@rds.create_db_instance()</code>:</p>\n\n<pre><code>db_instances = @rds.create_db_instance({ \n    db_cluster_identifier: 'restored-from-rake', \n    ... \n})\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6700833, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b2f0af2331512064bfc23561d1ba47a?s=128&d=identicon&r=PG&f=1", "display_name": "Ganeko Guereta", "link": "https://stackoverflow.com/users/6700833/ganeko-guereta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 990, "favorite_count": 1, "accepted_answer_id": 38877595, "answer_count": 1, "score": 0, "last_activity_date": 1470842587, "creation_date": 1470839678, "question_id": 38876387, "link": "https://stackoverflow.com/questions/38876387/amazon-rds-restore-cluster-snapshot-no-db-instance", "title": "Amazon RDS: Restore cluster snapshot no db instance", "body": "<p>I'm getting problems restoring AWS RDS cluster snapshot.</p>\n\n<p>My snapshots are generating automatically from AWS via console config. Now I'm trying restore those snapshots via AWS RDS API for Ruby. I use <code>restore_db_cluster_from_snapshot</code> function and I restore cluster successfully but this new cluster haven't any db instance attached.</p>\n\n<p>I can't generate <code>db_snapshot</code> because my db it's on cluster, I only have <code>db_cluster_snapshot</code>. Because this I can't use <code>restore_db_instance_from_db_snapshot</code> function.</p>\n\n<p>Simply example of working code:</p>\n\n<pre><code>db_cluster = @rds.restore_db_cluster_from_snapshot({\n                                                    db_cluster_identifier: 'restored-from-rake',\n                                                    snapshot_identifier: '',\n                                                    engine: snapshot_data.engine,\n                                                    database_name: 'restored-from-rake-db'\n                                                  })\n</code></pre>\n\n<p>Any idea about this?. Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "random", "sample"], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1470841464, "post_id": 38875852, "comment_id": 65115546, "body": "How this answers the question?"}, {"owner": {"reputation": 84, "user_id": 4074752, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000472961141/picture?type=large", "display_name": "Hugo Abonizio", "link": "https://stackoverflow.com/users/4074752/hugo-abonizio"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1470849315, "post_id": 38875852, "comment_id": 65120508, "body": "This is exactly what is asked, everytime you call pop a different random value of the array will be returned. Instead of everytime check if the array includes the element (O(n)), it shuffles the array one time and always get one element (O(1)). Pop method can be called x times to get the expected behavior."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1470849746, "post_id": 38875852, "comment_id": 65120734, "body": "I know how <code>Array#pop</code> works and what is it\u2019s complexity, thanks. Below is the exact quote from the OP: \u201cI want to <b>exclude</b> the number that i have in the array <b>before I put it in the array</b>. How can I solve this problem?\u201d"}, {"owner": {"reputation": 84, "user_id": 4074752, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000472961141/picture?type=large", "display_name": "Hugo Abonizio", "link": "https://stackoverflow.com/users/4074752/hugo-abonizio"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1470850989, "post_id": 38875852, "comment_id": 65121416, "body": "This is a workaround, another way of solving the problem without creating another array and veryfing everytime, a better approach IMO."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1470851415, "post_id": 38875852, "comment_id": 65121664, "body": "There could be 100500 examples of when this approach is not working. First of all, nobody promised you ever have the initial array to shuffle. Items might come from a stream, for starters."}], "tags": [], "owner": {"reputation": 84, "user_id": 4074752, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000472961141/picture?type=large", "display_name": "Hugo Abonizio", "link": "https://stackoverflow.com/users/4074752/hugo-abonizio"}, "is_accepted": false, "score": -1, "last_activity_date": 1470838289, "creation_date": 1470838289, "answer_id": 38875852, "question_id": 38875718, "link": "https://stackoverflow.com/questions/38875718/how-to-exclude-samples-that-are-already-sampled-before/38875852#38875852", "title": "How to exclude samples that are already sampled before", "body": "<p>You can shuffle your array and pop elements from it.</p>\n\n<pre><code>arr = [1, 2, 3, 4].shuffle!\nelem = arr.pop # 2\nelem = arr.pop # 1\nelem = arr.pop # 4\nelem = arr.pop # 3\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 784, "user_id": 4800709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IG6C4.jpg?s=128&g=1", "display_name": "Navin", "link": "https://stackoverflow.com/users/4800709/navin"}, "edited": false, "score": 0, "creation_date": 1470839154, "post_id": 38875999, "comment_id": 65113768, "body": "you can add one more condition to it for exclude number if it is present in that array."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1470841491, "post_id": 38875999, "comment_id": 65115563, "body": "<code>!= true</code> is redundant and not ruby idiomatic."}], "tags": [], "owner": {"reputation": 784, "user_id": 4800709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IG6C4.jpg?s=128&g=1", "display_name": "Navin", "link": "https://stackoverflow.com/users/4800709/navin"}, "is_accepted": false, "score": 0, "last_activity_date": 1470838662, "creation_date": 1470838662, "answer_id": 38875999, "question_id": 38875718, "link": "https://stackoverflow.com/questions/38875718/how-to-exclude-samples-that-are-already-sampled-before/38875999#38875999", "title": "How to exclude samples that are already sampled before", "body": "<p>you can check it by using include? method on that array to check number before putting it the array. like this</p>\n\n<pre><code>a = [1,2,3,4,5,6,7]\na.include?(8) != true\na &lt;&lt; 8\np a\n=&gt; [1, 2, 3, 4, 5, 6, 7, 8]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1470899812, "post_id": 38876166, "comment_id": 65139387, "body": "Once you have constructed the set, you will need to extract its elements for processing. You could do that with <code>arr = set.to_a</code>, but since sets are not ordered, <code>arr[i]</code> is not guaranteed to equal the ith element added to the set. Because (presumably random) sampling is involved, order may not be important, but I thought it&#39;s worth a mention."}], "tags": [], "owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "is_accepted": false, "score": 2, "last_activity_date": 1470839080, "creation_date": 1470839080, "answer_id": 38876166, "question_id": 38875718, "link": "https://stackoverflow.com/questions/38875718/how-to-exclude-samples-that-are-already-sampled-before/38876166#38876166", "title": "How to exclude samples that are already sampled before", "body": "<p>I think its a job for <a href=\"http://ruby-doc.org/stdlib-2.3.1/libdoc/set/rdoc/Set.html\" rel=\"nofollow\"><code>Set</code></a> and <a href=\"http://ruby-doc.org/stdlib-2.3.1/libdoc/set/rdoc/Set.html#method-i-add-3F\" rel=\"nofollow\"><code>Set#add?</code></a> method:</p>\n\n<p><strong>Set</strong></p>\n\n<blockquote>\n  <p>Set implements a collection of unordered values with no duplicates.\n  This is a hybrid of Array's intuitive inter-operation facilities and\n  Hash's fast lookup.</p>\n</blockquote>\n\n<p><strong>Set#add?</strong></p>\n\n<blockquote>\n  <p>Adds the given object to the set and returns self. If the object is\n  already in the set, returns nil.</p>\n</blockquote>\n\n<pre><code>&gt; set = Set.new([1,2,3,4,5,6,6,7])\n=&gt; #&lt;Set: {1, 2, 3, 4, 5, 6, 7}&gt;\n&gt; set.add? 7\n=&gt; nil\n&gt; set.add? 8\n=&gt; #&lt;Set: {1, 2, 3, 4, 5, 6, 7, 8}&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1470842086, "post_id": 38876858, "comment_id": 65115995, "body": "I first think about <code>union</code>, it&#39;s a very handy feature."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1470840761, "creation_date": 1470840761, "answer_id": 38876858, "question_id": 38875718, "link": "https://stackoverflow.com/questions/38875718/how-to-exclude-samples-that-are-already-sampled-before/38876858#38876858", "title": "How to exclude samples that are already sampled before", "body": "<p>Another option would be to use <a href=\"http://ruby-doc.org/core-2.0.0/Array.html#method-i-7C\" rel=\"nofollow\"><code>Array#|</code></a>:</p>\n\n<pre><code>[1,2,3] | [4]\n#\u21d2\u00a0[1,2,3,4]\n[1,2,3] | [1]\n#\u21d2\u00a0[1,2,3]\n</code></pre>\n\n<p>Note that it expects an array as RHO:</p>\n\n<pre><code>10.times.inject([]) { |memo, i| memo | [i % 3] }\n#\u21d2 [0, 1, 2]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1470900207, "last_edit_date": 1470900207, "creation_date": 1470898943, "answer_id": 38889427, "question_id": 38875718, "link": "https://stackoverflow.com/questions/38875718/how-to-exclude-samples-that-are-already-sampled-before/38889427#38889427", "title": "How to exclude samples that are already sampled before", "body": "<p>A variant of @\u0417\u0435\u043b\u0451\u043d\u044b\u0439's method is to use a hash, which would preserve the order by which elements are added to the sample and also provide some additional information that may be of interest.</p>\n\n<p>Suppose the values received are given by the array</p>\n\n<pre><code>arr = [1,2,3,4,5,3,6,3,6,7]\n</code></pre>\n\n<p>These could be fed to a counting hash:</p>\n\n<pre><code>h = arr.each_with_object(Hash.new(0)) { |n,h| h[n] += 1 }\n  #=&gt; {1=&gt;1, 2=&gt;1, 3=&gt;3, 4=&gt;1, 5=&gt;1, 6=&gt;2, 7=&gt;1} \n</code></pre>\n\n<p>For Ruby v1.9+ the hash keys will be ordered as they appear in <code>arr.uniq</code> (which itself maintains order of <code>arr</code>).</p>\n\n<p>The non-repeating sample is given by</p>\n\n<pre><code>h.keys\n  #=&gt; [1, 2, 3, 4, 5, 6, 7]\n</code></pre>\n\n<p>and <code>h</code> tells you how many times each of these values were generated by the enumerator.</p>\n"}], "owner": {"reputation": 1, "user_id": 6331860, "user_type": "registered", "profile_image": "https://graph.facebook.com/877491452378577/picture?type=large", "display_name": "Sean", "link": "https://stackoverflow.com/users/6331860/sean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1470900207, "creation_date": 1470837959, "last_edit_date": 1470839165, "question_id": 38875718, "link": "https://stackoverflow.com/questions/38875718/how-to-exclude-samples-that-are-already-sampled-before", "title": "How to exclude samples that are already sampled before", "body": "<p>First, I am beginner as a developer using ruby-on-rails. \nI am using blahblah.sample(x) to get (x) samples from blahblah.\nWhat i want to do is, I am using a loop to put several different numbers in an array. I will use the sample method to get (x) numbers. \nHere is the point I don't want to put the same number many times in the array.\nI know that if i put the random numbers and use uniq method this problem will be solved, but I want to exclude the number that i have in the array before I put it in the array. How can I solve this problem? I want to recognize that I have the number in the array or not before I put the number inside the array. </p>\n\n<p>What I am eventually trying to do is \nWhen I am getting 10 sample of users to analyze their data. So I don't want to analyze the user that is analyzed already. I want to recognize if they are analyzed or not. </p>\n"}, {"tags": ["ruby", "regex", "pattern-matching"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1470837703, "post_id": 38875588, "comment_id": 65112525, "body": "<code>if(&#47;\\A[A-Z]{3}-[0-9]{4}\\z&#47;.match(plate))</code>"}, {"owner": {"reputation": 95, "user_id": 1931306, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/p0qcX.jpg?s=128&g=1", "display_name": "Andy Jainson", "link": "https://stackoverflow.com/users/1931306/andy-jainson"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1470838176, "post_id": 38875588, "comment_id": 65112884, "body": "Thanks! Solved my problem"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1470839112, "post_id": 38875588, "comment_id": 65113739, "body": "I posted the pattern with the explanations and demos."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1470864916, "post_id": 38875588, "comment_id": 65128722, "body": "<a href=\"http://rubular.com\" rel=\"nofollow noreferrer\">Rubular</a> is your friend. See <a href=\"http://rubular.com/r/9Kn4fk96ci\" rel=\"nofollow noreferrer\">rubular.com/r/9Kn4fk96ci</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2374, "user_id": 1941418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8940942c798e82d460e0c058acfb3b7?s=128&d=identicon&r=PG", "display_name": "smefju", "link": "https://stackoverflow.com/users/1941418/smefju"}, "edited": false, "score": 0, "creation_date": 1470838201, "post_id": 38875646, "comment_id": 65112905, "body": "afaik <code>plate =~ &#47;regex&#47;</code> is ~30% faster than <code>plate[&#47;regex&#47;]</code>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 2374, "user_id": 1941418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8940942c798e82d460e0c058acfb3b7?s=128&d=identicon&r=PG", "display_name": "smefju", "link": "https://stackoverflow.com/users/1941418/smefju"}, "edited": false, "score": 0, "creation_date": 1470840437, "post_id": 38875646, "comment_id": 65114818, "body": "@smefju it can\u2019t be just <code>N% faster</code> because it should strongly depend on the string length, plus it can\u2019t anyhow differ when there is no match. For <i>plates</i> thinking about this is called \u201cpremature optimization.\u201d There should be used a variant, that is easier to read and in my opinion the one I introduced reads better. The latter is of course disputable :)"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1470837750, "creation_date": 1470837750, "answer_id": 38875646, "question_id": 38875588, "link": "https://stackoverflow.com/questions/38875588/ruby-valid-license-plate-regex/38875646#38875646", "title": "Ruby valid license plate regex", "body": "<pre><code>plate[/\\A[A-Z]{3}-\\d{4}\\z/] ? 'valid' : 'invalid'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 2, "last_activity_date": 1506286676, "last_edit_date": 1506286676, "creation_date": 1470839083, "answer_id": 38876168, "question_id": 38875588, "link": "https://stackoverflow.com/questions/38875588/ruby-valid-license-plate-regex/38876168#38876168", "title": "Ruby valid license plate regex", "body": "<p>Your regex did not work because <code>\\A</code> matches a string start position that can only be one in a string (and you have three). To match an uppercase ASCII letter, you may use a <code>[A-Z]</code> character class.</p>\n\n<p>You can use</p>\n\n<pre><code>if /\\A[A-Z]{3}-[0-9]{4}\\z/ =~ plate\n</code></pre>\n\n<p>See the <a href=\"http://rubular.com/r/jxmstfDLej\" rel=\"nofollow noreferrer\">regex</a> and <a href=\"https://ideone.com/qPzkNG\" rel=\"nofollow noreferrer\">Ruby</a> demos.</p>\n\n<p><strong>Pattern details</strong>:</p>\n\n<ul>\n<li><code>\\A</code> - start of string (not line, as with <code>^</code>) anchor</li>\n<li><code>[A-Z]{3}</code> - exactly 3 (since the limiting quantifier <code>{n}</code> is used) uppercase ASCII letters (from the <code>[A-Z]</code> range in a character class)</li>\n<li><code>-</code> - a literal hyphen (not necessary to escape it outside the character class)</li>\n<li><code>[0-9]{4}</code> - exactly 4 ASCII digits</li>\n<li><code>\\z</code> - the very end of the string anchor (not <code>$</code> that matches the end of the line)</li>\n</ul>\n"}], "owner": {"reputation": 95, "user_id": 1931306, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/p0qcX.jpg?s=128&g=1", "display_name": "Andy Jainson", "link": "https://stackoverflow.com/users/1931306/andy-jainson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 588, "favorite_count": 0, "accepted_answer_id": 38876168, "answer_count": 2, "score": 0, "last_activity_date": 1506286676, "creation_date": 1470837592, "last_edit_date": 1470839542, "question_id": 38875588, "link": "https://stackoverflow.com/questions/38875588/ruby-valid-license-plate-regex", "title": "Ruby valid license plate regex", "body": "<p>I am trying to write a function in RUBY that will determine if a given string is a valid license plate. A valid license plate has the following format: 3 capital letters, followed by a dash, followed by 4 numbers. EX: <code>HES-2098</code>.</p>\n\n<p>I have written the following function but need some help for pattern matching. </p>\n\n<pre><code>def liscence()\n  plate = \"HES-2098\"\n  plateNo = plate.upcase\n if(plate.length == 8)\n\n   if(plate == plateNo)\n\n    if(/\\A-Z\\A-Z\\A-Z\\-\\d{4}/.match(plate))\n       puts \"valid\"\n     else\n       puts \"invalid\"\n     end\n\n\n   else\n     puts \"First 3 letter must be uppercase\"\n   end\n\n else\n   puts \"Only 8 char long\"\n\n end\n\nend\n\nliscence()\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 114, "user_id": 361457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86e8753d04f4204aafdb11b62d2839ca?s=128&d=identicon&r=PG", "display_name": "yogodoshi", "link": "https://stackoverflow.com/users/361457/yogodoshi"}, "edited": false, "score": 1, "creation_date": 1470837720, "post_id": 38875347, "comment_id": 65112534, "body": "How do you wanna render them? As an AJAX request? Do you know how to create an action on a controller?"}, {"owner": {"reputation": 1225, "user_id": 5724342, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0fc4bbc261a7a2a233a196a0b655fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gurmukh Singh", "link": "https://stackoverflow.com/users/5724342/gurmukh-singh"}, "reply_to_user": {"reputation": 114, "user_id": 361457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86e8753d04f4204aafdb11b62d2839ca?s=128&d=identicon&r=PG", "display_name": "yogodoshi", "link": "https://stackoverflow.com/users/361457/yogodoshi"}, "edited": false, "score": 0, "creation_date": 1470837975, "post_id": 38875347, "comment_id": 65112731, "body": "I&#39;m new to rails, and web development, If AJAX is the best way please do show an example"}], "answers": [{"tags": [], "owner": {"reputation": 114, "user_id": 361457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86e8753d04f4204aafdb11b62d2839ca?s=128&d=identicon&r=PG", "display_name": "yogodoshi", "link": "https://stackoverflow.com/users/361457/yogodoshi"}, "is_accepted": false, "score": 0, "last_activity_date": 1470839545, "creation_date": 1470839545, "answer_id": 38876344, "question_id": 38875347, "link": "https://stackoverflow.com/questions/38875347/render-three-different-partials-depending-on-button-clicked/38876344#38876344", "title": "Render three different partials depending on button clicked", "body": "<p>The links would have to be set to <code>remote: true</code> and they would have to point to different actions (or to the same but receiving different parameters).</p>\n\n<p>And those actions would have to respond to js and render its js view.</p>\n\n<p>It would be something like this:</p>\n\n<p>Your view:</p>\n\n<pre><code>&lt;div style=\"margin-top:50px;\" class=\"wrapper\"&gt;\n  &lt;div class=\"optionscontainer btn-group btn-group-justified\"&gt;\n    &lt;%= link_to 'All Posts', posts_path, class: 'options btn btn-primary', method: :get, remote: true %&gt;\n  &lt;/div&gt;\n  &lt;div id='placeholder'&gt;\n    &lt;%= render 'all_posts' %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>views/posts/index.js.erb</p>\n\n<pre><code>$('#placeholder').html(\"&lt;%= j (render 'all_posts') %&gt;\");\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1225, "user_id": 5724342, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0fc4bbc261a7a2a233a196a0b655fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gurmukh Singh", "link": "https://stackoverflow.com/users/5724342/gurmukh-singh"}, "edited": false, "score": 0, "creation_date": 1471245504, "post_id": 38939134, "comment_id": 65256058, "body": "When Im running into a small problem, I have the views for book, posts etc, but these buttons are on an index#home page and use a different controller called index and method home. I have updated my question."}, {"owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "reply_to_user": {"reputation": 1225, "user_id": 5724342, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0fc4bbc261a7a2a233a196a0b655fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gurmukh Singh", "link": "https://stackoverflow.com/users/5724342/gurmukh-singh"}, "edited": false, "score": 0, "creation_date": 1471407417, "post_id": 38939134, "comment_id": 65328447, "body": "@GurmukhSingh I don&#39;t understand you. There are three links in the index#home view where each of them send a request to different controllers. In my answer, you can find the links point to <code>stories_path</code>, <code>books_path</code> and <code>posts_path</code>. In my answer, I have written the steps to be done for <code>books_controller</code> so that the link for <code>books_path</code> renders a <code>js</code> response. You can repeat the same steps(data is different for each) for other controllers. If thats not what you want, please comment on the desired behaviour."}, {"owner": {"reputation": 1225, "user_id": 5724342, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0fc4bbc261a7a2a233a196a0b655fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gurmukh Singh", "link": "https://stackoverflow.com/users/5724342/gurmukh-singh"}, "edited": false, "score": 0, "creation_date": 1471420640, "post_id": 38939134, "comment_id": 65334093, "body": "so basically im trying to render the views in a separate view. Post and Books and separate scaffoldsso they have their own views. Im working in another controller called index, so im applying the logic above to the index controller, where I create the .js file for the index app/views/index/home.js.erb and then place $(&quot;#content&quot;).html(&quot;&lt;%= j (render &#39;books&#39;) %&gt;&quot;); in it and then for the posts i do the same $(&quot;#content&quot;).html(&quot;&lt;%= j (render &#39;posts&#39;) %&gt;&quot;); which goes in the same home.js.erb. I hope this makes scenes :? This then doesn&#39;t work?"}, {"owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "reply_to_user": {"reputation": 1225, "user_id": 5724342, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0fc4bbc261a7a2a233a196a0b655fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gurmukh Singh", "link": "https://stackoverflow.com/users/5724342/gurmukh-singh"}, "edited": false, "score": 0, "creation_date": 1471421075, "post_id": 38939134, "comment_id": 65334357, "body": "@GurmukhSingh Why do you want to have all the scripts in <code>index&#47;home.js.erb</code>? If you really want to do it that way, then there&#39;s a problem with it. In the links, you need to pass additional information as to which button was clicked and not just that, you need conditionals in your <code>index.js.erb</code> to render a specific partial which makes it too complicated. With my solution, you&#39;re directing the request to a different controller which avoids conditionals and thus less code. Makes sense?"}, {"owner": {"reputation": 1225, "user_id": 5724342, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0fc4bbc261a7a2a233a196a0b655fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gurmukh Singh", "link": "https://stackoverflow.com/users/5724342/gurmukh-singh"}, "edited": false, "score": 0, "creation_date": 1471463556, "post_id": 38939134, "comment_id": 65361954, "body": "I edited my question showing how i have implemented you solution, but its not working perfectly"}, {"owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "reply_to_user": {"reputation": 1225, "user_id": 5724342, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0fc4bbc261a7a2a233a196a0b655fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gurmukh Singh", "link": "https://stackoverflow.com/users/5724342/gurmukh-singh"}, "edited": false, "score": 0, "creation_date": 1471464107, "post_id": 38939134, "comment_id": 65362261, "body": "@GurmukhSingh, Are you saying that it works for <code>posts</code> but not for <code>stories</code>? Have you modified your <code>StoriesController#index</code> to render <code>js</code> response? If thats fine, after clicking the stories button, please inspect the <code>network</code> tab in your dev tools and see the server logs to see what&#39;s happening. Post the log and let me try to solve the issue."}, {"owner": {"reputation": 1225, "user_id": 5724342, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0fc4bbc261a7a2a233a196a0b655fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gurmukh Singh", "link": "https://stackoverflow.com/users/5724342/gurmukh-singh"}, "edited": false, "score": 0, "creation_date": 1471465368, "post_id": 38939134, "comment_id": 65362916, "body": "yh it works for posts but not stories, what am i looking for in network tab"}, {"owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "reply_to_user": {"reputation": 1225, "user_id": 5724342, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0fc4bbc261a7a2a233a196a0b655fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gurmukh Singh", "link": "https://stackoverflow.com/users/5724342/gurmukh-singh"}, "edited": false, "score": 0, "creation_date": 1471465598, "post_id": 38939134, "comment_id": 65363035, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/121206/discussion-between-arun-kumar-and-gurmukh-singh\">continue this discussion in chat</a>."}, {"owner": {"reputation": 1225, "user_id": 5724342, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0fc4bbc261a7a2a233a196a0b655fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gurmukh Singh", "link": "https://stackoverflow.com/users/5724342/gurmukh-singh"}, "edited": false, "score": 0, "creation_date": 1471466209, "post_id": 38939134, "comment_id": 65363320, "body": "@AunKumar it works fine, it was a small error on my side! Thanks for the help man!"}], "tags": [], "owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "is_accepted": true, "score": 18, "last_activity_date": 1495190370, "last_edit_date": 1495540987, "creation_date": 1471148950, "answer_id": 38939134, "question_id": 38875347, "link": "https://stackoverflow.com/questions/38875347/render-three-different-partials-depending-on-button-clicked/38939134#38939134", "title": "Render three different partials depending on button clicked", "body": "<p>Ok, before getting into the solution, lets understand the <code>request-response</code> cycle. </p>\n\n<p>When you search for <a href=\"http://stackoverflow.com\">http://stackoverflow.com</a>, what happens is you're sending a request from the <code>client</code>(your browser) to the StackOverflow(SO) <code>server</code>. The client and server communicate through <code>HTTP</code> protocol and if the user's requesting for something that the server knows, it serves(sends) the response(html, css, js files). The browser knows how to display the html content received from the server. Every browser has its own stylesheet(<code>user-agent-stylesheet</code>) and it also applies the styles in the css files linked in the html page sent back from the server. Note that this all happens <strong>synchronously</strong> and while the <code>server</code> is processing the client's request, the browser tab is <code>inactive</code> as its waiting for the server's response. The same process happens when you click on a link. It creates a new request to the server. </p>\n\n<p>The response from the server can be <code>HTML</code>, <code>JSON</code>, <code>XML</code> etc. As you might have noticed, the <code>synchronous</code> communication is not something we always want.</p>\n\n<p>If we make a new <code>synchronous</code> request, the browser fetches <code>HTML</code>, <code>CSS</code> and <code>JS</code> and <code>image</code> files all over again(lets not get into caching). And we don't want to update the whole page for every request. </p>\n\n<p>Often, only parts of the page are updated after a request and it provides a good user experience.</p>\n\n<p>This is where Javascript is good at. It has the power to make requests to the server asynchronously(the web page doesn't reload) and also update parts of the page using something called <code>AJAX</code>(<a href=\"https://developer.mozilla.org/en-US/docs/AJAX/Getting_Started\" rel=\"noreferrer\">Asynchronous Javascript XML</a>). </p>\n\n<p>A typical AJAX request goes like this. You make a request to the server  but this time asynchronously and the server responds with <code>XML</code> rather than <code>HTML</code> and <code>Javascript</code> parses the <code>XML</code> document updates the part of the page. Eventhough its called AJAX, now-a-days, JSON is used for exchanging information across services. </p>\n\n<p>So, to make a AJAX request, we need a link which when clicked sends a <code>XMLHttpRequest</code>(asynchronous request) and the server should respond with <code>JSON</code> or <code>XML</code> or and then the script should parse the response and update the <code>DOM</code>(<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model\" rel=\"noreferrer\">Document Object Model</a>). Making an AJAX request in <code>Vanilla JS</code>(plain javascript) is complex and people normally use <code>Jquery</code>'s <code>ajax</code> method to issue an AJAX request(less lines of code). See <a href=\"http://api.jquery.com/jquery.ajax/\" rel=\"noreferrer\">http://api.jquery.com/jquery.ajax/</a> for more information.</p>\n\n<p>But in <code>rails</code>, its even easier. We can make an AJAX request using <code>UJS</code>(<a href=\"http://guides.rubyonrails.org/working_with_javascript_in_rails.html#unobtrusive-javascript\" rel=\"noreferrer\">Unobtrusive Javascript</a>). Lets see it in action.</p>\n\n<p>To make a link send an AJAX request, you need to set <code>remote: true</code>in the <code>link_to</code> helper. This adds a <code>data-remote=true</code>in the generated HTML.</p>\n\n<p>For example the following erb </p>\n\n<pre><code>&lt;%= link_to \"All books\", books_path, remote: true %&gt;\n</code></pre>\n\n<p>generates the html</p>\n\n<pre><code>&lt;a data-remote=\"true\" href=\"/books\"&gt;All books&lt;/a&gt;\n</code></pre>\n\n<p>Ok. Now we're all set to make an <code>AJAX</code> request. Modify your code as</p>\n\n<pre><code>&lt;div style=\"margin-top:50px;\" class=\"wrapper\"&gt;\n  &lt;div class=\"optionscontainer btn-group btn-group-justified\"&gt;\n\n    &lt;%= link_to posts_path, class:\"options btn btn-primary\", remote: true do %&gt;\n      &lt;i class=\"fa fa-book optionseach\" aria-hidden=\"true\"&gt;&lt;/i&gt;All posts\n    &lt;% end %&gt;\n\n\n   &lt;%= link_to stories_path, class:\"options btn btn-primary\", remote: true do %&gt;\n      &lt;i class=\"fa fa-rss optionseach\" aria-hidden=\"true\"&gt;&lt;/i&gt;All stories\n    &lt;% end %&gt;\n\n   &lt;%= link_to books_path, class:\"options btn btn-primary\", remote: true do %&gt;\n      &lt;i class=\"fa fa-users optionseach\" aria-hidden=\"true\"&gt;&lt;/i&gt;All books\n    &lt;% end %&gt;\n&lt;/div&gt;\n\n&lt;div id=\"content\"&gt;\n  &lt;!-- The content goes here --&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I assume you have the controllers, models and views setup. Also Execute <code>rake routes</code> in the terminal to see the existing routes of your application. You should see the following(Order isn't important)</p>\n\n<pre><code>Prefix  Verb   URI Pattern                Controller#Action\nposts   GET    /posts(.:format)            posts#index\nstories GET    /stories(.:format)          stories#index\nbooks   GET    /books(.:format)            books#index\n</code></pre>\n\n<p>Note: <code>format</code> here corresponds to the returned format which can be <code>html</code>, <code>js</code>, <code>xml</code> or <code>json</code>. </p>\n\n<p><code>posts_path</code> in one of the <code>url_helper</code> which points to <code>posts#index</code>, meaning whenever a request is made to the server in a <code>rails</code> application, it first reaches the router and is dispatched to the corresponding <code>controller</code> action specified in <code>routes.rb</code></p>\n\n<p>In this case, if we make a request to <code>http://localhost:3000/books</code>, the request is sent to the books#index action. In the action, you can fetch the data from the <code>database</code> and send the response to the client. </p>\n\n<p>Since we are interested in AJAX and we have specified <code>remote:true</code>, rails will expect a <code>JS</code> response to be returned to the client(ie. a <code>script</code> which is responsible for rendering content dynamically).</p>\n\n<p>I will explain how to deal with the AJAX request for <code>BooksController</code> and you can apply the same idea for other controllers.(<code>posts</code> and <code>stories</code>).</p>\n\n<pre><code>class BooksController &lt; ApplicationController\n\n  def index\n    @books = Book.all\n\n    respond_to do |format|\n      format.html #looks for views/books/index.html.erb\n      format.js   #looks for views/books/index.js.erb\n    end\n\n  end\n\n  #other actions\nend\n</code></pre>\n\n<p>All we're doing here is telling the controller to render <code>index.js.erb</code> if the client requests for a JS response or to render <code>index.html.erb</code> in case of HTML response. How does rails knows to render <code>index.html.erb</code> or <code>index.js.erb</code> when we didn't specify the file to render? Thats what rails is popular for.Rails follows <a href=\"https://en.wikibooks.org/wiki/Ruby_on_Rails/Getting_Started/Convention_Over_Configuration\" rel=\"noreferrer\">Convention Over Configuration</a>. </p>\n\n<p>Actually, the <code>controller</code> infers the template to render from the <code>action</code> name. </p>\n\n<p>The next step is to make use of <code>@books</code> to update the <code>#content</code> div. Before adding the code to render all the books, we need a template to render right? Thats where partials come in. A partial is a reusable <code>view' and  a partial in rails is prefixed with '_'. For example:</code>_books.html.erb<code>is a partial for</code>books`. </p>\n\n<p>Create a partial <code>app/views/books/_books.html.erb</code></p>\n\n<pre><code>&lt;% @books.each do |book| %&gt;\n  &lt;div class=\"book\"&gt;\n    #Display the fields\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Now create <code>app/views/books/index.js.erb</code> and add the following:</p>\n\n<pre><code>$(\"#content\").html(\"&lt;%= j (render 'books') %&gt;\");\n</code></pre>\n\n<p>This one-liner will render the partial <code>_books.html.erb</code> into the <code>#content</code> div. Wait. How does it work? Lets break it into pieces.</p>\n\n<p>Anything inside <code>&lt;%=  %&gt;</code> is ruby code. Its executed and the value is replaced in place of <code>&lt;%= %&gt;</code>. The <code>erb</code> templating engline allows you to write <code>ruby</code> code inside <code>javascript</code>. So, what does this do?</p>\n\n<pre><code>&lt;%= j (render 'books') %&gt;\n</code></pre>\n\n<p>It will render the <code>books/_books.html.erb</code>, inferred from the parameter to <code>render</code>. It returns the html generated by <code>_books.html.erb</code>. </p>\n\n<p>What does <code>j</code> do? Its actually an alias of <code>escape_javascript</code> method. It is used to escape the content returned from the partial <code>_books.html.erb</code>.</p>\n\n<p>Explaining the reason for <code>escaping</code> html will make this answer even longer. I strongly recommend you to read kikito's answer(the 3rd one) in <a href=\"https://stackoverflow.com/questions/1620113/why-escape-javascript-before-rendering-a-partial\">this</a> SO thread.</p>\n\n<p>So, we are passing html from the partial as a string(note the quotes around <code>&lt;%= %&gt;</code>) to <code>html</code> method which is added inside the <code>#content</code> div. Thats it! </p>\n\n<p>I recommend you to inspect the server logs and explore the <code>Network</code> tab in Developer tools to get a deep understanding of how AJAX works.</p>\n\n<p>Do the same for the other controllers(<code>PostsController</code> and <code>StoriesController</code>).</p>\n\n<p>Hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 981, "user_id": 5237849, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/949419215119419/picture?type=large", "display_name": "Fakhir Shad", "link": "https://stackoverflow.com/users/5237849/fakhir-shad"}, "is_accepted": false, "score": -2, "last_activity_date": 1471433233, "creation_date": 1471433233, "answer_id": 38995361, "question_id": 38875347, "link": "https://stackoverflow.com/questions/38875347/render-three-different-partials-depending-on-button-clicked/38995361#38995361", "title": "Render three different partials depending on button clicked", "body": "<p>As you want to achieve this from single method index#home. Then you have to pass some extra info with the link as </p>\n\n<pre><code>&lt;div style=\"margin-top:50px;\" class=\"wrapper\"&gt;\n  &lt;div class=\"optionscontainer btn-group btn-group-justified\"&gt;\n    &lt;a style=\"background-color:#4183D7;\" href=\"&lt;%= path_to_index_home(request: :p) %&gt;\" class=\"options btn btn-primary\" data-remote=true&gt;&lt;i class=\"fa fa-book optionseach\" aria-hidden=\"true\"&gt;&lt;/i&gt;All posts&lt;/a&gt;\n    &lt;a style=\"background-color:#59ABE3;\" href=\"&lt;%= path_to_index_home(request: :s) %&gt;\" class=\"options btn btn-primary\" data-remote=true&gt;&lt;i class=\"fa fa-rss optionseach\" aria-hidden=\"true\"&gt;&lt;/i&gt;all stories&lt;/a&gt;\n    &lt;a style=\"background-color:#81CFE0;\" href=\"&lt;%= path_to_index_home(request: :b) %&gt;\" class=\"options btn btn-primary\" data-remote=true&gt;&lt;i class=\"fa fa-users optionseach\" aria-hidden=\"true\"&gt;&lt;/i&gt;all books&lt;/a&gt;\n  &lt;/div&gt;\n  &lt;div data-load-partial&gt;\n    &lt;%= render 'name_of_your_default_partial' , locals: {collection: @collection} %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Now we have to edit our controller. Add this line at top of your controller</p>\n\n<pre><code>ALLOWED_REQUESTS = { p: 'Post' , s: 'Story' , b: 'Book' }\n</code></pre>\n\n<p>Edit your home action as</p>\n\n<pre><code>@request = params[:request].blank? ? 'Post' : ALLOWED_REQUEST[params[:request].to_sym]\n@collection = @request.constantize.all\n</code></pre>\n\n<p>Now its time to render appropriate partial. If you have different table structure and you want to display different fields with different html then you can create three different partials as _book.html.erb , _story.html.erb , _post.html.erb and you can call it as in your home.js.erb file</p>\n\n<pre><code>$('[data-load-partial]').html('&lt;%= j render partial: \"#{@request.downcase}\" , locals: { collection: @collection } %&gt;');\n</code></pre>\n\n<p>If you want to use the same partial for the three types then you can do it as </p>\n\n<pre><code>$('[data-load-partial]').html('&lt;%= j render partial: \"name_of_your_partial\" , locals: { collection: @collection } %&gt;');\n</code></pre>\n"}], "owner": {"reputation": 1225, "user_id": 5724342, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0fc4bbc261a7a2a233a196a0b655fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gurmukh Singh", "link": "https://stackoverflow.com/users/5724342/gurmukh-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3347, "favorite_count": 3, "accepted_answer_id": 38939134, "answer_count": 3, "score": 3, "last_activity_date": 1495190370, "creation_date": 1470836997, "last_edit_date": 1471465280, "question_id": 38875347, "link": "https://stackoverflow.com/questions/38875347/render-three-different-partials-depending-on-button-clicked", "title": "Render three different partials depending on button clicked", "body": "<p>So I have a layout like this:</p>\n\n<p>home/index.html.erb:</p>\n\n<pre><code>&lt;div class=\"optionscontainer btn-group btn-group-justified\"&gt;\n   &lt;%= link_to posts_path, class:\"options btn btn-primary\", remote: true do %&gt;\n      &lt;i class=\"fa fa-book optionseach\" aria-hidden=\"true\"&gt;&lt;/i&gt;All posts\n   &lt;% end %&gt;\n   &lt;%= link_to stories_path, class:\"options btn btn-primary\", remote: true do %&gt;\n      &lt;i class=\"fa fa-book optionseach\" aria-hidden=\"true\"&gt;&lt;/i&gt;All stories\n   &lt;% end %&gt;\n&lt;/div&gt;\n   &lt;div id=\"content\" class=\"\"&gt;\n   &lt;/div&gt;\n</code></pre>\n\n<p>In posts_controller.rb</p>\n\n<p>I have:</p>\n\n<pre><code>def index\n    @posts = Post.all\n    respond_to do |format|\n      format.html #looks for views/books/index.html.erb\n      format.js   #looks for views/books/index.js.erb\n    end\n  end\n</code></pre>\n\n<p>In stories_controller.rb</p>\n\n<p>I have:</p>\n\n<pre><code>def index\n    @stories = Story.all\n    respond_to do |format|\n      format.html #looks for views/books/index.html.erb\n      format.js   #looks for views/books/index.js.erb\n    end\n  end\n</code></pre>\n\n<p>In my views/posts/index.js.erb</p>\n\n<pre><code>$(\"#content\").html(\"&lt;%= j (render 'posts') %&gt;\");\n</code></pre>\n\n<p>In my views/stories/index.js.erb</p>\n\n<pre><code>$(\"#content\").html(\"&lt;%= j (render 'stories') %&gt;\");\n</code></pre>\n\n<p>And I also have <code>_posts.html.erb</code> in <code>views/posts</code> and <code>_stories_html.erb</code> in <code>views/stories</code></p>\n\n<p>What happens is when i click on the posts button i renders the view but when i click on the stories button nothing renders?</p>\n"}, {"tags": ["ruby", "rubocop"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1470836410, "post_id": 38875098, "comment_id": 65111507, "body": "Prefer if or else constructs instead."}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1470836687, "creation_date": 1470836687, "answer_id": 38875223, "question_id": 38875098, "link": "https://stackoverflow.com/questions/38875098/fix-line-is-too-long-error-in-a-ruby-file/38875223#38875223", "title": "fix Line is too long error in a ruby file", "body": "<p>Rubocop already suggested the way to fix this error. Let me repeat it here. Assuming you have a very long line that reads:</p>\n\n<pre><code>variable = long_condition ? true_clause : false_clause\n</code></pre>\n\n<p>change it to:</p>\n\n<pre><code>variable = if long_condition\n             true_clause\n           else\n             false_clause\n           end\n</code></pre>\n\n<p>Other way would be to instruct <code>rubocop</code> to [temporary] ignore this error by running from the very project directory:</p>\n\n<pre><code>rubocop --auto-gen-config\n</code></pre>\n\n<p>Or, as last but not the least chance, update your <code>.rubocop.yml</code> file to increase a line length within a respective rule.</p>\n"}, {"tags": [], "owner": {"reputation": 1905, "user_id": 232838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8342950f34a66d9ec7cfe10b33d5494c?s=128&d=identicon&r=PG", "display_name": "koffeinfrei", "link": "https://stackoverflow.com/users/232838/koffeinfrei"}, "is_accepted": false, "score": 0, "last_activity_date": 1470836736, "creation_date": 1470836736, "answer_id": 38875253, "question_id": 38875098, "link": "https://stackoverflow.com/questions/38875098/fix-line-is-too-long-error-in-a-ruby-file/38875253#38875253", "title": "fix Line is too long error in a ruby file", "body": "<p>Rubocop tells you what to do, just follow its advice.</p>\n\n<p>Also, have a look at the <a href=\"https://github.com/bbatsov/ruby-style-guide\" rel=\"nofollow\">ruby styleguide</a>, which explains all the rubocop rules in detail.</p>\n"}], "owner": {"reputation": 11, "user_id": 2193792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da25d8c6f06eff692ad16f522fcc2b3d?s=128&d=identicon&r=PG", "display_name": "user2193792", "link": "https://stackoverflow.com/users/2193792/user2193792"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1389, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1470836736, "creation_date": 1470836352, "question_id": 38875098, "link": "https://stackoverflow.com/questions/38875098/fix-line-is-too-long-error-in-a-ruby-file", "title": "fix Line is too long error in a ruby file", "body": "<p>how to fix Line is too long error in a ruby file without ignoring it and not introducing new errors.\nI have tried giving the extra character in the next line using IDE. It is introducing new errors like 'Ternary operators must not be nested. Prefer if or else constructs instead.'</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1470843879, "post_id": 38877124, "comment_id": 65117289, "body": "So, do I build a supplementary partial or include this all in the payment form? Would that even work?"}, {"owner": {"reputation": 1195, "user_id": 1201917, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2bfbfc7322e119a59b09eefd2775e05e?s=128&d=identicon&r=PG", "display_name": "user1201917", "link": "https://stackoverflow.com/users/1201917/user1201917"}, "reply_to_user": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1470845041, "post_id": 38877124, "comment_id": 65118038, "body": "You don&#39;t need a partial. Think of total_price as a regular attribute. It must work"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1470845211, "post_id": 38877124, "comment_id": 65118149, "body": "Where should I let the user specify the number of spaces, though, on the new.html form above? Do I just include an input form?"}, {"owner": {"reputation": 1195, "user_id": 1201917, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2bfbfc7322e119a59b09eefd2775e05e?s=128&d=identicon&r=PG", "display_name": "user1201917", "link": "https://stackoverflow.com/users/1201917/user1201917"}, "reply_to_user": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1470846050, "post_id": 38877124, "comment_id": 65118688, "body": "<a href=\"https://jsfiddle.net/ooqng73L/\" rel=\"nofollow noreferrer\">jsfiddle.net/ooqng73L</a> Put this field on the event page. It&#39;s common practice on the booking sites."}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1470848099, "post_id": 38877124, "comment_id": 65119839, "body": "Hi, I&#39;m getting &#39;undefined method `*&#39; for nil:NilClass&#39; error in relation to the total_amount model method above. Does it not recognise this?"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1470850835, "post_id": 38877124, "comment_id": 65121325, "body": "I&#39;ve changed the method to include to_i for the quantity and price but whilst this removes the error it isn&#39;t stating any price when I get to the payment page. There&#39;s a 0(zero) where the amount should be."}, {"owner": {"reputation": 1195, "user_id": 1201917, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2bfbfc7322e119a59b09eefd2775e05e?s=128&d=identicon&r=PG", "display_name": "user1201917", "link": "https://stackoverflow.com/users/1201917/user1201917"}, "reply_to_user": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1470853353, "post_id": 38877124, "comment_id": 65122804, "body": "Try to test it in <code>rails c</code>. Post your form and params which executes your <code>new</code> method"}], "tags": [], "owner": {"reputation": 1195, "user_id": 1201917, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2bfbfc7322e119a59b09eefd2775e05e?s=128&d=identicon&r=PG", "display_name": "user1201917", "link": "https://stackoverflow.com/users/1201917/user1201917"}, "is_accepted": false, "score": 0, "last_activity_date": 1470841451, "creation_date": 1470841451, "answer_id": 38877124, "question_id": 38875002, "link": "https://stackoverflow.com/questions/38875002/rails-how-to-add-multiple-bookings-for-same-user/38877124#38877124", "title": "Rails - how to add multiple bookings for same user", "body": "<p>Creating a virtual attribute (as you suggested) in the model Booking with the total price is a good way. </p>\n\n<p><strong>booking.rb</strong>:</p>\n\n<pre><code>def total_amount\n  self.quantity * self.event.price\nend\n</code></pre>\n\n<p>Let the user specify the number of the spaces before he sees the confirmation page (at least, for a better UX). Set default to 1. Transfer the number of spaces to the 'new' method:</p>\n\n<pre><code>def new\n  ....\n  @booking = @event.bookings.new(quantity: params[:quantity])\n  ....\n\nend\n</code></pre>\n\n<p>Now you can display or access the total price with </p>\n\n<pre><code>&lt;p&gt;Total Amount&lt;%= @booking.total_amount %&gt;&lt;/p&gt;\n</code></pre>\n"}], "owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470841451, "creation_date": 1470836117, "last_edit_date": 1470837232, "question_id": 38875002, "link": "https://stackoverflow.com/questions/38875002/rails-how-to-add-multiple-bookings-for-same-user", "title": "Rails - how to add multiple bookings for same user", "body": "<p>I'm building an events app using Rails. At the moment the booking process only allows for one user to book one place per booking. I need to add the facility whereby a User can make multiple/group bookings at once. So, not only do I need a 'quantity' function I also need this to tally with the price. I've trawled SO and Google trying to find the answers but have gotten nowhere for something which is pretty common for most sites. </p>\n\n<p>I assume I need a method of some kind (in the model?) - </p>\n\n<pre><code>  def total_amount\n    @booking.quantity * @event.price\nend\n</code></pre>\n\n<p>So, if someone wants to book for 10 spaces on an event which costs \u00a310 per space then the total amount should tally to \u00a3100. </p>\n\n<p>Do I use methods in my model/controller or do I need some javascript for the process of reflecting the price per group booking?</p>\n\n<p>Here's the MVC code for the bookings -</p>\n\n<p><strong>Booking.rb</strong> </p>\n\n<pre><code>     class Booking &lt; ActiveRecord::Base\n\n    belongs_to :event\n    belongs_to :user\n\n\n\n\n\nend\n</code></pre>\n\n<p><strong>bookings_controller.rb</strong> </p>\n\n<pre><code>    class BookingsController &lt; ApplicationController\n\n    before_action :authenticate_user!\n\n    def new\n        # booking form\n        # I need to find the event that we're making a booking on\n        @event = Event.find(params[:event_id])\n        # and because the event \"has_many :bookings\"\n        @booking = @event.bookings.new\n        # which person is booking the event?\n        @booking.user = current_user\n        #@booking.quantity = @booking.quantity\n        #@total_amount = @booking_quantity.to_f * @event_price.to_f\n\n    end\n\n\n\n\n def create\n        # actually process the booking\n        @event = Event.find(params[:event_id])\n        @booking = @event.bookings.new(booking_params)\n        @booking.user = current_user\n        #@total_amount = @booking.quantity.to_f * @event.price.to_f\n\n        Booking.transaction do\n\n            @event.reload\n            if @event.bookings.count &gt; @event.number_of_spaces\n            flash[:warning] = \"Sorry, this event is fully booked.\"\n            raise ActiveRecord::Rollback, \"event is fully booked\"\n            end \n        end\n\n\n\n\n        if @booking.save\n\n            # CHARGE THE USER WHO'S BOOKED\n            # #{} == puts a variable into a string\n            Stripe::Charge.create(amount: @event.price_pennies, currency: \"gbp\",\n                card: @booking.stripe_token, description: \"Booking number #{@booking.id}\")\n\n            flash[:success] = \"Your place on our event has been booked\"\n            redirect_to event_path(@event)\n        else\n            flash[:error] = \"Payment unsuccessful\"\n            render \"new\"\n        end\n\n        if @event.is_free?\n\n            @booking.save!\n            flash[:success] = \"Your place on our event has been booked\"\n            redirect_to event_path(@event)\n        end\n    end\n\n\n\n    private\n\n    def booking_params\n        params.require(:booking).permit(:stripe_token, :quantity)\n    end\n\n\n\nend\n</code></pre>\n\n<p><strong>new.html.erb (bookings)</strong></p>\n\n<pre><code>                &lt;% if @event.is_free? %&gt;\n&lt;div class=\"col-md-6 col-md-offset-3\" id=\"eventshow\"&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"panel panel-default\"&gt;\n        &lt;div class=\"panel-heading\"&gt;\n            &lt;h2&gt;Your Booking Confirmation&lt;/h2&gt;\n        &lt;/div&gt;\n                &lt;div class=\"panel-body\"&gt;\n\n                        &lt;h1&gt;Hi there&lt;/h1&gt;\n\n                        &lt;p&gt;You have placed a booking on &lt;%= @event.title %&gt;&lt;/p&gt;\n\n                        &lt;p&gt;Your order number is &lt;%= @booking.id %&gt;&lt;/p&gt;\n\n                        &lt;p&gt;We hope you have a wonderful time. Enjoy!&lt;/p&gt;\n\n                        &lt;p&gt;Love from Mama Knows Best&lt;/p&gt;\n                &lt;/div&gt;        \n                  &lt;div class=\"panel-footer\"&gt;\n                    &lt;%= link_to \"Home\", root_path %&gt;\n                  &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;                      \n\n                &lt;% else %&gt;\n\n&lt;div class=\"col-md-6 col-md-offset-3\" id=\"eventshow\"&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"panel panel-default\"&gt;\n        &lt;div class=\"panel-heading\"&gt;\n            &lt;h2&gt;Confirm Your Booking&lt;/h2&gt;\n        &lt;/div&gt;\n\n            &lt;div class=\"panel-body\"&gt;    \n\n                &lt;p&gt;Total Amount&lt;%= @event.price %&gt;&lt;/p&gt;\n                &lt;%= simple_form_for [@event, @booking], id: \"new_booking\" do |form| %&gt;\n\n\n\n\n\n                 &lt;span class=\"payment-errors\"&gt;&lt;/span&gt;\n\n                &lt;div class=\"form-row\"&gt;\n                    &lt;label&gt;\n                      &lt;span&gt;Card Number&lt;/span&gt;\n                      &lt;input type=\"text\" size=\"20\" data-stripe=\"number\"/&gt;\n                    &lt;/label&gt;\n                &lt;/div&gt;\n\n                &lt;div class=\"form-row\"&gt;\n                  &lt;label&gt;\n                  &lt;span&gt;CVC&lt;/span&gt;\n                  &lt;input type=\"text\" size=\"4\" data-stripe=\"cvc\"/&gt;\n                  &lt;/label&gt;\n                &lt;/div&gt;\n\n                &lt;div class=\"form-row\"&gt;\n                    &lt;label&gt;\n                        &lt;span&gt;Expiration (MM/YYYY)&lt;/span&gt;\n                        &lt;input type=\"text\" size=\"2\" data-stripe=\"exp-month\"/&gt;\n                    &lt;/label&gt;\n                    &lt;span&gt; / &lt;/span&gt;\n                    &lt;input type=\"text\" size=\"4\" data-stripe=\"exp-year\"/&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"panel-footer\"&gt;    \n\n               &lt;%= form.button :submit %&gt;\n\n\n            &lt;/div&gt; \n\n&lt;% end %&gt;\n&lt;% end %&gt;\n\n      &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;    \n\n&lt;script type=\"text/javascript\" src=\"https://js.stripe.com/v2/\"&gt;&lt;/script&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n  Stripe.setPublishableKey('&lt;%= STRIPE_PUBLIC_KEY %&gt;');\n  var stripeResponseHandler = function(status, response) {\n    var $form = $('#new_booking');\n\n    if (response.error) {\n    // Show the errors on the form\n    $form.find('.payment-errors').text(response.error.message);\n    $form.find('input[type=submit]').prop('disabled', false);\n    } else {\n    // token contains id, last4, and card type\n    var token = response.id;\n    // Insert the token into the form so it gets submitted to the server\n    $form.append($('&lt;input type=\"hidden\" name=\"booking[stripe_token]\"     /&gt;').val(token));\n    // and submit\n    $form.get(0).submit();\n    }\n  };\n\n  // jQuery(function($)  { - changed to the line below\n  $(document).on(\"ready page:load\", function () {\n\n    $('#new_booking').submit(function(event) {\n      var $form = $(this);\n\n      // Disable the submit button to prevent repeated clicks\n      $form.find('input[type=submit]').prop('disabled', true);\n\n      Stripe.card.createToken($form, stripeResponseHandler);\n\n      // Prevent the form from submitting with the default action\n      return false;\n    });\n  });\n&lt;/script&gt;\n</code></pre>\n\n<p>Here is the schema for bookings and events - </p>\n\n<pre><code>create_table \"bookings\", force: :cascade do |t|\nt.integer  \"event_id\"\nt.integer  \"user_id\"\nt.string   \"stripe_token\"\nt.datetime \"created_at\",   null: false\nt.datetime \"updated_at\",   null: false\nt.integer  \"quantity\"\n   end   \n\ncreate_table \"events\", force: :cascade do |t|\nt.string   \"title\"\nt.string   \"location\"\nt.date     \"date\"\nt.time     \"time\"\nt.text     \"description\"\nt.string   \"organised_by\"\nt.datetime \"created_at\",                         null: false\nt.datetime \"updated_at\",                         null: false\nt.integer  \"user_id\"\nt.string   \"image_file_name\"\nt.string   \"image_content_type\"\nt.integer  \"image_file_size\"\nt.datetime \"image_updated_at\"\nt.integer  \"category_id\"\nt.string   \"url\"\nt.integer  \"number_of_spaces\"\nt.integer  \"price\"\nt.boolean  \"is_free\"\nt.integer  \"price_cents\",        default: 0,     null: false\nt.integer  \"price_pennies\",      default: 0,     null: false\nt.string   \"price_currency\",     default: \"GBP\", null: false\nt.boolean  \"happened\",           default: false\n  end   \n</code></pre>\n\n<p>I think, ideally, I need a supplementary partial form activated when a user clicks on 'Book the Event' which asks them to specify the number of spaces they wish to book for the event BEFORE proceeding to payment. Any assistance or push in the right direction would be appreciated.</p>\n"}, {"tags": ["ruby", "haskell", "functional-programming"], "comments": [{"owner": {"reputation": 14830, "user_id": 3757232, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kLzML.jpg?s=128&g=1", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/3757232/jared-smith"}, "edited": false, "score": 1, "creation_date": 1470837191, "post_id": 38874527, "comment_id": 65112137, "body": "FYI this is generally (in the language-agnostic sense) referred to as destructuring or destructuring bind, not pattern matching. <a href=\"https://www.cs.cmu.edu/Groups/AI/html/cltl/clm/node252.html\" rel=\"nofollow noreferrer\">cs.cmu.edu/Groups/AI/html/cltl/clm/node252.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 2, "last_activity_date": 1470834980, "creation_date": 1470834980, "answer_id": 38874579, "question_id": 38874527, "link": "https://stackoverflow.com/questions/38874527/ruby-array-pattern-matching/38874579#38874579", "title": "Ruby array pattern matching", "body": "<p>Pretty much the same. Try</p>\n\n<pre><code>fst, snd = str.split(\"_\", 2)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 5, "creation_date": 1470835546, "post_id": 38874699, "comment_id": 65110896, "body": "This is the only answer here so far, that answers the question as it stated and sheds a light on the difference between \u201cparallel assignment\u201d and \u201cpattern matching.\u201d BTW, the Haskell snippet in the OP is not a pattern matching example in the strict meaning."}, {"owner": {"reputation": 12493, "user_id": 106906, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d246a4b19295137980d6c6f831eba665?s=128&d=identicon&r=PG", "display_name": "Dogweather", "link": "https://stackoverflow.com/users/106906/dogweather"}, "edited": false, "score": 0, "creation_date": 1517622427, "post_id": 38874699, "comment_id": 84183572, "body": "It <i>is</i> very interesting. Now we just need the case/matching behavior in Ruby."}], "tags": [], "owner": {"reputation": 2374, "user_id": 1941418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8940942c798e82d460e0c058acfb3b7?s=128&d=identicon&r=PG", "display_name": "smefju", "link": "https://stackoverflow.com/users/1941418/smefju"}, "is_accepted": true, "score": 9, "last_activity_date": 1470835330, "creation_date": 1470835330, "answer_id": 38874699, "question_id": 38874527, "link": "https://stackoverflow.com/questions/38874527/ruby-array-pattern-matching/38874699#38874699", "title": "Ruby array pattern matching", "body": "<p>This is a parallel assignment in Ruby. You can assign an array to variables this way:</p>\n\n<pre><code>fst, snd = str.split(\"_\", 2)\n</code></pre>\n\n<p>You can also achieve head / tail behavior from Haskell by assigning rest of the array to a single variable:</p>\n\n<pre><code>head, *tail = \"foo_bar_baz\".split(\"_\")\n# head =&gt; \"foo\"\n# tail =&gt; [\"bar\", \"baz\"]\n</code></pre>\n\n<p>Without star in <code>tail</code>, it would assign only <code>bar</code> string and <code>baz</code> would \"disappear\".</p>\n"}, {"tags": [], "owner": {"reputation": 106013, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "is_accepted": false, "score": 2, "last_activity_date": 1470844870, "last_edit_date": 1470844870, "creation_date": 1470843991, "answer_id": 38878104, "question_id": 38874527, "link": "https://stackoverflow.com/questions/38874527/ruby-array-pattern-matching/38878104#38878104", "title": "Ruby array pattern matching", "body": "<p>@smefju's answer is nice but I'll just share a way that you can do even more <strong>destructuring assignment</strong> using ruby</p>\n\n<pre><code>def foo &amp;f\n  # watch the array get destructured in the block below\n  f.call [1,2,3,4,5], :sweet, :candy\nend\n\n# first block param is array, so we can destructure it if you want\nfoo do |(x,*xs),y,z|\n  puts %Q{\n    x: #{x}\n    xs: #{xs}\n    y: #{y}\n    z: #{z}\n  }\nend\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>x: 1\nxs: [2, 3, 4, 5]\ny: sweet\nz: candy\n</code></pre>\n\n<hr>\n\n<p>This is useful in all sorts of ways</p>\n\n<pre><code>hash = {a: 1, b: 2, c: 3}\nhash.reduce({}) do |acc,(k,v)|\n  puts %Q{\n    acc: #{acc}\n    k: #{k}\n    v: #{v}\n  }\n  acc.merge(k =&gt; v * v)\nend\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>acc: {}\nk: a\nv: 1\n\nacc: {:a=&gt;1}\nk: b\nv: 2\n\nacc: {:a=&gt;1, :b=&gt;4}\nk: c\nv: 3\n\n=&gt; {:a=&gt;1, :b=&gt;4, :c=&gt;9}\n</code></pre>\n\n<p>Aside from destructuring arrays tho, Ruby is pretty lacking in this department. You don't get true hash destructuring and there's no such thing as actual <strong>pattern matching</strong> in Ruby.</p>\n"}], "owner": {"reputation": 815, "user_id": 1873549, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ffe48c12d925ecdcfd9c5ae5e46e53a8?s=128&d=identicon&r=PG", "display_name": "Fraser Price", "link": "https://stackoverflow.com/users/1873549/fraser-price"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1009, "favorite_count": 1, "accepted_answer_id": 38874699, "answer_count": 3, "score": 3, "last_activity_date": 1470844870, "creation_date": 1470834847, "question_id": 38874527, "link": "https://stackoverflow.com/questions/38874527/ruby-array-pattern-matching", "title": "Ruby array pattern matching", "body": "<p>I am new to programming in Ruby and have seen that it has some functional capabilities. Was wondering if there is a way to pattern match on arrays; I am looking to accomplish the following:</p>\n\n<pre><code>split_string = str.split(\"_\", 2)\nfst = repo_branch_split.first\nsnd = repo_branch_split.second\n</code></pre>\n\n<p>in a Haskell-like manner:</p>\n\n<pre><code>split_string@(fst : snd) = str.split(\"_\", 2)\n</code></pre>\n\n<p>Is there anything similar in ruby or not?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "cancancan"], "comments": [{"owner": {"reputation": 2188, "user_id": 1489914, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/7PReX.jpg?s=128&g=1", "display_name": "Tall Paul", "link": "https://stackoverflow.com/users/1489914/tall-paul"}, "edited": false, "score": 0, "creation_date": 1470835606, "post_id": 38874433, "comment_id": 65110932, "body": "how do you know which roles they can manage?"}, {"owner": {"reputation": 69, "user_id": 1154796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f9ad233ab33ed43090a9aece758d02a0?s=128&d=identicon&r=PG", "display_name": "gnycl", "link": "https://stackoverflow.com/users/1154796/gnycl"}, "reply_to_user": {"reputation": 2188, "user_id": 1489914, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/7PReX.jpg?s=128&g=1", "display_name": "Tall Paul", "link": "https://stackoverflow.com/users/1489914/tall-paul"}, "edited": false, "score": 1, "creation_date": 1470837505, "post_id": 38874433, "comment_id": 65112355, "body": "@TallPaul roles that users can manage are kept in the <code>app&#47;models&#47;ability.rb</code> class. I&#39;ve updated the question with an example."}, {"owner": {"reputation": 3590, "user_id": 1494245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50a2dcc33b58918f27664b7646d92b7?s=128&d=identicon&r=PG", "display_name": "Sean Huber", "link": "https://stackoverflow.com/users/1494245/sean-huber"}, "edited": false, "score": 0, "creation_date": 1470838389, "post_id": 38874433, "comment_id": 65113082, "body": "Given your edit, you might want to look at the answer to this question: <a href=\"http://stackoverflow.com/questions/9809203/get-a-string-that-represents-a-users-cancan-abilities\" title=\"get a string that represents a users cancan abilities\">stackoverflow.com/questions/9809203/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "is_accepted": false, "score": 0, "last_activity_date": 1470835794, "creation_date": 1470835794, "answer_id": 38874871, "question_id": 38874433, "link": "https://stackoverflow.com/questions/38874433/showing-cancancan-roles-in-dropdown-for-roles-one-can-manage/38874871#38874871", "title": "Showing CanCanCan roles in dropdown for roles one can manage", "body": "<p>Whatever action is being performed in your controller should have some code that sets the <code>@user</code> field and a assembles a collection of roles usable by your view. In your case, it's a matter of deciding in the controller method what roles should be included in the collection being passed to the view.</p>\n\n<p>The simplest approach iterates through your roles, tests them using CanCanCan and then adds them to a filtered collection that your <code>options_for_select</code> can use.</p>\n\n<pre><code>def some_method\n\n  @user = User.find(params[:id])\n  @roles = Array.new\n\n  User::ROLES each do | role |\n    if can? :manage role\n      @roles.push(role)\n    end\n  end\n\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 69, "user_id": 1154796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f9ad233ab33ed43090a9aece758d02a0?s=128&d=identicon&r=PG", "display_name": "gnycl", "link": "https://stackoverflow.com/users/1154796/gnycl"}, "edited": false, "score": 0, "creation_date": 1470837849, "post_id": 38874906, "comment_id": 65112635, "body": "This is perfect but I&#39;ve updated the original question with an issue with this solution."}], "tags": [], "owner": {"reputation": 3590, "user_id": 1494245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50a2dcc33b58918f27664b7646d92b7?s=128&d=identicon&r=PG", "display_name": "Sean Huber", "link": "https://stackoverflow.com/users/1494245/sean-huber"}, "is_accepted": false, "score": 0, "last_activity_date": 1470835889, "creation_date": 1470835889, "answer_id": 38874906, "question_id": 38874433, "link": "https://stackoverflow.com/questions/38874433/showing-cancancan-roles-in-dropdown-for-roles-one-can-manage/38874906#38874906", "title": "Showing CanCanCan roles in dropdown for roles one can manage", "body": "<p>Here is a one line solution:</p>\n\n<pre><code>&lt;%= f.select :role, options_for_select(User::ROLES.map{|r| can?(:manage, r) ? r : nil}.compact, @user.role) %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2188, "user_id": 1489914, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/7PReX.jpg?s=128&g=1", "display_name": "Tall Paul", "link": "https://stackoverflow.com/users/1489914/tall-paul"}, "edited": false, "score": 0, "creation_date": 1470841981, "post_id": 38876854, "comment_id": 65115910, "body": "what does take do?"}, {"owner": {"reputation": 69, "user_id": 1154796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f9ad233ab33ed43090a9aece758d02a0?s=128&d=identicon&r=PG", "display_name": "gnycl", "link": "https://stackoverflow.com/users/1154796/gnycl"}, "reply_to_user": {"reputation": 2188, "user_id": 1489914, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/7PReX.jpg?s=128&g=1", "display_name": "Tall Paul", "link": "https://stackoverflow.com/users/1489914/tall-paul"}, "edited": false, "score": 1, "creation_date": 1470850228, "post_id": 38876854, "comment_id": 65120991, "body": "grabs the passed number of elements from an array. Here I use it to grab it by using the <code>current_user.role</code> as the index. It works because my roles are in ascending order in the <code>User::ROLES</code> array. <a href=\"http://ruby-doc.org/core-2.3.1/Enumerable.html#method-i-take\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.3.1/Enumerable.html#method-i-take</a>"}], "tags": [], "owner": {"reputation": 69, "user_id": 1154796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f9ad233ab33ed43090a9aece758d02a0?s=128&d=identicon&r=PG", "display_name": "gnycl", "link": "https://stackoverflow.com/users/1154796/gnycl"}, "is_accepted": false, "score": 0, "last_activity_date": 1470840745, "creation_date": 1470840745, "answer_id": 38876854, "question_id": 38874433, "link": "https://stackoverflow.com/questions/38874433/showing-cancancan-roles-in-dropdown-for-roles-one-can-manage/38876854#38876854", "title": "Showing CanCanCan roles in dropdown for roles one can manage", "body": "<p>I ended up using <code>take</code> to solve this:</p>\n\n<p><code>&lt;%= f.select :role, options_for_select(User::ROLES.take(User::ROLES.index(current_user.role)), @user.role) %&gt;\n</code></p>\n"}], "owner": {"reputation": 69, "user_id": 1154796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f9ad233ab33ed43090a9aece758d02a0?s=128&d=identicon&r=PG", "display_name": "gnycl", "link": "https://stackoverflow.com/users/1154796/gnycl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 564, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1470840745, "creation_date": 1470834612, "last_edit_date": 1470837813, "question_id": 38874433, "link": "https://stackoverflow.com/questions/38874433/showing-cancancan-roles-in-dropdown-for-roles-one-can-manage", "title": "Showing CanCanCan roles in dropdown for roles one can manage", "body": "<p>I have a dropdown for changing the role of a user in my Rails 4.2 app with CanCanCan. The User::ROLES array of strings holds the different possible roles that a user can have. To display the roles in a dropdown:</p>\n\n<pre><code>&lt;%= f.select :role, options_for_select((User::ROLES), @user.role) %&gt;\n</code></pre>\n\n<p>I want to limit the dropdown options to roles that the currently signed-in user <code>can :manage</code> according to CanCanCan. Roles that the current user does not have <code>:manage</code> permissions on should not be populated in the dropdown. Any guidance is appreciated.</p>\n\n<p>edit: </p>\n\n<p>Sean Huber's answer is perfect if comparing against the string literals. However, I realized the issue is that I define this array in my User model, but I need to be comparing against the roles that are set one level deeper in <code>ability.rb</code>. Here's an example of how permissions on the User model are set in <code>ability.rb</code>:</p>\n\n<p>This makes sense, however I realized it won't really work since it's comparing to the literals in the User::ROLES array.</p>\n\n<p>The code in <code>ability.rb</code> that sets roles access looks like this. I need to check against the specific role specified:</p>\n\n<pre><code>if user.role? :superadmin\n  can :manage, User, role: 'admin'\nend\n</code></pre>\n\n<p>How can I compare against the specific roles that the <code>:superadmin</code> tokenized role has <code>:manage</code> access over instead of the literals in <code>User::ROLES</code>?</p>\n\n<p>The definition of ROLES from User.rb:</p>\n\n<p><code>ROLES = %w[student teacher school district reseller admin superadmin god]</code></p>\n"}, {"tags": ["ruby", "ruby-on-rails-3.2", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 83, "user_id": 5441472, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/svdiV.png?s=128&g=1", "display_name": "P3rishable", "link": "https://stackoverflow.com/users/5441472/p3rishable"}, "is_accepted": false, "score": 0, "last_activity_date": 1470838707, "creation_date": 1470838707, "answer_id": 38876016, "question_id": 38874299, "link": "https://stackoverflow.com/questions/38874299/ruby-could-not-find-valid-gem/38876016#38876016", "title": "ruby could not find valid gem", "body": "<p>You could try to just get it from <a href=\"http://rubygems.org/\" rel=\"nofollow\">http://rubygems.org/</a></p>\n"}, {"tags": [], "owner": {"reputation": 1184, "user_id": 3056720, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/311fc7bcd7da31aa021605e190a3e7ee?s=128&d=identicon&r=PG&f=1", "display_name": "Aeradriel", "link": "https://stackoverflow.com/users/3056720/aeradriel"}, "is_accepted": false, "score": 0, "last_activity_date": 1470839161, "creation_date": 1470839161, "answer_id": 38876204, "question_id": 38874299, "link": "https://stackoverflow.com/questions/38874299/ruby-could-not-find-valid-gem/38876204#38876204", "title": "ruby could not find valid gem", "body": "<p>If you want to use Rails on windows, I suggest you to look at this installer which is pretty great : <a href=\"http://railsinstaller.org/\" rel=\"nofollow\">RailsInstaller</a></p>\n"}], "owner": {"reputation": 1, "user_id": 6700433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c5b7951562a9c71916561724dfcac36?s=128&d=identicon&r=PG&f=1", "display_name": "JimmySo", "link": "https://stackoverflow.com/users/6700433/jimmyso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1553, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1470839161, "creation_date": 1470834291, "last_edit_date": 1470838131, "question_id": 38874299, "link": "https://stackoverflow.com/questions/38874299/ruby-could-not-find-valid-gem", "title": "ruby could not find valid gem", "body": "<p>I have been trying to develop a Ruby on Rails app but cannot.  I have unistalled and reinstalled and it keeps saying cert not found even though I can see the cert on my computer.</p>\n\n<pre><code>C:\\DevKit&gt;gem install json --platform=ruby\nERROR:  Could not find a valid gem 'json' (&gt;= 0), here is why:\n    Unable to download data from https://rubygems.org/ - SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (https://api.rubygems.org/specs.4.8.gz)\nC:\\DevKit&gt;gem install json -- platform=ruby2.2\nERROR:  Could not find a valid gem 'json' (&gt;= 0), here is why:\n    Unable to download data from https://rubygems.org/ - SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (https://api.rubygems.org/specs.4.8.gz)\nC:\\&gt;update_rubygems --no-ri --no-rdoc\nRubyGems 2.3.0 installed\nRubyGems installed the following executables:\n    C:/Ruby22/bin/gem\n\nC:\\&gt;cd devkit\nC:\\DevKit&gt;cd assignment_10\nC:\\DevKit\\Assignment_10&gt;cd C:\\DevKit\\Assignment_10\nC:\\DevKit\\Assignment_10&gt;cd ..\nC:\\DevKit&gt;gem install json --platform=ruby\nERROR:  Could not find a valid gem 'json' (&gt;= 0), here is why:\n    Unable to download data from https://rubygems.org/ - SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (https://api.rubygems.org/specs.4.8.gz)\nC:\\DevKit&gt;gem install bson_ext --platform=ruby\nERROR:  Could not find a valid gem 'bson_ext' (&gt;= 0), here is why:\n    Unable to download data from https://rubygems.org/ - SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (https://api.rubygems.org/specs.4.8.gz)\nC:\\DevKit&gt;\n</code></pre>\n\n<p>Thanks for any help you can provide.</p>\n"}, {"tags": ["css", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1713, "user_id": 2545197, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zIDXo.jpg?s=128&g=1", "display_name": "Abhinay", "link": "https://stackoverflow.com/users/2545197/abhinay"}, "edited": false, "score": 1, "creation_date": 1470834962, "post_id": 38874217, "comment_id": 65110432, "body": "What kind of question is this? &quot;<code>How to get css id based on class value</code>&quot; and then at end this &quot;<code>How to change the box color based on the class value?</code>&quot; first decide what you are trying to ask, then write the same as heading."}, {"owner": {"reputation": 1713, "user_id": 2545197, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zIDXo.jpg?s=128&g=1", "display_name": "Abhinay", "link": "https://stackoverflow.com/users/2545197/abhinay"}, "edited": false, "score": 0, "creation_date": 1470835048, "post_id": 38874217, "comment_id": 65110497, "body": "Please refer this doc: <a href=\"http://stackoverflow.com/help/how-to-ask#help-post-body\">stackoverflow.com/help/how-to-ask#help-post-body</a>"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 3806161, "user_type": "registered", "accept_rate": 17, "profile_image": "https://lh5.googleusercontent.com/-BwGa8B0oAd4/AAAAAAAAAAI/AAAAAAAAAFI/XGP7Lr0uRxU/photo.jpg?sz=128", "display_name": "Mani", "link": "https://stackoverflow.com/users/3806161/mani"}, "edited": false, "score": 0, "creation_date": 1470835090, "post_id": 38874341, "comment_id": 65110541, "body": "yeah, i already tried with that, but the styles are not applying for box."}], "tags": [], "owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "is_accepted": false, "score": 1, "last_activity_date": 1470834744, "last_edit_date": 1470834744, "creation_date": 1470834409, "answer_id": 38874341, "question_id": 38874217, "link": "https://stackoverflow.com/questions/38874217/how-to-change-the-box-color-based-on-the-class-value/38874341#38874341", "title": "How to change the box color based on the class value", "body": "<p>You don't need a helper method for it, <code>article.book_type</code> already return the class for <code>td</code>.</p>\n\n<pre><code>&lt;td id=\"box\" class=\"&lt;%= article.book_type %&gt;\"&gt;&lt;%= article.book_type %&gt;&lt;/td&gt;\n</code></pre>\n\n<p>But your title still unclear for me</p>\n\n<p><em>How to get css id based on class value?</em></p>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1470835076, "creation_date": 1470835076, "answer_id": 38874619, "question_id": 38874217, "link": "https://stackoverflow.com/questions/38874217/how-to-change-the-box-color-based-on-the-class-value/38874619#38874619", "title": "How to change the box color based on the class value", "body": "<p>If I parsed the question properly, you want to modify your css to:</p>\n\n<pre><code>#box .x { color: red }\n</code></pre>\n\n<p>and so on. The above will apply the color to the elements, having <code>class=\"x\"</code> and <code>id=\"box\"</code>.</p>\n\n<p>Or, you might change the ruby to:</p>\n\n<pre><code>&lt;td id=\"box_&lt;%= book_ty(article)%&gt;\"&gt;&lt;%= article.book_type %&gt;&lt;/td&gt;\n</code></pre>\n\n<p>and modify <code>css</code> to:</p>\n\n<pre><code>#box_x { color: red }\n</code></pre>\n\n<p>Or, combine the solutions above.</p>\n"}], "owner": {"reputation": 13, "user_id": 3806161, "user_type": "registered", "accept_rate": 17, "profile_image": "https://lh5.googleusercontent.com/-BwGa8B0oAd4/AAAAAAAAAAI/AAAAAAAAAFI/XGP7Lr0uRxU/photo.jpg?sz=128", "display_name": "Mani", "link": "https://stackoverflow.com/users/3806161/mani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1470835495, "creation_date": 1470834118, "last_edit_date": 1470835495, "question_id": 38874217, "link": "https://stackoverflow.com/questions/38874217/how-to-change-the-box-color-based-on-the-class-value", "title": "How to change the box color based on the class value", "body": "<p>I have a code in a loop like this</p>\n\n<pre><code>&lt;td id = box, class =&lt;%= book_ty(article)%&gt;&gt;&lt;%= article.book_type %&gt;&lt;/td&gt;\n</code></pre>\n\n<p>When the <code>book_ty</code> equal to <code>x</code> the box will become red color, if it is <code>y</code> the box will be orange color. Now the colors are directly applied to <code>article.book_type</code> I want apply that colors to <code>id</code></p>\n\n<p>I define a method in <code>articles.helper.rb</code> i.e</p>\n\n<pre><code>def book_ty(article)\n case article.book_type\n  when \"x\"\n     \"x\"\n  when \"y\"\n     \"y\"\n  when \"z\"\n     \"z\"\nend\nend\n</code></pre>\n\n<p>in <code>article.scss</code></p>\n\n<pre><code>.x {\n  color: red;\n}\n.y{\n  color: orange;\n}\n.z{\n  color: green;\n}\n\n#box {\n width: 50px;\n height: 50px;\n display: inline;\n margin-right: 10px;\n}\n</code></pre>\n\n<p>How to change the box color based on the class value?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "jenkins", "capybara", "grape-api"], "answers": [{"comments": [{"owner": {"reputation": 901, "user_id": 3219759, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/iOGnN.jpg?s=128&g=1", "display_name": "Ruff9", "link": "https://stackoverflow.com/users/3219759/ruff9"}, "edited": false, "score": 0, "creation_date": 1470836119, "post_id": 38874766, "comment_id": 65111304, "body": "the problem I want to adress is that if I change the api shape in one app, it can result in an error 500 in the other app. I want my system to check if the two apps are synchronized. I will update the question to reflect this."}, {"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "reply_to_user": {"reputation": 901, "user_id": 3219759, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/iOGnN.jpg?s=128&g=1", "display_name": "Ruff9", "link": "https://stackoverflow.com/users/3219759/ruff9"}, "edited": false, "score": 0, "creation_date": 1470839256, "post_id": 38874766, "comment_id": 65113855, "body": "In this case you have once again multiple options. For instance you can use one repo for booth apps and trigger multiple jobs. Or you can use the Pipeline Plugin to triger job 1 when job 2 is succesfull or vice versa. Or you can use conventions which API changes are allowed and which need to increment version number of the API. Furthor more I would run all jobs once or twice a day, to ensure every thing is fine. This is good idea because external API&#39;s from other vendors can change too without noticing."}], "tags": [], "owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "is_accepted": false, "score": 0, "last_activity_date": 1481000279, "last_edit_date": 1481000279, "creation_date": 1470835515, "answer_id": 38874766, "question_id": 38874055, "link": "https://stackoverflow.com/questions/38874055/capybara-integration-test-for-an-api-between-two-rails-apps/38874766#38874766", "title": "Capybara : Integration test for an API between two rails apps", "body": "<p>I would treat them as they are, independent apps. Setup a jenkins job for each app. Setup a sandbox for each app and let your integration tests use the sandbox. You can also use the sandbox for your development environment. No need to start app 2 when you are locally only working on app 1. When you push to repo 1 lets run only jenkins for app 1. If it succeeds, deploy only app 1.</p>\n\n<p>If you really really need all this done in one job, then think about enginges. Create both apps as an engine and for integration tests mount them into one rails app.</p>\n"}], "owner": {"reputation": 901, "user_id": 3219759, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/iOGnN.jpg?s=128&g=1", "display_name": "Ruff9", "link": "https://stackoverflow.com/users/3219759/ruff9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 300, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1481000279, "creation_date": 1470833688, "last_edit_date": 1495540904, "question_id": 38874055, "link": "https://stackoverflow.com/questions/38874055/capybara-integration-test-for-an-api-between-two-rails-apps", "title": "Capybara : Integration test for an API between two rails apps", "body": "<p>We are currently developping two rails apps that communicates via an API (made with Grape). This morning I worked on the 'server' app, and the changes I made results in an error 5OO on the staging of the 'client' app. </p>\n\n<p>To adress that, I want to create a Jenkins job that check the synchronization between the two apps. The process could be this one:</p>\n\n<ol>\n<li>A push is detected on the app A (or B)</li>\n<li>Build both apps</li>\n<li>Run an integration test through both apps</li>\n<li>Deploy both apps</li>\n</ol>\n\n<p>I'm looking for the best way to do that. I found <a href=\"https://stackoverflow.com/questions/16090235/how-to-integration-test-two-rails-apps\">that question</a> and <a href=\"https://stackoverflow.com/questions/10486677/test-integration-between-two-rails-apps\">this one</a>, but there wasn't that much information in the answers.</p>\n\n<p>One of the main problems is the integration test itself: how can I test through two apps with capybara ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "metaprogramming"], "answers": [{"comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1470833072, "post_id": 38873690, "comment_id": 65108966, "body": "Yeah, it&#39;s little bit unclear, because according to the documentation for <a href=\"http://ruby-doc.org/core-2.2.0/Module.html#method-i-define_method\" rel=\"nofollow noreferrer\"><code>define_method</code></a>, it use a symbol as argument."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1470833313, "post_id": 38873690, "comment_id": 65109176, "body": "True. But the symbol can end with <code>?</code> as well."}, {"owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 1, "creation_date": 1470833574, "post_id": 38873690, "comment_id": 65109385, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 Yes, the docs sometimes use symbols where they are not strictly necessary. If you look at the C code of <code>define_method</code>, you&#39;ll see that <code>rb_to_id</code> is called on the name, which turns strings, fixnums and symbols into the MRI <code>ID</code> type. At the very end <code>ID2SYM(id)</code> is called, which turns the <code>ID</code> value into a Ruby symbol (the return value of <code>define_methdod</code>)."}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": false, "score": 3, "last_activity_date": 1470833338, "last_edit_date": 1470833338, "creation_date": 1470832735, "answer_id": 38873690, "question_id": 38873640, "link": "https://stackoverflow.com/questions/38873640/how-can-i-write-method-with-question-mark-using-define-method/38873690#38873690", "title": "How can I write method with question mark using define_method", "body": "<p>It's pretty straightforward to define this kind of method with <code>define_method</code>. It's enough to pass symbol or string that ends with the question mark.</p>\n\n<pre><code>define_method(:admin?) do\n  # code\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "is_accepted": true, "score": 5, "last_activity_date": 1470832922, "creation_date": 1470832922, "answer_id": 38873759, "question_id": 38873640, "link": "https://stackoverflow.com/questions/38873640/how-can-i-write-method-with-question-mark-using-define-method/38873759#38873759", "title": "How can I write method with question mark using define_method", "body": "<p>What you want is this:</p>\n\n<pre><code>define_method(\"#{roleVal}?\") { ... }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1470833101, "post_id": 38873823, "comment_id": 65108991, "body": "Why you need <code>to_sym</code> here?"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1470833340, "post_id": 38873823, "comment_id": 65109195, "body": "It&#39;s the same, and it&#39;s a bad for readability use <code>do ... end</code> in one line."}], "tags": [], "owner": {"reputation": 2343, "user_id": 6270554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PqRWJ.jpg?s=128&g=1", "display_name": "Hardik Upadhyay", "link": "https://stackoverflow.com/users/6270554/hardik-upadhyay"}, "is_accepted": false, "score": 1, "last_activity_date": 1470833106, "last_edit_date": 1470833106, "creation_date": 1470833079, "answer_id": 38873823, "question_id": 38873640, "link": "https://stackoverflow.com/questions/38873640/how-can-i-write-method-with-question-mark-using-define-method/38873823#38873823", "title": "How can I write method with question mark using define_method", "body": "<p>you can do as below.</p>\n\n<pre><code>class User\n  TYPES = %w(admin normal)\n  User::TYPES.each do |roleVal|\n    define_method(\"#{roleVal}?\") do self.role == roleVal end\n  end\nend\n</code></pre>\n\n<p>Hope, this will help you.</p>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1470833365, "creation_date": 1470833365, "answer_id": 38873936, "question_id": 38873640, "link": "https://stackoverflow.com/questions/38873640/how-can-i-write-method-with-question-mark-using-define-method/38873936#38873936", "title": "How can I write method with question mark using define_method", "body": "<p>There is nothing special in the <em>ending question mark</em> within symbols:</p>\n\n<pre><code>class User\n  TYPES = %i(admin? normal?)\n  User::TYPES.each do |roleVal|\n    define_method(roleVal) { self.role == roleVal.to_s[0...-1] }\n  end \nend\n</code></pre>\n"}], "owner": {"reputation": 2478, "user_id": 2791480, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/lgiv3.jpg?s=128&g=1", "display_name": "Mohamed Yakout", "link": "https://stackoverflow.com/users/2791480/mohamed-yakout"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 521, "favorite_count": 1, "accepted_answer_id": 38873759, "answer_count": 4, "score": 2, "last_activity_date": 1470833365, "creation_date": 1470832616, "question_id": 38873640, "link": "https://stackoverflow.com/questions/38873640/how-can-i-write-method-with-question-mark-using-define-method", "title": "How can I write method with question mark using define_method", "body": "<p>I have user model that has many types (admin, normal, ..). And I make loop to define methods like <code>admin?</code> or <code>normal?</code> as the following: </p>\n\n<pre><code>class User\n  TYPES = %w(admin normal)\n  User::TYPES.each do |roleVal|\n    define_method(roleVal.to_sym) { self.role == roleVal }\n  end\nend\n</code></pre>\n\n<p>The above code is working for example <code>User.first.admin</code>, But I need to call it as <code>User.first.admin?</code>. </p>\n\n<p>What's the syntax of <a href=\"http://apidock.com/ruby/Module/define_method\" rel=\"nofollow\">define_method</a> with question mark ? \nAnd if that's not possible using <code>define_method</code>, How to create methods with question mark in meta-programming ? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "overlap"], "comments": [{"owner": {"reputation": 8114, "user_id": 5962802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zAfR.png?s=128&g=1", "display_name": "IVO GELOV", "link": "https://stackoverflow.com/users/5962802/ivo-gelov"}, "edited": false, "score": 2, "creation_date": 1470830344, "post_id": 38872555, "comment_id": 65107094, "body": "Could you try ` scope :overlapping_activity, -&gt;(activity) { where(&quot;(start_on::timestamp, end_on::timestamp) OVERLAPS (timestamp :start_on, timestamp :end_on)&quot;, :start_on =&gt; activity.start_on, :end_on =&gt; activity.end_on) }` ?"}, {"owner": {"reputation": 897, "user_id": 4645227, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/50d116f701889e0977127909fc1ce8d5?s=128&d=identicon&r=PG&f=1", "display_name": "Prezes \u0141ukasz", "link": "https://stackoverflow.com/users/4645227/prezes-%c5%81ukasz"}, "reply_to_user": {"reputation": 8114, "user_id": 5962802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zAfR.png?s=128&g=1", "display_name": "IVO GELOV", "link": "https://stackoverflow.com/users/5962802/ivo-gelov"}, "edited": false, "score": 0, "creation_date": 1470830555, "post_id": 38872555, "comment_id": 65107223, "body": "@IVOGELOV now it&#39;s error: <code>ERROR:  cannot cast type time without time zone to timestamp without time zone</code>"}, {"owner": {"reputation": 8114, "user_id": 5962802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zAfR.png?s=128&g=1", "display_name": "IVO GELOV", "link": "https://stackoverflow.com/users/5962802/ivo-gelov"}, "edited": false, "score": 0, "creation_date": 1470831883, "post_id": 38872555, "comment_id": 65108144, "body": "Are you sure that <code>activity.start_on</code> and <code>activity.end_on</code> include a date and not only the time ?"}, {"owner": {"reputation": 897, "user_id": 4645227, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/50d116f701889e0977127909fc1ce8d5?s=128&d=identicon&r=PG&f=1", "display_name": "Prezes \u0141ukasz", "link": "https://stackoverflow.com/users/4645227/prezes-%c5%81ukasz"}, "reply_to_user": {"reputation": 8114, "user_id": 5962802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zAfR.png?s=128&g=1", "display_name": "IVO GELOV", "link": "https://stackoverflow.com/users/5962802/ivo-gelov"}, "edited": false, "score": 0, "creation_date": 1470832243, "post_id": 38872555, "comment_id": 65108387, "body": "@IVOGELOV as I write in title of post there are only times. In PostgreSQL database columns are time without time zone"}, {"owner": {"reputation": 8114, "user_id": 5962802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zAfR.png?s=128&g=1", "display_name": "IVO GELOV", "link": "https://stackoverflow.com/users/5962802/ivo-gelov"}, "edited": false, "score": 2, "creation_date": 1470837055, "post_id": 38872555, "comment_id": 65112022, "body": "The <code>OVERLAPS</code> requires that all 4 arguments are of type TIMESTAMP - date PLUS time. If you can not convert your times to timestamp (adding any date, but the same date to all 4 arguments) - then your only option is to convert all 4 times into seconds (using <code>extract (epoch from t::interval)</code> and use this formula to check for overlapping <code>GREATEST(0,end_1 - start_1 - GREATEST(0,end_1 - end_2) - GREATEST(0,start_2 - start_1))</code>"}, {"owner": {"reputation": 897, "user_id": 4645227, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/50d116f701889e0977127909fc1ce8d5?s=128&d=identicon&r=PG&f=1", "display_name": "Prezes \u0141ukasz", "link": "https://stackoverflow.com/users/4645227/prezes-%c5%81ukasz"}, "reply_to_user": {"reputation": 8114, "user_id": 5962802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zAfR.png?s=128&g=1", "display_name": "IVO GELOV", "link": "https://stackoverflow.com/users/5962802/ivo-gelov"}, "edited": false, "score": 0, "creation_date": 1470839750, "post_id": 38872555, "comment_id": 65114247, "body": "@IVOGELOV could you write solution, because I don&#39;t have idea how to use your tip..."}, {"owner": {"reputation": 897, "user_id": 4645227, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/50d116f701889e0977127909fc1ce8d5?s=128&d=identicon&r=PG&f=1", "display_name": "Prezes \u0141ukasz", "link": "https://stackoverflow.com/users/4645227/prezes-%c5%81ukasz"}, "reply_to_user": {"reputation": 8114, "user_id": 5962802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zAfR.png?s=128&g=1", "display_name": "IVO GELOV", "link": "https://stackoverflow.com/users/5962802/ivo-gelov"}, "edited": false, "score": 0, "creation_date": 1470840060, "post_id": 38872555, "comment_id": 65114514, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/120611/discussion-between-lukasz-korol-and-ivo-gelov\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 897, "user_id": 4645227, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/50d116f701889e0977127909fc1ce8d5?s=128&d=identicon&r=PG&f=1", "display_name": "Prezes \u0141ukasz", "link": "https://stackoverflow.com/users/4645227/prezes-%c5%81ukasz"}, "is_accepted": true, "score": 1, "last_activity_date": 1470845588, "creation_date": 1470845588, "answer_id": 38878629, "question_id": 38872555, "link": "https://stackoverflow.com/questions/38872555/checking-overlaps-between-times/38878629#38878629", "title": "Checking overlaps between times", "body": "<p>I achieved what I wanted by this method:</p>\n\n<pre><code>validate :not_overlapping_activity\n\n    def not_overlapping_activity\n      overlapping_activity = Activity.where(day_of_week: day_of_week)\n                                     .where(pool_zone: pool_zone)\n      overlapping_activity.each do |oa|\n        if (start_on...end_on).overlaps?(oa.start_on...oa.end_on)\n          errors.add(:base, 'In this period of time there is some activity.')\n        end\n      end\n    end\n</code></pre>\n\n<p>If someone has better solution please write. I want to be better and more clever :)</p>\n"}], "owner": {"reputation": 897, "user_id": 4645227, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/50d116f701889e0977127909fc1ce8d5?s=128&d=identicon&r=PG&f=1", "display_name": "Prezes \u0141ukasz", "link": "https://stackoverflow.com/users/4645227/prezes-%c5%81ukasz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "accepted_answer_id": 38878629, "answer_count": 1, "score": 0, "last_activity_date": 1470845588, "creation_date": 1470829532, "last_edit_date": 1495535320, "question_id": 38872555, "link": "https://stackoverflow.com/questions/38872555/checking-overlaps-between-times", "title": "Checking overlaps between times", "body": "<p>I try to create validation that checks times overlapping.</p>\n\n<pre><code>  scope :overlapping_activity, -&gt;(activity) { where(\"(start_on, end_on) OVERLAPS (?, ?)\",\n                                              activity.start_on, activity.end_on }\n  validate :not_overlapping_activity\n\n  def not_overlapping_activity\n    if Activity.overlapping_activity(self).any?\n      errors.add(:base, \"Zaj\u0119cie w tym okresie koliduje z innymi.\")\n    end\n  end\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>ERROR:  function pg_catalog.overlaps(time without time zone, time without time zone, unknown, unknown) is not unique\nLINE 1: ...NT(*) FROM \"activities\" WHERE ((start_on, end_on) OVERLAPS (...\n</code></pre>\n\n<p>I found this topic: <a href=\"https://stackoverflow.com/questions/8466903/rails-3-1-querying-postgres-for-records-within-a-time-range\">Rails 3.1: Querying Postgres for records within a time range</a>, but I cannot use it in my solution. While I try add timestamps in scope, it shows another syntax errors. Could someone show me how to properly resolve my issue?</p>\n\n<p>How I tried use timestamp:</p>\n\n<pre><code>  scope :overlapping_activity, -&gt;(activity) { where(\"(start_on::timestamp, end_on::timestamp) OVERLAPS (?, ?)\",\n                                              timestamp activity.start_on, timestamp activity.end_on) }\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "stripe-payments"], "answers": [{"comments": [{"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1470830751, "post_id": 38872597, "comment_id": 65107353, "body": "Thanks. I tried this previously but what I find is that the app takes me through the Stripe payment process THEN tells me the event is fully booked. I need it to tell me the event is fully booked before it tries to take my money."}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1470831122, "post_id": 38872597, "comment_id": 65107619, "body": "Also, I&#39;m still getting same error. This hasn&#39;t worked."}], "tags": [], "owner": {"reputation": 1254, "user_id": 4576274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F5Wnd.jpg?s=128&g=1", "display_name": "Pramod", "link": "https://stackoverflow.com/users/4576274/pramod"}, "is_accepted": false, "score": 0, "last_activity_date": 1470829680, "creation_date": 1470829680, "answer_id": 38872597, "question_id": 38872312, "link": "https://stackoverflow.com/questions/38872312/rails-stripe-missing-template-error-in-bookings-controller/38872597#38872597", "title": "Rails / Stripe - missing template error in bookings controller", "body": "<p>You should not save the booking and then check for count. Instead, you can this.</p>\n\n<pre><code>    def create\n    # actually process the booking\n    @event = Event.find(params[:event_id])\n    @booking = @event.bookings.new(booking_params)\n    @booking.user = current_user\n    #@total_amount = @booking.quantity.to_f * @event.price.to_f\n\n    Booking.transaction do\n        if @event.bookings.count == @event.number_of_spaces\n            flash[:warning] = \"Sorry, this event is fully booked.\"\n            raise ActiveRecord::Rollback, \"event is fully booked\"\n        else\n            if @booking.save\n\n                # CHARGE THE USER WHO'S BOOKED\n                # #{} == puts a variable into a string\n                Stripe::Charge.create(amount: @event.price_pennies, currency: \"gbp\",\n                    card: @booking.stripe_token, description: \"Booking number #{@booking.id}\")\n\n                flash[:success] = \"Your place on our event has been booked\"\n                redirect_to event_path(@event)\n            else\n                flash[:error] = \"Payment unsuccessful\"\n                render \"new\"\n            end\n\n            if @event.is_free?\n\n                @booking.save!\n                flash[:success] = \"Your place on our event has been booked\"\n                redirect_to event_path(@event)\n            end\n\n        end \n    end\n\n\nend\n</code></pre>\n"}], "owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 285, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470829680, "creation_date": 1470828856, "question_id": 38872312, "link": "https://stackoverflow.com/questions/38872312/rails-stripe-missing-template-error-in-bookings-controller", "title": "Rails / Stripe - missing template error in bookings controller", "body": "<p>I'm building an events app using Rails and I'm attempting to create code which first checks that spaces are available when a user tries to book and, if so, then takes them through to book the event.\nI've hit the following error when trying to make a booking - </p>\n\n<p>Missing template bookings/create</p>\n\n<pre><code>def find(*args)\n  find_all(*args).first || raise(MissingTemplate.new(self, *args))\nend\n\ndef find_all(path, prefixes = [], *args)\n</code></pre>\n\n<p>I'm not sure this has anything to do with the over booking situation as there should be spaces available.It's more to do with the Stripe code, I think. Here's the relevant code -</p>\n\n<p>bookings_controller.rb</p>\n\n<pre><code>  class BookingsController &lt; ApplicationController\n\nbefore_action :authenticate_user!\n\ndef new\n    # booking form\n    # I need to find the event that we're making a booking on\n    @event = Event.find(params[:event_id])\n    # and because the event \"has_many :bookings\"\n    @booking = @event.bookings.new\n    # which person is booking the event?\n    @booking.user = current_user\n    #@booking.quantity = @booking.quantity\n    #@total_amount = @booking_quantity.to_f * @event_price.to_f\n\nend\n\ndef create\n    # actually process the booking\n    @event = Event.find(params[:event_id])\n    @booking = @event.bookings.new(booking_params)\n    @booking.user = current_user\n    #@total_amount = @booking.quantity.to_f * @event.price.to_f\n\n    Booking.transaction do\n        @booking.save!\n        @event.reload\n        if @event.bookings.count &gt; @event.number_of_spaces\n            flash[:warning] = \"Sorry, this event is fully booked.\"\n            raise ActiveRecord::Rollback, \"event is fully booked\"\n        else\n            if @booking.save\n\n                # CHARGE THE USER WHO'S BOOKED\n                # #{} == puts a variable into a string\n                Stripe::Charge.create(amount: @event.price_pennies, currency: \"gbp\",\n                    card: @booking.stripe_token, description: \"Booking number #{@booking.id}\")\n\n                flash[:success] = \"Your place on our event has been booked\"\n                redirect_to event_path(@event)\n            else\n                flash[:error] = \"Payment unsuccessful\"\n                render \"new\"\n            end\n\n            if @event.is_free?\n\n                @booking.save!\n                flash[:success] = \"Your place on our event has been booked\"\n                redirect_to event_path(@event)\n            end\n\n        end \n    end\n\n\nend\n\n\n#def total_amount\n    #@total_amount = @booking.quantity * @event.price\n#end\n\nprivate\n\ndef booking_params\n    params.require(:booking).permit(:stripe_token, :quantity)\nend\n\n\n\nend\n</code></pre>\n\n<p>new.html.erb (bookings) -</p>\n\n<pre><code>    &lt;div class=\"col-md-6 col-md-offset-3\" id=\"eventshow\"&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"panel panel-default\"&gt;\n        &lt;div class=\"panel-heading\"&gt;\n            &lt;h2&gt;Confirm Your Booking&lt;/h2&gt;\n        &lt;/div&gt;\n\n            &lt;div class=\"panel-body\"&gt;    \n\n                &lt;p&gt;Total Amount&lt;%= @event.price %&gt;&lt;/p&gt;\n                &lt;%= simple_form_for [@event, @booking], id: \"new_booking\" do |form| %&gt;\n\n\n\n\n\n                 &lt;span class=\"payment-errors\"&gt;&lt;/span&gt;\n\n                &lt;div class=\"form-row\"&gt;\n                    &lt;label&gt;\n                      &lt;span&gt;Card Number&lt;/span&gt;\n                      &lt;input type=\"text\" size=\"20\" data-stripe=\"number\"/&gt;\n                    &lt;/label&gt;\n                &lt;/div&gt;\n\n                &lt;div class=\"form-row\"&gt;\n                  &lt;label&gt;\n                  &lt;span&gt;CVC&lt;/span&gt;\n                  &lt;input type=\"text\" size=\"4\" data-stripe=\"cvc\"/&gt;\n                  &lt;/label&gt;\n                &lt;/div&gt;\n\n                &lt;div class=\"form-row\"&gt;\n                    &lt;label&gt;\n                        &lt;span&gt;Expiration (MM/YYYY)&lt;/span&gt;\n                        &lt;input type=\"text\" size=\"2\" data-stripe=\"exp-month\"/&gt;\n                    &lt;/label&gt;\n                    &lt;span&gt; / &lt;/span&gt;\n                    &lt;input type=\"text\" size=\"4\" data-stripe=\"exp-year\"/&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"panel-footer\"&gt;    \n\n               &lt;%= form.button :submit %&gt;\n\n\n            &lt;/div&gt; \n\n&lt;% end %&gt;\n&lt;% end %&gt;\n\n      &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;    \n\n&lt;script type=\"text/javascript\" src=\"https://js.stripe.com/v2/\"&gt;&lt;/script&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n  Stripe.setPublishableKey('&lt;%= STRIPE_PUBLIC_KEY %&gt;');\n  var stripeResponseHandler = function(status, response) {\n    var $form = $('#new_booking');\n\n    if (response.error) {\n    // Show the errors on the form\n    $form.find('.payment-errors').text(response.error.message);\n    $form.find('input[type=submit]').prop('disabled', false);\n    } else {\n    // token contains id, last4, and card type\n    var token = response.id;\n    // Insert the token into the form so it gets submitted to the server\n    $form.append($('&lt;input type=\"hidden\" name=\"booking[stripe_token]\"     /&gt;').val(token));\n    // and submit\n    $form.get(0).submit();\n    }\n  };\n\n  // jQuery(function($)  { - changed to the line below\n  $(document).on(\"ready page:load\", function () {\n\n    $('#new_booking').submit(function(event) {\n      var $form = $(this);\n\n      // Disable the submit button to prevent repeated clicks\n      $form.find('input[type=submit]').prop('disabled', true);\n\n      Stripe.card.createToken($form, stripeResponseHandler);\n\n      // Prevent the form from submitting with the default action\n      return false;\n    });\n  });\n&lt;/script&gt;\n</code></pre>\n"}, {"tags": ["ruby", "inheritance", "sinatra"], "comments": [{"owner": {"reputation": 1609, "user_id": 3241907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea2601af49d5eca9004032bc36d918b?s=128&d=identicon&r=PG&f=1", "display_name": "SunnyMagadan", "link": "https://stackoverflow.com/users/3241907/sunnymagadan"}, "edited": false, "score": 0, "creation_date": 1470827439, "post_id": 38871729, "comment_id": 65105134, "body": "Official documentation has everything you need. <a href=\"http://www.sinatrarb.com/intro.html\" rel=\"nofollow noreferrer\">sinatrarb.com/intro.html</a> Routes section contains examples with different http verbs."}, {"owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "reply_to_user": {"reputation": 1609, "user_id": 3241907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea2601af49d5eca9004032bc36d918b?s=128&d=identicon&r=PG&f=1", "display_name": "SunnyMagadan", "link": "https://stackoverflow.com/users/3241907/sunnymagadan"}, "edited": false, "score": 0, "creation_date": 1470827495, "post_id": 38871729, "comment_id": 65105166, "body": "@SunnyMagadan I&#39;ve clarified my question"}], "answers": [{"comments": [{"owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1470828543, "post_id": 38872147, "comment_id": 65105876, "body": "So the http verb methods are part of a class that main extends?"}, {"owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1470828807, "post_id": 38872147, "comment_id": 65106028, "body": "Also, thanks for the tutorial link. I&#39;d actually already completed it and had some questions about it (if you&#39;d be interested in answering) <a href=\"http://stackoverflow.com/questions/38357195/how-does-sinatra-start-the-server\">here</a>."}, {"owner": {"reputation": 1609, "user_id": 3241907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea2601af49d5eca9004032bc36d918b?s=128&d=identicon&r=PG&f=1", "display_name": "SunnyMagadan", "link": "https://stackoverflow.com/users/3241907/sunnymagadan"}, "reply_to_user": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 1, "creation_date": 1470828831, "post_id": 38872147, "comment_id": 65106043, "body": "Yes. These http verbs methods are defined at Sinatra::Application and Sinatra::Delegator just allows to use them from global context by injecting them into Object."}], "tags": [], "owner": {"reputation": 1609, "user_id": 3241907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea2601af49d5eca9004032bc36d918b?s=128&d=identicon&r=PG&f=1", "display_name": "SunnyMagadan", "link": "https://stackoverflow.com/users/3241907/sunnymagadan"}, "is_accepted": false, "score": 1, "last_activity_date": 1470828355, "creation_date": 1470828355, "answer_id": 38872147, "question_id": 38871729, "link": "https://stackoverflow.com/questions/38871729/how-can-i-use-the-sinatra-http-verb-methods/38872147#38872147", "title": "How can I use the sinatra http verb methods?", "body": "<p>It extends global context (<code>Object</code>) with a <code>Sinatra::Delegator</code> module which delegates appropriate methods for routes definition to Sinatra Application.\n<a href=\"https://github.com/sinatra/sinatra/blob/4797c022c96f7e023a365d5852c89fde0e08fa3e/lib/sinatra/main.rb#L31\" rel=\"nofollow\">https://github.com/sinatra/sinatra/blob/4797c022c96f7e023a365d5852c89fde0e08fa3e/lib/sinatra/main.rb#L31</a></p>\n\n<p><a href=\"https://github.com/sinatra/sinatra/blob/4797c022c96f7e023a365d5852c89fde0e08fa3e/lib/sinatra/base.rb#L1925-L1949\" rel=\"nofollow\">https://github.com/sinatra/sinatra/blob/4797c022c96f7e023a365d5852c89fde0e08fa3e/lib/sinatra/base.rb#L1925-L1949</a></p>\n\n<p>Here is a good example of building sinatra-like application: <a href=\"https://robots.thoughtbot.com/lets-build-a-sinatra\" rel=\"nofollow\">https://robots.thoughtbot.com/lets-build-a-sinatra</a>\nAbove tutorial uses the same delegation approach as Sinatra.</p>\n"}], "owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470828355, "creation_date": 1470827259, "last_edit_date": 1470827955, "question_id": 38871729, "link": "https://stackoverflow.com/questions/38871729/how-can-i-use-the-sinatra-http-verb-methods", "title": "How can I use the sinatra http verb methods?", "body": "<p>I know how the <a href=\"https://github.com/sinatra/sinatra/blob/master/lib/sinatra/base.rb#L1398\" rel=\"nofollow\">http verb methods</a> (get, post, puts, etc.) are defined. What I don't understand is how can I use the http verb methods in my app file, even though they are not added to <code>Object</code>?</p>\n\n<p>I understand how they are used, I'm just trying to understand how sinatra works under the hood.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1470837090, "post_id": 38871586, "comment_id": 65112046, "body": "You want to access the database directly, is that it? Why wouldn&#39;t you just instantiate a new instance of Admin and then save it? The table name shouldn&#39;t be relevant here."}, {"owner": {"reputation": 573, "user_id": 4614833, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-JRqaVEfd58g/AAAAAAAAAAI/AAAAAAAAACg/9HaGl-eBDUw/photo.jpg?sz=128", "display_name": "Sinscary", "link": "https://stackoverflow.com/users/4614833/sinscary"}, "reply_to_user": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1470879540, "post_id": 38871586, "comment_id": 65132538, "body": "It will only work if my model name is <code>admin</code>. But model name could be anything. Anyways, as of now requirements are changed by the client, So its not needed now bt thanks for reply."}], "answers": [{"comments": [{"owner": {"reputation": 573, "user_id": 4614833, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-JRqaVEfd58g/AAAAAAAAAAI/AAAAAAAAACg/9HaGl-eBDUw/photo.jpg?sz=128", "display_name": "Sinscary", "link": "https://stackoverflow.com/users/4614833/sinscary"}, "edited": false, "score": 0, "creation_date": 1470828699, "post_id": 38872016, "comment_id": 65105966, "body": "the problem is that <code>table_name</code> is not known. <code>admins</code> was for example. It could be <code>users</code>, <code>employees</code>, so is there a way to set table name in rails engine."}, {"owner": {"reputation": 693, "user_id": 2282559, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/ZSiw7.jpg?s=128&g=1", "display_name": "Abid Iqbal", "link": "https://stackoverflow.com/users/2282559/abid-iqbal"}, "reply_to_user": {"reputation": 573, "user_id": 4614833, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-JRqaVEfd58g/AAAAAAAAAAI/AAAAAAAAACg/9HaGl-eBDUw/photo.jpg?sz=128", "display_name": "Sinscary", "link": "https://stackoverflow.com/users/4614833/sinscary"}, "edited": false, "score": 0, "creation_date": 1470828891, "post_id": 38872016, "comment_id": 65106096, "body": "If you are trying to get table name directly from the model name then try User.table_name"}, {"owner": {"reputation": 573, "user_id": 4614833, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-JRqaVEfd58g/AAAAAAAAAAI/AAAAAAAAACg/9HaGl-eBDUw/photo.jpg?sz=128", "display_name": "Sinscary", "link": "https://stackoverflow.com/users/4614833/sinscary"}, "edited": false, "score": 0, "creation_date": 1470829105, "post_id": 38872016, "comment_id": 65106267, "body": "But how will my engine know that model name is <code>User</code> in app, it could be <code>Admin</code> or anything."}, {"owner": {"reputation": 693, "user_id": 2282559, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/ZSiw7.jpg?s=128&g=1", "display_name": "Abid Iqbal", "link": "https://stackoverflow.com/users/2282559/abid-iqbal"}, "reply_to_user": {"reputation": 573, "user_id": 4614833, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-JRqaVEfd58g/AAAAAAAAAAI/AAAAAAAAACg/9HaGl-eBDUw/photo.jpg?sz=128", "display_name": "Sinscary", "link": "https://stackoverflow.com/users/4614833/sinscary"}, "edited": false, "score": 0, "creation_date": 1470829403, "post_id": 38872016, "comment_id": 65106480, "body": "Share some code that you have written for the engine."}, {"owner": {"reputation": 573, "user_id": 4614833, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-JRqaVEfd58g/AAAAAAAAAAI/AAAAAAAAACg/9HaGl-eBDUw/photo.jpg?sz=128", "display_name": "Sinscary", "link": "https://stackoverflow.com/users/4614833/sinscary"}, "edited": false, "score": 0, "creation_date": 1470830131, "post_id": 38872016, "comment_id": 65106959, "body": "Added the code. Here its hard to set <code>self.table_name</code> everytime."}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1470834319, "post_id": 38872016, "comment_id": 65109935, "body": "One question: Couldn&#39;t you get the name from the spreadsheet some way? Like the excel filename being the same name you want for the table? Or the name of the entity represented in that spreadsheet being part of the data in the spreadsheet, like in a certain row/col position you could read? Then you could have a <code>set_table_name</code> method in your model, being called after you grad this information but before storing the spreadsheet&#39;s data to a certain table?"}, {"owner": {"reputation": 573, "user_id": 4614833, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-JRqaVEfd58g/AAAAAAAAAAI/AAAAAAAAACg/9HaGl-eBDUw/photo.jpg?sz=128", "display_name": "Sinscary", "link": "https://stackoverflow.com/users/4614833/sinscary"}, "edited": false, "score": 1, "creation_date": 1470835821, "post_id": 38872016, "comment_id": 65111094, "body": "No i can&#39;t because different users can have different file name, diff columns, order of columns can be different. And we can&#39;t put a constraint for filename. Anyways thanks for suggestion."}], "tags": [], "owner": {"reputation": 693, "user_id": 2282559, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/ZSiw7.jpg?s=128&g=1", "display_name": "Abid Iqbal", "link": "https://stackoverflow.com/users/2282559/abid-iqbal"}, "is_accepted": false, "score": 1, "last_activity_date": 1470828062, "last_edit_date": 1470828062, "creation_date": 1470827983, "answer_id": 38872016, "question_id": 38871586, "link": "https://stackoverflow.com/questions/38871586/how-do-i-access-a-models-table-name-in-my-rails-engine/38872016#38872016", "title": "How do I access a model&#39;s table name in my rails engine", "body": "<p>Try this one below:</p>\n\n<pre><code> self.class.table_name\n</code></pre>\n"}], "owner": {"reputation": 573, "user_id": 4614833, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-JRqaVEfd58g/AAAAAAAAAAI/AAAAAAAAACg/9HaGl-eBDUw/photo.jpg?sz=128", "display_name": "Sinscary", "link": "https://stackoverflow.com/users/4614833/sinscary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 583, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1470835890, "creation_date": 1470826955, "last_edit_date": 1495541696, "question_id": 38871586, "link": "https://stackoverflow.com/questions/38871586/how-do-i-access-a-models-table-name-in-my-rails-engine", "title": "How do I access a model&#39;s table name in my rails engine", "body": "<p>I am working on a engine which validates an Excel file and then saves it to a database. But my engine is not providing any migration. Table to save data will be provided by the app.</p>\n\n<p>Now my problem is, <strong>how do I access the table name in my engine's model where data needs to be saved?</strong></p>\n\n<p>For example, I have a model <code>upload.rb</code> and app provides table <code>admins</code> where I want to save data. </p>\n\n<p>I have checked <a href=\"https://stackoverflow.com/questions/4613574/how-do-i-explicitly-specify-a-models-table-name-mapping-in-rails\">this question</a> and setting <code>self.table_name = 'admins'</code> worked but it's not possible to set table name everytime.</p>\n\n<p>I am very new to rails and I'm building an engine for the first time.</p>\n\n<p>Here is code for my engine's model</p>\n\n<pre><code>module MyEngine\n  class Upload &lt; ActiveRecord::Base\n    self.table_name = 'admins'\n\n    def validate(file)\n      spreadsheet = open_excel(file)\n      header = spreadsheet.row(1)\n      2.upto(spreadsheet.last_row) do\n        row = Hash[[header, spreadsheet.row(i)].transpose]\n        upload = Upload.new(row)\n        upload.save!\n      end\n    end\n\n    private\n\n    def open_excel(file)\n      case File.extname(file)\n      when \".xls\", \".xlsx\" then Roo::Spreadsheet.open file\n      else raise \"File format not supported\"\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Here during development i can set <code>self.table_name = 'admins'</code> but in production its hard to change table name every time.\nAny help will be appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "utf-8"], "comments": [{"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 1, "creation_date": 1470826348, "post_id": 38871192, "comment_id": 65104431, "body": "You can give the <code>utf8-cleaner</code> gem a try."}, {"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "reply_to_user": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1470827054, "post_id": 38871192, "comment_id": 65104873, "body": "I don&#39;t understand why it is invalid (&#233; is a valid UTF8-character). In general when you have text field inputs in Rails forms, it&#39;s totally fine to write accents right ? I don&#39;t want to remove characters as the gem seems to do..."}, {"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 1, "creation_date": 1470827438, "post_id": 38871192, "comment_id": 65105132, "body": "It&#39;s a complex topic. When you look into your response from a form, you will notice that rails always contains a utf char as a hidden field in your form, to ensure that the browser sends it response as a uft-8 encoded form. Within a query string its more complex. I don&#39;t know all components which influence the encoding and what your webserver &quot;thinks&quot; what encoding it has."}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1470832474, "post_id": 38871192, "comment_id": 65108542, "body": "How have you encoded this character? What have you used to encode it?"}, {"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "edited": false, "score": 0, "creation_date": 1470833219, "post_id": 38871192, "comment_id": 65109099, "body": "Well you can see it in my code extract : <code>utm_medium=R%E9seau</code>. I have used an UTM link builder, not really sure what happened under the hood."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1470833861, "post_id": 38871192, "comment_id": 65109606, "body": "So, you encoded <code>e\u0301</code> in Latin1 (it was by no means \u201cHTML encoded\u201d,) then passed it to the server, that expects UTF-8."}], "owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 745, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1470837785, "creation_date": 1470825871, "last_edit_date": 1470837785, "question_id": 38871192, "link": "https://stackoverflow.com/questions/38871192/rails-invalid-query-parameters-non-utf-8-value", "title": "Rails Invalid query parameters: Non UTF-8 value", "body": "<p>I have encoded an URL with tracking parameters containing accents \"R\u00e9seau Social\"</p>\n\n<pre><code>https://www.example.com/?utm_source=twitter&amp;utm_medium=R%E9seau+Social&amp;utm_campaign=test\n</code></pre>\n\n<blockquote>\n  <p>An exception occurred: 'Invalid query parameters: Non UTF-8 value:\n  R\ufffdseau social' on\n  '/var/www/mysite-prod/shared/bundle/ruby/2.3.0/gems/actionpack-5.0.0.rc1/lib/action_dispatch/request/utils.rb:26:in\n  `check_param_encoding''</p>\n</blockquote>\n\n<p>The accent was encoded as <code>R%E9seau+Social</code>, isn't Rails supposed to process it correctly ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 923, "user_id": 2203953, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/hE0Fc.jpg?s=128&g=1", "display_name": "Pavel Tkackenko", "link": "https://stackoverflow.com/users/2203953/pavel-tkackenko"}, "edited": false, "score": 0, "creation_date": 1470829860, "post_id": 38871104, "comment_id": 65106791, "body": "<code>User</code> and <code>Admin</code> are separate models and both use email for login?"}, {"owner": {"reputation": 4659, "user_id": 3164751, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/jLKLy.jpg?s=128&g=1", "display_name": "Amrinder Singh", "link": "https://stackoverflow.com/users/3164751/amrinder-singh"}, "reply_to_user": {"reputation": 923, "user_id": 2203953, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/hE0Fc.jpg?s=128&g=1", "display_name": "Pavel Tkackenko", "link": "https://stackoverflow.com/users/2203953/pavel-tkackenko"}, "edited": false, "score": 0, "creation_date": 1470830648, "post_id": 38871104, "comment_id": 65107290, "body": "@PavelTkackenko yes"}], "answers": [{"tags": [], "owner": {"reputation": 29, "user_id": 2091457, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YDUzk.png?s=128&g=1", "display_name": "Brahim Dahmani", "link": "https://stackoverflow.com/users/2091457/brahim-dahmani"}, "is_accepted": false, "score": 0, "last_activity_date": 1470847099, "last_edit_date": 1470847099, "creation_date": 1470839473, "answer_id": 38876314, "question_id": 38871104, "link": "https://stackoverflow.com/questions/38871104/how-to-prevent-multiple-login-on-same-browser-in-rails-rails-5-0/38876314#38876314", "title": "How to prevent multiple login on same browser in rails? [Rails 5.0]", "body": "<p>As ActiveAdmin using the Devise gem, you can use these Helpers</p>\n\n<pre><code>user_signed_in?     # Checks whether there is a user signed in or not\nadmin_signed_in?    # Checks whether there is an admin signed in or not\n</code></pre>\n"}], "owner": {"reputation": 4659, "user_id": 3164751, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/jLKLy.jpg?s=128&g=1", "display_name": "Amrinder Singh", "link": "https://stackoverflow.com/users/3164751/amrinder-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470847099, "creation_date": 1470825616, "question_id": 38871104, "link": "https://stackoverflow.com/questions/38871104/how-to-prevent-multiple-login-on-same-browser-in-rails-rails-5-0", "title": "How to prevent multiple login on same browser in rails? [Rails 5.0]", "body": "<p>Hi i am working on a rails project, i am using ActiveAdmin for admin section, currently both user and admin can get login at same time, but i want to allow only one type of login at a time on the same browser.<br>\ni.e. If a user is login then admin can not get login on the same browser until that user gets logout.</p>\n\n<p>Note: i am using device for user authentication, and ActiveAdmin for backend.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 1, "creation_date": 1470825765, "post_id": 38871084, "comment_id": 65104053, "body": "I didn&#39;t quite understand your question. You want to know if a number has zeros after the comma in this given format?  What have you done so far?"}, {"owner": {"reputation": 923, "user_id": 2203953, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/hE0Fc.jpg?s=128&g=1", "display_name": "Pavel Tkackenko", "link": "https://stackoverflow.com/users/2203953/pavel-tkackenko"}, "edited": false, "score": 2, "creation_date": 1470825799, "post_id": 38871084, "comment_id": 65104073, "body": "Please provide examples with &quot;correct&quot; and &quot;fail&quot; numbers."}, {"owner": {"reputation": 87, "user_id": 2993178, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/bd113c8d1eb0a39d7bb76db8360a1713?s=128&d=identicon&r=PG&f=1", "display_name": "user2993178", "link": "https://stackoverflow.com/users/2993178/user2993178"}, "edited": false, "score": 0, "creation_date": 1470826833, "post_id": 38871084, "comment_id": 65104734, "body": "I have to check that all numbers &gt;=10,000 should have no decimal places and should have separators &#39;,&#39; used after a set of three digits.Example: 674,456,890"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 1, "creation_date": 1470826965, "post_id": 38871084, "comment_id": 65104825, "body": "Just a small clarification: You have a table full of Strings...? because numbers have no commas..."}, {"owner": {"reputation": 923, "user_id": 2203953, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/hE0Fc.jpg?s=128&g=1", "display_name": "Pavel Tkackenko", "link": "https://stackoverflow.com/users/2203953/pavel-tkackenko"}, "edited": false, "score": 1, "creation_date": 1470827027, "post_id": 38871084, "comment_id": 65104863, "body": "It is still unclear. It is better to provide real examples from your table and show what numbers are correct and what are not."}, {"owner": {"reputation": 87, "user_id": 2993178, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/bd113c8d1eb0a39d7bb76db8360a1713?s=128&d=identicon&r=PG&f=1", "display_name": "user2993178", "link": "https://stackoverflow.com/users/2993178/user2993178"}, "edited": false, "score": 0, "creation_date": 1470827688, "post_id": 38871084, "comment_id": 65105303, "body": "Sorry. Technically, yes , table full of strings.  I need to check they have the &#39;,&#39; inserted after every 3 digits. Correct Example: 123,456,000  Wrong : 123 456 000"}], "answers": [{"comments": [{"owner": {"reputation": 923, "user_id": 2203953, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/hE0Fc.jpg?s=128&g=1", "display_name": "Pavel Tkackenko", "link": "https://stackoverflow.com/users/2203953/pavel-tkackenko"}, "edited": false, "score": 0, "creation_date": 1470827796, "post_id": 38871794, "comment_id": 65105377, "body": "I think it will ignore such numbers as &#39;999,999.40&#39;"}, {"owner": {"reputation": 494, "user_id": 886279, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/qWbtH.jpg?s=128&g=1", "display_name": "Albert Rannetsperger", "link": "https://stackoverflow.com/users/886279/albert-rannetsperger"}, "edited": false, "score": 0, "creation_date": 1470828072, "post_id": 38871794, "comment_id": 65105581, "body": "Yea, but isn&#39;t that the goal?"}, {"owner": {"reputation": 87, "user_id": 2993178, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/bd113c8d1eb0a39d7bb76db8360a1713?s=128&d=identicon&r=PG&f=1", "display_name": "user2993178", "link": "https://stackoverflow.com/users/2993178/user2993178"}, "edited": false, "score": 0, "creation_date": 1470829219, "post_id": 38871794, "comment_id": 65106348, "body": "Yes, the values shouldn&#39;t be having any decimal places."}], "tags": [], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "is_accepted": true, "score": 1, "last_activity_date": 1470827420, "creation_date": 1470827420, "answer_id": 38871794, "question_id": 38871084, "link": "https://stackoverflow.com/questions/38871084/verify-formatting-in-a-number/38871794#38871794", "title": "Verify formatting in a number", "body": "<pre><code>s = '74,456,890'\nif s =~ /^\\d{1,3}(?:,\\d{3}+)$/\n   # String s has the required format\nelse\n   # String s does not have the required format\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1470898953, "post_id": 38871890, "comment_id": 65138873, "body": "You solution would miss numbers smaller than 1000, such as <code>455</code>"}], "tags": [], "owner": {"reputation": 923, "user_id": 2203953, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/hE0Fc.jpg?s=128&g=1", "display_name": "Pavel Tkackenko", "link": "https://stackoverflow.com/users/2203953/pavel-tkackenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1470827623, "creation_date": 1470827623, "answer_id": 38871890, "question_id": 38871084, "link": "https://stackoverflow.com/questions/38871084/verify-formatting-in-a-number/38871890#38871890", "title": "Verify formatting in a number", "body": "<p>Assuming that numbers are stings (because there are <code>,</code> sign):</p>\n\n<pre><code>numbers = [\n  '100,000',\n  '100,246.40',\n  '100,000,304',\n  '300.210',\n  '10,200'\n]\n\nnumbers.map { |n| n =~ /^\\d{1,3},((\\d{3})|(\\d{3},))+$/ ? n : nil }.compact\n#=&gt; [\"100,000\", \"100,000,304\", \"10,200\"] \n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 2993178, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/bd113c8d1eb0a39d7bb76db8360a1713?s=128&d=identicon&r=PG&f=1", "display_name": "user2993178", "link": "https://stackoverflow.com/users/2993178/user2993178"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 38871794, "answer_count": 2, "score": -1, "last_activity_date": 1470827623, "creation_date": 1470825551, "last_edit_date": 1470826713, "question_id": 38871084, "link": "https://stackoverflow.com/questions/38871084/verify-formatting-in-a-number", "title": "Verify formatting in a number", "body": "<p>I have a table full of numbers and need to verify if each of the number has 0 decimals and has separators',' used for '000s .</p>\n\n<p>Like:  123,456</p>\n\n<p>How can i verify this?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "string"], "comments": [{"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1470825810, "post_id": 38870974, "comment_id": 65104086, "body": "What you have so far?"}], "answers": [{"comments": [{"owner": {"reputation": 749, "user_id": 3767348, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/evVot.jpg?s=128&g=1", "display_name": "veeresh yh", "link": "https://stackoverflow.com/users/3767348/veeresh-yh"}, "edited": false, "score": 0, "creation_date": 1470826247, "post_id": 38871235, "comment_id": 65104364, "body": "i used nokogiri to parse but since data is huge getting memory allocation error."}, {"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "reply_to_user": {"reputation": 749, "user_id": 3767348, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/evVot.jpg?s=128&g=1", "display_name": "veeresh yh", "link": "https://stackoverflow.com/users/3767348/veeresh-yh"}, "edited": false, "score": 0, "creation_date": 1470826633, "post_id": 38871235, "comment_id": 65104616, "body": "In this case you can try to use nokigiris facility to parse a stream instead of loading the whole xml file, if it is possible."}], "tags": [], "owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "is_accepted": false, "score": 0, "last_activity_date": 1470826037, "creation_date": 1470826037, "answer_id": 38871235, "question_id": 38870974, "link": "https://stackoverflow.com/questions/38870974/extract-values-after-pattern-in-ruby-string/38871235#38871235", "title": "Extract values after pattern in Ruby string", "body": "<p>When your string is this simple you can use scan + regular expression like this:</p>\n\n<p>result = html.scan(/ProdCode=\"\\d+?\"/) </p>\n\n<p>If it is more complex you can use a html parser like nokogiri or oga.</p>\n"}, {"comments": [{"owner": {"reputation": 749, "user_id": 3767348, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/evVot.jpg?s=128&g=1", "display_name": "veeresh yh", "link": "https://stackoverflow.com/users/3767348/veeresh-yh"}, "edited": false, "score": 0, "creation_date": 1470834011, "post_id": 38871354, "comment_id": 65109712, "body": "when content is blank i.e &quot;\\&quot; then regex is breaking and giving invalid result."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1470836409, "post_id": 38871354, "comment_id": 65111506, "body": "You can simplify by putting<code>[^]+</code> in a capture group: <code>string.scan(&#47;&quot;([^&quot;]+)&quot;&#47;).flatten</code>."}, {"owner": {"reputation": 923, "user_id": 2203953, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/hE0Fc.jpg?s=128&g=1", "display_name": "Pavel Tkackenko", "link": "https://stackoverflow.com/users/2203953/pavel-tkackenko"}, "edited": false, "score": 1, "creation_date": 1470884906, "post_id": 38871354, "comment_id": 65133731, "body": "You can handle empty values like this: <code>string.gsub(&#47;&quot;&quot;&#47;, &#39;&quot; &quot;&#39;).scan(&#47;&quot;[^&quot;]+&quot;&#47;).map { |element| element.delete(&#39;\\\\&quot;&#39;)  }</code>"}], "tags": [], "owner": {"reputation": 923, "user_id": 2203953, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/hE0Fc.jpg?s=128&g=1", "display_name": "Pavel Tkackenko", "link": "https://stackoverflow.com/users/2203953/pavel-tkackenko"}, "is_accepted": true, "score": 2, "last_activity_date": 1470826803, "last_edit_date": 1470826803, "creation_date": 1470826332, "answer_id": 38871354, "question_id": 38870974, "link": "https://stackoverflow.com/questions/38870974/extract-values-after-pattern-in-ruby-string/38871354#38871354", "title": "Extract values after pattern in Ruby string", "body": "<p>You should use <code>:scan</code> to select elements by regexp pattern. Then remove escape characters.</p>\n\n<pre><code>string.scan(/\"[^\"]+\"/).map { |element| element.delete('\\\\\"')  }\n</code></pre>\n\n<p><strong>Explanation of pattern:</strong></p>\n\n<ol>\n<li><code>/</code> \u2013 regexp starts</li>\n<li><code>\"</code> \u2013 first char should be <code>\"</code></li>\n<li><code>[^\"]+</code> \u2013 next should be any char except <code>\"</code>. + sign says that number of such chars should be at least 1.</li>\n<li><code>\"</code> \u2013 next should be again <code>\"</code></li>\n<li><code>/</code> \u2013 regexp ends</li>\n</ol>\n\n<p>So <code>string.scan(/\"[^\"]+\"/)</code> would return:</p>\n\n<pre><code>[\"\\\"40\\\"\", \"\\\"demo1\\\"\", \"\\\"40\\\"\", \"\\\"1\\\"\", \"\\\"40\\\"\", \"\\\"demo1\\\"\", \"\\\"40\\\"\", \"\\\"1\\\"\"]\n</code></pre>\n\n<p>Then we can just delete <code>\\\"</code> using <code>:delete</code> method.</p>\n\n<p>Convenient tool to build regexps is <a href=\"http://rubular.com/\" rel=\"nofollow\">http://rubular.com/</a></p>\n"}], "owner": {"reputation": 749, "user_id": 3767348, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/evVot.jpg?s=128&g=1", "display_name": "veeresh yh", "link": "https://stackoverflow.com/users/3767348/veeresh-yh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 38871354, "answer_count": 2, "score": 0, "last_activity_date": 1470826999, "creation_date": 1470825305, "last_edit_date": 1470826999, "question_id": 38870974, "link": "https://stackoverflow.com/questions/38870974/extract-values-after-pattern-in-ruby-string", "title": "Extract values after pattern in Ruby string", "body": "<p>I have a string like this:</p>\n\n<p><code>\"&lt;root&gt;&lt;some ProdCode=\\\"40\\\" ProducerName=\\\"demo1\\\" ProdCode=\\\"40\\\" Need_Confirmation=\\\"1\\\"/&gt;&lt;some ProdCode=\\\"40\\\" ProducerName=\\\"demo1\\\" ProdCode=\\\"40\\\" Need_Confirmation=\\\"1\\\"/&gt;&lt;/root&gt;\"</code></p>\n\n<p>I'm trying to pull the content from this string which is between =\\\"<em>content</em>\\\" and put it in an array, like [\"40\",\"demo1\",\"40\",\"1\",40......]</p>\n"}, {"tags": ["ruby", "chef-infra", "chef-recipe", "cookbook"], "answers": [{"tags": [], "owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "is_accepted": true, "score": 11, "last_activity_date": 1470827136, "creation_date": 1470827136, "answer_id": 38871674, "question_id": 38870921, "link": "https://stackoverflow.com/questions/38870921/chef-using-recipes-from-same-cookbook/38871674#38871674", "title": "chef - using recipes from same cookbook", "body": "<p><code>include_recipe</code> uses the first part every time as the cookbook name. So you have to specify the cookbook - name + recipe name:</p>\n\n<pre><code>include_recipe '::my_java' # works still after you rename your cookbook\ninclude_recipe 'base::my_java' # works only as long as your cookbook name is base\n</code></pre>\n"}], "owner": {"reputation": 26124, "user_id": 972789, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/4Y8VM.jpg?s=128&g=1", "display_name": "Nick Ginanto", "link": "https://stackoverflow.com/users/972789/nick-ginanto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3502, "favorite_count": 0, "accepted_answer_id": 38871674, "answer_count": 1, "score": 4, "last_activity_date": 1471362000, "creation_date": 1470825161, "question_id": 38870921, "link": "https://stackoverflow.com/questions/38870921/chef-using-recipes-from-same-cookbook", "title": "chef - using recipes from same cookbook", "body": "<p>I have cookbook <code>base</code> and cookbook <code>myapp</code></p>\n\n<p>base has 2 recipes - <code>my_java</code> and <code>java_with_custom_stuff</code></p>\n\n<p>in <code>java_with_custom_stuff</code> I want to use the recipe for <code>my_java</code> (same cookbook). something like</p>\n\n<pre><code>include_recipe 'my_java'\n\nbash 'custom stuff' do\n...\nend\n</code></pre>\n\n<p>in <code>myapp</code> I do\n<code>include_recipe \"base::java_with_custom_stuff\"</code></p>\n\n<p>yet it complains that it cannot find <code>my_java</code></p>\n\n<p>Is there a way to use a recipe from the same cookbook?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "load-path"], "answers": [{"tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": true, "score": 2, "last_activity_date": 1470827416, "creation_date": 1470827416, "answer_id": 38871792, "question_id": 38870796, "link": "https://stackoverflow.com/questions/38870796/how-to-configure-rspec-to-find-specs-in-lib-folder/38871792#38871792", "title": "How to configure RSpec to find specs in lib folder?", "body": "<p>RSpec doesn't look for tests in <code>autoload_paths</code>. If you run <code>rspec</code> or <code>rake spec</code> without arguments, RSpec looks in the <code>spec</code> directory by default. If you want to run specs in a different directory, give that directory to <code>rspec</code> as an argument:</p>\n\n<pre><code>rspec app/config/lib/spec\n</code></pre>\n\n<p>However, it's the universal convention to keep your specs in the <code>spec</code> directory, separate from your code in <code>app</code> and <code>lib</code>, so I'd move your specs to <code>spec/lib</code>. RSpec will then find them without any extra effort.</p>\n"}], "owner": {"reputation": 1038, "user_id": 6124030, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/990002717754994/picture?type=large", "display_name": "Emilio Men&#233;ndez", "link": "https://stackoverflow.com/users/6124030/emilio-men%c3%a9ndez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1528, "favorite_count": 0, "accepted_answer_id": 38871792, "answer_count": 1, "score": 2, "last_activity_date": 1470922148, "creation_date": 1470824879, "last_edit_date": 1470922148, "question_id": 38870796, "link": "https://stackoverflow.com/questions/38870796/how-to-configure-rspec-to-find-specs-in-lib-folder", "title": "How to configure RSpec to find specs in lib folder?", "body": "<p>I am creating a little API with Rails 5.0 following this tutorial <a href=\"http://apionrails.icalialabs.com/book/frontmatter\" rel=\"nofollow\">http://apionrails.icalialabs.com/book/frontmatter</a></p>\n\n<p>I am trying to run a test located in <code>app/config/lib</code> but RSpec won't find the test. </p>\n\n<p>I have tried adding <code>config.autoload_paths &lt;&lt; Rails.root.join('lib')</code> or\n<code>config.autoload_paths += %W(#{config.root}/lib)</code> to <code>app/config/application.rb</code>.</p>\n\n<p>This is my code:</p>\n\n<pre><code>$ /app/config/application.rb\n\n#required files go here, deleted for clarity.\n\nBundler.require(*Rails.groups)\n\nmodule MarketPlaceApi\n  class Application &lt; Rails::Application\n\n    # don't generate RSpec tests for views and helpers\n    config.generators do |g|\n      g.test_framework :rspec, fixture: true\n      g.fixture_replacement :factory_girl, dir: 'spec/factories'\n      g.view_specs false\n      g.helper_specs false\n      g.stylesheets = false\n      g.javascripts = false\n      g.helper = false\n    end\n\n  config.autoload_paths += %W(#{config.root}/lib)\n  end\nend\n</code></pre>\n\n<p>Test</p>\n\n<pre><code>$ app/config/lib/spec/test_spec.rb\n\nrequire 'spec_helper'\n\ndescribe ApiConstraints do\n  #test goes here\nend\n</code></pre>\n\n<p>How can I add the <code>lib</code> folder so RSpec runs the tests located in it?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby", "google-cloud-storage", "google-api-client"], "answers": [{"comments": [{"owner": {"reputation": 3331, "user_id": 1058612, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/f58vi.jpg?s=128&g=1", "display_name": "User 1058612", "link": "https://stackoverflow.com/users/1058612/user-1058612"}, "edited": false, "score": 0, "creation_date": 1585775631, "post_id": 38877811, "comment_id": 107885958, "body": "This answer helped me with performing a download on a file with the Node.js client."}], "tags": [], "owner": {"reputation": 9178, "user_id": 1672803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ad309c265cf725aee6cdc956aa9b625?s=128&d=identicon&r=PG", "display_name": "Mike Schwartz", "link": "https://stackoverflow.com/users/1672803/mike-schwartz"}, "is_accepted": true, "score": 5, "last_activity_date": 1470843166, "creation_date": 1470843166, "answer_id": 38877811, "question_id": 38870136, "link": "https://stackoverflow.com/questions/38870136/uploading-to-nested-buckets-in-google-cloud-storage/38877811#38877811", "title": "Uploading to nested buckets in google cloud storage", "body": "<p>Google Cloud Storage doesn't have true directories - it has a flat namespace. You can partially simulate directories by using \"/\" characters in your object names, and using prefix and delimiter queries when listing buckets.</p>\n\n<p>The problem you're seeing is caused by the fact that bucket names can't contain \"/\". Try instead using the bucket \"images\" and object names that start with \"cats/\".</p>\n"}], "owner": {"reputation": 519, "user_id": 216552, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/acaf8b6fce52ba7722e5afba6fe18439?s=128&d=identicon&r=PG", "display_name": "raza.sayed", "link": "https://stackoverflow.com/users/216552/raza-sayed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 630, "favorite_count": 0, "accepted_answer_id": 38877811, "answer_count": 1, "score": 2, "last_activity_date": 1470843166, "creation_date": 1470823251, "last_edit_date": 1470823756, "question_id": 38870136, "link": "https://stackoverflow.com/questions/38870136/uploading-to-nested-buckets-in-google-cloud-storage", "title": "Uploading to nested buckets in google cloud storage", "body": "<p>In google cloud storage, i have bucket called cats inside a root bucket called images. Im using the google-api-ruby-client gem to upload files. Im able to upload a file to the root bucket 'images' but uploading to 'images/cats' does not work. I am aware that the buckets in google cloud storage do not have a notion of slash, so I'm unable to figure out how to specify the name of the nested bucket.</p>\n\n<pre><code>result = client.execute(\n  api_method: api.objects.insert,\n  media: media,\n  parameters: {\n    uploadType: 'resumable',\n    bucket: 'images/cats',  #This does not work !. Just images works.\n    name: 'kitty.jpeg',\n  },\n  body_object: {contentType: 'image/jpeg'}\n)\n</code></pre>\n\n<p>This is giving the error <code>NoMethodError: undefined method query_values for nil:NilClass</code>. The code works if i just use 'images' for the value of the bucket.</p>\n\n<p>How can i make the upload work for nested buckets as well ?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bundler", "sprockets", "gemfile"], "answers": [{"comments": [{"owner": {"reputation": 203, "user_id": 4907159, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0b50d09a26961049edad0be666d93c7f?s=128&d=identicon&r=PG&f=1", "display_name": "GoYoshi", "link": "https://stackoverflow.com/users/4907159/goyoshi"}, "edited": false, "score": 0, "creation_date": 1470828817, "post_id": 38870031, "comment_id": 65106033, "body": "Doesn&#39;t help sadly, I&#39;m still getting the same error"}], "tags": [], "owner": {"reputation": 427, "user_id": 5596671, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/95bf9f2cc4e37bd18a2928060935c6ba?s=128&d=identicon&r=PG&f=1", "display_name": "Boris BRESCIANI", "link": "https://stackoverflow.com/users/5596671/boris-bresciani"}, "is_accepted": false, "score": 0, "last_activity_date": 1470823021, "creation_date": 1470823021, "answer_id": 38870031, "question_id": 38869796, "link": "https://stackoverflow.com/questions/38869796/bootstrap-sass-uninitialized-constant-sprocketsrailsversion-nameerror/38870031#38870031", "title": "Bootstrap-SASS: uninitialized constant Sprockets::Rails::VERSION (NameError)", "body": "<p>Run this command:</p>\n\n<pre><code>bundle update sprockets-rails \n</code></pre>\n"}], "owner": {"reputation": 203, "user_id": 4907159, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0b50d09a26961049edad0be666d93c7f?s=128&d=identicon&r=PG&f=1", "display_name": "GoYoshi", "link": "https://stackoverflow.com/users/4907159/goyoshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 712, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1470823021, "creation_date": 1470822374, "question_id": 38869796, "link": "https://stackoverflow.com/questions/38869796/bootstrap-sass-uninitialized-constant-sprocketsrailsversion-nameerror", "title": "Bootstrap-SASS: uninitialized constant Sprockets::Rails::VERSION (NameError)", "body": "<p>No matter what I do, I always get the error</p>\n\n<pre><code>/home/xyz/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/bootstrap-sass-3.3.7/lib/bootstrap-sass/engine.rb:11:in `block in &lt;class:Engine&gt;': uninitialized constant Sprockets::Rails::VERSION (NameError)\n</code></pre>\n\n<p>when restarting the rails server after installing the bundle. I've tried to change version numbers, delete the .lock file and so on, but nothing is working. I'm using <code>Rails 4.2.6</code>.\nHere's my Gemfile:</p>\n\n<pre><code>source 'https://rubygems.org'\nruby \"2.3.1\"\n\ngem 'rails_12factor'\n\ngem 'rails', '4.2.6'\ngem 'sprockets-rails'\n\ngem 'pg', '~&gt; 0.15'\n\ngem 'simple_form'\n\ngem 'clockpicker-rails'\ngem 'momentjs-rails', '&gt;= 2.9.0'\ngem 'bootstrap3-datetimepicker-rails', '~&gt; 4.17.37'\n\ngem \"font-awesome-rails\"\ngem 'bootstrap-sass', '~&gt; 3.3.6'\ngem 'sass-rails', '~&gt; 4.0.0'\ngem 'bootflat-rails' # flat UI skin for bootstrap\n</code></pre>\n\n<p>application.css.scss:</p>\n\n<pre><code>@import 'bootstrap-sprockets';\n@import 'bootstrap';\n@import 'bootflat';\n@import 'font-awesome';\n@import 'bootstrap/clockpicker';\n@import 'bootstrap-datetimepicker';\n</code></pre>\n\n<p>application.js:</p>\n\n<pre><code>//= require jquery\n//= require jquery_ujs\n//= require bootstrap-sprockets\n//= require icheck.min\n//= require bootstrap/clockpicker\n//= require moment\n//= require bootstrap-datetimepicker\n//= require turbolinks\n//= require_tree .\n</code></pre>\n\n<p>I've read many similar questions but none of the answers helped me or caused even more problems. It really should'nt be that hard but I just can't figure out what the problem is.</p>\n"}, {"tags": ["android", "ruby", "selenium", "scroll", "appium"], "comments": [{"owner": {"reputation": 957, "user_id": 3742799, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TG6Li.jpg?s=128&g=1", "display_name": "juhlila", "link": "https://stackoverflow.com/users/3742799/juhlila"}, "edited": false, "score": 0, "creation_date": 1470851588, "post_id": 38869509, "comment_id": 65121763, "body": "did you check the visibility of the element?"}, {"owner": {"reputation": 117, "user_id": 2280280, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/1sGUm.jpg?s=128&g=1", "display_name": "Anshul", "link": "https://stackoverflow.com/users/2280280/anshul"}, "reply_to_user": {"reputation": 957, "user_id": 3742799, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TG6Li.jpg?s=128&g=1", "display_name": "juhlila", "link": "https://stackoverflow.com/users/3742799/juhlila"}, "edited": false, "score": 0, "creation_date": 1470905875, "post_id": 38869509, "comment_id": 65143050, "body": "Initially the element is not visible, that&#39;s why I have to scroll. Once the element is visible, the scrolling stops but then scrolling starts automatically in reverse order and stops at the top of the page. At this point, the element becomes invisible again."}, {"owner": {"reputation": 957, "user_id": 3742799, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TG6Li.jpg?s=128&g=1", "display_name": "juhlila", "link": "https://stackoverflow.com/users/3742799/juhlila"}, "edited": false, "score": 0, "creation_date": 1470921734, "post_id": 38869509, "comment_id": 65154083, "body": "check if my answer will help you"}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 2280280, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/1sGUm.jpg?s=128&g=1", "display_name": "Anshul", "link": "https://stackoverflow.com/users/2280280/anshul"}, "edited": false, "score": 0, "creation_date": 1470927930, "post_id": 38897616, "comment_id": 65158898, "body": "I am trying to use your method but I am getting undefined method `ele_by_json&#39; error (NoMethodError). Please note, I am trying to automate Android app. I have also tried &quot;ele_by_json_visible_contains&quot; after searching on internet but no luck :("}, {"owner": {"reputation": 957, "user_id": 3742799, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TG6Li.jpg?s=128&g=1", "display_name": "juhlila", "link": "https://stackoverflow.com/users/3742799/juhlila"}, "reply_to_user": {"reputation": 117, "user_id": 2280280, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/1sGUm.jpg?s=128&g=1", "display_name": "Anshul", "link": "https://stackoverflow.com/users/2280280/anshul"}, "edited": false, "score": 0, "creation_date": 1470928498, "post_id": 38897616, "comment_id": 65159346, "body": "oh <code>ele_by_json</code> is only for ios, but you can try another methods listed here <a href=\"https://github.com/appium/ruby_lib/blob/master/lib/appium_lib/android/element/generic.rb\" rel=\"nofollow noreferrer\">github.com/appium/ruby_lib/blob/master/lib/appium_lib/androi&zwnj;&#8203;d/&hellip;</a>"}, {"owner": {"reputation": 117, "user_id": 2280280, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/1sGUm.jpg?s=128&g=1", "display_name": "Anshul", "link": "https://stackoverflow.com/users/2280280/anshul"}, "edited": false, "score": 0, "creation_date": 1470929857, "post_id": 38897616, "comment_id": 65160282, "body": "I tried find and find exact but the problem is that it is finding only those elements which are currently visible on the screen. If the element is not visible on the screen then NoSuchElementError is observed."}, {"owner": {"reputation": 117, "user_id": 2280280, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/1sGUm.jpg?s=128&g=1", "display_name": "Anshul", "link": "https://stackoverflow.com/users/2280280/anshul"}, "edited": false, "score": 0, "creation_date": 1470929950, "post_id": 38897616, "comment_id": 65160334, "body": "when I manually scroll the app so that element is visible then the find method works fine. But I need the scroll to happen by automation. Scroll_to works fine but it scrolls to the element and then scrolls back to the top and hence the search fails :("}, {"owner": {"reputation": 1772, "user_id": 5743300, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/86b739012f3bafbce2e40f59f3291c0e?s=128&d=identicon&r=PG&f=1", "display_name": "Emjey", "link": "https://stackoverflow.com/users/5743300/emjey"}, "reply_to_user": {"reputation": 117, "user_id": 2280280, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/1sGUm.jpg?s=128&g=1", "display_name": "Anshul", "link": "https://stackoverflow.com/users/2280280/anshul"}, "edited": false, "score": 0, "creation_date": 1493829223, "post_id": 38897616, "comment_id": 74572352, "body": "@Anshul Is there any way you found a solution or work around to the problem? I am using appium_lib and I am still having the same issue. scroll_to or scroll_to_exact, keeps scrolling aimlessly"}, {"owner": {"reputation": 957, "user_id": 3742799, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TG6Li.jpg?s=128&g=1", "display_name": "juhlila", "link": "https://stackoverflow.com/users/3742799/juhlila"}, "edited": false, "score": 0, "creation_date": 1493835391, "post_id": 38897616, "comment_id": 74575957, "body": "im sorry for the late reply, i didnt get notified, i checked and this method only work on ios, unfortunatelly i cannot try it on android, but did you guys check this page? maybe <code>scroll_to_exact</code> will do what you want <a href=\"https://github.com/appium/ruby_lib/blob/master/lib/appium_lib/android/element/generic.rb\" rel=\"nofollow noreferrer\">github.com/appium/ruby_lib/blob/master/lib/appium_lib/androi&zwnj;&#8203;d/&hellip;</a>"}], "tags": [], "owner": {"reputation": 957, "user_id": 3742799, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TG6Li.jpg?s=128&g=1", "display_name": "juhlila", "link": "https://stackoverflow.com/users/3742799/juhlila"}, "is_accepted": false, "score": 0, "last_activity_date": 1470921707, "creation_date": 1470921707, "answer_id": 38897616, "question_id": 38869509, "link": "https://stackoverflow.com/questions/38869509/scrolling-in-android-using-appium-ruby/38897616#38897616", "title": "Scrolling in android using Appium + Ruby", "body": "<p>I created a method to scroll to an element that is not on screen yet, because <code>scroll_to</code> was not working for me. This methos scrolls to any element on screen even if its not visible yet</p>\n\n<pre><code>def scroll_to_element(class_name, element_name)\n  ele_by_json(typeArray: [class_name], onlyVisible: false, name: {target: element_name, substring: false, insensitive: false})\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 129, "user_id": 8087976, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1NDa3bWWuRE/AAAAAAAAAAI/AAAAAAAADBo/GoggIZpKaQA/photo.jpg?sz=128", "display_name": "Maximiliano alves", "link": "https://stackoverflow.com/users/8087976/maximiliano-alves"}, "is_accepted": false, "score": 0, "last_activity_date": 1505225473, "last_edit_date": 1505225473, "creation_date": 1505221487, "answer_id": 46177231, "question_id": 38869509, "link": "https://stackoverflow.com/questions/38869509/scrolling-in-android-using-appium-ruby/46177231#46177231", "title": "Scrolling in android using Appium + Ruby", "body": "<p>Below code worked for me :</p>\n\n<pre><code>def scrollTo el_start, el_end\n  #get element coordinates start\n  el_start = $driver.find_element(:id, el_start)\n  screen_x_start = el_start.location.x\n  screen_y_start = el_start.location.y\n  #get element coordinates end\n  el_end = $driver.find_element(:id, el_end)\n  screen_x_end = el_end.location.x\n  screen_y_end = el_end.location.y\n  Appium::TouchAction.new.swipe(start_x: screen_x_start, start_y: screen_y_start, delta_x: screen_x_end, delta_y: screen_y_end).perform\nend\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 2280280, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/1sGUm.jpg?s=128&g=1", "display_name": "Anshul", "link": "https://stackoverflow.com/users/2280280/anshul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1593, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1505225473, "creation_date": 1470821649, "question_id": 38869509, "link": "https://stackoverflow.com/questions/38869509/scrolling-in-android-using-appium-ruby", "title": "Scrolling in android using Appium + Ruby", "body": "<p>I am trying to scroll through the android app to find a specific element. Below is the code for scrolling:</p>\n\n<pre><code>def self.swipe_to (programme)\n   begin\n   scroll_to(programme)\n   rescue\n     puts 'unable to find ' + programme\n     return false\n   end\n   return true\nend\n</code></pre>\n\n<p>The scrolling works fine however, the issue is the app scrolls to the programme but as soon the programme is found, the app scrolls back to the top of the list.\nAnd then an error is thrown saying element could not be found.</p>\n\n<p>Has anybody seen similar kind of issue before? Is there any way to stop scrolling as soon as programme is found? I just want to stop the scrolling back to the top as soon as programme is found. Please help.</p>\n"}, {"tags": ["ruby", "api", "trello"], "answers": [{"tags": [], "owner": {"reputation": 336, "user_id": 6532555, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2QIBAXRHIxE/AAAAAAAAAAI/AAAAAAAAAJw/Vmgvawjv8Ho/photo.jpg?sz=128", "display_name": "Chr&#237;stopher &#193;vila Holgu&#237;n", "link": "https://stackoverflow.com/users/6532555/chr%c3%adstopher-%c3%81vila-holgu%c3%adn"}, "is_accepted": false, "score": 0, "last_activity_date": 1470834222, "last_edit_date": 1592644375, "creation_date": 1470834222, "answer_id": 38874268, "question_id": 38869490, "link": "https://stackoverflow.com/questions/38869490/add-trello-card-results-in-error-malformed-url/38874268#38874268", "title": "Add Trello Card results in &quot;Error - Malformed URL:&quot;", "body": "<p>Maybe you should watch what you application is sending to Trello.</p>\n<p>You should also aread the <a href=\"https://developers.trello.com/advanced-reference\" rel=\"nofollow noreferrer\">API that Trello offers</a> and search for the specific request and its response. Also you can probe if the Keys are correct in Trello's Sandbox.</p>\n<p>As last option write an issue on <a href=\"https://github.com/jeremytregunna/ruby-trello/issues\" rel=\"nofollow noreferrer\">Github's gem</a> or ask for assistance to Trello.</p>\n<p>Hope it helps.</p>\n"}], "owner": {"reputation": 1, "user_id": 2464939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca8345bbaa2a6eec69cd5160c7275313?s=128&d=identicon&r=PG", "display_name": "Beelze", "link": "https://stackoverflow.com/users/2464939/beelze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470834222, "creation_date": 1470821581, "question_id": 38869490, "link": "https://stackoverflow.com/questions/38869490/add-trello-card-results-in-error-malformed-url", "title": "Add Trello Card results in &quot;Error - Malformed URL:&quot;", "body": "<p>I'm using ruby-trello gem for creating cards in a Trello list.\nFor my testing credentials this works fine, for the credentials I use on a production setup I get \"Trello::Error - Malformed URL:\"</p>\n\n<p>The \"Malformed URL\" is a direct response from Trello, and I can't get my head around why, and how to fix this.</p>\n\n<p>There is little to no documentation on API response errors by Trello.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter-bootstrap"], "comments": [{"owner": {"reputation": 7420, "user_id": 1081668, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DdH12.png?s=128&g=1", "display_name": "Thanh", "link": "https://stackoverflow.com/users/1081668/thanh"}, "edited": false, "score": 0, "creation_date": 1470822035, "post_id": 38869335, "comment_id": 65101576, "body": "in your lesson controller show view, you can set a session to store watching lession id, then you can compare it with id of lessions in list to change html, css."}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 5759307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/784c37ca65661bf6ffa23e66d7498c03?s=128&d=identicon&r=PG&f=1", "display_name": "jacobrubyonrails", "link": "https://stackoverflow.com/users/5759307/jacobrubyonrails"}, "edited": false, "score": 0, "creation_date": 1470824266, "post_id": 38869697, "comment_id": 65103062, "body": "Hi! Thanks, seems like a good solution, I thought of it before. The trouble for me (I&#39;m new with rails) seem to be to define the method for current_lesson in my application controller."}, {"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "reply_to_user": {"reputation": 107, "user_id": 5759307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/784c37ca65661bf6ffa23e66d7498c03?s=128&d=identicon&r=PG&f=1", "display_name": "jacobrubyonrails", "link": "https://stackoverflow.com/users/5759307/jacobrubyonrails"}, "edited": false, "score": 0, "creation_date": 1470824836, "post_id": 38869697, "comment_id": 65103448, "body": "<code>def current_lesson; Lesson.find(params[:...]); end; helper_method :current_lesson</code>"}], "tags": [], "owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "is_accepted": true, "score": 2, "last_activity_date": 1470822124, "creation_date": 1470822124, "answer_id": 38869697, "question_id": 38869335, "link": "https://stackoverflow.com/questions/38869335/rails-if-current-id-do/38869697#38869697", "title": "rails if current id do", "body": "<p>A simple way would be to add a conditional, in the case you have the current lesson available in a local variable or method current_lesson. Then it can look like this: </p>\n\n\n\n<pre><code>&lt;%= @lessons.each do |lesson| %&gt;\n  &lt;% if lesson.id == current_lesson.id %&gt;\n    ... other html ...\n  &lt;% else %&gt;\n    &lt;%= link_to [lesson.course, lesson] do %&gt;\n      &lt;%= lesson.title %&gt;\n    &lt;% end %&gt;\n   &lt;% end %&gt;\n &lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 5759307, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/784c37ca65661bf6ffa23e66d7498c03?s=128&d=identicon&r=PG&f=1", "display_name": "jacobrubyonrails", "link": "https://stackoverflow.com/users/5759307/jacobrubyonrails"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 444, "favorite_count": 0, "accepted_answer_id": 38869697, "answer_count": 1, "score": 0, "last_activity_date": 1470822124, "creation_date": 1470821244, "question_id": 38869335, "link": "https://stackoverflow.com/questions/38869335/rails-if-current-id-do", "title": "rails if current id do", "body": "<p>I'm developing an online course site using Ruby on Rails and bootstrap. I have a model for Courses and a model for Lessons. In the lesson controller show view I am not only showing the lesson page with video, discussion and notes but also a list of all the lessons belonging to the course. This is done by:</p>\n\n<pre><code>&lt;%= @lessons.each do |lesson| %&gt;\n  &lt;%= link_to [lesson.course, lesson] do %&gt;\n   &lt;%= lesson.title %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The user can, from the individual lesson page, pick the next lesson to watch.</p>\n\n<p><strong>Question:</strong> </p>\n\n<p>The URL generated is: localhost:3000/courses/1/lessons/2 (I'll change this with Friendly Id gem later). I would like to show in the list of all lessons on the individual lesson page which lesson the user is watching right now. So basically maybe have something say \"You are currently watching : Lesson with id 2\" and have it in a different background color with some custom html. How can I have different HTML and CSS for the currently watching lesson in the all lessons list? </p>\n\n<p>Thanks a lot in advance!</p>\n\n<p>/Jacob</p>\n"}, {"tags": ["ruby", "git", "backup", "gitlab"], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 6639874, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eda5dbbbde54e8f5eefab878e3b0add0?s=128&d=identicon&r=PG&f=1", "display_name": "M. Petersen", "link": "https://stackoverflow.com/users/6639874/m-petersen"}, "edited": false, "score": 0, "creation_date": 1470822339, "post_id": 38869355, "comment_id": 65101770, "body": "If I check with /dev/null 2&gt;&amp;1. I get the output: -bash: /dev/null: Permission denied  I tried to change the chmod and chown of the dev/null and repo. But I still get the persmission denied message. What am I doing wrong?"}, {"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "reply_to_user": {"reputation": 57, "user_id": 6639874, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eda5dbbbde54e8f5eefab878e3b0add0?s=128&d=identicon&r=PG&f=1", "display_name": "M. Petersen", "link": "https://stackoverflow.com/users/6639874/m-petersen"}, "edited": false, "score": 0, "creation_date": 1470822492, "post_id": 38869355, "comment_id": 65101875, "body": "Is your host a bare metal machine or some kind of vm or container? It looks like your user has no write permission to /dev/null. Which OS do you use?"}, {"owner": {"reputation": 57, "user_id": 6639874, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eda5dbbbde54e8f5eefab878e3b0add0?s=128&d=identicon&r=PG&f=1", "display_name": "M. Petersen", "link": "https://stackoverflow.com/users/6639874/m-petersen"}, "edited": false, "score": 0, "creation_date": 1470822560, "post_id": 38869355, "comment_id": 65101924, "body": "I use a vm  (shell in a box)"}, {"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "reply_to_user": {"reputation": 57, "user_id": 6639874, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eda5dbbbde54e8f5eefab878e3b0add0?s=128&d=identicon&r=PG&f=1", "display_name": "M. Petersen", "link": "https://stackoverflow.com/users/6639874/m-petersen"}, "edited": false, "score": 0, "creation_date": 1470822841, "post_id": 38869355, "comment_id": 65102104, "body": "I don&#39;t know your vm you can try <code>ls -l &#47;dev&#47;null</code> to check if this device exists. When it exists you don&#39;t have the permission to use. You have to ask your admin or the docs how to fix this issue.  <code>&gt;&#47;dev&#47;null 2&gt;&amp;1</code> is not realy important. It should only silence the comment."}, {"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "reply_to_user": {"reputation": 57, "user_id": 6639874, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eda5dbbbde54e8f5eefab878e3b0add0?s=128&d=identicon&r=PG&f=1", "display_name": "M. Petersen", "link": "https://stackoverflow.com/users/6639874/m-petersen"}, "edited": false, "score": 0, "creation_date": 1470823244, "post_id": 38869355, "comment_id": 65102373, "body": "If chmod does not work, maybe you don&#39;t have the permission to change the permissions or some thing like apparmor prevents you from accessing this device. You can use <code>uname -a</code> to get more informations about your system. <code>ps -ef</code> can also tell some thing about whats going on on your vm."}, {"owner": {"reputation": 57, "user_id": 6639874, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eda5dbbbde54e8f5eefab878e3b0add0?s=128&d=identicon&r=PG&f=1", "display_name": "M. Petersen", "link": "https://stackoverflow.com/users/6639874/m-petersen"}, "edited": false, "score": 0, "creation_date": 1470823288, "post_id": 38869355, "comment_id": 65102409, "body": "What do you mean with silence the comment?"}, {"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "reply_to_user": {"reputation": 57, "user_id": 6639874, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eda5dbbbde54e8f5eefab878e3b0add0?s=128&d=identicon&r=PG&f=1", "display_name": "M. Petersen", "link": "https://stackoverflow.com/users/6639874/m-petersen"}, "edited": false, "score": 0, "creation_date": 1470823523, "post_id": 38869355, "comment_id": 65102580, "body": "When you execute a command it often send some status informations to stdout or stderr. What you can see in the console. When you execute a command via script you don&#39;t need this aoutput, so you send it to &quot;nirvana&quot; aka <code>&#47;dev&#47;null</code>. You can replace <code>&#47;dev&#47;null</code> with every file you want for later use in your case, for instance <code>&#47;tmp&#47;output.txt</code> you only need sufficent write permissions for this file and enough free disk space. But keep in mind that you can leak confidential informations when you write data to a tmp folder."}], "tags": [], "owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "is_accepted": true, "score": 1, "last_activity_date": 1470821294, "creation_date": 1470821294, "answer_id": 38869355, "question_id": 38869074, "link": "https://stackoverflow.com/questions/38869074/what-does-this-ruby-code-mean/38869355#38869355", "title": "What does this Ruby code mean?", "body": "<p><code>Kernel.system</code> calls the given shell command. When it fails it return a <code>false</code> value.</p>\n\n<p>In your case it means <code>git clone --bare #{path_to_bundle} #{project.repository.path_to_repo} &gt; /dev/null 2&gt;&amp;1</code> fails.</p>\n\n<p>You can check why it fails when you execute this command on the command line by hand without <code>&gt; /dev/null 2&gt;&amp;1</code> . </p>\n\n<p>To get the command you can at a debug print before the command </p>\n\n<p><code>if Kernel.system(pp(\"git clone --bare #{path_to_bundle} #{project.repository.path_to_repo} &gt; /dev/null 2&gt;&amp;1\"))</code></p>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 6639874, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eda5dbbbde54e8f5eefab878e3b0add0?s=128&d=identicon&r=PG&f=1", "display_name": "M. Petersen", "link": "https://stackoverflow.com/users/6639874/m-petersen"}, "edited": false, "score": 0, "creation_date": 1470823436, "post_id": 38869421, "comment_id": 65102517, "body": "If I do this I get the ouput: pid 7169(every pid has a diffrent number) exit 128 (all exits have the same number)"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 57, "user_id": 6639874, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eda5dbbbde54e8f5eefab878e3b0add0?s=128&d=identicon&r=PG&f=1", "display_name": "M. Petersen", "link": "https://stackoverflow.com/users/6639874/m-petersen"}, "edited": false, "score": 0, "creation_date": 1470825572, "post_id": 38869421, "comment_id": 65103939, "body": "When you get error code 128 <a href=\"https://stackoverflow.com/questions/9617336/how-to-resolve-git-did-not-exit-cleanly-exit-code-128-error-on-tortoisegit\">this question and the answers</a> might be of interest for you."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1470821442, "creation_date": 1470821442, "answer_id": 38869421, "question_id": 38869074, "link": "https://stackoverflow.com/questions/38869074/what-does-this-ruby-code-mean/38869421#38869421", "title": "What does this Ruby code mean?", "body": "<p>From the <a href=\"http://ruby-doc.org/core-2.3.1/Kernel.html#method-i-system\" rel=\"nofollow\">docs</a>:</p>\n\n<blockquote>\n  <p>system returns <code>true</code> if the command gives zero exit status, <code>false</code> for non zero exit status. Returns <code>nil</code> if command execution fails. An error status is available in <code>$?</code>.</p>\n</blockquote>\n\n<p>That said: Falling into constantly in the failing state means that the system command returned <code>false</code> or <code>nil</code>. You might want to check <code>$?</code> for the reason:</p>\n\n<pre><code>command = Kernel.system(\"git clone --bare #{path_to_bundle} #{project.repository.path_to_repo} &gt; /dev/null 2&gt;&amp;1\")\nif command\n  puts \"[DONE]\".green\nelse\n  puts \"[FAILED]\".red\n  puts \"Reason:\"\n  puts $?\nend \n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 6639874, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eda5dbbbde54e8f5eefab878e3b0add0?s=128&d=identicon&r=PG&f=1", "display_name": "M. Petersen", "link": "https://stackoverflow.com/users/6639874/m-petersen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 38869355, "answer_count": 2, "score": 0, "last_activity_date": 1470821442, "creation_date": 1470820607, "last_edit_date": 1470820795, "question_id": 38869074, "link": "https://stackoverflow.com/questions/38869074/what-does-this-ruby-code-mean", "title": "What does this Ruby code mean?", "body": "<p>I am trying to make a backup restore of gitlab and it kind of works but th command line always says that the restore of the repositories failed. I think I found the conditional statement in the code which responsible for the [failed] statement. Has someone a clue what this is doing or know a direction in which I should go to find my mistake? </p>\n\n<pre><code> if Kernel.system(\"git clone --bare #{path_to_bundle} #{project.repository.path_to_repo} &gt; /dev/null 2&gt;&amp;1\")\nputs \"[DONE]\".green                                                                                                                                                               \n          else                                                                                                                                                                                \n            puts \"[FAILED]\".red                                                                                                                                                               \n          end \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1470824605, "post_id": 38869067, "comment_id": 65103275, "body": "I can&#39;t say for sure but <code>include_examples</code> works only once per context. I think you have to surround it with a uniq context like  <code>context &quot;...#{t}&quot; do</code>"}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 3078727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75a92a688670a3d5c2524b89df9e75c4?s=128&d=identicon&r=PG&f=1", "display_name": "sLeitner", "link": "https://stackoverflow.com/users/3078727/sleitner"}, "edited": false, "score": 0, "creation_date": 1472049360, "post_id": 38875327, "comment_id": 65598007, "body": "could you think of any reason why these loops would work individually (if I comment out the other) but not in combination? By work I mean the tests pass. But running everything results in some failing tests and tweaking the Hashes to leave out a few filter options would result in different tests failing. I brought the minimal required examples (to reproduce the failures) down to 50% (still ~350) and am running rspec --bisect on them, but that seems like it&#39;s going to take very long, after more than an hour I saw this <code>- Remaining non-failing examples (337):</code>"}, {"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "reply_to_user": {"reputation": 145, "user_id": 3078727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75a92a688670a3d5c2524b89df9e75c4?s=128&d=identicon&r=PG&f=1", "display_name": "sLeitner", "link": "https://stackoverflow.com/users/3078727/sleitner"}, "edited": false, "score": 0, "creation_date": 1472057008, "post_id": 38875327, "comment_id": 65603113, "body": "I don&#39;t see in the question, and I didn&#39;t suggest in my answer, anything that should have side effects that might break later tests. Unless you can think of something in these tests that changes global state, <code>rspec --bisect</code> and debugging the result seems like the way to go."}, {"owner": {"reputation": 145, "user_id": 3078727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75a92a688670a3d5c2524b89df9e75c4?s=128&d=identicon&r=PG&f=1", "display_name": "sLeitner", "link": "https://stackoverflow.com/users/3078727/sleitner"}, "edited": false, "score": 1, "creation_date": 1472222613, "post_id": 38875327, "comment_id": 65680263, "body": "Found the problem, thought I&#39;d let you know that it had nothing to do with what was discussed here, your suggestion works beautifully!"}], "tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": true, "score": 3, "last_activity_date": 1470836967, "creation_date": 1470836967, "answer_id": 38875327, "question_id": 38869067, "link": "https://stackoverflow.com/questions/38869067/using-a-loop-variable-in-a-let-in-a-shared-example-call/38875327#38875327", "title": "Using a loop variable in a let in a shared example call", "body": "<p><strong>Regarding your inability to call <code>.times</code> on the instance variables you defined in <code>before :context</code> blocks:</strong></p>\n\n<p>RSpec works in two phases. In the first phase it executes the Ruby code in the spec file; the <code>let</code> and <code>before</code> and <code>it</code> methods store their blocks to be run later. In the second phase it actually runs the tests, i.e. the contents of <code>let</code> and <code>before</code> and <code>it</code> blocks. The <code>before :context</code> blocks don't define thost instance variables until the second phase, so the <code>.times</code> statements, which run in the first phase, can't see the instance variables.</p>\n\n<p>The solution is to put the filter options someplace that's initialized before RSpec gets to the <code>.times</code> statements, like a constant.</p>\n\n<p><strong>Regarding <code>include_examples</code> in a loop always using the same value of the loop variable:</strong></p>\n\n<p><code>include_examples</code> includes the given shared examples in the current context. If you include the same examples more than once, the examples themselves will be included multiple times, but <code>let</code>s in the last inclusion will overwrite <code>lets</code> in all of the previous inclusions. <a href=\"https://www.relishapp.com/rspec/rspec-core/docs/example-groups/shared-examples\" rel=\"nofollow\">The RSpec documentation has a clear example.</a></p>\n\n<p>The solution is to use <code>it_behaves_like</code> instead of <code>include_examples</code>. <code>it_behaves_like</code> puts the included examples in a nested example group, so the <code>let</code>s can't overwrite one another.</p>\n\n<p>Applying those two solutions gives something like the following:</p>\n\n<pre><code>describe 'pdf' do\n  describe 'basic content' do\n    MAJOR_FILTER_OPTIONS = # code that initializes them\n    MAJOR_FILTER_OPTIONS.values.each do |filter_option|\n      it_behaves_like 'first_3_pages' do\n        let(:pdf) do\n          filter_options = filter_setting(filter_option)\n          ProjectReport::ReportGenerator.new.generate(project, filter_options, user).render\n        end\n        let(:page_analysis) { PDF::Inspector::Page.analyze(pdf) }\n      end\n    end\n\n    FILTER_OPTIONS_WITH_DOCU = # code that chooses them from MAJOR_FILTER_OPTIONS\n    FILTER_OPTIONS_WITH_DOCU.values.each do |filter_option|\n      it_behaves_like 'documentation_content' do\n        let(:pdf) do\n          filter_options = filter_setting(filter_option)\n          ProjectReport::ReportGenerator.new.generate(project, filter_options, user).render\n        end\n        let(:page_analysis) { PDF::Inspector::Page.analyze(pdf) }\n      end\n    end\n\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 3078727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75a92a688670a3d5c2524b89df9e75c4?s=128&d=identicon&r=PG&f=1", "display_name": "sLeitner", "link": "https://stackoverflow.com/users/3078727/sleitner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1372, "favorite_count": 0, "accepted_answer_id": 38875327, "answer_count": 1, "score": 2, "last_activity_date": 1470837197, "creation_date": 1470820581, "last_edit_date": 1470837197, "question_id": 38869067, "link": "https://stackoverflow.com/questions/38869067/using-a-loop-variable-in-a-let-in-a-shared-example-call", "title": "Using a loop variable in a let in a shared example call", "body": "<p>I'm writing specs for a PDF generated with RoR &amp; Prawn. There are a bunch of filter options (24 of them) for that PDF. In order to not miss any important specs I'm generating the filter options in a <code>before :context</code> block and saving them in an instance variable.</p>\n\n<p>Where my problem starts is when trying to iterate over all of the filter options and run shared examples, to test for basics that don't change much with different filters.</p>\n\n<p>This is what my code looks like for all these filters and the documentations filter (the <code>filter_setting</code> method is just a helper to access specific <code>@major_filter_options</code>):</p>\n\n<pre><code>describe 'pdf' do\n  before :context do\n    @major_filter_options = {}\n    @major_filter_options.define_them\n  end\n\n  describe 'basic content' do\n    before :context do\n      @filter_options_with_docu = {}\n      # find all the filters that have the docu option enabled\n      @major_filter_options.each do |key, mfo|\n        @filter_options_with_docu[key] = mfo if key.to_s.include? 'docu'\n      end\n    end\n\n    24.times do |t| # can't access major_filter_options.size here.. it's nil.\n      include_examples 'first_3_pages' do\n        let(:pdf) do\n          filter_options = filter_setting(@major_filter_options.keys[t])\n          ProjectReport::ReportGenerator.new.generate(project, filter_options, user).render\n        end\n        let(:page_analysis) { PDF::Inspector::Page.analyze(pdf) }\n      end\n    end\n\n    12.times do |t| # @print_options_with_docu is also nil at this point\n      include_examples 'documentation_content' do\n        let(:pdf) do\n          filter_options = filter_setting(@filter_options_with_docu.keys[t])\n          ProjectReport::ReportGenerator.new.generate(project, filter_options, user).render\n        end\n        let(:page_analysis) { PDF::Inspector::Page.analyze(pdf) }\n      end\n    end\n    # ...\n  end\n</code></pre>\n\n<p>I have 2 big problems:</p>\n\n<p>One is that this <code>24.times</code>, <code>12.times</code> and so on (there's a bunch of them) are bothering me because it makes maintainance a lot harder. A new filter option would change all the values, and finding all of the values to change them is very susceptible to mistakes in my opinion.</p>\n\n<p>The other problem is the fact that the variable iterated here like this:\n<code>12.times do |t|</code> doesn't actually seem to iterate when I'm inside of any of these <code>let</code>'s:</p>\n\n<pre><code>let(:pdf) do\n  filter_options = filter_setting(@major_filter_options.keys[t])\n  puts t\n  # ...\nend\n</code></pre>\n\n<p>The <code>puts t</code> here will print 11 every time (the filter is also the same every time).\nAfter some reading I found <a href=\"https://gist.github.com/nruth/501296\" rel=\"nofollow\">a gist example</a>. The problem looked similar enough, but sadly puting a <code>describe</code> block around it didn't do much. </p>\n\n<pre><code>24.times do |t|\n  describe\n    # same as before\n  end\nend\n</code></pre>\n\n<p>Interestingly enough though, when doing <code>puts t</code> again in that setup, it would be 6 every time, which left me a little more confused.</p>\n\n<p>I should also mention, that the reason for splitting them up like this is that I have shared examples that only apply for certain filters. If someone has a better idea on how to, for example iterate over the <code>@major_filter_options</code> and then just call certain shared examples depending on the current hash <code>key</code>, I'm all ears!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pdf-generation", "prawn", "prawnto"], "comments": [{"owner": {"reputation": 1165, "user_id": 2814536, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6023473b3febbe7e4a9cd20f79dd9e7b?s=128&d=identicon&r=PG&f=1", "display_name": "power", "link": "https://stackoverflow.com/users/2814536/power"}, "edited": false, "score": 0, "creation_date": 1470820216, "post_id": 38868846, "comment_id": 65100181, "body": "in which file you are using pdf.text &quot;Hello World!&quot;?"}, {"owner": {"reputation": 5251, "user_id": 903842, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfe7b10dbda86c6cb930c1ae40abfc2c?s=128&d=identicon&r=PG", "display_name": "Nimir", "link": "https://stackoverflow.com/users/903842/nimir"}, "edited": false, "score": 0, "creation_date": 1470821035, "post_id": 38868846, "comment_id": 65100814, "body": "the guid you are using is pretty old and might be outdated &gt; try this one <a href=\"http://www.idyllic-software.com/blog/creating-pdf-using-prawn-in-ruby-on-rails/\" rel=\"nofollow noreferrer\">idyllic-software.com/blog/&hellip;</a>"}, {"owner": {"reputation": 2123, "user_id": 5374999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4YXdN.jpg?s=128&g=1", "display_name": "Afsanefda", "link": "https://stackoverflow.com/users/5374999/afsanefda"}, "reply_to_user": {"reputation": 1165, "user_id": 2814536, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6023473b3febbe7e4a9cd20f79dd9e7b?s=128&d=identicon&r=PG&f=1", "display_name": "power", "link": "https://stackoverflow.com/users/2814536/power"}, "edited": false, "score": 0, "creation_date": 1470823268, "post_id": 38868846, "comment_id": 65102397, "body": "@power I&#39;m using it in show.pdf.prawn file in veiw"}, {"owner": {"reputation": 2123, "user_id": 5374999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4YXdN.jpg?s=128&g=1", "display_name": "Afsanefda", "link": "https://stackoverflow.com/users/5374999/afsanefda"}, "reply_to_user": {"reputation": 5251, "user_id": 903842, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfe7b10dbda86c6cb930c1ae40abfc2c?s=128&d=identicon&r=PG", "display_name": "Nimir", "link": "https://stackoverflow.com/users/903842/nimir"}, "edited": false, "score": 0, "creation_date": 1470823486, "post_id": 38868846, "comment_id": 65102551, "body": "@Nimir I tried this before and it worked properly but I have problems in Generating Tables in PDF file So i decided to use this solution instead!"}], "answers": [{"tags": [], "owner": {"reputation": 2123, "user_id": 5374999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4YXdN.jpg?s=128&g=1", "display_name": "Afsanefda", "link": "https://stackoverflow.com/users/5374999/afsanefda"}, "is_accepted": true, "score": 0, "last_activity_date": 1470844794, "creation_date": 1470844794, "answer_id": 38878360, "question_id": 38868846, "link": "https://stackoverflow.com/questions/38868846/undefined-local-variable-or-method-pdf-for/38878360#38878360", "title": "undefined local variable or method `pdf&#39; for", "body": "<p>I myself Found the answer Let's review Together.\nthis is my controller</p>\n\n<pre><code>def show\n  @resume = current_user.resume\nend\n</code></pre>\n\n<p>this is my view (button):</p>\n\n<pre><code>&lt;%= link_to t(:ExporttoPDF) , resume_path( :format =&gt; \"pdf\"),class:\"btn btn-danger btn-lg\"%&gt;\n</code></pre>\n\n<p>and i added all of these gems to my gem file!</p>\n\n<pre><code> gem 'prawn_rails'\n gem 'prawn'\n gem 'prawn-table', '~&gt; 0.1.0'\n gem 'prawnto'\n</code></pre>\n\n<p>and this is my <strong>show.pdf.prawn</strong> file in resume view!</p>\n\n<pre><code>pdf.text \"Hello World!\"\n</code></pre>\n\n<p>and it dose work like a charm!\n<strong>Note</strong>: I think my controller had some problem :)</p>\n"}], "owner": {"reputation": 2123, "user_id": 5374999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4YXdN.jpg?s=128&g=1", "display_name": "Afsanefda", "link": "https://stackoverflow.com/users/5374999/afsanefda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 523, "favorite_count": 0, "accepted_answer_id": 38878360, "answer_count": 1, "score": 0, "last_activity_date": 1470844794, "creation_date": 1470820039, "question_id": 38868846, "link": "https://stackoverflow.com/questions/38868846/undefined-local-variable-or-method-pdf-for", "title": "undefined local variable or method `pdf&#39; for", "body": "<p>I'm trying to generate a <strong>pdf</strong> file in rails with <strong>Prawn</strong>!\nas explained <a href=\"http://www.railstips.org/blog/archives/2008/10/13/how-to-generate-pdfs-in-rails-with-prawn/\" rel=\"nofollow\">here</a></p>\n\n<p>Exactly the same!\nbut I've Got this Error :</p>\n\n<pre><code>undefined local variable or method `pdf' for #&lt;#&lt;Class:0x005619ea6fecd0&gt;:0x005619e9f54660&gt;\n</code></pre>\n\n<p>for this line!</p>\n\n<pre><code>pdf.text \"Hello World!\"\n</code></pre>\n\n<p>It seems It doesn't <strong>understand</strong> the 'pdf.' \nCould you possibly help me ??\nThanks in advance :) </p>\n"}, {"tags": ["ruby", "capybara"], "answers": [{"tags": [], "owner": {"reputation": 5470, "user_id": 2568849, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/UxtGh.png?s=128&g=1", "display_name": "Mesut GUNES", "link": "https://stackoverflow.com/users/2568849/mesut-gunes"}, "is_accepted": false, "score": 0, "last_activity_date": 1470821099, "creation_date": 1470821099, "answer_id": 38869278, "question_id": 38868671, "link": "https://stackoverflow.com/questions/38868671/how-to-reload-page-until-a-button-appears-using-capybara-and-ruby/38869278#38869278", "title": "how to reload page until a button appears using capybara and ruby", "body": "<p>reoload until <code>page.has_selector?</code> returns true, check this:</p>\n\n<pre><code>while true \n  page.evaluate_script 'window.location.reload()'\n  if page.has_selector?(\"css_selector\")\n    break\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5470, "user_id": 2568849, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/UxtGh.png?s=128&g=1", "display_name": "Mesut GUNES", "link": "https://stackoverflow.com/users/2568849/mesut-gunes"}, "reply_to_user": {"reputation": 1055, "user_id": 742103, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b23d0daa17e77ed9c8a18f47ebd37afb?s=128&d=identicon&r=PG", "display_name": "waqas", "link": "https://stackoverflow.com/users/742103/waqas"}, "edited": false, "score": 1, "creation_date": 1470834716, "post_id": 38870355, "comment_id": 65110238, "body": "@waqas <code>page.has_selector(...) </code> should be <code>page.has_selector?(...) </code> otherway it won&#39;t work"}, {"owner": {"reputation": 2374, "user_id": 1941418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8940942c798e82d460e0c058acfb3b7?s=128&d=identicon&r=PG", "display_name": "smefju", "link": "https://stackoverflow.com/users/1941418/smefju"}, "reply_to_user": {"reputation": 5470, "user_id": 2568849, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/UxtGh.png?s=128&g=1", "display_name": "Mesut GUNES", "link": "https://stackoverflow.com/users/2568849/mesut-gunes"}, "edited": false, "score": 0, "creation_date": 1470834808, "post_id": 38870355, "comment_id": 65110314, "body": "@MesutG&#252;ne\u015f Thanks. Upvoted and fixed in the code snippet."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1470854275, "post_id": 38870355, "comment_id": 65123332, "body": "Since <code>page.has_selector?</code> will already wait up to Capybara.default_max_wait_time for the element to appear this will never actually retry because the Timeout will trigger before the first attempt ends if the element doesn&#39;t appear"}, {"owner": {"reputation": 1619, "user_id": 288448, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/57f8ee211bf2020efb3b8bec42feeb33?s=128&d=identicon&r=PG", "display_name": "Ryan Sandridge", "link": "https://stackoverflow.com/users/288448/ryan-sandridge"}, "edited": false, "score": 1, "creation_date": 1554767006, "post_id": 38870355, "comment_id": 97864500, "body": "Per the <a href=\"https://www.rubydoc.info/github/jnicklas/capybara/Capybara%2FSession:execute_script\" rel=\"nofollow noreferrer\">Capybara documentation</a>, you should use <code>execute_script</code> instead of <code>evaluate_script</code> here, since you aren&#39;t checking the value of the result."}], "tags": [], "owner": {"reputation": 2374, "user_id": 1941418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8940942c798e82d460e0c058acfb3b7?s=128&d=identicon&r=PG", "display_name": "smefju", "link": "https://stackoverflow.com/users/1941418/smefju"}, "is_accepted": true, "score": 4, "last_activity_date": 1470834775, "last_edit_date": 1470834775, "creation_date": 1470823769, "answer_id": 38870355, "question_id": 38868671, "link": "https://stackoverflow.com/questions/38868671/how-to-reload-page-until-a-button-appears-using-capybara-and-ruby/38870355#38870355", "title": "how to reload page until a button appears using capybara and ruby", "body": "<p>While Mesut's code should work fine, I would re-write it as:</p>\n\n<pre><code>Timeout.timeout(Capybara.default_max_wait_time) do\n  loop do\n    page.evaluate_script(\"window.location.reload()\")\n    break if page.has_selector?(...)\n  end\nend\n</code></pre>\n\n<p>This will make sure to fail if it will have to wait more than timeout defined in Capybara settings. It can be useful when for example specs are running on the CI server.</p>\n\n<p>Be aware that it can still lead to unexpected behaviors in some drivers, because it can interrupt while some scripts are evaluating.</p>\n"}], "owner": {"reputation": 1055, "user_id": 742103, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b23d0daa17e77ed9c8a18f47ebd37afb?s=128&d=identicon&r=PG", "display_name": "waqas", "link": "https://stackoverflow.com/users/742103/waqas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2918, "favorite_count": 0, "accepted_answer_id": 38870355, "answer_count": 2, "score": 1, "last_activity_date": 1470834775, "creation_date": 1470819593, "question_id": 38868671, "link": "https://stackoverflow.com/questions/38868671/how-to-reload-page-until-a-button-appears-using-capybara-and-ruby", "title": "how to reload page until a button appears using capybara and ruby", "body": "<p>I want to click a button after an action and button does not appear until and unless I reload the page. And some times it takes some time to appear the button and I have to reload page for more than once. I don't want to put static delays. So is there a way to achieve following using capybara and ruby:</p>\n\n<pre><code>  do\n    page.evaluate_script(\"window.location.reload()\")\n  until a button appears\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "edited": false, "score": 4, "creation_date": 1470819397, "post_id": 38868582, "comment_id": 65099654, "body": "The <code>do</code> ... <code>end</code> is a <i>block</i>, essentially an anonymous function, passed to <code>foo</code>. It can be executed within the <code>foo</code> function using <code>yield</code>, but <code>yield</code> is never called so the block never executes."}, {"owner": {"reputation": 43, "user_id": 5908279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e66f1cf90e57e0efd06756f0273adecf?s=128&d=identicon&r=PG&f=1", "display_name": "everyonecancode", "link": "https://stackoverflow.com/users/5908279/everyonecancode"}, "reply_to_user": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "edited": false, "score": 0, "creation_date": 1470819731, "post_id": 38868582, "comment_id": 65099864, "body": "Thank you so much, it&#39;s exactly what I was looking for. Could you make your comment an official answer, so I could set it as a solution and close this question?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1470832991, "post_id": 38868582, "comment_id": 65108902, "body": "Your question is unclear. Ruby doesn&#39;t have functions. There are at least three different things in the code snippet you posted that one might conceivably call a &quot;function&quot;, although none of them are called that way in Ruby. Which one are you talking about?"}, {"owner": {"reputation": 43, "user_id": 5908279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e66f1cf90e57e0efd06756f0273adecf?s=128&d=identicon&r=PG&f=1", "display_name": "everyonecancode", "link": "https://stackoverflow.com/users/5908279/everyonecancode"}, "edited": false, "score": 0, "creation_date": 1470896335, "post_id": 38868582, "comment_id": 65137462, "body": "In the tutorials I&#39;ve been using I learned, that ruby has both function and methods. My question was about the <code>foo</code> function, where you call it with a parameter, and then use do ... end block.  Also, this question has already been answered. The usage of anonymous <i>function</i> by using <code>yield</code> is what I&#39;ve been looking for."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 5908279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e66f1cf90e57e0efd06756f0273adecf?s=128&d=identicon&r=PG&f=1", "display_name": "everyonecancode", "link": "https://stackoverflow.com/users/5908279/everyonecancode"}, "edited": false, "score": 0, "creation_date": 1470820427, "post_id": 38868781, "comment_id": 65100349, "body": "Thanks a lot (especially for a link), but OrangeFlash81 was first to answer my question. Therefore, I gave him the &quot;answer&quot; status, even though this one has more meat :)."}], "tags": [], "owner": {"reputation": 5251, "user_id": 903842, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cfe7b10dbda86c6cb930c1ae40abfc2c?s=128&d=identicon&r=PG", "display_name": "Nimir", "link": "https://stackoverflow.com/users/903842/nimir"}, "is_accepted": false, "score": 3, "last_activity_date": 1470819886, "creation_date": 1470819886, "answer_id": 38868781, "question_id": 38868582, "link": "https://stackoverflow.com/questions/38868582/ruby-function-call-foo-bar-do/38868781#38868781", "title": "Ruby function call: foo &quot;bar&quot; do", "body": "<p>Ruby block is a code you put around <code>do</code> - <code>end</code> keywords!</p>\n\n<p>Blocks has <strong>yield</strong> keyword to execute some code. Take a look at this (source: <a href=\"http://mixandgo.com/blog/mastering-ruby-blocks-in-less-than-5-minutes\" rel=\"nofollow noreferrer\">http://mixandgo.com/blog/mastering-ruby-blocks-in-less-than-5-minutes</a>):</p>\n\n<p><a href=\"https://i.stack.imgur.com/4RQG9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4RQG9.png\" alt=\"enter image description here\"></a></p>\n\n<p>in your case your block <code>foo</code> didn't have a <code>yield</code> and hence when called it just executed the part in the block.Try adding a <strong>yield</strong> and you will get the exception as expected.</p>\n\n<p>Checkout the above link to further explore blocks as they are one of Ruby powerful tools.</p>\n"}, {"tags": [], "owner": {"reputation": 9435, "user_id": 2626000, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/j8GY0.jpg?s=128&g=1", "display_name": "Aaron Christiansen", "link": "https://stackoverflow.com/users/2626000/aaron-christiansen"}, "is_accepted": true, "score": 2, "last_activity_date": 1470820026, "creation_date": 1470820026, "answer_id": 38868840, "question_id": 38868582, "link": "https://stackoverflow.com/questions/38868582/ruby-function-call-foo-bar-do/38868840#38868840", "title": "Ruby function call: foo &quot;bar&quot; do", "body": "<p>The <code>do</code> ... <code>end</code> is a <em>block</em>, essentially an anonymous function, passed to <code>foo</code>. It can be executed within the <code>foo</code> function using <code>yield</code>, but <code>yield</code> is never called so the block never executes.</p>\n\n<p>You may also see these blocks declared using a <code>{}</code> syntax, which means the same as <code>do</code> ... <code>end</code>. They're mostly used in functional programming functions like <code>map</code> or <code>select</code>.</p>\n"}], "owner": {"reputation": 43, "user_id": 5908279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e66f1cf90e57e0efd06756f0273adecf?s=128&d=identicon&r=PG&f=1", "display_name": "everyonecancode", "link": "https://stackoverflow.com/users/5908279/everyonecancode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 38868840, "answer_count": 2, "score": 0, "last_activity_date": 1470820026, "creation_date": 1470819308, "question_id": 38868582, "link": "https://stackoverflow.com/questions/38868582/ruby-function-call-foo-bar-do", "title": "Ruby function call: foo &quot;bar&quot; do", "body": "<p>I'm (very) new to ruby. I found an interesting way to call a function, but I can't figure out how it really works.</p>\n\n<pre><code>def foo (arg1)\n  puts arg1\nend\n\nfoo \"bar\" do\n  \"hello\"\n  puts \"world\"\n  thisStuff\nend\n</code></pre>\n\n<p>Could someone please explain to me what is happening here? There is no function called \"thisStuff\", however the code compiles without a problem and the console result is \"bar\".</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "actionmailer", "forum", "rails-engines"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1470818711, "post_id": 38868145, "comment_id": 65099212, "body": "please show your code attempt and show the error."}, {"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1470818749, "post_id": 38868145, "comment_id": 65099232, "body": "Within your development.log you should see some more information about the error."}, {"owner": {"reputation": 363, "user_id": 5549118, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/1528435484134902/picture?type=large", "display_name": "Pirun Seng", "link": "https://stackoverflow.com/users/5549118/pirun-seng"}, "edited": false, "score": 0, "creation_date": 1470818945, "post_id": 38868145, "comment_id": 65099350, "body": "My thredded config:  <code>Thredded.email_from = &#39;myemail@gmail.com&#39;</code>  <code>Thredded.email_incoming_host = &#39;localhost:3000&#39;</code>  <code>Thredded.email_reply_to = -&gt; postable { &quot;#{postable.hash_id}@#{Thredded.email_incoming_host}&quot; }</code>  Error:  <code>Net::SMTPFatalError (554 Transaction failed: Domain contains illegal character )</code>  This is what I understand from the error. Is my config wrong?"}], "owner": {"reputation": 363, "user_id": 5549118, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/1528435484134902/picture?type=large", "display_name": "Pirun Seng", "link": "https://stackoverflow.com/users/5549118/pirun-seng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1470818055, "creation_date": 1470818055, "question_id": 38868145, "link": "https://stackoverflow.com/questions/38868145/thredded-ruby-gem-how-to-config-email-of-thredded-initializer", "title": "Thredded Ruby Gem - How To Config Email of Thredded Initializer", "body": "<p>I'm a fresh learner in RoR.</p>\n\n<p>Recently, I've been giving a try to have a forum added in my Rails site.\nI am suggested to try <a href=\"https://github.com/thredded/thredded\" rel=\"nofollow\">Thredded</a>.</p>\n\n<p>It has no wiki for setting email yet, that lead me to post a question here.\nThere are only some comments on the initializer about setting up email, but not much clear enough for me to implement, and I always get 500 error since my configuration is not right.</p>\n\n<p>I appreciate for any answers, ideas, or clarification.\nThanks,</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "email", "actionmailer"], "comments": [{"owner": {"reputation": 923, "user_id": 2203953, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/hE0Fc.jpg?s=128&g=1", "display_name": "Pavel Tkackenko", "link": "https://stackoverflow.com/users/2203953/pavel-tkackenko"}, "edited": false, "score": 0, "creation_date": 1470818144, "post_id": 38868118, "comment_id": 65098850, "body": "Have you tried griddler? <a href=\"http://griddler.io/\" rel=\"nofollow noreferrer\">griddler.io</a>"}, {"owner": {"reputation": 124, "user_id": 6698933, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8TE5wr18GPM/AAAAAAAAAAI/AAAAAAAAAMs/uqS3s_dSrdA/photo.jpg?sz=128", "display_name": "Tisamu", "link": "https://stackoverflow.com/users/6698933/tisamu"}, "reply_to_user": {"reputation": 923, "user_id": 2203953, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/hE0Fc.jpg?s=128&g=1", "display_name": "Pavel Tkackenko", "link": "https://stackoverflow.com/users/2203953/pavel-tkackenko"}, "edited": false, "score": 0, "creation_date": 1470818245, "post_id": 38868118, "comment_id": 65098914, "body": "That requires using of  SendGrid, Cloudmailin, Postmark or Mandrill, that&#39;s what I was talking when I mentioned the grabber thing. =/"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1470819240, "post_id": 38868118, "comment_id": 65099549, "body": "What&#39;s your question? You want code, tutorial? Probably your question is too broad."}, {"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1470819367, "post_id": 38868118, "comment_id": 65099631, "body": "Last mailman updates are a little bit old. I think until now they don&#39;t support rails 5. I would try to fetch mails via getmail on linux and send them via stdin to rails runner script. Ruby on Rails guide &quot;Action Mailer Basics&quot; describes how ActionMailer can read an email from stdin and work with this data."}, {"owner": {"reputation": 124, "user_id": 6698933, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8TE5wr18GPM/AAAAAAAAAAI/AAAAAAAAAMs/uqS3s_dSrdA/photo.jpg?sz=128", "display_name": "Tisamu", "link": "https://stackoverflow.com/users/6698933/tisamu"}, "edited": false, "score": 0, "creation_date": 1470819524, "post_id": 38868118, "comment_id": 65099738, "body": "Yes I saw that, that was a bit a blur to me but i&#39;m gonna give another eye on it, thanks for answering.  And i&#39;m Open to any answer, code, examples, tutorials."}], "answers": [{"comments": [{"owner": {"reputation": 124, "user_id": 6698933, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8TE5wr18GPM/AAAAAAAAAAI/AAAAAAAAAMs/uqS3s_dSrdA/photo.jpg?sz=128", "display_name": "Tisamu", "link": "https://stackoverflow.com/users/6698933/tisamu"}, "edited": false, "score": 0, "creation_date": 1470823538, "post_id": 38868794, "comment_id": 65102589, "body": "I&#39;ll try that, Thanks a lot"}], "tags": [], "owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "is_accepted": true, "score": 0, "last_activity_date": 1470831839, "last_edit_date": 1470831839, "creation_date": 1470819919, "answer_id": 38868794, "question_id": 38868118, "link": "https://stackoverflow.com/questions/38868118/receive-mails-with-rails/38868794#38868794", "title": "Receive Mails with Rails", "body": "<p>I suggest you to make an email(any popular provider <em>except gmail</em>) box and configure it to use the pop server. To read it from box use the <a href=\"https://github.com/mikel/mail#getting-emails-from-a-pop-server\" rel=\"nofollow\"><code>mail</code></a> gem.</p>\n\n<pre><code>Mail.defaults do\n  retriever_method :pop3, :address    =&gt; \"pop.supermail.com\",\n                          :port       =&gt; 995,\n                          :user_name  =&gt; '&lt;username&gt;',\n                          :password   =&gt; '&lt;password&gt;',\n                          :enable_ssl =&gt; true\nend\n</code></pre>\n\n<p>Then make a daemon to read all income emails and save it to the database, <a href=\"https://github.com/mikel/mail\" rel=\"nofollow\"><code>mail</code></a> gem is just a wrapper around <a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/net/pop/rdoc/Net/POP3.html\" rel=\"nofollow\"><code>Net::POP3</code></a> ruby library and it is super useful for read\\receive\\parse\\build mails.</p>\n\n<p>The <code>ActionMailer</code> here is not a helper for you, it is very handy only for send mails and it does nothing to recieve mail.</p>\n"}], "owner": {"reputation": 124, "user_id": 6698933, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8TE5wr18GPM/AAAAAAAAAAI/AAAAAAAAAMs/uqS3s_dSrdA/photo.jpg?sz=128", "display_name": "Tisamu", "link": "https://stackoverflow.com/users/6698933/tisamu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 607, "favorite_count": 0, "accepted_answer_id": 38868794, "answer_count": 1, "score": 1, "last_activity_date": 1470831839, "creation_date": 1470817983, "question_id": 38868118, "link": "https://stackoverflow.com/questions/38868118/receive-mails-with-rails", "title": "Receive Mails with Rails", "body": "<p>I would like to scrap mails from a MailBox, this is the situation:</p>\n\n<p>It's about a Technical support with a Ticket System.</p>\n\n<p>A client make a demand on the contact form on the website,\nThe ticket have a page with a chat and a task list made by the admin in charge of the ticket, so a link to this page is sent to the client who made the demand,</p>\n\n<p>Then when the Admin answer to the ticket in the chat, a mail is sent to the Client, everything to there is ok, the problem is that when the client answer to this email, the content of the mail must be scrapped and added to the database to be seen in the Ticket Chat.</p>\n\n<p>So the Idea is that the Client Can follow the progress of his Ticket by mail instead of going to the ticket page.</p>\n\n<p>I've tried MailMan, but that didn't work, the deamon was starting and then crashed after a couple of minutes whitout scrapping anything, I don't use SendGrid but a private SMTP server so I can't use the Grabber gem of this service.</p>\n\n<p>I'm running Rails 5, my DB is in PostGre, and I'm using ActionMailer as mailing system.</p>\n\n<p>I'm running out of ideas about how to make this feature..</p>\n\n<p>I hope my question is clear enough and my English not too bad.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1470816349, "post_id": 38867391, "comment_id": 65097851, "body": "You must create a variable <b>@kraken</b>, and set its value, inside the controller/method invoking this view. Then <b>@kraken</b> will be available when the view is rendered."}, {"owner": {"reputation": 923, "user_id": 2203953, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/hE0Fc.jpg?s=128&g=1", "display_name": "Pavel Tkackenko", "link": "https://stackoverflow.com/users/2203953/pavel-tkackenko"}, "edited": false, "score": 0, "creation_date": 1470823848, "post_id": 38867391, "comment_id": 65102783, "body": "I think than custom files in <code>&#47;config</code> are not loaded into your environment. Please move <code>kraken.rb</code> to <code>config&#47;initializers</code> folder and restart server."}], "answers": [{"comments": [{"owner": {"reputation": 923, "user_id": 2203953, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/hE0Fc.jpg?s=128&g=1", "display_name": "Pavel Tkackenko", "link": "https://stackoverflow.com/users/2203953/pavel-tkackenko"}, "edited": false, "score": 0, "creation_date": 1470817229, "post_id": 38867681, "comment_id": 65098339, "body": "@kraken will not be accessible in models and other controllers."}, {"owner": {"reputation": 4265, "user_id": 4601088, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bN143.jpg?s=128&g=1", "display_name": "Bart\u0142omiej G\u0142adys", "link": "https://stackoverflow.com/users/4601088/bart%c5%82omiej-g%c5%82adys"}, "reply_to_user": {"reputation": 923, "user_id": 2203953, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/hE0Fc.jpg?s=128&g=1", "display_name": "Pavel Tkackenko", "link": "https://stackoverflow.com/users/2203953/pavel-tkackenko"}, "edited": false, "score": 0, "creation_date": 1470817528, "post_id": 38867681, "comment_id": 65098519, "body": "Oviously, it depends from what he want to do with this variable. If he wants only share something in view, it enough."}], "tags": [], "owner": {"reputation": 4265, "user_id": 4601088, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bN143.jpg?s=128&g=1", "display_name": "Bart\u0142omiej G\u0142adys", "link": "https://stackoverflow.com/users/4601088/bart%c5%82omiej-g%c5%82adys"}, "is_accepted": false, "score": 2, "last_activity_date": 1470816667, "creation_date": 1470816667, "answer_id": 38867681, "question_id": 38867391, "link": "https://stackoverflow.com/questions/38867391/using-ruby-gem-that-uses-an-api-setting-up-client/38867681#38867681", "title": "Using Ruby Gem That Uses an API - Setting Up Client", "body": "<p>Put this code in WelcomeController.rb</p>\n\n<pre><code>  def index\n    API_KEY = '3bH+M/nLp......'\n    API_SECRET = 'wQG+7Lr9b.....'\n    @kraken = Kraken::Client.new(API_KEY, API_SECRET)\n    time = @kraken.server_time\n    time.unixtime #=&gt; 1393056191 \n  end\n</code></pre>\n\n<p>In view under this controller put:</p>\n\n<pre><code>&lt;p&gt;&lt;%= @kraken.server_time %&gt;&lt;/p&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 923, "user_id": 2203953, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/hE0Fc.jpg?s=128&g=1", "display_name": "Pavel Tkackenko", "link": "https://stackoverflow.com/users/2203953/pavel-tkackenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1470824096, "last_edit_date": 1470824096, "creation_date": 1470817170, "answer_id": 38867841, "question_id": 38867391, "link": "https://stackoverflow.com/questions/38867391/using-ruby-gem-that-uses-an-api-setting-up-client/38867841#38867841", "title": "Using Ruby Gem That Uses an API - Setting Up Client", "body": "<pre><code>kraken = Kraken::Client.new(API_KEY, API_SECRET)\n</code></pre>\n\n<p><code>kraken</code> here is local variable. If you put it into config/kraken.rb, it will not be accessible outside.</p>\n\n<p>There are different solutions. One is to wrap it in singleton-like class:</p>\n\n<pre><code># config/initializers/kraken.rb\n\nclass KrakenClient\n\n  API_KEY = '3bH+M/nLp......'\n  API_SECRET = 'wQG+7Lr9b.....'\n\n  @@config = Kraken::Client.new(API_KEY, API_SECRET)\n\n  def self.get\n    @@config\n  end\nend\n\n# index.html.erb\n\n&lt;p&gt;&lt;%= KrakenClient.get.server_time %&gt;&lt;/p&gt;\n</code></pre>\n\n<p>Another one approach is to monkey-patch <code>Kraken</code> itself:</p>\n\n<pre><code># config/initializers/kraken.rb\nclass Kraken\n\n  API_KEY = '3bH+M/nLp......'\n  API_SECRET = 'wQG+7Lr9b.....'\n\n  class &lt;&lt; self\n    def client\n      @client ||=  Kraken::Client.new(API_KEY, API_SECRET)\n    end\n  end\nend\n\n# index.html.erb\n\n&lt;p&gt;&lt;%= Kraken.client.server_time %&gt;&lt;/p&gt;\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 6428109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4d15d86ec1ed1064a0a39b8de43025b?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Nguyen", "link": "https://stackoverflow.com/users/6428109/andrew-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1470829687, "creation_date": 1470815721, "last_edit_date": 1470829687, "question_id": 38867391, "link": "https://stackoverflow.com/questions/38867391/using-ruby-gem-that-uses-an-api-setting-up-client", "title": "Using Ruby Gem That Uses an API - Setting Up Client", "body": "<p>I am using Ruby on Rails. I am trying to implement <a href=\"https://www.kraken.com/help/api\" rel=\"nofollow\">https://www.kraken.com/help/api</a></p>\n\n<p>Incase it isn't obvious, my knowledge of implementing API's and gems is very basic.</p>\n\n<p>I go to the \"example-api-code\" paragraph and I get to <a href=\"https://github.com/leishman/kraken_ruby\" rel=\"nofollow\">https://github.com/leishman/kraken_ruby</a></p>\n\n<p>I include the gem and do the bundle. </p>\n\n<p>Now we get to \"Usage\" \"Create A Client\"</p>\n\n<p>I assume I put the following in <code>config/kraken.rb</code></p>\n\n<pre><code>API_KEY = '3bH+M/nLp......'\nAPI_SECRET = 'wQG+7Lr9b.....'\n\nkraken = Kraken::Client.new(API_KEY, API_SECRET)\n\ntime = kraken.server_time\ntime.unixtime #=&gt; 1393056191 \n</code></pre>\n\n<p>I wanted to test something simple, such as displaying the time.</p>\n\n<p>I put the following code in my views/welcome/index.html.erb file, but then I get an error.</p>\n\n<pre><code>&lt;p&gt;&lt;%= kraken.server_time %&gt;&lt;/p&gt; \n-&gt; ActionView::Template::Error (undefined local variable or method `kraken' for #&lt;#&lt;Class:0x007f95c6246ba8&gt;:0x007f95c6245eb0&gt;):\n</code></pre>\n\n<p>Trying this code in my html.erb file and it gives me another error</p>\n\n<pre><code>&lt;p&gt;&lt;%= @kraken.server_time %&gt;&lt;/p&gt;\n-&gt; ActionView::Template::Error (undefined method `server_time' for nil:NilClass):\n</code></pre>\n\n<h2>-------------------------------------------------------------------------------</h2>\n\n<p>EDIT: Solutions Attempts, TLDR <code>NameError (uninitialized constant...</code></p>\n\n<hr>\n\n<p>@ Gladis</p>\n\n<p>Using your solution I get this error</p>\n\n<pre><code>-&gt;! Unable to load application: SyntaxError: /app/app/controllers/welcome_controller.rb:5: dynamic constant assignment\n-&gt;  API_KEY = '...'\n</code></pre>\n\n<p>So I tried </p>\n\n<pre><code>def index\n  @kraken = Kraken::Client.new('3bH+M/nLp...', 'wQG+7Lr9b...')\n  time = @kraken.server_time\n  time.unixtime #=&gt; 1393056191 \nend\n</code></pre>\n\n<p>and got this new error</p>\n\n<pre><code>NameError (uninitialized constant WelcomeController::Kraken):\n  app/controllers/welcome_controller.rb:5:in `index'\n</code></pre>\n\n<hr>\n\n<p>@ Pavel Tkackenko</p>\n\n<p>Your first solution (wrapping in singleton-like class) gives me this error.</p>\n\n<pre><code>ActionView::Template::Error (uninitialized constant ActionView::CompiledTemplates::KrakenClient):\n  app/views/welcome/index.html.erb:1:in `_app_views_welcome_index_html_erb__3584347874708863751_70226442404480'\n    1: &lt;p&gt;&lt;%= KrakenClient.get.server_time %&gt;&lt;/p&gt;\n</code></pre>\n\n<p>Your second solutions (monkey-patch) gives me the this error.</p>\n\n<pre><code>ActionView::Template::Error (uninitialized constant ActionView::CompiledTemplates::Kraken):\n    1: &lt;p&gt;&lt;%= Kraken.client.server_time %&gt;&lt;/p&gt;\n  app/views/welcome/index.html.erb:1:in `_app_views_welcome_index_html_erb___3719740865851336982_69820265644620'\n</code></pre>\n\n<hr>\n\n<p><strong>Moving <code>/config/kraken.rb</code> to <code>/config/initializers/kraken.rb</code> using Pavel's method</strong></p>\n\n<p>Wrapping it in singleton-like class gives me this error (infact, it doesn't even let me host the server)</p>\n\n<pre><code>-&gt;When I host it on my local computer with bin/rails server\n/config/initializers/kraken.rb:6:in `&lt;class:KrakenClient&gt;': uninitialized constant KrakenClient::Kraken (NameError)\n/config/initializers/kraken.rb:1:in `&lt;top (required)&gt;'\n\n\n-&gt;When I host it on heroku\nRunning: rake assets:precompile\nrake aborted!\nNameError: uninitialized constant KrakenClient::Kraken\n/config/initializers/kraken.rb:5:in `&lt;class:KrakenClient&gt;'\n/config/initializers/kraken.rb:1:in `&lt;top (required)&gt;'\n...\n/config/environment.rb:5:in `&lt;top (required)&gt;'\n</code></pre>\n\n<p>With monkey-patch I get this error </p>\n\n<pre><code>ActionView::Template::Error (uninitialized constant Kraken::Client):\n  1: &lt;p&gt;&lt;%= Kraken.client.server_time %&gt;&lt;/p&gt;\nconfig/initializers/kraken.rb:8:in `client'\napp/views/welcome/index.html.erb:1:in `_app_views_welcome_index_html_erb___577296263292451462_70097201303100'\n</code></pre>\n\n<p>If you got it to work on your computer, I would be happy to use your code as a skeleton (I am assuming this will be easier than figuring out what's wrong on my side).</p>\n"}, {"tags": ["ruby", "yaml", "middleman"], "owner": {"reputation": 21, "user_id": 6699085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9fb6ec2ebfb57ea76b5c6a4edc47dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Antonija", "link": "https://stackoverflow.com/users/6699085/antonija"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1470816070, "creation_date": 1470815219, "last_edit_date": 1470816070, "question_id": 38867209, "link": "https://stackoverflow.com/questions/38867209/how-to-filter-middleman-articles-by-category", "title": "How to filter Middleman articles by category", "body": "<p>I have two blog types on the website. One is shown on one page and the other on the second page. How do I filter my category (or even better by blog)?</p>\n\n<pre><code>activate :blog do |blog|\n  blog.name = \"cats\"\n  blog.prefix = \"cats\"\nend\n\nactivate :blog do |blog|\n  blog.name = \"dogs\"\n  blog.prefix = \"dogs\"\nend\n</code></pre>\n\n<p>Official docs say:</p>\n\n<p><em>This will create two blogs, one at /cats and one at /dogs. Notice that we give the blogs names. This is for helpers like a blog() - in order for them to know what blog we want, we can pass in the blog name to the blog helper like a blog('dogs'). In many situations, Middleman will automatically be able to find the right blog for helpers, but you may at times need to specify the blog name when using helpers like a blog, tag_path, etc. You can also specify the blog name in a page's frontmatter (such as in your tag page template) which will tell all helpers which blog to use.</em></p>\n\n<p>But when I input name: cats in my frontmatter I still get all results everywhere.</p>\n\n<p>My layout code is this:</p>\n\n<pre><code>&lt;body&gt;\n    &lt;%= partial 'partials/header' %&gt;\n    &lt;article&gt;\n        &lt;div class=\"row\"&gt;\n            &lt;div class=\"columns\"&gt;\n                &lt;h1&gt;&lt;%= current_page.data.title %&gt;&lt;/h1&gt;\n                &lt;h2&gt;&lt;%= current_page.data.subtitle %&gt;&lt;/h2&gt;\n                &lt;%= yield %&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;  \n    &lt;/article&gt;\n&lt;/body&gt;\n</code></pre>\n\n<p>So, how do I use filter this on my layout?</p>\n"}, {"tags": ["ruby", "ta-lib"], "answers": [{"tags": [], "owner": {"reputation": 131, "user_id": 6128035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2615285664fa73255ba22255809ad20d?s=128&d=identicon&r=PG", "display_name": "j2FunOnly", "link": "https://stackoverflow.com/users/6128035/j2funonly"}, "is_accepted": true, "score": 3, "last_activity_date": 1527230897, "last_edit_date": 1527230897, "creation_date": 1471265613, "answer_id": 38955489, "question_id": 38866816, "link": "https://stackoverflow.com/questions/38866816/guide-to-installing-ta-lib-on-windows-for-ruby-gem/38955489#38955489", "title": "Guide to installing ta-lib on Windows for Ruby gem", "body": "<p>Windows?\nSorry for my english.\nMy system: Windows 7 SP1 x64, ruby 2.2.4p230</p>\n\n<ol>\n<li>You have to install Ruby Development Kit to build the binary extensions.</li>\n<li>Download and extract <a href=\"http://ta-lib.org/hdr_dw.html\" rel=\"nofollow noreferrer\">source</a>, I used ta-lib-0.4.0-src.tar.gz.</li>\n<li><p>Run <code>msys.bat</code> from Ruby DevKit or if you have installed mingw as part of <a href=\"https://rubyinstaller.org/\" rel=\"nofollow noreferrer\">RubyInstaller</a>, run either <code>mingw64.exe</code> or <code>ming32.exe</code>. Navigate to ta-lib source files (in my case it is <code>/d/dev/ta-lib</code>) and build the library:</p>\n\n<pre><code>cd /d/dev/ta-lib\n./configure\nmake\n</code></pre></li>\n<li><p>Because the path to C headers <a href=\"https://github.com/rivella50/talib-ruby/blob/master/ext/talib/talib.c#L2\" rel=\"nofollow noreferrer\">hardcoded</a> in gem to <code>#include &lt;ta-lib/ta_abstract.h&gt;</code>, I just make a new directory <code>ta-lib</code> within <code>d:\\dev\\ta-lib\\include</code> source folder and all copy header files here. (Files in d:\\dev\\ta-lib\\include*.h are copied to d:\\dev\\ta-lib\\include\\ta-lib)</p></li>\n<li><p>Install gem. Exit the msys or mingw terminal and run the following in your Windows cmd. Be sure to replace these paths with the correct path to your ta-lib source:</p>\n\n<pre><code>gem install talib_ruby -- --with-talib-include=d:/dev/ta-lib/include --with-talib-lib=d:/dev/ta-lib/src/.libs\n</code></pre>\n\n<p>Make sure to change paths to yours.</p></li>\n</ol>\n"}], "owner": {"reputation": 7374, "user_id": 1634753, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aa962e4482e6eb20f3985622a039f0fe?s=128&d=identicon&r=PG", "display_name": "Rilcon42", "link": "https://stackoverflow.com/users/1634753/rilcon42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 404, "favorite_count": 0, "accepted_answer_id": 38955489, "answer_count": 1, "score": 1, "last_activity_date": 1527230897, "creation_date": 1470814035, "last_edit_date": 1495541696, "question_id": 38866816, "link": "https://stackoverflow.com/questions/38866816/guide-to-installing-ta-lib-on-windows-for-ruby-gem", "title": "Guide to installing ta-lib on Windows for Ruby gem", "body": "<p>I have tried for quite a while to install ta-lib so I can use some of the indicator functions for trading based on <a href=\"https://github.com/mlamby/indicator\" rel=\"nofollow noreferrer\">this</a> github example. So far I have determined that I need to:</p>\n\n<ol>\n<li><p>run <code>gem install talib_ruby</code></p>\n\n<pre><code>C:\\Users\\king\\Desktop\\_REPOS\\misc\\stock_analysis\\forex\\oanda\\ruby&gt;gem install talib_ruby\nTemporarily enhancing PATH to include DevKit...\nBuilding native extensions.  This could take a while...\nERROR:  Error installing talib_ruby:\n    ERROR: Failed to build gem native extension.\n\nC:/Ruby22-x64/bin/ruby.exe -r ./siteconf20160810-7176-j5lye2.rb extconf.rb\nchecking for TA_Initialize() in -lta_lib... no\ncreating Makefile\n\nmake \"DESTDIR=\" clean\n\nmake \"DESTDIR=\"\ngenerating talib-x64-mingw32.def\ncompiling talib.c\ntalib.c:2:32: fatal error: ta-lib/ta_abstract.h: No such file or directory\ncompilation terminated.\nmake: *** [talib.o] Error 1\n\nmake failed, exit code 2\n....\n</code></pre></li>\n<li><p>Download ta-lib header files which are in the msvc from <a href=\"http://ta-lib.org/hdr_dw.html\" rel=\"nofollow noreferrer\">here</a></p></li>\n<li><p>Tell the talib_ruby gem where the ta-lib files when installing. Based on <a href=\"https://stackoverflow.com/questions/4618376/gem-install-cannot-find-a-header-file\">this SO post</a> the correct command should look something like: <code>sudo env ARCHFLAGS=\"-arch x86_64\" gem install talib_ruby -- --with-talib-include=/opt/local/var/macports/software/ta-lib/0.4.0_0/opt/local/include/ta-lib  --with-talib-lib=/opt/local/var/macports/software/ta-lib/0.4.0_0/opt/local/lib\n</code>. The command specifies a path to a lib folder which is missing from the ta-lib I downloaded. Does anyone know how to fix this?</p></li>\n</ol>\n"}, {"tags": ["ruby", "chef-infra", "logstash", "rpm"], "answers": [{"tags": [], "owner": {"reputation": 944, "user_id": 3963970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WC8zU.jpg?s=128&g=1", "display_name": "Mrigesh Priyadarshi", "link": "https://stackoverflow.com/users/3963970/mrigesh-priyadarshi"}, "is_accepted": true, "score": 1, "last_activity_date": 1470816522, "creation_date": 1470816522, "answer_id": 38867634, "question_id": 38866655, "link": "https://stackoverflow.com/questions/38866655/installing-rpm-package-from-imported-repo/38867634#38867634", "title": "Installing rpm package from imported repo", "body": "<p>You can try with \"yum_repository\" resource. For, example:-</p>\n\n<pre><code>Github Source:- https://github.com/chef-cookbooks/yum\n\n# add the Zenoss repository\nyum_repository 'zenoss' do\n   description \"Zenoss Stable repo\"\n   baseurl \"http://dev.zenoss.com/yum/stable/\"\n   gpgkey 'http://dev.zenoss.com/yum/RPM-GPG-KEY-zenoss'\n   action :create\nend\n</code></pre>\n"}], "owner": {"reputation": 26124, "user_id": 972789, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/4Y8VM.jpg?s=128&g=1", "display_name": "Nick Ginanto", "link": "https://stackoverflow.com/users/972789/nick-ginanto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 38867634, "answer_count": 1, "score": 0, "last_activity_date": 1470816522, "creation_date": 1470813563, "question_id": 38866655, "link": "https://stackoverflow.com/questions/38866655/installing-rpm-package-from-imported-repo", "title": "Installing rpm package from imported repo", "body": "<p>To install logstash with rpm (<a href=\"https://www.elastic.co/guide/en/logstash/current/installing-logstash.html\" rel=\"nofollow\">https://www.elastic.co/guide/en/logstash/current/installing-logstash.html</a>) I need to manually specify the baseurl and the pgpkey </p>\n\n<p>I can't see these options in the chef docs (<a href=\"https://docs.chef.io/resource_rpm_package.html\" rel=\"nofollow\">https://docs.chef.io/resource_rpm_package.html</a>)</p>\n\n<p>Is there a way to do this with chef?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 1707, "user_id": 3292174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DNPrX.jpg?s=128&g=1", "display_name": "Michael Malov", "link": "https://stackoverflow.com/users/3292174/michael-malov"}, "reply_to_user": {"reputation": 343, "user_id": 6577972, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6b1c4b2bfbcce82532f6773f6f074b3?s=128&d=identicon&r=PG&f=1", "display_name": "Nishtha", "link": "https://stackoverflow.com/users/6577972/nishtha"}, "edited": false, "score": 0, "creation_date": 1470823839, "post_id": 38868621, "comment_id": 65102776, "body": "What is not working? You add code above to your model and try to use <code>User.near()</code>?"}, {"owner": {"reputation": 1707, "user_id": 3292174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DNPrX.jpg?s=128&g=1", "display_name": "Michael Malov", "link": "https://stackoverflow.com/users/3292174/michael-malov"}, "reply_to_user": {"reputation": 343, "user_id": 6577972, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6b1c4b2bfbcce82532f6773f6f074b3?s=128&d=identicon&r=PG&f=1", "display_name": "Nishtha", "link": "https://stackoverflow.com/users/6577972/nishtha"}, "edited": false, "score": 0, "creation_date": 1470824718, "post_id": 38868621, "comment_id": 65103358, "body": "May be you need to run task <code>rake geocode:all CLASS=User</code>"}, {"owner": {"reputation": 32522, "user_id": 419075, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/90b33a04a2ccc63534d1d9f4aac1fb7a?s=128&d=identicon&r=PG", "display_name": "Amir Raminfar", "link": "https://stackoverflow.com/users/419075/amir-raminfar"}, "reply_to_user": {"reputation": 343, "user_id": 6577972, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6b1c4b2bfbcce82532f6773f6f074b3?s=128&d=identicon&r=PG&f=1", "display_name": "Nishtha", "link": "https://stackoverflow.com/users/6577972/nishtha"}, "edited": false, "score": 0, "creation_date": 1470865524, "post_id": 38868621, "comment_id": 65128973, "body": "@Nishtha you have to provide more detail to what is not working. We are not mind readers."}], "tags": [], "owner": {"reputation": 1707, "user_id": 3292174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DNPrX.jpg?s=128&g=1", "display_name": "Michael Malov", "link": "https://stackoverflow.com/users/3292174/michael-malov"}, "is_accepted": false, "score": 2, "last_activity_date": 1470824667, "last_edit_date": 1470824667, "creation_date": 1470819412, "answer_id": 38868621, "question_id": 38866378, "link": "https://stackoverflow.com/questions/38866378/how-to-get-latitude-and-longitude/38868621#38868621", "title": "How to get latitude and longitude", "body": "<p>You need to add <code>latitude</code> and <code>longitude</code> fields to your model</p>\n\n<pre><code>rails generate migration AddLatitudeAndLongitudeToUser latitude:float longitude:float\nrake db:migrate\n</code></pre>\n\n<p>Than add this to <code>User</code> model</p>\n\n<pre><code>geocoded_by :address\nafter_validation :geocode\n</code></pre>\n\n<p>Run</p>\n\n<pre><code>rake geocode:all CLASS=User    \n</code></pre>\n\n<hr>\n\n<p>If you don't want to change your model you can use utility method to get coordinates by address</p>\n\n<pre><code>Geocoder.coordinates(\"25 Main St, Cooperstown, NY\")\n</code></pre>\n"}], "owner": {"reputation": 343, "user_id": 6577972, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6b1c4b2bfbcce82532f6773f6f074b3?s=128&d=identicon&r=PG&f=1", "display_name": "Nishtha", "link": "https://stackoverflow.com/users/6577972/nishtha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1543837667, "creation_date": 1470812548, "last_edit_date": 1543837667, "question_id": 38866378, "link": "https://stackoverflow.com/questions/38866378/how-to-get-latitude-and-longitude", "title": "How to get latitude and longitude", "body": "<p>I am trying to give input address or a place and I need to fetch latitude and longitude of that place. I am trying to use geocoder gem but it is not working. I have an address field in my users table but I don't have latitude and longitude field in my users table. I am providing an address and by that address I need to fetch latitude and longitude. What am I doing wrong?   </p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  geocoded_by :address\n\n def self.find_cordinates(users)\n        puts \"Ssss{User.near(users.last['address'],5000).to_json}\"\n\nend\n\n\n    end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "siteminder"], "answers": [{"tags": [], "owner": {"reputation": 557, "user_id": 6548439, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153618380101560/picture?type=large", "display_name": "Ram Vallury", "link": "https://stackoverflow.com/users/6548439/ram-vallury"}, "is_accepted": false, "score": 0, "last_activity_date": 1470906192, "creation_date": 1470906192, "answer_id": 38891852, "question_id": 38866355, "link": "https://stackoverflow.com/questions/38866355/how-can-i-read-siteminder-headers-in-my-ruby-on-rails-application/38891852#38891852", "title": "How can I read siteminder headers in my ruby on rails application", "body": "<p>It can be read using request in ruby.\nrequest.headers[\"SM-USER\"]</p>\n"}], "owner": {"reputation": 557, "user_id": 6548439, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153618380101560/picture?type=large", "display_name": "Ram Vallury", "link": "https://stackoverflow.com/users/6548439/ram-vallury"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470906192, "creation_date": 1470812493, "question_id": 38866355, "link": "https://stackoverflow.com/questions/38866355/how-can-i-read-siteminder-headers-in-my-ruby-on-rails-application", "title": "How can I read siteminder headers in my ruby on rails application", "body": "<p>I need to read the user name from the siteminder authentication happened in my ruby on rails application. How can i do that?</p>\n\n<p>I tried reading from request.headers and request.env - they are returning null.\nany pointers will be of great help.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "heroku"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 3645559, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001558592112/picture?type=large", "display_name": "valon.hajredini", "link": "https://stackoverflow.com/users/3645559/valon-hajredini"}, "edited": false, "score": 0, "creation_date": 1470812093, "post_id": 38866213, "comment_id": 65095350, "body": "2016-08-09T14:06:47.576041+00:00 heroku[router]: at=error code=H14 desc=&quot;No web processes running&quot; method=GET path=&quot;/&quot; host=ezgo-test.herokuapp.com request_id=4b7b51e7-2b92-4aa3-beba-776113744b16 fwd=&quot;84.22.47.134&quot; dyno= connect= service= status=503 bytes="}, {"owner": {"reputation": 1249, "user_id": 5224982, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/20a0ec1c0a5a8a9e5690fb30e7cb4a01?s=128&d=identicon&r=PG&f=1", "display_name": "Muaaz Rafi", "link": "https://stackoverflow.com/users/5224982/muaaz-rafi"}, "reply_to_user": {"reputation": 23, "user_id": 3645559, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001558592112/picture?type=large", "display_name": "valon.hajredini", "link": "https://stackoverflow.com/users/3645559/valon-hajredini"}, "edited": false, "score": 0, "creation_date": 1470812526, "post_id": 38866213, "comment_id": 65095572, "body": "Are you on hobby version or paid one heroku ? In any case you can fix it via <a href=\"https://devcenter.heroku.com/articles/error-codes#h14-no-web-dynos-running\" rel=\"nofollow noreferrer\">devcenter.heroku.com/articles/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1249, "user_id": 5224982, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/20a0ec1c0a5a8a9e5690fb30e7cb4a01?s=128&d=identicon&r=PG&f=1", "display_name": "Muaaz Rafi", "link": "https://stackoverflow.com/users/5224982/muaaz-rafi"}, "is_accepted": true, "score": 1, "last_activity_date": 1470812689, "last_edit_date": 1470812689, "creation_date": 1470811951, "answer_id": 38866213, "question_id": 38866175, "link": "https://stackoverflow.com/questions/38866175/heroku-rollback-application-goes-down/38866213#38866213", "title": "Heroku rollback application goes down", "body": "<p>Please check logs and paste in the specific error, you can do as below. </p>\n\n<pre><code>heroku logs --tail --app app-name\n</code></pre>\n\n<p>As per your problem \"No web processes running\". you can fix it as below. </p>\n\n<pre><code>heroku ps:scale web=1 --app app-name\n</code></pre>\n\n<p>As per heroku documentation <a href=\"https://devcenter.heroku.com/articles/error-codes#h14-no-web-dynos-running\" rel=\"nofollow\">https://devcenter.heroku.com/articles/error-codes#h14-no-web-dynos-running</a> . </p>\n"}], "owner": {"reputation": 23, "user_id": 3645559, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001558592112/picture?type=large", "display_name": "valon.hajredini", "link": "https://stackoverflow.com/users/3645559/valon-hajredini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "closed_date": 1470824242, "accepted_answer_id": 38866213, "answer_count": 1, "score": 0, "last_activity_date": 1470812689, "creation_date": 1470811811, "question_id": 38866175, "link": "https://stackoverflow.com/questions/38866175/heroku-rollback-application-goes-down", "closed_reason": "Needs more focus", "title": "Heroku rollback application goes down", "body": "<p>When i did my ruby on rails app rollback on heroku, the application go down. How to fixed it? <a href=\"http://ezgo-test.herokuapp.com/\" rel=\"nofollow\">http://ezgo-test.herokuapp.com/</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rspec-rails"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1470811416, "post_id": 38866029, "comment_id": 65094955, "body": "Please share some stacktrace and your <code>find_post</code> method."}], "answers": [{"comments": [{"owner": {"reputation": 1150, "user_id": 5213790, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JsYim.jpg?s=128&g=1", "display_name": "mrvncaragay", "link": "https://stackoverflow.com/users/5213790/mrvncaragay"}, "edited": false, "score": 0, "creation_date": 1470812842, "post_id": 38866163, "comment_id": 65095762, "body": "the test pass, but <code>Comment.count</code> is <code>0</code> and should be <code>1</code>"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "reply_to_user": {"reputation": 1150, "user_id": 5213790, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JsYim.jpg?s=128&g=1", "display_name": "mrvncaragay", "link": "https://stackoverflow.com/users/5213790/mrvncaragay"}, "edited": false, "score": 0, "creation_date": 1470812901, "post_id": 38866163, "comment_id": 65095798, "body": "There must be some validation failing for Comment."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "reply_to_user": {"reputation": 1150, "user_id": 5213790, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JsYim.jpg?s=128&g=1", "display_name": "mrvncaragay", "link": "https://stackoverflow.com/users/5213790/mrvncaragay"}, "edited": false, "score": 0, "creation_date": 1470812929, "post_id": 38866163, "comment_id": 65095810, "body": "Replace this <code>if @comment.save</code> with <code>if @comment.save!</code> inside your controller and you will see."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "reply_to_user": {"reputation": 1150, "user_id": 5213790, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JsYim.jpg?s=128&g=1", "display_name": "mrvncaragay", "link": "https://stackoverflow.com/users/5213790/mrvncaragay"}, "edited": false, "score": 0, "creation_date": 1470813009, "post_id": 38866163, "comment_id": 65095842, "body": "Another thing, the test will pass because you are not checking anything inside the <code>it</code> block. You should do <code>expect(Comment.count).to eq 1</code> after <code>post :create, ...</code> statement."}, {"owner": {"reputation": 2537, "user_id": 5371321, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ZFyVo.jpg?s=128&g=1", "display_name": "Narasimha Reddy - Geeker", "link": "https://stackoverflow.com/users/5371321/narasimha-reddy-geeker"}, "edited": false, "score": 0, "creation_date": 1470813011, "post_id": 38866163, "comment_id": 65095843, "body": "<code>comment: attributes_for(:comment, post_id: post1.id)</code> here i think no need to pass <code>post_id</code> again."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1470813148, "post_id": 38866163, "comment_id": 65095911, "body": "Re: comment not being saved, please share <code>comment_params</code> method too."}, {"owner": {"reputation": 1150, "user_id": 5213790, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JsYim.jpg?s=128&g=1", "display_name": "mrvncaragay", "link": "https://stackoverflow.com/users/5213790/mrvncaragay"}, "edited": false, "score": 0, "creation_date": 1470813291, "post_id": 38866163, "comment_id": 65095997, "body": "<code>params.require(:comment).permit(:content)</code> thats my comment_params still getting 0"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1470813352, "post_id": 38866163, "comment_id": 65096022, "body": "Did you try <code>save!</code> instead of <code>save</code>? That will raise exception if comment not valid."}, {"owner": {"reputation": 1150, "user_id": 5213790, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JsYim.jpg?s=128&g=1", "display_name": "mrvncaragay", "link": "https://stackoverflow.com/users/5213790/mrvncaragay"}, "edited": false, "score": 0, "creation_date": 1470815287, "post_id": 38866163, "comment_id": 65097210, "body": "nope, <code>expect(Comment.count).to eq 1</code> doesn&#39;t pass. tried <code>save!</code> but it doesn&#39;t give me any errors."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1470815713, "post_id": 38866163, "comment_id": 65097456, "body": "That means it is not going to your <code>create</code> action. You should check inside <code>find_post</code> if the post is found."}, {"owner": {"reputation": 1150, "user_id": 5213790, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JsYim.jpg?s=128&g=1", "display_name": "mrvncaragay", "link": "https://stackoverflow.com/users/5213790/mrvncaragay"}, "edited": false, "score": 0, "creation_date": 1470822820, "post_id": 38866163, "comment_id": 65102090, "body": "i finally, figured why it&#39;s not going through <code>create</code> action. devise wants to authenticate the user first. i had this <code>before_action :authenticate_user!</code> thanks for help!"}], "tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1470811758, "creation_date": 1470811758, "answer_id": 38866163, "question_id": 38866029, "link": "https://stackoverflow.com/questions/38866029/rspec-rails-getting-couldnt-find-post-with-id-no-route-matches/38866163#38866163", "title": "Rspec Rails: getting couldn&#39;t find Post with id / No Route matches", "body": "<p>Try this:</p>\n\n<pre><code>describe CommentsController  do\n  it \"#create\" do\n    post1 = create(:post)\n    post :create, { post_id: post1.id, comment: attributes_for(:comment, post_id: post1.id) }\n    p Comment.count\n  end\nend\n</code></pre>\n\n<p>I guess the problem is you are not sending <code>post_id</code> in the params.</p>\n"}, {"comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1470812766, "post_id": 38866342, "comment_id": 65095726, "body": "Same as my answer."}], "tags": [], "owner": {"reputation": 2537, "user_id": 5371321, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ZFyVo.jpg?s=128&g=1", "display_name": "Narasimha Reddy - Geeker", "link": "https://stackoverflow.com/users/5371321/narasimha-reddy-geeker"}, "is_accepted": false, "score": 0, "last_activity_date": 1470812447, "creation_date": 1470812447, "answer_id": 38866342, "question_id": 38866029, "link": "https://stackoverflow.com/questions/38866029/rspec-rails-getting-couldnt-find-post-with-id-no-route-matches/38866342#38866342", "title": "Rspec Rails: getting couldn&#39;t find Post with id / No Route matches", "body": "<p>The problem is you are not passing <code>post_id</code> properly. pass like this and debug in <code>find_post</code> method, how params coming there.</p>\n\n<pre><code>describe CommentsController  do\n  it \"#create\" do\n    post1 = create(:post)\n    post :create, { post_id: post1.id, comment: { comment_attributes_here } }\n    p Comment.count\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1150, "user_id": 5213790, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JsYim.jpg?s=128&g=1", "display_name": "mrvncaragay", "link": "https://stackoverflow.com/users/5213790/mrvncaragay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 598, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1470812447, "creation_date": 1470811315, "last_edit_date": 1470811566, "question_id": 38866029, "link": "https://stackoverflow.com/questions/38866029/rspec-rails-getting-couldnt-find-post-with-id-no-route-matches", "title": "Rspec Rails: getting couldn&#39;t find Post with id / No Route matches", "body": "<p>I'm testing <code>create</code> action with rspec, It's giving me:</p>\n\n<blockquote>\n  <p>ActiveRecord::RecordNotFound:\n         Couldn't find Post with 'id'=:post_id</p>\n</blockquote>\n\n<p>not sure, why this is happening, any suggestion?</p>\n\n<p><strong>spec:</strong></p>\n\n<pre><code>describe CommentsController  do\n  it \"#create\" do\n    post1 = create(:post)\n    post :create, comment: attributes_for(:comment, post_id: post1.id)\n    p Comment.count\n  end\nend\n</code></pre>\n\n<p><strong>create action:</strong> </p>\n\n<pre><code> def create\n    @comment = @post.comments.build(comment_params)\n    @comment.user_id = current_user.id\n\n    respond_to do |format|\n      if @comment.save\n        format.json { render json: @comment }\n      end\n    end\n  end\n</code></pre>\n\n<p><strong>Before action:</strong></p>\n\n<pre><code>  before_action :authenticate_user!\n  before_action :find_post, only: [:index, :create, :destroy]\n</code></pre>\n\n<p><strong>Routes:</strong></p>\n\n<pre><code>  post_comments GET /posts/:post_id/comments(.:format)        comments#index\n                POST   /posts/:post_id/comments(.:format)     comments#create\n  post_comment  DELETE /posts/:post_id/comments/:id(.:format) comments#destroy\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1470811281, "post_id": 38865946, "comment_id": 65094864, "body": "Can you share relevant model associations? and also tell us where exactly have you written this code?"}], "answers": [{"tags": [], "owner": {"reputation": 2537, "user_id": 5371321, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ZFyVo.jpg?s=128&g=1", "display_name": "Narasimha Reddy - Geeker", "link": "https://stackoverflow.com/users/5371321/narasimha-reddy-geeker"}, "is_accepted": true, "score": 2, "last_activity_date": 1470813722, "last_edit_date": 1495542787, "creation_date": 1470813547, "answer_id": 38866652, "question_id": 38865946, "link": "https://stackoverflow.com/questions/38865946/wrong-number-of-arguments-0-for-1-mongodb-search-in-rails/38866652#38866652", "title": "wrong number of arguments (0 for 1) MongoDB search in rails", "body": "<p>It's because the <code>where</code> method needs at least one argument, but you are not passing anything.</p>\n\n<p>Here you can use <code>not_in</code> query:</p>\n\n<pre><code>found = found.not_in(:name =&gt; n)\n</code></pre>\n\n<p>This <a href=\"https://stackoverflow.com/questions/10508336/mongoid-not-in-query\">stack overflow question</a> might help you.</p>\n"}], "owner": {"reputation": 91, "user_id": 5695422, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/kfDhk.jpg?s=128&g=1", "display_name": "Ipomea", "link": "https://stackoverflow.com/users/5695422/ipomea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "accepted_answer_id": 38866652, "answer_count": 1, "score": 1, "last_activity_date": 1470813722, "creation_date": 1470811054, "question_id": 38865946, "link": "https://stackoverflow.com/questions/38865946/wrong-number-of-arguments-0-for-1-mongodb-search-in-rails", "title": "wrong number of arguments (0 for 1) MongoDB search in rails", "body": "<p>I have two collections in my mongoDB of my Ruby on Rails Project,\nOne with motions and an other one with actors.\nThe motions have an attribute actor that contains the name of the actor and through which you can find him. I know want to find all the motions that belong to an actor of a specific gender. The code I use is the following.</p>\n\n<pre><code>found = Motion.all\nfound.each do |x|\n    n = x.actor\n    a = actors.where(:name =&gt; n).first\n    if a.gender != search_gender\n      found = found.where.not(:name =&gt; n)\n    end\n  end\n</code></pre>\n\n<p>But i always get the Error </p>\n\n<pre><code>wrong number of arguments (0 for 1)\n</code></pre>\n\n<p>it's supposed to be in this line:</p>\n\n<pre><code>found = found.where.not(:name =&gt; n)\n</code></pre>\n\n<p>but I dont really know what i did wrong here. Can anyone tell me or does anyone know a different way i could do this? I am not too familiar with rails so it could be a pretty stupid mistake. any help appreciated.</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 6351585, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1087377797989588/picture?type=large", "display_name": "Vladyslav Kalyuzhnyy", "link": "https://stackoverflow.com/users/6351585/vladyslav-kalyuzhnyy"}, "edited": false, "score": 0, "creation_date": 1470829799, "post_id": 38867145, "comment_id": 65106754, "body": "don&#39;t help(( any ideas ?"}], "tags": [], "owner": {"reputation": 3459, "user_id": 3185510, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/nlb4D.jpg?s=128&g=1", "display_name": "webster", "link": "https://stackoverflow.com/users/3185510/webster"}, "is_accepted": false, "score": 1, "last_activity_date": 1470816972, "last_edit_date": 1470816972, "creation_date": 1470815025, "answer_id": 38867145, "question_id": 38865689, "link": "https://stackoverflow.com/questions/38865689/jquery-not-working-in-the-production-rails-project/38867145#38867145", "title": "jquery not working in the production Rails project", "body": "<p>Try changing the order of js files in the manifest file like:</p>\n\n<pre><code>//= require jquery\n//= require jquery_ujs\n//= require es5-shim/es5-shim\n//= require es5-shim/es5-shim-min\n//= require es5-shim/es5-sham\n//= require es5-shim/es5-sham-min\n//= require turbolinks\n//= require_tree .\n</code></pre>\n\n<p>I guess you are precompiling your assets in production mode</p>\n\n<pre><code>rake assets:precompile RAILS_ENV=production\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 6351585, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1087377797989588/picture?type=large", "display_name": "Vladyslav Kalyuzhnyy", "link": "https://stackoverflow.com/users/6351585/vladyslav-kalyuzhnyy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 435, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1470816972, "creation_date": 1470810133, "question_id": 38865689, "link": "https://stackoverflow.com/questions/38865689/jquery-not-working-in-the-production-rails-project", "title": "jquery not working in the production Rails project", "body": "<p>In the development all works fine, but in the production, after deploy, not working. rake assets compilation don't help me. What should i edit ?</p>\n\n<p>application.js</p>\n\n<pre><code>//= require es5-shim/es5-shim\n//= require es5-shim/es5-shim-min\n//= require es5-shim/es5-sham\n//= require es5-shim/es5-sham-min\n//= require jquery\n//= require jquery_ujs\n//= require turbolinks\n//= require_tree .\n</code></pre>\n\n<p>production.rb</p>\n\n<pre><code>Rails.application.configure do\n  # Settings specified here will take precedence over those in config/application.rb.\n  config.action_mailer.default_url_options = { :host =&gt; '********' }\n  config.action_mailer.delivery_method = :smtp\n\n  config.cache_classes = false\n  config.eager_load = true\n\n  config.consider_all_requests_local       = false\n  config.action_controller.perform_caching = true\n\n  config.serve_static_assets = false\n\n  config.assets.js_compressor = :uglifier\n\n  config.assets.compile = ['*.js', '*.css']\n  config.active_support.deprecation = :silence\n\n  config.assets.digest = true\n\n  config.log_level = :info\n\n  config.i18n.fallbacks = true\n\n  config.active_support.deprecation = :notify\n\n  config.log_formatter = ::Logger::Formatter.new\n\n  config.active_record.dump_schema_after_migration = false\nend\n</code></pre>\n\n<p>development.rb</p>\n\n<pre><code>Rails.application.configure do\n  # Settings specified here will take precedence over those in config/application.rb.\n  config.action_mailer.perform_deliveries = true\n  config.action_mailer.raise_delivery_errors = true\n  config.action_mailer.default_url_options = { :host =&gt; 'localhost:3000' }\n  config.action_mailer.delivery_method = :smtp\n\n  config.cache_classes = false\n\n  config.eager_load = false\n\n  config.consider_all_requests_local       = true\n  config.action_controller.perform_caching = false\n\n  config.action_mailer.raise_delivery_errors = false\n\n  config.active_support.deprecation = :log\n\n  config.active_record.migration_error = :page_load\n\n  config.assets.debug = true\n\n  config.assets.raise_runtime_errors = true\n\n  config.action_mailer.perform_deliveries = true\nend\n</code></pre>\n\n<p>application.html.erb</p>\n\n<pre><code>&lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' =&gt; true %&gt;\n  &lt;%= javascript_include_tag 'application', 'data-turbolinks-track' =&gt; true %&gt;\n  &lt;%= csrf_meta_tags %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "automation", "watir-webdriver", "irb"], "answers": [{"tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": false, "score": 1, "last_activity_date": 1470835782, "creation_date": 1470835782, "answer_id": 38874868, "question_id": 38865384, "link": "https://stackoverflow.com/questions/38865384/in-watir-webdriver-i-need-to-automation-code-for-datepicker/38874868#38874868", "title": "In Watir-Webdriver I need to automation code for Datepicker", "body": "<p>At a minimum, you can use the <code>:index</code> locator to select the second date picker. The <code>:index</code> locator specifies which occurrence of the matching elements to use. For example, <code>index: 0</code> selects the first match (and is the default). <code>index: 1</code> selects the second match, etc.</p>\n\n<p>To pick the second date picker would be:</p>\n\n<pre><code>browser.img(:class =&gt; \"ui-datepicker-trigger\", :index =&gt; 1).click\n</code></pre>\n\n<p>The downside of <code>:index</code> locators is that they will unexpectedly break when other similar elements are added. For example, adding another date picker before the instruction date will cause the above code to update the wrong date picker. A better approach would be to find the date picker that is specific to the delivery due date.</p>\n\n<p>For example, the HTML might be like:</p>\n\n<pre><code>&lt;ul&gt;\n  &lt;li&gt;\n    Instruction Date:\n    &lt;input type=\"text\" id=\"instruction_date\"&gt;\n    &lt;img class=\"ui-datepicker-trigger\"&gt;\n  &lt;/li&gt;\n  &lt;li&gt;\n    Delivery Due Date:\n    &lt;input type=\"text\" id=\"delivery_due_date\"&gt;\n    &lt;img class=\"ui-datepicker-trigger\"&gt;\n  &lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>In this markup, an alternative to looking for the second date picker, is to look for the date picker in the same <code>li</code> as the delivery due date field. Taking this approach may be more robust to future changes:</p>\n\n<pre><code>browser.text_field(id: 'delivery_due_date').parent.img(class: 'ui-datepicker-trigger').click\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 6384345, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/887bf738d76fcc749a5cd50fa26a7c87?s=128&d=identicon&r=PG&f=1", "display_name": "Hardik Bhatt", "link": "https://stackoverflow.com/users/6384345/hardik-bhatt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 345, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1470988823, "creation_date": 1470808986, "last_edit_date": 1470988823, "question_id": 38865384, "link": "https://stackoverflow.com/questions/38865384/in-watir-webdriver-i-need-to-automation-code-for-datepicker", "title": "In Watir-Webdriver I need to automation code for Datepicker", "body": "<p>Image of 2 datepicker:</p>\n\n<p><img src=\"https://i.stack.imgur.com/7wfCk.png\" alt=\"image\"> </p>\n\n<p>I have 2 datepicker as shown in the screenshot I need to Automate in Watir-Webdriver. </p>\n\n<p>They have same class in it so I am not able to select the 2 datepicker.</p>\n\n<p>The code which I have written is:</p>\n\n<pre><code>(\"browser.img(:class =&gt; \"ui-datepicker-trigger\").click\")\n</code></pre>\n\n<p>through this I am able to click the 1 date picker but how can I select the 2 date picker?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1470815080, "post_id": 38864959, "comment_id": 65097079, "body": "You could improve your answer in a couple of ways. 1) <code>h</code> should be a valid Ruby hash (no <code>....</code>), so readers can cut-and-paste rather than having to construct the hash.  Also, <code>....</code> leaves the impression that you are lazy. 2. If you mean it to be an arbitrary hash (which I assume is the case), you should not have such a regular pattern (<code>:a</code>, <code>:b</code>, <code>:c</code>,... and <code>1</code>, <code>2</code>, <code>3</code>,...) as some readers will interpret your question as referring to that specific hash."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1470815222, "post_id": 38864959, "comment_id": 65097164, "body": "Your question is unclear. Please define what you mean by &quot;best way&quot;. Also, what do you mean by &quot;like this&quot;? Is it always that exact hash? What&#39;s the pattern that makes the hashes &quot;like&quot; this one?"}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1470951340, "post_id": 38864959, "comment_id": 65171503, "body": "I&#39;m afraid I don&#39;t understand this at all: &quot;now user input 1 then I will fetch first 5 if user input 2 then 6 to next 5 means 6 to 11&quot;.  Could you please edit your question to show specific examples for the different inputs and corresponding outputs?"}], "answers": [{"comments": [{"owner": {"reputation": 923, "user_id": 2203953, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/hE0Fc.jpg?s=128&g=1", "display_name": "Pavel Tkackenko", "link": "https://stackoverflow.com/users/2203953/pavel-tkackenko"}, "edited": false, "score": 0, "creation_date": 1470810510, "post_id": 38865527, "comment_id": 65094443, "body": "This code will generate array with standalone hashes: <code>[{&quot;a&quot;=&gt;1}, {&quot;b&quot;=&gt;2}, {&quot;c&quot;=&gt;3}, {&quot;d&quot;=&gt;4}, {&quot;e&quot;=&gt;5}]</code>"}, {"owner": {"reputation": 1249, "user_id": 5224982, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/20a0ec1c0a5a8a9e5690fb30e7cb4a01?s=128&d=identicon&r=PG&f=1", "display_name": "Muaaz Rafi", "link": "https://stackoverflow.com/users/5224982/muaaz-rafi"}, "reply_to_user": {"reputation": 923, "user_id": 2203953, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/hE0Fc.jpg?s=128&g=1", "display_name": "Pavel Tkackenko", "link": "https://stackoverflow.com/users/2203953/pavel-tkackenko"}, "edited": false, "score": 0, "creation_date": 1470811199, "post_id": 38865527, "comment_id": 65094826, "body": "Simple.  eval(alphabets[( (user_input - 1) * 5 )..( (user_input * 5) - 1)].to_s.gsub(&quot;{&quot;,&quot;&quot;).gsub(&quot;}&quot;,&quot;&quot;))"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1470814305, "post_id": 38865527, "comment_id": 65096604, "body": "My comment on @Jagdeep&#39;s answer applies to yours as well."}], "tags": [], "owner": {"reputation": 1249, "user_id": 5224982, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/20a0ec1c0a5a8a9e5690fb30e7cb4a01?s=128&d=identicon&r=PG&f=1", "display_name": "Muaaz Rafi", "link": "https://stackoverflow.com/users/5224982/muaaz-rafi"}, "is_accepted": false, "score": -1, "last_activity_date": 1470811251, "last_edit_date": 1470811251, "creation_date": 1470809576, "answer_id": 38865527, "question_id": 38864959, "link": "https://stackoverflow.com/questions/38864959/ruby-how-can-i-dynamically-build-a-hash-from-user-input/38865527#38865527", "title": "Ruby: How can I dynamically build a hash from user input", "body": "<p>So you can simply use slice array function to split out things. </p>\n\n<pre><code>   alphabets = [*('a'..'z')].collect.with_index{ |key,index| { key =&gt; index+1  }  } \n   user_input = 1 # Capture user input here. \n   part_of_array = alphabets[( (user_input - 1) * 5 )..( (user_input * 5) - 1)]\n</code></pre>\n\n<p>Converting into simple one hash use the below code. </p>\n\n<pre><code>part_of_array = eval(alphabets[( (user_input - 1) * 5 )..( (user_input * 5) - 1)].to_s.gsub(\"{\",\"\").gsub(\"}\",\"\"))\n</code></pre>\n\n<p>Let me know if you have any issues. </p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1470814654, "last_edit_date": 1470814654, "creation_date": 1470809784, "answer_id": 38865587, "question_id": 38864959, "link": "https://stackoverflow.com/questions/38864959/ruby-how-can-i-dynamically-build-a-hash-from-user-input/38865587#38865587", "title": "Ruby: How can I dynamically build a hash from user input", "body": "<p>I assume the question concerns an arbitrary hash.</p>\n\n<p><strong>Code</strong></p>\n\n<p>Three choices:</p>\n\n<p><em>#1</em></p>\n\n<pre><code>def select_em(h, which_block_5)\n  select_range = (5*which_block_5 - 4)..(5*which_block_5)\n  h.select.with_index(1) { |_,i| select_range.cover?(i) }\nend\n</code></pre>\n\n<p><em>#2</em></p>\n\n<pre><code>def select_em(h, which_block_5)\n  select_array = Array.new(5*(which_block_5-1),false) +\n                 Array.new(5,true) +\n                 Array.new(h.size-5*(which_block_5),false)\n  h.select { select_array.shift }\nend\n</code></pre>\n\n<p>Note</p>\n\n<pre><code> select_array = Array.new(5*(which_block_5-1),false) +\n                Array.new(5,true) +\n                Array.new(26-5*(which_block_5),false)\n   #=&gt; [false, false, false, false, false, true, true, true, true, true,\n   #    false, false, false, false, false, false, false, false, false,\n   #    false, false, false, false, false, false, false] \n</code></pre>\n\n<p><em>#3</em></p>\n\n<pre><code>def select_em(h, which_block_5)\n  start = 5*which_block_5 - 4\n  stop  = start + 4\n  h.select.with_index(1) { |_,i| (i==start..i==stop) ? true : false }\nend\n</code></pre>\n\n<p>This method uses Ruby's <a href=\"http://nithinbekal.com/posts/ruby-flip-flop/\" rel=\"nofollow\">flip-flop operator</a>.</p>\n\n<p>All of these methods use <a href=\"http://ruby-doc.org/core-2.3.0/Hash.html#method-i-select\" rel=\"nofollow\">Hash#select</a> (which returns a hash), not <a href=\"http://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-select\" rel=\"nofollow\">Enumerable#select</a> (which returns an array).</p>\n\n<p><strong>Examples</strong></p>\n\n<pre><code>h = {:a=&gt;1, :b=&gt;2, :c=&gt;3, :d=&gt;4, :e=&gt;5, :f=&gt;6, :g=&gt;7, :cat=&gt;\"meow\",  :dog=&gt;\"woof\",\n     :h=&gt;8, :i=&gt;9, :j=&gt;10, :k=&gt;11, :l=&gt;12, :m=&gt;13, :n=&gt;14, :o=&gt;15,\n     :p=&gt;16, :q=&gt;17, :r=&gt;18, :s=&gt;19, :t=&gt;20, :u=&gt;21, :v=&gt;22, :w=&gt;23,\n     :x=&gt;24, :y=&gt;25, :z=&gt;26} \n\nselect_em(h, 1)\n  #=&gt; {:a=&gt;1, :b=&gt;2, :c=&gt;3, :d=&gt;4, :e=&gt;5} \nselect_em(h, 2)\n  #=&gt; {:f=&gt;6, :g=&gt;7, :cat=&gt;\"meow\", :dog=&gt;\"woof\", :h=&gt;8} \nselect_em(h, 3)\n  #=&gt; {:i=&gt;9, :j=&gt;10, :k=&gt;11, :l=&gt;12, :m=&gt;13} \nselect_em(h, 4)\n  #=&gt; {:n=&gt;14, :o=&gt;15, :p=&gt;16, :q=&gt;17, :r=&gt;18} \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 923, "user_id": 2203953, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/hE0Fc.jpg?s=128&g=1", "display_name": "Pavel Tkackenko", "link": "https://stackoverflow.com/users/2203953/pavel-tkackenko"}, "is_accepted": true, "score": 5, "last_activity_date": 1470810281, "last_edit_date": 1470810281, "creation_date": 1470809936, "answer_id": 38865637, "question_id": 38864959, "link": "https://stackoverflow.com/questions/38864959/ruby-how-can-i-dynamically-build-a-hash-from-user-input/38865637#38865637", "title": "Ruby: How can I dynamically build a hash from user input", "body": "<pre><code>h = {a: 1, b: 2, c: 3, d: 4.....z: 26}\n\nuser_input = 1\n\nHash[h.to_a[((user_input - 1) * 5 )..( (user_input * 5) - 1)]]\n#=&gt; {:a=&gt;1, :b=&gt;2, :c=&gt;3, :d=&gt;4, :e=&gt;5} \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1470814242, "post_id": 38865844, "comment_id": 65096568, "body": "I believe the hash given was just an example. If is was that particular hash, you wouldn&#39;t have to do any slicing or selecting, just construct the 5-element hash directly."}], "tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1470810684, "creation_date": 1470810684, "answer_id": 38865844, "question_id": 38864959, "link": "https://stackoverflow.com/questions/38864959/ruby-how-can-i-dynamically-build-a-hash-from-user-input/38865844#38865844", "title": "Ruby: How can I dynamically build a hash from user input", "body": "<p>Here is what i would do:</p>\n\n<pre><code>char_ary = ('a'..'z').to_a\nstart_idx = (input - 1) * 5\nsubary = char_ary.slice(start_idx, 5)\nsubary.inject({}) do |h, c|\n  h[c.to_sym] = char_ary.index(c) + 1\n  h\nend\n</code></pre>\n\n<p>This doesn't need a hash to be defined with all the alphabets.</p>\n"}], "owner": {"reputation": 411, "user_id": 5620807, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c760cfacf1be68d224839f67fd12d010?s=128&d=identicon&r=PG&f=1", "display_name": "SB    D", "link": "https://stackoverflow.com/users/5620807/sb-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 38865637, "answer_count": 4, "score": 0, "last_activity_date": 1470814654, "creation_date": 1470807177, "question_id": 38864959, "link": "https://stackoverflow.com/questions/38864959/ruby-how-can-i-dynamically-build-a-hash-from-user-input", "title": "Ruby: How can I dynamically build a hash from user input", "body": "<p>I have a hash like this below</p>\n\n<pre><code>h = {a: 1, b: 2, c: 3, d: 4.....z: 26}\n</code></pre>\n\n<p>now user input 1 then I will fetch first 5 if user input 2 then 6 to next 5 means 6 to 11</p>\n\n<p>How can I acheieve this by a best way</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 656, "user_id": 1571115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a14d53b497799c8835ba825923564b6?s=128&d=identicon&r=PG", "display_name": "titan", "link": "https://stackoverflow.com/users/1571115/titan"}, "edited": false, "score": 0, "creation_date": 1470807549, "post_id": 38864956, "comment_id": 65093030, "body": "what is you association? <code>user has_many  posts</code>?"}, {"owner": {"reputation": 3309, "user_id": 3786332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R33iW.jpg?s=128&g=1", "display_name": "uzaif", "link": "https://stackoverflow.com/users/3786332/uzaif"}, "edited": false, "score": 1, "creation_date": 1470807605, "post_id": 38864956, "comment_id": 65093051, "body": "<code>User.find(2).posts.create(content:&#39;text&#39;)</code> use this"}, {"owner": {"reputation": 1165, "user_id": 2814536, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6023473b3febbe7e4a9cd20f79dd9e7b?s=128&d=identicon&r=PG&f=1", "display_name": "power", "link": "https://stackoverflow.com/users/2814536/power"}, "edited": false, "score": 1, "creation_date": 1470807651, "post_id": 38864956, "comment_id": 65093067, "body": "you should use @user.posts.create(content: &quot;nice day we are having&quot;), it will add the user_id in post record."}, {"owner": {"reputation": 97, "user_id": 6101149, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/3db722ca8df09cde48ce284b43f18bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Shasaco", "link": "https://stackoverflow.com/users/6101149/mike-shasaco"}, "reply_to_user": {"reputation": 656, "user_id": 1571115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a14d53b497799c8835ba825923564b6?s=128&d=identicon&r=PG", "display_name": "titan", "link": "https://stackoverflow.com/users/1571115/titan"}, "edited": false, "score": 0, "creation_date": 1470807726, "post_id": 38864956, "comment_id": 65093100, "body": "@titan no like if i was to attach a post through the rails console, i think it would be something like this post.user =user_id(2), i don&#39;t think that right but something like that. Basically i want to create a post in the console then attach the user_id to that post through the console"}, {"owner": {"reputation": 97, "user_id": 6101149, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/3db722ca8df09cde48ce284b43f18bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Shasaco", "link": "https://stackoverflow.com/users/6101149/mike-shasaco"}, "reply_to_user": {"reputation": 1165, "user_id": 2814536, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6023473b3febbe7e4a9cd20f79dd9e7b?s=128&d=identicon&r=PG&f=1", "display_name": "power", "link": "https://stackoverflow.com/users/2814536/power"}, "edited": false, "score": 0, "creation_date": 1470807787, "post_id": 38864956, "comment_id": 65093127, "body": "@power thank you!!"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1470810811, "post_id": 38864956, "comment_id": 65094616, "body": "you should also share the model associations in the question for more clarity."}], "answers": [{"tags": [], "owner": {"reputation": 656, "user_id": 1571115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a14d53b497799c8835ba825923564b6?s=128&d=identicon&r=PG", "display_name": "titan", "link": "https://stackoverflow.com/users/1571115/titan"}, "is_accepted": false, "score": 1, "last_activity_date": 1470807737, "creation_date": 1470807737, "answer_id": 38865082, "question_id": 38864956, "link": "https://stackoverflow.com/questions/38864956/how-to-add-to-a-post-to-a-user-id-through-rails-console/38865082#38865082", "title": "how to add to a post to a user ID through rails console", "body": "<p>If you have <code>has_many</code> association between <code>User</code> and <code>Post</code> like `user has_many posts' then in console you can attach them as:</p>\n\n<pre><code>@user.posts &lt;&lt; @post\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1165, "user_id": 2814536, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6023473b3febbe7e4a9cd20f79dd9e7b?s=128&d=identicon&r=PG&f=1", "display_name": "power", "link": "https://stackoverflow.com/users/2814536/power"}, "is_accepted": false, "score": 2, "last_activity_date": 1470807964, "creation_date": 1470807964, "answer_id": 38865136, "question_id": 38864956, "link": "https://stackoverflow.com/questions/38864956/how-to-add-to-a-post-to-a-user-id-through-rails-console/38865136#38865136", "title": "how to add to a post to a user ID through rails console", "body": "<p>Instead of creating post individually, you can create it via @user like this:</p>\n\n<pre><code>@user = User.find(2)\n@user.posts.create(content: \"nice day we are having\")\n</code></pre>\n\n<p>It will automatically assign the user_id to the post record.</p>\n"}, {"tags": [], "owner": {"reputation": 1889, "user_id": 4209704, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p8jsg.jpg?s=128&g=1", "display_name": "Pradeep Sapkota", "link": "https://stackoverflow.com/users/4209704/pradeep-sapkota"}, "is_accepted": false, "score": 1, "last_activity_date": 1470807966, "creation_date": 1470807966, "answer_id": 38865137, "question_id": 38864956, "link": "https://stackoverflow.com/questions/38864956/how-to-add-to-a-post-to-a-user-id-through-rails-console/38865137#38865137", "title": "how to add to a post to a user ID through rails console", "body": "<p><strong>Simple steps:</strong></p>\n\n<p><em>Create a new post:</em></p>\n\n<pre><code>p = Post.new\np.title = \"post title\"\np.body = \"post body\"\n</code></pre>\n\n<p><em>Find user to be attached to post</em></p>\n\n<pre><code> u = User.find(2)\n p.user_id = u.id\n p.save\n</code></pre>\n\n<p><strong>This works well</strong></p>\n\n<p><strong>OR TRY THIS</strong></p>\n\n<pre><code>u = User.find(2)\np = u.posts.build(\"title\"=&gt; \"post title\", \"body\" =&gt; \"post body\")\np.save\n</code></pre>\n\n<p>This method needs relationship to be defined before you can run command in console.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 6517738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea3d9c689336c0331bd87590dd24080?s=128&d=identicon&r=PG&f=1", "display_name": "Akshay", "link": "https://stackoverflow.com/users/6517738/akshay"}, "is_accepted": false, "score": 0, "last_activity_date": 1470820156, "creation_date": 1470820156, "answer_id": 38868907, "question_id": 38864956, "link": "https://stackoverflow.com/questions/38864956/how-to-add-to-a-post-to-a-user-id-through-rails-console/38868907#38868907", "title": "how to add to a post to a user ID through rails console", "body": "<p>First, check you have association between User and Post than in console simply write: </p>\n\n<pre><code>@post = Post.create(content: \"nice day we are having\", user: User.find(2))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 620, "user_id": 6795180, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Yc1w6Tq3t4A/AAAAAAAAAAI/AAAAAAAAA7k/oUYfyaNyIz0/photo.jpg?sz=128", "display_name": "Chidozie Nnachor", "link": "https://stackoverflow.com/users/6795180/chidozie-nnachor"}, "is_accepted": false, "score": 1, "last_activity_date": 1530271604, "last_edit_date": 1530271604, "creation_date": 1530236901, "answer_id": 51093237, "question_id": 38864956, "link": "https://stackoverflow.com/questions/38864956/how-to-add-to-a-post-to-a-user-id-through-rails-console/51093237#51093237", "title": "how to add to a post to a user ID through rails console", "body": "<p>If there are many posts, then it will be cost effective to run a loop to append the user IDs to all posts at once. One way to do it in the console is:</p>\n\n<pre><code>everyevery = Post.all #Assign all posts to a variable\n</code></pre>\n\n<p>Then iterate through and append IDs:</p>\n\n<pre><code>everyevery.each do |post|\n   if post.user_id = nil\n      post.user_id = 1 # Assigns user_id of 1. If there are 5 then you could do say rand(1..5)\n      post.save\n   end\nend\n</code></pre>\n\n<p>Of course, this assumes you already have your <code>belongs_to</code> and <code>has_many</code> relationships in place</p>\n"}], "owner": {"reputation": 97, "user_id": 6101149, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/3db722ca8df09cde48ce284b43f18bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Shasaco", "link": "https://stackoverflow.com/users/6101149/mike-shasaco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1109, "favorite_count": 0, "answer_count": 5, "score": 3, "last_activity_date": 1530271604, "creation_date": 1470807144, "question_id": 38864956, "link": "https://stackoverflow.com/questions/38864956/how-to-add-to-a-post-to-a-user-id-through-rails-console", "title": "how to add to a post to a user ID through rails console", "body": "<p>How do i attach a user to a post through the rails console, I forgot the correct way of doing so. So lets say you created a post and wanted to attach it to the user_id that you created how would i do so through  rails console.</p>\n\n<hr>\n\n<p>Rails console</p>\n\n<pre><code>@post = Post.create(content: \"nice day we are having\")\n\n@user = User.find(2)\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ruby-on-rails-4", "js-routes"], "answers": [{"comments": [{"owner": {"reputation": 959, "user_id": 3934687, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/bqWk9.png?s=128&g=1", "display_name": "gwnp", "link": "https://stackoverflow.com/users/3934687/gwnp"}, "edited": false, "score": 0, "creation_date": 1470844832, "post_id": 38870071, "comment_id": 65117899, "body": "Sorry. I meant, my route is using the default rails route type of &quot;resource&quot; which automatically appends a (::format) to the end of the URLs so that it can accept different formats. When working in ERB files, I do not have to specify a format, rails figures out whether it&#39;s html/json etc. I would expect the same behaviour from js-routes, am I mistaken? I could pass the format but it seems like a waste. Does this help?"}], "tags": [], "owner": {"reputation": 2374, "user_id": 1941418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8940942c798e82d460e0c058acfb3b7?s=128&d=identicon&r=PG", "display_name": "smefju", "link": "https://stackoverflow.com/users/1941418/smefju"}, "is_accepted": false, "score": 0, "last_activity_date": 1470823109, "creation_date": 1470823109, "answer_id": 38870071, "question_id": 38864930, "link": "https://stackoverflow.com/questions/38864930/js-routes-adding-format-to-urls/38870071#38870071", "title": "js-routes adding (::format) to urls", "body": "<p>I am not sure if I got your question. If you want to generate url with format suffix you can use <code>format</code> option in the helper method. For example:</p>\n\n<pre><code>Routes.new_address_path(format: 'js')\n</code></pre>\n\n<p>will generate something like this:</p>\n\n<pre><code>/addresses/new.js\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 959, "user_id": 3934687, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/bqWk9.png?s=128&g=1", "display_name": "gwnp", "link": "https://stackoverflow.com/users/3934687/gwnp"}, "is_accepted": true, "score": 0, "last_activity_date": 1481605857, "creation_date": 1481605857, "answer_id": 41114117, "question_id": 38864930, "link": "https://stackoverflow.com/questions/38864930/js-routes-adding-format-to-urls/41114117#41114117", "title": "js-routes adding (::format) to urls", "body": "<p>Sorry I thought I posted my solution in here.</p>\n\n<p>The problem wasn't js-routes but rather my AJAX call, I was setting the content type to JSON and I assumed that it was converting my object to JSON using the built in methods. This is not true, you need to manually convert the object to JSON via JSON.stringify(obj).</p>\n\n<p>Old ajax call:</p>\n\n<pre><code>....\nurl: Routes.feedback_path(),\ndataType: 'json',\ncontentType: 'application/json',\ntype: 'POST',\ndata: obj,\n....\n</code></pre>\n\n<p>New ajax call:</p>\n\n<pre><code>....\nurl: Routes.feedback_path(),\ndataType: 'json',\ncontentType: 'application/json',\ntype: 'POST',\ndata: JSON.stringify(obj),\n....\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 89, "user_id": 4386883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4f9acf92e2f8663f39274f97cf2fe16?s=128&d=identicon&r=PG", "display_name": "Troy S", "link": "https://stackoverflow.com/users/4386883/troy-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1525138024, "creation_date": 1525138024, "answer_id": 50110297, "question_id": 38864930, "link": "https://stackoverflow.com/questions/38864930/js-routes-adding-format-to-urls/50110297#50110297", "title": "js-routes adding (::format) to urls", "body": "<p>You might have found a solution, but your original problem <em>is</em> one with <code>js-routes</code>, or rather your use of it.</p>\n\n<p>You have to provide the parens to get the correct output from js-routes.</p>\n\n<p>Original: <code>Routes.new_address_path</code></p>\n\n<p>Fixed: <code>Routes.new_address_path()</code></p>\n\n<p>As smefju posted, you can specify the format in the parens, but completely leaving them off is not an option.</p>\n"}], "owner": {"reputation": 959, "user_id": 3934687, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/bqWk9.png?s=128&g=1", "display_name": "gwnp", "link": "https://stackoverflow.com/users/3934687/gwnp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 868, "favorite_count": 0, "accepted_answer_id": 41114117, "answer_count": 3, "score": 1, "last_activity_date": 1525138024, "creation_date": 1470807002, "last_edit_date": 1470822182, "question_id": 38864930, "link": "https://stackoverflow.com/questions/38864930/js-routes-adding-format-to-urls", "title": "js-routes adding (::format) to urls", "body": "<p>I have a simple rails project that I've been playing around in with reactjs. To add some basic navigation, I brought the js-routes library in and it works great for urls that have a path parameter such as \"localhost:3000/addresses/1\". </p>\n\n<p>The problem I am facing is I am trying to call a \"new\" resource method and it adds the (::format) literally to the url which of course bombs as localhost:3000/addresses/new(.:format) is an invalid path. </p>\n\n<p>I reference the \"new_address_path\" path as specified in the routes-js docs. The rake output for this url is below:</p>\n\n<pre><code>new_address_path    GET /addresses/new(.:format)    addresses#new\n</code></pre>\n\n<p>The HTML snippet utilizing the above path looks like this:</p>\n\n<pre><code>&lt;a href={Routes.new_address_path}&gt;Create am address&lt;/a&gt;\n</code></pre>\n\n<p>ENV:</p>\n\n<pre><code>-Ruby: 2.2.4\n-Rails: 4.2.6\n-js-routes: 1.2.8\n</code></pre>\n\n<p>Route in question:</p>\n\n<pre><code>resources :addresses\n</code></pre>\n\n<p>What am I missing here? It seems like it is not interpreting the rails route file properly.</p>\n"}, {"tags": ["java", "ruby", "soap", "soap-client", "soap4r"], "comments": [{"owner": {"reputation": 98, "user_id": 2310536, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Hb0C5.jpg?s=128&g=1", "display_name": "Zeeshan Ali", "link": "https://stackoverflow.com/users/2310536/zeeshan-ali"}, "edited": false, "score": 0, "creation_date": 1470809232, "post_id": 38864721, "comment_id": 65093723, "body": "Are you able to see wsdl file in web browser?"}, {"owner": {"reputation": 63, "user_id": 4174739, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/dl9QF.jpg?s=128&g=1", "display_name": "engima", "link": "https://stackoverflow.com/users/4174739/engima"}, "reply_to_user": {"reputation": 98, "user_id": 2310536, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Hb0C5.jpg?s=128&g=1", "display_name": "Zeeshan Ali", "link": "https://stackoverflow.com/users/2310536/zeeshan-ali"}, "edited": false, "score": 0, "creation_date": 1470809654, "post_id": 38864721, "comment_id": 65093954, "body": "No. When I tried, it&#39;s throwing an error:  ERROR -- : GET request not allowed"}], "owner": {"reputation": 63, "user_id": 4174739, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/dl9QF.jpg?s=128&g=1", "display_name": "engima", "link": "https://stackoverflow.com/users/4174739/engima"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1470805972, "creation_date": 1470805972, "question_id": 38864721, "link": "https://stackoverflow.com/questions/38864721/soap-endpoint-url-through-ruby-for-java-soap-client", "title": "SOAP Endpoint url through ruby for Java SOAP Client", "body": "<p>I'm trying to invoke a Ruby SOAP Web Service using Java SOAP Client. And I am unable to get the response for this url:</p>\n\n<pre><code>http://localhost:8080/calculation?wsdl \n</code></pre>\n\n<p>(I'm afraid if the above endpoint url is wrong for the below web service)</p>\n\n<p><strong>Ruby SOAP WS:</strong></p>\n\n<pre><code>require \"soap/rpc/standaloneserver\"\n\nbegin\n  class MyServer &lt; SOAP::RPC::StandaloneServer\n\n    # Expose our services\n    def initialize(*args)\n      super\n      add_method(self, 'add', 'a', 'b')\n      add_method(self, 'div', 'a', 'b')\n    end\n\n    # Handler methods\n    def add(a, b)\n      return a + b\n    end\n    def div(a, b)\n      return a / b\n    end\n  end\n  server = MyServer.new(\"MyServer\",\n                        'urn:ruby:calculation', 'localhost', 8080)\n  trap('INT'){\n    server.shutdown\n  }\n  server.start\nrescue =&gt; err\n  puts err.message\nend\n</code></pre>\n\n<p><em>I'm getting the error as :</em></p>\n\n<pre><code>in `success_content': unexpected response: #&lt;HTTP::Message::Headers:0x00000004328c10 @http_version=\"1.1\", @body_size=0, @chunked=false, @request_method=\"GET\", @request_uri=#&lt;URI::HTTP http://localhost:8080/calculation?wsdl&gt;, @request_query=nil, @request_absolute_uri=nil, @status_code=405, @reason_phrase=\"Method Not Allowed \", @body_type=nil, @body_charset=nil, @body_date=nil, @body_encoding=#&lt;Encoding:ISO-8859-1&gt;, @is_request=false, @header_item=[[\"Allow\", \"POST\"], [\"Content-Type\", \"text/html; charset=ISO-8859-1\"], [\"Server\", \"WEBrick/1.3.1 (Ruby/2.2.5/2016-04-26)\"], [\"Date\", \"Wed, 10 Aug 2016 05:02:29 GMT\"], [\"Content-Length\", \"297\"], [\"Connection\", \"close\"]], @dumped=false&gt; (HTTPClient::BadResponseError)\n</code></pre>\n\n<p>Is the endpoint url wrong? I invoked with the Rub Client and it worked (diff url). Is there a way to invoke using JAVA Client?</p>\n\n<p><strong>Ruby SOAP Client:</strong></p>\n\n<pre><code>#!/usr/bin/ruby\n\nrequire 'soap/rpc/driver'\n\nNAMESPACE = 'urn:ruby:calculation'\nURL = 'http://localhost:8080/'\n\nbegin\n  driver = SOAP::RPC::Driver.new(URL, NAMESPACE)\n\n  # Add remote sevice methods\n  driver.add_method('add', 'a', 'b')\n\n  # Call remote service methods\n  puts driver.add(200, 130)\nrescue =&gt; err\n  puts err.message\nend\n</code></pre>\n"}, {"tags": ["ruby", "string", "reference", "hashmap", "blackboard"], "comments": [{"owner": {"reputation": 1609, "user_id": 3241907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea2601af49d5eca9004032bc36d918b?s=128&d=identicon&r=PG&f=1", "display_name": "SunnyMagadan", "link": "https://stackoverflow.com/users/3241907/sunnymagadan"}, "edited": false, "score": 1, "creation_date": 1470813730, "post_id": 38864288, "comment_id": 65096243, "body": "Your code looks correct. I expect that some of your rows might have a bit different structure. Please double check your rows data and look at what you have at key[&#39;v&#39;] and value[&#39;v&#39;]. Use puts for debug output. <a href=\"http://readysteadycode.com/howto-debug-your-ruby-code\" rel=\"nofollow noreferrer\">readysteadycode.com/howto-debug-your-ruby-code</a>"}, {"owner": {"reputation": 169, "user_id": 931896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yXuRP.jpg?s=128&g=1", "display_name": "sijpkes", "link": "https://stackoverflow.com/users/931896/sijpkes"}, "reply_to_user": {"reputation": 1609, "user_id": 3241907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea2601af49d5eca9004032bc36d918b?s=128&d=identicon&r=PG&f=1", "display_name": "SunnyMagadan", "link": "https://stackoverflow.com/users/3241907/sunnymagadan"}, "edited": false, "score": 0, "creation_date": 1470871733, "post_id": 38864288, "comment_id": 65130826, "body": "Correct, @SunnyMagadan, I&#39;ve answered my own question. There are mixed types in the JSON object, I also misunderstood how each worked on Arrays."}], "answers": [{"tags": [], "owner": {"reputation": 169, "user_id": 931896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yXuRP.jpg?s=128&g=1", "display_name": "sijpkes", "link": "https://stackoverflow.com/users/931896/sijpkes"}, "is_accepted": true, "score": 0, "last_activity_date": 1470871499, "creation_date": 1470871499, "answer_id": 38885083, "question_id": 38864288, "link": "https://stackoverflow.com/questions/38864288/modifying-reference-to-hash-value-in-ruby/38885083#38885083", "title": "Modifying reference to hash value in Ruby", "body": "<p>OK, this has been an excellent learning exercise!  </p>\n\n<p>The problem I was having was in two parts: </p>\n\n<ol>\n<li><p>the JSON output from <code>JSON.parse</code> was a Hash, but the Hash was storing Arrays, so my code was breaking.  Looking at the sample data rows above, it includes some empty arrays: <code>... [],[],[] ...</code>.</p></li>\n<li><p>I misunderstood how each was working with a Hash, I assumed <code>key, value</code> (similar to jquery each) but the <code>key, value</code> in the original each statement actually evaluated to the first two array elements.</p></li>\n</ol>\n\n<p>So here is my amended code:</p>\n\n<pre><code>data['cachedBook']['rows'].map! { |row|\n  fullname = Faker::Name.name\n  namea = fullname.split(' ')\n\n  row.each { |val|\n\n  if val.class == Hash\n      newval = val.clone\n        if [\"Ms.\", \"Mr.\", \"Dr.\", \"Miss\", \"Mrs.\"].any? { |needle| fullname.include? needle  }\n              if val.key?(\"c\") &amp;&amp; val[\"c\"] == \"LN\"\n                newval[\"v\"] = namea[1]\n                newval[\"sortval\"] = namea[1]\n              end\n              if val.key?(\"c\") &amp;&amp; val[\"c\"] == \"FN\"\n                newval[\"v\"] = namea[2]\n                newval[\"sortval\"] = namea[2]\n              end\n        else\n            if val.key?(\"c\") &amp;&amp; val[\"c\"] == \"LN\"\n              newval[\"v\"] = namea[0]\n              newval[\"sortval\"] = namea[0]\n            end\n            if val.key?(\"c\") &amp;&amp; val[\"c\"] == \"FN\"\n              newval[\"v\"] = namea[1]\n              newval[\"sortval\"] = namea[1]\n            end\n        end\n    val.merge!(newval)\n  end\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 931896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yXuRP.jpg?s=128&g=1", "display_name": "sijpkes", "link": "https://stackoverflow.com/users/931896/sijpkes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 38885083, "answer_count": 1, "score": 0, "last_activity_date": 1471218071, "creation_date": 1470803468, "last_edit_date": 1471218071, "question_id": 38864288, "link": "https://stackoverflow.com/questions/38864288/modifying-reference-to-hash-value-in-ruby", "title": "Modifying reference to hash value in Ruby", "body": "<p>I'm new to Ruby and I have a JSON data set that I am de-identifying using <a href=\"https://github.com/stympy/faker\" rel=\"nofollow\">stympy's Faker</a>.  I would prefer to change the values in the Hash by reference.  </p>\n\n<p>I've tried changing the assignments eg. <code>key['v] = namea[1]</code> to <code>data['cachedBook']['rows'][key][value] = namea[1]</code> but I get a <code>no implicit conversion of Array into String</code> error. Which makes sense since each is an array in itself, but I'm unsure as to how proceed on this.    </p>\n\n<p>A single row e.g. <code>data['cachedBook']['rows']</code> looks like this:</p>\n\n<pre><code>    [{\"v\":\"Sijpkes_PreviewUser\",\"c\":\"LN\",\"uid\":\"9######\",\"iuid\":\"3####7\",\"avail\":true,\"sortval\":\"Sijpkes_PreviewUser\"},\n{\"v\":\"Paul\",\"c\":\"FN\",\"sortval\":\"Paul\"},\n{\"v\":\"#####_previewuser\",\"c\":\"UN\"},\n    {\"v\":\"\",\"c\":\"SI\"},{\"v\":\"30 June 2016\",\"c\":\"LA\",\"sortval\":1467261918000},\n    {\"v\":\"Available\",\"c\":\"AV\"},[],[],[],[],[],[],\n    {\"v\":\"-\",\"tv\":\"\",\"numAtt\":\"0\",\"c\":\"374595\"},[],[],\n    {\"v\":\"-\",\"tv\":\"\",\"numAtt\":\"0\",\"c\":\"374596\"},[],[],[],\n    {\"v\":0,\"tv\":\"0.0\",\"mp\":840,\"or\":\"y\",\"c\":\"362275\"},\n    {\"v\":0,\"tv\":\"0.0\",\"mp\":99.99999,\"or\":\"y\",\"c\":\"389721\"}] \n</code></pre>\n\n<p>The key and value are interpreted as the first two entries.\nSensitive data has been removed with <code>####</code>s.</p>\n\n<p>Ruby code:</p>\n\n<pre><code>data['cachedBook']['rows'].each do |key, value|\n  fullname = Faker::Name.name\n  namea = fullname.split(' ')\n\n  str = \"OLD: \" + String(key['v']) + \" \" + String(value['v']) +\"\\n\";\n  puts str\n\n  if [\"Ms.\", \"Mr.\", \"Dr.\", \"Miss\", \"Mrs.\"].any? { |needle| fullname.include? needle  }\n      key['v'] = namea[2]\n      value['v'] = namea[1]\n      value['sortval'] = namea[1]\n  else\n      key['v'] = namea[1]\n      value['v'] = namea[0]\n      value['sortval'] = namea[1]\n  end\n\n  str = \"\\nNEW: \\nFullname: \"+String(fullname)+\"\\nConverted surname: \"+ String(key['v']) + \"\\n\\t firstname: \" + String(value['v'])\n  puts str\nend\n\nputs data\n</code></pre>\n"}, {"tags": ["css", "ruby-on-rails", "ruby", "sass", "bower"], "comments": [{"owner": {"reputation": 136, "user_id": 1044652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c97d8f7625f255979bab19b1c312709d?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/1044652/rob"}, "edited": false, "score": 0, "creation_date": 1478464679, "post_id": 38863889, "comment_id": 68153917, "body": "Did you solve this problem?"}, {"owner": {"reputation": 303, "user_id": 3731344, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ea6a9595bbf469193d65a796c0313e8a?s=128&d=identicon&r=PG&f=1", "display_name": "ayounis90", "link": "https://stackoverflow.com/users/3731344/ayounis90"}, "reply_to_user": {"reputation": 136, "user_id": 1044652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c97d8f7625f255979bab19b1c312709d?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/1044652/rob"}, "edited": false, "score": 0, "creation_date": 1480822928, "post_id": 38863889, "comment_id": 69119877, "body": "@Rob I was not able to. I ended up making the Rails 4.1.x project a Rails 5 by following people&#39;s suggestions on how to upgrade to the latest version. Turned out that there&#39;s a newer Rails 5 version of the same project which was a free download so going to start working with that eventually. Upgrading is a pain and some of the ActionCable things didn&#39;t seem to work in the new project like they were supposed to so I gave up on that idea."}], "owner": {"reputation": 303, "user_id": 3731344, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/ea6a9595bbf469193d65a796c0313e8a?s=128&d=identicon&r=PG&f=1", "display_name": "ayounis90", "link": "https://stackoverflow.com/users/3731344/ayounis90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1470800948, "creation_date": 1470800948, "question_id": 38863889, "link": "https://stackoverflow.com/questions/38863889/rails-mq-mobile-undefined-variable-in-sass", "title": "Rails | $mq-mobile Undefined Variable in Sass", "body": "<p>I am working with a Rails Theme I downloaded from wrapbootstrap.com and it runs locally without changing anything. I've copied over all the CSS/JS views/controller files into a Rails 5 application and installed Bower locally however I keep getting an error: </p>\n\n<p><code>Sass::SyntaxError at /\nUndefined variable: \"$mq-mobile\".</code></p>\n\n<p>I've seemed to have tried what I could think of and from some suggestions online:</p>\n\n<ol>\n<li>Have bower install all the dependencies (to the best of my knowledge)</li>\n<li>Try to go through all the code in the older Rails 4.1.x project and compare files in the Rails 5 project.</li>\n<li>Make sure all the files are in the same directory structure</li>\n<li>Check all file extensions</li>\n<li>Check that the variable <strong>$mq-mobile</strong> is indeed undefined in the files but how is it working in the original project? </li>\n</ol>\n\n<p>Now I'm not sure which way to turn to aside from SO. </p>\n\n<p>The Error output is as follows:</p>\n\n<pre><code>Sass::Script::Tree::Variable#_perform\nsass (3.4.22) lib/sass/script/tree/variable.rb, line 49\nSass::Script::Tree::Variable#perform\nsass (3.4.22) lib/sass/script/tree/node.rb, line 58\nblock in Sass::Tree::Visitors::Perform#run_interp_no_strip\nsass (3.4.22) lib/sass/tree/visitors/perform.rb, line 542\nSass::Tree::Visitors::Perform#run_interp_no_strip\nsass (3.4.22) lib/sass/tree/visitors/perform.rb, line 540\nSass::Tree::Visitors::Perform#run_interp\nsass (3.4.22) lib/sass/tree/visitors/perform.rb, line 547\nSass::Tree::Visitors::Perform#visit_media\nsass (3.4.22) lib/sass/tree/visitors/perform.rb, line 512\nSass::Tree::Visitors::Perform#visit\nsass (3.4.22) lib/sass/tree/visitors/base.rb, line 36\nblock in Sass::Tree::Visitors::Perform#visit\nsass (3.4.22) lib/sass/tree/visitors/perform.rb, line 160\nblock in Sass::Stack#with_base\nsass (3.4.22) lib/sass/stack.rb, line 79\nSass::Stack#with_frame\nsass (3.4.22) lib/sass/stack.rb, line 115\nSass::Stack#with_base\nsass (3.4.22) lib/sass/stack.rb, line 79\nSass::Tree::Visitors::Perform#visit\nsass (3.4.22) lib/sass/tree/visitors/perform.rb, line 160\nblock in Sass::Tree::Visitors::Perform#visit_children\nsass (3.4.22) lib/sass/tree/visitors/base.rb, line 52\nSass::Tree::Visitors::Perform#visit_children\nsass (3.4.22) lib/sass/tree/visitors/base.rb, line 52\nblock in Sass::Tree::Visitors::Perform#visit_children\nsass (3.4.22) lib/sass/tree/visitors/perform.rb, line 169\nSass::Tree::Visitors::Perform#with_environment\nsass (3.4.22) lib/sass/tree/visitors/perform.rb, line 181\nSass::Tree::Visitors::Perform#visit_children\nsass (3.4.22) lib/sass/tree/visitors/perform.rb, line 168\nblock in Sass::Tree::Visitors::Perform#visit\nsass (3.4.22) lib/sass/tree/visitors/base.rb, line 36\nSass::Tree::Visitors::Perform#visit_root\nsass (3.4.22) lib/sass/tree/visitors/perform.rb, line 188\nSass::Tree::Visitors::Perform#visit\nsass (3.4.22) lib/sass/tree/visitors/base.rb, line 36\nSass::Tree::Visitors::Perform#visit\nsass (3.4.22) lib/sass/tree/visitors/perform.rb, line 159\nSass::Tree::Visitors::Perform.visit\nsass (3.4.22) lib/sass/tree/visitors/perform.rb, line 8\nSass::Tree::RootNode#css_tree\nsass (3.4.22) lib/sass/tree/root_node.rb, line 36\nSass::Tree::RootNode#render\nsass (3.4.22) lib/sass/tree/root_node.rb, line 20\nSass::Engine#render\nsass (3.4.22) lib/sass/engine.rb, line 281\nSass::Rails::ScssTemplate#evaluate\nsass-rails (5.0.6) lib/sass/rails/template.rb, line 47\nSass::Rails::ScssTemplate#render\ntilt (2.0.5) lib/tilt/template.rb, line 102\nSprockets::LegacyTiltProcessor#call\nsprockets (3.7.0) lib/sprockets/legacy_tilt_processor.rb, line 25\nSprockets::CachedEnvironment#call_processor\nsprockets (3.7.0) lib/sprockets/processor_utils.rb, line 75\nblock in Sprockets::CachedEnvironment#call_processors\nsprockets (3.7.0) lib/sprockets/processor_utils.rb, line 57\nSprockets::CachedEnvironment#call_processors\nsprockets (3.7.0) lib/sprockets/processor_utils.rb, line 56\nSprockets::CachedEnvironment#load_from_unloaded\nsprockets (3.7.0) lib/sprockets/loader.rb, line 134\nblock in Sprockets::CachedEnvironment#load\nsprockets (3.7.0) lib/sprockets/loader.rb, line 60\nSprockets::CachedEnvironment#fetch_asset_from_dependency_cache\nsprockets (3.7.0) lib/sprockets/loader.rb, line 317\nSprockets::CachedEnvironment#load\nsprockets (3.7.0) lib/sprockets/loader.rb, line 44\nblock in Sprockets::CachedEnvironment#initialize\nsprockets (3.7.0) lib/sprockets/cached_environment.rb, line 20\nSprockets::CachedEnvironment#load\nsprockets (3.7.0) lib/sprockets/cached_environment.rb, line 47\nblock in Sprockets::Bundle.call\nsprockets (3.7.0) lib/sprockets/bundle.rb, line 23\nSprockets::Utils.dfs\nsprockets (3.7.0) lib/sprockets/utils.rb, line 196\nSprockets::Bundle.call\nsprockets (3.7.0) lib/sprockets/bundle.rb, line 24\nSprockets::CachedEnvironment#call_processor\nsprockets (3.7.0) lib/sprockets/processor_utils.rb, line 75\nblock in Sprockets::CachedEnvironment#call_processors\nsprockets (3.7.0) lib/sprockets/processor_utils.rb, line 57\nSprockets::CachedEnvironment#call_processors\nsprockets (3.7.0) lib/sprockets/processor_utils.rb, line 56\nSprockets::CachedEnvironment#load_from_unloaded\nsprockets (3.7.0) lib/sprockets/loader.rb, line 134\nblock in Sprockets::CachedEnvironment#load\nsprockets (3.7.0) lib/sprockets/loader.rb, line 60\nSprockets::CachedEnvironment#fetch_asset_from_dependency_cache\nsprockets (3.7.0) lib/sprockets/loader.rb, line 317\nSprockets::CachedEnvironment#load\nsprockets (3.7.0) lib/sprockets/loader.rb, line 44\nblock in Sprockets::CachedEnvironment#initialize\nsprockets (3.7.0) lib/sprockets/cached_environment.rb, line 20\nSprockets::CachedEnvironment#load\nsprockets (3.7.0) lib/sprockets/cached_environment.rb, line 47\nSprockets::CachedEnvironment#find_asset\nsprockets (3.7.0) lib/sprockets/base.rb, line 66\nSprockets::CachedEnvironment#find_all_linked_assets\nsprockets (3.7.0) lib/sprockets/base.rb, line 73\nblock in Sprockets::Manifest#find\nsprockets (3.7.0) lib/sprockets/manifest.rb, line 142\nblock (2 levels) in Sprockets::CachedEnvironment#logical_paths\nsprockets (3.7.0) lib/sprockets/legacy.rb, line 114\nblock in Sprockets::CachedEnvironment#stat_tree\nsprockets (3.7.0) lib/sprockets/path_utils.rb, line 228\nblock in Sprockets::CachedEnvironment#stat_directory\nsprockets (3.7.0) lib/sprockets/path_utils.rb, line 212\nSprockets::CachedEnvironment#stat_directory\nsprockets (3.7.0) lib/sprockets/path_utils.rb, line 209\nSprockets::CachedEnvironment#stat_tree\nsprockets (3.7.0) lib/sprockets/path_utils.rb, line 227\nblock in Sprockets::CachedEnvironment#logical_paths\nsprockets (3.7.0) lib/sprockets/legacy.rb, line 105\nSprockets::CachedEnvironment#logical_paths\nsprockets (3.7.0) lib/sprockets/legacy.rb, line 104\nSprockets::Manifest#find\nsprockets (3.7.0) lib/sprockets/manifest.rb, line 140\nMoscars::Application#precompiled_assets\nsprockets-rails (3.1.1) lib/sprockets/railtie.rb, line 50\nMoscars::Application#asset_precompiled?\nsprockets-rails (3.1.1) lib/sprockets/railtie.rb, line 35\nblock (3 levels) in &lt;class:Railtie&gt;\nsprockets-rails (3.1.1) lib/sprockets/railtie.rb, line 250\nSprockets::Rails::HelperAssetResolvers::Environment#precompiled?\nsprockets-rails (3.1.1) lib/sprockets/rails/helper.rb, line 342\nSprockets::Rails::HelperAssetResolvers::Environment#raise_unless_precompiled_asset\nsprockets-rails (3.1.1) lib/sprockets/rails/helper.rb, line 346\nSprockets::Rails::HelperAssetResolvers::Environment#find_debug_asset\nsprockets-rails (3.1.1) lib/sprockets/rails/helper.rb, line 331\nblock in #&lt;Class:0x007fc2f8bc8e38&gt;#lookup_debug_asset\nsprockets-rails (3.1.1) lib/sprockets/rails/helper.rb, line 212\nblock in #&lt;Class:0x007fc2f8bc8e38&gt;#resolve_asset\nsprockets-rails (3.1.1) lib/sprockets/rails/helper.rb, line 225\n#&lt;Class:0x007fc2f8bc8e38&gt;#resolve_asset\nsprockets-rails (3.1.1) lib/sprockets/rails/helper.rb, line 224\n#&lt;Class:0x007fc2f8bc8e38&gt;#lookup_debug_asset\nsprockets-rails (3.1.1) lib/sprockets/rails/helper.rb, line 211\nblock in #&lt;Class:0x007fc2f8bc8e38&gt;#stylesheet_link_tag\nsprockets-rails (3.1.1) lib/sprockets/rails/helper.rb, line 153\n#&lt;Class:0x007fc2f8bc8e38&gt;#stylesheet_link_tag\nsprockets-rails (3.1.1) lib/sprockets/rails/helper.rb, line 152\n#&lt;Class:0x007fc2f8bc8e38&gt;#_app_views_layouts_application_html_erb__1177409203046223770_70237686521380\napp/views/layouts/application.html.erb, line 12\nblock in ActionView::Template#render\nactionview (5.0.0) lib/action_view/template.rb, line 158\nActiveSupport::Notifications.instrument\nactivesupport (5.0.0) lib/active_support/notifications.rb, line 166\nActionView::Template#instrument\nactionview (5.0.0) lib/action_view/template.rb, line 348\nActionView::Template#render\nactionview (5.0.0) lib/action_view/template.rb, line 156\nActionView::TemplateRenderer#render_with_layout\nactionview (5.0.0) lib/action_view/renderer/template_renderer.rb, line 66\nActionView::TemplateRenderer#render_template\nactionview (5.0.0) lib/action_view/renderer/template_renderer.rb, line 52\nActionView::TemplateRenderer#render\nactionview (5.0.0) lib/action_view/renderer/template_renderer.rb, line 14\nActionView::Renderer#render_template\nactionview (5.0.0) lib/action_view/renderer/renderer.rb, line 42\nActionView::Renderer#render\nactionview (5.0.0) lib/action_view/renderer/renderer.rb, line 23\nPageController#_render_template\nactionview (5.0.0) lib/action_view/rendering.rb, line 103\nPageController#_render_template\nactionpack (5.0.0) lib/action_controller/metal/streaming.rb, line 217\nPageController#render_to_body\nactionview (5.0.0) lib/action_view/rendering.rb, line 83\nPageController#render_to_body\nactionpack (5.0.0) lib/action_controller/metal/rendering.rb, line 52\nPageController#render_to_body\nactionpack (5.0.0) lib/action_controller/metal/renderers.rb, line 144\nPageController#render\nactionpack (5.0.0) lib/abstract_controller/rendering.rb, line 26\nPageController#render\nactionpack (5.0.0) lib/action_controller/metal/rendering.rb, line 36\nblock (2 levels) in PageController#render\nactionpack (5.0.0) lib/action_controller/metal/instrumentation.rb, line 44\nblock in Benchmark.ms\nactivesupport (5.0.0) lib/active_support/core_ext/benchmark.rb, line 12\nBenchmark.realtime\n/Users/aneilyounis/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/benchmark.rb, line 308\nBenchmark.ms\nactivesupport (5.0.0) lib/active_support/core_ext/benchmark.rb, line 12\nblock in PageController#render\nactionpack (5.0.0) lib/action_controller/metal/instrumentation.rb, line 44\nPageController#cleanup_view_runtime\nactionpack (5.0.0) lib/action_controller/metal/instrumentation.rb, line 87\nPageController#cleanup_view_runtime\nactiverecord (5.0.0) lib/active_record/railties/controller_runtime.rb, line 25\nPageController#render\nactionpack (5.0.0) lib/action_controller/metal/instrumentation.rb, line 43\nPageController#default_render\nactionpack (5.0.0) lib/action_controller/metal/implicit_render.rb, line 36\nblock in PageController#send_action\nactionpack (5.0.0) lib/action_controller/metal/basic_implicit_render.rb, line 4\nPageController#send_action\nactionpack (5.0.0) lib/action_controller/metal/basic_implicit_render.rb, line 4\nPageController#process_action\nactionpack (5.0.0) lib/abstract_controller/base.rb, line 188\nPageController#process_action\nactionpack (5.0.0) lib/action_controller/metal/rendering.rb, line 30\nblock in PageController#process_action\nactionpack (5.0.0) lib/abstract_controller/callbacks.rb, line 20\nActiveSupport::Callbacks::Filters::End#call\nactivesupport (5.0.0) lib/active_support/callbacks.rb, line 126\nblock (2 levels) in ActiveSupport::Callbacks::CallbackChain#compile\nactivesupport (5.0.0) lib/active_support/callbacks.rb, line 506\nActiveSupport::Callbacks::CallbackSequence#call\nactivesupport (5.0.0) lib/active_support/callbacks.rb, line 455\nPageController#__run_callbacks__\nactivesupport (5.0.0) lib/active_support/callbacks.rb, line 101\nPageController#_run_process_action_callbacks\nactivesupport (5.0.0) lib/active_support/callbacks.rb, line 750\nPageController#run_callbacks\nactivesupport (5.0.0) lib/active_support/callbacks.rb, line 90\nPageController#process_action\nactionpack (5.0.0) lib/abstract_controller/callbacks.rb, line 19\nPageController#process_action\nactionpack (5.0.0) lib/action_controller/metal/rescue.rb, line 20\nblock in PageController#process_action\nactionpack (5.0.0) lib/action_controller/metal/instrumentation.rb, line 32\nblock in ActiveSupport::Notifications.instrument\nactivesupport (5.0.0) lib/active_support/notifications.rb, line 164\nActiveSupport::Notifications::Instrumenter#instrument\nactivesupport (5.0.0) lib/active_support/notifications/instrumenter.rb, line 21\nActiveSupport::Notifications.instrument\nactivesupport (5.0.0) lib/active_support/notifications.rb, line 164\nPageController#process_action\nactionpack (5.0.0) lib/action_controller/metal/instrumentation.rb, line 30\nPageController#process_action\nactionpack (5.0.0) lib/action_controller/metal/params_wrapper.rb, line 248\nPageController#process_action\nactiverecord (5.0.0) lib/active_record/railties/controller_runtime.rb, line 18\nPageController#process\nactionpack (5.0.0) lib/abstract_controller/base.rb, line 126\nPageController#process\nactionview (5.0.0) lib/action_view/rendering.rb, line 30\nPageController#dispatch\nactionpack (5.0.0) lib/action_controller/metal.rb, line 190\nPageController.dispatch\nactionpack (5.0.0) lib/action_controller/metal.rb, line 262\nActionDispatch::Routing::RouteSet::Dispatcher#dispatch\nactionpack (5.0.0) lib/action_dispatch/routing/route_set.rb, line 50\nActionDispatch::Routing::RouteSet::Dispatcher#serve\nactionpack (5.0.0) lib/action_dispatch/routing/route_set.rb, line 32\nblock in ActionDispatch::Journey::Router#serve\nactionpack (5.0.0) lib/action_dispatch/journey/router.rb, line 39\nActionDispatch::Journey::Router#serve\nactionpack (5.0.0) lib/action_dispatch/journey/router.rb, line 26\nActionDispatch::Routing::RouteSet#call\nactionpack (5.0.0) lib/action_dispatch/routing/route_set.rb, line 725\nblock in Warden::Manager#call\nwarden (1.2.6) lib/warden/manager.rb, line 35\nWarden::Manager#call\nwarden (1.2.6) lib/warden/manager.rb, line 34\nRack::ETag#call\nrack (2.0.1) lib/rack/etag.rb, line 25\nRack::ConditionalGet#call\nrack (2.0.1) lib/rack/conditional_get.rb, line 25\nRack::Head#call\nrack (2.0.1) lib/rack/head.rb, line 12\nActionDispatch::Session::CookieStore#context\nrack (2.0.1) lib/rack/session/abstract/id.rb, line 222\nActionDispatch::Session::CookieStore#call\nrack (2.0.1) lib/rack/session/abstract/id.rb, line 216\nActionDispatch::Cookies#call\nactionpack (5.0.0) lib/action_dispatch/middleware/cookies.rb, line 613\nActiveRecord::Migration::CheckPending#call\nactiverecord (5.0.0) lib/active_record/migration.rb, line 552\nblock in ActionDispatch::Callbacks#call\nactionpack (5.0.0) lib/action_dispatch/middleware/callbacks.rb, line 38\nActionDispatch::Callbacks#__run_callbacks__\nactivesupport (5.0.0) lib/active_support/callbacks.rb, line 97\nActionDispatch::Callbacks#_run_call_callbacks\nactivesupport (5.0.0) lib/active_support/callbacks.rb, line 750\nActionDispatch::Callbacks#run_callbacks\nactivesupport (5.0.0) lib/active_support/callbacks.rb, line 90\nActionDispatch::Callbacks#call\nactionpack (5.0.0) lib/action_dispatch/middleware/callbacks.rb, line 36\nActionDispatch::Reloader#call\nactionpack (5.0.0) lib/action_dispatch/middleware/executor.rb, line 12\nActionDispatch::RemoteIp#call\nactionpack (5.0.0) lib/action_dispatch/middleware/remote_ip.rb, line 79\nBetterErrors::Middleware#protected_app_call\nbetter_errors (2.1.1) lib/better_errors/middleware.rb, line 84\nBetterErrors::Middleware#better_errors_call\nbetter_errors (2.1.1) lib/better_errors/middleware.rb, line 79\nBetterErrors::Middleware#call\nbetter_errors (2.1.1) lib/better_errors/middleware.rb, line 57\nActionDispatch::DebugExceptions#call\nactionpack (5.0.0) lib/action_dispatch/middleware/debug_exceptions.rb, line 49\nWebConsole::Middleware#call_app\nweb-console (3.3.1) lib/web_console/middleware.rb, line 131\nblock in WebConsole::Middleware#call\nweb-console (3.3.1) lib/web_console/middleware.rb, line 28\nWebConsole::Middleware#call\nweb-console (3.3.1) lib/web_console/middleware.rb, line 18\nActionDispatch::ShowExceptions#call\nactionpack (5.0.0) lib/action_dispatch/middleware/show_exceptions.rb, line 31\nRails::Rack::Logger#call_app\nrailties (5.0.0) lib/rails/rack/logger.rb, line 36\nblock in Rails::Rack::Logger#call\nrailties (5.0.0) lib/rails/rack/logger.rb, line 24\nblock in ActiveSupport::Logger#tagged\nactivesupport (5.0.0) lib/active_support/tagged_logging.rb, line 70\nActiveSupport::Logger::SimpleFormatter#tagged\nactivesupport (5.0.0) lib/active_support/tagged_logging.rb, line 26\nActiveSupport::Logger#tagged\nactivesupport (5.0.0) lib/active_support/tagged_logging.rb, line 70\nRails::Rack::Logger#call\nrailties (5.0.0) lib/rails/rack/logger.rb, line 24\nSprockets::Rails::QuietAssets#call\nsprockets-rails (3.1.1) lib/sprockets/rails/quiet_assets.rb, line 13\nRequestStore::Middleware#call\nrequest_store (1.3.1) lib/request_store/middleware.rb, line 9\nActionDispatch::RequestId#call\nactionpack (5.0.0) lib/action_dispatch/middleware/request_id.rb, line 24\nRack::MethodOverride#call\nrack (2.0.1) lib/rack/method_override.rb, line 22\nRack::Runtime#call\nrack (2.0.1) lib/rack/runtime.rb, line 22\nActiveSupport::Cache::Strategy::LocalCache::Middleware#call\nactivesupport (5.0.0) lib/active_support/cache/strategy/local_cache_middleware.rb, line 28\nActionDispatch::Executor#call\nactionpack (5.0.0) lib/action_dispatch/middleware/executor.rb, line 12\nActionDispatch::Static#call\nactionpack (5.0.0) lib/action_dispatch/middleware/static.rb, line 136\nRack::Sendfile#call\nrack (2.0.1) lib/rack/sendfile.rb, line 111\nMoscars::Application#call\nrailties (5.0.0) lib/rails/engine.rb, line 522\nPuma::Configuration::ConfigMiddleware#call\npuma (3.6.0) lib/puma/configuration.rb, line 225\nPuma::Server#handle_request\npuma (3.6.0) lib/puma/server.rb, line 578\nPuma::Server#process_client\npuma (3.6.0) lib/puma/server.rb, line 415\nblock in Puma::Server#run\npuma (3.6.0) lib/puma/server.rb, line 275\nblock in Puma::ThreadPool#spawn_thread\npuma (3.6.0) lib/puma/thread_pool.rb, line 116\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rails-activerecord", "activeadmin"], "comments": [{"owner": {"reputation": 901, "user_id": 3872380, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/wy14q.jpg?s=128&g=1", "display_name": "Mukesh", "link": "https://stackoverflow.com/users/3872380/mukesh"}, "edited": false, "score": 0, "creation_date": 1470800159, "post_id": 38863768, "comment_id": 65090848, "body": "paste this app/views/active_admin/resource/index.html.arb"}, {"owner": {"reputation": 508, "user_id": 4415920, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/crheD.jpg?s=128&g=1", "display_name": "The Gugaru", "link": "https://stackoverflow.com/users/4415920/the-gugaru"}, "reply_to_user": {"reputation": 901, "user_id": 3872380, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/wy14q.jpg?s=128&g=1", "display_name": "Mukesh", "link": "https://stackoverflow.com/users/3872380/mukesh"}, "edited": false, "score": 0, "creation_date": 1470801131, "post_id": 38863768, "comment_id": 65091076, "body": "@Mukesh I apended it to the end of my post."}, {"owner": {"reputation": 901, "user_id": 3872380, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/wy14q.jpg?s=128&g=1", "display_name": "Mukesh", "link": "https://stackoverflow.com/users/3872380/mukesh"}, "edited": false, "score": 0, "creation_date": 1470801326, "post_id": 38863768, "comment_id": 65091116, "body": "please, paste code which is rendering .  (index partial)"}, {"owner": {"reputation": 508, "user_id": 4415920, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/crheD.jpg?s=128&g=1", "display_name": "The Gugaru", "link": "https://stackoverflow.com/users/4415920/the-gugaru"}, "reply_to_user": {"reputation": 901, "user_id": 3872380, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/wy14q.jpg?s=128&g=1", "display_name": "Mukesh", "link": "https://stackoverflow.com/users/3872380/mukesh"}, "edited": false, "score": 0, "creation_date": 1470801432, "post_id": 38863768, "comment_id": 65091132, "body": "@Mukesh no code is rendered just the error message in the first code block in my post I will provide a screen shot as well."}], "answers": [{"tags": [], "owner": {"reputation": 508, "user_id": 4415920, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/crheD.jpg?s=128&g=1", "display_name": "The Gugaru", "link": "https://stackoverflow.com/users/4415920/the-gugaru"}, "is_accepted": true, "score": 1, "last_activity_date": 1470810171, "creation_date": 1470810171, "answer_id": 38865703, "question_id": 38863768, "link": "https://stackoverflow.com/questions/38863768/ruby-on-rails-active-admin-undefined-method-except-for-string0x000000051298/38865703#38865703", "title": "Ruby on Rails Active Admin undefined method `except&#39; for #&lt;String:0x000000051298f0&gt;", "body": "<p>Ok I figured this out! For others that may have similar issues in the future. </p>\n\n<p>For starters my Category table was being used to generate the navigation for the site and because of that I had a before_filter in my application controller:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  include NaviGenerator\n\n  # Prevent CSRF attacks by raising an exception.\n  # For APIs, you may want to use :null_session instead.\n  protect_from_forgery with: :exception\n  before_filter :getCategories\n\n  private\n  def getCategories\n    @categories = categoryListGen 'nav'\n  end\nend\n</code></pre>\n\n<p>I am not sure as of why and I am digging further, however something about querying the categories to generate the navigation before Active Admin was loading was causing a collision of some sort and I discovered this via Better Errors gem and Binding Of Caller gem. This showed the navigation code being generated before Active Admin loaded thus causing the error. So I fixed it by doing:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  include NaviGenerator\n\n  # Prevent CSRF attacks by raising an exception.\n  # For APIs, you may want to use :null_session instead.\n  protect_from_forgery with: :exception\n  before_filter :getCategories\n\n  private\n  def getCategories\n    cururl = request.original_url\n    cururl.to_s\n    if cururl.include? \"admin\"\n      ##Dont run navi code!\n    else\n      @categories = categoryListGen 'nav'\n    end\n  end\nend\n</code></pre>\n\n<p>I have simulated this in different fashions quickly and it seems that if you have a before_filter that runs and sets a global variable and you use active admin, it will cause the models that said method uses to not load when accessing related Active Admin pages.</p>\n\n<p>I am not sure if this is a bug and I will have to dig more to find out the exact cause. However for the time being doing a test against the current url to see if it includes the string admin you can at least have bliss on both front and back end when using Active Admin.</p>\n"}, {"tags": [], "owner": {"reputation": 1090, "user_id": 2667984, "user_type": "registered", "profile_image": "https://graph.facebook.com/1247854657/picture?type=large", "display_name": "Nuno Costa", "link": "https://stackoverflow.com/users/2667984/nuno-costa"}, "is_accepted": false, "score": -1, "last_activity_date": 1485873405, "creation_date": 1485873405, "answer_id": 41960211, "question_id": 38863768, "link": "https://stackoverflow.com/questions/38863768/ruby-on-rails-active-admin-undefined-method-except-for-string0x000000051298/41960211#41960211", "title": "Ruby on Rails Active Admin undefined method `except&#39; for #&lt;String:0x000000051298f0&gt;", "body": "<p>What I think you want is to add <code>config.skip_before_action :getCategories</code> to your ActiveAdmin initizializer</p>\n"}], "owner": {"reputation": 508, "user_id": 4415920, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/crheD.jpg?s=128&g=1", "display_name": "The Gugaru", "link": "https://stackoverflow.com/users/4415920/the-gugaru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1303, "favorite_count": 0, "accepted_answer_id": 38865703, "answer_count": 2, "score": 0, "last_activity_date": 1485873405, "creation_date": 1470799925, "last_edit_date": 1470801502, "question_id": 38863768, "link": "https://stackoverflow.com/questions/38863768/ruby-on-rails-active-admin-undefined-method-except-for-string0x000000051298", "title": "Ruby on Rails Active Admin undefined method `except&#39; for #&lt;String:0x000000051298f0&gt;", "body": "<p>I have a ruby site setup and had Active Admin working for all my admin pages. All of a sudden one admin categories page is producing the error below. The category is the top level of the relationships in the database. \nI have checked everything from column name references, making sure I have the relationships defined properly, and the database setup properly. I am sure the /app/admin/category.rb is fine as well. At this point I am not sure if this is actually an issue with my code but a gem issue. Any help in the right direction would be greatly appreciated! </p>\n\n<pre><code>NoMethodError in Admin::Categories#index\n\nShowing /usr/local/rvm/gems/ruby-2.3.0/gems/activeadmin-1.0.0.pre2/app/views/active_admin/resource/index.html.arb where line #2 raised:\n\nundefined method `except' for #&lt;String:0x000000051298f0&gt;\nDid you mean?  exec\n\nExtracted source (around line #2):\n\n  insert_tag renderer_for(:index)\n\nRails.root: /var/www/apps/swss\nApplication Trace | Framework Trace | Full Trace\n\nactiveadmin (1.0.0.pre2) lib/active_admin/helpers/collection.rb:7:in `collection_size'\nactiveadmin (1.0.0.pre2) lib/active_admin/helpers/collection.rb:13:in `collection_is_empty?'\nactiveadmin (1.0.0.pre2) lib/active_admin/views/pages/index.rb:45:in `items_in_collection?'\nactiveadmin (1.0.0.pre2) lib/active_admin/views/pages/index.rb:49:in `build_collection'\nactiveadmin (1.0.0.pre2) lib/active_admin/views/pages/index.rb:28:in `block in main_content'\narbre (1.0.3) lib/arbre/element/builder_methods.rb:31:in `block in build_tag'\narbre (1.0.3) lib/arbre/context.rb:92:in `with_current_arbre_element'\narbre (1.0.3) lib/arbre/element/builder_methods.rb:49:in `with_current_arbre_element'\narbre (1.0.3) lib/arbre/element/builder_methods.rb:26:in `build_tag'\narbre (1.0.3) lib/arbre/element/builder_methods.rb:39:in `insert_tag'\narbre (1.0.3) lib/arbre/element/builder_methods.rb:14:in `batch_action_form'\nactiveadmin (1.0.0.pre2) lib/active_admin/views/pages/index.rb:36:in `wrap_with_batch_action_form'\nactiveadmin (1.0.0.pre2) lib/active_admin/views/pages/index.rb:26:in `main_content'\nactiveadmin (1.0.0.pre2) lib/active_admin/views/pages/base.rb:91:in `block (2 levels) in build_main_content_wrapper'\narbre (1.0.3) lib/arbre/element/builder_methods.rb:31:in `block in build_tag'\narbre (1.0.3) lib/arbre/context.rb:92:in `with_current_arbre_element'\narbre (1.0.3) lib/arbre/element/builder_methods.rb:49:in `with_current_arbre_element'\narbre (1.0.3) lib/arbre/element/builder_methods.rb:26:in `build_tag'\narbre (1.0.3) lib/arbre/element/builder_methods.rb:39:in `insert_tag'\narbre (1.0.3) lib/arbre/element/builder_methods.rb:14:in `div'\nactiveadmin (1.0.0.pre2) lib/active_admin/views/pages/base.rb:90:in `block in build_main_content_wrapper'\narbre (1.0.3) lib/arbre/element/builder_methods.rb:31:in `block in build_tag'\narbre (1.0.3) lib/arbre/context.rb:92:in `with_current_arbre_element'\narbre (1.0.3) lib/arbre/element/builder_methods.rb:49:in `with_current_arbre_element'\narbre (1.0.3) lib/arbre/element/builder_methods.rb:26:in `build_tag'\narbre (1.0.3) lib/arbre/element/builder_methods.rb:39:in `insert_tag'\narbre (1.0.3) lib/arbre/element/builder_methods.rb:14:in `div'\nactiveadmin (1.0.0.pre2) lib/active_admin/views/pages/base.rb:89:in `build_main_content_wrapper'\nactiveadmin (1.0.0.pre2) lib/active_admin/views/pages/base.rb:75:in `block in build_page_content'\narbre (1.0.3) lib/arbre/element/builder_methods.rb:31:in `block in build_tag'\narbre (1.0.3) lib/arbre/context.rb:92:in `with_current_arbre_element'\narbre (1.0.3) lib/arbre/element/builder_methods.rb:49:in `with_current_arbre_element'\narbre (1.0.3) lib/arbre/element/builder_methods.rb:26:in `build_tag'\narbre (1.0.3) lib/arbre/element/builder_methods.rb:39:in `insert_tag'\narbre (1.0.3) lib/arbre/element/builder_methods.rb:14:in `div'\nactiveadmin (1.0.0.pre2) lib/active_admin/views/pages/base.rb:74:in `build_page_content'\nactiveadmin (1.0.0.pre2) lib/active_admin/views/pages/base.rb:52:in `block (2 levels) in build_page'\narbre (1.0.3) lib/arbre/element/builder_methods.rb:31:in `block in build_tag'\narbre (1.0.3) lib/arbre/context.rb:92:in `with_current_arbre_element'\narbre (1.0.3) lib/arbre/element/builder_methods.rb:49:in `with_current_arbre_element'\narbre (1.0.3) lib/arbre/element/builder_methods.rb:26:in `build_tag'\narbre (1.0.3) lib/arbre/element/builder_methods.rb:39:in `insert_tag'\narbre (1.0.3) lib/arbre/element/builder_methods.rb:14:in `div'\nactiveadmin (1.0.0.pre2) lib/active_admin/views/pages/base.rb:48:in `block in build_page'\narbre (1.0.3) lib/arbre/context.rb:92:in `with_current_arbre_element'\narbre (1.0.3) lib/arbre/element/builder_methods.rb:49:in `with_current_arbre_element'\nactiveadmin (1.0.0.pre2) lib/active_admin/views/pages/base.rb:47:in `build_page'\nactiveadmin (1.0.0.pre2) lib/active_admin/views/pages/base.rb:10:in `build'\narbre (1.0.3) lib/arbre/element/builder_methods.rb:30:in `block in build_tag'\narbre (1.0.3) lib/arbre/context.rb:92:in `with_current_arbre_element'\narbre (1.0.3) lib/arbre/element/builder_methods.rb:26:in `build_tag'\narbre (1.0.3) lib/arbre/element/builder_methods.rb:39:in `insert_tag'\nactiveadmin (1.0.0.pre2) app/views/active_admin/resource/index.html.arb:2:in `block in __usr_local_rvm_gems_ruby_______gems_activeadmin_______pre__app_views_active_admin_resource_index_html_arb___4208362892031437948_70086151104600'\narbre (1.0.3) lib/arbre/context.rb:45:in `instance_eval'\narbre (1.0.3) lib/arbre/context.rb:45:in `initialize'\nactiveadmin (1.0.0.pre2) app/views/active_admin/resource/index.html.arb:1:in `new'\nactiveadmin (1.0.0.pre2) app/views/active_admin/resource/index.html.arb:1:in `__usr_local_rvm_gems_ruby_______gems_activeadmin_______pre__app_views_active_admin_resource_index_html_arb___4208362892031437948_70086151104600'\nactionview (4.1.10) lib/action_view/template.rb:145:in `block in render'\nactivesupport (4.1.10) lib/active_support/notifications.rb:161:in `instrument'\nactionview (4.1.10) lib/action_view/template.rb:339:in `instrument'\nactionview (4.1.10) lib/action_view/template.rb:143:in `render'\nactionview (4.1.10) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'\nactionview (4.1.10) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'\nactivesupport (4.1.10) lib/active_support/notifications.rb:159:in `block in instrument'\nactivesupport (4.1.10) lib/active_support/notifications/instrumenter.rb:20:in `instrument'\nactivesupport (4.1.10) lib/active_support/notifications.rb:159:in `instrument'\nactionview (4.1.10) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'\nactionview (4.1.10) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'\nactionview (4.1.10) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'\nactionview (4.1.10) lib/action_view/renderer/template_renderer.rb:53:in `render_template'\nactionview (4.1.10) lib/action_view/renderer/template_renderer.rb:17:in `render'\nactionview (4.1.10) lib/action_view/renderer/renderer.rb:42:in `render_template'\nactionview (4.1.10) lib/action_view/renderer/renderer.rb:23:in `render'\nactionview (4.1.10) lib/action_view/rendering.rb:99:in `_render_template'\nactionpack (4.1.10) lib/action_controller/metal/streaming.rb:217:in `_render_template'\nactionview (4.1.10) lib/action_view/rendering.rb:82:in `render_to_body'\nactionpack (4.1.10) lib/action_controller/metal/rendering.rb:32:in `render_to_body'\nactionpack (4.1.10) lib/action_controller/metal/renderers.rb:32:in `render_to_body'\nactionpack (4.1.10) lib/abstract_controller/rendering.rb:25:in `render'\nactionpack (4.1.10) lib/action_controller/metal/rendering.rb:16:in `render'\nactionpack (4.1.10) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'\nactivesupport (4.1.10) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'\n/usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'\nactivesupport (4.1.10) lib/active_support/core_ext/benchmark.rb:12:in `ms'\nactionpack (4.1.10) lib/action_controller/metal/instrumentation.rb:44:in `block in render'\nactionpack (4.1.10) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'\nactiverecord (4.1.10) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'\nactionpack (4.1.10) lib/action_controller/metal/instrumentation.rb:43:in `render'\nactionpack (4.1.10) lib/action_controller/metal/implicit_render.rb:10:in `default_render'\nactionpack (4.1.10) lib/action_controller/metal/responder.rb:238:in `default_render'\nactionpack (4.1.10) lib/action_controller/metal/responder.rb:165:in `to_html'\nresponders (1.1.2) lib/responders/flash_responder.rb:107:in `to_html'\nactionpack (4.1.10) lib/action_controller/metal/responder.rb:158:in `respond'\nactionpack (4.1.10) lib/action_controller/metal/responder.rb:151:in `call'\nactionpack (4.1.10) lib/action_controller/metal/mime_responds.rb:400:in `respond_with'\ninherited_resources (1.6.0) lib/inherited_resources/actions.rb:7:in `index'\nactiveadmin (1.0.0.pre2) lib/active_admin/resource_controller/streaming.rb:12:in `index'\nactionpack (4.1.10) lib/action_controller/metal/implicit_render.rb:4:in `send_action'\nactionpack (4.1.10) lib/abstract_controller/base.rb:189:in `process_action'\nactionpack (4.1.10) lib/action_controller/metal/rendering.rb:10:in `process_action'\nactionpack (4.1.10) lib/abstract_controller/callbacks.rb:20:in `block in process_action'\nactivesupport (4.1.10) lib/active_support/callbacks.rb:113:in `call'\nactivesupport (4.1.10) lib/active_support/callbacks.rb:552:in `block (2 levels) in compile'\nactivesupport (4.1.10) lib/active_support/callbacks.rb:502:in `call'\nactivesupport (4.1.10) lib/active_support/callbacks.rb:86:in `run_callbacks'\nactionpack (4.1.10) lib/abstract_controller/callbacks.rb:19:in `process_action'\nactionpack (4.1.10) lib/action_controller/metal/rescue.rb:29:in `process_action'\nactionpack (4.1.10) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'\nactivesupport (4.1.10) lib/active_support/notifications.rb:159:in `block in instrument'\nactivesupport (4.1.10) lib/active_support/notifications/instrumenter.rb:20:in `instrument'\nactivesupport (4.1.10) lib/active_support/notifications.rb:159:in `instrument'\nactionpack (4.1.10) lib/action_controller/metal/instrumentation.rb:30:in `process_action'\nactionpack (4.1.10) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'\nactiverecord (4.1.10) lib/active_record/railties/controller_runtime.rb:18:in `process_action'\nactionpack (4.1.10) lib/abstract_controller/base.rb:136:in `process'\nactionview (4.1.10) lib/action_view/rendering.rb:30:in `process'\nactionpack (4.1.10) lib/action_controller/metal.rb:196:in `dispatch'\nactionpack (4.1.10) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'\nactionpack (4.1.10) lib/action_controller/metal.rb:232:in `block in action'\nactionpack (4.1.10) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'\nactionpack (4.1.10) lib/action_dispatch/routing/route_set.rb:50:in `call'\nactionpack (4.1.10) lib/action_dispatch/journey/router.rb:73:in `block in call'\nactionpack (4.1.10) lib/action_dispatch/journey/router.rb:59:in `each'\nactionpack (4.1.10) lib/action_dispatch/journey/router.rb:59:in `call'\nactionpack (4.1.10) lib/action_dispatch/routing/route_set.rb:692:in `call'\nwarden (1.2.6) lib/warden/manager.rb:35:in `block in call'\nwarden (1.2.6) lib/warden/manager.rb:34:in `catch'\nwarden (1.2.6) lib/warden/manager.rb:34:in `call'\nrack (1.5.5) lib/rack/etag.rb:23:in `call'\nrack (1.5.5) lib/rack/conditionalget.rb:25:in `call'\nrack (1.5.5) lib/rack/head.rb:11:in `call'\nactionpack (4.1.10) lib/action_dispatch/middleware/params_parser.rb:27:in `call'\nactionpack (4.1.10) lib/action_dispatch/middleware/flash.rb:254:in `call'\nrack (1.5.5) lib/rack/session/abstract/id.rb:225:in `context'\nrack (1.5.5) lib/rack/session/abstract/id.rb:220:in `call'\nactionpack (4.1.10) lib/action_dispatch/middleware/cookies.rb:562:in `call'\nactiverecord (4.1.10) lib/active_record/query_cache.rb:36:in `call'\nactiverecord (4.1.10) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'\nactiverecord (4.1.10) lib/active_record/migration.rb:380:in `call'\nactionpack (4.1.10) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'\nactivesupport (4.1.10) lib/active_support/callbacks.rb:82:in `run_callbacks'\nactionpack (4.1.10) lib/action_dispatch/middleware/callbacks.rb:27:in `call'\nactionpack (4.1.10) lib/action_dispatch/middleware/reloader.rb:73:in `call'\nactionpack (4.1.10) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'\nactionpack (4.1.10) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'\nactionpack (4.1.10) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\nrailties (4.1.10) lib/rails/rack/logger.rb:38:in `call_app'\nrailties (4.1.10) lib/rails/rack/logger.rb:20:in `block in call'\nactivesupport (4.1.10) lib/active_support/tagged_logging.rb:68:in `block in tagged'\nactivesupport (4.1.10) lib/active_support/tagged_logging.rb:26:in `tagged'\nactivesupport (4.1.10) lib/active_support/tagged_logging.rb:68:in `tagged'\nrailties (4.1.10) lib/rails/rack/logger.rb:20:in `call'\nrequest_store (1.3.1) lib/request_store/middleware.rb:9:in `call'\nactionpack (4.1.10) lib/action_dispatch/middleware/request_id.rb:21:in `call'\nrack (1.5.5) lib/rack/methodoverride.rb:21:in `call'\nrack (1.5.5) lib/rack/runtime.rb:17:in `call'\nactivesupport (4.1.10) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'\nrack (1.5.5) lib/rack/lock.rb:17:in `call'\nactionpack (4.1.10) lib/action_dispatch/middleware/static.rb:84:in `call'\nrack (1.5.5) lib/rack/sendfile.rb:112:in `call'\nrailties (4.1.10) lib/rails/engine.rb:514:in `call'\nrailties (4.1.10) lib/rails/application.rb:144:in `call'\nrack (1.5.5) lib/rack/lock.rb:17:in `call'\nrack (1.5.5) lib/rack/content_length.rb:14:in `call'\nrack (1.5.5) lib/rack/handler/webrick.rb:60:in `service'\n/usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/webrick/httpserver.rb:140:in `service'\n/usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/webrick/httpserver.rb:96:in `run'\n/usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/webrick/server.rb:296:in `block in start_thread'\n\nRequest\n\nParameters:\n\nNone\n\nToggle session dump\n\n_csrf_token: \"TNSus5W+3uX5ILYOWiOKfHwAHlNhdhalaBIAF0WFXss=\"\nsession_id: \"d876e40840760d2b6be3d6b608ca8a22\"\nwarden.user.user.key: [[1], \"$2a$10$B0niQfE1OtB0smU3Uz.aOe\"]\n\nToggle env dump\n\nGATEWAY_INTERFACE: \"CGI/1.1\"\nHTTP_ACCEPT: \"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\"\nHTTP_ACCEPT_ENCODING: \"gzip, deflate\"\nHTTP_ACCEPT_LANGUAGE: \"en-US,en;q=0.5\"\nHTTP_CACHE_CONTROL: \"max-age=0\"\nREMOTE_ADDR: \"71.68.78.10\"\nREMOTE_HOST: \"71.68.78.10\"\nSERVER_NAME: \"www.swshotguns.com\"\nSERVER_PROTOCOL: \"HTTP/1.1\"\n\nResponse\n\nHeaders:\n\nNone\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Ik4p4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ik4p4.png\" alt=\"enter image description here\"></a></p>\n\n<p>My /app/models/category.rb file</p>\n\n<pre><code>class Category &lt; ActiveRecord::Base\n  has_many :products\n  accepts_nested_attributes_for :products\nend\n</code></pre>\n\n<p>my /app/admin/category.rb file</p>\n\n<pre><code>ActiveAdmin.register Category do\n\n# See permitted parameters documentation:\n# https://github.com/activeadmin/activeadmin/blob/master/docs/2-resource-customization.md#setting-up-strong$\n#\n# permit_params :list, :of, :attributes, :on, :model\n#\n# or\n#\n# permit_params do\n#   permitted = [:permitted, :attributes]\n#   permitted &lt;&lt; :other if resource.something?\n#   permitted\n# end\n\n  form do |f|\n    f.inputs \"Product Category\" do\n      f.input :name\n      f.input :description\n      ###########################################################################\n      ## Create a collection to produce a dropdown based on the category table ##\n      ###########################################################################\n      #f.input :parent, collection: Category.all =&gt; Category.all.map{|c| [c.name, c.id]}\n    end\n  f.actions\n  end\nend\n</code></pre>\n\n<p>My Gemfile</p>\n\n<pre><code># Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '4.1.10'\n# Use mysql as the database for Active Record\ngem 'mysql'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 4.0.3'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# Use CoffeeScript for .js.coffee assets and views\ngem 'coffee-rails', '~&gt; 4.0.0'\n# See https://github.com/rails/execjs#readme for more supported runtimes\n# gem 'therubyracer',  platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks\ngem 'turbolinks'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.0'\n\n##################\n##Custom Entries##\n##################\ngem 'activeadmin', '~&gt; 1.0.0.pre2'\ngem 'rails-erd'\n#gem 'devise', ' ~&gt; 3.2'\ngem 'devise'\ngem 'cancancan' # or cancancan\ngem 'draper'\ngem 'pundit'\ngem 'paperclip'\ngem 'ckeditor'\n\n\n# bundle exec rake doc:rails generates the API under doc/api.\ngem 'sdoc', '~&gt; 0.4.0',          group: :doc\n\n# Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n#gem 'spring',        group: :development\n\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\n# Use unicorn as the app server\n# gem 'unicorn'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\n# Use debugger\n# gem 'debugger', group: [:development, :test]\n</code></pre>\n\n<p>ERD Screen Shot</p>\n\n<p><a href=\"https://i.stack.imgur.com/nMXMY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nMXMY.png\" alt=\"enter image description here\"></a></p>\n\n<p>/usr/local/rvm/gems/ruby-2.3.0/gems/activeadmin-1.0.0.pre2/app/views/active_admin/resource/index.html.arb</p>\n\n<pre><code>insert_tag renderer_for(:index)\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 6279214, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c2d81bd520a69949093e5a1e61ad37a4?s=128&d=identicon&r=PG&f=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/6279214/charles"}, "edited": false, "score": 0, "creation_date": 1470800164, "post_id": 38863653, "comment_id": 65090849, "body": "The results were not in order. Results were: TestUser1 -&gt; AnotherTest2 -&gt; NewOne3 -&gt; TestTest4 -&gt; Help5 -&gt; TestUser1 -&gt; AnotherTest2 -&gt; TestUser1, TestTest4. It&#39;s supposed to be 1 2 3 4 5 1 2 3 4 5 and it puts out 1 2 3 4 5 1 2 1 4"}, {"owner": {"reputation": 73, "user_id": 6279214, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c2d81bd520a69949093e5a1e61ad37a4?s=128&d=identicon&r=PG&f=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/6279214/charles"}, "edited": false, "score": 0, "creation_date": 1470800287, "post_id": 38863653, "comment_id": 65090885, "body": "I wanted somehow to make it go around and around, Repeating users 1 2 3 4 5 over and over again. @amadan"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 73, "user_id": 6279214, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c2d81bd520a69949093e5a1e61ad37a4?s=128&d=identicon&r=PG&f=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/6279214/charles"}, "edited": false, "score": 0, "creation_date": 1470804001, "post_id": 38863653, "comment_id": 65091814, "body": "A hash is unordered: the only guarantee you get from <code>keys</code> is that it will return each key exactly once. If you need a specific order, keep an array of players separate from the hash, and cycle on that. Try it: <code>[1, 2, 3, 4, 5].cycle.take(20)</code>. If you mean they were not in the same order in each cycle, that means you were doing something weird that is not represented in my code."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 1, "last_activity_date": 1470798792, "creation_date": 1470798792, "answer_id": 38863653, "question_id": 38863602, "link": "https://stackoverflow.com/questions/38863602/repeat-keys-in-hash/38863653#38863653", "title": "Repeat Keys in Hash", "body": "<p>Use <code>Enumerable#cycle</code>:</p>\n\n<pre><code>@people.keys.cycle.each do |person|\n  break if rand &lt; 0.01 # or some better termination condition\n  puts person\nend\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 6279214, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c2d81bd520a69949093e5a1e61ad37a4?s=128&d=identicon&r=PG&f=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/6279214/charles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1470798792, "creation_date": 1470798409, "question_id": 38863602, "link": "https://stackoverflow.com/questions/38863602/repeat-keys-in-hash", "title": "Repeat Keys in Hash", "body": "<p>My Hash:</p>\n\n<pre><code>@round=0\n@round+=1\n@people={\"TestUser1\"=&gt;3, \"AnotherTest2\"=&gt;4, \"NewOne3\"=&gt;5, \"TestTest4\"=&gt;6, \"Help\"=&gt;7}\n</code></pre>\n\n<p>I am making an UNO game, where TestUser1 keeps going in a circle around AnotherTest2, NewOne3, TestTest4, and REPEAT.</p>\n\n<p>I did: <code>@people.keys[@round-1]</code>\n=> TestUser1 | AnotherTest2 | TestTest4 | Help. After that, it does not repeat again, how could I make it to repeat it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "edited": false, "score": 0, "creation_date": 1470798602, "post_id": 38863577, "comment_id": 65090546, "body": "I have a fix. But before sharing that, please post the output of <code>rake routes</code>. I need to make sure whether I am right."}, {"owner": {"reputation": 47, "user_id": 5947418, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ec2e0fffc0fde9ec5b88fc876e3dcd10?s=128&d=identicon&r=PG&f=1", "display_name": "Divjot Mehton", "link": "https://stackoverflow.com/users/5947418/divjot-mehton"}, "reply_to_user": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "edited": false, "score": 0, "creation_date": 1470798995, "post_id": 38863577, "comment_id": 65090613, "body": "@ArunKumar, I ncluded the rake routes in the original question."}, {"owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "edited": false, "score": 0, "creation_date": 1470799682, "post_id": 38863577, "comment_id": 65090739, "body": "Please post the output of <code>rake routes</code>. Not the routes you defined in routes.rb"}, {"owner": {"reputation": 47, "user_id": 5947418, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ec2e0fffc0fde9ec5b88fc876e3dcd10?s=128&d=identicon&r=PG&f=1", "display_name": "Divjot Mehton", "link": "https://stackoverflow.com/users/5947418/divjot-mehton"}, "reply_to_user": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "edited": false, "score": 0, "creation_date": 1470800097, "post_id": 38863577, "comment_id": 65090833, "body": "@ArunKumar, I included the user model, account activation and the GET and POST requests for resend_token routes."}, {"owner": {"reputation": 1820, "user_id": 5830835, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/29a99125813cee34a6ecfe0d0e432eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Timmy Von Heiss ", "link": "https://stackoverflow.com/users/5830835/timmy-von-heiss"}, "edited": false, "score": 0, "creation_date": 1477063535, "post_id": 38863577, "comment_id": 67628082, "body": "Did you ever solve this? I have the same problem."}], "answers": [{"comments": [{"owner": {"reputation": 1820, "user_id": 5830835, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/29a99125813cee34a6ecfe0d0e432eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Timmy Von Heiss ", "link": "https://stackoverflow.com/users/5830835/timmy-von-heiss"}, "edited": false, "score": 0, "creation_date": 1477064746, "post_id": 38864113, "comment_id": 67628806, "body": "<code>&lt;%= link_to &quot;Activate your account&quot;, edit_account_activation_url(@user.activation_token, email: @user.email) %&gt;</code> this is how it is supposed to be. <a href=\"https://www.railstutorial.org/book/account_activation\" rel=\"nofollow noreferrer\">railstutorial.org/book/account_activation</a>"}, {"owner": {"reputation": 1820, "user_id": 5830835, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/29a99125813cee34a6ecfe0d0e432eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Timmy Von Heiss ", "link": "https://stackoverflow.com/users/5830835/timmy-von-heiss"}, "edited": false, "score": 0, "creation_date": 1477064801, "post_id": 38864113, "comment_id": 67628836, "body": "but I think his problem, and my current problem, is that for some reason @user.activation_token = nil."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user988558"}, "is_accepted": false, "score": 1, "last_activity_date": 1470802506, "creation_date": 1470802506, "answer_id": 38864113, "question_id": 38863577, "link": "https://stackoverflow.com/questions/38863577/a-url-issue-when-implementing-a-resend-token-feature/38864113#38864113", "title": "A url issue when implementing a resend token feature", "body": "<p>Well, I wouldn't define <code>account_activations</code> as a resourceful route.</p>\n\n<p>The comment: <code>#the token is actually available by params id</code> explains why, imo <code>id</code> should refer to a model resource instead.</p>\n\n<p>Here's my workaround for the issue:</p>\n\n<ol>\n<li>Define route as:</li>\n</ol>\n\n<p><code>\n get \"/account_activations/edit\", to: \"account_activations#edit\", as: 'edit_account_activation'\n</code></p>\n\n<ol start=\"2\">\n<li>Define the activation link as follows:</li>\n</ol>\n\n<p><code>\n &lt;%= link_to \"Activate your account\", edit_account_activation_url(token: @user.activation_token, email: @user.email) %&gt;\n</code></p>\n\n<ol start=\"3\">\n<li>Update controller:</li>\n</ol>\n\n<p><code>\nclass AccountActivationsController &lt; ApplicationController\n  def edit\n    user = User.find_by(email: params[:email])\n    if user &amp;&amp; !user.activated? &amp;&amp; user.authenticated?(:activation, params[:token])\n    #... rest of code...\n</code></p>\n\n<p>Alternatively, if you really wanna keep as it currently is, then try redefining you email link as follows:</p>\n\n<p><code>\n&lt;%= link_to \"Activate your account\", edit_account_activation_url(@user.activation_token, email: @user.email) %&gt;\n</code></p>\n\n<p>Then, <code>params[:id]</code> might refer to the token you're providing.</p>\n"}, {"tags": [], "owner": {"reputation": 410, "user_id": 6318514, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w2Xwc.jpg?s=128&g=1", "display_name": "Darpan Chhatravala", "link": "https://stackoverflow.com/users/6318514/darpan-chhatravala"}, "is_accepted": false, "score": 0, "last_activity_date": 1470911553, "last_edit_date": 1470911553, "creation_date": 1470806523, "answer_id": 38864841, "question_id": 38863577, "link": "https://stackoverflow.com/questions/38863577/a-url-issue-when-implementing-a-resend-token-feature/38864841#38864841", "title": "A url issue when implementing a resend token feature", "body": "<p>Redefine your email link as follows:</p>\n\n<pre><code>&lt;%= link_to \"Activate your account\", edit_account_activation_path( @user.activation_token, @user.email) %&gt;\n</code></pre>\n\n<p>Or you can just pass the primary key of your object to your controller and ex: <code>@user.id</code> and use</p>\n\n<pre><code>before_action :set_user, only: [:edit]  \n</code></pre>\n\n<p>define private method inside of your controller for set user ex:</p>\n\n<pre><code>private \n  def set_user\n    @user = User.find_by_id(params[:id])\n    redirect_to xyz_path if @user.blank?\n  end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1820, "user_id": 5830835, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/29a99125813cee34a6ecfe0d0e432eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Timmy Von Heiss ", "link": "https://stackoverflow.com/users/5830835/timmy-von-heiss"}, "is_accepted": false, "score": 0, "last_activity_date": 1477081032, "creation_date": 1477081032, "answer_id": 40184819, "question_id": 38863577, "link": "https://stackoverflow.com/questions/38863577/a-url-issue-when-implementing-a-resend-token-feature/40184819#40184819", "title": "A url issue when implementing a resend token feature", "body": "<p><code>:activation_token</code> is created virtually as <code>attr_accessor</code></p>\n\n<p>This is not a routing issue. </p>\n\n<pre><code>@user.activation_token\n</code></pre>\n\n<p>is actually returning nil. </p>\n\n<p>You will need to save activation_token to the user model if you wish to send further validation emails. </p>\n"}], "owner": {"reputation": 47, "user_id": 5947418, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ec2e0fffc0fde9ec5b88fc876e3dcd10?s=128&d=identicon&r=PG&f=1", "display_name": "Divjot Mehton", "link": "https://stackoverflow.com/users/5947418/divjot-mehton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1477081032, "creation_date": 1470798172, "last_edit_date": 1470800027, "question_id": 38863577, "link": "https://stackoverflow.com/questions/38863577/a-url-issue-when-implementing-a-resend-token-feature", "title": "A url issue when implementing a resend token feature", "body": "<p>I will briefly explain the feature before I start explaining the issue. When a user signs up they get an activation token in their email which expires in 2 hours. I was trying to implement a feature which allows users to resend the activation token in their email. </p>\n\n<p>The code for the resend activation token feature is given below. </p>\n\n<p>Controller code in users controller</p>\n\n<pre><code> def resend_verification_email\n    @user = User.find_by(email: params[:resend_verification_email] [:email].downcase)\n    if valid_email(params[:resend_verification_email] [:email])\n      if !@user \n        redirect_to resend_verification_path\n        flash[:danger] = \"Email does not exist\"\n      elsif\n        !@user.activated?\n        UserMailer.resend_activation(@user).deliver_now\n        flash[:success] = \"Check your email for the activation token\"\n        redirect_to resend_verification_path\n      else\n        redirect_to resend_verification_path\n        flash[:success] = \"User is already activated.\"             \n      end\n    else\n      flash[:danger] = \"Email format is Invalid\"\n      redirect_to resend_verification_path\n    end\n  end\n</code></pre>\n\n<p>Account activations controller</p>\n\n<pre><code>class AccountActivationsController &lt; ApplicationController\n\ndef edit\n  user = User.find_by(email: params[:email])\n  if user &amp;&amp; !user.activated? &amp;&amp; user.authenticated?(:activation, params[:id]) #the token is actually available by params id\n    user.activate\n    log_in user\n    flash[:success] = \"Account activated.\"\n    redirect_to home_path\n  else\n    flash[:danger] = \"Invalid activation link\"\n    redirect_to root_url\n  end\nend\n\n\nend\n</code></pre>\n\n<p>The mailer controller method</p>\n\n<pre><code>def resend_activation(user)\n    @user = user\n    @userid = user.id\n    mail to: user.email, subject: \"Account activation\"\n  end\n</code></pre>\n\n<p>The mailer view</p>\n\n<pre><code>&lt;%= link_to \"Activate your account\", edit_account_activation_url(id: @user.activation_token, email: @user.email) %&gt;\n</code></pre>\n\n<p>I get the following error. <code>No route matches {:action=&gt;\"edit\", :controller=&gt;\"account_activations\", :email=&gt;\"example@gmail.com\", :id=&gt;nil} missing required keys: [:id]</code>. </p>\n\n<p>I understand what the error is saying. The url's first argument is the token and the way to grab is through params[:id] because in RESTful routes, id is always the first argument. The email is sent out fine if I get rid of the URL. The URL is throwing that error and I am not really sure why. Any help would be appreciated. Thanks!</p>\n\n<p>I only included the relevant routes. </p>\n\n<pre><code>  get 'resend_verification'  =&gt; 'users#resend_verification'\n  post 'resend_verification_email'  =&gt; 'users#resend_verification_email'\n\n  resources :account_activations, only: [:edit]\n  resources :password_resets,     only: [:new, :create, :edit, :update]\n</code></pre>\n\n<p>Relevant rake routes</p>\n\n<pre><code>edit_account_activation GET    /account_activations/:id/edit(.:format)                                          account_activations#edit\n\n                    users GET    /users(.:format)                                                                 users#index\n                          POST   /users(.:format)                                                                 users#create\n                 new_user GET    /users/new(.:format)                                                             users#new\n                edit_user GET    /users/:id/edit(.:format)                                                        users#edit\n                     user GET    /users/:id(.:format)                                                             users#show\n                          PATCH  /users/:id(.:format)                                                             users#update\n                          PUT    /users/:id(.:format)                                                             users#update\n                          DELETE /users/:id(.:format)                                                             users#destroy\n\n\nresend_verification GET    /resend_verification(.:format)                                                   users#resend_verification\nresend_verification_email POST   /resend_verification_email(.:format)                                             users#resend_verification_email\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 3020, "user_id": 4453584, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25188d50654874d1125dd754d783851b?s=128&d=identicon&r=PG&f=1", "display_name": "guitarman", "link": "https://stackoverflow.com/users/4453584/guitarman"}, "edited": false, "score": 0, "creation_date": 1470811215, "post_id": 38862981, "comment_id": 65094832, "body": "The ruby interpreter will read and execute your file/class from top to bottom. At the end of the class it execute the <code>hello</code> class method in your class. The class object isn&#39;t an instance of that class, so the execution of goodbye fails."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1470815370, "post_id": 38862981, "comment_id": 65097255, "body": "Well, if you already know that class methods can only get called on the class itself, and you already know that the call works, then \u2026 why do you think it is getting called on the main object?"}], "answers": [{"comments": [{"owner": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "edited": false, "score": 0, "creation_date": 1470839226, "post_id": 38863030, "comment_id": 65113833, "body": "So what/where is the <code>main</code> object?"}, {"owner": {"reputation": 25150, "user_id": 383888, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Kd57u.jpg?s=128&g=1", "display_name": "Mori", "link": "https://stackoverflow.com/users/383888/mori"}, "reply_to_user": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "edited": false, "score": 1, "creation_date": 1470844498, "post_id": 38863030, "comment_id": 65117699, "body": "@Jwan622, the context surrounding the <code>Test</code> class is an instance of <code>Object</code>, and that instance is named <code>main</code>. Try opening pry or irb and typing <code>self</code>, and you&#39;ll get the result <code>=&gt; main</code>"}], "tags": [], "owner": {"reputation": 25150, "user_id": 383888, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Kd57u.jpg?s=128&g=1", "display_name": "Mori", "link": "https://stackoverflow.com/users/383888/mori"}, "is_accepted": true, "score": 3, "last_activity_date": 1470793883, "creation_date": 1470793883, "answer_id": 38863030, "question_id": 38862981, "link": "https://stackoverflow.com/questions/38862981/ruby-class-methods-is-it-getting-called-on-main-object/38863030#38863030", "title": "Ruby class methods. Is it getting called on main object?", "body": "<blockquote>\n  <p>What is hello being called on?</p>\n</blockquote>\n\n<p>Whenever there isn't an explicit receiver, the receiver is <code>self</code>. So the call is implicitly:</p>\n\n<pre><code>self.hello\n</code></pre>\n\n<p>... where <code>self</code> is the class <code>Test</code>, on which you have just defined the <code>self.hello</code> method.</p>\n\n<p><code>goodbye</code> is not found because it is defined on an instance of class <code>Test</code>, not the class itself, where it's currently called.</p>\n"}, {"tags": [], "owner": {"reputation": 1150, "user_id": 5213790, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JsYim.jpg?s=128&g=1", "display_name": "mrvncaragay", "link": "https://stackoverflow.com/users/5213790/mrvncaragay"}, "is_accepted": false, "score": 2, "last_activity_date": 1470797658, "last_edit_date": 1470797658, "creation_date": 1470794201, "answer_id": 38863064, "question_id": 38862981, "link": "https://stackoverflow.com/questions/38862981/ruby-class-methods-is-it-getting-called-on-main-object/38863064#38863064", "title": "Ruby class methods. Is it getting called on main object?", "body": "<p><code>def self.hello</code> is a class method </p>\n\n<pre><code> def self.hello\n    puts \"I say hello\"\n  end\n\n hello or Test.hello\n #I say hello\n</code></pre>\n\n<p><code>def goodbye</code> is a instance method of class of <code>Test</code></p>\n\n<pre><code>  def goodbye\n    puts 'goodbye'\n  end\n\n Test.new.goodbye  #instance of Test\n #goodbye\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8800, "user_id": 14533, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a8b289d40d80dc4f1a994f735a152f65?s=128&d=identicon&r=PG", "display_name": "Gustavo Rubio", "link": "https://stackoverflow.com/users/14533/gustavo-rubio"}, "is_accepted": false, "score": 0, "last_activity_date": 1470794246, "creation_date": 1470794246, "answer_id": 38863070, "question_id": 38862981, "link": "https://stackoverflow.com/questions/38862981/ruby-class-methods-is-it-getting-called-on-main-object/38863070#38863070", "title": "Ruby class methods. Is it getting called on main object?", "body": "<p><code>self</code> defines class methods whereas defining just a method without self will mean that the method is an instance method, therefore, calling <code>goodbye</code> will raise an error because there is no receiver, an instance of the <code>Test</code> class is needed to <em>send</em> that message or call that method.</p>\n\n<p>When ruby parses the class and evaluates the code it can call <code>hello</code> because there is no need to instantiate an object.</p>\n"}, {"tags": [], "owner": {"reputation": 183, "user_id": 6483534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e412bcc5112603d95c87d380a48f43c?s=128&d=identicon&r=PG&f=1", "display_name": "PS.", "link": "https://stackoverflow.com/users/6483534/ps"}, "is_accepted": false, "score": 0, "last_activity_date": 1470806689, "creation_date": 1470806689, "answer_id": 38864876, "question_id": 38862981, "link": "https://stackoverflow.com/questions/38862981/ruby-class-methods-is-it-getting-called-on-main-object/38864876#38864876", "title": "Ruby class methods. Is it getting called on main object?", "body": "<p>You are defining hello as class method whereas goodbye is an instance method. </p>\n\n<pre><code>class Test\n  def self.hello\n    puts \"I say hello\"\n  end\n  ...\nend\n</code></pre>\n\n<p>This class method since you are calling hello on self, which is Test class, so you can call hello by <code>Test.hello</code>. </p>\n\n<pre><code>...\ndef goodbye\n    puts 'goodbye'\nend\n</code></pre>\n\n<p>To call goodbye method, since this is an instance method, you need to create an instance of Test by using <code>Test.new</code> method. Therefore, you need to use <code>Test.new.goodbye</code> to call goodbye method.</p>\n"}], "owner": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 38863030, "answer_count": 4, "score": 1, "last_activity_date": 1470806689, "creation_date": 1470793520, "question_id": 38862981, "link": "https://stackoverflow.com/questions/38862981/ruby-class-methods-is-it-getting-called-on-main-object", "title": "Ruby class methods. Is it getting called on main object?", "body": "<p>I have a class that looks like this:</p>\n\n<pre><code>class Test\n  def self.hello\n    puts \"I say hello\"\n  end\n\n  def goodbye\n    puts 'goodbye'\n  end\n\n  hello\n  goodbye\nend\n</code></pre>\n\n<p>This is my output:</p>\n\n<pre><code> ruby class_methods.rb\nI say hello\nclass_methods.rb:11:in `&lt;class:Test&gt;': undefined local variable or method `goodbye' for Test:Class (NameError)\n    from class_methods.rb:1:in `&lt;main&gt;'\n</code></pre>\n\n<p>What is <code>hello</code> being called on? It looks like it does indeed get called but what is it being called on? I think it's being called on the main object... but why does that make sense? I thought class methods can only be called on the class object itself not a <code>main</code> object?</p>\n"}, {"tags": ["ruby", "powershell"], "answers": [{"comments": [{"owner": {"reputation": 2415, "user_id": 5225057, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh4.googleusercontent.com/-BQOs6bXTlFc/AAAAAAAAAAI/AAAAAAAAAT8/-aYe7hZBGyI/photo.jpg?sz=128", "display_name": "Mr. Kennedy", "link": "https://stackoverflow.com/users/5225057/mr-kennedy"}, "edited": false, "score": 0, "creation_date": 1470794597, "post_id": 38863055, "comment_id": 65089684, "body": "That works nicely! I&#39;ll admit total ignorance regarding text encoding. Any suggestions?"}, {"owner": {"reputation": 3312, "user_id": 1930135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81a8ea736e2650eb0e1d78f9fb04d5a1?s=128&d=identicon&r=PG", "display_name": "Patrick Meinecke", "link": "https://stackoverflow.com/users/1930135/patrick-meinecke"}, "reply_to_user": {"reputation": 2415, "user_id": 5225057, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh4.googleusercontent.com/-BQOs6bXTlFc/AAAAAAAAAAI/AAAAAAAAAT8/-aYe7hZBGyI/photo.jpg?sz=128", "display_name": "Mr. Kennedy", "link": "https://stackoverflow.com/users/5225057/mr-kennedy"}, "edited": false, "score": 1, "creation_date": 1470794890, "post_id": 38863055, "comment_id": 65089748, "body": "I&#39;ve only played with Ruby a little, so I can&#39;t speak much to the best practices for that unfortunately."}], "tags": [], "owner": {"reputation": 3312, "user_id": 1930135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81a8ea736e2650eb0e1d78f9fb04d5a1?s=128&d=identicon&r=PG", "display_name": "Patrick Meinecke", "link": "https://stackoverflow.com/users/1930135/patrick-meinecke"}, "is_accepted": true, "score": 1, "last_activity_date": 1470794109, "creation_date": 1470794109, "answer_id": 38863055, "question_id": 38862976, "link": "https://stackoverflow.com/questions/38862976/win7-powershell-echo-text-file-ruby2-2-invalid-multibyte-char-utf-8/38863055#38863055", "title": "Win7 Powershell echo &gt; text file = Ruby2.2: invalid multibyte char (UTF-8)?", "body": "<p>You can change the encoding if you pipe it into <code>Out-File</code></p>\n\n<p>Example:</p>\n\n<pre><code>'# foobar' | Out-File -FilePath echo_test.rb -Encoding ascii\nruby echo_test.rb\n</code></pre>\n"}], "owner": {"reputation": 2415, "user_id": 5225057, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh4.googleusercontent.com/-BQOs6bXTlFc/AAAAAAAAAAI/AAAAAAAAAT8/-aYe7hZBGyI/photo.jpg?sz=128", "display_name": "Mr. Kennedy", "link": "https://stackoverflow.com/users/5225057/mr-kennedy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 38863055, "answer_count": 1, "score": 0, "last_activity_date": 1470794109, "creation_date": 1470793487, "last_edit_date": 1495540299, "question_id": 38862976, "link": "https://stackoverflow.com/questions/38862976/win7-powershell-echo-text-file-ruby2-2-invalid-multibyte-char-utf-8", "title": "Win7 Powershell echo &gt; text file = Ruby2.2: invalid multibyte char (UTF-8)?", "body": "<p>Can I use echo from the powershell command line to create text files which Ruby can parse?</p>\n\n<pre><code>&gt;&gt;&gt; echo \"# foobar\" &gt; echo_test.rb\n&gt;&gt;&gt; ruby echo_test.rb\necho_test.rb:1: invalid multibyte char (UTF-8)\n</code></pre>\n\n<p>Notepad++ reports the encoding as UCS-2 Little Endian. I also tried echo'ing with the the header options mentioned in this thread:\n<a href=\"https://stackoverflow.com/questions/17859530/invalid-multibyte-char-utf-8-error-ruby\">invalid multibyte char (UTF-8) Error, Ruby</a></p>\n\n<p>e.g. </p>\n\n<pre><code>&gt;&gt;&gt; echo \"# encoding: utf-8\" &gt; echo_test.rb\n</code></pre>\n\n<p>and got the same error message.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "charts", "chartkick"], "owner": {"reputation": 799, "user_id": 5428615, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1084401491578780/picture?type=large", "display_name": "liborza", "link": "https://stackoverflow.com/users/5428615/liborza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1605118833, "creation_date": 1470787408, "last_edit_date": 1605118833, "question_id": 38862277, "link": "https://stackoverflow.com/questions/38862277/chartkick-stacked-counting", "title": "Chartkick - Stacked counting", "body": "<p>Im working with Chartkick library right now.. But i really want to show stacked number of counted subscriber every day.</p>\n\n<p><strong>This is my call to get chart with stats:</strong></p>\n\n<pre><code>&lt;%= area_chart User.with_role(:subscriber, Page.find_by_page_id(current_user.selected_page)).group_by_day(\"users.created_at\").count %&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/OnkoA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OnkoA.png\" alt=\"enter image description here\"></a></p>\n\n<p>But i really want to the chart be stacked, not show how many subscribers was registered current day but all subscribers stacked in one day..</p>\n\n<pre><code>Mon -&gt; 1\nTue -&gt; 2(today) + 1(yesterday) = 3\nWen -&gt; 3(today) + 3(yesterday) = 6\netc.....\n</code></pre>\n\n<p>Thanks for help!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 7374, "user_id": 1634753, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aa962e4482e6eb20f3985622a039f0fe?s=128&d=identicon&r=PG", "display_name": "Rilcon42", "link": "https://stackoverflow.com/users/1634753/rilcon42"}, "reply_to_user": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "edited": false, "score": 1, "creation_date": 1470855349, "post_id": 38862248, "comment_id": 65123901, "body": "Why the downvote to this post? How can I improve it if you see a problem?"}], "answers": [{"comments": [{"owner": {"reputation": 7374, "user_id": 1634753, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aa962e4482e6eb20f3985622a039f0fe?s=128&d=identicon&r=PG", "display_name": "Rilcon42", "link": "https://stackoverflow.com/users/1634753/rilcon42"}, "edited": false, "score": 0, "creation_date": 1470811689, "post_id": 38862264, "comment_id": 65095097, "body": "That worked, but I would love to find a method that didnt involve recalculating the account value every time. Any ideas?"}], "tags": [], "owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "is_accepted": true, "score": 0, "last_activity_date": 1470787323, "creation_date": 1470787323, "answer_id": 38862264, "question_id": 38862248, "link": "https://stackoverflow.com/questions/38862248/passing-result-of-method-as-global-value/38862264#38862264", "title": "passing result of method as global value", "body": "<p>This part of the code is invalid</p>\n\n<pre><code>$client.$account(...)\n</code></pre>\n\n<p>If you write <code>$client.</code>, then the next thing that Ruby expects to see is the name of a method, and method names cannot begin with <code>$</code> so <code>$account</code> is invalid.  Try removing the dollar sign from <code>$account</code> there.</p>\n"}], "owner": {"reputation": 7374, "user_id": 1634753, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aa962e4482e6eb20f3985622a039f0fe?s=128&d=identicon&r=PG", "display_name": "Rilcon42", "link": "https://stackoverflow.com/users/1634753/rilcon42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 38862264, "answer_count": 1, "score": -1, "last_activity_date": 1470787323, "creation_date": 1470787133, "question_id": 38862248, "link": "https://stackoverflow.com/questions/38862248/passing-result-of-method-as-global-value", "title": "passing result of method as global value", "body": "<p>Can someone explain what I am doing wrong here? I am attempting to avoid having to type and re-declare all the variables for an account inside the method.</p>\n\n<pre><code>#https://github.com/nukeproof/oanda_api\nrequire 'oanda_api'\n#require 'rsruby'\nrequire 'indicators'\n\ndef createOrder(instrument=\"EUR_USD\",type=\"market\",units)\n    order = $client.$account($acct_id).order(instrument: \"EUR_USD\",type: \"market\",side: type,units: units).create\n    puts \"time: \"+order.time+\"\\nprice: \"+order.price+\"\\nid: \"+order.trade_opened.id\n    return(order.trade_opened.id)\nend\n\nOpenSSL::SSL::VERIFY_PEER = OpenSSL::SSL::VERIFY_NONE #bad practice...anyone who copies this code dont do this!\n$acct_id=123456\n$acct_token=\"abcd\"\n\n$client = OandaAPI::Client::TokenClient.new(:practice, $acct_token)\n$account = client.account($acct_id).get\n\ncreateOrder(units:1000)\n</code></pre>\n\n<p><strong>Error</strong></p>\n\n<pre><code>C:\\Users\\king\\Desktop\\_REPOS\\misc\\stock_analysis\\forex\\oanda\\ruby&gt;ruby basicnukeproof.rb\nbasicnukeproof.rb:7: syntax error, unexpected tGVAR, expecting '('\n        order = $client.$account($acct_id).order(instrument: ...\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ssl", "elasticsearch", "elasticsearch-ruby"], "answers": [{"tags": [], "owner": {"reputation": 3306, "user_id": 2308178, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3c46d043ccd89cce5e7a907c54dffb00?s=128&d=identicon&r=PG", "display_name": "pech0rin", "link": "https://stackoverflow.com/users/2308178/pech0rin"}, "is_accepted": false, "score": 0, "last_activity_date": 1470797278, "creation_date": 1470797278, "answer_id": 38863474, "question_id": 38862093, "link": "https://stackoverflow.com/questions/38862093/faradaysslerror-for-elasticsearch/38863474#38863474", "title": "Faraday::SSLError for Elasticsearch", "body": "<p>Figured it out. The problem was that the elasticsearch-ruby gem autoloads in an http adapter that it detects if one is not specified. The one used in my console was not the one getting auto loaded into sidekiq.</p>\n\n<p>The sidekiq job was using the HTTPClient adapter which did not respect the SSL version option. Thus I was getting this error. After explicitly defining the faraday adapter it worked.</p>\n"}], "owner": {"reputation": 3306, "user_id": 2308178, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3c46d043ccd89cce5e7a907c54dffb00?s=128&d=identicon&r=PG", "display_name": "pech0rin", "link": "https://stackoverflow.com/users/2308178/pech0rin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 468, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470797278, "creation_date": 1470785986, "question_id": 38862093, "link": "https://stackoverflow.com/questions/38862093/faradaysslerror-for-elasticsearch", "title": "Faraday::SSLError for Elasticsearch", "body": "<p>Currently running into an issue where my background workers which are communicating with elasticsearch via elasticsearch-client are running into SSL errors inside Faraday.</p>\n\n<p>The error is this:</p>\n\n<p><code>SSL_connect returned=1 errno=0 state=SSLv3 read server hello A: sslv3 alert handshake failure</code></p>\n\n<p>The configuration works fine some of the time (around ~50%) and it has never failed for me inside of a console sessions.</p>\n\n<p>The trace of the command is this:\n<code>curl -X GET 'https://&lt;host&gt;/_alias/models_write?pretty</code></p>\n\n<p>The client config is this</p>\n\n<pre><code>Thread.current[:chewy_client] ||= begin\n  client_configuration[:reload_on_failure] = true\n  client_configuration[:reload_connections] = 30\n  client_configuration[:sniffer_timeout] = 0.5\n  client_configuration[:transport_options] ||= {}\n  client_configuration[:transport_options][:ssl] = { :version =&gt; :TLSv1_2 }\n  client_configuration[:transport_options][:headers] = { content_type: 'application/json' }\n  client_configuration[:trace] = true\n  client_configuration[:logger] = Rails.logger\n  ::Elasticsearch::Client.new(client_configuration) do |f|\n    f.request :aws_signers_v4,\n              credentials: AWS::Core::CredentialProviders::DefaultProvider.new,\n              service_name: 'es',\n              region: ENV['ES_REGION'] || 'us-west-2'\n  end\nend\n</code></pre>\n\n<p>As you can see I explicitly set the ssl version to TSLv1_2, but still getting an SSLv3 error.</p>\n\n<p>Thought maybe it was a race condition issue. So ran a script spawning about 10 processes with 50 threads each and calling the sidekiq perform method inside and still not able to reproduce.</p>\n\n<p>I am using the managed AWS 2.3 Elasticsearch if that is at all relevant.</p>\n\n<p>Any help or guidance in the right direction would be greatly appreciated, I would be happy to attach as much info as needed.</p>\n"}, {"tags": ["css", "ruby", "selenium-webdriver"], "comments": [{"owner": {"reputation": 21114, "user_id": 3193455, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/47fc2c18bcbdb84eb374ca3f407c7318?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Gaur", "link": "https://stackoverflow.com/users/3193455/saurabh-gaur"}, "edited": false, "score": 0, "creation_date": 1470795050, "post_id": 38861593, "comment_id": 65089780, "body": "Are you sure there is only one element with provided Id??"}, {"owner": {"reputation": 23, "user_id": 5116611, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4AWpBjNszjE/AAAAAAAAAAI/AAAAAAAAAHE/_GuKWib1BRI/photo.jpg?sz=128", "display_name": "Caleb Guanzon", "link": "https://stackoverflow.com/users/5116611/caleb-guanzon"}, "reply_to_user": {"reputation": 21114, "user_id": 3193455, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/47fc2c18bcbdb84eb374ca3f407c7318?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Gaur", "link": "https://stackoverflow.com/users/3193455/saurabh-gaur"}, "edited": false, "score": 0, "creation_date": 1470796213, "post_id": 38861593, "comment_id": 65090042, "body": "yes, there is only one."}, {"owner": {"reputation": 21114, "user_id": 3193455, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/47fc2c18bcbdb84eb374ca3f407c7318?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh Gaur", "link": "https://stackoverflow.com/users/3193455/saurabh-gaur"}, "edited": false, "score": 0, "creation_date": 1470798451, "post_id": 38861593, "comment_id": 65090525, "body": "Try to wait until element visible then go for send_keys"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5116611, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4AWpBjNszjE/AAAAAAAAAAI/AAAAAAAAAHE/_GuKWib1BRI/photo.jpg?sz=128", "display_name": "Caleb Guanzon", "link": "https://stackoverflow.com/users/5116611/caleb-guanzon"}, "edited": false, "score": 0, "creation_date": 1470793355, "post_id": 38861795, "comment_id": 65089436, "body": "Thank you for answering but I don&#39;t think you can programmatically change the value of a file input field."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 23, "user_id": 5116611, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4AWpBjNszjE/AAAAAAAAAAI/AAAAAAAAAHE/_GuKWib1BRI/photo.jpg?sz=128", "display_name": "Caleb Guanzon", "link": "https://stackoverflow.com/users/5116611/caleb-guanzon"}, "edited": false, "score": 0, "creation_date": 1470863201, "post_id": 38861795, "comment_id": 65127979, "body": "it looks like it is possible. see <a href=\"http://stackoverflow.com/questions/17466737/file-upload-using-selenium-webdriver-and-ruby-with-button-type-button\">http://stackoverflow.com/questions/17466737/file-upload-usin&zwnj;&#8203;g-selenium-webdriver&zwnj;&#8203;-and-ruby-with-butto&zwnj;&#8203;n-type-button</a>"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1470783897, "creation_date": 1470783897, "answer_id": 38861795, "question_id": 38861593, "link": "https://stackoverflow.com/questions/38861593/how-can-i-make-selenium-interact-with-a-file-input-field-with-an-opacity-of-0/38861795#38861795", "title": "How can I make Selenium interact with a file input field with an opacity of 0?", "body": "<p>One option is to it with <code>execute_script</code> instead of <code>find_element.send_keys</code>:</p>\n\n<pre><code>full_file_path = \"./path/'\n\nscript = &lt;&lt;-JS\n  document.getElementById(\"#file-upload\").val(\"#{full_file_path}\")\nJS\n\n@driver.execute_script script\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1257, "user_id": 10893827, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXtKd.png?s=128&g=1", "display_name": "Norayr Sargsyan", "link": "https://stackoverflow.com/users/10893827/norayr-sargsyan"}, "is_accepted": false, "score": 0, "last_activity_date": 1588163122, "creation_date": 1588163122, "answer_id": 61501782, "question_id": 38861593, "link": "https://stackoverflow.com/questions/38861593/how-can-i-make-selenium-interact-with-a-file-input-field-with-an-opacity-of-0/61501782#61501782", "title": "How can I make Selenium interact with a file input field with an opacity of 0?", "body": "<p>The Java code, which is working fine.</p>\n\n<pre><code>WebDriver driver = new ChromeDriver();\n\nJavascriptExecutor js = (JavascriptExecutor) driver;\n\njs.executeScript(\"document.querySelector(\\\"input[id*='upload']\\\").style.opacity='1'\");\n\ndriver.findElement(By.cssSelector(\"input[id*='upload']\")).sendkeys(filepath);\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5116611, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4AWpBjNszjE/AAAAAAAAAAI/AAAAAAAAAHE/_GuKWib1BRI/photo.jpg?sz=128", "display_name": "Caleb Guanzon", "link": "https://stackoverflow.com/users/5116611/caleb-guanzon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 367, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1588163122, "creation_date": 1470782596, "question_id": 38861593, "link": "https://stackoverflow.com/questions/38861593/how-can-i-make-selenium-interact-with-a-file-input-field-with-an-opacity-of-0", "title": "How can I make Selenium interact with a file input field with an opacity of 0?", "body": "<p>In the project I'm working on, we have a lot of file input fields with an opacity of 0.</p>\n\n<p>if I have an input field wih an <code>id</code> of <code>file_upload</code> and <code>opacity:0</code>,</p>\n\n<p>then <code>@driver.find_element(id: 'file-upload').send_keys full_file_path</code> will give me a <code>Selenium::WebDriver::Error::ElementNotVisibleError</code></p>\n\n<p>How can I successfully attach a file to this input?</p>\n\n<p>Im am using selenium-webdriver for Ruby</p>\n\n<p>Note:\nI know that this is possible to do with Capybara but using Capybara is not currently an option in my project.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "redcarpet"], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 6580665, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c0b14d9f0b1deef9c2b8ea478eb24f5?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/6580665/alex"}, "edited": false, "score": 0, "creation_date": 1470818146, "post_id": 38861680, "comment_id": 65098854, "body": "Alright, thanks. How would I enable user upload to the public directory? And when would I put images in app/assets/images instead of public/images?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 49, "user_id": 6580665, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c0b14d9f0b1deef9c2b8ea478eb24f5?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/6580665/alex"}, "edited": false, "score": 0, "creation_date": 1470818403, "post_id": 38861680, "comment_id": 65099020, "body": "I don&#39;t personally use app/assets/images, so I&#39;m not sure how that works. To enable user upload probably use some gem such as carrierwave or paperclip"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 2, "last_activity_date": 1470783168, "creation_date": 1470783168, "answer_id": 38861680, "question_id": 38861445, "link": "https://stackoverflow.com/questions/38861445/rails-images-with-redcarpet/38861680#38861680", "title": "Rails - images with Redcarpet", "body": "<p>It's basically the same as regular markdown. You use the following syntax:</p>\n\n<pre><code>![alt text](image_path_or_url)\n</code></pre>\n\n<p>This will compile to:</p>\n\n<p><code>&lt;img src='&lt;path_or_url'&gt; alt=\"alt text\"&gt;</code></p>\n\n<p>If the image src is a url, nothing else is necessary.</p>\n\n<p>If it's a local image, you need to ensure it's accessible at the path you provided. </p>\n\n<p>In Rails, the <code>public/</code> directory is available as static assets in development. In production, you'd need to set <code>config.serve_static_assets = true</code> in <code>app/config/environments/production.rb</code></p>\n\n<p>So for example if you had an image at <code>public/test.jpg</code> then you could use this markdown:</p>\n\n<pre><code>![test image](./test.jpg)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 12373962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a30eb13413a2bad14c2169b5cef59315?s=128&d=identicon&r=PG&f=1", "display_name": "from_the_paradise", "link": "https://stackoverflow.com/users/12373962/from-the-paradise"}, "is_accepted": false, "score": 1, "last_activity_date": 1613657140, "creation_date": 1613657140, "answer_id": 66261603, "question_id": 38861445, "link": "https://stackoverflow.com/questions/38861445/rails-images-with-redcarpet/66261603#66261603", "title": "Rails - images with Redcarpet", "body": "<p>This tripped me up also. Here's the syntax to use images stored in <code>app/assets/images</code></p>\n<pre><code> ![test](/assets/test.jpg)\n</code></pre>\n<p>So just remove the <code>/images</code> (this applies elsewhere when using images in rails).</p>\n<p>You can also input html directly in markdown:</p>\n<pre><code> &lt;img src=&quot;/assets/test.jpg&quot; /&gt;\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 6580665, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6c0b14d9f0b1deef9c2b8ea478eb24f5?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/6580665/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 616, "favorite_count": 1, "accepted_answer_id": 38861680, "answer_count": 2, "score": 1, "last_activity_date": 1613657140, "creation_date": 1470781794, "question_id": 38861445, "link": "https://stackoverflow.com/questions/38861445/rails-images-with-redcarpet", "title": "Rails - images with Redcarpet", "body": "<p>I'm writing a Rails application and have articles in Markdown rendered using the Redcarpet gem. I would like to include images in my articles, how would I go about doing this? Where is the correct place for the images in my application, and how would I display them from that location using markdown?</p>\n\n<p>Also, if I wanted the user to be able to attach/embed an image in their article, how would I do this?</p>\n\n<p>By the way, I'm using Rails 5.</p>\n"}, {"tags": ["arrays", "ruby", "hash", "hashmap"], "answers": [{"comments": [{"owner": {"reputation": 508, "user_id": 4415920, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/crheD.jpg?s=128&g=1", "display_name": "The Gugaru", "link": "https://stackoverflow.com/users/4415920/the-gugaru"}, "edited": false, "score": 0, "creation_date": 1470823238, "post_id": 38861494, "comment_id": 65102370, "body": "Upvotted because you provided explanation with your code!"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 5, "last_activity_date": 1470782045, "creation_date": 1470782045, "answer_id": 38861494, "question_id": 38861432, "link": "https://stackoverflow.com/questions/38861432/ruby-how-to-remove-elements-from-hash-array/38861494#38861494", "title": "ruby how to remove elements from hash array?", "body": "<p>there are a few problems with this block you've provided to <code>delete_if</code>:</p>\n\n<pre><code>sample.delete_if { |key, value| sample[x][\"id\"] == remove_ele[x] }\n</code></pre>\n\n<p>Since <code>sample</code> is an array of hashes, using the <code>delete_if</code> iterator will pass a hash to the block. I.e. it should be <code>|hash|</code> instead of <code>|key, value|</code>.</p>\n\n<p>Secondly, <code>x</code> will not be defined in your block.</p>\n\n<p>A functional solution would be this:</p>\n\n<pre><code>remove_ele.each do |id_to_remove|\n  sample.delete_if { |hash| hash['id'] == id_to_remove }\nend\n</code></pre>\n\n<p>Alternatively, which does the same thing:</p>\n\n<pre><code>sample.delete_if { |hash| remove_ele.include? hash['id'] }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 508, "user_id": 4415920, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/crheD.jpg?s=128&g=1", "display_name": "The Gugaru", "link": "https://stackoverflow.com/users/4415920/the-gugaru"}, "edited": false, "score": 0, "creation_date": 1470823316, "post_id": 38861519, "comment_id": 65102431, "body": "Down voted due to lack of explanation. Providing the code without explanations does nothing for the op"}], "tags": [], "owner": {"reputation": 61, "user_id": 527732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1689f8d087deed0bb1a8fdc17205515?s=128&d=identicon&r=PG", "display_name": "JimF", "link": "https://stackoverflow.com/users/527732/jimf"}, "is_accepted": false, "score": 1, "last_activity_date": 1470782187, "creation_date": 1470782187, "answer_id": 38861519, "question_id": 38861432, "link": "https://stackoverflow.com/questions/38861432/ruby-how-to-remove-elements-from-hash-array/38861519#38861519", "title": "ruby how to remove elements from hash array?", "body": "<p><code>sample.delete_if {|x| remove_ele.include? x['id'] }</code></p>\n"}], "owner": {"reputation": 1094, "user_id": 2386620, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/65ad9f1a1aafff45f439ab9d622e00ac?s=128&d=identicon&r=PG", "display_name": "adbarads", "link": "https://stackoverflow.com/users/2386620/adbarads"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 906, "favorite_count": 0, "accepted_answer_id": 38861494, "answer_count": 2, "score": 1, "last_activity_date": 1470782187, "creation_date": 1470781707, "question_id": 38861432, "link": "https://stackoverflow.com/questions/38861432/ruby-how-to-remove-elements-from-hash-array", "title": "ruby how to remove elements from hash array?", "body": "<p>I am trying to remove the entire row for <code>id</code> and <code>name</code> for <code>001</code> and <code>002</code>from the sample:</p>\n\n<pre><code>sample = [{\"id\"=&gt;\"000\", \"name\"=&gt;\"Bob\"},\n     {\"id\"=&gt;\"001\", \"name\"=&gt;\"Sally\"},\n     {\"id\"=&gt;\"002\", \"name\"=&gt;\"Spike\"},\n     {\"id\"=&gt;\"003\", \"name\"=&gt;\"Junior\"},\n     {\"id\"=&gt;\"004\", \"name\"=&gt;\"Tater\"}]\n\nremove_ele = [\"001\",\"002\"]\n</code></pre>\n\n<p>I have tried the following, but it doesn't seem to work:</p>\n\n<p><code>sample.delete_if { |key, value| sample[x][\"id\"] == remove_ele[x] }</code></p>\n\n<p>essentially, i'm trying to compare the 2 and any matches in <code>remove_ele</code> it will just delete the entire row/element in <code>sample</code>.</p>\n\n<p>Please assist in best way to do this in ruby.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1470781667, "post_id": 38861404, "comment_id": 65086755, "body": "Why do you have to change the root dir? Do you mean you want to change the root <i>route</i>? Rails isn&#39;t a static server. The root dir doesn&#39;t effect which files are rendered. Anyway, if you want the projects show template to show on <code>&#47;</code>, use this route:   <code>root &#39;projects#show&#39;</code> however your show method requires a <code>project_id</code> param which wouldn&#39;t automatically be provided."}, {"owner": {"reputation": 139, "user_id": 5581314, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1f08692876a66df8a8fcb54d990ec22b?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhah", "link": "https://stackoverflow.com/users/5581314/mikhah"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1470782039, "post_id": 38861404, "comment_id": 65086847, "body": "well there was a typo in my rutes.rb - i&#39;ve fixed it.but <code>&#47;</code> still redirects me to projects#index where I get an error with this form (cause I can&#39;t use form with such params in index action.as far as I know)"}], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 5581314, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1f08692876a66df8a8fcb54d990ec22b?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhah", "link": "https://stackoverflow.com/users/5581314/mikhah"}, "edited": false, "score": 0, "creation_date": 1470782464, "post_id": 38861538, "comment_id": 65086969, "body": "The app must look like a page with project and its tasks ,so I can&#39;t create links to other pages"}, {"owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "reply_to_user": {"reputation": 139, "user_id": 5581314, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1f08692876a66df8a8fcb54d990ec22b?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhah", "link": "https://stackoverflow.com/users/5581314/mikhah"}, "edited": false, "score": 0, "creation_date": 1470782529, "post_id": 38861538, "comment_id": 65086991, "body": "You want to display all the projects and their tasks in the root page?"}, {"owner": {"reputation": 139, "user_id": 5581314, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1f08692876a66df8a8fcb54d990ec22b?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhah", "link": "https://stackoverflow.com/users/5581314/mikhah"}, "edited": false, "score": 0, "creation_date": 1470782703, "post_id": 38861538, "comment_id": 65087037, "body": "Yes,after user sign in - he should take a look at all projects with all their tasks and be able to add tasks to a project via form"}, {"owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "reply_to_user": {"reputation": 139, "user_id": 5581314, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1f08692876a66df8a8fcb54d990ec22b?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhah", "link": "https://stackoverflow.com/users/5581314/mikhah"}, "edited": false, "score": 0, "creation_date": 1470783119, "post_id": 38861538, "comment_id": 65087154, "body": "You don&#39;t understand my answer. Currently your <code>show</code> action requires a <code>@project</code> but if you make it root, then you will get an error, <code>No route matches missing required keys: [:id]</code>. I&#39;ll update my answer."}, {"owner": {"reputation": 139, "user_id": 5581314, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1f08692876a66df8a8fcb54d990ec22b?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhah", "link": "https://stackoverflow.com/users/5581314/mikhah"}, "edited": false, "score": 0, "creation_date": 1470783225, "post_id": 38861538, "comment_id": 65087189, "body": "So what should I do to have a page looking like - <a href=\"http://prnt.sc/c3qawe\" rel=\"nofollow noreferrer\">prnt.sc/c3qawe</a> ? Create some home page that will have button that redirects user to <code>show</code> page?"}, {"owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "reply_to_user": {"reputation": 139, "user_id": 5581314, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1f08692876a66df8a8fcb54d990ec22b?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhah", "link": "https://stackoverflow.com/users/5581314/mikhah"}, "edited": false, "score": 0, "creation_date": 1470783559, "post_id": 38861538, "comment_id": 65087287, "body": "Thats the better way to do it. The screenshot you showed will require a lot of JS responses rather than HTML responses. I would suggest you to follow the tutorial I suggested. It&#39;ll help you."}, {"owner": {"reputation": 139, "user_id": 5581314, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1f08692876a66df8a8fcb54d990ec22b?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhah", "link": "https://stackoverflow.com/users/5581314/mikhah"}, "edited": false, "score": 0, "creation_date": 1470783978, "post_id": 38861538, "comment_id": 65087392, "body": "well cause modal window is not an option for the app - I&#39;ve created a homepage with one button <code>&lt;%= link_to &#39;projects&#39;, &#39;projects#show&#39;, class: &#39;btn&#39; %&gt;</code> .But it redirects me to projects#index action ((( `"}, {"owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "reply_to_user": {"reputation": 139, "user_id": 5581314, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1f08692876a66df8a8fcb54d990ec22b?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhah", "link": "https://stackoverflow.com/users/5581314/mikhah"}, "edited": false, "score": 0, "creation_date": 1470784019, "post_id": 38861538, "comment_id": 65087401, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/120555/discussion-between-arun-kumar-and-mikhah\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "is_accepted": true, "score": 1, "last_activity_date": 1470783521, "last_edit_date": 1470783521, "creation_date": 1470782314, "answer_id": 38861538, "question_id": 38861404, "link": "https://stackoverflow.com/questions/38861404/cant-change-root-route-rails/38861538#38861538", "title": "Can&#39;t change root route rails", "body": "<p>Why do you want the index to be show page? Well, how can you do that? The <code>show</code> action requires a <code>id</code> to be passed to the controller so that a particular project can be displayed to the user. How can you pass in a <code>id</code> when the user is requesting for <code>/</code>?</p>\n\n<p>Does that make sense?</p>\n\n<p>I would suggest you to leave the root to the <code>index</code> page. In the index view, link each project to its show page. Its unnecessary to have a nested form in the index page.</p>\n\n<p>Or if you want to list all projects and tasks in the root page, modify your <code>index</code> view to loop through each project's tasks.</p>\n\n<pre><code>@projects.each do |project|\n  # display project's information\n  project.tasks.each do |task|\n    # display the task information\n    # display a new task button\n  end\nend\n</code></pre>\n\n<p>But you can't display the nested form like you asked. Because the form requires <code>@project</code> and <code>@task</code> which you can't determine in the <code>index action</code>. Maybe you can add <code>remote: true</code> to the \"New task\" and then trigger a JS response to render the form in a modal. </p>\n\n<p>If this sounds new to you, please see <a href=\"https://launchschool.com/blog/the-detailed-guide-on-how-ajax-works-with-ruby-on-rails\" rel=\"nofollow\">https://launchschool.com/blog/the-detailed-guide-on-how-ajax-works-with-ruby-on-rails</a></p>\n\n<p>This will walk through you using AJAX in your rails application.</p>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 139, "user_id": 5581314, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1f08692876a66df8a8fcb54d990ec22b?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhah", "link": "https://stackoverflow.com/users/5581314/mikhah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 0, "accepted_answer_id": 38861538, "answer_count": 1, "score": 0, "last_activity_date": 1470793512, "creation_date": 1470781555, "last_edit_date": 1470793512, "question_id": 38861404, "link": "https://stackoverflow.com/questions/38861404/cant-change-root-route-rails", "title": "Can&#39;t change root route rails", "body": "<p>I'm creating a simple Todo list application in rails and I have the next problem:</p>\n\n<p>I have a task that <code>belongs_to</code> project\nI've created a template - <code>projects/show.html.erb</code>\nAnd I can't set it to be the <code>root page</code> of my app, as I can see from the debugger - root is always <code>projects#index</code> action</p>\n\n<p>P.S. I need show to be the root page cause I can't use this form in index action</p>\n\n<pre><code> &lt;%= form_for [@project, @task],remote: true do |f| %&gt;\n          &lt;%= f.input :body,class: 'form-control' %&gt;\n          &lt;%= f.submit 'Add task', class: 'btn' %&gt;\n        &lt;% end %&gt;\n</code></pre>\n\n<p><strong>projects controller</strong> </p>\n\n<pre><code> class ProjectsController &lt; ApplicationController\n     before_action :load_project, only: [:show, :edit, :update, :destroy]\n     before_action :authenticate_user!\n\n     def index\n        @projects = current_user.projects unless current_user.nil?\n      end\n\n      def show\n        @task = @project.tasks.new\n      end\n\n      def new\n        @project = current_user.projects.new\n      end\n\n      def edit\n      end\n\n      def create\n        @project = current_user.projects.create(project_params)\n\n        if @project.save\n          redirect_to root_path\n        else\n          render :new\n        end\n      end\n\n      def update\n        if @project.update(project_params)\n          redirect_to @project\n        else\n          render :edit\n        end\n      end\n\n      def destroy\n        @project.destroy\n        redirect_to projects_path\n      end\n\n      private\n\n    def load_project\n      begin\n        @project = Project.find(params[:id]) #raises an exception if project not found\n      rescue ActiveRecord::RecordNotFound\n        redirect_to projects_path\n      end\n    end\n\n      def project_params\n        params.require(:project).permit(:name, :user_id)\n      end\n\nend\n</code></pre>\n\n<p><strong>Routes.rb</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n  devise_for :users, :controllers =&gt; { :omniauth_callbacks =&gt; \"callbacks\" }\n  # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html\n  root 'projects#index'\n\n\n  resources :projects do\n    resources :tasks\n  end\n\n\n\n\nend\n</code></pre>\n\n<p>And routes generated by <strong>rake routes</strong> </p>\n\n<pre><code>todo$ rake routes\n                          Prefix Verb     URI Pattern                                    Controller#Action\n                new_user_session GET      /users/sign_in(.:format)                       devise/sessions#new\n                    user_session POST     /users/sign_in(.:format)                       devise/sessions#create\n            destroy_user_session DELETE   /users/sign_out(.:format)                      devise/sessions#destroy\nuser_facebook_omniauth_authorize GET|POST /users/auth/facebook(.:format)                 callbacks#passthru\n user_facebook_omniauth_callback GET|POST /users/auth/facebook/callback(.:format)        callbacks#facebook\n                   user_password POST     /users/password(.:format)                      devise/passwords#create\n               new_user_password GET      /users/password/new(.:format)                  devise/passwords#new\n              edit_user_password GET      /users/password/edit(.:format)                 devise/passwords#edit\n                                 PATCH    /users/password(.:format)                      devise/passwords#update\n                                 PUT      /users/password(.:format)                      devise/passwords#update\n        cancel_user_registration GET      /users/cancel(.:format)                        devise/registrations#cancel\n               user_registration POST     /users(.:format)                               devise/registrations#create\n           new_user_registration GET      /users/sign_up(.:format)                       devise/registrations#new\n          edit_user_registration GET      /users/edit(.:format)                          devise/registrations#edit\n                                 PATCH    /users(.:format)                               devise/registrations#update\n                                 PUT      /users(.:format)                               devise/registrations#update\n                                 DELETE   /users(.:format)                               devise/registrations#destroy\n                            root GET      /                                              home#index\n                   project_tasks GET      /projects/:project_id/tasks(.:format)          tasks#index\n                                 POST     /projects/:project_id/tasks(.:format)          tasks#create\n                new_project_task GET      /projects/:project_id/tasks/new(.:format)      tasks#new\n               edit_project_task GET      /projects/:project_id/tasks/:id/edit(.:format) tasks#edit\n                    project_task GET      /projects/:project_id/tasks/:id(.:format)      tasks#show\n                                 PATCH    /projects/:project_id/tasks/:id(.:format)      tasks#update\n                                 PUT      /projects/:project_id/tasks/:id(.:format)      tasks#update\n                                 DELETE   /projects/:project_id/tasks/:id(.:format)      tasks#destroy\n                        projects GET      /projects(.:format)                            projects#index\n                                 POST     /projects(.:format)                            projects#create\n                     new_project GET      /projects/new(.:format)                        projects#new\n                    edit_project GET      /projects/:id/edit(.:format)                   projects#edit\n                         project GET      /projects/:id(.:format)                        projects#show\n                                 PATCH    /projects/:id(.:format)                        projects#update\n                                 PUT      /projects/:id(.:format)                        projects#update\n                                 DELETE   /projects/:id(.:format)                        projects#destroy\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "sprockets"], "answers": [{"comments": [{"owner": {"reputation": 1635, "user_id": 3017954, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eb24756b6ef26baee8ae161006099cc7?s=128&d=identicon&r=PG&f=1", "display_name": "CodeSmith", "link": "https://stackoverflow.com/users/3017954/codesmith"}, "edited": false, "score": 0, "creation_date": 1470839332, "post_id": 38872093, "comment_id": 65113913, "body": "Thank you, this is a great idea.  I&#39;ll give it a shot."}, {"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "reply_to_user": {"reputation": 1635, "user_id": 3017954, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eb24756b6ef26baee8ae161006099cc7?s=128&d=identicon&r=PG&f=1", "display_name": "CodeSmith", "link": "https://stackoverflow.com/users/3017954/codesmith"}, "edited": false, "score": 0, "creation_date": 1471445830, "post_id": 38872093, "comment_id": 65351848, "body": "Did you have any luck?"}, {"owner": {"reputation": 1635, "user_id": 3017954, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eb24756b6ef26baee8ae161006099cc7?s=128&d=identicon&r=PG&f=1", "display_name": "CodeSmith", "link": "https://stackoverflow.com/users/3017954/codesmith"}, "edited": false, "score": 0, "creation_date": 1471534089, "post_id": 38872093, "comment_id": 65394679, "body": "I&#39;m not sure yet.  I got redirected to support some other issues and haven&#39;t had a chance to try this out yet.  I&#39;ll update once I know more."}, {"owner": {"reputation": 1635, "user_id": 3017954, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eb24756b6ef26baee8ae161006099cc7?s=128&d=identicon&r=PG&f=1", "display_name": "CodeSmith", "link": "https://stackoverflow.com/users/3017954/codesmith"}, "edited": false, "score": 1, "creation_date": 1473280025, "post_id": 38872093, "comment_id": 66084879, "body": "I was finally able to come back to the project and try this out.  Your suggestion worked great.  Thank you!"}], "tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": true, "score": 1, "last_activity_date": 1470828216, "creation_date": 1470828216, "answer_id": 38872093, "question_id": 38861128, "link": "https://stackoverflow.com/questions/38861128/invalidate-sprockets-cache-during-rspec-automated-test/38872093#38872093", "title": "Invalidate Sprockets cache during RSpec automated test", "body": "<p>I don't know how to do what you asked. But you could consider setting <code>myTimer</code> to the value you want it to be in the feature specs that need it to be a specific value.</p>\n\n<p>Assuming you're using Capybara, you can run Javascript in a feature spec with </p>\n\n<pre><code>page.execute_script('// some Javascript')\n</code></pre>\n\n<p>You might need to rearrange your Javascript a bit first to put <code>myTimer</code> somewhere where a script can change it.</p>\n"}], "owner": {"reputation": 1635, "user_id": 3017954, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eb24756b6ef26baee8ae161006099cc7?s=128&d=identicon&r=PG&f=1", "display_name": "CodeSmith", "link": "https://stackoverflow.com/users/3017954/codesmith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 1, "accepted_answer_id": 38872093, "answer_count": 1, "score": 5, "last_activity_date": 1470828409, "creation_date": 1470780105, "last_edit_date": 1470828409, "question_id": 38861128, "link": "https://stackoverflow.com/questions/38861128/invalidate-sprockets-cache-during-rspec-automated-test", "title": "Invalidate Sprockets cache during RSpec automated test", "body": "<p>In my Rails application, I have a .js.erb file that has a variable which gets dynamically set based on some Ruby code.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>var myTimer = &lt;%= MyApp.config.timeout_time * 1000 %&gt;;\n</code></pre>\n\n<p>The app works fine, but I'm having a problem in some automated tests.  The problem occurs in an RSpec feature test that works with this JavaScript.  My spec file has a number of tests that change the ruby <code>MyApp.config.timeout_time</code> time on the fly to test out different scenarios.  In my spec file, the first example passes, and the rest fail.  </p>\n\n<p>I finally realized this is happening because <code>myTimer</code> never gets updated on the JavaScript side.  When the first test runs, the JavaScript gets compiled using the current value as it's set in Ruby.  When I change the Ruby timer for the second test, RSpec is still using the previous value in the JavaScript.</p>\n\n<p><strong>Is there a way to tell Sprockets/Rails to invalidate a file or a part of the cache so the JavaScript will get rebuilt?</strong>  I don't want to turn off caching in general, I just need a way to invalidate application.js on a per-test basis when needed.</p>\n\n<p>I may be able to \"touch\" one of the JavaScript files on the file system to make sprockets think the file has been changed, but I don't really want to do that.</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "edited": false, "score": 1, "creation_date": 1470777612, "post_id": 38860548, "comment_id": 65085216, "body": "read up the difference between <code>map</code> and <code>each</code> methods."}, {"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1470818235, "post_id": 38860548, "comment_id": 65098908, "body": "I&#39;m not sure to what extent uniq is guaranteed to preserve order, or whether there might be changes to that in the future, but if it were me I&#39;d prefer uniq.sort over sort.uniq."}], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 1, "last_activity_date": 1470779868, "creation_date": 1470779868, "answer_id": 38861086, "question_id": 38860548, "link": "https://stackoverflow.com/questions/38860548/how-can-i-enumerate-a-property-in-an-array-of-objects-modify-it-and-join-them/38861086#38861086", "title": "How can I enumerate a property in an array of objects, modify it, and join them in a string in ruby?", "body": "<p>You basically have it but you can skip the <code>Array.new</code> and <code>arr.push</code>:</p>\n\n<pre><code>result = someArrayOfObjects.map do |obj|\n  obj.someProp + '-addThisStr'\nend.sort.uniq.join(\", \")\n\nputs result\n</code></pre>\n"}], "owner": {"reputation": 17716, "user_id": 1028270, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lJIL5.png?s=128&g=1", "display_name": "red888", "link": "https://stackoverflow.com/users/1028270/red888"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 38861086, "answer_count": 1, "score": -2, "last_activity_date": 1470780491, "creation_date": 1470777300, "last_edit_date": 1470780491, "question_id": 38860548, "link": "https://stackoverflow.com/questions/38860548/how-can-i-enumerate-a-property-in-an-array-of-objects-modify-it-and-join-them", "title": "How can I enumerate a property in an array of objects, modify it, and join them in a string in ruby?", "body": "<p>How can I enumerate a property in an array of objects, modify it, and join them in a string? I know there must be Ruby features that make this easier, but I have been having trouble understanding them.</p>\n\n<p>How can I accomplish this more efficiently (less code/easier to read)?</p>\n\n<pre><code>arr = Array.new\nsomeArrayOfObjects.map{\n  |obj| arr.push(obj.someProp + '-addThisStr')\n}\nputs arr.sort.uniq.join(', ')\n\n#end result:\nsomepropA-addThisStr,somepropB-addThisStr, etc\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 1, "last_activity_date": 1470777528, "creation_date": 1470777528, "answer_id": 38860617, "question_id": 38860493, "link": "https://stackoverflow.com/questions/38860493/ruby-call-method-based-on-record-type/38860617#38860617", "title": "ruby call method based on record type", "body": "<p>Change <code>get_history</code> to look like this:</p>\n\n<pre><code>def get_history(start_time, end_time)\n  if communication_channel == :gsm\n    return gsm_get_history(start_time, end_time)\n  end\n\n  # ...\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3695, "user_id": 1074558, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/af92c7f9716e814795682a607057d6b3?s=128&d=identicon&r=PG", "display_name": "atreat", "link": "https://stackoverflow.com/users/1074558/atreat"}, "is_accepted": false, "score": 0, "last_activity_date": 1470777539, "creation_date": 1470777539, "answer_id": 38860619, "question_id": 38860493, "link": "https://stackoverflow.com/questions/38860493/ruby-call-method-based-on-record-type/38860619#38860619", "title": "ruby call method based on record type", "body": "<p>You could shortcircuit the get_history method</p>\n\n<pre><code>class Vehicle &lt; ActiveRecord::Base\n  def get_history(start_time, end_time)\n    return gsm_get_history(start_time, end_time) if communication_channel == :gsm\n    #...\n  end\n\ndef gsm_get_history(start_time, end_time)\n  #...\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 3728, "user_id": 2612713, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/0a7f606f9e135589780620d1160d941e?s=128&d=identicon&r=PG&f=1", "display_name": "neo", "link": "https://stackoverflow.com/users/2612713/neo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 38860617, "answer_count": 2, "score": 0, "last_activity_date": 1470777539, "creation_date": 1470777041, "question_id": 38860493, "link": "https://stackoverflow.com/questions/38860493/ruby-call-method-based-on-record-type", "title": "ruby call method based on record type", "body": "<p>I have the following methods on my vehicle model like so:</p>\n\n<pre><code>class Vehicle &lt; ActiveRecord::Base\n  def get_history(start_time, end_time)\n    #...\n  end\n\n  def gsm_get_history(start_time, end_time)\n    #...\n  end\nend\n</code></pre>\n\n<p><code>get_history</code> is being called all over the codebase, I defined <code>gsm_get_history</code> method that's very similar, accepts the same arguments.</p>\n\n<p>how can I keep calling <code>get_history</code> without changing every instance of this method call in my code base? and call <code>gsm_get_history</code> only if communication channel on the vehicle is <code>:gsm</code></p>\n"}, {"tags": ["ruby", "open-closed-principle"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1470776944, "post_id": 38860405, "comment_id": 65084913, "body": "<code>initialize</code> is a method just like any other method. There is absolutely nothing special whatsoever about it. So, your question is: can I redefine methods? And the answer is: yes. The answer to your second question is: I don&#39;t know. There&#39;s not enough information in your post."}, {"owner": {"reputation": 2419, "user_id": 241161, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/fec8679ec604bfb7264ee8f3a260fdf4?s=128&d=identicon&r=PG", "display_name": "Lu&#237;s Guilherme", "link": "https://stackoverflow.com/users/241161/lu%c3%ads-guilherme"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1470777281, "post_id": 38860405, "comment_id": 65085062, "body": "I assume thus I am redefining initialize after the instance I wished to alter (and to which I have no access whatsoever) has already been initialized, so the change occurs, but to no effect."}, {"owner": {"reputation": 4955, "user_id": 5274205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a281a1418dbceeda34cc93d3744554?s=128&d=identicon&r=PG", "display_name": "Chad S.", "link": "https://stackoverflow.com/users/5274205/chad-s"}, "edited": false, "score": 0, "creation_date": 1470780914, "post_id": 38860405, "comment_id": 65086516, "body": "Answers to your questions are 1) yes;  2) I have no idea without seeing a full example which works the way you describe."}], "answers": [{"tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": true, "score": 2, "last_activity_date": 1470781563, "creation_date": 1470781563, "answer_id": 38861405, "question_id": 38860405, "link": "https://stackoverflow.com/questions/38860405/is-it-possible-in-ruby-to-redefine-a-initialize-method/38861405#38861405", "title": "Is it possible in Ruby to redefine a initialize method?", "body": "<p>I'm afraid that <code>Foo</code> is a lazily <code>autoload</code>ed class, and you are \"redefining\" <code>initialize</code> before <code>Foo</code> is loaded.</p>\n\n<p>Try this</p>\n\n<pre><code>Foo.class_eval do\n  def initialize\n    @hello = \"welt\"\n  end\nend\n</code></pre>\n\n<p>This forces <code>Foo</code> to be loaded before redefining anything.</p>\n"}], "owner": {"reputation": 2419, "user_id": 241161, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/fec8679ec604bfb7264ee8f3a260fdf4?s=128&d=identicon&r=PG", "display_name": "Lu&#237;s Guilherme", "link": "https://stackoverflow.com/users/241161/lu%c3%ads-guilherme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 322, "favorite_count": 0, "accepted_answer_id": 38861405, "answer_count": 1, "score": 0, "last_activity_date": 1470781563, "creation_date": 1470776703, "last_edit_date": 1470777399, "question_id": 38860405, "link": "https://stackoverflow.com/questions/38860405/is-it-possible-in-ruby-to-redefine-a-initialize-method", "title": "Is it possible in Ruby to redefine a initialize method?", "body": "<p>I have a third-party code that's like this:</p>\n\n<pre><code>class Foo\n  def initialize\n    @hello = \"world\"\n  end\n\n  def msg\n    @hello\n  end\nend\n</code></pre>\n\n<p>Then, I added a new file <code>foo_redefinition.rb</code> with these contents</p>\n\n<pre><code>class Foo\n  def initialize\n    @hello = \"welt\"\n  end\nend\n</code></pre>\n\n<p>Then, another third party code calls a method in my main class, and in the file of my main class I do <code>require_relative 'foo_redefinition'</code>. However, when the third party code (after calling my method, thus reading my main file, which requires the redefinition) calls Foo.msg, it returns \"world\", not \"welt\". </p>\n\n<p>Also, when I do</p>\n\n<pre><code>require_relative 'foo_redefinition'\n\n# ... lots of code\n\nFoo::new.msg #=&gt; world (instead of welt)\n</code></pre>\n\n<p>My questions are:</p>\n\n<ol>\n<li>Is it possible to redefine an initialize method?</li>\n<li>If so, what I am doing wrong here?</li>\n</ol>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "rails-activerecord", "active-record-query"], "answers": [{"comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1470778814, "post_id": 38860588, "comment_id": 65085696, "body": "If you <code>where.not(parent_dimension_id: Relation.where(...).select(:parent_dimension_id))</code> AR will use a subquery (<code>parent_dimension_id not in (select parent_dimension_id from ...)</code>) rather than two queries with an intermediate Ruby array."}, {"owner": {"reputation": 5358, "user_id": 2399861, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5fbe887e0a643cd477ba3f14fa528f84?s=128&d=identicon&r=PG", "display_name": "Ruby Racer", "link": "https://stackoverflow.com/users/2399861/ruby-racer"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1470783413, "post_id": 38860588, "comment_id": 65087241, "body": "I&#39;ve not tested this, but you are apparently right. Make this an answer and I&#39;ll drop mine :)"}], "tags": [], "owner": {"reputation": 5358, "user_id": 2399861, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5fbe887e0a643cd477ba3f14fa528f84?s=128&d=identicon&r=PG", "display_name": "Ruby Racer", "link": "https://stackoverflow.com/users/2399861/ruby-racer"}, "is_accepted": false, "score": 0, "last_activity_date": 1470777446, "creation_date": 1470777446, "answer_id": 38860588, "question_id": 38860243, "link": "https://stackoverflow.com/questions/38860243/not-in-for-active-record/38860588#38860588", "title": "&quot;NOT IN&quot; for Active Record", "body": "<p>You can feed where clauses with values or arrays of values, in which case they will be translated into <code>in (?)</code> clauses. </p>\n\n<p>Thus, the last part of your query could contain a mapping:</p>\n\n<pre><code>.where.not(parent_dimension_id:Relation.where(relation_type_id:6).map(&amp;:parent_dimension_id))\n</code></pre>\n\n<p>Or you can prepare a statement</p>\n\n<pre><code>.where('parent_dimension_id not in (?)', Relation.where(relation_type_id:6).map(&amp;:parent_dimension_id) )\n</code></pre>\n\n<p>which is essentially exactly the same thing</p>\n"}, {"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": false, "score": 3, "last_activity_date": 1471998572, "last_edit_date": 1471998572, "creation_date": 1470806307, "answer_id": 38864800, "question_id": 38860243, "link": "https://stackoverflow.com/questions/38860243/not-in-for-active-record/38864800#38864800", "title": "&quot;NOT IN&quot; for Active Record", "body": "<p>If you really do want </p>\n\n<pre><code>SELECT parent_dimension_id\nFROM relations\nWHERE relation_type_id = 6\n</code></pre>\n\n<p>as a subquery, you just need to convert that SQL to an ActiveRecord relation:</p>\n\n<pre><code>Relation.select(:parent_dimension_id).where(:relation_type_id =&gt; 6)\n</code></pre>\n\n<p>then use that as a value in a <code>where</code> call the same way you'd use an array:</p>\n\n<pre><code>not_parents = Relation.select(:parent_dimension_id).where(:relation_type_id =&gt; 6)\n\nRelation.joins('...')\n        .where(relation_type_id: model_relation_id, ...)\n        .where.not(parent_dimension_id: not_parents)\n</code></pre>\n\n<p>When you use an ActiveRecord relation as a value in a <code>where</code> and that relation selects a single column:</p>\n\n<pre><code>r = M1.select(:one_column).where(...)\nM2.where(:column =&gt; r)\n</code></pre>\n\n<p>ActiveRecord is smart enough to inline <code>r</code>'s SQL as an <code>in (select one_column ...)</code> rather than doing two queries.</p>\n\n<p>You could probably replace your:</p>\n\n<pre><code>joins('INNER JOIN dimensions ON child_dimension_id = dimensions.id')\n</code></pre>\n\n<p>with a simpler <code>joins(:some_relation)</code> if your relations are set up too.</p>\n"}], "owner": {"reputation": 1094, "user_id": 2386620, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/65ad9f1a1aafff45f439ab9d622e00ac?s=128&d=identicon&r=PG", "display_name": "adbarads", "link": "https://stackoverflow.com/users/2386620/adbarads"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 315, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1471998588, "creation_date": 1470776048, "last_edit_date": 1471998588, "question_id": 38860243, "link": "https://stackoverflow.com/questions/38860243/not-in-for-active-record", "title": "&quot;NOT IN&quot; for Active Record", "body": "<p>I have a MySQL query that I am trying to chain a \"NOT IN\" at the end of it.</p>\n\n<p>Here is what it looks like in ruby using Active Record:</p>\n\n<pre><code>not_in = find_by_sql(\"SELECT parent_dimension_id FROM relations WHERE relation_type_id  = 6;\").map(&amp;:parent_dimension_id)\n\n      joins('INNER JOIN dimensions ON child_dimension_id = dimensions.id')\n          .where(relation_type_id: model_relation_id,\n                 parent_dimension_id: sub_type_ids,\n                 child_dimension_id: model_type)\n          .where.not(parent_dimension_id: not_in)\n</code></pre>\n\n<p>So the SQL query I'm trying to do looks like this:</p>\n\n<pre><code>INNER JOIN dimensions ON child_dimension_id = dimensions.id\nWHERE relations.relation_type_id = 5 \nAND relations.parent_dimension_id \nNOT IN(SELECT parent_dimension_id FROM relations WHERE relation_type_id  = 6);\n</code></pre>\n\n<p>Can someone confirm to me what I should use for that query?\ndo I chain on where.not ?</p>\n"}]