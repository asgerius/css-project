[{"tags": ["javascript", "regex", "reactjs"], "comments": [{"owner": {"reputation": 4217, "user_id": 9029328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r3hFz.png?s=128&g=1", "display_name": "AuxTaco", "link": "https://stackoverflow.com/users/9029328/auxtaco"}, "edited": false, "score": 3, "creation_date": 1562804734, "post_id": 56980005, "comment_id": 100496097, "body": "Be aware that lookbehinds are <a href=\"https://www.caniuse.com/#feat=js-regexp-lookbehind\" rel=\"nofollow noreferrer\">not yet well-supported</a>."}, {"owner": {"reputation": 80516, "user_id": 227299, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6483c2f0fcf64b578c55ca0df7e01096?s=128&d=identicon&r=PG", "display_name": "Juan Mendes", "link": "https://stackoverflow.com/users/227299/juan-mendes"}, "edited": false, "score": 2, "creation_date": 1562805258, "post_id": 56980005, "comment_id": 100496196, "body": "<code>&quot;$Hello$, my name is $John$&quot;.split(&quot;$&quot;).filter((el, i ) =&gt; i % 2)</code> outputs <code>[&quot;Hello&quot;, &quot;John&quot;]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 670, "user_id": 7471822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a8fe7bbe549522ddb5e12747cd583e0?s=128&d=identicon&r=PG&f=1", "display_name": "ldtcoop", "link": "https://stackoverflow.com/users/7471822/ldtcoop"}, "is_accepted": false, "score": 1, "last_activity_date": 1562804880, "last_edit_date": 1562804880, "creation_date": 1562804463, "answer_id": 56980152, "question_id": 56980005, "link": "https://stackoverflow.com/questions/56980005/matching-a-substring-between-two-special-characters-excluding-the-characters/56980152#56980152", "title": "Matching a substring between two special characters EXCLUDING the characters", "body": "<p>I was able to get the desired matches with <code>/(?&lt;=\\$)[^$ ]+(?=\\$)/g</code>.</p>\n\n<p>It will match every word between two dollar signs, but it relies on two assumptions. The first is that <code>$</code> can't appear as a character in the sentence, e.g. <code>$Your$ total is $4.50, cash or $card$</code>. The second is that there will never be a space inside the dollar signs, e.g. <code>$Hello$, my name is $John Smith$</code>. As long as that works, you should be good to go.</p>\n"}, {"tags": [], "owner": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "is_accepted": false, "score": 0, "last_activity_date": 1562822625, "creation_date": 1562822625, "answer_id": 56982104, "question_id": 56980005, "link": "https://stackoverflow.com/questions/56980005/matching-a-substring-between-two-special-characters-excluding-the-characters/56982104#56982104", "title": "Matching a substring between two special characters EXCLUDING the characters", "body": "<p>Can achieve it without employing lookbehinds:</p>\n\n<p><code>(?:.*?\\$(.*?)\\$) /g</code></p>\n\n<p>All I am doing is lazily looking for a <code>$</code>, and then capturing everything lazily until the next <code>$</code> is encountered. This is repeated several times via the <code>/g</code> flag. Each capturing group will then have the desired string.</p>\n\n<p><a href=\"https://regex101.com/r/VeQgMa/2\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}, {"comments": [{"owner": {"reputation": 157, "user_id": 11725795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/596d8fdd492c3abf903cd4a1063cf266?s=128&d=identicon&r=PG&f=1", "display_name": "kt-workflow", "link": "https://stackoverflow.com/users/11725795/kt-workflow"}, "edited": false, "score": 0, "creation_date": 1562883329, "post_id": 56982694, "comment_id": 100529720, "body": "This is exactly what was needed, thank you so much!"}], "tags": [], "owner": {"reputation": 91458, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "is_accepted": true, "score": 2, "last_activity_date": 1562825857, "creation_date": 1562825857, "answer_id": 56982694, "question_id": 56980005, "link": "https://stackoverflow.com/questions/56980005/matching-a-substring-between-two-special-characters-excluding-the-characters/56982694#56982694", "title": "Matching a substring between two special characters EXCLUDING the characters", "body": "<p>You could match the first and the second dollar sign and use a capturing group to capture char is in between using a negated character class matching any char except a dollar sign.</p>\n\n<pre><code>\\$([^$]+)\\$\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/YN8xu1/1\" rel=\"nofollow noreferrer\">Regex demo</a></p>\n\n<p>Instead of using match, you could use <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/exec\" rel=\"nofollow noreferrer\">exec</a>. For example:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var str = \"$Hello$, my name is $John$\";\r\nvar regex = /\\$([^$]+)\\$/g;\r\nvar m;\r\nvar test = [];\r\n\r\nwhile ((m = regex.exec(str)) !== null) {\r\n  // This is necessary to avoid infinite loops with zero-width matches\r\n  if (m.index === regex.lastIndex) {\r\n    regex.lastIndex++;\r\n  }\r\n  test.push(m[1]);\r\n}\r\n\r\nconsole.log(test);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 157, "user_id": 11725795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/596d8fdd492c3abf903cd4a1063cf266?s=128&d=identicon&r=PG&f=1", "display_name": "kt-workflow", "link": "https://stackoverflow.com/users/11725795/kt-workflow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 615, "favorite_count": 0, "accepted_answer_id": 56982694, "answer_count": 3, "score": 5, "last_activity_date": 1562825857, "creation_date": 1562802923, "last_edit_date": 1562822647, "question_id": 56980005, "link": "https://stackoverflow.com/questions/56980005/matching-a-substring-between-two-special-characters-excluding-the-characters", "title": "Matching a substring between two special characters EXCLUDING the characters", "body": "<p>So I want to capture the sub-string between two special characters in JavaScript, using regular expressions.\nSay I have the string <code>\"$Hello$, my name is $John$\"</code>, I would want .match to return the array of <code>[Hello, John]</code>. \n*In addition, I do not want to capture the match between two matches. So I wouldn't want to capture $, my name is $, since it is technically between two '$'s. </p>\n\n<p>The regular expression I have used is </p>\n\n<pre><code>var test = str.match(/(?&lt;=\\$)(.*)(?=\\$)/);\n</code></pre>\n\n<p>Which works, but duplicates each entry twice. So it has\n[Hello, Hello, John, John]. \nI have also used <code>var test = str.match(/(?&lt;=\\$)[^\\$]+?(?=\\$)/g)</code>\nBut this returns everything inbetween each match (the example i listed above $, my name is $.)</p>\n\n<p>How can I fix this?</p>\n"}, {"tags": ["javascript"], "comments": [{"owner": {"reputation": 253903, "user_id": 9515207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "CertainPerformance", "link": "https://stackoverflow.com/users/9515207/certainperformance"}, "edited": false, "score": 0, "creation_date": 1562802518, "post_id": 56979953, "comment_id": 100495660, "body": "Can you give a specific example of an input and the expected output?"}, {"owner": {"reputation": 17, "user_id": 11581775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a3f1431171135a886f3b22cace9b353?s=128&d=identicon&r=PG&f=1", "display_name": "georges", "link": "https://stackoverflow.com/users/11581775/georges"}, "reply_to_user": {"reputation": 253903, "user_id": 9515207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "CertainPerformance", "link": "https://stackoverflow.com/users/9515207/certainperformance"}, "edited": false, "score": 0, "creation_date": 1562802562, "post_id": 56979953, "comment_id": 100495667, "body": "how specificicly?? I don&#39;t understand your question."}, {"owner": {"reputation": 38349, "user_id": 10221765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e762fef8d87381d5cbd58d851d1b816?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Bashford", "link": "https://stackoverflow.com/users/10221765/jack-bashford"}, "edited": false, "score": 1, "creation_date": 1562802617, "post_id": 56979953, "comment_id": 100495677, "body": "Give us a sample array, and the expected output of applying your code to that sample array. (what&#39;s <code>this.allJobsNear</code> going to be, and what&#39;s the result going to be?)"}, {"owner": {"reputation": 173187, "user_id": 128165, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cdef5bd2099545a776ee86fb8049bdc6?s=128&d=identicon&r=PG", "display_name": "Gabriele Petrioli", "link": "https://stackoverflow.com/users/128165/gabriele-petrioli"}, "edited": false, "score": 0, "creation_date": 1562802633, "post_id": 56979953, "comment_id": 100495679, "body": "what is <code>applied</code> ?"}, {"owner": {"reputation": 173187, "user_id": 128165, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cdef5bd2099545a776ee86fb8049bdc6?s=128&d=identicon&r=PG", "display_name": "Gabriele Petrioli", "link": "https://stackoverflow.com/users/128165/gabriele-petrioli"}, "edited": false, "score": 1, "creation_date": 1562803019, "post_id": 56979953, "comment_id": 100495749, "body": "also there are syntax errors in the sample code. please post real code and expected behavior."}, {"owner": {"reputation": 17, "user_id": 11581775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a3f1431171135a886f3b22cace9b353?s=128&d=identicon&r=PG&f=1", "display_name": "georges", "link": "https://stackoverflow.com/users/11581775/georges"}, "edited": false, "score": 0, "creation_date": 1562803140, "post_id": 56979953, "comment_id": 100495771, "body": "I&#39;ve added a bit more details to show what I am trying to do."}], "answers": [{"tags": [], "owner": {"reputation": 173187, "user_id": 128165, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cdef5bd2099545a776ee86fb8049bdc6?s=128&d=identicon&r=PG", "display_name": "Gabriele Petrioli", "link": "https://stackoverflow.com/users/128165/gabriele-petrioli"}, "is_accepted": true, "score": 0, "last_activity_date": 1562803804, "creation_date": 1562803804, "answer_id": 56980094, "question_id": 56979953, "link": "https://stackoverflow.com/questions/56979953/how-to-remove-matching-elements-in-an-array/56980094#56980094", "title": "how to remove matching elements in an array?", "body": "<p>What you seem to need is</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const nearButNotApplied = this.allJobsNear.filter(({\n  _id: nearId\n}) =&gt; !this.appliedJobs.some(({\n  _id: appliedId\n}) =&gt; appliedId === nearId));\n</code></pre>\n\n<hr>\n\n<p><strong>Demo</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"true\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const allJobsNear = [{\r\n  _id: 1\r\n}, {\r\n  _id: 2\r\n}, {\r\n  _id: 3\r\n}, {\r\n  _id: 4\r\n}]\r\nconst appliedJobs = [{\r\n  _id: 3\r\n}, {\r\n  _id: 1\r\n}]\r\n\r\nconst nearButNotApplied = allJobsNear.filter(({\r\n  _id: nearId\r\n}) =&gt; !appliedJobs.some(({\r\n  _id: appliedId\r\n}) =&gt; appliedId === nearId));\r\n\r\nconsole.log(nearButNotApplied)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 17, "user_id": 11581775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a3f1431171135a886f3b22cace9b353?s=128&d=identicon&r=PG&f=1", "display_name": "georges", "link": "https://stackoverflow.com/users/11581775/georges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 56980094, "answer_count": 1, "score": -4, "last_activity_date": 1562803804, "creation_date": 1562802449, "last_edit_date": 1562803093, "question_id": 56979953, "link": "https://stackoverflow.com/questions/56979953/how-to-remove-matching-elements-in-an-array", "title": "how to remove matching elements in an array?", "body": "<p>I have developed an app that post jobs that users near you have posted. When you apply to a job, that jobs gets posted in mongodb and loaded in a section of the app, where you can manage your posted,applied and completed jobs. The issues that I have is that, when the job is posted in the applied section, it stills shows in page where you can apply.\nOn page load, an api call gets the applied jobs and the jobs near me. Each job has an id so I saved them in arrays so that I can compare each values from both applied jobs ids and jobs near me ids and if they match then I would remove that specific job from the jobs that are near me using splice. So that jobs that are already have applied to won't show up with jobs that I've not already applied to.</p>\n\n<pre><code> let jobsN = this.allJobsNear;\n let appliedId = [];\n let jobsNearId = [];\n for(let i=0; i&lt;jobsN.length; i++){\n\n   jobsNearId.push(this.allJobsNear[i]._id)\n\n }\n for(let i=0; i&lt;applied.length; i++){\n\n   appliedId.push(this.appliedJobs[i]._id)\n\n }\n console.log(jobsNearId)\n console.log(appliedId)\njobsNearId.filter(el,i)=&gt;{\n  if(el === appliedId[i]){\n    return i;\n  }\n}) \n\n        this.allJobsNear.splice(i,1)\n</code></pre>\n\n<pre><code>\ni is the index, and allJobsNear is an array of objects. So I want to remove all jobs from near me if I've already applied to it.\n\nappliedIds = [1,2,3,4,5,6]\njobsNearMeIds = [9,7,8,1,2,3]\n\nIf jobs near me ids have any id from appliedIds, return its index in jobsnearmeid and remove it.\n</code></pre>\n"}, {"tags": ["javascript", "html", "css", "wordpress", "elementor"], "comments": [{"owner": {"reputation": 3179, "user_id": 7719176, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eMeZRTnTqy4/AAAAAAAAAAI/AAAAAAAAAMU/Hes2rW__THM/photo.jpg?sz=128", "display_name": "Haritsinh Gohil", "link": "https://stackoverflow.com/users/7719176/haritsinh-gohil"}, "edited": false, "score": 0, "creation_date": 1569562111, "post_id": 56979874, "comment_id": 102643894, "body": "i also have same problem but in my case it did not work with <code>gallery</code> element of elementor otherwise the motion effects works ok, i think it has problem with gallery or some of it&#39;s <code>css</code>, i have red in some wordpress question related to this and someone told that it happens because of outer or inner margin/padding."}, {"owner": {"reputation": 1561, "user_id": 3206762, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/kENHO.jpg?s=128&g=1", "display_name": "Omer", "link": "https://stackoverflow.com/users/3206762/omer"}, "edited": false, "score": 0, "creation_date": 1575790410, "post_id": 56979874, "comment_id": 104679059, "body": "I&#39;m also having the same issue ... motion effects are enabled on text divs. On load some elements didn&#39;t showed up unless you resize the browser. I tried to set the effect to none but seems like it keeps applying the effects."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12565321, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/870a8ce96f6ae4b4b01afea8c077986e?s=128&d=identicon&r=PG", "display_name": "xkdhc", "link": "https://stackoverflow.com/users/12565321/xkdhc"}, "is_accepted": false, "score": 0, "last_activity_date": 1576767041, "last_edit_date": 1576767041, "creation_date": 1576761344, "answer_id": 59410548, "question_id": 56979874, "link": "https://stackoverflow.com/questions/56979874/elementor-scrolling-motion-effects-not-working-until-window-resized/59410548#59410548", "title": "Elementor - Scrolling &quot;motion-effects&quot; not working until window resized", "body": "<p>For those who have this issue can try this. </p>\n\n<p>If you're using Windows 10. probably you turned <code>show animations on windows</code> off.\nturn it on from settings <code>display settings</code> in Windows 10.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 14914095, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/8470e7f5f6bd69d2ef83143bbc1788cc?s=128&d=identicon&r=PG", "display_name": "thatsmybrodie", "link": "https://stackoverflow.com/users/14914095/thatsmybrodie"}, "is_accepted": false, "score": 1, "last_activity_date": 1609341360, "creation_date": 1609341360, "answer_id": 65509224, "question_id": 56979874, "link": "https://stackoverflow.com/questions/56979874/elementor-scrolling-motion-effects-not-working-until-window-resized/65509224#65509224", "title": "Elementor - Scrolling &quot;motion-effects&quot; not working until window resized", "body": "<p>Go to Jetpack settings in the Jetpack plugin. Go to the Performance tab. Scroll down the page and disable &quot;lazy loading&quot;</p>\n<p><a href=\"https://i.stack.imgur.com/Wgo4Z.png\" rel=\"nofollow noreferrer\">Image of disabled &quot;lazy loading&quot; in the Jetpack plugin.</a></p>\n"}, {"tags": [], "owner": {"reputation": 4029, "user_id": 10319988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6bkr.png?s=128&g=1", "display_name": "omanosoft", "link": "https://stackoverflow.com/users/10319988/omanosoft"}, "is_accepted": false, "score": 0, "last_activity_date": 1610183546, "creation_date": 1610183546, "answer_id": 65640984, "question_id": 56979874, "link": "https://stackoverflow.com/questions/56979874/elementor-scrolling-motion-effects-not-working-until-window-resized/65640984#65640984", "title": "Elementor - Scrolling &quot;motion-effects&quot; not working until window resized", "body": "<p>Find your Elementor's css file frontend.min.css and delete this part of css:</p>\n<pre><code>@media (prefers-reduced-motion:reduce) {\n    .animated {\n        -webkit-animation: none;\n        animation: none\n    }\n}\n</code></pre>\n<p>This part of css tells browsers to disable animation if operating system prefers reduced motion, so deleting this part of css will force animation to show on all OSs. If you want to keep this part of css and want to show it on some PCs you want, then you can turn animation in settings on that PCs - to turn ON animation on Windows 10 go to Settings &gt; Ease of Access &gt; Display &gt; Simplify and Personalise Windows then turn on Show Animations in Windows.</p>\n"}], "owner": {"reputation": 11, "user_id": 11767412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9f943803c2977ac001f27a1c224b97b?s=128&d=identicon&r=PG&f=1", "display_name": "Rory Dwyer", "link": "https://stackoverflow.com/users/11767412/rory-dwyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1340, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1610183546, "creation_date": 1562801742, "last_edit_date": 1562803426, "question_id": 56979874, "link": "https://stackoverflow.com/questions/56979874/elementor-scrolling-motion-effects-not-working-until-window-resized", "title": "Elementor - Scrolling &quot;motion-effects&quot; not working until window resized", "body": "<p>I have scrolling effects on certain images, some enlarge, use horizontal, vertical scrolling, and a few other effects. The scrolling motion does not get initialized unless one of two things happen: 1) The browser window is resized (width or height). 2) You visit the page again or it's refreshed. This is happening in all browsers.</p>\n\n<p><strong>Edit:</strong> Some of the scrolling effects seem to be initialized, but trigger before it's in the viewport (Hence why you can't see it).</p>\n\n<p><strong>Video of example:</strong></p>\n\n<ul>\n<li>How to replicate: <a href=\"https://www.youtube.com/watch?v=U9vlteH691U\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=U9vlteH691U</a></li>\n<li>Example 1: <a href=\"https://www.youtube.com/watch?v=a9YGIkgRF_Q\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=a9YGIkgRF_Q</a></li>\n<li>Example 2: <a href=\"https://www.youtube.com/watch?v=JgSKObKfVOU\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=JgSKObKfVOU</a></li>\n</ul>\n\n<p><strong>NOTE:</strong> You must visit the page with an incognito page if you wish to replicate the issue multiple time. If it starts working again, try a new browser or a new tab. </p>\n\n<p><strong>Page URLs with affected scrolling (Most sections are under the \"Web Design\"):</strong></p>\n\n<p><a href=\"https://rory-dwyer.com/hk-electrical-engineers/\" rel=\"nofollow noreferrer\">https://rory-dwyer.com/hk-electrical-engineers/</a>\n-Section with Laptop, Phone and site screenshot</p>\n\n<p><a href=\"https://rory-dwyer.com/simpliii/\" rel=\"nofollow noreferrer\">https://rory-dwyer.com/simpliii/</a>\n- In between Branding Elements and the Video</p>\n\n<p><a href=\"https://rory-dwyer.com/bridge-city-ballroom-dance/\" rel=\"nofollow noreferrer\">https://rory-dwyer.com/bridge-city-ballroom-dance/</a>\n- Phone entrance animation, site screenshots</p>\n\n<p><a href=\"https://rory-dwyer.com/jgarloff-design/\" rel=\"nofollow noreferrer\">https://rory-dwyer.com/jgarloff-design/</a>\n- Computer, phone and site screenshots</p>\n\n<p><a href=\"https://rory-dwyer.com/apo11o/\" rel=\"nofollow noreferrer\">https://rory-dwyer.com/apo11o/</a>\n- Phones under Web Design</p>\n\n<p><strong>Things that I've tried:</strong></p>\n\n<ul>\n<li>Disabling all plugins</li>\n<li>Using stock theme</li>\n<li>Disabling header and footer script injection</li>\n<li>Removing Elementor Nav and Footer sections</li>\n<li>Search and replace http -> https</li>\n<li>Rebuild the page from scratch (using a page template made in Elementor)</li>\n<li>Rolling back Elementor version</li>\n<li>Rebuilding the site from scratch on a live server (from start) rather than local env</li>\n<li>Disabling all global templates</li>\n<li>Removing all custom CSS and JS</li>\n</ul>\n"}, {"tags": ["javascript", "jquery"], "comments": [{"owner": {"reputation": 6833, "user_id": 240564, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/U17en.png?s=128&g=1", "display_name": "Alexan", "link": "https://stackoverflow.com/users/240564/alexan"}, "edited": false, "score": 0, "creation_date": 1562804955, "post_id": 56979872, "comment_id": 100496148, "body": "<a href=\"https://stackoverflow.com/a/55436922/240564\">stackoverflow.com/a/55436922/240564</a>"}], "answers": [{"tags": [], "owner": {"reputation": 43836, "user_id": 5947043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jUK37.png?s=128&g=1", "display_name": "ADyson", "link": "https://stackoverflow.com/users/5947043/adyson"}, "is_accepted": true, "score": 0, "last_activity_date": 1562803131, "creation_date": 1562803131, "answer_id": 56980029, "question_id": 56979872, "link": "https://stackoverflow.com/questions/56979872/writing-wikipedia-api-search-results-to-the-page/56980029#56980029", "title": "Writing Wikipedia API search results to the page", "body": "<p>The reason you see <code>[Object object]</code> is precisely because you're trying to output a complex object to the screen. Clearly you need to output the items within it. You can't just dump the whole object because JavaScript has no idea how you want it to appear.</p>\n\n<p><code>output</code> in your code is an array (we can see that from the console log). So you need to loop through the array, and for each entry, print the desired properties. The objects within the results don't seem to have a URL (as you mentioned) but they do have a title and snippet.</p>\n\n<p>Demo (I also refactored your code a little to make it neater):</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>$(\"#searchButton\").click(function() {\r\n  search($(\"#searchInput\").val());\r\n});\r\n\r\nfunction search(searchText) {\r\n\r\n  var searchText = searchText.trim().toLowerCase();\r\n\r\n  var url = \"https://en.wikipedia.org/w/api.php?action=query&amp;format=json&amp;prop=links&amp;list=search&amp;srsearch=\" + searchText + \"&amp;srnamespace=0&amp;srinfo=&amp;srprop=snippet%7Ctitlesnippet&amp;callback=?\"\r\n  $.getJSON(url, function(data) {\r\n\r\n    var output = data.query.search;\r\n\r\n    for (i = 0; i &lt; output.length; i++) {\r\n      display.innerHTML += \"&lt;li&gt;\" + output[i].title + \" - \" + output[i].snippet + \"&lt;/li&gt;\";\r\n    }\r\n  });\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;h1&gt;Wikipedia Search&lt;/h1&gt;\r\n&lt;input type=\"search\" id=\"searchInput\"&gt;\r\n&lt;br&gt;\r\n&lt;input type=\"button\" id=\"searchButton\" value=\"Search\"&gt;\r\n&lt;br&gt;\r\n&lt;ul id=\"display\"&gt;&lt;/ul&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 3, "user_id": 11767362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fecd3cac8a22f78ae0db2c97d47c590c?s=128&d=identicon&r=PG&f=1", "display_name": "magoo", "link": "https://stackoverflow.com/users/11767362/magoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 56980029, "answer_count": 1, "score": 0, "last_activity_date": 1562803131, "creation_date": 1562801715, "question_id": 56979872, "link": "https://stackoverflow.com/questions/56979872/writing-wikipedia-api-search-results-to-the-page", "title": "Writing Wikipedia API search results to the page", "body": "<p>I'm trying to implement the Wikipedia Search API and write the results to the page. (They show up in the console.)</p>\n\n<p>I've tried a for loop through \"data.query.search.title\". I tried \"JSON.stringify(data, null, 2)\" but that's not what I was looking for.</p>\n\n<p>Here is a JSFiddle:</p>\n\n<p><a href=\"https://jsfiddle.net/magoo/s8t5qb3u/4/\" rel=\"nofollow noreferrer\">https://jsfiddle.net/magoo/s8t5qb3u/4/</a></p>\n\n<pre><code>'''function search(event) {\n\n  event.preventDefault();\n\n  var input = document.getElementById('searchInput'). value;\n  var searchText = input.trim().toLowerCase();\n\nvar url = \"https://en.wikipedia.org/w/api.php?action=query&amp;format=json&amp;prop=links&amp;list=search&amp;srsearch=\" + searchText + \"&amp;srnamespace=0&amp;srinfo=&amp;srprop=snippet%7Ctitlesnippet&amp;callback=?\"\n$.getJSON (url, function(data) {\n\nvar output = data.query.search;\n\ndisplay.innerHTML = output;\nconsole.log(output);\n\n})}\n\n '''\n</code></pre>\n\n<p>The console shows multiple objects. The page shows [Object object] repeated multiple times.</p>\n\n<p>My hope is to get the title, snippet, and URL.</p>\n\n<p>Hope I did this post correctly. Thanks in advance.</p>\n"}, {"tags": ["javascript", "node.js", "angular", "typescript"], "answers": [{"comments": [{"owner": {"reputation": 1094, "user_id": 6476538, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/57a0a6f8522ed7e4bb4f4af3dd4d23a2?s=128&d=identicon&r=PG", "display_name": "Bigeyes", "link": "https://stackoverflow.com/users/6476538/bigeyes"}, "edited": false, "score": 0, "creation_date": 1562804513, "post_id": 56979928, "comment_id": 100496053, "body": "<code>return this.functionOne().then(this.functionTwo)</code> or <code>return this.functionOne().then(this.functionTwo())</code>? Do we need add <code>()</code> at the end of <code>functionTwo</code>?"}, {"owner": {"reputation": 92307, "user_id": 167735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5deb8de031f80c23f19e9b6d389e5afe?s=128&d=identicon&r=PG", "display_name": "slebetman", "link": "https://stackoverflow.com/users/167735/slebetman"}, "reply_to_user": {"reputation": 1094, "user_id": 6476538, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/57a0a6f8522ed7e4bb4f4af3dd4d23a2?s=128&d=identicon&r=PG", "display_name": "Bigeyes", "link": "https://stackoverflow.com/users/6476538/bigeyes"}, "edited": false, "score": 0, "creation_date": 1562805382, "post_id": 56979928, "comment_id": 100496218, "body": "@Bigeyes you have two choices: <code>return this.functionOne().then(this.functionTwo.bind(this))</code> or <code>return this.functionOne().then(() =&gt; this.functionTwo())</code>. Your version won&#39;t work as you expect"}, {"owner": {"reputation": 1094, "user_id": 6476538, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/57a0a6f8522ed7e4bb4f4af3dd4d23a2?s=128&d=identicon&r=PG", "display_name": "Bigeyes", "link": "https://stackoverflow.com/users/6476538/bigeyes"}, "edited": false, "score": 0, "creation_date": 1562805988, "post_id": 56979928, "comment_id": 100496316, "body": "But I guess something wrong...in <code>private asyncServiceCall()</code>, <code>this.functionOne().then(()=&gt;this.functionTwo());    }</code> is grayed. The compiler complains Unreachable code detected."}, {"owner": {"reputation": 162920, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "reply_to_user": {"reputation": 1094, "user_id": 6476538, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/57a0a6f8522ed7e4bb4f4af3dd4d23a2?s=128&d=identicon&r=PG", "display_name": "Bigeyes", "link": "https://stackoverflow.com/users/6476538/bigeyes"}, "edited": false, "score": 0, "creation_date": 1562806359, "post_id": 56979928, "comment_id": 100496383, "body": "@Bigeyes must be unreachable somewhere down in those other functions"}, {"owner": {"reputation": 1094, "user_id": 6476538, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/57a0a6f8522ed7e4bb4f4af3dd4d23a2?s=128&d=identicon&r=PG", "display_name": "Bigeyes", "link": "https://stackoverflow.com/users/6476538/bigeyes"}, "edited": false, "score": 0, "creation_date": 1562849619, "post_id": 56979928, "comment_id": 100513961, "body": "Still not working. The third function is always running before the others. Perhaps I need to change it as promise as well"}], "tags": [], "owner": {"reputation": 162920, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "is_accepted": true, "score": 1, "last_activity_date": 1562805725, "last_edit_date": 1562805725, "creation_date": 1562802306, "answer_id": 56979928, "question_id": 56979868, "link": "https://stackoverflow.com/questions/56979868/mix-synchronous-and-asynchronous-by-promise-then-is-not-working/56979928#56979928", "title": "Mix synchronous and asynchronous by Promise.then is not working", "body": "<p>You are missing an important part of calling promises inside <code>then()</code> ... you need to <code>return</code> those promises or the <code>then()</code> will resolve immediately and go to the next then() in the chain. That's why functionThree is firing before the asynchronous promise functions resolve</p>\n\n<pre><code>private loadingData() {\n   var promise = new Promise&lt;any&gt;((resolve) =&gt; \n   {\n       resolve();\n   });\n   promise.then(() =&gt; {\n      // return the promise this function returns\n      return this.asyncServiceCall();\n     // ^^^^\n   })\n    // this then() won't fire until asyncServiceCall resolves in previous then()\n   .then((resultFromPriorThen) =&gt; this.syncFunctionThree())\n}\n</code></pre>\n\n<hr>\n\n<p>Now you don't really need this first promise in <code>loadingData()</code> because you already have a promise to work with returned by <code>asyncServiceCall()</code> and can simplify it to:</p>\n\n<pre><code>private loadingData(): Promise&lt;any&gt; {      \n   return this.asyncServiceCall().then(()=&gt;this.syncFunctionThree());\n}\n</code></pre>\n\n<p>Now to fix <code>asyncServiceCall()</code> the same way:</p>\n\n<pre><code>private asyncServiceCall(): Promise&lt;any&gt; {   \n   return this.functionOne().then(()=&gt;this.functionTwo());   \n}\n</code></pre>\n\n<hr>\n\n<p>Final note: Need to add  a <code>catch()</code> in <code>loadingData()</code> in case one of the asynchronous operations has a problem</p>\n"}, {"tags": [], "owner": {"reputation": 821, "user_id": 1150810, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/34878798aa5ee197ea4ea680dbfbf38e?s=128&d=identicon&r=PG", "display_name": "udnisap", "link": "https://stackoverflow.com/users/1150810/udnisap"}, "is_accepted": false, "score": 1, "last_activity_date": 1562804058, "creation_date": 1562804058, "answer_id": 56980122, "question_id": 56979868, "link": "https://stackoverflow.com/questions/56979868/mix-synchronous-and-asynchronous-by-promise-then-is-not-working/56980122#56980122", "title": "Mix synchronous and asynchronous by Promise.then is not working", "body": "<pre><code>private functionOne() {\n   return new Promise((resolve) =&gt; {\n    this.service['user'].get().subscribe(resolve);\n  });\n}\n\nprivate functionTwo() {\n   return new Promise((resolve) =&gt; {\n    this.service['name'].get().subscribe(resolve);\n  });\n}\n\nprivate loadingData() {\n   Promise.all([functionOne(), functionTwo()]).then(([user, name]) =&gt; {\n      this.user['d'] = user;\n      this.name['d'] = name;\n   }).then(() =&gt; this.syncFunctionThree())\n};\n</code></pre>\n\n<p>By looking at the method signature if the <code>this.service['user'].get()</code> is an rx observable. you can use <code>this.service['user'].get().toPromise()</code> to get the promise directly. if the <code>this.service['user'].get()</code> has multiple values try <code>this.service['user'].get().pipe(first())</code> instead</p>\n"}], "owner": {"reputation": 1094, "user_id": 6476538, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/57a0a6f8522ed7e4bb4f4af3dd4d23a2?s=128&d=identicon&r=PG", "display_name": "Bigeyes", "link": "https://stackoverflow.com/users/6476538/bigeyes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 56979928, "answer_count": 2, "score": 0, "last_activity_date": 1562806766, "creation_date": 1562801706, "last_edit_date": 1562806766, "question_id": 56979868, "link": "https://stackoverflow.com/questions/56979868/mix-synchronous-and-asynchronous-by-promise-then-is-not-working", "title": "Mix synchronous and asynchronous by Promise.then is not working", "body": "<p>Here is my code:</p>\n\n<pre><code>private loadingData() {\n   var promise = new Promise&lt;any&gt;((resolve) =&gt; \n   {\n       resolve();\n   });\n   promise.then(() =&gt; {\n       this.asyncServiceCall();\n   })\n   .then(() =&gt; this.syncFunctionThree())\n};\n</code></pre>\n\n<p>The asynchronous method <code>asyncServiceCall</code> actually returns a Promise.</p>\n\n<pre><code>private asyncServiceCall(): Promise&lt;any&gt; {\n    return new Promise((resolve) = &gt; {\n        resolve();\n    }).then(() =&gt; {\n       this.functionOne()\n       })\n      .then(() =&gt; {\n       this.functionTwo();\n    });\n}\n</code></pre>\n\n<p>Okay, let's look at <code>functionOne</code> and <code>functionTwo</code>. They are both returning Promise.</p>\n\n<pre><code>private functionOne() {\n   return new Promise((resolve) =&gt; {\n    this.user['load'] = true;\n    this.service['user'].get().subscribe(d =&gt; \n  {\n     this.user['d'] = d;\n  },\n  error =&gt; console.error(error),\n  () =&gt; {\n     this.role['load']=false;\n   });\n  resolve();\n});\n}\n\nprivate functionTwo() {\n   return new Promise((resolve) =&gt; {\n    this.service['name'].get().subscribe(d =&gt; \n  {\n     this.name['d'] = d;\n  },\n  resolve();\n});\n}\n</code></pre>\n\n<p>The third method <code>syncFunctionThree</code> will use the data <code>this.user['d']</code> and <code>this.name['d']</code> to have some business logic. So I want to call <code>functionOne</code> and <code>functionTwo</code> first then call <code>syncFunctionThree</code>.</p>\n\n<p>By <a href=\"https://stackoverflow.com/questions/38796828/should-synchronous-code-called-by-promise-then-create-a-new-promise\">the accepted answer without creating new Promise</a>, I don't get lucky. I found that the \n<code>syncFunctionThree</code> was called before the asynchronous methods.</p>\n\n<p>So help me.</p>\n"}, {"tags": ["javascript"], "comments": [{"owner": {"reputation": 182833, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "edited": false, "score": 0, "creation_date": 1562801627, "post_id": 56979839, "comment_id": 100495523, "body": "<b>No</b>. Best you can do is <code>var v = document.getElementById(&#39;TheId&#39;).value;</code> and then <code>if (v == 5 || v == 6)</code>. Also, JavaScript is <b>not</b> Java or PHP."}, {"owner": {"reputation": 21, "user_id": 9312149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af24c7dc33d53d52c088b1d9ac16d301?s=128&d=identicon&r=PG", "display_name": "Almodoen", "link": "https://stackoverflow.com/users/9312149/almodoen"}, "reply_to_user": {"reputation": 182833, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "edited": false, "score": 0, "creation_date": 1562801693, "post_id": 56979839, "comment_id": 100495535, "body": "@ElliottFrisch yeah i know , but it&#39;s the same idea for all lanuages .."}, {"owner": {"reputation": 321906, "user_id": 992484, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/K1mTV.jpg?s=128&g=1", "display_name": "MadProgrammer", "link": "https://stackoverflow.com/users/992484/madprogrammer"}, "edited": false, "score": 0, "creation_date": 1562802029, "post_id": 56979839, "comment_id": 100495583, "body": "Every language is different, that&#39;s kind of the point, however, they do tend to follow C like conventions, especially when it comes to doing <code>if</code> style statements (not always, but you get the idea).  In Java, each comparison must evaluate to true or false, which requires that each statement must be inherently comparable, which is where the complexity comes in, how do you adopt this to things like <code>String</code> or <code>Object</code>?"}, {"owner": {"reputation": 321906, "user_id": 992484, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/K1mTV.jpg?s=128&g=1", "display_name": "MadProgrammer", "link": "https://stackoverflow.com/users/992484/madprogrammer"}, "edited": false, "score": 0, "creation_date": 1562802051, "post_id": 56979839, "comment_id": 100495585, "body": "You&#39;re also asking a broad spectrum question about language design that only the original authors would have any hope of answering, but I would suspect that the answer would generally be the same, because it was the easiest solution to implement which covered the largest possible range of use-cases ... of course, now we&#39;re venturing into &quot;opinion&quot; ;)"}], "answers": [{"tags": [], "owner": {"reputation": 253903, "user_id": 9515207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "CertainPerformance", "link": "https://stackoverflow.com/users/9515207/certainperformance"}, "is_accepted": false, "score": 1, "last_activity_date": 1562802068, "last_edit_date": 1562802068, "creation_date": 1562801649, "answer_id": 56979861, "question_id": 56979839, "link": "https://stackoverflow.com/questions/56979839/if-statement-many-values-check-for-same-source-without-repeated-source/56979861#56979861", "title": "if statement many values check for same source, without repeated source", "body": "<p>The condition <em>can</em> be written easily like that, you just have to extract the value to another variable first. Also, since <code>.value</code> returns a <em>string</em>, you probably want to cast it to a number first, just so that nothing unexpected occurs:</p>\n\n<pre><code>const value = Number(document.getElementById('TheId'));\nif (value &gt;= 5 &amp;&amp; value &lt;= 6) {\n  // do something\n}\n</code></pre>\n\n<p>If you wanted to put it all inside the <code>if</code> parentheses, you <em>could</em>, but it would look <em>really ugly</em>, since you'd have to use the unintuitive comma operator:</p>\n\n<pre><code>if ((value = Number(document.getElementById('TheId')), (value &gt;= 5 &amp;&amp; value &lt;= 6)) {\n  // do something\n}\n</code></pre>\n\n<p>(much better to put the value into a variable beforehand)</p>\n\n<p>I suppose another method would be to define two functions for testing the value, and check that <code>every</code>one of the functions passes when passed the value:</p>\n\n<pre><code>if (\n  [val =&gt; val &gt;= 5, val =&gt; val &lt;= 6]\n    .every(\n      test =&gt; test(Number(document.getElementById('TheId'))\n    )\n  )\n{\n  // do something\n}\n</code></pre>\n\n<p>But putting the value into a variable beforehand makes much more sense.</p>\n"}], "owner": {"reputation": 21, "user_id": 9312149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af24c7dc33d53d52c088b1d9ac16d301?s=128&d=identicon&r=PG", "display_name": "Almodoen", "link": "https://stackoverflow.com/users/9312149/almodoen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562802068, "creation_date": 1562801545, "last_edit_date": 1562801798, "question_id": 56979839, "link": "https://stackoverflow.com/questions/56979839/if-statement-many-values-check-for-same-source-without-repeated-source", "title": "if statement many values check for same source, without repeated source", "body": "<pre><code>if(document.getElementById('TheId').value (&gt;=5 &amp;&amp; &lt;=6))\n{\n//code here\n}\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>if(document.getElementById('TheId').value &gt;=5 &amp;&amp; document.getElementById('TheId').value &lt;=6)\n{\n//code here\n}\n</code></pre>\n\n<p>can this work ?! , and why not they make the condition easy like this because it points to the same source , any information ?</p>\n"}, {"tags": ["javascript", "node.js", "reactjs"], "comments": [{"owner": {"reputation": 4109, "user_id": 8852158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e61e252222cd7491e584b8a032330785?s=128&d=identicon&r=PG&f=1", "display_name": "helloitsjoe", "link": "https://stackoverflow.com/users/8852158/helloitsjoe"}, "edited": false, "score": 1, "creation_date": 1562801710, "post_id": 56979775, "comment_id": 100495538, "body": "Is the error in your browser, or in the terminal where your server is running? One thing is that your POST call is pointing to <code>&#39;http:&#47;&#47;localhost8080&#47;api&#47;images&#39;</code>, I think you want <code>&#39;http:&#47;&#47;localhost:8080&#47;api&#47;images&#39;</code> (colon between <code>localhost</code> and the port)"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11767359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13ec4c700176c40d49e07fc99a28b49b?s=128&d=identicon&r=PG&f=1", "display_name": "beees92", "link": "https://stackoverflow.com/users/11767359/beees92"}, "edited": false, "score": 0, "creation_date": 1562882931, "post_id": 56981084, "comment_id": 100529605, "body": "Thanks, that did get rid of the 404, but now I have a 500 error. Any idea why?"}, {"owner": {"reputation": 4109, "user_id": 8852158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e61e252222cd7491e584b8a032330785?s=128&d=identicon&r=PG&f=1", "display_name": "helloitsjoe", "link": "https://stackoverflow.com/users/8852158/helloitsjoe"}, "reply_to_user": {"reputation": 13, "user_id": 11767359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13ec4c700176c40d49e07fc99a28b49b?s=128&d=identicon&r=PG&f=1", "display_name": "beees92", "link": "https://stackoverflow.com/users/11767359/beees92"}, "edited": false, "score": 0, "creation_date": 1562898873, "post_id": 56981084, "comment_id": 100532399, "body": "What&#39;s the error? 500 error means something went wrong on the server, so it&#39;s likely hitting the endpoint but something&#39;s going wrong in the <code>post</code> handler."}, {"owner": {"reputation": 13, "user_id": 11767359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13ec4c700176c40d49e07fc99a28b49b?s=128&d=identicon&r=PG&f=1", "display_name": "beees92", "link": "https://stackoverflow.com/users/11767359/beees92"}, "edited": false, "score": 0, "creation_date": 1562899212, "post_id": 56981084, "comment_id": 100532449, "body": "It says: POST <a href=\"http://localhost:8080/api/images\" rel=\"nofollow noreferrer\">localhost:8080/api/images</a> 500 (Internal Server Error), followed by: Uncaught (in promise) Error: Request failed with status code 500"}, {"owner": {"reputation": 4109, "user_id": 8852158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e61e252222cd7491e584b8a032330785?s=128&d=identicon&r=PG&f=1", "display_name": "helloitsjoe", "link": "https://stackoverflow.com/users/8852158/helloitsjoe"}, "reply_to_user": {"reputation": 13, "user_id": 11767359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13ec4c700176c40d49e07fc99a28b49b?s=128&d=identicon&r=PG&f=1", "display_name": "beees92", "link": "https://stackoverflow.com/users/11767359/beees92"}, "edited": false, "score": 0, "creation_date": 1562899783, "post_id": 56981084, "comment_id": 100532547, "body": "It sounds like an error in the <code>post</code> route you have in your description. You should be seeing error logs in your console where you&#39;re running the server, those might give you a better idea of what&#39;s going wrong. If not, put some more logs in until you narrow down the problem. The client-side error won&#39;t be uncaught if you add a <code>.catch</code> after the <code>axios.post(...).then(...)</code>"}, {"owner": {"reputation": 13, "user_id": 11767359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13ec4c700176c40d49e07fc99a28b49b?s=128&d=identicon&r=PG&f=1", "display_name": "beees92", "link": "https://stackoverflow.com/users/11767359/beees92"}, "edited": false, "score": 0, "creation_date": 1562963407, "post_id": 56981084, "comment_id": 100559451, "body": "Thank you, it was in the <code>post</code> route. I had the <code>fd.append{&#39;photo&#39;</code> when it should have been <code>fd.append{&#39;imageField&#39;</code>. It works fine now."}, {"owner": {"reputation": 4109, "user_id": 8852158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e61e252222cd7491e584b8a032330785?s=128&d=identicon&r=PG&f=1", "display_name": "helloitsjoe", "link": "https://stackoverflow.com/users/8852158/helloitsjoe"}, "reply_to_user": {"reputation": 13, "user_id": 11767359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13ec4c700176c40d49e07fc99a28b49b?s=128&d=identicon&r=PG&f=1", "display_name": "beees92", "link": "https://stackoverflow.com/users/11767359/beees92"}, "edited": false, "score": 0, "creation_date": 1562980837, "post_id": 56981084, "comment_id": 100562662, "body": "Good! Glad I could help!"}], "tags": [], "owner": {"reputation": 4109, "user_id": 8852158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e61e252222cd7491e584b8a032330785?s=128&d=identicon&r=PG&f=1", "display_name": "helloitsjoe", "link": "https://stackoverflow.com/users/8852158/helloitsjoe"}, "is_accepted": true, "score": 0, "last_activity_date": 1562814242, "creation_date": 1562814242, "answer_id": 56981084, "question_id": 56979775, "link": "https://stackoverflow.com/questions/56979775/how-to-resolve-404-error-when-making-an-image-uploaded-with-reactjs-and-nodejs/56981084#56981084", "title": "How to resolve 404 error when making an image uploaded with reactjs and nodejs?", "body": "<p>You should include a colon between <code>localhost</code> and the port (Should be <code>localhost:8080</code>, not <code>localhost8080</code>)</p>\n"}], "owner": {"reputation": 13, "user_id": 11767359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13ec4c700176c40d49e07fc99a28b49b?s=128&d=identicon&r=PG&f=1", "display_name": "beees92", "link": "https://stackoverflow.com/users/11767359/beees92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 939, "favorite_count": 0, "accepted_answer_id": 56981084, "answer_count": 1, "score": 1, "last_activity_date": 1562883243, "creation_date": 1562800825, "last_edit_date": 1562883243, "question_id": 56979775, "link": "https://stackoverflow.com/questions/56979775/how-to-resolve-404-error-when-making-an-image-uploaded-with-reactjs-and-nodejs", "title": "How to resolve 404 error when making an image uploaded with reactjs and nodejs?", "body": "<p>I'm new to programming and I'm trying to set up an image uploader for my web app. I'm using node.js for the backend and react.js for the front end with mongodb as well. The problem is I'm getting a 404 ERR_NAME_NOT_RESOLVED whenever I try to upload the image. </p>\n\n<p>I've tried a few things like changing the router name for the axios.post in react to no avail. I'm not sure what else to do at this point. </p>\n\n<p>What I think is the relevant code is here: </p>\n\n<p>react (upload-page.js):</p>\n\n<pre><code>fileUploadHandler = () =&gt; {\n    const fd = new FormData(); \n    fd.append('photo', this.state.selectedFile, this.state.selectedFile.name); \n    axios.post('http://localhost8080/api/images', fd, {\n      onUploadProgress: progressEvent =&gt; {\n        console.log('Upload Progress:' + Math.round(progressEvent.loaded / progressEvent.total* 100) + '%')\n      }\n    })\n      .then(res =&gt; {\n        console.log(res); \n      });\n    }\n</code></pre>\n\n<p>server.js:</p>\n\n<pre><code>app.use('/api/users/', usersRouter);\napp.use('/api/auth/', authRouter);\napp.use('/api/images/', uploadRouter);\n</code></pre>\n\n<p>router.js:</p>\n\n<pre><code>'use strict';\n\nconst express = require('express');\nconst multer = require('multer');\nconst upload = multer({dest: __dirname + '/uploads/images', storage: multer.memoryStorage() });\nconst Image = require('./models');\n\nconst router = express.Router(); \n\n//app.use(express.static('public'));\n\nrouter.post('/', upload.single('imageField'), (req, res) =&gt; {\n    if(req.file) {\n        console.error(req.file);\n        const i = new Image({\n            data: req.file.buffer\n        });\n        i.save().then(() =&gt; {\n            return res.status(201).json({\n                id: i._id\n            });\n        }).catch(e =&gt; {\n            console.error(e);\n            return res.status(500).json({ message: 'error: ' + e.message})\n        });\n    }\n    else {\n        throw 'error';\n    }\n});\n\nmodule.exports = router ; \n</code></pre>\n\n<p>Full code can be found at these repos: \nBackend: <a href=\"https://github.com/beccaww/cats\" rel=\"nofollow noreferrer\">https://github.com/beccaww/cats</a>\nFrontend: <a href=\"https://github.com/beccaww/cats-client\" rel=\"nofollow noreferrer\">https://github.com/beccaww/cats-client</a></p>\n\n<p>I expect it to upload the image into the /images/uploads/images on the backend but it just gives me a 404 ERR_NAME_NOT_RESOLVED message instead. Any idea what might be going wrong?</p>\n\n<p>Edit: </p>\n\n<p>Okay, I fixed the <code>axios.post('http://localhost:8080/api/images', fd, {</code>, but now I'm getting a 500 error that says: POST <a href=\"http://localhost:8080/api/images\" rel=\"nofollow noreferrer\">http://localhost:8080/api/images</a> 500 (Internal Server Error), followed by: Uncaught (in promise) Error: Request failed with status code 500. Any idea what might be causing this? </p>\n"}, {"tags": ["javascript", "html", "loops"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user11744452"}, "edited": false, "score": 0, "creation_date": 1562802602, "post_id": 56979952, "comment_id": 100495671, "body": "Thx. Seems I should repeat that with a <code>window.setInterval</code> for some 30 seconds (and than cancel it somehow) to get the maximal amount of content in each list."}, {"owner": {"reputation": 173187, "user_id": 128165, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cdef5bd2099545a776ee86fb8049bdc6?s=128&d=identicon&r=PG", "display_name": "Gabriele Petrioli", "link": "https://stackoverflow.com/users/128165/gabriele-petrioli"}, "edited": false, "score": 0, "creation_date": 1562802776, "post_id": 56979952, "comment_id": 100495700, "body": "this should scroll directly all elements all the way. Unless the elements are not yet populated or unless the scroll triggers js scripts that will modify the page and create more scrollable space."}], "tags": [], "owner": {"reputation": 173187, "user_id": 128165, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cdef5bd2099545a776ee86fb8049bdc6?s=128&d=identicon&r=PG", "display_name": "Gabriele Petrioli", "link": "https://stackoverflow.com/users/128165/gabriele-petrioli"}, "is_accepted": true, "score": 0, "last_activity_date": 1562802448, "creation_date": 1562802448, "answer_id": 56979952, "question_id": 56979773, "link": "https://stackoverflow.com/questions/56979773/scroll-down-all-vertical-scrollable-bars-whatsoever-with-vanilla-javascript/56979952#56979952", "title": "Scroll down all (vertical) scrollable bars whatsoever with vanilla JavaScript", "body": "<p>You are pretty close.</p>\n\n<p>You just need to use each element's <code>scrollHeight</code> instead of always using the body's.</p>\n\n<pre><code>const [...elements] = document.getElementsByTagName(\"*\");\nelements.forEach((element) =&gt; {\n    element.scrollTo(0,element.scrollHeight)\n});\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11744452"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 56979952, "answer_count": 1, "score": 0, "last_activity_date": 1562802448, "creation_date": 1562800806, "question_id": 56979773, "link": "https://stackoverflow.com/questions/56979773/scroll-down-all-vertical-scrollable-bars-whatsoever-with-vanilla-javascript", "title": "Scroll down all (vertical) scrollable bars whatsoever with vanilla JavaScript", "body": "<p>In latest Chrome I would like to automatically scroll down all scrollable items lists in webpage.<br>\nInstead scrolling down the <em>scrolling item</em> inside the <em>scrolling item container</em> until the <em>downmost tip</em> to expose more items (and repeat this action in each scrollable list to expose all items in it), I'd like to run a vanilla JavaScript function to maximally scroll down everything for me until the <em>downmost tip</em>.</p>\n\n<p>These seem to me methods one should consider:</p>\n\n<p><strong>1)</strong> <code>window.scrollBy(0,500);</code><br>\n<strong>2)</strong> <code>window.scrollTo(0,document.body.scrollHeight);</code><br>\n<strong>3)</strong> <code>element.scrollIntoView();</code><br></p>\n\n<h2>I tried:</h2>\n\n<pre><code>const [...elements] = document.getElementsByTagName(\"*\");\nelements.forEach((element) =&gt; {\n    element.scrollTo(0,document.body.scrollHeight)\n});\n</code></pre>\n\n<blockquote>\n  <p>undefined</p>\n</blockquote>\n\n<p>and:</p>\n\n<pre><code>const [...elements] = document.getElementsByTagName(\"*\");\nelements.forEach((element) =&gt; {\n    element.scrollIntoView();\n});\n</code></pre>\n\n<blockquote>\n  <p>undefined</p>\n</blockquote>\n\n<p>How can one loop through all (vertical) scrollable bars whatsoever and automatically and maximally scroll down all of them, at once, with vanilla JavaScript?</p>\n"}, {"tags": ["javascript", "typescript", "google-maps", "google-maps-api-3"], "answers": [{"comments": [{"owner": {"reputation": 19805, "user_id": 1238965, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/9tqVh.jpg?s=128&g=1", "display_name": "MrUpsidown", "link": "https://stackoverflow.com/users/1238965/mrupsidown"}, "edited": false, "score": 1, "creation_date": 1562833677, "post_id": 56979690, "comment_id": 100504514, "body": "You should check the issue tracker for an existing bug or file your own if you don&#39;t find one: <a href=\"https://issuetracker.google.com/issues?q=componentid:188853\" rel=\"nofollow noreferrer\">issuetracker.google.com/issues?q=componentid:188853</a>"}], "tags": [], "owner": {"reputation": 2050, "user_id": 319066, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b9159532a572c80a3be9e85d75c9af1f?s=128&d=identicon&r=PG", "display_name": "phsource", "link": "https://stackoverflow.com/users/319066/phsource"}, "is_accepted": false, "score": 0, "last_activity_date": 1562800105, "creation_date": 1562800105, "answer_id": 56979690, "question_id": 56979689, "link": "https://stackoverflow.com/questions/56979689/infinite-loop-with-google-maps-js-api-place-details-call-open-now/56979690#56979690", "title": "Infinite loop with Google Maps JS API place details call &quot;open_now&quot;", "body": "<p>This seems to be an issue with the <code>util.js</code> included in version 37. You can fix this by changing your Google Maps API version string to <code>v=quarterly</code> or 36.</p>\n\n<p><a href=\"https://maps.googleapis.com/maps/api/js?v=quarterly&amp;key=...&amp;libraries=geometry,drawing,places\" rel=\"nofollow noreferrer\">https://maps.googleapis.com/maps/api/js?v=quarterly&amp;key=...&amp;libraries=geometry,drawing,places</a></p>\n\n<p>(replace those libraries with your own)</p>\n\n<p>For more details, see: <a href=\"https://developers.google.com/maps/documentation/javascript/versions\" rel=\"nofollow noreferrer\">https://developers.google.com/maps/documentation/javascript/versions</a></p>\n"}, {"tags": [], "owner": {"reputation": 649, "user_id": 11732708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J5ABT.jpg?s=128&g=1", "display_name": "Angelica", "link": "https://stackoverflow.com/users/11732708/angelica"}, "is_accepted": true, "score": 1, "last_activity_date": 1563320877, "creation_date": 1563320877, "answer_id": 57066798, "question_id": 56979689, "link": "https://stackoverflow.com/questions/56979689/infinite-loop-with-google-maps-js-api-place-details-call-open-now/57066798#57066798", "title": "Infinite loop with Google Maps JS API place details call &quot;open_now&quot;", "body": "<p>This issue has recently been fixed. This was also reported in Google's Public issue tracker here: <a href=\"https://issuetracker.google.com/issues/137213536\" rel=\"nofollow noreferrer\">https://issuetracker.google.com/issues/137213536</a></p>\n\n<p>The issue was due to the recent Maps JavaScript API version 3.37 rollover which was already fixed by Google engineers as per the public bug. </p>\n\n<p>Please note that switching to the older versions is a temporary workaround, and will no longer work once the older versions are fully deprecated. If the error with the new version is still reproducible on your end, you can comment on the issue link above for the engineers to further investigate.</p>\n"}], "owner": {"reputation": 2050, "user_id": 319066, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b9159532a572c80a3be9e85d75c9af1f?s=128&d=identicon&r=PG", "display_name": "phsource", "link": "https://stackoverflow.com/users/319066/phsource"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 57066798, "answer_count": 2, "score": -1, "last_activity_date": 1563320877, "creation_date": 1562800105, "question_id": 56979689, "link": "https://stackoverflow.com/questions/56979689/infinite-loop-with-google-maps-js-api-place-details-call-open-now", "title": "Infinite loop with Google Maps JS API place details call &quot;open_now&quot;", "body": "<p>I'm using the Google Maps Javascript API to get Place Details. As of yesterday, I've been getting this error:</p>\n\n<pre><code>RangeError: Maximum call stack size exceeded\n    at Object._.Xm (common.js:1)\n    at Object.get [as open_now] (util.js:213)\n    at Object.get [as open_now] (util.js:213)\n    at Object.get [as open_now] (util.js:213)\n    at Object.get [as open_now] (util.js:213)\n    at Object.get [as open_now] (util.js:213)\n    at Object.get [as open_now] (util.js:213)\n    at Object.get [as open_now] (util.js:213)\n    at Object.get [as open_now] (util.js:213)\n    at Object.get [as open_now] (util.js:213)\n</code></pre>\n\n<p>My code (in Typescript) is:</p>\n\n<pre><code>async function getGooglePlaceDetails(placeId: string, sessionToken?: string) {\n  const googleMapsClient = createClient({\n    key: config.googleMapsServerAPIKey,\n    Promise,\n  });\n\n  const response = await googleMapsClient\n    .place({ placeid: placeId, sessiontoken: sessionToken })\n    .asPromise();\n\n  return response;\n}\n</code></pre>\n\n<p>This fails for certain places like <code>ChIJ71yZMAvSCl8RY1u0MpwXJXA</code> (\"Houheikyou hot springs\").</p>\n\n<p>How do I fix this?</p>\n"}, {"tags": ["javascript", "vue.js", "vue-component", "vue-router"], "comments": [{"owner": {"reputation": 21818, "user_id": 8583563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U42av.png?s=128&g=1", "display_name": "skirtle", "link": "https://stackoverflow.com/users/8583563/skirtle"}, "edited": false, "score": 0, "creation_date": 1562800243, "post_id": 56979678, "comment_id": 100495274, "body": "Any console errors? Looks like you have multiple root nodes in your template, which isn&#39;t allowed."}, {"owner": {"reputation": 1424, "user_id": 3147268, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/1f90d4a9d7382ddd2447f782a65ba008?s=128&d=identicon&r=PG&f=1", "display_name": "user3147268", "link": "https://stackoverflow.com/users/3147268/user3147268"}, "reply_to_user": {"reputation": 21818, "user_id": 8583563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U42av.png?s=128&g=1", "display_name": "skirtle", "link": "https://stackoverflow.com/users/8583563/skirtle"}, "edited": false, "score": 0, "creation_date": 1562800410, "post_id": 56979678, "comment_id": 100495318, "body": "Neither <code>npm run build</code> shows any errors (I&#39;m using the webpack-simple) template nor does the developer console in the browser."}, {"owner": {"reputation": 21818, "user_id": 8583563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U42av.png?s=128&g=1", "display_name": "skirtle", "link": "https://stackoverflow.com/users/8583563/skirtle"}, "edited": false, "score": 1, "creation_date": 1562801261, "post_id": 56979678, "comment_id": 100495461, "body": "Can you confirm whether or not you have multiple root nodes in your real templates? Or is that just a mistake in preparing the examples for this question?"}, {"owner": {"reputation": 1424, "user_id": 3147268, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/1f90d4a9d7382ddd2447f782a65ba008?s=128&d=identicon&r=PG&f=1", "display_name": "user3147268", "link": "https://stackoverflow.com/users/3147268/user3147268"}, "reply_to_user": {"reputation": 21818, "user_id": 8583563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U42av.png?s=128&g=1", "display_name": "skirtle", "link": "https://stackoverflow.com/users/8583563/skirtle"}, "edited": false, "score": 0, "creation_date": 1562801812, "post_id": 56979678, "comment_id": 100495556, "body": "I created a Github repository for a more complete example. Feel free to have a look. You can find the link in the original post."}], "answers": [{"comments": [{"owner": {"reputation": 1424, "user_id": 3147268, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/1f90d4a9d7382ddd2447f782a65ba008?s=128&d=identicon&r=PG&f=1", "display_name": "user3147268", "link": "https://stackoverflow.com/users/3147268/user3147268"}, "edited": false, "score": 0, "creation_date": 1562802783, "post_id": 56979929, "comment_id": 100495704, "body": "Thank you for your quick answer. Wrapping the templates for the homepage and sign-in page in a div solved the problem. I just started a few hours ago learning Vue.js. I didn&#39;t expect to get stuck by such a little detail. Anyways, thank you again @skirtle! Regarding the error messages: I&#39;ll have a look at that."}], "tags": [], "owner": {"reputation": 21818, "user_id": 8583563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U42av.png?s=128&g=1", "display_name": "skirtle", "link": "https://stackoverflow.com/users/8583563/skirtle"}, "is_accepted": true, "score": 2, "last_activity_date": 1562802310, "creation_date": 1562802310, "answer_id": 56979929, "question_id": 56979678, "link": "https://stackoverflow.com/questions/56979678/vuejs-shared-components-used-on-multiple-pages-disappeared/56979929#56979929", "title": "Vuejs: shared components used on multiple pages disappeared", "body": "<p>Both <code>homepage.vue</code> and <code>signin.vue</code> have invalid templates. e.g.</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;template&gt;\n    &lt;navigation&gt;&lt;/navigation&gt;\n    &lt;h1&gt;The homepage&lt;/h1&gt;\n    &lt;footer-vue&gt;&lt;/footer-vue&gt;\n&lt;/template&gt;\n</code></pre>\n\n<p>This is not allowed as it has 3 root nodes. See <a href=\"https://vuejs.org/v2/guide/components.html#A-Single-Root-Element\" rel=\"nofollow noreferrer\">https://vuejs.org/v2/guide/components.html#A-Single-Root-Element</a></p>\n\n<p>You need to wrap it to get it to work:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;template&gt;\n    &lt;div&gt;\n        &lt;navigation&gt;&lt;/navigation&gt;\n        &lt;h1&gt;The homepage&lt;/h1&gt;\n        &lt;footer-vue&gt;&lt;/footer-vue&gt;\n    &lt;/div&gt;\n&lt;/template&gt;\n</code></pre>\n\n<p>Note that this limitation does not apply to functional components and is also expected to be lifted for all components in Vue 3.</p>\n\n<p>Much more worrying is that you're not seeing any errors messages for this. You really need to look into that as it suggests there's something very much amiss with your development setup.</p>\n\n<p>An example of the error message you should be seeing:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>new Vue({\r\n  el: '#app',\r\n  template: '&lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt;'\r\n})</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://unpkg.com/vue@2.6.10/dist/vue.js\"&gt;&lt;/script&gt;\r\n&lt;div id=\"app\"&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 1424, "user_id": 3147268, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/1f90d4a9d7382ddd2447f782a65ba008?s=128&d=identicon&r=PG&f=1", "display_name": "user3147268", "link": "https://stackoverflow.com/users/3147268/user3147268"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 602, "favorite_count": 0, "accepted_answer_id": 56979929, "answer_count": 1, "score": 0, "last_activity_date": 1562802310, "creation_date": 1562800010, "last_edit_date": 1562801770, "question_id": 56979678, "link": "https://stackoverflow.com/questions/56979678/vuejs-shared-components-used-on-multiple-pages-disappeared", "title": "Vuejs: shared components used on multiple pages disappeared", "body": "<p>right now, I'm writing a single-page-application in vue.js using vue-router. Pages like the homepage, sign-in page etc. all share a navigation and footer component. On a few pages however, I need the entire screen so that the navigation and footer shall not be displayed.</p>\n\n<p>Hence, I decided to nest components and include the navigation and footer component when necessary. My problems now is, that the navigation and footer template disappeared on <strong>all</strong> pages.</p>\n\n<p><strong>Edit</strong>: A more complete demo can be found in <a href=\"https://github.com/digitalcraftsman/vuejs-stackoverflow-demo\" rel=\"nofollow noreferrer\">this Github repository</a>.</p>\n\n<p>Here's a simplified version of the files I'm using:</p>\n\n<p>index.html:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div id=\"app\"&gt;\n  &lt;router-view&gt;&lt;/routerview&gt; \n&lt;/div&gt;\n</code></pre>\n\n<p>router.js:</p>\n\n<pre><code>import Homepage from './homepage.vue';\nimport SignIn from './signin.vue';\n\nconst router = new VueRouter({\n  routes: [\n    {path: '/', component: Homepage},\n    {path: '/signin', component: SignIn},\n    ]\n})\n</code></pre>\n\n<p>homepage.vue and signin.vue components:</p>\n\n<pre><code>&lt;template&gt;\n  &lt;navigation&gt;&lt;/navigation&gt;  \n    // some page-specific content\n  &lt;footer-vue&gt;&lt;/footer-vue&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nimport Navigation from './navigation.vue';\nimport Footer from './footer.vue';\n\nexport default {\n  components: {\n      'navigation': Navigation,\n      'footer-vue': Footer,\n  },\n}\n&lt;/script&gt;\n</code></pre>\n\n<p>A component without navigation and footer:</p>\n\n<pre><code>&lt;template&gt; \n// some page-specific content\n&lt;/template&gt;\n</code></pre>\n\n<p>Is it even possible to nest components this way? I hope someone is able to point me into the right direction.</p>\n"}, {"tags": ["javascript", "html", "css", "firefox", "execcommand"], "comments": [{"owner": {"reputation": 28707, "user_id": 125981, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f2077dbed28ae040719cbe698800ec29?s=128&d=identicon&r=PG", "display_name": "Mark Schultheiss", "link": "https://stackoverflow.com/users/125981/mark-schultheiss"}, "edited": false, "score": 0, "creation_date": 1562818415, "post_id": 56979628, "comment_id": 100498484, "body": "which  version of Firefox?"}], "owner": {"reputation": 95, "user_id": 2227827, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/672b060bb19daa40a7572ee2a686e8de?s=128&d=identicon&r=PG", "display_name": "Twinkling Star", "link": "https://stackoverflow.com/users/2227827/twinkling-star"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 166, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1562806898, "creation_date": 1562799465, "last_edit_date": 1562806898, "question_id": 56979628, "link": "https://stackoverflow.com/questions/56979628/copy-table-with-borders-doesnt-work-in-firefox", "title": "Copy table with borders doesn&#39;t work in Firefox", "body": "<p>I am trying to copy a table using <code>document.execCommand</code>. The copying works, but the borders and background color are missing when I paste in an email client. This is happening only when I copy it from Firefox; Chrome works fine.</p>\n\n<p>Any ideas on how to fix this issue for Firefox without external plugins and without using inline styles for the existing table?</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function selectElementContents() {\r\n  var el = document.getElementById('div1');\r\n  // Copy textarea, pre, div, etc.\r\n  var range = document.createRange();\r\n  range.selectNodeContents(el);\r\n  var sel = window.getSelection();\r\n  sel.removeAllRanges();\r\n  sel.addRange(range);\r\n  try {\r\n    var successful = document.execCommand('copy');\r\n    var msg = successful ? 'successful' : 'unsuccessful';\r\n    console.log('Copy command was ' + msg);\r\n  } catch (err) {\r\n    console.log('Oops, unable to copy');\r\n  }\r\n\r\n} // end function selectElementContents(el)</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>.table {\r\n  background-color: #faa835;\r\n  border: 2px solid black;\r\n  border-collapse: collapse;\r\n}\r\n\r\n.table th {\r\n  border: 2px solid black\r\n}\r\n\r\n.table td {\r\n  border: 2px solid black\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;button id=\"copy\" onclick=\"selectElementContents()\"&gt;Copy&lt;/button&gt;\r\n&lt;div id=\"div1\"&gt;\r\n  &lt;table class=\"table\"&gt;\r\n    &lt;tr&gt;\r\n      &lt;th&gt;Not working table&lt;/th&gt;\r\n      &lt;th&gt;1&lt;/th&gt;\r\n      &lt;th&gt;2&lt;/th&gt;\r\n      &lt;th&gt;3&lt;/th&gt;\r\n      &lt;th&gt;4&lt;/th&gt;\r\n    &lt;/tr&gt;\r\n    &lt;tr&gt;\r\n      &lt;td&gt;Not working table&lt;/td&gt;\r\n      &lt;td&gt;1&lt;/td&gt;\r\n      &lt;td&gt;2&lt;/td&gt;\r\n      &lt;td&gt;3&lt;/td&gt;\r\n      &lt;td&gt;4&lt;/td&gt;\r\n    &lt;/tr&gt;\r\n  &lt;/table&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><a href=\"https://codepen.io/anon/pen/bPzmvW\" rel=\"nofollow noreferrer\">View on CodePen</a></p>\n"}, {"tags": ["javascript", "html", "css"], "comments": [{"owner": {"reputation": 7845, "user_id": 5734311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iVq7.jpg?s=128&g=1", "display_name": "Chris G", "link": "https://stackoverflow.com/users/5734311/chris-g"}, "edited": false, "score": 1, "creation_date": 1562799358, "post_id": 56979603, "comment_id": 100495087, "body": "<code>visibility: hidden;</code> means the element takes up space and reacts to the mouse, it&#39;s just not drawn to the screen. Use <code>display: none</code> instead, or <code>height: 0</code>. (I&#39;ve also removed the React tag, given that it has no relevance to the issue here)"}], "answers": [{"comments": [{"owner": {"reputation": 570, "user_id": 6809720, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-pJTiPcJyXh0/AAAAAAAAAAI/AAAAAAAAAkY/GQzq5_4t_S0/photo.jpg?sz=128", "display_name": "Eric Nguyen", "link": "https://stackoverflow.com/users/6809720/eric-nguyen"}, "edited": false, "score": 0, "creation_date": 1562863097, "post_id": 56979648, "comment_id": 100521825, "body": "If I wanted to add padding to &#39;.subnav-block&#39;, that also takes up space and we run into a similar issue. How can I make the subnav look good w/o sacrificing the hover experience?"}, {"owner": {"reputation": 3503, "user_id": 4259032, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/fzRmI.jpg?s=128&g=1", "display_name": "Alain Cruz", "link": "https://stackoverflow.com/users/4259032/alain-cruz"}, "reply_to_user": {"reputation": 570, "user_id": 6809720, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-pJTiPcJyXh0/AAAAAAAAAAI/AAAAAAAAAkY/GQzq5_4t_S0/photo.jpg?sz=128", "display_name": "Eric Nguyen", "link": "https://stackoverflow.com/users/6809720/eric-nguyen"}, "edited": false, "score": 0, "creation_date": 1562863413, "post_id": 56979648, "comment_id": 100521967, "body": "I would then go with Hadi77 answer and instead use the display attribute. I just edited my question with the corresponding changes."}, {"owner": {"reputation": 570, "user_id": 6809720, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-pJTiPcJyXh0/AAAAAAAAAAI/AAAAAAAAAkY/GQzq5_4t_S0/photo.jpg?sz=128", "display_name": "Eric Nguyen", "link": "https://stackoverflow.com/users/6809720/eric-nguyen"}, "edited": false, "score": 0, "creation_date": 1562863471, "post_id": 56979648, "comment_id": 100522001, "body": "yeah, I was just playing around with display none instead of visibility hidden. Thanks, will continue."}, {"owner": {"reputation": 570, "user_id": 6809720, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-pJTiPcJyXh0/AAAAAAAAAAI/AAAAAAAAAkY/GQzq5_4t_S0/photo.jpg?sz=128", "display_name": "Eric Nguyen", "link": "https://stackoverflow.com/users/6809720/eric-nguyen"}, "edited": false, "score": 0, "creation_date": 1562863829, "post_id": 56979648, "comment_id": 100522168, "body": "Maybe I need to pose another topic on this but noticed the animation doesn&#39;t work when using display:none and display:block. How do I get CSS transition to work again?"}, {"owner": {"reputation": 3503, "user_id": 4259032, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/fzRmI.jpg?s=128&g=1", "display_name": "Alain Cruz", "link": "https://stackoverflow.com/users/4259032/alain-cruz"}, "reply_to_user": {"reputation": 570, "user_id": 6809720, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-pJTiPcJyXh0/AAAAAAAAAAI/AAAAAAAAAkY/GQzq5_4t_S0/photo.jpg?sz=128", "display_name": "Eric Nguyen", "link": "https://stackoverflow.com/users/6809720/eric-nguyen"}, "edited": false, "score": 0, "creation_date": 1562866120, "post_id": 56979648, "comment_id": 100523230, "body": "You would need to use a bit of JS in this case. I just edited my answer with a simple code that should suffice."}, {"owner": {"reputation": 570, "user_id": 6809720, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-pJTiPcJyXh0/AAAAAAAAAAI/AAAAAAAAAkY/GQzq5_4t_S0/photo.jpg?sz=128", "display_name": "Eric Nguyen", "link": "https://stackoverflow.com/users/6809720/eric-nguyen"}, "edited": false, "score": 0, "creation_date": 1562869549, "post_id": 56979648, "comment_id": 100524738, "body": "That&#39;s awesome. last question (I think): when submenu is visible, it pushes content down. I&#39;m assuming it&#39;s b/c it is block displayed. Should I use position absolute to fix this?"}, {"owner": {"reputation": 3503, "user_id": 4259032, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/fzRmI.jpg?s=128&g=1", "display_name": "Alain Cruz", "link": "https://stackoverflow.com/users/4259032/alain-cruz"}, "reply_to_user": {"reputation": 570, "user_id": 6809720, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-pJTiPcJyXh0/AAAAAAAAAAI/AAAAAAAAAkY/GQzq5_4t_S0/photo.jpg?sz=128", "display_name": "Eric Nguyen", "link": "https://stackoverflow.com/users/6809720/eric-nguyen"}, "edited": false, "score": 0, "creation_date": 1562870067, "post_id": 56979648, "comment_id": 100524952, "body": "Yes, using position absolute should fix that."}, {"owner": {"reputation": 570, "user_id": 6809720, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-pJTiPcJyXh0/AAAAAAAAAAI/AAAAAAAAAkY/GQzq5_4t_S0/photo.jpg?sz=128", "display_name": "Eric Nguyen", "link": "https://stackoverflow.com/users/6809720/eric-nguyen"}, "reply_to_user": {"reputation": 3503, "user_id": 4259032, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/fzRmI.jpg?s=128&g=1", "display_name": "Alain Cruz", "link": "https://stackoverflow.com/users/4259032/alain-cruz"}, "edited": false, "score": 0, "creation_date": 1562872345, "post_id": 56979648, "comment_id": 100525910, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/196339/discussion-between-eric-nguyen-and-alain-cruz\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 3503, "user_id": 4259032, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/fzRmI.jpg?s=128&g=1", "display_name": "Alain Cruz", "link": "https://stackoverflow.com/users/4259032/alain-cruz"}, "is_accepted": true, "score": 2, "last_activity_date": 1562866093, "last_edit_date": 1562866093, "creation_date": 1562799623, "answer_id": 56979648, "question_id": 56979603, "link": "https://stackoverflow.com/questions/56979603/hovering-issue-with-nav-menu/56979648#56979648", "title": "Hovering Issue With Nav Menu", "body": "<p>Your sub-navigation menu is taking up space, even though it is not visible. That is why you can see it whenever you are hovering above it. Adding <code>height:0</code> to your <code>.subnav-block</code> and then setting it back to <code>auto</code> when hovering, should do the trick. Your css should look something like the one below.</p>\n\n<pre><code>.subnav-block {\n  position: static;\n  display: block;\n  width: 100% !important;\n  top: 54px;\n  left: 0;\n  height: 0;\n  overflow: hidden;\n  background: gray;\n  -webkit-transition: all 0.3s ease 0.15s;\n  -moz-transition: all 0.3s ease 0.15s;\n  -o-transition: all 0.3s ease 0.15s;\n  -ms-transition: all 0.3s ease 0.15s;\n  transition: all 0.3s ease 0.15s;\n}\n\n.nav:hover &gt; li &gt; .subnav-block {\n  height: auto;\n  visibility: visible;\n  overflow: visible;\n}\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>If you want to add paddings to your sub-navigation menu, setting the <code>height</code> to 0 won't suffice, and you would need to change both the <code>height</code> and the <code>padding</code> when hovering. There is another way, which <strong>Hadi77</strong> mentioned, which is setting the default display to <code>none</code> and then change it to <code>block</code>. Just like the example below.</p>\n\n<pre><code>.subnav-block {\n  position: static;\n  width: 100% !important;\n  top: 54px;\n  left: 0;\n  display: none;\n  background: gray;\n  -webkit-transition: all 0.3s ease 0.15s;\n  -moz-transition: all 0.3s ease 0.15s;\n  -o-transition: all 0.3s ease 0.15s;\n  -ms-transition: all 0.3s ease 0.15s;\n  transition: all 0.3s ease 0.15s;\n}\n\n.nav:hover &gt; li &gt; .subnav-block {\n  display: block;\n}\n</code></pre>\n\n<p><strong>UPDATE 2</strong></p>\n\n<p>Since <code>display</code> won't let us use transitions, the other workaround would be using a bit of <code>JS</code>. Since it is not much code, it is solid way to achieve this. We would need to remove the CSS <code>hover</code> in this.</p>\n\n<p><strong>JS</strong></p>\n\n<pre><code>const nav = document.querySelectorAll('.nav &gt; li');\n\nnav.forEach(elem =&gt; {\n\n  elem.addEventListener('mouseenter', () =&gt; {\n    const subnav = document.querySelectorAll('.subnav-block');\n    subnav.forEach(sub =&gt; {\n      sub.classList.add('display-block');\n      setTimeout( () =&gt; { \n        sub.style.opacity = 1;\n        sub.style.height = 'auto';\n      }, 100);\n    });\n  });\n\n  elem.addEventListener('mouseleave', () =&gt; {\n    const subnav = document.querySelectorAll('.subnav-block');\n    subnav.forEach(sub =&gt; {\n      sub.classList.remove('display-block');\n      sub.style.opacity = 0;\n    });\n  });\n\n});\n</code></pre>\n\n<p><strong>CSS</strong></p>\n\n<pre><code>.subnav-block {\n  position: static;\n  width: 100% !important;\n  top: 54px;\n  left: 0;\n  display: none;\n  opacity: 0;\n  height: 0;\n  background: gray;\n  -webkit-transition: all 0.3s ease 0.15s;\n  -moz-transition: all 0.3s ease 0.15s;\n  -o-transition: all 0.3s ease 0.15s;\n  -ms-transition: all 0.3s ease 0.15s;\n  transition: all 0.3s ease 0.15s;\n}\n\n.display-block {\n  display: block;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 107, "user_id": 2047592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c0bbd17dab4a09e42288b7f6f7c6e51?s=128&d=identicon&r=PG", "display_name": "Hadi77", "link": "https://stackoverflow.com/users/2047592/hadi77"}, "is_accepted": false, "score": 1, "last_activity_date": 1562800286, "creation_date": 1562800286, "answer_id": 56979708, "question_id": 56979603, "link": "https://stackoverflow.com/questions/56979603/hovering-issue-with-nav-menu/56979708#56979708", "title": "Hovering Issue With Nav Menu", "body": "<p>Setting <code>visibility</code> to <code>hidden</code>, is somewhat like making it transparent: The element takes space as it should (<code>display</code> is set to <code>block</code>).</p>\n\n<p>Using <code>display</code> property is what you want. Set it to <code>none</code> when you want the element to be \"not displayed\" and set it to <code>block</code> to \"display it\".</p>\n\n<hr>\n\n<p>Also if you don't want all menus to drop-down together, move the <code>:hover</code> pseudo-selector in <code>.nav:hover &gt; li &gt; .subnav-block</code> to <code>li</code>, so it would become <code>.nav &gt; li:hover &gt; .subnav-block</code>.</p>\n"}], "owner": {"reputation": 570, "user_id": 6809720, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-pJTiPcJyXh0/AAAAAAAAAAI/AAAAAAAAAkY/GQzq5_4t_S0/photo.jpg?sz=128", "display_name": "Eric Nguyen", "link": "https://stackoverflow.com/users/6809720/eric-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 56979648, "answer_count": 2, "score": 0, "last_activity_date": 1562866093, "creation_date": 1562799159, "last_edit_date": 1562799366, "question_id": 56979603, "link": "https://stackoverflow.com/questions/56979603/hovering-issue-with-nav-menu", "title": "Hovering Issue With Nav Menu", "body": "<p>My mega menu nav has a hovering issue. It activates when hovering over invisible child list items (mousing over from bottom to top, you'll notice the issue on <a href=\"https://codepen.io/ericnguyen23/pen/EBrodo?editors=1111a\" rel=\"nofollow noreferrer\">this codepen</a>). </p>\n\n<p>This is the block of CSS that's triggering the hover:</p>\n\n<pre><code>.nav:hover &gt; li &gt; .subnav-block {\n  opacity: 1;\n  visibility: visible;\n  overflow: visible;\n}\n</code></pre>\n\n<p>I'm thinking a JavaScript solution would help out but trying to find CSS fix for this first.</p>\n"}, {"tags": ["javascript", "rest", "api", "express", "roles"], "owner": {"reputation": 43, "user_id": 5852078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90683551c753deb1fa1b7a7bee563b20?s=128&d=identicon&r=PG&f=1", "display_name": "FantzFoXx", "link": "https://stackoverflow.com/users/5852078/fantzfoxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 18, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1562799037, "creation_date": 1562799037, "question_id": 56979590, "link": "https://stackoverflow.com/questions/56979590/prevent-roles-which-can-patch-a-resource-to-modify-specific-fields-of-a-document", "title": "Prevent roles which can patch a resource to modify specific fields of a document in a rest api with express", "body": "<p>Im actually creating a rest api with express.</p>\n\n<p>My users have a field 'permissionLevel' (Integer) which grants them access to certain resources and verbs.</p>\n\n<p>I'm actually looking for an elegant way to allow only specific fields on the PATCH of a resource depending on the permissionLevel of a user.</p>\n\n<p>Let's say a user with permissionLevel 3 can edit the name field of other users while another with permissionLevel 2 can't. But they both have access to the verb PATCH of the user resource.</p>\n\n<p>And next step would be : A user with permissionLevel 3 can't update another with a higher permissionLevel.</p>\n\n<p>I could do it simply by adding code in my controllers, but i'd like to not do it if possible, and handling it with a middleware or something. I'd like to make it as generic as possible. And staying in accordance with rest conventions.</p>\n\n<p>I searched a lot on the internet, but I couldn't find anything that answered my questions, so if you have any resources to advise me, I'll take it.</p>\n\n<p>Thank's in advance !</p>\n"}, {"tags": ["javascript", "for-loop", "multidimensional-array", "conditional-statements"], "answers": [{"tags": [], "owner": {"reputation": 253903, "user_id": 9515207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "CertainPerformance", "link": "https://stackoverflow.com/users/9515207/certainperformance"}, "is_accepted": true, "score": 2, "last_activity_date": 1562798934, "creation_date": 1562798934, "answer_id": 56979578, "question_id": 56979561, "link": "https://stackoverflow.com/questions/56979561/element-wise-filtering-of-jagged-multidimensional-array-with-1d-array-in-javascr/56979578#56979578", "title": "Element-Wise Filtering of Jagged Multidimensional Array with 1D array in Javascript", "body": "<p>Use <code>.map</code> to transform into another 2d array, calling <code>.filter</code> on each subarray while comparing against the <code>checks</code> at the index of the subarray being iterated over:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const Amaths = [\r\n    [1, 2, 3, 5, 6, 7, 8],\r\n    [4, 5, 6, 8],\r\n    [12, 3, 4]\r\n]\r\nconst checks = [2.5, 4.01, 5];\r\n\r\nconst result = Amaths.map(\r\n  (subarr, i) =&gt; subarr.filter(\r\n    num =&gt; num &gt;= checks[i]\r\n  )\r\n);\r\nconsole.log(result);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>To fix your original code, you'd have to push a new subarray to <code>picks</code> on every outer iteration:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"true\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const Amaths = [\r\n    [1, 2, 3, 5, 6, 7, 8],\r\n    [4, 5, 6, 8],\r\n    [12, 3, 4]\r\n]\r\nconst checks = [2.5, 4.01, 5];\r\nconst picks = [];\r\nfor (let j = 0; j &lt; Amaths.length; j++) {\r\n    picks.push([]);\r\n    for (let k = 0; k &lt; Amaths[j].length; k++) {\r\n        if (Amaths[j][k] &gt; checks[j]) {\r\n            picks[j].push(Amaths[j][k]);\r\n        }\r\n    }\r\n}\r\n\r\nconsole.log(\"picks\", picks)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>(but array methods are probably a much better choice here, they're a lot more concise and easy to understand)</p>\n"}], "owner": {"reputation": 386, "user_id": 10592467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c67a1203a28240792baf9ae03f548c95?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac", "link": "https://stackoverflow.com/users/10592467/isaac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 56979578, "answer_count": 1, "score": 1, "last_activity_date": 1562798934, "creation_date": 1562798780, "question_id": 56979561, "link": "https://stackoverflow.com/questions/56979561/element-wise-filtering-of-jagged-multidimensional-array-with-1d-array-in-javascr", "title": "Element-Wise Filtering of Jagged Multidimensional Array with 1D array in Javascript", "body": "<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const Amaths = [\r\n    [1, 2, 3, 5, 6, 7, 8],\r\n    [4, 5, 6, 8],\r\n    [12, 3, 4]\r\n]\r\nconst checks = [2.5, 4.01, 5];\r\nconst picks = [];\r\nfor (let j = 0; j &lt; Amaths.length; j++) {\r\n    for (let k = 0; k &lt; Amaths[j].length; k++) {\r\n        if (Amaths[j][k] &gt; checks[j]) {\r\n            picks.push(Amaths[j][k]);\r\n        }\r\n    }\r\n}\r\n\r\nconsole.log(\"picks\", picks)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I want to filter a jagged multidimensional array element-wis without flattening the output array; in this example, \"picks\".</p>\n\n<p>I have tried using a for loop but the output, \"picks\", is flattened. Also, I have used mathjs library function, but it seems the element-wise arithmetic operations in this library only works for non-jagged multidimensional arrays.</p>\n\n<p>The expected result should be:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const picks =  [ [3, 5, 6, 7, 8], [5, 6, 8], [12] ]\r\n\r\nconsole.log (\"expected picks\", picks)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["javascript", "recursion", "while-loop"], "comments": [{"owner": {"reputation": 38349, "user_id": 10221765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e762fef8d87381d5cbd58d851d1b816?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Bashford", "link": "https://stackoverflow.com/users/10221765/jack-bashford"}, "edited": false, "score": 2, "creation_date": 1562798680, "post_id": 56979530, "comment_id": 100494923, "body": "We can&#39;t help if we can&#39;t see your code...we can&#39;t see your screen...please add your code using the <a href=\"https://stackoverflow.com/posts/56979530/edit\">edit</a> link below your question."}, {"owner": {"reputation": 162920, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 1, "creation_date": 1562798793, "post_id": 56979530, "comment_id": 100494955, "body": "<i>&quot;How can I avoid it&quot;</i> ... by writing code that won&#39;t go into infinite loop. We&#39;ve all done it at one time or another...just have to live and learn. worst case use a temporary counter that can break out while you debug the loop. Using <code>debugger</code> or breakpoint can help also"}, {"owner": {"reputation": 7845, "user_id": 5734311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iVq7.jpg?s=128&g=1", "display_name": "Chris G", "link": "https://stackoverflow.com/users/5734311/chris-g"}, "edited": false, "score": 0, "creation_date": 1562798814, "post_id": 56979530, "comment_id": 100494958, "body": "<code>Why is there no fail safe for while loops?</code> Infinite recursion is always undesired, an infinite loop otoh is standard stuff used in pretty much any game / software out there. Still, one game engine I know counts iterations and breaks if 15,000 is reached. You have to add a special keyword to prevent that."}, {"owner": {"reputation": 7845, "user_id": 5734311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iVq7.jpg?s=128&g=1", "display_name": "Chris G", "link": "https://stackoverflow.com/users/5734311/chris-g"}, "reply_to_user": {"reputation": 38349, "user_id": 10221765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e762fef8d87381d5cbd58d851d1b816?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Bashford", "link": "https://stackoverflow.com/users/10221765/jack-bashford"}, "edited": false, "score": 1, "creation_date": 1562798919, "post_id": 56979530, "comment_id": 100494976, "body": "@JackBashford What&#39;s the point of adding code? The question is perfectly fine without it."}, {"owner": {"reputation": 117, "user_id": 8886798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b542c488b940e79db58c174345b59662?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Klaers", "link": "https://stackoverflow.com/users/8886798/jordan-klaers"}, "edited": false, "score": 0, "creation_date": 1562823740, "post_id": 56979530, "comment_id": 100499891, "body": "Obviously writing a proper while loop is the best. my issues came from a bug that surfaced from a unique condition not found during development. In that unique condition the while loop would run forever and cause the page to crash with no errors which made troubleshooting difficult. I was just wondering if there was anything to identify that a while loop was indefinitely running, similar to how a recursive function will throw a maximum call stack exceeded error that can give you a hint of where to look for the error"}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 8886798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b542c488b940e79db58c174345b59662?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Klaers", "link": "https://stackoverflow.com/users/8886798/jordan-klaers"}, "edited": false, "score": 0, "creation_date": 1562823070, "post_id": 56979666, "comment_id": 100499636, "body": "I had dev tools open and the page would still lock up from a while look that didn&#39;t break. Maybe  I&#39;m missing something from your answer I&#39;ll have too look at this again"}, {"owner": {"reputation": 3020, "user_id": 5601591, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dymec.png?s=128&g=1", "display_name": "Jack Giffin", "link": "https://stackoverflow.com/users/5601591/jack-giffin"}, "reply_to_user": {"reputation": 117, "user_id": 8886798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b542c488b940e79db58c174345b59662?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Klaers", "link": "https://stackoverflow.com/users/8886798/jordan-klaers"}, "edited": false, "score": 0, "creation_date": 1569673395, "post_id": 56979666, "comment_id": 102677180, "body": "@JordanKlaers Notice how I ran <code>obj = null</code> to cause the while-loop to throw an exception and exit. Does causing the while loop to throw an exception work for you?"}], "tags": [], "owner": {"reputation": 3020, "user_id": 5601591, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dymec.png?s=128&g=1", "display_name": "Jack Giffin", "link": "https://stackoverflow.com/users/5601591/jack-giffin"}, "is_accepted": false, "score": 0, "last_activity_date": 1562800688, "last_edit_date": 1562800688, "creation_date": 1562799843, "answer_id": 56979666, "question_id": 56979530, "link": "https://stackoverflow.com/questions/56979530/while-loops-crashes-but-recursive-function-throws-maximum-call-stack-exceeded-e/56979666#56979666", "title": "While loops crashes, but recursive function throws maximum call stack exceeded error", "body": "<p>The answer is to use Chrome and leave the DevTools open.</p>\n\n<p><a href=\"https://i.stack.imgur.com/lMdOO.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lMdOO.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/lC7PV.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lC7PV.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/jlvUu.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jlvUu.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/xPlG8.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xPlG8.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/MHXlX.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MHXlX.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/7Iw8G.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7Iw8G.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>The reason for why there are no safeguards against infinite loops such that exceptions are thrown for infinite loops is performance. Observe the different between checking and not checking.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>(function(){\"use strict\";\r\n\r\nvar i=0, performance_now = performance.now.bind(performance);\r\nvar end = performance_now()+200;\r\nwhile (performance_now() &lt; end) i=i+1|0;\r\n\r\nconsole.log('Ops/sec with checking: ' + Math.round(i / 200 * 1000));\r\n\r\n\r\nvar k = 0;\r\ni = i&lt;&lt;7;\r\nvar startTime = performance_now();\r\nwhile (k &lt; i) void (k=k+1|0);\r\nvar endTime = performance_now();\r\n\r\n\r\nconsole.log('Ops/sec -- unchecked:  ' + Math.round(i / (endTime - startTime) * 1000));\r\n\r\n})();</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>The version without timer-related safeguards is 300x faster. Albeit this is a bit exaggerated because most of the computing time is spent inside the loop instead of at the periphery, this ought to drive home to point of performance.</p>\n\n<p>As for bypassing the limits of the stack in recursive functions, please see my own <a href=\"https://github.com/anonyco/DeferStackJS\" rel=\"nofollow noreferrer\">DeferStackJS</a> library which employs stack trampolining. </p>\n"}, {"comments": [{"owner": {"reputation": 40865, "user_id": 10431, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/22aac6106c44ae4078bd4c0a564714e0?s=128&d=identicon&r=PG", "display_name": "Keith Nicholas", "link": "https://stackoverflow.com/users/10431/keith-nicholas"}, "edited": false, "score": 0, "creation_date": 1562801133, "post_id": 56979680, "comment_id": 100495438, "body": "technically, chrome doesn&#39;t need to know whether it halts or not, It can simply work out if its taking too long / ensure the UI shell doesn&#39;t get blocked."}, {"owner": {"reputation": 2359, "user_id": 4326715, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/5f74p.jpg?s=128&g=1", "display_name": "Asleepace", "link": "https://stackoverflow.com/users/4326715/asleepace"}, "reply_to_user": {"reputation": 40865, "user_id": 10431, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/22aac6106c44ae4078bd4c0a564714e0?s=128&d=identicon&r=PG", "display_name": "Keith Nicholas", "link": "https://stackoverflow.com/users/10431/keith-nicholas"}, "edited": false, "score": 0, "creation_date": 1562801357, "post_id": 56979680, "comment_id": 100495481, "body": "@KeithNicholas the first part was more of an &quot;in-general&quot; answer, but ya they definitely could do that in chrome"}, {"owner": {"reputation": 117, "user_id": 8886798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b542c488b940e79db58c174345b59662?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Klaers", "link": "https://stackoverflow.com/users/8886798/jordan-klaers"}, "edited": false, "score": 1, "creation_date": 1562823433, "post_id": 56979680, "comment_id": 100499779, "body": "Interesting article.  Thank you for the force clost tab you suggested. I&#39;ll try that out"}, {"owner": {"reputation": 2359, "user_id": 4326715, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/5f74p.jpg?s=128&g=1", "display_name": "Asleepace", "link": "https://stackoverflow.com/users/4326715/asleepace"}, "reply_to_user": {"reputation": 117, "user_id": 8886798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b542c488b940e79db58c174345b59662?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Klaers", "link": "https://stackoverflow.com/users/8886798/jordan-klaers"}, "edited": false, "score": 0, "creation_date": 1562880943, "post_id": 56979680, "comment_id": 100529098, "body": "@JordanKlaers glad to help, the only reason it stops with infinite recursion is that the &quot;stack&quot; grows indefinitely as each stack frame consumes more and more memory, until all available memory is depleted."}], "tags": [], "owner": {"reputation": 2359, "user_id": 4326715, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/5f74p.jpg?s=128&g=1", "display_name": "Asleepace", "link": "https://stackoverflow.com/users/4326715/asleepace"}, "is_accepted": false, "score": -2, "last_activity_date": 1562800026, "creation_date": 1562800026, "answer_id": 56979680, "question_id": 56979530, "link": "https://stackoverflow.com/questions/56979530/while-loops-crashes-but-recursive-function-throws-maximum-call-stack-exceeded-e/56979680#56979680", "title": "While loops crashes, but recursive function throws maximum call stack exceeded error", "body": "<h2>The Halting Problem</h2>\n\n<p>This comes to mind, as it might not actually be possible to determine whether or not a while loop will deterministically run forever.</p>\n\n<blockquote>\n  <p>In computability theory, the halting problem is the problem of\n  determining, from a description of an arbitrary computer program and\n  an input, whether the program will finish running (i.e., halt) or\n  continue to run forever.</p>\n  \n  <p>Alan Turing proved in 1936 that a general algorithm to solve the\n  halting problem for all possible program-input pairs cannot exist.</p>\n</blockquote>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Halting_problem\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Halting_problem</a></p>\n\n<h2>Chrome Solution</h2>\n\n<p>You can click the three dots in the top right corner and select</p>\n\n<blockquote>\n  <p>More Tools > Task Manager > Force close tab</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 117, "user_id": 8886798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b542c488b940e79db58c174345b59662?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Klaers", "link": "https://stackoverflow.com/users/8886798/jordan-klaers"}, "edited": false, "score": 0, "creation_date": 1562823232, "post_id": 56979705, "comment_id": 100499696, "body": "Obviously writing a correct while loop is right,  the issue was that when there was a while loop that ran indefinitely no error would show in the dev tools console of chrome and dude to the page locking up, and due to the error surfacing in unique conditions not found during development, there were no clues to find the source of the issue easily. I was just wondering if there was anything similar to what arrises from a recursive functional called over and over. That could be used to help troubleshooting. Or at least not lock up the page with no errors"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 0, "last_activity_date": 1562800246, "creation_date": 1562800246, "answer_id": 56979705, "question_id": 56979530, "link": "https://stackoverflow.com/questions/56979530/while-loops-crashes-but-recursive-function-throws-maximum-call-stack-exceeded-e/56979705#56979705", "title": "While loops crashes, but recursive function throws maximum call stack exceeded error", "body": "<blockquote>\n  <p>Why is there no fail safe?</p>\n</blockquote>\n\n<p>You are the fail-safe.</p>\n\n<p>While it is true that it is impossible for a computer to detect and intercept every conceivable infinite loop or infinite recursion, there are many examples (probably most examples that you'd practically write) for which the computer could actually do this.</p>\n\n<p>But, to what end?</p>\n\n<p>Language specifications generally don't require this. Implementations generally don't attempt this. Because they do not need to.</p>\n\n<p>You test your code, and you find out that it does not behave properly. So you fix it.</p>\n\n<p>That's really all that needs to happen. There's no need for complex algorithms that do the job for you 25% of the time with great computational effort.</p>\n\n<p>You just fix the code.</p>\n\n<blockquote>\n  <p>other than properly writing a while loop</p>\n</blockquote>\n\n<p>Yeah that's literally the solution.</p>\n"}, {"tags": [], "owner": {"reputation": 44043, "user_id": 1565698, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7dace33805b9dcdec5aa63308daf88dc?s=128&d=identicon&r=PG", "display_name": "Sylwester", "link": "https://stackoverflow.com/users/1565698/sylwester"}, "is_accepted": false, "score": 1, "last_activity_date": 1562853058, "creation_date": 1562853058, "answer_id": 56990808, "question_id": 56979530, "link": "https://stackoverflow.com/questions/56979530/while-loops-crashes-but-recursive-function-throws-maximum-call-stack-exceeded-e/56990808#56990808", "title": "While loops crashes, but recursive function throws maximum call stack exceeded error", "body": "<p>What you call fail safe is a missing feature in all implementations except Safari, which has implemented the ES2016 JavaScript requirement of <a href=\"https://en.wikipedia.org/wiki/Tail_call\" rel=\"nofollow noreferrer\">tail call optimization</a>. In safari you won't notice any difference between these:</p>\n\n<pre><code>while (true) {\n  // code\n}\n\n(function loop () {\n   // code\n   loop()\n})();\n</code></pre>\n\n<p>No stack overflow and as expected the browser freezes forever. The reason for that is that unless you are using workers JS is single threaded and no other JS code in the turn queue gets executed. eg. </p>\n\n<pre><code>setTimeout(function(){ alert(\"This will never happen!\"); }, 0);\n(function loop () {\n   loop()\n})();\n</code></pre>\n\n<p>You should not write while loops that does not terminate. If you have made a bug i suggest you make a breakpoint in the while in order to check why it does not terminate. Alternatively you could if you think there is something wrong do:</p>\n\n<pre><code>// TODO: remove debug limit\nlet limit = 100000; // limit\nwhile (true)) {\n    if(!limit--) {\n        console.log('limit exceeded');\n        break; // set breakpoint here in debugger\n    }\n}\n</code></pre>\n\n<p>Backside is that you need to remove this when issue is solved. My IDE complains about that TODO so it will never ever go in git. You can do the same with tail calls: </p>\n\n<pre><code>// TODO: remove debug limit\nlet limit = 100000; // limit\n(function loop () {\n      // code\n      if(!limit--) {\n          console.log('limit exceeded');\n          return; // set breakpoint here in debugger\n      }\n      if (true) loop(); // might have another expression than true\n})();\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 8886798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b542c488b940e79db58c174345b59662?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Klaers", "link": "https://stackoverflow.com/users/8886798/jordan-klaers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 1, "answer_count": 4, "score": 2, "last_activity_date": 1562853058, "creation_date": 1562798575, "question_id": 56979530, "link": "https://stackoverflow.com/questions/56979530/while-loops-crashes-but-recursive-function-throws-maximum-call-stack-exceeded-e", "title": "While loops crashes, but recursive function throws maximum call stack exceeded error", "body": "<p>This is a simple question but I couldn't find anyone addressing it. </p>\n\n<p>Using chrome, running a program over localhost.\nIf I have a while loop that never breaks the condition, it causes the page to freeze, no erros and I cant even close the tab on chrome.</p>\n\n<p>If I have a recursive function, that calls itself infinitely. A maximum call stack error will be thrown.</p>\n\n<p>Why is there no fail safe for while loops? How can I avoid the page freezing when a while loop runs indefinitely?\n(other than properly writing a while loop) </p>\n"}, {"tags": ["javascript", "java", "android", "firebase", "firebase-realtime-database"], "answers": [{"comments": [{"owner": {"reputation": 411025, "user_id": 209103, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/12d378e6a9788ab9c94bbafe242b82b4?s=128&d=identicon&r=PG", "display_name": "Frank van Puffelen", "link": "https://stackoverflow.com/users/209103/frank-van-puffelen"}, "edited": false, "score": 0, "creation_date": 1562815837, "post_id": 56980037, "comment_id": 100498024, "body": "In fact it is fairly common to use this approach to write both locations with one call to <code>updateChildren(...)</code> as shown here: <a href=\"https://firebase.googleblog.com/2015/09/introducing-multi-location-updates-and_86.html\" rel=\"nofollow noreferrer\">firebase.googleblog.com/2015/09/&hellip;</a>"}], "tags": [], "owner": {"reputation": 361, "user_id": 10452701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZuD4B.jpg?s=128&g=1", "display_name": "Nurbol", "link": "https://stackoverflow.com/users/10452701/nurbol"}, "is_accepted": true, "score": 1, "last_activity_date": 1562803184, "creation_date": 1562803184, "answer_id": 56980037, "question_id": 56979523, "link": "https://stackoverflow.com/questions/56979523/get-firebase-uid-when-push-then-push-again-with-the-given-uid-in-java/56980037#56980037", "title": "Get Firebase UID when push, then push again with the given UID in Java", "body": "<p>Firebase's <code>databaseRef.push()</code> returns again <code>DatabaseReference</code> object with a random key. So it is possible to get key like this:</p>\n\n<pre><code>database = FirebaseDatabase.getInstance().getReference(\"notificacionesAdmin/\");\nfinal String key = database.push().getKey();\ndatabase.child(key).setValue(notificacion).addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\n    @Override\n    public void onComplete(@NonNull Task&lt;Void&gt; task) {\n        // Here use the key!\n    }\n});\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 11365755, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-n1cv4dDSEMY/AAAAAAAAAAI/AAAAAAAAAQk/D8L9lkhB2ug/photo.jpg?sz=128", "display_name": "H3lltronik", "link": "https://stackoverflow.com/users/11365755/h3lltronik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 56980037, "answer_count": 1, "score": 2, "last_activity_date": 1562815748, "creation_date": 1562798497, "last_edit_date": 1562815748, "question_id": 56979523, "link": "https://stackoverflow.com/questions/56979523/get-firebase-uid-when-push-then-push-again-with-the-given-uid-in-java", "title": "Get Firebase UID when push, then push again with the given UID in Java", "body": "<p>Hi I have the following code written in Javascript and I need to do the same in Java, there's the code:</p>\n\n<pre><code>firebase.database().ref('notificacionesAdmin/').push(notificacion).then(res =&gt; {\n                    firebase.database().ref('notificacionesAdmin/' + res.key).child('idNotificacion').set(res.key)           \n</code></pre>\n\n<p>It's a simple push but it waits untill the first push is done, then it push again inside the last pushed child and inside of it write the UID of the node\n<br>Something like this:</p>\n\n<pre><code>uniqueid :{\n    idNotificacion: uniqueid\n    ....\n}\n</code></pre>\n\n<p><br>I tried doing something like this but it doesn't return any UID or I just missing something</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>database = FirebaseDatabase.getInstance().getReference(\"notificacionesAdmin/\");\ndatabase.push().setValue(notificacion).addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\n    @Override\n    public void onComplete(@NonNull Task&lt;Void&gt; task) {\n        // How to get the pushed child uid?\n    }\n});\n</code></pre>\n\n<p>Thanks for your help</p>\n"}, {"tags": ["javascript", "asp.net-mvc", "angular", "model-view-controller"], "comments": [{"owner": {"reputation": 7845, "user_id": 5734311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iVq7.jpg?s=128&g=1", "display_name": "Chris G", "link": "https://stackoverflow.com/users/5734311/chris-g"}, "edited": false, "score": 0, "creation_date": 1562798362, "post_id": 56979486, "comment_id": 100494858, "body": "The browser console can display all client-side XHRs. Do you see any request there at all?"}, {"owner": {"reputation": 11, "user_id": 4371027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380fb7ec86f40d70c39c75f978b7c4f3?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Cerillo", "link": "https://stackoverflow.com/users/4371027/nicholas-cerillo"}, "reply_to_user": {"reputation": 7845, "user_id": 5734311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iVq7.jpg?s=128&g=1", "display_name": "Chris G", "link": "https://stackoverflow.com/users/5734311/chris-g"}, "edited": false, "score": 0, "creation_date": 1562799480, "post_id": 56979486, "comment_id": 100495108, "body": "the following warnings are the only output that come from the console                            **client:148 [WDS] Warnings while compiling. warnings @ client:148  ./node_modules/@angular/http/src/backends/xhr_backend.js 167:24-52 &quot;export &#39;<b>platform_browser_private</b>&#39; was not found in &#39;@angular/platform-browser&#39;**@client 154"}, {"owner": {"reputation": 7845, "user_id": 5734311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iVq7.jpg?s=128&g=1", "display_name": "Chris G", "link": "https://stackoverflow.com/users/5734311/chris-g"}, "edited": false, "score": 1, "creation_date": 1562799876, "post_id": 56979486, "comment_id": 100495179, "body": "If you&#39;re getting warnings, please add them to your question. (also, you might need to turn on XHRs in the console&#39;s filter settings)"}, {"owner": {"reputation": 160, "user_id": 5162254, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4NcK60T1SWM/AAAAAAAAAAI/AAAAAAAAAEc/fdTDyk6R8Tc/photo.jpg?sz=128", "display_name": "Red Devil", "link": "https://stackoverflow.com/users/5162254/red-devil"}, "edited": false, "score": 0, "creation_date": 1562799883, "post_id": 56979486, "comment_id": 100495181, "body": "Could you please  try to update the api URL to private heroesUrl = &#39;<a href=\"http://localhost:44339/api/Heroes/GetAll\" rel=\"nofollow noreferrer\">localhost:44339/api/Heroes/GetAll</a>&#39;;"}, {"owner": {"reputation": 11, "user_id": 4371027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380fb7ec86f40d70c39c75f978b7c4f3?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Cerillo", "link": "https://stackoverflow.com/users/4371027/nicholas-cerillo"}, "edited": false, "score": 0, "creation_date": 1562801604, "post_id": 56979486, "comment_id": 100495518, "body": "Sorry, I meant switch it to &#39;heroes&#39; over &#39;values&#39; before I had posted it, but I forgot to fix my initial post to include that. the inclusion of GetAll at the end of the url doesn&#39;t seem to work. same results"}, {"owner": {"reputation": 407, "user_id": 9641914, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LzVgH.jpg?s=128&g=1", "display_name": "satsvelke", "link": "https://stackoverflow.com/users/9641914/satsvelke"}, "edited": false, "score": 0, "creation_date": 1562815617, "post_id": 56979486, "comment_id": 100497979, "body": "the wrong URL, I think, you put controller name as values it should be Heroes"}, {"owner": {"reputation": 11, "user_id": 4371027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380fb7ec86f40d70c39c75f978b7c4f3?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Cerillo", "link": "https://stackoverflow.com/users/4371027/nicholas-cerillo"}, "edited": false, "score": 0, "creation_date": 1562867722, "post_id": 56979486, "comment_id": 100523994, "body": "So did some edits and now I have an error that I&#39;m familiar with, but still not sure how to resolve it <code>Access to XMLHttpRequest at &#39;https:&#47;&#47;localhost:44339&#47;api&#47;heroes&#47;&#39; from origin &#39;http:&#47;&#47;localhost:4200&#39; has been blocked by CORS policy: No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource.</code> I know the urls need to match, but I&#39;m not sure how to go about correcting that in code so that they DO match."}], "answers": [{"tags": [], "owner": {"reputation": 15130, "user_id": 1679126, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/82c8608808b8c4c719e9d0c71fb5c366?s=128&d=identicon&r=PG", "display_name": "Adrian Brand", "link": "https://stackoverflow.com/users/1679126/adrian-brand"}, "is_accepted": false, "score": 0, "last_activity_date": 1562811731, "creation_date": 1562811731, "answer_id": 56980832, "question_id": 56979486, "link": "https://stackoverflow.com/questions/56979486/http-request-not-reaching-mvc-backend-no-errors-showing-why/56980832#56980832", "title": "Http request not reaching MVC Backend. No Errors Showing Why", "body": "<p>Are you subscribing to the Observable returned from getHeroes?</p>\n\n<pre><code>heroService.getHeros()\n</code></pre>\n\n<p>Will not fire a http request, it will return an observable that fires a http request when subscribed to.</p>\n\n<pre><code>heroService.getHeros().subscriber(heros =&gt; {\n  // do stuff with heroes, this will fire off a http request\n});\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4371027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380fb7ec86f40d70c39c75f978b7c4f3?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Cerillo", "link": "https://stackoverflow.com/users/4371027/nicholas-cerillo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 244, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1562811731, "creation_date": 1562798173, "question_id": 56979486, "link": "https://stackoverflow.com/questions/56979486/http-request-not-reaching-mvc-backend-no-errors-showing-why", "title": "Http request not reaching MVC Backend. No Errors Showing Why", "body": "<p>I am trying to recreate the Tour of Heroes tutorial program in Angular, but this time with a MVC backend. however, there seems to be a disconnect between my HTTP Get Request, and the server when I try to get the list of Heroes. I'm not sure what could be causing this issue, as there isn't any error output showing when I wrong the applications. (both the frontend and backend are running from VSC and VS respectively). Any input you guys can provide would be fantastic. </p>\n\n<p>Below is the code for my heroes service, and heroes controller.</p>\n\n<pre><code>     import { Injectable } from '@angular/core';\n     import { HttpClient, HttpHeaders } from '@angular/common/http';\n\n     import { Observable, of } from 'rxjs'; \n     import { catchError, map, tap } from 'rxjs/operators';\n\n     import { Hero } from './heroes';\n     import { MessageService } from './messages.service';\n\n     const httpOptions = {\n      headers: new HttpHeaders({ 'Content-Type': 'application/json' })\n      };\n\n@Injectable()\nexport class HeroService {\n\n  private heroesUrl = 'http://localhost:44339/api/values';  // URL to web api\n\n  constructor( private http: HttpClient, private messageService:    MessageService) { }\n\n  /** GET heroes from the server */\n  getHeroes (): Observable&lt;Hero[]&gt; {\n    return this.http.get&lt;Hero[]&gt;(this.heroesUrl);\n\n  }\n\n}\n``````````````\nusing System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Threading.Tasks;\nusing HeroApi.Models;\nusing Microsoft.AspNetCore.Mvc;\n\nnamespace HeroApi.Controllers\n{\n    [Route(\"api/[controller]\")]\n    [ApiController]\n    public class HeroesController : ControllerBase\n    {\n\n        [HttpGet]\n        public IEnumerable&lt;Hero&gt; GetAll()\n        {\n            var list = new List&lt;Hero&gt;();\n            list.Add(new Hero() { name = \"Dynamo\" , id = 1});\n            list.Add(new Hero() { name = \"Captain Fission\", id = 2 });\n            return list;\n        }\n\n\n        [HttpGet(\"{id}\")]\n        public Hero Get(int Id)\n        {\n            return new Hero(){ id = Id };\n        }\n\n\n        [HttpPost]\n        public void Post([FromBody] string value)\n        {\n        }\n\n\n        [HttpPut(\"{id}\")]\n        public void Put(int id, [FromBody] string value)\n        {\n        }\n\n\n        [HttpDelete(\"{id}\")]\n        public void Delete(int id)\n        {\n        }\n    }\n}\n``````````````\n</code></pre>\n"}, {"tags": ["javascript", "html", "css"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1562798016, "post_id": 56979455, "comment_id": 100494762, "body": "Use <code>event.currentTarget</code>"}, {"owner": {"reputation": 109, "user_id": 2623819, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000236563322/picture?type=large", "display_name": "Abdel Hidalgo", "link": "https://stackoverflow.com/users/2623819/abdel-hidalgo"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1562798115, "post_id": 56979455, "comment_id": 100494791, "body": "yes, it works, thank you"}], "owner": {"reputation": 109, "user_id": 2623819, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000236563322/picture?type=large", "display_name": "Abdel Hidalgo", "link": "https://stackoverflow.com/users/2623819/abdel-hidalgo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 17, "favorite_count": 0, "closed_date": 1562798055, "answer_count": 0, "score": 0, "last_activity_date": 1562798325, "creation_date": 1562797930, "last_edit_date": 1562798325, "question_id": 56979455, "link": "https://stackoverflow.com/questions/56979455/how-to-prevent-elements-ex-an-icon-inside-another-element-ex-a-button-from", "closed_reason": "Duplicate", "title": "How to prevent elements (ex: an icon) inside another element (Ex: a button) from getting the click event", "body": "<p>I have a button element and inside it contains an icon. Something like:</p>\n\n<pre><code>&lt;button class=\"btn d-inline like\"&gt;&lt;i class=\"fas fa-thumbs-up fa-lg\"&gt;&lt;/i&gt;&lt;/button&gt;\n</code></pre>\n\n<p>when I click on le \"thum\" rendered, my goal is to get the event click as if I make click all the time on the button. In my javascript, I get the element clicked par example with some code like:</p>\n\n<pre><code>$('.like').on('click', function (event) {\nevent.preventDefault();\nconsole.log(event.target)\n</code></pre>\n\n<p>and depending on where I click I get the icon or the button in the console log. How can I click on that and get every time only the button?</p>\n\n<p><strong>Regarding the duplicate tag:</strong> How am I supposed to know the question has another answer if I didn't know currentTarget existed.</p>\n"}, {"tags": ["javascript", "reactjs"], "comments": [{"owner": {"reputation": 797, "user_id": 10291275, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-545_MVCSvyE/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMN3-KZWo1K-xbYjOmpL3h1vS07dw/mo/photo.jpg?sz=128", "display_name": "seanulus", "link": "https://stackoverflow.com/users/10291275/seanulus"}, "edited": false, "score": 0, "creation_date": 1562798951, "post_id": 56979453, "comment_id": 100494982, "body": "I&#39;m curious, what is your use case for storing the method of the same class in it&#39;s own state?"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 11551795, "user_type": "registered", "profile_image": "https://graph.facebook.com/232824254364970/picture?type=large", "display_name": "Marco Biglia", "link": "https://stackoverflow.com/users/11551795/marco-biglia"}, "edited": false, "score": 0, "creation_date": 1562814303, "post_id": 56979541, "comment_id": 100497739, "body": "Thanks, it worked, do I have to do this just in case I use a function in my state at the beginning? Because it seems that all the other times the &quot;below&quot; syntax is working fine.. or  I&#39;m just dumb"}, {"owner": {"reputation": 35558, "user_id": 3794812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0edf514cf8b70557fab4557205a956?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Tower", "link": "https://stackoverflow.com/users/3794812/nicholas-tower"}, "reply_to_user": {"reputation": 33, "user_id": 11551795, "user_type": "registered", "profile_image": "https://graph.facebook.com/232824254364970/picture?type=large", "display_name": "Marco Biglia", "link": "https://stackoverflow.com/users/11551795/marco-biglia"}, "edited": false, "score": 0, "creation_date": 1562818156, "post_id": 56979541, "comment_id": 100498437, "body": "You only need to do it if initializing one class field depends on another class field."}], "tags": [], "owner": {"reputation": 35558, "user_id": 3794812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0edf514cf8b70557fab4557205a956?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Tower", "link": "https://stackoverflow.com/users/3794812/nicholas-tower"}, "is_accepted": true, "score": 3, "last_activity_date": 1562798984, "last_edit_date": 1562798984, "creation_date": 1562798645, "answer_id": 56979541, "question_id": 56979453, "link": "https://stackoverflow.com/questions/56979453/react-arrow-functions-error-proposal-class-fields/56979541#56979541", "title": "React - Arrow functions error (proposal class fields)", "body": "<p>When those class properties are transpiled, they get moved to the end of the constructor, <em>in the order that they are written</em>. So when you do this...</p>\n\n<pre><code>class Example {\n  state = {\n    hello: this.hello()\n  }; \n\n  hello = () =&gt; {\n    return 'hello;\n  };\n}\n</code></pre>\n\n<p>...it gets transpiled into roughly this:</p>\n\n<pre><code>class Example {\n  constructor() {\n    this.state = {\n      hello: this.hello()\n    };\n\n    this.hello = () =&gt; {\n      return 'hello;\n    };\n  }\n}\n</code></pre>\n\n<p>In this transpiled code, you're trying to access this.hello before this.hello has been defined, and thus you get the error. Instead, you need to change the order, so that you define the function first, and use it after.</p>\n\n<pre><code>class Example {\n  hello = () =&gt; {\n    return 'hello;\n  };\n\n  state = {\n    hello: this.hello()\n  }; \n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 11551795, "user_type": "registered", "profile_image": "https://graph.facebook.com/232824254364970/picture?type=large", "display_name": "Marco Biglia", "link": "https://stackoverflow.com/users/11551795/marco-biglia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 56979541, "answer_count": 1, "score": 2, "last_activity_date": 1562798984, "creation_date": 1562797921, "question_id": 56979453, "link": "https://stackoverflow.com/questions/56979453/react-arrow-functions-error-proposal-class-fields", "title": "React - Arrow functions error (proposal class fields)", "body": "<p>These are working</p>\n\n<pre><code>constructor(props) {\n    super(props);\n    this.state = {\n      hello: this.hello()\n    };\n\n    this.hello = this.hello.bind(this);\n  }\n\n  hello() {\n    return 'hello';\n  }\n</code></pre>\n\n<pre><code> constructor(props) {\n    super(props);\n    this.state = {\n      hello: this.hello()\n    };\n  }\n\n  hello = () =&gt; {\n    return 'hello';\n  };\n</code></pre>\n\n<pre><code>state = {\n    hello: this.hello()\n  };\n\n  hello() {\n    return 'hello';\n  }\n</code></pre>\n\n<p>And this one is NOT</p>\n\n<pre><code>state = {\n    hello: this.hello()\n  };\n\n  hello = () =&gt; {\n    return 'hello;\n  };\n</code></pre>\n\n<p>I don't get it. The third example can't even access 'this' (including props)\nHow am I supposed to use a binded function in the state when I write the state this way, and why doesn't it work?</p>\n\n<p>This is the error I receive (NOT in the console, which says successful, but on the site)</p>\n\n<p>TypeError: this.hello is not a function</p>\n\n<p>app/src/Page.js:11\n   8 |  };\n   9 | \n  10 |  state = {</p>\n\n<blockquote>\n  <p>11 |    hello: this.hello()\n       | ^  12 |  };\n    13 | \n    14 |  hello = () => {</p>\n</blockquote>\n"}, {"tags": ["javascript", "google-analytics", "google-tag-manager", "web-performance", "google-optimize"], "comments": [{"owner": {"reputation": 30138, "user_id": 2144578, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6sbqF.png?s=128&g=1", "display_name": "Barry Pollard", "link": "https://stackoverflow.com/users/2144578/barry-pollard"}, "edited": false, "score": 0, "creation_date": 1562825912, "post_id": 56979397, "comment_id": 100500709, "body": "What are you loading in GTM? If it\u2019s loads of tags, many of which use custom JavaScript then that\u2019s your problem - not how GTM itself is loaded. You should run <a href=\"https://www.webpagetest.org\" rel=\"nofollow noreferrer\">webpagetest.org</a> on your site and include a link here. I\u2019d also suggest that you should look at your users experience rather than trying to trick web performance measurement tools by delaying scripts so they don\u2019t notice. The tools are for your benefit to suggest improvements and fooling them is only fooling yourself."}], "answers": [{"tags": [], "owner": {"reputation": 1412, "user_id": 5168457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ceb51d358a087b9c63c2f47c00da965f?s=128&d=identicon&r=PG&f=1", "display_name": "kgrg", "link": "https://stackoverflow.com/users/5168457/kgrg"}, "is_accepted": true, "score": 1, "last_activity_date": 1562853572, "last_edit_date": 1562853572, "creation_date": 1562840644, "answer_id": 56987074, "question_id": 56979397, "link": "https://stackoverflow.com/questions/56979397/how-to-fix-websites-performance-after-installing-google-tag-manager/56987074#56987074", "title": "How to fix websites performance after installing google tag manager?", "body": "<p>You can use GTM to utilise various triggers on pages, and link different tags to these events. Page view trigger is launched when GTM is initialized. DOM trigger is launched when page is loaded, and Window Loaded trigger is launched when all resources are loaded. You can use these to postpone launch of non-time critical tags, scripts and tools. Further details on these triggers are available in this <a href=\"https://support.google.com/tagmanager/answer/7679319?hl=en\" rel=\"nofollow noreferrer\">support article</a>.</p>\n"}], "owner": {"reputation": 23, "user_id": 5904251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6be948cbcd0c53f890bfddb4a9b2960b?s=128&d=identicon&r=PG&f=1", "display_name": "seancrazygeek", "link": "https://stackoverflow.com/users/5904251/seancrazygeek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1609, "favorite_count": 0, "accepted_answer_id": 56987074, "answer_count": 1, "score": 2, "last_activity_date": 1562853572, "creation_date": 1562797448, "question_id": 56979397, "link": "https://stackoverflow.com/questions/56979397/how-to-fix-websites-performance-after-installing-google-tag-manager", "title": "How to fix websites performance after installing google tag manager?", "body": "<p>We have google tag manager running on our site. I used to put it as well as some other non urgent scripts inside a javascript \"setTimeout\" of 3.5 seconds on page load which was a trick I used to give fantastic performance scores on many performance testing tools. However, Google Optimize which is also running would not validate on our site due to the delay in the setTimeout - it only works when it is run on page load without timer delays. </p>\n\n<p>After moving GTM out of the timeout, it has tanked our scores on performance from around 90 to between 20 and 40.</p>\n\n<p>I understand that this likely is due to whats being loaded in GTM but I don't have the ability to not load some of these items in there.</p>\n\n<p>Im wondering if there are other methods to improve page speed performance in a situation like this in which I need GTM and Google optimize loading with the page. The majority of other performance items on our site have already been optimized which is why this drop is so shocking.</p>\n\n<p>Ive attempted to move this GTM tag to the footer as well as set it to load using window.onload but have had no luck. Also, it already is setup using async.</p>\n\n<p>This is what I have it set as now but it is killing performance.</p>\n\n<pre><code>(function () {\n            var e = document.createElement('script');\n            e.async = true;\n            e.src = 'https://www.googletagmanager.com/gtag/js?id=UA-###';\n            var s = document.getElementsByTagName('script')[0];\n            s.parentNode.insertBefore(e, s);\n\n            window.dataLayer = window.dataLayer || [];\n\n            function gtag() {\n                dataLayer.push(arguments);\n            }\n\n            gtag('js', new Date());\n\n            gtag('config', 'UA-###', {'optimize_id': 'GTM-###'});\n        }());\n</code></pre>\n"}, {"tags": ["javascript", "object"], "comments": [{"owner": {"reputation": 162920, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1562797268, "post_id": 56979358, "comment_id": 100494566, "body": "Do  search for <i>&quot;deep equal&quot;</i> comparison"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1562797369, "post_id": 56979358, "comment_id": 100494584, "body": "The duplicate question mentions the <code>angular.equals()</code> function that should do what you want."}, {"owner": {"reputation": 2329, "user_id": 5708097, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7c8632c33f0785007fca66606a46e417?s=128&d=identicon&r=PG&f=1", "display_name": "Rolly", "link": "https://stackoverflow.com/users/5708097/rolly"}, "edited": false, "score": 0, "creation_date": 1562797390, "post_id": 56979358, "comment_id": 100494591, "body": "I think your need to create a recursive function."}, {"owner": {"reputation": 1633, "user_id": 2183592, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/83404851cf2344785185e3d10c246af7?s=128&d=identicon&r=PG", "display_name": "pengz", "link": "https://stackoverflow.com/users/2183592/pengz"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1562797463, "post_id": 56979358, "comment_id": 100494612, "body": "@Barmar there is no equivalent angular.equals() in Angular2+. I have updated the question to specify."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1562797631, "post_id": 56979358, "comment_id": 100494667, "body": "Well, there are 63 other answers in the other question. I&#39;m sure one of them will work for you."}, {"owner": {"reputation": 1633, "user_id": 2183592, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/83404851cf2344785185e3d10c246af7?s=128&d=identicon&r=PG", "display_name": "pengz", "link": "https://stackoverflow.com/users/2183592/pengz"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1562798023, "post_id": 56979358, "comment_id": 100494763, "body": "@Barmar thanks! very helpful"}], "owner": {"reputation": 1633, "user_id": 2183592, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/83404851cf2344785185e3d10c246af7?s=128&d=identicon&r=PG", "display_name": "pengz", "link": "https://stackoverflow.com/users/2183592/pengz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "closed_date": 1562797333, "answer_count": 0, "score": 0, "last_activity_date": 1562797495, "creation_date": 1562797165, "last_edit_date": 1562797495, "question_id": 56979358, "link": "https://stackoverflow.com/questions/56979358/check-if-two-objects-are-the-same-with-nested-arrays-of-objects-in-javascript", "closed_reason": "Duplicate", "title": "Check if two objects are the same with nested arrays of objects in javascript", "body": "<p>I am writing a comparison function to check if two objects are identical, including nested arrays.</p>\n\n<p>Note: There is another similar question using angular.equals() but there is no equivalent in Angular 2+. I am using Angular 8.</p>\n\n<p>The purpose is to check if a value has been changed in a form in Angular 8 reactive forms. The <a href=\"https://stackoverflow.com/questions/50405358/angular-5-form-dirty-check\">selected answer to this similar question</a> provides an answer on how to compare two objects, however the check function is single-level only. I need to be able to check if two arrays of objects are the same (order does not matter).</p>\n\n<p>Here is a JS Fiddle:\n<a href=\"https://jsfiddle.net/xtrn4quf/\" rel=\"nofollow noreferrer\">https://jsfiddle.net/xtrn4quf/</a></p>\n\n<pre><code>// Check if two objects are the same\n// TODO: Update to iterate over nested arrays, order of array elements should not matter\nfunction checkSame(a, b) {\n\n  let isSame = true;\n\n  for (let prop in a) {\n    if (a[prop] !== b[prop]) {\n      // ISSUE: Returning not the same if value is an array\n      console.log(`${prop} not the same! ${JSON.stringify(prop)}`);\n      isSame = false;\n    }\n  }\n\n  return isSame;\n}\n\nlet a = {\n  'Title': 'Example title',\n  'Description': 'Example description',\n  'Items': [{\n    'NestedObject1': true\n  }, {\n    'NestedObject2': true\n  }, {\n    'NestedObject3': true\n  }]\n};\n\nlet b = {\n  'Title': 'Example title',\n  'Description': 'Example description',\n  'Items': [{\n    'NestedObject1': true\n  }, {\n    'NestedObject2': true\n  }, {\n    'NestedObject3': true\n  }]\n};\n\nlet c = {\n  'Title': 'Example title',\n  'Description': 'Example description',\n  'Items': [{\n    'NestedObject1': true\n  }, {\n    'NestedObject2': false\n  }, {\n    'NestedObject3': true\n  }]\n};\n\nconsole.log(checkSame(a, b)); // returns false but should return true, 'Items' array of objects is not the same but it should be the same\nconsole.log(checkSame(a, c)); // returns false but should return true\n</code></pre>\n"}, {"tags": ["javascript", "reactjs", "object", "ecmascript-6"], "comments": [{"owner": {"reputation": 7845, "user_id": 5734311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iVq7.jpg?s=128&g=1", "display_name": "Chris G", "link": "https://stackoverflow.com/users/5734311/chris-g"}, "edited": false, "score": 0, "creation_date": 1562799759, "post_id": 56979291, "comment_id": 100495152, "body": "There&#39;s no need for <code>require</code>; just use <code>src={`..&#47;..&#47;assets&#47;images&#47;${data.image}`}</code>"}], "answers": [{"tags": [], "owner": {"reputation": 38349, "user_id": 10221765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e762fef8d87381d5cbd58d851d1b816?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Bashford", "link": "https://stackoverflow.com/users/10221765/jack-bashford"}, "is_accepted": true, "score": 2, "last_activity_date": 1562797154, "creation_date": 1562797154, "answer_id": 56979357, "question_id": 56979291, "link": "https://stackoverflow.com/questions/56979291/react-import-image-from-local-storage/56979357#56979357", "title": "React import image from local storage", "body": "<p>You'd need to have only the backticks `` around the file path:</p>\n\n<pre><code>&lt;img src={require(`../../assets/images/${data.image}`)}&gt;\n</code></pre>\n\n<p>And <code>require</code> is Node-specific IIRC - you may need to use <code>import</code> for a React project (unless it's both React and Node somehow).</p>\n"}, {"comments": [{"owner": {"reputation": 115, "user_id": 8764842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c62118f6e3d4da4c3d3c288a20f96c82?s=128&d=identicon&r=PG&f=1", "display_name": "Ryoush", "link": "https://stackoverflow.com/users/8764842/ryoush"}, "edited": false, "score": 0, "creation_date": 1562797307, "post_id": 56979360, "comment_id": 100494572, "body": "Yes i know this way but main problem is my image path comes from my data"}, {"owner": {"reputation": 37, "user_id": 8891636, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VcDT4.jpg?s=128&g=1", "display_name": "SniperWolf N7", "link": "https://stackoverflow.com/users/8891636/sniperwolf-n7"}, "reply_to_user": {"reputation": 115, "user_id": 8764842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c62118f6e3d4da4c3d3c288a20f96c82?s=128&d=identicon&r=PG&f=1", "display_name": "Ryoush", "link": "https://stackoverflow.com/users/8764842/ryoush"}, "edited": false, "score": 0, "creation_date": 1562816116, "post_id": 56979360, "comment_id": 100498071, "body": "Ah, I see. In that case I think that Jack Bashford&#39;s answer should do the trick."}], "tags": [], "owner": {"reputation": 37, "user_id": 8891636, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VcDT4.jpg?s=128&g=1", "display_name": "SniperWolf N7", "link": "https://stackoverflow.com/users/8891636/sniperwolf-n7"}, "is_accepted": false, "score": 1, "last_activity_date": 1562797185, "creation_date": 1562797185, "answer_id": 56979360, "question_id": 56979291, "link": "https://stackoverflow.com/questions/56979291/react-import-image-from-local-storage/56979360#56979360", "title": "React import image from local storage", "body": "<p>Simply importing your image as a module should do the trick. </p>\n\n<p>From create-react-app docs (<a href=\"https://facebook.github.io/create-react-app/docs/adding-images-fonts-and-files\" rel=\"nofollow noreferrer\">https://facebook.github.io/create-react-app/docs/adding-images-fonts-and-files</a>):</p>\n\n<pre><code>import React from 'react';\nimport logo from './logo.png'; // Tell Webpack this JS file uses this image\n\nconsole.log(logo); // /logo.84287d09.png\n\nfunction Header() {\n  // Import result is the URL of your image\n  return &lt;img src={logo} alt=\"Logo\" /&gt;;\n}\n\nexport default Header;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 583, "user_id": 10272405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2cfdf6c1b7de7e555dbf40cfd583cfb?s=128&d=identicon&r=PG&f=1", "display_name": "moficodes", "link": "https://stackoverflow.com/users/10272405/moficodes"}, "is_accepted": false, "score": 1, "last_activity_date": 1562797272, "creation_date": 1562797272, "answer_id": 56979371, "question_id": 56979291, "link": "https://stackoverflow.com/questions/56979291/react-import-image-from-local-storage/56979371#56979371", "title": "React import image from local storage", "body": "<p>If you need to load local images, it should be in the public folder.\n<a href=\"https://facebook.github.io/create-react-app/docs/using-the-public-folder#when-to-use-the-public-folder\" rel=\"nofollow noreferrer\">https://facebook.github.io/create-react-app/docs/using-the-public-folder#when-to-use-the-public-folder</a></p>\n\n<p>You can also import the image you want to use. \n<a href=\"https://facebook.github.io/create-react-app/docs/adding-images-fonts-and-files\" rel=\"nofollow noreferrer\">https://facebook.github.io/create-react-app/docs/adding-images-fonts-and-files</a></p>\n"}], "owner": {"reputation": 115, "user_id": 8764842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c62118f6e3d4da4c3d3c288a20f96c82?s=128&d=identicon&r=PG&f=1", "display_name": "Ryoush", "link": "https://stackoverflow.com/users/8764842/ryoush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1131, "favorite_count": 0, "accepted_answer_id": 56979357, "answer_count": 3, "score": 0, "last_activity_date": 1562797742, "creation_date": 1562796650, "last_edit_date": 1562797742, "question_id": 56979291, "link": "https://stackoverflow.com/questions/56979291/react-import-image-from-local-storage", "title": "React import image from local storage", "body": "<p>How can i import local storage image in react?</p>\n\n<p>My data looks like this;</p>\n\n<pre><code>{ image:\"newimage.jpeg\" }\n</code></pre>\n\n<p>and I tried to do this:</p>\n\n<pre><code>&lt;img src={require(\"../../assets/images/`${data.image}`\")}&gt;\n</code></pre>\n\n<p>But its not working. Any suggestion will be glad.</p>\n"}, {"tags": ["javascript", "firebase", "google-cloud-firestore"], "comments": [{"owner": {"reputation": 3166, "user_id": 607477, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ZmZ72.jpg?s=128&g=1", "display_name": "andresmijares", "link": "https://stackoverflow.com/users/607477/andresmijares"}, "edited": false, "score": 0, "creation_date": 1562800768, "post_id": 56979266, "comment_id": 100495379, "body": "what is your use case here? you are going to get invoiced for the 2 operations in both cases"}], "answers": [{"comments": [{"owner": {"reputation": 1176, "user_id": 7441661, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c825bb88ec292cfb52eb1bfde4db1f57?s=128&d=identicon&r=PG&f=1", "display_name": "denski", "link": "https://stackoverflow.com/users/7441661/denski"}, "edited": false, "score": 0, "creation_date": 1562881603, "post_id": 56979761, "comment_id": 100529272, "body": "I didn\u2019t know this, but it still creates the chicken and egg situation of one potentially finishing before the other."}], "tags": [], "owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "is_accepted": false, "score": 0, "last_activity_date": 1562800742, "creation_date": 1562800742, "answer_id": 56979761, "question_id": 56979266, "link": "https://stackoverflow.com/questions/56979266/cloud-firestore-add-collection-and-sub-collection-in-one-go/56979761#56979761", "title": "Cloud Firestore: Add collection and sub collection in one go", "body": "<p>The random IDs for new documents are always generated on the client.  You can use the <a href=\"https://firebase.google.com/docs/reference/js/firebase.firestore.CollectionReference.html#doc\" rel=\"nofollow noreferrer\">doc()</a> method on a CollectionReference with no parameters to generate a reference to a document that has a random ID without actually adding the document.  You can then work with that reference's <a href=\"https://firebase.google.com/docs/reference/js/firebase.firestore.DocumentReference.html#id\" rel=\"nofollow noreferrer\">id property</a> immeidately, and create the document later.</p>\n"}], "owner": {"reputation": 1176, "user_id": 7441661, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c825bb88ec292cfb52eb1bfde4db1f57?s=128&d=identicon&r=PG&f=1", "display_name": "denski", "link": "https://stackoverflow.com/users/7441661/denski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1562800742, "creation_date": 1562796523, "last_edit_date": 1562800541, "question_id": 56979266, "link": "https://stackoverflow.com/questions/56979266/cloud-firestore-add-collection-and-sub-collection-in-one-go", "title": "Cloud Firestore: Add collection and sub collection in one go", "body": "<p>Reading the documentation I can't see a way if this is possible in a sensible way.</p>\n\n<p>I'm trying to create a document <code>team</code> with a sub document of <code>member</code>.</p>\n\n<p>And what I'm really trying to achieve is an in-complex way of structuring read/writes/updates on collections and sub collections.</p>\n\n<pre><code>async createTeam(newTeam, foundingTeamMember) {\n    const teams = db.collection('teams');\n    const teamRef = await db.collection('teams').add(newTeam);\n    const memberRef = await teams.doc(companyRef.id)\n      .collection('members').add(foundingTeamMember);\n\n    return({\n       teamId: teamRef.id,\n       memberId: memberRef.id,\n    });\n}\n</code></pre>\n\n<p>In particular is there a means of returning <code>teamId</code> and <code>memberId</code> without needing to use async / await?</p>\n\n<p>Something like:</p>\n\n<pre><code>  db\n    .collection('teams')\n\n    .add(newTeam)\n    .collection('members')\n    .add(foundingTeamMember).then(/* return collection parent ID */)\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "html", "json"], "comments": [{"owner": {"reputation": 7325, "user_id": 2359687, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b567febb6032c881398226a28bedc09c?s=128&d=identicon&r=PG", "display_name": "devlin carnate", "link": "https://stackoverflow.com/users/2359687/devlin-carnate"}, "edited": false, "score": 1, "creation_date": 1562796197, "post_id": 56979197, "comment_id": 100494309, "body": "What say your code is not working as expected.  What do you expect?"}, {"owner": {"reputation": 6091, "user_id": 933198, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/25a22103fd3210fdfa142843c7777ff1?s=128&d=identicon&r=PG", "display_name": "Lee Taylor", "link": "https://stackoverflow.com/users/933198/lee-taylor"}, "edited": false, "score": 0, "creation_date": 1562796212, "post_id": 56979197, "comment_id": 100494314, "body": "...and what is it not doing?"}, {"owner": {"reputation": 4819, "user_id": 9964622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bo9qD.jpg?s=128&g=1", "display_name": "The Dead Man", "link": "https://stackoverflow.com/users/9964622/the-dead-man"}, "edited": false, "score": 0, "creation_date": 1562796314, "post_id": 56979197, "comment_id": 100494342, "body": "Hi guys , I have updated my question , sorry for this"}, {"owner": {"reputation": 6091, "user_id": 933198, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/25a22103fd3210fdfa142843c7777ff1?s=128&d=identicon&r=PG", "display_name": "Lee Taylor", "link": "https://stackoverflow.com/users/933198/lee-taylor"}, "edited": false, "score": 0, "creation_date": 1562796370, "post_id": 56979197, "comment_id": 100494360, "body": "What are <code>movie</code> and <code>buttoid</code> ?"}, {"owner": {"reputation": 4819, "user_id": 9964622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bo9qD.jpg?s=128&g=1", "display_name": "The Dead Man", "link": "https://stackoverflow.com/users/9964622/the-dead-man"}, "edited": false, "score": 0, "creation_date": 1562796577, "post_id": 56979197, "comment_id": 100494404, "body": "@AndreiGheorghiu I have provided a json , I have one movie so far , there is no two movies as you can see in my json,"}, {"owner": {"reputation": 4819, "user_id": 9964622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bo9qD.jpg?s=128&g=1", "display_name": "The Dead Man", "link": "https://stackoverflow.com/users/9964622/the-dead-man"}, "reply_to_user": {"reputation": 6091, "user_id": 933198, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/25a22103fd3210fdfa142843c7777ff1?s=128&d=identicon&r=PG", "display_name": "Lee Taylor", "link": "https://stackoverflow.com/users/933198/lee-taylor"}, "edited": false, "score": 0, "creation_date": 1562796649, "post_id": 56979197, "comment_id": 100494426, "body": "@LeeTaylor there is one movie with name &#39;mena&#39; and contains two buttons  which have attribute buttonid,  now I want to display these buttons to the dom."}, {"owner": {"reputation": 6091, "user_id": 933198, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/25a22103fd3210fdfa142843c7777ff1?s=128&d=identicon&r=PG", "display_name": "Lee Taylor", "link": "https://stackoverflow.com/users/933198/lee-taylor"}, "edited": false, "score": 0, "creation_date": 1562796807, "post_id": 56979197, "comment_id": 100494454, "body": "OK. This clearly isn&#39;t even close to working code. You don&#39;t show your declaration of <code>movie</code> and you have a typo in your code <code>buttoid</code>...So the code you have would show <b>zero</b> buttons"}, {"owner": {"reputation": 162920, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 1, "creation_date": 1562796854, "post_id": 56979197, "comment_id": 100494465, "body": "Sure you aren&#39;t going through that loop twice? Code shown won&#39;t create 4 buttons by itself"}, {"owner": {"reputation": 58866, "user_id": 1891677, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/38c13c3ccee10dcfc38799fb45d5a65b?s=128&d=identicon&r=PG", "display_name": "tao", "link": "https://stackoverflow.com/users/1891677/tao"}, "edited": false, "score": 1, "creation_date": 1562796990, "post_id": 56979197, "comment_id": 100494497, "body": "@9964622, your code <a href=\"https://jsfiddle.net/websiter/Lhbcsrvy/\" rel=\"nofollow noreferrer\">does not do</a> what you&#39;re saying it does. Which means your question is unanswerable, because you&#39;re not showing the relevant code."}, {"owner": {"reputation": 4819, "user_id": 9964622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bo9qD.jpg?s=128&g=1", "display_name": "The Dead Man", "link": "https://stackoverflow.com/users/9964622/the-dead-man"}, "reply_to_user": {"reputation": 162920, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1562797092, "post_id": 56979197, "comment_id": 100494522, "body": "@charlietfl ur right."}, {"owner": {"reputation": 58866, "user_id": 1891677, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/38c13c3ccee10dcfc38799fb45d5a65b?s=128&d=identicon&r=PG", "display_name": "tao", "link": "https://stackoverflow.com/users/1891677/tao"}, "edited": false, "score": 0, "creation_date": 1562797332, "post_id": 56979197, "comment_id": 100494579, "body": "As a side note, I don&#39;t think <code>$(videobtns).html(movies[j].buttons.buttoid);</code> does what you think it does. Because it doesn&#39;t produce any HTML whatsoever."}, {"owner": {"reputation": 4819, "user_id": 9964622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bo9qD.jpg?s=128&g=1", "display_name": "The Dead Man", "link": "https://stackoverflow.com/users/9964622/the-dead-man"}, "reply_to_user": {"reputation": 58866, "user_id": 1891677, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/38c13c3ccee10dcfc38799fb45d5a65b?s=128&d=identicon&r=PG", "display_name": "tao", "link": "https://stackoverflow.com/users/1891677/tao"}, "edited": false, "score": 0, "creation_date": 1562797464, "post_id": 56979197, "comment_id": 100494613, "body": "@AndreiGheorghiu updated the question, that is why I needed help that its not working correctly"}, {"owner": {"reputation": 58866, "user_id": 1891677, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/38c13c3ccee10dcfc38799fb45d5a65b?s=128&d=identicon&r=PG", "display_name": "tao", "link": "https://stackoverflow.com/users/1891677/tao"}, "edited": false, "score": 0, "creation_date": 1562799182, "post_id": 56979197, "comment_id": 100495041, "body": "I&#39;ve <a href=\"https://jsfiddle.net/websiter/Lhbcsrvy/\" rel=\"nofollow noreferrer\">played a bit</a> with your json. &quot;Doesn&#39;t work as expected&quot; doesn&#39;t mean anything unless you explain the expectation unequivocally, at which point saying &quot;doesn&#39;t work as expected&quot; is stating the obvious, therefore useless."}, {"owner": {"reputation": 4819, "user_id": 9964622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bo9qD.jpg?s=128&g=1", "display_name": "The Dead Man", "link": "https://stackoverflow.com/users/9964622/the-dead-man"}, "reply_to_user": {"reputation": 58866, "user_id": 1891677, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/38c13c3ccee10dcfc38799fb45d5a65b?s=128&d=identicon&r=PG", "display_name": "tao", "link": "https://stackoverflow.com/users/1891677/tao"}, "edited": false, "score": 0, "creation_date": 1562799449, "post_id": 56979197, "comment_id": 100495102, "body": "@AndreiGheorghiu never mind I have figured out ,"}, {"owner": {"reputation": 58866, "user_id": 1891677, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/38c13c3ccee10dcfc38799fb45d5a65b?s=128&d=identicon&r=PG", "display_name": "tao", "link": "https://stackoverflow.com/users/1891677/tao"}, "edited": false, "score": 0, "creation_date": 1562799807, "post_id": 56979197, "comment_id": 100495163, "body": "You&#39;re welcome."}], "answers": [{"comments": [{"owner": {"reputation": 4819, "user_id": 9964622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bo9qD.jpg?s=128&g=1", "display_name": "The Dead Man", "link": "https://stackoverflow.com/users/9964622/the-dead-man"}, "edited": false, "score": 0, "creation_date": 1562797207, "post_id": 56979337, "comment_id": 100494548, "body": "@roll your soultion is good, I had many for loops , that is why it was generating 4 buttons"}, {"owner": {"reputation": 2329, "user_id": 5708097, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7c8632c33f0785007fca66606a46e417?s=128&d=identicon&r=PG&f=1", "display_name": "Rolly", "link": "https://stackoverflow.com/users/5708097/rolly"}, "reply_to_user": {"reputation": 162920, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1562797238, "post_id": 56979337, "comment_id": 100494553, "body": "@charlietfl i added the reason."}, {"owner": {"reputation": 2329, "user_id": 5708097, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7c8632c33f0785007fca66606a46e417?s=128&d=identicon&r=PG&f=1", "display_name": "Rolly", "link": "https://stackoverflow.com/users/5708097/rolly"}, "reply_to_user": {"reputation": 4819, "user_id": 9964622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bo9qD.jpg?s=128&g=1", "display_name": "The Dead Man", "link": "https://stackoverflow.com/users/9964622/the-dead-man"}, "edited": false, "score": 0, "creation_date": 1562800039, "post_id": 56979337, "comment_id": 100495214, "body": "@user9964622 just add what u need <code>currBtn.left</code>, <code>currBtn.top</code>, etc. This si basic, maybe you need to read little about json with javascript."}], "tags": [], "owner": {"reputation": 2329, "user_id": 5708097, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7c8632c33f0785007fca66606a46e417?s=128&d=identicon&r=PG&f=1", "display_name": "Rolly", "link": "https://stackoverflow.com/users/5708097/rolly"}, "is_accepted": false, "score": 0, "last_activity_date": 1562797210, "last_edit_date": 1562797210, "creation_date": 1562797007, "answer_id": 56979337, "question_id": 56979197, "link": "https://stackoverflow.com/questions/56979197/display-data-from-json-to-html-using-jquery/56979337#56979337", "title": "display data from json to html using jquery", "body": "<p>You have some miss variables errors. And some loops error, here is the solution</p>\n\n<ol>\n<li>Your code is not working.</li>\n<li>The reason you get 4 buttons is because you loop two times the array <code>movie[j].buttons.buttoid</code> which has two elements inside. so 2 times 2 = 4.</li>\n</ol>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/flatpickr/4.6.1/flatpickr.css\"&gt;\n&lt;/head&gt;\n    &lt;body&gt;\n        &lt;div id=\"video-container\"&gt;\n        &lt;/div&gt;\n    &lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/flatpickr/4.6.1/flatpickr.js\"&gt;&lt;/script&gt;\n    &lt;script&gt;\n        $(document).ready(function(){\n          var movies = [\n                {\n                    \"title\": \"Mena\",\n                    \"movieid\": \"1\",\n                    \"movie_url\": \"videos\\/mena.mp4\",\n                    \"buttons\": [\n                        {\n                            \"left\": 556,\n                            \"top\": 231,\n                            \"start_time\": 5.44,\n                            \"end_time\": 6.76,\n                            \"width\": 162,\n                            \"height\": 73,\n                            \"buttonid\": \"1\",\n                            \"label\": \"No\"\n                        },\n                        {\n                            \"left\": 200,\n                            \"top\": 200,\n                            \"start_time\": 5.56,\n                            \"end_time\": 6.56,\n                            \"width\": 162,\n                            \"height\": 100,\n                            \"buttonid\": \"2\",\n                            \"label\": \"Yes\"\n                        }\n                    ]\n                }\n            ]\n            for(var j=0; j&lt;movies.length; j++){\n                var currMovie = movies[j]\n                for(a=0; a&lt; currMovie.buttons.length; a++){\n                    var currBtn = currMovie.buttons[a];\n                    var videobtns = $(\"&lt;div class='video-btns'&gt;&lt;/div&gt;\")\n                    $(videobtns).html(currBtn.buttonid + currBtn.label);\n                    $(\"#video-container\").append(videobtns);\n                }\n            }       \n        });\n    &lt;/script&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n\n</code></pre>\n\n<p>and the live examle</p>\n\n<p><a href=\"https://codepen.io/rollrodrig/pen/YoBJJX\" rel=\"nofollow noreferrer\">https://codepen.io/rollrodrig/pen/YoBJJX</a></p>\n"}, {"comments": [{"owner": {"reputation": 4819, "user_id": 9964622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bo9qD.jpg?s=128&g=1", "display_name": "The Dead Man", "link": "https://stackoverflow.com/users/9964622/the-dead-man"}, "edited": false, "score": 0, "creation_date": 1562797798, "post_id": 56979361, "comment_id": 100494708, "body": "Hii claudio , its perfectly displaying the button, but what about attributes like {top, left, width, heght, etc} right now u have provided them through css, I want those from json , is it possible?"}, {"owner": {"reputation": 162920, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "reply_to_user": {"reputation": 4819, "user_id": 9964622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bo9qD.jpg?s=128&g=1", "display_name": "The Dead Man", "link": "https://stackoverflow.com/users/9964622/the-dead-man"}, "edited": false, "score": 0, "creation_date": 1562800048, "post_id": 56979361, "comment_id": 100495216, "body": "@user9964622 you can pass those to jQuery <code>css()</code> method"}, {"owner": {"reputation": 4819, "user_id": 9964622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bo9qD.jpg?s=128&g=1", "display_name": "The Dead Man", "link": "https://stackoverflow.com/users/9964622/the-dead-man"}, "edited": false, "score": 0, "creation_date": 1562800146, "post_id": 56979361, "comment_id": 100495239, "body": "Ye, i figured out now"}], "tags": [], "owner": {"reputation": 4282, "user_id": 2217859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vnucx.png?s=128&g=1", "display_name": "Claudio", "link": "https://stackoverflow.com/users/2217859/claudio"}, "is_accepted": false, "score": 1, "last_activity_date": 1562797192, "creation_date": 1562797192, "answer_id": 56979361, "question_id": 56979197, "link": "https://stackoverflow.com/questions/56979197/display-data-from-json-to-html-using-jquery/56979361#56979361", "title": "display data from json to html using jquery", "body": "<p>You have a few problems with your code, for instance <code>buttoid</code> should be <code>buttonid</code> and instead of <code>$(videobtns).html(movie[j].buttons.buttoid);</code> it needs to be something like <code>movies[j].buttons[a].buttonid</code> because <code>movie</code> is not a variable and you need to specify the <code>buttons</code> array index to access the <code>buttonid</code> property.</p>\n\n<p>I don't see why this code would produce 4 buttons with the given set of data beside it being executed twice.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var json = {\r\n    \"movies\": [\r\n        {\r\n            \"title\": \"Mena\",\r\n            \"movieid\": \"1\",\r\n            \"movie_url\": \"videos\\/mena.mp4\",\r\n            \"buttons\": [\r\n                {\r\n                    \"left\": 556,\r\n                    \"top\": 231,\r\n                    \"start_time\": 5.44,\r\n                    \"end_time\": 6.76,\r\n                    \"width\": 162,\r\n                    \"height\": 73,\r\n                    \"buttonid\": \"1\",\r\n                    \"label\": \"No\"\r\n                },\r\n                {\r\n                    \"left\": 200,\r\n                    \"top\": 200,\r\n                    \"start_time\": 5.56,\r\n                    \"end_time\": 6.56,\r\n                    \"width\": 162,\r\n                    \"height\": 100,\r\n                    \"buttonid\": \"2\",\r\n                    \"label\": \"Yes\"\r\n                }\r\n            ]\r\n        }\r\n    ]\r\n};  \r\n  \r\nfor(var j = 0; j &lt; json.movies.length; j++){\r\n  for(a=0; a &lt; json.movies[j].buttons.length; a++){\r\n    var videobtns = $(\"&lt;div class='video-btns'&gt;&lt;/div&gt;\");\r\n    $(videobtns).html(json.movies[j].buttons[a].buttonid);\r\n    $(\"#video-container\").append(videobtns);\r\n  }\r\n}</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>.video-btns {\r\n  background: blue;\r\n  padding: 10px;\r\n  margin: 10px;\r\n  width: 10px;\r\n  height: 10px;\r\n  color: white;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;div id=\"video-container\"&gt;&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user11162572"}, "reply_to_user": {"reputation": 4819, "user_id": 9964622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bo9qD.jpg?s=128&g=1", "display_name": "The Dead Man", "link": "https://stackoverflow.com/users/9964622/the-dead-man"}, "edited": false, "score": 0, "creation_date": 1562798968, "post_id": 56979382, "comment_id": 100494988, "body": "The example I provided illustrates how to access the buttons loop.   To access the other elements in the json object you can reference them the same way you reference the buttonid. for example:   var btn = data.movies[j].buttons[a];   var buttonId = btn.buttonid;  var top= btn.top;  To format the buttons you can set the values using jquery (for example)   $(&#39;&quot;#&quot; + btn.buttonId).css(&quot;top&quot;, btn.top);  or (this is not a good approach) you can set the values inline  by adding a style attribute to each button via the javascript loop.   style=&quot;&#39;top:&quot; + btn.top + &quot; left:&quot; +  btn.left&#39;&quot;"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user11162572"}, "is_accepted": false, "score": 0, "last_activity_date": 1562797350, "creation_date": 1562797350, "answer_id": 56979382, "question_id": 56979197, "link": "https://stackoverflow.com/questions/56979197/display-data-from-json-to-html-using-jquery/56979382#56979382", "title": "display data from json to html using jquery", "body": "<p>You have loop errors (and naming errors)\nmissing the index for the buttons:\ndata.movies[j].buttons[a]</p>\n\n<pre><code>var data = {\n    \"movies\" : [\n    {\n        \"title\": \"Mena\",\n        \"movieid\": \"1\",\n        \"movie_url\": \"videos\\/mena.mp4\",\n        \"buttons\": [\n    {\n        \"left\": 556,\n        \"top\": 231,\n        \"start_time\": 5.44,\n        \"end_time\": 6.76,\n         \"width\": 162,\n        \"height\": 73,\n        \"buttonid\": \"1\",\n        \"label\": \"No\"\n    },\n    {\n        \"left\": 200,\n        \"top\": 200,\n        \"start_time\": 5.56,\n        \"end_time\": 6.56,\n        \"width\": 162,\n        \"height\": 100,\n        \"buttonid\": \"2\",\n        \"label\": \"Yes\"\n    }\n]\n}\n]\n}\n\n\nfor(var j=0; j&lt;data.movies.length; j++){\n    for(a=0; a&lt; data.movies[j].buttons.length; a++){\n        var videobtns = $(\"&lt;div class='video-btns'&gt;\" + data.movies[j].buttons[a].buttonid + \"&lt;/div&gt;\")\n        $(\"#video-container\").append(videobtns);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 4819, "user_id": 9964622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bo9qD.jpg?s=128&g=1", "display_name": "The Dead Man", "link": "https://stackoverflow.com/users/9964622/the-dead-man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1562797381, "creation_date": 1562796025, "last_edit_date": 1562797381, "question_id": 56979197, "link": "https://stackoverflow.com/questions/56979197/display-data-from-json-to-html-using-jquery", "title": "display data from json to html using jquery", "body": "<p>I have a simple block I want to display buttons from json </p>\n\n<p>Here is my json movies</p>\n\n<pre><code>{\n    \"movies\": [\n        {\n            \"title\": \"Mena\",\n            \"movieid\": \"1\",\n            \"movie_url\": \"videos\\/mena.mp4\",\n            \"buttons\": [\n                {\n                    \"left\": 556,\n                    \"top\": 231,\n                    \"start_time\": 5.44,\n                    \"end_time\": 6.76,\n                    \"width\": 162,\n                    \"height\": 73,\n                    \"buttonid\": \"1\",\n                    \"label\": \"No\"\n                },\n                {\n                    \"left\": 200,\n                    \"top\": 200,\n                    \"start_time\": 5.56,\n                    \"end_time\": 6.56,\n                    \"width\": 162,\n                    \"height\": 100,\n                    \"buttonid\": \"2\",\n                    \"label\": \"Yes\"\n                }\n            ]\n        }\n    ]\n}\n</code></pre>\n\n<p>Here is my js for displaying buttons to the DOM</p>\n\n<pre><code>    for(var j=0; j&lt;movies.length; j++){\n        for(a=0; a&lt; movies[j].buttons.length; a++){\n\n            var videobtns = $(\"&lt;div class='video-btns'&gt;&lt;/div&gt;\")\n            $(videobtns).html(movie[j].buttons.buttoid);\n            $(\"#video-container\").append(videobtns);\n        }\n    }\n});\n</code></pre>\n\n<p>UPDATE</p>\n\n<blockquote>\n  <p>My solution is not working as expected, I had many for loops</p>\n</blockquote>\n\n<p>I would like to display these buttons with all its attributes (top, left, width, height, buttonid, label etc; </p>\n\n<p>What do I need to change to get this working? </p>\n"}, {"tags": ["javascript", "node.js", "redis"], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 2, "last_activity_date": 1562796378, "creation_date": 1562796378, "answer_id": 56979249, "question_id": 56979167, "link": "https://stackoverflow.com/questions/56979167/simple-unshift-and-unique-not-working-in-javascript/56979249#56979249", "title": "Simple unshift and unique not working in JavaScript", "body": "<p>The <code>unshift</code> method modifies the array in place, it doesn't return a new array. The return value of <code>unshift</code> is the new length of the array. So after</p>\n\n<pre><code>value = value.unshift(cday);\n</code></pre>\n\n<p>the <code>value</code> variable now contains a number, not the array.\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>value = [1, 2, 3, 4];\r\nvalue = value.unshift(10);\r\nconsole.log(value);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Just write</p>\n\n<pre><code>value.unshift(cday);\n</code></pre>\n\n<p>without reassigning the variable.</p>\n"}], "owner": {"reputation": 2334, "user_id": 2505093, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/69dafc9c96deb62537222b1cf02ce44c?s=128&d=identicon&r=PG", "display_name": "Curtis", "link": "https://stackoverflow.com/users/2505093/curtis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 56979249, "answer_count": 1, "score": -1, "last_activity_date": 1562796378, "creation_date": 1562795795, "last_edit_date": 1562796372, "question_id": 56979167, "link": "https://stackoverflow.com/questions/56979167/simple-unshift-and-unique-not-working-in-javascript", "title": "Simple unshift and unique not working in JavaScript", "body": "<p>Very simplistic code, yet been frying my brain for a few hours? So as you can see on the <code>add</code> function, it basically takes 2 params; an IP Address &amp; a UNIX date</p>\n\n<pre><code>const redis = require(\"redis\"), client = redis.createClient();\nconst {promisify} = require('util');\nconst getAsync = promisify(client.get).bind(client);\nconst setAsync = promisify(client.set).bind(client);\n\n_ = require('lodash');\n_weg = require('wegweg')({\n    globals: false\n});\n\nmodule.exports = {\n\n    add: async function (ip, cday) {\n        var key = _weg.md5('dact:' + ip);\n        return await getAsync(key).then((result) =&gt; {\n            let value;\n            if (result == null) {\n                value = [];\n            } else {\n                value = result;\n            }\n            value = value.unshift(cday);\n            value = _.uniq(value);\n            return setAsync(key, value);\n        });\n    }\n\n};\n</code></pre>\n\n<p>So if I'm going ahead and passing both:</p>\n\n<pre><code>await ping_history.add(\"127.0.0.1\", 1562774400);\n</code></pre>\n\n<p>It seems to not be inserting an array or something? <code>key</code> should be an <strong>MD5</strong> &amp; <code>value</code> should simply be an array of dates which are all unique.</p>\n"}, {"tags": ["javascript"], "comments": [{"owner": {"reputation": 369690, "user_id": 182668, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b19917aa04a6839aef577f1117c71d48?s=128&d=identicon&r=PG", "display_name": "Pointy", "link": "https://stackoverflow.com/users/182668/pointy"}, "edited": false, "score": 2, "creation_date": 1562795825, "post_id": 56979161, "comment_id": 100494195, "body": "Yes, give it a parameter."}], "answers": [{"tags": [], "owner": {"reputation": 3958, "user_id": 11081214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b53d0cefd959372f49e84b943a1187f?s=128&d=identicon&r=PG&f=1", "display_name": "Snow", "link": "https://stackoverflow.com/users/11081214/snow"}, "is_accepted": true, "score": 2, "last_activity_date": 1562795819, "creation_date": 1562795819, "answer_id": 56979170, "question_id": 56979161, "link": "https://stackoverflow.com/questions/56979161/pass-a-parameter-into-a-function-setting-a-settimeout/56979170#56979170", "title": "Pass a parameter into a function setting a setTimeout?", "body": "<p>Just specify the function as taking a parameter, and pass that parameter to <code>setTimeout</code>?</p>\n\n<pre><code>var addActiveDiv = (ms) =&gt; {\n  var activeEl = document.querySelector(\".o-wrapper\");\n  setTimeout(() =&gt; {\n    activeEl.classList.add(\"is-active\");\n  }, ms);\n}\n\naddActiveDiv(2000);\n\nexport { addActiveDiv }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 364, "user_id": 5182994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T60S4.jpg?s=128&g=1", "display_name": "Stanislav Zaleski", "link": "https://stackoverflow.com/users/5182994/stanislav-zaleski"}, "is_accepted": false, "score": 0, "last_activity_date": 1562796235, "creation_date": 1562796235, "answer_id": 56979223, "question_id": 56979161, "link": "https://stackoverflow.com/questions/56979161/pass-a-parameter-into-a-function-setting-a-settimeout/56979223#56979223", "title": "Pass a parameter into a function setting a setTimeout?", "body": "<p>Use parameters or default parameters.</p>\n\n<pre><code>var addActiveDiv = (timeout = 1850) =&gt; {\n  var activeEl = document.querySelector(\".o-wrapper\");\n  setTimeout(() =&gt; {\n    activeEl.classList.add(\"is-active\");\n  }, timeout);\n}\n\naddActiveDiv();\n\nexport { addActiveDiv }\n</code></pre>\n\n<pre><code>import { addActiveDiv } from \"foobar\";\n\naddActiveDiv(2000);\n</code></pre>\n"}], "owner": {"reputation": 295, "user_id": 7186325, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4328e04e666bc1e6dbf44adabf100028?s=128&d=identicon&r=PG&f=1", "display_name": "cmp", "link": "https://stackoverflow.com/users/7186325/cmp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 56979170, "answer_count": 2, "score": -2, "last_activity_date": 1562796235, "creation_date": 1562795752, "question_id": 56979161, "link": "https://stackoverflow.com/questions/56979161/pass-a-parameter-into-a-function-setting-a-settimeout", "title": "Pass a parameter into a function setting a setTimeout?", "body": "<p>Is there a way I can call this from another module specifying the timeout in brackets? </p>\n\n<pre><code>var addActiveDiv = () =&gt; {\n  var activeEl = document.querySelector(\".o-wrapper\");\n  setTimeout(() =&gt; {\n    activeEl.classList.add(\"is-active\");\n  }, 1850);\n}\n\naddActiveDiv();\n\nexport { addActiveDiv }\n</code></pre>\n\n<p>Something like </p>\n\n<p><code>addActiveDiv(2000);</code> <em>where 2000 is the <strong>new</strong> timeout?</em></p>\n"}, {"tags": ["javascript", "html", "html5-canvas"], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 8508722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c330d729c002f11b6526455d954e6beb?s=128&d=identicon&r=PG&f=1", "display_name": "Frost Zone", "link": "https://stackoverflow.com/users/8508722/frost-zone"}, "edited": false, "score": 0, "creation_date": 1562797793, "post_id": 56979321, "comment_id": 100494706, "body": "Thanks for the answer! So angle should be something like this: Math.atan(mouseY-playerY/mouseX-playerX)? Which should return a radian I believe. Correct? Thanks again!"}, {"owner": {"reputation": 437, "user_id": 11425141, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nmy9SRyGXik/AAAAAAAAAAI/AAAAAAAAAAc/O9aTREIppYk/photo.jpg?sz=128", "display_name": "Phillip S", "link": "https://stackoverflow.com/users/11425141/phillip-s"}, "reply_to_user": {"reputation": 109, "user_id": 8508722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c330d729c002f11b6526455d954e6beb?s=128&d=identicon&r=PG&f=1", "display_name": "Frost Zone", "link": "https://stackoverflow.com/users/8508722/frost-zone"}, "edited": false, "score": 0, "creation_date": 1562797968, "post_id": 56979321, "comment_id": 100494756, "body": "Math.atan((mouseY-playerY)/(mouseX-playerX)) &lt;- remember the parentheses! or distY = mouseY-playerY distX = mouseX-playerX and then Math.atan(distY/distX)"}, {"owner": {"reputation": 109, "user_id": 8508722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c330d729c002f11b6526455d954e6beb?s=128&d=identicon&r=PG&f=1", "display_name": "Frost Zone", "link": "https://stackoverflow.com/users/8508722/frost-zone"}, "edited": false, "score": 0, "creation_date": 1562799202, "post_id": 56979321, "comment_id": 100495048, "body": "It seems to be half working. Since the Math.atan() returns a radians it should be fine just inserting the value into the ctx.rotate() method right? But currently the character rotates properly half way then proceeds to be unable to rotate the full circle."}, {"owner": {"reputation": 109, "user_id": 8508722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c330d729c002f11b6526455d954e6beb?s=128&d=identicon&r=PG&f=1", "display_name": "Frost Zone", "link": "https://stackoverflow.com/users/8508722/frost-zone"}, "edited": false, "score": 0, "creation_date": 1562800360, "post_id": 56979321, "comment_id": 100495310, "body": "Thank you! It&#39;s working like a charm! Thank you for the help!"}, {"owner": {"reputation": 437, "user_id": 11425141, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nmy9SRyGXik/AAAAAAAAAAI/AAAAAAAAAAc/O9aTREIppYk/photo.jpg?sz=128", "display_name": "Phillip S", "link": "https://stackoverflow.com/users/11425141/phillip-s"}, "reply_to_user": {"reputation": 109, "user_id": 8508722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c330d729c002f11b6526455d954e6beb?s=128&d=identicon&r=PG&f=1", "display_name": "Frost Zone", "link": "https://stackoverflow.com/users/8508722/frost-zone"}, "edited": false, "score": 0, "creation_date": 1562801240, "post_id": 56979321, "comment_id": 100495455, "body": ":) glad I could help"}], "tags": [], "owner": {"reputation": 437, "user_id": 11425141, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nmy9SRyGXik/AAAAAAAAAAI/AAAAAAAAAAc/O9aTREIppYk/photo.jpg?sz=128", "display_name": "Phillip S", "link": "https://stackoverflow.com/users/11425141/phillip-s"}, "is_accepted": true, "score": 2, "last_activity_date": 1594586529, "last_edit_date": 1594586529, "creation_date": 1562796828, "answer_id": 56979321, "question_id": 56979153, "link": "https://stackoverflow.com/questions/56979153/rotate-the-user-character-on-mouse-position/56979321#56979321", "title": "Rotate the user character on mouse position", "body": "<p>Here's an image illustrating the situation:\n<a href=\"https://i.stack.imgur.com/JQDTD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JQDTD.png\" alt=\"Image\" /></a></p>\n<p>You have the mouseY, playerY and mouseX, playerX</p>\n<p>Therefore you can calculate the height and base of the triangle,<br />\nThus the angle with <img src=\"https://chart.googleapis.com/chart?cht=tx&amp;chl=tan%5E%7B-1%7D(%5Cfrac%7BmouseY-playerY%7D%7BmouseX-playerX%7D)\" alt=\"tan\" />\nHowever, since in the second and third quadrants y/x will return an angle in the first and fourth quadrants, you need to use the Math.atan2(y,x) function in Javascript, not Math.atan(y/x). This will give you an angle between -180 and 180 instead of between -90 and 90.</p>\n<p>Atan Reference: <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/atan2\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/atan2</a></p>\n<p>Then all you have to do is rotate based on the angle!</p>\n<p>(P.S. Remember that you will have to convert between radians and degrees)</p>\n"}], "owner": {"reputation": 109, "user_id": 8508722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c330d729c002f11b6526455d954e6beb?s=128&d=identicon&r=PG&f=1", "display_name": "Frost Zone", "link": "https://stackoverflow.com/users/8508722/frost-zone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 56979321, "answer_count": 1, "score": 1, "last_activity_date": 1594586529, "creation_date": 1562795725, "last_edit_date": 1562797469, "question_id": 56979153, "link": "https://stackoverflow.com/questions/56979153/rotate-the-user-character-on-mouse-position", "title": "Rotate the user character on mouse position", "body": "<p>I'm trying to get the character to rotate the character object based on where the mouse is. </p>\n\n<p>So far I got it to rotate incrementally without mouse position. I was checking if it effected my zombie's chasing capabilities. </p>\n\n<p>My script</p>\n\n<pre><code>let player, zombie, mouseX, mouseY;;\n\nlet bgCanvas = document.getElementById('backgroundCan');\nfunction startGame() {\n    document.getElementById(\"startScreen\").style.display = \"none\";\n    player = new playerComponent(350, 220);\n    zombie = new zombieComponent(750, 220);\n    gameArea.start();\n\n}\n</code></pre>\n\n<pre><code>let gameArea = {\n    canvas : document.createElement(\"canvas\"),\n    start : function() {\n        this.canvas.width = 800;\n        this.canvas.height = 500;\n        this.canvas.style = \"position: absolute\";\n        this.context = this.canvas.getContext(\"2d\");\n        document.body.insertBefore(this.canvas, document.body.childNodes[2]);\n        this.interval = setInterval(updateArea, 20);\n        window.addEventListener('keydown', function (e) {\n          gameArea.keys = (gameArea.keys || []);\n          gameArea.keys[e.keyCode] = true;\n        })\n        window.addEventListener('keyup', function (e) {\n          gameArea.keys[e.keyCode] = false;\n        });\n        this.canvas.addEventListener(\"mousemove\", function(e){\n          mouseX = e.clientX - ctx.canvas.offsetLeft;\n          mouseY = e.clientY - ctx.canvas.offsetTop;\n        });\n        this.canvas.addEventListener(\"mousedown\", function(e){\n          let gShot = new Audio('assets/shot.mp3');\n          gShot.play();\n          var mX = e.clientX - ctx.canvas.offsetLeft;\n          var mY = e.clientY - ctx.canvas.offsetTop;\n          if(mX &gt;= zombie.x &amp;&amp; mX &lt; zombie.x+zombie.w &amp;&amp; mY &gt;= zombie.y &amp;&amp; mY &lt; zombie.y+zombie.h){\n            if(zombie.health &gt; 0){\n              zombie.health += -1;\n              zombie.speedX += 10;\n\n              zombie.newPos();\n              zombie.update();\n            }\n            else {\n              zombie.status = \"dead\";\n            }\n          }\n        });\n    },\n    clear : function() {\n        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    }\n}\n</code></pre>\n\n<pre><code>function playerComponent(x, y){\n    this.x = x;\n    this.y = y;\n    this.speedX = 0;\n    this.speedY = 0;\n    this.health = 10;\n    this.status = \"alive\";\n    let rotNum = 1;\n    this.update = function(){\n        ctx = gameArea.context;\n        ctx.save();\n        ctx.translate(this.x, this.y);\n        ctx.rotate(rotNum * Math.PI / 180);\n        playerSprite = new Image();\n        playerSprite.src = \"assets/playerGun.png\";\n        ctx.drawImage(playerSprite, 0, 0);\n        ctx.restore();\n        rotNum++;\n    }\n    this.newPos = function() {\n      this.x += this.speedX;\n      this.y += this.speedY;\n    }\n\n}\n</code></pre>\n\n<pre><code>function updateArea() {\n    gameArea.clear();\n    if(player.status == \"alive\"){\n      player.speedX = 0;\n      player.speedY = 0;\n      if (gameArea.keys &amp;&amp; gameArea.keys[65]) {\n        if(player.x &gt; 20){\n          player.speedX = -3;\n        }\n      }\n      if (gameArea.keys &amp;&amp; gameArea.keys[68]) {\n        if(player.x &lt; 740){\n          player.speedX = 3;\n        }\n      }\n      if (gameArea.keys &amp;&amp; gameArea.keys[87]) {\n        if(player.y &gt; 20){\n          player.speedY = -3;\n        }\n      }\n      if (gameArea.keys &amp;&amp; gameArea.keys[83]) {\n        if(player.y &lt; 445){\n          player.speedY = 3;\n        }\n      }\n      player.newPos();\n      player.update();\n    }\n    if(zombie.status == \"alive\"){\n      if(zombie.x &gt; player.x){\n        zombie.speedX = -1;\n      }\n      else{\n        zombie.speedX = 1;\n      }\n      if(zombie.y &gt; player.y){\n        zombie.speedY = -1;\n      }\n      else{\n        zombie.speedY = 1;\n      }\n      zombie.newPos();\n      zombie.update();\n    }\n    else{\n      zombie.update();\n    }\n}\n</code></pre>\n\n<p>So far, I have the mouse position on the canvas and am able to rotate the character, but I just don't how to connect the two. How should use the mouse position and the character position to rotate towards the mouse? The character is initially facing right (i think?), at least the sprite initially is.</p>\n"}, {"tags": ["javascript", "laravel", "typescript", "vue.js", "laravel-blade"], "comments": [{"owner": {"reputation": 21818, "user_id": 8583563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U42av.png?s=128&g=1", "display_name": "skirtle", "link": "https://stackoverflow.com/users/8583563/skirtle"}, "edited": false, "score": 3, "creation_date": 1562797499, "post_id": 56979123, "comment_id": 100494618, "body": "You seem to have a prop and a data property with the same name (<code>files</code>) on the same component."}, {"owner": {"reputation": 13599, "user_id": 1739852, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f706bb09511d498a29b2c2264dc37f9f?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/1739852/james"}, "reply_to_user": {"reputation": 21818, "user_id": 8583563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U42av.png?s=128&g=1", "display_name": "skirtle", "link": "https://stackoverflow.com/users/8583563/skirtle"}, "edited": false, "score": 0, "creation_date": 1562800539, "post_id": 56979123, "comment_id": 100495347, "body": "Surely Vue throws an error when this is rendered, due to the point @skirtle raises?"}], "owner": {"reputation": 11, "user_id": 5374244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca92cab14552db1e7afb548a4383089c?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro Pablo Pastene", "link": "https://stackoverflow.com/users/5374244/pedro-pablo-pastene"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562818718, "creation_date": 1562795546, "question_id": 56979123, "link": "https://stackoverflow.com/questions/56979123/have-2-lists-in-vuejs-with-delete-properties-one-list-works-the-other-doesnt", "title": "Have 2 lists in VUEJS with delete properties, one list works, the other doesnt", "body": "<p>I've made a component in VueJS that render two lists, one which is empty and the user can press a button to add an item, the other is generated from an array via props in laravel. Both lists have a delete button to delete the desired item. The problem is that the list where is populated from the array it's items can not be deleted</p>\n\n<pre><code>import './bootstrap'\nimport Vue from 'vue'\n\nVue.component('admin-cms-document',{\n  template:\n  `&lt;div&gt;\n    &lt;div v-if=\"files\"&gt;\n    &lt;ul class=\"list-unstyled\"&gt;\n      &lt;li v-for=\"(file, index) in files\"&gt;\n        &lt;p&gt;{{file.id}}&lt;/p&gt;\n        &lt;button type=\"button\" @click=\"deleteFile(index)\"&gt;Delete&lt;/button&gt;\n      &lt;/li&gt;\n    &lt;/ul&gt;\n    &lt;/div&gt;\n    &lt;div v-else&gt;\n      &lt;ul class=\"list-unstyled\"&gt;\n        &lt;li v-for=\"(input, index) in inputs\"&gt;\n          &lt;input type=\"file\" name=\"docs[]\" @change=\"input.one\"&gt;\n          &lt;button type=\"button\" @click=\"deleteNewFile(index)\"&gt;Delete&lt;/button&gt;\n        &lt;/li&gt;\n      &lt;/ul&gt;\n      &lt;button type=\"button\" @click=\"addRow\"&gt;Add&lt;/button&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;`,\n\n  props: {\n    files: Array\n  },\n\n  data: function() {\n    return {\n      inputs: [],\n      files: []\n    }\n  },\n\n  methods: {\n    addRow() {\n      this.inputs.push({\n        one: '',\n      })\n    },\n    deleteNewFile(index) {\n      this.inputs.splice(index,1)\n    },\n    deleteFile(index) {\n      this.files.splice(index, 1)\n    }\n  }\n\n});\n\nvar app = new Vue({\n  el: '#app',\n\n  data: {\n    inputs: [],\n  },\n\n  methods: {\n    addRow() {\n      this.inputs.push({\n        one: '',\n      })\n    },\n    deleteNewFile(index) {\n      this.inputs.splice(index,1);\n    },\n    deleteFile(index) {\n      this.files.splice(index, 1)\n    }\n  }\n})\n</code></pre>\n"}, {"tags": ["javascript", "arrays", "sorting", "object", "ecmascript-6"], "comments": [{"owner": {"reputation": 253903, "user_id": 9515207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1", "display_name": "CertainPerformance", "link": "https://stackoverflow.com/users/9515207/certainperformance"}, "edited": false, "score": 0, "creation_date": 1562795342, "post_id": 56979068, "comment_id": 100494067, "body": "What is your <code>ISODate</code> function, and where are you trying to <code>.sort</code> the subarrays as desired? I don&#39;t see either of those in the code"}], "answers": [{"tags": [], "owner": {"reputation": 38349, "user_id": 10221765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e762fef8d87381d5cbd58d851d1b816?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Bashford", "link": "https://stackoverflow.com/users/10221765/jack-bashford"}, "is_accepted": true, "score": 0, "last_activity_date": 1562796896, "creation_date": 1562796896, "answer_id": 56979327, "question_id": 56979068, "link": "https://stackoverflow.com/questions/56979068/how-to-group-and-sort-object-array/56979327#56979327", "title": "How to group and sort object array?", "body": "<p>Use <code>reduce</code> to group the values, and <code>sort</code> to sort them, using <code>map</code> as well due to the nested array structure.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const arr = [{id:123,group:'abc',metadata:{name:'tom'},date:\"2019-07-08T20:33:40.475Z\"},{id:456,group:'def',metadata:{name:'bob'},date:\"2019-07-08T20:33:40.475Z\"},{id:789,group:'def',metadata:{name:'bob'},date:\"2019-07-10T20:33:40.475Z\"},{id:234,group:'ghi',metadata:{name:'frank'},date:\"2019-07-10T20:33:40.475Z\"},{id:567,group:'abc',metadata:{name:'tom'},date:\"2019-07-10T20:33:40.475Z\"}];\r\nconst res = Object.values(arr.reduce((a, { group, ...r }) =&gt; {\r\n  (a[group] = a[group] || []).push({ group, ...r });\r\n  return a;\r\n}, {})).map(e =&gt; e.sort(({ date: a }, { date: b }) =&gt; new Date(a) - new Date(b)));\r\n\r\nconsole.log(res);</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>.as-console-wrapper { max-height: 100% !important; top: auto; }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><sub>(I've taken out the <code>ISODate</code> function and just kept the string date to make the snippet executable.)</sub></p>\n"}, {"tags": [], "owner": {"reputation": 364, "user_id": 5182994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T60S4.jpg?s=128&g=1", "display_name": "Stanislav Zaleski", "link": "https://stackoverflow.com/users/5182994/stanislav-zaleski"}, "is_accepted": false, "score": 0, "last_activity_date": 1562797793, "creation_date": 1562797793, "answer_id": 56979441, "question_id": 56979068, "link": "https://stackoverflow.com/questions/56979068/how-to-group-and-sort-object-array/56979441#56979441", "title": "How to group and sort object array?", "body": "<p>I would suggest to use <a href=\"https://lodash.com/\" rel=\"nofollow noreferrer\">lodash</a>.</p>\n\n<pre><code>var ISODate = function(str) { return str };\n\nvar data = [\n  {\n    id: 123,\n    group: 'abc',\n    metadata: {\n      name: 'tom'\n    },\n    date: ISODate(\"2019-07-08T20:33:40.475Z\")\n  },\n  {\n    id: 456,\n    group: 'def',\n    metadata: {\n      name: 'bob'\n    },\n    date: ISODate(\"2019-07-08T20:33:40.475Z\")\n  },\n  {\n    id: 789,\n    group: 'def',\n    metadata: {\n      name: 'bob'\n    },\n    date: ISODate(\"2019-07-10T20:33:40.475Z\")\n  },\n  {\n    id: 234,\n    group: 'ghi',\n    metadata: {\n      name: 'frank'\n    },\n    date: ISODate(\"2019-07-10T20:33:40.475Z\")\n  },\n  {\n    id: 567,\n    group: 'abc',\n    metadata: {\n      name: 'tom'\n    },\n    date: ISODate(\"2019-07-10T20:33:40.475Z\")\n  }\n]\n\nconsole.log(\n  _.mapValues(\n    _.groupBy(data, 'group'),\n    function(item) { return _.orderBy(item, ['date'], ['asc']) }\n  )\n)\n</code></pre>\n\n<p><a href=\"https://codepen.io/anon/pen/bPzmOr\" rel=\"nofollow noreferrer\">https://codepen.io/anon/pen/bPzmOr</a></p>\n"}], "owner": {"reputation": 11357, "user_id": 3142695, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f91bd70ad5b26849a739fa88c8fed054?s=128&d=identicon&r=PG&f=1", "display_name": "user3142695", "link": "https://stackoverflow.com/users/3142695/user3142695"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 56979327, "answer_count": 2, "score": 0, "last_activity_date": 1562797793, "creation_date": 1562795170, "last_edit_date": 1562797779, "question_id": 56979068, "link": "https://stackoverflow.com/questions/56979068/how-to-group-and-sort-object-array", "title": "How to group and sort object array?", "body": "<p>I've got an object array which I have to group and sort:</p>\n\n<pre><code>[\n  {\n    id: 123,\n    group: 'abc',\n    metadata: {\n      name: 'tom'\n    },\n    date: ISODate(\"2019-07-08T20:33:40.475Z\")\n  },\n  {\n    id: 456,\n    group: 'def',\n    metadata: {\n      name: 'bob'\n    },\n    date: ISODate(\"2019-07-08T20:33:40.475Z\")\n  },\n  {\n    id: 789,\n    group: 'def',\n    metadata: {\n      name: 'bob'\n    },\n    date: ISODate(\"2019-07-10T20:33:40.475Z\")\n  },\n  {\n    id: 234,\n    group: 'ghi',\n    metadata: {\n      name: 'frank'\n    },\n    date: ISODate(\"2019-07-10T20:33:40.475Z\")\n  },\n  {\n    id: 567,\n    group: 'abc',\n    metadata: {\n      name: 'tom'\n    },\n    date: ISODate(\"2019-07-10T20:33:40.475Z\")\n  }\n]\n</code></pre>\n\n<p>Firstly I need to group the elements by the group value, then I need to sort the elements of this grouped array by date.</p>\n\n<p>For grouping I've tried this:</p>\n\n<pre><code>const result = array.reduce(function (r, a) {\n    r[a.group] = r[a.group] || [];\n    r[a.group].push(a);\n    return r;\n}, Object.create(null));\n</code></pre>\n\n<p>But the result is not as expected and the elements are not sorted by date.</p>\n\n<p>The result could/should look something like this:</p>\n\n<pre><code>[\n  [\n    {\n      id: 123,\n      group: 'abc',\n      metadata: {\n        name: 'tom'\n      },\n      date: ISODate(\"2019-07-08T20:33:40.475Z\")\n    },\n    {\n      id: 567,\n      group: 'abc',\n      metadata: {\n        name: 'tom'\n      },\n      date: ISODate(\"2019-07-10T20:33:40.475Z\")\n    }\n  ],\n  [\n    {\n      id: 456,\n      group: 'def',\n      metadata: {\n        name: 'bob'\n      },\n      date: ISODate(\"2019-07-08T20:33:40.475Z\")\n    },\n    {\n      id: 789,\n      group: 'def',\n      metadata: {\n        name: 'bob'\n      },\n      date: ISODate(\"2019-07-10T20:33:40.475Z\")\n    }\n  ],\n  [\n    {\n      id: 234,\n      group: 'ghi',\n      metadata: {\n        name: 'frank'\n      },\n      date: ISODate(\"2019-07-10T20:33:40.475Z\")\n    }\n  ]\n]\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "html"], "comments": [{"owner": {"reputation": 24196, "user_id": 1586174, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4aa4d9e7b30a8bddace165e4c33abd85?s=128&d=identicon&r=PG", "display_name": "Taplar", "link": "https://stackoverflow.com/users/1586174/taplar"}, "edited": false, "score": 0, "creation_date": 1562795253, "post_id": 56979058, "comment_id": 100494039, "body": "Are you creating the new html <b>after</b> the <code>flatpickr()</code> is called?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11486953"}, "reply_to_user": {"reputation": 24196, "user_id": 1586174, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4aa4d9e7b30a8bddace165e4c33abd85?s=128&d=identicon&r=PG", "display_name": "Taplar", "link": "https://stackoverflow.com/users/1586174/taplar"}, "edited": false, "score": 0, "creation_date": 1562795352, "post_id": 56979058, "comment_id": 100494070, "body": "@Taplar Yes you are correct"}, {"owner": {"reputation": 24196, "user_id": 1586174, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4aa4d9e7b30a8bddace165e4c33abd85?s=128&d=identicon&r=PG", "display_name": "Taplar", "link": "https://stackoverflow.com/users/1586174/taplar"}, "edited": false, "score": 0, "creation_date": 1562795378, "post_id": 56979058, "comment_id": 100494074, "body": "Then it&#39;s not going to exist at the time you perform your initialization.  You need to initialize again after you insert the new one"}, {"owner": {"reputation": 2329, "user_id": 5708097, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7c8632c33f0785007fca66606a46e417?s=128&d=identicon&r=PG&f=1", "display_name": "Rolly", "link": "https://stackoverflow.com/users/5708097/rolly"}, "edited": false, "score": 0, "creation_date": 1562795533, "post_id": 56979058, "comment_id": 100494123, "body": "let me see if i understood. You want to create with js an input an then initialize in that input flatpickr plugin?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11486953"}, "reply_to_user": {"reputation": 24196, "user_id": 1586174, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4aa4d9e7b30a8bddace165e4c33abd85?s=128&d=identicon&r=PG", "display_name": "Taplar", "link": "https://stackoverflow.com/users/1586174/taplar"}, "edited": false, "score": 0, "creation_date": 1562795706, "post_id": 56979058, "comment_id": 100494168, "body": "@Taplar your answer is correct. Please, publish it so I take it as the best answer"}], "answers": [{"comments": [{"owner": {"reputation": 3392, "user_id": 1308651, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a1ef5842d93e1024dc369d53624d083c?s=128&d=identicon&r=PG", "display_name": "Jack", "link": "https://stackoverflow.com/users/1308651/jack"}, "edited": false, "score": 0, "creation_date": 1599552144, "post_id": 56979159, "comment_id": 112800625, "body": "<code>window.addEventListener(&#39;load&#39;, function () { ... document.getElementById(&quot;flatpickr&quot;).flatpickr({}) }) </code>"}], "tags": [], "owner": {"reputation": 24196, "user_id": 1586174, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4aa4d9e7b30a8bddace165e4c33abd85?s=128&d=identicon&r=PG", "display_name": "Taplar", "link": "https://stackoverflow.com/users/1586174/taplar"}, "is_accepted": true, "score": 1, "last_activity_date": 1562795746, "creation_date": 1562795746, "answer_id": 56979159, "question_id": 56979058, "link": "https://stackoverflow.com/questions/56979058/class-that-runs-a-js-function-does-not-work-with-innerhtml/56979159#56979159", "title": "Class that runs a JS function does not work with innerHTML", "body": "<p>If you are dynamically creating elements in the future, I would suggest making a reusable method.</p>\n\n<pre><code>function initializeFlatPicker (context) {\n  $(\".flatpickr-date\", context || document).flatpickr({\n    dateFormat: \"d / m / Y\",\n    maxDate: new Date (), // 30 days from now\n    \"locale\": \"in\"\n  });\n}\n\ninitializeFlatPicker();\n</code></pre>\n\n<p>This will do the same thing you are doing now for the first initialize.  Then later when you make a new one...</p>\n\n<pre><code>var html = '&lt;input type=\"text\" class=\"flatpickr-date\"&gt;'\nvar parent = document.getElementById('id');\n\nparent.innerHTML = html;\n\ninitializeFlatPicker(parent);\n</code></pre>\n\n<p>This will perform the initialization again, but <strong>only</strong> for the new element.</p>\n"}, {"tags": [], "owner": {"reputation": 2329, "user_id": 5708097, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7c8632c33f0785007fca66606a46e417?s=128&d=identicon&r=PG&f=1", "display_name": "Rolly", "link": "https://stackoverflow.com/users/5708097/rolly"}, "is_accepted": false, "score": 0, "last_activity_date": 1562795931, "creation_date": 1562795931, "answer_id": 56979182, "question_id": 56979058, "link": "https://stackoverflow.com/questions/56979058/class-that-runs-a-js-function-does-not-work-with-innerhtml/56979182#56979182", "title": "Class that runs a JS function does not work with innerHTML", "body": "<p>Well, What you need is first create the input with js and then start the plugin. Here is the code</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/flatpickr/4.6.1/flatpickr.css\"&gt;\n&lt;/head&gt;\n    &lt;body&gt;\n        &lt;div id=\"form\"&gt;\n        &lt;/div&gt;\n    &lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/flatpickr/4.6.1/flatpickr.js\"&gt;&lt;/script&gt;\n    &lt;script&gt;\n        $(document).ready(function(){\n            var html = '&lt;input type=\"text\" class=\"flatpickr-date\"&gt;'\n            document.getElementById('form').innerHTML = html;   \n            $ (\".flatpickr-date\").flatpickr(\n                {\n                    dateFormat: \"d / m / Y\",\n                    maxDate: new Date (), // 30 days from now\n                    \"locale\": \"in\"\n                }\n            );          \n        });\n    &lt;/script&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n\n</code></pre>\n\n<p>The live working example</p>\n\n<p><a href=\"https://codepen.io/rollrodrig/pen/KjJGyy\" rel=\"nofollow noreferrer\">https://codepen.io/rollrodrig/pen/KjJGyy</a></p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user11162572"}, "is_accepted": false, "score": 0, "last_activity_date": 1562796482, "last_edit_date": 1562796482, "creation_date": 1562796052, "answer_id": 56979202, "question_id": 56979058, "link": "https://stackoverflow.com/questions/56979058/class-that-runs-a-js-function-does-not-work-with-innerhtml/56979202#56979202", "title": "Class that runs a JS function does not work with innerHTML", "body": "<p>If you insist on dynamic creation of the div which will contain the calendar you can instantiate the calendar plugin at the time you create the div. </p>\n\n<p>For example:</p>\n\n<pre><code>var calendar={\n    createCal:function(id){\n        var html = '&lt;input type=\"text\" class=\"flatpickr-date\"&gt;'\n        document.getElementById(id).innerHTML = html;    \n        this.init(id);\n    },\n\n    init:function(id){  \n        $ (\"#' + id  + '.flatpickr-date\").flatpickr(\n            {\n                dateFormat: \"d / m / Y\",\n                maxDate: new Date (), // 30 days from now\n                \"locale\": \"in\"\n            }\n        );\n    }\n}    \n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11486953"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 56979159, "answer_count": 3, "score": -2, "last_activity_date": 1562796482, "creation_date": 1562795133, "question_id": 56979058, "link": "https://stackoverflow.com/questions/56979058/class-that-runs-a-js-function-does-not-work-with-innerhtml", "title": "Class that runs a JS function does not work with innerHTML", "body": "<p>I'm trying to insert html code with innerHTML, which inserts a input that has the class .flatpickr-date.</p>\n\n<pre><code>var html = '&lt;input type=\"text\" class=\"flatpickr-date\"&gt;'\n\ndocument.getElementById('id').innerHTML = html;\n</code></pre>\n\n<p>In a javascript file I have the following, which applies to the .flatpickr-date class and uses a \"flatpickr\" plugin method:</p>\n\n<pre><code>$ (\".flatpickr-date\").flatpickr(\n\n    {\n        dateFormat: \"d / m / Y\",\n        maxDate: new Date (), // 30 days from now\n        \"locale\": \"in\"\n    }\n\n);\n</code></pre>\n\n<p>The previous code what it does is to generate a calendar in the input that has the flatpickr-date class. The problem is that he does not appear, as if he was not reading the class</p>\n"}, {"tags": ["javascript"], "comments": [{"owner": {"reputation": 4756, "user_id": 10001688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kvhzK.jpg?s=128&g=1", "display_name": "Michael Bianconi", "link": "https://stackoverflow.com/users/10001688/michael-bianconi"}, "edited": false, "score": 1, "creation_date": 1562794814, "post_id": 56979001, "comment_id": 100493923, "body": "Can you post what you&#39;ve tried already?"}, {"owner": {"reputation": 1, "user_id": 6324853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g9vKR.png?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/6324853/daniel"}, "reply_to_user": {"reputation": 4756, "user_id": 10001688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kvhzK.jpg?s=128&g=1", "display_name": "Michael Bianconi", "link": "https://stackoverflow.com/users/10001688/michael-bianconi"}, "edited": false, "score": 0, "creation_date": 1562794999, "post_id": 56979001, "comment_id": 100493970, "body": "tried multiple things but got nowhere"}, {"owner": {"reputation": 162920, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 1, "creation_date": 1562795021, "post_id": 56979001, "comment_id": 100493979, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and show what you have tried. Nobody is going to write code for some imaginary buttons and div&#39;s we can&#39;t see. And the objective here is to help you with your code, not to be a free code writing service. Poor attempts shown will get you more help than no attempts"}, {"owner": {"reputation": 1, "user_id": 6324853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g9vKR.png?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/6324853/daniel"}, "edited": false, "score": 1, "creation_date": 1562795175, "post_id": 56979001, "comment_id": 100494020, "body": "added what ive tried"}, {"owner": {"reputation": 162920, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1562795223, "post_id": 56979001, "comment_id": 100494032, "body": "OK...that&#39;s a bit better...now show the basic html structure that includes those <code>id</code>s"}, {"owner": {"reputation": 1, "user_id": 6324853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g9vKR.png?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/6324853/daniel"}, "edited": false, "score": 1, "creation_date": 1562795426, "post_id": 56979001, "comment_id": 100494089, "body": "added the html in comment"}, {"owner": {"reputation": 162920, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1562795576, "post_id": 56979001, "comment_id": 100494133, "body": "OK....better...but I don&#39;t see 4 divs and a show all button. Don&#39;t need all the inner part of them and certainly don&#39;t need the server side code. Just the basic div&#39;s and buttons is all that is needed. Ideally we should be able to run your code with the html shown and try it out and that creates a reproducible example"}, {"owner": {"reputation": 1, "user_id": 6324853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g9vKR.png?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/6324853/daniel"}, "edited": false, "score": 0, "creation_date": 1562796078, "post_id": 56979001, "comment_id": 100494266, "body": "hey i&#39;ve added all the code and stripped out the server side stuff apologies for delay kept messing up the formatting"}], "answers": [{"tags": [], "owner": {"reputation": 4756, "user_id": 10001688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kvhzK.jpg?s=128&g=1", "display_name": "Michael Bianconi", "link": "https://stackoverflow.com/users/10001688/michael-bianconi"}, "is_accepted": false, "score": 0, "last_activity_date": 1562795837, "last_edit_date": 1562795837, "creation_date": 1562795418, "answer_id": 56979105, "question_id": 56979001, "link": "https://stackoverflow.com/questions/56979001/hide-show-different-divs-and-show-all-with-button/56979105#56979105", "title": "Hide show different divs and show all with button", "body": "<p>Simply set <code>div</code>'s display to either <code>block</code> or <code>none</code> to hide it.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>let show = document.getElementById('show-button');\r\nlet divs = document.getElementsByName('container');\r\nlet hideButtons = document.getElementsByName('hide-button');\r\n\r\nshow.onclick = () =&gt; {\r\n    divs.forEach((d) =&gt; d.style.display='block');\r\n}\r\n\r\nhideButtons.forEach((b) =&gt; {\r\n    b.style.display='block';\r\n    b.onclick = () =&gt; b.parentNode.style.display='none';\r\n});</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;button id='show-button'&gt;Show&lt;/button&gt;\r\n&lt;div name='container'&gt;\r\n  &lt;button name='hide-button'&gt;Hide 1&lt;/button&gt;\r\n&lt;/div&gt;\r\n&lt;div name=container&gt;\r\n  &lt;button name='hide-button'&gt;Hide 2&lt;/button&gt;\r\n&lt;/div&gt;\r\n&lt;div name=container&gt;\r\n  &lt;button name='hide-button'&gt;Hide 3&lt;/button&gt;\r\n&lt;/div&gt;\r\n&lt;div name=container&gt;\r\n  &lt;button name='hide-button'&gt;Hide 4&lt;/button&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 1, "user_id": 6324853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g9vKR.png?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/6324853/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1562796038, "creation_date": 1562794711, "last_edit_date": 1562796038, "question_id": 56979001, "link": "https://stackoverflow.com/questions/56979001/hide-show-different-divs-and-show-all-with-button", "title": "Hide show different divs and show all with button", "body": "<p>I have 4 divs that each have a button , when a button on div is clicked it should hide that div. Then there is button at top called show all which will show all hidden divs again below is all the code show button , JS script and the four div boxes which should hide when button clicked on them and show all boxes again when show button is clicked</p>\n\n<pre><code>&lt;button type=\"button\" class=\"btn btn-light btn-sm mt-3\" id=\"show\"&gt;&lt;i class=\"fe fe-eye\"&gt;&lt;/i&gt; Show all&lt;/button&gt;\n\n&lt;script type = \"text/javascript\" &gt;\n                    function show(elementId) {\n                        document.getElementById(\"id1\").style.display = \"none\";\n                        document.getElementById(\"id2\").style.display = \"none\";\n                        document.getElementById(\"id3\").style.display = \"none\";\n        document.getElementById(\"id4\").style.display = \"none\";\n                        document.getElementById(elementId).style.display = \"block\";\n                    }\n            &lt;/script&gt;\n\n&lt;div class=\"card project-card\" id=\"id1\"&gt;\n            &lt;div class=\"card-header\"&gt;\n                    Bookmarks&lt;/strong&gt;\n                &lt;button type=\"button\" class=\"btn btn-light btn-sm ml-3\" onclick=\"show('id2');\"&gt;&lt;i class=\"fe fe-eye\"&gt;&lt;/i&gt;&lt;/button&gt;\n            &lt;/div&gt;\n                &lt;div class=\"card-body\"&gt;\n                  body text here  \n                &lt;/div&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"card project-card\" id=\"id2\"&gt;\n            &lt;div class=\"card-header\"&gt;\n                    Bookmarks&lt;/strong&gt;\n                &lt;button type=\"button\" class=\"btn btn-light btn-sm ml-3\" onclick=\"show('id2');\"&gt;&lt;i class=\"fe fe-eye\"&gt;&lt;/i&gt;&lt;/button&gt;\n            &lt;/div&gt;\n                &lt;div class=\"card-body\"&gt;\n                  body text here  \n                &lt;/div&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"card project-card\" id=\"id3\"&gt;\n            &lt;div class=\"card-header\"&gt;\n                    Bookmarks&lt;/strong&gt;\n                &lt;button type=\"button\" class=\"btn btn-light btn-sm ml-3\" onclick=\"show('id2');\"&gt;&lt;i class=\"fe fe-eye\"&gt;&lt;/i&gt;&lt;/button&gt;\n            &lt;/div&gt;\n                &lt;div class=\"card-body\"&gt;\n                  body text here  \n                &lt;/div&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"card project-card\" id=\"id4\"&gt;\n            &lt;div class=\"card-header\"&gt;\n                    Bookmarks&lt;/strong&gt;\n                &lt;button type=\"button\" class=\"btn btn-light btn-sm ml-3\" onclick=\"show('id2');\"&gt;&lt;i class=\"fe fe-eye\"&gt;&lt;/i&gt;&lt;/button&gt;\n            &lt;/div&gt;\n                &lt;div class=\"card-body\"&gt;\n                  body text here  \n                &lt;/div&gt;\n        &lt;/div&gt;\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "animation", "sprite"], "comments": [{"owner": {"reputation": 25361, "user_id": 924299, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a142d1ec6b8444c9baf3ec6176e1cf61?s=128&d=identicon&r=PG&f=1", "display_name": "showdev", "link": "https://stackoverflow.com/users/924299/showdev"}, "edited": false, "score": 0, "creation_date": 1562795006, "post_id": 56978996, "comment_id": 100493973, "body": "What&#39;s in <code>animateScript()</code> and <code>stopAnimation()</code>?"}, {"owner": {"reputation": 43, "user_id": 10560357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9JbDF.jpg?s=128&g=1", "display_name": "KashXz", "link": "https://stackoverflow.com/users/10560357/kashxz"}, "reply_to_user": {"reputation": 25361, "user_id": 924299, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a142d1ec6b8444c9baf3ec6176e1cf61?s=128&d=identicon&r=PG&f=1", "display_name": "showdev", "link": "https://stackoverflow.com/users/924299/showdev"}, "edited": false, "score": 0, "creation_date": 1562795394, "post_id": 56978996, "comment_id": 100494079, "body": "Just edited the post with the code, sorry"}], "answers": [{"tags": [], "owner": {"reputation": 3503, "user_id": 4259032, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/fzRmI.jpg?s=128&g=1", "display_name": "Alain Cruz", "link": "https://stackoverflow.com/users/4259032/alain-cruz"}, "is_accepted": false, "score": 1, "last_activity_date": 1562796311, "creation_date": 1562796311, "answer_id": 56979231, "question_id": 56978996, "link": "https://stackoverflow.com/questions/56978996/javascript-jquery-animation-conditional-question/56979231#56979231", "title": "Javascript/Jquery Animation Conditional Question", "body": "<p>If you want to call function after an user stops pressing on a key, you need to add a <em>keyup</em> event. Just like your <em>keydown</em> event handler, you can check for each arrow key. Hope the following example helps.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const game = document.getElementById('game');\r\n\r\ndocument.addEventListener('keydown', event =&gt; {\r\n  event.preventDefault();\r\n  game.textContent = \"keyDown: \" + event.key;\r\n});\r\n\r\ndocument.addEventListener('keyup', event =&gt; {\r\n  event.preventDefault();\r\n  game.textContent = \"keyUp: \" + event.key;\r\n});</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div id=\"game\"&gt;Click on me, then press a key!&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 43, "user_id": 10560357, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9JbDF.jpg?s=128&g=1", "display_name": "KashXz", "link": "https://stackoverflow.com/users/10560357/kashxz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562796311, "creation_date": 1562794690, "last_edit_date": 1562795375, "question_id": 56978996, "link": "https://stackoverflow.com/questions/56978996/javascript-jquery-animation-conditional-question", "title": "Javascript/Jquery Animation Conditional Question", "body": "<p>I'm working on a project where you can control a character around the screen. I'm using a sprite sheet that changes the frames depending which way you're walking. I have it set up where it works when I press the up arrow key and the animation works, but now I'm having trouble figuring out how to implement the logic to stop animating.</p>\n\n<p>Heres what my case switch for moving looks like:</p>\n\n<pre><code>switch (e.which) {\n\n      case 38: //up\n        console.log(\"Up\")\n        $(\".player\").finish().animate({\n            top: \"-=10\"\n        }, 100);\n\n        animateScript();\n        checkCollisions();\n\n        //if collision is detected, bounce back\n        if (colliding) {\n        $(\".player\").finish().animate({\n            top: \"+=20\"\n        }, 100);\n        }\n\n        break;\n\n\n      case 37: //left\n        console.log(\"Left\")\n        $(\".player\").finish().animate({\n            left: \"-=10\"\n        }, 100);\n\n        checkCollisions();\n\n        //if collision is detected, bounce back\n        if (colliding) {\n        $(\".player\").finish().animate({\n            left: \"+=20\"\n        }, 100);\n        }\n\n        break;\n\n\n      case 39: //right\n        console.log(\"Right\")\n        $(\".player\").finish().animate({\n            left: \"+=10\"\n        }, 100);\n\n        checkCollisions();\n\n        //if collision is detected, bounce back\n        if (colliding) {\n        $(\".player\").finish().animate({\n            left: \"-=20\"\n        }, 100);  \n        }\n\n        break;\n\n\n      case 40: //down\n        console.log(\"Down\")\n        $(\".player\").finish().animate({\n            top: \"+=10\"\n        }, 100); \n\n        checkCollisions();\n\n        //if collision is detected, bounce back\n        if (colliding) {\n        $(\".player\").finish().animate({\n            top: \"-=20\"\n        }, 100);   \n        }\n\n    }\n</code></pre>\n\n<p>I've only implemented the animateScript() in the first case and it works. Now I don't know how to implement my stopAnimation() function, or where. Basically, it has to be whenever the user stops using the arrow keys this needs to be triggered. Any ideas?</p>\n\n<p>Here's the animation functions:</p>\n\n<pre><code>var tID; //clear the setInterval()\nfunction stopAnimate() {\nclearInterval(tID);\n}\n //end of stopAnimate()\n\n\nfunction animateScript() {\nvar    position = 50; //start position for the image slicer\nconst  interval = 100; //100 ms of interval for the setInterval()\nconst  diff = 50;     //diff as a variable for position offset\ntID = setInterval ( () =&gt; {\n$('.player').css('background-position', `-${position}px 0px`);\n//we use the ES6 template literal to insert the variable \"position\"\nif (position &lt; 1601)\n{ position = position + \ndiff;}\n//we increment the position by 50 each time\nelse\n{ position = 50; }\n//reset the position to 50px, once position exceeds 1536px\n}\n, interval ); //end of setInterval\n} //end of animateScript()\n</code></pre>\n"}, {"tags": ["javascript", "json", "dynamic", "drop-down-menu", "html-select"], "comments": [{"owner": {"reputation": 8444, "user_id": 6210773, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MkqCSSKA7j0/AAAAAAAAAAI/AAAAAAAAAFE/X3FzsuJTRqI/photo.jpg?sz=128", "display_name": "Alex Kudryashev", "link": "https://stackoverflow.com/users/6210773/alex-kudryashev"}, "edited": false, "score": 0, "creation_date": 1562795390, "post_id": 56978936, "comment_id": 100494077, "body": "Is your data <code>xml</code> or <code>json</code>?"}, {"owner": {"reputation": 47, "user_id": 6063711, "user_type": "registered", "profile_image": "https://graph.facebook.com/1138180806205833/picture?type=large", "display_name": "Mohamed Khlifi", "link": "https://stackoverflow.com/users/6063711/mohamed-khlifi"}, "reply_to_user": {"reputation": 8444, "user_id": 6210773, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MkqCSSKA7j0/AAAAAAAAAAI/AAAAAAAAAFE/X3FzsuJTRqI/photo.jpg?sz=128", "display_name": "Alex Kudryashev", "link": "https://stackoverflow.com/users/6210773/alex-kudryashev"}, "edited": false, "score": 0, "creation_date": 1562798040, "post_id": 56978936, "comment_id": 100494769, "body": "@AlexKudryashev <a href=\"https://scontent.ftun3-1.fna.fbcdn.net/v/t1.15752-9/66817316_552301148638753_8143799129030524928_n.png?_nc_cat=110&amp;_nc_eui2=AeE-buSNjyf-kN7yXT23PHYCu7QHd-vnRVEbtaOC4K3CeaIuomLVb0x7YflnAfHXOtSOM9odptImziiYbyscJWyo56xUpcWuNLTcdzPpTDPThA&amp;_nc_oc=AQk8NaDID4Ba9IQLoKoohGtXAV_MTlZH-tJORblxWef6SQdnTAD_G92oyZOAskbFf-Y&amp;_nc_ht=scontent.ftun3-1.fna&amp;oh=930901b607c6d48ac26ff4159593537a&amp;oe=5DB32AD3\" rel=\"nofollow noreferrer\">scontent.ftun3-1.fna.fbcdn.net/v/t1.15752-9/&hellip;</a> This is a screenshot for my xml link that I must get my data from."}], "answers": [{"tags": [], "owner": {"reputation": 8444, "user_id": 6210773, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MkqCSSKA7j0/AAAAAAAAAAI/AAAAAAAAAFE/X3FzsuJTRqI/photo.jpg?sz=128", "display_name": "Alex Kudryashev", "link": "https://stackoverflow.com/users/6210773/alex-kudryashev"}, "is_accepted": false, "score": 0, "last_activity_date": 1562808869, "last_edit_date": 1562808869, "creation_date": 1562808528, "answer_id": 56980528, "question_id": 56978936, "link": "https://stackoverflow.com/questions/56978936/populate-select-option-tag-with-dynamic-data-from-xml-link/56980528#56980528", "title": "Populate select option tag with dynamic data from xml link", "body": "<p>If your data is <code>xml</code> then use <code>dataType:'xml'</code>. It may be something like this.</p>\n\n<pre><code>$.ajax({url: _spPageContextInfo.siteAbsoluteUrl + \"/_api/ProjectData/[en-US]/Projects\",                           \n    method: \"GET\",\n    dataType: \"xml\",//or json if xml is wrapped in json\n    //headers: {Accept: \"text/xml\"},//make sure you need this       \n    success: function(data) { \n        //check which is your desired XML\n        console.log(data);\n        console.log(data.d);\n        console.log(data.d.results);\n\n        //suppose it is data.d.results\n        var dataResults = data.d.results;\n        var list = $('#mylist');\n        $(dataResults).find('d\\\\:ProjectOwnerName')//this is how access namespaced property\n          .each(function(){\n            list.append($('&lt;option /&gt;').text(this.innerText));\n          });//each\n       }//success\n});//$.ajax\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 6063711, "user_type": "registered", "profile_image": "https://graph.facebook.com/1138180806205833/picture?type=large", "display_name": "Mohamed Khlifi", "link": "https://stackoverflow.com/users/6063711/mohamed-khlifi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562808869, "creation_date": 1562794343, "last_edit_date": 1562794786, "question_id": 56978936, "link": "https://stackoverflow.com/questions/56978936/populate-select-option-tag-with-dynamic-data-from-xml-link", "title": "Populate select option tag with dynamic data from xml link", "body": "<p>I need to populate select option tags with dynamic data that I get from an xml link.</p>\n\n<p>Hello, I am working with sharepoint and I need to get a solution for my problem.\nI have an empty select tag and I need to fill it with dynamic data from an xml link. \n<a href=\"https://scontent.ftun3-1.fna.fbcdn.net/v/t1.15752-9/66477621_1241321552715420_782504330790961152_n.png?_nc_cat=103&amp;_nc_oc=AQlt1rE9uaqZ1xQ5hiMymOPlFsedDuxcpBPMP9C_RTgYJ6s8P5ekStaUIaC5MTiZyOY&amp;_nc_ht=scontent.ftun3-1.fna&amp;oh=bbda50d7782545a433025406a28b2396&amp;oe=5DBECD7B\" rel=\"nofollow noreferrer\">https://scontent.ftun3-1.fna.fbcdn.net/v/t1.15752-9/66477621_1241321552715420_782504330790961152_n.png?_nc_cat=103&amp;_nc_oc=AQlt1rE9uaqZ1xQ5hiMymOPlFsedDuxcpBPMP9C_RTgYJ6s8P5ekStaUIaC5MTiZyOY&amp;_nc_ht=scontent.ftun3-1.fna&amp;oh=bbda50d7782545a433025406a28b2396&amp;oe=5DBECD7B</a></p>\n\n<p>The data in the picture is statically typed and the name of the column in the xml link is <code>&lt;d:ProjectOwnerName&gt;</code>, but I want it to be dynamic. \nstarting from this code, how can I do this?</p>\n\n<pre><code>$.ajax({url: _spPageContextInfo.siteAbsoluteUrl + \"/_api/ProjectData/[en-US]/Projects\",                           \n                                        method: \"GET\",\n                                        dataType: \"json\",\n                                        headers: {Accept: \"application/json;odata=verbose\"},       \n                                        success: function(data) {     \n                                        var dataResults = data.d.results;\n\n               var listItemInfo =\"\";\n                $.each(dataResults, function(key, value) \n                {\n</code></pre>\n\n<p>And this the html part:</p>\n\n<pre><code>&lt;select style=\"color:black; font-weight:bold;\" id=\"mylist\" onchange=\"myFunction()\"&gt;\n    &lt;option&gt;&lt;/option&gt;\n    &lt;/select&gt;\n</code></pre>\n"}, {"tags": ["javascript", "animation", "ecmascript-6", "graphics", "html5-canvas"], "answers": [{"tags": [], "owner": {"reputation": 18854, "user_id": 1083572, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/9xSFI.png?s=128&g=1", "display_name": "Kokodoko", "link": "https://stackoverflow.com/users/1083572/kokodoko"}, "is_accepted": true, "score": 0, "last_activity_date": 1562798614, "last_edit_date": 1562798614, "creation_date": 1562798304, "answer_id": 56979498, "question_id": 56978931, "link": "https://stackoverflow.com/questions/56978931/why-my-rectangle-does-not-move-when-i-update-x-axis/56979498#56979498", "title": "Why my rectangle does not move when i update x-axis?", "body": "<p>For me it works, but you have to clear the canvas (by drawing a white rectangle first). Also, you forgot the Size class, so the width and height were not defined.</p>\n\n<p>Code</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>class Loop {\r\n  // init\r\n  constructor(canvas, display) {\r\n    this.canvas = canvas;\r\n    this.display = display;\r\n    this.player = new Player(this.canvas, this.display);\r\n  }\r\n  // update\r\n  update() {\r\n    this.player.update();\r\n  }\r\n  // draw\r\n  draw() {\r\n    this.player.draw();\r\n  }\r\n}\r\n\r\n\r\nclass Player {\r\n  constructor(canvas, display) {\r\n    this.display = display;\r\n    this.canvas = canvas;\r\n    this.point = new Point(20, 20);\r\n    this.size = new Size(100, 25);\r\n  }\r\n  // update\r\n  update() {\r\n    this.point.x++; // update x  \r\n  }\r\n  // draw\r\n  draw() {\r\n    //remove previous\r\n    this.display.fillStyle = \"#ffffff\";\r\n    this.display.fillRect(0,0,400,400)\r\n    \r\n    // draw rectangle using point and size\r\n    this.display.fillStyle = \"#ff0000\";\r\n    this.display.fillRect(this.point.x, this.point.y, this.size.w, this.size.h)\r\n  }\r\n}\r\n\r\nclass Point {\r\n  constructor(x, y) {\r\n    this.x = x;\r\n    this.y = y;\r\n  }\r\n}\r\n\r\nclass Size {\r\n  constructor(w, h) {\r\n    this.w = w;\r\n    this.h = h;\r\n  }\r\n}\r\n\r\nlet canvas = document.getElementById(\"canvas\"); // get canvas\r\nlet display = canvas.getContext(\"2d\"); // get context\r\nlet loop = new Loop(canvas, display); // instance loop\r\n\r\n// draw loop\r\nfunction drawLoop() {\r\n  loop.update(); // update\r\n  loop.draw(); // draw\r\n  requestAnimationFrame(drawLoop); // loop\r\n}\r\n// invoke\r\ndrawLoop();</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;canvas id=\"canvas\" width=\"400\" height=\"200\"&gt;&lt;/canvas&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 1, "user_id": 11767151, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-85FqeuEGxXE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdkhXdi6kBGWqNELa3bovxJy4DJnw/photo.jpg?sz=128", "display_name": "CoderDot", "link": "https://stackoverflow.com/users/11767151/coderdot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 56979498, "answer_count": 1, "score": -1, "last_activity_date": 1563680540, "creation_date": 1562794333, "last_edit_date": 1563680540, "question_id": 56978931, "link": "https://stackoverflow.com/questions/56978931/why-my-rectangle-does-not-move-when-i-update-x-axis", "title": "Why my rectangle does not move when i update x-axis?", "body": "<p>I am trying to make simple animation in canvas, trying to move a rectangle to right by updating x-axis but it does not work I don't know why?</p>\n\n<p>I am stuck, i need help and thanks?</p>\n\n<p>class main </p>\n\n<pre><code>// import zone\nimport Player from \"./player.js\";\nimport Loop from \"./loop.js\";\n\n// var zone\nlet canvas = document.getElementById(\"canvas\"); // get canvas\nlet display = canvas.getContext(\"2d\"); // get context\nlet loop;\nloop = new Loop(canvas, display); // instance loop\n\n// draw loop\nfunction drawLoop() {\n\n  loop.player.point.x++;\n  loop.update(); // update\n  loop.draw(); // draw\n  requestAnimationFrame(drawLoop); // loop\n}\n// invoke\ndrawLoop();\n</code></pre>\n\n<p>class loop</p>\n\n<pre><code>// import zone\nimport Player from \"./player.js\";\n// class\nexport default class Loop {\n  // init\n  constructor(canvas, display) {\n    this.canvas = canvas;\n    this.display = display;\n    this.player = new Player(this.canvas, this.display);\n  }\n  // update\n  update() {\n    this.player.update();\n  }\n  // draw\n  draw() {\n    this.player.draw();\n  }\n}\n</code></pre>\n\n<p>class player</p>\n\n<pre><code>// import zone\nimport Size from \"./size.js\";\nimport Point from \"./point.js\";\n\n// class\nexport default class Player {\n  constructor(canvas, display) {\n    this.display = display;\n    this.canvas = canvas;\n    this.point = new Point(200, 200);\n    this.size = new Size(100, 25);\n  }\n  // update\n  update() {\n    this.point.x++; // trying to update x but the rect does not move  \n  }\n  // draw\n  draw() {\n    this.display.fillStyle = \"#ffffff\";\n    this.display.fillRect(this.point.x, this.point.y, this.size.w, this.size.h);\n  }\n}\n</code></pre>\n\n<p>class point</p>\n\n<pre><code>export default class Point {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n}\n</code></pre>\n\n<p>The rectangle should move by 1 pixel to the right, thanks.</p>\n"}, {"tags": ["javascript", "php", "html"], "comments": [{"owner": {"reputation": 3136, "user_id": 10283047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14d3424d98c68472d196cb5534c3f417?s=128&d=identicon&r=PG&f=1", "display_name": "misorude", "link": "https://stackoverflow.com/users/10283047/misorude"}, "edited": false, "score": 0, "creation_date": 1562839212, "post_id": 56978909, "comment_id": 100507749, "body": "You don\u2019t have \u201cmultiple responses\u201d here, not in terms of HTTP - you are just trying to flush the output buffer in a loop. That doesn\u2019t change anything about the basic principle of <i>one</i> HTTP request getting <i>one</i> response in return. You could theoretically react to one of the \u201cearlier\u201d readyStates in your client-side code - but I doubt that will actually work in this case, because you are sending multiple independent JSON encoded data structures here, so what ever partial response you receive at any given point, will probably not go through <code>JSON.parse</code> to begin with."}, {"owner": {"reputation": 61, "user_id": 7577819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a6f5aa989a3ad568774aa0f75484610?s=128&d=identicon&r=PG&f=1", "display_name": " Ibrahim EL-Sanosi", "link": "https://stackoverflow.com/users/7577819/ibrahim-el-sanosi"}, "reply_to_user": {"reputation": 3136, "user_id": 10283047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14d3424d98c68472d196cb5534c3f417?s=128&d=identicon&r=PG&f=1", "display_name": "misorude", "link": "https://stackoverflow.com/users/10283047/misorude"}, "edited": false, "score": 0, "creation_date": 1563025502, "post_id": 56978909, "comment_id": 100570011, "body": "Yes, you are right. I would say my server generates the streaming response not \u201cmultiple responses\u201d. I have also tried XMLHttpRequest progress but not fired for streaming response.  @misorude"}], "owner": {"reputation": 61, "user_id": 7577819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a6f5aa989a3ad568774aa0f75484610?s=128&d=identicon&r=PG&f=1", "display_name": " Ibrahim EL-Sanosi", "link": "https://stackoverflow.com/users/7577819/ibrahim-el-sanosi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562796387, "creation_date": 1562794246, "last_edit_date": 1562796387, "question_id": 56978909, "link": "https://stackoverflow.com/questions/56978909/handle-multiple-php-responses-in-front-end-javascript-or-html5", "title": "Handle Multiple PHP Responses in Front-End (JavaScript or HTML5)", "body": "<p>I want to handle multiple responses from PHP (multiple echoes generated from the loop in PHP) to Front-End (JavaScript to HTML5). The reason for that I have got progression bar in the HTML page so I want to update the progression bar according to responses receives from PHP.</p>\n\n<p>I have tried using AJAX. I send AJAX request using JavaScript but it seems that an AJAX request can't be left open for multiple responses.</p>\n\n<p>Without Ajax, I manage to print the PHP responses immediately to the webpage but I want to handle the responses using Javascript DOM.</p>\n\n<p><strong>PHP code:</strong></p>\n\n<pre><code>   $proc = popen(\"$RDir $workingMainRFile $workingDirData $workingDirReport $fileName $workingRFiles \" . escapeshellarg($title), 'r');\n        //echo '&lt;pre&gt;';\n\n        while (!feof($proc)) {\n            $total += strlen(fread($proc, 4096));\n            $part = strlen(fread($proc, 4096));\n            $current += $part;\n            $prec = intval((($current / 185256) * 100));\n            if ($prec &gt;= 100) {\n                $prec = 100;\n\n            $myObj-&gt;prec = $prec;\n            echo json_encode($myObj);\n\n            @ flush();\n        }\n</code></pre>\n\n<p><strong>JavaScript code:</strong></p>\n\n<pre><code>function getPrec() {\nvar elem = document.getElementById(\"myBarText\");\n    document.getElementById(\"myBar\").style.display = \"block\";\nvar form = document.getElementById('formUpload');\n    var formData = new FormData(form);\n    var xmlhttp = new XMLHttpRequest();\n    xmlhttp.onreadystatechange = function () {\n\n        if (this.readyState == 4) {\n            if (this.status == 200) {\n\n                var myObj = JSON.parse(this.responseText);\n\n                elem.style.width = myObj.prec;\n            } else {\n\n                console.log(\"Error\", xmlhttp.statusText);\n            }\n        }\n    };\n    xmlhttp.open(\"POST\", \"php/upload.php\", true);\n    xmlhttp.send(formData);\n}\n</code></pre>\n\n<p>I would like to handle the multiple PHP responses using JavaScript DOM like the following:</p>\n\n<pre><code>var elem = document.getElementById(\"myBarText\");\nelem.style.width = myObj.prec;\n</code></pre>\n\n<p>So that for each response I want to update the width of the progression bar.</p>\n"}, {"tags": ["javascript", "performance", "object"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1562794284, "post_id": 56978872, "comment_id": 100493763, "body": "Usually you put functions in the prototype, rather than in each instance."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 3, "creation_date": 1562794303, "post_id": 56978872, "comment_id": 100493767, "body": "Are you intentionally avoiding <a href=\"https://javascript.info/class\" rel=\"nofollow noreferrer\">modern JS&#39;s dedicated support for classes via the <code>class</code> keyword</a>? Using them would remove the concern; the JS interpreter should be using whatever solution works best automatically, without worrying about whether you&#39;re accidentally creating a closure per-instance (as it happens, it&#39;s basically creating a prototype with a single copy of each method for you)."}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1562795618, "post_id": 56978872, "comment_id": 100494147, "body": "It doesn&#39;t matter whether the <code>meow</code> function is lengthy or not. It creates a new function object for every instance, which becomes a problem if you have zillions of instances. The code size of the body doesn&#39;t affect the memory used for one of these function objects."}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1562795865, "post_id": 56978872, "comment_id": 100494202, "body": "@ShadowRanger No sure what you mean by &quot;<i>it&#39;s basically creating a prototype with a single copy of each method</i>&quot;?"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1562797163, "post_id": 56978872, "comment_id": 100494538, "body": "@Bergi: The solution given in the other answers, to manually attach a function to <code>Cat.prototype</code>, a la <code>Cat.prototype.meow = function() {};</code> is what modern <code>class</code> syntax does automatically behind the scenes. The function is created once and the single copy is bound to the prototype. Every instance of <code>Cat</code> finds that single copy when you try to look up <code>instance.meow</code>."}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1562829365, "post_id": 56978872, "comment_id": 100502411, "body": "@ShadowRanger ah, I though that part was referring to &quot;<i>creating a closure per instance</i>&quot;, where it didn&#39;t make any sense."}], "answers": [{"comments": [{"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1562795779, "post_id": 56978937, "comment_id": 100494186, "body": "&quot;<i>if this.meow is used then a custom hidden path is defined at each instantiation</i>&quot; - that doesn&#39;t sound right. Am I misunderstanding what you are referring to?"}, {"owner": {"reputation": 76753, "user_id": 1026459, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/pv5mS.png?s=128&g=1", "display_name": "Travis J", "link": "https://stackoverflow.com/users/1026459/travis-j"}, "reply_to_user": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1562799520, "post_id": 56978937, "comment_id": 100495117, "body": "@Bergi - I am not sure? Let me expand and you can tell me. Using <code>this.meow</code> to attach the function will be part of the transitioning object, which uses hidden classes to create an entire hidden path, this path is discovered and creating when using <code>new Cat()</code>. Using a prototype will create a specific hidden class for that prototype object which gets reused and does not need to be created each time when using <code>new Cat()</code>."}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1562829213, "post_id": 56978937, "comment_id": 100502323, "body": "The transitioning path and the hidden class is the same for all <code>Cat</code> objects, it does not need to be created each time the constructor is called, that&#39;s the whole point of the system."}, {"owner": {"reputation": 76753, "user_id": 1026459, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/pv5mS.png?s=128&g=1", "display_name": "Travis J", "link": "https://stackoverflow.com/users/1026459/travis-j"}, "reply_to_user": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1562833851, "post_id": 56978937, "comment_id": 100504610, "body": "@Bergi - I do not believe that it is the same for all implementations of the Cat class. The transitioning path will be the same as the previous call to the constructor, however, it will not be the same as the modified version with the properties attached using <code>this.</code>. I believe those are required to be discovered each time as they are not added using the constructor itself, but rather in the function executing once the object is created. This is the core difference between using a prototype (which initializes with a custom tailored path versus not which requires modification each time)."}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1562840699, "post_id": 56978937, "comment_id": 100508579, "body": "Are we talking about the same code here? There is only one implementation of the <code>Cat</code> class. All instantiations will follow the same hidden class transition path (that was created on the first call) while the constructor initialises the properties - and it absolutely doesn&#39;t matter whether the property value is a function or something else. Not sure what you mean by &quot;<i>not in the constructor itself, but rather in the function executing once the object is created</i>&quot;. The methods don&#39;t create new properties?"}], "tags": [], "owner": {"reputation": 76753, "user_id": 1026459, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/pv5mS.png?s=128&g=1", "display_name": "Travis J", "link": "https://stackoverflow.com/users/1026459/travis-j"}, "is_accepted": false, "score": 1, "last_activity_date": 1562794351, "creation_date": 1562794351, "answer_id": 56978937, "question_id": 56978872, "link": "https://stackoverflow.com/questions/56978872/is-it-a-good-practice-to-put-functions-in-is-javascript-objects/56978937#56978937", "title": "Is it a good practice to put functions in is javascript objects?", "body": "<p>It is better to use a prototype for this.</p>\n\n<pre><code>function Cat(name) {}\nCat.prototype.meow = function(){};\n</code></pre>\n\n<p>Most modern engines (including chrome's V8) will optimize the object creation into a reusable path, whereas if this.meow is used then a custom hidden path is defined at each instantiation.</p>\n\n<p>Does better turn into a micro optimization though? That really depends on your implementation and environment.</p>\n\n<p>For a more thorough explanation of the way that the prototype enhances performance, see this medium explanation from V8 developer Toon Verwaest, <a href=\"https://medium.com/@tverwaes/setting-up-prototypes-in-v8-ec9c9491dfe2\" rel=\"nofollow noreferrer\"><em>Setting up prototypes in V8</em></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 774, "user_id": 3528136, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000774850131/picture?type=large", "display_name": "Eric Svitok", "link": "https://stackoverflow.com/users/3528136/eric-svitok"}, "is_accepted": false, "score": 1, "last_activity_date": 1562794382, "creation_date": 1562794382, "answer_id": 56978945, "question_id": 56978872, "link": "https://stackoverflow.com/questions/56978872/is-it-a-good-practice-to-put-functions-in-is-javascript-objects/56978945#56978945", "title": "Is it a good practice to put functions in is javascript objects?", "body": "<p>You can add function to Cat's prototype. This way, any call to meow will reference the same function.</p>\n\n<pre><code>Cat.prototype.meow = function() {};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1562795708, "post_id": 56979066, "comment_id": 100494170, "body": "<code>forEach</code> is not functional programming. And really I don&#39;t see how this answers the question, your <code>Cat</code> constructor still has the same problem as the code of the OP."}, {"owner": {"reputation": 303, "user_id": 9232077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/019891257ba32105f3f677527ab5c366?s=128&d=identicon&r=PG&f=1", "display_name": "Cyberboy1551", "link": "https://stackoverflow.com/users/9232077/cyberboy1551"}, "reply_to_user": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1562856590, "post_id": 56979066, "comment_id": 100518390, "body": "I had no problems with my &quot;cat&quot; example. As stated above I made a pretty hefty javascript game in Node.Js and every element (players, items, etc) all used thats system. It was a MOBA so there were a lot of players on the same field and I saw no performance issues. Also, I&#39;m talking about array.forEach NOT foreach(...). Here is an article that explains it well: <a href=\"https://medium.com/@eliaai/javascript-functional-programming-foreach-map-filter-reduce-f710abb69753\" rel=\"nofollow noreferrer\">medium.com/@eliaai/&hellip;</a>"}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1562863579, "post_id": 56979066, "comment_id": 100522038, "body": "&quot;a lot of players&quot; means what, a few hundreds? And yes, I&#39;m talking about the array method. Just taking a callback function doesn&#39;t make something functional."}, {"owner": {"reputation": 303, "user_id": 9232077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/019891257ba32105f3f677527ab5c366?s=128&d=identicon&r=PG&f=1", "display_name": "Cyberboy1551", "link": "https://stackoverflow.com/users/9232077/cyberboy1551"}, "reply_to_user": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1562869614, "post_id": 56979066, "comment_id": 100524760, "body": "Maybe I worded it wrong. I mean obviously there is a cost I&#39;m just saying it&#39;s very small and not noticeable and won&#39;t cause the OP&#39;s computer to crash because he as 10000 cats created. To answer your question there are were 10 players at once (MOBA like league of legends it&#39;s 5v5)"}], "tags": [], "owner": {"reputation": 303, "user_id": 9232077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/019891257ba32105f3f677527ab5c366?s=128&d=identicon&r=PG&f=1", "display_name": "Cyberboy1551", "link": "https://stackoverflow.com/users/9232077/cyberboy1551"}, "is_accepted": false, "score": 0, "last_activity_date": 1562795169, "creation_date": 1562795169, "answer_id": 56979066, "question_id": 56978872, "link": "https://stackoverflow.com/questions/56978872/is-it-a-good-practice-to-put-functions-in-is-javascript-objects/56979066#56979066", "title": "Is it a good practice to put functions in is javascript objects?", "body": "<p><strong>Short answer</strong>: It's not expensive. <strong>Long answer</strong>: Look into Functional programming vs Object Oriented Programming. With JavaScript functional programming will allow you to do all sorts of neat things like for example: </p>\n\n<pre><code>function add(a, b)\n{\n   return a + b;\n}\n\nfunction subtract5(a)\n{\n   return a - 5; \n}\n\n//You can pass functions into functions like:  subtract5(add(3, 3)) = 1;\n</code></pre>\n\n<p>Then you can also use functional programming languages to make your life easier with functions like find, forEach, map, reduce it takes in a conditional function to apply it to the array you are working with...for example:</p>\n\n<pre><code> function condition(x)\n {\n  return x.id == 2;\n }\n var users = []\n users.push({ \n  id:1,\n  name:\"Bob\"\n });\n users.push({ \n  id:2,\n   name:\"Dan\"\n })\n// users.find(condition).name is equal to Dan\n//The condition function can be a lot of things which is why it's so powerful\n</code></pre>\n\n<p>Another great example (I used this format in a javascript game with a lot of inside functions and it showed no negative \nperformance )</p>\n\n<pre><code>  var Cat = function(param)\n {\n    var self = {}; \n    self.name = param.name;\n    self.age = param.age;\n    self.birthday = function()\n    {\n      self.age++;\n    }\n    return self;\n } \n  var youngCat = new Cat({name: \"Ginger\", age: 2});\n  youngCat.birthday();\n</code></pre>\n"}], "owner": {"reputation": 246, "user_id": 5383451, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CXAgk.jpg?s=128&g=1", "display_name": "mark mark", "link": "https://stackoverflow.com/users/5383451/mark-mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "closed_date": 1562795517, "answer_count": 3, "score": 1, "last_activity_date": 1586556508, "creation_date": 1562794003, "last_edit_date": 1586556508, "question_id": 56978872, "link": "https://stackoverflow.com/questions/56978872/is-it-a-good-practice-to-put-functions-in-is-javascript-objects", "closed_reason": "Duplicate", "title": "Is it a good practice to put functions in is javascript objects?", "body": "<p>I made a constructor, and am planning to make a large number of objects.</p>\n\n<pre><code>function Cat(name) {\n    this.name = name;\n\n    this.meow = function () {\n        ...\n        ...\n    }\n}\n</code></pre>\n\n<p>Say, function meow() is a very lengthy. Will it become a memory problem if I create many cats or does javascript take care of it? Is it better to create a static function, rather then a function within an object in such case?</p>\n"}, {"tags": ["javascript", "reactjs", "react-data-grid"], "comments": [{"owner": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "edited": false, "score": 0, "creation_date": 1562794624, "post_id": 56978862, "comment_id": 100493872, "body": "Use arrow functions in event handlers, not standard functions. So insead of <code>onClick={ function(..) { ... }</code>, which will have &quot;whatever is the execution context when the function runs&quot;, use <code>onClick={ (...) =&gt; { ... } }</code>, which will have &quot;whatever the execution context is when the function got declared&quot;, e.g. <code>this</code> inside the function points to the same thing that it points to outside the function."}, {"owner": {"reputation": 2564, "user_id": 4134881, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/797360342295a3f637a9c4d71d40d113?s=128&d=identicon&r=PG&f=1", "display_name": "evianpring", "link": "https://stackoverflow.com/users/4134881/evianpring"}, "reply_to_user": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "edited": false, "score": 0, "creation_date": 1562794770, "post_id": 56978862, "comment_id": 100493910, "body": "Actually @Mike&#39;Pomax&#39;Kamermans I just switched over to regular functions because it wasn&#39;t working with arrow functions and I was trying to avoid pitfalls related to the &quot;whatever the execution context is&quot;. Here is a codesandbox for the example if you think you can make it work with that change: <a href=\"https://codesandbox.io/s/rdg-grouping-81b1s\" rel=\"nofollow noreferrer\">codesandbox.io/s/rdg-grouping-81b1s</a>"}, {"owner": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "edited": false, "score": 0, "creation_date": 1562794896, "post_id": 56978862, "comment_id": 100493947, "body": "Please turn that into a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> first - people have plenty of time to help you debug your problem after you remove all the code that is non-essential, they generally don&#39;t have time to first read through your whole codebase =)"}, {"owner": {"reputation": 2564, "user_id": 4134881, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/797360342295a3f637a9c4d71d40d113?s=128&d=identicon&r=PG&f=1", "display_name": "evianpring", "link": "https://stackoverflow.com/users/4134881/evianpring"}, "reply_to_user": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "edited": false, "score": 0, "creation_date": 1562795013, "post_id": 56978862, "comment_id": 100493975, "body": "@Mike&#39;Pomax&#39;Kamermans That is exactly what I did. The only non-essential code in that example is a few lines of styles (but that&#39;s to make the codesandbox more useable). Everything else I wrote specifically from scratch to make this example. I want to understand why bind doesn&#39;t behave as expected. It&#39;s also more code than usual because this issue is specifically arising in React-Data-Grid. But that is the minimal code for a simple table in this lib."}, {"owner": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "edited": false, "score": 1, "creation_date": 1562795104, "post_id": 56978862, "comment_id": 100494005, "body": "for one, what is <code>this</code> supposed to be in a static property? (looking at your <code>columns</code> definition. That said, this is certainly not minimal yet: remove the duplication, make groupBy simply set <i>any</i> state value that render can show a silly <code>&lt;p&gt;state changed!&lt;&#47;p&gt;</code> for, etc. There&#39;s still a lot of code here that has nothing to do with the problem you&#39;re asking about. (mcve&#39;s usually require removing all semblance of what your real code does, and purely drilling down to the one thing that&#39;s not working for you)"}, {"owner": {"reputation": 2564, "user_id": 4134881, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/797360342295a3f637a9c4d71d40d113?s=128&d=identicon&r=PG&f=1", "display_name": "evianpring", "link": "https://stackoverflow.com/users/4134881/evianpring"}, "reply_to_user": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "edited": false, "score": 0, "creation_date": 1562795320, "post_id": 56978862, "comment_id": 100494059, "body": "Well there you go @Mike&#39;Pomax&#39;Kamermans I think the answer is related to me defining <code>columns</code> as a static property. When I move the definition into the constructor it works."}, {"owner": {"reputation": 22145, "user_id": 2733506, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/aef7abc9820d5fd66765e3e99ba28a15?s=128&d=identicon&r=PG", "display_name": "John Ruddell", "link": "https://stackoverflow.com/users/2733506/john-ruddell"}, "edited": false, "score": 1, "creation_date": 1562795449, "post_id": 56978862, "comment_id": 100494097, "body": "Its a timing issue. When you define a &quot;static&quot; property like that, it is translated / compiled to the constructor (as in it gets defined in the constructor). Its not truly static. But that assignment in the constructor is probably happening before you bind the function to the class."}, {"owner": {"reputation": 74735, "user_id": 82586, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/HfVKA.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/82586/james"}, "reply_to_user": {"reputation": 22145, "user_id": 2733506, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/aef7abc9820d5fd66765e3e99ba28a15?s=128&d=identicon&r=PG", "display_name": "John Ruddell", "link": "https://stackoverflow.com/users/2733506/john-ruddell"}, "edited": false, "score": 1, "creation_date": 1562799086, "post_id": 56978862, "comment_id": 100495017, "body": "@JohnRuddell just for correctness, that isn&#39;t a static field definition, it&#39;s a class field definition. As you say, it&#39;s merely just syntactic sugar for writing constructor code as that&#39;s where it ends up. Your suggestion is most likely correct though, attempting to bind <code>this</code> in that way isn&#39;t reliable."}, {"owner": {"reputation": 22145, "user_id": 2733506, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/aef7abc9820d5fd66765e3e99ba28a15?s=128&d=identicon&r=PG", "display_name": "John Ruddell", "link": "https://stackoverflow.com/users/2733506/john-ruddell"}, "reply_to_user": {"reputation": 74735, "user_id": 82586, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/HfVKA.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/82586/james"}, "edited": false, "score": 0, "creation_date": 1562799794, "post_id": 56978862, "comment_id": 100495160, "body": "@James I know, thats why i wrote &quot;static&quot; in quotes, then also said <code>Its not truly static</code>. Its an instance variable assigned to <code>this</code> on the class in the constructor. Some compilers let you write properties on your class this way :)"}], "owner": {"reputation": 2564, "user_id": 4134881, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/797360342295a3f637a9c4d71d40d113?s=128&d=identicon&r=PG&f=1", "display_name": "evianpring", "link": "https://stackoverflow.com/users/4134881/evianpring"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1562795573, "creation_date": 1562793920, "last_edit_date": 1562795573, "question_id": 56978862, "link": "https://stackoverflow.com/questions/56978862/how-can-a-react-method-bound-in-constructor-lose-its-boundedness-when-passed-as", "title": "How can a React method bound in constructor lose it&#39;s boundedness when passed as parameter?", "body": "<p>Here is the codesandbox for this question: <a href=\"https://codesandbox.io/s/rdg-grouping-81b1s\" rel=\"nofollow noreferrer\">https://codesandbox.io/s/rdg-grouping-81b1s</a></p>\n\n<p>I am using <code>React-Data-Grid</code> to render a table. I render a <code>ReactDataGrid</code> with two columns, and When you click on the text <code>GROUP</code> in a header cell you group by that column.</p>\n\n<p>To be able to have a custom header cell with that text <code>GROUP</code>, I use the property <code>headerRenderer</code> in the object defining the columns. </p>\n\n<p>The value passed to this property is a function that takes an <code>onClick</code> handler as parameter, and returns a functional React component that uses that <code>onClick</code> handler.</p>\n\n<p>The <code>onClick</code> parameter is just a method on the original React component, and it is bound in the component's constructor.</p>\n\n<p>As you can see, I am using this <code>headerRenderer</code> property twice, once for each column. However, for the first column, I bind the parameter function to the React component again. For the second column I do not, and this generates an error when I try to click the <code>GROUP</code> text for this column. See error image further below.</p>\n\n<p>My question is: why do I have to bind given that I've already bound the function in the constructor?</p>\n\n<pre><code>import React from 'react';\nimport './App.css';\nimport ReactDataGrid from 'react-data-grid';\nimport { Data } from 'react-data-grid-addons';\n\nconst HeaderRowRenderer = function(props) {\n  return (\n    &lt;div\n      style={{\n        backgroundColor: 'red',\n        paddingLeft: 10,\n        height: '100%',\n        padding: 0,\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n      }}\n    &gt;\n      &lt;span&gt;{props.column.name}&lt;/span&gt;\n      &lt;span onClick={props.onClick}&gt;GROUP&lt;/span&gt;\n    &lt;/div&gt;\n  );\n};\n\nconst HeaderRenderer = function(groupBy, onClick) {\n  return function(props) {\n    return (\n      &lt;HeaderRowRenderer\n        {...props}\n        onClick={function() {\n          onClick(groupBy);\n        }}\n      /&gt;\n    );\n  };\n};\n\nconst rows = [{ productname: 'Beef', quantity: 5 }, { productname: 'Veggies', quantity: 10 }];\n\nclass App extends React.Component {\n  columns = [\n    {\n      key: 'productname',\n      name: 'Product',\n      width: 200,\n      headerRenderer: HeaderRenderer('productname', this.groupBy.bind(this)),\n    },\n    {\n      key: 'quantity',\n      name: 'Quantity',\n      headerRenderer: HeaderRenderer('quantity', this.groupBy),\n    },\n  ];\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      groupBy: new Set([]),\n    };\n    this.groupBy = this.groupBy.bind(this);\n  }\n\n  groupBy(group) {\n    const newSet = new Set(this.state.groupBy);\n    if (newSet.has(group)) {\n      newSet.delete(group);\n    } else {\n      newSet.add(group);\n    }\n    this.setState({ groupBy: newSet });\n  }\n\n  render() {\n    const groupBy = Array.from(this.state.groupBy);\n    // const rows = this.props.orderItems;\n\n    const groupedRows = Data.Selectors.getRows({\n      rows: rows,\n      groupBy,\n    });\n    return (\n      &lt;div&gt;\n        &lt;ReactDataGrid\n          columns={this.columns}\n          rowGetter={i =&gt; groupedRows[i]}\n          rowsCount={groupedRows.length}\n          minHeight={650}\n        /&gt;\n      &lt;/div&gt;\n    );\n  }\n}\n\nexport default App;\n</code></pre>\n\n<p>I looked at the code for <code>React-Data-Grid</code>, and I believe that the <code>headerRenderer</code> prop is called as below: </p>\n\n<pre><code>  getCell() {\n    const { height, column, rowType } = this.props;\n    const renderer = this.props.renderer || SimpleCellRenderer;\n    if (isElement(renderer)) {\n      // if it is a string, it's an HTML element, and column is not a valid property, so only pass height\n      if (typeof renderer.type === 'string') {\n        return React.cloneElement(renderer, { height });\n      }\n      return React.cloneElement(renderer, { column, height });\n    }\n    return React.createElement(renderer, { column, rowType });\n  }\n</code></pre>\n\n<p>I'm not very familiar with the ways in which a function that was bound using <code>bind</code> and then is passed around can lose this boundedness. Does this happen as a result of React.cloneElement, or what could be the cause of it?</p>\n\n<p><a href=\"https://i.stack.imgur.com/Zok9D.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Zok9D.png\" alt=\"Error\"></a></p>\n"}, {"tags": ["javascript", "json", "selenium", "nightwatch.js"], "comments": [{"owner": {"reputation": 24454, "user_id": 5108418, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/AN6Pg.png?s=128&g=1", "display_name": "Tamas Hegedus", "link": "https://stackoverflow.com/users/5108418/tamas-hegedus"}, "edited": false, "score": 0, "creation_date": 1562826671, "post_id": 56978850, "comment_id": 100501062, "body": "launchurl and login do asynchronous things, but themselves are not asynchronous (there are no callbacks, no promises, no async functions). That means you fire and forget both functions. Your functions will run in parallel and will not get any error output"}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 9347898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7Y1a.jpg?s=128&g=1", "display_name": "BigO", "link": "https://stackoverflow.com/users/9347898/bigo"}, "edited": false, "score": 0, "creation_date": 1562826166, "post_id": 56982752, "comment_id": 100500827, "body": "Sorry, I edited that for the sake of the code example. They match in the actual code. I will edit that now."}, {"owner": {"reputation": 132, "user_id": 8806769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/320e3c38a9bfde618452c1e42ac3c256?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas_Bo", "link": "https://stackoverflow.com/users/8806769/lucas-bo"}, "reply_to_user": {"reputation": 171, "user_id": 9347898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7Y1a.jpg?s=128&g=1", "display_name": "BigO", "link": "https://stackoverflow.com/users/9347898/bigo"}, "edited": false, "score": 0, "creation_date": 1562826317, "post_id": 56982752, "comment_id": 100500888, "body": "Allright, I&#39;ll keep on looking what the problem might be"}], "tags": [], "owner": {"reputation": 132, "user_id": 8806769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/320e3c38a9bfde618452c1e42ac3c256?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas_Bo", "link": "https://stackoverflow.com/users/8806769/lucas-bo"}, "is_accepted": false, "score": 0, "last_activity_date": 1562826080, "creation_date": 1562826080, "answer_id": 56982752, "question_id": 56978850, "link": "https://stackoverflow.com/questions/56978850/parsing-data-in-javascript-with-selenium/56982752#56982752", "title": "Parsing data in javascript with selenium", "body": "<p>The paths are different which might be the problem:  </p>\n\n<p>LAUNCHURL: <code>fs.readFile('C:/NightWatch_Automation/credentials.json'</code></p>\n\n<p>Login: <code>fs.readFile('C:/Users/NightWatch_Automation/credentials.json'</code></p>\n"}], "owner": {"reputation": 171, "user_id": 9347898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7Y1a.jpg?s=128&g=1", "display_name": "BigO", "link": "https://stackoverflow.com/users/9347898/bigo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562826211, "creation_date": 1562793843, "last_edit_date": 1562826211, "question_id": 56978850, "link": "https://stackoverflow.com/questions/56978850/parsing-data-in-javascript-with-selenium", "title": "Parsing data in javascript with selenium", "body": "<p>I am trying to read data from a json file in javascript. I can read succesfully read from it. When passing in the data in the code it throws errors. \nAny help will be appriciated. </p>\n\n<p>My code is as follows :</p>\n\n<pre><code> module.exports = {\n'@tags': ['TC2'],\n\"LAUNCHURL\" : function (browser) {\nvar fs = require('fs');\n\nfs.readFile('C:/NightWatch_Automation/credentials.json', 'utf8', function (err, data) {\n\nif (err) throw err; // we'll not consider error handling for now\nvar mydata = JSON.parse(data);\n\nvar url_get = mydata.credentials[0]['url'] //Passing data works here \n\n    browser\n    //opens salesforce and checks title to match 'Login | Salesforce'\n    .url(url_get)\n    .waitForElementVisible('//body', 1000)\n    //.assert.title('Login | Salesforce')\n    });\n\n},\n\n\"Login\": function(browser) {\n var fs = require('fs');\n fs.readFile('C:/NightWatch_Automation/credentials.json', 'utf8', function (err, data) {\n if (err) throw err; // we'll not consider error handling for now\n var mydata = JSON.parse(data);\n\n var email = mydata.credentials[0]['email']\n\n  browser\n    .useXpath()\n    .click(\"//a[contains(text(),'Sign In')]\")\n    .waitForElementVisible('//body',1000)\n    .setValue(\"//input[@aria-label='Enter email address']\", email )//Passing data does NOT work here \n    .click(\"//button[@type='button']\")\n    .waitForElementVisible(\"//input[@id='password']\")\n    .setValue(\"//input[@id='password']\",\"password12345\")\n    .click(\"//button[@type='button']\")\n     });\n\n }\n};\n</code></pre>\n\n<p>My json file is as follows </p>\n\n<p><code>{ \"credentials\": [  {\"url\": \"https://www.walmart.com\", \"search\": \"bandaids\", \"email\" : \"test@yahoo.com\", \"password\" : \"password12345\"}] }</code></p>\n\n<p><em>Further info</em>\nWhen the values are hard coded, the script works. As soon as a attempt to pass in data in breaks the code and wont complete. Using nightwatch as a test tool.</p>\n"}, {"tags": ["javascript", "arrays", "reactjs", "filter"], "comments": [{"owner": {"reputation": 433, "user_id": 7615694, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DLU1TO6d0W4/AAAAAAAAAAI/AAAAAAAAGfU/SyXJOTjSf8I/photo.jpg?sz=128", "display_name": "Jamal Abo", "link": "https://stackoverflow.com/users/7615694/jamal-abo"}, "edited": false, "score": 1, "creation_date": 1562793927, "post_id": 56978843, "comment_id": 100493652, "body": "you are sure that <code>favorite.userId === this.props.currentUserId</code> will return true in the loop?"}, {"owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 1, "creation_date": 1562793927, "post_id": 56978843, "comment_id": 100493653, "body": "Maybe <code>currentUserId</code> is the wrong type"}, {"owner": {"reputation": 22145, "user_id": 2733506, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/aef7abc9820d5fd66765e3e99ba28a15?s=128&d=identicon&r=PG", "display_name": "John Ruddell", "link": "https://stackoverflow.com/users/2733506/john-ruddell"}, "edited": false, "score": 0, "creation_date": 1562794273, "post_id": 56978843, "comment_id": 100493762, "body": "are you correctly binding <code>filterFavorites</code> to the class instance so you have access to props? <a href=\"https://codesandbox.io/s/react-example-ncvtq\" rel=\"nofollow noreferrer\"><b>Your code executes just fine</b></a>, so either you aren&#39;t binding or you dont have the values you expect you do"}, {"owner": {"reputation": 11, "user_id": 2659148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/973cc5d72fbdac74c092a16a4217ff29?s=128&d=identicon&r=PG", "display_name": "SA97", "link": "https://stackoverflow.com/users/2659148/sa97"}, "reply_to_user": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 0, "creation_date": 1562794484, "post_id": 56978843, "comment_id": 100493827, "body": "@Aluan thanks, I just realized currentUserId was not properly set in mapStateToProps and was returning as undefined so the comparison always returned false."}], "answers": [{"comments": [{"owner": {"reputation": 22145, "user_id": 2733506, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/aef7abc9820d5fd66765e3e99ba28a15?s=128&d=identicon&r=PG", "display_name": "John Ruddell", "link": "https://stackoverflow.com/users/2733506/john-ruddell"}, "edited": false, "score": 2, "creation_date": 1562794477, "post_id": 56978948, "comment_id": 100493820, "body": "This is not true, because an arrow function does the binding for you."}], "tags": [], "owner": {"reputation": 17, "user_id": 9859891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lXBR4.jpg?s=128&g=1", "display_name": "Alex Szeliga", "link": "https://stackoverflow.com/users/9859891/alex-szeliga"}, "is_accepted": false, "score": -2, "last_activity_date": 1562794397, "creation_date": 1562794397, "answer_id": 56978948, "question_id": 56978843, "link": "https://stackoverflow.com/questions/56978843/array-filter-returning-an-empty-array-in-reactjs/56978948#56978948", "title": "Array filter returning an empty array in Reactjs", "body": "<p>By default, filter doesn't have <code>this</code> bound to anything; it's <code>undefined</code>, you have to pass the this reference after the function body.</p>\n\n<p><a href=\"https://www.w3schools.com/jsref/jsref_filter.asp\" rel=\"nofollow noreferrer\">W3FTW</a></p>\n\n<pre><code>    filterFavorites() {\n        return this.props.favorites.filter((favorite) =&gt; {\n            return favorite.userId === this.props.currentUserId;\n        }, this);\n    }\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 2659148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/973cc5d72fbdac74c092a16a4217ff29?s=128&d=identicon&r=PG", "display_name": "SA97", "link": "https://stackoverflow.com/users/2659148/sa97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 313, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1562794397, "creation_date": 1562793794, "question_id": 56978843, "link": "https://stackoverflow.com/questions/56978843/array-filter-returning-an-empty-array-in-reactjs", "title": "Array filter returning an empty array in Reactjs", "body": "<p>I am trying to filter an array of objects in ReactJs. However when I try filtering the objects by a userId, the array returns as empty. </p>\n\n<p>To make sure that my favorites prop has updated, I console logged all relavent info in my componentDidMount() function. The console.log showed that my favorites prop was indeed an array with objects inside of it. </p>\n\n<pre><code>componentDidUpdate() {\n        console.log(this.props.favorites);\n        console.log(this.props.favorites[0].userId);\n        console.log(this.filterFavorites());\n    }\n\n    filterFavorites() {\n        return this.props.favorites.filter((favorite) =&gt; {\n            return favorite.userId === this.props.currentUserId;\n        });\n    }\n</code></pre>\n\n<p>However I expected an array returned with the objects filtered by the current user's id. Instead I got an empty array</p>\n"}, {"tags": ["javascript", "instagram", "instagram-api", "instagram-graph-api"], "comments": [{"owner": {"reputation": 136, "user_id": 3242048, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oMfx9.jpg?s=128&g=1", "display_name": "DrFreeze", "link": "https://stackoverflow.com/users/3242048/drfreeze"}, "edited": false, "score": 0, "creation_date": 1562796648, "post_id": 56978819, "comment_id": 100494425, "body": "Try add the video_url field too. Check this link: <a href=\"https://developers.facebook.com/docs/marketing-api/reference/instagram-carousel/\" rel=\"nofollow noreferrer\">developers.facebook.com/docs/marketing-api/reference/&hellip;</a>"}, {"owner": {"reputation": 12768, "user_id": 695749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/vV72v.jpg?s=128&g=1", "display_name": "Michael Giovanni Pumo", "link": "https://stackoverflow.com/users/695749/michael-giovanni-pumo"}, "reply_to_user": {"reputation": 136, "user_id": 3242048, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oMfx9.jpg?s=128&g=1", "display_name": "DrFreeze", "link": "https://stackoverflow.com/users/3242048/drfreeze"}, "edited": false, "score": 0, "creation_date": 1562841080, "post_id": 56978819, "comment_id": 100508830, "body": "@DrFreeze That does not make a difference I&#39;m afraid."}], "answers": [{"tags": [], "owner": {"reputation": 12768, "user_id": 695749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/vV72v.jpg?s=128&g=1", "display_name": "Michael Giovanni Pumo", "link": "https://stackoverflow.com/users/695749/michael-giovanni-pumo"}, "is_accepted": true, "score": 3, "last_activity_date": 1562960425, "creation_date": 1562960425, "answer_id": 57013165, "question_id": 56978819, "link": "https://stackoverflow.com/questions/56978819/how-to-return-video-from-an-instagram-media-carousel-album/57013165#57013165", "title": "How to return video from an Instagram media carousel album?", "body": "<p>Whilst it doesn't seem like this API returns a video at the top-level for a carousel type, I did find a work-around for anyone that may need it.</p>\n\n<p>In a carousel type, there should be a key for children. So you need to request that in the field's parameters.</p>\n\n<p>Using sub-fields in this children field, you can get the actual media items (videos).</p>\n\n<p>For example:</p>\n\n<pre><code>const fields = [\n  'caption',\n  'children{media_type,media_url,thumbnail_url}',\n  'id',\n  'media_type',\n  'media_url',\n  'permalink',\n  'thumbnail_url',\n  'timestamp'\n].join(',')\n\nconst request = await fetch(`https://graph.facebook.com/v3.3/${userId}/media?fields=${fields}&amp;access_token=${accessToken}`)\n</code></pre>\n\n<p>In the children's key of the JSON response, you will see your videos. Simply use this to display as your main media if you so wish.</p>\n\n<p>Try the Graph API Explorer to see what fields are available to you. I cannot work out how to return width and height though if anyone is aware how to do that.</p>\n\n<p><a href=\"https://developers.facebook.com/tools/explorer\" rel=\"nofollow noreferrer\">https://developers.facebook.com/tools/explorer</a></p>\n"}], "owner": {"reputation": 12768, "user_id": 695749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/vV72v.jpg?s=128&g=1", "display_name": "Michael Giovanni Pumo", "link": "https://stackoverflow.com/users/695749/michael-giovanni-pumo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1024, "favorite_count": 1, "accepted_answer_id": 57013165, "answer_count": 1, "score": 1, "last_activity_date": 1562960425, "creation_date": 1562793674, "last_edit_date": 1562794408, "question_id": 56978819, "link": "https://stackoverflow.com/questions/56978819/how-to-return-video-from-an-instagram-media-carousel-album", "title": "How to return video from an Instagram media carousel album?", "body": "<p>I am making requests to the Instagram API to get posts on a users feed.</p>\n\n<p><a href=\"https://developers.facebook.com/docs/instagram-api/reference/media/#returnable-fields\" rel=\"nofollow noreferrer\">https://developers.facebook.com/docs/instagram-api/reference/media/#returnable-fields</a></p>\n\n<p>There appear to be 3 types coming through; <code>IMAGE</code>, <code>VIDEO</code> and <code>CAROUSEL_ALBUM</code>.</p>\n\n<p>In the <code>IMAGE</code> type, the <code>media_url</code> key in the object is a link to the image.</p>\n\n<p>In the <code>VIDEO</code> type, the <code>media_url</code> key in the object is a link to the mp4 video and it has an additional key called <code>thumbnail_url</code> for the static image of the video.</p>\n\n<p>The <code>CAROUSEL_ALBUM</code> however only has a <code>media_url</code> key (like <code>IMAGE</code>) and it is only an image, even if I know that carousel contains mp4 videos.</p>\n\n<p>How can I get the video on the <code>CAROUSEL_ALBUM</code> type that's returned from Instagram?</p>\n\n<p>I request the following fields:</p>\n\n<pre><code>`https://graph.facebook.com/v3.3/${item.id}?access_token=${accessToken}&amp;fields=id,media_type,media_url,thumbnail_url,permalink,caption,timestamp`\n</code></pre>\n\n<p>These requests are made in a loop from an array of post ID's. Are there additional settings I need to make?</p>\n\n<p>A typical <code>CAROUSEL_ALBUM</code> request I get looks like:</p>\n\n<pre><code>{\n  \"media_type\": \"CAROUSEL_ALBUM\",\n  \"media_url\": \"https://scontent.xx.fbcdn.net/v/t51.2885-15/66441408_2082905628680299_8050667243209299756_n.jpg?_nc_cat=100&amp;_nc_oc=AQk2PElxoGzOzQ_4f-4vANh_Db1Mmra2wkci2aEKbc3vCstLzQeWQxKadbe1ByF8Vec&amp;_nc_ht=scontent.xx&amp;oh=5aa8ac107e1bd5da07b6cb5d760200f6&amp;oe=5DC18C62\",\n  \"permalink\": \"https://www.instagram.com/p/Bzif-HhAiBk/\",\n  \"caption\": \"Each video in this carousel stands for a stage in the animation process for our latest experiment, where we animated a 3d model and used it as a basis for the 2d rotoscoping.\",\n  \"timestamp\": \"2019-07-05T14:50:53+0000\",\n  \"id\": \"18053365636184706\"\n}\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["javascript", "lodash", "vuex"], "comments": [{"owner": {"reputation": 21818, "user_id": 8583563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U42av.png?s=128&g=1", "display_name": "skirtle", "link": "https://stackoverflow.com/users/8583563/skirtle"}, "edited": false, "score": 0, "creation_date": 1562801901, "post_id": 56978774, "comment_id": 100495566, "body": "Most likely something is <code>null</code> or <code>undefined</code>. Try adding some console logging to figure out what. I suggest starting with <code>console.log(post.fields.category)</code> and <code>console.log(category)</code>"}, {"owner": {"reputation": 585, "user_id": 5046256, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CImQA.png?s=128&g=1", "display_name": "Wonderman", "link": "https://stackoverflow.com/users/5046256/wonderman"}, "reply_to_user": {"reputation": 21818, "user_id": 8583563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U42av.png?s=128&g=1", "display_name": "skirtle", "link": "https://stackoverflow.com/users/8583563/skirtle"}, "edited": false, "score": 0, "creation_date": 1562845361, "post_id": 56978774, "comment_id": 100511309, "body": "Filtering logic is correct and implemented correctly, I&#39;ve had a problem with an entry not published so, It was undefined in Contentful api response. I&#39;ve resolve this problem. I apologize for the useless post"}], "owner": {"reputation": 585, "user_id": 5046256, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CImQA.png?s=128&g=1", "display_name": "Wonderman", "link": "https://stackoverflow.com/users/5046256/wonderman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 338, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562793486, "creation_date": 1562793486, "question_id": 56978774, "link": "https://stackoverflow.com/questions/56978774/filtering-multiple-objects-with-lodash-filter-function-in-vuex-actions", "title": "Filtering multiple objects with lodash filter function in vuex actions", "body": "<p>Trying to filter a collection of entities (typical blog post) by some values, using lodash filter function.\nI'm developing with Vue.js (latest version) and I've a vuex module (post.js) with some getters:</p>\n\n<pre><code>computed: {\n  ...mapGetters('post', ['postBySlug', 'postsWithoutCurrentPost']),\n  posts() {\n    return this.postsWithoutCurrentPost(this.slug, this.category)\n  },\n},\n</code></pre>\n\n<p>I call postsWithoutCurrentPost getter with two parameters to filter blog posts (from vuex store) and get all blog posts with this.category minus current blog post (this.slug).</p>\n\n<p>So, the postsWithoutCurrentPost implementation is as follow:</p>\n\n<pre><code>export const getters = {\n  postsWithoutCurrentPost: state =&gt; (slug, category) =&gt; \n    _filter(state.posts, post =&gt; post.fields.slug !== slug &amp;&amp; post.fields.category.fields.name === category.fields.name)\n}\n</code></pre>\n\n<p>Inspecting Vue dev tools, I notice that I've an error</p>\n\n<p><strong>posts:\"(error during evaluation)\"</strong></p>\n\n<p>But this is really strange for me.</p>\n\n<p>I left from this implementation:</p>\n\n<pre><code>export const getters = {\n  postsWithoutCurrentPost: state =&gt; (slug, category) =&gt; \n    _filter(state.posts, post =&gt; post.fields.slug !== slug)\n}\n</code></pre>\n\n<p>which works without any error obviously not taking into account filtering by category.</p>\n\n<p>Why adding a condition does the method stop working? Where am I doing wrong?</p>\n"}, {"tags": ["javascript", "vue.js", "webpack", "babeljs", "nuxt.js"], "comments": [{"owner": {"reputation": 2875, "user_id": 10526685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27729abb4d20a420849d3d36f150703d?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew1325", "link": "https://stackoverflow.com/users/10526685/andrew1325"}, "edited": false, "score": 0, "creation_date": 1562800075, "post_id": 56978766, "comment_id": 100495225, "body": "Did you remove package-lock.json / yarn.lock before upgrade? I guess you&#39;ve looked at the release <a href=\"https://nuxtjs.org/guide/release-notes/#v2.5.0\" rel=\"nofollow noreferrer\">notes</a>."}, {"owner": {"reputation": 2004, "user_id": 1114816, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/kKRpu.jpg?s=128&g=1", "display_name": "Terion", "link": "https://stackoverflow.com/users/1114816/terion"}, "reply_to_user": {"reputation": 2875, "user_id": 10526685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27729abb4d20a420849d3d36f150703d?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew1325", "link": "https://stackoverflow.com/users/10526685/andrew1325"}, "edited": false, "score": 0, "creation_date": 1562857849, "post_id": 56978766, "comment_id": 100519120, "body": "@Andrew1325 removed yarn.lock and cleared node_modules, updated nuxt to 2.5 - the same. dev build works, prod - no"}, {"owner": {"reputation": 14517, "user_id": 239354, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e77a08f46144e1af3354f980911a94c9?s=128&d=identicon&r=PG", "display_name": "Aldarund", "link": "https://stackoverflow.com/users/239354/aldarund"}, "edited": false, "score": 0, "creation_date": 1562874804, "post_id": 56978766, "comment_id": 100526859, "body": "what node version?"}, {"owner": {"reputation": 2004, "user_id": 1114816, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/kKRpu.jpg?s=128&g=1", "display_name": "Terion", "link": "https://stackoverflow.com/users/1114816/terion"}, "reply_to_user": {"reputation": 14517, "user_id": 239354, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e77a08f46144e1af3354f980911a94c9?s=128&d=identicon&r=PG", "display_name": "Aldarund", "link": "https://stackoverflow.com/users/239354/aldarund"}, "edited": false, "score": 0, "creation_date": 1563031214, "post_id": 56978766, "comment_id": 100571291, "body": "@Aldarund 10.12 but this is irrelevant as error is on client"}, {"owner": {"reputation": 14517, "user_id": 239354, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e77a08f46144e1af3354f980911a94c9?s=128&d=identicon&r=PG", "display_name": "Aldarund", "link": "https://stackoverflow.com/users/239354/aldarund"}, "edited": false, "score": 0, "creation_date": 1563032287, "post_id": 56978766, "comment_id": 100571526, "body": "babel/nuxt preset should be used. So i suggest to remove all your custom babel conf and deps and try with default. And if it work - you can customize babel <a href=\"https://nuxtjs.org/api/configuration-build/#babel\" rel=\"nofollow noreferrer\">nuxtjs.org/api/configuration-build/#babel</a>"}, {"owner": {"reputation": 2004, "user_id": 1114816, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/kKRpu.jpg?s=128&g=1", "display_name": "Terion", "link": "https://stackoverflow.com/users/1114816/terion"}, "reply_to_user": {"reputation": 14517, "user_id": 239354, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e77a08f46144e1af3354f980911a94c9?s=128&d=identicon&r=PG", "display_name": "Aldarund", "link": "https://stackoverflow.com/users/239354/aldarund"}, "edited": false, "score": 0, "creation_date": 1563273236, "post_id": 56978766, "comment_id": 100636443, "body": "@Aldarund thank you. viewed the docs, they say that default preset is is @nuxt/babel-preset-app. Specifiying it manually leads to <code>Unexpected token export</code> error and app not rendering at all: <a href=\"https://www.dropbox.com/s/djkdi39391nzyev/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%202019-07-16%2013.30.38.png?dl=0\" rel=\"nofollow noreferrer\">dropbox.com/s/djkdi39391nzyev/&hellip;</a>  setting build config too default babel: {babelrc: false} with plugins allows to work SSR, but client fails with error <code>Cannot assign to read only property &#39;exports&#39; of object &#39;#&lt;Object&gt;&#39;</code> :("}, {"owner": {"reputation": 2004, "user_id": 1114816, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/kKRpu.jpg?s=128&g=1", "display_name": "Terion", "link": "https://stackoverflow.com/users/1114816/terion"}, "reply_to_user": {"reputation": 14517, "user_id": 239354, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e77a08f46144e1af3354f980911a94c9?s=128&d=identicon&r=PG", "display_name": "Aldarund", "link": "https://stackoverflow.com/users/239354/aldarund"}, "edited": false, "score": 0, "creation_date": 1563281275, "post_id": 56978766, "comment_id": 100640851, "body": "@Aldarund last error resolved when I removed packages from <code>build.transpile</code>, and with default babel config + plugins  `     babel: {     babelrc: false,     &quot;plugins&quot;: [       &quot;@babel/plugin-transform-runtime&quot;,       &quot;@babel/plugin-syntax-dynamic-import&quot;,       &quot;@babel/plugin-proposal-export-default-from&quot;,       &quot;@babel/plugin-proposal-object-rest-spread&quot;,       &quot;@babel/plugin-proposal-optional-chaining&quot;,       &quot;@babel/plugin-proposal-export-namespace-from&quot;     ]     }, ` app started... but with the same error <code>global is not defined</code> :("}, {"owner": {"reputation": 14517, "user_id": 239354, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e77a08f46144e1af3354f980911a94c9?s=128&d=identicon&r=PG", "display_name": "Aldarund", "link": "https://stackoverflow.com/users/239354/aldarund"}, "edited": false, "score": 0, "creation_date": 1563284584, "post_id": 56978766, "comment_id": 100642931, "body": "well its hard to say without exact repro. Try also to remove lock file and deps and reinstall"}, {"owner": {"reputation": 2004, "user_id": 1114816, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/kKRpu.jpg?s=128&g=1", "display_name": "Terion", "link": "https://stackoverflow.com/users/1114816/terion"}, "reply_to_user": {"reputation": 14517, "user_id": 239354, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e77a08f46144e1af3354f980911a94c9?s=128&d=identicon&r=PG", "display_name": "Aldarund", "link": "https://stackoverflow.com/users/239354/aldarund"}, "edited": false, "score": 0, "creation_date": 1563287764, "post_id": 56978766, "comment_id": 100645070, "body": "@Aldarund I&#39;ve found: <a href=\"https://stackoverflow.com/a/57059769/1114816\">stackoverflow.com/a/57059769/1114816</a>"}, {"owner": {"reputation": 2004, "user_id": 1114816, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/kKRpu.jpg?s=128&g=1", "display_name": "Terion", "link": "https://stackoverflow.com/users/1114816/terion"}, "reply_to_user": {"reputation": 14517, "user_id": 239354, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e77a08f46144e1af3354f980911a94c9?s=128&d=identicon&r=PG", "display_name": "Aldarund", "link": "https://stackoverflow.com/users/239354/aldarund"}, "edited": false, "score": 0, "creation_date": 1563302904, "post_id": 56978766, "comment_id": 100652502, "body": "@Aldarund thank you for your time"}], "answers": [{"tags": [], "owner": {"reputation": 2004, "user_id": 1114816, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/kKRpu.jpg?s=128&g=1", "display_name": "Terion", "link": "https://stackoverflow.com/users/1114816/terion"}, "is_accepted": true, "score": 0, "last_activity_date": 1563287734, "creation_date": 1563287734, "answer_id": 57059769, "question_id": 56978766, "link": "https://stackoverflow.com/questions/56978766/global-is-not-defined-in-nuxt-2-5-and-higher/57059769#57059769", "title": "Global is not defined in Nuxt 2.5 and higher", "body": "<p>After many hours of investigation I've figured out that problem was in this config:</p>\n\n<pre><code>extend(config, {isDev, isClient, isServer}) {\n  if (isClient) {\n    config.target = process.env.BUILD_TARGET || 'electron-renderer';\n  }\n})\n</code></pre>\n\n<p>Have ho idea why it all worked prior 2.5 and broke after, but here is the case</p>\n"}], "owner": {"reputation": 2004, "user_id": 1114816, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/kKRpu.jpg?s=128&g=1", "display_name": "Terion", "link": "https://stackoverflow.com/users/1114816/terion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 0, "accepted_answer_id": 57059769, "answer_count": 1, "score": 0, "last_activity_date": 1563287734, "creation_date": 1562793435, "last_edit_date": 1562793933, "question_id": 56978766, "link": "https://stackoverflow.com/questions/56978766/global-is-not-defined-in-nuxt-2-5-and-higher", "title": "Global is not defined in Nuxt 2.5 and higher", "body": "<p>My app used Nuxt 2.1, than I graduately updated it and till Nuxt 2.4 everything is ok, but from 2.5 and up production builds brake with <code>global is not defined</code> error.</p>\n\n<p>Place of error is in <code>.nuxt/client.js@26</code>:</p>\n\n<pre><code>if (!global.fetch) { global.fetch = fetch }\n</code></pre>\n\n<p>I can't figure out how to fix this (need to define <code>global</code> as far as I understand) and no answers out there. As well as such bug reports, what is strange. </p>\n\n<p>Dependencies list:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>    \"dependencies\": {\r\n        \"@fortawesome/fontawesome-svg-core\": \"^1.2.7\",\r\n        \"@fortawesome/free-regular-svg-icons\": \"^5.4.2\",\r\n        \"@fortawesome/free-solid-svg-icons\": \"^5.4.2\",\r\n        \"@fortawesome/vue-fontawesome\": \"^0.1.1\",\r\n        \"@johmun/vue-tags-input\": \"^2.0.1\",\r\n        \"@nuxtjs/auth\": \"^4.5.3\",\r\n        \"@nuxtjs/axios\": \"^5.3.6\",\r\n        \"@nuxtjs/dotenv\": \"^1.3.0\",\r\n        \"@nuxtjs/google-analytics\": \"^2.2.0\",\r\n        \"@nuxtjs/moment\": \"^1.0.0\",\r\n        \"@saeris/vue-spinners\": \"^1.0.8\",\r\n        \"apexcharts\": \"^2.0.9\",\r\n        \"axios\": \"^0.18.0\",\r\n        \"canvas\": \"^2.0.1\",\r\n        \"deep-map\": \"^2.0.0\",\r\n        \"deepmerge\": \"^3.3.0\",\r\n        \"element-ui\": \"^2.4.7\",\r\n        \"glob-all\": \"^3.1.0\",\r\n        \"html-element-attributes\": \"^2.0.0\",\r\n        \"json-loader\": \"^0.5.7\",\r\n        \"laravel-echo\": \"^1.5.3\",\r\n        \"lockr\": \"^0.8.5\",\r\n        \"lodash\": \"^4.17.11\",\r\n        \"moment\": \"^2.22.2\",\r\n        \"nib\": \"^1.1.2\",\r\n        \"nuxt\": \"^2.8.1\",\r\n        \"nuxt-babel\": \"^1.0.1\",\r\n        \"nuxt-i18n\": \"^5.12.7\",\r\n        \"purgecss-webpack-plugin\": \"^1.5.0\",\r\n        \"pusher-js\": \"^4.4.0\",\r\n        \"raw-loader\": \"^3.0.0\",\r\n        \"rupture\": \"^0.7.1\",\r\n        \"s-grid\": \"^1.2.1\",\r\n        \"stylus\": \"^0.54.5\",\r\n        \"stylus-loader\": \"^3.0.2\",\r\n        \"underscore\": \"^1.9.1\",\r\n        \"v-viewer\": \"^1.3.1\",\r\n        \"vue-apexcharts\": \"^1.2.1\",\r\n        \"vue-awesome\": \"^3.2.0\",\r\n        \"vue-cookie-law\": \"^1.10.0\",\r\n        \"vue-filter\": \"^0.2.5\",\r\n        \"vue-js-modal\": \"^1.3.28\",\r\n        \"vue-lodash\": \"^2.0.0\",\r\n        \"vue-nl2br\": \"^0.1.1\",\r\n        \"vue-scrollto\": \"^2.15.0\",\r\n        \"vue-the-mask\": \"^0.11.1\",\r\n        \"vue-wysiwyg\": \"^1.7.2\",\r\n        \"vue2-editor\": \"^2.6.6\",\r\n        \"vue2-google-maps\": \"^0.10.6\",\r\n        \"vue2-transitions\": \"^0.2.3\",\r\n        \"vuedraggable\": \"^2.16.0\",\r\n        \"vuejs-datepicker\": \"^1.5.4\"\r\n      },\r\n      \"devDependencies\": {\r\n        \"@babel/core\": \"^7.5.4\",\r\n        \"@babel/node\": \"^7.5.0\",\r\n        \"@babel/plugin-proposal-export-default-from\": \"^7.5.2\",\r\n        \"@babel/plugin-proposal-export-namespace-from\": \"^7.5.2\",\r\n        \"@babel/plugin-proposal-object-rest-spread\": \"^7.5.4\",\r\n        \"@babel/plugin-proposal-optional-chaining\": \"^7.2.0\",\r\n        \"@babel/plugin-syntax-dynamic-import\": \"^7.2.0\",\r\n        \"@babel/plugin-transform-runtime\": \"^7.5.0\",\r\n        \"@babel/polyfill\": \"^7.4.4\",\r\n        \"@babel/preset-env\": \"^7.5.4\",\r\n        \"@babel/preset-flow\": \"^7.0.0\",\r\n        \"babel-eslint\": \"^8.2.1\",\r\n        \"cross-env\": \"^5.2.0\",\r\n        \"deep-map-async\": \"^1.5.1\",\r\n        \"electron\": \"2.0.0-beta.7\",\r\n        \"electron-builder\": \"^20.8.1\",\r\n        \"electron-devtools-installer\": \"^2.2.3\",\r\n        \"es6-weak-map\": \"^2.0.3\",\r\n        \"eslint\": \"^4.15.0\",\r\n        \"eslint-friendly-formatter\": \"^3.0.0\",\r\n        \"eslint-loader\": \"^1.7.1\",\r\n        \"eslint-plugin-vue\": \"^4.0.0\",\r\n        \"google-translate-api\": \"^2.3.0\",\r\n        \"tosource\": \"^1.0.0\",\r\n        \"translatte\": \"^2.4.3\",\r\n        \"webpack-node-externals\": \"^1.7.2\",\r\n        \"yargs\": \"^13.2.4\"\r\n      }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>.babelrc:</p>\n\n<pre><code>{\n  \"presets\": [\"@babel/env\"],\n  \"plugins\": [\n    \"@babel/plugin-transform-runtime\",\n    \"@babel/plugin-syntax-dynamic-import\",\n    \"@babel/plugin-proposal-export-default-from\",\n    \"@babel/plugin-proposal-object-rest-spread\",\n    \"@babel/plugin-proposal-optional-chaining\",\n    \"@babel/plugin-proposal-export-namespace-from\"\n  ]\n}\n</code></pre>\n"}, {"tags": ["javascript", "karma-jasmine", "karma-runner", "web-component", "karma-chrome-launcher"], "comments": [{"owner": {"reputation": 2459, "user_id": 4148175, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5292692b48cc43a28b55d8fd6581bbed?s=128&d=identicon&r=PG&f=1", "display_name": "Jim C", "link": "https://stackoverflow.com/users/4148175/jim-c"}, "edited": false, "score": 0, "creation_date": 1565118036, "post_id": 56978741, "comment_id": 101249135, "body": "I am still looking carefully if someone add some answer or comment"}], "owner": {"reputation": 2459, "user_id": 4148175, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5292692b48cc43a28b55d8fd6581bbed?s=128&d=identicon&r=PG&f=1", "display_name": "Jim C", "link": "https://stackoverflow.com/users/4148175/jim-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 470, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1562793317, "creation_date": 1562793317, "question_id": 56978741, "link": "https://stackoverflow.com/questions/56978741/an-error-was-thrown-in-afterall-during-webcomponent-test-with-karma", "title": "An error was thrown in afterAll - during webcomponent test with Karma", "body": "<p>I have a very simple webcomponent and I want to test it. I am getting the error mentioned in this question topic. I found a bit similar question <a href=\"https://stackoverflow.com/questions/52140813/jasmine-karma-error-an-error-was-thrown-in-afterall-nuncaught-referenceerror-c\">Jasmine Karma Error &quot;An error was thrown in afterAll\\nUncaught ReferenceError: container is not defined thrown&quot;</a> and I have already checked out if I had any mistake with paths and filename in karma.conf.js.</p>\n\n<p>Whatelse may cause the error mentioned?</p>\n\n<p>my vanilla webcomponent:</p>\n\n<pre><code>const templateString = `\n    &lt;div id=\"mydiv\"&gt;\n    &lt;/div&gt;\n`;\nconst template = document.createElement('template');\ntemplate.innerHTML = templateString;\n\nexport class SimplestWithoutBackend extends HTMLElement{\n    constructor() {\n        super();\n        const shadowRoot = this.attachShadow({mode: 'open'});\n        shadowRoot.appendChild(template.content.cloneNode(true));\n\n    }\n}\nwindow.customElements.define(\"simplest-without-backend\", SimplestWithoutBackend);\n</code></pre>\n\n<p>test:</p>\n\n<pre><code>import { SimplestWithoutBackend } from './public/simplest-without-backend.js';\n\ndescribe('simplest test', () =&gt; {\n    let element, shadowRoot;\n    beforeEach(() =&gt; {\n        element = document.createElement('simplest-without-backend');\n        shadowRoot = element.shadowRoot;\n        document.body.append(element);\n    });\n\n    // check that the exposed API works\n    describe('init', () =&gt; {\n        it('should add a div under the shadow root', () =&gt; {\n            expect(shadowRoot.querySelector('mydiv')).toBeTruthy();\n        });\n    });\n\n});\n</code></pre>\n\n<p>package.json</p>\n\n<pre><code>{\n  \"name\": \"simplest-webcomponent\",\n  \"version\": \"0.1.0\",\n  \"private\": true,\n  \"proxy\": \"http://localhost:5000\",\n  \"dependencies\": {\n    \"express\": \"^4.17.1\",\n    \"jasmine\": \"^3.4.0\",\n    \"mocha\": \"^6.1.4\",\n    \"wct-browser-legacy\": \"^1.0.2\",\n    \"web-component-tester\": \"^6.9.2\"\n  },\n  \"scripts\": {\n    \"test\": \"karma start config/karma.conf.js\"\n  },\n  \"devDependencies\": {\n    \"karma\": \"^4.1.0\",\n    \"karma-jasmine\": \"^2.0.1\"\n  }\n}\n</code></pre>\n\n<p>karma.conf.js</p>\n\n<pre><code>module.exports = function (config) {\n    config.set({\n\n        // base path that will be used to resolve all patterns (eg. files, exclude)\n        basePath: '',\n\n        client: {\n            clearContext: false // leave Jasmine Spec Runner output visible in browser\n        },\n        // frameworks to use\n        // available frameworks: https://npmjs.org/browse/keyword/karma-adapter\n        frameworks: ['jasmine'],\n\n\n        // list of files / patterns to load in the browser\n        files: [\n            '../test/simplest-without-backend-test.js'\n        ],\n\n\n        // list of files / patterns to exclude\n        exclude: [],\n\n\n\n\n\n        // test results reporter to use\n        // possible values: 'dots', 'progress'\n        // available reporters: https://npmjs.org/browse/keyword/karma-reporter\n        reporters: ['progress'],\n\n\n        // web server port\n        port: 9876,\n\n\n        // enable / disable colors in the output (reporters and logs)\n        colors: true,\n\n\n        // level of logging\n        // possible values: config.LOG_DISABLE || config.LOG_ERROR || config.LOG_WARN || config.LOG_INFO || config.LOG_DEBUG\n        logLevel: config.LOG_INFO,\n\n\n        // enable / disable watching file and executing tests whenever any file changes\n        autoWatch: true,\n\n\n        // start these browsers\n        // available browser launchers: https://npmjs.org/browse/keyword/karma-launcher\n        browsers: ['Chrome'],\n\n\n        // Continuous Integration mode\n        // if true, Karma captures browsers, runs the tests and exits\n        singleRun: false,\n\n        // Concurrency level\n        // how many browser should be started simultaneous\n        concurrency: Infinity,\n\n    })\n};\n</code></pre>\n\n<p>cmd console:</p>\n\n<pre><code># npm test\n\n&gt; simplest-webcomponent@0.1.0 test C:\\_d\\WSs\\simplest-webcomponent\n&gt; karma start config/karma.conf.js\n\n10 07 2019 18:08:37.038:WARN [karma]: No captured browser, open http://localhost:9876/\n10 07 2019 18:08:37.175:INFO [karma-server]: Karma v4.1.0 server started at http://0.0.0.0:9876/\n10 07 2019 18:08:37.176:INFO [launcher]: Launching browsers Chrome with concurrency unlimited\n10 07 2019 18:08:37.185:INFO [launcher]: Starting browser Chrome\n10 07 2019 18:08:39.756:INFO [Chrome 75.0.3770 (Windows 10.0.0)]: Connected on socket yjbpTPMBygpgPJK7AAAA with id 33592258\nChrome 75.0.3770 (Windows 10.0.0) ERROR\n  An error was thrown in afterAll\n  SyntaxError: Unexpected token {\nChrome 75.0.3770 (Windows 10.0.0): Executed 0 of 0 ERROR (0.029 secs / 0 secs)\n</code></pre>\n"}, {"tags": ["javascript", "json", "vue.js", "filesystems"], "answers": [{"comments": [{"owner": {"reputation": 424, "user_id": 10948109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19d19f5f87e579185ea403eca2e586bf?s=128&d=identicon&r=PG&f=1", "display_name": "JohnSnow", "link": "https://stackoverflow.com/users/10948109/johnsnow"}, "edited": false, "score": 1, "creation_date": 1562793566, "post_id": 56978776, "comment_id": 100493538, "body": "The asynchronous answer is here as well : <a href=\"https://stackoverflow.com/questions/10685998/how-to-update-a-value-in-a-json-file-and-save-it-through-node-js\" title=\"how to update a value in a json file and save it through node js\">stackoverflow.com/questions/10685998/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2869, "user_id": 3602436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z3ibA.png?s=128&g=1", "display_name": "EDToaster", "link": "https://stackoverflow.com/users/3602436/edtoaster"}, "is_accepted": false, "score": 3, "last_activity_date": 1562793488, "creation_date": 1562793488, "answer_id": 56978776, "question_id": 56978727, "link": "https://stackoverflow.com/questions/56978727/load-json-if-exists-and-append-data-instead-of-recreating-and-overriding-the-jso/56978776#56978776", "title": "load json if exists and append data instead of recreating and overriding the json file", "body": "<p>Synchronously, you can append to files using <code>fs.appendFileSync</code></p>\n\n<pre><code>const fs = require('fs');\nfs.appendFileSync(filename, json);\n</code></pre>\n"}], "owner": {"reputation": 847, "user_id": 7127991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/23aAh.jpg?s=128&g=1", "display_name": "Deniz", "link": "https://stackoverflow.com/users/7127991/deniz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562793517, "creation_date": 1562793253, "last_edit_date": 1562793517, "question_id": 56978727, "link": "https://stackoverflow.com/questions/56978727/load-json-if-exists-and-append-data-instead-of-recreating-and-overriding-the-jso", "title": "load json if exists and append data instead of recreating and overriding the json file", "body": "<p>i am working on a function <code>createOrLoadJSON()</code> which should check the application for a existing json file. IF the file not exists, he shall create the file \"userData.json\" and add data into it.\nThis whole process should be dynamical, means if i add more objData the following data should append to the json obj instead of recreating the \"userData.json\" again and overriding the first item after a reload.</p>\n\n<p>the code looks like this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import userDataJson from './../data/userData.json';\nexport const userDataControllerMixin = {\n  data() {\n    return {\n      users: [],\n      userDataAbsPath: 'src/data/userData.json',\n    };\n  },\n  mounted() {\n    this.getUsers();\n  },\n  methods: {\n    getUsers() {\n      return userDataJson;\n    },\n    User(user, salary) {\n      this[user] = {\n        salary: [Number(salary)],\n      };\n      // TODO: ADD THESE INTO A PROTOTYPE IN A OTHER MIXIN\n      // income: [income],\n      // expenses: [expenses],\n    },\n    // GET INPUT FROM USERS DIALOGBOX\n    getInput(inputName, inputSalary) {\n      const userName = this.inputName;\n      const userSalary = this.inputSalary;\n      const user = new this.User(userName, userSalary);\n      this.users.push(user);\n      this.createOrLoadJSON(this.users);\n    },\n    // CREATES A JSON WITH DATA FROM THE USERS\n    createOrLoadJSON(data) {\n      const fs = require('fs');\n      const json = JSON.stringify(data, null, '\\t');\n\n      // TODO: if JSON exists skip creating part and load the existing json file here\n      if (fs.existsSync(this.userDataAbsPath)) {\n        console.log('file exists, dont create file, use the existing one and append data');\n        // LOGIC FOR NOT CREATE THE JSON AGAIN, INSTEAD USE THE EXISTING FILE AS INITIAL AND ALLOW TO APPEND DATA\n\n\n        // read file and add next entry\n        // ADD new entry instead of override the first one\n      } else {\n        console.log('file not exists, so create file');\n        fs.writeFile(this.userDataAbsPath, json, (error) =&gt; {\n          if (error !== null) {\n            console.log(error);\n          }\n        });\n      }\n      this.postUsers();\n    },\n    // OUTPRINTS DATA FROM userObj.json\n    postUsers() {},\n  },\n};\n\n</code></pre>\n\n<p>How can i do this? I have absolutely no idea.</p>\n"}, {"tags": ["javascript", "html", "css", "reactjs"], "comments": [{"owner": {"reputation": 424, "user_id": 10948109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19d19f5f87e579185ea403eca2e586bf?s=128&d=identicon&r=PG&f=1", "display_name": "JohnSnow", "link": "https://stackoverflow.com/users/10948109/johnsnow"}, "edited": false, "score": 0, "creation_date": 1562793225, "post_id": 56978658, "comment_id": 100493414, "body": "Just use <code>width: 100vw</code>"}, {"owner": {"reputation": 1166, "user_id": 3224608, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0d3eO.png?s=128&g=1", "display_name": "daddygames", "link": "https://stackoverflow.com/users/3224608/daddygames"}, "edited": false, "score": 0, "creation_date": 1562793702, "post_id": 56978658, "comment_id": 100493585, "body": "Take a look at your <code>&lt;nav&gt;</code> and <code>&lt;ul&gt;</code> elements. I believe it is one of these that is causing the issue. Since the subnav-block is inside the <code>&lt;li&gt;</code> element, you need to see which parent is restricting its width."}], "answers": [{"tags": [], "owner": {"reputation": 786, "user_id": 5081713, "user_type": "registered", "accept_rate": 21, "profile_image": "https://i.stack.imgur.com/hBirq.png?s=128&g=1", "display_name": "Manny Quintanilla", "link": "https://stackoverflow.com/users/5081713/manny-quintanilla"}, "is_accepted": false, "score": 0, "last_activity_date": 1562793698, "creation_date": 1562793698, "answer_id": 56978825, "question_id": 56978658, "link": "https://stackoverflow.com/questions/56978658/extend-background-of-drop-down-menu-to-full-width-of-browser/56978825#56978825", "title": "Extend Background of Drop-down Menu to Full Width of Browser", "body": "<p>You can add the following:</p>\n\n<pre class=\"lang-css prettyprint-override\"><code>.nav .subnav-block {\n    width: 100vh;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/ReKY6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ReKY6.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 1285, "user_id": 1454656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/561bed0472fea7af0e48404f8a548ac0?s=128&d=identicon&r=PG", "display_name": "\u0141ukasz Nojek", "link": "https://stackoverflow.com/users/1454656/%c5%81ukasz-nojek"}, "is_accepted": true, "score": 2, "last_activity_date": 1562794155, "creation_date": 1562794155, "answer_id": 56978895, "question_id": 56978658, "link": "https://stackoverflow.com/questions/56978658/extend-background-of-drop-down-menu-to-full-width-of-browser/56978895#56978895", "title": "Extend Background of Drop-down Menu to Full Width of Browser", "body": "<p>You can add (change) styles:</p>\n\n<pre><code>.nav { display:flex; }\n.nav &gt; li:last-child { flex: 1; }\n</code></pre>\n\n<p>and add a virtual last menu item which will extend the width to maximum:</p>\n\n<pre><code>        &lt;li&gt;\n          &lt;a&gt;&amp;nbsp;&lt;/a&gt;\n\n          &lt;div className=\"subnav-block\"&gt;\n            &lt;ul&gt;\n              &lt;li&gt;\n                &lt;a&gt;&amp;nbsp;&lt;/a&gt;\n              &lt;/li&gt;\n              &lt;li&gt;\n                &lt;a&gt;&amp;nbsp;&lt;/a&gt;\n              &lt;/li&gt;\n            &lt;/ul&gt;\n          &lt;/div&gt;\n        &lt;/li&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/FO0n7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FO0n7.png\" alt=\"screenshot\"></a></p>\n"}], "owner": {"reputation": 570, "user_id": 6809720, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh6.googleusercontent.com/-pJTiPcJyXh0/AAAAAAAAAAI/AAAAAAAAAkY/GQzq5_4t_S0/photo.jpg?sz=128", "display_name": "Eric Nguyen", "link": "https://stackoverflow.com/users/6809720/eric-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 56978895, "answer_count": 2, "score": 0, "last_activity_date": 1562794155, "creation_date": 1562792847, "question_id": 56978658, "link": "https://stackoverflow.com/questions/56978658/extend-background-of-drop-down-menu-to-full-width-of-browser", "title": "Extend Background of Drop-down Menu to Full Width of Browser", "body": "<p>I'm attempting to create a mega menu that displays all contents of each individual list item. You can think of it as a simple/traditional drop-down, however all child items are visible when hovered. </p>\n\n<p>I've got them all to display, however trying to figure out how to extend the drop-down menu background to extend the full width of the browser.</p>\n\n<p>I tried extending the last submenu, but that didn't work out too well. </p>\n\n<p><a href=\"https://codepen.io/ericnguyen23/pen/EBrodo?editors=1111a\" rel=\"nofollow noreferrer\">Codepen for full code</a></p>\n\n<p>Here's snippets:</p>\n\n<p>HTML</p>\n\n<pre><code>&lt;nav class=\"main-nav\"&gt;\n      &lt;ul className=\"nav\"&gt;\n        &lt;li&gt;\n          &lt;a&gt;Products&lt;/a&gt;\n\n          &lt;div className=\"subnav-block\"&gt;\n            &lt;ul&gt;\n              &lt;li&gt;\n                &lt;a&gt;Product A&lt;/a&gt;\n              &lt;/li&gt;\n              &lt;li&gt;\n                &lt;a&gt;Product B&lt;/a&gt;\n              &lt;/li&gt;\n            &lt;/ul&gt;\n          &lt;/div&gt;\n        &lt;/li&gt;\n    &lt;/ul&gt;\n&lt;/nav&gt;\n</code></pre>\n\n<p>CSS</p>\n\n<pre><code>.subnav-block {\n  position: static;\n  display: block;\n  width: 100% !important;\n  top: 54px;\n  left: 0;\n  opacity: 0;\n  visibility: hidden;\n  overflow: hidden;\n  background: gray;\n  -webkit-transition: all 0.3s ease 0.15s;\n  -moz-transition: all 0.3s ease 0.15s;\n  -o-transition: all 0.3s ease 0.15s;\n  -ms-transition: all 0.3s ease 0.15s;\n  transition: all 0.3s ease 0.15s;\n}\n\n.nav .subnav-block {\n  float: none;\n  width: 200px;\n}\n</code></pre>\n"}, {"tags": ["javascript", "reactjs"], "comments": [{"owner": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "edited": false, "score": 0, "creation_date": 1562792984, "post_id": 56978621, "comment_id": 100493325, "body": "Can you explain why you&#39;re trying to implement this, instead of using someone else&#39;s code for this task so you can get on with writing the thing you actually wanted to write?"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1562793110, "post_id": 56978621, "comment_id": 100493374, "body": "When regex is your hammer everything looks like a thumb. Unless you&#39;re <i>explicitly</i> tasked with using regex for this (e.g., a classroom exercise) then use an expression parser instead. A trivial one is quite simple to implement even if there weren&#39;t already libraries to do it."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1562793469, "post_id": 56978621, "comment_id": 100493495, "body": "Also note that a simplistic approach will likely break standard mathematic precedence: you need an expression <i>tree</i> to do math correctly (or at least as most people would expect... except you Smalltalkers out there)."}, {"owner": {"reputation": 5513, "user_id": 2718801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d4b144cdafa73e1d470362ed8d7c3a9?s=128&d=identicon&r=PG", "display_name": "jhpratt", "link": "https://stackoverflow.com/users/2718801/jhpratt"}, "edited": false, "score": 0, "creation_date": 1562827346, "post_id": 56978621, "comment_id": 100501404, "body": "Please explain <i>how</i> the duplicate doesn&#39;t answer your question. Just saying it doesn&#39;t won&#39;t get you any reopen votes."}, {"owner": {"reputation": 119, "user_id": 4769432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26cef56b0b6b6105616ec4a1c958ed0a?s=128&d=identicon&r=PG&f=1", "display_name": "Purnima", "link": "https://stackoverflow.com/users/4769432/purnima"}, "reply_to_user": {"reputation": 5513, "user_id": 2718801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d4b144cdafa73e1d470362ed8d7c3a9?s=128&d=identicon&r=PG", "display_name": "jhpratt", "link": "https://stackoverflow.com/users/2718801/jhpratt"}, "edited": false, "score": 0, "creation_date": 1562829201, "post_id": 56978621, "comment_id": 100502316, "body": "@jhpratt I did explain <i>how</i> it&#39;s different. I&#39;ve edited my question again. Let me know if that make sense."}], "answers": [{"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1562868474, "post_id": 56994272, "comment_id": 100524290, "body": "Even if this worked, you wouldn&#39;t need the <code>{1}</code>, because the default quantifier is already <code>1</code>; <code>&#47;([\\+\\-\\*\\&#47;])&#47;</code> would have identical behavior. That said, this won&#39;t solve the OP&#39;s problem anyway. They want the second operator (basically always a <code>-</code>) to be paired with the following number to make <code>&#39;1+2-33&#47;-45*-78&#39;</code> into <code>[&quot;1&quot;, &quot;+&quot;, &quot;2&quot;, &quot;-&quot;, &quot;33&quot;, &quot;&#47;&quot;, &quot;-45&quot;, &quot;*&quot;, &quot;-78&quot;]</code>. Instead, they&#39;ll get <code>[&quot;1&quot;, &quot;+&quot;, &quot;2&quot;, &quot;-&quot;, &quot;33&quot;, &quot;&#47;&quot;, &quot;&quot;, &quot;-&quot;, &quot;45&quot;, &quot;*&quot;, &quot;&quot;, &quot;-&quot;, &quot;78&quot;]</code>, adding empty strings and separated minus signs."}], "tags": [], "owner": {"reputation": 83, "user_id": 5650994, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--eJip99ZjFA/AAAAAAAAAAI/AAAAAAAAIFo/Iumyaipa0vY/photo.jpg?sz=128", "display_name": "Pranav Nachnekar", "link": "https://stackoverflow.com/users/5650994/pranav-nachnekar"}, "is_accepted": false, "score": -2, "last_activity_date": 1562865054, "creation_date": 1562865054, "answer_id": 56994272, "question_id": 56978621, "link": "https://stackoverflow.com/questions/56978621/how-to-write-regex-to-split-two-consecutive-maths-operators-from-a/56994272#56994272", "title": "How to write regex to split two consecutive maths operators( &quot;/-&quot;, &quot;*-&quot;) from a string equation?", "body": "<p>What you're looking for is the regex:</p>\n\n<pre><code>/([\\+\\-\\*\\/]{1})/\n</code></pre>\n\n<p>{1} at the end makes sure that only a single character is matched</p>\n"}, {"comments": [{"owner": {"reputation": 119, "user_id": 4769432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26cef56b0b6b6105616ec4a1c958ed0a?s=128&d=identicon&r=PG&f=1", "display_name": "Purnima", "link": "https://stackoverflow.com/users/4769432/purnima"}, "edited": false, "score": 0, "creation_date": 1563103509, "post_id": 56994977, "comment_id": 100583277, "body": "Can you please provide a working example? Because this regex doesn&#39;t seem to work when I used the above regex inside <code>split()</code>"}, {"owner": {"reputation": 4545, "user_id": 4562204, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205865723100888/picture?type=large", "display_name": "Jake Holzinger", "link": "https://stackoverflow.com/users/4562204/jake-holzinger"}, "reply_to_user": {"reputation": 119, "user_id": 4769432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26cef56b0b6b6105616ec4a1c958ed0a?s=128&d=identicon&r=PG&f=1", "display_name": "Purnima", "link": "https://stackoverflow.com/users/4769432/purnima"}, "edited": false, "score": 1, "creation_date": 1563140767, "post_id": 56994977, "comment_id": 100591620, "body": "You should use <code>String.prototype.match</code> instead of <code>String.prototype.split</code>. I edited the answer."}, {"owner": {"reputation": 4217, "user_id": 9029328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r3hFz.png?s=128&g=1", "display_name": "AuxTaco", "link": "https://stackoverflow.com/users/9029328/auxtaco"}, "edited": false, "score": 0, "creation_date": 1563144991, "post_id": 56994977, "comment_id": 100592331, "body": "Note that lookbehinds are <a href=\"https://caniuse.com/#feat=js-regexp-lookbehind\" rel=\"nofollow noreferrer\">not yet well-supported</a>."}], "tags": [], "owner": {"reputation": 4545, "user_id": 4562204, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205865723100888/picture?type=large", "display_name": "Jake Holzinger", "link": "https://stackoverflow.com/users/4562204/jake-holzinger"}, "is_accepted": false, "score": 2, "last_activity_date": 1563140766, "last_edit_date": 1563140766, "creation_date": 1562867958, "answer_id": 56994977, "question_id": 56978621, "link": "https://stackoverflow.com/questions/56978621/how-to-write-regex-to-split-two-consecutive-maths-operators-from-a/56994977#56994977", "title": "How to write regex to split two consecutive maths operators( &quot;/-&quot;, &quot;*-&quot;) from a string equation?", "body": "<p>I agree with the other users that you should not be using regex to do expression parsing, there are many libraries out there that will do a much better job of handling all of the corner cases. That being said you can certainly build a regex to handle the simple expressions outlined in your question.</p>\n\n<p>First lets build a regex that captures numbers (and their sign) when they are preceded by a <code>*</code> or <code>/</code> (positive lookbehind):</p>\n\n<pre><code>(?&lt;=[/*])([+-]?\\d+)\n</code></pre>\n\n<p>Then we can capture the symbols:</p>\n\n<pre><code>([/*+-])\n</code></pre>\n\n<p>And finally capture the remaining numbers (without signs):</p>\n\n<pre><code>(\\d+)\n</code></pre>\n\n<p>Now we can combine the various regex segments to form our simple expression parser:</p>\n\n<pre><code>(?&lt;=[/*])([+-]?\\d+)|([/*+-])|(\\d+)\n</code></pre>\n\n<p>This solution is certainly not bulletproof, it breaks down when there are spaces and does not handle parentheses, but given the example input it works as expected.</p>\n\n<hr>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var expression = '1+2-33/-45*-78'.match(/(?&lt;=[/*])([+-]?\\d+)|([/*+-])|(\\d+)/g);\r\nconsole.log(expression);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 119, "user_id": 4769432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26cef56b0b6b6105616ec4a1c958ed0a?s=128&d=identicon&r=PG&f=1", "display_name": "Purnima", "link": "https://stackoverflow.com/users/4769432/purnima"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1563140766, "creation_date": 1562792683, "last_edit_date": 1562864341, "question_id": 56978621, "link": "https://stackoverflow.com/questions/56978621/how-to-write-regex-to-split-two-consecutive-maths-operators-from-a", "title": "How to write regex to split two consecutive maths operators( &quot;/-&quot;, &quot;*-&quot;) from a string equation?", "body": "<p>I'm trying to solve a problem where I need to convert string equation to   an array of numbers and operators.But I'm unable to do it. </p>\n\n<p>Regex that I wrote to convert the string equation to an array.</p>\n\n<pre><code>Input: '1+2-33/45*78'.split(/([\\\\+\\-\\\\*\\\\/]+)/)\n\nOutput: [\"1\", \"+\", \"2\", \"-\", \"33\", \"/\", \"45\", \"*\", \"78\"]\n</code></pre>\n\n<p>But the above regex doesn't work well for when you have two operators consecutive - (*-). See below for more clarification.</p>\n\n<pre><code>Input: '1+2-33/-45*-78'.split(/([\\\\+\\-\\\\*\\\\/]+)/)\n\nOutput: [\"1\", \"+\", \"2\", \"-\", \"33\", \"/-\", \"45\", \"*-\", \"78\"]\n</code></pre>\n\n<p>I'm expecting output like below.</p>\n\n<p>Input: <code>'1+2-33/-45*-78'</code>  </p>\n\n<p>Output: <code>[\"1\", \"+\", \"2\", \"-\", \"33\", \"/\", \"-45\", \"*\", \"-78\"]</code></p>\n\n<p><strong>Edit:</strong> I looked up all the answers here on stackOverflow but they don't solve the problem I described above. </p>\n\n<p>Stackoverflow answers will solve this equation  like this: This string <strong>'7/-2*-9-8'</strong> will be converted to [\"7\", <strong>\"/-\"</strong>, \"2\", <strong>\"*-\"</strong>, \"9\", \"-\", \"8\"] </p>\n\n<p>Please <strong>note</strong> two consecutive operators <strong>[\"/-\", \"*-\"]</strong> above.</p>\n\n<p>But this is not what I'm looking for. The output I'm expecting is like:</p>\n\n<p><strong>Expected Answer:</strong> [\"7\", \"/\", \"-2\", \"*\", \"-9\", \"-\", \"8]</p>\n\n<p>So If have something like this '7/-2*-9-8'. Please note that I have consecutive operators(\"/-\" or \"*-\") here. Then I want to include <strong><em>negative sign</em></strong> in the number itself.</p>\n\n<p>All the answers in stackoverflow doesn't solve this issue. Please reopen the question.Thanks!</p>\n\n<p><strong>Why:</strong> I'm trying to implement a simple calculator with only (+, /, -, *) operators. I hope that clears some doubt. </p>\n"}, {"tags": ["javascript", "node.js"], "comments": [{"owner": {"reputation": 2869, "user_id": 3602436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z3ibA.png?s=128&g=1", "display_name": "EDToaster", "link": "https://stackoverflow.com/users/3602436/edtoaster"}, "edited": false, "score": 0, "creation_date": 1562792624, "post_id": 56978590, "comment_id": 100493203, "body": "Where are you seeing socket hang up"}, {"owner": {"reputation": 1157, "user_id": 7724099, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-GEcCwc0Ei6k/AAAAAAAAAAI/AAAAAAAACts/FznT3I-R1vA/photo.jpg?sz=128", "display_name": "Liz Parody", "link": "https://stackoverflow.com/users/7724099/liz-parody"}, "reply_to_user": {"reputation": 2869, "user_id": 3602436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z3ibA.png?s=128&g=1", "display_name": "EDToaster", "link": "https://stackoverflow.com/users/3602436/edtoaster"}, "edited": false, "score": 0, "creation_date": 1562793214, "post_id": 56978590, "comment_id": 100493412, "body": "@JClassic I saw that question but it doesn&#39;t explain in simple words what socket hang up means. I don&#39;t have an example, I just want to know what it means"}], "answers": [{"tags": [], "owner": {"reputation": 58, "user_id": 9831354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a167f39f7a29e47630aa408022d4d97b?s=128&d=identicon&r=PG&f=1", "display_name": "John D", "link": "https://stackoverflow.com/users/9831354/john-d"}, "is_accepted": false, "score": 1, "last_activity_date": 1562794035, "creation_date": 1562794035, "answer_id": 56978877, "question_id": 56978590, "link": "https://stackoverflow.com/questions/56978590/node-js-what-does-socket-hang-up-mean-in-simple-words/56978877#56978877", "title": "Node.js - What does \u201csocket hang up\u201d mean in simple words?", "body": "<p>Without a specific situation it's hard to say, but usually it means the communication between user and server failed, possibly due to too much time without a response.</p>\n"}, {"tags": [], "owner": {"reputation": 1832, "user_id": 5225363, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/euozF.jpg?s=128&g=1", "display_name": "Gandalf the White", "link": "https://stackoverflow.com/users/5225363/gandalf-the-white"}, "is_accepted": false, "score": 1, "last_activity_date": 1562795153, "creation_date": 1562795153, "answer_id": 56979063, "question_id": 56978590, "link": "https://stackoverflow.com/questions/56978590/node-js-what-does-socket-hang-up-mean-in-simple-words/56979063#56979063", "title": "Node.js - What does \u201csocket hang up\u201d mean in simple words?", "body": "<p>Socket hang up in simple term means that the connection establishment failed while making an attempt for it. </p>\n\n<p>Why it happens - as you already know, is possible because of various reasons. Generally happens because the server becomes unresponsive hence the connection was never established as expected. </p>\n"}], "owner": {"reputation": 1157, "user_id": 7724099, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-GEcCwc0Ei6k/AAAAAAAAAAI/AAAAAAAACts/FznT3I-R1vA/photo.jpg?sz=128", "display_name": "Liz Parody", "link": "https://stackoverflow.com/users/7724099/liz-parody"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "closed_date": 1562795635, "answer_count": 2, "score": -2, "last_activity_date": 1562795153, "creation_date": 1562792536, "question_id": 56978590, "link": "https://stackoverflow.com/questions/56978590/node-js-what-does-socket-hang-up-mean-in-simple-words", "closed_reason": "Duplicate", "title": "Node.js - What does \u201csocket hang up\u201d mean in simple words?", "body": "<p>I would like to know what socket hang up means in very simple words. </p>\n"}, {"tags": ["javascript", "jquery", "onclick", "onclicklistener", "addeventlistener"], "answers": [{"tags": [], "owner": {"reputation": 136, "user_id": 3242048, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oMfx9.jpg?s=128&g=1", "display_name": "DrFreeze", "link": "https://stackoverflow.com/users/3242048/drfreeze"}, "is_accepted": true, "score": 1, "last_activity_date": 1562792823, "creation_date": 1562792823, "answer_id": 56978652, "question_id": 56978585, "link": "https://stackoverflow.com/questions/56978585/variable-not-updating-in-addeventlistener-after-value-change/56978652#56978652", "title": "Variable not updating in addeventlistener after value change", "body": "<p>You have messed up the scope of the variable. To set the <code>status</code> variable that is outside the function scope use:</p>\n\n<pre><code>function setStatusTrue() {\n    status = true;\n}\n</code></pre>\n\n<p>You can read more about scopes <a href=\"https://www.w3schools.com/js/js_scope.asp\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 13, "user_id": 11767042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7595c09cc7e23ced15e1ecbdce0a88e5?s=128&d=identicon&r=PG&f=1", "display_name": "findinghero20", "link": "https://stackoverflow.com/users/11767042/findinghero20"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 789, "favorite_count": 0, "accepted_answer_id": 56978652, "answer_count": 1, "score": 0, "last_activity_date": 1562792823, "creation_date": 1562792521, "question_id": 56978585, "link": "https://stackoverflow.com/questions/56978585/variable-not-updating-in-addeventlistener-after-value-change", "title": "Variable not updating in addeventlistener after value change", "body": "<p>I have a variable set to <code>false</code>. I also have a <code>addEventListener</code> so when I click on the button, it should show me the variable's value (true or false).</p>\n\n<p>I have another button that changes the variable's value to <code>true</code>. So when I press that button to change it to true, and then I check the variable's value with the <code>addEventListener</code> button, it should reflect as true. The problem is that it doesn't.</p>\n\n<p>It should alert that the status is <strong>true</strong> after pressing the \"Set Status\" button. Why is the value not changing?</p>\n\n<p>here is the code:</p>\n\n<pre><code>&lt;button id=\"button\"&gt;Set Status&lt;/button&gt;\n&lt;br&gt;\n&lt;button id=\"check-status\"&gt;Check Status&lt;/button&gt;\n\n&lt;script&gt;\nvar status = false;\n\ndocument.getElementById('check-status').addEventListener('click', function(event) {\n    if(status === false) {\n        alert('The status is false');\n    } else {\n        alert('The status is true');\n    }\n});\n\ndocument.getElementById(\"button\").onclick = function fun() {\n    setStatusTrue();\n}\n\nfunction setStatusTrue() {\n    var status = true;\n}\n&lt;/script&gt;\n</code></pre>\n\n<p>Demo link: <a href=\"https://jsfiddle.net/xpLuh0ew/\" rel=\"nofollow noreferrer\">https://jsfiddle.net/xpLuh0ew/</a></p>\n"}, {"tags": ["javascript", "node.js"], "comments": [{"owner": {"reputation": 2869, "user_id": 3602436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z3ibA.png?s=128&g=1", "display_name": "EDToaster", "link": "https://stackoverflow.com/users/3602436/edtoaster"}, "edited": false, "score": 0, "creation_date": 1562793000, "post_id": 56978584, "comment_id": 100493331, "body": "I would suggest moving away from callbacks and towards the new promise paradigm"}, {"owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "edited": false, "score": 0, "creation_date": 1562793318, "post_id": 56978584, "comment_id": 100493440, "body": "It would be helpful to know what flavor of async <code>getDB</code> is. Does it return a promise? Take a callback?"}, {"owner": {"reputation": 121, "user_id": 10464601, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gyvpOTse9Sk/AAAAAAAAAAI/AAAAAAAAAA0/6tQRNnyIhx0/photo.jpg?sz=128", "display_name": "DD Jin", "link": "https://stackoverflow.com/users/10464601/dd-jin"}, "reply_to_user": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "edited": false, "score": 0, "creation_date": 1562795028, "post_id": 56978584, "comment_id": 100493982, "body": "@MarkMeyer  It can be a normal function. I pack it here to return promise, since I need some method after this."}, {"owner": {"reputation": 574451, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 0, "creation_date": 1562801717, "post_id": 56978584, "comment_id": 100495539, "body": "Lots of options covered here: <a href=\"https://stackoverflow.com/questions/29880715/how-to-synchronize-a-sequence-of-promises/29906506#29906506\">How to sequence asynchronous operations</a>."}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 10464601, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gyvpOTse9Sk/AAAAAAAAAAI/AAAAAAAAAA0/6tQRNnyIhx0/photo.jpg?sz=128", "display_name": "DD Jin", "link": "https://stackoverflow.com/users/10464601/dd-jin"}, "edited": false, "score": 0, "creation_date": 1562795606, "post_id": 56978672, "comment_id": 100494145, "body": "What if they can all get the data successfully. Can I get the thing like &quot;as soon as one of them receive the data, rest of them stop&quot;. Your code will execute for three times if first one already got the answer, right?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 121, "user_id": 10464601, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gyvpOTse9Sk/AAAAAAAAAAI/AAAAAAAAAA0/6tQRNnyIhx0/photo.jpg?sz=128", "display_name": "DD Jin", "link": "https://stackoverflow.com/users/10464601/dd-jin"}, "edited": false, "score": 0, "creation_date": 1562795742, "post_id": 56978672, "comment_id": 100494178, "body": "The <code>.catch()</code> is only executed when the promise fails. So it stops when one of them succeeds."}, {"owner": {"reputation": 121, "user_id": 10464601, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gyvpOTse9Sk/AAAAAAAAAAI/AAAAAAAAAA0/6tQRNnyIhx0/photo.jpg?sz=128", "display_name": "DD Jin", "link": "https://stackoverflow.com/users/10464601/dd-jin"}, "edited": false, "score": 0, "creation_date": 1563317435, "post_id": 56978672, "comment_id": 100657631, "body": "I am using your solution. But I just find that if I successfully get the data in second try and resolve() it, it can&#39;t be passed to the next funciton in code like . callGetDb().then(data)=&gt;{}.   &#39;data&#39; will be null"}, {"owner": {"reputation": 121, "user_id": 10464601, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gyvpOTse9Sk/AAAAAAAAAAI/AAAAAAAAAA0/6tQRNnyIhx0/photo.jpg?sz=128", "display_name": "DD Jin", "link": "https://stackoverflow.com/users/10464601/dd-jin"}, "edited": false, "score": 0, "creation_date": 1563321325, "post_id": 56978672, "comment_id": 100658384, "body": "I post specific code here <a href=\"https://stackoverflow.com/questions/57066813/how-can-asynchronous-method-in-recursion-return-result-correctly\" title=\"how can asynchronous method in recursion return result correctly\">stackoverflow.com/questions/57066813/&hellip;</a> .   Could you please take a look?"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 0, "last_activity_date": 1562792958, "creation_date": 1562792958, "answer_id": 56978672, "question_id": 56978584, "link": "https://stackoverflow.com/questions/56978584/how-can-asynchronous-method-in-loop-executed-in-sequence/56978672#56978672", "title": "How can asynchronous method in loop executed in sequence?", "body": "<p>Don't use a loop. Have the function call <code>setTimeout()</code> to run itself again if it fails.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var i = 0;\r\n\r\nfunction callGetDB() {\r\n  getDB().then(db =&gt; {\r\n    // use DB\r\n  }).catch(() =&gt; {\r\n    if (i++ &lt; 3) {\r\n      setTimeout(callGetDB, 200);\r\n    }\r\n  });\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I'm assuming the asynchronous function <code>getDB()</code> returns a promise.</p>\n"}, {"tags": [], "owner": {"reputation": 2869, "user_id": 3602436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z3ibA.png?s=128&g=1", "display_name": "EDToaster", "link": "https://stackoverflow.com/users/3602436/edtoaster"}, "is_accepted": false, "score": 1, "last_activity_date": 1562792976, "creation_date": 1562792976, "answer_id": 56978680, "question_id": 56978584, "link": "https://stackoverflow.com/questions/56978584/how-can-asynchronous-method-in-loop-executed-in-sequence/56978680#56978680", "title": "How can asynchronous method in loop executed in sequence?", "body": "<p>You can do this by waiting for the <code>setTimeout</code> to finish before executing the next <code>setTimeout</code></p>\n\n<p>I don't believe this is possible with callbacks, as is the case with <code>setTimeout</code>, so you should transform it into a promise-based call</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const promiseSetTimeout = timeout =&gt; new Promise(r =&gt; setTimeout(r, timeout));\r\n\r\nconst waitManyTimes = async () =&gt; {\r\n    for(let i = 0; i &lt; 3; i++) {\r\n        await promiseSetTimeout(200);\r\n        // do something here, like getDB \r\n        console.log(i);\r\n    }\r\n}\r\n\r\nwaitManyTimes();</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "edited": false, "score": 0, "creation_date": 1562793196, "post_id": 56978697, "comment_id": 100493408, "body": "<code>getDB</code> is async right? What are you testing with <code>if (db)</code>? If <code>getDB()</code> returns a promise, which isn&#39;t clear in the question, you&#39;ll need to <code>await</code> it. If it takes a callback..."}], "tags": [], "owner": {"reputation": 8719, "user_id": 6951428, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/92fd81a6020da8e77fc9125e0c9ec512?s=128&d=identicon&r=PG&f=1", "display_name": "junvar", "link": "https://stackoverflow.com/users/6951428/junvar"}, "is_accepted": false, "score": 0, "last_activity_date": 1562793056, "creation_date": 1562793056, "answer_id": 56978697, "question_id": 56978584, "link": "https://stackoverflow.com/questions/56978584/how-can-asynchronous-method-in-loop-executed-in-sequence/56978697#56978697", "title": "How can asynchronous method in loop executed in sequence?", "body": "<p>Using <code>async/await</code>:</p>\n\n<pre><code>let sleep = ms =&gt; new Promise(r =&gt; setTimeout(r, ms));\n\nlet main = async() =&gt; {\n  for(var i = 0; i &lt; 3; i++) {\n    let db = getDB();\n    if (db)\n      return db;\n    await sleep(200);\n  }\n};\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 10464601, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gyvpOTse9Sk/AAAAAAAAAAI/AAAAAAAAAA0/6tQRNnyIhx0/photo.jpg?sz=128", "display_name": "DD Jin", "link": "https://stackoverflow.com/users/10464601/dd-jin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 56978672, "answer_count": 3, "score": 1, "last_activity_date": 1562796523, "creation_date": 1562792498, "last_edit_date": 1562796523, "question_id": 56978584, "link": "https://stackoverflow.com/questions/56978584/how-can-asynchronous-method-in-loop-executed-in-sequence", "title": "How can asynchronous method in loop executed in sequence?", "body": "<p>I want to get data from db for several times. How to set a loop to execute getData() function in interval like 200ms. And if one of them success, rest of them won't be triggered. It's asynchronous method, and different from question here: <a href=\"https://stackoverflow.com/questions/11488014/asynchronous-process-inside-a-javascript-for-loop\">Asynchronous Process inside a javascript for loop</a></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>for(var i = 0; i &lt; 3; i++){\nsetTimeout(getData,200);}\n</code></pre>\n\n<p>This will end up with the output time interval is very close instead of 200ms, since they are asynchronous. Three \"setTimeout\" are triggered in a short time. like 0.001s 0.002s 0.003s, the output time is 0.201, 0.202, 2.203.</p>\n\n<p>getData() returns a promise. But it can be normal function as long as it works.</p>\n"}, {"tags": ["javascript", "forms", "zurb-foundation", "kentico"], "comments": [{"owner": {"reputation": 6921, "user_id": 753676, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/gfgH7.jpg?s=128&g=1", "display_name": "Daniel Ruf", "link": "https://stackoverflow.com/users/753676/daniel-ruf"}, "edited": false, "score": 0, "creation_date": 1562819332, "post_id": 56978543, "comment_id": 100498698, "body": "You can dynamically set the content and trigger the <code>open</code> method. See <a href=\"https://foundation.zurb.com/sites/docs/reveal.html#ajax\" rel=\"nofollow noreferrer\">foundation.zurb.com/sites/docs/reveal.html#ajax</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1539, "user_id": 5301166, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SQcUh.jpg?s=128&g=1", "display_name": "Roman Hutnyk", "link": "https://stackoverflow.com/users/5301166/roman-hutnyk"}, "is_accepted": false, "score": 1, "last_activity_date": 1562825902, "creation_date": 1562825902, "answer_id": 56982702, "question_id": 56978543, "link": "https://stackoverflow.com/questions/56978543/display-modal-on-successful-form-submission/56982702#56982702", "title": "Display Modal on Successful Form Submission", "body": "<p>I think the approach you're using is fine, the only issue, if I understood correctly is that javascript code responsible for showing popup does not recognize form submission when there is update panel - are you listening document ready event handler? if so you need to add another event handler that listens to update panel requests. It should be something like:</p>\n\n<pre><code>var prm = Sys.WebForms.PageRequestManager.getInstance();\n    if (prm != null) {\n        prm.add_endRequest(function (sender, e) {\n        ....\n        }\n     }\n</code></pre>\n\n<p>I hope that helps</p>\n"}], "owner": {"reputation": 113, "user_id": 1353810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f620624a456a676b9b039e5d14630e2d?s=128&d=identicon&r=PG", "display_name": "sween_sp", "link": "https://stackoverflow.com/users/1353810/sween-sp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562825902, "creation_date": 1562792322, "last_edit_date": 1562818633, "question_id": 56978543, "link": "https://stackoverflow.com/questions/56978543/display-modal-on-successful-form-submission", "title": "Display Modal on Successful Form Submission", "body": "<p>I'm using a Kentico form to collect some data and I'd like to display a Foundation modal upon successful submission. We have some validation on the fields and we'd prefer to use an update panel to prevent a postback.</p>\n\n<p>We were able to get the modal to display by inserting a div with an id in the display text and having some javascript that checks for its existence but that only works if we don't use an update panel. </p>\n\n<p>I'm thinking there's probably a way to get the modal to display with the update panel but I'm not sure what the best approach would be and looking for suggestions.</p>\n"}, {"tags": ["javascript"], "answers": [{"tags": [], "owner": {"reputation": 136, "user_id": 3242048, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oMfx9.jpg?s=128&g=1", "display_name": "DrFreeze", "link": "https://stackoverflow.com/users/3242048/drfreeze"}, "is_accepted": false, "score": 0, "last_activity_date": 1562793602, "creation_date": 1562793602, "answer_id": 56978803, "question_id": 56978531, "link": "https://stackoverflow.com/questions/56978531/printing-out-and-replacing-an-updated-array-values-to-the-table-cells/56978803#56978803", "title": "Printing out and replacing an updated array values to the table cells", "body": "<p>I can't see how you print them, but you can set the table content the same way as you are getting them like:</p>\n\n<pre><code>mytable.rows[i].cells[j].innerText = parseFloat(orginalPrice) - (inputValue/100 * orginalPrice);\n</code></pre>\n\n<p>You can read more about table cells <a href=\"https://www.w3schools.com/jsref/coll_tr_cells.asp\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Here is a working fiddle: <a href=\"https://jsfiddle.net/u1m0gjyk/\" rel=\"nofollow noreferrer\">https://jsfiddle.net/u1m0gjyk/</a></p>\n"}, {"tags": [], "owner": {"reputation": 10320, "user_id": 818326, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/ace3174f4519bdd2a622e1f14b2ebbae?s=128&d=identicon&r=PG", "display_name": "symlink", "link": "https://stackoverflow.com/users/818326/symlink"}, "is_accepted": false, "score": 0, "last_activity_date": 1562793685, "creation_date": 1562793685, "answer_id": 56978823, "question_id": 56978531, "link": "https://stackoverflow.com/questions/56978531/printing-out-and-replacing-an-updated-array-values-to-the-table-cells/56978823#56978823", "title": "Printing out and replacing an updated array values to the table cells", "body": "<p>You are so close. Instead of this line:</p>\n\n<pre><code>prices[i].push(parseFloat(orginalPrice) - (inputValue/100 * orginalPrice));\n</code></pre>\n\n<p>which pushes the calculated value into an empty array that isn't connected to the DOM, you want these lines:</p>\n\n<pre><code>var newPrice = parseFloat(orginalPrice) - (inputValue/100 * orginalPrice);\nmytable.rows[i].cells[j].innerText = newPrice;\n</code></pre>\n\n<p>which add the calculated value into each cell's <code>innerText</code> property (i.e. write the values back to the DOM):</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const submitBtn = document.getElementById('submitBtn');\r\n    submitBtn.addEventListener('click', function () {   \r\n\r\n        const mytable = document.querySelector('#mytable #tbody');\r\n\r\n        const inputValue = document.getElementById('inputValue').value;\r\n\r\n        const prices = [];\r\n\r\n        for (i = 0; i &lt; mytable.rows.length; i++) {\r\n\r\n            prices[i] = [];\r\n\r\n            for (j = 1; j &lt; mytable.rows[i].cells.length; j++) {\r\n                const orginalPrice = mytable.rows[i].cells[j].innerText;\r\n\r\n                var newPrice = parseFloat(orginalPrice) - (inputValue/100 * orginalPrice);\r\n                mytable.rows[i].cells[j].innerText = newPrice;\r\n            }\r\n        }\r\n     });</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;input type=\"number\" id=\"inputValue\"&gt;\r\n          &lt;input type=\"button\" value=\"Submit\" id=\"submitBtn\"&gt;\r\n\r\n          &lt;table id='mytable'&gt;\r\n                &lt;thead&gt;\r\n                        &lt;td&gt;Discount Products&lt;/td&gt;\r\n                        &lt;td&gt;Price One&lt;/td&gt;\r\n                        &lt;td&gt;Price Two&lt;/td&gt;\r\n                &lt;/thead&gt;\r\n                &lt;tbody id=\"tbody\"&gt;\r\n                    &lt;tr&gt;\r\n                        &lt;td&gt;Product 1&lt;/td&gt;\r\n                        &lt;td class=\"price-one one\"&gt; 100&lt;/td&gt;\r\n                        &lt;td class=\"price-two one\"&gt;200&lt;/td&gt;\r\n                    &lt;/tr&gt;\r\n                    &lt;tr&gt;\r\n                        &lt;td&gt;Product 2&lt;/td&gt;\r\n                        &lt;td class=\"price-one one\"&gt; 300&lt;/td&gt;\r\n                        &lt;td class=\"price-two one\"&gt;400&lt;/td&gt;\r\n                    &lt;/tr&gt;\r\n                    &lt;tr&gt;\r\n                        &lt;td&gt;Product 3&lt;/td&gt;\r\n                        &lt;td class=\"price-one one\"&gt; 500&lt;/td&gt;\r\n                        &lt;td class=\"price-two one\"&gt;600&lt;/td&gt;\r\n                    &lt;/tr&gt;\r\n                    &lt;tr&gt;\r\n                        &lt;td&gt;Product 4&lt;/td&gt;\r\n                        &lt;td class=\"price-one one\"&gt; 700&lt;/td&gt;\r\n                        &lt;td class=\"price-two one\"&gt;800&lt;/td&gt;\r\n                    &lt;/tr&gt;\r\n                &lt;/tbody&gt;\r\n            &lt;/table&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 31, "user_id": 11666292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c1d8974637f0b939efb95db21561cb?s=128&d=identicon&r=PG&f=1", "display_name": "Abdushukur", "link": "https://stackoverflow.com/users/11666292/abdushukur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1562793685, "creation_date": 1562792265, "question_id": 56978531, "link": "https://stackoverflow.com/questions/56978531/printing-out-and-replacing-an-updated-array-values-to-the-table-cells", "title": "Printing out and replacing an updated array values to the table cells", "body": "<p>I made a simple discount calculation, when a user enter any value, price should be updated. \nI tried many times, but always printed array values are printed in the first row line. I have always the same problem printing an array, i would be appriecate if you give any recommend any videos or articles to understand more this topic as well. Thanks</p>\n\n<pre><code>          &lt;input type=\"number\" id=\"inputValue\"&gt;\n          &lt;input type=\"button\" value=\"Submit\" id=\"submitBtn\"&gt;\n\n          &lt;table id='mytable'&gt;\n                &lt;thead&gt;\n                        &lt;td&gt;Discount Products&lt;/td&gt;\n                        &lt;td&gt;Price One&lt;/td&gt;\n                        &lt;td&gt;Price Two&lt;/td&gt;\n                &lt;/thead&gt;\n                &lt;tbody id=\"tbody\"&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;Product 1&lt;/td&gt;\n                        &lt;td class=\"price-one one\"&gt; 100&lt;/td&gt;\n                        &lt;td class=\"price-two one\"&gt;200&lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;Product 2&lt;/td&gt;\n                        &lt;td class=\"price-one one\"&gt; 300&lt;/td&gt;\n                        &lt;td class=\"price-two one\"&gt;400&lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;Product 3&lt;/td&gt;\n                        &lt;td class=\"price-one one\"&gt; 500&lt;/td&gt;\n                        &lt;td class=\"price-two one\"&gt;600&lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;td&gt;Product 4&lt;/td&gt;\n                        &lt;td class=\"price-one one\"&gt; 700&lt;/td&gt;\n                        &lt;td class=\"price-two one\"&gt;800&lt;/td&gt;\n                    &lt;/tr&gt;\n                &lt;/tbody&gt;\n            &lt;/table&gt;\n</code></pre>\n\n<p>my script here, I cant update price cells, </p>\n\n<pre><code>const submitBtn = document.getElementById('submitBtn');\n    submitBtn.addEventListener('click', function () {   \n\n        const mytable = document.querySelector('#mytable #tbody');\n\n        const inputValue = document.getElementById('inputValue').value;\n\n        const prices = [];\n\n        for (i = 0; i &lt; mytable.rows.length; i++) {\n\n            prices[i] = [];\n\n            for (j = 1; j &lt; mytable.rows[i].cells.length; j++) {\n                const orginalPrice = mytable.rows[i].cells[j].innerText;\n\n                prices[i].push(parseFloat(orginalPrice) - (inputValue/100 * orginalPrice));\n            }\n        }\n     });\n</code></pre>\n"}, {"tags": ["javascript", "forms", "timeout", "reload"], "comments": [{"owner": {"reputation": 7845, "user_id": 5734311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iVq7.jpg?s=128&g=1", "display_name": "Chris G", "link": "https://stackoverflow.com/users/5734311/chris-g"}, "edited": false, "score": 0, "creation_date": 1562792399, "post_id": 56978523, "comment_id": 100493126, "body": "As far as I can tell, the form is sent, and the server&#39;s reply, a new page, contains an error message. The error message however has a timer attached that hides it after two seconds or so. So same problem but different cause. Just FYI. I&#39;m going to look at the code now."}, {"owner": {"reputation": 7845, "user_id": 5734311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iVq7.jpg?s=128&g=1", "display_name": "Chris G", "link": "https://stackoverflow.com/users/5734311/chris-g"}, "edited": false, "score": 0, "creation_date": 1562793976, "post_id": 56978523, "comment_id": 100493662, "body": "What&#39;s the name of the plugin you used for the registration form?"}], "owner": {"reputation": 1, "user_id": 11352269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/558dc5c6f29fd2fa2db67f767b9b307c?s=128&d=identicon&r=PG&f=1", "display_name": "John Buckley", "link": "https://stackoverflow.com/users/11352269/john-buckley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562793016, "creation_date": 1562792193, "last_edit_date": 1562793016, "question_id": 56978523, "link": "https://stackoverflow.com/questions/56978523/keep-error-message-on-longer-before-page-reload", "title": "Keep error message on longer before page reload", "body": "<p>Problem: When users don't fulfill criteria in a registration form, an error message shows up (e.g., \"Password must be 12 characters long\"), but the page reloads too quickly which doesn't allow the user to properly read the whole message.</p>\n\n<p>Solution needed: I've attempted to delay the script causing the page reload by adding a setTimeout to delay the page reload, but with no success. Any ideas?</p>\n\n<p>Context: The registration form in question is located at <a href=\"https://mycareinsite.com\" rel=\"nofollow noreferrer\">https://mycareinsite.com</a>, which I've created using Wordpress/Custom Code/Plugins.</p>\n\n<p>I've attempted to follow the solution outlined at the following thread, but to no avail: <a href=\"https://stackoverflow.com/questions/39638903/js-location-reload-with-delay-after-function-executed/39638931\">JS - location reload with delay after function executed</a> </p>\n\n<pre><code>function clean_login_url_cleaner( $url ) {\n    $query_args = array(\n        'authentication',\n        'updated',\n        'created',\n        'sent',\n        'restore'\n    );\n    return esc_url( remove_query_arg( $query_args, $url ) );\n}\n</code></pre>\n"}, {"tags": ["javascript", "html"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1562792181, "post_id": 56978501, "comment_id": 100493050, "body": "The variable is <code>parts</code>, not <code>partNumber</code>."}, {"owner": {"reputation": 15524, "user_id": 10366495, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pRi10.png?s=128&g=1", "display_name": "Shidersz", "link": "https://stackoverflow.com/users/10366495/shidersz"}, "edited": false, "score": 0, "creation_date": 1562792588, "post_id": 56978501, "comment_id": 100493185, "body": "This is rare, appears to be related on a typo with the variable name (<code>parts</code> vs <code>partNumber</code>), but he also says that: <code>console.log(partNumber[0])</code> gives some output. So It will be nicely to see a minimal working example showing the issue."}, {"owner": {"reputation": 2869, "user_id": 3602436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z3ibA.png?s=128&g=1", "display_name": "EDToaster", "link": "https://stackoverflow.com/users/3602436/edtoaster"}, "edited": false, "score": 0, "creation_date": 1562792605, "post_id": 56978501, "comment_id": 100493192, "body": "I agree, the question is a little vague so far"}, {"owner": {"reputation": 895, "user_id": 10818509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3c36f15912146c6d0f1201f89a5d0e?s=128&d=identicon&r=PG&f=1", "display_name": "jedu", "link": "https://stackoverflow.com/users/10818509/jedu"}, "edited": false, "score": 0, "creation_date": 1562798949, "post_id": 56978501, "comment_id": 100494981, "body": "Sorry Edited the question it was subbosed to be <code>parts</code>"}], "answers": [{"comments": [{"owner": {"reputation": 895, "user_id": 10818509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3c36f15912146c6d0f1201f89a5d0e?s=128&d=identicon&r=PG&f=1", "display_name": "jedu", "link": "https://stackoverflow.com/users/10818509/jedu"}, "edited": false, "score": 0, "creation_date": 1562799010, "post_id": 56978550, "comment_id": 100495000, "body": "Thank you. The issue was not declaring <code>i</code> in the for loop"}], "tags": [], "owner": {"reputation": 2869, "user_id": 3602436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z3ibA.png?s=128&g=1", "display_name": "EDToaster", "link": "https://stackoverflow.com/users/3602436/edtoaster"}, "is_accepted": true, "score": 2, "last_activity_date": 1562792346, "creation_date": 1562792346, "answer_id": 56978550, "question_id": 56978501, "link": "https://stackoverflow.com/questions/56978501/cannot-access-array-values-using-a-variable-in-javascript/56978550#56978550", "title": "Cannot access array values using a variable in javascript", "body": "<p>I see a few issues here:</p>\n\n<ol>\n<li><p>You are using the variables <code>parts</code> and <code>partNumber</code>. They should be the same</p></li>\n<li><p>You never declared <code>i</code> in your for loop, it should look like this:</p></li>\n</ol>\n\n<pre><code>const parts = req.body.parts;\n\nfor (let i = 0; i &lt; parts.length; i++) {\n    // do whatever\n\n    console.log(i, parts[i]);\n\n}\n</code></pre>\n"}], "owner": {"reputation": 895, "user_id": 10818509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3c36f15912146c6d0f1201f89a5d0e?s=128&d=identicon&r=PG&f=1", "display_name": "jedu", "link": "https://stackoverflow.com/users/10818509/jedu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 56978550, "answer_count": 1, "score": -2, "last_activity_date": 1562798969, "creation_date": 1562792090, "last_edit_date": 1562798969, "question_id": 56978501, "link": "https://stackoverflow.com/questions/56978501/cannot-access-array-values-using-a-variable-in-javascript", "title": "Cannot access array values using a variable in javascript", "body": "<p>I am receiving an array from an <code>HTML</code> form. </p>\n\n<pre><code>var parts=req.body.parts\n</code></pre>\n\n<p>Doing <code>console.log(parts)</code> returns an array:</p>\n\n<pre><code>['Part1','Part2']\n</code></pre>\n\n<p>However, for some reason the <code>console.log(parts[i])</code> returns <code>undefined</code>. </p>\n\n<p>However, if I change the value to <code>console.log(parts[0])</code>, I get <code>[Part1]</code> as my output.  </p>\n\n<pre><code>let loop= parts.length\nfor(i=0;i&lt;loop;i++){\n        console.log(i)\n        console.log(parts[i])\n\n    }\n</code></pre>\n\n<p>I cannot figure out why this is happening</p>\n"}, {"tags": ["javascript"], "comments": [{"owner": {"reputation": 7330, "user_id": 4830196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcatD.jpg?s=128&g=1", "display_name": "Ryan Wilson", "link": "https://stackoverflow.com/users/4830196/ryan-wilson"}, "edited": false, "score": 0, "creation_date": 1562792444, "post_id": 56978500, "comment_id": 100493135, "body": "You only need to add the <code>eventListener</code> once, then check what the text is inside of the callback function and change the text accordingly."}, {"owner": {"reputation": 162920, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1562792466, "post_id": 56978500, "comment_id": 100493145, "body": "Or toggle a class on it and check for that class"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1562792529, "post_id": 56978500, "comment_id": 100493169, "body": "General rule: adding event listeners inside other event listeners is almost always wrong, especially if you don&#39;t call <code>removeEventListener</code> to undo the previous one."}, {"owner": {"reputation": 25, "user_id": 11705567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4ae5c58ac5fd8d2a474eeddc3c8c9b6?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Morales", "link": "https://stackoverflow.com/users/11705567/christian-morales"}, "edited": false, "score": 0, "creation_date": 1562793366, "post_id": 56978500, "comment_id": 100493458, "body": "understood so what would be the best course of action if I want to run 2  different functions for each click? I want the first click to activate my filter function, and my second click to cancel and pretty much bring me right back to the start."}, {"owner": {"reputation": 7330, "user_id": 4830196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcatD.jpg?s=128&g=1", "display_name": "Ryan Wilson", "link": "https://stackoverflow.com/users/4830196/ryan-wilson"}, "edited": false, "score": 0, "creation_date": 1562793439, "post_id": 56978500, "comment_id": 100493486, "body": "@ChristianMorales Just check the text of the button in the callback function and call whichever secondary function accordingly. <code>if filterBtn.textContent === &quot;Filter&quot;) { filterFunction(); } else { function2(); }</code>"}], "answers": [{"tags": [], "owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "is_accepted": false, "score": 0, "last_activity_date": 1562792356, "creation_date": 1562792356, "answer_id": 56978552, "question_id": 56978500, "link": "https://stackoverflow.com/questions/56978500/how-to-asynchronously-toggle-click-events-on-a-button/56978552#56978552", "title": "How to asynchronously toggle click events on a button", "body": "<p>Just stick to one handler, and flip the text based on the button's current text. You can use the ternary operator for this:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const filterBtn = document.getElementById('filter-btn');\r\nfilterBtn.addEventListener('click', () =&gt; {\r\n    filterBtn.textContent = filterBtn.textContent === \"Reset Filter\"\r\n        ? \"Filter\" : \"Reset Filter\";\r\n});\r\n        </code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;button id=\"filter-btn\"&gt;Filter&lt;/button&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 25, "user_id": 11705567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4ae5c58ac5fd8d2a474eeddc3c8c9b6?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Morales", "link": "https://stackoverflow.com/users/11705567/christian-morales"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562792486, "creation_date": 1562792084, "last_edit_date": 1562792486, "question_id": 56978500, "link": "https://stackoverflow.com/questions/56978500/how-to-asynchronously-toggle-click-events-on-a-button", "title": "How to asynchronously toggle click events on a button", "body": "<p>I want my  click events to change a buttons text from on to off and back and fourth as many times as they want.</p>\n\n<p>Currently I can click the button then the text content changes to \"Reset Filter\" then when I click once more the button changes back to Filter per the nested event listener. I want to be able to keep switching between the on and off state.</p>\n\n<p>I have tried while loops and other methods but have learned that this needs to maybe be done async. </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const filterBtn = document.getElementById('filter-btn');\r\n// Event Listener to activate filter button\r\nfilterBtn.addEventListener('click', () =&gt; {\r\n    filterBtn.textContent = \"Reset Filter\";\r\n    filterBtn.addEventListener(\"click\", () =&gt; {\r\n        filterBtn.textContent = \"Filter\";\r\n    })\r\n});    </code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;button id=\"filter-btn\"&gt;Filter&lt;/button&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I want to be able to keep switching between the on and off state.</p>\n"}, {"tags": ["javascript", "java", "sql-server"], "comments": [{"owner": {"reputation": 2869, "user_id": 3602436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z3ibA.png?s=128&g=1", "display_name": "EDToaster", "link": "https://stackoverflow.com/users/3602436/edtoaster"}, "edited": false, "score": 0, "creation_date": 1562792109, "post_id": 56978483, "comment_id": 100493026, "body": "Are you looking for a framework like reactjs"}, {"owner": {"reputation": 2869, "user_id": 3602436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z3ibA.png?s=128&g=1", "display_name": "EDToaster", "link": "https://stackoverflow.com/users/3602436/edtoaster"}, "edited": false, "score": 0, "creation_date": 1562792190, "post_id": 56978483, "comment_id": 100493058, "body": "As for the second part, your backend show only expose to the front end the tasks that the user can see. For example, if user &quot;A&quot; asks the backend for a list of tasks, the backend should only return a list of tasks for that user, nothing more. In your backend you would have to filter"}, {"owner": {"reputation": 13, "user_id": 8464594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UFU2Y.jpg?s=128&g=1", "display_name": "R. Verner", "link": "https://stackoverflow.com/users/8464594/r-verner"}, "reply_to_user": {"reputation": 2869, "user_id": 3602436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z3ibA.png?s=128&g=1", "display_name": "EDToaster", "link": "https://stackoverflow.com/users/3602436/edtoaster"}, "edited": false, "score": 0, "creation_date": 1562792350, "post_id": 56978483, "comment_id": 100493108, "body": "Not looking for a framework for this specific problem. Everything I have shown here is currently a working application. A resource can login to the program and only see his/her tasks, but the priorities don&#39;t re-adjust to start from 1. This is a small detail in my opinion (as it&#39;s easy to infer what you need to prioritize most since the table is sorted by priority), but it needs to be part of the finished product."}, {"owner": {"reputation": 2869, "user_id": 3602436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z3ibA.png?s=128&g=1", "display_name": "EDToaster", "link": "https://stackoverflow.com/users/3602436/edtoaster"}, "edited": false, "score": 0, "creation_date": 1562792394, "post_id": 56978483, "comment_id": 100493123, "body": "I see, you want the priority remapping in the backend rather than the frontend?"}, {"owner": {"reputation": 13, "user_id": 8464594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UFU2Y.jpg?s=128&g=1", "display_name": "R. Verner", "link": "https://stackoverflow.com/users/8464594/r-verner"}, "reply_to_user": {"reputation": 2869, "user_id": 3602436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z3ibA.png?s=128&g=1", "display_name": "EDToaster", "link": "https://stackoverflow.com/users/3602436/edtoaster"}, "edited": false, "score": 0, "creation_date": 1562792426, "post_id": 56978483, "comment_id": 100493132, "body": "Yep!! Precisely"}, {"owner": {"reputation": 67242, "user_id": 1189885, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/DLHqU.png?s=128&g=1", "display_name": "chrylis -cautiouslyoptimistic-", "link": "https://stackoverflow.com/users/1189885/chrylis-cautiouslyoptimistic"}, "edited": false, "score": 0, "creation_date": 1562794233, "post_id": 56978483, "comment_id": 100493749, "body": "Just count on the client side. Hiding the actual IDs is a recipe for headache."}], "answers": [{"comments": [{"owner": {"reputation": 62250, "user_id": 1570000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9vF6V.jpg?s=128&g=1", "display_name": "John Cappelletti", "link": "https://stackoverflow.com/users/1570000/john-cappelletti"}, "reply_to_user": {"reputation": 13, "user_id": 8464594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UFU2Y.jpg?s=128&g=1", "display_name": "R. Verner", "link": "https://stackoverflow.com/users/8464594/r-verner"}, "edited": false, "score": 0, "creation_date": 1562792679, "post_id": 56978547, "comment_id": 100493225, "body": "@R.Verner Happy to help"}], "tags": [], "owner": {"reputation": 62250, "user_id": 1570000, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9vF6V.jpg?s=128&g=1", "display_name": "John Cappelletti", "link": "https://stackoverflow.com/users/1570000/john-cappelletti"}, "is_accepted": true, "score": 0, "last_activity_date": 1562792329, "creation_date": 1562792329, "answer_id": 56978547, "question_id": 56978483, "link": "https://stackoverflow.com/questions/56978483/how-do-i-display-an-integer-column-of-a-given-table-as-an-auto-incrementing-seri/56978547#56978547", "title": "How do I display an integer column of a given table as an auto-incrementing series starting from 1 to a front-end user?", "body": "<p>In SQL Server, Row_Number() may be useful here.</p>\n\n<p><strong>Example</strong></p>\n\n<pre><code> Select [Priority] = row_number() over (partition by [resouce] order by [Priority])\n       ,[Task]\n       ,[Resouce]\n  From  YourTable\n</code></pre>\n\n<p><strong>Note:</strong> If you have competing priorities, you can replace <code>row_number()</code> with <code>dense_rank()</code></p>\n\n<p>To update your table...</p>\n\n<pre><code>;with cte as (\n Select *\n       ,[NewPriority] = row_number() over (partition by [resouce] order by [Priority])\n  From  YourTable\n)\nUpdate cte set [Priority]=[NewPriority]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 116, "user_id": 11204556, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lC3O4QXo1VQ/AAAAAAAAAAI/AAAAAAAAt4o/m51l8EaqigQ/photo.jpg?sz=128", "display_name": "indika ranaweera", "link": "https://stackoverflow.com/users/11204556/indika-ranaweera"}, "is_accepted": false, "score": 0, "last_activity_date": 1562792692, "creation_date": 1562792692, "answer_id": 56978622, "question_id": 56978483, "link": "https://stackoverflow.com/questions/56978483/how-do-i-display-an-integer-column-of-a-given-table-as-an-auto-incrementing-seri/56978622#56978622", "title": "How do I display an integer column of a given table as an auto-incrementing series starting from 1 to a front-end user?", "body": "<p>Use row_number() frunction in the procedure or the select command you are using.</p>\n\n<p>script</p>\n\n<pre><code>        create table #tempTable\n        (\n        Priority int identity(1,1),\n            Task    varchar(100),\n            Resource varchar(100)\n            )\n\n        insert into  #tempTable\n        select    'Write some code' ,'Arya S.' UNION \n        select  'Write a spec. '  ,'Bran S.' union \n        select 'Write some code ' ,'Bran S.'\n\n        select * from #tempTable\n\n        select ROW_NUMBER() over (order by Priority),Task,  Resource\n        from    #tempTable\n\n        delete from #tempTable\n        where Priority = 1\n\n        select  ROW_NUMBER() over (order by Priority) Priority,Task,    Resource\n        from    #tempTable\n\n        drop table #tempTable\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8464594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UFU2Y.jpg?s=128&g=1", "display_name": "R. Verner", "link": "https://stackoverflow.com/users/8464594/r-verner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 56978547, "answer_count": 2, "score": 1, "last_activity_date": 1562792692, "creation_date": 1562792028, "last_edit_date": 1562792223, "question_id": 56978483, "link": "https://stackoverflow.com/questions/56978483/how-do-i-display-an-integer-column-of-a-given-table-as-an-auto-incrementing-seri", "title": "How do I display an integer column of a given table as an auto-incrementing series starting from 1 to a front-end user?", "body": "<p>I'm in the midst of writing a full-stack application that acts as a task/project manager. It acts as a big table with a drag and drop feature that allows upper-management to re-prioritize tasks/projects. Here is what upper-management sees.</p>\n\n<pre><code> -----------------------------------------\n|Priority| Task                 | Resource|\n -----------------------------------------\n|    1   | Write some code      | Arya S. |\n -----------------------------------------\n|    2   | Write a spec.        | Bran S. |\n -----------------------------------------\n|    3   | Write some code      | Bran S. |\n -----------------------------------------\n</code></pre>\n\n<p>... and so forth for 100+ tasks.\nThe resource for whom the task is assigned can also sign into the program and only see their tasks. For example, if Bran logs in:</p>\n\n<pre><code> -----------------------------------------\n|Priority| Task                 | Resource|\n -----------------------------------------\n|    2   | Write a spec.        | Bran S. |\n -----------------------------------------\n|    3   | Write some code      | Bran S. |\n -----------------------------------------\n</code></pre>\n\n<p>The priority column is a column in our sql-server database. <strong>Is there a way to use SQL to re-adjust the priority (either through the middle-tier JAVA code, or through a SQL view) so that 'Bran S.' sees his priorities starting from 1?</strong> Desired end-product:</p>\n\n<pre><code> -----------------------------------------\n|Priority| Task                 | Resource|\n -----------------------------------------\n|    1   | Write a spec.        | Bran S. |\n -----------------------------------------\n|    2   | Write some code      | Bran S. |\n -----------------------------------------\n</code></pre>\n\n<p>I would prefer not to have to use JQuery/DOM manipulation as it seems inefficient and messy and there are a lot of moving parts. Any suggestions would be greatly appreciated!</p>\n"}, {"tags": ["javascript", "html", "css", "clock"], "answers": [{"tags": [], "owner": {"reputation": 802, "user_id": 2448419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6agoQ.png?s=128&g=1", "display_name": "Alekos Dordas", "link": "https://stackoverflow.com/users/2448419/alekos-dordas"}, "is_accepted": false, "score": 0, "last_activity_date": 1562792992, "last_edit_date": 1562792992, "creation_date": 1562792660, "answer_id": 56978615, "question_id": 56978478, "link": "https://stackoverflow.com/questions/56978478/how-to-auto-replace-past-seconds-minutes-hours-with-current-time-in-a-clock-ap/56978615#56978615", "title": "How to auto replace past seconds/ minutes/ hours with current time in a clock application", "body": "<p>The problem here, is that every time you are appending 3 new nodes to your digital clock. </p>\n\n<p>What you should do, is remove the previous content, and then append the new node.</p>\n\n<p>ie. instead of <code>digitalSec.appendChild(secTxt)</code>\nyou should do</p>\n\n<pre><code>digitalSec.innerHTML = ''\ndigitalSec.appendChild(secTxt)\n</code></pre>\n\n<p>and the same for minutes and hours.</p>\n\n<p>Here is a <a href=\"https://codepen.io/dordasal/pen/jjdvmE\" rel=\"nofollow noreferrer\">codepen</a> that works as mentioned.</p>\n\n<p>You can also replace the whole</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>    // set seconds\n    const secTxt = document.createElement('span')\n    secTxt.textContent = now.getSeconds()\n    digitalSec.innerHTML = ''\n    digitalSec.appendChild(secTxt)\n\n    // set minutes\n    const minTxt = document.createElement('span')\n    minTxt.textContent = now.getMinutes()\n    digitalMin.innerHTML = ''\n    digitalMin.appendChild(minTxt)\n\n    // set hours\n    const hourTxt = document.createElement('span')\n    hourTxt.textContent = now.getHours()\n    digitalHour.innerHTML = ''\n    digitalHour.appendChild(hourTxt)\n</code></pre>\n\n<p>with the following (if you don't care about that extra span)</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>    // set seconds\n    digitalSec.innerHTML = now.getSeconds()\n\n    // set minutes\n    digitalMin.innerHTML = now.getMinutes()\n\n    // set hours\n    digitalHour.innerHTML = now.getHours()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 303, "user_id": 9232077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/019891257ba32105f3f677527ab5c366?s=128&d=identicon&r=PG&f=1", "display_name": "Cyberboy1551", "link": "https://stackoverflow.com/users/9232077/cyberboy1551"}, "is_accepted": true, "score": 1, "last_activity_date": 1562792862, "creation_date": 1562792862, "answer_id": 56978664, "question_id": 56978478, "link": "https://stackoverflow.com/questions/56978478/how-to-auto-replace-past-seconds-minutes-hours-with-current-time-in-a-clock-ap/56978664#56978664", "title": "How to auto replace past seconds/ minutes/ hours with current time in a clock application", "body": "<p>You are appending span elements each time you call setDigitalClock().</p>\n\n<p>The easiest and most efficient way is not to even append at all.</p>\n\n<pre><code>  digitalSec.innerText = now.getSeconds();\n  digitalMin.innerText = now.getMinutes();\n  digitalHour.innerText = now.getHours();\n</code></pre>\n\n<p>This is simpler and isn't adding and removing elements every second which is expensive. <br />\nHere is a <a href=\"https://codepen.io/blacy1551/pen/qzgMxo\" rel=\"nofollow noreferrer\">codepen</a> as well</p>\n"}, {"tags": [], "owner": {"reputation": 3316, "user_id": 6525081, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/979326a08920928ba490fb2cc2180752?s=128&d=identicon&r=PG&f=1", "display_name": "A. Meshu", "link": "https://stackoverflow.com/users/6525081/a-meshu"}, "is_accepted": false, "score": 0, "last_activity_date": 1562793046, "creation_date": 1562793046, "answer_id": 56978695, "question_id": 56978478, "link": "https://stackoverflow.com/questions/56978478/how-to-auto-replace-past-seconds-minutes-hours-with-current-time-in-a-clock-ap/56978695#56978695", "title": "How to auto replace past seconds/ minutes/ hours with current time in a clock application", "body": "<p>A different approach would be something like that:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function clock () {\r\n  // set variables for the clock:\r\n  var currentTime = new Date ();\r\n  var currentHours = currentTime.getHours ();\r\n  var currentMinutes = currentTime.getMinutes ();\r\n  var currentSeconds = currentTime.getSeconds ();\r\n\r\n  // add leading zeros,\r\n  currentHours = ( currentHours &lt; 10 ? \"0\" : \"\" ) + currentHours;\r\n  currentMinutes = ( currentMinutes &lt; 10 ? \"0\" : \"\" ) + currentMinutes;\r\n  currentSeconds = ( currentSeconds &lt; 10 ? \"0\" : \"\" ) + currentSeconds;\r\n  \r\n  var currentTimeString = currentHours + \":\" + currentMinutes + \":\" + currentSeconds;   // put it all together \r\n  document.getElementById(\"clock\").textContent = currentTimeString;   // Update display\r\n}\r\nwindow.addEventListener('load', function() {setInterval('clock()', 1000) }); // activate the clock;</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;span id=\"clock\"&gt;&lt;/span&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 13181, "user_id": 17300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6913044c5e536029098ce2d5c9b841e?s=128&d=identicon&r=PG", "display_name": "Stephen P", "link": "https://stackoverflow.com/users/17300/stephen-p"}, "edited": false, "score": 1, "creation_date": 1562804102, "post_id": 56978883, "comment_id": 100495979, "body": "<code>document.querySelector(&quot;.sec&quot;)</code> will get just one node, so you don&#39;t have to dereference with <code>[0]</code>, and since you&#39;re just setting plain text in the node you can use <code>.innerText</code> which is &quot;cheaper&quot; than <code>.innerHTML</code>"}], "tags": [], "owner": {"reputation": 583, "user_id": 10272405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2cfdf6c1b7de7e555dbf40cfd583cfb?s=128&d=identicon&r=PG&f=1", "display_name": "moficodes", "link": "https://stackoverflow.com/users/10272405/moficodes"}, "is_accepted": false, "score": 1, "last_activity_date": 1562823900, "last_edit_date": 1562823900, "creation_date": 1562794059, "answer_id": 56978883, "question_id": 56978478, "link": "https://stackoverflow.com/questions/56978478/how-to-auto-replace-past-seconds-minutes-hours-with-current-time-in-a-clock-ap/56978883#56978883", "title": "How to auto replace past seconds/ minutes/ hours with current time in a clock application", "body": "<pre><code>function setDigitalClock() {\n\n    const now = new Date()\n    document.querySelector(\".sec\").innerText = `${now.getSeconds()}`;\n    document.querySelector(\".min\").innerText = `${now.getMinutes()}`;\n    document.querySelector(\".hour\").innerText = `${now.getHours()}`;\n}\n</code></pre>\n\n<p>Edited: as the comment below suggests. </p>\n\n<p>This should do what you need to do. </p>\n"}], "owner": {"reputation": 475, "user_id": 10769225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/K1AOR.jpg?s=128&g=1", "display_name": "Tyler Morales", "link": "https://stackoverflow.com/users/10769225/tyler-morales"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 56978664, "answer_count": 4, "score": 1, "last_activity_date": 1562823900, "creation_date": 1562791998, "question_id": 56978478, "link": "https://stackoverflow.com/questions/56978478/how-to-auto-replace-past-seconds-minutes-hours-with-current-time-in-a-clock-ap", "title": "How to auto replace past seconds/ minutes/ hours with current time in a clock application", "body": "<p>I'm trying to display the current time, however with the passing of each second, a new instance of the time is added to the div.</p>\n\n<p>How can the current time replace the past times?</p>\n\n<p>I've tried to use a replace function, set the textContent to that replace function, but had no success. I'm confused because as you can see, the code that makes the analog clock reloads each second with the correct time and am not sure why this is not the case for designing the digital clock portion.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const secondHand = document.querySelector('.second-hand')\r\nconst minuteHand = document.querySelector('.min-hand')\r\nconst hourHand = document.querySelector('.hour-hand')\r\n\r\n// analog clock\r\nfunction setAnalogClock() {\r\n    const now = new Date()\r\n\r\n    //get seconds\r\n    const secs = now.getSeconds()\r\n    const secDegs = ((secs / 60) * 360) + 90\r\n    secondHand.style.transform = `rotate(${secDegs}deg)`\r\n\r\n    //get minutes\r\n    const mins = now.getMinutes()\r\n    const minDegs = ((mins / 60) * 360) + 90\r\n    minuteHand.style.transform = `rotate(${minDegs}deg)`\r\n\r\n    //get hours\r\n    const hours = now.getHours()\r\n    const hourDeg = ((hours / 12) * 360) + 90\r\n    hourHand.style.transform = `rotate(${hourDeg}deg)`\r\n\r\n}\r\n\r\nsetInterval(setAnalogClock, 1000)\r\n\r\nfunction setDigitalClock() {\r\n    const digitalSec = document.querySelector('.sec')\r\n    const digitalMin = document.querySelector('.min')\r\n    const digitalHour = document.querySelector('.hour')\r\n\r\n    const now = new Date()\r\n\r\n    // set seconds\r\n    const secTxt = document.createElement('span')\r\n    secTxt.textContent = now.getSeconds()\r\n    digitalSec.appendChild(secTxt)\r\n\r\n    // set minutes\r\n    const minTxt = document.createElement('span')\r\n    minTxt.textContent = now.getMinutes()\r\n    digitalMin.appendChild(minTxt)\r\n\r\n    // set hours\r\n    const hourTxt = document.createElement('span')\r\n    hourTxt.textContent = now.getHours()\r\n    digitalHour.appendChild(hourTxt)\r\n}\r\n\r\nsetInterval(setDigitalClock, 1000)</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>html {\r\n  background: rgb(237, 245, 250);\r\n  background-size: cover;\r\n  font-family: 'helvetica neue';\r\n  text-align: center;\r\n  font-size: 10px;\r\n}\r\n\r\nbody {\r\n  margin: 0;\r\n  font-size: 2rem;\r\n  margin-top: 10%;\r\n}\r\n\r\n.digital{\r\n  padding: 1rem;\r\n  font-size: 3rem;\r\n}\r\n.clock {\r\n  width: 30rem;\r\n  height: 30rem;\r\n  border: 20px solid white;\r\n  border-radius: 50%;\r\n  margin: auto;\r\n  position: relative;\r\n  padding: 2rem;\r\n}\r\n\r\n.clock-face {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n  transform: translateY(-3px);\r\n  /* account for the height of the clock hands */\r\n}\r\n\r\n.hand,\r\n.dot {\r\n  width: 50%;\r\n  height: 8px;\r\n  position: absolute;\r\n  top: 50%;\r\n  transform-origin: 100%;\r\n  transform: rotate: 90(90deg);\r\n  transition: all .05s;\r\n  transition-timing-function: cubic-bezier(.1, 2.7, .58, 1)\r\n}\r\n\r\n.second-hand {\r\n  background: blue;\r\n  width: 30%;\r\n  margin-left: 60px;\r\n}\r\n\r\n.min-hand {\r\n  background: yellow;\r\n  width: 40%;\r\n  margin-left: 30px;\r\n}\r\n\r\n.hour-hand {\r\n  background: red;\r\n}\r\n\r\n.dot {\r\n  width: 20px;\r\n  height: 20px;\r\n  background: white;\r\n  border-radius: 50%;\r\n  margin-left: 47%;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;!DOCTYPE html&gt;\r\n&lt;html lang=\"en\"&gt;\r\n\r\n&lt;head&gt;\r\n  &lt;meta charset=\"UTF-8\"&gt;\r\n  &lt;title&gt;JS + CSS Clock&lt;/title&gt;\r\n  &lt;link rel=\"stylesheet\" href=\"/styles.css\"&gt;\r\n&lt;/head&gt;\r\n\r\n&lt;body&gt;\r\n\r\n    &lt;div class=\"digital\"&gt;\r\n        &lt;div class=\"sec\"&gt;&lt;/div&gt;\r\n        &lt;div class=\"min\"&gt;&lt;/div&gt;\r\n        &lt;div class=\"hour\"&gt;&lt;/div&gt;\r\n    &lt;/div&gt;\r\n\r\n  &lt;div class=\"clock\"&gt;\r\n    &lt;div class=\"clock-face\"&gt;\r\n      &lt;div class=\"hand hour-hand\"&gt;&lt;/div&gt;\r\n      &lt;div class=\"hand min-hand\"&gt;&lt;/div&gt;\r\n      &lt;div class=\"hand second-hand\"&gt;&lt;/div&gt;\r\n      &lt;div class=\"dot\"&gt;&lt;/div&gt;\r\n    &lt;/div&gt;\r\n  &lt;/div&gt;\r\n\r\n&lt;script src=\"/app.js\"&gt;&lt;/script&gt;\r\n\r\n&lt;/body&gt;\r\n&lt;/html&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["javascript", "html", "json", "vue.js"], "comments": [{"owner": {"reputation": 7845, "user_id": 5734311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iVq7.jpg?s=128&g=1", "display_name": "Chris G", "link": "https://stackoverflow.com/users/5734311/chris-g"}, "edited": false, "score": 0, "creation_date": 1562791843, "post_id": 56978426, "comment_id": 100492916, "body": "<code>.trim()</code> should definitely do the trick, please show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 17982, "user_id": 3689450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SXuSR.png?s=128&g=1", "display_name": "VLAZ", "link": "https://stackoverflow.com/users/3689450/vlaz"}, "edited": false, "score": 0, "creation_date": 1562791873, "post_id": 56978426, "comment_id": 100492926, "body": "Also potentially relevant for Python: <a href=\"https://stackoverflow.com/questions/761804/how-do-i-trim-whitespace-from-a-string\" title=\"how do i trim whitespace from a string\">stackoverflow.com/questions/761804/&hellip;</a>"}, {"owner": {"reputation": 162920, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1562791924, "post_id": 56978426, "comment_id": 100492944, "body": "Why are you looking to solve this client side? Fix it at the source"}, {"owner": {"reputation": 29, "user_id": 5914938, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zIgGpynoHmw/AAAAAAAAAAI/AAAAAAAABH0/5cq8tiE5N98/photo.jpg?sz=128", "display_name": "Dhyan Patel", "link": "https://stackoverflow.com/users/5914938/dhyan-patel"}, "reply_to_user": {"reputation": 162920, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1562792280, "post_id": 56978426, "comment_id": 100493082, "body": "@charlietfl Unfortunately I&#39;m using a very niche library to gather the data I&#39;m using, and the library creates the JSON objects that I&#39;m sending to the template. I tried looking into the source code for it, but I doubt I&#39;d be able to fix the issue there."}, {"owner": {"reputation": 162920, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1562792664, "post_id": 56978426, "comment_id": 100493222, "body": "OK..but as per your edit ... you can trim on an as needed basis. Not sure what sort of answer you really expect. Sounds like a bug in the library and rather than solving the bug you are throwing a band aid on the front end"}, {"owner": {"reputation": 29, "user_id": 5914938, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zIgGpynoHmw/AAAAAAAAAAI/AAAAAAAABH0/5cq8tiE5N98/photo.jpg?sz=128", "display_name": "Dhyan Patel", "link": "https://stackoverflow.com/users/5914938/dhyan-patel"}, "reply_to_user": {"reputation": 162920, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1562793054, "post_id": 56978426, "comment_id": 100493353, "body": "How would I trim as needed? I&#39;ve included a code snippet in my edit @charlietfl"}, {"owner": {"reputation": 162920, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1562793259, "post_id": 56978426, "comment_id": 100493423, "body": "How about when a value is selected? Or before it gets submitted? Going though the initial data load recursively is probably the safest bet....either server side or when you receive it client side. Since it comes in as json you can use  JSON.parse <code>reviver</code> ... <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5145, "user_id": 987704, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/9nXwn.jpg?s=128&g=1", "display_name": "LIGHT", "link": "https://stackoverflow.com/users/987704/light"}, "is_accepted": false, "score": 0, "last_activity_date": 1562792384, "creation_date": 1562792384, "answer_id": 56978558, "question_id": 56978426, "link": "https://stackoverflow.com/questions/56978426/is-there-a-way-to-ignore-whitespace-inside-of-the-value-of-a-option-tag/56978558#56978558", "title": "Is there a way to ignore whitespace inside of the value of a &lt;option&gt; tag?", "body": "<p>You can trim both key and value using the following function:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function trimObj(obj) {\r\n  if (!Array.isArray(obj) &amp;&amp; typeof obj != 'object') return obj;\r\n  return Object.keys(obj).reduce(function(acc, key) {\r\n    acc[key.trim()] = typeof obj[key] == 'string'? obj[key].trim() : trimObj(obj[key]);\r\n    return acc;\r\n  }, Array.isArray(obj)? []:{});\r\n}\r\n\r\nvar a = '{ \"name\":\"John \", \"age\":30, \"city\":\" New York\"}';\r\nconsole.log(trimObj(JSON.parse(a)));</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Or alternatively, You can stringify it, string replace, and reparse it</p>\n\n<pre><code>JSON.parse(JSON.stringify(badJson).replace(/\"\\s+|\\s+\"/g,'\"'))\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/33510625/trim-white-spaces-in-both-object-key-and-value-recursively\">Answered here</a></p>\n"}], "owner": {"reputation": 29, "user_id": 5914938, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zIgGpynoHmw/AAAAAAAAAAI/AAAAAAAABH0/5cq8tiE5N98/photo.jpg?sz=128", "display_name": "Dhyan Patel", "link": "https://stackoverflow.com/users/5914938/dhyan-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "closed_date": 1562792030, "answer_count": 1, "score": -1, "last_activity_date": 1562792858, "creation_date": 1562791710, "last_edit_date": 1562792858, "question_id": 56978426, "link": "https://stackoverflow.com/questions/56978426/is-there-a-way-to-ignore-whitespace-inside-of-the-value-of-a-option-tag", "closed_reason": "Duplicate", "title": "Is there a way to ignore whitespace inside of the value of a &lt;option&gt; tag?", "body": "<p>I'm creating a project where I have a Django server sending JSON data to a template which has Vue.js running on it. The JSON data is sending values with a trailing space after them which is causing problems. I'd like to remove them on the HTML page if possible.</p>\n\n<p>I've tried using Javascript.trim() on the JSON data which didn't seem to have any effect. I also can't strip the entire JSON file of whitespace, since some values need to have whitespace in them.</p>\n\n<p>I am trying to remove whitespace from {\"keyword\" : \"value\"} sets. The \"value\" section sometimes has \"value \" or \" value\" in them.</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>This won't work\n&lt;option value=\"And\"&gt;And&lt;/option&gt;\n\nBut this will\n&lt;option value=\"And \"&gt;And&lt;/option&gt;\n</code></pre>\n\n<p>The JSON object contains</p>\n\n<pre><code>\"keyword\": \"And \"\n</code></pre>\n\n<p>Instead of</p>\n\n<pre><code>\"keyword\": \"And\"\n</code></pre>\n\n<p>I expect the  tag to work regardless of the whitespace surrounding the value in the data.</p>\n\n<p>Edit:\nI can't use Javascript's trim() function, since there are dozens of occurences of the issue in the JSON data. Looping through the data and trimming each individual string would significantly increase the load times for the page.</p>\n\n<p>Edit2:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;b-form-select for=\"action-text\" v-model=\"step.keyword\" class=\"mx-3\"&gt;\n    &lt;option value=\"Given \"&gt;Given&lt;/option&gt;\n    &lt;option value=\"When \"&gt;When&lt;/option&gt;\n    &lt;option value=\"Then \"&gt;Then&lt;/option&gt;\n    &lt;option value=\"And \"&gt;And&lt;/option&gt;\n    &lt;option value=\"But \"&gt;But&lt;/option&gt;\n&lt;/b-form-select&gt;\n</code></pre>\n\n<p>Where in this would I do as needed trimming?</p>\n"}, {"tags": ["javascript", "google-apps-script"], "comments": [{"owner": {"reputation": 7845, "user_id": 5734311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iVq7.jpg?s=128&g=1", "display_name": "Chris G", "link": "https://stackoverflow.com/users/5734311/chris-g"}, "edited": false, "score": 0, "creation_date": 1562792088, "post_id": 56978420, "comment_id": 100493015, "body": "Just a hunch, but since you&#39;re aren&#39;t using <code>active_sheet</code> after setting it, maybe you need <code>var active_sheet = SpreadsheetApp.getActive().getActiveSheet();</code> and <code>var active_col = active_sheet.getActiveCell().getColumn();</code> etc? Also, when is that function called? Did you set it as event handler? (also JavaScript and Java are two very different languages)"}, {"owner": {"reputation": 27978, "user_id": 981744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qJi4S.png?s=128&g=1", "display_name": "Erwin Bolwidt", "link": "https://stackoverflow.com/users/981744/erwin-bolwidt"}, "edited": false, "score": 0, "creation_date": 1562793839, "post_id": 56978420, "comment_id": 100493628, "body": "Why is this tagged with Java? Don&#39;t you know the name of the language that you&#39;re programming in?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11767027, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vL91-n0-6Z8/AAAAAAAAAAI/AAAAAAAAA64/DIEwZ4rFiGo/photo.jpg?sz=128", "display_name": "Jolene Slama", "link": "https://stackoverflow.com/users/11767027/jolene-slama"}, "edited": false, "score": 0, "creation_date": 1562948990, "post_id": 56979588, "comment_id": 100554409, "body": "The function onEdit script worked!  Thank you so much."}, {"owner": {"reputation": 2473, "user_id": 11427375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qg6Nk.jpg?s=128&g=1", "display_name": "ross", "link": "https://stackoverflow.com/users/11427375/ross"}, "reply_to_user": {"reputation": 1, "user_id": 11767027, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vL91-n0-6Z8/AAAAAAAAAAI/AAAAAAAAA64/DIEwZ4rFiGo/photo.jpg?sz=128", "display_name": "Jolene Slama", "link": "https://stackoverflow.com/users/11767027/jolene-slama"}, "edited": false, "score": 0, "creation_date": 1563206530, "post_id": 56979588, "comment_id": 100614609, "body": "Hi @JoleneSlama, if this answer has solved your question please consider <a href=\"https://meta.stackexchange.com/q/5234/179419\">accepting it</a> by clicking the check-mark. This indicates to the wider community that you&#39;ve found a solution and gives some reputation to both the answerer and yourself. There is no obligation to do this."}], "tags": [], "owner": {"reputation": 2473, "user_id": 11427375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qg6Nk.jpg?s=128&g=1", "display_name": "ross", "link": "https://stackoverflow.com/users/11427375/ross"}, "is_accepted": false, "score": 1, "last_activity_date": 1562799026, "creation_date": 1562799026, "answer_id": 56979588, "question_id": 56978420, "link": "https://stackoverflow.com/questions/56978420/currenttime-script-not-working-in-google-doc/56979588#56979588", "title": "CurrentTime script not working in Google Doc", "body": "<h3>Goal:</h3>\n\n<p>A function that writes a timestamp in the respective row when either columns B or C are edited.</p>\n\n<hr>\n\n<h3>Solution:</h3>\n\n<p>This is all you really need. It's a small script that'll run <strong>automatically</strong> using a simple <code>onEdit</code> trigger whenever the sheet is edited. All it does is check the column that is edited using event objects then writes a timestamp in column D.</p>\n\n<p><strong>Note: you won't be able to run this code manually, it runs automatically when the sheet is edited.</strong></p>\n\n<pre><code>function onEdit(e) {\n  var sh = e.source.getActiveSheet();\n  var col = e.range.getColumn();\n  if ((col === 2 || col === 3) === true) {\n    var row = e.range.getRow();\n    sh.getRange(row, 4).setValue(new Date());\n  }\n}\n</code></pre>\n\n<hr>\n\n<h3>References:</h3>\n\n<ul>\n<li><a href=\"https://developers.google.com/apps-script/guides/triggers/\" rel=\"nofollow noreferrer\">Simple Triggers</a></li>\n<li><a href=\"https://developers.google.com/apps-script/guides/triggers/events\" rel=\"nofollow noreferrer\">Event Objects</a></li>\n<li><a href=\"https://developers.google.com/apps-script/reference/spreadsheet/range#setValue(Object)\" rel=\"nofollow noreferrer\"><code>setValue()</code></a></li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 11767027, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vL91-n0-6Z8/AAAAAAAAAAI/AAAAAAAAA64/DIEwZ4rFiGo/photo.jpg?sz=128", "display_name": "Jolene Slama", "link": "https://stackoverflow.com/users/11767027/jolene-slama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562799026, "creation_date": 1562791696, "last_edit_date": 1562798464, "question_id": 56978420, "link": "https://stackoverflow.com/questions/56978420/currenttime-script-not-working-in-google-doc", "title": "CurrentTime script not working in Google Doc", "body": "<p>Google Doc is supposed to update with the current time when edits are made in 2 columns in front of it.  </p>\n\n<p>So if column B or C are edited, then column D updates with the current time.  </p>\n\n<pre><code>function updateDate() {\n  var s = SpreadsheetApp.getActive().getSheetByName(\"Daily\");\n  var active_sheet = \nSpreadsheetApp.getActive().getActiveSheet().getName();\n\n  var active_col = s.getActiveCell().getColumn();\n  var active_row = s.getActiveCell().getRow();\n\n  var target_rows = [1, 4, 5, 6, 7, 8, 9, 10, 14, 15, 16, 17, 18, 19, \n20];\n  var target_cols = [2, 3]\n  var row_in_range = target_rows.indexOf(active_row) == -1 ? false : \ntrue; Logger.log(row_in_range);\n  var col_in_range = target_cols.indexOf(active_col) == -1 ? false : \ntrue; Logger.log(col_in_range);\n\n  if (row_in_range &amp;&amp; col_in_range) {\n    s.getRange(active_row, 4).setValue(new Date);\n    s.getRange(active_row, 5).setValue(new Date);\n  }\n}\n</code></pre>\n\n<p>Not getting an error from Stackdriver logs but it is not working.</p>\n"}, {"tags": ["javascript"], "comments": [{"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1562791884, "post_id": 56978416, "comment_id": 100492931, "body": "Why is this tagged <a href=\"https://stackoverflow.com/questions/tagged/node.js\">node.js</a>? Looks very much like a browser application to me."}, {"owner": {"reputation": 15, "user_id": 10953061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HHEMV.png?s=128&g=1", "display_name": "CarmiteStars", "link": "https://stackoverflow.com/users/10953061/carmitestars"}, "reply_to_user": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1562792051, "post_id": 56978416, "comment_id": 100493004, "body": "I wasn&#39;t sure if node.js was used in this as i had to download it to debug this."}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1562792186, "post_id": 56978416, "comment_id": 100493054, "body": "How did you use node.js to debug something? What exactly were you doing with these files when you got the error?"}, {"owner": {"reputation": 662, "user_id": 596974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ead9de6ebb64a5dcb815d97ec45be861?s=128&d=identicon&r=PG", "display_name": "JDev518", "link": "https://stackoverflow.com/users/596974/jdev518"}, "edited": false, "score": 0, "creation_date": 1562792858, "post_id": 56978416, "comment_id": 100493288, "body": "If the paddle.js file is in the same folder as game.js, you&#39;d import it like <code>import Paddle from &#39;.&#47;paddle&#39;</code> assuming this is ES6"}, {"owner": {"reputation": 15, "user_id": 10953061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HHEMV.png?s=128&g=1", "display_name": "CarmiteStars", "link": "https://stackoverflow.com/users/10953061/carmitestars"}, "edited": false, "score": 0, "creation_date": 1562806328, "post_id": 56978416, "comment_id": 100496374, "body": "i tried to do ./paddle but that also didn&#39;t work. I used Visual Studio Code to debug and I had to use node.js to use the debugger."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 10953061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HHEMV.png?s=128&g=1", "display_name": "CarmiteStars", "link": "https://stackoverflow.com/users/10953061/carmitestars"}, "edited": false, "score": 0, "creation_date": 1562806388, "post_id": 56978551, "comment_id": 100496388, "body": "i did check and they are in the same folder. I also cleared the browser cache."}], "tags": [], "owner": {"reputation": 36, "user_id": 8511775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3FKor.jpg?s=128&g=1", "display_name": "Jesus H.", "link": "https://stackoverflow.com/users/8511775/jesus-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1562792352, "creation_date": 1562792352, "answer_id": 56978551, "question_id": 56978416, "link": "https://stackoverflow.com/questions/56978416/uncaught-syntaxerror-unexpected-identifier-trying-to-import-a-module-but-i-ge/56978551#56978551", "title": "Uncaught SyntaxError: Unexpected identifier | Trying to import a module but I get this error", "body": "<p>Check the files URL, are both files in the same level?</p>\n\n<p>If you are editing your code, try clear the browser cache..</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 10953061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HHEMV.png?s=128&g=1", "display_name": "CarmiteStars", "link": "https://stackoverflow.com/users/10953061/carmitestars"}, "edited": false, "score": 0, "creation_date": 1562942972, "post_id": 56999858, "comment_id": 100551461, "body": "I don&#39;t think the path of paddle is the problem. I&#39;m pretty sure that the error that the console refers to has something to do with the &#39;import Paddle&#39; part."}], "tags": [], "owner": {"reputation": 202, "user_id": 10476654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a2qFj.jpg?s=128&g=1", "display_name": "Geeganage Punsara Prathibha", "link": "https://stackoverflow.com/users/10476654/geeganage-punsara-prathibha"}, "is_accepted": false, "score": 0, "last_activity_date": 1562902398, "creation_date": 1562902398, "answer_id": 56999858, "question_id": 56978416, "link": "https://stackoverflow.com/questions/56978416/uncaught-syntaxerror-unexpected-identifier-trying-to-import-a-module-but-i-ge/56999858#56999858", "title": "Uncaught SyntaxError: Unexpected identifier | Trying to import a module but I get this error", "body": "<p>If you are sure that all of these files are at the root of the current working directory try to import paddle.js as follows.</p>\n\n<p>import Paddle from '/paddle';</p>\n\n<p>or else\nimport Paddle from '/put the path to paddle.js file here/paddle';</p>\n"}], "owner": {"reputation": 15, "user_id": 10953061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HHEMV.png?s=128&g=1", "display_name": "CarmiteStars", "link": "https://stackoverflow.com/users/10953061/carmitestars"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1562902398, "creation_date": 1562791686, "last_edit_date": 1562900522, "question_id": 56978416, "link": "https://stackoverflow.com/questions/56978416/uncaught-syntaxerror-unexpected-identifier-trying-to-import-a-module-but-i-ge", "title": "Uncaught SyntaxError: Unexpected identifier | Trying to import a module but I get this error", "body": "<p>I am currently learning how to make a javascript game. I am using the video: <a href=\"https://www.youtube.com/watch?v=3EMxBkqC4z0&amp;t=319s\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=3EMxBkqC4z0&amp;t=319s</a> </p>\n\n<p>When I try to import the paddle.js file, the console outputs game.js:1 Uncaught SyntaxError: Unexpected identifier</p>\n\n<p>Note that I am a beginner in JavaScript.</p>\n\n<p>I changed the file path to \"paddle\" and the full file path \"Desktop/JS-Game/paddle.js\".</p>\n\n<p>I also double checked all my code in paddle.js.</p>\n\n<p>game.js</p>\n\n<pre><code>import Paddle from 'paddle';\n\nlet canvas = document.getElementById(\"canvas\");\n\nlet ctx = canvas.getContext('2d');\n\nconst GAME_WIDTH = 800;\nconst GAME_HEIGHT = 600;\n\nctx.clearRect(0 ,0 , 800, 600);\n\nlet paddle = new Paddle(GAME_WIDTH, GAME_HEIGHT);\n\npaddle.draw(ctx);\n</code></pre>\n\n<p>paddle.js</p>\n\n<pre><code>export default class Paddle {\n\n    constructor(gameWidth, gameHeight) {\n\n        this.width = 150;\n        this.height= 20;\n\n        this.position = {\n\n            x: gameWidth / 2 - this.width / 2,\n\n            y: gameHeight - this.height - 10\n        };\n    }\n\n    draw(ctx) {\n\n        ctx.fillStyle = '#FF2'\n\n        ctx.fillRect(this.position.x, this.position.y, this.width, this.height);\n    }\n}\n</code></pre>\n\n<p>I was expecting the rectangle to draw onto the canvas but nothing was drawn.</p>\n"}, {"tags": ["javascript", "reactjs"], "comments": [{"owner": {"reputation": 2869, "user_id": 3602436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z3ibA.png?s=128&g=1", "display_name": "EDToaster", "link": "https://stackoverflow.com/users/3602436/edtoaster"}, "edited": false, "score": 0, "creation_date": 1562791631, "post_id": 56978398, "comment_id": 100492836, "body": "Is there a reason you put the state object outside of your class?"}, {"owner": {"reputation": 2564, "user_id": 4134881, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/797360342295a3f637a9c4d71d40d113?s=128&d=identicon&r=PG&f=1", "display_name": "evianpring", "link": "https://stackoverflow.com/users/4134881/evianpring"}, "reply_to_user": {"reputation": 2869, "user_id": 3602436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z3ibA.png?s=128&g=1", "display_name": "EDToaster", "link": "https://stackoverflow.com/users/3602436/edtoaster"}, "edited": false, "score": 0, "creation_date": 1562791714, "post_id": 56978398, "comment_id": 100492866, "body": "@JClassic I ran into an unexpected issue using bind with another library (React-Data-Grid), so I built this example just to test my understanding of bind. It&#39;s not meant to be anything except to ascertain how bind is working."}, {"owner": {"reputation": 14231, "user_id": 1218980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c6b54df38abce7b1c35f499a1d4a67?s=128&d=identicon&r=PG", "display_name": "Emile Bergeron", "link": "https://stackoverflow.com/users/1218980/emile-bergeron"}, "edited": false, "score": 1, "creation_date": 1562791752, "post_id": 56978398, "comment_id": 100492880, "body": "You&#39;re using an arrow function which doesn&#39;t have its own context, but uses <code>this</code> which refers to the parent context here, which isn&#39;t defined since at the root of the file."}, {"owner": {"reputation": 14231, "user_id": 1218980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c6b54df38abce7b1c35f499a1d4a67?s=128&d=identicon&r=PG", "display_name": "Emile Bergeron", "link": "https://stackoverflow.com/users/1218980/emile-bergeron"}, "edited": false, "score": 1, "creation_date": 1562791887, "post_id": 56978398, "comment_id": 100492933, "body": "Using a <code>function () {}</code> expression would &quot;work&quot; but that would be confusing as hell since you named these the same as React&#39;s component&#39;s api, but it&#39;s not and won&#39;t trigger the lifecycle of React."}], "answers": [{"comments": [{"owner": {"reputation": 2564, "user_id": 4134881, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/797360342295a3f637a9c4d71d40d113?s=128&d=identicon&r=PG&f=1", "display_name": "evianpring", "link": "https://stackoverflow.com/users/4134881/evianpring"}, "edited": false, "score": 0, "creation_date": 1562792153, "post_id": 56978442, "comment_id": 100493037, "body": "Ok, that was an easy miss on my part. I&#39;m going to post a question that is the actual issue I am having and will link here."}, {"owner": {"reputation": 2564, "user_id": 4134881, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/797360342295a3f637a9c4d71d40d113?s=128&d=identicon&r=PG&f=1", "display_name": "evianpring", "link": "https://stackoverflow.com/users/4134881/evianpring"}, "edited": false, "score": 0, "creation_date": 1562794164, "post_id": 56978442, "comment_id": 100493723, "body": "The real-life question that inspired this question: <a href=\"https://stackoverflow.com/questions/56978862/how-does-a-react-method-bound-in-constructor-lose-its-boundedness-in-this-examp\" title=\"how does a react method bound in constructor lose its boundedness in this examp\">stackoverflow.com/questions/56978862/&hellip;</a>"}], "tags": [], "owner": {"reputation": 74735, "user_id": 82586, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/HfVKA.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/82586/james"}, "is_accepted": false, "score": 3, "last_activity_date": 1562791760, "creation_date": 1562791760, "answer_id": 56978442, "question_id": 56978398, "link": "https://stackoverflow.com/questions/56978398/why-is-this-state-undefined-in-this-simple-react-component-using-a-contrived-use/56978442#56978442", "title": "Why is this.state undefined in this simple React component using a contrived use of bind?", "body": "<p>When you use arrow functions, the context is taken from the nearest scope in which the function is defined. In your case, <code>this</code> would refer to the module scope.</p>\n\n<p>From the <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions\" rel=\"nofollow noreferrer\">docs</a></p>\n\n<blockquote>\n  <p>An arrow function does not have its own this. The this value of the enclosing lexical scope is used; arrow functions follow the normal variable lookup rules. So while searching for this which is not present in current scope, an arrow function ends up finding the this from its enclosing scope.</p>\n</blockquote>\n\n<p>If you want the scope to remain relative to the object then use a standard function definition</p>\n\n<pre><code>setState: function({ count }) {\n  this.state.count += count;\n}\n</code></pre>\n"}], "owner": {"reputation": 2564, "user_id": 4134881, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/797360342295a3f637a9c4d71d40d113?s=128&d=identicon&r=PG&f=1", "display_name": "evianpring", "link": "https://stackoverflow.com/users/4134881/evianpring"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562791760, "creation_date": 1562791555, "question_id": 56978398, "link": "https://stackoverflow.com/questions/56978398/why-is-this-state-undefined-in-this-simple-react-component-using-a-contrived-use", "title": "Why is this.state undefined in this simple React component using a contrived use of bind?", "body": "<p>This is a simple React app that I just generated with <code>create-react-app</code>, and modified only <code>App.js</code> to what you see below. This is an exercise to see if I understand <code>bind</code> enough to get results I expect as I toy with it. I'm not getting the expected result: I bind <code>method</code> in the class to <code>obj</code>, and use an <code>onClick</code> on a div to execute this bound <code>method</code>. In the method definition, I am calling <code>this.setState</code>, and <code>setState</code> is defined on <code>obj</code>, but I get an error that <code>this.state</code> is undefined in the <code>setState</code> method definition. <strong>Why?</strong></p>\n\n<hr>\n\n<pre><code>import React from 'react';\nimport './App.css';\n\nconst Button = ({ onClick, quantity }) =&gt; &lt;div onClick={onClick} style={{ width: 40 , height: 20}}&gt;{quantity}&lt;/div&gt;;\n\nconst generateButton = (quantity, onClick) =&gt; () =&gt; &lt;Button onClick={() =&gt; onClick(quantity)} quantity={quantity} /&gt;\n\nconst obj = {\n state: { count: 1000 }, \nsetState: ({ count }) =&gt; this.state.count += count\n};\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      count: 0\n    }\n\n    this.method = this.method.bind(obj);\n  }\n\n  method(count) {\n    const newCount = this.state.count + count;\n    this.setState({ count: newCount})\n  }\n\n  render() {\n    return (\n        &lt;div&gt;\n            &lt;div style={{width: 100, height: 100, fontSize: 50}}&gt;{obj.state.count}&lt;/div&gt;\n            {generateButton(10, this.method)()}\n        &lt;/div&gt;\n    )\n  }\n}\n\nexport default App;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/OWaFv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OWaFv.png\" alt=\"Error in browser\"></a></p>\n"}, {"tags": ["javascript"], "comments": [{"owner": {"reputation": 5170, "user_id": 1410246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfce8c2aa420b800bb7595ac5fbc986d?s=128&d=identicon&r=PG", "display_name": "EylM", "link": "https://stackoverflow.com/users/1410246/eylm"}, "edited": false, "score": 0, "creation_date": 1562791741, "post_id": 56978387, "comment_id": 100492874, "body": "What results are you getting ?  Please provide and input and the output you are getting now."}, {"owner": {"reputation": 35, "user_id": 11766959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f885710992fd17de1bc5ef516697377?s=128&d=identicon&r=PG&f=1", "display_name": "Effy", "link": "https://stackoverflow.com/users/11766959/effy"}, "reply_to_user": {"reputation": 5170, "user_id": 1410246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfce8c2aa420b800bb7595ac5fbc986d?s=128&d=identicon&r=PG", "display_name": "EylM", "link": "https://stackoverflow.com/users/1410246/eylm"}, "edited": false, "score": 0, "creation_date": 1562792506, "post_id": 56978387, "comment_id": 100493162, "body": "I added a fees.png image to my question."}], "answers": [{"comments": [{"owner": {"reputation": 4082, "user_id": 3216427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0186cf05b82361bc8de3344f542eaf?s=128&d=identicon&r=PG&f=1", "display_name": "joanis", "link": "https://stackoverflow.com/users/3216427/joanis"}, "reply_to_user": {"reputation": 35, "user_id": 11766959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f885710992fd17de1bc5ef516697377?s=128&d=identicon&r=PG&f=1", "display_name": "Effy", "link": "https://stackoverflow.com/users/11766959/effy"}, "edited": false, "score": 0, "creation_date": 1565362528, "post_id": 56978745, "comment_id": 101343265, "body": "@Effy if this answer worked, you should consider accepting it, and possibly upvoting it."}], "tags": [], "owner": {"reputation": 86, "user_id": 11064050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ipvJVVtRxaM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMzcfKseqVoM6_GerNIn5KqPIwK7Q/mo/photo.jpg?sz=128", "display_name": "Charky", "link": "https://stackoverflow.com/users/11064050/charky"}, "is_accepted": true, "score": 2, "last_activity_date": 1562793341, "creation_date": 1562793341, "answer_id": 56978745, "question_id": 56978387, "link": "https://stackoverflow.com/questions/56978387/calculate-fees-based-on-credit-hours/56978745#56978745", "title": "Calculate fees based on credit hours", "body": "<p>You can't enter the else if because you use \"===\" you need use \"==\".</p>\n\n<p>If you wanna more information please check this. <a href=\"https://stackoverflow.com/questions/523643/difference-between-and-in-javascript\">Link</a></p>\n"}], "owner": {"reputation": 35, "user_id": 11766959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f885710992fd17de1bc5ef516697377?s=128&d=identicon&r=PG&f=1", "display_name": "Effy", "link": "https://stackoverflow.com/users/11766959/effy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 56978745, "answer_count": 1, "score": 0, "last_activity_date": 1562793341, "creation_date": 1562791499, "last_edit_date": 1562792416, "question_id": 56978387, "link": "https://stackoverflow.com/questions/56978387/calculate-fees-based-on-credit-hours", "title": "Calculate fees based on credit hours", "body": "<p>I am new to JavaScript and I am trying to make a cost estimator for tuition and fees based on class type, residency, and credit hours. I have the tuition working but can't figure out how to calculate the fees.\n<a href=\"https://i.stack.imgur.com/f8RCq.png\" rel=\"nofollow noreferrer\">fees.png</a></p>\n\n<p>My if else is not working, tried everything I can think of.</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\" /&gt;\n    &lt;title&gt;Untitled Document&lt;/title&gt;\n    &lt;script type=\"text/javascript\"&gt;\n      function formHandler(form) {\n        var tuition1 = eval(form.tuition1.value);\n        var tuition2 = eval(form.tuition2.value);\n        var tuition3 = eval(form.tuition3.value);\n        var hours1 = eval(form.hours1.value);\n        var hours2 = eval(form.hours2.value);\n        var hours3 = eval(form.hours3.value);\n        var t1 = tuition1 * hours1;\n        var t2 = tuition2 * hours2;\n        var t3 = tuition3 * hours3;\n        var oncfee1 = 0;\n        var olcfee1 = 0;\n        var cjusfee1 = 0;\n        //Calculate on campus fees\n        if (hours1 === \"1\") {\n          oncfee1 = 95.25;\n        } else if (hours1 === \"2\") {\n          oncfee1 = 123.5;\n        } else if (hours1 === \"3\") {\n          oncfee1 = 151.75;\n        } else if (hours1 === \"4\") {\n          oncfee1 = 237.5;\n        } else if (hours1 === \"5\") {\n          oncfee1 = 265.75;\n        } else if (hours1 === \"6\") {\n          oncfee1 = 294.0;\n        } else if (hours1 === \"7\") {\n          oncfee1 = 549.25;\n        } else if (hours1 === \"8\") {\n          oncfee1 = 577.5;\n        } else if (hours1 === \"9\") {\n          oncfee1 = 605.75;\n        } else if (hours1 === \"10\") {\n          oncfee1 = 634.0;\n        } else if (hours1 === \"11\") {\n          oncfee1 = 662.25;\n        } else if (hours1 === \"12\") {\n          oncfee1 = 690.5;\n        } else if (hours1 === \"13\") {\n          oncfee1 = 718.75;\n        } else if (hours1 === \"14\") {\n          oncfee1 = 747.0;\n        } else if (hours1 === \"15\") {\n          oncfee1 = 775.25;\n        } else if (hours1 === \"16\") {\n          oncfee1 = 792.5;\n        } else if (hours1 === \"17\") {\n          oncfee1 = 809.75;\n        } else if (hours1 === \"18\") {\n          oncfee1 = 827.0;\n        } else if (hours1 === \"19\") {\n          oncfee1 = 844.25;\n        } else if (hours1 === \"20\") {\n          oncfee1 = 861.5;\n        } else if (hours1 === \"21\") {\n          oncfee1 = 878.75;\n        } else {\n          oncfee1 = 0;\n        }\n        //Calculate online fees\n        if (hours2 === \"1\") {\n          olcfee1 = 61.25;\n        } else if (hours2 === \"2\") {\n          olcfee1 = 118.5;\n        } else if (hours2 === \"3\") {\n          olcfee1 = 175.75;\n        } else if (hours2 === \"4\") {\n          olcfee1 = 233.0;\n        } else if (hours2 === \"5\") {\n          olcfee1 = 290.25;\n        } else if (hours2 === \"6\") {\n          olcfee1 = 347.5;\n        } else if (hours2 === \"7\") {\n          olcfee1 = 404.75;\n        } else if (hours2 === \"8\") {\n          olcfee1 = 462.0;\n        } else if (hours2 === \"9\") {\n          olcfee1 = 519.25;\n        } else if (hours2 === \"10\") {\n          olcfee1 = 576.5;\n        } else if (hours2 === \"11\") {\n          olcfee1 = 633.75;\n        } else if (hours2 === \"12\") {\n          olcfee1 = 691.0;\n        } else if (hours2 === \"13\") {\n          olcfee1 = 748.25;\n        } else if (hours2 === \"14\") {\n          olcfee1 = 805.5;\n        } else if (hours2 === \"15\") {\n          olcfee1 = 862.75;\n        } else {\n          olcfee1 = 0;\n        }\n        //Calculate CJUS online fees\n        if (hours3 === \"1\") {\n          cjusfee1 = 61.25;\n        } else if (hours3 === \"2\") {\n          cjusfee1 = 118.5;\n        } else if (hours3 === \"3\") {\n          cjusfee1 = 175.75;\n        } else if (hours3 === \"4\") {\n          cjusfee1 = 233.0;\n        } else if (hours3 === \"5\") {\n          cjusfee1 = 290.25;\n        } else if (hours3 === \"6\") {\n          cjusfee1 = 347.5;\n        } else if (hours3 === \"7\") {\n          cjusfee1 = 404.75;\n        } else if (hours3 === \"8\") {\n          cjusfee1 = 462.0;\n        } else if (hours3 === \"9\") {\n          cjusfee1 = 519.25;\n        } else if (hours3 === \"10\") {\n          cjusfee1 = 576.5;\n        } else if (hours3 === \"11\") {\n          cjusfee1 = 633.75;\n        } else if (hours3 === \"12\") {\n          cjusfee1 = 691.0;\n        } else if (hours3 === \"13\") {\n          cjusfee1 = 748.25;\n        } else if (hours3 === \"14\") {\n          cjusfee1 = 805.5;\n        } else if (hours3 === \"15\") {\n          cjusfee1 = 862.75;\n        } else {\n          cjusfee1 = 0;\n        }\n        var fees = oncfee1 + olcfee1 + cjusfee1;\n        var cost = t1 + t2 + t3 + fees;\n        form.t1.value = \"$\" + t1;\n        form.t2.value = \"$\" + t2;\n        form.t3.value = \"$\" + t3;\n        form.fees.value = \"$\" + fees;\n        form.costresult.value = \"$\" + cost;\n      }\n    &lt;/script&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;form method=\"post\" name=\"testform\"&gt;\n      &lt;div&gt;\n        &lt;table\n          id=\"AutoNumber1\"\n          summary=\"calculate the cost per semester for \n    undergraduate students\"\n        &gt;\n          &lt;tbody&gt;\n            &lt;tr&gt;\n              &lt;td colspan=\"2\"&gt;\n                &lt;label for=\"tuition1\"&gt;On campus class tuition &lt;/label&gt;\n                &lt;select id=\"tuition1\" name=\"tuition1\"&gt;\n                  &lt;option selected=\"selected\" value=\"0\"&gt;None&lt;/option&gt;\n                  &lt;option value=\"203\"&gt;Resident&lt;/option&gt;\n                  &lt;option value=\"443\"&gt;Non Resident&lt;/option&gt;\n                &lt;/select&gt;\n              &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n              &lt;td colspan=\"2\"&gt;\n                &lt;label for=\"hours1\"\n                  &gt;Enter number of On campus credit hours\n                &lt;/label&gt;\n                &lt;input\n                  id=\"hours1\"\n                  name=\"hours1\"\n                  size=\"5\"\n                  type=\"text\"\n                  value=\"0\"\n                /&gt;\n              &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;br /&gt;\n            &lt;tr&gt;\n              &lt;td colspan=\"2\"&gt;\n                &lt;label for=\"tuition2\"&gt;Online or Blended class&lt;/label\n                &gt;&amp;nbsp;&lt;select id=\"tuition2\" name=\"tuition2\"&gt;\n                  &lt;option selected=\"selected\" value=\"0\"&gt;None&lt;/option&gt;\n                  &lt;option value=\"261\"&gt;Online/Blended class Resident&lt;/option&gt;\n                  &lt;option value=\"396\"&gt;Online/Blended class Non Resident&lt;/option&gt;\n                &lt;/select&gt;\n              &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n              &lt;td colspan=\"2\"&gt;\n                &lt;label for=\"hours2\"\n                  &gt;Enter number of Online or Blended credit hours\n                &lt;/label&gt;\n                &lt;input\n                  id=\"hours2\"\n                  name=\"hours2\"\n                  size=\"5\"\n                  type=\"text\"\n                  value=\"0\"\n                /&gt;\n              &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;br /&gt;\n            &lt;tr&gt;\n              &lt;td colspan=\"2\"&gt;\n                &lt;label for=\"tuition3\"\n                  &gt;Online or Blended Criminal Justice class&lt;/label\n                &gt;&amp;nbsp;&lt;select id=\"tuition3\" name=\"tuition3\"&gt;\n                  &lt;option selected=\"selected\" value=\"0\"&gt;None&lt;/option&gt;\n                  &lt;option value=\"280\"\n                    &gt;Online/Blended Criminal Justice class Resident&lt;/option\n                  &gt;\n                  &lt;option value=\"405\"\n                    &gt;Online/Blended Criminal Justice class Non Resident&lt;/option\n                  &gt;\n                &lt;/select&gt;\n              &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n              &lt;td colspan=\"2\"&gt;\n                &lt;label for=\"hours3\"\n                  &gt;Enter number of Online or Blended Criminal Justice credit\n                  hours&lt;/label\n                &gt;\n                &lt;input\n                  id=\"hours3\"\n                  name=\"hours3\"\n                  size=\"5\"\n                  type=\"text\"\n                  value=\"0\"\n                /&gt;\n              &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n              &lt;td colspan=\"2\"&gt;\n                &lt;p&gt;\n                  &lt;button\n                    name=\"CostResult\"\n                    onclick=\"javascript:formHandler(this.form)\"\n                    type=\"button\"\n                  &gt;\n                    Calculate Estimated Semester Cost\n                  &lt;/button&gt;\n                &lt;/p&gt;\n              &lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n              &lt;td&gt;&lt;label for=\"t1\"&gt;Tuition On Campus Class&lt;/label&gt;&lt;/td&gt;\n              &lt;td&gt;&lt;input id=\"t1\" name=\"t1\" size=\"10\" type=\"text\" /&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n              &lt;td&gt;&lt;label for=\"t2\"&gt;Tuition Online / Blended Class&lt;/label&gt;&lt;/td&gt;\n              &lt;td&gt;&lt;input id=\"t2\" name=\"t2\" size=\"10\" type=\"text\" /&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n              &lt;td&gt;\n                &lt;label for=\"t3\"&gt;Tuition Online / Blended CJUS Class&lt;/label&gt;\n              &lt;/td&gt;\n              &lt;td&gt;&lt;input id=\"t3\" name=\"t3\" size=\"10\" type=\"text\" /&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n              &lt;td&gt;&lt;label for=\"fees\"&gt;Fees&lt;/label&gt;&lt;/td&gt;\n              &lt;td&gt;&lt;input id=\"fees\" name=\"fees\" size=\"10\" type=\"text\" /&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;tr&gt;\n              &lt;td&gt;\n                &lt;label for=\"costresult\"&gt;Total Estimated Semester Cost&lt;/label&gt;\n              &lt;/td&gt;\n              &lt;td&gt;\n                &lt;input\n                  id=\"costresult\"\n                  name=\"costresult\"\n                  size=\"10\"\n                  type=\"text\"\n                /&gt;\n              &lt;/td&gt;\n            &lt;/tr&gt;\n          &lt;/tbody&gt;\n        &lt;/table&gt;\n      &lt;/div&gt;\n    &lt;/form&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Fees are based on credit hours and class type. Currently I can't get a result to return. I want to return the sum of var fees.</p>\n"}, {"tags": ["javascript", "node.js", "express", "promise"], "comments": [{"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1562791991, "post_id": 56978256, "comment_id": 100492977, "body": "You can&#39;t - if there was an error in <code>request</code> or <code>input</code> or <code>execute</code>, the <code>finally</code> callback runs but there never was a <code>response</code> value. So what are you actually trying to achieve?"}, {"owner": {"reputation": 1155, "user_id": 9169546, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-45tL0yP508A/AAAAAAAAAAI/AAAAAAAABVI/l9s-Httw95E/photo.jpg?sz=128", "display_name": "Matthew", "link": "https://stackoverflow.com/users/9169546/matthew"}, "reply_to_user": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1562792047, "post_id": 56978256, "comment_id": 100493002, "body": "@Bergi Trying to capture data like the request body, request headers, response body, etc. to write to a log in SQL."}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 1, "creation_date": 1562792103, "post_id": 56978256, "comment_id": 100493023, "body": "You should write that log when you are sending the response, not after you handled an error. You certainly will need to capture different data to your log in case there was an error. <code>finally</code> is not the right place to do that"}, {"owner": {"reputation": 1155, "user_id": 9169546, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-45tL0yP508A/AAAAAAAAAAI/AAAAAAAABVI/l9s-Httw95E/photo.jpg?sz=128", "display_name": "Matthew", "link": "https://stackoverflow.com/users/9169546/matthew"}, "reply_to_user": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1562792319, "post_id": 56978256, "comment_id": 100493101, "body": "Is there another verb I can use other than <code>then</code> to help break up the visual flow during the scope of the log?"}, {"owner": {"reputation": 18374, "user_id": 3478010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y4DTM.png?s=128&g=1", "display_name": "Roamer-1888", "link": "https://stackoverflow.com/users/3478010/roamer-1888"}, "edited": false, "score": 1, "creation_date": 1562794842, "post_id": 56978256, "comment_id": 100493932, "body": "&quot;then&quot; is generally classed as an adverb, not verb :-)"}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1562795479, "post_id": 56978256, "comment_id": 100494105, "body": "@Matthew Not sure what you mean by &quot;visual flow&quot;. You have to decide on the control flow that you want, and then use the methods that are available to achieve it."}], "answers": [{"comments": [{"owner": {"reputation": 1155, "user_id": 9169546, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-45tL0yP508A/AAAAAAAAAAI/AAAAAAAABVI/l9s-Httw95E/photo.jpg?sz=128", "display_name": "Matthew", "link": "https://stackoverflow.com/users/9169546/matthew"}, "edited": false, "score": 0, "creation_date": 1562791979, "post_id": 56978315, "comment_id": 100492966, "body": "Awesome. Thank you!!"}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 2, "creation_date": 1562792052, "post_id": 56978315, "comment_id": 100493005, "body": "Don&#39;t forget that <code>response</code> will be <code>undefined</code> if there was an error, since that&#39;s what the <code>catch</code> handler returns."}], "tags": [], "owner": {"reputation": 8719, "user_id": 6951428, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/92fd81a6020da8e77fc9125e0c9ec512?s=128&d=identicon&r=PG&f=1", "display_name": "junvar", "link": "https://stackoverflow.com/users/6951428/junvar"}, "is_accepted": true, "score": 1, "last_activity_date": 1562791194, "creation_date": 1562791194, "answer_id": 56978315, "question_id": 56978256, "link": "https://stackoverflow.com/questions/56978256/how-to-pass-variable-through-promise-chain-using-finally/56978315#56978315", "title": "How to pass variable through promise chain using finally", "body": "<blockquote>\n  <p>A finally callback will not receive any argument, since there's no reliable means of determining if the promise was fulfilled or rejected. This use case is for precisely when you do not care about the rejection reason, or the fulfillment value, and so there's no need to provide it. (<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/finally#Description\" rel=\"nofollow noreferrer\">mdn</a>)</p>\n</blockquote>\n\n<p>Instead, simply use <code>.then</code>:</p>\n\n<pre><code>const sql = require(\"mssql\")\nconst config = require(\"../config\")\n\nrouter.get(\"/express-route\", (req, res) =&gt; {\n  sql.connect(config.properties).then(pool =&gt; {\n    return pool.request()\n      .input('username', sql.NVarChar(32), req.params.username)\n      .execute('do_something_with_username')\n      .then(response =&gt; {res.send(response); return response;}) // pass this response\n      .catch(err =&gt; res.send(err))\n      .then(response =&gt; {\n        console.log('response', response)  // to here\n        sql.close()\n      })\n  })\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1155, "user_id": 9169546, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-45tL0yP508A/AAAAAAAAAAI/AAAAAAAABVI/l9s-Httw95E/photo.jpg?sz=128", "display_name": "Matthew", "link": "https://stackoverflow.com/users/9169546/matthew"}, "edited": false, "score": 0, "creation_date": 1562791679, "post_id": 56978391, "comment_id": 100492854, "body": "The idea is to replace ` console.log(&#39;response&#39;, response)` with another <code>pool.request...</code> to write back to SQL..."}, {"owner": {"reputation": 2869, "user_id": 3602436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z3ibA.png?s=128&g=1", "display_name": "EDToaster", "link": "https://stackoverflow.com/users/3602436/edtoaster"}, "reply_to_user": {"reputation": 1155, "user_id": 9169546, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-45tL0yP508A/AAAAAAAAAAI/AAAAAAAABVI/l9s-Httw95E/photo.jpg?sz=128", "display_name": "Matthew", "link": "https://stackoverflow.com/users/9169546/matthew"}, "edited": false, "score": 1, "creation_date": 1562791797, "post_id": 56978391, "comment_id": 100492898, "body": "And you can do that, just call like I did with the first pool.request in my answer"}, {"owner": {"reputation": 1155, "user_id": 9169546, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-45tL0yP508A/AAAAAAAAAAI/AAAAAAAABVI/l9s-Httw95E/photo.jpg?sz=128", "display_name": "Matthew", "link": "https://stackoverflow.com/users/9169546/matthew"}, "edited": false, "score": 0, "creation_date": 1562791989, "post_id": 56978391, "comment_id": 100492973, "body": "Thank you for the feedback!! :)"}], "tags": [], "owner": {"reputation": 2869, "user_id": 3602436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z3ibA.png?s=128&g=1", "display_name": "EDToaster", "link": "https://stackoverflow.com/users/3602436/edtoaster"}, "is_accepted": false, "score": 0, "last_activity_date": 1562791935, "last_edit_date": 1562791935, "creation_date": 1562791507, "answer_id": 56978391, "question_id": 56978256, "link": "https://stackoverflow.com/questions/56978256/how-to-pass-variable-through-promise-chain-using-finally/56978391#56978391", "title": "How to pass variable through promise chain using finally", "body": "<p>You can, in fact, simplify things by writing your code within an async function</p>\n\n<pre><code>const sql = require(\"mssql\")\nconst config = require(\"../config\")\n\nrouter.get(\"/express-route\", (req, res) =&gt; {\n  sql.connect(config.properties).then(async pool =&gt; {\n    try {\n        const response = await pool.request()\n                         .input('username', sql.NVarChar(32), req.params.username)\n                         .execute('do_something_with_username');\n\n        // do another request\n        const otherResponse = await pool.request() ... ;\n\n        res.send(response);\n    } catch (err) {\n        res.send(err);\n    } finally {\n        sql.close();\n    }\n  })\n}\n\n</code></pre>\n\n<p>This lets you write code in a more linear manner.</p>\n"}], "owner": {"reputation": 1155, "user_id": 9169546, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh4.googleusercontent.com/-45tL0yP508A/AAAAAAAAAAI/AAAAAAAABVI/l9s-Httw95E/photo.jpg?sz=128", "display_name": "Matthew", "link": "https://stackoverflow.com/users/9169546/matthew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 515, "favorite_count": 0, "accepted_answer_id": 56978315, "answer_count": 2, "score": 1, "last_activity_date": 1562791935, "creation_date": 1562790907, "question_id": 56978256, "link": "https://stackoverflow.com/questions/56978256/how-to-pass-variable-through-promise-chain-using-finally", "title": "How to pass variable through promise chain using finally", "body": "<p>I am trying to build a log for an <code>Express API</code>, however am having issues getting the data to log out.</p>\n\n<p>I can log the original <code>req</code> and <code>res</code> objects in the <code>finally</code> block, but am not sure how I would access the <code>SQL response</code>.</p>\n\n<pre><code>const sql = require(\"mssql\")\nconst config = require(\"../config\")\n\nrouter.get(\"/express-route\", (req, res) =&gt; {\n  sql.connect(config.properties).then(pool =&gt; {\n    return pool.request()\n      .input('username', sql.NVarChar(32), req.params.username)\n      .execute('do_something_with_username')\n      .then(response =&gt; res.send(response) // pass this response\n      .catch(err =&gt; res.send(err))\n      .finally(() =&gt; {\n        console.log('response', response)  // to here\n        sql.close()\n      })\n  })\n}\n</code></pre>\n\n<p>How would I take the response from the first <code>then</code> block and pass it to the <code>finally</code> block to be used in another function?</p>\n"}, {"tags": ["javascript", "jquery"], "comments": [{"owner": {"reputation": 25361, "user_id": 924299, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a142d1ec6b8444c9baf3ec6176e1cf61?s=128&d=identicon&r=PG&f=1", "display_name": "showdev", "link": "https://stackoverflow.com/users/924299/showdev"}, "edited": false, "score": 7, "creation_date": 1562790951, "post_id": 56978244, "comment_id": 100492545, "body": "It looks like the structure might be <code>data.data.activityName</code>."}, {"owner": {"reputation": 24196, "user_id": 1586174, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4aa4d9e7b30a8bddace165e4c33abd85?s=128&d=identicon&r=PG", "display_name": "Taplar", "link": "https://stackoverflow.com/users/1586174/taplar"}, "edited": false, "score": 1, "creation_date": 1562790953, "post_id": 56978244, "comment_id": 100492547, "body": "Notice in your console log, the first (and only) property off of the element you logged is <code>data</code>"}, {"owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "edited": false, "score": 2, "creation_date": 1562791047, "post_id": 56978244, "comment_id": 100492584, "body": "So instead of <code>return Json(new { data = aActivity });</code> just do <code>return Json(aActivity)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 7610106, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/65270b4dce6e1acfb42736a2d4d211ed?s=128&d=identicon&r=PG&f=1", "display_name": "LavsTo", "link": "https://stackoverflow.com/users/7610106/lavsto"}, "edited": false, "score": 0, "creation_date": 1562792291, "post_id": 56978307, "comment_id": 100493087, "body": "thanks trincot, that solved it. I will keep that in mind, that the controller includes a data property."}], "tags": [], "owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "is_accepted": true, "score": 1, "last_activity_date": 1562791165, "creation_date": 1562791165, "answer_id": 56978307, "question_id": 56978244, "link": "https://stackoverflow.com/questions/56978244/unable-to-access-json-object-properties-values-showing-undefined/56978307#56978307", "title": "Unable to access Json object properties / values - showing undefined", "body": "<p>The controller includes a <code>data</code> property in the data itself. You can actually see that addition <code>data</code> in the console. So probably you would better remove that extra layer at the server side. </p>\n\n<p>Instead of </p>\n\n<pre><code>return Json(new { data = aActivity }); \n</code></pre>\n\n<p>just do </p>\n\n<pre><code>return Json(aActivity)\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 7610106, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/65270b4dce6e1acfb42736a2d4d211ed?s=128&d=identicon&r=PG&f=1", "display_name": "LavsTo", "link": "https://stackoverflow.com/users/7610106/lavsto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 56978307, "answer_count": 1, "score": 0, "last_activity_date": 1562791165, "creation_date": 1562790841, "question_id": 56978244, "link": "https://stackoverflow.com/questions/56978244/unable-to-access-json-object-properties-values-showing-undefined", "title": "Unable to access Json object properties / values - showing undefined", "body": "<p>I have a table where I am attempting to get values from a clicked row onto a modal box. My data is being returned to the view, but I have issues accessing the property values of my object.   </p>\n\n<p>This is my currency code<br>\nScript</p>\n\n<pre><code>$('.item-list tr td').click(function () {\n    var clickedRow = $(this).closest(\"tr\").find('td:eq(5)').text();\n\n    $.ajax({\n        \"url\": \"/ActivityType/Details\",\n        \"type\": \"POST\",\n        \"dataType\": \"JSON\",\n        \"data\": { aActivityID: clickedRow },\n        \"success\": function (data) {\n            //var thisData = JSON.parse(data);\n            console.log(data);\n\n            console.log(data.activityName);                \n            console.log(data[\"activityName\"]);\n            console.log(data['activityName']);\n\n            document.getElementById(\"ActivityName\").value = data[0].activityName;\n            showAjaxModal();\n        }\n    });\n});\n</code></pre>\n\n<p>Controller</p>\n\n<pre><code>public IActionResult Details(System.Guid aActivityID)\n    {\n        if (aActivityID != System.Guid.Empty)\n        {\n            t_activitytype aActivity = new t_activitytype();\n            aActivity = db.t_activitytype.Where(a =&gt; a.Guid == aActivityID).First();\n\n            return Json(new { data = aActivity });\n        }\n        return View();\n    }\n</code></pre>\n\n<p><code>console.log(data);</code> shows my object with its property values\n<a href=\"https://i.stack.imgur.com/8tOw8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8tOw8.png\" alt=\"enter image description here\"></a></p>\n\n<p>trying to access the properties at this point returns 'undefined' for the following lines</p>\n\n<p><code>console.log(data.activityName);\n console.log(data[\"activityName\"]);\n console.log(data['activityName']);</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/StZ0a.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/StZ0a.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["javascript", "php", "ajax", "search", "prepared-statement"], "comments": [{"owner": {"reputation": 21453, "user_id": 1839439, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/agMKZ.png?s=128&g=1", "display_name": "Dharman", "link": "https://stackoverflow.com/users/1839439/dharman"}, "edited": false, "score": 0, "creation_date": 1562791058, "post_id": 56978230, "comment_id": 100492587, "body": "This if statement looks very smelly. You could avoid this by enabling mysqli excpetions. <a href=\"https://stackoverflow.com/a/22662582/1839439\">How to get the error message in MySQLi?</a>"}, {"owner": {"reputation": 151, "user_id": 9058997, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/40101592a71ceb67ef69d1a857028ed5?s=128&d=identicon&r=PG&f=1", "display_name": "Jakob", "link": "https://stackoverflow.com/users/9058997/jakob"}, "reply_to_user": {"reputation": 21453, "user_id": 1839439, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/agMKZ.png?s=128&g=1", "display_name": "Dharman", "link": "https://stackoverflow.com/users/1839439/dharman"}, "edited": false, "score": 0, "creation_date": 1562791205, "post_id": 56978230, "comment_id": 100492652, "body": "thanks for your comment. I will have a look."}, {"owner": {"reputation": 21453, "user_id": 1839439, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/agMKZ.png?s=128&g=1", "display_name": "Dharman", "link": "https://stackoverflow.com/users/1839439/dharman"}, "edited": false, "score": 2, "creation_date": 1562791445, "post_id": 56978230, "comment_id": 100492768, "body": "You look for <code>rowData.name</code> &amp; <code>rowData.link</code> in your JSON, but your PHP outputs <code>first_name</code> &amp; <code>url_user</code>. Why is that?"}], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 9058997, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/40101592a71ceb67ef69d1a857028ed5?s=128&d=identicon&r=PG&f=1", "display_name": "Jakob", "link": "https://stackoverflow.com/users/9058997/jakob"}, "edited": false, "score": 0, "creation_date": 1562857863, "post_id": 56978535, "comment_id": 100519128, "body": "thank you very much! The alert now returns the right data; however it is not displayed in the corresponding div... the output is still &quot;undefined&quot;"}, {"owner": {"reputation": 151, "user_id": 9058997, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/40101592a71ceb67ef69d1a857028ed5?s=128&d=identicon&r=PG&f=1", "display_name": "Jakob", "link": "https://stackoverflow.com/users/9058997/jakob"}, "edited": false, "score": 0, "creation_date": 1562858517, "post_id": 56978535, "comment_id": 100519542, "body": "Even though I edited the javascript:                      // name holder                 var first_name = document.createElement(&quot;span&quot;);                 first_name.innerHTML = rowData.first_name;                  var url_user = document.createElement(&quot;span&quot;);                 url_user.innerHTML = rowData.url_user;                  wrap.appendChild(first_name);                 wrap.appendChild(url_user);                  resultContainer.appendChild(wrap);"}], "tags": [], "owner": {"reputation": 21453, "user_id": 1839439, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/agMKZ.png?s=128&g=1", "display_name": "Dharman", "link": "https://stackoverflow.com/users/1839439/dharman"}, "is_accepted": true, "score": 1, "last_activity_date": 1562792286, "creation_date": 1562792286, "answer_id": 56978535, "question_id": 56978230, "link": "https://stackoverflow.com/questions/56978230/live-search-returns-undefined-even-though-the-json-array-contains-objects/56978535#56978535", "title": "Live search returns &quot;undefined&quot; even though the JSON array contains &quot;objects&quot;", "body": "<p>PHP does not return object. When you <code>alert</code> the JSON, the variable <code>json</code> is an object. Your undefined output comes from the lines:</p>\n\n<pre><code>// name holder\nvar name = document.createElement(\"span\");\nname.innerHTML = rowData.name;\n\nvar link = document.createElement(\"span\");\nlink.innerHTML = rowData.link;\n</code></pre>\n\n<p>Your PHP returns an array of objects with attributes <code>first_name</code> &amp; <code>url_user</code>. You do not change them anywhere in between, so <code>name</code> &amp; <code>link</code> are undefined. </p>\n\n<p>Additionally, your PHP is too bloated, and you can make it simpler like this for example:</p>\n\n<pre><code>&lt;?php\n\n// put this line inside the db.php before making the mysqli connection\nmysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);\nrequire 'db.php';\nsession_start();\n\n$username = $_GET['username_search'];\n$startFrom = $_GET['startFrom'];\n\n$username = trim(htmlspecialchars($username)); // &lt;- don't do this, it hurts your data\n$startFrom = filter_var($startFrom, FILTER_VALIDATE_INT);\n\n// make username search friendly\n$like = '%' . strtolower($username) . '%'; // search for the username, case-insensitive\n$statement = $mysqli-&gt;prepare('\n    SELECT first_name, url_user FROM user \n    WHERE lower(first_name) LIKE ? \n    ORDER BY INSTR(first_name, ?), first_name\n    LIMIT 6 OFFSET ?\n');\n\n$statement-&gt;bind_param('ssi', $like, $username, $startFrom);\n$statement-&gt;execute();\n$array = $statement-&gt;get_result()-&gt;fetch_all();\necho json_encode($array);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 151, "user_id": 9058997, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/40101592a71ceb67ef69d1a857028ed5?s=128&d=identicon&r=PG&f=1", "display_name": "Jakob", "link": "https://stackoverflow.com/users/9058997/jakob"}, "is_accepted": false, "score": 0, "last_activity_date": 1562861352, "creation_date": 1562861352, "answer_id": 56993330, "question_id": 56978230, "link": "https://stackoverflow.com/questions/56978230/live-search-returns-undefined-even-though-the-json-array-contains-objects/56993330#56993330", "title": "Live search returns &quot;undefined&quot; even though the JSON array contains &quot;objects&quot;", "body": "<pre><code>&lt;input type=\"text\" name=\"username_search\" id=\"textbox\" /&gt;\n&lt;div id=\"result\"&gt;&lt;/div&gt;\n\n&lt;!-- Script for ajax get request for the live search --&gt;\n&lt;script type=\"text/javascript\"&gt;\n\n    var textBox = document.getElementById('textbox'),\n        resultContainer = document.getElementById('result')\n\n    // keep this global to abort it if already a request is running even textbox is upated\n    var ajax = null;\n    var loadedUsers = 0; // number of users shown in the results\n\n    textBox.onkeyup = function() {\n        // \"this\" refers to the textbox\n        var val = this.value;\n\n        // trim - remove spaces in the begining and the end\n        val = val.replace(/^\\s|\\s+$/, \"\");\n\n        // check if the value is not empty\n        if (val !== \"\") {\n            // search for data\n            searchForData(val);\n        } else {\n            // clear the result content\n            clearResult();\n        }\n    }\n\n\n    function searchForData(value, isLoadMoreMode) {\n        // abort if ajax request is already there\n        if (ajax &amp;&amp; typeof ajax.abort === 'function') {\n            ajax.abort();\n        }\n\n        // nocleaning result is set to true on load more mode\n        if (isLoadMoreMode !== true) {\n            clearResult();\n        }\n\n        // create the ajax object\n        ajax = new XMLHttpRequest();\n        // the function to execute on ready state is changed\n        ajax.onreadystatechange = function() {\n            if (this.readyState === 4 &amp;&amp; this.status === 200) {\n                try {\n                    var json = JSON.parse(this.responseText)\n                } catch (e) {\n                    noUsers();\n                    return;\n                }\n\n                if (json.length === 0) {\n                    if (isLoadMoreMode) {\n                        alert('No more to load');\n                    } else {\n                        noUsers();\n                    }\n                } else {\n                    showUsers(json);\n                }\n\n\n            }\n        }\n        // open the connection\n        ajax.open('GET', 'live_search.php?username_search=' + value + '&amp;startFrom=' + loadedUsers , true);\n        // send\n        ajax.send();\n    }\n\n    function showUsers(data) {\n        // the function to create a row\n        function createRow(rowData) {\n            // creating the wrap\n            var wrap = document.createElement(\"div\");\n            // add a class name\n            wrap.className = 'row'\n\n            // name holder\n            var first_name = document.createElement(\"span\");\n            first_name.innerHTML = rowData[0];\n\n            var url_user = document.createElement(\"span\");\n            url_user.innerHTML = rowData[1];\n\n            wrap.appendChild(first_name);\n            wrap.appendChild(url_user);\n\n            // append wrap into result container\n            resultContainer.appendChild(wrap);\n        }\n\n        // loop through the data and call createRow function\n        for (var i = 0, len = data.length; i &lt; len; i++) {\n            // get each data\n            var userData = data[i];\n            // create the row (see above function)\n            createRow(userData);\n        }\n\n        //  create load more button\n        var loadMoreButton = document.createElement(\"span\");\n        loadMoreButton.innerHTML = \"Load More\";\n        // add onclick event to it.\n        loadMoreButton.onclick = function() {\n            // searchForData() function is called in loadMoreMode\n            searchForData(textBox.value, true);\n            // remove loadmorebutton\n            this.parentElement.removeChild(this);\n        }\n        // append loadMoreButton to result container\n        resultContainer.appendChild(loadMoreButton);\n\n        // increase the user count\n        loadedUsers += len;\n    }\n\n    function clearResult() {\n        // clean the result &lt;div&gt;\n        resultContainer.innerHTML = \"\";\n        // make loaded users to 0\n        loadedUsers = 0;\n    }\n\n    function noUsers() {\n        resultContainer.innerHTML = \"Sorry, no user found\";\n    }\n\n\n&lt;/script&gt;\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>the php script</p>\n</blockquote>\n\n<pre><code>    &lt;?php\n\nrequire 'db.php';\nsession_start();\n\n$username = $_GET['username_search'];\n$startFrom = $_GET['startFrom'];\n\n$username = trim(htmlspecialchars($username)); // &lt;- don't do this, it hurts your data\n$startFrom = filter_var($startFrom, FILTER_VALIDATE_INT);\n\n// make username search friendly\n$like = '%' . strtolower($username) . '%'; // search for the username, case-insensitive\n$statement = $mysqli-&gt;prepare('\n    SELECT first_name, url_user FROM user \n    WHERE lower(first_name) LIKE ? \n    ORDER BY INSTR(first_name, ?), first_name\n    LIMIT 6 OFFSET ?\n');\n\n$statement-&gt;bind_param('ssi', $like, $username, $startFrom);\n$statement-&gt;execute();\n$array = $statement-&gt;get_result()-&gt;fetch_all();\necho json_encode($array);\n</code></pre>\n\n<blockquote>\n  <p>Thanks to @Dharman</p>\n</blockquote>\n"}], "owner": {"reputation": 151, "user_id": 9058997, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/40101592a71ceb67ef69d1a857028ed5?s=128&d=identicon&r=PG&f=1", "display_name": "Jakob", "link": "https://stackoverflow.com/users/9058997/jakob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 56978535, "answer_count": 2, "score": 0, "last_activity_date": 1562861352, "creation_date": 1562790785, "last_edit_date": 1562791312, "question_id": 56978230, "link": "https://stackoverflow.com/questions/56978230/live-search-returns-undefined-even-though-the-json-array-contains-objects", "title": "Live search returns &quot;undefined&quot; even though the JSON array contains &quot;objects&quot;", "body": "<p>I am facing issues retrieving real-time user data via AJAX request from MySQL database. Currently the PHP script (\"live_search.php\") only returns the value \"object\" and hence the variables print \"undefined\".</p>\n\n<p>This is the result:\n<a href=\"https://i.stack.imgur.com/2Jlwj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2Jlwj.png\" alt=\"/Users/Jakob/Desktop/Screenshot\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/LCtpi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LCtpi.png\" alt=\"enter image description here\"></a></p>\n\n<p>I guess the issue is somewhere in the PHP script.  </p>\n\n<pre><code>&lt;input type=\"text\" name=\"username_search\" id=\"textbox\" /&gt;\n&lt;div id=\"result\"&gt;&lt;/div&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n\n        var textBox = document.getElementById('textbox'),\n            resultContainer = document.getElementById('result')\n\n        // keep this global to abort it if already a request is running even textbox is upated\n        var ajax = null;\n        var loadedUsers = 0; // number of users shown in the results\n\n        textBox.onkeyup = function() {\n            // \"this\" refers to the textbox\n            var val = this.value;\n\n            // trim - remove spaces in the begining and the end\n            val = val.replace(/^\\s|\\s+$/, \"\");\n\n            // check if the value is not empty\n            if (val !== \"\") {\n                // search for data\n                searchForData(val);\n            } else {\n                // clear the result content\n                clearResult();\n            }\n        }\n\n\n        function searchForData(value, isLoadMoreMode) {\n            // abort if ajax request is already there\n            if (ajax &amp;&amp; typeof ajax.abort === 'function') {\n                ajax.abort();\n            }\n\n            // nocleaning result is set to true on load more mode\n            if (isLoadMoreMode !== true) {\n                clearResult();\n            }\n\n            // create the ajax object\n            ajax = new XMLHttpRequest();\n            // the function to execute on ready state is changed\n            ajax.onreadystatechange = function() {\n                if (this.readyState === 4 &amp;&amp; this.status === 200) {\n                    try {\n                        var json = JSON.parse(this.responseText)\n                        window.alert(json);\n                    } catch (e) {\n                        noUsers();\n                        return;\n                    }\n\n                    if (json.length === 0) {\n                        if (isLoadMoreMode) {\n                            alert('No more to load');\n                        } else {\n                            noUsers();\n                        }\n                    } else {\n                        showUsers(json);\n                    }\n\n                }\n            }\n            // open the connection\n            ajax.open('GET', 'live_search.php?username_search=' + value + '&amp;startFrom=' + loadedUsers , true);\n            // send\n            ajax.send();\n        }\n\n        function showUsers(data) {\n            // the function to create a row\n            function createRow(rowData) {\n                // creating the wrap\n                var wrap = document.createElement(\"div\");\n                // add a class name\n                wrap.className = 'row'\n\n                // name holder\n                var name = document.createElement(\"span\");\n                name.innerHTML = rowData.name;\n\n                var link = document.createElement(\"span\");\n                link.innerHTML = rowData.link;\n\n                wrap.appendChild(name);\n                wrap.appendChild(link);\n\n                // append wrap into result container\n                resultContainer.appendChild(wrap);\n            }\n\n            // loop through the data\n            for (var i = 0, len = data.length; i &lt; len; i++) {\n                // get each data\n                var userData = data[i];\n                // create the row (see above function)\n                createRow(userData);\n            }\n\n            //  create load more button\n            var loadMoreButton = document.createElement(\"span\");\n            loadMoreButton.innerHTML = \"Load More\";\n            // add onclick event to it.\n            loadMoreButton.onclick = function() {\n                // searchForData() function is called in loadMoreMode\n                searchForData(textBox.value, true);\n                // remove loadmorebutton\n                this.parentElement.removeChild(this);\n            }\n            // append loadMoreButton to result container\n            resultContainer.appendChild(loadMoreButton);\n\n            // increase the user count\n            loadedUsers += len;\n        }\n\n        function clearResult() {\n            // clean the result &lt;div&gt;\n            resultContainer.innerHTML = \"\";\n            // make loaded users to 0\n            loadedUsers = 0;\n        }\n\n        function noUsers() {\n            resultContainer.innerHTML = \"No Users\";\n        }\n\n    &lt;/script&gt;\n</code></pre>\n\n<p>//php script </p>\n\n<pre><code>&lt;?php\nrequire 'db.php';\nsession_start();\n\n$username = $_GET['username_search'];\n$startFrom = $_GET['startFrom'];\n\n$username = trim(htmlspecialchars($username));\n$startFrom = filter_var($startFrom, FILTER_VALIDATE_INT);\n\n// make username search friendly\n$like = '%' . strtolower($username) . '%'; // search for the username, case-insensitive\n$statement = $mysqli -&gt; prepare('\n    SELECT first_name, url_user FROM user \n    WHERE lower(first_name) LIKE ? \n    ORDER BY INSTR(first_name, ?), first_name\n    LIMIT 6 OFFSET ?\n');\n\nif (\n    // $mysqli -&gt; prepare returns false on failure, stmt object on success\n    $statement &amp;&amp;\n    // bind_param returns false on failure, true on success\n    $statement -&gt; bind_param('ssi', $like, $username, $startFrom ) &amp;&amp;\n    // execute returns false on failure, true on success\n    $statement -&gt; execute() &amp;&amp;\n    // same happens in store_result\n    $statement -&gt; store_result() &amp;&amp;\n    // same happens here\n    $statement -&gt; bind_result($first_name, $url_user)\n) {\n    // I'm in! everything was successful.\n\n    // new array to store data\n    $array = [];\n\n\n    while ($statement -&gt; fetch()) {\n        $array[] = [\n            'first_name' =&gt; $first_name,\n            'url_user' =&gt; $url_user\n        ];\n    }\n\n    echo json_encode($array);\n    exit();\n\n\n}\n</code></pre>\n\n<p>The expected result is to have a live search which returns user data in real time. In addition, I am aiming for making the row a link to the respective user (given the url_link). The load more button is secondary and not too important.</p>\n"}, {"tags": ["javascript", "d3.js"], "comments": [{"owner": {"reputation": 2869, "user_id": 3602436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z3ibA.png?s=128&g=1", "display_name": "EDToaster", "link": "https://stackoverflow.com/users/3602436/edtoaster"}, "edited": false, "score": 0, "creation_date": 1562790815, "post_id": 56978213, "comment_id": 100492503, "body": "Each function within your code should do one thing, and do it well. If you put all your code within a callback function, you&#39;ll soon run into issues where you have too many nested call backs"}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 11632579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebe0c7f5eb76bf860762775f633bdb80?s=128&d=identicon&r=PG&f=1", "display_name": "J. Hurley", "link": "https://stackoverflow.com/users/11632579/j-hurley"}, "edited": false, "score": 0, "creation_date": 1563294088, "post_id": 56980279, "comment_id": 100648649, "body": "Does this mean that I can create scales with ranges along with axes generators that call those scales outside the <code>d3.csv()</code> function and then once the data is parsed go into the <code>d3.csv()</code> function and add the domains and call the axes generators? I definitely see how that would allow for more tasks to run in parallel."}, {"owner": {"reputation": 90540, "user_id": 5768908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wf0PS.jpg?s=128&g=1", "display_name": "Gerardo Furtado", "link": "https://stackoverflow.com/users/5768908/gerardo-furtado"}, "reply_to_user": {"reputation": 89, "user_id": 11632579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebe0c7f5eb76bf860762775f633bdb80?s=128&d=identicon&r=PG&f=1", "display_name": "J. Hurley", "link": "https://stackoverflow.com/users/11632579/j-hurley"}, "edited": false, "score": 0, "creation_date": 1563320260, "post_id": 56980279, "comment_id": 100658173, "body": "Yes, you can. This is what we do in almost all D3 codes."}], "tags": [], "owner": {"reputation": 90540, "user_id": 5768908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wf0PS.jpg?s=128&g=1", "display_name": "Gerardo Furtado", "link": "https://stackoverflow.com/users/5768908/gerardo-furtado"}, "is_accepted": true, "score": 1, "last_activity_date": 1562821722, "last_edit_date": 1562821722, "creation_date": 1562805948, "answer_id": 56980279, "question_id": 56978213, "link": "https://stackoverflow.com/questions/56978213/is-there-an-issue-with-putting-all-of-my-code-in-the-argument-for-d3-csv/56980279#56980279", "title": "Is there an issue with putting all of my code in the argument for d3.csv()?", "body": "<p><sub>Note: Since you're asking about the callback of <code>d3.csv</code> I'm assuming you're using D3 v4 or below, because D3 v5 uses the <code>then</code> method of a promise. However, the rationale is the same.</sub></p>\n\n<hr>\n\n<p>The most important information is that <code>d3.csv</code>, as all other D3 XHR methods, is an <strong><em>asynchronous function</em></strong>. That means that everything inside the callback runs only after the CSV was downloaded and parsed.</p>\n\n<pre><code>//Outside the callback\n//Code here runs immediately\n\nd3.csv(\"example.csv\", (data) =&gt; {\n    //Inside the callback\n    //Code here runs only after the CSV was downloaded and parsed\n});\n\n//Outside the callback\n//Even if these lines come after d3.csv, code here runs before the code inside the callback\n</code></pre>\n\n<p>By the way, that explains your initial complaint (<em>\"... I have recently been encountering issues with not being able to access variables inside the <code>d3.csv()</code> function</em>\"). <a href=\"https://stackoverflow.com/a/14220323/5768908\">This answer</a> is a good read on that subject.</p>\n\n<p>With that in mind we have to optimise the code in such a way that things that don't depend on the data can be created/set immediately, because if we put them inside the callback we'll lose time without any good reason.</p>\n\n<p>In a nutshell, you can put outside the callback things such as (but not limited to):</p>\n\n<ul>\n<li>Selecting/creating the SVG, canvas or HTML containers</li>\n<li>Scales (with ranges)</li>\n<li>Axes generators</li>\n<li>Line generators</li>\n<li>Area generators</li>\n<li>Stack generators</li>\n<li>Pie generators</li>\n<li>Histogram generators</li>\n<li>Map projections</li>\n<li>Hierarchy layouts</li>\n<li>Formats (like time formats)</li>\n<li>Force simulators</li>\n<li>Drag behaviours</li>\n<li>Zoom Behaviours</li>\n</ul>\n\n<p>All those things don't depend on any data. For some of them (like the line generator, the area generator, the stack generator etc...) you'll pass the data after you have it.</p>\n\n<p>Then, inside the callback, you put everything that depends on the data, such as (but not limited to):</p>\n\n<ul>\n<li>Update, enter and exit selections</li>\n<li>Scale's domains</li>\n<li>Calling axes generators</li>\n<li>Setting simulation's nodes and links</li>\n<li>Nests</li>\n<li>Passing the data to line generators, area generators, stack generators etc...</li>\n<li>Transitions (that depend on the data)</li>\n<li>Event listeners (that depend on the data)</li>\n</ul>\n\n<p>As you can see, if you put <strong>eveything</strong> inside the callback you'll have a bunch of methods that could run immediately but, instead of that, they are just sitting there unnecessarily waiting for the data to be downloaded. </p>\n"}], "owner": {"reputation": 89, "user_id": 11632579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebe0c7f5eb76bf860762775f633bdb80?s=128&d=identicon&r=PG&f=1", "display_name": "J. Hurley", "link": "https://stackoverflow.com/users/11632579/j-hurley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 56980279, "answer_count": 1, "score": 1, "last_activity_date": 1562821722, "creation_date": 1562790682, "last_edit_date": 1562806322, "question_id": 56978213, "link": "https://stackoverflow.com/questions/56978213/is-there-an-issue-with-putting-all-of-my-code-in-the-argument-for-d3-csv", "title": "Is there an issue with putting all of my code in the argument for d3.csv()?", "body": "<p>I am learning d3.js and I have recently been encountering issues with not being able to access variables inside the <code>d3.csv()</code> function. I have just been initializing my variables at the beginning of my program to just make all my variables global. </p>\n\n<p>This made me wonder if there is an issue if I were to just put all my code inside the <code>d3.csv</code> function, removing the need to even initialize my variables at the beginning of my code so it would look like:</p>\n\n<pre><code>d3.csv(data.csv, (data)=&gt;{\n    all of my code\n});\n</code></pre>\n\n<p>Is there a downside to this (assuming I'm only using one CSV file) or is there some benefit to keeping code that doesn't need the data outside of the <code>d3.csv</code> method?</p>\n"}, {"tags": ["javascript", "three.js", "html5-canvas", "textures", "sprite"], "answers": [{"comments": [{"owner": {"reputation": 19260, "user_id": 1727392, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/KP9Ia.jpg?s=128&g=1", "display_name": "duhaime", "link": "https://stackoverflow.com/users/1727392/duhaime"}, "edited": false, "score": 0, "creation_date": 1562847056, "post_id": 56978696, "comment_id": 100512307, "body": "Thanks @Marquizzo! This is very helpful. I may look into the custom mipmap business afterall..."}, {"owner": {"reputation": 16675, "user_id": 2608515, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/N7ZoP.jpg?s=128&g=1", "display_name": "Marquizzo", "link": "https://stackoverflow.com/users/2608515/marquizzo"}, "reply_to_user": {"reputation": 19260, "user_id": 1727392, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/KP9Ia.jpg?s=128&g=1", "display_name": "duhaime", "link": "https://stackoverflow.com/users/1727392/duhaime"}, "edited": false, "score": 0, "creation_date": 1562957516, "post_id": 56978696, "comment_id": 100557591, "body": "Woo-hoo, I upvoted your question to be your 10,000th reputation point. Congrats!"}, {"owner": {"reputation": 19260, "user_id": 1727392, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/KP9Ia.jpg?s=128&g=1", "display_name": "duhaime", "link": "https://stackoverflow.com/users/1727392/duhaime"}, "edited": false, "score": 0, "creation_date": 1562958244, "post_id": 56978696, "comment_id": 100557827, "body": "Yeehaw! Thanks @Marquizzo! I bet you&#39;ll beat me to 100,000! :)"}, {"owner": {"reputation": 16675, "user_id": 2608515, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/N7ZoP.jpg?s=128&g=1", "display_name": "Marquizzo", "link": "https://stackoverflow.com/users/2608515/marquizzo"}, "reply_to_user": {"reputation": 19260, "user_id": 1727392, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/KP9Ia.jpg?s=128&g=1", "display_name": "duhaime", "link": "https://stackoverflow.com/users/1727392/duhaime"}, "edited": false, "score": 0, "creation_date": 1562962308, "post_id": 56978696, "comment_id": 100559104, "body": "Haha! Ok, you&#39;re on!"}], "tags": [], "owner": {"reputation": 16675, "user_id": 2608515, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/N7ZoP.jpg?s=128&g=1", "display_name": "Marquizzo", "link": "https://stackoverflow.com/users/2608515/marquizzo"}, "is_accepted": true, "score": 4, "last_activity_date": 1562801995, "last_edit_date": 1562801995, "creation_date": 1562793051, "answer_id": 56978696, "question_id": 56978199, "link": "https://stackoverflow.com/questions/56978199/three-js-distant-objects-are-faint/56978696#56978696", "title": "Three.js: Distant objects are faint", "body": "<p>This is happening because of the mipmapping that's being applied to your sprite texture. When the letters are mipmapped to smaller resolutions, the black pixels of your text are getting blended to grey.</p>\n\n<p>You could avoid using the mipmapped texture by changing the <code>.minFilter</code> property of your texture after declaring it, which is what I did in the code snippet below:</p>\n\n<p><code>tex.minFilter = THREE.LinearFilter;</code></p>\n\n<p>I think the <a href=\"https://threejs.org/docs/index.html#api/en/constants/Textures\" rel=\"nofollow noreferrer\">only two options you have</a> for minification filters without mipmapping are <code>LinearFilter</code> and <code>NearestFilter</code>. Keep in mind that disabling mipmapping may give your textures an aliased look. </p>\n\n<p>Alternatively, you could create your own mipmaps that <em>don't</em> fade to grey in Photoshop, and define them with <a href=\"https://threejs.org/docs/#api/en/textures/Texture.mipmaps\" rel=\"nofollow noreferrer\"><code>texture.mipmaps</code></a>.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>// aliases\r\nvar BA = THREE.BufferAttribute,\r\n    IBA = THREE.InstancedBufferAttribute,\r\n    ARR = Float32Array;\r\n\r\n\r\nfunction Wordmap() {\r\n  // config\r\n  this.wordScalar = 0.0003; // sizes up words\r\n  this.heightScalar = 0.002; // controls mountain height\r\n  this.sep = 0.9; // separation between characters\r\n  this.maxWords = 1000000; // max number of words to draw\r\n  this.background = '#fff'; // background color\r\n  this.color = '#000'; // text color\r\n  // static\r\n  this.size = 64; // size of each character on canvas\r\n  // state\r\n  this.state = {\r\n    layout: 'grid', // name of the currently active layout\r\n    flying: false, // bool indicating whether we're flying camera\r\n    clock: null, // clock to measure how long we've been flying camera\r\n    transitioning: false, // bool indicating whether layout is transitioning\r\n    transitionQueued: false, // bool indicating whether to run another layout transition\r\n  }\r\n  // data\r\n  this.data = {\r\n    input: null,\r\n    words: [],\r\n    layouts: {},\r\n    heightmap: {},\r\n    characters: {},\r\n  }\r\n  // initialize\r\n  this.init();\r\n}\r\n\r\n\r\n/**\r\n* Scene\r\n**/\r\n\r\n\r\nWordmap.prototype.createScene = function() {\r\n  // generate a scene object\r\n  var scene = new THREE.Scene();\r\n\r\n  // generate a camera\r\n  var aspectRatio = window.innerWidth / window.innerHeight;\r\n  var camera = new THREE.PerspectiveCamera(75, aspectRatio, 0.001, 10);\r\n\r\n  // generate a renderer\r\n  var renderer = new THREE.WebGLRenderer({antialias: true, alpha: true});\r\n  renderer.sortObjects = false; // make scene.add order draw order\r\n  renderer.setPixelRatio(window.devicePixelRatio);\r\n  renderer.setSize(window.innerWidth, window.innerHeight);\r\n  renderer.domElement.id = 'gl-scene';\r\n  document.body.appendChild(renderer.domElement);\r\n\r\n  // generate controls\r\n  var controls = new THREE.TrackballControls(camera, renderer.domElement);\r\n  controls.zoomSpeed = 0.05;\r\n  controls.panSpeed = 0.1;\r\n\r\n  // position the camera\r\n  camera.position.set(0.03, -0.80, 1.3);\r\n  camera.up.set(0.00, 0.32, 0.94);\r\n  camera.quaternion.set({_w: 0.81, _x: 0.58, _y: 0.01, _z: 0.00})\r\n  controls.target.set(0.01, 1.00, 0.24);\r\n  controls.update();\r\n\r\n  // add ?axes=true to url to see axis helpers for global orientation\r\n  if (window.location.search.includes('axes=true')) {\r\n    var axesHelper = new THREE.AxesHelper(5);\r\n    scene.add(axesHelper);\r\n  }\r\n\r\n  // store objects on instance\r\n  this.scene = scene;\r\n  this.camera = camera;\r\n  this.controls = controls;\r\n  this.renderer = renderer;\r\n}\r\n\r\n\r\nWordmap.prototype.render = function() {\r\n  requestAnimationFrame(this.render.bind(this));\r\n  this.renderer.render(this.scene, this.camera);\r\n  this.controls.update();\r\n  if (this.state.transitionQueued) {\r\n    this.state.transitionQueued = false;\r\n    this.updateLayout();\r\n  }\r\n}\r\n\r\n\r\nWordmap.prototype.onWindowResize = function() {\r\n  this.camera.aspect = window.innerWidth / window.innerHeight;\r\n  this.camera.updateProjectionMatrix();\r\n  this.renderer.setSize(window.innerWidth, window.innerHeight);\r\n  this.setPointScale();\r\n}\r\n\r\n\r\n/**\r\n* Character canvas\r\n**/\r\n\r\nWordmap.prototype.setCharacters = function() {\r\n  var canvas = document.createElement('canvas'),\r\n      ctx = canvas.getContext('2d'),\r\n      charToCoords = {},\r\n      yOffset = -0.25, // offset to draw full letters w/ baselines...\r\n      xOffset = 0.05; // offset to draw full letter widths\r\n  canvas.width = this.size * 16; // * 16 because we want 16**2 = 256 letters\r\n  canvas.height = this.size * 16; // must set size before setting font size\r\n  canvas.id = 'letter-canvas';\r\n  ctx.font = this.size + 'px Monospace';\r\n  // draw the letters on the canvas\r\n  ctx.fillStyle = this.color;\r\n  for (var x=0; x&lt;16; x++) {\r\n    for (var y=0; y&lt;16; y++) {\r\n      var char = String.fromCharCode((x*16) + y);\r\n      charToCoords[char] = {x: x, y: y};\r\n      ctx.fillText(char, (x+xOffset)*this.size, yOffset*this.size+(y+1)*this.size);\r\n    }\r\n  }\r\n  // build a three canvas with the canvas\r\n  var tex = new THREE.Texture(canvas);\r\n  tex.flipY = false;\r\n  tex.minFilter = THREE.LinearFilter;\r\n  tex.needsUpdate = true;\r\n  // store the character map on the instance\r\n  this.data.characters = {\r\n    map: charToCoords,\r\n    tex: tex,\r\n  }\r\n}\r\n\r\n\r\n/**\r\n* Heightmap canvas\r\n**/\r\n\r\nWordmap.prototype.getHeightmap = function(cb) {\r\n  var img = new Image();\r\n  img.crossOrigin = 'Anonymous';\r\n  img.onload = function() {\r\n    var canvas = document.createElement('canvas'),\r\n        ctx = canvas.getContext('2d');\r\n    canvas.width = img.width;\r\n    canvas.height = img.height;\r\n    ctx.drawImage(img, 0, 0);\r\n    cb(ctx.getImageData(0,0, img.width, img.height));\r\n  }\r\n  img.src = 'https://duhaime.s3.amazonaws.com/blog/visualizations/wordmap/heightmap.jpg';\r\n}\r\n\r\n\r\n/**\r\n* Geometry\r\n**/\r\n\r\nWordmap.prototype.addWords = function() {\r\n  var attrs = this.getWordAttrs(),\r\n      geometry = new THREE.InstancedBufferGeometry();\r\n  geometry.addAttribute('uv', new BA(new ARR([0,0]), 2, true, 1));\r\n  geometry.addAttribute('position', new BA(new ARR([0,0,0]), 3, true, 1));\r\n  geometry.addAttribute('translation', new IBA(attrs.translations, 3, true, 1));\r\n  geometry.addAttribute('target', new IBA(attrs.translations, 3, true, 1));\r\n  geometry.addAttribute('texOffset', new IBA(attrs.texOffsets, 2, true, 1));\r\n  // build the mesh\r\n  this.setShaderMaterial();\r\n  var mesh = new THREE.Points(geometry, this.material);\r\n  mesh.frustumCulled = false;\r\n  mesh.name = 'words';\r\n  this.mesh = mesh;\r\n  this.scene.add(mesh);\r\n}\r\n\r\n\r\nWordmap.prototype.getWordAttrs = function() {\r\n  var n = 0, // total number of characters among all words\r\n      layout = this.data.layouts[this.state.layout],\r\n      words = layout.words,\r\n      positions = layout.positions;\r\n  for (var i=0; i&lt;words.length; i++) n += words[i].length;\r\n  // build up word attributes\r\n  var attrs = {\r\n    translations: new Float32Array(n * 3),\r\n    texOffsets: new Float32Array(n * 2),\r\n  }\r\n  var iters = {\r\n    translationIter: 0,\r\n    texOffsetIter: 0,\r\n  }\r\n  // assume each word has x y coords assigned\r\n  for (var i=0; i&lt;words.length; i++) {\r\n    var word = words[i],\r\n        x = positions[i][0],\r\n        y = positions[i][1],\r\n        z = positions[i][2] || this.getHeightAt(x, y);\r\n    for (var c=0; c&lt;word.length; c++) {\r\n      var offsets = this.data.characters.map[word[c]] || this.data.characters.map['?'];\r\n      attrs.translations[iters.translationIter++] = x + (this.wordScalar * this.sep * c);\r\n      attrs.translations[iters.translationIter++] = y;\r\n      attrs.translations[iters.translationIter++] = z;\r\n      attrs.texOffsets[iters.texOffsetIter++] = offsets.x;\r\n      attrs.texOffsets[iters.texOffsetIter++] = offsets.y;\r\n    }\r\n  }\r\n  return attrs;\r\n}\r\n\r\n\r\nWordmap.prototype.setShaderMaterial = function() {\r\n  this.material = new THREE.RawShaderMaterial({\r\n    vertexShader: document.getElementById('vertex-shader').textContent,\r\n    fragmentShader: document.getElementById('fragment-shader').textContent,\r\n    uniforms: {\r\n      pointScale: { type: 'f', value: 0.0, },\r\n      cellSize:   { type: 'f', value: this.size / (this.size * 16), }, // letter size in map\r\n      tex:        { type: 't', value: this.data.characters.tex, },\r\n      color:      { type: 'f', value: this.getColorUniform() },\r\n      transition: { type: 'f', value: 0.0, },\r\n    },\r\n    //transparent: true,\r\n    defines: {\r\n      WORDS: true,\r\n    }\r\n  });\r\n  this.setPointScale();\r\n}\r\n\r\n\r\nWordmap.prototype.getColorUniform = function() {\r\n  return this.color === '#fff' ? 1.0 : 0.0;\r\n}\r\n\r\n\r\nWordmap.prototype.getHeightAt = function(x, y) {\r\n  // because x and y axes are scaled -1:1, rescale 0:1\r\n  x = (x+1)/2;\r\n  y = (y+1)/2;\r\n  var row = Math.floor(y * this.data.heightmap.height),\r\n      col = Math.floor(x * this.data.heightmap.width),\r\n      idx = (row * this.data.heightmap.width * 4) + (col * 4),\r\n      z = (this.data.heightmap.data[idx] + Math.random()) * this.heightScalar;\r\n  return z;\r\n}\r\n\r\n\r\nWordmap.prototype.init = function() {\r\n  this.setCharacters();\r\n  this.setBackgroundColor();\r\n  this.getHeightmap(function(heightMapData) {\r\n    this.data.heightmap = heightMapData;\r\n    get('https://duhaime.s3.amazonaws.com/blog/visualizations/wordmap/wordmap-layouts.json', function(data) {\r\n      this.data.input = data;\r\n      this.parseLayouts();\r\n      this.createScene();\r\n      this.addWords();\r\n      this.render();\r\n      setTimeout(this.flyInCamera.bind(this), 500);\r\n      window.addEventListener('resize', this.onWindowResize.bind(this));\r\n    }.bind(this))\r\n  }.bind(this))\r\n}\r\n\r\n\r\nWordmap.prototype.parseLayouts = function() {\r\n  for (var i=0; i&lt;this.data.input.length; i++) {\r\n    var l = this.data.input[i],\r\n        name = l.name || i,\r\n        words = l.words,\r\n        positions = this.center(l.positions),\r\n        wordToCoords = {};\r\n    for (var j=0; j&lt;words.length; j++) {wordToCoords[words[j]] = positions[j];}\r\n    this.data.layouts[name] = {\r\n      words: words,\r\n      positions: positions,\r\n      wordToCoords: wordToCoords,\r\n    }\r\n    // activate the first layout\r\n    if (i == 0 &amp;&amp; !this.state.layout) this.state.layout = name;\r\n  }\r\n}\r\n\r\n\r\n// center an array of vertex positions -1:1 on each axis\r\nWordmap.prototype.center = function(arr) {\r\n  var max = Number.POSITIVE_INFINITY,\r\n      min = Number.NEGATIVE_INFINITY,\r\n      domX = {min: max, max: min},\r\n      domY = {min: max, max: min},\r\n      domZ = {min: max, max: min};\r\n  // find the min, max of each dimension\r\n  for (var i=0; i&lt;arr.length; i++) {\r\n    var x = arr[i][0],\r\n        y = arr[i][1],\r\n        z = arr[i][2] || 0;\r\n    if (x &lt; domX.min) domX.min = x;\r\n    if (x &gt; domX.max) domX.max = x;\r\n    if (y &lt; domY.min) domY.min = y;\r\n    if (y &gt; domY.max) domY.max = y;\r\n    if (z &lt; domZ.min) domZ.min = z;\r\n    if (z &gt; domZ.max) domZ.max = z;\r\n  }\r\n  var centered = [];\r\n  for (var i=0; i&lt;arr.length; i++) {\r\n    var cx = (((arr[i][0]-domX.min)/(domX.max-domX.min))*2)-1,\r\n        cy = (((arr[i][1]-domY.min)/(domY.max-domY.min))*2)-1,\r\n        cz = (((arr[i][2]-domZ.min)/(domZ.max-domZ.min))*2)-1 || null;\r\n    if (arr[i].length == 3) centered.push([cx, cy, cz]);\r\n    else centered.push([cx, cy]);\r\n  }\r\n  return centered;\r\n}\r\n\r\n\r\nWordmap.prototype.queryWords = function(s) {\r\n  var map = this.data.layouts[this.state.layout].wordToCoords;\r\n  return Object.keys(map).filter(function(w) {\r\n    return w.toLowerCase().indexOf(s.toLowerCase()) &gt; -1;\r\n  });\r\n}\r\n\r\n\r\nWordmap.prototype.updateLayout = function() {\r\n  if (this.state.transitioning) {\r\n    this.state.transitionQueued = true;\r\n    return;\r\n  }\r\n  this.state.transitioning = true;\r\n  this.setPointScale();\r\n  var attrs = this.getWordAttrs();\r\n  this.mesh.geometry.attributes.target.array = attrs.translations;\r\n  this.mesh.geometry.attributes.target.needsUpdate = true;\r\n  TweenLite.to(this.mesh.material.uniforms.transition, 1, {\r\n    value: 1,\r\n    ease: Power4.easeInOut,\r\n    onComplete: function() {\r\n      requestAnimationFrame(function() {\r\n        this.mesh.geometry.attributes.translation.array = attrs.translations;\r\n        this.mesh.geometry.attributes.translation.needsUpdate = true;\r\n        this.mesh.material.uniforms.transition = {type: 'f', value: 0};\r\n        this.state.transitioning = false;\r\n      }.bind(this))\r\n    }.bind(this)\r\n  })\r\n}\r\n\r\n\r\n/**\r\n* User callbacks\r\n**/\r\n\r\nWordmap.prototype.setBackgroundColor = function() {\r\n  document.querySelector('body').style.background = this.background;\r\n}\r\n\r\n\r\nWordmap.prototype.setTextColor = function() {\r\n  this.setCharacters();\r\n  this.mesh.material.uniforms.tex.value = this.data.characters.tex;\r\n  this.mesh.material.uniforms.color.value = this.getColorUniform();\r\n}\r\n\r\n\r\nWordmap.prototype.setPointScale = function() {\r\n  var val = window.devicePixelRatio * window.innerHeight * this.wordScalar;\r\n  this.material.uniforms.pointScale.value = val;\r\n  this.material.uniforms.pointScale.needsUpdate = true;\r\n  this.renderer.setPixelRatio(window.devicePixelRatio);\r\n}\r\n\r\n\r\nWordmap.prototype.flyTo = function(coords) {\r\n  if (this.state.flying) return;\r\n  this.state.flying = true;\r\n  // pull out target coordinates\r\n  var self = this,\r\n      x = coords[0],\r\n      y = coords[1],\r\n      z = coords[2] || self.getHeightAt(coords[0], coords[1]),\r\n      z = z + 0.015,\r\n      // specify animation duration\r\n      duration = 3,\r\n      // create objects to use during flight\r\n      aspectRatio = window.innerWidth / window.innerHeight,\r\n      _camera = new THREE.PerspectiveCamera(75, aspectRatio, 0.001, 10),\r\n      _controls = new THREE.TrackballControls(_camera, self.renderer.domElement),\r\n      q0 = self.camera.quaternion.clone(),\r\n      _up = self.camera.up;\r\n  _camera.position.set(x, y, z);\r\n  _controls.target.set(x, y, z);\r\n  _controls.update();\r\n  TweenLite.to(self.camera.position, duration, {\r\n    x: x,\r\n    y: y,\r\n    z: z,\r\n    onStart: function() {\r\n      self.state.clock = new THREE.Clock();\r\n      self.state.clock.start();\r\n    },\r\n    onUpdate: function() {\r\n      var deg = self.state.clock.getElapsedTime() / duration;\r\n      THREE.Quaternion.slerp(q0, _camera.quaternion, self.camera.quaternion, deg);\r\n    },\r\n    onComplete: function() {\r\n      var q = _camera.quaternion,\r\n          p = _camera.position,\r\n          u = _camera.up,\r\n          c = _controls.target;\r\n      self.camera.position.set(p.x, p.y, p.z);\r\n      self.camera.up.set(u.x, u.y, u.z);\r\n      self.camera.quaternion.set(q.x, q.y, q.z, q.w);\r\n      self.controls.target = new THREE.Vector3(c.x, c.y, c.z-1.0);\r\n      self.controls.update();\r\n      self.state.flying = false;\r\n    },\r\n    ease: Power4.easeInOut,\r\n  });\r\n}\r\n\r\n\r\nWordmap.prototype.flyInCamera = function() {\r\n  TweenLite.to(this.camera.position, 3.5, {\r\n    z: 0.56,\r\n    ease: Power4.easeInOut,\r\n  });\r\n}\r\n\r\n\r\nWordmap.prototype.getWordCoords = function(word) {\r\n  return this.data.layouts[this.state.layout].wordToCoords[word];\r\n}\r\n\r\n/**\r\n* Typeahaed\r\n**/\r\n\r\nfunction Typeahead() {\r\n  var input = document.querySelector('#search'), // query box\r\n      typeahead = document.querySelector('#typeahead'), // typeahead options\r\n      button = document.querySelector('#search-button'); // submit button\r\n\r\n  input.addEventListener('keyup', function(e) {\r\n    clearTypeahead();\r\n    if (e.keyCode == 13 || e.target.value.length &lt; 2) return;\r\n    var matches = wm.queryWords(e.target.value),\r\n        rendered = {}; // store the rendered objects to prevent cased dupes\r\n    for (var i=0; i&lt;Math.min(50, matches.length); i++) {\r\n      if (!(matches[i].toLowerCase().trim() in rendered)) {\r\n        rendered[ matches[i].toLowerCase().trim() ] = true;\r\n        var elem = document.createElement('div');\r\n        elem.textContent = matches[i];\r\n        elem.onclick = function(str, e) {\r\n          input.value = str;\r\n          submit();\r\n        }.bind(this, matches[i]);\r\n        document.querySelector('#typeahead').appendChild(elem);\r\n      }\r\n    }\r\n  })\r\n\r\n  function clearTypeahead(e) {\r\n    typeahead.innerHTML = '';\r\n  }\r\n\r\n  function submit() {\r\n    if (!input.value) return;\r\n    var coords = wm.getWordCoords(input.value);\r\n    if (!coords) {\r\n      var elem = document.querySelector('#no-results');\r\n      elem.style.transform = 'translate(0, 75px)';\r\n      setTimeout(function() {\r\n        elem.style.transform = 'translate(0, 24px)';\r\n      }, 1500);\r\n      return;\r\n    }\r\n    wm.flyTo(coords);\r\n    clearTypeahead();\r\n  }\r\n\r\n  button.addEventListener('click', submit);\r\n  window.addEventListener('click', clearTypeahead);\r\n  input.addEventListener('keydown', function(e) {\r\n    if (e.keyCode == 13) submit();\r\n    else clearTypeahead();\r\n  });\r\n}\r\n\r\n\r\n/**\r\n* Main\r\n**/\r\n\r\nfunction get(url, onSuccess, onErr, onProgress) {\r\n  var xmlhttp = new XMLHttpRequest();\r\n  xmlhttp.onreadystatechange = function() {\r\n    if (xmlhttp.readyState == XMLHttpRequest.DONE) {\r\n      if (xmlhttp.status === 200) {\r\n        if (onSuccess) onSuccess(JSON.parse(xmlhttp.responseText));\r\n      } else {\r\n        if (onErr) onErr(xmlhttp)\r\n      }\r\n    };\r\n  };\r\n  xmlhttp.onprogress = function(e) {\r\n    if (onProgress) onProgress(e);\r\n  };\r\n  xmlhttp.open('GET', url, true);\r\n  xmlhttp.send();\r\n};\r\n\r\n\r\n\r\n// create the gui\r\nwindow.onload = function() {\r\n  wm = new Wordmap();\r\n  typeahead = new Typeahead();\r\n\r\n  // build the gui\r\n  gui = new dat.GUI({hideable: false})\r\n\r\n  gui.add(wm.state, 'layout', ['grid', 'tsne'])\r\n    .name('layout')\r\n    .onFinishChange(wm.updateLayout.bind(wm))\r\n\r\n  gui.add(wm, 'wordScalar', 0.0, 0.001)\r\n    .name('font size')\r\n    .onFinishChange(wm.updateLayout.bind(wm))\r\n\r\n  gui.add(wm, 'heightScalar', 0.0, 0.003)\r\n    .name('mountain')\r\n    .onFinishChange(wm.updateLayout.bind(wm))\r\n\r\n  gui.addColor(wm, 'background')\r\n    .name('background')\r\n    .onChange(wm.setBackgroundColor.bind(wm))\r\n\r\n  gui.add(wm, 'color', ['#fff', '#000'])\r\n    .name('color')\r\n    .onChange(wm.setTextColor.bind(wm))\r\n};</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>html,\r\nbody {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\nbody {\r\n  margin: 0;\r\n  overflow: hidden;\r\n}\r\n\r\nbody::after {\r\n  content: '';\r\n  position: fixed;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  background: linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.2));\r\n}\r\n\r\ncanvas {\r\n  position: relative;\r\n  z-index: 10;\r\n}\r\n\r\nbody .dg.ac {\r\n  z-index: 100;\r\n}\r\n\r\n#letter-canvas {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n}\r\n\r\n#search-container {\r\n  position: absolute;\r\n  top: 23px;\r\n  left: 50%;\r\n  width: 360px;\r\n  margin-left: -180px;\r\n  font-family: courier, monospace;\r\n  z-index: 100;\r\n}\r\n\r\n#search,\r\n#search-button {\r\n  padding: 7px 10px;\r\n  font-size: 16px;\r\n  line-height: 16px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n#search,\r\n#search-button,\r\n#search-button::before {\r\n  border-radius: 3px;\r\n}\r\n\r\n#search {\r\n  border: 1px solid #aaa;\r\n}\r\n\r\n#search-button {\r\n  position: relative;\r\n  opacity: 0.7;\r\n  border: 1px solid #797979;\r\n}\r\n\r\n#search-button::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  background: #fff;\r\n  z-index: -1;\r\n}\r\n\r\n#search,\r\n#typeahead {\r\n  width: 240px;\r\n  font-family: inherit;\r\n}\r\n\r\n#search {\r\n  z-index: 10;\r\n}\r\n\r\n#search-button {\r\n  background: #b4cdde;\r\n  color: #485661;\r\n  padding: 8px 18px;\r\n  font-weight: 600;\r\n  letter-spacing: 0.05em;\r\n  font-family: sans-serif;\r\n  cursor: pointer;\r\n}\r\n\r\n#typeahead {\r\n  background: #fff;\r\n  max-height: 100px;\r\n  overflow: auto;\r\n  box-sizing: border-box;\r\n  border-bottom-left-radius: 3px;\r\n  border-bottom-right-radius: 3px;\r\n}\r\n\r\n.hidden {\r\n  display: none;\r\n}\r\n\r\n.displayed {\r\n  display: inline-block;\r\n}\r\n\r\n#typeahead div {\r\n  margin: 2px 10px;\r\n  cursor: pointer;\r\n  white-space: nowrap;\r\n}\r\n\r\n#typeahead div:hover {\r\n  background: #efefef;\r\n}\r\n\r\n#no-results {\r\n  padding: 6px;\r\n  background: firebrick;\r\n  color: #fff;\r\n  font-size: 1em;\r\n  transform: translate(0, 24px);\r\n  display: block;\r\n  margin: 0 auto;\r\n  width: 107px;\r\n  text-align: center;\r\n  position: absolute;\r\n  left: 50%;\r\n  margin-left: -180px;\r\n  z-index: 90;\r\n  font-family: courier;\r\n  border-radius: 3px;\r\n  transition: transform 0.3s;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div id='no-results'&gt;No Results!&lt;/div&gt;\r\n&lt;div id='search-container'&gt;\r\n  &lt;div&gt;\r\n    &lt;input id='search' value='pythons'&gt;&lt;/input&gt;\r\n    &lt;button id='search-button'&gt;SEARCH&lt;/button&gt;\r\n  &lt;/div&gt;\r\n  &lt;div id='typeahead'&gt;&lt;/div&gt;\r\n&lt;/div&gt;\r\n\r\n&lt;script id='vertex-shader' type='x-shader/x-vertex'&gt;\r\nuniform mat4 projectionMatrix;\r\nuniform mat4 modelViewMatrix;\r\nuniform vec3 cameraPosition;\r\nuniform float pointScale;\r\nuniform float transition;\r\n\r\nattribute vec3 position;\r\nattribute vec3 translation;\r\nattribute vec3 target;\r\nattribute vec2 texOffset;\r\n\r\nvarying vec2 vTexOffset;\r\n\r\nvoid main() {\r\n  // project this particle\r\n  vec3 raw0 = position + translation;\r\n  vec3 raw1 = position + target;\r\n  vec3 raw = mix(raw0, raw1, clamp(transition, 0.0, 1.0));\r\n  vec4 mvPosition = modelViewMatrix * vec4(raw, 1.0);\r\n  gl_Position = projectionMatrix * mvPosition;\r\n\r\n  // make distant points small\r\n  vec4 cam4 = vec4(cameraPosition, 1.0);\r\n  gl_PointSize = (pointScale / -mvPosition.z);\r\n\r\n  vTexOffset = texOffset;\r\n}\r\n&lt;/script&gt;\r\n\r\n&lt;script id='fragment-shader' type='x-shader/x-fragment'&gt;\r\nprecision mediump float;\r\n\r\nuniform sampler2D tex;\r\nuniform vec3 fogColor;\r\nuniform float cellSize;\r\nuniform float fogNear;\r\nuniform float fogFar;\r\nuniform float color;\r\n\r\nvarying vec2 vTexOffset;\r\n\r\nvoid main() {\r\n  #ifdef WORDS\r\n    vec2 uv = vTexOffset + vec2(gl_PointCoord.x, gl_PointCoord.y);\r\n    vec2 scaledUv = uv * vec2(cellSize, cellSize);\r\n    gl_FragColor = texture2D(tex, scaledUv);\r\n    if (gl_FragColor.a &lt; 0.01) discard; // discard non-letter pixels\r\n  #else\r\n    // make point circular\r\n    if (length(gl_PointCoord - vec2(0.5)) &gt; 0.5) discard;\r\n    gl_FragColor = vec4(0.7, 0.7, 0.8, 0.5);\r\n  #endif\r\n}\r\n&lt;/script&gt;\r\n\r\n&lt;script src='https://duhaime.s3.amazonaws.com/blog/visualizations/wordmap/three.min.js'&gt;&lt;/script&gt;\r\n&lt;script src='https://duhaime.s3.amazonaws.com/blog/visualizations/wordmap/trackball-controls.min.js'&gt;&lt;/script&gt;\r\n&lt;script src='https://duhaime.s3.amazonaws.com/blog/visualizations/wordmap/tweenlite.min.js'&gt;&lt;/script&gt;\r\n&lt;script src='https://duhaime.s3.amazonaws.com/blog/visualizations/wordmap/dat.gui.min.js'&gt;&lt;/script&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 19260, "user_id": 1727392, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/KP9Ia.jpg?s=128&g=1", "display_name": "duhaime", "link": "https://stackoverflow.com/users/1727392/duhaime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 56978696, "answer_count": 1, "score": 3, "last_activity_date": 1563680536, "creation_date": 1562790615, "last_edit_date": 1563680536, "question_id": 56978199, "link": "https://stackoverflow.com/questions/56978199/three-js-distant-objects-are-faint", "title": "Three.js: Distant objects are faint", "body": "<p>I'm working on a three.js <a href=\"https://bl.ocks.org/duhaime/86833e101df323189d20bbbac521be9d\" rel=\"nofollow noreferrer\">scene</a> that renders some textured point sprites. Those sprites get their textures from a single <code>uniform</code>, and that uniform is a 2D canvas on which I've drawn the letters of the alphabet:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Ceh9x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ceh9x.png\" alt=\"enter image description here\"></a></p>\n\n<p>While all the letters are rendered on this canvas in black, points in the three.js scene that are far from the camera appear quite faintly in my scene:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>// aliases\r\nvar BA = THREE.BufferAttribute,\r\n    IBA = THREE.InstancedBufferAttribute,\r\n    ARR = Float32Array;\r\n\r\n\r\nfunction Wordmap() {\r\n  // config\r\n  this.wordScalar = 0.0003; // sizes up words\r\n  this.heightScalar = 0.002; // controls mountain height\r\n  this.sep = 0.9; // separation between characters\r\n  this.maxWords = 1000000; // max number of words to draw\r\n  this.background = '#fff'; // background color\r\n  this.color = '#000'; // text color\r\n  // static\r\n  this.size = 64; // size of each character on canvas\r\n  // state\r\n  this.state = {\r\n    layout: 'grid', // name of the currently active layout\r\n    flying: false, // bool indicating whether we're flying camera\r\n    clock: null, // clock to measure how long we've been flying camera\r\n    transitioning: false, // bool indicating whether layout is transitioning\r\n    transitionQueued: false, // bool indicating whether to run another layout transition\r\n  }\r\n  // data\r\n  this.data = {\r\n    input: null,\r\n    words: [],\r\n    layouts: {},\r\n    heightmap: {},\r\n    characters: {},\r\n  }\r\n  // initialize\r\n  this.init();\r\n}\r\n\r\n\r\n/**\r\n* Scene\r\n**/\r\n\r\n\r\nWordmap.prototype.createScene = function() {\r\n  // generate a scene object\r\n  var scene = new THREE.Scene();\r\n\r\n  // generate a camera\r\n  var aspectRatio = window.innerWidth / window.innerHeight;\r\n  var camera = new THREE.PerspectiveCamera(75, aspectRatio, 0.001, 10);\r\n\r\n  // generate a renderer\r\n  var renderer = new THREE.WebGLRenderer({antialias: true, alpha: true});\r\n  renderer.sortObjects = false; // make scene.add order draw order\r\n  renderer.setPixelRatio(window.devicePixelRatio);\r\n  renderer.setSize(window.innerWidth, window.innerHeight);\r\n  renderer.domElement.id = 'gl-scene';\r\n  document.body.appendChild(renderer.domElement);\r\n\r\n  // generate controls\r\n  var controls = new THREE.TrackballControls(camera, renderer.domElement);\r\n  controls.zoomSpeed = 0.05;\r\n  controls.panSpeed = 0.1;\r\n\r\n  // position the camera\r\n  camera.position.set(0.03, -0.80, 1.3);\r\n  camera.up.set(0.00, 0.32, 0.94);\r\n  camera.quaternion.set({_w: 0.81, _x: 0.58, _y: 0.01, _z: 0.00})\r\n  controls.target.set(0.01, 1.00, 0.24);\r\n  controls.update();\r\n\r\n  // add ?axes=true to url to see axis helpers for global orientation\r\n  if (window.location.search.includes('axes=true')) {\r\n    var axesHelper = new THREE.AxesHelper(5);\r\n    scene.add(axesHelper);\r\n  }\r\n\r\n  // store objects on instance\r\n  this.scene = scene;\r\n  this.camera = camera;\r\n  this.controls = controls;\r\n  this.renderer = renderer;\r\n}\r\n\r\n\r\nWordmap.prototype.render = function() {\r\n  requestAnimationFrame(this.render.bind(this));\r\n  this.renderer.render(this.scene, this.camera);\r\n  this.controls.update();\r\n  if (this.state.transitionQueued) {\r\n    this.state.transitionQueued = false;\r\n    this.updateLayout();\r\n  }\r\n}\r\n\r\n\r\nWordmap.prototype.onWindowResize = function() {\r\n  this.camera.aspect = window.innerWidth / window.innerHeight;\r\n  this.camera.updateProjectionMatrix();\r\n  this.renderer.setSize(window.innerWidth, window.innerHeight);\r\n  this.setPointScale();\r\n}\r\n\r\n\r\n/**\r\n* Character canvas\r\n**/\r\n\r\nWordmap.prototype.setCharacters = function() {\r\n  var canvas = document.createElement('canvas'),\r\n      ctx = canvas.getContext('2d'),\r\n      charToCoords = {},\r\n      yOffset = -0.25, // offset to draw full letters w/ baselines...\r\n      xOffset = 0.05; // offset to draw full letter widths\r\n  canvas.width = this.size * 16; // * 16 because we want 16**2 = 256 letters\r\n  canvas.height = this.size * 16; // must set size before setting font size\r\n  canvas.id = 'letter-canvas';\r\n  ctx.font = this.size + 'px Monospace';\r\n  // draw the letters on the canvas\r\n  ctx.fillStyle = this.color;\r\n  for (var x=0; x&lt;16; x++) {\r\n    for (var y=0; y&lt;16; y++) {\r\n      var char = String.fromCharCode((x*16) + y);\r\n      charToCoords[char] = {x: x, y: y};\r\n      ctx.fillText(char, (x+xOffset)*this.size, yOffset*this.size+(y+1)*this.size);\r\n    }\r\n  }\r\n  // build a three canvas with the canvas\r\n  var tex = new THREE.Texture(canvas);\r\n  tex.flipY = false;\r\n  tex.needsUpdate = true;\r\n  // store the character map on the instance\r\n  this.data.characters = {\r\n    map: charToCoords,\r\n    tex: tex,\r\n  }\r\n}\r\n\r\n\r\n/**\r\n* Heightmap canvas\r\n**/\r\n\r\nWordmap.prototype.getHeightmap = function(cb) {\r\n  var img = new Image();\r\n  img.crossOrigin = 'Anonymous';\r\n  img.onload = function() {\r\n    var canvas = document.createElement('canvas'),\r\n        ctx = canvas.getContext('2d');\r\n    canvas.width = img.width;\r\n    canvas.height = img.height;\r\n    ctx.drawImage(img, 0, 0);\r\n    cb(ctx.getImageData(0,0, img.width, img.height));\r\n  }\r\n  img.src = 'https://duhaime.s3.amazonaws.com/blog/visualizations/wordmap/heightmap.jpg';\r\n}\r\n\r\n\r\n/**\r\n* Geometry\r\n**/\r\n\r\nWordmap.prototype.addWords = function() {\r\n  var attrs = this.getWordAttrs(),\r\n      geometry = new THREE.InstancedBufferGeometry();\r\n  geometry.addAttribute('uv', new BA(new ARR([0,0]), 2, true, 1));\r\n  geometry.addAttribute('position', new BA(new ARR([0,0,0]), 3, true, 1));\r\n  geometry.addAttribute('translation', new IBA(attrs.translations, 3, true, 1));\r\n  geometry.addAttribute('target', new IBA(attrs.translations, 3, true, 1));\r\n  geometry.addAttribute('texOffset', new IBA(attrs.texOffsets, 2, true, 1));\r\n  // build the mesh\r\n  this.setShaderMaterial();\r\n  var mesh = new THREE.Points(geometry, this.material);\r\n  mesh.frustumCulled = false;\r\n  mesh.name = 'words';\r\n  this.mesh = mesh;\r\n  this.scene.add(mesh);\r\n}\r\n\r\n\r\nWordmap.prototype.getWordAttrs = function() {\r\n  var n = 0, // total number of characters among all words\r\n      layout = this.data.layouts[this.state.layout],\r\n      words = layout.words,\r\n      positions = layout.positions;\r\n  for (var i=0; i&lt;words.length; i++) n += words[i].length;\r\n  // build up word attributes\r\n  var attrs = {\r\n    translations: new Float32Array(n * 3),\r\n    texOffsets: new Float32Array(n * 2),\r\n  }\r\n  var iters = {\r\n    translationIter: 0,\r\n    texOffsetIter: 0,\r\n  }\r\n  // assume each word has x y coords assigned\r\n  for (var i=0; i&lt;words.length; i++) {\r\n    var word = words[i],\r\n        x = positions[i][0],\r\n        y = positions[i][1],\r\n        z = positions[i][2] || this.getHeightAt(x, y);\r\n    for (var c=0; c&lt;word.length; c++) {\r\n      var offsets = this.data.characters.map[word[c]] || this.data.characters.map['?'];\r\n      attrs.translations[iters.translationIter++] = x + (this.wordScalar * this.sep * c);\r\n      attrs.translations[iters.translationIter++] = y;\r\n      attrs.translations[iters.translationIter++] = z;\r\n      attrs.texOffsets[iters.texOffsetIter++] = offsets.x;\r\n      attrs.texOffsets[iters.texOffsetIter++] = offsets.y;\r\n    }\r\n  }\r\n  return attrs;\r\n}\r\n\r\n\r\nWordmap.prototype.setShaderMaterial = function() {\r\n  this.material = new THREE.RawShaderMaterial({\r\n    vertexShader: document.getElementById('vertex-shader').textContent,\r\n    fragmentShader: document.getElementById('fragment-shader').textContent,\r\n    uniforms: {\r\n      pointScale: { type: 'f', value: 0.0, },\r\n      cellSize:   { type: 'f', value: this.size / (this.size * 16), }, // letter size in map\r\n      tex:        { type: 't', value: this.data.characters.tex, },\r\n      color:      { type: 'f', value: this.getColorUniform() },\r\n      transition: { type: 'f', value: 0.0, },\r\n    },\r\n    //transparent: true,\r\n    defines: {\r\n      WORDS: true,\r\n    }\r\n  });\r\n  this.setPointScale();\r\n}\r\n\r\n\r\nWordmap.prototype.getColorUniform = function() {\r\n  return this.color === '#fff' ? 1.0 : 0.0;\r\n}\r\n\r\n\r\nWordmap.prototype.getHeightAt = function(x, y) {\r\n  // because x and y axes are scaled -1:1, rescale 0:1\r\n  x = (x+1)/2;\r\n  y = (y+1)/2;\r\n  var row = Math.floor(y * this.data.heightmap.height),\r\n      col = Math.floor(x * this.data.heightmap.width),\r\n      idx = (row * this.data.heightmap.width * 4) + (col * 4),\r\n      z = (this.data.heightmap.data[idx] + Math.random()) * this.heightScalar;\r\n  return z;\r\n}\r\n\r\n\r\nWordmap.prototype.init = function() {\r\n  this.setCharacters();\r\n  this.setBackgroundColor();\r\n  this.getHeightmap(function(heightMapData) {\r\n    this.data.heightmap = heightMapData;\r\n    get('https://duhaime.s3.amazonaws.com/blog/visualizations/wordmap/wordmap-layouts.json', function(data) {\r\n      this.data.input = data;\r\n      this.parseLayouts();\r\n      this.createScene();\r\n      this.addWords();\r\n      this.render();\r\n      setTimeout(this.flyInCamera.bind(this), 500);\r\n      window.addEventListener('resize', this.onWindowResize.bind(this));\r\n    }.bind(this))\r\n  }.bind(this))\r\n}\r\n\r\n\r\nWordmap.prototype.parseLayouts = function() {\r\n  for (var i=0; i&lt;this.data.input.length; i++) {\r\n    var l = this.data.input[i],\r\n        name = l.name || i,\r\n        words = l.words,\r\n        positions = this.center(l.positions),\r\n        wordToCoords = {};\r\n    for (var j=0; j&lt;words.length; j++) {wordToCoords[words[j]] = positions[j];}\r\n    this.data.layouts[name] = {\r\n      words: words,\r\n      positions: positions,\r\n      wordToCoords: wordToCoords,\r\n    }\r\n    // activate the first layout\r\n    if (i == 0 &amp;&amp; !this.state.layout) this.state.layout = name;\r\n  }\r\n}\r\n\r\n\r\n// center an array of vertex positions -1:1 on each axis\r\nWordmap.prototype.center = function(arr) {\r\n  var max = Number.POSITIVE_INFINITY,\r\n      min = Number.NEGATIVE_INFINITY,\r\n      domX = {min: max, max: min},\r\n      domY = {min: max, max: min},\r\n      domZ = {min: max, max: min};\r\n  // find the min, max of each dimension\r\n  for (var i=0; i&lt;arr.length; i++) {\r\n    var x = arr[i][0],\r\n        y = arr[i][1],\r\n        z = arr[i][2] || 0;\r\n    if (x &lt; domX.min) domX.min = x;\r\n    if (x &gt; domX.max) domX.max = x;\r\n    if (y &lt; domY.min) domY.min = y;\r\n    if (y &gt; domY.max) domY.max = y;\r\n    if (z &lt; domZ.min) domZ.min = z;\r\n    if (z &gt; domZ.max) domZ.max = z;\r\n  }\r\n  var centered = [];\r\n  for (var i=0; i&lt;arr.length; i++) {\r\n    var cx = (((arr[i][0]-domX.min)/(domX.max-domX.min))*2)-1,\r\n        cy = (((arr[i][1]-domY.min)/(domY.max-domY.min))*2)-1,\r\n        cz = (((arr[i][2]-domZ.min)/(domZ.max-domZ.min))*2)-1 || null;\r\n    if (arr[i].length == 3) centered.push([cx, cy, cz]);\r\n    else centered.push([cx, cy]);\r\n  }\r\n  return centered;\r\n}\r\n\r\n\r\nWordmap.prototype.queryWords = function(s) {\r\n  var map = this.data.layouts[this.state.layout].wordToCoords;\r\n  return Object.keys(map).filter(function(w) {\r\n    return w.toLowerCase().indexOf(s.toLowerCase()) &gt; -1;\r\n  });\r\n}\r\n\r\n\r\nWordmap.prototype.updateLayout = function() {\r\n  if (this.state.transitioning) {\r\n    this.state.transitionQueued = true;\r\n    return;\r\n  }\r\n  this.state.transitioning = true;\r\n  this.setPointScale();\r\n  var attrs = this.getWordAttrs();\r\n  this.mesh.geometry.attributes.target.array = attrs.translations;\r\n  this.mesh.geometry.attributes.target.needsUpdate = true;\r\n  TweenLite.to(this.mesh.material.uniforms.transition, 1, {\r\n    value: 1,\r\n    ease: Power4.easeInOut,\r\n    onComplete: function() {\r\n      requestAnimationFrame(function() {\r\n        this.mesh.geometry.attributes.translation.array = attrs.translations;\r\n        this.mesh.geometry.attributes.translation.needsUpdate = true;\r\n        this.mesh.material.uniforms.transition = {type: 'f', value: 0};\r\n        this.state.transitioning = false;\r\n      }.bind(this))\r\n    }.bind(this)\r\n  })\r\n}\r\n\r\n\r\n/**\r\n* User callbacks\r\n**/\r\n\r\nWordmap.prototype.setBackgroundColor = function() {\r\n  document.querySelector('body').style.background = this.background;\r\n}\r\n\r\n\r\nWordmap.prototype.setTextColor = function() {\r\n  this.setCharacters();\r\n  this.mesh.material.uniforms.tex.value = this.data.characters.tex;\r\n  this.mesh.material.uniforms.color.value = this.getColorUniform();\r\n}\r\n\r\n\r\nWordmap.prototype.setPointScale = function() {\r\n  var val = window.devicePixelRatio * window.innerHeight * this.wordScalar;\r\n  this.material.uniforms.pointScale.value = val;\r\n  this.material.uniforms.pointScale.needsUpdate = true;\r\n  this.renderer.setPixelRatio(window.devicePixelRatio);\r\n}\r\n\r\n\r\nWordmap.prototype.flyTo = function(coords) {\r\n  if (this.state.flying) return;\r\n  this.state.flying = true;\r\n  // pull out target coordinates\r\n  var self = this,\r\n      x = coords[0],\r\n      y = coords[1],\r\n      z = coords[2] || self.getHeightAt(coords[0], coords[1]),\r\n      z = z + 0.015,\r\n      // specify animation duration\r\n      duration = 3,\r\n      // create objects to use during flight\r\n      aspectRatio = window.innerWidth / window.innerHeight,\r\n      _camera = new THREE.PerspectiveCamera(75, aspectRatio, 0.001, 10),\r\n      _controls = new THREE.TrackballControls(_camera, self.renderer.domElement),\r\n      q0 = self.camera.quaternion.clone(),\r\n      _up = self.camera.up;\r\n  _camera.position.set(x, y, z);\r\n  _controls.target.set(x, y, z);\r\n  _controls.update();\r\n  TweenLite.to(self.camera.position, duration, {\r\n    x: x,\r\n    y: y,\r\n    z: z,\r\n    onStart: function() {\r\n      self.state.clock = new THREE.Clock();\r\n      self.state.clock.start();\r\n    },\r\n    onUpdate: function() {\r\n      var deg = self.state.clock.getElapsedTime() / duration;\r\n      THREE.Quaternion.slerp(q0, _camera.quaternion, self.camera.quaternion, deg);\r\n    },\r\n    onComplete: function() {\r\n      var q = _camera.quaternion,\r\n          p = _camera.position,\r\n          u = _camera.up,\r\n          c = _controls.target;\r\n      self.camera.position.set(p.x, p.y, p.z);\r\n      self.camera.up.set(u.x, u.y, u.z);\r\n      self.camera.quaternion.set(q.x, q.y, q.z, q.w);\r\n      self.controls.target = new THREE.Vector3(c.x, c.y, c.z-1.0);\r\n      self.controls.update();\r\n      self.state.flying = false;\r\n    },\r\n    ease: Power4.easeInOut,\r\n  });\r\n}\r\n\r\n\r\nWordmap.prototype.flyInCamera = function() {\r\n  TweenLite.to(this.camera.position, 3.5, {\r\n    z: 0.56,\r\n    ease: Power4.easeInOut,\r\n  });\r\n}\r\n\r\n\r\nWordmap.prototype.getWordCoords = function(word) {\r\n  return this.data.layouts[this.state.layout].wordToCoords[word];\r\n}\r\n\r\n/**\r\n* Typeahaed\r\n**/\r\n\r\nfunction Typeahead() {\r\n  var input = document.querySelector('#search'), // query box\r\n      typeahead = document.querySelector('#typeahead'), // typeahead options\r\n      button = document.querySelector('#search-button'); // submit button\r\n\r\n  input.addEventListener('keyup', function(e) {\r\n    clearTypeahead();\r\n    if (e.keyCode == 13 || e.target.value.length &lt; 2) return;\r\n    var matches = wm.queryWords(e.target.value),\r\n        rendered = {}; // store the rendered objects to prevent cased dupes\r\n    for (var i=0; i&lt;Math.min(50, matches.length); i++) {\r\n      if (!(matches[i].toLowerCase().trim() in rendered)) {\r\n        rendered[ matches[i].toLowerCase().trim() ] = true;\r\n        var elem = document.createElement('div');\r\n        elem.textContent = matches[i];\r\n        elem.onclick = function(str, e) {\r\n          input.value = str;\r\n          submit();\r\n        }.bind(this, matches[i]);\r\n        document.querySelector('#typeahead').appendChild(elem);\r\n      }\r\n    }\r\n  })\r\n\r\n  function clearTypeahead(e) {\r\n    typeahead.innerHTML = '';\r\n  }\r\n\r\n  function submit() {\r\n    if (!input.value) return;\r\n    var coords = wm.getWordCoords(input.value);\r\n    if (!coords) {\r\n      var elem = document.querySelector('#no-results');\r\n      elem.style.transform = 'translate(0, 75px)';\r\n      setTimeout(function() {\r\n        elem.style.transform = 'translate(0, 24px)';\r\n      }, 1500);\r\n      return;\r\n    }\r\n    wm.flyTo(coords);\r\n    clearTypeahead();\r\n  }\r\n\r\n  button.addEventListener('click', submit);\r\n  window.addEventListener('click', clearTypeahead);\r\n  input.addEventListener('keydown', function(e) {\r\n    if (e.keyCode == 13) submit();\r\n    else clearTypeahead();\r\n  });\r\n}\r\n\r\n\r\n/**\r\n* Main\r\n**/\r\n\r\nfunction get(url, onSuccess, onErr, onProgress) {\r\n  var xmlhttp = new XMLHttpRequest();\r\n  xmlhttp.onreadystatechange = function() {\r\n    if (xmlhttp.readyState == XMLHttpRequest.DONE) {\r\n      if (xmlhttp.status === 200) {\r\n        if (onSuccess) onSuccess(JSON.parse(xmlhttp.responseText));\r\n      } else {\r\n        if (onErr) onErr(xmlhttp)\r\n      }\r\n    };\r\n  };\r\n  xmlhttp.onprogress = function(e) {\r\n    if (onProgress) onProgress(e);\r\n  };\r\n  xmlhttp.open('GET', url, true);\r\n  xmlhttp.send();\r\n};\r\n\r\n\r\n\r\n// create the gui\r\nwindow.onload = function() {\r\n  wm = new Wordmap();\r\n  typeahead = new Typeahead();\r\n\r\n  // build the gui\r\n  gui = new dat.GUI({hideable: false})\r\n\r\n  gui.add(wm.state, 'layout', ['grid', 'tsne'])\r\n    .name('layout')\r\n    .onFinishChange(wm.updateLayout.bind(wm))\r\n\r\n  gui.add(wm, 'wordScalar', 0.0, 0.001)\r\n    .name('font size')\r\n    .onFinishChange(wm.updateLayout.bind(wm))\r\n\r\n  gui.add(wm, 'heightScalar', 0.0, 0.003)\r\n    .name('mountain')\r\n    .onFinishChange(wm.updateLayout.bind(wm))\r\n\r\n  gui.addColor(wm, 'background')\r\n    .name('background')\r\n    .onChange(wm.setBackgroundColor.bind(wm))\r\n\r\n  gui.add(wm, 'color', ['#fff', '#000'])\r\n    .name('color')\r\n    .onChange(wm.setTextColor.bind(wm))\r\n};</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>html,\r\nbody {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\nbody {\r\n  margin: 0;\r\n  overflow: hidden;\r\n}\r\n\r\nbody::after {\r\n  content: '';\r\n  position: fixed;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  background: linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.2));\r\n}\r\n\r\ncanvas {\r\n  position: relative;\r\n  z-index: 10;\r\n}\r\n\r\nbody .dg.ac {\r\n  z-index: 100;\r\n}\r\n\r\n#letter-canvas {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n}\r\n\r\n#search-container {\r\n  position: absolute;\r\n  top: 23px;\r\n  left: 50%;\r\n  width: 360px;\r\n  margin-left: -180px;\r\n  font-family: courier, monospace;\r\n  z-index: 100;\r\n}\r\n\r\n#search,\r\n#search-button {\r\n  padding: 7px 10px;\r\n  font-size: 16px;\r\n  line-height: 16px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n#search,\r\n#search-button,\r\n#search-button::before {\r\n  border-radius: 3px;\r\n}\r\n\r\n#search {\r\n  border: 1px solid #aaa;\r\n}\r\n\r\n#search-button {\r\n  position: relative;\r\n  opacity: 0.7;\r\n  border: 1px solid #797979;\r\n}\r\n\r\n#search-button::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  background: #fff;\r\n  z-index: -1;\r\n}\r\n\r\n#search,\r\n#typeahead {\r\n  width: 240px;\r\n  font-family: inherit;\r\n}\r\n\r\n#search {\r\n  z-index: 10;\r\n}\r\n\r\n#search-button {\r\n  background: #b4cdde;\r\n  color: #485661;\r\n  padding: 8px 18px;\r\n  font-weight: 600;\r\n  letter-spacing: 0.05em;\r\n  font-family: sans-serif;\r\n  cursor: pointer;\r\n}\r\n\r\n#typeahead {\r\n  background: #fff;\r\n  max-height: 100px;\r\n  overflow: auto;\r\n  box-sizing: border-box;\r\n  border-bottom-left-radius: 3px;\r\n  border-bottom-right-radius: 3px;\r\n}\r\n\r\n.hidden {\r\n  display: none;\r\n}\r\n\r\n.displayed {\r\n  display: inline-block;\r\n}\r\n\r\n#typeahead div {\r\n  margin: 2px 10px;\r\n  cursor: pointer;\r\n  white-space: nowrap;\r\n}\r\n\r\n#typeahead div:hover {\r\n  background: #efefef;\r\n}\r\n\r\n#no-results {\r\n  padding: 6px;\r\n  background: firebrick;\r\n  color: #fff;\r\n  font-size: 1em;\r\n  transform: translate(0, 24px);\r\n  display: block;\r\n  margin: 0 auto;\r\n  width: 107px;\r\n  text-align: center;\r\n  position: absolute;\r\n  left: 50%;\r\n  margin-left: -180px;\r\n  z-index: 90;\r\n  font-family: courier;\r\n  border-radius: 3px;\r\n  transition: transform 0.3s;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div id='no-results'&gt;No Results!&lt;/div&gt;\r\n&lt;div id='search-container'&gt;\r\n  &lt;div&gt;\r\n    &lt;input id='search' value='pythons'&gt;&lt;/input&gt;\r\n    &lt;button id='search-button'&gt;SEARCH&lt;/button&gt;\r\n  &lt;/div&gt;\r\n  &lt;div id='typeahead'&gt;&lt;/div&gt;\r\n&lt;/div&gt;\r\n\r\n&lt;script id='vertex-shader' type='x-shader/x-vertex'&gt;\r\nuniform mat4 projectionMatrix;\r\nuniform mat4 modelViewMatrix;\r\nuniform vec3 cameraPosition;\r\nuniform float pointScale;\r\nuniform float transition;\r\n\r\nattribute vec3 position;\r\nattribute vec3 translation;\r\nattribute vec3 target;\r\nattribute vec2 texOffset;\r\n\r\nvarying vec2 vTexOffset;\r\n\r\nvoid main() {\r\n  // project this particle\r\n  vec3 raw0 = position + translation;\r\n  vec3 raw1 = position + target;\r\n  vec3 raw = mix(raw0, raw1, clamp(transition, 0.0, 1.0));\r\n  vec4 mvPosition = modelViewMatrix * vec4(raw, 1.0);\r\n  gl_Position = projectionMatrix * mvPosition;\r\n\r\n  // make distant points small\r\n  vec4 cam4 = vec4(cameraPosition, 1.0);\r\n  gl_PointSize = (pointScale / -mvPosition.z);\r\n\r\n  vTexOffset = texOffset;\r\n}\r\n&lt;/script&gt;\r\n\r\n&lt;script id='fragment-shader' type='x-shader/x-fragment'&gt;\r\nprecision mediump float;\r\n\r\nuniform sampler2D tex;\r\nuniform vec3 fogColor;\r\nuniform float cellSize;\r\nuniform float fogNear;\r\nuniform float fogFar;\r\nuniform float color;\r\n\r\nvarying vec2 vTexOffset;\r\n\r\nvoid main() {\r\n  #ifdef WORDS\r\n    vec2 uv = vTexOffset + vec2(gl_PointCoord.x, gl_PointCoord.y);\r\n    vec2 scaledUv = uv * vec2(cellSize, cellSize);\r\n    gl_FragColor = texture2D(tex, scaledUv);\r\n    if (gl_FragColor.a &lt; 0.01) discard; // discard non-letter pixels\r\n  #else\r\n    // make point circular\r\n    if (length(gl_PointCoord - vec2(0.5)) &gt; 0.5) discard;\r\n    gl_FragColor = vec4(0.7, 0.7, 0.8, 0.5);\r\n  #endif\r\n}\r\n&lt;/script&gt;\r\n\r\n&lt;script src='https://duhaime.s3.amazonaws.com/blog/visualizations/wordmap/three.min.js'&gt;&lt;/script&gt;\r\n&lt;script src='https://duhaime.s3.amazonaws.com/blog/visualizations/wordmap/trackball-controls.min.js'&gt;&lt;/script&gt;\r\n&lt;script src='https://duhaime.s3.amazonaws.com/blog/visualizations/wordmap/tweenlite.min.js'&gt;&lt;/script&gt;\r\n&lt;script src='https://duhaime.s3.amazonaws.com/blog/visualizations/wordmap/dat.gui.min.js'&gt;&lt;/script&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I thought I could just set the <code>alpha</code> attribute of each pixel in the fragment shader to 1 by adding the following as the last line in the fragment shader:</p>\n\n<pre><code>gl_FragColor.a = 1.0;\n</code></pre>\n\n<p>Doing this makes the displayed font very chunky and pixelated though, and I'd prefer to keep the font displaying the way it is in the visualization above.</p>\n\n<p>I also tried using the above and declaring a lighter font-weight property when creating the 2d canvas full of letters that gets sent as a uniform to the scene, but that didn't work out either.</p>\n\n<p>Does anyone know how I can increase the opacity of distant points/letters without increasing the \"weight\" of each letter? Any suggestions would be hugely helpful!</p>\n"}, {"tags": ["javascript", "html", "iframe"], "comments": [{"owner": {"reputation": 162920, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1562790741, "post_id": 56978173, "comment_id": 100492469, "body": "Are you doing this from <code>file:&#47;&#47;</code> protocol perhaps? Also check browser dev tools network for clues. And some sites have framebuster headers that won&#39;t let them be loaded in iframes"}, {"owner": {"reputation": 30501, "user_id": 1029146, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a659be962c006e43e110b5a9dfda538e?s=128&d=identicon&r=PG", "display_name": "temporary_user_name", "link": "https://stackoverflow.com/users/1029146/temporary-user-name"}, "reply_to_user": {"reputation": 162920, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1562790864, "post_id": 56978173, "comment_id": 100492519, "body": "I am, yes. Are iframes incompatible with that protocol? The second two things I already ruled out."}, {"owner": {"reputation": 162920, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1562790934, "post_id": 56978173, "comment_id": 100492536, "body": "Never tried it but there are security restrictions in <code>file:&#47;&#47;</code> protocol for ajax requests as an example so iframe wouldn&#39;t surprise me either. Very easy to spin up  a localhost server to prevent such issues. Many IDE&#39;s have built in servers also or extensions for locl servers"}, {"owner": {"reputation": 802, "user_id": 2448419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6agoQ.png?s=128&g=1", "display_name": "Alekos Dordas", "link": "https://stackoverflow.com/users/2448419/alekos-dordas"}, "edited": false, "score": 0, "creation_date": 1562791243, "post_id": 56978173, "comment_id": 100492666, "body": "You also wrote src=&quot;www.youtube.com&quot; instead of src=&quot;https://....&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 1214, "user_id": 1060646, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yqub2.jpg?s=128&g=1", "display_name": "HBlackorby", "link": "https://stackoverflow.com/users/1060646/hblackorby"}, "edited": false, "score": 1, "creation_date": 1562791236, "post_id": 56978292, "comment_id": 100492664, "body": "It&#39;s not YouTube specific. He said he is trying to load any URL. The issue is he&#39;s loading it from a page running locally in the browser off his computer."}, {"owner": {"reputation": 802, "user_id": 2448419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6agoQ.png?s=128&g=1", "display_name": "Alekos Dordas", "link": "https://stackoverflow.com/users/2448419/alekos-dordas"}, "edited": false, "score": 2, "creation_date": 1562791344, "post_id": 56978292, "comment_id": 100492715, "body": "I can load the above url (the microcenter one) from a local file, in Chrome, with no problem."}, {"owner": {"reputation": 30501, "user_id": 1029146, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a659be962c006e43e110b5a9dfda538e?s=128&d=identicon&r=PG", "display_name": "temporary_user_name", "link": "https://stackoverflow.com/users/1029146/temporary-user-name"}, "edited": false, "score": 2, "creation_date": 1562791349, "post_id": 56978292, "comment_id": 100492718, "body": "Yeah, I thought it wasn&#39;t youtube-specific. Yet tbauer428 is correct; the url he&#39;s using works correctly. So I guess it IS specific actions by the sites I tried loading-- all of them."}, {"owner": {"reputation": 73, "user_id": 11744533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6e0de5cc897b7fc18decd9129168f6a?s=128&d=identicon&r=PG", "display_name": "tbauer428", "link": "https://stackoverflow.com/users/11744533/tbauer428"}, "edited": false, "score": 1, "creation_date": 1562791396, "post_id": 56978292, "comment_id": 100492744, "body": "I tested mine from Chrome on my MacBook, had no issues (100% local).  If the issue is with how their Chrome is configured then we would need to know how theirs is set up.  My guess is that the test sites he was using were like google, youtube, facebook, etc.  Most of these sites will refuse to display in an iframe."}, {"owner": {"reputation": 802, "user_id": 2448419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6agoQ.png?s=128&g=1", "display_name": "Alekos Dordas", "link": "https://stackoverflow.com/users/2448419/alekos-dordas"}, "edited": false, "score": 1, "creation_date": 1562791417, "post_id": 56978292, "comment_id": 100492753, "body": "The majority of websites come with &#39;X-Frame-Options&#39; headers that don&#39;t allow them to be loaded in iframes, objects etc from different domains."}, {"owner": {"reputation": 30501, "user_id": 1029146, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a659be962c006e43e110b5a9dfda538e?s=128&d=identicon&r=PG", "display_name": "temporary_user_name", "link": "https://stackoverflow.com/users/1029146/temporary-user-name"}, "edited": false, "score": 1, "creation_date": 1562791452, "post_id": 56978292, "comment_id": 100492774, "body": "When I add <code>https:&#47;&#47;</code> I am able to load some websites, but not youtube because their security team actually knows what they&#39;re doing. So that was part of the issue. Side note, closing the iframe tag has no bearing on this."}, {"owner": {"reputation": 73, "user_id": 11744533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6e0de5cc897b7fc18decd9129168f6a?s=128&d=identicon&r=PG", "display_name": "tbauer428", "link": "https://stackoverflow.com/users/11744533/tbauer428"}, "edited": false, "score": 0, "creation_date": 1562791594, "post_id": 56978292, "comment_id": 100492826, "body": "Okay I wasn&#39;t sure, I mostly build sites in React so am used to having closing tags for most everything. I will amend my answer :)"}], "tags": [], "owner": {"reputation": 73, "user_id": 11744533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6e0de5cc897b7fc18decd9129168f6a?s=128&d=identicon&r=PG", "display_name": "tbauer428", "link": "https://stackoverflow.com/users/11744533/tbauer428"}, "is_accepted": true, "score": 3, "last_activity_date": 1562791524, "last_edit_date": 1562791524, "creation_date": 1562791121, "answer_id": 56978292, "question_id": 56978173, "link": "https://stackoverflow.com/questions/56978173/unable-to-load-any-iframe-in-local-file/56978292#56978292", "title": "Unable to load any iframe in local file?", "body": "<p>Hello temporary_user_name,</p>\n\n<p>It is not uncommon for some sites to refuse connections from iframes, youtube is one of these.</p>\n\n<p>I was able to load a page from microcenter using the below code:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\" /&gt;\n    &lt;style&gt;\n      iframe {\n        height: 1000px;\n        width: 1000px;\n      }\n    &lt;/style&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;iframe\n      src=\"https://www.microcenter.com/product/601585/970-evo-500gb-v-nand-m2-2280-pcie-nvme-30-x4-internal-solid-state-drive\"\n    &gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>PS: \nIn the screenshot you provided, if you mouse over the iframe it should ideally show \"youtube.com refused to connect\" if I am correct.</p>\n\n<p>Edit:  I should also note that you normally do have to include the full url, either http:// or https://</p>\n\n<p>Edit2: Since some people had some questions about why some sites block iframes For some more information on this check out <a href=\"https://ziplineinteractive.com/blog/how-to-prevent-a-website-from-being-loaded-in-an-iframe/\" rel=\"nofollow noreferrer\">https://ziplineinteractive.com/blog/how-to-prevent-a-website-from-being-loaded-in-an-iframe/</a> . It's an article about how to prevent the loading of your site in an iframe and why.</p>\n"}], "owner": {"reputation": 30501, "user_id": 1029146, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a659be962c006e43e110b5a9dfda538e?s=128&d=identicon&r=PG", "display_name": "temporary_user_name", "link": "https://stackoverflow.com/users/1029146/temporary-user-name"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2318, "favorite_count": 0, "accepted_answer_id": 56978292, "answer_count": 1, "score": 1, "last_activity_date": 1562791524, "creation_date": 1562790479, "question_id": 56978173, "link": "https://stackoverflow.com/questions/56978173/unable-to-load-any-iframe-in-local-file", "title": "Unable to load any iframe in local file?", "body": "<p>I created the following file:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\"&gt;\n    &lt;style&gt;\n        iframe {\n            height: 500px;\n            width: 600px;\n        }\n    &lt;/style&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;iframe src=\"www.youtube.com\"&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>I am just trying to load any site into an iframe, just for testing with how iframes work. But no matter what URL I place in the <code>src</code> attribute, I get the same result when I open this file in a browser:</p>\n\n<p><a href=\"https://i.stack.imgur.com/MxMfH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MxMfH.png\" alt=\"enter image description here\"></a></p>\n\n<p>The content of the iframe body becomes this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/u2iEJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/u2iEJ.png\" alt=\"enter image description here\"></a></p>\n\n<p>It seems to be a sort of generic chrome error. There are no errors in the console. It is not a security measure by the domains I'm trying to load.</p>\n\n<p>What is going on here?</p>\n"}, {"tags": ["javascript", "reactjs"], "comments": [{"owner": {"reputation": 7454, "user_id": 93812, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/T5fjc.jpg?s=128&g=1", "display_name": "Will Jenkins", "link": "https://stackoverflow.com/users/93812/will-jenkins"}, "edited": false, "score": 2, "creation_date": 1562790535, "post_id": 56978169, "comment_id": 100492383, "body": "how are you exporting from App?"}, {"owner": {"reputation": 250, "user_id": 11574236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/355059dcbb41ce48d8872ee8b0bd504c?s=128&d=identicon&r=PG&f=1", "display_name": "Amir", "link": "https://stackoverflow.com/users/11574236/amir"}, "edited": false, "score": 1, "creation_date": 1562790812, "post_id": 56978169, "comment_id": 100492501, "body": "You didn&#39;t export the class: export default class App extends Component { ... }"}], "answers": [{"tags": [], "owner": {"reputation": 334, "user_id": 8399567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3m2vo.jpg?s=128&g=1", "display_name": "Sanaullah", "link": "https://stackoverflow.com/users/8399567/sanaullah"}, "is_accepted": false, "score": 0, "last_activity_date": 1563010061, "last_edit_date": 1563010061, "creation_date": 1562790885, "answer_id": 56978253, "question_id": 56978169, "link": "https://stackoverflow.com/questions/56978169/how-to-solve-import-error-after-npm-start/56978253#56978253", "title": "How to solve import error after npm start", "body": "<p>export the App Component\nTry following</p>\n\n<pre><code>import React, {Component} from 'react'; \n    export default class App extends Component {\n      render(){\n        return(\n          &lt;div&gt;Ageteller Component&lt;/div&gt; \n        )\n      }   \n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 9846284, "user_type": "registered", "profile_image": "https://graph.facebook.com/945939455587821/picture?type=large", "display_name": "Rana Ibtisam", "link": "https://stackoverflow.com/users/9846284/rana-ibtisam"}, "edited": false, "score": 0, "creation_date": 1562791989, "post_id": 56978293, "comment_id": 100492974, "body": "Thanks a lot. The guy didnt import and his code ran, i have no idea how lol"}], "tags": [], "owner": {"reputation": 656, "user_id": 7034333, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/z6tEg.png?s=128&g=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7034333/jake"}, "is_accepted": true, "score": 2, "last_activity_date": 1562791122, "creation_date": 1562791122, "answer_id": 56978293, "question_id": 56978169, "link": "https://stackoverflow.com/questions/56978169/how-to-solve-import-error-after-npm-start/56978293#56978293", "title": "How to solve import error after npm start", "body": "<p>You need to export your App component.</p>\n\n<p>Under the component put <code>export default App</code></p>\n\n<p>It should look like:</p>\n\n<pre><code>import React, {Component} from 'react';\n\nclass App extends Component {\n  render(){\n    return(\n      &lt;div&gt;Ageteller Component&lt;/div&gt; \n    )\n  }   \n}\n\nexport default App\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 9846284, "user_type": "registered", "profile_image": "https://graph.facebook.com/945939455587821/picture?type=large", "display_name": "Rana Ibtisam", "link": "https://stackoverflow.com/users/9846284/rana-ibtisam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 56978293, "answer_count": 2, "score": 1, "last_activity_date": 1563010061, "creation_date": 1562790469, "last_edit_date": 1592644375, "question_id": 56978169, "link": "https://stackoverflow.com/questions/56978169/how-to-solve-import-error-after-npm-start", "title": "How to solve import error after npm start", "body": "<p>Just started using react and i am following a tutorial. I have the same code as him but i am getting the following error.</p>\n<h3>./src/index.js</h3>\n<p>Attempted import error: './components/App' does not contain a default export (imported as 'App')###</p>\n<p>Here are my index and component file.</p>\n<p>my index.js file</p>\n<pre><code>import React from 'react';\nimport ReactDOM from 'react-dom';\nimport  App from './components/App';\n\n\nReactDOM.render(\n\n  &lt;App/ &gt;,document.getElementById('root')\n\n)\n</code></pre>\n<p>my App.js</p>\n<pre><code>import React, {Component} from 'react';\n\nclass App extends Component {\n  render(){\n    return(\n      &lt;div&gt;Ageteller Component&lt;/div&gt; \n    )\n  }   \n}\n</code></pre>\n"}, {"tags": ["javascript", "css", "reactjs"], "comments": [{"owner": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "edited": false, "score": 0, "creation_date": 1562793499, "post_id": 56978153, "comment_id": 100493512, "body": "You mean like <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Visualizations_with_Web_Audio_API\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/&hellip;</a> ?"}, {"owner": {"reputation": 13, "user_id": 11638968, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HbVrHKDt8xw/AAAAAAAAAAI/AAAAAAAAADI/TNvh6XWJWb4/photo.jpg?sz=128", "display_name": "Daniel Fern&#225;ndez Aguirre", "link": "https://stackoverflow.com/users/11638968/daniel-fern%c3%a1ndez-aguirre"}, "reply_to_user": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "edited": false, "score": 0, "creation_date": 1562873788, "post_id": 56978153, "comment_id": 100526475, "body": "yes!, I&#39;ll look into it, that seems very promising."}], "owner": {"reputation": 13, "user_id": 11638968, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HbVrHKDt8xw/AAAAAAAAAAI/AAAAAAAAADI/TNvh6XWJWb4/photo.jpg?sz=128", "display_name": "Daniel Fern&#225;ndez Aguirre", "link": "https://stackoverflow.com/users/11638968/daniel-fern%c3%a1ndez-aguirre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 311, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1581348917, "creation_date": 1562790383, "last_edit_date": 1581348917, "question_id": 56978153, "link": "https://stackoverflow.com/questions/56978153/how-to-graph-audio-frequency-on-a-reactjs-voice-recorder-with-html-css", "title": "How to graph audio frequency on a reactjs voice recorder with html/css", "body": "<p>I want to achieve something like this <a href=\"https://online-voice-recorder.com/\" rel=\"nofollow noreferrer\">https://online-voice-recorder.com/</a> using pure html and css.</p>\n\n<p>I'm using reactjs and in our application and there is a component with a voice recorder. I have achieved to record, preview(play) and successfully upload to the server using html5 native recording API. The audio file is currently being recorded and stored as a File JS object in the state of the component and encoded as mp3 when the user stops recording to send it to the server. </p>\n\n<p>Here's how I record and store the audio.</p>\n\n<pre><code>navigator.getUserMedia(\n    { audio: true },\n    stream =&gt; {\n        this.mediaRecorder = new MediaRecorder(stream);\n        this.mediaRecorder.start();\n        this.pulseInterval = setInterval(() =&gt; {\n            let newDuration = this.state.duration;\n            this.setState({ recording: true, showPulse: !this.state.showPulse, duration: ++newDuration, compatibilityError: false });\n        }, 1000);\n        this.mediaRecorder.addEventListener('dataavailable', e =&gt; this.audioDataChunks.push(e.data));\n        this.mediaRecorder.addEventListener('stop', () =&gt; {\n            this.audioBlob = new Blob(this.audioDataChunks, { type: 'audio/mpeg' });\n            const audioBlobToFile = new File([this.audioBlob], this.state.audioName, { type: 'audio/mpeg' });\n            this.setState({\n                audioFile: audioBlobToFile,\n                audioDataChunks: this.audioDataChunks\n            });\n        });\n    }\n)\n</code></pre>\n\n<p>I have looked into some js libraries and npm packages but they are mostly predefined components or very robust API's with a ton of functionalities and all i want is to visualize the voice of the user while recording. Also our designers have an expected look and none of the options I've seen seem to be easy to style.</p>\n\n<p>I would hope someone could tell me about the easiest way to achieve it.</p>\n"}, {"tags": ["javascript", "jquery", "html", "ajax"], "comments": [{"owner": {"reputation": 25361, "user_id": 924299, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a142d1ec6b8444c9baf3ec6176e1cf61?s=128&d=identicon&r=PG&f=1", "display_name": "showdev", "link": "https://stackoverflow.com/users/924299/showdev"}, "edited": false, "score": 0, "creation_date": 1562790864, "post_id": 56978068, "comment_id": 100492520, "body": "Can you include a sample of your CSV data?"}, {"owner": {"reputation": 11, "user_id": 11766933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2f5763528b6cc25865443dbc1b3a388?s=128&d=identicon&r=PG&f=1", "display_name": "Sofia", "link": "https://stackoverflow.com/users/11766933/sofia"}, "reply_to_user": {"reputation": 25361, "user_id": 924299, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a142d1ec6b8444c9baf3ec6176e1cf61?s=128&d=identicon&r=PG&f=1", "display_name": "showdev", "link": "https://stackoverflow.com/users/924299/showdev"}, "edited": false, "score": 0, "creation_date": 1562791126, "post_id": 56978068, "comment_id": 100492612, "body": "@showdev Yes, it&#39;s rows separated by newlines and every value on each row are separated by semicolon. Newslines don&#39;t show here in the comment but there are 6 values per row then a new row. Anna;120;39;60;Kanske;DuckduckGo Sofia;120;39;45;Kanske;Bolly East;120;39;45;Kanske;Food Hut;120;Fri;45;Kanske;Duck Inne;120;Fri;45;Eventuellt;Var Efter;120;Fri;45;Eventuellt;Kanske"}, {"owner": {"reputation": 25361, "user_id": 924299, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a142d1ec6b8444c9baf3ec6176e1cf61?s=128&d=identicon&r=PG&f=1", "display_name": "showdev", "link": "https://stackoverflow.com/users/924299/showdev"}, "edited": false, "score": 0, "creation_date": 1562791407, "post_id": 56978068, "comment_id": 100492747, "body": "One issue I see is a typo in your second <code>for</code> loop: <code>cell_data.lengt</code> should be <code>cell_data.length</code>."}, {"owner": {"reputation": 11, "user_id": 11766933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2f5763528b6cc25865443dbc1b3a388?s=128&d=identicon&r=PG&f=1", "display_name": "Sofia", "link": "https://stackoverflow.com/users/11766933/sofia"}, "reply_to_user": {"reputation": 25361, "user_id": 924299, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a142d1ec6b8444c9baf3ec6176e1cf61?s=128&d=identicon&r=PG&f=1", "display_name": "showdev", "link": "https://stackoverflow.com/users/924299/showdev"}, "edited": false, "score": 0, "creation_date": 1562792641, "post_id": 56978068, "comment_id": 100493210, "body": "@showdev Thank you, I have updated that now."}, {"owner": {"reputation": 11, "user_id": 11766933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2f5763528b6cc25865443dbc1b3a388?s=128&d=identicon&r=PG&f=1", "display_name": "Sofia", "link": "https://stackoverflow.com/users/11766933/sofia"}, "reply_to_user": {"reputation": 25361, "user_id": 924299, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a142d1ec6b8444c9baf3ec6176e1cf61?s=128&d=identicon&r=PG&f=1", "display_name": "showdev", "link": "https://stackoverflow.com/users/924299/showdev"}, "edited": false, "score": 0, "creation_date": 1566843104, "post_id": 56978068, "comment_id": 101774679, "body": "@Anil I saw that you answered a similar question here: <a href=\"https://stackoverflow.com/questions/30119551/disappearing-list-items-when-sorting-searching-w-list-js\" title=\"disappearing list items when sorting searching w list js\">stackoverflow.com/questions/30119551/&hellip;</a>. Any possibility of helping me with this? Thanks in advance!"}], "owner": {"reputation": 11, "user_id": 11766933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2f5763528b6cc25865443dbc1b3a388?s=128&d=identicon&r=PG&f=1", "display_name": "Sofia", "link": "https://stackoverflow.com/users/11766933/sofia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1562793471, "creation_date": 1562790009, "last_edit_date": 1562793471, "question_id": 56978068, "link": "https://stackoverflow.com/questions/56978068/items-in-list-js-list-disappears-when-sorting", "title": "Items in List.js list disappears when sorting", "body": "<p>I am using List.js to create a sortable and searchable list, and I am also importing data from a CSV file into this list. I can do both of these things on their own but when I try to combine them, the list (that's been imported from CSV) disappears when I try to sort it.</p>\n\n<p>I am a newbie on everything except HTML so I would really appreciate if you could explain like I was a 5 year old.</p>\n\n<p>The CSV import goes on in the external javascript.js file.</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;script type=\"text/javascript\" src=\"javascript.js\"&gt;&lt;/script&gt;\n&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"//cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js\"&gt;&lt;/script&gt;\n\n&lt;div id=\"users\"&gt;\n  &lt;input class=\"search\" placeholder=\"Search\" /&gt;\n  &lt;button class=\"sort\" data-sort=\"name\"&gt;Sort by name&lt;/button&gt;\n  &lt;button class=\"sort\" data-sort=\"min-order\"&gt;Sort by minimum order&lt;/button&gt;\n  &lt;button class=\"sort\" data-sort=\"fee\"&gt;Sort by delivery fee&lt;/button&gt;\n  &lt;button class=\"sort\" data-sort=\"time\"&gt;Sort by delivery time&lt;/button&gt;\n  &lt;button class=\"sort\" data-sort=\"carrier\"&gt;Sort by carrier&lt;/button&gt;\n  &lt;button class=\"sort\" data-sort=\"url\"&gt;Sort by URL&lt;/button&gt;\n  &lt;ul class=\"list\"&gt;&lt;/ul&gt;\n&lt;/div&gt;\n</code></pre>\n\n<pre class=\"lang-js prettyprint-override\"><code>window.onload = function() {\n  $.ajax({\n    url: \"mydata.csv\",\n    dataType: \"text\",\n    success: function(data) {\n      var csv_file = data.split(/\\r?\\n|\\r/);\n      var table_data = '';\n      for (var count = 0; count &lt; csv_file.length; count++) {\n        var cell_data = csv_file[count].split(\";\");\n        table_data += '&lt;li&gt;';\n        for (var cell_count = 0; cell_count &lt; cell_data.length; cell_count++) {\n          if (cell_count === 0) {\n            table_data += '&lt;h3 class=\"name\"&gt;' + cell_data[cell_count] + '&lt;/h3&gt;';\n          } else if (cell_count === 1) {\n            table_data += '&lt;p class=\"min-order\"&gt;' + cell_data[cell_count] + '&lt;/p&gt;';\n          } else if (cell_count === 2) {\n            table_data += '&lt;p class=\"fee\"&gt;' + cell_data[cell_count] + '&lt;/p&gt;';\n          } else if (cell_count === 3) {\n            table_data += '&lt;p class=\"time\"&gt;' + cell_data[cell_count] + '&lt;/p&gt;';\n          } else if (cell_count === 4) {\n            table_data += '&lt;p class=\"carrier\"&gt;' + cell_data[cell_count] + '&lt;/p&gt;';\n          } else if (cell_count === 5) {\n            table_data += '&lt;p class=\"url\"&gt;' + cell_data[cell_count] + '&lt;/p&gt;';\n          } else {\n            table_data += '&lt;p&gt;' + cell_data[cell_count] + '&lt;/p&gt;';\n          }\n        }\n        table_data += '&lt;/li&gt;';\n      }\n      table_data += '';\n      $('.list').html(table_data);\n    }\n  });\nvar options = {\n  valueNames: ['name', 'min-order', 'fee', 'time', 'carrier', 'url']\n};\nvar userList = new List('users', options);\n};\n</code></pre>\n\n<p>Thanks in advance!!!</p>\n"}, {"tags": ["javascript"], "comments": [{"owner": {"reputation": 1778, "user_id": 10077371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mhNti.jpg?s=128&g=1", "display_name": "Fran&#231;ois Hupp&#233;", "link": "https://stackoverflow.com/users/10077371/fran%c3%a7ois-hupp%c3%a9"}, "edited": false, "score": 0, "creation_date": 1562790059, "post_id": 56978037, "comment_id": 100492203, "body": "are you using jquery ?"}, {"owner": {"reputation": 162920, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1562790344, "post_id": 56978037, "comment_id": 100492313, "body": "Each of those steps is easy to research. It&#39;s expected that you show some effort to solve your own issues before asking. Stackoverflow isn&#39;t a free code writing service. The objective is for you to show your attempts and people help you out when you are stuck with real code"}, {"owner": {"reputation": 5, "user_id": 4423906, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VA8q8dg_Ilg/AAAAAAAAAAI/AAAAAAAAAAA/Hv1m0Uo-4dM/photo.jpg?sz=128", "display_name": "wendee", "link": "https://stackoverflow.com/users/4423906/wendee"}, "reply_to_user": {"reputation": 162920, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1562791760, "post_id": 56978037, "comment_id": 100492884, "body": "Thank you @charlietfl for the feedback. I will update my example with the JS code that I have."}, {"owner": {"reputation": 5, "user_id": 4423906, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VA8q8dg_Ilg/AAAAAAAAAAI/AAAAAAAAAAA/Hv1m0Uo-4dM/photo.jpg?sz=128", "display_name": "wendee", "link": "https://stackoverflow.com/users/4423906/wendee"}, "reply_to_user": {"reputation": 162920, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1562792758, "post_id": 56978037, "comment_id": 100493252, "body": "@charlietfl, I have added my JS code. I am able to set the &quot;current&quot; class but having trouble with toggling the attribute values."}, {"owner": {"reputation": 5, "user_id": 4423906, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VA8q8dg_Ilg/AAAAAAAAAAI/AAAAAAAAAAA/Hv1m0Uo-4dM/photo.jpg?sz=128", "display_name": "wendee", "link": "https://stackoverflow.com/users/4423906/wendee"}, "reply_to_user": {"reputation": 1778, "user_id": 10077371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mhNti.jpg?s=128&g=1", "display_name": "Fran&#231;ois Hupp&#233;", "link": "https://stackoverflow.com/users/10077371/fran%c3%a7ois-hupp%c3%a9"}, "edited": false, "score": 0, "creation_date": 1562792865, "post_id": 56978037, "comment_id": 100493290, "body": "@Fran&#231;oisHupp&#233;, No, I am not using jquery but thank you for your example."}, {"owner": {"reputation": 1778, "user_id": 10077371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mhNti.jpg?s=128&g=1", "display_name": "Fran&#231;ois Hupp&#233;", "link": "https://stackoverflow.com/users/10077371/fran%c3%a7ois-hupp%c3%a9"}, "edited": false, "score": 0, "creation_date": 1562793688, "post_id": 56978037, "comment_id": 100493582, "body": "okok, i updated my answer"}, {"owner": {"reputation": 5, "user_id": 4423906, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VA8q8dg_Ilg/AAAAAAAAAAI/AAAAAAAAAAA/Hv1m0Uo-4dM/photo.jpg?sz=128", "display_name": "wendee", "link": "https://stackoverflow.com/users/4423906/wendee"}, "reply_to_user": {"reputation": 1778, "user_id": 10077371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mhNti.jpg?s=128&g=1", "display_name": "Fran&#231;ois Hupp&#233;", "link": "https://stackoverflow.com/users/10077371/fran%c3%a7ois-hupp%c3%a9"}, "edited": false, "score": 0, "creation_date": 1562810467, "post_id": 56978037, "comment_id": 100497067, "body": "@Fran&#231;oisHupp&#233;, Thanks! Your solution worked like a charm! Looking at it now, I don&#39;t know why I couldn&#39;t figure this out."}], "answers": [{"tags": [], "owner": {"reputation": 1778, "user_id": 10077371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mhNti.jpg?s=128&g=1", "display_name": "Fran&#231;ois Hupp&#233;", "link": "https://stackoverflow.com/users/10077371/fran%c3%a7ois-hupp%c3%a9"}, "is_accepted": true, "score": 0, "last_activity_date": 1562794553, "last_edit_date": 1562794553, "creation_date": 1562792768, "answer_id": 56978643, "question_id": 56978037, "link": "https://stackoverflow.com/questions/56978037/click-action-with-two-functions-to-add-remove-class-and-toggle-attribute-value/56978643#56978643", "title": "Click action with two functions: to add/remove class and toggle attribute value", "body": "<p>Try this:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>let el = document.querySelectorAll('.link');\r\n    for (let i = 0; i &lt; el.length; i++) {\r\n        el[i].onclick = function() {\r\n            let c = 0;\r\n            while (c &lt; el.length) {\r\n            el[c++].className = 'link';\r\n            }\r\n            el[i].className = 'link current';\r\n            \r\n            // toggle data-children attribute for clicked link and childs\r\n            var hidden_node = el[i].parentNode.querySelectorAll('[data-children=hidden]');\r\n            var visible_node = el[i].parentNode.querySelectorAll('[data-children=visible]');\r\n\r\n            for (let i = 0; i &lt; hidden_node.length; i++) {\r\n                hidden_node[i].setAttribute('data-children', 'visible');\r\n            }\r\n\r\n            for (let i = 0; i &lt; visible_node.length; i++) {\r\n                visible_node[i].setAttribute('data-children', 'hidden');\r\n            }\r\n        };\r\n    }</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;ul&gt;\r\n    &lt;li&gt;&lt;a href=\"#l1\" class=\"link\"&gt;Level 1&lt;/a&gt;&lt;/li&gt;\r\n    &lt;li&gt;&lt;a href=\"#l2\" class=\"link\" data-children=\"hidden\"&gt;Level 2&lt;/a&gt;\r\n        &lt;div class=\"children\"&gt;\r\n            &lt;ul&gt;\r\n                &lt;li&gt;&lt;a href=\"#l2-1\" class=\"link\"&gt;Level 2.1&lt;/a&gt;&lt;/li&gt;\r\n                &lt;li&gt;&lt;a href=\"#l2-2\" class=\"link\" data-children=\"hidden\"&gt;Level 2.2&lt;/a&gt;&lt;/li&gt;\r\n                &lt;li&gt;&lt;a href=\"#l2-3\" class=\"link\"&gt;Level 2.3&lt;/a&gt;&lt;/li&gt;\r\n            &lt;/ul&gt;\r\n        &lt;/div&gt;\r\n    &lt;/li&gt;\r\n    &lt;li&gt;&lt;a href=\"#l3\" class=\"link\"&gt;Level 3&lt;/a&gt;&lt;/li&gt;\r\n&lt;/ul&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 5, "user_id": 4423906, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VA8q8dg_Ilg/AAAAAAAAAAI/AAAAAAAAAAA/Hv1m0Uo-4dM/photo.jpg?sz=128", "display_name": "wendee", "link": "https://stackoverflow.com/users/4423906/wendee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 56978643, "answer_count": 1, "score": 0, "last_activity_date": 1562794553, "creation_date": 1562789892, "last_edit_date": 1562792668, "question_id": 56978037, "link": "https://stackoverflow.com/questions/56978037/click-action-with-two-functions-to-add-remove-class-and-toggle-attribute-value", "title": "Click action with two functions: to add/remove class and toggle attribute value", "body": "<p>I am working on a list of anchor links with nested anchor links and want to do a couple of things. </p>\n\n<p>When clicking on a link:</p>\n\n<ol>\n<li>add class of \"current\"</li>\n<li>remove class of \"current\" from any other link or nested link</li>\n<li>if the item has children, toggle the value of a data-attribute (i.e. data-children=\"visible\" or data-children=\"hidden\")</li>\n<li>and the anchor link should still work</li>\n</ol>\n\n<p>Just as a note, it does not matter to me whether or not the \"data-children\" attribute is on the parent a.link or on the div.children.</p>\n\n<p>HTML</p>\n\n<pre><code>&lt;ul&gt;\n    &lt;li&gt;&lt;a href=\"#l1\" class=\"link\"&gt;Level 1&lt;/a&gt;&lt;/li&gt;\n    &lt;li&gt;&lt;a href=\"#l2\" class=\"link\" data-children=\"hidden\"&gt;Level 2&lt;/a&gt;\n        &lt;div class=\"children\"&gt;\n            &lt;ul&gt;\n                &lt;li&gt;&lt;a href=\"#l2-1\" class=\"link\"&gt;Level 2.1&lt;/a&gt;&lt;/li&gt;\n                &lt;li&gt;&lt;a href=\"#l2-2\" class=\"link\" data-children=\"hidden\"&gt;Level 2.2&lt;/a&gt;&lt;/li&gt;\n                &lt;li&gt;&lt;a href=\"#l2-3\" class=\"link\"&gt;Level 2.3&lt;/a&gt;&lt;/li&gt;\n            &lt;/ul&gt;\n        &lt;/div&gt;\n    &lt;/li&gt;\n    &lt;li&gt;&lt;a href=\"#l3\" class=\"link\"&gt;Level 3&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>JavaScript</p>\n\n<pre><code>let el = document.querySelectorAll('.link');\nfor (let i = 0; i &lt; el.length; i++) {\n  el[i].onclick = function() {\n    let c = 0;\n    while (c &lt; el.length) {\n      el[c++].className = 'link';\n    }\n    el[i].className = 'link current';\n\n    let x = el.getAttribute('data-children');\n    if (x === 'visible') {\n      el.setAttribute('data-children', 'visible');\n    } else {\n      el.setAttribute('data-children', 'hidden');\n    }\n  };\n}\n</code></pre>\n\n<p>The expected result is to allow for any link to be the \"current\" link and the ability to toggle the display to any or all child links. </p>\n\n<p>Clicking on a parent link will add the class=\"link current\" and toggle attribute to data-children=\"visible\". Clicking the parent link again will toggle the attribute to data-children=\"hidden\" and the link will still have the class=\"link current\"</p>\n"}, {"tags": ["javascript", "react-data-grid"], "owner": {"reputation": 33, "user_id": 11766825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8Lk32vyn1DE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reoD0PkH68LOnug4flRzQPBTjrKCg/photo.jpg?sz=128", "display_name": "Liam", "link": "https://stackoverflow.com/users/11766825/liam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 780, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1562792680, "creation_date": 1562789871, "last_edit_date": 1562792680, "question_id": 56978033, "link": "https://stackoverflow.com/questions/56978033/react-data-grid-horizontal-scrolling-problem", "title": "react-data-grid horizontal scrolling problem", "body": "<p>I encountered two buggy scrolling behaviors with react-data-grid. One is the table header's delayed scrolling compared to the table body. The other one is the frozen columns' stuttering behavior. Both are only observed when scrolling with trackpad gestures.<br>\nSee the comparison scrolling by </p>\n\n<p><strong>trackpad</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/BeMRE.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BeMRE.gif\" alt=\"enter image description here\"></a></p>\n\n<p><strong>scrollbar</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/7P5gy.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7P5gy.gif\" alt=\"enter image description here\"></a></p>\n\n<p>And try it yourself here - <a href=\"https://adazzle.github.io/react-data-grid/docs/examples/frozen-columns\" rel=\"nofollow noreferrer\">their example</a></p>\n\n<p>I think that these issues are caused by inertial scrolling but I am having trouble finding a way to detect it (I tried lethargy but it does not work as well as it does in its demo) and even if I can, I can't implement it because the callback in onScroll event listener is nested inside the library. For a more detailed problem statement, I have also posted in <a href=\"https://github.com/adazzle/react-data-grid/issues/1386#issuecomment-510099011\" rel=\"nofollow noreferrer\">react-data-grid github repo</a></p>\n\n<p>Hope this is making sense. Any help is appreciated!</p>\n"}, {"tags": ["javascript", "html"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1562790021, "post_id": 56978022, "comment_id": 100492187, "body": "Replace <code>---</code> with <code>$1</code>."}, {"owner": {"reputation": 166, "user_id": 10901893, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TjgP0cZClK4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYTbLSJ9K_s3geDQ8WJ5aTttearUA/mo/photo.jpg?sz=128", "display_name": "Aleksander Ciecierski", "link": "https://stackoverflow.com/users/10901893/aleksander-ciecierski"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1562790048, "post_id": 56978022, "comment_id": 100492198, "body": "Can you explain me how does it work?"}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1562790071, "post_id": 56978022, "comment_id": 100492208, "body": "<a href=\"https://stackoverflow.com/questions/1234712/javascript-replace-with-reference-to-matched-group\" title=\"javascript replace with reference to matched group\">stackoverflow.com/questions/1234712/&hellip;</a>"}, {"owner": {"reputation": 166, "user_id": 10901893, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TjgP0cZClK4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYTbLSJ9K_s3geDQ8WJ5aTttearUA/mo/photo.jpg?sz=128", "display_name": "Aleksander Ciecierski", "link": "https://stackoverflow.com/users/10901893/aleksander-ciecierski"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1562790140, "post_id": 56978022, "comment_id": 100492237, "body": "I&#39;m not sure if I would want to do that... The browser would recognize <code>$1</code> as a variable"}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1562790167, "post_id": 56978022, "comment_id": 100492253, "body": "Not sure what you mean by that. Also, make sure you\u2019re doing that on something that\u2019s originally HTML, though, and that doesn\u2019t have attributes. It\u2019s easy to make a script injection vulnerability or mangle real-world HTML. So: are you doing this on HTML, or on text?"}, {"owner": {"reputation": 166, "user_id": 10901893, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TjgP0cZClK4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYTbLSJ9K_s3geDQ8WJ5aTttearUA/mo/photo.jpg?sz=128", "display_name": "Aleksander Ciecierski", "link": "https://stackoverflow.com/users/10901893/aleksander-ciecierski"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1562790240, "post_id": 56978022, "comment_id": 100492283, "body": "So I would just need to replace the content of the string itself?"}, {"owner": {"reputation": 166, "user_id": 10901893, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TjgP0cZClK4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYTbLSJ9K_s3geDQ8WJ5aTttearUA/mo/photo.jpg?sz=128", "display_name": "Aleksander Ciecierski", "link": "https://stackoverflow.com/users/10901893/aleksander-ciecierski"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1562790334, "post_id": 56978022, "comment_id": 100492309, "body": "@Rt- It&#39;s HTML stored in a variable, after wrapping the text I write it back onto the page."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1562790388, "post_id": 56978022, "comment_id": 100492329, "body": "And it never has any attributes in it, like <code>&lt;a href=&quot;\u2026&quot;&gt;</code>?"}, {"owner": {"reputation": 166, "user_id": 10901893, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TjgP0cZClK4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYTbLSJ9K_s3geDQ8WJ5aTttearUA/mo/photo.jpg?sz=128", "display_name": "Aleksander Ciecierski", "link": "https://stackoverflow.com/users/10901893/aleksander-ciecierski"}, "reply_to_user": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1562790462, "post_id": 56978022, "comment_id": 100492356, "body": "The only attribute I use is the class attribute so I can style the wrapper element."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1562790805, "post_id": 56978022, "comment_id": 100492499, "body": "Great, just wanted to make sure it was safe to use :D"}], "answers": [{"tags": [], "owner": {"reputation": 8719, "user_id": 6951428, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/92fd81a6020da8e77fc9125e0c9ec512?s=128&d=identicon&r=PG&f=1", "display_name": "junvar", "link": "https://stackoverflow.com/users/6951428/junvar"}, "is_accepted": false, "score": 1, "last_activity_date": 1562790082, "creation_date": 1562790082, "answer_id": 56978083, "question_id": 56978022, "link": "https://stackoverflow.com/questions/56978022/javascript-wrap-all-text-between-apostrophes-in-a-span/56978083#56978083", "title": "JavaScript: Wrap all text between apostrophes in a span", "body": "<p>You're quite close. You can use <code>$n</code> syntax in your replace string which will correspond to the <code>n</code>'th capture group.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>let x = '\"yo\" bro \"more\"';\r\nlet y = x.replace(/\"(.*?)\"/g, '&lt;span&gt;$1&lt;/span&gt;');\r\nconsole.log(y);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_string_as_a_parameter\" rel=\"nofollow noreferrer\">mdn</a></p>\n"}], "owner": {"reputation": 166, "user_id": 10901893, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TjgP0cZClK4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYTbLSJ9K_s3geDQ8WJ5aTttearUA/mo/photo.jpg?sz=128", "display_name": "Aleksander Ciecierski", "link": "https://stackoverflow.com/users/10901893/aleksander-ciecierski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "closed_date": 1562790786, "answer_count": 1, "score": 0, "last_activity_date": 1562790082, "creation_date": 1562789823, "question_id": 56978022, "link": "https://stackoverflow.com/questions/56978022/javascript-wrap-all-text-between-apostrophes-in-a-span", "closed_reason": "Duplicate", "title": "JavaScript: Wrap all text between apostrophes in a span", "body": "<p>I have a small piece of text:\n<code>\"some text\" some more text \"even more text\"</code></p>\n\n<p>What I wanna do is to wrap everything between apostrophes in a span container just like hilight.js does. I can't really find a way to make it working.</p>\n\n<p>Could somebody please explain me what would be the ideal way to do this?</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var body = document.querySelector('body');\r\n\r\nvar code = body.innerHTML;\r\nvar code = code.replace(/\"(.*?)\"/g,\"&lt;span&gt;---&lt;/span&gt;\");\r\nbody.innerHTML = code;</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>span {\r\n  color: red;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;body&gt;\r\n&lt;p&gt;Corrent result:&lt;/p&gt;\r\n\"some text\" some more text \"even more text\"\r\n&lt;p&gt;The result would be:&lt;/p&gt;\r\n&lt;p&gt;&lt;span&gt;some text&lt;/span&gt; some more text &lt;span&gt;even more text&lt;/span&gt;&lt;/p&gt;\r\n&lt;/body&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["javascript", "html"], "comments": [{"owner": {"reputation": 661, "user_id": 7623407, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209740955735539/picture?type=large", "display_name": "R10t--", "link": "https://stackoverflow.com/users/7623407/r10t"}, "edited": false, "score": 0, "creation_date": 1562789899, "post_id": 56978018, "comment_id": 100492133, "body": "Look in to <code>onClick</code> functions and <a href=\"https://www.w3schools.com/jsref/met_win_setinterval.asp\" rel=\"nofollow noreferrer\">setInterval</a>"}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1562791026, "post_id": 56978188, "comment_id": 100492573, "body": "You never assign the result of <code>setInterval()</code> to the <code>interval</code> variable."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1562791063, "post_id": 56978188, "comment_id": 100492589, "body": "Just write <code>if (x)</code>"}, {"owner": {"reputation": 92, "user_id": 11418352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Dpkd0CDRX2w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfMac-t69maLBJiX-XA79PJL5LjBA/mo/photo.jpg?sz=128", "display_name": "Alex Desruisseau", "link": "https://stackoverflow.com/users/11418352/alex-desruisseau"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1562791266, "post_id": 56978188, "comment_id": 100492678, "body": "Sorry, Copy / Paste cut off part of his command.  I have updated accordingly."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1562791304, "post_id": 56978188, "comment_id": 100492693, "body": "<code>interval</code> needs to be a global variable."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1562791343, "post_id": 56978188, "comment_id": 100492714, "body": "Use the snippet editor, it has a Tidy button to fix the code formatting."}, {"owner": {"reputation": 23, "user_id": 11766935, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-T0gZFldbKdU/AAAAAAAAAAI/AAAAAAAAE_g/Z-SmZlWn5_g/photo.jpg?sz=128", "display_name": "Jonas Alpha", "link": "https://stackoverflow.com/users/11766935/jonas-alpha"}, "edited": false, "score": 0, "creation_date": 1562791929, "post_id": 56978188, "comment_id": 100492946, "body": "appreciate it :) But somehow it only &quot;pings&quot; the function apiping() once"}, {"owner": {"reputation": 92, "user_id": 11418352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Dpkd0CDRX2w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfMac-t69maLBJiX-XA79PJL5LjBA/mo/photo.jpg?sz=128", "display_name": "Alex Desruisseau", "link": "https://stackoverflow.com/users/11418352/alex-desruisseau"}, "reply_to_user": {"reputation": 23, "user_id": 11766935, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-T0gZFldbKdU/AAAAAAAAAAI/AAAAAAAAE_g/Z-SmZlWn5_g/photo.jpg?sz=128", "display_name": "Jonas Alpha", "link": "https://stackoverflow.com/users/11766935/jonas-alpha"}, "edited": false, "score": 0, "creation_date": 1562791995, "post_id": 56978188, "comment_id": 100492978, "body": "@JonasAlpha could you show us what the apiping function looks like right now?"}, {"owner": {"reputation": 661, "user_id": 7623407, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209740955735539/picture?type=large", "display_name": "R10t--", "link": "https://stackoverflow.com/users/7623407/r10t"}, "edited": false, "score": 0, "creation_date": 1562792090, "post_id": 56978188, "comment_id": 100493017, "body": "Use <code>interval = setInterval(apiping,5000);</code>, It shouldn&#39;t have function brackets<code>()</code>, <a href=\"https://www.w3schools.com/jsref/met_win_setinterval.asp\" rel=\"nofollow noreferrer\">setInterval</a> expects a reference to a function."}, {"owner": {"reputation": 23, "user_id": 11766935, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-T0gZFldbKdU/AAAAAAAAAAI/AAAAAAAAE_g/Z-SmZlWn5_g/photo.jpg?sz=128", "display_name": "Jonas Alpha", "link": "https://stackoverflow.com/users/11766935/jonas-alpha"}, "edited": false, "score": 0, "creation_date": 1562792224, "post_id": 56978188, "comment_id": 100493070, "body": "I&#39;ve updated the Post with the function aswell a Gist of the whole website"}, {"owner": {"reputation": 23, "user_id": 11766935, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-T0gZFldbKdU/AAAAAAAAAAI/AAAAAAAAE_g/Z-SmZlWn5_g/photo.jpg?sz=128", "display_name": "Jonas Alpha", "link": "https://stackoverflow.com/users/11766935/jonas-alpha"}, "edited": false, "score": 0, "creation_date": 1562792790, "post_id": 56978188, "comment_id": 100493261, "body": "Okay so it works.. kinda.. I&#39;m having the same Issue again where clearInterval doesn&#39;t seem to work. It keeps pinging the API"}, {"owner": {"reputation": 23, "user_id": 11766935, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-T0gZFldbKdU/AAAAAAAAAAI/AAAAAAAAE_g/Z-SmZlWn5_g/photo.jpg?sz=128", "display_name": "Jonas Alpha", "link": "https://stackoverflow.com/users/11766935/jonas-alpha"}, "edited": false, "score": 1, "creation_date": 1562793424, "post_id": 56978188, "comment_id": 100493482, "body": "NVM. Working now. Updated the Original Post with the working code"}], "tags": [], "owner": {"reputation": 92, "user_id": 11418352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Dpkd0CDRX2w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfMac-t69maLBJiX-XA79PJL5LjBA/mo/photo.jpg?sz=128", "display_name": "Alex Desruisseau", "link": "https://stackoverflow.com/users/11418352/alex-desruisseau"}, "is_accepted": true, "score": 1, "last_activity_date": 1562855291, "last_edit_date": 1562855291, "creation_date": 1562790570, "answer_id": 56978188, "question_id": 56978018, "link": "https://stackoverflow.com/questions/56978018/repeat-function-while-checkbox-is-active/56978188#56978188", "title": "Repeat function while checkbox is active", "body": "<pre><code>&lt;input type=\"checkbox\" onclick=\"TryApiPing()\" id=\"foo\"/&gt;\n</code></pre>\n\n<pre><code>var interval;\nTryApiPing() {\nx = document.getElementById(\"foo\").checked;\n  if (x)\n  {\n    //makemagichappen\n    interval = setInterval(apiping,5000);\n  }\n  else {clearInterval(interval);}\n}\n</code></pre>\n\n<p>Sorry I'm not in front of my computer so the formatting might not be perfect but this function executes on click and checks the 'checked' property of the checkbox.  Inside of the if decision, you can use interval and the other code to make sure it happens repeatedly.  If the button is checked off, the function should call again and stop.</p>\n"}], "owner": {"reputation": 23, "user_id": 11766935, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-T0gZFldbKdU/AAAAAAAAAAI/AAAAAAAAE_g/Z-SmZlWn5_g/photo.jpg?sz=128", "display_name": "Jonas Alpha", "link": "https://stackoverflow.com/users/11766935/jonas-alpha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 56978188, "answer_count": 1, "score": 0, "last_activity_date": 1562855291, "creation_date": 1562789790, "last_edit_date": 1562793402, "question_id": 56978018, "link": "https://stackoverflow.com/questions/56978018/repeat-function-while-checkbox-is-active", "title": "Repeat function while checkbox is active", "body": "<p>I'm currently working on a Website that pings an API to receive images. Now I want to add a Checkbox which when pressed executes the function <code>apiping()</code> every 5 or so seconds as long as the checkbox is active. When the Checkbox isn't activate nothing should happen.</p>\n\n<p>Edit (because im a fricking idiot):\nI have already tried the whole setInterval onClick stuff. For Example, if Checkbox is activate <code>var interval = setInterval(apiping(),5000);</code> and when the Checkbox is not activate <code>clearInterval(interval);</code>. That worked except the clearInterval part which didn't work.</p>\n\n<p>Edit 2:\nHere is function apiping:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>      let url = 'https://nekos.life/api/neko';\n      function apiping(){\n        fetch(url)\n        .then(res =&gt; res.json())\n        .then((out) =&gt; {\n        console.log('Checkout this JSON! ', out.neko);\n        imglink = out.neko\n        document.getElementById(\"img\").src = out.neko;\n        document.getElementById(\"imgbig\").src = out.neko;\n        })\n        .catch(err =&gt; { throw err });\n      }\n      apiping();\n</code></pre>\n\n<p><strong>SOLUTION</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>       var interval;\n\n        function TryApiPing() {\n          x = document.getElementById(\"slideshow\").checked;\n          if (x) {\n            //makemagichappen\n            interval = setInterval(apiping, 2000);\n          } else {\n            clearInterval(interval);\n          }\n        }\n</code></pre>\n\n<p>This works. Thanks to everyone helping :D</p>\n"}, {"tags": ["javascript", "reactjs"], "comments": [{"owner": {"reputation": 1139, "user_id": 11688161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb1a74e5a201b09179b17561af2d6077?s=128&d=identicon&r=PG&f=1", "display_name": "Monika Mangal", "link": "https://stackoverflow.com/users/11688161/monika-mangal"}, "edited": false, "score": 0, "creation_date": 1562790362, "post_id": 56978009, "comment_id": 100492321, "body": "What is the error that you are getting? If there is any."}, {"owner": {"reputation": 1291, "user_id": 2320476, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/5ce43683e7452290b28cb43e3f709118?s=128&d=identicon&r=PG", "display_name": "user2320476", "link": "https://stackoverflow.com/users/2320476/user2320476"}, "reply_to_user": {"reputation": 1139, "user_id": 11688161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb1a74e5a201b09179b17561af2d6077?s=128&d=identicon&r=PG&f=1", "display_name": "Monika Mangal", "link": "https://stackoverflow.com/users/11688161/monika-mangal"}, "edited": false, "score": 0, "creation_date": 1562791133, "post_id": 56978009, "comment_id": 100492616, "body": "it says cleanup is not defined"}, {"owner": {"reputation": 1139, "user_id": 11688161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb1a74e5a201b09179b17561af2d6077?s=128&d=identicon&r=PG&f=1", "display_name": "Monika Mangal", "link": "https://stackoverflow.com/users/11688161/monika-mangal"}, "edited": false, "score": 0, "creation_date": 1562791328, "post_id": 56978009, "comment_id": 100492702, "body": "According to your question I guess its not cleanup but invoice."}, {"owner": {"reputation": 656, "user_id": 7034333, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/z6tEg.png?s=128&g=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/7034333/jake"}, "edited": false, "score": 0, "creation_date": 1562791649, "post_id": 56978009, "comment_id": 100492841, "body": "So is the issue that its just giving you the wrong date? You should add more code to make it easier to understand."}, {"owner": {"reputation": 1291, "user_id": 2320476, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/5ce43683e7452290b28cb43e3f709118?s=128&d=identicon&r=PG", "display_name": "user2320476", "link": "https://stackoverflow.com/users/2320476/user2320476"}, "edited": false, "score": 0, "creation_date": 1562791735, "post_id": 56978009, "comment_id": 100492870, "body": "Yes the date is wrong."}], "answers": [{"comments": [{"owner": {"reputation": 1291, "user_id": 2320476, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/5ce43683e7452290b28cb43e3f709118?s=128&d=identicon&r=PG", "display_name": "user2320476", "link": "https://stackoverflow.com/users/2320476/user2320476"}, "edited": false, "score": 0, "creation_date": 1562793015, "post_id": 56978460, "comment_id": 100493335, "body": "This works. I am actually using moment. Is it possible to get the paymentDate in this format Dec-26-2018?"}], "tags": [], "owner": {"reputation": 4813, "user_id": 1771994, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/92bb8a32559190ac0aa783c02c3c0299?s=128&d=identicon&r=PG&f=1", "display_name": "Tom O.", "link": "https://stackoverflow.com/users/1771994/tom-o"}, "is_accepted": true, "score": -1, "last_activity_date": 1562853231, "last_edit_date": 1562853231, "creation_date": 1562791889, "answer_id": 56978460, "question_id": 56978009, "link": "https://stackoverflow.com/questions/56978009/changing-the-format-of-a-date-field-in-an-array-in-a-react-application/56978460#56978460", "title": "Changing the format of a date field in an array in a react application", "body": "<p>You could do something like this (if you're not working with any date/time library - it's probably easier if you do):</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const invoices = [{\r\n  invoiceId: 123456,\r\n  customerId: 2345,\r\n  paymentDate: \"2018-12-26T06:00:000+0000\"\r\n}, {\r\n  invoiceId: 623496,\r\n  customerId: 2345,\r\n  paymentDate: \"2017-12-26T06:00:000+0000\"\r\n}, {\r\n  invoiceId: 523456,\r\n  customerId: 2345,\r\n  paymentDate: \"2016-12-26T06:00:000+0000\"\r\n}];\r\n\r\nconst getDate = el =&gt; new Date(el.paymentDate.substring(0, el.paymentDate.indexOf('T'))).toLocaleDateString(\"en-US\");\r\n\r\nconsole.log(invoices.map(el =&gt; ({ ...el,\r\n  paymentDate: getDate(el)\r\n})));</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 1139, "user_id": 11688161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb1a74e5a201b09179b17561af2d6077?s=128&d=identicon&r=PG&f=1", "display_name": "Monika Mangal", "link": "https://stackoverflow.com/users/11688161/monika-mangal"}, "edited": false, "score": 0, "creation_date": 1562794422, "post_id": 56978754, "comment_id": 100493805, "body": "@user2320476 this will work. Try and let me know if this works for you."}], "tags": [], "owner": {"reputation": 1139, "user_id": 11688161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb1a74e5a201b09179b17561af2d6077?s=128&d=identicon&r=PG&f=1", "display_name": "Monika Mangal", "link": "https://stackoverflow.com/users/11688161/monika-mangal"}, "is_accepted": false, "score": -1, "last_activity_date": 1562794318, "last_edit_date": 1562794318, "creation_date": 1562793389, "answer_id": 56978754, "question_id": 56978009, "link": "https://stackoverflow.com/questions/56978009/changing-the-format-of-a-date-field-in-an-array-in-a-react-application/56978754#56978754", "title": "Changing the format of a date field in an array in a react application", "body": "<p>The correct way to update the states is as follows - </p>\n\n<pre><code>const invoice = this.state.invoice;\ninvoice.forEach(function(invoice) {\n            const newDate = invoice.paymentDate.substring(0, invoice.paymentDate.indexOf('T'));\n        invoice.paymentDate = moment(newDate, 'YYYY-MM-DD').format('MMM-DD-YYYY');\n        });\n\nthis.setState({\n  invoice: invoice\n})\n</code></pre>\n"}], "owner": {"reputation": 1291, "user_id": 2320476, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/5ce43683e7452290b28cb43e3f709118?s=128&d=identicon&r=PG", "display_name": "user2320476", "link": "https://stackoverflow.com/users/2320476/user2320476"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 56978460, "answer_count": 2, "score": -2, "last_activity_date": 1562853231, "creation_date": 1562789745, "question_id": 56978009, "link": "https://stackoverflow.com/questions/56978009/changing-the-format-of-a-date-field-in-an-array-in-a-react-application", "title": "Changing the format of a date field in an array in a react application", "body": "<p>I am working on a react app and I have an array called invoices below</p>\n\n<pre><code>    invoices[]\n</code></pre>\n\n<p>This is the content of the invoices array</p>\n\n<pre><code>    0:{invoiceId:123456,customerId: 2345, paymentDate:\"2018-12-26T06:00:000+0000\"}\n    1:{invoiceId:623496,customerId: 2345, paymentDate:\"2017-12-26T06:00:000+0000\"}\n    2:{invoiceId:523456,customerId: 2345, paymentDate:\"2016-12-26T06:00:000+0000\"}\n</code></pre>\n\n<p>I want to loop through the array and format the paymentDate with the code below\nbut this is not working. The format is not changing. </p>\n\n<pre><code>     this.state.invoices.forEach(function(cleanup){\n          (moment(cleanup.paymentDate).format('MMM-DD-YYYY'));\n        });\n</code></pre>\n\n<p>How can I achieve this? I don't want to change the structure of the array but \njust change the format of the paymentDate</p>\n"}, {"tags": ["javascript", "reactjs", "react-big-calendar"], "comments": [{"owner": {"reputation": 836, "user_id": 623541, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f8eee78b7fbca783d776b157f348b3f?s=128&d=identicon&r=PG", "display_name": "Fred", "link": "https://stackoverflow.com/users/623541/fred"}, "edited": false, "score": 0, "creation_date": 1562789984, "post_id": 56977994, "comment_id": 100492168, "body": "So what is your question?"}, {"owner": {"reputation": 1, "user_id": 10460762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ade14bcadd03082e281867abc61bc2e?s=128&d=identicon&r=PG&f=1", "display_name": "F3rro", "link": "https://stackoverflow.com/users/10460762/f3rro"}, "reply_to_user": {"reputation": 836, "user_id": 623541, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f8eee78b7fbca783d776b157f348b3f?s=128&d=identicon&r=PG", "display_name": "Fred", "link": "https://stackoverflow.com/users/623541/fred"}, "edited": false, "score": 0, "creation_date": 1562860417, "post_id": 56977994, "comment_id": 100520585, "body": "How to create event over multiply days with the onSelectSlot method from react-ig-calendar? I cant select over multiple days but i need to."}], "owner": {"reputation": 1, "user_id": 10460762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ade14bcadd03082e281867abc61bc2e?s=128&d=identicon&r=PG&f=1", "display_name": "F3rro", "link": "https://stackoverflow.com/users/10460762/f3rro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 226, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562869258, "creation_date": 1562789676, "last_edit_date": 1562869258, "question_id": 56977994, "link": "https://stackoverflow.com/questions/56977994/how-to-create-event-over-multiply-days-with-the-onselectslot-method-from-react-b", "title": "How to create event over multiply days with the onSelectSlot method from react-big-calendar?", "body": "<p>I need to create an events that starts at one day and ends at another.\nI want to use the OnSelectSlot method from react-big-Calendar.</p>\n\n<p>Example event</p>\n\n<ul>\n<li>Start: Monday 13:00 </li>\n<li>List Ends : Wednesday 13:00</li>\n<li>Title: TEST-Seminar</li>\n</ul>\n\n<p>The problem is that i can only select timeslots on one day to a maximal time of 23:59:59\n<a href=\"https://i.stack.imgur.com/4au1U.png\" rel=\"nofollow noreferrer\">see here</a>.\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>//React hooks for events and selected week\r\nconst [events, setEvents] = useState([])\r\nconst [selectedDate, setSelectedDate] = useState(new Date())\r\n&lt;Calendar\r\n    showMultiDayTimes={true}\r\n    selectable={true}\r\n    views={['week']}\r\n    defaultView='week'\r\n    defaultDate={selectedDate}\r\n    events={events}\r\n    onNavigate={(date) =&gt; setSelectedDate(new Date(date))}\r\n    onSelectSlot={(event) =&gt; console.log(event)}\r\n    onSelecting={(event) =&gt; console.log(event)}\r\n/&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["javascript", "jquery", "utc"], "comments": [{"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 1, "creation_date": 1562789853, "post_id": 56977988, "comment_id": 100492118, "body": "Using <code>new Date(string)</code> with anything other than very specific formats is implementation-dependent and not defined. See the duplicate."}, {"owner": {"reputation": 5, "user_id": 11751565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28e58f2e2344a1a569e4a2d4cab8ca58?s=128&d=identicon&r=PG&f=1", "display_name": "djmattc", "link": "https://stackoverflow.com/users/11751565/djmattc"}, "reply_to_user": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1562852782, "post_id": 56977988, "comment_id": 100516020, "body": "Thanks, I wasn&#39;t searching for the correct terminology."}], "owner": {"reputation": 5, "user_id": 11751565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28e58f2e2344a1a569e4a2d4cab8ca58?s=128&d=identicon&r=PG&f=1", "display_name": "djmattc", "link": "https://stackoverflow.com/users/11751565/djmattc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 17, "favorite_count": 0, "closed_date": 1562790798, "answer_count": 0, "score": 0, "last_activity_date": 1562789658, "creation_date": 1562789658, "question_id": 56977988, "link": "https://stackoverflow.com/questions/56977988/inconsistent-time-results-with-utc-time-conversion-on-iphone-ipad-chrome", "closed_reason": "Duplicate", "title": "Inconsistent time results with UTC time conversion on iPhone/iPad (Chrome)", "body": "<p>I'm extracting a UTC time from a database which returns as the following format, YYYY-MM-DD HH:MM:SS e.g. 2019-07-10 10:30:00</p>\n\n<p>Using the code below I'm getting inconsistent results on different platforms despite using Chrome on both devices. One device is Windows 10, the other devices are iPhone/iPad.</p>\n\n<p>I'm in the GMT time zone so currently my local time is +1 from UTC.</p>\n\n<p>Here are the results I'm getting for various code based on the value of sql_local_datetime  :-</p>\n\n<p>iPhone: Invalid, \nWindows: -1 hour</p>\n\n<pre><code>var sql_datetime = \"2019-07-10 10:30:00\";\nvar sql_local_datetime = new Date(sql_datetime);\n</code></pre>\n\n<p>iPhone: Correct time, \nWindows: -1 hour</p>\n\n<pre><code>var sql_datetime = \"2019-07-10 10:30:00\";\nvar sql_local_datetime = new Date(sql_datetime.replace(' ', 'T'));\n</code></pre>\n\n<p>iPhone: Invalid, \nWindows: Invalid</p>\n\n<pre><code>var sql_datetime = \"2019-07-10 10:30:00 GMT\";\nvar sql_local_datetime = new Date(sql_datetime.replace(' ', 'T'));\n</code></pre>\n\n<p>iPhone: Invalid, \nWindows: Correct time</p>\n\n<pre><code>var sql_datetime = \"2019-07-10 10:30:00 GMT\";\nvar sql_local_datetime = new Date(sql_datetime);\n</code></pre>\n\n<p>The code above is based on other answers I've scoured but I'm unable to get the time valid on both devices whilst still converting the time from UTC to local (GMT).</p>\n\n<p>My question is, how can I modify my code to output the correct time adjustment on all platforms based on the local offset?</p>\n"}, {"tags": ["javascript"], "comments": [{"owner": {"reputation": 76753, "user_id": 1026459, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/pv5mS.png?s=128&g=1", "display_name": "Travis J", "link": "https://stackoverflow.com/users/1026459/travis-j"}, "edited": false, "score": 2, "creation_date": 1562789627, "post_id": 56977969, "comment_id": 100492028, "body": "Use .<code>outerHTML</code> on the svg variable."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1562789686, "post_id": 56977969, "comment_id": 100492050, "body": "<code>${svg.outerHTML}</code>"}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1562789693, "post_id": 56977969, "comment_id": 100492052, "body": "And putting it into <code>result.innerHTML</code>\u2026? Do you just want to move or copy the SVG? Because that\u2019d be <code>result.appendChild(svg)</code> or <code>result.appendChild(svg.cloneNode(true))</code>."}], "answers": [{"tags": [], "owner": {"reputation": 4252, "user_id": 3103891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mZxsu.jpg?s=128&g=1", "display_name": "GalAbra", "link": "https://stackoverflow.com/users/3103891/galabra"}, "is_accepted": true, "score": 2, "last_activity_date": 1562828791, "last_edit_date": 1562828791, "creation_date": 1562791313, "answer_id": 56978342, "question_id": 56977969, "link": "https://stackoverflow.com/questions/56977969/how-to-get-an-object-as-a-string-in-innerhtml/56978342#56978342", "title": "How to get an object as a string in innerHTML?", "body": "<p><a href=\"https://www.w3schools.com/jsref/prop_node_parentelement.asp\" rel=\"nofollow noreferrer\"><code>parentElement</code></a> is an <em>HTML DOM Element <strong>Object</em></strong>.</p>\n\n<p>When you inject it using the <code>${svg}</code>, you actually call its <code>toString()</code> method, which returns the string <code>[object HTMLDivElement]</code>.</p>\n\n<p>As suggested, if you'll use the <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Element/outerHTML#Value\" rel=\"nofollow noreferrer\"><code>outerHTML</code></a> property of <code>svg</code>, you'll get the result you're expecting:</p>\n\n<blockquote>\n  <p>Reading the value of <code>outerHTML</code> returns a <code>DOMString</code> containing an HTML serialization of the element and its descendants</p>\n</blockquote>\n"}], "owner": {"reputation": 69, "user_id": 8205264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HS9x1.png?s=128&g=1", "display_name": "JoshuaLC", "link": "https://stackoverflow.com/users/8205264/joshualc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 56978342, "answer_count": 1, "score": 1, "last_activity_date": 1562828791, "creation_date": 1562789581, "last_edit_date": 1562791380, "question_id": 56977969, "link": "https://stackoverflow.com/questions/56977969/how-to-get-an-object-as-a-string-in-innerhtml", "title": "How to get an object as a string in innerHTML?", "body": "<p>So I'm targeting my svg and its surrounding div:</p>\n\n<pre><code>const svg = e.target.parentElement;\n</code></pre>\n\n<p>Then I have <code>${svg}</code> in the following context:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>result.innerHTML = &lt;h1 class=\"text-win\"&gt;You won&lt;/h1&gt; &lt;div class=\"result\"&gt; ${svg} &lt;/div&gt;\n</code></pre>\n\n<p>But I always get <code>${svg}</code> as <code>[object HTMLDivElement]</code>. How would I get the <code>svg</code> to display as a string instead of an object?</p>\n"}, {"tags": ["javascript", "vue.js", "charts"], "comments": [{"owner": {"reputation": 1684, "user_id": 2075484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79269eff1473ad63c55b94e0cc730e46?s=128&d=identicon&r=PG", "display_name": "aquilesb", "link": "https://stackoverflow.com/users/2075484/aquilesb"}, "edited": false, "score": 0, "creation_date": 1562823836, "post_id": 56977968, "comment_id": 100499925, "body": "You have described the expected behavior. When this component is mounted you retrieve data from your API and change the <code>datas</code> field. After that <code>getDates</code> is computed and it will change the <code>dates</code> data attribute. After that, it is not going to change anymore."}, {"owner": {"reputation": 645, "user_id": 695156, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/90e478591937482d1045181ad957a6b2?s=128&d=identicon&r=PG", "display_name": "Intelwalk", "link": "https://stackoverflow.com/users/695156/intelwalk"}, "reply_to_user": {"reputation": 1684, "user_id": 2075484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79269eff1473ad63c55b94e0cc730e46?s=128&d=identicon&r=PG", "display_name": "aquilesb", "link": "https://stackoverflow.com/users/2075484/aquilesb"}, "edited": false, "score": 0, "creation_date": 1562847581, "post_id": 56977968, "comment_id": 100512642, "body": "@aquilesb This is where I am confused.  getDates should be changing the dates variable, which it is as I can see it displayed at {{dates}} on my screen, but when I use dates as the data for my chart it only updates it correctly when I first change it to dates and save it that one time.  Then when I reload the page it doesn&#39;t come back right."}, {"owner": {"reputation": 1684, "user_id": 2075484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79269eff1473ad63c55b94e0cc730e46?s=128&d=identicon&r=PG", "display_name": "aquilesb", "link": "https://stackoverflow.com/users/2075484/aquilesb"}, "edited": false, "score": 0, "creation_date": 1562849192, "post_id": 56977968, "comment_id": 100513664, "body": "Reload the page, do you mean F5? Because if you reload the page, the <code>mounted</code> event will be fired again, and again you will load the data. The only thing I can see in your code, which I would change, is I would remove <code>this.dates</code>, you don&#39;t need this variable. You can create a variable internally in <code>getDates</code> function and return it after populate with <code>this.datas</code> data. And every time you need the dates, you call <code>getDates</code>."}], "owner": {"reputation": 645, "user_id": 695156, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/90e478591937482d1045181ad957a6b2?s=128&d=identicon&r=PG", "display_name": "Intelwalk", "link": "https://stackoverflow.com/users/695156/intelwalk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 192, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562789573, "creation_date": 1562789573, "question_id": 56977968, "link": "https://stackoverflow.com/questions/56977968/vue-application-using-chartkick-doesnt-update-chart-correctly", "title": "Vue Application Using Chartkick Doesn&#39;t update chart correctly", "body": "<p>I know my mount and computed methods work since I can send that out to be displayed, but my graph only renders after I change the data value in the template to the correct thing that one time and doesn't render it again.  Should I be using method so it calculates it everytime or do I need to use Vuex for this issue?  Thanks</p>\n\n<pre><code>&lt;template&gt;\n  &lt;v-app&gt;\n    {{getDates}}\n    &lt;v-card class=\"mt-3 mx-auto\" max-width=\"500\"&gt;\n      &lt;v-sheet\n        class=\"v-sheet--offset mx-auto\"\n        color=\"cyan\"\n        elevation=\"12\"\n        min-width=\"125%\"\n        max-width=\"calc(100% - 32px)\"\n      &gt;\n        &lt;line-chart :data=\"dates\"&gt;&lt;/line-chart&gt;\n      &lt;/v-sheet&gt;\n\n      &lt;v-card-text class=\"pt-0\"&gt;\n        &lt;div class=\"title font-weight-light mb-2\"&gt;Lead&lt;/div&gt;\n        &lt;div class=\"subheading font-weight-light grey--text\"&gt;TEST TEXT&lt;/div&gt;\n        &lt;v-divider class=\"my-2\"&gt;&lt;/v-divider&gt;\n        &lt;v-icon class=\"mr-2\" small&gt;mdi-clock&lt;/v-icon&gt;\n        &lt;span class=\"caption grey--text font-weight-light\"&gt;TEST TEXT&lt;/span&gt;\n      &lt;/v-card-text&gt;\n    &lt;/v-card&gt;\n    &lt;p&gt;108J View&lt;/p&gt;\n  &lt;/v-app&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nimport axios from \"axios\";\n\nexport default {\n  name: \"E108J\",\n  components: {},\n  data() {\n    return {\n      value: [246, 446, 675, 510, 590, 610, 760],\n      datas: [],\n      dates: {},\n      lead: [],\n      datesnlead: {}\n    };\n  },\n  mounted() {\n    axios\n      .get(\"http://localhost:3000/E108J\")\n      .then(response =&gt; (this.datas = response.data));\n  },\n  computed: {\n    getDates() {\n      for (let i = 0; i &lt; this.datas.length; i++) {\n        this.dates[this.datas[i].date] = this.datas[i].lead;\n      }\n      return this.dates;\n    },\n    getLead() {\n      for (let i = 0; i &lt; this.datas.length; i++) {\n        this.lead[i] = this.datas[i].lead;\n      }\n      return this.lead;\n    }\n  }\n};\n&lt;/script&gt;\n</code></pre>\n"}, {"tags": ["javascript"], "comments": [{"owner": {"reputation": 40275, "user_id": 3744304, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/17uwe.jpg?s=128&g=1", "display_name": "connexo", "link": "https://stackoverflow.com/users/3744304/connexo"}, "edited": false, "score": 1, "creation_date": 1562789345, "post_id": 56977899, "comment_id": 100491920, "body": "<code>&quot;message&quot;: &quot;ReferenceError: precision is not defined&quot;,</code>"}, {"owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "edited": false, "score": 0, "creation_date": 1562789401, "post_id": 56977899, "comment_id": 100491938, "body": "The variables that you use in each of the three functions are <i>local</i> to that function; they are not accessible by the other functions. So for example the <code>z</code> in <code>second</code> is undefined. It is not influenced by the call of <code>first</code>."}, {"owner": {"reputation": 378, "user_id": 1592994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hO1Yy.jpg?s=128&g=1", "display_name": "c0x6a", "link": "https://stackoverflow.com/users/1592994/c0x6a"}, "edited": false, "score": 1, "creation_date": 1562789422, "post_id": 56977899, "comment_id": 100491948, "body": "Because that&#39;s not how things work, you need to read a little more about function parameters and how a function works."}, {"owner": {"reputation": 1, "user_id": 11729100, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aAnKEtIvkus/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcO0GbiVE0ltwKw77gPkFGzBHwfOg/photo.jpg?sz=128", "display_name": "Alazar Woldeyohannes", "link": "https://stackoverflow.com/users/11729100/alazar-woldeyohannes"}, "edited": false, "score": 0, "creation_date": 1562789654, "post_id": 56977899, "comment_id": 100492034, "body": "precision is defined in other js file. it works for my previous work"}, {"owner": {"reputation": 162920, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1562789660, "post_id": 56977899, "comment_id": 100492038, "body": "So many concepts wrong here it&#39;s hard to know where to start. Definitely need to read up on variable scope in javscript"}], "answers": [{"tags": [], "owner": {"reputation": 8719, "user_id": 6951428, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/92fd81a6020da8e77fc9125e0c9ec512?s=128&d=identicon&r=PG&f=1", "display_name": "junvar", "link": "https://stackoverflow.com/users/6951428/junvar"}, "is_accepted": false, "score": 1, "last_activity_date": 1562789804, "creation_date": 1562789804, "answer_id": 56978019, "question_id": 56977899, "link": "https://stackoverflow.com/questions/56977899/i-couldnt-call-a-value-from-other-function/56978019#56978019", "title": "I couldnt call a value from other function", "body": "<p>In most languages, including JS, variables have \"scope\" (<a href=\"https://developer.mozilla.org/en-US/docs/Glossary/Scope\" rel=\"nofollow noreferrer\">mdn</a>). If you want to share data between function's, you can either </p>\n\n<p>1) return values (<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/return\" rel=\"nofollow noreferrer\">mdn</a>),</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function first() {\r\n  var x = 2\r\n  var y = 3\r\n  return x * y;\r\n}\r\n\r\nfunction second() {\r\n  let z = first();\r\n  return z - 1\r\n}\r\n\r\nfunction third() {\r\n  let z = first();\r\n  let a = second();\r\n\r\n  var ans = a * z\r\n\r\n  console.log(ans);\r\n}\r\nthird();</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>2), less conventionally, modify a param obj since they're are passed by ref.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>let func = param =&gt; {\r\n  param.x = 3;\r\n  param.y = 4;\r\n};\r\n\r\nlet a = {};\r\nfunc(a);\r\nconsole.log(a);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 162, "user_id": 9893779, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uWwkJwkyZ9A/AAAAAAAAAAI/AAAAAAAAAAs/pZJxNbL5Zx4/photo.jpg?sz=128", "display_name": "Shawn Clake", "link": "https://stackoverflow.com/users/9893779/shawn-clake"}, "is_accepted": false, "score": 1, "last_activity_date": 1562789849, "creation_date": 1562789849, "answer_id": 56978027, "question_id": 56977899, "link": "https://stackoverflow.com/questions/56977899/i-couldnt-call-a-value-from-other-function/56978027#56978027", "title": "I couldnt call a value from other function", "body": "<p>You will need to either create global variables which is considered a bad practice, or pass values around as parameters.</p>\n\n<p>Global variables:</p>\n\n<pre><code>var a\nvar x\nvar y\nvar z\nfunction first() {\n    x = 2\n    y = 3\n    z = x * y\n}\nfunction second() {\n    a = z - 1\n}\nfunction third() {\n    first()\n    second()\n    let ans = a * z\n\n    console.log(ans);\n}\n</code></pre>\n\n<p>Passing Parameters:</p>\n\n<pre><code>function first(x, y) {\n    return x * y\n}\nfunction second(z) {\n    return z - 1\n}\nfunction third() {\n    let x = 2\n    let y = 3\n    let z = first(x, y)\n    let a = second(z)\n\n    let ans = a * z\n\n    console.log(ans);\n}\n</code></pre>\n\n<p>Judging based on your code, you likely should take a look into how JavaScript scopes variables based on using the keyword <code>var</code> vs <code>let</code>. I hope this helps!</p>\n"}, {"tags": [], "owner": {"reputation": 10067, "user_id": 2415802, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/m5mFC.jpg?s=128&g=1", "display_name": "mwilson", "link": "https://stackoverflow.com/users/2415802/mwilson"}, "is_accepted": false, "score": 0, "last_activity_date": 1562789998, "creation_date": 1562789998, "answer_id": 56978064, "question_id": 56977899, "link": "https://stackoverflow.com/questions/56977899/i-couldnt-call-a-value-from-other-function/56978064#56978064", "title": "I couldnt call a value from other function", "body": "<p>You have two major issues:</p>\n\n<ol>\n<li>Your variables <code>a</code> and <code>z</code> are not global variables. They are defined within the function itself so you cannot access those variables outside of that scope (see <a href=\"https://developer.mozilla.org/en-US/docs/Glossary/Scope\" rel=\"nofollow noreferrer\">this</a>)</li>\n<li>I would not fix your code to adhere to the first issue. You don't need global variables here, you just need to return the result so you can call your functions later. In the long run, I would assume you want to add arguments to your functions, but the below is an example of how to do what you're trying to accomplish by simply returning the result in your functions.</li>\n</ol>\n\n<p><strong>NOTE</strong> I don't know if you have a custom <code>precision</code> function or what. So, I added an empty function that just returns the input. You can probably remove this.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function precision(num) {\r\n\t// Insert whatever is in your precision function here...\r\n\treturn num;\r\n}\r\n\r\nfunction first() {\r\n  var x = 2\r\n  var y = 3\r\n  var z = x * y\r\n  return z;\r\n}\r\n\r\nfunction second() {\r\n  var z = first();\r\n  var a = z - 1\r\n  return a;\r\n}\r\n\r\nfunction third() {\r\n  var a = second();\r\n  var z = first();\r\n  var ans = a * z\r\n\r\n  console.log(ans);\r\n  document.getElementById(\"ans_html\").innerHTML = precision(ans);\r\n}\r\nthird()</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div id=\"ans_html\"&gt;&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 221, "user_id": 5893507, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lxr80.png?s=128&g=1", "display_name": "arnuga3", "link": "https://stackoverflow.com/users/5893507/arnuga3"}, "is_accepted": false, "score": 0, "last_activity_date": 1562790220, "creation_date": 1562790220, "answer_id": 56978120, "question_id": 56977899, "link": "https://stackoverflow.com/questions/56977899/i-couldnt-call-a-value-from-other-function/56978120#56978120", "title": "I couldnt call a value from other function", "body": "<p>This is not the best design pattern, but if you want to achieve this in this way, the code is going to look like the one below. You need to return the result of the function in order to get it in another function and use it.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function first() {\r\n  var x = 2\r\n  var y = 3\r\n  return x * y\r\n}\r\n\r\nfunction second() {\r\n  var z = first()\r\n  return z - 1\r\n}\r\n\r\nfunction third() {\r\n  var a = first()\r\n  var z = second()\r\n  var ans = a * z\r\n\r\n  console.log(ans);\r\n  // document.getElementById(\"ans_html\").innerHTML = precision(ans);\r\n}\r\nthird()</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div id=\"ans_html\"&gt;&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 1, "user_id": 11729100, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aAnKEtIvkus/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcO0GbiVE0ltwKw77gPkFGzBHwfOg/photo.jpg?sz=128", "display_name": "Alazar Woldeyohannes", "link": "https://stackoverflow.com/users/11729100/alazar-woldeyohannes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1562790220, "creation_date": 1562789164, "last_edit_date": 1562789287, "question_id": 56977899, "link": "https://stackoverflow.com/questions/56977899/i-couldnt-call-a-value-from-other-function", "title": "I couldnt call a value from other function", "body": "<p>The js code has 3 functions. I want to call values from the 2 functions and execute them in the 3rd function. </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function first() {\r\n\r\n  var x = 2\r\n  var y = 3\r\n  var z = x * y\r\n}\r\nfirst()\r\n\r\nfunction second() {\r\n  first();\r\n  var z;\r\n  var a = z - 1\r\n}\r\nsecond()\r\n\r\nfunction third() {\r\n  first();\r\n  second();\r\n\r\n  var a\r\n  var z\r\n  var ans = a * z\r\n\r\n  console.log(ans);\r\n  document.getElementById(\"ans_html\").innerHTML = precision(ans);\r\n}\r\nthird()</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div id=\"ans_html\"&gt;&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>The expected outcome was 30.</p>\n\n<p>But the output was \"NaN\".</p>\n"}, {"tags": ["javascript", "react-native"], "comments": [{"owner": {"reputation": 16510, "user_id": 212878, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nMS5a.jpg?s=128&g=1", "display_name": "Samuli Hakoniemi", "link": "https://stackoverflow.com/users/212878/samuli-hakoniemi"}, "edited": false, "score": 1, "creation_date": 1562789473, "post_id": 56977891, "comment_id": 100491971, "body": "You didn&#39;t specify whether this happens on iOS or Android. But I believe this is related to https issue. Are you fetching items via http-only endpoint? If so, then either switch to https or search for instructions for allowing http requests."}, {"owner": {"reputation": 47, "user_id": 10344512, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5NXFbrt6ZU8/AAAAAAAAAAI/AAAAAAAACoI/tgXDfn4zMl8/photo.jpg?sz=128", "display_name": "Andrew Mautone", "link": "https://stackoverflow.com/users/10344512/andrew-mautone"}, "reply_to_user": {"reputation": 16510, "user_id": 212878, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nMS5a.jpg?s=128&g=1", "display_name": "Samuli Hakoniemi", "link": "https://stackoverflow.com/users/212878/samuli-hakoniemi"}, "edited": false, "score": 0, "creation_date": 1562790006, "post_id": 56977891, "comment_id": 100492178, "body": "It was just happening with android.Idk why"}, {"owner": {"reputation": 47, "user_id": 10344512, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5NXFbrt6ZU8/AAAAAAAAAAI/AAAAAAAACoI/tgXDfn4zMl8/photo.jpg?sz=128", "display_name": "Andrew Mautone", "link": "https://stackoverflow.com/users/10344512/andrew-mautone"}, "reply_to_user": {"reputation": 16510, "user_id": 212878, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nMS5a.jpg?s=128&g=1", "display_name": "Samuli Hakoniemi", "link": "https://stackoverflow.com/users/212878/samuli-hakoniemi"}, "edited": false, "score": 0, "creation_date": 1562790051, "post_id": 56977891, "comment_id": 100492200, "body": "It was related to the https , I changed to https and it works ty"}], "answers": [{"tags": [], "owner": {"reputation": 47, "user_id": 10344512, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5NXFbrt6ZU8/AAAAAAAAAAI/AAAAAAAACoI/tgXDfn4zMl8/photo.jpg?sz=128", "display_name": "Andrew Mautone", "link": "https://stackoverflow.com/users/10344512/andrew-mautone"}, "is_accepted": true, "score": 1, "last_activity_date": 1562790139, "creation_date": 1562790139, "answer_id": 56978098, "question_id": 56977891, "link": "https://stackoverflow.com/questions/56977891/why-my-image-is-just-visible-in-debug-mode/56978098#56978098", "title": "Why my image is just visible in debug mode", "body": "<p>The problem was that the image url was with http protocol and it seens that need to be https </p>\n"}], "owner": {"reputation": 47, "user_id": 10344512, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5NXFbrt6ZU8/AAAAAAAAAAI/AAAAAAAACoI/tgXDfn4zMl8/photo.jpg?sz=128", "display_name": "Andrew Mautone", "link": "https://stackoverflow.com/users/10344512/andrew-mautone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 56978098, "answer_count": 1, "score": 1, "last_activity_date": 1562790139, "creation_date": 1562789106, "question_id": 56977891, "link": "https://stackoverflow.com/questions/56977891/why-my-image-is-just-visible-in-debug-mode", "title": "Why my image is just visible in debug mode", "body": "<p>When I run in debug mode , my app shows the images .But when i go to release the image just desapear.</p>\n\n<p>I fetch an url image from an api. This API return me that :</p>\n\n<p>[{\"IdDesconto\":\"3\",\"IdStatus\":\"16\",\"imagemProduto\":\"http://app.vaideoculos.com.br/promocao/Cupom_VDO_02.png\",\"tituloDesconto\":\"Pegue seu desconto de 50% nas armacoes da VDo da nossa marca , aproveite !\",\"codigoDesconto\":\"UE77UE\",\"descricaoDesconto\":\"Este Oculos \\u00e9 da marca VDO , marca da loja propria!\",\"descricaoValidade\":\"Este cupom \\u00e9 valido em todas as lojas.\",\"dataInicial\":\"2019-05-01 10:00:00\",\"dataFinal\":\"2019-06-25 10:00:00\",\"dataCriada\":\"2019-05-01 09:09:09\"},{\"IdDesconto\":\"1\",\"IdStatus\":\"16\",\"imagemProduto\":\"http://app.vaideoculos.com.br/promocao/cupom1.png\",\"tituloDesconto\":\"Pegue seu desconto em oculos Ray - Voucher de 20% de desconto\",\"codigoDesconto\":\"RD5BUE\",\"descricaoDesconto\":\"Este oculos \\u00e9 um rayban solar tamanho 52 justin para jovens e etc... \",\"descricaoValidade\":\"Este cupom \\u00e9 valido somente na loja do butanta zona sul e para o oculos justin de tamanho 52.\",\"dataInicial\":\"2019-05-01 10:00:00\",\"dataFinal\":\"2019-07-10 10:00:00\",\"dataCriada\":\"2019-05-01 09:09:09\"}]</p>\n\n<pre><code>for (let i = 0; i &lt; Object.keys(this.state.descontos).length; i++) {\n  render.push(\n\n&lt;View style={{flex:1,backgroundColor:'#fff',borderRadius:15,marginVertical:50,justifyContent:'space-between',alignItems:'center'}}&gt;\n&lt;View style = {{margin:20,height:'50%',width:'90%'}}&gt;\n\n  &lt;Image\n      style={{resizeMode:'contain',flex:1,height:300,width:300,alignSelf:\"center\"}}\n      source={{uri:this.state.descontos[i].imagemProduto}}\n\n\n  /&gt;\n&lt;/View&gt;\n&lt;View style={{alignItems:'center',width:'90%'}}&gt;\n  &lt;Text style={{fontSize:17,color:\"#000\",textAlign:'center',marginBottom:10}}&gt;{this.state.descontos[i].tituloDesconto}&lt;/Text&gt;\n  &lt;Text style={{fontSize:12,textAlign:'center'}}&gt;{this.state.descontos[i].descricaoDesconto}&lt;/Text&gt;\n&lt;/View&gt;\n&lt;TouchableHighlight\n      style={[styles.buttonContainer, styles.loginButton]}\n      onPress={() =&gt; \n        {\n          if(this.state.loged != null &amp;&amp; this.state.loged != \"\")\n            Alert.alert(\"Ver c\u00f3digo\",this.state.descontos[i].codigoDesconto)\n          else\n          {\n            Alert.alert(\n              'Para adquirir o desconto voc\u00ea precisa estar logado',\n              'Deseja logar agora?',\n              [\n\n                {\n                  text: 'N\u00e3o',\n                  style: 'cancel',\n                },\n                {text: 'Sim', onPress: () =&gt; this.props.navigation.navigate('Login')},\n              ],\n              {cancelable: false},\n            );\n\n\n\n          }\n        }\n\n\n\n        }\n    &gt;\n\n      &lt;Text style={{color:'#fff'}}&gt;Ver C\u00f3digo&lt;/Text&gt;\n&lt;/TouchableHighlight&gt;\n\n\n&lt;/View&gt;\n  )}\n</code></pre>\n"}, {"tags": ["javascript", "php", "html", "mysql", "laravel"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11715336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9c48801a65b8ba738cacfa6e71ff636?s=128&d=identicon&r=PG&f=1", "display_name": "Confused student", "link": "https://stackoverflow.com/users/11715336/confused-student"}, "edited": false, "score": 0, "creation_date": 1563313948, "post_id": 56978154, "comment_id": 100656848, "body": "Thanks for your help but it gives me an error message about arguments, I added the controller in the post above, may ring a bell"}], "tags": [], "owner": {"reputation": 20397, "user_id": 3965631, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/T7nII.png?s=128&g=1", "display_name": "Tim Lewis", "link": "https://stackoverflow.com/users/3965631/tim-lewis"}, "is_accepted": false, "score": 2, "last_activity_date": 1562790384, "creation_date": 1562790384, "answer_id": 56978154, "question_id": 56977861, "link": "https://stackoverflow.com/questions/56977861/how-can-i-do-a-multiple-search-based-on-single-fields-in-my-web/56978154#56978154", "title": "How can I do a multiple search based on single fields in my web", "body": "<p>If you're allowing a user to select multiple <code>genre</code> and <code>year</code> values, your inputs needs to be arrays. Change the <code>name</code> attribute to use <code>[]</code>:</p>\n\n<pre><code>@foreach($movies as $movie)\n&lt;input type=\"checkbox\" name=\"genre[]\" value=\"{{ $movie-&gt;genre }}\"&gt;{{ $movie-&gt;genre }}&lt;br/&gt;\n@endforeach\n...\n@foreach($movies as $movie)\n&lt;input type=\"checkbox\" name=\"year[]\" value=\"{{ $movie-&gt;year }}\"&gt;{{ $movie-&gt;year }}&lt;br/&gt;\n@endforeach\n</code></pre>\n\n<p>Since you're omitting the <code>[]</code>, only the last selected checkbox with the same <code>name</code> is being sent to the server. With this, on the backend, your values should be arrays:</p>\n\n<pre><code>$selectedGenres = $request-&gt;input(\"genre\");\n// [\"comedy\", \"romance\", ...];\n\n$selectedYears = $request-&gt;input(\"year\");\n// [\"1990\", \"2019\", ...];\n</code></pre>\n\n<p>You can then use this in a simple query:</p>\n\n<pre><code>$foundMovies = Movie::whereIn(\"genre\", $selectedGenres)\n-&gt;whereIn(\"year\", $selectedYears)\n-&gt;get();\n</code></pre>\n\n<p>You will likely have to ignore searching if no <code>genre</code> or <code>year</code> values are selected, but that can be done either via validation:</p>\n\n<pre><code>\"genre\" =&gt; \"required|array|min:1\",\n\"year\" =&gt; \"required|array|min:1\"\n</code></pre>\n\n<p>or a check:</p>\n\n<pre><code>if(count($selectedGenres) != 0){ ... }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 11715336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9c48801a65b8ba738cacfa6e71ff636?s=128&d=identicon&r=PG&f=1", "display_name": "Confused student", "link": "https://stackoverflow.com/users/11715336/confused-student"}, "edited": false, "score": 0, "creation_date": 1563314016, "post_id": 56979164, "comment_id": 100656869, "body": "Thanks for your help but it gives me the same error of the other answer, I added the controller in the post above, may ring a bell"}], "tags": [], "owner": {"reputation": 1530, "user_id": 8576878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Bmt0y.jpg?s=128&g=1", "display_name": "Djellal Mohamed Aniss", "link": "https://stackoverflow.com/users/8576878/djellal-mohamed-aniss"}, "is_accepted": false, "score": 0, "last_activity_date": 1562795784, "creation_date": 1562795784, "answer_id": 56979164, "question_id": 56977861, "link": "https://stackoverflow.com/questions/56977861/how-can-i-do-a-multiple-search-based-on-single-fields-in-my-web/56979164#56979164", "title": "How can I do a multiple search based on single fields in my web", "body": "<p>since your loop generates checkboxes, your \"name\" attribute must be an array:</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>@foreach($movies as $movie)\n&lt;input type=\"checkbox\" name=\"genre[]\" value=\"{{ $movie-&gt;genre }}\"&gt;{{ $movie-&gt;genre }}&lt;br/&gt;\n@endforeach\n</code></pre>\n\n<p>you should also add a validation rule to the formRequest just to check if the values received exists and are arrays.</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>\"genre\" =&gt; \"required|array\",\n\"year\" =&gt; \"required|array\"\n</code></pre>\n\n<p>finally, your query will look like this:</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>$genres = $request-&gt;genre;\n$years = $request-&gt;year;\n\nMovie::when(count($genres) &gt; 0,function ($query, $genres) {\n                    return $query-&gt;whereIn('genre', $genres);\n     })\n     -&gt;when(count($years) &gt; 0,function ($query, $years) {\n                    return $query-&gt;whereIn('year', $years);\n     })\n     -&gt;get();\n\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11715336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9c48801a65b8ba738cacfa6e71ff636?s=128&d=identicon&r=PG&f=1", "display_name": "Confused student", "link": "https://stackoverflow.com/users/11715336/confused-student"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1563313774, "creation_date": 1562788977, "last_edit_date": 1563313774, "question_id": 56977861, "link": "https://stackoverflow.com/questions/56977861/how-can-i-do-a-multiple-search-based-on-single-fields-in-my-web", "title": "How can I do a multiple search based on single fields in my web", "body": "<p>I'm building a website with Laravel and I want to create a search like a form where a user can search movies using different genres. The problem is when I try to use more than 1 genre it only displays the last option selected for each of my fields. For example, my search options are genre and year and I try to input comedy, romance, action, 1992, 2005 but only outputs action movies in 2005.</p>\n\n<p>All the data is stored in a MySQL database and I used a basic  to do the input with checkboxes, the data appears in the URL and does the search but only works for one of the options on each field. </p>\n\n<pre><code>&lt;form action=\"/home\" method=\"GET\"&gt;\n    &lt;hr&gt;\n    &lt;h4&gt;Genre&lt;/h4&gt;&lt;br&gt;\n    @foreach($movies as $movie)\n        &lt;input type=\"checkbox\" name=\"genre\" value=\"{{$movie-&gt;genre}}\"&gt;{{$movie-&gt;genre}}&lt;br&gt;\n    @endforeach\n    &lt;hr&gt;\n    &lt;h4&gt;Year&lt;/h4&gt;\n    @foreach($movies as $movie)\n        &lt;input type=\"checkbox\" name=\"year\" value=\"{{$movie-&gt;year}}\"&gt;{{$movie-&gt;year}}&lt;br&gt;\n    @endforeach\n    &lt;input type=\"submit\" class=\"btn btn-success\" value=\"Search\"&gt;&lt;br&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>The idea is that if a user inputs comedy, romance, action, 1992, 2005 the output show comedy movies, action movies and romance movies in 1992 and 2005.</p>\n\n<h3>Edit</h3>\n\n<p>Here is my controller where I do the search and a pagination.</p>\n\n<pre><code>public function index(Request $request)\n{\n$movies = \\DB::table('movies');\n\n$queries = [];\n\n$columns = [\n  'genre','year'\n];\n\nforeach ($columns as $column) {\n    if (request()-&gt;has($column)) {\n        $movies = $movies-&gt;where($column, request($column));\n        $queries[$column] = request($column);\n    }\n}\n$movies = $movies-&gt;orderBy('created_at', 'desc')-&gt;paginate(20)-&gt;appends($queries);\nreturn view('home', compact('movies'));\n}\n</code></pre>\n"}, {"tags": ["javascript", "arrays", "object"], "comments": [{"owner": {"reputation": 162920, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1562789437, "post_id": 56977767, "comment_id": 100491955, "body": "If you control that initial array structure would be simpler to change it to have consistent key names in each object. As you can see from Nina&#39;s answer this is not trivial"}, {"owner": {"reputation": 1193, "user_id": 7934883, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/72e6853fe6cb075569d0c9add5f920bd?s=128&d=identicon&r=PG&f=1", "display_name": "Rey", "link": "https://stackoverflow.com/users/7934883/rey"}, "reply_to_user": {"reputation": 162920, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1562789565, "post_id": 56977767, "comment_id": 100492003, "body": "Thanks, but in my case I can&#39;t because the array is going to be made up different elements each time."}, {"owner": {"reputation": 162920, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1562790003, "post_id": 56977767, "comment_id": 100492175, "body": "Fine but if you do something like <code>{propertyName: &#39;id&#39;, value:1}, {propertyName: &#39;first.name&#39;, value:&#39;john&#39;}</code> it cuts complexity a lot. Or even use an object instead of array from the beginning"}], "answers": [{"tags": [], "owner": {"reputation": 319259, "user_id": 1447675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziYmO.gif?s=128&g=1", "display_name": "Nina Scholz", "link": "https://stackoverflow.com/users/1447675/nina-scholz"}, "is_accepted": true, "score": 6, "last_activity_date": 1562789094, "creation_date": 1562789094, "answer_id": 56977887, "question_id": 56977767, "link": "https://stackoverflow.com/questions/56977767/converting-to-correct-object-format-from-array/56977887#56977887", "title": "Converting to Correct Object Format from Array", "body": "<p>You need a deeper look into the object and take the splitted key and reduce them by taking an object with the property or an empty object. At the end assign the value.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var data = [{ id: '1' }, { 'name.first': 'john' }, { 'name.last': 'smith' }],\r\n    result = data.reduce((r, o) =&gt; {\r\n        Object.entries(o).forEach(([k, v]) =&gt; {\r\n            var keys = k.split('.'),\r\n                last = keys.pop();\r\n            keys.reduce((q, k) =&gt; q[k] = q[k] || {}, r)[last] = v;        \r\n        });\r\n        return r;\r\n    }, {});\r\n\r\nconsole.log(result);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 4450, "user_id": 11270840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/um2Zv.jpg?s=128&g=1", "display_name": "Ghoul Ahmed", "link": "https://stackoverflow.com/users/11270840/ghoul-ahmed"}, "is_accepted": false, "score": 1, "last_activity_date": 1562790170, "last_edit_date": 1562790170, "creation_date": 1562789834, "answer_id": 56978026, "question_id": 56977767, "link": "https://stackoverflow.com/questions/56977767/converting-to-correct-object-format-from-array/56978026#56978026", "title": "Converting to Correct Object Format from Array", "body": "<p>Try this:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const data = [\r\n  {\r\n    \"id\": \"1\"\r\n  },\r\n  {\r\n    \"name.first\": \"john\"\r\n  },\r\n  {\r\n    \"name.last\": \"smith\"\r\n  }\r\n]\r\n\r\nconst result = Object.entries(Object.assign({}, ...data))\r\n.reduce((acc,[k,v])=&gt;{\r\n    [first, last] = k.split('.');\r\n    if (!last) {\r\n        acc[k] = v\r\n    } else {\r\n        acc[first] = acc[first] || {};\r\n        acc[first][last] = v;\r\n    }\r\n    return acc\r\n}, {})\r\n\r\nconsole.log(result);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 1193, "user_id": 7934883, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/72e6853fe6cb075569d0c9add5f920bd?s=128&d=identicon&r=PG&f=1", "display_name": "Rey", "link": "https://stackoverflow.com/users/7934883/rey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 56977887, "answer_count": 2, "score": 2, "last_activity_date": 1562790170, "creation_date": 1562788578, "question_id": 56977767, "link": "https://stackoverflow.com/questions/56977767/converting-to-correct-object-format-from-array", "title": "Converting to Correct Object Format from Array", "body": "<p>I am aware of options like the spread operator and Object.assign() when it comes to converting an array to an object, however, I am having difficulty figuring out how to format the final object in the format I need. </p>\n\n<p>My original array looks like this:</p>\n\n<pre><code>let propsArray = [ { id: '1' },\n  { 'name.first': 'john' },\n  { 'name.last': 'smith' } ]\n</code></pre>\n\n<p>The object I want from this data needs to look like this:</p>\n\n<pre><code>{\n  \"id\" : 1,\n  \"name\" : {\n      \"first\" : \"john\",\n      \"last\" : \"smith\"\n  }\n}\n</code></pre>\n\n<p>What I've tried so far, using object.assign(), ends up adding numbers as property keys in the resulting object, which is clearly not what I'm looking for:</p>\n\n<pre><code>  let finalObj = Object.assign({}, propsArray);\n</code></pre>\n\n<p>How can I get the resulting object formatted the way I need here?</p>\n"}, {"tags": ["javascript", "google-cloud-functions", "apify"], "comments": [{"owner": {"reputation": 3, "user_id": 11766814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f32cdfef641bdd8c5db77498b03e9de?s=128&d=identicon&r=PG", "display_name": "Pierre", "link": "https://stackoverflow.com/users/11766814/pierre"}, "edited": false, "score": 0, "creation_date": 1562788662, "post_id": 56977763, "comment_id": 100491689, "body": "Please note that I am aware that the <code>if (res) &#47;* ... *&#47; return &#47;* ... *&#47;</code> is unecessary for Google Cloud Functions. It was just a quick way for me to test the exported function locally."}, {"owner": {"reputation": 10308, "user_id": 1738915, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/YXjto.jpg?s=128&g=1", "display_name": "Kolban", "link": "https://stackoverflow.com/users/1738915/kolban"}, "edited": false, "score": 0, "creation_date": 1562791791, "post_id": 56977763, "comment_id": 100492896, "body": "In your cloud function definition, what does your package.json contain?  My goal is to recreate your issue to see what happens on my project."}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1562801232, "post_id": 56977763, "comment_id": 100495453, "body": "What does Apify.main return?  I doubt it&#39;s waiting for all that work to complete before moving on."}, {"owner": {"reputation": 3, "user_id": 11766814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f32cdfef641bdd8c5db77498b03e9de?s=128&d=identicon&r=PG", "display_name": "Pierre", "link": "https://stackoverflow.com/users/11766814/pierre"}, "reply_to_user": {"reputation": 10308, "user_id": 1738915, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/YXjto.jpg?s=128&g=1", "display_name": "Kolban", "link": "https://stackoverflow.com/users/1738915/kolban"}, "edited": false, "score": 0, "creation_date": 1562860502, "post_id": 56977763, "comment_id": 100520632, "body": "@Kolban The only dependency is <code>apify</code>. Everything else is defaults from <code>npm init</code>."}, {"owner": {"reputation": 3, "user_id": 11766814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f32cdfef641bdd8c5db77498b03e9de?s=128&d=identicon&r=PG", "display_name": "Pierre", "link": "https://stackoverflow.com/users/11766814/pierre"}, "reply_to_user": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 0, "creation_date": 1562860551, "post_id": 56977763, "comment_id": 100520657, "body": "@DougStevenson You are right."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11766814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f32cdfef641bdd8c5db77498b03e9de?s=128&d=identicon&r=PG", "display_name": "Pierre", "link": "https://stackoverflow.com/users/11766814/pierre"}, "edited": false, "score": 0, "creation_date": 1562860447, "post_id": 56987370, "comment_id": 100520601, "body": "It indeed works. The parameter to <code>Apify.main()</code> has to return a <code>Promise</code> for it to wait until it resolves. Thanks!"}, {"owner": {"reputation": 3, "user_id": 11766814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f32cdfef641bdd8c5db77498b03e9de?s=128&d=identicon&r=PG", "display_name": "Pierre", "link": "https://stackoverflow.com/users/11766814/pierre"}, "edited": false, "score": 0, "creation_date": 1562861574, "post_id": 56987370, "comment_id": 100521180, "body": "Hum. \ud83e\udd14 But then shouldn&#39;t it wait for the <code>async</code> function too? The doc mentions that <code>main</code> will wait, but it doesn&#39;t."}, {"owner": {"reputation": 96, "user_id": 5380087, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IYviitfPfXg/AAAAAAAAAAI/AAAAAAAAAcU/uFoUAQFhlNw/photo.jpg?sz=128", "display_name": "Jan Curn", "link": "https://stackoverflow.com/users/5380087/jan-curn"}, "reply_to_user": {"reputation": 3, "user_id": 11766814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f32cdfef641bdd8c5db77498b03e9de?s=128&d=identicon&r=PG", "display_name": "Pierre", "link": "https://stackoverflow.com/users/11766814/pierre"}, "edited": false, "score": 0, "creation_date": 1562947830, "post_id": 56987370, "comment_id": 100553976, "body": "<code>Apify.main()</code> should only be used in stand-alone programs, but not inside server routes like in your case. There&#39;s no point to await <code>Apify.main()</code> if used in a stand-alone program."}, {"owner": {"reputation": 3, "user_id": 11766814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f32cdfef641bdd8c5db77498b03e9de?s=128&d=identicon&r=PG", "display_name": "Pierre", "link": "https://stackoverflow.com/users/11766814/pierre"}, "edited": false, "score": 0, "creation_date": 1563207978, "post_id": 56987370, "comment_id": 100615237, "body": "Got it. My follow-up question would be: why? (i.e. what&#39;s in Apify.main that makes it so)"}, {"owner": {"reputation": 96, "user_id": 5380087, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IYviitfPfXg/AAAAAAAAAAI/AAAAAAAAAcU/uFoUAQFhlNw/photo.jpg?sz=128", "display_name": "Jan Curn", "link": "https://stackoverflow.com/users/5380087/jan-curn"}, "reply_to_user": {"reputation": 3, "user_id": 11766814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f32cdfef641bdd8c5db77498b03e9de?s=128&d=identicon&r=PG", "display_name": "Pierre", "link": "https://stackoverflow.com/users/11766814/pierre"}, "edited": false, "score": 0, "creation_date": 1563362413, "post_id": 56987370, "comment_id": 100672623, "body": "For details, please see <code>Apify.main()</code> docs at <a href=\"https://sdk.apify.com/docs/api/apify#apifymainuserfunc\" rel=\"nofollow noreferrer\">sdk.apify.com/docs/api/apify#apifymainuserfunc</a>"}], "tags": [], "owner": {"reputation": 96, "user_id": 5380087, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IYviitfPfXg/AAAAAAAAAAI/AAAAAAAAAcU/uFoUAQFhlNw/photo.jpg?sz=128", "display_name": "Jan Curn", "link": "https://stackoverflow.com/users/5380087/jan-curn"}, "is_accepted": true, "score": 1, "last_activity_date": 1562841662, "creation_date": 1562841662, "answer_id": 56987370, "question_id": 56977763, "link": "https://stackoverflow.com/questions/56977763/how-to-use-apify-on-google-cloud-functions/56987370#56987370", "title": "How to use Apify on Google Cloud Functions", "body": "<p>Get rid of the <code>Apify.main()</code> function, it schedules the call to a later time, after your function already returned the result.</p>\n"}], "owner": {"reputation": 3, "user_id": 11766814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f32cdfef641bdd8c5db77498b03e9de?s=128&d=identicon&r=PG", "display_name": "Pierre", "link": "https://stackoverflow.com/users/11766814/pierre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 851, "favorite_count": 0, "accepted_answer_id": 56987370, "answer_count": 1, "score": 0, "last_activity_date": 1562841662, "creation_date": 1562788559, "last_edit_date": 1562801252, "question_id": 56977763, "link": "https://stackoverflow.com/questions/56977763/how-to-use-apify-on-google-cloud-functions", "title": "How to use Apify on Google Cloud Functions", "body": "<p>I'm deploying some code using Apify as Google Cloud Functions. When triggered, the Cloud Function terminates silently. What am I doing wrong?</p>\n\n<p>I have some working code using Apify 0.15.1. It runs fine locally. Once deployed as a Google Cloud Function, it fails silently without any clear error. The equivalent code using Puppeteer 1.18.1 works fine.</p>\n\n<p>I've reproduced the issue using more simple code below. While this example doesn't strictly require Apify, I would like to be able to use the extra functionality provided by Apify.</p>\n\n<p>Code using Apify:</p>\n\n<pre><code>const Apify = require(\"apify\");\n\nexports.screenshotApify = async (req, res) =&gt; {\n  let imageBuffer;\n  Apify.main(async () =&gt; {\n    const browser = await Apify.launchPuppeteer({ headless: true });\n    const page = await browser.newPage();\n\n    await page.goto(\"https://xenaccounting.com\");\n\n    imageBuffer = await page.screenshot({ fullPage: true });\n\n    await browser.close();\n  });\n\n  if (res) {\n    res.set(\"Content-Type\", \"image/png\");\n    res.send(imageBuffer);\n  }\n\n  return imageBuffer;\n};\n</code></pre>\n\n<p>Code using Puppeteer:</p>\n\n<pre><code>const puppeteer = require(\"puppeteer\");\n\nexports.screenshotPup = async (req, res) =&gt; {\n  const browser = await puppeteer.launch({ args: [\"--no-sandbox\"] });\n  const page = await browser.newPage();\n\n  await page.goto(\"https://xenaccounting.com\");\n\n  const imageBuffer = await page.screenshot({ fullpage: true });\n\n  await browser.close();\n\n  if (res) {\n    res.set(\"Content-Type\", \"image/png\");\n    res.send(imageBuffer);\n  }\n\n  return imageBuffer;\n};\n</code></pre>\n\n<p>Once deployed as a Google Cloud Function (with --trigger-http and --memory=2048), the Puppeteer variant works fine, while the Apify variant terminates silently without result (apart from an 'ok' / HTTP 200 return value).</p>\n"}, {"tags": ["javascript", "class", "animation", "ecmascript-6", "graphics"], "answers": [{"tags": [], "owner": {"reputation": 250, "user_id": 11574236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/355059dcbb41ce48d8872ee8b0bd504c?s=128&d=identicon&r=PG&f=1", "display_name": "Amir", "link": "https://stackoverflow.com/users/11574236/amir"}, "is_accepted": true, "score": 0, "last_activity_date": 1562789267, "last_edit_date": 1562789267, "creation_date": 1562788803, "answer_id": 56977826, "question_id": 56977721, "link": "https://stackoverflow.com/questions/56977721/why-when-i-create-an-instance-of-class-inside-another-its-become-undefined/56977826#56977826", "title": "Why when i create an instance of class inside another it&#39;s become undefined?", "body": "<p>You are attempting to call an instance variable inside of a block that has it's own \"this\" value. The pointer is however contained in the object's instance.</p>\n\n<p>An arrow function will maintain lexial scoping and allow you to use the variable without binding \"this\" to the function:</p>\n\n<pre><code>this.canvas.onclick = (e) =&gt; {\n  console.log(this.point.x);\n};\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9436437, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ayman Benyahia", "link": "https://stackoverflow.com/users/9436437/ayman-benyahia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 56977826, "answer_count": 1, "score": 0, "last_activity_date": 1562789267, "creation_date": 1562788345, "question_id": 56977721, "link": "https://stackoverflow.com/questions/56977721/why-when-i-create-an-instance-of-class-inside-another-its-become-undefined", "title": "Why when i create an instance of class inside another it&#39;s become undefined?", "body": "<p>I am trying to draw a simple rectangle on canvas and move it around that's why I created loop class for animation and player class inside player I instantiated point class but when I try to use it inside the player update function it gives in console undefined why?</p>\n\n<p>I am stuck I need help.</p>\n\n<p>Class Main</p>\n\n<pre><code>// import zone\nimport Player from \"./player.js\";\nimport Loop from \"./loop.js\";\n\n// var zone\nlet canvas = document.getElementById(\"canvas\"); // get canvas\nlet display = canvas.getContext(\"2d\"); // get context\nlet loop;\n\n// draw loop\nfunction drawLoop() {\n  loop = new Loop(canvas, display); // instance loop\n  loop.update(); // update\n  loop.draw(); // draw\n  requestAnimationFrame(drawLoop); // loop\n}\n// invoke\ndrawLoop();\n</code></pre>\n\n<p>Class Loop</p>\n\n<pre><code>// import zone\nimport Player from \"./player.js\";\n// class\nexport default class Loop {\n  // init\n  constructor(canvas, display) {\n    this.canvas = canvas;\n    this.display = display;\n    this.player = new Player(this.canvas, this.display);\n  }\n  // update\n  update() {\n    this.player.update();\n  }\n  // draw\n  draw() {\n    this.player.draw();\n  }\n}\n</code></pre>\n\n<p>Class Player</p>\n\n<pre><code>// import zone\nimport Size from \"./size.js\";\nimport Point from \"./point.js\";\n\n// class\nexport default class Player {\n  constructor(canvas, display) {\n    this.display = display;\n    this.canvas = canvas;\n    this.point = new Point(200, 200);\n    this.size = new Size(100, 25);\n  }\n  // update\n  update() {\n    this.canvas.onclick = function(e) {\n      console.log(this.point.x);\n    };\n  }\n  // draw\n  draw() {\n    this.display.fillStyle = \"#ffffff\";\n    this.display.fillRect(this.point.x, this.point.y, this.size.w, this.size.h);\n  }\n}\n</code></pre>\n\n<p>Class Point</p>\n\n<pre><code>export default class Point {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n}\n</code></pre>\n\n<p>it should return position x (a number).</p>\n"}, {"tags": ["javascript", "node.js", "axios"], "comments": [{"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1562788697, "post_id": 56977715, "comment_id": 100491706, "body": "You are showing what appears to be the client side of the conversation here, when the action must take place on the server side. Something needs to the your posted HTML and save it to the file system somehow."}, {"owner": {"reputation": 148, "user_id": 7497175, "user_type": "registered", "profile_image": "https://graph.facebook.com/1095904507202696/picture?type=large", "display_name": "viviansplatoon", "link": "https://stackoverflow.com/users/7497175/viviansplatoon"}, "reply_to_user": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1562788962, "post_id": 56977715, "comment_id": 100491796, "body": "@HereticMonkey I think I understand what you&#39;re getting at but what if this webpage is already online somewhere and I don&#39;t have direct editing access to it? In other words, I can only interact with it via an API. Does this still apply?"}, {"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1562789094, "post_id": 56977715, "comment_id": 100491844, "body": "You&#39;d have to talk to the owner of the API, I guess. There&#39;s nothing you can do from the client to affect the how the server is programmed..."}, {"owner": {"reputation": 148, "user_id": 7497175, "user_type": "registered", "profile_image": "https://graph.facebook.com/1095904507202696/picture?type=large", "display_name": "viviansplatoon", "link": "https://stackoverflow.com/users/7497175/viviansplatoon"}, "reply_to_user": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1562789246, "post_id": 56977715, "comment_id": 100491888, "body": "@HereticMonkey Thanks for your help."}], "answers": [{"comments": [{"owner": {"reputation": 148, "user_id": 7497175, "user_type": "registered", "profile_image": "https://graph.facebook.com/1095904507202696/picture?type=large", "display_name": "viviansplatoon", "link": "https://stackoverflow.com/users/7497175/viviansplatoon"}, "edited": false, "score": 0, "creation_date": 1562790010, "post_id": 56978042, "comment_id": 100492180, "body": "This should not be the case because I have written python code that retrieves the html, edits it, and PUTS it back via the API and it works without any issues. So the API supports editing but somehow, I&#39;m running into issues when transferring my code to nodejs."}], "tags": [], "owner": {"reputation": 229, "user_id": 11097431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FsEDJ.jpg?s=128&g=1", "display_name": "Aman Raj", "link": "https://stackoverflow.com/users/11097431/aman-raj"}, "is_accepted": false, "score": 0, "last_activity_date": 1562789928, "creation_date": 1562789928, "answer_id": 56978042, "question_id": 56977715, "link": "https://stackoverflow.com/questions/56977715/how-to-use-axios-to-edit-and-update-a-pages-html/56978042#56978042", "title": "How to use axios to edit and update a page&#39;s html?", "body": "<p>Your code seems fine. It may be possible that you are accessing an API which does not support editing it.</p>\n\n<blockquote>\n  <p>The HyperText Transfer Protocol (HTTP) 405 Method Not Allowed response\n  status code indicates that the request method is known by the server\n  but is not supported by the target resource.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 148, "user_id": 7497175, "user_type": "registered", "profile_image": "https://graph.facebook.com/1095904507202696/picture?type=large", "display_name": "viviansplatoon", "link": "https://stackoverflow.com/users/7497175/viviansplatoon"}, "edited": false, "score": 0, "creation_date": 1562964683, "post_id": 56978657, "comment_id": 100559829, "body": "Note that for my python script, I used the python module &#39;requests&#39; to retrieve and update the page&#39;s html. I&#39;ve had a lot more success with requests than with axios unfortunately."}], "tags": [], "owner": {"reputation": 148, "user_id": 7497175, "user_type": "registered", "profile_image": "https://graph.facebook.com/1095904507202696/picture?type=large", "display_name": "viviansplatoon", "link": "https://stackoverflow.com/users/7497175/viviansplatoon"}, "is_accepted": true, "score": 1, "last_activity_date": 1562792845, "creation_date": 1562792845, "answer_id": 56978657, "question_id": 56977715, "link": "https://stackoverflow.com/questions/56977715/how-to-use-axios-to-edit-and-update-a-pages-html/56978657#56978657", "title": "How to use axios to edit and update a page&#39;s html?", "body": "<p>As mentioned in my comment in @Aman Raj's answer, I have the code working in python but translating it to nodejs was giving me issues. So I circumvented my problem by calling my python script in nodejs with the python-shell package.</p>\n\n<pre><code>let {PythonShell} = require('python-shell');\n...\nconst formatLinks = (id) =&gt; {\n    let options = {\n      mode: 'text',\n      pythonOptions: ['-u'], // get print results in real-time\n      scriptPath: './python/', // path to my python scripts\n\n      // pass in the page id, username, and password to API request\n      args: [id, USERNAME, PASSWORD] \n    };\n\n    PythonShell.run('script.py', options, (err, results) =&gt; {\n      if (err) throw err;\n      // results is an array consisting of messages collected during execution\n      console.log('results: %j', results);\n    });\n}\n</code></pre>\n"}], "owner": {"reputation": 148, "user_id": 7497175, "user_type": "registered", "profile_image": "https://graph.facebook.com/1095904507202696/picture?type=large", "display_name": "viviansplatoon", "link": "https://stackoverflow.com/users/7497175/viviansplatoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1713, "favorite_count": 0, "accepted_answer_id": 56978657, "answer_count": 2, "score": 1, "last_activity_date": 1562792845, "creation_date": 1562788289, "last_edit_date": 1562788698, "question_id": 56977715, "link": "https://stackoverflow.com/questions/56977715/how-to-use-axios-to-edit-and-update-a-pages-html", "title": "How to use axios to edit and update a page&#39;s html?", "body": "<p>I'm using axios and an API to get a page's HTML, editing the HTML, and putting it back via a POST request to the API. I'm successful in retrieving and editing the HTML but I can't figure out how to put it back/change the webpage's HTML.</p>\n\n<p>I tried using a PUT request instead of a POST request, but I get a 405 error that the PUT method is not allowed for the webpage.</p>\n\n<pre><code>axios.get(url, {\n  auth: {\n    username: USERNAME,\n    password: PASSWORD\n  },\n  headers: {\n    'Content-Type': 'application/json'\n  }\n})\n.then( (response) =&gt; {\n  version = response.data.version.number;\n  body = response.data.body.storage.value;\n\n  // takes the body HTML and formats all the links\n  newBody = middleware.formatLinks(body);\n\n  data = {\n    \"type\": \"page\",\n    'version': {'number': version + 1},\n    'body': {\n      'storage': {\n        'value': newBody,\n        'representation': 'storage'\n      }\n    }\n  }\n\n  // put the body HTML back into the page\n  axios.post(url, {\n    data: {\n      \"type\": \"page\",\n      'version': {'number': version + 1},\n      'body': {\n        'storage': {\n          'value': newBody,\n          'representation': 'storage'\n        }\n      }\n    }\n  }, { \n    auth: {\n    username: USERNAME,\n    password: PASSWORD\n    },\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  })\n  .then( (response) =&gt; {\n    console.log(response.data);  \n  })\n  .catch( (error) =&gt; {\n    console.log(error);\n  })\n})\n.catch( (error) =&gt; {\n  console.log(error);\n})\n</code></pre>\n\n<p>I expect the page to now be updated with all the links formatted to my liking. However the page is unchanged. When I <code>console.log(response.data)</code> after making the post request, the output is a string of <code>newBody</code>, when I expect it to be the JSON object</p>\n\n<pre><code>data: {\n  'type': 'page',\n  'version': {'number': version + 1},\n  'body': {\n    'storage': {\n      'value': newBody,\n      'representation': 'storage'\n    }\n  }\n}\n</code></pre>\n"}, {"tags": ["javascript", "html", "css"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 11766833, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Z2MnAgeU61I/AAAAAAAAAAI/AAAAAAAAAAk/-GBDYtheE28/photo.jpg?sz=128", "display_name": "YeeBee 88", "link": "https://stackoverflow.com/users/11766833/yeebee-88"}, "is_accepted": false, "score": 0, "last_activity_date": 1562789582, "creation_date": 1562789582, "answer_id": 56977970, "question_id": 56977714, "link": "https://stackoverflow.com/questions/56977714/link-being-block-from-getting-clicked-on-radial-menu/56977970#56977970", "title": "Link being block from getting clicked on Radial menu", "body": "<p>So once the code snippet worked on here I realized it must be something outside of the menu itself overlaying the buttons so I put the toggle button to z-index 2 and the menu to 1 and got it all working.</p>\n"}], "owner": {"reputation": 11, "user_id": 11766833, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Z2MnAgeU61I/AAAAAAAAAAI/AAAAAAAAAAk/-GBDYtheE28/photo.jpg?sz=128", "display_name": "YeeBee 88", "link": "https://stackoverflow.com/users/11766833/yeebee-88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1562789582, "creation_date": 1562788286, "last_edit_date": 1562789466, "question_id": 56977714, "link": "https://stackoverflow.com/questions/56977714/link-being-block-from-getting-clicked-on-radial-menu", "title": "Link being block from getting clicked on Radial menu", "body": "<p>I am making an expanding radial member with Javascript. There are image buttons on the menu which expands out of a center image which is clicked to expand the menu. My problem is that the button images are not clickable because the center button's image is covering them.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>            var i=0;\r\n            function expand(){\r\n              if(i==0){\r\n            document.getElementById(\"menu\").style.transform=\"scale(3)\"; \r\n               document.getElementById(\"plus\").style.transform=\"rotate(45deg)\"; \r\n                i=1;\r\n              }\r\n              else{   document.getElementById(\"menu\").style.transform=\"scale(0)\"; \r\n               document.getElementById(\"plus\").style.transform=\"rotate(0deg)\"; \r\n                i=0;\r\n              }\r\n            }</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>body{\r\n  background-color: #303358;\r\n  padding: 0px;\r\n  margin: 0px;\r\n  overflow: hidden;\r\n}\r\n\r\n.toggle {\r\n  background-color: #303358;\r\n  text-align: center;\r\n  height: 100px;\r\n  width: 100px;\r\n  border-radius: 50%;\r\n  position: absolute;\r\n  margin: auto;\r\n  top: 0px;\r\n  bottom: 0px;\r\n  left: 0px;\r\n  right: 0px;\r\n\r\n}\r\n\r\n.fa-plus{\r\n  height: 100%;\r\n  width:auto;\r\n  display: block;\r\n  transition: 0.7s;\r\n}\r\n\r\n.menu {\r\n  background-color: #000123;\r\n  height: 100px;\r\n  width: 100px;\r\n  transform: scale(0);\r\n  border-radius: 50%;\r\n  border-style: double;\r\n  border-color: #C8C8C8;\r\n  position: absolute;\r\n  margin: auto;\r\n  top: 0px;\r\n  bottom: 0px;\r\n  left: 0px;\r\n  right: 0px;\r\n  z-index: -1;\r\n  transition: 0.7s;\r\n\r\n}\r\n\r\na {\r\n  display: inline-block;\r\n  position: absolute;\r\n  font-size: 15px;\r\n  color: #C8C8C8;\r\n\r\n}\r\n\r\na:nth-child(1){\r\n  top: 6px;\r\n  left: 45px;\r\n}\r\n\r\na:nth-child(2){\r\n  top: 24px;\r\n  left: 77px;\r\n}\r\n\r\na:nth-child(3){\r\n  top: 58px;\r\n  left: 76px;\r\n}\r\n\r\na:nth-child(4){\r\n  top: 78px;\r\n  left: 42px;\r\n}\r\n\r\na:nth-child(5){\r\n  top: 58px;\r\n  left: 10px;\r\n}\r\n\r\na:nth-child(6){\r\n  top: 23px;\r\n  left: 12px;\r\n}\r\n\r\na:hover {\r\n  color: #989898;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div class=\"toggle\" id=\"toggle\" onclick=\"menu-expand()\"&gt;\r\n\r\n            &lt;img src=\"CTicon.png\" id=\"plus\" class=\"fa fa-plus\"&gt;\r\n        &lt;/div&gt;\r\n        &lt;div class=\"menu\" id=\"menu\"&gt;\r\n            &lt;a href=\"https://www.google.com/\"&gt;\r\n                &lt;img src=\"bepis.png\" style=\"height:20%;\" class=\"fa fa-private\"&gt;\r\n            &lt;/a&gt;\r\n            &lt;a href=\"https://www.google.com/\"&gt;\r\n\r\n                &lt;img src=\"bepis.png\" style=\"height:20%;\" class=\"fa fa-public\" &gt;\r\n            &lt;/a&gt;\r\n            &lt;a href=\"https://www.google.com/\"&gt;\r\n                &lt;img src=\"bepis.png\" style=\"height:20%;\" class=\"fa fa-public2\"&gt;&lt;/i&gt;\r\n            &lt;/a&gt;\r\n            &lt;a href=\"https://www.google.com/\"&gt;\r\n                &lt;img src=\"bepis.png\" style=\"height:20%;\" class=\"fa fa-public3\"&gt;&lt;/i&gt;\r\n            &lt;/a&gt;\r\n            &lt;a href=\"https://www.google.com/\"&gt;\r\n                &lt;img src=\"bepis.png\" style=\"height:20%;\" class=\"fa fa-public4\"&gt;&lt;/i&gt;\r\n            &lt;/a&gt;\r\n            &lt;a href=\"https://www.google.com/\"&gt;\r\n                &lt;img src=\"bepis.png\" style=\"height:20%;\" class=\"fa fa-public5\"&gt;&lt;/i&gt;\r\n            &lt;/a&gt;\r\n        &lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>The reason I've made a new question is because in most answers I found people suggest just adding a pointer-events: none; tag to my center expanding button, but I can't do this because it is also a button. To fix this I've tried using JS to change it, aswell as I have tried using pointer-events: none;. The only fix I have found so far is just changing the z-index of toggle, the issue with this is that the center button then my comes invisible when the menu expands because its placed below the menu itself which i would like to avoid.</p>\n\n<p>Edit: Well now I'm more confused because the freakin thing works in the code snippet on here haha.</p>\n"}, {"tags": ["javascript"], "comments": [{"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1562789080, "post_id": 56977694, "comment_id": 100491839, "body": "So each rate is tied to one range, but how are the ranges associated to the terms and types? Or are they not associated at all?"}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1562789171, "post_id": 56977694, "comment_id": 100491864, "body": "Can you show us the &quot;quite a bit of looping&quot; code you&#39;d use to get the desired results? I&#39;m still not entirely sure what you are trying to achieve, but if we have a working example we can suggest improvements to the data structures."}, {"owner": {"reputation": 1, "user_id": 5727981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0f7aa1d6e7a08ec97de798f01ffd041?s=128&d=identicon&r=PG&f=1", "display_name": "Geoff Cox", "link": "https://stackoverflow.com/users/5727981/geoff-cox"}, "reply_to_user": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1562789665, "post_id": 56977694, "comment_id": 100492046, "body": "Ugh. I am embarrassed to say that I don&#39;t have a working example. I am stuck on how to approach this problem.  Each lease type has a list of lease terms, each lease term has a list of ranges, the range then has a rate associated with it."}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1562790137, "post_id": 56977694, "comment_id": 100492235, "body": "Then go with a tree structure that represents exactly that: <code>leases = [{type:&quot;\u2026&quot;, terms:[{term:&quot;\u2026&quot;,ranges:[{range:\u2026, rate:\u2026}, \u2026]}, \u2026]}, \u2026]</code>. If you want less looping and more lookup, use types and terms as keys of an object: <code>{&quot;typeA&quot;: {&quot;term1&quot;: [\u2026], &quot;term2&quot;: \u2026}, \u2026}</code>."}, {"owner": {"reputation": 1, "user_id": 5727981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0f7aa1d6e7a08ec97de798f01ffd041?s=128&d=identicon&r=PG&f=1", "display_name": "Geoff Cox", "link": "https://stackoverflow.com/users/5727981/geoff-cox"}, "reply_to_user": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1562807767, "post_id": 56977694, "comment_id": 100496618, "body": "Bet.  That seems like a good approach.  Let me see if I can get it worked out.  Thanks @Bergi!  I appreciate your timely responses."}, {"owner": {"reputation": 1, "user_id": 5727981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0f7aa1d6e7a08ec97de798f01ffd041?s=128&d=identicon&r=PG&f=1", "display_name": "Geoff Cox", "link": "https://stackoverflow.com/users/5727981/geoff-cox"}, "reply_to_user": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1562863896, "post_id": 56977694, "comment_id": 100522195, "body": "@Bergi I figured out a solution that makes the database do the work.  For now, I am going to pass the company, type, term, and price to the database and do a select statement to find the range."}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1562864030, "post_id": 56977694, "comment_id": 100522253, "body": "Ah, letting the database figure out the most efficient index structure is the simplest solution :-) Requires an ajax call for each input though if you want interactive results."}, {"owner": {"reputation": 1, "user_id": 5727981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0f7aa1d6e7a08ec97de798f01ffd041?s=128&d=identicon&r=PG&f=1", "display_name": "Geoff Cox", "link": "https://stackoverflow.com/users/5727981/geoff-cox"}, "reply_to_user": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1562955380, "post_id": 56977694, "comment_id": 100556810, "body": "@Bergi that&#39;s the rub.  An ajax call each time the drop downs are changed.  Oh well, technical debt, right?  When I get the chance, I want to tackle doing the calculation on the client-side.  Right now pressed for time. :)"}], "owner": {"reputation": 1, "user_id": 5727981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0f7aa1d6e7a08ec97de798f01ffd041?s=128&d=identicon&r=PG&f=1", "display_name": "Geoff Cox", "link": "https://stackoverflow.com/users/5727981/geoff-cox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562788196, "creation_date": 1562788196, "question_id": 56977694, "link": "https://stackoverflow.com/questions/56977694/what-is-the-correct-javascript-data-structure-to-store-lease-type-lease-term-l", "title": "What is the correct JavaScript data structure to store lease type, lease term, lease range to get the proper lease rate?", "body": "<p>I have a leasing company, lease price, lease type, a lease term, a lease start range, and a lease end range, that all compute to a lease rate.  I am just not sure exactly what type of data structure to use to easily store and look up this information.</p>\n\n<p>I have a UI that has the dropdowns for leasing company, lease type, lease term, and a textbox for the lease price.  So, those are the inputs.  I really don't know how to store the data so it is easy to lookup.  So, given the lease type and the lease term, I would have a set of ranges and when the lease price falls in that range then a lease rate would be selected.  The end result is </p>\n\n<pre><code>Leasing Company:\n&lt;select id=\"leasing-company\"&gt;&lt;/select&gt;\n&lt;br/&gt;\n\nLease Type:\n&lt;select id=\"lease-type\"&gt;&lt;/select&gt;\n&lt;br/&gt;\n\nLease Term:\n&lt;select id=\"lease-term\"&gt;&lt;/select&gt;\n&lt;br/&gt;\n\n// the way I am storing the data to feed to the select options\nvar dict1 = {\n    leasing_company: \"XYZ Leasing Company\",\n    lease_type: [\"fmv\", \"buyout\"],\n    lease_term: [12, 24, 36, 39, 48]\n};\n\n// some example values\nvar leaseType = [\"fmv\", \"buyout\"]\nvar leaseTerm = [12, 24, 36, 39, 48]\nvar leaseRanges = [0.00, 1500.00, 3000.00, 5000.00, 10000.00]\nvar leaseRates = [0.25, 0.20, 0.15, 0.10, 0.05]\n</code></pre>\n\n<p>Everything I have tried requires quite a bit of looping.  I figure there has to be a better way to look up the data from the dropdowns.</p>\n\n<p>Leasing Company --> Lease Type --> Lease Term --> find Lease Range --> output Lease Rate</p>\n"}, {"tags": ["javascript", "three.js", "shader"], "answers": [{"tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 2, "last_activity_date": 1562790694, "last_edit_date": 1562790694, "creation_date": 1562789363, "answer_id": 56977934, "question_id": 56977686, "link": "https://stackoverflow.com/questions/56977686/creating-a-day-night-shader-that-follows-a-light-souce/56977934#56977934", "title": "creating a day/night shader that follows a light souce", "body": "<p>The issue is the line </p>\n\n<blockquote>\n  <pre class=\"lang-c prettyprint-override\"><code>float cosineAngleSunToNormal = dot(normalize(vNormal), sunDirection); \n</code></pre>\n</blockquote>\n\n<p>in the fragment shader.<br>\n<code>vNormal</code> is a direction in view space, because it is transformed by the <code>normalMatrix</code> in the vertex shader, but <code>sunDirection</code> is a world space direction.  </p>\n\n<p>To solve the issue you've to transform the sun light direction by the view matrix in the vertex shader and to pass the transformed direction vector to the fragment shader.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>vSunDir = mat3(viewMatrix) * sunDirection;\n</code></pre>\n\n<p>Note, the <code>viewMatrix</code> transforms from world space to view space. It is important to use the <code>viewMatrix</code> rather than the <code>normalMatrix</code>, because the <code>normalMatrix</code> transforms from model space to world space.</p>\n\n<p>Vertex shader:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>varying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vSunDir;\n\nuniform vec3 sunDirection;\n\nvoid main() {\n    vUv = uv;\n    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n\n    vNormal = normalMatrix * normal;\n    vSunDir = mat3(viewMatrix) * sunDirection;\n\n    gl_Position = projectionMatrix * mvPosition;\n}\n</code></pre>\n\n<p>Fragment shader:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>uniform sampler2D dayTexture;\nuniform sampler2D nightTexture;\n\nvarying vec2 vUv;\nvarying vec3 vNormal;\nvarying vec3 vSunDir;\n\nvoid main(void) {\n    vec3 dayColor = texture2D(dayTexture, vUv).rgb;\n    vec3 nightColor = texture2D(nightTexture, vUv).rgb;\n\n    float cosineAngleSunToNormal = dot(normalize(vNormal), normalize(vSunDir));\n\n    cosineAngleSunToNormal = clamp(cosineAngleSunToNormal * 5.0, -1.0, 1.0);\n\n    float mixAmount = cosineAngleSunToNormal * 0.5 + 0.5;\n\n    vec3 color = mix(nightColor, dayColor, mixAmount);\n\n    gl_FragColor = vec4(color, 1.0);\n}\n</code></pre>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"true\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>class Canvas {\r\n\tconstructor(selector) {\r\n\t\tthis.selector = selector;\r\n\t\tthis.width = window.innerWidth;\r\n\t\tthis.height = window.innerHeight;\r\n\t\tthis.frameEvent = new Event('frame');\r\n\r\n\t\tthis.textureLoader = new THREE.TextureLoader();\r\n\t}\r\n\r\n\tsetScene() {\r\n\t\tthis.scene = new THREE.Scene();\r\n\t\tthis.scenary = new THREE.Object3D;\r\n\r\n\t\tthis.scene.add(this.scenary);\r\n\t}\r\n\r\n\tsetCamera() {\r\n\t\tthis.camera = new THREE.PerspectiveCamera(50, this.width/this.height, 1, 20000);\r\n\t\tthis.camera.position.y = 25;\r\n\t\tthis.camera.position.z = 300;\r\n\t}\r\n\r\n\tsetRenderer() {\r\n\t\tthis.renderer = new THREE.WebGLRenderer({\r\n\t\t\tantialias: true\r\n\t\t});\r\n    this.renderer.setSize(this.width, this.height);\r\n    var container = document.getElementById(this.selector);\r\n    this.canvas = container.appendChild(this.renderer.domElement);\r\n\t\t//this.canvas = document.querySelector(this.selector).appendChild(this.renderer.domElement);\r\n\t}\r\n\r\n\tsetControls() {\r\n\t\tthis.controls = new THREE.OrbitControls(this.camera, this.canvas);\r\n\t\tthis.controls.maxDistance = 500;\r\n\t\tthis.controls.minDistance = 200;\r\n\t}\r\n\r\n\taddHelpers() {\r\n\t\tthis.axes = new THREE.AxesHelper(500);\r\n\t\tthis.scenary.add(this.axes);\r\n\t}\r\n\r\n\taddLights() {\r\n\t\tthis.ambientLight = new THREE.AmbientLight(0x555555);\r\n\t\tthis.directionalLight = new THREE.DirectionalLight(0xffffff);\r\n\t\tthis.directionalLight.position.set(10, 0, 10).normalize();\r\n\r\n\t\tthis.scenary.add(this.ambientLight);\r\n\t\tthis.scenary.add(this.directionalLight);\r\n\t}\r\n\r\n\trender() {\r\n\t\tthis.renderer.render(this.scene, this.camera);\r\n\t\tthis.canvas.dispatchEvent(this.frameEvent);\r\n\t\tthis.frameRequest = window.requestAnimationFrame(this.render.bind(this));\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\twindow.cancelAnimationFrame(this.frameRequest);\r\n\t\tthis.scene.children = [];\r\n\t\tthis.canvas.remove();\r\n\t}\r\n\r\n\taddSky() {\r\n\t\tlet radius = 400,\r\n\t\t\tsegments = 50;\r\n\r\n\t\tthis.skyGeometry = new THREE.SphereGeometry(radius, segments, segments);\r\n\t\tthis.skyMaterial = new THREE.MeshPhongMaterial({\r\n\t\t\tcolor: 0x666666,\r\n\t\t\tside: THREE.BackSide,\r\n\t\t\tshininess: 0\r\n\t\t});\r\n\t\tthis.sky = new THREE.Mesh(this.skyGeometry, this.skyMaterial);\r\n\r\n\t\tthis.scenary.add(this.sky);\r\n\r\n\t\tthis.loadSkyTextures();\r\n\t}\r\n\r\n\tloadSkyTextures() {\r\n\t\tthis.textureLoader.load('https://acaua.gitlab.io/webgl-with-threejs/img/textures/earth/sky-texture.jpg', texture =&gt; {\r\n\t\t\tthis.skyMaterial.map = texture;\r\n\t\t\tthis.skyMaterial.needsUpdate = true;\r\n\t\t});\r\n\t}\r\n\r\n\taddEarth() {\r\n\t\tlet radius = 100,\r\n\t\t\tsegments = 50;\r\n\r\n\t\tthis.earthGeometry = new THREE.SphereGeometry(radius, segments, segments);\r\n\t\tthis.earthMaterial = new THREE.ShaderMaterial({\r\n\t\t\tbumpScale: 5,\r\n\t\t\tspecular: new THREE.Color(0x333333),\r\n\t\t\tshininess: 50,\r\n\t\t\tuniforms: {\r\n\t\t\t\tsunDirection: {\r\n\t\t\t\t\tvalue: new THREE.Vector3(1, 1, .5)\r\n\t\t\t\t},\r\n\t\t\t\tdayTexture: {\r\n\t\t\t\t\tvalue: this.textureLoader.load('https://acaua.gitlab.io/webgl-with-threejs/img/textures/earth/earth-texture.jpg')\r\n\t\t\t\t},\r\n\t\t\t\tnightTexture: {\r\n\t\t\t\t\tvalue: this.textureLoader.load('https://acaua.gitlab.io/webgl-with-threejs/img/textures/earth/earth-night.jpg')\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tvertexShader: this.dayNightShader.vertex,\r\n\t\t\tfragmentShader: this.dayNightShader.fragment\r\n\t\t});\r\n\t\tthis.earth = new THREE.Mesh(this.earthGeometry, this.earthMaterial);\r\n\r\n\t\tthis.scenary.add(this.earth);\r\n\r\n\t\tthis.loadEarthTextures();\r\n\t\tthis.addAtmosphere();\r\n\t}\r\n\r\n\tloadEarthTextures() {\r\n\t\tthis.textureLoader.load('https://acaua.gitlab.io/webgl-with-threejs/img/textures/earth/earth-texture.jpg', texture =&gt; {\r\n\t\t\tthis.earthMaterial.map = texture;\r\n\t\t\tthis.earthMaterial.needsUpdate = true;\r\n\t\t});\r\n\t\tthis.textureLoader.load('https://acaua.gitlab.io/webgl-with-threejs/img/textures/earth/earth-bump.jpg', texture =&gt; {\r\n\t\t\tthis.earthMaterial.bumpMap = texture;\r\n\t\t\tthis.earthMaterial.needsUpdate = true;\r\n\t\t});\r\n\t\tthis.textureLoader.load('https://acaua.gitlab.io/webgl-with-threejs/img/textures/earth/earth-specular.jpg', texture =&gt; {\r\n\t\t\tthis.earthMaterial.specularMap = texture;\r\n\t\t\tthis.earthMaterial.needsUpdate = true;\r\n\t\t});\r\n\t}\r\n\r\n\taddAtmosphere() {\r\n    /*\r\n\t\tthis.innerAtmosphereGeometry = this.earthGeometry.clone();\r\n\t\tthis.innerAtmosphereMaterial = THREEx.createAtmosphereMaterial();\r\n\t\tthis.innerAtmosphereMaterial.uniforms.glowColor.value.set(0x88ffff);\r\n\t\tthis.innerAtmosphereMaterial.uniforms.coeficient.value = 1;\r\n\t\tthis.innerAtmosphereMaterial.uniforms.power.value = 5;\r\n\t\tthis.innerAtmosphere = new THREE.Mesh(this.innerAtmosphereGeometry, this.innerAtmosphereMaterial);\r\n\t\tthis.innerAtmosphere.scale.multiplyScalar(1.008);\r\n\r\n\t\tthis.outerAtmosphereGeometry = this.earthGeometry.clone();\r\n\t\tthis.outerAtmosphereMaterial = THREEx.createAtmosphereMaterial();\r\n\t\tthis.outerAtmosphereMaterial.side = THREE.BackSide;\r\n\t\tthis.outerAtmosphereMaterial.uniforms.glowColor.value.set(0x0088ff);\r\n\t\tthis.outerAtmosphereMaterial.uniforms.coeficient.value = .68;\r\n\t\tthis.outerAtmosphereMaterial.uniforms.power.value = 10;\r\n\t\tthis.outerAtmosphere = new THREE.Mesh(this.outerAtmosphereGeometry, this.outerAtmosphereMaterial);\r\n\t\tthis.outerAtmosphere.scale.multiplyScalar(1.06);\r\n\r\n\t\tthis.earth.add(this.innerAtmosphere);\r\n\t\tthis.earth.add(this.outerAtmosphere);\r\n    */\r\n\t}\r\n\r\n\tget dayNightShader() {\r\n\t\treturn {\r\n\t\t\tvertex: `\r\n\t\t\t\tvarying vec2 vUv;\r\n        varying vec3 vNormal;\r\n        varying vec3 vSunDir;\r\n\r\n        uniform vec3 sunDirection;\r\n\r\n\t\t\t\tvoid main() {\r\n\t\t\t\t\tvUv = uv;\r\n\t\t\t\t\tvec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\r\n          vNormal = normalMatrix * normal;\r\n          vSunDir = mat3(viewMatrix) * sunDirection;\r\n\t\t\t\t\tgl_Position = projectionMatrix * mvPosition;\r\n\t\t\t\t}\r\n\t\t\t`,\r\n\t\t\tfragment: `\r\n\t\t\t\tuniform sampler2D dayTexture;\r\n\t\t\t\tuniform sampler2D nightTexture;\r\n\r\n\t\t\t\tvarying vec2 vUv;\r\n        varying vec3 vNormal;\r\n        varying vec3 vSunDir;\r\n\r\n\t\t\t\tvoid main(void) {\r\n\t\t\t\t\tvec3 dayColor = texture2D(dayTexture, vUv).rgb;\r\n\t\t\t\t\tvec3 nightColor = texture2D(nightTexture, vUv).rgb;\r\n\r\n\t\t\t\t\tfloat cosineAngleSunToNormal = dot(normalize(vNormal), normalize(vSunDir));\r\n\r\n\t\t\t\t\tcosineAngleSunToNormal = clamp(cosineAngleSunToNormal * 5.0, -1.0, 1.0);\r\n\r\n\t\t\t\t\tfloat mixAmount = cosineAngleSunToNormal * 0.5 + 0.5;\r\n\r\n\t\t\t\t\tvec3 color = mix(nightColor, dayColor, mixAmount);\r\n\r\n\t\t\t\t\tgl_FragColor = vec4(color, 1.0);\r\n\t\t\t\t}\r\n\t\t\t`\r\n\t\t}\r\n\t}\r\n\r\n\tanimate() {\r\n\t\tthis.canvas.addEventListener('frame', () =&gt; {\r\n\t\t\tthis.scenary.rotation.x += 0.0001;\r\n\t\t\tthis.scenary.rotation.y -= 0.0005;\r\n\t\t});\r\n\t}\r\n\r\n\tinit() {\r\n\t\tthis.setScene();\r\n\t\tthis.setCamera();\r\n\t\tthis.setRenderer();\r\n\t\tthis.setControls();\r\n\t\tthis.addLights();\r\n\t\tthis.render();\r\n\t\tthis.addSky();\r\n\t\tthis.addEarth();\r\n\t\tthis.animate();\r\n\t}\r\n}\r\n\r\nlet canvas = new Canvas('container');\r\ncanvas.init();</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/three.js/106/three.min.js\"&gt;&lt;/script&gt;\r\n&lt;script src=\"https://threejs.org/examples/js/controls/OrbitControls.js\"&gt;&lt;/script&gt;\r\n&lt;div id=\"container\"&gt;&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 23, "user_id": 11766685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9856e899e98468210d9f17544b3bed61?s=128&d=identicon&r=PG&f=1", "display_name": "scott", "link": "https://stackoverflow.com/users/11766685/scott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 394, "favorite_count": 1, "accepted_answer_id": 56977934, "answer_count": 1, "score": 1, "last_activity_date": 1562790694, "creation_date": 1562788175, "question_id": 56977686, "link": "https://stackoverflow.com/questions/56977686/creating-a-day-night-shader-that-follows-a-light-souce", "title": "creating a day/night shader that follows a light souce", "body": "<p>I have a sphere lit by a DirectionalLight to mimic the sun shining on the earth. I am trying to add a shader that will show the earth at night on the unlit parts of the globe, and the earth during the day for the lit parts. I'm planning on eventually having the DirectionalLight rotate around the globe, updating the shader to show the parts of the earth that are currently in shadow. I came across the following codepen that partially does what I want: <a href=\"https://codepen.io/acauamontiel/pen/yvJoVv\" rel=\"nofollow noreferrer\">https://codepen.io/acauamontiel/pen/yvJoVv</a></p>\n\n<p>In the codepen above, the day/night textures shown are based on the camera's position in relation to the globe, and I need those to stay fixed relative to the light source's position, rather than the camera's.</p>\n\n<pre><code>    constructor(selector) {\n        this.selector = selector;\n        this.width = window.innerWidth;\n        this.height = window.innerHeight;\n        this.frameEvent = new Event('frame');\n\n        this.textureLoader = new THREE.TextureLoader();\n    }\n\n    setScene() {\n        this.scene = new THREE.Scene();\n        this.scenary = new THREE.Object3D;\n\n        this.scene.add(this.scenary);\n    }\n\n    setCamera() {\n        this.camera = new THREE.PerspectiveCamera(50, this.width/this.height, 1, 20000);\n        this.camera.position.y = 25;\n        this.camera.position.z = 300;\n    }\n\n    setRenderer() {\n        this.renderer = new THREE.WebGLRenderer({\n            antialias: true\n        });\n        this.renderer.setSize(this.width, this.height);\n        this.canvas = document.querySelector(this.selector).appendChild(this.renderer.domElement);\n    }\n\n    setControls() {\n        this.controls = new THREE.OrbitControls(this.camera, this.canvas);\n        this.controls.maxDistance = 500;\n        this.controls.minDistance = 200;\n    }\n\n    addHelpers() {\n        this.axes = new THREE.AxesHelper(500);\n        this.scenary.add(this.axes);\n    }\n\n    addLights() {\n        this.ambientLight = new THREE.AmbientLight(0x555555);\n        this.directionalLight = new THREE.DirectionalLight(0xffffff);\n        this.directionalLight.position.set(10, 0, 10).normalize();\n\n        this.scenary.add(this.ambientLight);\n        this.scenary.add(this.directionalLight);\n    }\n\n    render() {\n        this.renderer.render(this.scene, this.camera);\n        this.canvas.dispatchEvent(this.frameEvent);\n        this.frameRequest = window.requestAnimationFrame(this.render.bind(this));\n    }\n\n    destroy() {\n        window.cancelAnimationFrame(this.frameRequest);\n        this.scene.children = [];\n        this.canvas.remove();\n    }\n\n    addSky() {\n        let radius = 400,\n            segments = 50;\n\n        this.skyGeometry = new THREE.SphereGeometry(radius, segments, segments);\n        this.skyMaterial = new THREE.MeshPhongMaterial({\n            color: 0x666666,\n            side: THREE.BackSide,\n            shininess: 0\n        });\n        this.sky = new THREE.Mesh(this.skyGeometry, this.skyMaterial);\n\n        this.scenary.add(this.sky);\n\n        this.loadSkyTextures();\n    }\n\n    loadSkyTextures() {\n        this.textureLoader.load('https://acaua.gitlab.io/webgl-with-threejs/img/textures/earth/sky-texture.jpg', texture =&gt; {\n            this.skyMaterial.map = texture;\n            this.skyMaterial.needsUpdate = true;\n        });\n    }\n\n    addEarth() {\n        let radius = 100,\n            segments = 50;\n\n        this.earthGeometry = new THREE.SphereGeometry(radius, segments, segments);\n        this.earthMaterial = new THREE.ShaderMaterial({\n            bumpScale: 5,\n            specular: new THREE.Color(0x333333),\n            shininess: 50,\n            uniforms: {\n                sunDirection: {\n                    value: new THREE.Vector3(1, 1, .5)\n                },\n                dayTexture: {\n                    value: this.textureLoader.load('https://acaua.gitlab.io/webgl-with-threejs/img/textures/earth/earth-texture.jpg')\n                },\n                nightTexture: {\n                    value: this.textureLoader.load('https://acaua.gitlab.io/webgl-with-threejs/img/textures/earth/earth-night.jpg')\n                }\n            },\n            vertexShader: this.dayNightShader.vertex,\n            fragmentShader: this.dayNightShader.fragment\n        });\n        this.earth = new THREE.Mesh(this.earthGeometry, this.earthMaterial);\n\n        this.scenary.add(this.earth);\n\n        this.loadEarthTextures();\n        this.addAtmosphere();\n    }\n\n    loadEarthTextures() {\n        this.textureLoader.load('https://acaua.gitlab.io/webgl-with-threejs/img/textures/earth/earth-texture.jpg', texture =&gt; {\n            this.earthMaterial.map = texture;\n            this.earthMaterial.needsUpdate = true;\n        });\n        this.textureLoader.load('https://acaua.gitlab.io/webgl-with-threejs/img/textures/earth/earth-bump.jpg', texture =&gt; {\n            this.earthMaterial.bumpMap = texture;\n            this.earthMaterial.needsUpdate = true;\n        });\n        this.textureLoader.load('https://acaua.gitlab.io/webgl-with-threejs/img/textures/earth/earth-specular.jpg', texture =&gt; {\n            this.earthMaterial.specularMap = texture;\n            this.earthMaterial.needsUpdate = true;\n        });\n    }\n\n    addAtmosphere() {\n        this.innerAtmosphereGeometry = this.earthGeometry.clone();\n        this.innerAtmosphereMaterial = THREEx.createAtmosphereMaterial();\n        this.innerAtmosphereMaterial.uniforms.glowColor.value.set(0x88ffff);\n        this.innerAtmosphereMaterial.uniforms.coeficient.value = 1;\n        this.innerAtmosphereMaterial.uniforms.power.value = 5;\n        this.innerAtmosphere = new THREE.Mesh(this.innerAtmosphereGeometry, this.innerAtmosphereMaterial);\n        this.innerAtmosphere.scale.multiplyScalar(1.008);\n\n        this.outerAtmosphereGeometry = this.earthGeometry.clone();\n        this.outerAtmosphereMaterial = THREEx.createAtmosphereMaterial();\n        this.outerAtmosphereMaterial.side = THREE.BackSide;\n        this.outerAtmosphereMaterial.uniforms.glowColor.value.set(0x0088ff);\n        this.outerAtmosphereMaterial.uniforms.coeficient.value = .68;\n        this.outerAtmosphereMaterial.uniforms.power.value = 10;\n        this.outerAtmosphere = new THREE.Mesh(this.outerAtmosphereGeometry, this.outerAtmosphereMaterial);\n        this.outerAtmosphere.scale.multiplyScalar(1.06);\n\n        this.earth.add(this.innerAtmosphere);\n        this.earth.add(this.outerAtmosphere);\n    }\n\n    get dayNightShader() {\n        return {\n            vertex: `\n                varying vec2 vUv;\n                varying vec3 vNormal;\n\n                void main() {\n                    vUv = uv;\n                    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n                    vNormal = normalMatrix * normal;\n                    gl_Position = projectionMatrix * mvPosition;\n                }\n            `,\n            fragment: `\n                uniform sampler2D dayTexture;\n                uniform sampler2D nightTexture;\n\n                uniform vec3 sunDirection;\n\n                varying vec2 vUv;\n                varying vec3 vNormal;\n\n                void main(void) {\n                    vec3 dayColor = texture2D(dayTexture, vUv).rgb;\n                    vec3 nightColor = texture2D(nightTexture, vUv).rgb;\n\n                    float cosineAngleSunToNormal = dot(normalize(vNormal), sunDirection);\n\n                    cosineAngleSunToNormal = clamp(cosineAngleSunToNormal * 5.0, -1.0, 1.0);\n\n                    float mixAmount = cosineAngleSunToNormal * 0.5 + 0.5;\n\n                    vec3 color = mix(nightColor, dayColor, mixAmount);\n\n                    gl_FragColor = vec4(color, 1.0);\n                }\n            `\n        }\n    }\n\n    animate() {\n        this.canvas.addEventListener('frame', () =&gt; {\n            this.scenary.rotation.x += 0.0001;\n            this.scenary.rotation.y -= 0.0005;\n        });\n    }\n\n    init() {\n        this.setScene();\n        this.setCamera();\n        this.setRenderer();\n        this.setControls();\n        this.addLights();\n        this.render();\n        this.addSky();\n        this.addEarth();\n        this.animate();\n    }\n}\n\nlet canvas = new Canvas('#canvas');\ncanvas.init();\n</code></pre>\n\n<p>From what I can tell, it looks like the shader is being updated by the camera inside of get dayNightShader(). It looks like the modelViewMatrix, projectionMatrix, and normalMatrix are all based on the camera based on what I could find in the documentation for three.js, and I've tried changing these to a fixed vector position, but the only thing I've seen it do is hide the globe and show the atmosphere texture. Is there a way to use the light source's position to determine what the shader shows, rather than the camera?</p>\n"}, {"tags": ["javascript"], "comments": [{"owner": {"reputation": 4813, "user_id": 1771994, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/92bb8a32559190ac0aa783c02c3c0299?s=128&d=identicon&r=PG&f=1", "display_name": "Tom O.", "link": "https://stackoverflow.com/users/1771994/tom-o"}, "edited": false, "score": 1, "creation_date": 1562788194, "post_id": 56977671, "comment_id": 100491486, "body": "Have you attempted any code you can share?"}, {"owner": {"reputation": 136, "user_id": 3242048, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oMfx9.jpg?s=128&g=1", "display_name": "DrFreeze", "link": "https://stackoverflow.com/users/3242048/drfreeze"}, "edited": false, "score": 1, "creation_date": 1562790338, "post_id": 56977671, "comment_id": 100492310, "body": "You can probably bind a keyup event to the element and check the selection in it. You should give some code so that we can help you better."}], "answers": [{"tags": [], "owner": {"reputation": 136, "user_id": 3242048, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oMfx9.jpg?s=128&g=1", "display_name": "DrFreeze", "link": "https://stackoverflow.com/users/3242048/drfreeze"}, "is_accepted": false, "score": 1, "last_activity_date": 1562791316, "creation_date": 1562791316, "answer_id": 56978343, "question_id": 56977671, "link": "https://stackoverflow.com/questions/56977671/how-to-trigger-an-event-when-there-is-selection-inside-a-contenteditable-div/56978343#56978343", "title": "How to trigger an event when there is selection inside a contentEditable div?", "body": "<p>You can add event listener to the element for <code>mouseup</code> event and get the selection from <code>window</code> after that:</p>\n\n<pre><code>  &lt;div contenteditable=\"true\" id=\"editableDiv\"&gt;Some content&lt;/div&gt;\n</code></pre>\n\n<p>And the js:</p>\n\n<pre><code>  document.getElementById(\"editableDiv\").addEventListener(\"mouseup\", function() {\n    var s = window.getSelection();\n    if(s == \"something\"){\n       //do your thing\n    }\n  }, false);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 766, "user_id": 9158613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fdc7af72ee7dd5897b002474701d285?s=128&d=identicon&r=PG&f=1", "display_name": "asinix", "link": "https://stackoverflow.com/users/9158613/asinix"}, "edited": false, "score": 0, "creation_date": 1562813028, "post_id": 56978502, "comment_id": 100497526, "body": "Have not tried all possibilities but I got the direction and that is good enough to accept the answer. Thanks"}], "tags": [], "owner": {"reputation": 2720, "user_id": 4428236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3a6672bc7c5b1155891e067d8ccff0d?s=128&d=identicon&r=PG", "display_name": "exside", "link": "https://stackoverflow.com/users/4428236/exside"}, "is_accepted": true, "score": 1, "last_activity_date": 1562792094, "creation_date": 1562792094, "answer_id": 56978502, "question_id": 56977671, "link": "https://stackoverflow.com/questions/56977671/how-to-trigger-an-event-when-there-is-selection-inside-a-contenteditable-div/56978502#56978502", "title": "How to trigger an event when there is selection inside a contentEditable div?", "body": "<p>A relatively simplified version could look like this, depending on your needs you might need to handle browsers like old IE's etc. that do not support <code>window.getSelection()</code>!</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const handleSelection = function() {\r\n  const btn = document.querySelector('#btn');\r\n  let selection = window.getSelection().anchorNode.textContent\r\n    .substring(\r\n      window.getSelection().extentOffset, \r\n      window.getSelection().anchorOffset\r\n    );\r\n\r\n  if (selection.length !== 0) {\r\n    btn.setAttribute('disabled', true);\r\n  } else {\r\n    btn.removeAttribute('disabled');\r\n  }\r\n};\r\n\r\n['mouseup', 'keyup', 'selectionchange'].forEach((e) =&gt; {\r\n  document.querySelector('#editable').addEventListener(e, handleSelection);\r\n});</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>#btn[disabled] {\r\n  cursor: default;\r\n  opacity: 0.3;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;button type=\"button\" id=\"btn\"&gt;Button (disabled when something is selected)&lt;/button&gt;\r\n&lt;div id=\"editable\" contenteditable&gt;\r\n  &lt;p&gt;I'm some content that is editable!&lt;/p&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 766, "user_id": 9158613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fdc7af72ee7dd5897b002474701d285?s=128&d=identicon&r=PG&f=1", "display_name": "asinix", "link": "https://stackoverflow.com/users/9158613/asinix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "accepted_answer_id": 56978502, "answer_count": 2, "score": 1, "last_activity_date": 1562792094, "creation_date": 1562788098, "question_id": 56977671, "link": "https://stackoverflow.com/questions/56977671/how-to-trigger-an-event-when-there-is-selection-inside-a-contenteditable-div", "title": "How to trigger an event when there is selection inside a contentEditable div?", "body": "<p>I want to trigger an event when the user selects some text/element in a contentEditable div. Accordingly I want to inactivate certain buttons in a Rich Text Editor. </p>\n\n<p>There are some events which can be triggered based upon change of content. I only want an event when the user selects some content.</p>\n"}, {"tags": ["javascript", "jestjs", "babeljs", "babel-jest"], "owner": {"reputation": 21678, "user_id": 723007, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7575020af0d1ce53e66c515b5f44918f?s=128&d=identicon&r=PG", "display_name": "cantera", "link": "https://stackoverflow.com/users/723007/cantera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 370, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1562787724, "creation_date": 1562787724, "question_id": 56977610, "link": "https://stackoverflow.com/questions/56977610/babel-plugin-rewire-test-private-method", "title": "babel-plugin-rewire: test private method", "body": "<p>Using <a href=\"https://github.com/speedskater/babel-plugin-rewire\" rel=\"nofollow noreferrer\">babel-plugin-rewire</a>, how can I access the private function <code>multiply</code> and invoke it for testing?</p>\n\n<pre><code>let count = 11;\n\nconst plus = (num) =&gt; {\n  return count + num;\n};\n\nexport const minus = (num) =&gt; {\n  return count - num;\n};\n\nconst multiply = (num) =&gt; {\n  return count * num;\n};\n\nexport default plus;\n</code></pre>\n\n<pre><code>import plus from './math.js';\nimport { minus, __Rewire__, __RewireAPI__ } from './math.js';\n\ndescribe('math tests', () =&gt; {\n\n  test('math.plus', () =&gt; {\n    __Rewire__('count', 100);\n    const result = plus(50);\n    expect(result).toEqual(150); // passes\n  });\n\n  test('math.minus', () =&gt; {\n    __Rewire__('count', 23);\n    const result = minus(10);\n    expect(result).toEqual(13); // passes\n  });\n\n  test('math.multiply', () =&gt; {\n    __Rewire__('count', 100);\n    const multiply = __RewireAPI__.__get__('multiply');\n    console.log('multiply', multiply); // undefined\n    const result = multiply(3); // error: not a function\n    expect(result).toEqual(300);\n  });\n});\n</code></pre>\n"}, {"tags": ["javascript", "node.js", "mongodb", "cloud", "service-discovery"], "comments": [{"owner": {"reputation": 1358, "user_id": 9194639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcKsd.png?s=128&g=1", "display_name": "new QOpenGLWidget", "link": "https://stackoverflow.com/users/9194639/new-qopenglwidget"}, "edited": false, "score": 0, "creation_date": 1562972987, "post_id": 56977592, "comment_id": 100561574, "body": "Be a little bit more clear about this."}, {"owner": {"reputation": 234, "user_id": 9750364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hq8Kw.png?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/9750364/ben"}, "reply_to_user": {"reputation": 1358, "user_id": 9194639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcKsd.png?s=128&g=1", "display_name": "new QOpenGLWidget", "link": "https://stackoverflow.com/users/9194639/new-qopenglwidget"}, "edited": false, "score": 0, "creation_date": 1562973339, "post_id": 56977592, "comment_id": 100561622, "body": "How could I be more concise?  I want to find the IP of a MongoDB Server from a NodeJS server so that I can establish a connection to it.  I thought that would be understandable."}, {"owner": {"reputation": 1358, "user_id": 9194639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcKsd.png?s=128&g=1", "display_name": "new QOpenGLWidget", "link": "https://stackoverflow.com/users/9194639/new-qopenglwidget"}, "edited": false, "score": 0, "creation_date": 1562973404, "post_id": 56977592, "comment_id": 100561632, "body": "Have you tried another thing than hooking the instances up to a load balancer and hardcode it in?"}, {"owner": {"reputation": 234, "user_id": 9750364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hq8Kw.png?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/9750364/ben"}, "reply_to_user": {"reputation": 1358, "user_id": 9194639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcKsd.png?s=128&g=1", "display_name": "new QOpenGLWidget", "link": "https://stackoverflow.com/users/9194639/new-qopenglwidget"}, "edited": false, "score": 0, "creation_date": 1562973435, "post_id": 56977592, "comment_id": 100561637, "body": "No, I have not tried anything else"}, {"owner": {"reputation": 1358, "user_id": 9194639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcKsd.png?s=128&g=1", "display_name": "new QOpenGLWidget", "link": "https://stackoverflow.com/users/9194639/new-qopenglwidget"}, "edited": false, "score": 0, "creation_date": 1562973527, "post_id": 56977592, "comment_id": 100561654, "body": "If you try something else and it still doesn&#39;t work, come back here and add a little bit more detail."}, {"owner": {"reputation": 234, "user_id": 9750364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hq8Kw.png?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/9750364/ben"}, "reply_to_user": {"reputation": 1358, "user_id": 9194639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcKsd.png?s=128&g=1", "display_name": "new QOpenGLWidget", "link": "https://stackoverflow.com/users/9194639/new-qopenglwidget"}, "edited": false, "score": 0, "creation_date": 1562973570, "post_id": 56977592, "comment_id": 100561659, "body": "I don&#39;t have a solution, so what else would I try?  I do not know of a solution to this problem.  That is my question."}, {"owner": {"reputation": 1358, "user_id": 9194639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcKsd.png?s=128&g=1", "display_name": "new QOpenGLWidget", "link": "https://stackoverflow.com/users/9194639/new-qopenglwidget"}, "edited": false, "score": 0, "creation_date": 1562973689, "post_id": 56977592, "comment_id": 100561674, "body": "Alright. I&#39;ll leave you alone."}, {"owner": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "edited": false, "score": 2, "creation_date": 1563034217, "post_id": 56977592, "comment_id": 100571999, "body": "Can you please explain your use case more, like why would the Mongo DB IP change? What will you do when IP changes while your NodeJS server is running and a connection is already established with the old IP? Also how important is this for you? I mean are you ok to put on effort for setting up a service discovery like consul or something similar for just one mongo db ip? Why not just use a DNS entry or something like <a href=\"https://dyn.com/dns/\" rel=\"nofollow noreferrer\">dyn.com/dns</a>?"}], "answers": [{"tags": [], "owner": {"reputation": 57591, "user_id": 1388319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/258babf29502a002296bc415851e2395?s=128&d=identicon&r=PG", "display_name": "Stennie", "link": "https://stackoverflow.com/users/1388319/stennie"}, "is_accepted": true, "score": 1, "last_activity_date": 1563140028, "creation_date": 1563140028, "answer_id": 57031311, "question_id": 56977592, "link": "https://stackoverflow.com/questions/56977592/discovery-of-mongodb-server-ip-from-nodejs-server/57031311#57031311", "title": "Discovery of MongoDB Server IP from NodeJS Server", "body": "<p>The normal means for discovering the current IP(s) of a web resource is using a DNS hostname. This doesn't require any additional services to be installed and will work with public or private IPs as long as the hostname is resolvable. There are low cost domain names available (few US$/year) which also include a service to alias domain hostnames (eg <code>db.yourdomain.xyz</code>) to your Digital Ocean hostname or IPs. Recommending a provider is outside the scope of Stack Overflow, but there are many. One aspect to compare is the renewal price, which is often much higher than the initial registration.</p>\n\n<p>If you eventually upgrade your MongoDB deployment from a standalone to a replica set, MongoDB 3.6+ supports a <a href=\"https://docs.mongodb.com/manual/reference/connection-string/#dns-seedlist-connection-format\" rel=\"nofollow noreferrer\">DNS-based discovery format  (SRV lookups)</a> which allows you to change the hosts in a replica set without reconfiguring clients.</p>\n\n<p>Load balancers and service discovery systems are overkill for managing a single server, but ultimately they expose resources via DNS as well. For example, see <a href=\"https://www.consul.io/docs/agent/dns.html\" rel=\"nofollow noreferrer\">Consul's DNS interface</a> (which also includes <a href=\"https://www.consul.io/docs/agent/dns.html#service-lookups\" rel=\"nofollow noreferrer\">SRV lookups</a> similar to MongoDB's DNS-based discovery format). You could also perform service discovery via HTTP requests to the Consul API, but that is a more complicated integration path.</p>\n"}, {"comments": [{"owner": {"reputation": 196, "user_id": 5605440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z6HHY.jpg?s=128&g=1", "display_name": "Matt Oaxaca", "link": "https://stackoverflow.com/users/5605440/matt-oaxaca"}, "edited": false, "score": 1, "creation_date": 1563405947, "post_id": 57084192, "comment_id": 100693398, "body": "Welcome dcstone09 to StackOverflow. @Ben I would recommend this solution assuming you have a fixed IP or DNS address for your MongoDB instance. Otherwise, I would look into the first answer, but I wouldn&#39;t add the complexity of service discovery unless absolutely necessary."}, {"owner": {"reputation": 234, "user_id": 9750364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hq8Kw.png?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/9750364/ben"}, "edited": false, "score": 0, "creation_date": 1563407045, "post_id": 57084192, "comment_id": 100693602, "body": "I am currently in the development stage of my project and I am looking into scaling my app across many machines, so having to hardcore values, even in env variables isn\u2019t ideal"}], "tags": [], "owner": {"reputation": 41, "user_id": 4876799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/087ec0214b4afb7fb4e17e53e0f8eb9b?s=128&d=identicon&r=PG&f=1", "display_name": "dcstone09", "link": "https://stackoverflow.com/users/4876799/dcstone09"}, "is_accepted": false, "score": 4, "last_activity_date": 1563398400, "creation_date": 1563398400, "answer_id": 57084192, "question_id": 56977592, "link": "https://stackoverflow.com/questions/56977592/discovery-of-mongodb-server-ip-from-nodejs-server/57084192#57084192", "title": "Discovery of MongoDB Server IP from NodeJS Server", "body": "<p>You can use Environment Variables to avoid hardcoding values into your code. These values can be loaded from the processes environment when the application starts with a package like <a href=\"https://www.npmjs.com/package/dotenv\" rel=\"nofollow noreferrer\">dotenv</a>.</p>\n"}], "owner": {"reputation": 234, "user_id": 9750364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hq8Kw.png?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/9750364/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 348, "favorite_count": 0, "accepted_answer_id": 57031311, "answer_count": 2, "score": 0, "last_activity_date": 1563398400, "creation_date": 1562787629, "last_edit_date": 1563048701, "question_id": 56977592, "link": "https://stackoverflow.com/questions/56977592/discovery-of-mongodb-server-ip-from-nodejs-server", "title": "Discovery of MongoDB Server IP from NodeJS Server", "body": "<p>I have one instance of MongoDB running on a cloud compute on DigitalOcean.  I have another instance of my Node(Express) app running on another cloud compute.  Is there a way that I can discover the IP of the database such that I don't have to hard code it into my app and therefore can scale easier?  I know you can hook the instances up to a load balancer and hardcode that in, but that isn't ideal and won't work in all circumstances, as it has to be reconfigured every time the environment changes.  I would prefer not to have to make something that accesses the DigitalOcean API, as that is platform-specific, although I am considering it.  The reason that I am asking is that I want to automate configuration as much as possible so that I don't have to a bunch of configuring every time I create/destroy instances.  I am using static IPs, so changing IPs won't be a problem.  I'm looking into service discovery systems such as <a href=\"https://consul.io\" rel=\"nofollow noreferrer\">consul</a>, and I might move to something like that but I think it(consul) seems overkill for my app, although I am considering it.</p>\n"}, {"tags": ["javascript", "asp.net-core-mvc", "3d-model", "stl-format"], "answers": [{"comments": [{"owner": {"reputation": 220, "user_id": 4526069, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6hIPC.jpg?s=128&g=1", "display_name": "Chris G. Williams", "link": "https://stackoverflow.com/users/4526069/chris-g-williams"}, "edited": false, "score": 0, "creation_date": 1562850313, "post_id": 56981201, "comment_id": 100514440, "body": "I&#39;ve tried putting the scripts in the js folder, the lib folder and the wwwroot folder (not at the same time). If I view source I can see the path and open the js file, so I know it can see it. I&#39;ve verified the path to the stl file as well. Still not working."}, {"owner": {"reputation": 220, "user_id": 4526069, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6hIPC.jpg?s=128&g=1", "display_name": "Chris G. Williams", "link": "https://stackoverflow.com/users/4526069/chris-g-williams"}, "edited": false, "score": 0, "creation_date": 1562850779, "post_id": 56981201, "comment_id": 100514747, "body": "In your working example , are you using a URL to point to the STL file, or just a relative path?"}, {"owner": {"reputation": 220, "user_id": 4526069, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6hIPC.jpg?s=128&g=1", "display_name": "Chris G. Williams", "link": "https://stackoverflow.com/users/4526069/chris-g-williams"}, "edited": false, "score": 0, "creation_date": 1562865204, "post_id": 56981201, "comment_id": 100522821, "body": "Are you using an ASP.NET Core MVC site? Your answer doesn&#39;t give me much to go on."}, {"owner": {"reputation": 14390, "user_id": 10158551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/45RCc.jpg?s=128&g=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/10158551/ryan"}, "reply_to_user": {"reputation": 220, "user_id": 4526069, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6hIPC.jpg?s=128&g=1", "display_name": "Chris G. Williams", "link": "https://stackoverflow.com/users/4526069/chris-g-williams"}, "edited": false, "score": 0, "creation_date": 1562895051, "post_id": 56981201, "comment_id": 100531801, "body": "I am glad that you have resolved that. For my situation,I use your code and put all js files in js folder under wwwroot, but i receives error in browser <code>https:&#47;&#47;localhost:44395&#47;three.min.js net::ERR_ABORTED 404</code>,when I move them out of js folder it works.I use a relative path to STL file."}], "tags": [], "owner": {"reputation": 14390, "user_id": 10158551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/45RCc.jpg?s=128&g=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/10158551/ryan"}, "is_accepted": false, "score": 0, "last_activity_date": 1562894598, "last_edit_date": 1562894598, "creation_date": 1562815410, "answer_id": 56981201, "question_id": 56977586, "link": "https://stackoverflow.com/questions/56977586/3d-model-does-not-render-in-asp-net-core-mvc-webpage-with-stl-viewer-javascript/56981201#56981201", "title": "3D model does not render in ASP.NET Core MVC webpage with Stl Viewer Javascript PlugIn", "body": "<p>It works when I remove all related js files from <code>wwwroot/js</code> to <code>wwwroot</code> folder direcltly.And change to use </p>\n\n<pre><code>&lt;script src=\"/stl_viewer.min.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>Update:</p>\n\n<p>All my scripts file and STL file are under wwwroot folder direcltly.</p>\n\n<p>View:</p>\n\n<pre><code>&lt;div id=\"stl_cont\" style=\"width:500px;height:500px;margin:0 auto;\"&gt;&lt;/div&gt;\n@section Scripts{\n    &lt;script src=\"/stl_viewer.min.js\"&gt;&lt;/script&gt;\n    &lt;script&gt;\n    var stl_viewer = new StlViewer(document.getElementById(\"stl_cont\"), { models: [{ id: 0, filename: \"Sheep_1.stl\" }] });\n&lt;/script&gt;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 220, "user_id": 4526069, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6hIPC.jpg?s=128&g=1", "display_name": "Chris G. Williams", "link": "https://stackoverflow.com/users/4526069/chris-g-williams"}, "is_accepted": true, "score": 0, "last_activity_date": 1562868913, "creation_date": 1562868913, "answer_id": 56995178, "question_id": 56977586, "link": "https://stackoverflow.com/questions/56977586/3d-model-does-not-render-in-asp-net-core-mvc-webpage-with-stl-viewer-javascript/56995178#56995178", "title": "3D model does not render in ASP.NET Core MVC webpage with Stl Viewer Javascript PlugIn", "body": "<p>Found the answer.  </p>\n\n<p>The Stl Viewer expects all of the js files to be in the same folder as the page that's using it, which for an MVC app is impractical, so they also provide a parameter LOAD_THREE_FILES which you can use to specify the location of the js files it needs.</p>\n"}], "owner": {"reputation": 220, "user_id": 4526069, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/6hIPC.jpg?s=128&g=1", "display_name": "Chris G. Williams", "link": "https://stackoverflow.com/users/4526069/chris-g-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 580, "favorite_count": 0, "accepted_answer_id": 56995178, "answer_count": 2, "score": 0, "last_activity_date": 1562894598, "creation_date": 1562787612, "question_id": 56977586, "link": "https://stackoverflow.com/questions/56977586/3d-model-does-not-render-in-asp-net-core-mvc-webpage-with-stl-viewer-javascript", "title": "3D model does not render in ASP.NET Core MVC webpage with Stl Viewer Javascript PlugIn", "body": "<p>I had this working with their remotely hosted option, but it was rather slow. I've wasted many hours trying to get the JS plugin to work. </p>\n\n<p>I can't get the 3d model to display inside the div, as shown in their guide here: <a href=\"https://www.viewstl.com/plugin/#usage\" rel=\"nofollow noreferrer\">https://www.viewstl.com/plugin/#usage</a> .</p>\n\n<p>I have the div container on my page, as so:</p>\n\n<pre><code>&lt;div id=\"stl_cont\" style=\"various color and size stuff\"&gt;Rendering 3D... Please Wait&lt;/div&gt;\n</code></pre>\n\n<p>and I have all of the js files in a js folder off of wwwroot, so I have this:</p>\n\n<pre><code>&lt;script src=\"~/js/stl_viewer.min.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>(If I view source, I can click on the link to the min.js and it will display in the browser, so I assume that path is valid as well)</p>\n\n<p>I have this code next:</p>\n\n<pre><code>&lt;script&gt;\n    var stl_viewer = new StlViewer(document.getElementById(\"stl_cont\"),{models:[{ id: 0, filename: \"https://www.exploredungeons.com/3dmodels/012/filename.stl\", load_three_files: \"js\" }]});\n&lt;/script&gt;\n</code></pre>\n\n<p>I can look in view source and click the link for the STL file and it will download, so the path appears to be right.</p>\n\n<p>I'm running ASP.NET CORE MVC if that helps any.  When I was running the  and pointing to the remote service, everything worked fine. I can't figure out what is missing.</p>\n"}, {"tags": ["javascript", "html"], "answers": [{"tags": [], "owner": {"reputation": 2614, "user_id": 1807604, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/r7vz4.jpg?s=128&g=1", "display_name": "Shawn", "link": "https://stackoverflow.com/users/1807604/shawn"}, "is_accepted": true, "score": 1, "last_activity_date": 1562792188, "last_edit_date": 1562792188, "creation_date": 1562789301, "answer_id": 56977926, "question_id": 56977572, "link": "https://stackoverflow.com/questions/56977572/how-to-set-default-value-in-input-datalist-and-still-have-the-drop-down/56977926#56977926", "title": "How to set default value in input datalist and still have the drop down?", "body": "<p>I know of no way to do this natively. You could make a \"helper\" div to use when the input field has value. I couldn't hide the native drop down so I renamed the ID. Uses jQuery.</p>\n\n<p>html</p>\n\n<pre><code>&lt;input list=\"orderTypes\" id=\"dlInput\"&gt;\n&lt;div id=\"helper\" style=\"display:none;position:absolute;z-index:200;border:1pt solid #ccc;\"&gt;&lt;/div&gt;\n&lt;datalist id=\"orderTypes\" style=\"z-index:100;\"&gt;\n   &lt;option value=\"Book\"&gt;\n   &lt;option value=\"Copy\"&gt;    \n   &lt;option value=\"Page\"&gt;\n&lt;/datalist&gt;\n</code></pre>\n\n<p>script</p>\n\n<pre><code>$(function(){\n    // make a copy of datalist \n    var dl=\"\";\n    $(\"#orderTypes option\").each(function(){\n            dl+=\"&lt;div class='dlOption'&gt;\"+$(this).val()+\"&lt;/div&gt;\";\n    });\n    $(\"#helper\").html(dl);\n    $(\"#helper\").width( $(\"#dlInput\").width() );\n\n    $(document).on(\"click\",\"#dlInput\",function(){\n        // display list if it has value\n        var lv=$(\"#dlInput\").val();\n        if( lv.length ){\n                $(\"#orderTypes\").attr(\"id\",\"orderTypesHide\");\n                $(\"#helper\").show();\n        }\n    });\n\n    $(document).on(\"click\",\".dlOption\",function(){\n        $(\"#dlInput\").val( $(this).html() );\n        $(\"#helper\").hide();\n    });\n\n    $(document).on(\"change\",\"#dlInput\",function(){\n        if( $(this).val()===\"\" ){\n            $(\"#orderTypesHide\").attr(\"id\",\"orderTypes\");\n            $(\"#helper\").hide();\n        }\n    }); \n}); \n</code></pre>\n\n<p><a href=\"https://jsfiddle.net/shawnsBrain66/c8m94L2k/1/\" rel=\"nofollow noreferrer\">jsFiddle</a></p>\n"}, {"tags": [], "owner": {"reputation": 3316, "user_id": 6525081, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/979326a08920928ba490fb2cc2180752?s=128&d=identicon&r=PG&f=1", "display_name": "A. Meshu", "link": "https://stackoverflow.com/users/6525081/a-meshu"}, "is_accepted": false, "score": 0, "last_activity_date": 1562791070, "last_edit_date": 1562791070, "creation_date": 1562790645, "answer_id": 56978204, "question_id": 56977572, "link": "https://stackoverflow.com/questions/56977572/how-to-set-default-value-in-input-datalist-and-still-have-the-drop-down/56978204#56978204", "title": "How to set default value in input datalist and still have the drop down?", "body": "<p>Is this what you trying to do?</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>    var demoInput = document.getElementById('demoInput'); // give an id to your input and set it as variable\r\n    demoInput.value ='books'; // set default value instead of html attribute\r\n    demoInput.onfocus = function() { demoInput.value =''; }; // on focus - clear input\r\n    demoInput.onblur = function() { demoInput.value ='books'; }; // on leave restore it.\r\n    </code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;legend&gt;(double) click on the input to see options:&lt;/legend&gt;\r\n    &lt;input list=\"orderTypes\" id=\"demoInput\"&gt;\r\n    &lt;datalist id=\"orderTypes\"&gt;\r\n      &lt;option value=\"Book\"&gt;\r\n      &lt;option value=\"Copy\"&gt;\r\n      &lt;option value=\"Page\"&gt;\r\n    &lt;/datalist&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>The only \"problem\" here is that in order to see the options the user have to click the input again so it's like \"double-click the input to see options\".</p>\n\n<p>Hope that helps.</p>\n"}, {"tags": [], "owner": {"reputation": 4252, "user_id": 3103891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mZxsu.jpg?s=128&g=1", "display_name": "GalAbra", "link": "https://stackoverflow.com/users/3103891/galabra"}, "is_accepted": false, "score": 0, "last_activity_date": 1562793220, "creation_date": 1562793220, "answer_id": 56978721, "question_id": 56977572, "link": "https://stackoverflow.com/questions/56977572/how-to-set-default-value-in-input-datalist-and-still-have-the-drop-down/56978721#56978721", "title": "How to set default value in input datalist and still have the drop down?", "body": "<p>I would use <code>input</code>'s <code>placeholder</code> attribute along with a Javascript code that'll make sure that the field isn't empty upon submission.</p>\n\n<p>Obviously this is just an example, you'll have to modify the submission event.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>document.getElementById('submitButton').addEventListener('click', function() {\r\n  let inputElement = document.getElementById('myInput');\r\n  if (!inputElement.value) {\r\n    inputElement.value = 'Book';\r\n  }\r\n});</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;input id=\"myInput\" list=\"orderTypes\" placeholder=\"Book\"&gt;\r\n&lt;datalist id=\"orderTypes\"&gt;\r\n  &lt;option value=\"Book\"&gt;\r\n  &lt;option value=\"Copy\"&gt;\r\n  &lt;option value=\"Page\"&gt;\r\n&lt;/datalist&gt;\r\n&lt;input id=\"submitButton\" type=\"submit\"&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10968948, "user_type": "registered", "profile_image": "https://graph.facebook.com/2250882788488269/picture?type=large", "display_name": "Adam Chojaczyk", "link": "https://stackoverflow.com/users/10968948/adam-chojaczyk"}, "is_accepted": false, "score": 0, "last_activity_date": 1602017622, "creation_date": 1602017622, "answer_id": 64233646, "question_id": 56977572, "link": "https://stackoverflow.com/questions/56977572/how-to-set-default-value-in-input-datalist-and-still-have-the-drop-down/64233646#64233646", "title": "How to set default value in input datalist and still have the drop down?", "body": "<p>I've menaged to get what You described with just <code>&lt;select&gt;</code> + <code>&lt;option&gt;</code> tags instead of <code>&lt;input&gt;</code> + <code>&lt;datalist&gt;</code>:</p>\n<pre><code>&lt;select name=&quot;sortBY&quot;&gt;\n\n  &lt;option value=&quot;Book&quot;&gt;Book&lt;/option&gt;\n  &lt;option value=&quot;Copy&quot;&gt;Copy&lt;/option&gt;\n  &lt;option value=&quot;Page&quot;&gt;Page&lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n<p>Putting it all inside <code>&lt;form&gt;&lt;/form&gt;</code> tags will send it eg. with POST method with <code>$_POST['sortBY']</code> value.</p>\n"}], "owner": {"reputation": 895, "user_id": 10818509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3c36f15912146c6d0f1201f89a5d0e?s=128&d=identicon&r=PG&f=1", "display_name": "jedu", "link": "https://stackoverflow.com/users/10818509/jedu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4897, "favorite_count": 0, "accepted_answer_id": 56977926, "answer_count": 4, "score": 1, "last_activity_date": 1602017622, "creation_date": 1562787562, "last_edit_date": 1562790501, "question_id": 56977572, "link": "https://stackoverflow.com/questions/56977572/how-to-set-default-value-in-input-datalist-and-still-have-the-drop-down", "title": "How to set default value in input datalist and still have the drop down?", "body": "<p>I am using the <code>datalist</code> HTML property to get a drop down inout box:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;input list=\"orderTypes\" value=\"Book\"&gt;\r\n&lt;datalist id=\"orderTypes\"&gt;\r\n  &lt;option value=\"Book\"&gt;\r\n  &lt;option value=\"Copy\"&gt;\r\n  &lt;option value=\"Page\"&gt;\r\n&lt;/datalist&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>The problem is that now I have to clear the input box to view all the drop down values. Is there a way to have a default value but still view all the values in the datalist when the drop down icon is clicked?</p>\n"}, {"tags": ["javascript", "node.js", "http-headers"], "comments": [{"owner": {"reputation": 4660, "user_id": 4556423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29dafcfc51c18a4c97540e884a7ddba5?s=128&d=identicon&r=PG&f=1", "display_name": "Rikin", "link": "https://stackoverflow.com/users/4556423/rikin"}, "edited": false, "score": 2, "creation_date": 1562787522, "post_id": 56977446, "comment_id": 100491193, "body": "301 is correct status code which means page was redirected. You are trying to hit <code>google.com</code> which then redirects to <code>https:&#47;&#47;google.com</code> thus the redirect"}, {"owner": {"reputation": 1936, "user_id": 5568741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VNja2.jpg?s=128&g=1", "display_name": "k3llydev", "link": "https://stackoverflow.com/users/5568741/k3llydev"}, "edited": false, "score": 0, "creation_date": 1562787789, "post_id": 56977446, "comment_id": 100491311, "body": "You should read about <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Redirections\" rel=\"nofollow noreferrer\">HTTP Redirections</a> first. And also, verify <a href=\"https://httpstatus.io/\" rel=\"nofollow noreferrer\">here</a> that the address <code>google.com</code> returns a 301 status code, then a 302 and finally a 200. That&#39;s how Google redirects users to their HTTPS protocol. Calling <code>google.com</code> is an HTTP protocol by default. Try calling: <code>https:&#47;&#47;www.google.com</code> directly to prevent redirections."}, {"owner": {"reputation": 170, "user_id": 4821381, "user_type": "registered", "profile_image": "https://graph.facebook.com/779432435458778/picture?type=large", "display_name": "Ravi Mattar", "link": "https://stackoverflow.com/users/4821381/ravi-mattar"}, "edited": false, "score": 0, "creation_date": 1562787835, "post_id": 56977446, "comment_id": 100491334, "body": "Calling google at https directly with that code gives me an error"}, {"owner": {"reputation": 1936, "user_id": 5568741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VNja2.jpg?s=128&g=1", "display_name": "k3llydev", "link": "https://stackoverflow.com/users/5568741/k3llydev"}, "edited": false, "score": 0, "creation_date": 1562788059, "post_id": 56977446, "comment_id": 100491420, "body": "@RaviMattar call <code>https:&#47;&#47;www.google.com</code> directly."}, {"owner": {"reputation": 170, "user_id": 4821381, "user_type": "registered", "profile_image": "https://graph.facebook.com/779432435458778/picture?type=large", "display_name": "Ravi Mattar", "link": "https://stackoverflow.com/users/4821381/ravi-mattar"}, "edited": false, "score": 0, "creation_date": 1562788523, "post_id": 56977446, "comment_id": 100491624, "body": "And how could I get all status codes?"}], "answers": [{"comments": [{"owner": {"reputation": 170, "user_id": 4821381, "user_type": "registered", "profile_image": "https://graph.facebook.com/779432435458778/picture?type=large", "display_name": "Ravi Mattar", "link": "https://stackoverflow.com/users/4821381/ravi-mattar"}, "edited": false, "score": 0, "creation_date": 1562798126, "post_id": 56978123, "comment_id": 100494793, "body": "Gods, thank you so much! I finnaly got to understand a bit of this and managed to get it to work."}], "tags": [], "owner": {"reputation": 234, "user_id": 9750364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hq8Kw.png?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/9750364/ben"}, "is_accepted": true, "score": 1, "last_activity_date": 1562790565, "last_edit_date": 1562790565, "creation_date": 1562790246, "answer_id": 56978123, "question_id": 56977446, "link": "https://stackoverflow.com/questions/56977446/how-to-get-a-websites-http-response-headers-with-node/56978123#56978123", "title": "How to get a website&#39;s HTTP response headers with Node", "body": "<p>You can see that if I cURL <code>google.com</code> <a href=\"https://en.wikipedia.org/wiki/List_of_HTTP_status_codes#3xx_Redirection\" rel=\"nofollow noreferrer\">I get a 301, redirect</a>\n<a href=\"https://i.stack.imgur.com/iHY0j.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iHY0j.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is because <code>google.com</code> is redirecting me to <code>www.google.com</code>.  However, if I cURL <code>www.google.com</code>, it gives me this response,</p>\n\n<p><a href=\"https://i.stack.imgur.com/7oeAV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7oeAV.png\" alt=\"enter image description here\"></a></p>\n\n<p>which is the webpage.  As far as the headers, they should be in <code>res.headers</code> according to the <a href=\"https://nodejs.org/api/https.html\" rel=\"nofollow noreferrer\">https module documentation</a> which shows the following example</p>\n\n<pre><code>const https = require('https');\n\nhttps.get('https://encrypted.google.com/', (res) =&gt; {\n  console.log('statusCode:', res.statusCode);\n  console.log('headers:', res.headers);\n\n  res.on('data', (d) =&gt; {\n    process.stdout.write(d);\n  });\n\n}).on('error', (e) =&gt; {\n  console.error(e);\n});\n</code></pre>\n\n<p>As you can see, they print the headers using <code>console.log('headers:', res.headers);</code>.  You can access a given header by using <code>res.headers['INSERT-HEADER-NAME-HERE']</code> where INSERT-HEADER-NAME-HERE is replaced with <a href=\"https://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Request_fields\" rel=\"nofollow noreferrer\">the header that you want to use</a></p>\n"}], "owner": {"reputation": 170, "user_id": 4821381, "user_type": "registered", "profile_image": "https://graph.facebook.com/779432435458778/picture?type=large", "display_name": "Ravi Mattar", "link": "https://stackoverflow.com/users/4821381/ravi-mattar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 56978123, "answer_count": 1, "score": 0, "last_activity_date": 1562790565, "creation_date": 1562787009, "question_id": 56977446, "link": "https://stackoverflow.com/questions/56977446/how-to-get-a-websites-http-response-headers-with-node", "title": "How to get a website&#39;s HTTP response headers with Node", "body": "<p>I've been searching the entire day for this. All I want is to get <strong>the http response headers</strong> plus the <strong>status code</strong> for a given website using Node JS. That simple.</p>\n\n<p>All the answers and documentation I checked seem far too hideously too complicated for this simple problem, plus I don't seem to be able to get them to work.</p>\n\n<p>For example, one answer provided me with this code</p>\n\n<pre><code>const https = require('https')\nconst options = {\n  hostname: 'google.com'\n}\n\nconst req = https.request(options, (res) =&gt; {\n  console.log(`statusCode: ${res.statusCode}`)\n\n  res.on('data', (d) =&gt; {\n    process.stdout.write(d)\n  })\n})\n\nreq.on('error', (error) =&gt; {\n  console.error(error)\n})\n\nreq.end()\n</code></pre>\n\n<p>After trying it with google, the response code it shows me is 301, which is obvisouly just wrong</p>\n\n<p>For that example, I believe the correct code would be \"200\" for OK. Plus this one doesnt show all the headers.</p>\n"}, {"tags": ["javascript", "typescript", "babeljs"], "comments": [{"owner": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "edited": false, "score": 2, "creation_date": 1562792666, "post_id": 56977443, "comment_id": 100493223, "body": "The real question is &quot;which browsers do you <i>really</i> want to target&quot;? Because almost all of them support modern JS and don&#39;t need ES5 transpilation at all. If you want to still support IE11, then it&#39;s probably worth making a special ES5 bundle only for that one platform instead of serving ES5 to everyone."}, {"owner": {"reputation": 350, "user_id": 5078905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f217782217ed8124bfdc0ce578e0db57?s=128&d=identicon&r=PG", "display_name": "Spencer Pollock", "link": "https://stackoverflow.com/users/5078905/spencer-pollock"}, "reply_to_user": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "edited": false, "score": 0, "creation_date": 1562793760, "post_id": 56977443, "comment_id": 100493603, "body": "I don&#39;t have any browsers in specific to target. That said, as things are moving to es5 in general, it would be best to target that version as most will be updated. I&#39;m simply trying to get this working for Electron, of which I&#39;m also going to have the builds require version updates before usage"}, {"owner": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "edited": false, "score": 0, "creation_date": 1562793899, "post_id": 56977443, "comment_id": 100493644, "body": "I think you&#39;re misunderstanding what es5 is - es5 is the <i>old</i> version of JS, ecmascript 262 revision 5. It&#39;s the one you used to have to convert things to because lots of newer JS features weren&#39;t supported yet. Years ago. The current version of JS has too many names used by different people, and so is usually marked as &quot;esnext&quot; even though it&#39;s really  &quot;es-right-now&quot;. The current version of JS is ecmascript 262 revision 9. If your target is electron, there is literally no reason to ever compile to legacy es5. It supports modern JS just fine."}, {"owner": {"reputation": 350, "user_id": 5078905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f217782217ed8124bfdc0ce578e0db57?s=128&d=identicon&r=PG", "display_name": "Spencer Pollock", "link": "https://stackoverflow.com/users/5078905/spencer-pollock"}, "reply_to_user": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "edited": false, "score": 1, "creation_date": 1562832041, "post_id": 56977443, "comment_id": 100503719, "body": "Thank you Mike, this helps me narrow my focus and gives me some more to jump on. I appreciate the assistance! I&#39;ll update with some more information and post my findings here later on."}], "owner": {"reputation": 350, "user_id": 5078905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f217782217ed8124bfdc0ce578e0db57?s=128&d=identicon&r=PG", "display_name": "Spencer Pollock", "link": "https://stackoverflow.com/users/5078905/spencer-pollock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2542, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1562792088, "creation_date": 1562786986, "last_edit_date": 1562792088, "question_id": 56977443, "link": "https://stackoverflow.com/questions/56977443/tsc-vs-babel-a-better-transpilation-compiler-workflow", "title": "tsc vs babel: a better transpilation/compiler workflow", "body": "<p>I\u2019m working on an ESNext TypeScript project. Currently I\u2019m having some difficulty running my bundler (Rollup) and unit tests (Mocha/Chai). I\u2019ve been quite confused by using <code>tsc</code> or <code>babel</code> for my compilation process, and I just can\u2019t seem to wrap my head around how all of it\u2019s going to work.</p>\n\n<p>So far, I have the following configs:</p>\n\n<p>tsconfig.json (main config for the project; used in rollup.config.json)</p>\n\n<pre><code>{\n  \"compilerOptions\": {\n    \"target\": \"esnext\",\n    \"module\": \"es2015\",\n    \"lib\": [\"esnext\", \"dom\"],\n    \"declaration\": true,\n    \"outDir\": \"./lib\",\n    \"rootDir\": \"./src\",\n    \"strict\": true,\n    \"noImplicitAny\": true,\n    \"moduleResolution\": \"node\",\n    \"baseUrl\": \"./\",\n    \"types\": [\n      \"node\",\n      \"three\"\n    ], \n    \"esModuleInterop\": true,\n    \"inlineSourceMap\": true,\n    \"pretty\": true,\n    \"skipLibCheck\": true\n  },\n  \"include\": [\n    \"src/**/*\"\n  ],\n  \"exclude\": [\n    \"node_modules\",\n  ]\n}\n</code></pre>\n\n<p>rollup.config.js (rollup file for main project module bundling)</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>import typescript from 'rollup-plugin-typescript2';\nimport babel from 'rollup-plugin-babel';\nimport globals from 'rollup-plugin-node-globals';\nimport builtins from '@joseph184/rollup-plugin-node-builtins';\nimport resolve from 'rollup-plugin-node-resolve';\nimport commonjs from 'rollup-plugin-commonjs';\nimport pkg from \"./package.json\";\n\nexport default [\n    {\n        input: './src/index.ts',\n        plugins: [\n            typescript(),\n        ],\n        external: [\n            \"three\"\n        ],\n        output: [\n            {\n                file: pkg.module,\n                format: 'es'\n            }\n        ]\n    },\n    {\n        input: './src/index.ts',\n        plugins: [\n            resolve({\n                preferBuiltins: true,\n                mainFields: ['module', 'main'],\n            }),\n            globals({\n                process: true,\n                global: true,\n                dirname: true,\n                filename: true\n            }),\n            builtins(),\n            commonjs(),\n            typescript(),\n            babel({\n                babelrc: true\n            }),\n        ],\n        external: [\n            \"three\"\n        ],\n        output: [ // Required; Array = multiple outputs\n            {\n                file: pkg.main,\n                format: 'umd',\n                name: 'Divine'\n            },\n            {\n                file: \"lib/divine.cjs.js\",\n                format: 'cjs'\n            }\n        ]\n    }\n]\n</code></pre>\n\n<p>.babelrc (babel options for the main project\u2019s module bundling)</p>\n\n<pre><code>{\n    \"presets\": [\n        [\"@babel/preset-env\", {\n            \"useBuiltIns\": \"entry\",\n            \"debug\": \"true\"\n        }],\n        \"@babel/preset-typescript\"\n    ],\n    \"plugins\": [\n        \"@babel/plugin-proposal-class-properties\",\n        \"@babel/plugin-transform-runtime\",\n        \"@babel/plugin-transform-arrow-functions\",\n        \"@babel/plugin-syntax-dynamic-import\"\n    ],\n    \"compact\": \"auto\",\n    \"exclude\": [\n        \"./src/**/test/**/*.spec.ts\",\n        \"./node_modules/*\"\n    ]\n}\n</code></pre>\n\n<p>tsconfig.test.json (<code>tsc</code> config used for <code>mocha</code> with <code>ts-node</code> as the compiler)</p>\n\n<pre><code>{\n    \"compililerOptions\": {\n        \"target\": \"esnext\",\n        \"module\": \"commonjs\",\n        \"lib\": [\"esnext\", \"dom\"],\n        \"moduleResolution\": \"node\",\n        \"esModuleInterop\": true,\n        \"types\": [\n            \"chai\",\n            \"mocha\",\n        ],\n        \"exclude\": [\n            \"src/core/loggingsystem/test\",\n            \"src/core/messagesystem/test\"\n        ]\n    }\n}\n</code></pre>\n\n<p>My main question is: which should I use for esnext to es5 (for most browser support)? I want to work in ESNext code, but I want to have my build steps with the least friction possible. Is it better to use <code>tsc</code> natively, or should I have Babel mixed in/fully used? I\u2019ve been having a very difficult time with my builds as I\u2019m still quite unsure of how it should all fit together. </p>\n\n<p>Any help is much appreciated!</p>\n"}, {"tags": ["javascript", "php", "ajax"], "comments": [{"owner": {"reputation": 162920, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1562787342, "post_id": 56977423, "comment_id": 100491118, "body": "How are you calling <code>deleteRow()</code>?"}, {"owner": {"reputation": 6259, "user_id": 1505169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7587c1565b83cc140aed311aca770d78?s=128&d=identicon&r=PG", "display_name": "Patrick Q", "link": "https://stackoverflow.com/users/1505169/patrick-q"}, "edited": false, "score": 0, "creation_date": 1562787611, "post_id": 56977423, "comment_id": 100491229, "body": "Put it as a data- attribute on the button, bind a click-handler to the button that grabs that attribute and uses it in the <code>data</code> property of the ajax request.  See <a href=\"https://api.jquery.com/jquery.ajax/\" rel=\"nofollow noreferrer\">the documentation for .ajax</a>"}, {"owner": {"reputation": 5145, "user_id": 987704, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/9nXwn.jpg?s=128&g=1", "display_name": "LIGHT", "link": "https://stackoverflow.com/users/987704/light"}, "reply_to_user": {"reputation": 6259, "user_id": 1505169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7587c1565b83cc140aed311aca770d78?s=128&d=identicon&r=PG", "display_name": "Patrick Q", "link": "https://stackoverflow.com/users/1505169/patrick-q"}, "edited": false, "score": 0, "creation_date": 1562787644, "post_id": 56977423, "comment_id": 100491245, "body": "@PatrickQ, just like my answer? ))"}, {"owner": {"reputation": 6259, "user_id": 1505169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7587c1565b83cc140aed311aca770d78?s=128&d=identicon&r=PG", "display_name": "Patrick Q", "link": "https://stackoverflow.com/users/1505169/patrick-q"}, "reply_to_user": {"reputation": 5145, "user_id": 987704, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/9nXwn.jpg?s=128&g=1", "display_name": "LIGHT", "link": "https://stackoverflow.com/users/987704/light"}, "edited": false, "score": 0, "creation_date": 1562787703, "post_id": 56977423, "comment_id": 100491270, "body": "@LIGHT  but without the handholding"}, {"owner": {"reputation": 5145, "user_id": 987704, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/9nXwn.jpg?s=128&g=1", "display_name": "LIGHT", "link": "https://stackoverflow.com/users/987704/light"}, "edited": false, "score": 0, "creation_date": 1562787780, "post_id": 56977423, "comment_id": 100491309, "body": "did i go too far?"}, {"owner": {"reputation": 6259, "user_id": 1505169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7587c1565b83cc140aed311aca770d78?s=128&d=identicon&r=PG", "display_name": "Patrick Q", "link": "https://stackoverflow.com/users/1505169/patrick-q"}, "reply_to_user": {"reputation": 5145, "user_id": 987704, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/9nXwn.jpg?s=128&g=1", "display_name": "LIGHT", "link": "https://stackoverflow.com/users/987704/light"}, "edited": false, "score": 1, "creation_date": 1562788107, "post_id": 56977423, "comment_id": 100491439, "body": "@LIGHT No, I just would have liked to see OP put in a little more effort.  There&#39;s a <i>lot</i> missing between what they have and what they want to accomplish, and much of it could have been found with some simple searching."}, {"owner": {"reputation": 21453, "user_id": 1839439, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/agMKZ.png?s=128&g=1", "display_name": "Dharman", "link": "https://stackoverflow.com/users/1839439/dharman"}, "edited": false, "score": 1, "creation_date": 1562790144, "post_id": 56977423, "comment_id": 100492240, "body": "<code>mysqli_error</code> needs an argument passed. It is a very bad idea to use <code>die(mysqli_error($conn));</code> in your code, because it could potentially leak sensitive information. See this post for more explanation: <a href=\"https://stackoverflow.com/a/15320411/1839439\">mysqli or die, does it have to die?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 6259, "user_id": 1505169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7587c1565b83cc140aed311aca770d78?s=128&d=identicon&r=PG", "display_name": "Patrick Q", "link": "https://stackoverflow.com/users/1505169/patrick-q"}, "edited": false, "score": 0, "creation_date": 1562788374, "post_id": 56977584, "comment_id": 100491562, "body": "Note that in Functions.php something will need to actually <i>call</i> <code>deleteData()</code>.  Perhaps a second data element (something like &quot;action&quot;) should be passed, indicating what code should be run within the file.  Hard to say without knowing what the file actually looks like.  And really, a file named Functions.php probably isn&#39;t the appropriate file to be directly calling for something like this."}, {"owner": {"reputation": 5145, "user_id": 987704, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/9nXwn.jpg?s=128&g=1", "display_name": "LIGHT", "link": "https://stackoverflow.com/users/987704/light"}, "reply_to_user": {"reputation": 6259, "user_id": 1505169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7587c1565b83cc140aed311aca770d78?s=128&d=identicon&r=PG", "display_name": "Patrick Q", "link": "https://stackoverflow.com/users/1505169/patrick-q"}, "edited": false, "score": 0, "creation_date": 1562788601, "post_id": 56977584, "comment_id": 100491658, "body": "True, however, I assume, this question was just for question&#39;s sake."}, {"owner": {"reputation": 5145, "user_id": 987704, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/9nXwn.jpg?s=128&g=1", "display_name": "LIGHT", "link": "https://stackoverflow.com/users/987704/light"}, "reply_to_user": {"reputation": 21453, "user_id": 1839439, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/agMKZ.png?s=128&g=1", "display_name": "Dharman", "link": "https://stackoverflow.com/users/1839439/dharman"}, "edited": false, "score": 0, "creation_date": 1562789849, "post_id": 56977584, "comment_id": 100492115, "body": "@Dharman, thanks for pointing it out, I guess <code>intval()</code> will work just fine in this case."}, {"owner": {"reputation": 5145, "user_id": 987704, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/9nXwn.jpg?s=128&g=1", "display_name": "LIGHT", "link": "https://stackoverflow.com/users/987704/light"}, "edited": false, "score": 0, "creation_date": 1562790045, "post_id": 56977584, "comment_id": 100492195, "body": "Right. I&#39;ll edit my answer again. I just copied/pasted OP&#39;s code and tweaked it as per OP&#39;s requirement, so.."}, {"owner": {"reputation": 2016, "user_id": 1624793, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/100000456738864/picture?type=large", "display_name": "Bradly Spicer", "link": "https://stackoverflow.com/users/1624793/bradly-spicer"}, "edited": false, "score": 0, "creation_date": 1562857349, "post_id": 56977584, "comment_id": 100518849, "body": "Thank you for your thorough explanation on this @LIGHT, I&#39;ve spent some time reflecting on this, I noticed I had loaded this incorrectly as well as the src for my JS was included in the header. So that has been resolved as well.  I am getting an alert but the data isn&#39;t being removed and the Alert box isn&#39;t actually showing anything.  Any feedback would be appreciated."}, {"owner": {"reputation": 5145, "user_id": 987704, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/9nXwn.jpg?s=128&g=1", "display_name": "LIGHT", "link": "https://stackoverflow.com/users/987704/light"}, "edited": false, "score": 0, "creation_date": 1562859204, "post_id": 56977584, "comment_id": 100519935, "body": "I think you haven&#39;t declared <code>$link</code> variable. can you paste your <code>functions.php</code> code"}, {"owner": {"reputation": 2016, "user_id": 1624793, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/100000456738864/picture?type=large", "display_name": "Bradly Spicer", "link": "https://stackoverflow.com/users/1624793/bradly-spicer"}, "edited": false, "score": 0, "creation_date": 1562859983, "post_id": 56977584, "comment_id": 100520360, "body": "Please see above for the full edit @LIGHT, to confirm, it does now state &quot;Success&quot;, however, it doesn&#39;t show me the id and the row is not removed. In the rendered page I CAN see that the id is correct:   <code>&lt;button type=&quot;button&quot; data-itemid=&quot;15&quot; class=&quot;delbtn&quot;&gt;Remove&lt;&#47;button&gt;</code> so it appears to just be the SQL part?"}, {"owner": {"reputation": 2016, "user_id": 1624793, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/100000456738864/picture?type=large", "display_name": "Bradly Spicer", "link": "https://stackoverflow.com/users/1624793/bradly-spicer"}, "edited": false, "score": 0, "creation_date": 1562861615, "post_id": 56977584, "comment_id": 100521197, "body": "@LIGHT After much debugging and tweaking, I can 100% confirm the issue is related to passing the $id variable. Setting the WHERE id = ? part manually to an id in the database works fine. But using ? does not pass that data over."}, {"owner": {"reputation": 2016, "user_id": 1624793, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/100000456738864/picture?type=large", "display_name": "Bradly Spicer", "link": "https://stackoverflow.com/users/1624793/bradly-spicer"}, "edited": false, "score": 0, "creation_date": 1562877605, "post_id": 56977584, "comment_id": 100527932, "body": "Managed to fix this by changing <code>var itemID = $(this).attr(&quot;itemID&quot;)</code> to <code>var itemID = $(this).attr(&quot;id&quot;)</code>."}, {"owner": {"reputation": 5145, "user_id": 987704, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/9nXwn.jpg?s=128&g=1", "display_name": "LIGHT", "link": "https://stackoverflow.com/users/987704/light"}, "edited": false, "score": 0, "creation_date": 1562906177, "post_id": 56977584, "comment_id": 100533649, "body": "Yes, because <code>itemID</code> isn&#39;t attribute, its <code>data</code> attribute, can be pulled by <code>.data()</code>"}], "tags": [], "owner": {"reputation": 5145, "user_id": 987704, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/9nXwn.jpg?s=128&g=1", "display_name": "LIGHT", "link": "https://stackoverflow.com/users/987704/light"}, "is_accepted": true, "score": 2, "last_activity_date": 1562790743, "last_edit_date": 1562790743, "creation_date": 1562787606, "answer_id": 56977584, "question_id": 56977423, "link": "https://stackoverflow.com/questions/56977423/how-do-i-use-ajax-to-run-an-sql-query-within-a-php-while-loop/56977584#56977584", "title": "How do I use Ajax to run an SQL query within a php while loop?", "body": "<p><strong>Index.php:</strong></p>\n\n<p>Add a <em>delete button identifier</em> class <code>delbtn</code> and a data attribute that carries this row's id <code>data-itemID</code></p>\n\n<pre><code>&lt;?php\n    while($row = mysqli_fetch_array($dataTablesResult)){\n        $id = $row[\"id\"];\n        echo '\n        &lt;tr&gt;\n          &lt;td&gt;\n            &lt;button type=\"button\" data-itemID=\"'.$id.'\" class=\"delbtn btn btn-danger\" &gt;Remove&lt;/button&gt;\n          &lt;/td&gt;\n        &lt;/tr&gt;\n        ';\n    }\n?&gt;\n</code></pre>\n\n<p><strong>Functions.php:</strong></p>\n\n<p>Capture <code>$_POST['id']</code> sent by ajax</p>\n\n<pre><code>$id = $_POST['id'];\n$deleterow = \"DELETE FROM Offences WHERE id = ?\";\nif($stmt = mysqli_prepare($link, $deleterow)){ // $link being your connection\n    mysqli_stmt_bind_param($stmt, \"s\", $id);\n    mysqli_stmt_execute($stmt);\n}\n</code></pre>\n\n<p><strong>Custom.js:</strong></p>\n\n<p>Run the jQuery function when a button with <code>.delbtn</code> class is clicked. Capture and store the row id from data attribute as <code>$(this).data(\"itemID\")</code>. Then send the data using <code>data: { id: itemID}</code> within ajax request</p>\n\n<pre><code>$(\".delbtn\").click(function(){\n    itemID = $(this).data(\"itemID\");\n    $.ajax({\n        url:\"functions.php\", //the page containing php script\n        data: { id: itemID}, // itemID passed as id\n        type: \"POST\", //request type\n        success:function(result){\n            alert(result);\n        }\n    });\n});\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 518, "user_id": 8678900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g1Atk.jpg?s=128&g=1", "display_name": "sohaieb azaiez", "link": "https://stackoverflow.com/users/8678900/sohaieb-azaiez"}, "reply_to_user": {"reputation": 2016, "user_id": 1624793, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/100000456738864/picture?type=large", "display_name": "Bradly Spicer", "link": "https://stackoverflow.com/users/1624793/bradly-spicer"}, "edited": false, "score": 0, "creation_date": 1562861548, "post_id": 56993290, "comment_id": 100521168, "body": "fine, if you write <b>echo $id;</b> directly after <b>$id = $_POST[&#39;id&#39;];</b> what result will be displayed for you  ? just to understand if the id is passed correctly from the client or not"}, {"owner": {"reputation": 2016, "user_id": 1624793, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/100000456738864/picture?type=large", "display_name": "Bradly Spicer", "link": "https://stackoverflow.com/users/1624793/bradly-spicer"}, "edited": false, "score": 0, "creation_date": 1562861667, "post_id": 56993290, "comment_id": 100521216, "body": "Nothing is displayed, I have tried this already, see comments in other thread. $id = $id = $_POST[&#39;id&#39;]; is not working"}, {"owner": {"reputation": 518, "user_id": 8678900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g1Atk.jpg?s=128&g=1", "display_name": "sohaieb azaiez", "link": "https://stackoverflow.com/users/8678900/sohaieb-azaiez"}, "reply_to_user": {"reputation": 2016, "user_id": 1624793, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/100000456738864/picture?type=large", "display_name": "Bradly Spicer", "link": "https://stackoverflow.com/users/1624793/bradly-spicer"}, "edited": false, "score": 0, "creation_date": 1562861847, "post_id": 56993290, "comment_id": 100521290, "body": "I&#39;m sorry because i did not notice that you wrote that in comments ..  nice, then, that&#39;s what I need for now,  so tell me just if you write <b>console.log(itemID)</b> directly after this line <b>itemID = $(this).data(&quot;itemID&quot;);</b> and check your console to see the result, and tell me if your browser is retreiving the itemID correctly from the Dom element or not ? if yes , then  add this option to your ajax request: <b>processData:false,</b> and tell me the result"}, {"owner": {"reputation": 518, "user_id": 8678900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g1Atk.jpg?s=128&g=1", "display_name": "sohaieb azaiez", "link": "https://stackoverflow.com/users/8678900/sohaieb-azaiez"}, "reply_to_user": {"reputation": 2016, "user_id": 1624793, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/100000456738864/picture?type=large", "display_name": "Bradly Spicer", "link": "https://stackoverflow.com/users/1624793/bradly-spicer"}, "edited": false, "score": 0, "creation_date": 1562862789, "post_id": 56993290, "comment_id": 100521695, "body": "and to be sure for something, your problem was using the <b>$(this).data(&quot;itemID&quot;)</b> instead of the <b>attr( )</b> function, so I sugguest to change this line like this ==&gt; <b>var itemID = $(this).attr(&quot;itemID&quot;);</b>"}, {"owner": {"reputation": 2016, "user_id": 1624793, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/100000456738864/picture?type=large", "display_name": "Bradly Spicer", "link": "https://stackoverflow.com/users/1624793/bradly-spicer"}, "edited": false, "score": 0, "creation_date": 1562865137, "post_id": 56993290, "comment_id": 100522787, "body": "Thanks for the updates to this. The console log only contains the following: <code>[Violation] &#39;load&#39; handler took 871ms</code> When the button is clicked. I have updated the script in my OP to reflect"}, {"owner": {"reputation": 2016, "user_id": 1624793, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/100000456738864/picture?type=large", "display_name": "Bradly Spicer", "link": "https://stackoverflow.com/users/1624793/bradly-spicer"}, "reply_to_user": {"reputation": 518, "user_id": 8678900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g1Atk.jpg?s=128&g=1", "display_name": "sohaieb azaiez", "link": "https://stackoverflow.com/users/8678900/sohaieb-azaiez"}, "edited": false, "score": 0, "creation_date": 1562872128, "post_id": 56993290, "comment_id": 100525829, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/196338/discussion-between-bradly-spicer-and-sohaieb\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 518, "user_id": 8678900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g1Atk.jpg?s=128&g=1", "display_name": "sohaieb azaiez", "link": "https://stackoverflow.com/users/8678900/sohaieb-azaiez"}, "is_accepted": false, "score": 1, "last_activity_date": 1562861231, "creation_date": 1562861231, "answer_id": 56993290, "question_id": 56977423, "link": "https://stackoverflow.com/questions/56977423/how-do-i-use-ajax-to-run-an-sql-query-within-a-php-while-loop/56993290#56993290", "title": "How do I use Ajax to run an SQL query within a php while loop?", "body": "<p>i think if you change this line : </p>\n\n<pre><code>mysqli_stmt_bind_param($stmt, \"s\", $id);\n</code></pre>\n\n<p>to this is one:</p>\n\n<pre><code>mysqli_stmt_bind_param($stmt, \"i\", $id);\n</code></pre>\n\n<p>it may works</p>\n"}], "owner": {"reputation": 2016, "user_id": 1624793, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/100000456738864/picture?type=large", "display_name": "Bradly Spicer", "link": "https://stackoverflow.com/users/1624793/bradly-spicer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 56977584, "answer_count": 2, "score": 1, "last_activity_date": 1562865071, "creation_date": 1562786885, "last_edit_date": 1562865071, "question_id": 56977423, "link": "https://stackoverflow.com/questions/56977423/how-do-i-use-ajax-to-run-an-sql-query-within-a-php-while-loop", "title": "How do I use Ajax to run an SQL query within a php while loop?", "body": "<p>I have a table of Data which is pulled via SQL into DataTables. I want to use AJAX to run an SQL query which deleted the row based on <code>$id = $row[\"id\"];</code>.</p>\n\n<p><strong>Index.php:</strong></p>\n\n<pre><code>$link = mysqli_connect(\"localhost\", \"bradlyspicer_root\", \"\", \"bradlyspicer_ResellerDB\");\n\n$id = $_POST['id'];\n$deleterow = \"DELETE FROM Offences WHERE id = ?\";\n    if($stmt = mysqli_prepare($link, $deleterow)){ // $link being your connection\n        mysqli_stmt_bind_param($stmt, \"s\", $id);\n        mysqli_stmt_execute($stmt);\n        echo 'success';\n        echo $id;\n    } else {\n        echo 'fail!';\n        printf(\"Error: %s.\\n\", mysqli_stmt_error($stmt));\n    }\n</code></pre>\n\n<p><strong>Functions.php:</strong></p>\n\n<pre><code>$id = $_POST['id'];\n$deleterow = \"DELETE FROM Offences WHERE id = ?\";\n    if($stmt = mysqli_prepare($link, $deleterow)){ // $link being your connection\n        mysqli_stmt_bind_param($stmt, \"s\", $id);\n        mysqli_stmt_execute($stmt);\n        echo 'success';\n    } else {\n        echo 'fail!';\n        printf(\"Error: %s.\\n\", mysqli_stmt_error($stmt));\n    }\n</code></pre>\n\n<p><strong>Custom.js:</strong></p>\n\n<pre><code>$( \".delbtn\" ).click(function(){\n    var itemID = $(this).attr(\"itemID\");\n    console.log(itemID)\n    $.ajax({\n        url:\"functions.php\", //the page containing php script\n        data: { id: itemID}, // itemID passed as id\n        type: \"POST\", //request type\n        success:function(result){\n            alert(result);\n        },\n        error: function() {\n            alert('Error occured');\n        }\n    });\n});\n</code></pre>\n\n<p>I can't find where I pass the $id in the button from Index.php to Functions.php, any explanation would be appreciated.</p>\n\n<p>Update: Since updating the script and trying to Debug, I'm not getting much of a response from the error which outputs:</p>\n\n<p><code>fail!Error: .</code></p>\n"}, {"tags": ["javascript", "angular", "typescript", "testing", "protractor"], "comments": [{"owner": {"reputation": 2328, "user_id": 10836734, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-i3j5WvTOFO4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbVJXbPYQ_-2AgenxGZd86uyud-Nw/mo/photo.jpg?sz=128", "display_name": "DublinDev", "link": "https://stackoverflow.com/users/10836734/dublindev"}, "edited": false, "score": 0, "creation_date": 1562832960, "post_id": 56977418, "comment_id": 100504179, "body": "Are you intending to do visual validation of the screens to ensure they look correct or do you simply need to capture the screenshot for some other purpose?"}, {"owner": {"reputation": 839, "user_id": 5653451, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/54aaa7dc0361c880cffd9db932bea998?s=128&d=identicon&r=PG&f=1", "display_name": "sid597", "link": "https://stackoverflow.com/users/5653451/sid597"}, "reply_to_user": {"reputation": 2328, "user_id": 10836734, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-i3j5WvTOFO4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbVJXbPYQ_-2AgenxGZd86uyud-Nw/mo/photo.jpg?sz=128", "display_name": "DublinDev", "link": "https://stackoverflow.com/users/10836734/dublindev"}, "edited": false, "score": 0, "creation_date": 1562837906, "post_id": 56977418, "comment_id": 100506911, "body": "@DublinDev So first I am goig to take all the screen shots visually validate them and then saving them as the Golden image in our database. There will also be tests to take screenshot and test them aginst Golden images in future if we make changes in our website. I will be using Pixelmatch to check  difference between this current and Golden image (created before)"}, {"owner": {"reputation": 839, "user_id": 5653451, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/54aaa7dc0361c880cffd9db932bea998?s=128&d=identicon&r=PG&f=1", "display_name": "sid597", "link": "https://stackoverflow.com/users/5653451/sid597"}, "reply_to_user": {"reputation": 2328, "user_id": 10836734, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-i3j5WvTOFO4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbVJXbPYQ_-2AgenxGZd86uyud-Nw/mo/photo.jpg?sz=128", "display_name": "DublinDev", "link": "https://stackoverflow.com/users/10836734/dublindev"}, "edited": false, "score": 0, "creation_date": 1562839592, "post_id": 56977418, "comment_id": 100507949, "body": "@DublinDev What do you suggest ?"}], "answers": [{"comments": [{"owner": {"reputation": 839, "user_id": 5653451, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/54aaa7dc0361c880cffd9db932bea998?s=128&d=identicon&r=PG&f=1", "display_name": "sid597", "link": "https://stackoverflow.com/users/5653451/sid597"}, "edited": false, "score": 0, "creation_date": 1562838239, "post_id": 56984837, "comment_id": 100507143, "body": "But after every test it will take screenshot and save it as heroes.png this way there will only be one image named heroes.png not different images for different tests"}, {"owner": {"reputation": 3766, "user_id": 11597494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8Zlm.jpg?s=128&g=1", "display_name": "Yevhen", "link": "https://stackoverflow.com/users/11597494/yevhen"}, "reply_to_user": {"reputation": 839, "user_id": 5653451, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/54aaa7dc0361c880cffd9db932bea998?s=128&d=identicon&r=PG&f=1", "display_name": "sid597", "link": "https://stackoverflow.com/users/5653451/sid597"}, "edited": false, "score": 1, "creation_date": 1562849499, "post_id": 56984837, "comment_id": 100513864, "body": "as I said it will be better to take a reporter and it will do it for, or you can get spec name and name it as your spec&#39;s name or route&#39;s name"}], "tags": [], "owner": {"reputation": 3766, "user_id": 11597494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D8Zlm.jpg?s=128&g=1", "display_name": "Yevhen", "link": "https://stackoverflow.com/users/11597494/yevhen"}, "is_accepted": false, "score": 1, "last_activity_date": 1562834840, "last_edit_date": 1562834840, "creation_date": 1562833817, "answer_id": 56984837, "question_id": 56977418, "link": "https://stackoverflow.com/questions/56977418/taking-screenshot-in-different-route-in-angular-using-protractor/56984837#56984837", "title": "Taking screenshot in different route in angular using protractor", "body": "<p>I think the better solution for you is to add some reporter that will do everything for you, like taking screenshots after each test or after each failed tests and e.t.c. </p>\n\n<p>Take a look at some reporters:</p>\n\n<p><a href=\"https://github.com/allure-framework/allure-jasmine\" rel=\"nofollow noreferrer\">allure-jasmine</a> - Highly recommended.</p>\n\n<p><a href=\"https://github.com/mlison/protractor-jasmine2-screenshot-reporter\" rel=\"nofollow noreferrer\">protractor-jasmine2-screenshot-reporter</a></p>\n\n<p><a href=\"https://github.com/Kenzitron/protractor-jasmine2-html-reporter\" rel=\"nofollow noreferrer\">protractor-jasmine2-html-reporter</a></p>\n\n<p><a href=\"https://github.com/abhishekkyd/protractor-html-reporter-2\" rel=\"nofollow noreferrer\">protractor-html-reporter-2</a></p>\n\n<p><a href=\"https://github.com/jintoppy/protractor-html-screenshot-reporter\" rel=\"nofollow noreferrer\">protractor-html-screenshot-reporter</a></p>\n\n<p><a href=\"https://github.com/Evilweed/protractor-beautiful-reporter\" rel=\"nofollow noreferrer\">protractor-beautiful-reporter</a></p>\n\n<p>But If you don't want to add any extra libraries to your project you can just put the <code>browser.takeScreenshot()</code> function to the <code>afterEach</code> function to take a screenshot after each test (<code>it</code>).</p>\n\n<p>For instance:</p>\n\n<pre><code>describe('blank App', () =&gt; {\n  let page: BlankPage;\n\n  beforeEach(() =&gt; {\n    page = new BlankPage();\n  });\n  afterEach(() =&gt; \n    browser.takeScreenshot().then((png) =&gt;{\n      var stream = createWriteStream(\"heroes.png\"); /** change the png file name  */\n    stream.write(new Buffer(png, 'base64'));\n    stream.end; \n    });\n  });\n\n  it('should display message saying app works', () =&gt; {\n    page.navigateTo();\n    expect(page.getParagraphText()).toEqual('My Heroes');\n\n  });\n});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2328, "user_id": 10836734, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-i3j5WvTOFO4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbVJXbPYQ_-2AgenxGZd86uyud-Nw/mo/photo.jpg?sz=128", "display_name": "DublinDev", "link": "https://stackoverflow.com/users/10836734/dublindev"}, "is_accepted": false, "score": 1, "last_activity_date": 1562841080, "last_edit_date": 1562841080, "creation_date": 1562840317, "answer_id": 56986971, "question_id": 56977418, "link": "https://stackoverflow.com/questions/56977418/taking-screenshot-in-different-route-in-angular-using-protractor/56986971#56986971", "title": "Taking screenshot in different route in angular using protractor", "body": "<p>I think the best approach for you would be the have a list of all the routes in your application and create a datadriven test to iterate over each one.</p>\n\n<p>You would need a generic navigation function which could get to each page e.g navigateTo(routeName). That code would look something like this.</p>\n\n<pre><code>var routes = [\n    'homepage',\n    'myheroes',\n    'mainpage',\n    'heroprofile'\n]\n\ndescribe('blank App', () =&gt; {\n    for (let i = 0; i &lt; routes.length; i++) {\n        it('should display message saying app works', () =&gt; {\n            navigateTo(routes[i]);\n            browser.takeScreenshot().then((png) =&gt; {\n                var stream = createWriteStream(routes[i] + \".png\"); /** change the png file name  */\n                stream.write(new Buffer(png, 'base64'));\n                stream.end;\n            });\n        });\n    }\n});\n</code></pre>\n\n<p><strong>protractor-image-compare</strong></p>\n\n<p>Really though I would recommend you use the npm package <a href=\"https://www.npmjs.com/package/protractor-image-comparison\" rel=\"nofollow noreferrer\">protractor-image-comparison</a>. I've worked with this package and it does make visual validation very straightforward. It allows you to save new baseline images (golden images as you call them) if they are absent and compares them if they are present. The comparison are very sensitive to change but you can set how much of a difference you want to allow.</p>\n\n<p>There would be no database required with this approach.</p>\n\n<p><strong>Note</strong></p>\n\n<p>Be aware also that different browsers take screenshots differently based. Chrome considers the \"viewport\" to be the visible portion of the browser but I believe in firefox you can screenshot the entire webpage at once.</p>\n"}], "owner": {"reputation": 839, "user_id": 5653451, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/54aaa7dc0361c880cffd9db932bea998?s=128&d=identicon&r=PG&f=1", "display_name": "sid597", "link": "https://stackoverflow.com/users/5653451/sid597"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 758, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1562841080, "creation_date": 1562786843, "last_edit_date": 1562787958, "question_id": 56977418, "link": "https://stackoverflow.com/questions/56977418/taking-screenshot-in-different-route-in-angular-using-protractor", "title": "Taking screenshot in different route in angular using protractor", "body": "<p>I am new to testing using protractor so for testing I have to take screenshots in an angular application for all the different routes in my app. I tried to do it on a small dummy angular app, so I cloned the  <a href=\"https://github.com/johnpapa/angular-tour-of-heroes\" rel=\"nofollow noreferrer\"><code>Tour of heroes</code></a> repo it has dashboard and Heroes route. I wrote the following code in app.po.ts :</p>\n\n<pre><code>import { browser, element, by } from 'protractor';\n\nexport class BlankPage {\n  navigateTo() {\n    return browser.get('/heroes');\n  }\n\n  getParagraphText() {\n    return element(by.tagName('h2')).getText();\n  }\n}\n</code></pre>\n\n<p>and in app.e2e-spec.ts</p>\n\n<pre><code>import { BlankPage } from './app.po';\nimport {browser,by,element} from 'protractor';\nimport { protractor } from 'protractor';\nimport {createWriteStream} from 'fs' ;\n\ndescribe('blank App', () =&gt; {\n  let page: BlankPage;\n\n  beforeEach(() =&gt; {\n    page = new BlankPage();\n  });\n\n  it('should display message saying app works', () =&gt; {\n    page.navigateTo();\n    expect(page.getParagraphText()).toEqual('My Heroes');\n    browser.takeScreenshot().then((png) =&gt;{\n      var stream = createWriteStream(\"heroes.png\"); /** change the png file name  */\n      stream.write(new Buffer(png, 'base64'));\n      stream.end; \n  });\n});\n});\n</code></pre>\n\n<p>The idea was to navigate to heroes route and capture the screenshot. I got the screenshot but<br>\nIs there a way I can automate the task of going to all the routes and take screenshots ? In my actual website there are a lot of routes  </p>\n"}, {"tags": ["javascript", "jquery", "html"], "comments": [{"owner": {"reputation": 24196, "user_id": 1586174, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4aa4d9e7b30a8bddace165e4c33abd85?s=128&d=identicon&r=PG", "display_name": "Taplar", "link": "https://stackoverflow.com/users/1586174/taplar"}, "edited": false, "score": 3, "creation_date": 1562786687, "post_id": 56977372, "comment_id": 100490876, "body": "What have you tried so far?  <a href=\"https://meta.stackoverflow.com/questions/261592/how-much-research-effort-is-expected-of-stack-overflow-users\">You are expected to have made an attempt</a>"}, {"owner": {"reputation": 369690, "user_id": 182668, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b19917aa04a6839aef577f1117c71d48?s=128&d=identicon&r=PG", "display_name": "Pointy", "link": "https://stackoverflow.com/users/182668/pointy"}, "edited": false, "score": 1, "creation_date": 1562786699, "post_id": 56977372, "comment_id": 100490880, "body": "Make a Date instance from it and compare that to <code>new Date()</code>. <code>&gt;</code> and <code>&lt;</code> comparisons work the way you&#39;d expect for dates."}, {"owner": {"reputation": 184244, "user_id": 14104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/otetW.jpg?s=128&g=1", "display_name": "epascarello", "link": "https://stackoverflow.com/users/14104/epascarello"}, "edited": false, "score": 1, "creation_date": 1562786770, "post_id": 56977372, "comment_id": 100490915, "body": "So what is different with reading input text value and a date input value?"}, {"owner": {"reputation": 176, "user_id": 3130072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c25bc899ee1fdc2a1febc60b124aa90?s=128&d=identicon&r=PG", "display_name": "katamaster818", "link": "https://stackoverflow.com/users/3130072/katamaster818"}, "edited": false, "score": 0, "creation_date": 1562786971, "post_id": 56977372, "comment_id": 100490981, "body": "There are many great libraries out there for working with dates, for example, <a href=\"https://momentjs.com/\" rel=\"nofollow noreferrer\">momentjs.com</a> - have you tried using something like this."}, {"owner": {"reputation": 25361, "user_id": 924299, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/a142d1ec6b8444c9baf3ec6176e1cf61?s=128&d=identicon&r=PG&f=1", "display_name": "showdev", "link": "https://stackoverflow.com/users/924299/showdev"}, "edited": false, "score": 0, "creation_date": 1562787154, "post_id": 56977372, "comment_id": 100491052, "body": "Consider using the <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/date#Additional_attributes\" rel=\"nofollow noreferrer\"><code>min</code> and <code>max</code> attributes</a>."}, {"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 1, "creation_date": 1562787606, "post_id": 56977372, "comment_id": 100491224, "body": "There&#39;s a whole section on <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/date#Validation\" rel=\"nofollow noreferrer\">validation</a> in MDN&#39;s documentation of <code>input type=&quot;date&quot;</code>..."}], "answers": [{"comments": [{"owner": {"reputation": 24196, "user_id": 1586174, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4aa4d9e7b30a8bddace165e4c33abd85?s=128&d=identicon&r=PG", "display_name": "Taplar", "link": "https://stackoverflow.com/users/1586174/taplar"}, "edited": false, "score": 0, "creation_date": 1562789453, "post_id": 56977599, "comment_id": 100491962, "body": "StackOverflow is not a code request site. Answering questions that do not follow the community guidelines promotes more questions like this in the future."}], "tags": [], "owner": {"reputation": 2207, "user_id": 3988232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e47523b278f15afd925a473e2ac0b966?s=128&d=identicon&r=PG&f=1", "display_name": "IronFlare", "link": "https://stackoverflow.com/users/3988232/ironflare"}, "is_accepted": true, "score": 0, "last_activity_date": 1562787665, "creation_date": 1562787665, "answer_id": 56977599, "question_id": 56977372, "link": "https://stackoverflow.com/questions/56977372/how-to-validate-date-of-birth-in-javascript-with-inputtype-date/56977599#56977599", "title": "How to validate Date of Birth in javascript with input[type=&quot;Date&quot;]?", "body": "<p>The comments have suggested a number of approaches, but for the specific functionality you're implementing, most of them are overkill. This only requires a simple comparison operation.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>document.getElementById(\"check\").addEventListener(\"click\", function(e){\r\n  // Create a date variable which stores the current day at 00:00 local time.\r\n  let today = new Date();\r\n  today.setHours(0,0,0,0);\r\n\r\n  // Parse the provided date in the default YYYY-MM-DD format.\r\n  let birthdate = new Date(document.getElementById(\"birthdate\").value);\r\n\r\n  // Check whether the provided date is equal to or less than the current date.\r\n  if (birthdate &lt;= today) {\r\n  \tdocument.getElementsByTagName(\"span\")[0].textContent = \"Valid!\";\r\n  } else {\r\n  \tdocument.getElementsByTagName(\"span\")[0].textContent = \"Invalid!\";\r\n  }\r\n});</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;input type=\"date\" id=\"birthdate\"/&gt;\r\n&lt;button id=\"check\"&gt;Check&lt;/button&gt;\r\n&lt;span&gt;&lt;/span&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 134, "user_id": 11755019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dc731d35ebd01646fe7c8cc54134264?s=128&d=identicon&r=PG&f=1", "display_name": "YeetCoder", "link": "https://stackoverflow.com/users/11755019/yeetcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 988, "favorite_count": 0, "closed_date": 1562788120, "accepted_answer_id": 56977599, "answer_count": 1, "score": -3, "last_activity_date": 1562788201, "creation_date": 1562786602, "question_id": 56977372, "link": "https://stackoverflow.com/questions/56977372/how-to-validate-date-of-birth-in-javascript-with-inputtype-date", "closed_reason": "Duplicate", "title": "How to validate Date of Birth in javascript with input[type=&quot;Date&quot;]?", "body": "<p>I know there are a few questions out there on this topic, but they all are either unclear or, they are using <code>input[type=\"text\"]</code> in them.</p>\n\n<p>In my HTML form I have an input of type date. So now I want to make sure that the date of birth is valid(Date is not in the future!). How do I do this?</p>\n"}, {"tags": ["javascript", "object", "javascript-objects"], "comments": [{"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1562789288, "post_id": 56977365, "comment_id": 100491905, "body": "You&#39;re just creating a new class (and overwrite the variable <code>Person</code>), but you don&#39;t change the class that <code>p</code> is an instance of or the prototype from which it inherits."}, {"owner": {"reputation": 117, "user_id": 11151467, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-scgLTe1bcjI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcSwq57ixdWWesPVNA4eCwOEnbBEg/mo/photo.jpg?sz=128", "display_name": "soporific312", "link": "https://stackoverflow.com/users/11151467/soporific312"}, "reply_to_user": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1562791038, "post_id": 56977365, "comment_id": 100492578, "body": "@Bergi That makes sense as a description of what&#39;s going on, but I don&#39;t understand why the same area of memory is not overwritten - I suppose this is functionality that is special to objects and such data types since JS developers anticipated rewriting of functions? Because if I assigned an integer to a variable and reassigned the variable, the same location in memory would be used no? Or is the original location of the function above not rewritten because there is still an active pointer to it and so the memory is off limits for newly requested memory?"}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1562791701, "post_id": 56977365, "comment_id": 100492860, "body": "Objects in JS don&#39;t have a fixed location, you cannot overwrite them. The variable only contains a reference to the object (or function object, in this case) somewhere in memory. Creating a new function allocates new memory somewhere else, and assigning to the variable just changes the reference stored in that variable. Other things (like your <code>p</code> instance) still reference the old object. JavaScript is an object-oriented, garbage-collected language."}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 11151467, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-scgLTe1bcjI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcSwq57ixdWWesPVNA4eCwOEnbBEg/mo/photo.jpg?sz=128", "display_name": "soporific312", "link": "https://stackoverflow.com/users/11151467/soporific312"}, "edited": false, "score": 0, "creation_date": 1562789206, "post_id": 56977491, "comment_id": 100491877, "body": "The <b>proto</b> field in any given instance then stores a reference/pointer to the prototype of the most direct parent object it inherited from and from this location in memory another <b>proto</b> field can be accessed to move up the chain until Object is reached, correct? My only other question, then, is why do I see method declarations returned with Object.getPrototypeOf(p)? This returns: Person {greeting: function} but I expected inherited methods to be <i>within</i> Person&#39;s prototype field, not the instance&#39;s <b>proto</b> field (Object.getPrototypeOf([]) does not return a list of array methods)."}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "reply_to_user": {"reputation": 117, "user_id": 11151467, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-scgLTe1bcjI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcSwq57ixdWWesPVNA4eCwOEnbBEg/mo/photo.jpg?sz=128", "display_name": "soporific312", "link": "https://stackoverflow.com/users/11151467/soporific312"}, "edited": false, "score": 0, "creation_date": 1562789439, "post_id": 56977491, "comment_id": 100491956, "body": "@soporific312 No, it&#39;s not the <code>.__proto__</code> property that stores this, it&#39;s an internal field that should be accessed with <code>Object.getPrototypeOf</code>. The <code>__proto__</code> getter is deprecated. But yes, this thing defines the inheritance hierarchy."}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "reply_to_user": {"reputation": 117, "user_id": 11151467, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-scgLTe1bcjI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcSwq57ixdWWesPVNA4eCwOEnbBEg/mo/photo.jpg?sz=128", "display_name": "soporific312", "link": "https://stackoverflow.com/users/11151467/soporific312"}, "edited": false, "score": 1, "creation_date": 1562789551, "post_id": 56977491, "comment_id": 100491995, "body": "@soporific312 <code>console.log</code>ing the prototype shows the <code>Person.prototype</code> object - you can log that directly to see it&#39;s the same. Notice that logging the <code>Array.prototype</code> doesn&#39;t show any methods because they are not enumerable, but they are still there."}, {"owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "reply_to_user": {"reputation": 117, "user_id": 11151467, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-scgLTe1bcjI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcSwq57ixdWWesPVNA4eCwOEnbBEg/mo/photo.jpg?sz=128", "display_name": "soporific312", "link": "https://stackoverflow.com/users/11151467/soporific312"}, "edited": false, "score": 1, "creation_date": 1562789698, "post_id": 56977491, "comment_id": 100492054, "body": "@soporific312 you can get a better idea of what&#39;s on the array prototype with <code>console.log(Object.getOwnPropertyDescriptors(Object.getProto&zwnj;&#8203;typeOf([])))</code> This will list the methods."}, {"owner": {"reputation": 117, "user_id": 11151467, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-scgLTe1bcjI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcSwq57ixdWWesPVNA4eCwOEnbBEg/mo/photo.jpg?sz=128", "display_name": "soporific312", "link": "https://stackoverflow.com/users/11151467/soporific312"}, "reply_to_user": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1562790207, "post_id": 56977491, "comment_id": 100492270, "body": "@Bergi This is really helpful--thanks. I saw that <b>proto</b> is deprecated - is the internal field only accessible by the Object.getPrototypeOf getter then? I don&#39;t understand what you mean by &quot;<i>because</i> they are not enumerable&quot; - the greeting function is not enumerable either?"}, {"owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "reply_to_user": {"reputation": 117, "user_id": 11151467, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-scgLTe1bcjI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcSwq57ixdWWesPVNA4eCwOEnbBEg/mo/photo.jpg?sz=128", "display_name": "soporific312", "link": "https://stackoverflow.com/users/11151467/soporific312"}, "edited": false, "score": 0, "creation_date": 1562790524, "post_id": 56977491, "comment_id": 100492379, "body": "@soporific312 Yes, only <code>Object.getPrototypeOf</code>. Regarding <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Enumerability_and_ownership_of_properties\" rel=\"nofollow noreferrer\">enumerability</a>, the <code>greeting</code> property of your custom prototype is enumerable."}], "tags": [], "owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "is_accepted": true, "score": 1, "last_activity_date": 1562789732, "last_edit_date": 1562789732, "creation_date": 1562787225, "answer_id": 56977491, "question_id": 56977365, "link": "https://stackoverflow.com/questions/56977365/how-do-javascript-object-instances-retain-methods-after-parent-class-is-redefine/56977491#56977491", "title": "How do Javascript object instances retain methods after parent class is redefined?", "body": "<p>You are mixing up names which point to objects and the objects themselves. When you use:</p>\n\n<pre><code>Person = function (name) {\n  this.name = name;\n}\n</code></pre>\n\n<p>you are <em>not</em> redefining the object that the name <code>Person</code> points to. You are just taking the name <code>Person</code> and pointing it to a new thing \u2014 a new function. The old <code>Person.protoype</code> is still in memory and the instance <code>p</code> holds a reference to it and <code>p.constructor</code> still points to the original <code>Person</code> function.</p>\n\n<p>You can confirm this by grabbing a reference of the Person.prototype and comparing before and after the reassignment of the variable <code>Person</code></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function Person(name) {\r\n  this.name = name;\r\n}\r\nPerson.prototype.greeting = function() {\r\n  return \"Hello, \" + this.name;\r\n}\r\nvar p = new Person(\"Ryan\");\r\n\r\n// p's prototype is Person.prototype\r\nconsole.log(Object.getPrototypeOf(p) === Person.prototype) // true\r\n\r\n// grab a reference of the protoype for later\r\nlet Pprotot = Person.prototype\r\n\r\n// point variable Person at something else\r\nPerson = function (name) {\r\n  this.name = name;\r\n}\r\n\r\n// p's prototype is STILL the old Person.prototype\r\nconsole.log(Object.getPrototypeOf(p) === Pprotot)    // still true\r\n\r\n// p also still holds a reference to the old function (through the prototype)\r\nconsole.log(p.constructor)\r\n\r\n// but it's not the same thing the variable Person now points to\r\nconsole.log(p.constructor === Person)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 117, "user_id": 11151467, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-scgLTe1bcjI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcSwq57ixdWWesPVNA4eCwOEnbBEg/mo/photo.jpg?sz=128", "display_name": "soporific312", "link": "https://stackoverflow.com/users/11151467/soporific312"}, "edited": false, "score": 0, "creation_date": 1562792923, "post_id": 56977525, "comment_id": 100493303, "body": "Yes it does remember the previous object - as Mark Meyer mentioned the previously made object still points to the place in memory where the original object was defined."}], "tags": [], "owner": {"reputation": 2699, "user_id": 5623543, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/41af61a1ad9d740c509d42044e710269?s=128&d=identicon&r=PG&f=1", "display_name": "inertia", "link": "https://stackoverflow.com/users/5623543/inertia"}, "is_accepted": false, "score": 0, "last_activity_date": 1562787342, "creation_date": 1562787342, "answer_id": 56977525, "question_id": 56977365, "link": "https://stackoverflow.com/questions/56977365/how-do-javascript-object-instances-retain-methods-after-parent-class-is-redefine/56977525#56977525", "title": "How do Javascript object instances retain methods after parent class is redefined?", "body": "<p>I just did a little test and it seems like the variable p is still remembering the previous object.</p>\n\n<pre><code>Person = function(name) {\n  this.name = name;\n}\nconst s = new Person('hello');\ns.name; //hello\ns.greeting(); //s.greeting is not a function\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 11151467, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-scgLTe1bcjI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcSwq57ixdWWesPVNA4eCwOEnbBEg/mo/photo.jpg?sz=128", "display_name": "soporific312", "link": "https://stackoverflow.com/users/11151467/soporific312"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 56977491, "answer_count": 2, "score": 2, "last_activity_date": 1562789732, "creation_date": 1562786580, "question_id": 56977365, "link": "https://stackoverflow.com/questions/56977365/how-do-javascript-object-instances-retain-methods-after-parent-class-is-redefine", "title": "How do Javascript object instances retain methods after parent class is redefined?", "body": "<p>I am trying to understand Javascript prototypal inheritance and am having trouble understanding the relationship between object instances and their respective classes' prototype property which stores inherited methods.</p>\n\n<p>I understand that defining methods in a class's prototype property allows for instances to access/inherit these methods so that methods are not redefined. Presumably this is achieved by allowing the instance a pointer to the method in memory (or something much akin to this). I also understand why adding methods to a class's prototype property allows previously created instances access to these \"new\" methods, since the instances are simply accessing their prototype property (which includes the class they derive from) which in turn accesses the class's prototype property.</p>\n\n<p>What I <em>do not</em> understand is the following scenario:</p>\n\n<ol>\n<li><p>I define a trivial object with method:</p>\n\n<pre><code>function Person(name) {\n  this.name = name;\n}\nPerson.prototype.greeting = function() {\n  return \"Hello, \" + this.name;\n}\n</code></pre></li>\n<li><p>I create an instance and can access data:</p>\n\n<pre><code>var p = new Person(\"Ryan\");\np.name //\"Ryan\"\np.greeting() //\"Hello, Ryan\"\n</code></pre></li>\n<li><p>I <em>redefine</em> Person <em>without</em> greeting:</p>\n\n<pre><code>Person = function (name) {\n  this.name = name;\n}\n</code></pre></li>\n<li><p>I can still use the greeting on the previous instance:</p>\n\n<p><code>p.greeting() //\"Hello, Ryan\" but expected error</code></p></li>\n</ol>\n\n<p>If as Person is being redefined it overwrites the prior Person constructor in memory, how is it that the instance \"p\" can still access the greeting method if there is no longer any such method associated with Person? Is it the case that instances actually copy the location of their inherited classes' methods in their own prototype field? If this is the case, why is it that there is always talk of a \"prototype chain\" that the processor must \"walk up\" to find inherited methods if the instance stores the location of these methods directly in their own prototype field?</p>\n\n<p>Help is much appreciated. I apologize if there is something simple that I missed.</p>\n"}]