[{"tags": ["javascript", "jquery"], "comments": [{"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 1, "creation_date": 1479945412, "post_id": 40776059, "comment_id": 68775818, "body": "Why don&#39;t you just iterate through the clouds in <code>.section1?</code>"}], "answers": [{"comments": [{"owner": {"reputation": 4929, "user_id": 1536499, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/89e526614489231084932e87399ef9d3?s=128&d=identicon&r=PG", "display_name": "anthonybell", "link": "https://stackoverflow.com/users/1536499/anthonybell"}, "reply_to_user": {"reputation": 41, "user_id": 6785418, "user_type": "registered", "profile_image": "https://graph.facebook.com/1351913501494393/picture?type=large", "display_name": "Bozu", "link": "https://stackoverflow.com/users/6785418/bozu"}, "edited": false, "score": 0, "creation_date": 1479946960, "post_id": 40776101, "comment_id": 68776189, "body": "this should do the trick, after the first iteration, the x value is always -400."}], "tags": [], "owner": {"reputation": 4929, "user_id": 1536499, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/89e526614489231084932e87399ef9d3?s=128&d=identicon&r=PG", "display_name": "anthonybell", "link": "https://stackoverflow.com/users/1536499/anthonybell"}, "is_accepted": true, "score": 1, "last_activity_date": 1479946906, "last_edit_date": 1479946906, "creation_date": 1479945498, "answer_id": 40776101, "question_id": 40776059, "link": "https://stackoverflow.com/questions/40776059/jquery-how-to-not-duplicate-code/40776101#40776101", "title": "jQuery - how to not duplicate code?", "body": "<pre><code>function animateDivers(cloud, iter=0) {\n    var x = (iter == 0) ? 1500-Math.random()*2000 : -400\n    var y = 500-Math.random()*600; \n    $('.section1 '+cloud).css('left', x);\n    $('.section1 '+cloud).css('top', y);\n    x = -400;  \n    var time = 15000+Math.random()*10000;\n    $('.section1 '+cloud).animate({\n        left: x+2000\n    }, time, \"linear\", function() { animateDivers(cloud, iter+1) }\n)}\n\nfor (i=1;i&lt;=3;i++) { \n    animateDivers(\".cloud\" + i); \n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 6785418, "user_type": "registered", "profile_image": "https://graph.facebook.com/1351913501494393/picture?type=large", "display_name": "Bozu", "link": "https://stackoverflow.com/users/6785418/bozu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 40776101, "answer_count": 1, "score": 0, "last_activity_date": 1479946906, "creation_date": 1479945193, "question_id": 40776059, "link": "https://stackoverflow.com/questions/40776059/jquery-how-to-not-duplicate-code", "title": "jQuery - how to not duplicate code?", "body": "<p><br />\nI wrote this code: 3 clouds flying over my website.<br />\nQuestion is: how I can make this shorter? (ex: in one function or something like that)</p>\n\n<pre><code>var x1 = 1500-Math.random()*2000;\nfunction animateDivers1() {\n    var y1 = 500-Math.random()*600;\n    $('.section1 .cloud1').css('left', x1);\n    $('.section1 .cloud1').css('top', y1);\n    x1 = -400;  \n    var time = 15000+Math.random()*10000;\n    $('.section1 .cloud1').animate({\n        left: x1+2000\n    }, time, \"linear\", animateDivers1\n)}\nanimateDivers1();\n\n\nvar x2 = 1500-Math.random()*2000;\nfunction animateDivers2() {\n    var y2 = 500-Math.random()*600; \n    $('.section1 .cloud2').css('left', x2);\n    $('.section1 .cloud2').css('top', y2);\n    x2 = -400;  \n    var time = 15000+Math.random()*10000;\n    $('.section1 .cloud2').animate({\n        left: x2+2000\n    }, time, \"linear\", animateDivers2\n)}\nanimateDivers2();\n\n\nvar x3 = 1500-Math.random()*2000;\nfunction animateDivers3() {\n    var y3 = 500-Math.random()*600; \n    $('.section1 .cloud3').css('left', x3);\n    $('.section1 .cloud3').css('top', y3);\n    x3 = -400;  \n    var time = 15000+Math.random()*10000;\n    $('.section1 .cloud3').animate({\n        left: x3+2000\n    }, time, \"linear\", animateDivers3\n)}\nanimateDivers3();\n</code></pre>\n\n<p>and of course I want add more - but duplicate this code seems silly</p>\n"}, {"tags": ["javascript", "html", "canvas", "collision-detection", "hexagonal-tiles"], "comments": [{"owner": {"reputation": 85346, "user_id": 3702797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iRvKU.png?s=128&g=1", "display_name": "Kaiido", "link": "https://stackoverflow.com/users/3702797/kaiido"}, "edited": false, "score": 1, "creation_date": 1479947291, "post_id": 40776014, "comment_id": 68776257, "body": "A non mathy solution : <a href=\"http://stackoverflow.com/questions/40509954/is-there-a-native-way-to-address-a-non-rectangle-object-on-canvas-in-js/40521863#40521863\" title=\"is there a native way to address a non rectangle object on canvas in js\">stackoverflow.com/questions/40509954/&hellip;</a>"}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 2, "creation_date": 1479947696, "post_id": 40776014, "comment_id": 68776346, "body": "Take the center of the hexagon as pivot point and formulate the distance to the border by a function of the angle. Starting from 90 degrees (vertical) at each 60 degrees it&#39;s at minimum -&gt; <code>R*Math.cos(Math.PI&#47;6);</code>and at each 60+30 degrees it is at maximum -&gt; R. So may be something like <code>d &lt;= Math.sin(angle * Math.PI * 6) * (R-R*Math.cos(Math.PI&#47;6)) + R*Math.cos(Math.PI&#47;6)</code>. Though i can not make sure at this time of the night here."}, {"owner": {"reputation": 1443, "user_id": 4642943, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vtc1I.png?s=128&g=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/4642943/oliver"}, "reply_to_user": {"reputation": 85346, "user_id": 3702797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iRvKU.png?s=128&g=1", "display_name": "Kaiido", "link": "https://stackoverflow.com/users/3702797/kaiido"}, "edited": false, "score": 0, "creation_date": 1479948215, "post_id": 40776014, "comment_id": 68776464, "body": "@Kaiido I guess that would work. I&#39;ll keep that in mind for any other collision problems I have with polygons, but I&#39;m looking for a mathy solution xD"}, {"owner": {"reputation": 1443, "user_id": 4642943, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vtc1I.png?s=128&g=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/4642943/oliver"}, "reply_to_user": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 0, "creation_date": 1479948361, "post_id": 40776014, "comment_id": 68776492, "body": "@Redu I&#39;ll have a look at that. However, what do the variables represent?"}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 0, "creation_date": 1479948723, "post_id": 40776014, "comment_id": 68776566, "body": "I can not make sure about the formula but it must be a variation of that. You have to figure out the <code>angle</code> and distance <code>d</code> of the clicked point to the center and <code>d</code> must be smaller than the calculated figure according to the angle. I will check tomorrow."}, {"owner": {"reputation": 41032, "user_id": 3877726, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/C7qq2.png?s=128&g=1", "display_name": "Blindman67", "link": "https://stackoverflow.com/users/3877726/blindman67"}, "edited": false, "score": 0, "creation_date": 1479987983, "post_id": 40776014, "comment_id": 68793690, "body": "@Tobsta I got my answer in after all the others so not sure if you have seen the solution which is an order of magnitude quicker than the other answers. It can handle 1000+ per frame tests with no GC overhead"}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 0, "creation_date": 1480006041, "post_id": 40776014, "comment_id": 68805012, "body": "OK as i have said the solution was lying beneath a variation of the above formula which i wasn&#39;t able to figure out at 3AM. But it&#39;s all fine now. Even if it was a little late i have answered the question in a generic way which which should work for any polygon from square to circle. Thanks for the fun."}, {"owner": {"reputation": 1443, "user_id": 4642943, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vtc1I.png?s=128&g=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/4642943/oliver"}, "reply_to_user": {"reputation": 41032, "user_id": 3877726, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/C7qq2.png?s=128&g=1", "display_name": "Blindman67", "link": "https://stackoverflow.com/users/3877726/blindman67"}, "edited": false, "score": 0, "creation_date": 1480042562, "post_id": 40776014, "comment_id": 68815930, "body": "@Blindman67 Wow, cool! I guess I&#39;ll use that then."}], "answers": [{"tags": [], "owner": {"reputation": 406, "user_id": 3311513, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iIkDf.jpg?s=128&g=1", "display_name": "Evil", "link": "https://stackoverflow.com/users/3311513/evil"}, "is_accepted": false, "score": 2, "last_activity_date": 1479948574, "creation_date": 1479948574, "answer_id": 40776482, "question_id": 40776014, "link": "https://stackoverflow.com/questions/40776014/javascript-point-collision-with-regular-hexagon/40776482#40776482", "title": "JavaScript Point Collision with Regular Hexagon", "body": "<p>At the <a href=\"http://www.redblobgames.com/grids/hexagons/\" rel=\"nofollow noreferrer\">redblog</a> there is a full explanation with math and working examples.</p>\n\n<p>The main idea is that hexagons are horizontally spaced by $3/4$ of hexagons size, vertically it is simply $H$ but the column needs to be taken to take vertical offset into account. The case colored red is determined by comparing x to y at 1/4 W slice.</p>\n"}, {"comments": [{"owner": {"reputation": 1443, "user_id": 4642943, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vtc1I.png?s=128&g=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/4642943/oliver"}, "edited": false, "score": 0, "creation_date": 1479977352, "post_id": 40776715, "comment_id": 68786299, "body": "This is a great answer, but unfortunately it doesn&#39;t collide properly... It looks like it&#39;s doing bounding box collision detection, as the left and right sides of the hexagon don&#39;t register as colliding."}], "tags": [], "owner": {"reputation": 4253, "user_id": 5372008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4rFGo.png?s=128&g=1", "display_name": "Teocci", "link": "https://stackoverflow.com/users/5372008/teocci"}, "is_accepted": false, "score": 4, "last_activity_date": 1479967969, "last_edit_date": 1479967969, "creation_date": 1479950696, "answer_id": 40776715, "question_id": 40776014, "link": "https://stackoverflow.com/questions/40776014/javascript-point-collision-with-regular-hexagon/40776715#40776715", "title": "JavaScript Point Collision with Regular Hexagon", "body": "<p>I think you need something like this~ </p>\n\n<p><strong>EDITED</strong>\nI did some maths and here you have it. This is not a perfect version but probably will help you...</p>\n\n<p>Ah, you only need a <code>R</code> parameter because based on it you can calculate <code>H</code>, <code>W</code> and <code>S</code>. That is what I understand from your description.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>// setup canvas for demo\r\nvar canvas = document.getElementById('canvas');\r\ncanvas.width = 300;\r\ncanvas.height = 275;\r\nvar context = canvas.getContext('2d');\r\nvar hexPath;\r\nvar hex = {\r\n  x: 50,\r\n  y: 50,\r\n  R: 100\r\n}\r\n\r\n// Place holders for mouse x,y position\r\nvar mouseX = 0;\r\nvar mouseY = 0;\r\n\r\n// Test for collision between an object and a point\r\nfunction pointInHexagon(target, pointX, pointY) {\r\n  var side = Math.sqrt(target.R*target.R*3/4);\r\n  \r\n  var startX = target.x\r\n  var baseX = startX + target.R / 2;\r\n  var endX = target.x + 2 * target.R;\r\n  var startY = target.y;\r\n  var baseY = startY + side; \r\n  var endY = startY + 2 * side;\r\n  var square = {\r\n    x: startX,\r\n    y: startY,\r\n    side: 2*side\r\n  }\r\n\r\n  hexPath = new Path2D();\r\n  hexPath.lineTo(baseX, startY);\r\n  hexPath.lineTo(baseX + target.R, startY);\r\n  hexPath.lineTo(endX, baseY);\r\n  hexPath.lineTo(baseX + target.R, endY);\r\n  hexPath.lineTo(baseX, endY);\r\n  hexPath.lineTo(startX, baseY);\r\n\r\n  if (pointX &gt;= square.x &amp;&amp; pointX &lt;= (square.x + square.side) &amp;&amp; pointY &gt;= square.y &amp;&amp; pointY &lt;= (square.y + square.side)) {\r\n    var auxX = (pointX &lt; target.R / 2) ? pointX : (pointX &gt; target.R * 3 / 2) ? pointX - target.R * 3 / 2 : target.R / 2;\r\n    var auxY = (pointY &lt;= square.side / 2) ? pointY : pointY - square.side / 2;\r\n    var dPointX = auxX * auxX;\r\n    var dPointY = auxY * auxY;\r\n    var hypo = Math.sqrt(dPointX + dPointY);\r\n    var cos = pointX / hypo;\r\n\r\n    if (pointX &lt; (target.x + target.R / 2)) {\r\n      if (pointY &lt;= (target.y + square.side / 2)) {\r\n        if (pointX &lt; (target.x + (target.R / 2 * cos))) return false;\r\n      }\r\n      if (pointY &gt; (target.y + square.side / 2)) {\r\n        if (pointX &lt; (target.x + (target.R / 2 * cos))) return false;\r\n      }\r\n    }\r\n\r\n    if (pointX &gt; (target.x + target.R * 3 / 2)) {\r\n      if (pointY &lt;= (target.y + square.side / 2)) {\r\n        if (pointX &lt; (target.x + square.side - (target.R / 2 * cos))) return false;\r\n      }\r\n      if (pointY &gt; (target.y + square.side / 2)) {\r\n        if (pointX &lt; (target.x + square.side - (target.R / 2 * cos))) return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\n// Loop\r\nsetInterval(onTimerTick, 33);\r\n\r\n// Render Loop\r\nfunction onTimerTick() {\r\n  // Clear the canvas\r\n  canvas.width = canvas.width;\r\n\r\n  // see if a collision happened\r\n  var collision = pointInHexagon(hex, mouseX, mouseY);\r\n\r\n  // render out text\r\n  context.fillStyle = \"Blue\";\r\n  context.font = \"18px sans-serif\";\r\n  context.fillText(\"Collision: \" + collision + \" | Mouse (\" + mouseX + \", \" + mouseY + \")\", 10, 20);\r\n\r\n  // render out square    \r\n  context.fillStyle = collision ? \"red\" : \"green\";\r\n  context.fill(hexPath);\r\n}\r\n\r\n// Update mouse position\r\ncanvas.onmousemove = function(e) {\r\n  mouseX = e.offsetX;\r\n  mouseY = e.offsetY;\r\n}</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>#canvas {\r\n  border: 1px solid black;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;canvas id=\"canvas\"&gt;&lt;/canvas&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Just replace your <code>pointInHexagon(hexX, hexY, R, W, S, H, pointX, pointY)</code> by the <code>var hover = ctx.isPointInPath(hexPath, x, y)</code>.</p>\n\n<ul>\n<li>This is for <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Path2D/Path2D\" rel=\"nofollow noreferrer\">Creating and copying paths</a></li>\n<li>This is about the <a href=\"https://developer.mozilla.org/en-US/docs/Games/Techniques/2D_collision_detection\" rel=\"nofollow noreferrer\">Collision Detection</a></li>\n</ul>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var canvas = document.getElementById(\"canvas\");\r\nvar ctx = canvas.getContext(\"2d\");\r\n\r\nvar hexPath = new Path2D();\r\nhexPath.lineTo(25, 0);\r\nhexPath.lineTo(75, 0);\r\nhexPath.lineTo(100, 43);\r\nhexPath.lineTo(75, 86);\r\nhexPath.lineTo(25, 86);\r\nhexPath.lineTo(0, 43);\r\n\r\n\r\nfunction draw(hover) {\r\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n  ctx.fillStyle = hover ? 'blue' : 'red';\r\n  ctx.fill(hexPath);\r\n}\r\n\r\ncanvas.onmousemove = function(e) {\r\n  var x = e.clientX - canvas.offsetLeft, y = e.clientY - canvas.offsetTop;\r\n  var hover = ctx.isPointInPath(hexPath, x, y)\r\n  draw(hover)\r\n};\r\ndraw();</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;canvas id=\"canvas\"&gt;&lt;/canvas&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 824, "user_id": 5546380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb0d14fc7a8ff9f779ec0b1ee77cb2d5?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Jenkin", "link": "https://stackoverflow.com/users/5546380/ryan-jenkin"}, "edited": false, "score": 1, "creation_date": 1479956836, "post_id": 40776847, "comment_id": 68778524, "body": "Given that the hexagon fits within a rectangle, it also creates 4 triangles that are at the corners of the rectangle and are outside the hexagon. Could this code test whether the point sits within these outside triangles? The difference being these four triangles are not equilateral where the six within the hexagon are."}, {"owner": {"reputation": 361, "user_id": 2817352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6757d7ea36f591ad01c7efba712a9ce?s=128&d=identicon&r=PG", "display_name": "Andy Mac", "link": "https://stackoverflow.com/users/2817352/andy-mac"}, "reply_to_user": {"reputation": 824, "user_id": 5546380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb0d14fc7a8ff9f779ec0b1ee77cb2d5?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Jenkin", "link": "https://stackoverflow.com/users/5546380/ryan-jenkin"}, "edited": false, "score": 0, "creation_date": 1479957500, "post_id": 40776847, "comment_id": 68778668, "body": "If you want the clickable area to be the rectangles given in your diagram, it&#39;s a much simpler case of point in rectangle checking."}, {"owner": {"reputation": 361, "user_id": 2817352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6757d7ea36f591ad01c7efba712a9ce?s=128&d=identicon&r=PG", "display_name": "Andy Mac", "link": "https://stackoverflow.com/users/2817352/andy-mac"}, "reply_to_user": {"reputation": 824, "user_id": 5546380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb0d14fc7a8ff9f779ec0b1ee77cb2d5?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Jenkin", "link": "https://stackoverflow.com/users/5546380/ryan-jenkin"}, "edited": false, "score": 0, "creation_date": 1479957659, "post_id": 40776847, "comment_id": 68778696, "body": "Also, yep, that point in triangle function will work for any shape triangle."}, {"owner": {"reputation": 824, "user_id": 5546380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb0d14fc7a8ff9f779ec0b1ee77cb2d5?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Jenkin", "link": "https://stackoverflow.com/users/5546380/ryan-jenkin"}, "edited": false, "score": 1, "creation_date": 1479958241, "post_id": 40776847, "comment_id": 68778823, "body": "Yeah, I was thinking about the inverse of your algorithm, that is if the click is within the rectangle and within one of the four external triangles then the click is not inside the hexagon; but your solution of checking the six triangles is probably less confusing."}, {"owner": {"reputation": 361, "user_id": 2817352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6757d7ea36f591ad01c7efba712a9ce?s=128&d=identicon&r=PG", "display_name": "Andy Mac", "link": "https://stackoverflow.com/users/2817352/andy-mac"}, "reply_to_user": {"reputation": 824, "user_id": 5546380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb0d14fc7a8ff9f779ec0b1ee77cb2d5?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Jenkin", "link": "https://stackoverflow.com/users/5546380/ryan-jenkin"}, "edited": false, "score": 0, "creation_date": 1479958515, "post_id": 40776847, "comment_id": 68778888, "body": "I see, yeah.  You could do a rectangle check first and then test for those triangles if inside the rectangle.  That would actually be a faster algorithm, as you don&#39;t start testing for triangles until you&#39;ve got a rectangle."}, {"owner": {"reputation": 361, "user_id": 2817352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6757d7ea36f591ad01c7efba712a9ce?s=128&d=identicon&r=PG", "display_name": "Andy Mac", "link": "https://stackoverflow.com/users/2817352/andy-mac"}, "reply_to_user": {"reputation": 824, "user_id": 5546380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb0d14fc7a8ff9f779ec0b1ee77cb2d5?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Jenkin", "link": "https://stackoverflow.com/users/5546380/ryan-jenkin"}, "edited": false, "score": 0, "creation_date": 1479959149, "post_id": 40776847, "comment_id": 68779034, "body": "If you wanted to further optimize it you could put all your hexagons into a quad tree data structure :)"}, {"owner": {"reputation": 1443, "user_id": 4642943, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vtc1I.png?s=128&g=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/4642943/oliver"}, "edited": false, "score": 1, "creation_date": 1479977822, "post_id": 40776847, "comment_id": 68786589, "body": "@AndyMac I first do a bounding box test on each hexagon and then I (want) to do a more accurate test on any hexagons that the bounding box test returns true on. I guess if my hex maps ever get big enough I can only apply the bounding box check to hexagons within a couple hexagon widths of the mouse relative to the section displayed on the screen."}, {"owner": {"reputation": 1443, "user_id": 4642943, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vtc1I.png?s=128&g=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/4642943/oliver"}, "edited": false, "score": 1, "creation_date": 1479977871, "post_id": 40776847, "comment_id": 68786612, "body": "@AndyMac It looks like your algorithm is the way to go. I saw an AS3 thing with a similar idea, but the code was completely unreadable and unexplained. Thanks."}], "tags": [], "owner": {"reputation": 361, "user_id": 2817352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6757d7ea36f591ad01c7efba712a9ce?s=128&d=identicon&r=PG", "display_name": "Andy Mac", "link": "https://stackoverflow.com/users/2817352/andy-mac"}, "is_accepted": false, "score": 3, "last_activity_date": 1479951846, "creation_date": 1479951846, "answer_id": 40776847, "question_id": 40776014, "link": "https://stackoverflow.com/questions/40776014/javascript-point-collision-with-regular-hexagon/40776847#40776847", "title": "JavaScript Point Collision with Regular Hexagon", "body": "<p>I've made a solution for you that demonstrates the point in triangle approach to this problem.</p>\n\n<p><a href=\"http://codepen.io/spinvector/pen/gLROEp\" rel=\"nofollow noreferrer\">http://codepen.io/spinvector/pen/gLROEp</a></p>\n\n<p>maths below: </p>\n\n<pre><code>isPointInside(point)\n{\n    // Point in triangle algorithm from http://totologic.blogspot.com.au/2014/01/accurate-point-in-triangle-test.html\n    function pointInTriangle(x1, y1, x2, y2, x3, y3, x, y)\n    {\n        var denominator = ((y2 - y3)*(x1 - x3) + (x3 - x2)*(y1 - y3));\n        var a = ((y2 - y3)*(x - x3) + (x3 - x2)*(y - y3)) / denominator;\n        var b = ((y3 - y1)*(x - x3) + (x1 - x3)*(y - y3)) / denominator;\n        var c = 1 - a - b;\n\n        return 0 &lt;= a &amp;&amp; a &lt;= 1 &amp;&amp; 0 &lt;= b &amp;&amp; b &lt;= 1 &amp;&amp; 0 &lt;= c &amp;&amp; c &lt;= 1;\n    }\n\n    // A Hex is composite of 6 trianges, lets do a point in triangle test for each one.\n    // Step through our triangles\n    for (var i = 0; i &lt; 6; i++) {\n        // check for point inside, if so, return true for this function;\n        if(pointInTriangle( this.origin.x, this.origin.y,\n                            this.points[i].x, this.points[i].y,\n                            this.points[(i+1)%6].x, this.points[(i+1)%6].y,\n                            point.x, point.y))\n            return true;\n    }\n    // Point must be outside.\n    return false;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 94308, "user_id": 411591, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ecae50c4e29a4d18118ada1d417e7eb?s=128&d=identicon&r=PG", "display_name": "markE", "link": "https://stackoverflow.com/users/411591/marke"}, "edited": false, "score": 0, "creation_date": 1480040764, "post_id": 40778485, "comment_id": 68815567, "body": "Your reducing to a binary left-right test is likely the most direct solution (== fastest solution) -- good work! You might consider posting this hex hit test in the Documentation. :-)"}], "tags": [], "owner": {"reputation": 41032, "user_id": 3877726, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/C7qq2.png?s=128&g=1", "display_name": "Blindman67", "link": "https://stackoverflow.com/users/3877726/blindman67"}, "is_accepted": true, "score": 8, "last_activity_date": 1480086466, "last_edit_date": 1480086466, "creation_date": 1479964510, "answer_id": 40778485, "question_id": 40776014, "link": "https://stackoverflow.com/questions/40776014/javascript-point-collision-with-regular-hexagon/40778485#40778485", "title": "JavaScript Point Collision with Regular Hexagon", "body": "<h2>Simple &amp; fast diagonal rectangle slice.</h2>\n\n<p>Looking at the other answers I see that they have all a little over complicated the problem. The following is an order of magnitude quicker than the accepted answer and does not require any complicated data structures, iterators, or generate dead memory and unneeded GC hits. It returns the hex cell row and column for any related set of R, H, S or  W. The example uses R = 50.</p>\n\n<p>Part of the problem is finding which side of a rectangle a point is if the rectangle is split diagonally. This is a very simple calculation and is done by normalising the position of the point to test.</p>\n\n<p><strong>Slice any rectangle diagonally</strong></p>\n\n<p>Example a rectangle of width w, and height h split from top left to bottom right. To find if a point is left or right. Assume top left of rectangle is at rx,ry</p>\n\n<pre><code>var x = ?;\nvar y = ?;\nx = ((x - rx) % w) / w;\ny = ((y - ry) % h) / h;\nif (x &gt; y) { \n    // point is in the upper right triangle\n} else if (x &lt; y) {\n    // point is in lower left triangle\n} else {\n    // point is on the diagonal\n}\n</code></pre>\n\n<p>If you want to change the direction of the diagonal then just invert one of the normals</p>\n\n<pre><code>x = 1 - x;  // invert x or y to change the direction the rectangle is split\nif (x &gt; y) { \n    // point is in the upper left triangle\n} else if (x &lt; y) {\n    // point is in lower right triangle\n} else {\n    // point is on the diagonal\n}\n</code></pre>\n\n<p><strong>Split into sub cells and use %</strong></p>\n\n<p>The rest of the problem is just a matter of splitting the grid into (R / 2) by (H / 2) cells width each hex covering 4 columns and 2 rows. Every 1st column out of 3 will have diagonals. with every second of these column having the diagonal flipped.  For every 4th, 5th, and 6th  column out of 6 have the row shifted down one cell. By using % you can very quickly determine which hex cell you are on. Using the diagonal split method above make the math easy and quick.</p>\n\n<p>And one extra bit. The return argument retPos is optional. if you call the function as follows</p>\n\n<pre><code>var retPos;\nmainLoop(){\n    retPos = getHex(mouse.x, mouse.y, retPos);\n}\n</code></pre>\n\n<p>the code will not incur a GC hit, further improving the speed.</p>\n\n<p><strong>Pixel to Hex coordinates</strong></p>\n\n<p>From Question diagram returns hex cell <code>x</code>,<code>y</code> pos. Please note that this function only works in the range <code>0 &lt;= x</code>, <code>0 &lt;= y</code> if you need negative coordinates subtract the min negative pixel x,y coordinate from the input </p>\n\n<pre><code>// the values as set out in the question image\nvar r = 50; \nvar w = r * 2;\nvar h = Math.sqrt(3) * r;\n// returns the hex grid x,y position in the object retPos.\n// retPos is created if not supplied;\n// argument x,y is pixel coordinate (for mouse or what ever you are looking to find)\nfunction getHex (x, y, retPos){\n    if(retPos === undefined){\n        retPos = {};\n    }\n    var xa, ya, xpos, xx, yy, r2, h2;\n    r2 = r / 2;\n    h2 = h / 2;\n    xx = Math.floor(x / r2);\n    yy = Math.floor(y / h2);\n    xpos = Math.floor(xx / 3);\n    xx %= 6;\n    if (xx % 3 === 0) {      // column with diagonals\n        xa = (x % r2) / r2;  // to find the diagonals\n        ya = (y % h2) / h2;\n        if (yy % 2===0) {\n            ya = 1 - ya;\n        }\n        if (xx === 3) {\n            xa = 1 - xa;\n        }\n        if (xa &gt; ya) {\n            retPos.x = xpos + (xx === 3 ? -1 : 0);\n            retPos.y = Math.floor(yy / 2);\n            return retPos;\n        }\n        retPos.x = xpos + (xx === 0 ? -1 : 0);\n        retPos.y = Math.floor((yy + 1) / 2);\n        return retPos;\n    }\n    if (xx &lt; 3) {\n        retPos.x = xpos + (xx === 3 ? -1 : 0);\n        retPos.y = Math.floor(yy / 2);\n        return retPos;\n    }\n    retPos.x = xpos + (xx === 0 ? -1 : 0);\n    retPos.y = Math.floor((yy + 1) / 2);\n    return retPos;\n}\n</code></pre>\n\n<p><strong>Hex to pixel</strong></p>\n\n<p>And a helper function that draws a cell given the cell coordinates. </p>\n\n<pre><code>// Helper function draws a cell at hex coordinates cellx,celly\n// fStyle is fill style\n// sStyle is strock style;\n// fStyle and sStyle are optional. Fill or stroke will only be made if style given\nfunction drawCell1(cellPos, fStyle, sStyle){    \n    var cell = [1,0, 3,0, 4,1, 3,2, 1,2, 0,1];\n    var r2 = r / 2;\n    var h2 = h / 2;\n    function drawCell(x, y){\n        var i = 0;\n        ctx.beginPath();\n        ctx.moveTo((x + cell[i++]) * r2, (y + cell[i++]) * h2)\n        while (i &lt; cell.length) {\n            ctx.lineTo((x + cell[i++]) * r2, (y + cell[i++]) * h2)\n        }\n        ctx.closePath();\n    }\n    ctx.lineWidth = 2;\n    var cx = Math.floor(cellPos.x * 3);\n    var cy = Math.floor(cellPos.y * 2);\n    if(cellPos.x  % 2 === 1){\n        cy -= 1;\n    }\n    drawCell(cx, cy);\n    if (fStyle !== undefined &amp;&amp; fStyle !== null){  // fill hex is fStyle given\n        ctx.fillStyle = fStyle\n        ctx.fill();\n    }\n    if (sStyle !== undefined ){  // stroke hex is fStyle given\n        ctx.strokeStyle = sStyle\n        ctx.stroke();\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1443, "user_id": 4642943, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vtc1I.png?s=128&g=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/4642943/oliver"}, "edited": false, "score": 2, "creation_date": 1480112341, "post_id": 40791352, "comment_id": 68845980, "body": "Nice! Thanks for this! It&#39;s a shame this came in after the others though xD"}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "reply_to_user": {"reputation": 1443, "user_id": 4642943, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vtc1I.png?s=128&g=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/4642943/oliver"}, "edited": false, "score": 0, "creation_date": 1480116464, "post_id": 40791352, "comment_id": 68846972, "body": "@Tobsta I believe my approach to the problem was a little unorthodox but at the same time i believe it is super efficient. I have actually started thinking of how it might be applied to any irregularly shaped polygon such as, map of a country or likewise. Then of course since it can not be done with a single sine component, I guess i will have to sit and study some FFT."}], "tags": [], "owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "is_accepted": false, "score": 3, "last_activity_date": 1480280734, "last_edit_date": 1480280734, "creation_date": 1480005809, "answer_id": 40791352, "question_id": 40776014, "link": "https://stackoverflow.com/questions/40776014/javascript-point-collision-with-regular-hexagon/40791352#40791352", "title": "JavaScript Point Collision with Regular Hexagon", "body": "<p>Here is a fully mathematical and functional representation of your problem. You will notice that there are no <code>if</code>s and <code>then</code>s in this code other than the ternary to change the color of the text depending on the mouse position. This whole job is in fact nothing more than pure simple math of just one line;</p>\n\n<pre><code>(r+m)/2 + Math.cos(a*s)*(r-m)/2;\n</code></pre>\n\n<p>and this code is reusable for all polygons from triangle to circle. So if interested please read on. It's very simple.</p>\n\n<p>In order to display the functionality I had to develop a mimicking model of the problem. I draw a polygon on a canvas by utilizing a simple utility function. So that the overall solution should work for any polygon. The following snippet will take the canvas context <code>c</code>, radius <code>r</code>, number of sides <code>s</code>, and the local center coordinates in the canvas <code>cx</code> and <code>cy</code> as arguments and draw a polygon on the given canvas context at the right position.</p>\n\n<pre><code>function drawPolgon(c, r, s, cx, cy){ //context, radius, sides, center x, center y\n  c.beginPath();\n  c.moveTo(cx + r,cy);\n  for(var p = 1; p &lt; s; p++) c.lineTo(cx + r*Math.cos(p*2*Math.PI/s), cy + r*Math.sin(p*2*Math.PI/s));\n  c.closePath();\n  c.stroke();\n}\n</code></pre>\n\n<p>We have some other utility functions which one can easily understand what exactly they are doing. However the most important part is to check whether the mouse is floating over our polygon or not. It's done by the utility function <code>isMouseIn</code>. It's basically calculating the distance and the angle of the mouse position to the center of the polygon. Then, comparing it with the boundaries of the polygon. The boundaries of the polygon can be expressed by simple trigonometry, just like we have calculated the vertices in the <code>drawPolygon</code> function.</p>\n\n<p>We can think of our polygon as a circle with an oscillating radius at the frequency of number of sides. The oscillation's peak is at the given radius value <code>r</code> (which happens to be at the vertices at angle <code>2\u03c0/s</code> where <code>s</code> is the number of sides) and the minimum <code>m</code> is <code>r*Math.cos(Math.PI/s)</code> (each shows at at angle <code>2\u03c0/s + 2\u03c0/2s = 3\u03c0/s</code>). I am pretty sure the ideal way to express a polygon could be done by the Fourier transformation but we don't need that here. All we need is a  constant radius component which is the average of minimum and maximum, <code>(r+m)/2</code> and the oscillating component with the frequency of number of sides, <code>s</code> and the amplitude value maximum - minimum)/2 on top of it, <code>Math.cos(a*s)*(r-m)/2</code>. Well of course as per Fourier states we might carry on with smaller oscillating components but with a hexagon you don't really need further iteration while with a triangle you possibly would. So here is our polygon representation in math.</p>\n\n<pre><code>(r+m)/2 + Math.cos(a*s)*(r-m)/2;\n</code></pre>\n\n<p>Now all we need is to calculate the angle and distance of our mouse position relative to the center of the polygon and compare it with the above mathematical expression which represents our polygon. So all together our magic function is orchestrated as follows;</p>\n\n<pre><code>function isMouseIn(r,s,cx,cy,mx,my){\n  var m = r*Math.cos(Math.PI/s),   // the min dist from an edge to the center\n      d = Math.hypot(mx-cx,my-cy), // the mouse's distance to the center of the polygon\n      a = Math.atan2(cy-my,mx-cx); // angle of the mouse pointer\n  return d &lt;= (r+m)/2 + Math.cos(a*s)*(r-m)/2;\n}\n</code></pre>\n\n<p>So the following code demonstrates how you might approach to solve your problem.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>// Generic function to draw a polygon on the canvas\r\n\r\nfunction drawPolgon(c, r, s, cx, cy){ //context, radius, sides, center x, center y\r\n  c.beginPath();\r\n  c.moveTo(cx + r,cy);\r\n  for(var p = 1; p &lt; s; p++) c.lineTo(cx + r*Math.cos(p*2*Math.PI/s), cy + r*Math.sin(p*2*Math.PI/s));\r\n  c.closePath();\r\n  c.stroke();\r\n}\r\n\r\n// To write the mouse position in canvas local coordinates\r\n\r\nfunction writeText(c,x,y,msg,col){\r\n  c.clearRect(0, 0, 300, 30);\r\n  c.font = \"10pt Monospace\";\r\n  c.fillStyle = col;\r\n  c.fillText(msg, x, y);\r\n}\r\n\r\n// Getting the mouse position and coverting into canvas local coordinates\r\n\r\nfunction getMousePos(c, e) {\r\n  var rect = c.getBoundingClientRect();\r\n  return { x: e.clientX - rect.left,\r\n           y: e.clientY - rect.top\r\n         };\r\n}\r\n\r\n// To check if mouse is inside the polygone\r\n\r\nfunction isMouseIn(r,s,cx,cy,mx,my){\r\n  var m = r*Math.cos(Math.PI/s),\r\n      d = Math.hypot(mx-cx,my-cy),\r\n      a = Math.atan2(cy-my,mx-cx);\r\n  return d &lt;= (r+m)/2 + Math.cos(a*s)*(r-m)/2;\r\n}\r\n\r\n// the event listener callback\r\n\r\nfunction mouseMoveCB(e){\r\n  var mp = getMousePos(cnv, e),\r\n     msg = 'Mouse at: ' + mp.x + ',' + mp.y,\r\n     col = \"black\",\r\n  inside = isMouseIn(radius,sides,center[0],center[1],mp.x,mp.y);\r\n  writeText(ctx, 10, 25, msg, inside ? \"turquoise\" : \"red\");\r\n}\r\n\r\n// body of the JS code\r\n\r\nvar cnv = document.getElementById(\"myCanvas\"),\r\n    ctx = cnv.getContext(\"2d\"),\r\n  sides = 6,\r\n radius = 100,\r\n center = [150,150];\r\ncnv.addEventListener('mousemove', mouseMoveCB, false);\r\ndrawPolgon(ctx, radius, sides, center[0], center[1]);</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>#myCanvas { background: #eee;\r\n                 width: 300px;\r\n                height: 300px;\r\n                border: 1px #ccc solid\r\n          }</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;canvas id=\"myCanvas\" width=\"300\" height=\"300\"&gt;&lt;/canvas&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 1443, "user_id": 4642943, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Vtc1I.png?s=128&g=1", "display_name": "Oliver", "link": "https://stackoverflow.com/users/4642943/oliver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2923, "favorite_count": 7, "accepted_answer_id": 40778485, "answer_count": 5, "score": 22, "last_activity_date": 1480280734, "creation_date": 1479944828, "last_edit_date": 1486566761, "question_id": 40776014, "link": "https://stackoverflow.com/questions/40776014/javascript-point-collision-with-regular-hexagon", "title": "JavaScript Point Collision with Regular Hexagon", "body": "<p>I'm making an HTML5 canvas hexagon grid based system and I need to be able to detect what hexagonal tile in a grid has been clicked when the canvas is clicked.</p>\n\n<p>Several hours of searching and trying my own methods led to nothing, and porting implementations from other languages has simply confused me to a point where my brain is sluggish.</p>\n\n<p>The grid consists of flat topped regular hexagons like in this diagram:</p>\n\n<p><a href=\"https://4.bp.blogspot.com/-xxi7xTHUVy8/TVo0cbUyyTI/AAAAAAAAAeY/ajzNIsgBjhI/s400/hex.png\" rel=\"noreferrer\"><img src=\"https://4.bp.blogspot.com/-xxi7xTHUVy8/TVo0cbUyyTI/AAAAAAAAAeY/ajzNIsgBjhI/s400/hex.png\" alt=\"\"></a></p>\n\n<p>Essentially, given a point and the variables specified in this image as the sizing for every hexagon in the grid (R, W, S, H):</p>\n\n<p><a href=\"https://1.bp.blogspot.com/-uhf5CIhqUF4/TVo0NzhZqzI/AAAAAAAAAeQ/0uOx6f0ApcI/s400/hex_single.png\" rel=\"noreferrer\"><img src=\"https://1.bp.blogspot.com/-uhf5CIhqUF4/TVo0NzhZqzI/AAAAAAAAAeQ/0uOx6f0ApcI/s400/hex_single.png\" alt=\"\"></a></p>\n\n<p>I need to be able to determine whether a point is inside a hexagon given.</p>\n\n<p>An example function call would be <code>pointInHexagon(hexX, hexY, R, W, S, H, pointX, pointY)</code> where hexX and hexY are the coordinates for the top left corner of the bounding box of a hexagonal tile (like the top left corner in the image above).</p>\n\n<p>Is there anyone who has any idea how to do this? Speed isn't much of a concern for the moment.</p>\n"}, {"tags": ["javascript", "jquery", "json", "csv", "papaparse"], "comments": [{"owner": {"reputation": 2231, "user_id": 1339516, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fe0e04b439554d4437c1417678638f9a?s=128&d=identicon&r=PG", "display_name": "Searching", "link": "https://stackoverflow.com/users/1339516/searching"}, "edited": false, "score": 0, "creation_date": 1480006721, "post_id": 40776007, "comment_id": 68805347, "body": "Sorry.Just realized the issue.."}], "answers": [{"comments": [{"owner": {"reputation": 597, "user_id": 2711478, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Ebqst.jpg?s=128&g=1", "display_name": "Dylan", "link": "https://stackoverflow.com/users/2711478/dylan"}, "edited": false, "score": 0, "creation_date": 1479946143, "post_id": 40776162, "comment_id": 68775999, "body": "I was looking into that earlier but the issue comes when I want to use headers. When PapaParse outputs the results, the headers not correct so doing the transposition wouldn&#39;t resolve that issue."}, {"owner": {"reputation": 160, "user_id": 1625793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iCiE.jpg?s=128&g=1", "display_name": "Dmitrijs Balcers", "link": "https://stackoverflow.com/users/1625793/dmitrijs-balcers"}, "reply_to_user": {"reputation": 597, "user_id": 2711478, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Ebqst.jpg?s=128&g=1", "display_name": "Dylan", "link": "https://stackoverflow.com/users/2711478/dylan"}, "edited": false, "score": 0, "creation_date": 1479946279, "post_id": 40776162, "comment_id": 68776034, "body": "Can you give an example with what input (csv), what output you want to receive JSON?"}, {"owner": {"reputation": 597, "user_id": 2711478, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Ebqst.jpg?s=128&g=1", "display_name": "Dylan", "link": "https://stackoverflow.com/users/2711478/dylan"}, "edited": false, "score": 0, "creation_date": 1479969882, "post_id": 40776162, "comment_id": 68782430, "body": "Thank you very much! This worked great! I had to change a couple things on my end such as setting &#39;header: true&#39; to &#39;header: false&#39; to get it to work properly."}], "tags": [], "owner": {"reputation": 160, "user_id": 1625793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iCiE.jpg?s=128&g=1", "display_name": "Dmitrijs Balcers", "link": "https://stackoverflow.com/users/1625793/dmitrijs-balcers"}, "is_accepted": true, "score": 1, "last_activity_date": 1479947593, "last_edit_date": 1495542271, "creation_date": 1479945969, "answer_id": 40776162, "question_id": 40776007, "link": "https://stackoverflow.com/questions/40776007/parse-a-transposed-csv-with-headers-using-papaparse/40776162#40776162", "title": "Parse a transposed CSV with headers using PapaParse", "body": "<p>I would suggest to parse the array with PapaParse and then perform transpose over the result with JS.</p>\n\n<p>Using this method: <a href=\"https://stackoverflow.com/a/4492703/1625793\">https://stackoverflow.com/a/4492703/1625793</a></p>\n\n<p>So it would look like that <code>transpose(result.data)</code></p>\n\n<p>-- Update --</p>\n\n<pre><code>const transposed = transpose(result.data)\nconst headers = transposed.shift();\nconst res = transposed.map(row =&gt; row.reduce((acc, col, ind) =&gt; {acc[headers[ind]] = col; return acc}, {}))\n</code></pre>\n"}], "owner": {"reputation": 597, "user_id": 2711478, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Ebqst.jpg?s=128&g=1", "display_name": "Dylan", "link": "https://stackoverflow.com/users/2711478/dylan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1771, "favorite_count": 0, "accepted_answer_id": 40776162, "answer_count": 1, "score": 1, "last_activity_date": 1479961407, "creation_date": 1479944793, "last_edit_date": 1479961407, "question_id": 40776007, "link": "https://stackoverflow.com/questions/40776007/parse-a-transposed-csv-with-headers-using-papaparse", "title": "Parse a transposed CSV with headers using PapaParse", "body": "<p>I'm working on a CSV uploader that uses <a href=\"http://papaparse.com/\" rel=\"nofollow noreferrer\">PapaParse</a> as it's CSV parser. For my CSV I would like my first column to act as my header for the parsed data as opposed to the first row. In order to get the expected outcome, I've been having to manually transpose the CSV in the editor before uploading.</p>\n\n<p>The reason for this is that my users find it much easier to edit the CSV when the headers are in the first column and not the first row. Is there a way I can do this in PapaParse (or even JavaScript outside of PapaParse)?</p>\n\n<pre><code>if (file != null) {\n    Papa.parse(file, {\n        header: true,\n        complete: function (results, file) {\n            console.log(\"Parsing complete: \", results, file);\n        }\n    });\n}\n</code></pre>\n"}, {"tags": ["javascript", "image", "artificial-intelligence"], "owner": {"reputation": 99, "user_id": 6632793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd93e6b6312b65a3f36445e73972dae3?s=128&d=identicon&r=PG&f=1", "display_name": "C. Morgan", "link": "https://stackoverflow.com/users/6632793/c-morgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1479944745, "creation_date": 1479944745, "question_id": 40775997, "link": "https://stackoverflow.com/questions/40775997/javascript-image-pairing-ai-like-quick-draw", "title": "JavaScript image pairing AI like Quick, Draw", "body": "<p>I was messing around with Quick, Draw! and was thinking about ways to make my own Quick, Draw!. Is there a library that has accurate image comparison like Quick, Draw! and a website that has some drawings of random objects?</p>\n"}, {"tags": ["javascript", "recursion", "es6-promise"], "comments": [{"owner": {"reputation": 127336, "user_id": 283366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ad213d8adabe4b64c2d53c5e0e3cab4?s=128&d=identicon&r=PG", "display_name": "Phil", "link": "https://stackoverflow.com/users/283366/phil"}, "edited": false, "score": 0, "creation_date": 1479945046, "post_id": 40775993, "comment_id": 68775743, "body": "What are you hoping to do with the <code>pages</code> data? You aren&#39;t returning anything in the <code>if (resp.pages)</code> block and the return used in the function passed to <code>forEach</code> doesn&#39;t do anything"}, {"owner": {"reputation": 11845, "user_id": 1032492, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c3bbb9ae30a86d6adbb98f71874a0b07?s=128&d=identicon&r=PG", "display_name": "Leo", "link": "https://stackoverflow.com/users/1032492/leo"}, "edited": false, "score": 1, "creation_date": 1479951721, "post_id": 40775993, "comment_id": 68777241, "body": "When <code>resp.pages</code> is truth, you return nothing, which equals <code>return undefined</code>."}], "answers": [{"comments": [{"owner": {"reputation": 127336, "user_id": 283366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ad213d8adabe4b64c2d53c5e0e3cab4?s=128&d=identicon&r=PG", "display_name": "Phil", "link": "https://stackoverflow.com/users/283366/phil"}, "edited": false, "score": 0, "creation_date": 1479945357, "post_id": 40776081, "comment_id": 68775809, "body": "This won&#39;t wait for the recursive async operations"}], "tags": [], "owner": {"reputation": 19790, "user_id": 857025, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/wVO8p.png?s=128&g=1", "display_name": "Don Rhummy", "link": "https://stackoverflow.com/users/857025/don-rhummy"}, "is_accepted": false, "score": -1, "last_activity_date": 1479945953, "last_edit_date": 1479945953, "creation_date": 1479945309, "answer_id": 40776081, "question_id": 40775993, "link": "https://stackoverflow.com/questions/40775993/javascript-promises-recursion/40776081#40776081", "title": "javascript promises recursion", "body": "<p>The issue is you don't return anything when there's pages.</p>\n\n<pre><code>function foo(filepath) {\n\n  var resultArr = [];\n\n  function doo(file, promises) {\n        let promise = asyncOperation(file).then(resp =&gt; {\n            resultArr.push(resp.data);\n            if (resp.pages) {\n                var pages = resp.pages.split(',');\n                var pagePromises = [];\n                pages.forEach(page =&gt; {\n                    return doo(page, pagePromises);\n                });\n\n                //Return the pages\n                return pagePromises;\n            } else {\n                return resultArr;\n            }\n        });\n\n        //They want it added\n        if ( promises ) { promises.push( promise ); }\n\n        //Just return normally\n        else { return promise; }\n    }\n\n    return doo(filepath);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 470794, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7436d9025cdf744a35e8149dc2839178?s=128&d=identicon&r=PG", "display_name": "ams", "link": "https://stackoverflow.com/users/470794/ams"}, "edited": false, "score": 0, "creation_date": 1479947251, "post_id": 40776109, "comment_id": 68776249, "body": "@Phil I think ya scope of the array might be issue along with promises"}, {"owner": {"reputation": 81, "user_id": 470794, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7436d9025cdf744a35e8149dc2839178?s=128&d=identicon&r=PG", "display_name": "ams", "link": "https://stackoverflow.com/users/470794/ams"}, "edited": false, "score": 0, "creation_date": 1479953604, "post_id": 40776109, "comment_id": 68777703, "body": "do i need to use the spread operator ..what does it do? @Phil"}, {"owner": {"reputation": 127336, "user_id": 283366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ad213d8adabe4b64c2d53c5e0e3cab4?s=128&d=identicon&r=PG", "display_name": "Phil", "link": "https://stackoverflow.com/users/283366/phil"}, "reply_to_user": {"reputation": 81, "user_id": 470794, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7436d9025cdf744a35e8149dc2839178?s=128&d=identicon&r=PG", "display_name": "ams", "link": "https://stackoverflow.com/users/470794/ams"}, "edited": false, "score": 1, "creation_date": 1479960129, "post_id": 40776109, "comment_id": 68779268, "body": "@ams I&#39;ve added an explanation to my answer. If this doesn&#39;t work for you, could you provide an example of the desired output format?"}, {"owner": {"reputation": 81, "user_id": 470794, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7436d9025cdf744a35e8149dc2839178?s=128&d=identicon&r=PG", "display_name": "ams", "link": "https://stackoverflow.com/users/470794/ams"}, "edited": false, "score": 0, "creation_date": 1479967688, "post_id": 40776109, "comment_id": 68781494, "body": "Thanks that explains ..I get an error with ... operator ..SyntaxError: Unexpected token ...I have node 4.4.7 @Phil"}, {"owner": {"reputation": 106013, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "edited": false, "score": 1, "creation_date": 1480020961, "post_id": 40776109, "comment_id": 68810924, "body": "@Phil nice analysis of the problem \u2013 and nice solution too. Parallel processing of the sub-pages is definitely a good way to go as long as <b>1.</b> there are no circular references (unless you have some elegant solution for that, too! I can&#39;t think of one ...) and <b>2.</b> pages do not have a significantly large number of sub-pages. If 5 pages, each had 5 pages, that each had 5 pages, you&#39;d be up to <i>hundreds</i> of simultaneous requests. Might be good to offer/suggest a queue that can be limited/throttled."}, {"owner": {"reputation": 127336, "user_id": 283366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ad213d8adabe4b64c2d53c5e0e3cab4?s=128&d=identicon&r=PG", "display_name": "Phil", "link": "https://stackoverflow.com/users/283366/phil"}, "reply_to_user": {"reputation": 106013, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "edited": false, "score": 0, "creation_date": 1480027445, "post_id": 40776109, "comment_id": 68812853, "body": "@naomik yup, gotta worry about the stack size with all those recursive calls too"}, {"owner": {"reputation": 127336, "user_id": 283366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ad213d8adabe4b64c2d53c5e0e3cab4?s=128&d=identicon&r=PG", "display_name": "Phil", "link": "https://stackoverflow.com/users/283366/phil"}, "reply_to_user": {"reputation": 81, "user_id": 470794, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7436d9025cdf744a35e8149dc2839178?s=128&d=identicon&r=PG", "display_name": "ams", "link": "https://stackoverflow.com/users/470794/ams"}, "edited": false, "score": 0, "creation_date": 1480027478, "post_id": 40776109, "comment_id": 68812861, "body": "@ams that&#39;s a <b>very</b> old version of Node. I assumed you&#39;d be using something more recent due to the <a href=\"https://stackoverflow.com/questions/tagged/es6-promises\">es6-promises</a> tag"}], "tags": [], "owner": {"reputation": 127336, "user_id": 283366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ad213d8adabe4b64c2d53c5e0e3cab4?s=128&d=identicon&r=PG", "display_name": "Phil", "link": "https://stackoverflow.com/users/283366/phil"}, "is_accepted": false, "score": 3, "last_activity_date": 1479960108, "last_edit_date": 1479960108, "creation_date": 1479945532, "answer_id": 40776109, "question_id": 40775993, "link": "https://stackoverflow.com/questions/40775993/javascript-promises-recursion/40776109#40776109", "title": "javascript promises recursion", "body": "<p>I think you're just missing a returned promise within the <code>if (resp.pages)</code> block</p>\n\n<pre><code>if (resp.pages) {\n    return Promise.all(resp.pages.split(',').map(page =&gt; doo(page)))\n        .then(pagesArr =&gt; {\n            return resultArr.concat(...pagesArr)\n        })\n}\n</code></pre>\n\n<hr>\n\n<p>I'm thinking there may be an issue with scoping <code>resultArr</code> outside the <code>doo</code> function so maybe try this</p>\n\n<pre><code>function foo(filepath) {\n    function doo(file) {\n        return asyncOperation(file).then(resp =&gt; {\n            const resultArr = [ resp.data ]\n            if (resp.pages) {\n                return Promise.all(resp.pages.split(',').map(page =&gt; doo(page)))\n                    .then(pagesArr =&gt; resultArr.concat(...pagesArr))\n            } else {\n                return resultArr\n            }\n        })\n    }\n\n    return doo(filePath)\n}\n</code></pre>\n\n<hr>\n\n<p>To explain the use of the spread-operator, look at it this way...</p>\n\n<p>Say you have three pages for a file <code>top</code>; <code>page1</code>, <code>page2</code> and <code>page3</code> and each of those resolves with a couple of sub-pages each, the <code>pagesArr</code> would look like</p>\n\n<pre><code>[\n  ['page1', 'page1a', 'page1b'],\n  ['page2', 'page2a', 'page2b'],\n  ['page3', 'page3a', 'page3b']\n]\n</code></pre>\n\n<p>and <code>resultArr</code> so far looks like</p>\n\n<pre><code>['top']\n</code></pre>\n\n<p>If you use <code>concat</code> without the spread operator, you'd end up with</p>\n\n<pre><code>[\n  \"top\",\n  [\n    \"page1\",\n    \"page1a\",\n    \"page1b\"\n  ],\n  [\n    \"page2\",\n    \"page2a\",\n    \"page2b\"\n  ],\n  [\n    \"page3\",\n    \"page3a\",\n    \"page3b\"\n  ]\n]\n</code></pre>\n\n<p>But with the spread, you get</p>\n\n<pre><code>[\n  \"top\",\n  \"page1\",\n  \"page1a\",\n  \"page1b\",\n  \"page2\",\n  \"page2a\",\n  \"page2b\",\n  \"page3\",\n  \"page3a\",\n  \"page3b\"\n]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 127336, "user_id": 283366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ad213d8adabe4b64c2d53c5e0e3cab4?s=128&d=identicon&r=PG", "display_name": "Phil", "link": "https://stackoverflow.com/users/283366/phil"}, "edited": false, "score": 0, "creation_date": 1479965071, "post_id": 40778238, "comment_id": 68780612, "body": "That&#39;s pretty cool and a good addition if OP&#39;s <code>asyncOperation</code> cannot execute multiple requests in parallel but you aren&#39;t combining the results in any way"}], "tags": [], "owner": {"reputation": 8432, "user_id": 1592398, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/2bQ5v.png?s=128&g=1", "display_name": "code-jaff", "link": "https://stackoverflow.com/users/1592398/code-jaff"}, "is_accepted": false, "score": 0, "last_activity_date": 1479962857, "creation_date": 1479962857, "answer_id": 40778238, "question_id": 40775993, "link": "https://stackoverflow.com/questions/40775993/javascript-promises-recursion/40778238#40778238", "title": "javascript promises recursion", "body": "<p>The issue here is mixing async/sync operations in <code>if (resp.pages)</code> branch. Basically you'll have to return promise from then callback if you want the promise chain to work as expected.</p>\n\n<p>In addition to Phil's answer, if you want to execute pages in order/sequence</p>\n\n<pre><code>if (resp.pages) {\n  var pages = resp.pages.split(',');\n  return pages.reduce(function(p, page) {\n    return p.then(function() {\n        return doo(page);\n    });\n  }, Promise.resolve());\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 127336, "user_id": 283366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ad213d8adabe4b64c2d53c5e0e3cab4?s=128&d=identicon&r=PG", "display_name": "Phil", "link": "https://stackoverflow.com/users/283366/phil"}, "edited": false, "score": 0, "creation_date": 1480028024, "post_id": 40794266, "comment_id": 68813007, "body": "Great answer and it&#39;s nice to see <code>async</code> and <code>await</code> becoming the norm. I assumed that OP&#39;s code is attempting to navigate a file-system so, if we ignore links (symlinks), circular references are <i>probably</i> not an issue. Also, your StackOverflow formatting skiils are off the chain!"}, {"owner": {"reputation": 106013, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "reply_to_user": {"reputation": 127336, "user_id": 283366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ad213d8adabe4b64c2d53c5e0e3cab4?s=128&d=identicon&r=PG", "display_name": "Phil", "link": "https://stackoverflow.com/users/283366/phil"}, "edited": false, "score": 0, "creation_date": 1480061499, "post_id": 40794266, "comment_id": 68821948, "body": "Thanks for the feedback, @Phil ^_^"}], "tags": [], "owner": {"reputation": 106013, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "is_accepted": false, "score": 1, "last_activity_date": 1480021061, "last_edit_date": 1480021061, "creation_date": 1480020357, "answer_id": 40794266, "question_id": 40775993, "link": "https://stackoverflow.com/questions/40775993/javascript-promises-recursion/40794266#40794266", "title": "javascript promises recursion", "body": "<p>To verify this works, I'll make a <code>fake</code> dataset, and a <code>fakeAsyncOperation</code> which reads data from the dataset asynchronously. To model your data closely, each query from the fake dataset returns a response with <code>data</code> and <code>pages</code> fields.</p>\n\n<pre><code>let fake = new Map([\n  ['root',    {data: 'root',    pages: ['a', 'b', 'c', 'd']}],\n  ['a',       {data: 'a',       pages: ['a/a', 'a/a']}],\n  ['a/a',     {data: 'a/a',     pages: []}],\n  ['a/b',     {data: 'a/b',     pages: ['a/b/a']}],\n  ['a/b/a',   {data: 'a/b/a',   pages: []}],\n  ['b',       {data: 'b',       pages: ['b/a']}],\n  ['b/a',     {data: 'b/a',     pages: ['b/a/a']}],\n  ['b/a/a',   {data: 'b/a/a',   pages: ['b/a/a/a']}],\n  ['b/a/a/a', {data: 'b/a/a/a', pages: []}],\n  ['c',       {data: 'c',       pages: ['c/a', 'c/b', 'c/c', 'c/d']}],\n  ['c/a',     {data: 'c/a',     pages: []}],\n  ['c/b',     {data: 'c/b',     pages: []}],\n  ['c/c',     {data: 'c/c',     pages: []}],\n  ['c/d',     {data: 'c/d',     pages: []}],\n  ['d',       {data: 'd',       pages: []}]\n]);\n\nlet fakeAsyncOperation = (page) =&gt; {\n  return new Promise(resolve =&gt; {\n    setTimeout(resolve, 100, fake.get(page))\n  })\n}\n</code></pre>\n\n<p>Next we have your <code>foo</code> function. I've renamed <code>doo</code> to <code>enqueue</code> because it works like a queue. It has two parameters: <code>acc</code> for keeping track of the accumulated data, and <code>xs</code> (destructured) which is the items in the queue.</p>\n\n<p>I've used the new <code>async/await</code> syntax that makes it particularly nice for dealing with this. We don't have to manually construct any Promises or deal with any manual <code>.then</code> chaining.</p>\n\n<p>I made liberal use of the spread syntax in the recursive call because I its readability, but you could easily replace these for <code>concat</code> calls <code>acc.concat([data])</code> and <code>xs.concat(pages)</code> if you like that more. \u2013 this is functional programming, so just pick an immutable operation you like and use that.</p>\n\n<p>Lastly, unlike other answers that use <code>Promise.all</code> this will process each page in <em>series</em>. If a page were to have 50 subpages, <code>Promise.all</code> would attempt to make 50 requests in <em>parallel</em> and that may be undesired. Converting the program from parallel to serial is not necessarily straightforward, so that is the reason for providing this answer.</p>\n\n<pre><code>function foo (page) {\n  <b>async</b> function enqueue (acc, [x,...xs]) {\n    if (x === undefined)\n      return acc\n    else {\n      let {data, pages} = <b>await</b> fakeAsyncOperation(x)\n      return enqueue([...acc, data], [...xs, ...pages])\n    }\n  }\n  return enqueue([], [page])\n}\n\nfoo('root').then(pages => console.log(pages))</code></pre>\n\n<p>Output</p>\n\n<pre><code>[ 'root',\n  'a',\n  'b',\n  'c',\n  'd',\n  'a/a',\n  'a/a',\n  'b/a',\n  'c/a',\n  'c/b',\n  'c/c',\n  'c/d',\n  'b/a/a',\n  'b/a/a/a' ]\n</code></pre>\n\n<hr>\n\n<p>Remarks</p>\n\n<p>I'm happy that the <code>foo</code> function in my solution is not too far off from your original \u2013 I think you'll appreciate that. They both use an inner auxiliary function for looping and approach the problem in a similar way. <code>async/await</code> keeps the code nice an flat and highly readable (imo). Overall, I think this is an excellent solution for a somewhat complex problem.</p>\n\n<p>Oh, and don't forget about <strong>circular references</strong>. There are no circular references in my dataset, but if page <code>'a'</code> were to have <code>pages: ['b']</code> and page <code>'b'</code> had <code>pages: ['a']</code>, you can expect infinite recursion. Because this answer processes the pages serially, this would be a very easy to fix (by checking the accumulated value <code>acc</code> for an existing page identifier). This is much trickier (and out-of-scope of this answer) to handle when processing the pages in parallel.</p>\n"}], "owner": {"reputation": 81, "user_id": 470794, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7436d9025cdf744a35e8149dc2839178?s=128&d=identicon&r=PG", "display_name": "ams", "link": "https://stackoverflow.com/users/470794/ams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 461, "favorite_count": 1, "answer_count": 4, "score": 6, "last_activity_date": 1480021061, "creation_date": 1479944721, "question_id": 40775993, "link": "https://stackoverflow.com/questions/40775993/javascript-promises-recursion", "title": "javascript promises recursion", "body": "<p>I have a async recursive function which returns promise if there is more work to do or returns result array otherwise. In case where no recursion is involved it correctly return the array but when recursion is there the array is undefined. The code is </p>\n\n<pre><code>function foo(filepath) {\n\n  var resultArr = [];\n\n  function doo(file) {\n        return asyncOperation(file).then(resp =&gt; {\n            resultArr.push(resp.data);\n            if (resp.pages) {\n                var pages = resp.pages.split(',');\n                pages.forEach(page =&gt; {\n                    return doo(page);\n                });\n            } else {\n                return resultArr;\n            }\n        });\n    }\n\n    return doo(filepath);\n}\n</code></pre>\n\n<p>And the way this is called</p>\n\n<pre><code>foo(abcfile).then(function(result){\n    console.log(result);\n});\n</code></pre>\n\n<p>If I pass abcfile which has no resp.pages, I get result array, but there are resp.pages, then the result array is undefined.</p>\n"}, {"tags": ["javascript", "leaflet"], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 6336165, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uXbJV.jpg?s=128&g=1", "display_name": "keloniton", "link": "https://stackoverflow.com/users/6336165/keloniton"}, "edited": false, "score": 0, "creation_date": 1479986232, "post_id": 40783910, "comment_id": 68792530, "body": "Thanks for your answer. Actually, i am using leaflet and qom is a geojson which will be loaded. I need to use style which is in leaflet api. The problem is that when i run the above code, the style does not affect just each feature. All of the region colors change. I do not know what is wrong here."}], "tags": [], "owner": {"reputation": 4744, "user_id": 3789478, "user_type": "registered", "profile_image": "https://graph.facebook.com/638922877/picture?type=large", "display_name": "lpg", "link": "https://stackoverflow.com/users/3789478/lpg"}, "is_accepted": true, "score": 1, "last_activity_date": 1479983222, "creation_date": 1479983222, "answer_id": 40783910, "question_id": 40775983, "link": "https://stackoverflow.com/questions/40775983/setting-the-style-of-each-leaflet-feature/40783910#40783910", "title": "setting the style of each leaflet feature", "body": "<p>I think the code is ok: I used your functions with the following array:</p>\n\n<pre><code>var calcArray = [\n  [0,0.4],\n  [1,0.9],\n  [2,0.1],\n  [3,0.89],\n  [4,0.7]\n];\n</code></pre>\n\n<p>and the following code to paint the regions:</p>\n\n<pre><code>$(\"#regionX\").css(\"background-color\",(set_feature_style({properties:{region_id:X}},calcArray).fillColor));\n</code></pre>\n\n<p>You can see a live demo below :)</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var calcArray = [\r\n  [0,0.4],\r\n  [1,0.9],\r\n  [2,0.1],\r\n  [3,0.89],\r\n  [4,0.7]\r\n];\r\n\r\nfunction set_feature_style (feature, calculation_array) {\r\nfor (i=0;i&lt;calculation_array.length;i++) {\r\n    if (calculation_array[i][0]==feature.properties.region_id) {\r\n        return {\r\n            weight: 0.5,\r\n            opacity: 0.3,\r\n            color: 'Black',\r\n            dashArray: '3',\r\n            fillOpacity: 0.2,\r\n            fillColor:get_feature_color(calculation_array[i][1])\r\n        }  \r\n    }\r\n}\r\n}\r\n\r\nfunction get_feature_color(input) {\r\nvar x= input;\r\nswitch (true)   {\r\ncase (x&gt;=0 &amp;&amp; x&lt;=0.5):\r\n    return 'blue';\r\n    break;\r\ncase (x&gt;0.5 &amp;&amp; x&lt;=1):\r\n    return 'green';\r\n}\r\n}\r\n\r\n$(\"#region0\").css(\"background-color\",(set_feature_style({properties:{region_id:0}},calcArray).fillColor));\r\n$(\"#region1\").css(\"background-color\",(set_feature_style({properties:{region_id:1}},calcArray).fillColor));\r\n$(\"#region2\").css(\"background-color\",(set_feature_style({properties:{region_id:2}},calcArray).fillColor));\r\n$(\"#region3\").css(\"background-color\",(set_feature_style({properties:{region_id:3}},calcArray).fillColor));\r\n$(\"#region4\").css(\"background-color\",(set_feature_style({properties:{region_id:4}},calcArray).fillColor));</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>.region{\r\n  width:100px;\r\n  height:100px;\r\n  color:white;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;div class=\"region\" id=\"region0\"&gt;region 0&lt;/div&gt;\r\n&lt;div class=\"region\" id=\"region1\"&gt;region 1&lt;/div&gt;\r\n&lt;div class=\"region\" id=\"region2\"&gt;region 2&lt;/div&gt;\r\n&lt;div class=\"region\" id=\"region3\"&gt;region 3&lt;/div&gt;\r\n&lt;div class=\"region\" id=\"region4\"&gt;region 4&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 151, "user_id": 6336165, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uXbJV.jpg?s=128&g=1", "display_name": "keloniton", "link": "https://stackoverflow.com/users/6336165/keloniton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 657, "favorite_count": 0, "accepted_answer_id": 40783910, "answer_count": 1, "score": 3, "last_activity_date": 1479983222, "creation_date": 1479944648, "last_edit_date": 1479982431, "question_id": 40775983, "link": "https://stackoverflow.com/questions/40775983/setting-the-style-of-each-leaflet-feature", "title": "setting the style of each leaflet feature", "body": "<p>I am using leaflet and geojson of some regions to show the related calculations about those regions on map by color. \nI calculate each region value by a function which is called <code>calculation()</code>. The output of this function is a simple float. Here is what I have done:</p>\n\n<ol>\n<li>I use <code>onEachFeature</code> for loading each feature. </li>\n<li>Then I use Ajax to do some calculations. (I use Jquery here)</li>\n<li>I save the calculation results in an array.</li>\n<li>then, I use <code>.done</code> to set the style of each feature (which is a region) to set its color. </li>\n</ol>\n\n<p>Here is my code:</p>\n\n<pre><code>var region=L.geoJSON(qom, {onEachFeature:\nfunction (feature, layer) {\n    $.ajax({    //send the ajax with following parameter\n        type:\"POST\",\n        timeout: 2000,\n        cache:false,\n        url:    \"../tool/calculation.php\", //the php we are sending info too and has got \n        data: { },    // multiple data sent using ajax\n        success: function (data) {    //now we have data\n            $.each(data, function(calculation_related_key,calculation_related_content) {\n                region_array_calculation.push([the_region_id, calculation_related_content['result']]);\n            });\n        }\n    }).done(function (){\n        L.geoJSON(qom, {style : set_feature_style(feature, region_array_calculation)}).addTo(mymap);\n        });\n}\n});\n</code></pre>\n\n<p>Here is setting style code:</p>\n\n<pre><code>function set_feature_style (feature, calculation_array) {\nfor (i=0;i&lt;calculation_array.length;i++) {\n    if (calculation_array[i][0]==feature.properties.region_id) {\n        return {\n            weight: 0.5,\n            opacity: 0.3,\n            color: 'Black',\n            dashArray: '3',\n            fillOpacity: 0.2,\n            fillColor:get_feature_color(calculation_array[i][1])\n        }  \n    }\n}\n}\n</code></pre>\n\n<p>Here I set the color </p>\n\n<pre><code>function get_feature_color(input) {\nvar x= input;\nswitch (true)   {\ncase (x&gt;=0 &amp;&amp; x&lt;=0.5):\n    return 'blue';\n    break;\ncase (x&gt;0.5 &amp;&amp; x&lt;=1):\n    return 'green';\n}\n}\n</code></pre>\n\n<p>But unfortunately the result I get is all in blue. However the calculation for some of the regions is more than 0.5.</p>\n"}, {"tags": ["javascript", "node.js", "selenium-webdriver"], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 2987322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5d77fa440ea6734133fcf99688ddf127?s=128&d=identicon&r=PG&f=1", "display_name": "user2987322", "link": "https://stackoverflow.com/users/2987322/user2987322"}, "edited": false, "score": 0, "creation_date": 1481425573, "post_id": 40784880, "comment_id": 69371059, "body": "Thank you for your inputs"}], "tags": [], "owner": {"reputation": 5864, "user_id": 2575259, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/577b5db0256da160cf87a4788895b485?s=128&d=identicon&r=PG", "display_name": "Naveen Kumar R B", "link": "https://stackoverflow.com/users/2575259/naveen-kumar-r-b"}, "is_accepted": true, "score": 1, "last_activity_date": 1479985835, "creation_date": 1479985835, "answer_id": 40784880, "question_id": 40775979, "link": "https://stackoverflow.com/questions/40775979/how-to-create-an-instance-of-selenium-webdriver-without-building-the-browser-in/40784880#40784880", "title": "how to create an instance of selenium webdriver without building the browser in Node?", "body": "<p>Well, that is the expected behaviour, each time you create an instance of WebDriver (Firefox, Chrome etc), it will launch the new browser. From my knowledge, you CAN NOT use the already opened browser, which is launched manually.</p>\n\n<p>Why you call the webdriver instance each time? that will launch the new browser each time.</p>\n\n<p>If you want to use <code>existing driver instance</code> (not the browser which is launched manually, but the browser launched by the driver instance), then define the driver variable as <code>global</code>, so it is available across the tests.</p>\n"}], "owner": {"reputation": 117, "user_id": 2987322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5d77fa440ea6734133fcf99688ddf127?s=128&d=identicon&r=PG&f=1", "display_name": "user2987322", "link": "https://stackoverflow.com/users/2987322/user2987322"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 755, "favorite_count": 1, "accepted_answer_id": 40784880, "answer_count": 1, "score": 2, "last_activity_date": 1479985835, "creation_date": 1479944628, "question_id": 40775979, "link": "https://stackoverflow.com/questions/40775979/how-to-create-an-instance-of-selenium-webdriver-without-building-the-browser-in", "title": "how to create an instance of selenium webdriver without building the browser in Node?", "body": "<p>I want to create an instance of webdriver(selenium) without building the browser. That is,</p>\n\n<pre><code>var webdriver = require('selenium-webdriver');\nvar driver = new webdriver.Builder()\n    .withCapabilities(webdriver.Capabilities.chrome())\n    .build();\n</code></pre>\n\n<p>i dont want to build the browser because, I want to keep the driver in a common place, if i use build a new chrome browser launches. And the application opens up new browser everytime I call it. </p>\n\n<p>Is it possible to do that?. Let me know if any further information is required.</p>\n\n<p>TIA</p>\n"}, {"tags": ["javascript", "html", "npm", "webpack", "babeljs"], "comments": [{"owner": {"reputation": 127336, "user_id": 283366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ad213d8adabe4b64c2d53c5e0e3cab4?s=128&d=identicon&r=PG", "display_name": "Phil", "link": "https://stackoverflow.com/users/283366/phil"}, "edited": false, "score": 1, "creation_date": 1479944911, "post_id": 40775977, "comment_id": 68775702, "body": "You&#39;ll need Babel to transpile the ES6 syntax"}, {"owner": {"reputation": 3583, "user_id": 670979, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/3f168e506cefb78f3fc2b0a56ab9e7c9?s=128&d=identicon&r=PG", "display_name": "www.data-blogger.com", "link": "https://stackoverflow.com/users/670979/www-data-blogger-com"}, "edited": false, "score": 1, "creation_date": 1491553652, "post_id": 40775977, "comment_id": 73614487, "body": "You can find a tutorial on Webpack and Babel here: <a href=\"https://www.data-blogger.com/2017/04/07/building-a-tic-tac-toe-web-app-with-webpack-babel-react-redux/\" rel=\"nofollow noreferrer\">data-blogger.com/2017/04/07/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1267, "user_id": 3608176, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b5e38c2f24bf0c10bf5447d45de437f8?s=128&d=identicon&r=PG&f=1", "display_name": "erol_smsr", "link": "https://stackoverflow.com/users/3608176/erol-smsr"}, "edited": false, "score": 0, "creation_date": 1480002849, "post_id": 40776313, "comment_id": 68803188, "body": "Thanks for your answer. But where can I find the webpack.config.js file? I looked in the node_modules/webpack folder, but couldn&#39;t find it there."}, {"owner": {"reputation": 6795, "user_id": 2902660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oNdJU.jpg?s=128&g=1", "display_name": "Pineda", "link": "https://stackoverflow.com/users/2902660/pineda"}, "reply_to_user": {"reputation": 1267, "user_id": 3608176, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b5e38c2f24bf0c10bf5447d45de437f8?s=128&d=identicon&r=PG&f=1", "display_name": "erol_smsr", "link": "https://stackoverflow.com/users/3608176/erol-smsr"}, "edited": false, "score": 0, "creation_date": 1480003655, "post_id": 40776313, "comment_id": 68803663, "body": "You define it yourself directly in the root of your directory structure. That&#39;s the same folder level as node_modules <b>but not <i>inside</i></b> it"}, {"owner": {"reputation": 1267, "user_id": 3608176, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b5e38c2f24bf0c10bf5447d45de437f8?s=128&d=identicon&r=PG&f=1", "display_name": "erol_smsr", "link": "https://stackoverflow.com/users/3608176/erol-smsr"}, "edited": false, "score": 0, "creation_date": 1480003963, "post_id": 40776313, "comment_id": 68803850, "body": "Oh I just did that. Doesn&#39;t change anything."}, {"owner": {"reputation": 6795, "user_id": 2902660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oNdJU.jpg?s=128&g=1", "display_name": "Pineda", "link": "https://stackoverflow.com/users/2902660/pineda"}, "reply_to_user": {"reputation": 1267, "user_id": 3608176, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b5e38c2f24bf0c10bf5447d45de437f8?s=128&d=identicon&r=PG&f=1", "display_name": "erol_smsr", "link": "https://stackoverflow.com/users/3608176/erol-smsr"}, "edited": false, "score": 0, "creation_date": 1480005150, "post_id": 40776313, "comment_id": 68804570, "body": "Are your component files saved as .js or .jsx? If your files are saved as only .js you can amend the line &#39;test&#39; to&gt;&gt;&gt; test: /\\.js$/,"}, {"owner": {"reputation": 1267, "user_id": 3608176, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b5e38c2f24bf0c10bf5447d45de437f8?s=128&d=identicon&r=PG&f=1", "display_name": "erol_smsr", "link": "https://stackoverflow.com/users/3608176/erol-smsr"}, "edited": false, "score": 0, "creation_date": 1480025101, "post_id": 40776313, "comment_id": 68812225, "body": "Now I get the <code>npm ERR! code LIFECYCLE</code> error. It is said on other questions that this is due to a syntax error in a sass or JS file. But I copied the JS and everything else from Webpacks own getting started guide. Kind of annoying I run into all these errors and stuff, just for dependency management :/"}], "tags": [], "owner": {"reputation": 6795, "user_id": 2902660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oNdJU.jpg?s=128&g=1", "display_name": "Pineda", "link": "https://stackoverflow.com/users/2902660/pineda"}, "is_accepted": true, "score": 5, "last_activity_date": 1479947201, "creation_date": 1479947201, "answer_id": 40776313, "question_id": 40775977, "link": "https://stackoverflow.com/questions/40775977/webpack-getting-started-import-error/40776313#40776313", "title": "Webpack getting started, import error", "body": "<p>As has been suggested, you'll need to setup up Babel to get this working.</p>\n\n<p><em>Install babel dependancies:</em></p>\n\n<pre><code>    npm install --save-dev babel-loader babel-core babel-preset-react babel-preset-es2015\n</code></pre>\n\n<p>You'll need to edit your <code>webpack.config.js</code> file to include the babel loader settings:</p>\n\n<pre><code>var webpack = require('webpack');\n\nmodule.exports = {\n  ...\n  module: {\n    loaders: [\n      {\n        test: /.jsx?$/,\n        loader: 'babel-loader',\n        exclude: /node_modules/,\n        query: {\n          presets: ['es2015', 'react']\n        }\n      }\n    ]\n  },\n};\n</code></pre>\n"}], "owner": {"reputation": 1267, "user_id": 3608176, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b5e38c2f24bf0c10bf5447d45de437f8?s=128&d=identicon&r=PG&f=1", "display_name": "erol_smsr", "link": "https://stackoverflow.com/users/3608176/erol-smsr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 40776313, "answer_count": 1, "score": 3, "last_activity_date": 1491573717, "creation_date": 1479944604, "last_edit_date": 1491573717, "question_id": 40775977, "link": "https://stackoverflow.com/questions/40775977/webpack-getting-started-import-error", "title": "Webpack getting started, import error", "body": "<p>I'm getting started with Webpack, but already ran into the following problem: I created an app/index.js file (as specified in the documentation). I also created an index.html file (copied the HTML and CSS from the documentation). I ran the correct commands in the CLI (including generating a dist/bundle.js file).</p>\n\n<p>The code:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"nl\"&gt;\n    &lt;head&gt;\n        &lt;meta charset=\"UTF-8\"&gt;\n        &lt;title&gt;Webpack&lt;/title&gt;\n        &lt;!-- &lt;script src=\"https://unpkg.com/lodash@4.16.6\" type=\"text/javascript\"&gt;&lt;/script&gt; --&gt;\n        &lt;script src=\"dist/bundle.js\" type=\"text/javascript\"&gt;&lt;/script&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;!-- Markup here --&gt;\n        &lt;div id=\"root\"&gt;&lt;/div&gt;\n\n        &lt;!-- &lt;script src=\"app/index.js\" type=\"text/javascript\"&gt;&lt;/script&gt; --&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>The JS:</p>\n\n<pre><code>// To bundle the lodash dependency with the index.js, we need to import lodash.\nimport _ from 'lodash';\n\nfunction component () {\n    var element = document.createElement( 'div' );\n\n    /* lodash is required for the next line to work */\n    element.innerHTML = _.map( [ 'Hello, webpack' ], function( item ) {\n        return item + ' ';\n    });\n\n    return element;\n}\n\ndocument.body.appendChild( component() );\n</code></pre>\n\n<p>This returns the following console error: <code>bundle.js:48 Uncaught SyntaxError: Unexpected token import</code></p>\n\n<p>How do I get this to run correctly?</p>\n"}, {"tags": ["javascript", "express"], "answers": [{"tags": [], "owner": {"reputation": 420, "user_id": 3561677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/e2c801a4881cbe9fa0adec7828871202?s=128&d=identicon&r=PG&f=1", "display_name": "Jleibham", "link": "https://stackoverflow.com/users/3561677/jleibham"}, "is_accepted": true, "score": 0, "last_activity_date": 1480177551, "creation_date": 1480177551, "answer_id": 40820439, "question_id": 40775938, "link": "https://stackoverflow.com/questions/40775938/how-to-use-express-route-param-to-access-database-object/40820439#40820439", "title": "How to use express route param to access database object", "body": "<p>I was able to achieve the desired result by passing the data to the view via mongoose with the following snippet.</p>\n\n<pre><code>routes.get('/:title', function (req, res, next) { // Passes url param\n  const title = req.params.title //stores url param in varaible\n  Sessions.findOne({ 'title': title }, function (err, session) { // compares url param against my mongoose schema and queries the database for the desired object\n    if (err) return handleError(err); // checks for errors\n    res.render('session', {session: session}); // renders the page while passing the desired data.\n  })\n})\n</code></pre>\n"}], "owner": {"reputation": 420, "user_id": 3561677, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/e2c801a4881cbe9fa0adec7828871202?s=128&d=identicon&r=PG&f=1", "display_name": "Jleibham", "link": "https://stackoverflow.com/users/3561677/jleibham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 40820439, "answer_count": 1, "score": 3, "last_activity_date": 1480177551, "creation_date": 1479944407, "last_edit_date": 1480176182, "question_id": 40775938, "link": "https://stackoverflow.com/questions/40775938/how-to-use-express-route-param-to-access-database-object", "title": "How to use express route param to access database object", "body": "<p>I'm trying to route different radio sessions/episodes from database queries with express.js. I'm able to grab the route param from the URL in my express route. But I'm unsure how to use the param to query the database for the right object.</p>\n\n<p>I'm able to get this to work by hardcoding the param into my service as shown below with the 'title' variable in service.js. Currently, I only know how to pass variables from express to the view. Is there a way to pass the title param from my express route to the service.js file?</p>\n\n<p>Routes.js</p>\n\n<pre><code>'use strict';\n\nconst express = require('express');\nconst Sessions = require('../models/sessions')\nconst routes = express.Router();\nconst apiRoutes = express.Router();\n\napiRoutes.get('/sessions', (req, res) =&gt; {\n  Sessions.find({}, (err, sessions) =&gt; {\n    if(err) {\n      return res.status(500).json({message: err.message});\n    }\n    res.json({sessions: sessions});\n  })\n});\n\nroutes.get('/', (req, res, next) =&gt; {\n  return res.render('index', {title: 'Home'});\n});\n\n\n// I added this bit of code after realizing I needed to use mongoose to query the database. I'm still unsure how to pass the object to my javascript but I'm getting closer.\nroutes.get('/:title', function (req, res, next) {\n  const title = req.params.title\n  Sessions.find((err, sessions) =&gt; {\n    if (err) return console.error(err);\n    for (let i = 0; i &lt; sessions.length; i++) {\n      if (title === sessions[i].title.toLowerCase()) {\n        res.render('session')\n      }\n    }\n  })\n})\n\nmodule.exports = [routes, apiRoutes];\n</code></pre>\n\n<p>index.js</p>\n\n<pre><code>'use strict';\nconst express = require('express');\nconst app = express();\nconst [routes, apiRoutes] = require('./src/routes');\n\nrequire('./src/database');\nrequire('./src/seed');\n\napp.use('/', express.static('public'));\n\napp.set('view engine', 'pug');\napp.set('views', __dirname + '/views');\n\napp.use('/api', apiRoutes);\napp.use('/', routes);\n\napp.listen(process.env.PORT || 8082);\n</code></pre>\n\n<p>service.js</p>\n\n<pre><code>const root = window.location.origin;\nconst title = 'session 1'\n\nfunction callService(){\n  service(`${root}/api/sessions`)\n    .then(retrieveSession)\n    .catch(function(e) {\n      console.log(e)\n    });\n}\n\nfunction retrieveSession(data) {\n  for (let i = 0; i &lt; data.sessions.length; i++) {\n    if(data.sessions[i].title.toLowerCase() === title) {\n      return data.sessions[i];\n    }\n  }\n}\n\nfunction service(url) {\n  return new Promise(function(res, rej) {\n    var httpRequest = new XMLHttpRequest();\n    httpRequest.open('GET', url);\n    httpRequest.onreadystatechange = handleResponse;\n    httpRequest.onerror = function(error) {\n      rej(error)\n    }\n    httpRequest.send();\n\n    function handleResponse() {\n      if (httpRequest.readyState === 4) {\n        if (httpRequest.status === 200) {\n          var data = JSON.parse(httpRequest.responseText);\n          res(data)\n        } else {\n          rej(this.statusText)\n        }\n      }\n    };\n  });\n}\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "html", "materialize", "rangeslider"], "comments": [{"owner": {"reputation": 56607, "user_id": 695364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUNjJ.jpg?s=128&g=1", "display_name": "Scott Marcus", "link": "https://stackoverflow.com/users/695364/scott-marcus"}, "edited": false, "score": 0, "creation_date": 1479944130, "post_id": 40775886, "comment_id": 68775476, "body": "Why not use a normal range element and map the numbers to letters?"}, {"owner": {"reputation": 927, "user_id": 3339381, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5c4a586e3c36b52d4c893359b97b0ba5?s=128&d=identicon&r=PG&f=1", "display_name": "dbr", "link": "https://stackoverflow.com/users/3339381/dbr"}, "reply_to_user": {"reputation": 56607, "user_id": 695364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUNjJ.jpg?s=128&g=1", "display_name": "Scott Marcus", "link": "https://stackoverflow.com/users/695364/scott-marcus"}, "edited": false, "score": 0, "creation_date": 1479944235, "post_id": 40775886, "comment_id": 68775502, "body": "Hm, could you point me to some example. I might have missed something basic here. Also, I need min and max values here. Will update my question."}, {"owner": {"reputation": 56607, "user_id": 695364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUNjJ.jpg?s=128&g=1", "display_name": "Scott Marcus", "link": "https://stackoverflow.com/users/695364/scott-marcus"}, "edited": false, "score": 0, "creation_date": 1479944977, "post_id": 40775886, "comment_id": 68775722, "body": "Check my answer below for a working example."}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 0, "creation_date": 1479945428, "post_id": 40775886, "comment_id": 68775820, "body": "I believe the behavior of the tickers change from browser to browser."}, {"owner": {"reputation": 927, "user_id": 3339381, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5c4a586e3c36b52d4c893359b97b0ba5?s=128&d=identicon&r=PG&f=1", "display_name": "dbr", "link": "https://stackoverflow.com/users/3339381/dbr"}, "edited": false, "score": 0, "creation_date": 1479945662, "post_id": 40775886, "comment_id": 68775869, "body": "This seems like it&#39;s going to be one fun task... I hoped something like this already exists, guess not. I will post my solution when I find one, hopefully soon."}, {"owner": {"reputation": 18798, "user_id": 4543207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ed6f11c827fa7cef811f141a84cc14b?s=128&d=identicon&r=PG&f=1", "display_name": "Redu", "link": "https://stackoverflow.com/users/4543207/redu"}, "edited": false, "score": 0, "creation_date": 1479945708, "post_id": 40775886, "comment_id": 68775885, "body": "<a href=\"http://stackoverflow.com/a/29875717/4543207\">this answer</a> may give you a start up."}], "answers": [{"comments": [{"owner": {"reputation": 927, "user_id": 3339381, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5c4a586e3c36b52d4c893359b97b0ba5?s=128&d=identicon&r=PG&f=1", "display_name": "dbr", "link": "https://stackoverflow.com/users/3339381/dbr"}, "edited": false, "score": 0, "creation_date": 1479945312, "post_id": 40775934, "comment_id": 68775799, "body": "This make sense (at least on first view, my js is not very good) but how do I use it with upper and lower bound?"}, {"owner": {"reputation": 56607, "user_id": 695364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUNjJ.jpg?s=128&g=1", "display_name": "Scott Marcus", "link": "https://stackoverflow.com/users/695364/scott-marcus"}, "reply_to_user": {"reputation": 927, "user_id": 3339381, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5c4a586e3c36b52d4c893359b97b0ba5?s=128&d=identicon&r=PG&f=1", "display_name": "dbr", "link": "https://stackoverflow.com/users/3339381/dbr"}, "edited": false, "score": 0, "creation_date": 1479947249, "post_id": 40775934, "comment_id": 68776248, "body": "You can set the upper and lower numeric values in the HTML. The array with the letters can be declared once, with all the letters you may want."}], "tags": [], "owner": {"reputation": 56607, "user_id": 695364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUNjJ.jpg?s=128&g=1", "display_name": "Scott Marcus", "link": "https://stackoverflow.com/users/695364/scott-marcus"}, "is_accepted": false, "score": 1, "last_activity_date": 1479944800, "last_edit_date": 1479944800, "creation_date": 1479944392, "answer_id": 40775934, "question_id": 40775886, "link": "https://stackoverflow.com/questions/40775886/range-slider-with-custom-range-steps-a-b-c-d-z/40775934#40775934", "title": "range slider with custom range steps ( a - b- c- d - .. - z)", "body": "<p>Why not use a normal range element and map the numbers to letters? </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var rng = document.getElementById(\"rng\");\r\nvar ro = document.getElementById(\"rngOutput\");\r\nvar myRange = [\"a\",\"b\",\"c\",\"d\"];\r\n\r\nfunction updateRange(){\r\n   ro.textContent = myRange[parseInt(rng.value, 10)];\r\n   console.log(\"Selected value is: \" + myRange[parseInt(rng.value, 10)] + \", Associated value is: \" + rng.value);\r\n};\r\n\r\nwindow.addEventListener(\"DOMContentLoaded\", updateRange);\r\nrng.addEventListener(\"input\", updateRange);</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;input type=\"range\" id=\"rng\" min=\"0\" max=\"3\" value=\"0\"&gt;&lt;span id=\"rngOutput\"&gt;&lt;/span&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 927, "user_id": 3339381, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/5c4a586e3c36b52d4c893359b97b0ba5?s=128&d=identicon&r=PG&f=1", "display_name": "dbr", "link": "https://stackoverflow.com/users/3339381/dbr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2228, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1479944800, "creation_date": 1479944074, "last_edit_date": 1479944263, "question_id": 40775886, "link": "https://stackoverflow.com/questions/40775886/range-slider-with-custom-range-steps-a-b-c-d-z", "title": "range slider with custom range steps ( a - b- c- d - .. - z)", "body": "<p>I need a range slider recommendation with possibility to customize range steps.</p>\n\n<p>For example my range steps should be as:</p>\n\n<pre><code>a - b - c - d\n</code></pre>\n\n<p>with associated values of (0, 1, 2, 3). I need to be able to select minimum and maximum value for the range.</p>\n\n<p>I did some Googling but couldn't find any.</p>\n\n<p>Top two range sliders are (as it seems to me at least): <a href=\"http://rangeslider.js.org/\" rel=\"nofollow noreferrer\">rangeslider</a> and <a href=\"https://refreshless.com/nouislider/\" rel=\"nofollow noreferrer\">nouislider</a> but I can't figure out how to tweak any of them to do what I need.</p>\n\n<p>I'm using materializecss and jQuery for my app so I would prefer solutions based upon these libraries but any suggestion is appreciated as it seems to me that this won't be an easy task.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["javascript", "node.js", "mongodb", "api", "mongoose"], "answers": [{"tags": [], "owner": {"reputation": 3915, "user_id": 6121703, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dBoP0.jpg?s=128&g=1", "display_name": "Aikon Mogwai", "link": "https://stackoverflow.com/users/6121703/aikon-mogwai"}, "is_accepted": true, "score": 1, "last_activity_date": 1506306503, "last_edit_date": 1506306503, "creation_date": 1479950171, "answer_id": 40776671, "question_id": 40775848, "link": "https://stackoverflow.com/questions/40775848/node-js-doesnt-show-results-status-properly-in-api/40776671#40776671", "title": "Node.js doesn&#39;t show results status properly in api", "body": "<pre><code>exports.listById = function(id, callback) {\n    Course.findById(id, function(err, courses){\n        if(err)\n            return callback(new Error('Not Found')); // You must return Error by standard\n\n        callback(null, courses); // You must set first argument (error) to null\n    });        \n}\n...\n// You can check that id is number\napp.get('/courses/:id(\\\\d+)', function(req, res, next) { \n    var id = req.params.id;\n    courseController.listById(id, function(err, resp) {\n\n    if(err)\n        return next(err); // Pass error to error-handler (see link below)\n\n    res.status(200).json(resp);\n});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1136, "user_id": 4971940, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c25fd42f1892d75bb0761ad519fd08bf?s=128&d=identicon&r=PG&f=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/4971940/simon"}, "is_accepted": false, "score": 1, "last_activity_date": 1479950429, "creation_date": 1479950429, "answer_id": 40776699, "question_id": 40775848, "link": "https://stackoverflow.com/questions/40775848/node-js-doesnt-show-results-status-properly-in-api/40776699#40776699", "title": "Node.js doesn&#39;t show results status properly in api", "body": "<p>Best practice for callback function is first argument as error and second as result.You should </p>\n\n<pre><code>exports.listById = function (id, callback) {\n    Course.findById(id, function (err, courses) {\n        if (err) {\n            callback(error);\n        }\n        else {\n            callback(null, courses);\n        }\n    });\n}\n</code></pre>\n\n<p>while your route should look like this:</p>\n\n<pre><code>app.get('/courses/:id', function (req, res) {\n    var id = req.params.id;\n    courseController.listById(id, function (error, courses) {\n        if (error) return res.status(500) // internal server error\n\n        // if I remember correctly, sources is empty array if course not found\n        res.status(200).json(resp);\n    });\n});\n</code></pre>\n"}], "owner": {"reputation": 303, "user_id": 2278503, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/PVzgM.jpg?s=128&g=1", "display_name": "Wesley Heron", "link": "https://stackoverflow.com/users/2278503/wesley-heron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 40776671, "answer_count": 2, "score": 0, "last_activity_date": 1506306503, "creation_date": 1479943891, "question_id": 40775848, "link": "https://stackoverflow.com/questions/40775848/node-js-doesnt-show-results-status-properly-in-api", "title": "Node.js doesn&#39;t show results status properly in api", "body": "<p>I'm developing a simple rest API in Node.js, and it works middling. \nThis is my controller code:</p>\n\n<pre><code>...\nexports.listById = function(id, callback) {\n        Course.findById(id, function(err, courses){\n            if(err){\n                callback({error: 'Not Found'});\n            }\n            else{\n                callback(courses);\n            }\n        });        \n    }\n</code></pre>\n\n<p>And this is my route:</p>\n\n<pre><code>app.get('/courses/:id', function(req, res){\n        var id = req.params.id;\n        courseController.listById(id, function(resp){\n            res.status(200).json(resp);                                 \n        });\n    });\n</code></pre>\n\n<p>This code works and show results of my collection in mongodb.\nBut the code below, doesn't show results with postman:</p>\n\n<pre><code>app.get('/courses/:id', function(req, res){\n            var id = req.params.id;\n            courseController.listById(id, function(err, resp){\n\n            if(err){\n                    res.status(404).send(err);\n               }\n               else{\n                    res.status(200).json(resp);\n               }                                 \n            });\n        });\n</code></pre>\n"}, {"tags": ["javascript", "openlayers"], "owner": {"reputation": 3124, "user_id": 453746, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6f013e7133566625a6e2fe9512221eeb?s=128&d=identicon&r=PG", "display_name": "Squrler", "link": "https://stackoverflow.com/users/453746/squrler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1516388185, "creation_date": 1479943566, "last_edit_date": 1516388185, "question_id": 40775808, "link": "https://stackoverflow.com/questions/40775808/triggering-the-retrieval-of-a-feature-on-a-feature-layer-by-something-other-than", "title": "Triggering the retrieval of a feature on a feature layer by something other than click using Open Layers 2", "body": "<p>I have added a feature map to my Open Layers 2 map, by using the following code. When I click a spot on the map, it correctly retrieves the feature name for that place according to the feature layer. </p>\n\n<p>Code:</p>\n\n<pre><code>featureControl = new OpenLayers.Control.WMSGetFeatureInfo({\n    url: featureLayer.url,\n    title: '',\n    layers: [featureLayer],\n    infoFormat: 'text/xml',\n    queryVisible: true\n});\n\nfeatureControl.events.register('getfeatureinfo', this, function (event) {\n    var xml = new window.DOMParser().parseFromString(event.text, 'application/xml'),\n        path = featureLayer.$featureInfoXPath,\n        featureName;\n\n    try {\n        featureName = xml.evaluate(path, xml, null, XPathResult.ANY_TYPE, null).iterateNext().value;\n        console.log('got the feature:', featureName)\n    } catch (error) {\n        console.log('error', error);\n    }\n});\n\nmap.addControl(featureControl);\nfeatureControl.activate();\n</code></pre>\n\n<p>However, I would like to trigger this retrieval of the feature name on other events as well, such as when I type in an address in an input field. So I am looking for a mechanism to trigger the getfeatureinfo event by something other than \"click\". Is this possible? And if so, how?</p>\n"}, {"tags": ["javascript", "jquery"], "comments": [{"owner": {"reputation": 304305, "user_id": 519413, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7839089cd91dc5cc5eb1e0cdbf3312ed?s=128&d=identicon&r=PG", "display_name": "Rory McCrossan", "link": "https://stackoverflow.com/users/519413/rory-mccrossan"}, "edited": false, "score": 0, "creation_date": 1479943270, "post_id": 40775747, "comment_id": 68775201, "body": "You need to include jQuery.js in your page"}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 7087556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e584385c3e7955e207241facb123b1c?s=128&d=identicon&r=PG&f=1", "display_name": "Matheus", "link": "https://stackoverflow.com/users/7087556/matheus"}, "edited": false, "score": 0, "creation_date": 1479944526, "post_id": 40775762, "comment_id": 68775586, "body": "Oh true! The reason I forgot about this is because I had programmed another page without referencing the jQuery library and it worked (but that page would, eventually, function as an &#39;iframe&#39; inside ANOTHER page WITH referenced jQuery, hence why it worked) and I thought so would this time. I guess it&#39;s still true that mistakes are always ours! Thanks mate."}], "tags": [], "owner": {"reputation": 56607, "user_id": 695364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUNjJ.jpg?s=128&g=1", "display_name": "Scott Marcus", "link": "https://stackoverflow.com/users/695364/scott-marcus"}, "is_accepted": true, "score": 0, "last_activity_date": 1479943344, "creation_date": 1479943344, "answer_id": 40775762, "question_id": 40775747, "link": "https://stackoverflow.com/questions/40775747/very-basic-jquery-code-not-working/40775762#40775762", "title": "Very basic jQuery code not working", "body": "<p>You need to reference the JQuery library with a <code>script</code> tag. Without it, the special syntax and objects provided by the library won't be known to your browser. </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>$(document).ready(function(){\r\n\r\n        $(\"#id3\").click(function(){\r\n            alert(\"ada\");\r\n        });\r\n});</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;button type=\"button\" id=\"id3\"&gt;id&lt;/button&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 103, "user_id": 7087556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e584385c3e7955e207241facb123b1c?s=128&d=identicon&r=PG&f=1", "display_name": "Matheus", "link": "https://stackoverflow.com/users/7087556/matheus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "closed_date": 1479943398, "accepted_answer_id": 40775762, "answer_count": 1, "score": 0, "last_activity_date": 1479943374, "creation_date": 1479943247, "last_edit_date": 1479943374, "question_id": 40775747, "link": "https://stackoverflow.com/questions/40775747/very-basic-jquery-code-not-working", "closed_reason": "Duplicate", "title": "Very basic jQuery code not working", "body": "<p>I was programming on jQuery, and I was met by a page with a strange behavior: very basic jQuery/javascript functionality simply not working. I have the mentality of \"if it isn't working, then it's my fault and never the programming language's \", but apparently in this case this is not quite the truth. This is the code:</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n\n&lt;script&gt;\n\n    $(document).ready(function(){\n\n        $(\"#id3\").click(function(){\n\n            alert(\"ada\");\n\n        });\n\n    });\n\n&lt;/script&gt;\n\n&lt;button type=\"button\" id=\"id3\"&gt;id&lt;/button&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>This code is in a page on my localhost, which has several other pages with working jQuery functions much MUCH more complicated than that. I honestly have no clue why or how would this simple code NOT work.</p>\n\n<p>Any insight is appreciated</p>\n"}, {"tags": ["javascript", "node.js", "bluebird", "async.js"], "comments": [{"owner": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "edited": false, "score": 0, "creation_date": 1479943673, "post_id": 40775738, "comment_id": 68775339, "body": "you use a global (undeclared) var <code>detail</code> in two different functions - is this deliberate?"}, {"owner": {"reputation": 574451, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 1, "creation_date": 1479943929, "post_id": 40775738, "comment_id": 68775425, "body": "You will be a lot better off if you don&#39;t mix the async library with promises.  Pick one or the other to manage your async operations (preferably promises)."}, {"owner": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "reply_to_user": {"reputation": 574451, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 1, "creation_date": 1479944005, "post_id": 40775738, "comment_id": 68775448, "body": "async doesn&#39;t have a <code>forEach</code> (maybe had one in the past) - and if it&#39;s that same as  <code>async.each</code> you are using it incorrectly - but, yeah, what @jfriend said, mixing the two is fraught with frustrations and tears :p"}, {"owner": {"reputation": 574451, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 0, "creation_date": 1479948886, "post_id": 40775738, "comment_id": 68776604, "body": "Is this by any chance a programming assignment?  I&#39;ve seen other questions referencing the demo site <code>http:&#47;&#47;shirts4mike.com</code> and many of the other questions have been similar to this one."}, {"owner": {"reputation": 1, "user_id": 7202612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/762503159f034d928a1e0bdc186300fa?s=128&d=identicon&r=PG&f=1", "display_name": "Bleeks", "link": "https://stackoverflow.com/users/7202612/bleeks"}, "edited": false, "score": 0, "creation_date": 1480334687, "post_id": 40775738, "comment_id": 68904581, "body": "This is an assignment from teamTreehouse."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7202612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/762503159f034d928a1e0bdc186300fa?s=128&d=identicon&r=PG&f=1", "display_name": "Bleeks", "link": "https://stackoverflow.com/users/7202612/bleeks"}, "edited": false, "score": 0, "creation_date": 1480334919, "post_id": 40776154, "comment_id": 68904731, "body": "Thank you for taking the time to respond. I so appreciate it. I will make the corrections as you suggest and see where it takes me. I had tried async first and couldn&#39;t get past the iterative pass. Then ditched that and tried Bluebird but also hung up at the same point. Combining the two was an act of desperation :)) . Thanks again!"}], "tags": [], "owner": {"reputation": 574451, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "is_accepted": false, "score": 1, "last_activity_date": 1523107513, "last_edit_date": 1523107513, "creation_date": 1479945884, "answer_id": 40776154, "question_id": 40775738, "link": "https://stackoverflow.com/questions/40775738/bluebird-promises-and-async-foreach-iteration/40776154#40776154", "title": "Bluebird promises and async.forEach iteration", "body": "<p>I would suggest a bunch of changes.</p>\n\n<ol>\n<li><p>Stop using globals or higher scoped variables or undeclared variables.  Declare local variables where they are used/needed and don't share variables with other functions.</p></li>\n<li><p>Don't mix the async library with promises.  Since you're already promisifying your async functions, then use promise functions to manage multiple async operations.  You can just remove the async library from this project entirely.</p></li>\n<li><p>Promisify at the lowest level that is practical so all higher level uses can just use promises directly.  So, rather than promisifying <code>getPage()</code>, you should promisify <code>request()</code> and then use that in <code>getPage()</code>.</p></li>\n<li><p>Since you have the Bluebird promise library, you can use it's higher level iteration functions such as <code>Promise.map()</code> to iterate your collection, collect all the results and return a single promise that tells you when everything is done.</p></li>\n</ol>\n\n<p>Using these concepts, you can then use code like this:</p>\n\n<pre><code>// promisified request()\nfunction getRequest(url) {\n    return new Promise(function(resolve, reject) {\n        request(url, function(err, response, body) {\n            if (err) {\n                reject(err);\n            } else {\n                resolve(body);\n            }\n        });\n\n    });\n}\n\n// resolves to scraped contents for one page\nfunction getPage(url, config) {\n    return getRequest(url).then(function(body) {\n        return sX.scrape(body, config);\n    });\n}\n\n// resolves to an array of scraped contents for an array of objects \n// that each have a link in them\nfunction getDetailPage(arr, config) {\n    return Promise.map(arr, function(item) {\n        return getPage('http://www.shirts4mike.com' + '/' + item.link);\n    });\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7202612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/762503159f034d928a1e0bdc186300fa?s=128&d=identicon&r=PG&f=1", "display_name": "Bleeks", "link": "https://stackoverflow.com/users/7202612/bleeks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 755, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523107513, "creation_date": 1479943184, "question_id": 40775738, "link": "https://stackoverflow.com/questions/40775738/bluebird-promises-and-async-foreach-iteration", "title": "Bluebird promises and async.forEach iteration", "body": "<p>This is my first time asking a question, so please bear with me. I'm trying to write a content scrapper in node.js. My program will go to the landing page of the site, get the link to the next page and get the link for the next batch of pages. My problem is when I have to cycle through an array of links, go to that page, and get scrap information there. I'm trying a async.forEach iteration, but it finishes after the last then() in my chained promises.  Many of the concepts here are new to me, so I'm sure this code is screwy. Any help would be appreciated.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var sX = require('scrapper-x');\r\nvar request = require('request');\r\nvar async = require('async');\r\nvar Promise = require('bluebird');\r\nvar request = (require('request'));\r\nvar colors = require('colors');\r\n\r\nvar baseURL = 'http://shirts4mike.com';\r\nvar arrShirts = [\r\n    {\r\n        link: 'shirt.php?id=101',\r\n        img: 'some img'\r\n    },\r\n    {\r\n        link: 'shirt.php?id=102',\r\n        img: 'some img'\r\n    },\r\n    {\r\n        link: 'shirt.php?id=103',\r\n        img: 'some img'\r\n    }\r\n];\r\n\r\nvar page = '';\r\n\r\nvar configMain = {\r\n    repeatItemGroup: '.nav &gt; li',\r\n    dataFormat: {\r\n        link: {\r\n            selector: 'li &gt; a',\r\n            type: 'attr:href'\r\n        }\r\n    }\r\n};\r\n\r\nvar configShirts = {\r\n    repeatItemGroup: '.products &gt; li',\r\n    dataFormat: {\r\n        link: {\r\n            selector: 'li &gt; a',\r\n            type: 'attr:href'\r\n        },\r\n        img: {\r\n            selector: 'li &gt; a &gt; img',\r\n            type: 'attr:src'\r\n        }\r\n    }\r\n};\r\n\r\nvar configDetails = {\r\n    repeatItemGroup: '.shirt-details',\r\n    dataFormat: {\r\n        price: {\r\n            selector: '.price',\r\n            type: 'text'\r\n        },\r\n        title: {\r\n            selector: '.shirt-details &gt; h1',\r\n            type: 'text'\r\n        }\r\n    }\r\n};\r\n\r\n\r\nfunction getPage(url, config) {\r\n    return new Promise(function(resolve, reject) {\r\n        request(url, function(error, response, body, shirt) {\r\n                if (error) {\r\n                    console.log('error');\r\n                    reject();\r\n                }\r\n                if (!error &amp;&amp; response.statusCode == 200) {\r\n                    detail = sX.scrape(body, config);\r\n                    resolve(detail);\r\n                }\r\n            }); \r\n\r\n    });\r\n}\r\n\r\nfunction getDetailPage(arr, config) {\r\n    return new Promise(function(resolve, reject) {\r\n        async.forEach( arr, function( item, callback) {\r\n            request('http://www.shirts4mike.com' + '/' + item.link, function(error, response, body, item) {\r\n                if (!error &amp;&amp; response.statusCode == 200) {\r\n                    detail = sX.scrape(body, configDetails);\r\n                    console.log('Item: ', detail);\r\n                }\r\n            }); \r\n           callback();\r\n        });\r\n        resolve(detail);\r\n    });\r\n}\r\n\r\n    getPage(baseURL, configMain).then( function(data) {\r\n        for (var i = 0; i &lt; data.length; i++) {\r\n            //console.log('getMainPage: ', scrappedResult[i].link);\r\n            if (data[i].link.search('shirt') !== -1) {\r\n                page = '/' + data[i].link;\r\n                console.log(page.yellow);\r\n                baseURL += page;\r\n                return baseURL;\r\n            }\r\n        }\r\n    }).then( function(baseURL) {\r\n        return getPage(baseURL, configShirts);\r\n    }).then( function(data) {\r\n        for (var i = 0; i &lt; data.length; i++) {\r\n            //console.log(data[i].link);\r\n            if (data[i].link.search('shirt') !== -1) {\r\n                arrShirts.push(data[i]);\r\n                console.log(\"arrShirts[\" + i + \"]: \" + arrShirts[i].link);\r\n            }\r\n        }\r\n        return arrShirts;\r\n    }).then( function(arr) {\r\n        return getDetailPage(arrShirts, configDetails);\r\n    }).then(function (data) {\r\n        console.log(\"end: \", data);\r\n    }).catch( function(err) {\r\n        console.log(err);\r\n    });</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["javascript", "regex"], "comments": [{"owner": {"reputation": 127336, "user_id": 283366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ad213d8adabe4b64c2d53c5e0e3cab4?s=128&d=identicon&r=PG", "display_name": "Phil", "link": "https://stackoverflow.com/users/283366/phil"}, "edited": false, "score": 0, "creation_date": 1479942935, "post_id": 40775674, "comment_id": 68775111, "body": "Aren&#39;t there mathematical rules to validate credit card numbers? See <a href=\"https://en.wikipedia.org/wiki/Luhn_algorithm\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Luhn_algorithm</a>"}, {"owner": {"reputation": 115, "user_id": 7111983, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-k2OBkZgScyI/AAAAAAAAAAI/AAAAAAAACkQ/OKEC155Mjbc/photo.jpg?sz=128", "display_name": "Cyrille", "link": "https://stackoverflow.com/users/7111983/cyrille"}, "reply_to_user": {"reputation": 127336, "user_id": 283366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ad213d8adabe4b64c2d53c5e0e3cab4?s=128&d=identicon&r=PG", "display_name": "Phil", "link": "https://stackoverflow.com/users/283366/phil"}, "edited": false, "score": 0, "creation_date": 1479943281, "post_id": 40775674, "comment_id": 68775206, "body": "@Phil I believe there are but I have been told to use regular expression instead."}, {"owner": {"reputation": 127336, "user_id": 283366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ad213d8adabe4b64c2d53c5e0e3cab4?s=128&d=identicon&r=PG", "display_name": "Phil", "link": "https://stackoverflow.com/users/283366/phil"}, "edited": false, "score": 0, "creation_date": 1479943339, "post_id": 40775674, "comment_id": 68775224, "body": "<i>&quot;Told&quot;</i> by whom? Tell them there&#39;s better ways"}, {"owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 0, "creation_date": 1479943757, "post_id": 40775674, "comment_id": 68775371, "body": "A Regular Expression will only validate the <i>format</i> of an entered value - a regex cannot compute a CC number&#39;s check-digit, for example, which should also be done. However I note that these regexs prevent the user from entering their CC number with spaces or hyphens (which improves readability and usability). I think you should just have a minimum length check and let your backend payment-processor do the actual validation+verification of the numbers."}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 7111983, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-k2OBkZgScyI/AAAAAAAAAAI/AAAAAAAACkQ/OKEC155Mjbc/photo.jpg?sz=128", "display_name": "Cyrille", "link": "https://stackoverflow.com/users/7111983/cyrille"}, "edited": false, "score": 0, "creation_date": 1479944185, "post_id": 40775744, "comment_id": 68775487, "body": "My logic was dead wrrong. This one has worked perfectly. Thanks a lot @Dai"}], "tags": [], "owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "is_accepted": false, "score": 1, "last_activity_date": 1479943236, "creation_date": 1479943236, "answer_id": 40775744, "question_id": 40775674, "link": "https://stackoverflow.com/questions/40775674/credit-card-input-validation-using-regular-expression-in-javascript/40775744#40775744", "title": "credit card input validation using regular expression in javascript", "body": "<p>Change your logic to this:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n\n// Store the regexes as globals so they're cached and not re-parsed on every call:\nvar visaPattern = /^(?:4[0-9]{12}(?:[0-9]{3})?)$/;\nvar mastPattern = /^(?:5[1-5][0-9]{14})$/;\nvar amexPattern = /^(?:3[47][0-9]{13})$/;\nvar discPattern = /^(?:6(?:011|5[0-9][0-9])[0-9]{12})$/; \n\nfunction validateCreditCardNumber() {\n\n    var ccNum  = document.getElementById(\"cardNum\").value;\n\n    var isVisa = visaPattern.test( ccNum ) === true;\n    var isMast = mastPattern.test( ccNum ) === true;\n    var isAmex = amexPattern.test( ccNum ) === true;\n    var isDisc = discPattern.test( ccNum ) === true;\n\n    if( isVisa || isMast || isAmex || isDisc ) {\n        // at least one regex matches, so the card number is valid.\n\n        if( isVisa ) {\n            // Visa-specific logic goes here\n        }\n        else if( isMast ) {\n             // Mastercard-specific logic goes here\n        }\n        else if( isAmex ) {\n            // AMEX-specific logic goes here\n        }\n        else if( isDisc ) {\n            // Discover-specific logic goes here\n        }\n    }\n    else {\n        alert(\"Please enter a valid card number.\");\n    }\n}\n\n&lt;/script&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 461, "user_id": 5479187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VLYuG.jpg?s=128&g=1", "display_name": "Jeppe Andreasen", "link": "https://stackoverflow.com/users/5479187/jeppe-andreasen"}, "edited": false, "score": 1, "creation_date": 1525860556, "post_id": 40775759, "comment_id": 87518649, "body": "Since we&#39;re optimizing here why not evaluate isValid like this:  var isValid = visaRegEx.test(ccNum)) || mastercardRegEx.test(ccNum)) || amexpRegEx.test(ccNum)) || discovRegEx.test(ccNum));"}, {"owner": {"reputation": 1732, "user_id": 2718874, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T70to.png?s=128&g=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/2718874/josh"}, "edited": false, "score": 0, "creation_date": 1544746503, "post_id": 40775759, "comment_id": 94395588, "body": "Here&#39;s a more exact Discover card regex: <a href=\"https://stackoverflow.com/a/13500918/2718874\">stackoverflow.com/a/13500918/2718874</a>"}], "tags": [], "owner": {"reputation": 53705, "user_id": 941272, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/10407f7f3fbf3d30443a6d22c7671ec5?s=128&d=identicon&r=PG", "display_name": "Sushanth --", "link": "https://stackoverflow.com/users/941272/sushanth"}, "is_accepted": true, "score": 20, "last_activity_date": 1517971799, "last_edit_date": 1517971799, "creation_date": 1479943326, "answer_id": 40775759, "question_id": 40775674, "link": "https://stackoverflow.com/questions/40775674/credit-card-input-validation-using-regular-expression-in-javascript/40775759#40775759", "title": "credit card input validation using regular expression in javascript", "body": "<p>You have 4 different <code>if</code> blocks in your case, which hits every single block when the previous once fail.</p>\n\n<p>Replace <code>if</code> with <code>if else</code>, that way if will only validate for a single use case.\nAlso you need not let the user know to be specific about the type of card that he is trying to enter. Just a single message to enter a valid number should suffice.</p>\n\n<pre><code>function ValidateCreditCardNumber() {\n\n  var ccNum = document.getElementById(\"cardNum\").value;\n  var visaRegEx = /^(?:4[0-9]{12}(?:[0-9]{3})?)$/;\n  var mastercardRegEx = /^(?:5[1-5][0-9]{14})$/;\n  var amexpRegEx = /^(?:3[47][0-9]{13})$/;\n  var discovRegEx = /^(?:6(?:011|5[0-9][0-9])[0-9]{12})$/;\n  var isValid = false;\n\n  if (visaRegEx.test(ccNum)) {\n    isValid = true;\n  } else if(mastercardRegEx.test(ccNum)) {\n    isValid = true;\n  } else if(amexpRegEx.test(ccNum)) {\n    isValid = true;\n  } else if(discovRegEx.test(ccNum)) {\n    isValid = true;\n  }\n\n  if(isValid) {\n     alert(\"Thank You!\");\n  } else {\n     alert(\"Please provide a valid Visa number!\");\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1714, "user_id": 855567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02cea396d4a79da17129decb5dec1164?s=128&d=identicon&r=PG", "display_name": "Adam F", "link": "https://stackoverflow.com/users/855567/adam-f"}, "is_accepted": false, "score": -1, "last_activity_date": 1528235498, "creation_date": 1528235498, "answer_id": 50709458, "question_id": 40775674, "link": "https://stackoverflow.com/questions/40775674/credit-card-input-validation-using-regular-expression-in-javascript/50709458#50709458", "title": "credit card input validation using regular expression in javascript", "body": "<p>This should do the job</p>\n\n<pre><code>var cc = /^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|(222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\\d{3})\\d{11}|62[0-9]{14})$/\n\ncc.test(card_number)\n</code></pre>\n\n<p>Source: vee-validate repo</p>\n"}], "owner": {"reputation": 115, "user_id": 7111983, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-k2OBkZgScyI/AAAAAAAAAAI/AAAAAAAACkQ/OKEC155Mjbc/photo.jpg?sz=128", "display_name": "Cyrille", "link": "https://stackoverflow.com/users/7111983/cyrille"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21256, "favorite_count": 3, "accepted_answer_id": 40775759, "answer_count": 3, "score": 10, "last_activity_date": 1528235498, "creation_date": 1479942774, "question_id": 40775674, "link": "https://stackoverflow.com/questions/40775674/credit-card-input-validation-using-regular-expression-in-javascript", "title": "credit card input validation using regular expression in javascript", "body": "<p>I've been trying to get this done but no success. I am using regular expression to validate the credit card number entered by user based on the type of credit card selected through the radio button. \n    But I keed having the alert for the all <em>if</em> statement. It looks like all the <em>if else</em> statements are tested. </p>\n\n<pre><code>There is the HTML code fragment: \n\n&lt;code&gt;\n&lt;p&gt;&lt;b&gt;Payment Information:&lt;/b&gt;&lt;/p&gt;\n         &lt;fieldset&gt;\n            &lt;input type=\"radio\" name=\"payment\" value=\"Visa\" id=\"visa\" /&gt;Visa &amp;nbsp;\n            &lt;input type=\"radio\" name=\"payment\" value=\"Master Card\" /&gt;Master Card &amp;nbsp;\n            &lt;input type=\"radio\" name=\"payment\" value=\"American Express\" /&gt;American Express &amp;nbsp;\n            &lt;input type=\"radio\" name=\"payment\" value=\"Discover\" /&gt;Discover &lt;br /&gt;&lt;br /&gt;\n            &lt;label&gt;Card Number:&lt;/label&gt;\n            &lt;input type=\"text\" name=\"cardNumber\" id=\"cardNum\" size=\"30\" value=\"\" onblur=\"ValidateCreditCardNumber()\" /&gt;\n&lt;/code&gt;\n\n\n\nAnd there is my javascript function :\n\n&lt;code&gt;\n\nfunction ValidateCreditCardNumber(){\n\n    var ccNum = document.getElementById(\"cardNum\").value;\n\n\n\n    var visaRegEx = /^(?:4[0-9]{12}(?:[0-9]{3})?)$/;\n    var mastercardRegEx = /^(?:5[1-5][0-9]{14})$/;\n    var amexpRegEx = /^(?:3[47][0-9]{13})$/;\n    var discovRegEx = /^(?:6(?:011|5[0-9][0-9])[0-9]{12})$/; \n\n\n    if (visaRegEx.test(ccNum) === false ){ // Visa validation\n       alert(\"Please provide a valid Visa number!\");   \n        }  \n      else  \n        {  \n         alert(\"Thank You!\");  \n        }  \n\n    if (mastercardRegEx.test(ccNum) === false){ // MasterCard validation\n        alert(\"Please provide a valid MasterCard number!\");  \n        }  \n      else  \n        {  \n        alert(\"Thank You!\");  \n        } \n\n    if(amexpRegEx.test(ccNum) === false){ // Amex  validation\n        alert(\"Not a valid America Express number!\");  \n        }  \n      else  \n        {   \n        alert(\"Thank You!\");  \n        } \n\n    if (discovRegEx.test(ccNum) === false){ // Discover validation\n        alert(\"Please provide a valid Discover number!\"); \n        }  \n      else  \n        {  \n        alert(\"Thank You!\");  \n        } \n\n\n    }\n&lt;/code&gt;\n\n\nAny kind of help or advice would be really appreciated.\n</code></pre>\n"}, {"tags": ["javascript", "binary"], "comments": [{"owner": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "edited": false, "score": 0, "creation_date": 1479944255, "post_id": 40775670, "comment_id": 68775508, "body": "read <a href=\"https://en.wikipedia.org/wiki/Half-precision_floating-point_format\" rel=\"nofollow noreferrer\">this</a> - see if you can figure it out"}, {"owner": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "edited": false, "score": 0, "creation_date": 1479944942, "post_id": 40775670, "comment_id": 68775710, "body": "by the way, javascript has no &quot;float16&quot;, so you&#39;ll never convert it to an actual float16 - you can convert it to a <code>Number</code>, or event a float32 or float64 (Number) - if what you want to do is read &quot;float16&quot;, manipulate the value and store/write/send &quot;float16&quot; - you&#39;ll need to first convert the binary data that you have in the uint16 to a Number, manipulate it, then convert that back to a uint16"}], "answers": [{"comments": [{"owner": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "edited": false, "score": 0, "creation_date": 1479944403, "post_id": 40775900, "comment_id": 68775544, "body": "If you read &quot;float16&quot; as a uint16 you wont get float64 by magic. 1 in float 16 is binary <code>0 01111 0000000000</code> - which would be read as <code>15,360</code> when reading as a uint16"}, {"owner": {"reputation": 36, "user_id": 7202535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OopyY.jpg?s=128&g=1", "display_name": "David Braden", "link": "https://stackoverflow.com/users/7202535/david-braden"}, "reply_to_user": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "edited": false, "score": 0, "creation_date": 1479944696, "post_id": 40775900, "comment_id": 68775634, "body": "I just meant, once it&#39;s read into a variable, the backing store becomes float64, there&#39;s no need to convert it to make it signed."}, {"owner": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "edited": false, "score": 0, "creation_date": 1479944973, "post_id": 40775900, "comment_id": 68775721, "body": "Yes, the problem is, converting it"}], "tags": [], "owner": {"reputation": 36, "user_id": 7202535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OopyY.jpg?s=128&g=1", "display_name": "David Braden", "link": "https://stackoverflow.com/users/7202535/david-braden"}, "is_accepted": true, "score": 1, "last_activity_date": 1479944209, "creation_date": 1479944209, "answer_id": 40775900, "question_id": 40775670, "link": "https://stackoverflow.com/questions/40775670/how-to-convert-the-uint16-value-to-half-precision-float-i-e-float16/40775900#40775900", "title": "How to convert the &quot;uint16&quot; value to half-precision float (i.e. &quot;float16&quot;)?", "body": "<p>All number variables in Javascript are treated as 64 bit floats (doubles).</p>\n\n<p>Once you have read it from a DataView into a variable, it will be in that form.</p>\n\n<p>The <code>set*</code> methods on the DataView object allow you to set bytes in an ArrayBuffer using various packed forms:</p>\n\n<pre><code>dv.setUint16(0, 12);\ndv.getUint16(0); // &gt;&gt;&gt; 12\n</code></pre>\n\n<p>But you have to be careful about clamping it yourself:</p>\n\n<pre><code>dv.setUint16(0, -12);\ndv.getUint16(0); // &gt;&gt;&gt; 65524\n</code></pre>\n\n<p>For signed int16:</p>\n\n<pre><code>dv.setInt16(0, -12);\ndv.getInt16(0); // &gt;&gt;&gt; -12\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7202630, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MlqiKUwrTsM/AAAAAAAAAAI/AAAAAAAAAC0/SbjfPRudpdA/photo.jpg?sz=128", "display_name": "Stuart Zhang", "link": "https://stackoverflow.com/users/7202630/stuart-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1087, "favorite_count": 0, "closed_date": 1480301228, "accepted_answer_id": 40775900, "answer_count": 1, "score": 0, "last_activity_date": 1480127072, "creation_date": 1479942756, "last_edit_date": 1480127072, "question_id": 40775670, "link": "https://stackoverflow.com/questions/40775670/how-to-convert-the-uint16-value-to-half-precision-float-i-e-float16", "closed_reason": "Duplicate", "title": "How to convert the &quot;uint16&quot; value to half-precision float (i.e. &quot;float16&quot;)?", "body": "<p>I have to unpack a binary file where some values are half-precision floats (i.e. <code>float16</code>). </p>\n\n<p>I read it from the binary stream by using the specification API <code>dataView.getUint16(0)</code>.</p>\n\n<p>How can I convert a number in <code>uint16</code> format<code>back to</code>float16` format using JavaScript?</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby-on-rails-4", "rubygems"], "comments": [{"owner": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 0, "creation_date": 1479943862, "post_id": 40775650, "comment_id": 68775400, "body": "typeahead is one of them <a href=\"https://github.com/running-coder/jquery-typeahead\" rel=\"nofollow noreferrer\">github.com/running-coder/jquery-typeahead</a>, not a gem, but a jQuery plugin"}, {"owner": {"reputation": 9015, "user_id": 155826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/55RCe.jpg?s=128&g=1", "display_name": "Ryan Crispin Heneise", "link": "https://stackoverflow.com/users/155826/ryan-crispin-heneise"}, "edited": false, "score": 0, "creation_date": 1479964111, "post_id": 40775650, "comment_id": 68780304, "body": "Do you want it to submit every keystroke, like a search field? In that case typeahead would be a good choice. Or do you want it to submit what you have typed when they hit Enter or blur the text field? You could do that with a couple of lines of javascript, or possibly using browser storage."}], "answers": [{"tags": [], "owner": {"reputation": 4343, "user_id": 202914, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qXW6e.jpg?s=128&g=1", "display_name": "phil pirozhkov", "link": "https://stackoverflow.com/users/202914/phil-pirozhkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1479951120, "creation_date": 1479951120, "answer_id": 40776772, "question_id": 40775650, "link": "https://stackoverflow.com/questions/40775650/rails-4-update-form-without-submit-gem/40776772#40776772", "title": "Rails 4 - update form without submit (gem)", "body": "<p>It's part of Rails now, and it's called ActionCable. But you will have to write code anyway, because there are so many ways you can use it.</p>\n"}], "owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1479951120, "creation_date": 1479942636, "question_id": 40775650, "link": "https://stackoverflow.com/questions/40775650/rails-4-update-form-without-submit-gem", "title": "Rails 4 - update form without submit (gem)", "body": "<p>Is there a Gem available with Rails that I can use to have real-time changes posted when users type in a field, so they do not have to hit submit?</p>\n\n<p>I assume JS will be needed and the use of an on-change event, but looking for a gem that makes my life easy so I don't need to reinvent the wheel.</p>\n"}, {"tags": ["javascript", "pentaho", "geokettle"], "answers": [{"tags": [], "owner": {"reputation": 1061, "user_id": 7259385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5c94f298bc8b785b6c05b9b04e40297?s=128&d=identicon&r=PG&f=1", "display_name": "marabu", "link": "https://stackoverflow.com/users/7259385/marabu"}, "is_accepted": false, "score": 0, "last_activity_date": 1485084861, "creation_date": 1485084861, "answer_id": 41790369, "question_id": 40775551, "link": "https://stackoverflow.com/questions/40775551/rename-field-name-in-geokettle/41790369#41790369", "title": "Rename field name in geokettle", "body": "<p>The Rename-To option for output fields is not working as expected.  Existing fields can not be renamed as of Kettle version 6.1.  Renaming works for new fields, but that's hardly a feature we need. Use the Rename-To field option provided by Select-Values, which is the preferred and documented way to do this.  </p>\n"}], "owner": {"reputation": 5241, "user_id": 2152275, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/38ea9a6be34eb95225dd1572d84c7409?s=128&d=identicon&r=PG", "display_name": "Eyla", "link": "https://stackoverflow.com/users/2152275/eyla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485084861, "creation_date": 1479942017, "question_id": 40775551, "link": "https://stackoverflow.com/questions/40775551/rename-field-name-in-geokettle", "title": "Rename field name in geokettle", "body": "<p>Greeting,\nI want to rename a field using \"Modified Java Script Value\" script.</p>\n\n<p>For example I have Input field \"field1\" and I want to rename it using JavaScript to \"NewField\".</p>\n\n<p>Thank you,</p>\n"}, {"tags": ["javascript", "d3.js", "svg"], "comments": [{"owner": {"reputation": 13084, "user_id": 1469259, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/24cae1d8d8bd5ad480fc1891a4e9d76e?s=128&d=identicon&r=PG", "display_name": "CupawnTae", "link": "https://stackoverflow.com/users/1469259/cupawntae"}, "edited": false, "score": 0, "creation_date": 1479942570, "post_id": 40775486, "comment_id": 68774988, "body": "you should include the relevant code in the question, preferably with an MCVE. I added the <code>svg</code> tag since it&#39;ll probably be relevant to the solution"}], "answers": [{"comments": [{"owner": {"reputation": 3082, "user_id": 3263488, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b16b1330b7d55b0f837d343896bc2952?s=128&d=identicon&r=PG&f=1", "display_name": "konrad", "link": "https://stackoverflow.com/users/3263488/konrad"}, "edited": false, "score": 0, "creation_date": 1480220606, "post_id": 40776401, "comment_id": 68869854, "body": "You are a magician! Thank you for the correct answer and a through explanation."}, {"owner": {"reputation": 3082, "user_id": 3263488, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b16b1330b7d55b0f837d343896bc2952?s=128&d=identicon&r=PG&f=1", "display_name": "konrad", "link": "https://stackoverflow.com/users/3263488/konrad"}, "edited": false, "score": 0, "creation_date": 1480267363, "post_id": 40776401, "comment_id": 68881068, "body": "thanks for the help. I ended up doing this: <a href=\"http://jsbin.com/babaroweza/edit?js,output\" rel=\"nofollow noreferrer\">jsbin.com/babaroweza/edit?js,output</a> since I also didn&#39;t like to use the &quot;magical numbers&quot;, but your answer was enough to get me on track to solving it so thanks a lot."}], "tags": [], "owner": {"reputation": 90540, "user_id": 5768908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wf0PS.jpg?s=128&g=1", "display_name": "Gerardo Furtado", "link": "https://stackoverflow.com/users/5768908/gerardo-furtado"}, "is_accepted": true, "score": 1, "last_activity_date": 1479959043, "last_edit_date": 1479959043, "creation_date": 1479947828, "answer_id": 40776401, "question_id": 40775486, "link": "https://stackoverflow.com/questions/40775486/text-wrapping-in-d3-js-not-centered-on-chart-bar/40776401#40776401", "title": "text wrapping in d3.js not centered on chart bar", "body": "<p>Using a ternary operator, change the <code>y</code> position of your labels according to the length of the text:</p>\n\n<pre><code>.attr(\"y\", function(d){\n    return d.month.length &gt; 50 ? y(d.month) + 8 : y(d.month) + (y.rangeBand() / 2);\n})\n</code></pre>\n\n<p>I don't like to use magic numbers, this is <strong>just an example</strong> for you to see how to create your actual function, in which you can change the magic numbers I'm using here for computed positions.</p>\n\n<p>The logic of this ternary operator is quite simple. First, we get the length of the text:</p>\n\n<pre><code>d.month.length &gt; 50\n</code></pre>\n\n<p>You can change <code>50</code> for any computed value, according to your left margin and the font size. If the text is bigger than that, you set the <code>y</code> position:</p>\n\n<pre><code>y(d.month) + 8\n</code></pre>\n\n<p>Again, <code>8</code> is just a magic number here, you have to create a function to calculate the adequate number according to the width of the bars, size of the texts etc...</p>\n\n<p>Also, if you have different numbers of lines, you can concatenate several ternary operators:</p>\n\n<pre><code>condition1 ? actionA : condition2 ? actionB : condition3? actionC : actionD;\n</code></pre>\n\n<p>If <code>condition1</code> is true, <code>actionA</code> is done. If it's false, <code>condition2</code> is evaluated. If it's true, <code>actionB</code> is done, if it's false, <code>condition3</code> is evaluated, and so on...</p>\n\n<p>Check the demo:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"true\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var temperatures = [\r\n  {temp: 32, month: 'January is really a long month.', color: 0},\r\n  {temp: 38, month: 'February is really a cold month.', color: 1},\r\n  {temp: 47, month: 'March, i dont know what to think', color: 1},\r\n  {temp: 59, month: 'April. What if I wanted to test a really long string here that will span.', color: 2},\r\n  {temp: 70, month: 'May', color: 2},\r\n  {temp: 80, month: 'June', color: 2},\r\n  {temp: 90, month: 'July', color: 2},\r\n  {temp: 83, month: 'Auguest', color: 0},\r\n  {temp: 76, month: 'September', color: 3},\r\n  {temp: 64, month: 'October', color: 4},\r\n  {temp: 49, month: 'November', color: 4},\r\n  {temp: 37, month: 'December', color: 4}\r\n];\r\n\r\nvar margin = {top: 5, right: 60, bottom: 50, left: 150},\r\n    width = 700 - margin.left - margin.right,\r\n    height = 600 - margin.top - margin.bottom;\r\n\r\nvar y = d3.scale.ordinal()\r\n    .domain(temperatures.map(function (d) { return d.month; }))\r\n    .rangeBands([0, height], 0.1, 0.35);\r\n\r\nvar x = d3.scale.linear()\r\n    .domain([0, d3.max(temperatures, function(d){return d.temp;})])\r\n    .range([0, width]);\r\n\r\nvar color = d3.scale.category20c();\r\n\r\nvar xAxis = d3.svg.axis()\r\n    .scale(x)\r\n    .orient(\"bottom\")\r\n    .innerTickSize(-(height-5))\r\n\r\nvar barChart = d3.select(\"body\").append(\"svg\")\r\n    .attr(\"width\", width + margin.left + margin.right)\r\n    .attr(\"height\", height + margin.top + margin.bottom)\r\n    .append(\"g\")\r\n    .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n\r\nbarChart.selectAll(\"#bar\")\r\n    .data(temperatures)\r\n    .enter().append(\"rect\")\r\n    .attr(\"id\", \"bar\")\r\n    .attr(\"x\", 0)\r\n    .attr(\"width\", function(d){return x(d.temp);})\r\n    .attr(\"y\", function (d) { return y(d.month); })\r\n    .attr(\"fill\", function(d){ return color(d.color); })\r\n    .attr(\"height\", y.rangeBand())\r\n    .on(\"mouseover\", function(){\r\n        d3.select(this).attr(\"fill\", \"red\");\r\n    })\r\n    .on(\"mouseout\", function(){\r\n        d3.select(this).attr(\"fill\", function(d) { return color(d.color); });             \r\n    });\r\n\r\nbarChart.append(\"g\")\r\n    .attr(\"class\", \"x axisHorizontal\")\r\n    .attr(\"transform\", \"translate(0,\" + height + \")\")\r\n    .call(xAxis)\r\n    .append(\"text\")\r\n    .style(\"text-anchor\", \"end\")\r\n    .attr(\"x\", width - 3)\r\n    .attr(\"y\", -5)\r\n    .text(\"Label\")\r\n\r\nbarChart.append(\"g\")\r\n    .selectAll(\"axisLabels\")\r\n    .data(temperatures)\r\n    .enter()\r\n    .append(\"text\")\r\n    .attr(\"x\", 0)\r\n    .attr(\"y\", function(d){return d.month.length &gt; 50 ? y(d.month) + 8 : y(d.month) + (y.rangeBand() / 2);})\r\n    .attr(\"text-anchor\", \"end\")\r\n    .attr(\"dy\", \".35em\")\r\n    .attr(\"dx\", -5)\r\n    .text(function(d){return d.month;})\r\n    .call(wrap, margin.left);\r\n\r\nbarChart.append(\"g\")\r\n    .selectAll(\"valueLabels\")\r\n    .data(temperatures)\r\n    .enter()\r\n    .append(\"text\")\r\n    .attr(\"x\", function(d){return x(d.temp);})\r\n    .attr(\"y\", function(d){return y(d.month) + (y.rangeBand() / 2);})\r\n    .attr(\"dx\", 5)\r\n    .attr(\"dy\", \".35em\")\r\n    .text(function(d){return d.temp;})\r\n\r\nfunction wrap(text, width) {\r\n  text.each(function() {\r\n    var text = d3.select(this),\r\n        words = text.text().split(/\\s+/).reverse(),\r\n        word,\r\n        line = [],\r\n        lineNumber = 0,\r\n        lineHeight = 1.1, // ems\r\n        y = text.attr(\"y\"),\r\n        dy = parseFloat(text.attr(\"dy\")),\r\n        tspan = text.text(null).append(\"tspan\").attr(\"x\", 0).attr(\"y\", y).attr(\"dx\", -5).attr(\"dy\", dy + \"em\");\r\n    while (word = words.pop()) {\r\n      line.push(word);\r\n      tspan.text(line.join(\" \"));\r\n      if (tspan.node().getComputedTextLength() &gt; width) {\r\n        line.pop();\r\n        tspan.text(line.join(\" \"));\r\n        line = [word];\r\n        tspan = text.append(\"tspan\").attr(\"x\", 0).attr(\"y\", y).attr(\"dx\", -5).attr(\"dy\", ++lineNumber * lineHeight + dy + \"em\").text(word);\r\n      }\r\n    }\r\n  });\r\n}</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>body { \r\n    font: 10px Arial;\r\n}\r\n.axis path {\r\n    fill: none;\r\n    stroke: grey;\r\n    shape-rendering: crispEdges;\r\n}\r\n.axis text {\r\n    font-family: Arial;\r\n    font-size: 10px;\r\n}\r\n.axis line {\r\n    fill: none;\r\n    stroke: grey;\r\n    stroke-width: 1;\r\n    shape-rendering: crispEdges;\r\n}\r\nsvg{\r\n    display: block;\r\n    margin: auto;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.min.js\"&gt;&lt;/script&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 3082, "user_id": 3263488, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b16b1330b7d55b0f837d343896bc2952?s=128&d=identicon&r=PG&f=1", "display_name": "konrad", "link": "https://stackoverflow.com/users/3263488/konrad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 40776401, "answer_count": 1, "score": 0, "last_activity_date": 1479959043, "creation_date": 1479941621, "last_edit_date": 1479942507, "question_id": 40775486, "link": "https://stackoverflow.com/questions/40775486/text-wrapping-in-d3-js-not-centered-on-chart-bar", "title": "text wrapping in d3.js not centered on chart bar", "body": "<p>Can someone please help me here with centering the wrapped text value on the bar. Right now the first line is centered but all new appended lines are below it. Is there a way to re-center it after they were wrapped? </p>\n\n<p><a href=\"http://jsbin.com/qajejahiqi/edit?js,output\" rel=\"nofollow noreferrer\">http://jsbin.com/qajejahiqi/edit?js,output</a></p>\n\n<p>Thanks! </p>\n"}, {"tags": ["javascript", "ecmascript-6", "local-variables", "language-features", "let"], "comments": [{"owner": {"reputation": 69847, "user_id": 3853934, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GtQuz.jpg?s=128&g=1", "display_name": "Micha\u0142 Per\u0142akowski", "link": "https://stackoverflow.com/users/3853934/micha%c5%82-per%c5%82akowski"}, "reply_to_user": {"reputation": 15486, "user_id": 719547, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/51e61f099c7b1ac0588ecda69193f75c?s=128&d=identicon&r=PG", "display_name": "Jim Stewart", "link": "https://stackoverflow.com/users/719547/jim-stewart"}, "edited": false, "score": 0, "creation_date": 1479944878, "post_id": 40775469, "comment_id": 68775697, "body": "@JimStewart In what way is that Q&amp;A better than mine? Questions should be closed as duplicate of questions which have better answers, and IMO my answer is much better. See <a href=\"http://meta.stackoverflow.com/q/251938/3853934\">Should I flag a question as duplicate if it has received better answers?</a>"}, {"owner": {"reputation": 69847, "user_id": 3853934, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GtQuz.jpg?s=128&g=1", "display_name": "Micha\u0142 Per\u0142akowski", "link": "https://stackoverflow.com/users/3853934/micha%c5%82-per%c5%82akowski"}, "reply_to_user": {"reputation": 15486, "user_id": 719547, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/51e61f099c7b1ac0588ecda69193f75c?s=128&d=identicon&r=PG", "display_name": "Jim Stewart", "link": "https://stackoverflow.com/users/719547/jim-stewart"}, "edited": false, "score": 1, "creation_date": 1480637135, "post_id": 40775469, "comment_id": 69057285, "body": "<b>Note</b>: this is an attempt to create a better canonical questions explaining the differences between &quot;var&quot;, &quot;let&quot; and &quot;const&quot;. Please don&#39;t close it as a duplicate of <a href=\"http://stackoverflow.com/q/762011/3853934\">What&#39;s the difference between using &quot;let&quot; and &quot;var&quot; to declare a variable?</a> before reading the Meta questions: <a href=\"http://meta.stackoverflow.com/q/338376/3853934\">User refusing to correct misinformation in their popular answer</a> and <a href=\"http://meta.stackoverflow.com/q/338663/3853934\">Canonical question explaining differences between \u201cvar\u201d, \u201clet\u201d and \u201cconst\u201d in JavaScript</a>."}], "owner": {"reputation": 69847, "user_id": 3853934, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GtQuz.jpg?s=128&g=1", "display_name": "Micha\u0142 Per\u0142akowski", "link": "https://stackoverflow.com/users/3853934/micha%c5%82-per%c5%82akowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 457, "favorite_count": 0, "closed_date": 1480641634, "answer_count": 0, "score": 2, "locked_date": 1480641641, "last_activity_date": 1480636701, "creation_date": 1479941558, "question_id": 40775469, "link": "https://stackoverflow.com/questions/40775469/difference-between-var-let-and-const", "closed_reason": "Duplicate", "title": "Difference between &quot;var&quot;, &quot;let&quot; and &quot;const&quot;", "body": "<p>ECMAScript&nbsp;6 introduced two new ways of declaring variables: <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let\" rel=\"nofollow noreferrer\">the <code>let</code> statement</a> and <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const\" rel=\"nofollow noreferrer\">the <code>const</code> statement</a>. How are they different from the <code>var</code> keyword?</p>\n"}, {"tags": ["javascript", "node.js", "mongodb", "recursion", "stormpath"], "comments": [{"owner": {"reputation": 2245, "user_id": 5460296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/0kOFc.png?s=128&g=1", "display_name": "jmona789", "link": "https://stackoverflow.com/users/5460296/jmona789"}, "edited": false, "score": 1, "creation_date": 1479954795, "post_id": 40775425, "comment_id": 68777972, "body": "Can&#39;t you just add an else for the <code>if (result &amp;&amp; result.user == x){</code> that inserts the new record?"}, {"owner": {"reputation": 528, "user_id": 225796, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qqgax.png?s=128&g=1", "display_name": "Waheed", "link": "https://stackoverflow.com/users/225796/waheed"}, "edited": false, "score": 1, "creation_date": 1479969498, "post_id": 40775425, "comment_id": 68782268, "body": "I&#39;m not sure what&#39;s the purpose of recursion here? Second I think your create record method should be used in the postLogin handler under the first else statement below document found condition, so if you are in that condition, you can do change the name and have the new user name you want to create then below that have the db.collection.create method with the new username then return the new document. not sure if that would be an answer so i thought its better to comment"}, {"owner": {"reputation": 483, "user_id": 4392952, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e1afad90b4b32f9bd2faf462303d1307?s=128&d=identicon&r=PG", "display_name": "Jake 1986", "link": "https://stackoverflow.com/users/4392952/jake-1986"}, "reply_to_user": {"reputation": 2245, "user_id": 5460296, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/0kOFc.png?s=128&g=1", "display_name": "jmona789", "link": "https://stackoverflow.com/users/5460296/jmona789"}, "edited": false, "score": 0, "creation_date": 1479970025, "post_id": 40775425, "comment_id": 68782492, "body": "@jmona789 that worked - I also had defined my changeName() function outside the scope and it was causing some issues, but I moved the definition into the scope of the call and it was good to go. Thanks!"}, {"owner": {"reputation": 483, "user_id": 4392952, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e1afad90b4b32f9bd2faf462303d1307?s=128&d=identicon&r=PG", "display_name": "Jake 1986", "link": "https://stackoverflow.com/users/4392952/jake-1986"}, "reply_to_user": {"reputation": 528, "user_id": 225796, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qqgax.png?s=128&g=1", "display_name": "Waheed", "link": "https://stackoverflow.com/users/225796/waheed"}, "edited": false, "score": 0, "creation_date": 1479970399, "post_id": 40775425, "comment_id": 68782662, "body": "@Waheedi I have it working now, but thank you for your response. I am using recursion here because I need the function to alter the username and check the altered username against the DB until it is unique."}, {"owner": {"reputation": 528, "user_id": 225796, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qqgax.png?s=128&g=1", "display_name": "Waheed", "link": "https://stackoverflow.com/users/225796/waheed"}, "edited": false, "score": 0, "creation_date": 1479974107, "post_id": 40775425, "comment_id": 68784609, "body": "That makes sense then :) you are welcome Jake."}], "owner": {"reputation": 483, "user_id": 4392952, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e1afad90b4b32f9bd2faf462303d1307?s=128&d=identicon&r=PG", "display_name": "Jake 1986", "link": "https://stackoverflow.com/users/4392952/jake-1986"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479941295, "creation_date": 1479941295, "question_id": 40775425, "link": "https://stackoverflow.com/questions/40775425/how-to-recurse-until-unique-mongodb-field-value-is-created-and-then-insert-new", "title": "How to recurse until unique MongoDB field value is created, and then insert new document with new value", "body": "<p>I am trying to use a recursive function (below) to check if \"bob\" already is a user in my MongoDB, and if it is, to alter it slightly until it is unique, and then insert the document into my DB.</p>\n\n<pre><code>function changeName(x){\n    MongoClient.connect(URI, function(err, db){\n        db.collection('users').findOne({\"user\": x}, function(err, result){\n            if (err) throw err;\n            if (result &amp;&amp; result.user == x){\n                console.log(\"match found: \" + result.user + \" =  \" + x + \n                \"\\n ...changing name...\");\n                //change name:\n                x += Math.floor(Math.random()*9);\n                changeName(x);\n            }\n            console.log(\"x = \" + x);\n            console.log(\"no match!\");\n            return x;\n        });\n    });\n}\n</code></pre>\n\n<p>The above function does change the name if a match is found, i.e. <code>changeName(\"bob\");</code> might change it to \"bob7\", but I need to run a callback function that takes the new name and then creates a new document with the new name as the username value.</p>\n\n<p>Is there a way I can have the callback function but not in the recursion?</p>\n\n<p><strong>Background information:</strong></p>\n\n<p>I am using Stormpath for my site's user authentication and I have social logins set up for Google and Facebook. It works great, but I want to modify it slightly. With social login, the username for the account automatically becomes the email address associated with the account the user used to sign in.</p>\n\n<p>In my app the username is public facing, so I don't want to show people's email addresses, but I like the immediate log-in that users experience with Stormpath social login.</p>\n\n<p>So, in my Stormpath <code>postLogin</code> handler I am scrubbing out the @ symbol and anything that comes after it.</p>\n\n<p>The problem, as you might have guessed, is that someone might try to register and they have \"bob@gmail.com\" as their Google account, but someone might have already registered on my site using the username \"bob\".</p>\n\n<p>To give an idea of what I'm doing in the <code>postLogin</code> handler, this is pseudo-code:</p>\n\n<pre><code>if(document found with that name){\n    if(document found with that name and that email){\n        //this is an existing user account, loggin in..\n    }else{\n        //name already taken, changing name...\n    }\n\n}else{\n    //no document found with that user name, creating a new user account...\n}\n</code></pre>\n"}, {"tags": ["javascript", "concurrency"], "comments": [{"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 1, "creation_date": 1479941447, "post_id": 40775414, "comment_id": 68774626, "body": "It&#39;s not real code and would not work in javascript."}], "answers": [{"comments": [{"owner": {"reputation": 369690, "user_id": 182668, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b19917aa04a6839aef577f1117c71d48?s=128&d=identicon&r=PG", "display_name": "Pointy", "link": "https://stackoverflow.com/users/182668/pointy"}, "reply_to_user": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1479941558, "post_id": 40775456, "comment_id": 68774657, "body": "@zerkms yes; I understand where the MDN article author got that terminology, but it&#39;s unfortunate. I&#39;ll edit."}], "tags": [], "owner": {"reputation": 369690, "user_id": 182668, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b19917aa04a6839aef577f1117c71d48?s=128&d=identicon&r=PG", "display_name": "Pointy", "link": "https://stackoverflow.com/users/182668/pointy"}, "is_accepted": true, "score": 1, "last_activity_date": 1479941533, "last_edit_date": 1479941533, "creation_date": 1479941459, "answer_id": 40775456, "question_id": 40775414, "link": "https://stackoverflow.com/questions/40775414/how-does-javascript-get-notified-when-its-message-queue-becomes-empty-non-emp/40775456#40775456", "title": "How does JavaScript get notified when its message queue becomes empty -&gt; non-empty?", "body": "<p>The article you reference presents that block of code as an illustration only. That's what the structure referred to as the \"JavaScript event loop\" <em>conceptually</em> looks like, but in reality the details are generally much more complicated and dependent upon the runtime environment of the JavaScript implementation code. I'm no JavaScript runtime internals expert, but I'd be willing to bet that the code structure in any real implementation doesn't look much like that at all.</p>\n\n<p>In a web browser, the browser's internal \"framework\" code might provide a point of registration vaguely similar to JavaScript event handler registration. For something like Node.js, the runtime is dealing with the operating system I/O primitives (etc).</p>\n"}], "owner": {"reputation": 127, "user_id": 4877010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd994d2c134cf4e167adaefd68c387c4?s=128&d=identicon&r=PG&f=1", "display_name": "Iblisto", "link": "https://stackoverflow.com/users/4877010/iblisto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 40775456, "answer_count": 1, "score": 1, "last_activity_date": 1479941533, "creation_date": 1479941238, "question_id": 40775414, "link": "https://stackoverflow.com/questions/40775414/how-does-javascript-get-notified-when-its-message-queue-becomes-empty-non-emp", "title": "How does JavaScript get notified when its message queue becomes empty -&gt; non-empty?", "body": "<p><a href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/EventLoop\" rel=\"nofollow noreferrer\">This article</a> explains that JavaScript event loop looks like</p>\n\n<pre><code>while(queue.waitForMessage()){\n  queue.processNextMessage();\n}\n</code></pre>\n\n<p>What I'm wondering is how the waitForMessage() function works. From my understanding JavaScript is non-blocking so it doesn't work like it blocks and another thread wakes it up? So how does JavaScript know when to \"un-wait\" from the empty state?</p>\n"}, {"tags": ["javascript", "php", "json", "ajax"], "comments": [{"owner": {"reputation": 4336, "user_id": 5452965, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/PVSOP.jpg?s=128&g=1", "display_name": "codtex", "link": "https://stackoverflow.com/users/5452965/codtex"}, "edited": false, "score": 0, "creation_date": 1479942325, "post_id": 40775397, "comment_id": 68774910, "body": "The way you are trying to send the data, you will always see a key value result, I suggest you change your approach to something like <code>var dict = {&quot;id&quot;:&quot;patient&quot;,&quot;where&quot;:&quot;name[~]:J&quot;}};</code> and then on server side <code>explode(&#39;:&#39;, $_POST[&quot;data&quot;][&quot;where&quot;]);</code>"}, {"owner": {"reputation": 45, "user_id": 5499143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3877bb40ec78f97e9459f4c15648ce7b?s=128&d=identicon&r=PG&f=1", "display_name": "Honzys", "link": "https://stackoverflow.com/users/5499143/honzys"}, "reply_to_user": {"reputation": 4336, "user_id": 5452965, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/PVSOP.jpg?s=128&g=1", "display_name": "codtex", "link": "https://stackoverflow.com/users/5452965/codtex"}, "edited": false, "score": 0, "creation_date": 1479942692, "post_id": 40775397, "comment_id": 68775024, "body": "@sand Thanks for the response. That&#39;s a good idea, but what if I want to send a &quot;:&quot; character as a value? Or more of them? The delimiter : won&#39;t work if there&#39;s &quot;:&quot; as a value. example <code>{&quot;where&quot;:&quot;name[~]:Jmkl:&quot;}</code> - This will cuase an error with this approach. I am thinking about the most general way to do this."}, {"owner": {"reputation": 790, "user_id": 3994502, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/1mPEB.jpg?s=128&g=1", "display_name": "Cunning", "link": "https://stackoverflow.com/users/3994502/cunning"}, "reply_to_user": {"reputation": 4336, "user_id": 5452965, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/PVSOP.jpg?s=128&g=1", "display_name": "codtex", "link": "https://stackoverflow.com/users/5452965/codtex"}, "edited": false, "score": 0, "creation_date": 1479942763, "post_id": 40775397, "comment_id": 68775055, "body": "@sand This does not help finding the reason, just erases the question. The OP is onto something. I have tested this code with different variations and the OP is right."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 5499143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3877bb40ec78f97e9459f4c15648ce7b?s=128&d=identicon&r=PG&f=1", "display_name": "Honzys", "link": "https://stackoverflow.com/users/5499143/honzys"}, "edited": false, "score": 0, "creation_date": 1479945005, "post_id": 40775756, "comment_id": 68775732, "body": "Thanks for answer. But still, I can&#39;t make it work, I&#39;ve allready tried this before posting the problem.  The output of json_decode is null string/&quot;&quot;. But $_POST[&quot;data&quot;] exists. I don&#39;t know what I&#39;ve done wrong."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 45, "user_id": 5499143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3877bb40ec78f97e9459f4c15648ce7b?s=128&d=identicon&r=PG&f=1", "display_name": "Honzys", "link": "https://stackoverflow.com/users/5499143/honzys"}, "edited": false, "score": 0, "creation_date": 1479945560, "post_id": 40775756, "comment_id": 68775850, "body": "I just tried it and it works. See <a href=\"http://dev.bridgebase.com/barmar_test/test1.html\" rel=\"nofollow noreferrer\">dev.bridgebase.com/barmar_test/test1.html</a>"}, {"owner": {"reputation": 45, "user_id": 5499143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3877bb40ec78f97e9459f4c15648ce7b?s=128&d=identicon&r=PG&f=1", "display_name": "Honzys", "link": "https://stackoverflow.com/users/5499143/honzys"}, "edited": false, "score": 0, "creation_date": 1479945870, "post_id": 40775756, "comment_id": 68775918, "body": "Okay, I see, then there have to be problem elsewhere. Because when I run your code I get NULL from var_dump(). Maybe different version of php? Because input for the json_decode is correct, but the function returns NULL. I am using php version 5.6.25."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 45, "user_id": 5499143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3877bb40ec78f97e9459f4c15648ce7b?s=128&d=identicon&r=PG&f=1", "display_name": "Honzys", "link": "https://stackoverflow.com/users/5499143/honzys"}, "edited": false, "score": 0, "creation_date": 1479946074, "post_id": 40775756, "comment_id": 68775981, "body": "Are there any Unicode characters in your data? Maybe that causes additional problems. I simply copied and pasted your <code>var dict</code> line."}, {"owner": {"reputation": 45, "user_id": 5499143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3877bb40ec78f97e9459f4c15648ce7b?s=128&d=identicon&r=PG&f=1", "display_name": "Honzys", "link": "https://stackoverflow.com/users/5499143/honzys"}, "edited": false, "score": 0, "creation_date": 1479946748, "post_id": 40775756, "comment_id": 68776126, "body": "Nope, i am using the same dict as you.  it returns <code>4</code> according to manual it is <code>JSON_ERROR_SYNTAX</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 45, "user_id": 5499143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3877bb40ec78f97e9459f4c15648ce7b?s=128&d=identicon&r=PG&f=1", "display_name": "Honzys", "link": "https://stackoverflow.com/users/5499143/honzys"}, "edited": false, "score": 0, "creation_date": 1479946887, "post_id": 40775756, "comment_id": 68776173, "body": "The only difference is that I&#39;m using PHP 5.4 instead of 5.6, but I can&#39;t imagine why that would break it."}, {"owner": {"reputation": 45, "user_id": 5499143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3877bb40ec78f97e9459f4c15648ce7b?s=128&d=identicon&r=PG&f=1", "display_name": "Honzys", "link": "https://stackoverflow.com/users/5499143/honzys"}, "edited": false, "score": 0, "creation_date": 1479947382, "post_id": 40775756, "comment_id": 68776280, "body": "I&#39;ve found the problem Thank&#39;s for the direction with json_last_error().  The problem is solved with stripslashes(); I&#39;ve marked your solution as &quot;accepted&quot;. Can you please edit the first line to <code>$data = json_decode(stripslashes($_POST[&#39;data&#39;], true));</code> ? For other people struggling with the same problem ?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 45, "user_id": 5499143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3877bb40ec78f97e9459f4c15648ce7b?s=128&d=identicon&r=PG&f=1", "display_name": "Honzys", "link": "https://stackoverflow.com/users/5499143/honzys"}, "edited": false, "score": 0, "creation_date": 1479947505, "post_id": 40775756, "comment_id": 68776301, "body": "I don&#39;t know why that would be necessary, nothing adds slashes. This would have been a problem with old versions and <code>magic_quotes_gpc</code>, but that went away in 5.3 I think."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 45, "user_id": 5499143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3877bb40ec78f97e9459f4c15648ce7b?s=128&d=identicon&r=PG&f=1", "display_name": "Honzys", "link": "https://stackoverflow.com/users/5499143/honzys"}, "edited": false, "score": 0, "creation_date": 1479947535, "post_id": 40775756, "comment_id": 68776308, "body": "Maybe there&#39;s some setting in your webserver that&#39;s adding slashes?"}, {"owner": {"reputation": 45, "user_id": 5499143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3877bb40ec78f97e9459f4c15648ce7b?s=128&d=identicon&r=PG&f=1", "display_name": "Honzys", "link": "https://stackoverflow.com/users/5499143/honzys"}, "edited": false, "score": 0, "creation_date": 1479947751, "post_id": 40775756, "comment_id": 68776356, "body": "That&#39;s possible, but according to this thread <a href=\"http://stackoverflow.com/questions/17219916/json-decode-returns-json-error-syntax-but-online-formatter-says-the-json-is-ok\">link</a> I am not the only one having this problems :)."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 45, "user_id": 5499143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3877bb40ec78f97e9459f4c15648ce7b?s=128&d=identicon&r=PG&f=1", "display_name": "Honzys", "link": "https://stackoverflow.com/users/5499143/honzys"}, "edited": false, "score": 0, "creation_date": 1479947851, "post_id": 40775756, "comment_id": 68776384, "body": "That question is very old, <code>magic_quotes_gpc</code> was pretty common then."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 45, "user_id": 5499143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3877bb40ec78f97e9459f4c15648ce7b?s=128&d=identicon&r=PG&f=1", "display_name": "Honzys", "link": "https://stackoverflow.com/users/5499143/honzys"}, "edited": false, "score": 0, "creation_date": 1479947906, "post_id": 40775756, "comment_id": 68776395, "body": "I don&#39;t want to add it to my answer because it can do damage if the server isn&#39;t adding extra slashes in the first place. You really should fix whatever is doing that, not working around it in PHP."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1479946018, "last_edit_date": 1479946018, "creation_date": 1479943310, "answer_id": 40775756, "question_id": 40775397, "link": "https://stackoverflow.com/questions/40775397/using-square-right-bracket-in-php-key/40775756#40775756", "title": "Using square right bracket in php key", "body": "<p>When you provide an object to the jQuery AJAX functions, it URL-encodes it. jQuery is sending the <code>data.where</code> parameter as:</p>\n\n<pre><code>data[where][name[~]]=J\n</code></pre>\n\n<p>and PHP apparently can't deal with nested brackets like that; it just matches the <code>[</code> before <code>name</code> with the next <code>]</code>.</p>\n\n<p>Probably jQuery needs to double-encode this property name to protect it, but obviously it doesn't.</p>\n\n<p>The workaround is to encode <code>dict</code> as JSON, and decode it in PHP. JS:</p>\n\n<pre><code>$.post(\"./ajax.php\",{data: JSON.stringify(dict)},function(data){\n</code></pre>\n\n<p>PHP:</p>\n\n<pre><code>$data = json_decode($_POST['data'], true);\n$where = $data['where'];\nvar_dump($where);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1479945162, "post_id": 40775778, "comment_id": 68775765, "body": "Shouldn&#39;t it be <code>&quot;data=&quot;+encodeURIComponent(JSON.stringify(dict))</code>?"}, {"owner": {"reputation": 45, "user_id": 5499143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3877bb40ec78f97e9459f4c15648ce7b?s=128&d=identicon&r=PG&f=1", "display_name": "Honzys", "link": "https://stackoverflow.com/users/5499143/honzys"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1479945215, "post_id": 40775778, "comment_id": 68775774, "body": "Thank you, but same problem with @Barmar answer, it seems, that decode returns NULL."}], "tags": [], "owner": {"reputation": 790, "user_id": 3994502, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/1mPEB.jpg?s=128&g=1", "display_name": "Cunning", "link": "https://stackoverflow.com/users/3994502/cunning"}, "is_accepted": false, "score": 0, "last_activity_date": 1479944298, "last_edit_date": 1479944298, "creation_date": 1479943413, "answer_id": 40775778, "question_id": 40775397, "link": "https://stackoverflow.com/questions/40775397/using-square-right-bracket-in-php-key/40775778#40775778", "title": "Using square right bracket in php key", "body": "<p>I have tried <code>JSON.stringify</code> in junction with <code>json_decode</code> and the result looks fine:</p>\n\n<p><strong>JS</strong></p>\n\n<pre><code>$.ajax({\n        url: './ajax.php',\n        method: 'post',\n        data: \"data=\"+JSON.stringify(dict)\n    });\n</code></pre>\n\n<p><strong>PHP</strong></p>\n\n<pre><code>json_decode($_POST['data'], true);\n</code></pre>\n\n<p>I think you should have specified the JSON is associative, setting <code>$assoc</code> parameter to <code>true</code>. See <a href=\"http://php.net/manual/en/function.json-decode.php\" rel=\"nofollow noreferrer\">this</a>.</p>\n\n<p>You can also send data as a JSON (not string) and then read the raw post data using <a href=\"http://php.net/manual/en/wrappers.php.php#wrappers.php.input\" rel=\"nofollow noreferrer\"><code>php://input</code></a> stream and use <code>json_decode</code> with <code>$assoc</code> set to true on the retrieved data yourself; since it appears that out-of-the-box method compiled into PHP is inefficient. </p>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 5499143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3877bb40ec78f97e9459f4c15648ce7b?s=128&d=identicon&r=PG&f=1", "display_name": "Honzys", "link": "https://stackoverflow.com/users/5499143/honzys"}, "edited": false, "score": 0, "creation_date": 1479946405, "post_id": 40776123, "comment_id": 68776064, "body": "//EDIT: This works! Thanks a lot! But I am also curious why the second way doesn&#39;t work :)."}, {"owner": {"reputation": 790, "user_id": 3994502, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/1mPEB.jpg?s=128&g=1", "display_name": "Cunning", "link": "https://stackoverflow.com/users/3994502/cunning"}, "reply_to_user": {"reputation": 45, "user_id": 5499143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3877bb40ec78f97e9459f4c15648ce7b?s=128&d=identicon&r=PG&f=1", "display_name": "Honzys", "link": "https://stackoverflow.com/users/5499143/honzys"}, "edited": false, "score": 0, "creation_date": 1479947072, "post_id": 40776123, "comment_id": 68776211, "body": "Actually, the second one works for me; but then again, I use PHP v7.0.9"}], "tags": [], "owner": {"reputation": 790, "user_id": 3994502, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/1mPEB.jpg?s=128&g=1", "display_name": "Cunning", "link": "https://stackoverflow.com/users/3994502/cunning"}, "is_accepted": false, "score": 0, "last_activity_date": 1479945658, "creation_date": 1479945658, "answer_id": 40776123, "question_id": 40775397, "link": "https://stackoverflow.com/questions/40775397/using-square-right-bracket-in-php-key/40776123#40776123", "title": "Using square right bracket in php key", "body": "<p>Another solution that worked for me:</p>\n\n<p><strong>JS</strong></p>\n\n<pre><code>$.ajax({\n        url: 'recAjax.php',\n        method: 'POST',\n        contentType: 'application/json; charset=utf-8',\n        data: JSON.stringify(dict)\n    });\n</code></pre>\n\n<p><strong>PHP</strong></p>\n\n<pre><code>var_dump(json_decode(file_get_contents('php://input'), true));\n</code></pre>\n\n<p><a href=\"http://php.net/manual/en/function.json-decode.php\" rel=\"nofollow noreferrer\"><code>json_decode</code></a>, <a href=\"http://php.net/manual/en/wrappers.php.php#wrappers.php.input\" rel=\"nofollow noreferrer\"><code>php://input</code></a></p>\n"}], "owner": {"reputation": 45, "user_id": 5499143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3877bb40ec78f97e9459f4c15648ce7b?s=128&d=identicon&r=PG&f=1", "display_name": "Honzys", "link": "https://stackoverflow.com/users/5499143/honzys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 40775756, "answer_count": 3, "score": 1, "last_activity_date": 1479946018, "creation_date": 1479941121, "last_edit_date": 1479942076, "question_id": 40775397, "link": "https://stackoverflow.com/questions/40775397/using-square-right-bracket-in-php-key", "title": "Using square right bracket in php key", "body": "<p>I am trying to post a dictionary using ajax. But I have run into some problems with json and \"]\" character.</p>\n\n<p>Here's example of my code (javascript):</p>\n\n<pre><code>var dict = {\"id\":\"patient\",\"where\":{\"name[~]\":\"J\"}};\n$.post(\"./ajax.php\",{data:dict},function(data){\n});\n</code></pre>\n\n<p>And ajax.php (this file just deals with the json encoded data in $_POST array):</p>\n\n<pre><code>$where = $_POST[\"data\"][\"where\"];\n</code></pre>\n\n<p>Basically i am trying to send json format message to php, and there I want to process with the data.</p>\n\n<p>I tried whole bunch of combination with json_encode and decode on php side, also JSON.stringify() on javascript side, tried to use escape characters with the right bracket.</p>\n\n<p>But when I dump $_POST[\"data][\"where] there's value \"J\" with key \"name[~\" and not \"name[~]\". Right bracket disappears from the key.</p>\n\n<p>Anyone having any advice, please?\nThanks for help, I've been struggling with this for hours...</p>\n\n<p>//EDIT: I've figured out, that everything i place after \"]\" disappears from the key. So the key transforms from \"name[~]asdf\" -> \"name[~\"...</p>\n"}, {"tags": ["javascript", "jquery"], "comments": [{"owner": {"reputation": 304305, "user_id": 519413, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7839089cd91dc5cc5eb1e0cdbf3312ed?s=128&d=identicon&r=PG", "display_name": "Rory McCrossan", "link": "https://stackoverflow.com/users/519413/rory-mccrossan"}, "edited": false, "score": 0, "creation_date": 1479941260, "post_id": 40775387, "comment_id": 68774568, "body": "Use <code>this</code> instead of <code>li[i]</code> within the event handler function and remove your closure. You can then get the state with the <code>checked</code> property"}, {"owner": {"reputation": 2328, "user_id": 4711865, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/10155377196500721/picture?type=large", "display_name": "odedta", "link": "https://stackoverflow.com/users/4711865/odedta"}, "edited": false, "score": 0, "creation_date": 1479941291, "post_id": 40775387, "comment_id": 68774573, "body": "I&#39;m seeing a function in a for loop, is that a good idea? o_O"}, {"owner": {"reputation": 304305, "user_id": 519413, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7839089cd91dc5cc5eb1e0cdbf3312ed?s=128&d=identicon&r=PG", "display_name": "Rory McCrossan", "link": "https://stackoverflow.com/users/519413/rory-mccrossan"}, "reply_to_user": {"reputation": 2328, "user_id": 4711865, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/10155377196500721/picture?type=large", "display_name": "odedta", "link": "https://stackoverflow.com/users/4711865/odedta"}, "edited": false, "score": 0, "creation_date": 1479941362, "post_id": 40775387, "comment_id": 68774597, "body": "@odedta it&#39;s a closure - required in this case."}, {"owner": {"reputation": 2328, "user_id": 4711865, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/10155377196500721/picture?type=large", "display_name": "odedta", "link": "https://stackoverflow.com/users/4711865/odedta"}, "reply_to_user": {"reputation": 304305, "user_id": 519413, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7839089cd91dc5cc5eb1e0cdbf3312ed?s=128&d=identicon&r=PG", "display_name": "Rory McCrossan", "link": "https://stackoverflow.com/users/519413/rory-mccrossan"}, "edited": false, "score": 0, "creation_date": 1479941396, "post_id": 40775387, "comment_id": 68774604, "body": "@RoryMcCrossan Could you refer me to a place to learn more about this please?"}, {"owner": {"reputation": 304305, "user_id": 519413, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7839089cd91dc5cc5eb1e0cdbf3312ed?s=128&d=identicon&r=PG", "display_name": "Rory McCrossan", "link": "https://stackoverflow.com/users/519413/rory-mccrossan"}, "edited": false, "score": 1, "creation_date": 1479941447, "post_id": 40775387, "comment_id": 68774625, "body": "See <a href=\"http://stackoverflow.com/questions/111102/how-do-javascript-closures-work\">this</a>, <a href=\"http://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example\">this</a> and <a href=\"http://stackoverflow.com/questions/2728278/what-is-a-practical-use-for-a-closure-in-javascript\">this</a>"}, {"owner": {"reputation": 2328, "user_id": 4711865, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/10155377196500721/picture?type=large", "display_name": "odedta", "link": "https://stackoverflow.com/users/4711865/odedta"}, "edited": false, "score": 0, "creation_date": 1479941502, "post_id": 40775387, "comment_id": 68774640, "body": "Perfect, thank you very much :)"}, {"owner": {"reputation": 304305, "user_id": 519413, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7839089cd91dc5cc5eb1e0cdbf3312ed?s=128&d=identicon&r=PG", "display_name": "Rory McCrossan", "link": "https://stackoverflow.com/users/519413/rory-mccrossan"}, "edited": false, "score": 3, "creation_date": 1479941557, "post_id": 40775387, "comment_id": 68774656, "body": "No problem. Just also note that while they aren&#39;t technically bad practice, they should be avoided unless absolutely necessary."}, {"owner": {"reputation": 389, "user_id": 4541915, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ab57d7ae3488edd19960982b0c023d88?s=128&d=identicon&r=PG&f=1", "display_name": "LeggoMaEggo", "link": "https://stackoverflow.com/users/4541915/leggomaeggo"}, "edited": false, "score": 0, "creation_date": 1479942074, "post_id": 40775387, "comment_id": 68774832, "body": "Oh thanks for the info about closure&#39;s Rory! So what I did was I removed the closure and replaced all <code>li[i]</code>s with <code>this</code> inside the for loop. However everything returns as <code>undefined</code>."}], "answers": [{"comments": [{"owner": {"reputation": 389, "user_id": 4541915, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ab57d7ae3488edd19960982b0c023d88?s=128&d=identicon&r=PG&f=1", "display_name": "LeggoMaEggo", "link": "https://stackoverflow.com/users/4541915/leggomaeggo"}, "edited": false, "score": 0, "creation_date": 1479942548, "post_id": 40775581, "comment_id": 68774979, "body": "Sweet! Got it. Thank you very much. Accepted answer because example."}], "tags": [], "owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "is_accepted": true, "score": 1, "last_activity_date": 1479942228, "creation_date": 1479942228, "answer_id": 40775581, "question_id": 40775387, "link": "https://stackoverflow.com/questions/40775387/li-input-checkbox-how-to-get-checked-state-javascript/40775581#40775581", "title": "li input checkbox: how to get checked state javascript", "body": "<p>You need to get a reference to the <code>input</code> element, which you can do as follows:</p>\n\n<pre><code>var input = this.querySelector('input[type=checkbox]');\n</code></pre>\n\n<p>... and then you can use <code>input.checked</code>:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var li = document.querySelectorAll('li');\r\n\r\nfor(var i = 0 ; i &lt; li.length; i++){\r\n    li[i].addEventListener('click', function(event) {\r\n      //event.preventDefault();\r\n      var input = this.querySelector('input[type=checkbox]');\r\n      console.log(this.textContent.trim(), input.checked);\r\n    });\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;ul&gt;\r\n&lt;li&gt;\r\n    &lt;span&gt;test&lt;/span&gt;\r\n    &lt;input type=\"checkbox\"&gt;\r\n&lt;/li&gt;\r\n&lt;/ul&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 389, "user_id": 4541915, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/ab57d7ae3488edd19960982b0c023d88?s=128&d=identicon&r=PG&f=1", "display_name": "LeggoMaEggo", "link": "https://stackoverflow.com/users/4541915/leggomaeggo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1316, "favorite_count": 0, "accepted_answer_id": 40775581, "answer_count": 1, "score": 0, "last_activity_date": 1479942228, "creation_date": 1479941103, "question_id": 40775387, "link": "https://stackoverflow.com/questions/40775387/li-input-checkbox-how-to-get-checked-state-javascript", "title": "li input checkbox: how to get checked state javascript", "body": "<p>I have access to each of the li[i] that returns what you see in the picture. An example would be <code>li[i].innerText</code> returns <code>business</code>. How can I get the <code>checked</code> state of each element? </p>\n\n<p><a href=\"https://i.stack.imgur.com/ropnI.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ropnI.jpg\" alt=\"element iteration\"></a>\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>//loop through li elements in categories to add listeners\r\n  for(var i = 0 ; i &lt; li.length; i++){\r\n    (function(i){\r\n        li[i].addEventListener('click', function(event) {\r\n          event.preventDefault();\r\n\r\n          //disallow repeats\r\n          if(checkedItems.indexOf(li[i].innerText) == -1){\r\n            checkedItems[counter] = li[i].innerText;\r\n            counter++;\r\n            console.log(\"added\");\r\n          }\r\n\r\n          console.log(li[i].checked); //undefined\r\n          //remove element if unchecked from array\r\n          if(li[i].checked){\r\n            var index = checkedItems.indexOf(li[i].innerText);\r\n            console.log(li[i].innerText +\": \" + index);\r\n            checkedItems.splice(index, 1);\r\n            console.log(\"disabled\");\r\n            counter--;\r\n          }\r\n    console.log(checkedItems);\r\n        });\r\n    }(i));\r\n\r\n  }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["javascript", "jquery", "regex"], "answers": [{"tags": [], "owner": {"reputation": 27179, "user_id": 710099, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0413774874b9baeccef7a5ba0344fec7?s=128&d=identicon&r=PG", "display_name": "Federico Piazza", "link": "https://stackoverflow.com/users/710099/federico-piazza"}, "is_accepted": false, "score": 1, "last_activity_date": 1479941074, "creation_date": 1479941074, "answer_id": 40775385, "question_id": 40775355, "link": "https://stackoverflow.com/questions/40775355/regex-for-group-condition/40775385#40775385", "title": "regex for group condition", "body": "<p>Your pattern is making all valid because you are specifying that. The part <code>[0-9\\\\s.\\\\/-]{6,20}</code> is allowin whatever number from 6 to 20 chars long.</p>\n\n<p>For instance, you could change your regex to this:</p>\n\n<pre><code>^(?:0067|0)[1-9][0-9\\s.\\/-]{5,19}$\n</code></pre>\n\n<p><strong><a href=\"https://regex101.com/r/vTUSWR/1\" rel=\"nofollow noreferrer\">Working demo</a></strong></p>\n"}, {"tags": [], "owner": {"reputation": 18893, "user_id": 1057547, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/6pskS.jpg?s=128&g=1", "display_name": "dognose", "link": "https://stackoverflow.com/users/1057547/dognose"}, "is_accepted": false, "score": 0, "last_activity_date": 1479942338, "last_edit_date": 1479942338, "creation_date": 1479941701, "answer_id": 40775493, "question_id": 40775355, "link": "https://stackoverflow.com/questions/40775355/regex-for-group-condition/40775493#40775493", "title": "regex for group condition", "body": "<p>To figure out, whats going wrong, it is best to understand what you are requesting: </p>\n\n<pre><code> /^(?:0067|0)[0-9\\\\s.\\\\/-]{6,20}$/\n</code></pre>\n\n<p>says:</p>\n\n<p><code>0067</code> or <code>0</code>, followed by <code>0-9</code> or <code>blank</code> or <code>/</code> or <code>-</code> for 6-20 times</p>\n\n<p>So, all your examples \"match\" this condition: </p>\n\n<pre><code>   01796568801   =&gt; 0 1796568801\n   0089737732301 =&gt; 0 089737732301\n   0067214356    =&gt; 0067 214356\nor 0067214356    =&gt; 0 067214356\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/EpZumK/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/EpZumK/1</a></p>\n\n<p>To give you a general solution, more input is required, because here your options <code>0067</code> and <code>0</code> are nothing more than <code>start with 0</code>, cause any case, where 0067 is not 100% matched, the <code>start with 0</code> condition will match as well, if string length is not exceeded.</p>\n\n<p>Edit: Federico Piazzas solution will work in the case outlined, but such a \"case-dependenant\" solution seems bad to me, because software always \"grows\" - and in 3 months, 0049 might be valid as well, requiring code-maintenance...</p>\n\n<p>Why don't you use two input-elements: One for the country code (or 0 if local) and one for the number?</p>\n"}, {"tags": [], "owner": {"reputation": 2858, "user_id": 3358499, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fa794782e1c5f1e6978843d286dc5ad9?s=128&d=identicon&r=PG&f=1", "display_name": "WBuck", "link": "https://stackoverflow.com/users/3358499/wbuck"}, "is_accepted": false, "score": 0, "last_activity_date": 1479950855, "creation_date": 1479950855, "answer_id": 40776738, "question_id": 40775355, "link": "https://stackoverflow.com/questions/40775355/regex-for-group-condition/40776738#40776738", "title": "regex for group condition", "body": "<p>So, I'm not sure if javascript supports negative lookahead but if it does you can try the below pattern:</p>\n\n<pre><code>^(0067|0(?!0))(\\d){6,19}\\s+-$\n</code></pre>\n\n<p>Match: 01796568801 - | 0067214356 -</p>\n\n<p>No match: 0089737732 - | 0008973773 -</p>\n\n<p>I wasn't sure about the white space after the remaining numbers before the dash so I made it 1 or more white space characters are required.</p>\n"}], "owner": {"reputation": 35, "user_id": 6332626, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ba935e3e9822dc0d0ff1aaf6cd431899?s=128&d=identicon&r=PG&f=1", "display_name": "Mac", "link": "https://stackoverflow.com/users/6332626/mac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1479950855, "creation_date": 1479940865, "question_id": 40775355, "link": "https://stackoverflow.com/questions/40775355/regex-for-group-condition", "title": "regex for group condition", "body": "<p>I am using below pattern</p>\n\n<pre><code>^(?:0067|0)[0-9\\\\s.\\\\/-]{6,20}$\n</code></pre>\n\n<p>I want to validate numbers starting with zero or with double zero following few numbers. Example</p>\n\n<p>01796568801  - should be valid,\n0089737732 - should be invalid,\n0067214356 - should be valid</p>\n\n<p>But my pattern is making all valid. Please advise how can I make it to take only single 0 or 0067?</p>\n\n<p><a href=\"https://jsfiddle.net/Lz63rgs2/\" rel=\"nofollow noreferrer\">https://jsfiddle.net/Lz63rgs2/</a></p>\n"}, {"tags": ["javascript", "debugging", "underscore.js", "underscore.js-templating"], "comments": [{"owner": {"reputation": 14231, "user_id": 1218980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c6b54df38abce7b1c35f499a1d4a67?s=128&d=identicon&r=PG", "display_name": "Emile Bergeron", "link": "https://stackoverflow.com/users/1218980/emile-bergeron"}, "edited": false, "score": 1, "creation_date": 1479941053, "post_id": 40775289, "comment_id": 68774518, "body": "Which version of underscore? Which line in the pasted code triggers the error? What&#39;s on line 1461 of the version of underscore.js you&#39;re using?"}, {"owner": {"reputation": 1577, "user_id": 1751977, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/W3ldI.jpg?s=128&g=1", "display_name": "Ashbury", "link": "https://stackoverflow.com/users/1751977/ashbury"}, "reply_to_user": {"reputation": 14231, "user_id": 1218980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c6b54df38abce7b1c35f499a1d4a67?s=128&d=identicon&r=PG", "display_name": "Emile Bergeron", "link": "https://stackoverflow.com/users/1218980/emile-bergeron"}, "edited": false, "score": 0, "creation_date": 1479943690, "post_id": 40775289, "comment_id": 68775342, "body": "Answered (see edit)"}, {"owner": {"reputation": 14231, "user_id": 1218980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c6b54df38abce7b1c35f499a1d4a67?s=128&d=identicon&r=PG", "display_name": "Emile Bergeron", "link": "https://stackoverflow.com/users/1218980/emile-bergeron"}, "edited": false, "score": 0, "creation_date": 1479943923, "post_id": 40775289, "comment_id": 68775424, "body": "Where is the breakpoint? Is it inside underscore?"}, {"owner": {"reputation": 1577, "user_id": 1751977, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/W3ldI.jpg?s=128&g=1", "display_name": "Ashbury", "link": "https://stackoverflow.com/users/1751977/ashbury"}, "reply_to_user": {"reputation": 14231, "user_id": 1218980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c6b54df38abce7b1c35f499a1d4a67?s=128&d=identicon&r=PG", "display_name": "Emile Bergeron", "link": "https://stackoverflow.com/users/1218980/emile-bergeron"}, "edited": false, "score": 0, "creation_date": 1479944160, "post_id": 40775289, "comment_id": 68775482, "body": "debugger; is just in my js own file where i&#39;m trying to use underscore."}, {"owner": {"reputation": 1577, "user_id": 1751977, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/W3ldI.jpg?s=128&g=1", "display_name": "Ashbury", "link": "https://stackoverflow.com/users/1751977/ashbury"}, "reply_to_user": {"reputation": 14231, "user_id": 1218980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c6b54df38abce7b1c35f499a1d4a67?s=128&d=identicon&r=PG", "display_name": "Emile Bergeron", "link": "https://stackoverflow.com/users/1218980/emile-bergeron"}, "edited": false, "score": 1, "creation_date": 1479944710, "post_id": 40775289, "comment_id": 68775640, "body": "here is a fiddle: <a href=\"https://jsfiddle.net/c2z8dtjq/1/\" rel=\"nofollow noreferrer\">jsfiddle.net/c2z8dtjq/1</a>"}, {"owner": {"reputation": 2049, "user_id": 6310867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TsNXx.jpg?s=128&g=1", "display_name": "Winter Soldier", "link": "https://stackoverflow.com/users/6310867/winter-soldier"}, "edited": false, "score": 0, "creation_date": 1480526217, "post_id": 40775289, "comment_id": 69002533, "body": "I fail to encounter any error with your code. I was able to hit the debugger using both approaches  <code>_.templateSettings = {   interpolate: &#47;\\{\\{(.+?)\\}\\}&#47;g }; debugger var template = _.template(&quot;Hello {{ name }}!&quot;); console.log(template({name: &quot;Mustache&quot;}))</code> &amp; also this ==&gt; <code>debugger _.templateSettings = {   interpolate: &#47;\\{\\{(.+?)\\}\\}&#47;g }; var template = _.template(&quot;Hello {{ name }}!&quot;); console.log(template({name: &quot;Mustache&quot;}))</code>"}, {"owner": {"reputation": 2049, "user_id": 6310867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TsNXx.jpg?s=128&g=1", "display_name": "Winter Soldier", "link": "https://stackoverflow.com/users/6310867/winter-soldier"}, "edited": false, "score": 0, "creation_date": 1480526323, "post_id": 40775289, "comment_id": 69002604, "body": "And both the times it stopped and printed the log <code>Hello Mustache</code>. Also FYI I ran this in <code>chrome</code>"}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 4119126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/970405749664f65ae1f862a6caa1b499?s=128&d=identicon&r=PG&f=1", "display_name": "Mostafa Anssary", "link": "https://stackoverflow.com/users/4119126/mostafa-anssary"}, "edited": false, "score": 0, "creation_date": 1513707350, "post_id": 40897472, "comment_id": 82752380, "body": "Have you seen <a href=\"https://vimeo.com/248018117\" rel=\"nofollow noreferrer\">video</a> ? Password is Passsword <a href=\"https://ufile.io/okxmk\" rel=\"nofollow noreferrer\">file</a>  file here no debugger; break point or even console.log inside _.template do you know why"}], "tags": [], "owner": {"reputation": 2598, "user_id": 1084004, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/BrE6N.jpg?s=128&g=1", "display_name": "mikeapr4", "link": "https://stackoverflow.com/users/1084004/mikeapr4"}, "is_accepted": true, "score": 2, "last_activity_date": 1480537369, "creation_date": 1480537369, "answer_id": 40897472, "question_id": 40775289, "link": "https://stackoverflow.com/questions/40775289/underscore-template-doesnt-work-in-debugger/40897472#40897472", "title": "Underscore template doesn&#39;t work in debugger", "body": "<p>This is a symptom of <code>Function</code> instantiation (underscore line 1454), and it can be recreated using the following statement: </p>\n\n<pre><code>new Function('return true;')\n</code></pre>\n\n<p>With any page open in the browser (even this one), copy this into the console and execute, it will print the following:</p>\n\n<pre><code>function anonymous() {\n    return true;\n}\n</code></pre>\n\n<p>However if the page is currently <strong>Paused in debugger</strong> the statement returns <code>undefined</code>. I tried running the same in Firefox, it doesn't work either, doesn't even return.</p>\n\n<p>I can't explain the effect on the V8 (Chrome) or SpiderMonkey (Firefox) Javascript engines when they are paused in the debugger. </p>\n\n<p>If you really need it, here's a workaround: <a href=\"https://jsfiddle.net/na4Lpt7L/\" rel=\"nofollow noreferrer\">https://jsfiddle.net/na4Lpt7L/</a></p>\n\n<pre><code>var source = \"Hello {{ name }}!\";\ndebugger;\nvar template = _.template(source);\ndebugger;\n</code></pre>\n\n<p>When the first breakpoint hits:</p>\n\n<pre><code>&gt; source = \"Goodbye {{ name }}!\";\n&lt; \"Goodbye {{ name }}!\"\n</code></pre>\n\n<p>Now continue execution, and on the second breakpoint:</p>\n\n<pre><code>&gt; template({name: \"Mustache\"});\n&lt; \"Goodbye Mustache!\"\n</code></pre>\n\n<p>If you want to try a few options I'd say stick it in a loop (<code>while (source.length) { ... }</code>)</p>\n"}], "owner": {"reputation": 1577, "user_id": 1751977, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/W3ldI.jpg?s=128&g=1", "display_name": "Ashbury", "link": "https://stackoverflow.com/users/1751977/ashbury"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 438, "favorite_count": 1, "accepted_answer_id": 40897472, "answer_count": 1, "score": 2, "last_activity_date": 1480537369, "creation_date": 1479940625, "last_edit_date": 1479946443, "question_id": 40775289, "link": "https://stackoverflow.com/questions/40775289/underscore-template-doesnt-work-in-debugger", "title": "Underscore template doesn&#39;t work in debugger", "body": "<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>// run with console open\r\n//and paste following when you hit the debugger:\r\n\r\n/*\r\n_.templateSettings = {\r\n  interpolate: /\\{\\{(.+?)\\}\\}/g\r\n};\r\n\r\nvar template = _.template(\"Hello {{ name }}!\");\r\n\r\nconsole.log(template({name: \"Mustache\"}))\r\n*/\r\ndebugger\r\n//should return:\r\n//underscore-min.js:5Uncaught TypeError: Cannot read property 'call' of undefined\r\n\r\n//out of debugger though, it works:\r\n_.templateSettings = {\r\n  interpolate: /\\{\\{(.+?)\\}\\}/g\r\n};\r\nvar template = _.template(\"Hello {{ name }}!\");\r\nconsole.log(template({name: \"Mustache\"}))</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js\"&gt;&lt;/script&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I can't run <a href=\"http://underscorejs.org/#template\" rel=\"nofollow noreferrer\">underscore's sample template</a> code while in a debugger (I want to play with actual data in the console).</p>\n\n<ol>\n<li>code in .js file runs fine. \u2713</li>\n<li>pasted in console after page load runs fine. \u2713</li>\n<li><p>pasted in at time of debugger breakpoint - doesnt work. \u2718</p>\n\n<pre><code>_.templateSettings = {\n    interpolate: /\\{\\{(.+?)\\}\\}/g\n}\n\nvar template = _.template(\"Hello {{ name }}!\");\n\ntemplate({name: \"Mustache\"});\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>underscore.js:1461 Uncaught TypeError: Cannot read property 'call' of undefined\n</code></pre></li>\n</ol>\n\n<p>edit:</p>\n\n<hr>\n\n<p>Errors on <code>template({name: \"Mustache\"});</code></p>\n\n<p><a href=\"https://github.com/jashkenas/underscore/blob/e4743ab712b8ab42ad4ccb48b155034d02394e4d/underscore.js#L1461\" rel=\"nofollow noreferrer\">Line 1461</a> of Underscore version 1.8.3: </p>\n\n<pre><code>var template = function(data) {\n  return render.call(this, data, _);\n};\n</code></pre>\n"}, {"tags": ["javascript"], "answers": [{"comments": [{"owner": {"reputation": 1082, "user_id": 263357, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/e5570aca0a6e85d252914d22caf3d708?s=128&d=identicon&r=PG&f=1", "display_name": "Ris", "link": "https://stackoverflow.com/users/263357/ris"}, "edited": false, "score": 0, "creation_date": 1479945021, "post_id": 40775365, "comment_id": 68775738, "body": "I am getting Syntax error on token &quot;&gt;&quot;, delete this token for &quot;key =&gt; &quot;"}, {"owner": {"reputation": 4891, "user_id": 2720743, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/G0chu.jpg?s=128&g=1", "display_name": "Ajay Narain Mathur", "link": "https://stackoverflow.com/users/2720743/ajay-narain-mathur"}, "edited": false, "score": 0, "creation_date": 1479945329, "post_id": 40775365, "comment_id": 68775805, "body": "Running ie huh? use <code>function(key) {  return obj[0][key][0].scope }</code> . it shall work"}, {"owner": {"reputation": 4891, "user_id": 2720743, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/G0chu.jpg?s=128&g=1", "display_name": "Ajay Narain Mathur", "link": "https://stackoverflow.com/users/2720743/ajay-narain-mathur"}, "edited": false, "score": 0, "creation_date": 1479945386, "post_id": 40775365, "comment_id": 68775812, "body": "also this will not give all the scope values. It will give the scope value only at index 0."}, {"owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "reply_to_user": {"reputation": 1082, "user_id": 263357, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/e5570aca0a6e85d252914d22caf3d708?s=128&d=identicon&r=PG&f=1", "display_name": "Ris", "link": "https://stackoverflow.com/users/263357/ris"}, "edited": false, "score": 1, "creation_date": 1479967578, "post_id": 40775365, "comment_id": 68781452, "body": "@Rishi, as you appear to run this in IE (which does support EcmaScript2015 arrow syntax), I modified the code accordingly. The remark of A.J taken into account as well."}], "tags": [], "owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "is_accepted": false, "score": 1, "last_activity_date": 1479967469, "last_edit_date": 1479967469, "creation_date": 1479940921, "answer_id": 40775365, "question_id": 40775284, "link": "https://stackoverflow.com/questions/40775284/iterate-nested-object-structure-for-specific-element/40775365#40775365", "title": "Iterate nested object structure for specific element", "body": "<p>Here is how you could do it:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var obj = [{\r\n    \"inc\": [{\r\n        \"type\": \"Entity\",\r\n        \"scope\": \"A\"\r\n    }, {\r\n        \"type\": \"Entity\",\r\n        \"scope\": \"B\"\r\n    }],\r\n    \"inv\": [{\r\n        \"type\": \"Entity\",\r\n        \"scope\": \"C\"\r\n    }],\r\n    \"oth\": [{\r\n        \"type\": \"Entity\",\r\n        \"scope\": \"D\"\r\n    }],\r\n    \"pro\": [{\r\n        \"type\": \"Support Dept\",\r\n        \"scope\": \"E\"\r\n    }, {\r\n        \"type\": \"Entity\",\r\n        \"scope\": \"F\"\r\n    }, {\r\n        \"type\": \"Entity\",\r\n        \"scope\": \"C\"\r\n    }],\r\n    \"ap\": [{\r\n        \"type\": \"Support Dept\",\r\n        \"scope\": \"A\"\r\n    }]\r\n}];\r\n    \r\nres =  Object.keys(obj[0]).reduce(function (acc, key) {\r\n    return acc.concat(obj[0][key].map (function (o) {\r\n        return o.scope;\r\n    }));\r\n}, []);\r\n\r\nconsole.log(res);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Please don't call your variable <code>JSONObject</code>. There is no such thing. JSON is a text format for data exchange. What you have is a JavaScript object, which might have been derived from JSON you parsed, but it is not JSON.</p>\n"}, {"tags": [], "owner": {"reputation": 4891, "user_id": 2720743, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/G0chu.jpg?s=128&g=1", "display_name": "Ajay Narain Mathur", "link": "https://stackoverflow.com/users/2720743/ajay-narain-mathur"}, "is_accepted": true, "score": 1, "last_activity_date": 1479943240, "creation_date": 1479943240, "answer_id": 40775745, "question_id": 40775284, "link": "https://stackoverflow.com/questions/40775284/iterate-nested-object-structure-for-specific-element/40775745#40775745", "title": "Iterate nested object structure for specific element", "body": "<p>Try this:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var obj = [{\r\n  \"inc\": [{\r\n    \"type\": \"Entity\",\r\n    \"scope\": \"A\"\r\n  }, {\r\n    \"type\": \"Entity\",\r\n    \"scope\": \"B\"\r\n  }],\r\n  \"inv\": [{\r\n    \"type\": \"Entity\",\r\n    \"scope\": \"C\"\r\n  }],\r\n  \"oth\": [{\r\n    \"type\": \"Entity\",\r\n    \"scope\": \"D\"\r\n  }],\r\n  \"pro\": [{\r\n    \"type\": \"Support Dept\",\r\n    \"scope\": \"E\"\r\n  }, {\r\n    \"type\": \"Entity\",\r\n    \"scope\": \"F\"\r\n  }, {\r\n    \"type\": \"Entity\",\r\n    \"scope\": \"C\"\r\n  }],\r\n  \"ap\": [{\r\n    \"type\": \"Support Dept\",\r\n    \"scope\": \"A\"\r\n  }]\r\n}];\r\n\r\nvar arr = [];\r\nfor (var i in obj[0]) {\r\n  for (var j in obj[0][i]) {\r\n    arr.push(obj[0][i][j][\"scope\"])\r\n  }\r\n}\r\nconsole.log(arr)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 213, "user_id": 6137667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/749b884f063c0cf3f1af86ae0bd4fc61?s=128&d=identicon&r=PG&f=1", "display_name": "echopeak", "link": "https://stackoverflow.com/users/6137667/echopeak"}, "is_accepted": false, "score": 1, "last_activity_date": 1479945511, "creation_date": 1479945511, "answer_id": 40776104, "question_id": 40775284, "link": "https://stackoverflow.com/questions/40775284/iterate-nested-object-structure-for-specific-element/40776104#40776104", "title": "Iterate nested object structure for specific element", "body": "<p>One approach i would take would be the functional approach.</p>\n\n<p><strong>ES2015</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>let scopes = obj.reduce((start ,item) =&gt; {\r\n  start = Object.keys(item).map(e =&gt; item[e]);\r\n  return start.concat.apply([] , start).map( e =&gt; e.scope);\r\n},[]);\r\nconsole.log('ES2015',scopes);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>ES5</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var scopes = obj.reduce(function(start ,item){\r\n  start = Object.keys(item).map(function(e){\r\n    return item[e];\r\n  })\r\n  return start.concat.apply([] , start).map(function(e){\r\n    return e.scope\r\n  });\r\n},[]);\r\n\r\nconsole.log('ES5',scopes)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 1082, "user_id": 263357, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/e5570aca0a6e85d252914d22caf3d708?s=128&d=identicon&r=PG&f=1", "display_name": "Ris", "link": "https://stackoverflow.com/users/263357/ris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 40775745, "answer_count": 3, "score": 0, "last_activity_date": 1479967469, "creation_date": 1479940611, "last_edit_date": 1479941106, "question_id": 40775284, "link": "https://stackoverflow.com/questions/40775284/iterate-nested-object-structure-for-specific-element", "title": "Iterate nested object structure for specific element", "body": "<p>I have following nested object. What would be the easiest way to get all \"scope\" values in an array without referring them individually like,</p>\n\n<pre><code>JSONObject[\"inc\"][\"scope\"]\n</code></pre>\n\n<p>Object: </p>\n\n<pre><code>[{\n    \"inc\": [{\n        \"type\": \"Entity\",\n        \"scope\": \"A\"\n    }, {\n        \"type\": \"Entity\",\n        \"scope\": \"B\"\n    }],\n    \"inv\": [{\n        \"type\": \"Entity\",\n        \"scope\": \"C\"\n    }],\n    \"oth\": [{\n        \"type\": \"Entity\",\n        \"scope\": \"D\"\n    }],\n    \"pro\": [{\n        \"type\": \"Support Dept\",\n        \"scope\": \"E\"\n    }, {\n        \"type\": \"Entity\",\n        \"scope\": \"F\"\n    }, {\n        \"type\": \"Entity\",\n        \"scope\": \"C\"\n    }],\n    \"ap\": [{\n        \"type\": \"Support Dept\",\n        \"scope\": \"A\"\n    }]\n}]\n</code></pre>\n\n<p>Would appreciate any help on this.</p>\n"}, {"tags": ["javascript", "jquery", "client", "mathml"], "comments": [{"owner": {"reputation": 4766, "user_id": 1339651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LCE8Q.png?s=128&g=1", "display_name": "Peter Krautzberger", "link": "https://stackoverflow.com/users/1339651/peter-krautzberger"}, "edited": false, "score": 0, "creation_date": 1479972632, "post_id": 40775261, "comment_id": 68783763, "body": "What is &quot;infix notation&quot;? You might want to check out <a href=\"http://asciimath.org/\" rel=\"nofollow noreferrer\">asciimath</a>."}, {"owner": {"reputation": 36, "user_id": 7202363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8418c9b81fe5c85e79564fcb25e3a033?s=128&d=identicon&r=PG&f=1", "display_name": "Yehezkel", "link": "https://stackoverflow.com/users/7202363/yehezkel"}, "edited": false, "score": 0, "creation_date": 1480453503, "post_id": 40775261, "comment_id": 68966588, "body": "infix notation is the conventional way to Display mathematical expression : &quot;1+2&quot;  contrast to postfix expression &quot;1 2 +&quot;. Anyway i found a solution.. i use Latex. Thanks!"}], "owner": {"reputation": 36, "user_id": 7202363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8418c9b81fe5c85e79564fcb25e3a033?s=128&d=identicon&r=PG&f=1", "display_name": "Yehezkel", "link": "https://stackoverflow.com/users/7202363/yehezkel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479940496, "creation_date": 1479940496, "question_id": 40775261, "link": "https://stackoverflow.com/questions/40775261/how-to-build-mathml-expression-from-infix-notation-in-javascript", "title": "How to build MathML expression from infix notation in JavaScript?", "body": "<p>I'm trying to understand whether there is an elegant way to convert\n(in client side)\nFrom \"infix notation\" to MathML expression\nfor example : from 1+2 to:\n<a href=\"https://i.stack.imgur.com/EBbMB.png\" rel=\"nofollow noreferrer\">the MathML expression</a></p>\n\n<p>Many thanks</p>\n"}, {"tags": ["javascript", "html", "ios", "css"], "comments": [{"owner": {"reputation": 1385, "user_id": 2297366, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/8c218fba48cf0596deae13ee9daa5b5d?s=128&d=identicon&r=PG", "display_name": "Dylan Vander Berg", "link": "https://stackoverflow.com/users/2297366/dylan-vander-berg"}, "edited": false, "score": 0, "creation_date": 1479940475, "post_id": 40775220, "comment_id": 68774337, "body": "I&#39;m pretty sure that a touch fires the onClick callback. So when you tap it on a touchscreen device, the method is being called twice and toggling on and off. Try taking out the <code>touch</code> from the event handler."}, {"owner": {"reputation": 7066, "user_id": 1041122, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/W5vl3.jpg?s=128&g=1", "display_name": "Julian F. Weinert", "link": "https://stackoverflow.com/users/1041122/julian-f-weinert"}, "edited": false, "score": 0, "creation_date": 1479940611, "post_id": 40775220, "comment_id": 68774387, "body": "Use toubletaptogo or see, what they are doing: <a href=\"https://github.com/dachcom-digital/jquery-doubleTapToGo\" rel=\"nofollow noreferrer\">github.com/dachcom-digital/jquery-doubleTapToGo</a>"}, {"owner": {"reputation": 2328, "user_id": 4711865, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/10155377196500721/picture?type=large", "display_name": "odedta", "link": "https://stackoverflow.com/users/4711865/odedta"}, "edited": false, "score": 0, "creation_date": 1479940913, "post_id": 40775220, "comment_id": 68774481, "body": "try &quot;tap&quot; - <a href=\"http://www.w3schools.com/jquerymobile/jquerymobile_events_touch.asp\" rel=\"nofollow noreferrer\">w3schools.com/jquerymobile/jquerymobile_events_touch.asp</a>"}], "owner": {"reputation": 1015, "user_id": 1732907, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8bc7cbb819c7620310df1c6cbf42682f?s=128&d=identicon&r=PG", "display_name": "Adam Scot", "link": "https://stackoverflow.com/users/1732907/adam-scot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479940269, "creation_date": 1479940269, "question_id": 40775220, "link": "https://stackoverflow.com/questions/40775220/menu-that-responds-to-click-but-not-tap-on-iphone", "title": "Menu that responds to click, but not tap on iPhone", "body": "<p>I have a menu written in HTML like below</p>\n\n<pre><code>&lt;ul&gt;\n       &lt;li class=\"lang-icon\"&gt;&lt;label&gt;Language&lt;/label&gt;\n             &lt;ul&gt;\n                  &lt;li&gt;lang 1&lt;/li&gt;\n                  &lt;li&gt;lang 2&lt;/li&gt;\n                  &lt;li&gt;lang 3&lt;/li&gt;\n             &lt;/ul&gt;\n       &lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>Using this javascript to toggle the <code>display: none;</code> sub menus as <code>display: block</code></p>\n\n<pre><code>$(document).ready(function() {\n  $(document).on('click touch', '.lang-icon', function() {\n    toggle_menu(\".lang-select\");\n  });\n  $(document).on('click touch', '.search-icon', function() {\n    toggle_menu(\".search-bar\");\n    $(\".search-navigation\").toggleClass(\"search--on\");\n  });\n  $(document).on('click touch', '.nav-menu-icon', function() {\n    toggle_menu(\".menu--list\");\n  });\n  $(\"#gform_fields_1 #input_1_5\").val(\"eo\");\n});\n\nfunction toggle_menu(element) {\n  // show/hide this element\n  $(element).toggle();\n    // ensure only one element is shown at a time\n    $.each([\".lang-select\", \".search-bar\", \".menu--list\"], function( index, other_element ) {\n      if ((other_element != element) &amp;&amp; ($(other_element).css('display') != 'none')) {\n        $(other_element).hide();\n      }\n  });\n}\n</code></pre>\n\n<p>The problem  is that although the menu toggles perfectly when the input device is a mouse, nothing happens when a click is used.</p>\n\n<p>What are the most likely causes of this problem?</p>\n"}, {"tags": ["javascript", "angularjs", "ecmascript-6", "babeljs", "angular-controller"], "comments": [{"owner": {"reputation": 127336, "user_id": 283366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ad213d8adabe4b64c2d53c5e0e3cab4?s=128&d=identicon&r=PG", "display_name": "Phil", "link": "https://stackoverflow.com/users/283366/phil"}, "edited": false, "score": 0, "creation_date": 1479941399, "post_id": 40775209, "comment_id": 68774605, "body": "Can you share the full error message? Is it your login or todo controller that is triggering the error?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6150819"}, "reply_to_user": {"reputation": 127336, "user_id": 283366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ad213d8adabe4b64c2d53c5e0e3cab4?s=128&d=identicon&r=PG", "display_name": "Phil", "link": "https://stackoverflow.com/users/283366/phil"}, "edited": false, "score": 0, "creation_date": 1479941480, "post_id": 40775209, "comment_id": 68774633, "body": "angular.js:13920 Error: [ng:areq] Argument &#39;todosController&#39; is not a function, got undefined <a href=\"http://errors.angularjs.org/1.5.8/ng/areq?p0=todosController&amp;p1=not%20aNaNunction%2C%20got%20undefined\" rel=\"nofollow noreferrer\">errors.angularjs.org/1.5.8/ng/&hellip;</a>     at..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6150819"}, "reply_to_user": {"reputation": 127336, "user_id": 283366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ad213d8adabe4b64c2d53c5e0e3cab4?s=128&d=identicon&r=PG", "display_name": "Phil", "link": "https://stackoverflow.com/users/283366/phil"}, "edited": false, "score": 0, "creation_date": 1479941514, "post_id": 40775209, "comment_id": 68774646, "body": "Either login or todos controller errors when switching to the respective state."}, {"owner": {"reputation": 127336, "user_id": 283366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ad213d8adabe4b64c2d53c5e0e3cab4?s=128&d=identicon&r=PG", "display_name": "Phil", "link": "https://stackoverflow.com/users/283366/phil"}, "edited": false, "score": 0, "creation_date": 1479941562, "post_id": 40775209, "comment_id": 68774660, "body": "So what does your <code>todosController</code> look like?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6150819"}, "reply_to_user": {"reputation": 127336, "user_id": 283366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ad213d8adabe4b64c2d53c5e0e3cab4?s=128&d=identicon&r=PG", "display_name": "Phil", "link": "https://stackoverflow.com/users/283366/phil"}, "edited": false, "score": 0, "creation_date": 1479941607, "post_id": 40775209, "comment_id": 68774680, "body": "Same as login, with an empty constructor."}, {"owner": {"reputation": 127336, "user_id": 283366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ad213d8adabe4b64c2d53c5e0e3cab4?s=128&d=identicon&r=PG", "display_name": "Phil", "link": "https://stackoverflow.com/users/283366/phil"}, "edited": false, "score": 0, "creation_date": 1479941690, "post_id": 40775209, "comment_id": 68774713, "body": "You need to eliminate potential issues here. Either provide your <code>todosController</code> implementation or remove the <code>todos</code> state from your app to make sure that&#39;s not a problem"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6150819"}, "reply_to_user": {"reputation": 127336, "user_id": 283366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ad213d8adabe4b64c2d53c5e0e3cab4?s=128&d=identicon&r=PG", "display_name": "Phil", "link": "https://stackoverflow.com/users/283366/phil"}, "edited": false, "score": 0, "creation_date": 1479942053, "post_id": 40775209, "comment_id": 68774828, "body": "Removing the todos state, todos/todo import statements, and function calls in config results in no change to the error."}, {"owner": {"reputation": 127336, "user_id": 283366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ad213d8adabe4b64c2d53c5e0e3cab4?s=128&d=identicon&r=PG", "display_name": "Phil", "link": "https://stackoverflow.com/users/283366/phil"}, "edited": false, "score": 0, "creation_date": 1479942738, "post_id": 40775209, "comment_id": 68775039, "body": "Cool, thanks for trying that out. Pretty sure I&#39;ve got the answer for you"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6150819"}, "edited": false, "score": 1, "creation_date": 1479940793, "post_id": 40775269, "comment_id": 68774446, "body": "Oops, left that part out.  App.js in dist/ is the transpiled Webpack output."}], "tags": [], "owner": {"reputation": 44, "user_id": 3784472, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001695102763/picture?type=large", "display_name": "eHattori", "link": "https://stackoverflow.com/users/3784472/ehattori"}, "is_accepted": false, "score": 0, "last_activity_date": 1479940525, "creation_date": 1479940525, "answer_id": 40775269, "question_id": 40775209, "link": "https://stackoverflow.com/questions/40775209/angular-controller-as-es6-class-ngareq-argument-controller-is-not-a-func/40775269#40775269", "title": "Angular Controller as ES6 Class: &quot;[ng:areq] Argument ***Controller is not a function, got undefined&quot;", "body": "<p>Try add your controller.js in index.html</p>\n\n<pre><code>&lt;script src=\"../dist/login/login.controller.js\"&gt;&lt;/script&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6150819"}, "edited": false, "score": 0, "creation_date": 1479949653, "post_id": 40775614, "comment_id": 68776766, "body": "That was it.  The only reason the service was working was because I had ran that function before the config.  Thanks much, that would have turned into a giant rabbit hole."}], "tags": [], "owner": {"reputation": 127336, "user_id": 283366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ad213d8adabe4b64c2d53c5e0e3cab4?s=128&d=identicon&r=PG", "display_name": "Phil", "link": "https://stackoverflow.com/users/283366/phil"}, "is_accepted": true, "score": 4, "last_activity_date": 1479942426, "creation_date": 1479942426, "answer_id": 40775614, "question_id": 40775209, "link": "https://stackoverflow.com/questions/40775209/angular-controller-as-es6-class-ngareq-argument-controller-is-not-a-func/40775614#40775614", "title": "Angular Controller as ES6 Class: &quot;[ng:areq] Argument ***Controller is not a function, got undefined&quot;", "body": "<p>Move these three calls</p>\n\n<pre><code>login(ngModule);\ntodos(ngModule);\ntodo(ngModule);\n</code></pre>\n\n<p><strong>outside</strong> the <code>config</code> function; they don't belong in there at all.</p>\n\n<pre><code>// in config.js\n\nexport default ngModule =&gt; {\n  httpAuthInterceptor(ngModule);\n  services(ngModule);\n  login(ngModule);\n  todos(ngModule);\n  todo(ngModule);\n\n  ngModule.constant('CONSTANTS', constants);\n\n  ngModule.config(($stateProvider, $urlRouterProvider, $httpProvider) =&gt; {\n    // etc\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6150819"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 40775614, "answer_count": 2, "score": 3, "last_activity_date": 1479942426, "creation_date": 1479940217, "last_edit_date": 1479941563, "question_id": 40775209, "link": "https://stackoverflow.com/questions/40775209/angular-controller-as-es6-class-ngareq-argument-controller-is-not-a-func", "title": "Angular Controller as ES6 Class: &quot;[ng:areq] Argument ***Controller is not a function, got undefined&quot;", "body": "<p>Attempting to build a basic Angular todo application w/ES6.  As far as I can tell, the controller should be registering, but I continue to get the title error when routed to the associated state.</p>\n\n<p>*App.js referenced in index is the Babel transpiled Webpack output</p>\n\n<p><strong>index.html</strong></p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;link rel=\"stylesheet\" href=\"node_modules/angular-material/angular-material.css\" /&gt;\n  &lt;/head&gt;\n  &lt;body ng-app=\"todoApp\"&gt;\n    &lt;script src=\"../dist/app.js\"&gt;&lt;/script&gt;\n    &lt;div ui-view&gt;&lt;/div&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><strong>app.js</strong></p>\n\n<pre><code>import angular from 'angular';\nimport uiRouter from 'angular-ui-router';\nimport ngStorage from 'angular-storage';\nimport ngMaterial from 'angular-material';\nimport ngAnimate from 'angular-animate';\nimport ngAria from 'angular-aria';\n\nimport config from './config/config'\n\n(() =&gt; {\n  const ngModule = angular.module('todoApp', [uiRouter, ngStorage, ngAnimate, ngAria, ngMaterial]);\n  config(ngModule);\n})();\n</code></pre>\n\n<p><strong>config.js</strong></p>\n\n<pre><code>import httpAuthInterceptor from './interceptors/httpAuthInterceptor';\nimport constants from './constants';\n\nimport login from '../login/index';\nimport todos from '../todos/index';\nimport todo from '../todos/todo/index';\nimport services from '../services/index';\n\nexport default ngModule =&gt; {\n  httpAuthInterceptor(ngModule);\n  services(ngModule);\n\n  ngModule.constant('CONSTANTS', constants);\n\n  ngModule.config(($stateProvider, $urlRouterProvider, $httpProvider) =&gt; {\n    $urlRouterProvider.otherwise('/login');\n\n    $stateProvider\n      .state('login', {\n        url: '/login',\n        templateUrl: 'app/login/login.html',\n        controller: 'loginController as vm'\n      })\n      .state('todos', {\n        url: '/todos',\n        templateUrl: 'app/todos/todos.html',\n        controller: 'todosController as vm'\n      });\n\n    $httpProvider.interceptors.push('httpAuthInterceptor');\n\n    login(ngModule);\n    todos(ngModule);\n    todo(ngModule);\n  });\n}\n</code></pre>\n\n<p><strong>login/index.js</strong></p>\n\n<pre><code>import controller from \"./login.controller\";\nimport service from \"./login.service\";\n\nexport default ngModule =&gt; {\n  controller(ngModule);\n  service(ngModule);\n};\n</code></pre>\n\n<p><strong>login/login.controller.js</strong></p>\n\n<pre><code>export default ngModule =&gt; {\n  let controllerName = 'loginController';\n\n  class loginController {\n    constructor(loginService) {\n      this.loginService = loginService;\n      this.username;\n      this.password;\n    }\n  }\n\n  ngModule.controller(controllerName, loginController);\n};\n</code></pre>\n\n<p>More confusing to me is that the service below loads fine:</p>\n\n<p><strong>services/index.js</strong></p>\n\n<pre><code>import session from \"./session.service\";\n\nexport default ngModule =&gt; {\n  session(ngModule);\n};\n</code></pre>\n\n<p><strong>services/session.service.js</strong></p>\n\n<pre><code>export default ngModule =&gt; {\n  let providerName = 'sessionService';\n\n  class sessionService {\n    constructor(store, CONSTANTS) {\n      this.CONSTANTS = CONSTANTS;\n      this.store = store;\n\n      this.currentSessionToken;\n\n      this.init();\n    }\n\n    init() {\n      this.currentSessionToken = this.retrieveSession();\n      console.log(this.currentSessionToken)\n    }\n\n    storeSession (token) {\n      this.store.set(this.CONSTANTS.JWT_TOKEN_KEY, token);\n      this.currentSessionToken = token;\n    }\n\n    retrieveSession() {\n      return this.store.get(this.CONSTANTS.JWT_TOKEN_KEY);\n    }\n\n    isAuthenticated() {\n      let token = this.retrieveSession();\n      if(token) {\n        let tokenParams = _parseJwt(token);\n        return Math.round(new Date().getTime() / 1000) &lt;= tokenParams.exp;\n      } else {\n        return false;\n      }\n    }\n  }\n\n  ngModule.service(providerName, sessionService);\n\n  let _parseJwt = function(token) {\n    let base64Data = token.split('.')[1];\n    let base64 = base64Data.replace('-', '+').replace('_', '/');\n    return JSON.parse(this.$window.atob(base64));\n  }.bind(sessionService);\n}\n</code></pre>\n"}, {"tags": ["javascript", "reactjs"], "comments": [{"owner": {"reputation": 699354, "user_id": 218196, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4P5DY.jpg?s=128&g=1", "display_name": "Felix Kling", "link": "https://stackoverflow.com/users/218196/felix-kling"}, "edited": false, "score": 0, "creation_date": 1479940127, "post_id": 40775166, "comment_id": 68774192, "body": "Do you expect <code>channels</code> in <code>main.js</code> to refer to the <code>channels</code> variable in <code>App.js</code>? If so you have to export it from <code>App.js</code> and import it in <code>main.js</code>. Or defined <code>channles</code> in <code>main.js</code> instead of <code>App.js</code>. This has nothing to do with React in particular btw, that&#39;s simply how JavaScript modules work."}, {"owner": {"reputation": 8754, "user_id": 6719819, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/HmF9I.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/6719819/daniel"}, "reply_to_user": {"reputation": 699354, "user_id": 218196, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4P5DY.jpg?s=128&g=1", "display_name": "Felix Kling", "link": "https://stackoverflow.com/users/218196/felix-kling"}, "edited": false, "score": 0, "creation_date": 1479941103, "post_id": 40775166, "comment_id": 68774524, "body": "Felix, thank for your help. Please go ahead and post your answer in such a way that I can check it off as the correct one. Also, I was simply making it clear I was working on an Reactjs app, not so much that it had something to do with React. Thank you again."}], "answers": [{"tags": [], "owner": {"reputation": 4774, "user_id": 1514572, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8e44332313cc7335e98748739977ea5d?s=128&d=identicon&r=PG", "display_name": "monners", "link": "https://stackoverflow.com/users/1514572/monners"}, "is_accepted": true, "score": 3, "last_activity_date": 1479943713, "creation_date": 1479943713, "answer_id": 40775821, "question_id": 40775166, "link": "https://stackoverflow.com/questions/40775166/how-do-i-correct-this-uncaught-rererenceerror-in-reactj/40775821#40775821", "title": "How do I correct this Uncaught RererenceError in Reactj?", "body": "<p>As mentioned by @FelixKling, the <code>channels</code> variable isn't available to your <code>main.js</code> file, as it's not being exported from <code>App.js</code>.  The simplest way to share this across both files would be to export is as a <em>non-default</em> export, then pull it in as part of your <code>Channels</code> import in <code>Main.js</code></p>\n\n<p>Like so:</p>\n\n<pre><code>// App.js\nlet channels = [\n    {name: 'Hardware Support'},\n    {name: 'Software Support'}\n];\n\n...\n\nexport channels; // this is the variable export\nexport default Channel; // this is the class export, which will be the default if no specific export is declared in your import\n\n// Main.js\nimport Channel, { channels } from './App';\n// `Channel` class is imported as usual, along with non-default `channels` export\n</code></pre>\n\n<p>You should also use <code>const</code> instead of <code>let</code> in your <code>channels</code> declaration, as you're not reassigning it.</p>\n\n<p><code>const channels = ...</code></p>\n"}], "owner": {"reputation": 8754, "user_id": 6719819, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/HmF9I.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/6719819/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 40775821, "answer_count": 1, "score": 0, "last_activity_date": 1479943713, "creation_date": 1479940005, "question_id": 40775166, "link": "https://stackoverflow.com/questions/40775166/how-do-i-correct-this-uncaught-rererenceerror-in-reactj", "title": "How do I correct this Uncaught RererenceError in Reactj?", "body": "<p>I started getting this error when I added the channels array as a way to mock a list of channels in the beginning phases of my application. </p>\n\n<p>index.js:7852 Uncaught ReferenceError: channels is not defined(\u2026)</p>\n\n<p>Here is the App.js file:</p>\n\n<pre><code>import React from 'react';\nimport ReactDOM from 'react-dom';\n\nlet channels = [\n    {name: 'Hardware Support'},\n    {name: 'Software Support'}\n];\n\nclass Channel extends React.Component {\n    onClick(){\n        console.log('I was clicked', this.props.name);\n    }\n    render(){\n        return (\n            &lt;li onClick={this.onClick.bind(this)}&gt;{this.props.name}&lt;/li&gt;\n        )\n    }\n}\n\nexport default Channel\n</code></pre>\n\n<p>Here is the main.js file:</p>\n\n<pre><code>import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Channel from './App';\n\nclass ChannelList extends React.Component {\n    render(){\n        return (\n            &lt;ul&gt;\n                {this.props.channels.map(channel =&gt; {\n                        return (\n                            &lt;Channel name={channel.name} /&gt;\n                        )\n                    }\n                )}\n            &lt;/ul&gt;\n        )\n    }\n}\n\nclass ChannelForm extends React.Component{\n    onChange(e){\n        console.log(e.target.value);\n    }\n    onSubmit(e){\n\n    }\n    render(){\n        return (\n            &lt;form onSubmit={this.onSubmit.bind(this)}&gt;\n                &lt;input type='text' onChange={this.onChange.bind(this)} /&gt;\n            &lt;/form&gt;\n        )\n    }\n}\n\nclass ChannelSection extends React.Component {\n    render(){\n        return(\n            &lt;div&gt;\n                &lt;ChannelList channels={channels}/&gt;\n                &lt;ChannelForm /&gt;\n            &lt;/div&gt;\n        );\n    }\n}\n\nReactDOM.render(&lt;ChannelSection /&gt;, document.getElementById('app'));\n</code></pre>\n"}, {"tags": ["javascript", "augmented-reality", "awe.js"], "comments": [{"owner": {"reputation": 14741, "user_id": 1627271, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0c100506c381ec6729a67ba8a1a93497?s=128&d=identicon&r=PG&f=1", "display_name": "choz", "link": "https://stackoverflow.com/users/1627271/choz"}, "edited": false, "score": 0, "creation_date": 1495784202, "post_id": 40775152, "comment_id": 75405421, "body": "Have you solved this yet? And please provide <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>"}], "owner": {"reputation": 157, "user_id": 1750398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1e6ee052eabc05515bd80927f3dabd9?s=128&d=identicon&r=PG", "display_name": "slayeroffrog", "link": "https://stackoverflow.com/users/1750398/slayeroffrog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1479941058, "creation_date": 1479939929, "last_edit_date": 1479941058, "question_id": 40775152, "link": "https://stackoverflow.com/questions/40775152/aplying-a-video-as-a-texture-in-awe-js", "title": "aplying a video as a texture in awe.js", "body": "<p>I am trying to make it so that when a marker is seen it will open a plane with a video. so far the marker works well and the plane opens with the video. however the video doesn't auto play in either mp4 or webm formats. I have read suggestion about having the button set to make the video play, however I am unsure as to how to do it. any examples on how to do this would be appreciated.</p>\n"}, {"tags": ["javascript", "facebook", "facebook-graph-api"], "comments": [{"owner": {"reputation": 81732, "user_id": 1427878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db5fbf44c0eeeaf38c4e4a54ce9eff7a?s=128&d=identicon&r=PG&f=1", "display_name": "CBroe", "link": "https://stackoverflow.com/users/1427878/cbroe"}, "edited": false, "score": 0, "creation_date": 1479975984, "post_id": 40775110, "comment_id": 68785548, "body": "After a re-scrape, debug tool currently shows warnings: <i>\u201cImage Unavailable - Provided og:image, <code>https:&#47;&#47;s3.amazonaws.com&#47;assets.investx.com&#47;SpotifyLogoTrans&zwnj;&#8203;parent.png</code> could not be downloaded because it exceeded the maximum allowed sized of 8Mb or your server was too slow to respond.\u201d</i>"}, {"owner": {"reputation": 81732, "user_id": 1427878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db5fbf44c0eeeaf38c4e4a54ce9eff7a?s=128&d=identicon&r=PG&f=1", "display_name": "CBroe", "link": "https://stackoverflow.com/users/1427878/cbroe"}, "edited": false, "score": 0, "creation_date": 1479976209, "post_id": 40775110, "comment_id": 68785665, "body": "And after scraping that URL (of the image itself) once, the warning for the main document is gone."}, {"owner": {"reputation": 8246, "user_id": 324516, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/KvVGV.jpg?s=128&g=1", "display_name": "Ryan Ternier", "link": "https://stackoverflow.com/users/324516/ryan-ternier"}, "reply_to_user": {"reputation": 81732, "user_id": 1427878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db5fbf44c0eeeaf38c4e4a54ce9eff7a?s=128&d=identicon&r=PG&f=1", "display_name": "CBroe", "link": "https://stackoverflow.com/users/1427878/cbroe"}, "edited": false, "score": 0, "creation_date": 1480015678, "post_id": 40775110, "comment_id": 68809063, "body": "Facebook seems to lag on the first scrape, but after that, the developer tools show the proper result. Just their JavaScript SDK isn&#39;t pulling the right image."}, {"owner": {"reputation": 81732, "user_id": 1427878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db5fbf44c0eeeaf38c4e4a54ce9eff7a?s=128&d=identicon&r=PG&f=1", "display_name": "CBroe", "link": "https://stackoverflow.com/users/1427878/cbroe"}, "edited": false, "score": 0, "creation_date": 1480015860, "post_id": 40775110, "comment_id": 68809127, "body": "Try and see if specifying the image dimensions as well via OG tags helps, <a href=\"http://stackoverflow.com/a/30361572/1427878\">stackoverflow.com/a/30361572/1427878</a>"}, {"owner": {"reputation": 8246, "user_id": 324516, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/KvVGV.jpg?s=128&g=1", "display_name": "Ryan Ternier", "link": "https://stackoverflow.com/users/324516/ryan-ternier"}, "reply_to_user": {"reputation": 81732, "user_id": 1427878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db5fbf44c0eeeaf38c4e4a54ce9eff7a?s=128&d=identicon&r=PG&f=1", "display_name": "CBroe", "link": "https://stackoverflow.com/users/1427878/cbroe"}, "edited": false, "score": 0, "creation_date": 1480117865, "post_id": 40775110, "comment_id": 68847304, "body": "@CBroe Tried that, no beans. It&#39;s quite weird. I&#39;ve been seeing this happen a lot with the facebook JS API on multiple sites, so it&#39;s most likely something they&#39;ve done."}], "owner": {"reputation": 8246, "user_id": 324516, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/KvVGV.jpg?s=128&g=1", "display_name": "Ryan Ternier", "link": "https://stackoverflow.com/users/324516/ryan-ternier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 283, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479939741, "creation_date": 1479939741, "question_id": 40775110, "link": "https://stackoverflow.com/questions/40775110/facebook-javascript-api-share-is-pulling-safe-image-instead-of-ogimage", "title": "FaceBook - Javascript API Share is pulling safe_image instead of og:image", "body": "<p>I'm have a strange issue with the FaceBook Javascrip API.  When i use the API to invoke a Share popup, the window rendered by FaceBook is using an image it should never use.</p>\n\n<p>When I use Facebook's Sharing Debugger I get the following:\n<a href=\"https://i.stack.imgur.com/yGpAt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yGpAt.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://developers.facebook.com/tools/debug/sharing/?q=http%3A%2F%2Fwww.investx.com%2Fdeals%2Fspotify\" rel=\"nofollow noreferrer\">https://developers.facebook.com/tools/debug/sharing/?q=http%3A%2F%2Fwww.investx.com%2Fdeals%2Fspotify</a></p>\n\n<p>When I go to my website (www.investx.com/deals or www.investx.com/deals/spotify) and click the facebook share it is showing me:</p>\n\n<p><a href=\"https://i.stack.imgur.com/6xMhB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6xMhB.png\" alt=\"enter image description here\"></a></p>\n\n<p>When inspecting the share popup I see that FaceBook is pulling a weird image from a blog reference:</p>\n\n<p><a href=\"https://i.stack.imgur.com/AnNID.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AnNID.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is the meta tags for my page:</p>\n\n<pre><code>  &lt;meta property=\"og:url\" content=\"http://www.investx.com/deals/spotify\" /&gt;\n    &lt;meta property=\"og:type\" content=\"website\" /&gt;\n    &lt;meta property=\"og:title\" content=\"Spotify 4 - OFFERING | Company Snapshot\" /&gt;\n    &lt;meta property=\"og:description\" content=\"InvestX.Platform.Model.DealManagement.Deal?.DealCardForCurrentUser?.ShortDescription\" /&gt;\n    &lt;meta property=\"og:image\" content=\"https://s3.amazonaws.com/assets.investx.com/SpotifyLogoTransparent.png\" /&gt;\n    &lt;meta property=\"og:image:url\"  content=\"https://s3.amazonaws.com/assets.investx.com/SpotifyLogoTransparent.png\" /&gt;\n</code></pre>\n"}, {"tags": ["javascript", "angularjs", "modernizr"], "answers": [{"tags": [], "owner": {"reputation": 109, "user_id": 3869375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6df3f15a9fe6511a16478580a47e20d0?s=128&d=identicon&r=PG&f=1", "display_name": "nlarche", "link": "https://stackoverflow.com/users/3869375/nlarche"}, "is_accepted": false, "score": 0, "last_activity_date": 1480004550, "creation_date": 1480004550, "answer_id": 40791028, "question_id": 40775092, "link": "https://stackoverflow.com/questions/40775092/angularjs-with-modernizr-not-working/40791028#40791028", "title": "AngularJS with Modernizr not working", "body": "<p>I think you have to had the event to the $window object</p>\n\n<p>in your link function in 'resizeAction' directive you can try this : </p>\n\n<pre><code>$window.addEventListener('resize', function () {\n        $scope.desktopOrMobile();\n });\n\n// Don't forget to destroy it\n$scope.$on('$destroy', function () {\n    $window.removeEventListener('resize');\n});\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 4019727, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/hzFL5.png?s=128&g=1", "display_name": "kneles90", "link": "https://stackoverflow.com/users/4019727/kneles90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 480, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481667345, "creation_date": 1479939680, "last_edit_date": 1481667345, "question_id": 40775092, "link": "https://stackoverflow.com/questions/40775092/angularjs-with-modernizr-not-working", "title": "AngularJS with Modernizr not working", "body": "<p>I'm using AngularJS and Modernizr in order to detect media queries and call a function on every window / viewport resize. What I'm trying to do is set an element display depending on the desktop or mobile query - some elements ought to display on mobile only, others on desktop only. </p>\n\n<p>A browser does detect element show / hide functionality on initial load, however I can't make it work on browser resize. </p>\n\n<p>Controller: </p>\n\n<pre><code>function MyCtrl($scope, Modernizr) {\n    $scope.desktopOrMobile = function () {\n        // mobile logic\n        if (Modernizr.mq('(max-width: 991px)')) {\n            // show only for mobile, hide desktop\n            $scope.showD = false;\n            $scope.showM = true;    \n        };\n        // desktop logic\n        if (Modernizr.mq('(min-width: 992px)'))  {\n            // show only for desktop, hide mobile\n            $scope.showD = true;\n            $scope.showM = false;\n        };\n    };\n    $scope.desktopOrMobile();\n}\n</code></pre>\n\n<p>Directive for resizing: </p>\n\n<pre><code>myApp.directive('resizeAction', ['$window', 'Modernizr', function($window, Modernizr) {\n    return {\n        restrict: 'A', // A = Attribute\n        link: function($scope, element, attr) {\n            angular.element($window)\n            .bind('resize', function () {\n                $scope.desktopOrMobile();\n            });\n        }\n    };\n}]);    \n</code></pre>\n\n<p>To show you what I mean in details, here's a fiddle - <a href=\"http://jsfiddle.net/knele90/Lvc0u55v/12475/\" rel=\"nofollow noreferrer\">http://jsfiddle.net/knele90/Lvc0u55v/12475/</a></p>\n\n<p>Any help would be appreciated, tnx!</p>\n"}, {"tags": ["javascript", "concurrency", "promise", "es6-promise"], "comments": [{"owner": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "edited": false, "score": 0, "creation_date": 1480296392, "post_id": 40775088, "comment_id": 68889095, "body": "Your code is correct - please provide more information about promises A and C, and probably the most important definition of function B - I suspect function B is not returning a promise"}], "answers": [{"comments": [{"owner": {"reputation": 102, "user_id": 5262391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fcdeb677cbebc3330b15dceaa692acf?s=128&d=identicon&r=PG", "display_name": "scott", "link": "https://stackoverflow.com/users/5262391/scott"}, "edited": false, "score": 0, "creation_date": 1480293947, "post_id": 40775304, "comment_id": 68888620, "body": "4castle, as I just mentioned to Jaromanda, I apologize I should&#39;ve specified that B is a function that returns a promise. That said, the solution you proposed gives the same results as Jaromanda&#39;s and does not appear to work for me. Instead of returning A and C&#39;s results, it returns the B function itself and C&#39;s results."}], "tags": [], "owner": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "is_accepted": false, "score": 1, "last_activity_date": 1479940663, "creation_date": 1479940663, "answer_id": 40775304, "question_id": 40775088, "link": "https://stackoverflow.com/questions/40775088/concurrent-chained-javascript-promises/40775304#40775304", "title": "Concurrent chained javascript promises", "body": "<p>To chain promises, you can use <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/then\" rel=\"nofollow noreferrer\"><code>.then()</code></a>, but the parameter needs to be a <strong>function</strong> that returns the next Promise. The correct code would be:</p>\n\n<pre><code>var runPromises = [];\nrunPromises.push(A.then(() =&gt; B));\nrunPromises.push(C);\n\nPromise.all(runPromises).then(values =&gt; console.log(values));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 102, "user_id": 5262391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fcdeb677cbebc3330b15dceaa692acf?s=128&d=identicon&r=PG", "display_name": "scott", "link": "https://stackoverflow.com/users/5262391/scott"}, "edited": false, "score": 0, "creation_date": 1480293881, "post_id": 40775318, "comment_id": 68888599, "body": "Jaromanda, I apologize I should&#39;ve specified that B is a function that returns a promise. That said, the solution you proposed does not appear to work for me. Instead of returning A and C&#39;s results, it returns the B function and C&#39;s results."}, {"owner": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "reply_to_user": {"reputation": 102, "user_id": 5262391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fcdeb677cbebc3330b15dceaa692acf?s=128&d=identicon&r=PG", "display_name": "scott", "link": "https://stackoverflow.com/users/5262391/scott"}, "edited": false, "score": 0, "creation_date": 1480294045, "post_id": 40775318, "comment_id": 68888642, "body": "of course the result is B and C, those are the two promises you <b>NEED</b> to wait for before continuing with D, B doesn&#39;t get executed until A completes - this matches the diagram in your question 100%. The only flaw in your original question was that you were using <code>.then</code> wrong."}, {"owner": {"reputation": 102, "user_id": 5262391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fcdeb677cbebc3330b15dceaa692acf?s=128&d=identicon&r=PG", "display_name": "scott", "link": "https://stackoverflow.com/users/5262391/scott"}, "edited": false, "score": 0, "creation_date": 1480294338, "post_id": 40775318, "comment_id": 68888707, "body": "But C is a fulfilled promise when console.log is run whereas B is just returning the function. I&#39;m trying to determine how to have B also be a fulfilled promise so I can get the results of promise&#39;s B and C before console.log executes."}, {"owner": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "reply_to_user": {"reputation": 102, "user_id": 5262391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fcdeb677cbebc3330b15dceaa692acf?s=128&d=identicon&r=PG", "display_name": "scott", "link": "https://stackoverflow.com/users/5262391/scott"}, "edited": false, "score": 0, "creation_date": 1480294402, "post_id": 40775318, "comment_id": 68888730, "body": "is B a promise or a function that returns a promise? what about A and C - perhaps you need to be more clear in the question. You SAY they are Promises in the question"}, {"owner": {"reputation": 102, "user_id": 5262391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fcdeb677cbebc3330b15dceaa692acf?s=128&d=identicon&r=PG", "display_name": "scott", "link": "https://stackoverflow.com/users/5262391/scott"}, "edited": false, "score": 0, "creation_date": 1480294707, "post_id": 40775318, "comment_id": 68888802, "body": "My apologies, I updated the question right before commenting on your answer. B is a function that returns a promise but the updated answer you provided now returns &quot;undefined&quot; instead of function."}, {"owner": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "reply_to_user": {"reputation": 102, "user_id": 5262391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fcdeb677cbebc3330b15dceaa692acf?s=128&d=identicon&r=PG", "display_name": "scott", "link": "https://stackoverflow.com/users/5262391/scott"}, "edited": false, "score": 0, "creation_date": 1480295188, "post_id": 40775318, "comment_id": 68888887, "body": "I&#39;ve updated the answer. Your original code is correct if B is a function. so the question really is, why does B wait for C to complete?"}, {"owner": {"reputation": 102, "user_id": 5262391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fcdeb677cbebc3330b15dceaa692acf?s=128&d=identicon&r=PG", "display_name": "scott", "link": "https://stackoverflow.com/users/5262391/scott"}, "edited": false, "score": 0, "creation_date": 1480295418, "post_id": 40775318, "comment_id": 68888926, "body": "Hahaha that&#39;s why I&#39;m confused too. I need both B and C&#39;s results for D to run. I don&#39;t need B to wait on C to complete though. David&#39;s answer appears to work in the example he created but I don&#39;t understand the subtle difference between his code and mine. And to comment on your edited answer, yes, the values shown in console log return A&#39;s fulfilled promise and C&#39;s fulfilled promise but B&#39;s fulfilled promise is not returned in the console.log"}, {"owner": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "reply_to_user": {"reputation": 102, "user_id": 5262391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fcdeb677cbebc3330b15dceaa692acf?s=128&d=identicon&r=PG", "display_name": "scott", "link": "https://stackoverflow.com/users/5262391/scott"}, "edited": false, "score": 0, "creation_date": 1480295710, "post_id": 40775318, "comment_id": 68888976, "body": "<code>the values shown in console log return A&#39;s fulfilled promise and C&#39;s fulfilled promise</code> - with my code, that&#39;s <b>IMPOSSIBLE</b> - added a snippet to demonstrate"}, {"owner": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "reply_to_user": {"reputation": 102, "user_id": 5262391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fcdeb677cbebc3330b15dceaa692acf?s=128&d=identicon&r=PG", "display_name": "scott", "link": "https://stackoverflow.com/users/5262391/scott"}, "edited": false, "score": 1, "creation_date": 1480296247, "post_id": 40775318, "comment_id": 68889063, "body": "By the way, the upshot is, that there was nothing wrong with your original code - function B get called with the resolved value of promise A and returns a Promise. <code>Promise.all</code> waits for both B() and C to be resolved, the console.log should log the correct promises. This all points to the definitions of <code>promise A</code>, <code>function B</code> or <code>promise C</code> being incorrect. As you have not provided this information, one can only guess what the real problem is"}, {"owner": {"reputation": 102, "user_id": 5262391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fcdeb677cbebc3330b15dceaa692acf?s=128&d=identicon&r=PG", "display_name": "scott", "link": "https://stackoverflow.com/users/5262391/scott"}, "edited": false, "score": 0, "creation_date": 1480297880, "post_id": 40775318, "comment_id": 68889382, "body": "Turns out that my B function was resolving with the exact same values as A&#39;s passed in data before my HTTP calls in B were able to enrich A&#39;s data. Doh! Thanks for all the help Jaromanda!"}], "tags": [], "owner": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "is_accepted": true, "score": 2, "last_activity_date": 1480295919, "last_edit_date": 1480295919, "creation_date": 1479940699, "answer_id": 40775318, "question_id": 40775088, "link": "https://stackoverflow.com/questions/40775088/concurrent-chained-javascript-promises/40775318#40775318", "title": "Concurrent chained javascript promises", "body": "<p>if A, B and C are promises, then <code>A.then(B)</code> will return A as the result. The argument to <code>.then</code> must be FUNCTION, not a promise</p>\n\n<p>What you want to do is something like</p>\n\n<pre><code>Promise.all([A.then(result=&gt;B), C]).then(values =&gt; console.log(values));\n</code></pre>\n\n<blockquote>\n  <p>If B is a FUNCTION (as per the comment below) rather than a PROMISE (as per the question), it's a simple change:</p>\n</blockquote>\n\n<pre><code>Promise.all([A.then(result=&gt;B()), C]).then(values =&gt; console.log(values));\n//---------------------------^^\n</code></pre>\n\n<p>or more simply</p>\n\n<pre><code>Promise.all([A.then(B), C]).then(values =&gt; console.log(values));\n</code></pre>\n\n<p>which is basically what you had in the question - so I'm now confused as to what the problem is? Is it the values shown in the console.log?</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var delay = (timeout, value) =&gt; new Promise(resolve =&gt; {\r\n    setTimeout(() =&gt; {resolve(value); console.log('done', value);}, timeout); \r\n    console.log('begin', value)\r\n});\r\n\r\n\r\nvar A = delay(3000, 'valueOfA'); // A is a Promise\r\nvar C = delay(2000, 'valueOfC'); // C is a Promise\r\nvar B = valA =&gt; {\r\n    console.log('B called with', valA);\r\n    return delay(1000, valA + ':valueOfB'); // include valA to show that the resolved value of B depends on the resolved value of A\r\n} // B is a function that returns a Promise and uses the resolved value of A as input\r\nPromise.all([A.then(B),C]).then(values =&gt; console.log(values));</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1479942929, "post_id": 40775652, "comment_id": 68775108, "body": "Btw, <code>setTimeout</code> accepts the callback function parameters, so you can simplify your calls to <code>setTimeout(r, 1000, &quot;c done&quot;);</code>"}, {"owner": {"reputation": 36, "user_id": 7202535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OopyY.jpg?s=128&g=1", "display_name": "David Braden", "link": "https://stackoverflow.com/users/7202535/david-braden"}, "reply_to_user": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1479943178, "post_id": 40775652, "comment_id": 68775173, "body": "nice, @zerkms, I didn&#39;t know that : ). Updated answer."}, {"owner": {"reputation": 102, "user_id": 5262391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fcdeb677cbebc3330b15dceaa692acf?s=128&d=identicon&r=PG", "display_name": "scott", "link": "https://stackoverflow.com/users/5262391/scott"}, "edited": false, "score": 0, "creation_date": 1480294771, "post_id": 40775652, "comment_id": 68888817, "body": "David, thanks for the response -- I entirely understand your code and it works fine but don&#39;t understand why it functions differently than mine. If I&#39;m passing in a.then(b) in place of where you pass in b (that is doing a.then(function_i&#39;ve_defined_as_b), whats the difference?"}, {"owner": {"reputation": 102, "user_id": 5262391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fcdeb677cbebc3330b15dceaa692acf?s=128&d=identicon&r=PG", "display_name": "scott", "link": "https://stackoverflow.com/users/5262391/scott"}, "edited": false, "score": 0, "creation_date": 1480295928, "post_id": 40775652, "comment_id": 68889006, "body": "I&#39;m certainly not opposed to writing it this way if it&#39;s the proper way to do it syntactically but it seems like the code would look much cleaner if I could keep B from exclusively relying on A in it&#39;s definition and instead did something along the lines of a.then(b) in the Promise.all"}], "tags": [], "owner": {"reputation": 36, "user_id": 7202535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OopyY.jpg?s=128&g=1", "display_name": "David Braden", "link": "https://stackoverflow.com/users/7202535/david-braden"}, "is_accepted": false, "score": 1, "last_activity_date": 1479943140, "last_edit_date": 1479943140, "creation_date": 1479942644, "answer_id": 40775652, "question_id": 40775088, "link": "https://stackoverflow.com/questions/40775088/concurrent-chained-javascript-promises/40775652#40775652", "title": "Concurrent chained javascript promises", "body": "<p>As mentioned by the other answers, if we assume \"B\" is a function that sets up a promise, and not a promise itself, you are correct that \"B\" should execute without relying on \"C\". You can prove this out with a small test:</p>\n\n<pre><code>let start = Date.now();\nfunction debug(p) {\n  p.then((r) =&gt; {\n    let secs = ((Date.now() - start) / 1000).toFixed(2)\n    console.log(secs + \"s: \" + r);\n  });\n}\n\nlet a = new Promise((r) =&gt; {\n  setTimeout(r, 0, \"a done\");\n});\ndebug(a);\n\nlet b = a.then((res) =&gt; {\n  return new Promise((r) =&gt; {\n    setTimeout(r, 0, res + \":b done\");\n  });\n});\ndebug(b);\n\nlet c = new Promise((r) =&gt; {\n  setTimeout(r, 1000, \"c done\");\n});\ndebug(c);\n\nPromise.all([b, c]).then((res) =&gt; {\n  console.log(\"result: \" + JSON.stringify(res));\n});\n</code></pre>\n\n<p>Results in:</p>\n\n<pre><code>0.00s: a done\n0.01s: a done:b done\n1.00s: c done\nresult: [\"a done:b done\",\"c done\"]\n</code></pre>\n"}], "owner": {"reputation": 102, "user_id": 5262391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fcdeb677cbebc3330b15dceaa692acf?s=128&d=identicon&r=PG", "display_name": "scott", "link": "https://stackoverflow.com/users/5262391/scott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1140, "favorite_count": 1, "accepted_answer_id": 40775318, "answer_count": 3, "score": 1, "last_activity_date": 1480298665, "creation_date": 1479939659, "last_edit_date": 1480298665, "question_id": 40775088, "link": "https://stackoverflow.com/questions/40775088/concurrent-chained-javascript-promises", "title": "Concurrent chained javascript promises", "body": "<p>I have javascript promises A and C where B is a function that returns a promise. This is how I'd like them to flow:</p>\n\n<pre><code>A---&gt;B---&gt;\nC--------&gt;\n          D------&gt;\n</code></pre>\n\n<p>B utilizes output from A, and D utilizes output from B and C</p>\n\n<p>My current code looks roughly as so:</p>\n\n<pre><code>var runPromises = [];\nrunPromises.push(A.then(B));\nrunPromises.push(C);\n\nPromise.all(runPromises).then(values =&gt; console.log(values));\n</code></pre>\n\n<p>What I'm seeing happen is A and C execute but B does not until after A and C are logged out. What is the proper pattern here for execution? Do A and B need to be put in an encompassing promise?</p>\n\n<blockquote>\n  <p>To add on to my original question to explain Jaromanda's correct answer: My B function was defined roughly as so:</p>\n</blockquote>\n\n<pre><code>var B = function(inputA){\n    return new Promise(function(resolve, reject){\n        http.get(site, function(done){\n            inputA['site'] = done;\n        }\n    resolve(inputA);\n</code></pre>\n\n<p>This was resolving inputA before the http.get could return and enrich inputA.</p>\n"}, {"tags": ["javascript", "reactjs", "jestjs", "babel-jest"], "answers": [{"tags": [], "owner": {"reputation": 325, "user_id": 2179871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64a92aca1b36cd98b8bfb931870a7a05?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/2179871/joe"}, "is_accepted": false, "score": 1, "last_activity_date": 1481037446, "creation_date": 1481037446, "answer_id": 40998738, "question_id": 40775074, "link": "https://stackoverflow.com/questions/40775074/jest-resolve-nested-module-resolving-wrong-path-cannot-find-module-react-dnd/40998738#40998738", "title": "jest-resolve nested module resolving wrong path: Cannot find module &#39;react-dnd&#39; from &#39;reactTags.js&#39;", "body": "<p>I'm having the same issue as well. Some things I've attempted:</p>\n\n<p>jest.unmock(module) at the top of the testing file\npolyfill the module in a Jest setup file\njest.mock(jest.fn() => {console.log('do something'))\nLastly, and this seemed to work, but I can't find documentation on this:</p>\n\n<p>At the top of the testing file:</p>\n\n<p>/**\n* @providesModule moduleName\n*/</p>\n\n<p>This seems to recognize the module I needed. Jest is supposed to implicitly see modules out of the box, but I haven't had that experience with it. </p>\n"}, {"tags": [], "owner": {"reputation": 777, "user_id": 4046699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3886c67afa149db2934e48da334ca9b6?s=128&d=identicon&r=PG", "display_name": "Horacio Alexandre Fernandes", "link": "https://stackoverflow.com/users/4046699/horacio-alexandre-fernandes"}, "is_accepted": false, "score": 0, "last_activity_date": 1487879221, "creation_date": 1487879221, "answer_id": 42424847, "question_id": 40775074, "link": "https://stackoverflow.com/questions/40775074/jest-resolve-nested-module-resolving-wrong-path-cannot-find-module-react-dnd/42424847#42424847", "title": "jest-resolve nested module resolving wrong path: Cannot find module &#39;react-dnd&#39; from &#39;reactTags.js&#39;", "body": "<p>I had a similar problem in my jest tests, with an external dependency of webpack.</p>\n\n<p>To solve that:</p>\n\n<ol>\n<li>I create a __mocks__ folder in the same level if __test__ folder.</li>\n<li>Inside that, I created a file with the same name of the dependency, in my case it was jquery ($.js).</li>\n<li>Inside my test file, I use jest.mock function to reference the mock external dependency: jest.mock('$'); </li>\n</ol>\n\n<p>from jest the docs:\n<a href=\"https://facebook.github.io/jest/docs/manual-mocks.html\" rel=\"nofollow noreferrer\">https://facebook.github.io/jest/docs/manual-mocks.html</a></p>\n\n<p>Hope it could help.</p>\n"}], "owner": {"reputation": 2656, "user_id": 1040828, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9c56b071cc0e7a980879f102a7177bbe?s=128&d=identicon&r=PG", "display_name": "Juan Carlos Moreno", "link": "https://stackoverflow.com/users/1040828/juan-carlos-moreno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2818, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1487879221, "creation_date": 1479939600, "last_edit_date": 1480928095, "question_id": 40775074, "link": "https://stackoverflow.com/questions/40775074/jest-resolve-nested-module-resolving-wrong-path-cannot-find-module-react-dnd", "title": "jest-resolve nested module resolving wrong path: Cannot find module &#39;react-dnd&#39; from &#39;reactTags.js&#39;", "body": "<p>I have a module I am trying to test. That module is using other external modules and jest is having a hard time resolving them. </p>\n\n<p>It is resolving the base path to:\n<em>./node_modules/react-tag-input/dist-modules/</em></p>\n\n<p>Instead of:\n<em>./node_modules/react-tag-input/node_modules/react-dnd</em></p>\n\n<p>Below, is a simplified version of what is happening:</p>\n\n<p><strong>Error:</strong></p>\n\n<pre><code>Cannot find module 'react-dnd' from 'reactTags.js'\n\n  at Resolver.resolveModule (node_modules/jest-cli/node_modules/jest-resolve/build/index.js:160:17)\n  at Object.&lt;anonymous&gt; (node_modules/react-tag-input/dist-modules/reactTags.js:13:17)\n  at Object.&lt;anonymous&gt; (src/tagger/eventtagger.js:5:404)\n</code></pre>\n\n<p>This is my test file:\n<strong>caseevent.test.js</strong></p>\n\n<pre><code>import EventTagger from './eventtagger.js';\n</code></pre>\n\n<p><strong>eventtagger.js</strong></p>\n\n<pre><code>import ReactTags from 'react-tag-input';\n</code></pre>\n\n<p><strong>package.json</strong></p>\n\n<pre><code>\"jest\": {\n   \"moduleFileExtensions\": [\n      \"js\",\n      \"jsx\"\n   ],\n   \"modulePaths\": [\n      \"&lt;rootDir&gt;\"\n   ],\n},\n\"dependencies\": {\n   \"babel-jest\": \"^17.0.2\",\n   \"flux\": \"^2.0.1\",\n   \"install\": \"^0.8.1\",\n   \"jest\": \"^17.0.3\",\n   \"lodash.flow\": \"^3.3.0\",\n   \"npm\": \"^3.10.6\",\n   \"object-assign\": \"^1.0.0\",\n   \"react\": \"^15.4.0\",\n   \"react-dnd\": \"git+https://github.com/jcrogel/react-dnd.git\",\n   \"react-dnd-html5-backend\": \"^2.0.0\",\n   \"react-dom\": \"^15.4.0\",\n   \"react-tag-input\": \"^4.4.0\",\n   \"react-tagcloud\": \"^0.6.1\"\n},\n\"devDependencies\": {\n   \"babel-cli\": \"^6.9.0\",\n   \"babel-core\": \"^6.14.0\",\n   \"babel-eslint\": \"^4.1.3\",\n   \"babel-loader\": \"^6.2.5\",\n   \"babel-preset-es2015\": \"^6.0.15\",\n   \"babel-preset-react\": \"^6.0.15\",\n   \"babel-preset-stage-0\": \"^6.0.15\",\n   \"babel-register\": \"^6.9.0\",\n   \"chai\": \"^3.5.0\",\n   \"enzyme\": \"^2.6.0\",\n   \"jest-cli\": \"^17.0.3\",\n   \"jsdom\": \"^9.4.0\",\n   \"lodash\": \"4.14.1\",\n   \"react-addons-test-utils\": \"^15.4.0\",\n   \"react-native\": \"^0.38.0\",\n   \"react-test-renderer\": \"15.4.0\",\n   \"sinon\": \"^1.17.4\",\n   \"webpack\": \"^1.13.1\",\n   \"webpack-dev-server\": \"^1.14.1\",\n   \"whatwg-fetch\": \"^2.0.1\"\n }\n</code></pre>\n\n<p>What am I missing? How do I get jest-resolve to find or mock deeper components?</p>\n"}, {"tags": ["javascript", "regex"], "answers": [{"comments": [{"owner": {"reputation": 737, "user_id": 1691609, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/26cd4f0db4a6d1d8308f56b1c86491f6?s=128&d=identicon&r=PG", "display_name": "Rafael de Castro", "link": "https://stackoverflow.com/users/1691609/rafael-de-castro"}, "edited": false, "score": 0, "creation_date": 1479940667, "post_id": 40775202, "comment_id": 68774405, "body": "I edited my question with my code, but the regex you gave didn&#39;t work. Fire an reference error &quot;A is not defined&quot;"}, {"owner": {"reputation": 815, "user_id": 2999446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd693334f54ece098ca02afe52e3c669?s=128&d=identicon&r=PG&f=1", "display_name": "Luke K", "link": "https://stackoverflow.com/users/2999446/luke-k"}, "reply_to_user": {"reputation": 737, "user_id": 1691609, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/26cd4f0db4a6d1d8308f56b1c86491f6?s=128&d=identicon&r=PG", "display_name": "Rafael de Castro", "link": "https://stackoverflow.com/users/1691609/rafael-de-castro"}, "edited": false, "score": 1, "creation_date": 1479940785, "post_id": 40775202, "comment_id": 68774445, "body": "Stupid question, but did you just copy and paste it in as a string. With regex you need to surround it with backslashes or put it as a string argument to myRegex = new RegExp(&quot;myRegex&quot;). I&#39;ve edited the answer to include the former, because it sounds like however you put it in JavaScript thinks you mean a variable"}, {"owner": {"reputation": 737, "user_id": 1691609, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/26cd4f0db4a6d1d8308f56b1c86491f6?s=128&d=identicon&r=PG", "display_name": "Rafael de Castro", "link": "https://stackoverflow.com/users/1691609/rafael-de-castro"}, "edited": false, "score": 0, "creation_date": 1479942543, "post_id": 40775202, "comment_id": 68774977, "body": "helped, but not entirely. If I put for example a ? it blocks. Ok! But if I insert a space after, breaks."}], "tags": [], "owner": {"reputation": 815, "user_id": 2999446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd693334f54ece098ca02afe52e3c669?s=128&d=identicon&r=PG&f=1", "display_name": "Luke K", "link": "https://stackoverflow.com/users/2999446/luke-k"}, "is_accepted": true, "score": 1, "last_activity_date": 1479940705, "last_edit_date": 1479940705, "creation_date": 1479940150, "answer_id": 40775202, "question_id": 40775062, "link": "https://stackoverflow.com/questions/40775062/regex-acepting-all-charsspaces-accentuated-except-numbers-and-special-charact/40775202#40775202", "title": "Regex acepting all chars(spaces, accentuated) except numbers and special characters", "body": "<p>You can use unicode ranges to include all the special characters you need. </p>\n\n<p><code>\\[A-Za-z\\u00c0-\\u017e ]\\</code></p>\n\n<p>will cover most of them, but possible not all of them. You can look up specific characters codes you need on <a href=\"http://unicode-table.com/en/#latin-extended-a\" rel=\"nofollow noreferrer\">this website</a>. As you can see in the example above you just precede the character code with \\u to state that it's using unicode.</p>\n\n<p>It should be noted that this will not work with all implementations of regex, but does work with JavaScript</p>\n"}], "owner": {"reputation": 737, "user_id": 1691609, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/26cd4f0db4a6d1d8308f56b1c86491f6?s=128&d=identicon&r=PG", "display_name": "Rafael de Castro", "link": "https://stackoverflow.com/users/1691609/rafael-de-castro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 1, "accepted_answer_id": 40775202, "answer_count": 1, "score": 0, "last_activity_date": 1479940716, "creation_date": 1479939517, "last_edit_date": 1479940716, "question_id": 40775062, "link": "https://stackoverflow.com/questions/40775062/regex-acepting-all-charsspaces-accentuated-except-numbers-and-special-charact", "title": "Regex acepting all chars(spaces, accentuated) except numbers and special characters", "body": "<p>I have to validate a series of inputs on my app. The user can enter any character cause the app has multi-language support.</p>\n\n<p>So i need block only numbers and special characters but not the accentuated ones...</p>\n\n<p>Can you guys help?</p>\n\n<p>My code:</p>\n\n<pre><code>var textInputs,\nAllowRegex  = [A-Za-z\\u00c0-\\u017e ];\n\n        textInputs = document.querySelectorAll('input[type=text]');\n\n\n        for(i = 0; i &lt; textInputs.length; i++){\n            if ( !AllowRegex.test(textInputs[i].value) ){\n                alert(textInputs[i].value);\n            } else {\n                $obj.list[i] = textInputs[i].value;\n            }\n        }\n\n        console.log($obj.list);\n</code></pre>\n"}, {"tags": ["javascript", "php", "jquery", "ajax", "forms"], "comments": [{"owner": {"reputation": 3503, "user_id": 3005449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukhWf.jpg?s=128&g=1", "display_name": "Daerik", "link": "https://stackoverflow.com/users/3005449/daerik"}, "edited": false, "score": 0, "creation_date": 1479939677, "post_id": 40775061, "comment_id": 68774030, "body": "Wouldn&#39;t using serializeArray() do you better in this situation?"}, {"owner": {"reputation": 13669, "user_id": 1340674, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FN0lM.jpg?s=128&g=1", "display_name": "Pevara", "link": "https://stackoverflow.com/users/1340674/pevara"}, "edited": false, "score": 0, "creation_date": 1479939846, "post_id": 40775061, "comment_id": 68774092, "body": "where is the code that appends the person to the dropdown? It seems to me that populatePeople() would probably do that, from the name of it, but how does it know which person to add? Can you show us the rest of your code? (just js will do, the php appears to be working since after page reload the result is as expected)"}, {"owner": {"reputation": 89, "user_id": 6917947, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/954349857939815/picture?type=large", "display_name": "Paul Chu", "link": "https://stackoverflow.com/users/6917947/paul-chu"}, "edited": false, "score": 0, "creation_date": 1479939949, "post_id": 40775061, "comment_id": 68774125, "body": "I don&#39;t know how it would be. I only want to serialize a form. Can you provide an example?   Also, I know they&#39;re some sytnax errors of ( }); because I deleted some of them because I was frustrated."}, {"owner": {"reputation": 89, "user_id": 6917947, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/954349857939815/picture?type=large", "display_name": "Paul Chu", "link": "https://stackoverflow.com/users/6917947/paul-chu"}, "edited": false, "score": 0, "creation_date": 1479940256, "post_id": 40775061, "comment_id": 68774249, "body": "<a href=\"https://github.com/PaulChu756/statesvisited/blob/master/public/drive.js\" rel=\"nofollow noreferrer\">github.com/PaulChu756/statesvisited/blob/master/public/drive&zwnj;&#8203;.js</a>  (edit)So I append my new person by calling the populatePeople() again, but also here is my github, I didn&#39;t want to post my code in the comments to make it so long."}], "owner": {"reputation": 89, "user_id": 6917947, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/954349857939815/picture?type=large", "display_name": "Paul Chu", "link": "https://stackoverflow.com/users/6917947/paul-chu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479939516, "creation_date": 1479939516, "question_id": 40775061, "link": "https://stackoverflow.com/questions/40775061/jquery-ajax-form-submission-not-refreshing-reloading", "title": "Jquery Ajax Form Submission not refreshing/reloading", "body": "<p>so my goal is to add a person to my form without the page reloading.\nBut when I press submit to add a person, the information is sent through, but I don't see it append to my dropdown, the only way I can see it, is to refresh/reload the page, which I don't want to do.</p>\n\n<p>index.php</p>\n\n<pre><code>&lt;form method=\"post\" id=\"personForm\"&gt;\n                First Name:     &lt;input type=\"text\" id=\"firstName\"     name=\"firstName\"&gt; &lt;br&gt;&lt;br&gt;\n                Last Name:      &lt;input type=\"text\" id=\"lastName\" name=\"lastName\"&gt;   &lt;br&gt;&lt;br&gt;\n                Favorite Food:  &lt;input type=\"text\" id=\"favoriteFood\" name=\"favoriteFood\"&gt;   &lt;br&gt;&lt;br&gt;\n                &lt;button type=\"submit\" id=\"addPersonSubmit\" name=\"addPersonSubmit\" class=\"btn btn-success\"&gt;Submit&lt;/button&gt;\n                &lt;/form&gt;\n</code></pre>\n\n<p>When the user fills out the form and presses submit, my javascript will handle it. \"drive.js\"</p>\n\n<pre><code> $(document).ready(function(){\n$('#personForm').submit(function(e){\n    e.preventDefault();\n    addPerson();\n});\n\n\nfunction addPerson()\n{\n$.ajax({\n    type: \"POST\",\n    url: \"api/people\", // api/people\n    data: $(\"#personForm\").serialize(),\n     success: function(data,status,xhr) \n    {\n        console.log(data);\n        console.log(status);\n        console.log(xhr);\n        console.log($(\"#personForm\").serialize());\n        console.log(\"You have added a person\");\n        populatePeople();\n        displayData();\n    },\n     error: function(data,status,xhr) \n    {\n        console.log(data);\n        console.log(status);\n        console.log(xhr);\n        console.log($(\"#personForm\").serialize());\n        console.log(\"error\");\n    }\n}); \n</code></pre>\n\n<p>}</p>\n\n<p>Now as the javascript fires, it sends that information to my api.php \napi.php will check for requests and then call the insertPerson()function. </p>\n\n<pre><code>//insert a Person //api/people\nfunction insertPerson()\n{\nglobal $connection;\n\n$firstNameEnter = $_POST[\"firstName\"];\n$lastNameEnter = $_POST[\"lastName\"];\n$foodEnter = $_POST[\"favoriteFood\"];\n\nif(!empty($firstNameEnter) &amp;&amp; !empty($lastNameEnter) &amp;&amp; !empty($foodEnter))\n{\n    // Insert values into table\n    $sql = \"INSERT INTO People (firstname, lastname, food) \n    VALUES ('$firstNameEnter', '$lastNameEnter', '$foodEnter')\";\n\n    // Check if insert is good\n    if(mysqli_query($connection, $sql))\n    {\n        echo \"You have added a friend: \" . \" First Name: \". $firstNameEnter . \" Last Name: \". $lastNameEnter . \" Food: \" . $foodEnter;\n    }\n}\n\nelse \n{\n    echo \"Error: \" . $sql . \"&lt;br&gt;\" . $connection-&gt;error;\n}\n</code></pre>\n"}, {"tags": ["javascript"], "comments": [{"owner": {"reputation": 1597, "user_id": 5929494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/30WCR.jpg?s=128&g=1", "display_name": "RizkiDPrast", "link": "https://stackoverflow.com/users/5929494/rizkidprast"}, "edited": false, "score": 0, "creation_date": 1479940111, "post_id": 40775042, "comment_id": 68774180, "body": "what is your function?"}, {"owner": {"reputation": 1597, "user_id": 5929494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/30WCR.jpg?s=128&g=1", "display_name": "RizkiDPrast", "link": "https://stackoverflow.com/users/5929494/rizkidprast"}, "edited": false, "score": 0, "creation_date": 1479940197, "post_id": 40775042, "comment_id": 68774220, "body": "why dont directly <code>target = document.getElementByTagName(&quot;button&quot;); target[i].addEventListener(&#39;click&#39;, function(){alert(&quot;OK&quot;)})</code>"}], "owner": {"reputation": 1, "user_id": 7202494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03cfc78750e551bf94e656f059e6f53f?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Butler", "link": "https://stackoverflow.com/users/7202494/chris-butler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "closed_date": 1479949777, "answer_count": 0, "score": 0, "last_activity_date": 1479940047, "creation_date": 1479939403, "last_edit_date": 1479940047, "question_id": 40775042, "link": "https://stackoverflow.com/questions/40775042/javascript-using-string-variable-to-target-functions", "closed_reason": "Duplicate", "title": "Javascript: Using string variable to target functions", "body": "<p>I'm trying to make an array to tidy up my code so that I can add a bunch of event listeners to various buttons. </p>\n\n<pre><code>  for(var i = 0; i &lt; buttoncount; i++){\n    var targetid = document.getElementsByTagName(\"button\")[i].id;\n    var targetidfunc = targetid + \"function\";\n    console.log(targetidfunc);\n    document.getElementById(targetid).addEventListener(\"click\", targetidfunc);\n  }\n</code></pre>\n\n<p>The console has the correct function names however the event listener does not work, how can I fix this?</p>\n"}, {"tags": ["javascript", "jquery", "html", "css"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7202279, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pDae-MGIcAg/AAAAAAAAAAI/AAAAAAAAAVU/xSAFcCzNlt0/photo.jpg?sz=128", "display_name": "Tigo", "link": "https://stackoverflow.com/users/7202279/tigo"}, "edited": false, "score": 0, "creation_date": 1479939814, "post_id": 40775027, "comment_id": 68774081, "body": "Well, it&#39;s too simple to look up &#39;abc&#39; and replace it with &#39;def&#39;. And there is a lot of answers to that, and also it&#39;s useless in real word. And this task is more realistic. So what it could be a homework ? I can&#39;t do that and looking for answers. And that&#39;s the proper site. I wrote everything by myself so there is no copy and paste job."}, {"owner": {"reputation": 815, "user_id": 2999446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd693334f54ece098ca02afe52e3c669?s=128&d=identicon&r=PG&f=1", "display_name": "Luke K", "link": "https://stackoverflow.com/users/2999446/luke-k"}, "reply_to_user": {"reputation": 1, "user_id": 7202279, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pDae-MGIcAg/AAAAAAAAAAI/AAAAAAAAAVU/xSAFcCzNlt0/photo.jpg?sz=128", "display_name": "Tigo", "link": "https://stackoverflow.com/users/7202279/tigo"}, "edited": false, "score": 0, "creation_date": 1479940311, "post_id": 40775027, "comment_id": 68774269, "body": "Do you mean that searching to change the word &quot;go&quot; would also change all instances of it in &quot;going&quot;? If that&#39;s the case just use regex to check if there&#39;s a space, full stop, comma, or other such symbol around it."}], "tags": [], "owner": {"reputation": 815, "user_id": 2999446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd693334f54ece098ca02afe52e3c669?s=128&d=identicon&r=PG&f=1", "display_name": "Luke K", "link": "https://stackoverflow.com/users/2999446/luke-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1479939309, "creation_date": 1479939309, "answer_id": 40775027, "question_id": 40775001, "link": "https://stackoverflow.com/questions/40775001/changing-text-in-html-through-javascript/40775027#40775027", "title": "Changing text in HTML through JavaScript", "body": "<p>Can you not just use innerHTML and search for a particular string within the text? Then use string replace? Look up MDN or W3schools or something for information on how to do those specific things in JavaScript.</p>\n\n<p>I'm not going to give you code for this because this sounds suspiciously like a homework type question, and someone here just giving you the answer doesn't help anyone.</p>\n"}, {"tags": [], "owner": {"reputation": 7451, "user_id": 37460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kGIxI.jpg?s=128&g=1", "display_name": "Nick B", "link": "https://stackoverflow.com/users/37460/nick-b"}, "is_accepted": false, "score": 1, "last_activity_date": 1479939643, "creation_date": 1479939643, "answer_id": 40775084, "question_id": 40775001, "link": "https://stackoverflow.com/questions/40775001/changing-text-in-html-through-javascript/40775084#40775084", "title": "Changing text in HTML through JavaScript", "body": "<p>Check out this small JS library: <a href=\"https://github.com/padolsey/findAndReplaceDOMText\" rel=\"nofollow noreferrer\">https://github.com/padolsey/findAndReplaceDOMText</a></p>\n\n<p>I've used this library in the past... so if you pass in \"body\" it should search across all elements on the page like you are wanting:</p>\n\n<pre><code>findAndReplaceDOMText(document.getElementsByTagName(\"body\")[0], {\n  find: x,\n  replace: y\n});\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2262, "user_id": 1681985, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XfTOr.jpg?s=128&g=1", "display_name": "arhak", "link": "https://stackoverflow.com/users/1681985/arhak"}, "edited": false, "score": 0, "creation_date": 1480100460, "post_id": 40810751, "comment_id": 68842398, "body": "actually it does not work, because of a typo, <code>pharses</code> should be <code>phrases</code>"}], "tags": [], "owner": {"reputation": 1, "user_id": 7202279, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pDae-MGIcAg/AAAAAAAAAAI/AAAAAAAAAVU/xSAFcCzNlt0/photo.jpg?sz=128", "display_name": "Tigo", "link": "https://stackoverflow.com/users/7202279/tigo"}, "is_accepted": false, "score": 0, "last_activity_date": 1480099752, "last_edit_date": 1480099752, "creation_date": 1480098952, "answer_id": 40810751, "question_id": 40775001, "link": "https://stackoverflow.com/questions/40775001/changing-text-in-html-through-javascript/40810751#40810751", "title": "Changing text in HTML through JavaScript", "body": "<p>Function that finally works. (there must be added DIV id=\"text\" that covers <p> paragraphs in the html document.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function changeText() {\r\n\r\n    var profile_values = document.getElementsByClassName('pharses');\r\n    var total = 0;\r\n\r\n    for (var j = 0; j &lt; profile_values.length; j++) {\r\n      total += profile_values[j].innerHTML.trim().split(\" \").length;\r\n    } //counting total number of words\r\n\r\n    var replaceme = document.getElementById(\"input1\").value;\r\n    var replacement = document.getElementById(\"input2\").value;\r\n\r\n    var i = 0;\r\n\r\n    do {\r\n      document.getElementById(\"text\").innerHTML = document.getElementById(\"text\").innerHTML.replace(replaceme, replacement);\r\n      i++;\r\n    } while (i &lt;= total); // loop for replacing words\r\n  \r\n  }</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n\r\n&lt;head&gt;\r\n  &lt;meta charset=\"UTF-8\"&gt;\r\n  &lt;title&gt;Task1&lt;/title&gt;\r\n\r\n  &lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n  &lt;script src=\"*.js\"&gt;&lt;/script&gt;\r\n&lt;/head&gt;\r\n\r\n&lt;body&gt;\r\n\r\n  &lt;div class=\"inputbox\"&gt;\r\n    Change From:\r\n    &lt;input type=\"text\" id=\"input1\" value=\"banana\"&gt;\r\n    &lt;br /&gt;Change To:\r\n    &lt;input type=\"text\" id=\"input2\" value=\"strawberries\"&gt;\r\n    &lt;button onclick=\"changeText()\"&gt;Execute&lt;/button&gt;\r\n  &lt;/div&gt;\r\n  &lt;div id=\"text\"&gt;\r\n    &lt;p class=\"phrases\"&gt;\r\n      This is a simple text. I want to select a word or a phrase, and change it to another using two textboxes and a button to execute. After execution, ALL of the matching words or phrases should be changed at one time. If it's possible, the \"Change Text\"\r\n      function should only apply to WHOLE WORDS; When I select \"Change from\" - Banana to - strawberries only \"Banana\" strings should be changed instead of changing \"Bananas\" as well.\r\n    &lt;/p&gt;\r\n    &lt;p class=\"phrases\"&gt;\r\n      TEST: Banana, apple, banana, apple, carrot, carrots, bananas, apples, banana, carrots.\r\n    &lt;/p&gt;\r\n  &lt;/div&gt;\r\n&lt;/body&gt;\r\n\r\n&lt;/html&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 2262, "user_id": 1681985, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XfTOr.jpg?s=128&g=1", "display_name": "arhak", "link": "https://stackoverflow.com/users/1681985/arhak"}, "is_accepted": false, "score": 0, "last_activity_date": 1480100703, "last_edit_date": 1495541233, "creation_date": 1480100703, "answer_id": 40811063, "question_id": 40775001, "link": "https://stackoverflow.com/questions/40775001/changing-text-in-html-through-javascript/40811063#40811063", "title": "Changing text in HTML through JavaScript", "body": "<p>BTW, there is no need to count and then loop to replace each instance of the match. You can do all at once</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function changeText() {\r\n\r\n    var profile_values = document.getElementsByClassName('phrases');\r\n\r\n    var replaceme = document.getElementById(\"input1\").value;\r\n    var replacement = document.getElementById(\"input2\").value;\r\n\r\n    document.getElementById(\"text\").innerHTML = document.getElementById(\"text\").innerHTML.replace(new RegExp(replaceme, 'g'), replacement);\r\n  \r\n  }</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n\r\n&lt;div class=\"inputbox\"&gt;\r\n    Change From:\r\n    &lt;input type=\"text\" id=\"input1\" value=\"banana\"&gt;\r\n    &lt;br /&gt;Change To:\r\n    &lt;input type=\"text\" id=\"input2\" value=\"strawberries\"&gt;\r\n    &lt;button onclick=\"changeText()\"&gt;Execute&lt;/button&gt;\r\n  &lt;/div&gt;\r\n  &lt;div id=\"text\"&gt;\r\n    &lt;p class=\"phrases\"&gt;\r\n      This is a simple text. I want to select a word or a phrase, and change it to another using two textboxes and a button to execute. After execution, ALL of the matching words or phrases should be changed at one time. If it's possible, the \"Change Text\"\r\n      function should only apply to WHOLE WORDS; When I select \"Change from\" - Banana to - strawberries only \"Banana\" strings should be changed instead of changing \"Bananas\" as well.\r\n    &lt;/p&gt;\r\n    &lt;p class=\"phrases\"&gt;\r\n      TEST: Banana, apple, banana, apple, carrot, carrots, bananas, apples, banana, carrots.\r\n    &lt;/p&gt;\r\n  &lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>see also <a href=\"https://stackoverflow.com/questions/1144783/how-to-replace-all-occurrences-of-a-string-in-javascript\">How to replace all occurrences of a string in JavaScript?</a></p>\n"}], "owner": {"reputation": 1, "user_id": 7202279, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pDae-MGIcAg/AAAAAAAAAAI/AAAAAAAAAVU/xSAFcCzNlt0/photo.jpg?sz=128", "display_name": "Tigo", "link": "https://stackoverflow.com/users/7202279/tigo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 4, "score": -3, "last_activity_date": 1480100703, "creation_date": 1479939143, "last_edit_date": 1479945410, "question_id": 40775001, "link": "https://stackoverflow.com/questions/40775001/changing-text-in-html-through-javascript", "title": "Changing text in HTML through JavaScript", "body": "<p>I want to create a button that allows me to change ANY word or PHARSE in a html body. I want to be able to INPUT a word I want to change, and INPUT a word to be changed to. By using an execution button the changes should be applied.</p>\n\n<p>Hope somebody will know how to do it : ) </p>\n\n<p>There is another explanation of the task in HTML text.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function changeText () {\r\n  \r\n  var x = document.getElementById(\"input1\").value;\r\n  var y = document.getElementById(\"input2\").value;\r\n  \r\n  var textnodes, node, s;\r\n\r\n\ttextnodes = document.evaluate(\"//text()\", document, null, XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE, null);\r\n\r\n\tfor (var i = 0; i &lt; textnodes.snapshotLength; i++) {\r\n\t\tnode = textnodes.snapshotItem(i);\r\n\t\ts = node.data;\r\n\t\ts = s.replace(x, y);\r\n\t\tnode.data = s;\r\n\t}     \r\n    \r\n  /*\r\n    This is what i found and I do not understand it. It changes only one word at time (yes i know there is something like /\"abc..\"/g, g-global and everything changes but it doesn't work with parameters.\r\n    \r\n    MISSING: 1.proper Change CODE\r\n    \r\n    \r\n    */\r\n    \r\n    \r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n\t&lt;head&gt;\r\n\t\t&lt;meta charset = \"UTF-8\"&gt;\r\n\t\t&lt;title&gt;Task1&lt;/title&gt;\r\n        \r\n\t\t&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n\t\t&lt;script src=\"*.js\"&gt;&lt;/script&gt;\r\n\t&lt;/head&gt;\r\n\t&lt;body&gt;\r\n       \r\n\t\t&lt;div class=\"inputbox\"&gt;\r\n\t\t\tChange From:\r\n\t\t\t&lt;input type=\"text\" id=\"input1\" value=\"banana\"&gt;&lt;br /&gt;\r\n\t\t\tChange To:\r\n\t\t\t&lt;input type=\"text\" id=\"input2\" value=\"strawberries\"&gt;\r\n\t\t\t&lt;button onclick=\"changeText()\"&gt;Execute&lt;/button&gt;\r\n\t\t&lt;/div&gt;\r\n\t\t\r\n\t\t&lt;p class=\"phrases\"&gt;\r\n\t\t\tThis is a simple text. I want to &lt;b&gt;select a word or a phrase, and change it to another using two textboxes and a button to execute&lt;/b&gt;. After execution, ALL of the matching words or phrases should be changed at one time. If it's possible, the \"Change Text\" function should only apply to WHOLE WORDS; When I select \"Change from\" - Banana to - strawberries only \"Banana\" strings should be changed instead of changing \"Bananas\" as well. \r\n\t\t&lt;/p&gt;\r\n\t\t&lt;p class=\"phrases\"&gt;\r\n\t\t TEST: Banana, apple, banana, apple, carrot, carrots, bananas, apples, banana, carrots.\t\r\n\t\t&lt;/p&gt;\r\n\r\n\t&lt;/body&gt;\r\n&lt;/html&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["javascript", "node.js", "twitch"], "comments": [{"owner": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1479939242, "post_id": 40775000, "comment_id": 68773873, "body": "The TMI client is probably mutating <code>userstate</code> after the handler finishes."}, {"owner": {"reputation": 862, "user_id": 6334991, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ae41644340b461e54d42f9bbb0cf7fa2?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/6334991/kevin"}, "reply_to_user": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1479940198, "post_id": 40775000, "comment_id": 68774221, "body": "Am I not still using the <code>userstate</code> inside the handler? So inside of it I should still be able to use it... No? If not, is there any path you can put me on to search for a solution?"}, {"owner": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1479940481, "post_id": 40775000, "comment_id": 68774341, "body": "No; the handler has finished, and your code is running later."}, {"owner": {"reputation": 862, "user_id": 6334991, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ae41644340b461e54d42f9bbb0cf7fa2?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/6334991/kevin"}, "reply_to_user": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1479940720, "post_id": 40775000, "comment_id": 68774424, "body": "But why was I able to do it on the front-end then though?"}], "owner": {"reputation": 862, "user_id": 6334991, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ae41644340b461e54d42f9bbb0cf7fa2?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/6334991/kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479939129, "creation_date": 1479939129, "question_id": 40775000, "link": "https://stackoverflow.com/questions/40775000/object-defined-outside-fetch-but-not-inside", "title": "Object defined outside fetch but not inside", "body": "<p>I'm using tmi.js to get the data of a chat message on www.twitch.tv.</p>\n\n<p>This is my code:</p>\n\n<pre><code>const tmi = require('tmi.js');\nrequire('dotenv').config();\n\nconst options = {\n  options: {\n    debug: true\n  },\n  identity: {\n    username: process.env.OAUTH_USERNAME,\n    password: process.env.OAUTH_PASSWORD\n  },\n  connection: {\n    reconnect: true\n  },\n  channels: [`instak`]\n};\n\nconst client = new tmi.client(options);\n\nclient.on(`chat`, (channel, userstate, message/*, self */) =&gt; {\n  console.log(userstate.username); //This logs my userstate, I can see the username which is passed on correctly.\n  switch (message) {\n    case `!kluiten`:\n      fetch(`http://localhost:8000/api/users/${userstate.username}`) // fetch from Express.js server\n      .then(response =&gt; response.json())\n      .then(result =&gt; {\n        console.log(`USERSTATE IS`, userstate);\n        client.action(channel, `${userstate[`display-name`]}, you've got ${result.instakluiten} instakluiten.`);\n      });\n      break;\n    default:\n      break;\n  }\n});\n\n// Connect the client to the server..\nclient.connect();\n</code></pre>\n\n<p>As I said in the commented part after the console.log(userstate), I get all the correct information I was expecting, so outside of the switch case and the fetch. However, when I log my userstate.username inside the fetch, userstate is undefined... I don't see why that happens, because when I did it in the front-end I had no problems... Now I'm doing it in node and it's undefined...</p>\n\n<p>This looks like a common \"you need to wait for your response\"-problem, but I don't see a logical explanation for that being the problem because in the client.on(<code>chat</code>) userstate is defined... I'm troubled.</p>\n"}, {"tags": ["javascript", "php", "jquery", "mysql", "post"], "comments": [{"owner": {"reputation": 20197, "user_id": 714240, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4eb32f377551f7e6e010823422de84fa?s=128&d=identicon&r=PG", "display_name": "MaxArt", "link": "https://stackoverflow.com/users/714240/maxart"}, "edited": false, "score": 0, "creation_date": 1479939299, "post_id": 40774981, "comment_id": 68773895, "body": "I don&#39;t recommend sending parameters in the query string when doing a POST, try to adhere to the REST principles. But anyway, what&#39;s the rendered <code>action</code> attribute?"}, {"owner": {"reputation": 73668, "user_id": 1415724, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zErhj.jpg?s=128&g=1", "display_name": "Funk Forty Niner", "link": "https://stackoverflow.com/users/1415724/funk-forty-niner"}, "edited": false, "score": 0, "creation_date": 1479939428, "post_id": 40774981, "comment_id": 68773936, "body": "and what&#39;s inside the secondpage.php file?"}, {"owner": {"reputation": 2275, "user_id": 2175593, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/LXoPR.png?s=128&g=1", "display_name": "WillardSolutions", "link": "https://stackoverflow.com/users/2175593/willardsolutions"}, "edited": false, "score": 0, "creation_date": 1479939506, "post_id": 40774981, "comment_id": 68773968, "body": "Any time you send parameters via the URL, they will be sent via GET.  You also should not nest a <code>&lt;form&gt;</code> inside a <code>&lt;table&gt;</code> either: <a href=\"http://stackoverflow.com/questions/5967564/form-inside-a-table\">stackoverflow.com/questions/5967564/form-inside-a-table</a>"}, {"owner": {"reputation": 3, "user_id": 7198603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1448a87c8577890f9ad91b162f6565a3?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/7198603/peter"}, "edited": false, "score": 0, "creation_date": 1479939856, "post_id": 40774981, "comment_id": 68774099, "body": "As for the secondpage.php there is not much of a code right now, however i try to check what i sent by <code>$id= $_GET[&#39;id&#39;];</code>"}, {"owner": {"reputation": 599, "user_id": 5281666, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153044355025686/picture?type=large", "display_name": "Milos Lulic", "link": "https://stackoverflow.com/users/5281666/milos-lulic"}, "edited": false, "score": 0, "creation_date": 1479939961, "post_id": 40774981, "comment_id": 68774130, "body": "You can use ajax istead of &lt;form&gt;?"}], "answers": [{"tags": [], "owner": {"reputation": 28527, "user_id": 546272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f4761386ba1c9051ef5a4c241253251?s=128&d=identicon&r=PG", "display_name": "Andy", "link": "https://stackoverflow.com/users/546272/andy"}, "is_accepted": false, "score": 0, "last_activity_date": 1479939483, "creation_date": 1479939483, "answer_id": 40775056, "question_id": 40774981, "link": "https://stackoverflow.com/questions/40774981/when-i-try-to-send-id-value-of-row-via-post-to-another-page-this-page-will-alwa/40775056#40775056", "title": "When I try to send id value of row via POST to another page, this page will always GET id value 1", "body": "<p>Ids have to be unique. <code>$('#send').submit()</code> only finds and submits the first form with that id.</p>\n\n<p>You could add your row id to the form's id attribute to make them unique for example.</p>\n"}, {"tags": [], "owner": {"reputation": 425, "user_id": 1735543, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8dd6724b89c0f3c320e9afbe26e77c3c?s=128&d=identicon&r=PG", "display_name": "tradebel123", "link": "https://stackoverflow.com/users/1735543/tradebel123"}, "is_accepted": true, "score": 1, "last_activity_date": 1479940323, "last_edit_date": 1479940323, "creation_date": 1479939712, "answer_id": 40775100, "question_id": 40774981, "link": "https://stackoverflow.com/questions/40774981/when-i-try-to-send-id-value-of-row-via-post-to-another-page-this-page-will-alwa/40775100#40775100", "title": "When I try to send id value of row via POST to another page, this page will always GET id value 1", "body": "<p>Change the <code>&lt;form id=\"send\"</code> id value as unique</p>\n\n<p>or use a class some thing like below:<br>\n<code>&lt;form class=\"form_send\"</code>  then in your javascript search for the form_class inside the clicked <code>tr</code>:</p>\n\n<pre><code>$(document).ready(function(){\n    $('#usersTable').find('tr').click( function(){\n          $(this).find('form.form_send').submit();\n        });\n    });\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7198603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1448a87c8577890f9ad91b162f6565a3?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/7198603/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "accepted_answer_id": 40775100, "answer_count": 2, "score": 0, "last_activity_date": 1479940323, "creation_date": 1479939061, "question_id": 40774981, "link": "https://stackoverflow.com/questions/40774981/when-i-try-to-send-id-value-of-row-via-post-to-another-page-this-page-will-alwa", "title": "When I try to send id value of row via POST to another page, this page will always GET id value 1", "body": "<p>I started learning webdeveloping and i tried to send \"id\" of one of the rows generated from database to another page. The rows are clickable thanks to the javascript code, so i can choose whichever row i want. The problem is, that even though the POST method seems right:</p>\n\n<pre><code>&lt;form id=\"send\" method=\"POST\" action=&lt;?php echo \"secondpage.php?id=\". $row['id']; ?&gt; &gt;&lt;/form&gt;   \n</code></pre>\n\n<p>// In inspect of the main page it gets the value.</p>\n\n<p>However\nsecond page always receive id value of 1. Doesn't matter if i click on the row with id=18 or any other. It will always recieve value of 1... </p>\n\n<p>I heard that this could be a problem with javascript code which i put under PHP code.</p>\n\n<p>Here is a code with PHP:</p>\n\n<pre><code>&lt;div id=\"content\"&gt;\n&lt;table id=\"usersTable\" class=\"table table-bordered table-hover table-sm \"&gt;\n&lt;form action=http://localhost/dodawanie.php&gt;\n\n    &lt;input class=\"btn btn-primary\" type=\"submit\" value=\"Dodawanie\"&gt;\n\n&lt;/form&gt;\n&lt;?php if ($result-&gt;num_rows &gt; 0) {\n     while($row = $result-&gt;fetch_assoc()) {?&gt;\n\n    &lt;tr&gt;         \n\n        &lt;td&gt;&lt;?php echo \"id: \". $row['id']; ?&gt; &lt;/td&gt; \n    &lt;td&gt;&lt;?php echo \"Name: \". $row[\"first_name\"]; ?&gt; &lt;/td&gt; \n        &lt;td&gt;&lt;?php echo \"Last: \". $row[\"last_name\"];?&gt;  &lt;/td&gt;\n    &lt;form id=\"send\" method=\"POST\" action=&lt;?php echo \"secondpage.php?id=\". $row['id']; ?&gt; &gt;\n&lt;/form&gt; \n    &lt;/tr&gt;\n\n   &lt;?php }\n} else {\n     echo \"0 results\";\n}\n\n$conn-&gt;close();\n   ?&gt;\n&lt;/table&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Here is javascript:</p>\n\n<pre><code>&lt;script type = \"text/javascript\"&gt;\n$(document).ready(function(){\n    $('#usersTable').find('tr').click( function(){\n    //  alert('You clicked row ' + ($(this).index()+1) );\n            $('#send').submit();\n        });\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>I would gladly accept any help to find an error here.</p>\n"}, {"tags": ["javascript", "jquery", "variables"], "answers": [{"tags": [], "owner": {"reputation": 3962, "user_id": 3588312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b791363c864e23e00bc9e74a20fea35?s=128&d=identicon&r=PG&f=1", "display_name": "Vladimir M", "link": "https://stackoverflow.com/users/3588312/vladimir-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1479939735, "last_edit_date": 1495541624, "creation_date": 1479939735, "answer_id": 40775108, "question_id": 40774978, "link": "https://stackoverflow.com/questions/40774978/inner-function-variable-losing-this-value-of-outer-function/40775108#40775108", "title": "inner function variable losing &#39;this&#39; value of outer function", "body": "<p><a href=\"https://stackoverflow.com/questions/962033/what-underlies-this-javascript-idiom-var-self-this\">look at 'this'</a> - you will have to define local variable to maintain reference to \"this\" inside the call, as described in the link.</p>\n\n<pre><code>createTree()\n        { \n            var self = this;\n            var list_Dictionary;\n            var loadWordList = $.get(\"../wordFrequencyTop5000.txt\", function(data)\n            {\n                list_Dictionary = data.split(\"\\n\");\n            });\n\n            loadWordList.done(function()\n            {\n                for(var i=0;i&lt;list_Dictionary.length;i++)\n                {\n                    var string = list_Dictionary[i];\n                     self.tree.insert(string); //&lt;-- Now you should be able to do it\n                }\n            });\n\n       }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 119, "user_id": 6813550, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ea8b63353d48d75740ac0b03eb18508d?s=128&d=identicon&r=PG&f=1", "display_name": "Techs", "link": "https://stackoverflow.com/users/6813550/techs"}, "edited": false, "score": 0, "creation_date": 1479940004, "post_id": 40775112, "comment_id": 68774145, "body": "Thanks for the help"}], "tags": [], "owner": {"reputation": 532, "user_id": 2957600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qDeOF.jpg?s=128&g=1", "display_name": "Yoram", "link": "https://stackoverflow.com/users/2957600/yoram"}, "is_accepted": false, "score": 0, "last_activity_date": 1479939767, "creation_date": 1479939767, "answer_id": 40775112, "question_id": 40774978, "link": "https://stackoverflow.com/questions/40774978/inner-function-variable-losing-this-value-of-outer-function/40775112#40775112", "title": "inner function variable losing &#39;this&#39; value of outer function", "body": "<p>'this' in the inner anonymous has different scope. Try to use the advantage of closer in JS which will get access to the function caller scope.</p>\n\n<pre><code>var that = this;\nloadWordList.done(function() {\n    for(var i=0;i&lt;list_Dictionary.length;i++)\n    {\n         var string = list_Dictionary[i];\n         that.tree.insert(string); // 'that' will hold 'this' in the right scope\n    }\n});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1120, "user_id": 1452244, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b9b36f69ef2e1767aadc67463c7a8dc0?s=128&d=identicon&r=PG", "display_name": "Barry127", "link": "https://stackoverflow.com/users/1452244/barry127"}, "is_accepted": false, "score": 0, "last_activity_date": 1479939852, "creation_date": 1479939852, "answer_id": 40775133, "question_id": 40774978, "link": "https://stackoverflow.com/questions/40774978/inner-function-variable-losing-this-value-of-outer-function/40775133#40775133", "title": "inner function variable losing &#39;this&#39; value of outer function", "body": "<p>The anonymous function inside loadWordlist.done creates a new scope with an new context.</p>\n\n<p>if you want to keep the old context you can use the ES2015 arrow function:</p>\n\n<pre><code>loadWordList.done(() =&gt; {\n    //code here\n);\n</code></pre>\n\n<p>or make a var inside createTree() like this:</p>\n\n<pre><code>var that = this;\n</code></pre>\n\n<p>and then inside the loadWordList callback you can refer to the right context using:</p>\n\n<pre><code>that.tree.insert(string);\n</code></pre>\n\n<p>I personally prefer the arrow function because 'that' is a lousy choice for a var name. And since your using the ES2015 classes browser support must not be an issue.</p>\n"}], "owner": {"reputation": 119, "user_id": 6813550, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ea8b63353d48d75740ac0b03eb18508d?s=128&d=identicon&r=PG&f=1", "display_name": "Techs", "link": "https://stackoverflow.com/users/6813550/techs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 40775108, "answer_count": 3, "score": 0, "last_activity_date": 1479939852, "creation_date": 1479939050, "question_id": 40774978, "link": "https://stackoverflow.com/questions/40774978/inner-function-variable-losing-this-value-of-outer-function", "title": "inner function variable losing &#39;this&#39; value of outer function", "body": "<p>I created a class in JavaScript as follows: </p>\n\n<pre><code>class TreeMatching\n{\n        constructor()\n        {\n            this.thresholdPoints=0;\n            this.neighborWeight = 0.4;\n            this.totalFrequency = 0.0;\n            this.listSeq = [];\n            this.listFreq = [];\n            this.mapScore = new Object();\n            this.tree = new Trie();\n        }\n\n        createTree()\n        {\n            var list_Dictionary;\n            var loadWordList = $.get(\"../wordFrequencyTop5000.txt\", function(data)\n            {\n                list_Dictionary = data.split(\"\\n\");\n            });\n\n            loadWordList.done(function()\n            {\n                for(var i=0;i&lt;list_Dictionary.length;i++)\n                {\n                    var string = list_Dictionary[i];\n                     this.tree.insert(string); //&lt;-- Cannot read property 'insert' of undefined\n                }\n            });\n\n       }\n}\n</code></pre>\n\n<p>which is supposed to call the <code>insert</code> method in class Trie as follows:</p>\n\n<pre><code>class Trie\n{\n        constructor()\n        {\n            this.count=1;\n            this.root = new TrieNode();\n        }\n\n        insert(word)\n        {\n            var children = new Object();\n\n            for(var i=0; i&lt;word.length(); i++){\n                var c = word.charAt(i);\n\n                var t;\n                if(children[c]){\n                        t = children[c];\n                }else{\n                    t = new TrieNode(c);\n                    children.put(c, t);\n                }\n\n                children = t.children;\n\n                //set leaf node\n                if(i==word.length()-1)\n                    t.isLeaf = true;   \n            }\n        }\n}\n</code></pre>\n\n<p>However, the line of code where the error is marked, the outer function's this value, is not having properties <code>tree</code>, <code>mapScore</code>, etc.</p>\n\n<p>Is there a way that I can access those values from the inner callback function?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["javascript", "reactjs"], "comments": [{"owner": {"reputation": 1994, "user_id": 2763238, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/1Tc6b.jpg?s=128&g=1", "display_name": "jacoballenwood", "link": "https://stackoverflow.com/users/2763238/jacoballenwood"}, "edited": false, "score": 0, "creation_date": 1479939354, "post_id": 40774977, "comment_id": 68773910, "body": "can you post code? i have an idea of what it could be, but I need to see some code"}, {"owner": {"reputation": 13034, "user_id": 1330137, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ImoRJ.jpg?s=128&g=1", "display_name": "Callum Linington", "link": "https://stackoverflow.com/users/1330137/callum-linington"}, "reply_to_user": {"reputation": 1994, "user_id": 2763238, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/1Tc6b.jpg?s=128&g=1", "display_name": "jacoballenwood", "link": "https://stackoverflow.com/users/2763238/jacoballenwood"}, "edited": false, "score": 0, "creation_date": 1479939386, "post_id": 40774977, "comment_id": 68773921, "body": "right at the top of the post is a gist link! @jakeaaron"}], "answers": [{"tags": [], "owner": {"reputation": 13034, "user_id": 1330137, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ImoRJ.jpg?s=128&g=1", "display_name": "Callum Linington", "link": "https://stackoverflow.com/users/1330137/callum-linington"}, "is_accepted": false, "score": 0, "last_activity_date": 1479941615, "creation_date": 1479941615, "answer_id": 40775485, "question_id": 40774977, "link": "https://stackoverflow.com/questions/40774977/dynamically-created-custom-form-components-in-react/40775485#40775485", "title": "Dynamically created custom form components in react", "body": "<p>I modified the <code>onChange</code> in the <code>MultipleDayTimeInput</code>:</p>\n\n<pre><code>onChange(event) {\n    const comparisonKey = event.target.name.substring(event.target.name.length - 1);\n    const input = this.getInputState(comparisonKey);\n\n    input.selected = event.target.value;\n    input.display = this.renderTimeInput(input);\n\n    let spliceIndex = -1;\n    for (let i = 0; i &lt; this.state.inputs.length; i++) {\n        const matches = inputFilter(comparisonKey)(this.state.inputs[i]);\n\n        if (matches) {\n            spliceIndex = i;\n            break;\n        }\n    }\n\n    if (spliceIndex &lt; 0) {\n        throw 'error updating inputs';\n    }\n\n    this.setState({\n        inputs: [...this.state.inputs].splice(spliceIndex, 1, input)\n    });\n}\n</code></pre>\n\n<p>The key points are:</p>\n\n<pre><code>// re render the input\ninput.display = this.renderTimeInput(input);\n\n// set the state by copying the inputs and interchanging the old input with the new input....\nthis.setState({\n    inputs: [...this.state.inputs].splice(spliceIndex, 1, input)\n});\n</code></pre>\n\n<p>Having thought about it though, <code>input</code> is an object reference to the input in the <code>this.state.inputs</code> so actually <code>[...this.states.inputs]</code> would have been enough??</p>\n"}, {"comments": [{"owner": {"reputation": 13034, "user_id": 1330137, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ImoRJ.jpg?s=128&g=1", "display_name": "Callum Linington", "link": "https://stackoverflow.com/users/1330137/callum-linington"}, "edited": false, "score": 0, "creation_date": 1479943452, "post_id": 40775743, "comment_id": 68775251, "body": "Could you just show the <code>Immutable</code> alternative in pure js? I don&#39;t want to start sticking <code>Immutable</code> in here just yet."}, {"owner": {"reputation": 1994, "user_id": 2763238, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/1Tc6b.jpg?s=128&g=1", "display_name": "jacoballenwood", "link": "https://stackoverflow.com/users/2763238/jacoballenwood"}, "reply_to_user": {"reputation": 13034, "user_id": 1330137, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ImoRJ.jpg?s=128&g=1", "display_name": "Callum Linington", "link": "https://stackoverflow.com/users/1330137/callum-linington"}, "edited": false, "score": 0, "creation_date": 1479944263, "post_id": 40775743, "comment_id": 68775510, "body": "I&#39;d be willing to bet those object assignment statements aren&#39;t exactly correct, but hopefully it gives you the right idea, and you can learn more about Object.assign with the link i provided in the edited answer"}, {"owner": {"reputation": 13034, "user_id": 1330137, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ImoRJ.jpg?s=128&g=1", "display_name": "Callum Linington", "link": "https://stackoverflow.com/users/1330137/callum-linington"}, "edited": false, "score": 0, "creation_date": 1479944335, "post_id": 40775743, "comment_id": 68775523, "body": "Yeah I know <code>Object.assign</code> fortunately!"}, {"owner": {"reputation": 1994, "user_id": 2763238, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/1Tc6b.jpg?s=128&g=1", "display_name": "jacoballenwood", "link": "https://stackoverflow.com/users/2763238/jacoballenwood"}, "reply_to_user": {"reputation": 13034, "user_id": 1330137, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ImoRJ.jpg?s=128&g=1", "display_name": "Callum Linington", "link": "https://stackoverflow.com/users/1330137/callum-linington"}, "edited": false, "score": 0, "creation_date": 1479944416, "post_id": 40775743, "comment_id": 68775549, "body": "great! then you know the implementation, so the basic idea is not to edit state objects directly, and use setState to cause a re-render in the correct way!"}, {"owner": {"reputation": 2152, "user_id": 1139444, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f187fdc4151f2bc12a0505809c0b7acd?s=128&d=identicon&r=PG", "display_name": "kwelch", "link": "https://stackoverflow.com/users/1139444/kwelch"}, "edited": false, "score": 0, "creation_date": 1479962097, "post_id": 40775743, "comment_id": 68779759, "body": "Just so you know <code>setState</code> will accept a function with the first argument as <code>prevState</code>. You can use this to replace using <code>this.state</code> inside of your set state. This is preferred because <code>setState</code> calls are batches and this will ensure the values are set properly."}, {"owner": {"reputation": 13034, "user_id": 1330137, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ImoRJ.jpg?s=128&g=1", "display_name": "Callum Linington", "link": "https://stackoverflow.com/users/1330137/callum-linington"}, "reply_to_user": {"reputation": 2152, "user_id": 1139444, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f187fdc4151f2bc12a0505809c0b7acd?s=128&d=identicon&r=PG", "display_name": "kwelch", "link": "https://stackoverflow.com/users/1139444/kwelch"}, "edited": false, "score": 0, "creation_date": 1480108220, "post_id": 40775743, "comment_id": 68844835, "body": "@kwelch so if you are basing new state off of old state, then you should always use the <code>prevState  =&gt; ({})</code> function expression (well, a function)"}, {"owner": {"reputation": 2152, "user_id": 1139444, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f187fdc4151f2bc12a0505809c0b7acd?s=128&d=identicon&r=PG", "display_name": "kwelch", "link": "https://stackoverflow.com/users/1139444/kwelch"}, "edited": false, "score": 0, "creation_date": 1480108319, "post_id": 40775743, "comment_id": 68844861, "body": "I am not sure it is specifically outlines anywhere but that has always been my approach mainly because of the batching of the calls."}, {"owner": {"reputation": 13034, "user_id": 1330137, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ImoRJ.jpg?s=128&g=1", "display_name": "Callum Linington", "link": "https://stackoverflow.com/users/1330137/callum-linington"}, "reply_to_user": {"reputation": 2152, "user_id": 1139444, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f187fdc4151f2bc12a0505809c0b7acd?s=128&d=identicon&r=PG", "display_name": "kwelch", "link": "https://stackoverflow.com/users/1139444/kwelch"}, "edited": false, "score": 0, "creation_date": 1480116874, "post_id": 40775743, "comment_id": 68847071, "body": "@kwelch it really does make sense though, if the <code>setState</code> is non-deterministic, then to use the current state it needs to be the state at the time you wish to change it otherwise you&#39;ll see annoying side effects cause buggy code."}, {"owner": {"reputation": 2152, "user_id": 1139444, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f187fdc4151f2bc12a0505809c0b7acd?s=128&d=identicon&r=PG", "display_name": "kwelch", "link": "https://stackoverflow.com/users/1139444/kwelch"}, "edited": false, "score": 0, "creation_date": 1480117984, "post_id": 40775743, "comment_id": 68847328, "body": "I prefer pure functions and if you use it as a function it is more natural to move into a global state management system where all changes are central."}], "tags": [], "owner": {"reputation": 1994, "user_id": 2763238, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/1Tc6b.jpg?s=128&g=1", "display_name": "jacoballenwood", "link": "https://stackoverflow.com/users/2763238/jacoballenwood"}, "is_accepted": true, "score": 3, "last_activity_date": 1479944124, "last_edit_date": 1479944124, "creation_date": 1479943227, "answer_id": 40775743, "question_id": 40774977, "link": "https://stackoverflow.com/questions/40774977/dynamically-created-custom-form-components-in-react/40775743#40775743", "title": "Dynamically created custom form components in react", "body": "<p>When you update the display value of the inputs in state, you need to use <code>this.setState</code> to change the state data and cause a re-render with the new data. Using input.key = value is not the correct way. </p>\n\n<blockquote>\n  <p>Using State Correctly<br>\n  There are three things you should know about\n  setState().</p>\n  \n  <p>Do Not Modify State Directly<br>\n  For example, this will not re-render a\n  component:</p>\n  \n  <p>// Wrong<br>\n  this.state.comment = 'Hello';<br>\n  Instead, use setState():</p>\n  \n  <p>// Correct<br>\n  this.setState({comment: 'Hello'});<br>\n  The only place where you\n  can assign this.state is the constructor.</p>\n</blockquote>\n\n<p>read more from Facebook directly <a href=\"https://facebook.github.io/react/docs/state-and-lifecycle.html\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>I would actually suggest a little bit of a restructure of your code though. It's not really encouraged to have components as part of your state values. I would suggest having your different inputs as data objects in your this.state.inputs, and loop through the data and build each of the displays that way in your render method. Like this:</p>\n\n<p>suppose you have one input in your this.state.inputs (and suppose your inputs is an object for key access):</p>\n\n<pre><code>inputs = {\n    1: {\n        selectedTime: 0:00,\n        selectedValue: 2\n    }\n}\n</code></pre>\n\n<p>in your render, do something like this:</p>\n\n<pre><code>render() {\n    let inputs = Object.keys(this.state.inputs).map((key) =&gt; {\n        let input = this.state.inputs[key]\n        return (&lt;SelectTimeInput\n            key={key}\n            name={'option_' + key}\n            placeholder={this.props.placeholder}\n            options={this.props.options}\n            onChange={this.onChange.bind(this, key)}\n            timeValue={input.selectedTime}\n            selectValue={input.selectedValue} \n         /&gt;)      \n    )}\n    return (\n        &lt;div&gt;\n            &lt;button className=\"button\" onClick={this.onAddClick}&gt;&lt;i className=\"fa fa-plus\" /&gt;&lt;/button&gt;\n\n            { inputs }\n        &lt;/div&gt;\n    );\n}\n</code></pre>\n\n<p>Notice how we're binding the key on the onChange, so that we know which input to update. now, in your <code>onChange</code> function, you just set the correct input's value with setState:</p>\n\n<pre><code>onChange(event, key) {\n    this.setState({\n        inputs: Immutable.fromJS(this.state.inputs).setIn([`${key}`, 'selectedTime'], event.target.value).toJS()\n\n        // or\n        inputs: Object.assign(this.state.inputs, Object.assign(this.state.inputs[key], { timeValue: event.target.value }))\n\n    })\n}\n</code></pre>\n\n<p>this isn't tested, but basically this Immutable statement is going to make a copy of this.state.inputs and set the selectedTime value inside of the object that matches the key, to the event.target.value. State is updated now, a re-render is triggered, and when you loop through the inputs again in the render, you'll use the new time value as the <code>timeValue</code> to your component. </p>\n\n<p>again, with the Object.assign edit, it isn't tested, but learn more [here]. <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\" rel=\"nofollow noreferrer\">2</a> Basically this statement is merging a new timeValue value in with the this.state.inputs[key] object, and then merging that new object in with the entire this.state.inputs object.</p>\n\n<p>does this make sense?</p>\n"}], "owner": {"reputation": 13034, "user_id": 1330137, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ImoRJ.jpg?s=128&g=1", "display_name": "Callum Linington", "link": "https://stackoverflow.com/users/1330137/callum-linington"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 40775743, "answer_count": 2, "score": 0, "last_activity_date": 1479944124, "creation_date": 1479939049, "question_id": 40774977, "link": "https://stackoverflow.com/questions/40774977/dynamically-created-custom-form-components-in-react", "title": "Dynamically created custom form components in react", "body": "<p>See this <a href=\"https://gist.github.com/no1melman/3223e5c02506573776439cd1d95620ed\" rel=\"nofollow noreferrer\">gist</a> for the complete picture.</p>\n\n<p>Basically I will have this form:</p>\n\n<p><a href=\"https://i.stack.imgur.com/KIlnE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KIlnE.png\" alt=\"form\"></a></p>\n\n<p>When you click the plus, another row should appear with a drop down for day and a time field.</p>\n\n<p>I can create the code to add inputs to the form, however I'm having trouble with the individual components (<code>selectTimeInput</code> is a row) actually updating their values.</p>\n\n<p>The <code>onChange</code> in the <code>MultipleDayTimeInput</code> is receiving the correct data, it is just the display that isn't updating. I extremely new to react so I don't know what is causing the display to not update....</p>\n\n<p>I think it is because the <code>SelectTimeInput</code> render function isn't being called because the passed in <code>props</code> aren't being updated, but I'm not sure of the correct way to achieve that.</p>\n\n<p>Thinking about it, does the <code>setState</code> need to be called in the <code>onChange</code> of the <code>MultipleDayTimeInput</code> and the input that changed needs to be removed from the <code>this.state.inputs</code> and readded in order to force the render to fire... this seems a little clunky to me... </p>\n"}, {"tags": ["javascript", "html", "mysql", "node.js", "date"], "comments": [{"owner": {"reputation": 37141, "user_id": 5315974, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/MNGHV.png?s=128&g=1", "display_name": "Vao Tsun", "link": "https://stackoverflow.com/users/5315974/vao-tsun"}, "edited": false, "score": 0, "creation_date": 1479939508, "post_id": 40774904, "comment_id": 68773969, "body": "timezone applying? you see that 23:00 and <code>Z</code> in full timestamp?"}, {"owner": {"reputation": 3582, "user_id": 5937428, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/tgO5i.png?s=128&g=1", "display_name": "amflare", "link": "https://stackoverflow.com/users/5937428/amflare"}, "edited": false, "score": 0, "creation_date": 1479939558, "post_id": 40774904, "comment_id": 68773985, "body": "Regarding the <code>.toStrong().substring()</code>, are you unable to format the date server side? That would solve the ISO date string format. Also, could you provide the value and type of a <code>responseObject[i].todoDate</code> for me?"}, {"owner": {"reputation": 747, "user_id": 7109256, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/046895960549d3bbd398d17251dc500d?s=128&d=identicon&r=PG&f=1", "display_name": "random1234", "link": "https://stackoverflow.com/users/7109256/random1234"}, "reply_to_user": {"reputation": 37141, "user_id": 5315974, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/MNGHV.png?s=128&g=1", "display_name": "Vao Tsun", "link": "https://stackoverflow.com/users/5315974/vao-tsun"}, "edited": false, "score": 0, "creation_date": 1479940397, "post_id": 40774904, "comment_id": 68774309, "body": "@VaoTsun it used to be of datatype TIMESTAMP in my mysql database but i changed it the column to a DATE datatype, and it does get saved in the YYYY-MM-DD format in my database which is what i want, but when i display it on the website it shows the full timestamp"}, {"owner": {"reputation": 747, "user_id": 7109256, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/046895960549d3bbd398d17251dc500d?s=128&d=identicon&r=PG&f=1", "display_name": "random1234", "link": "https://stackoverflow.com/users/7109256/random1234"}, "reply_to_user": {"reputation": 3582, "user_id": 5937428, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/tgO5i.png?s=128&g=1", "display_name": "amflare", "link": "https://stackoverflow.com/users/5937428/amflare"}, "edited": false, "score": 0, "creation_date": 1479940465, "post_id": 40774904, "comment_id": 68774335, "body": "@tbirrell not sure what you are asking for regarding both your questions since i&#39;m a beginner...=("}, {"owner": {"reputation": 1790, "user_id": 1192115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HqdDP.png?s=128&g=1", "display_name": "2oppin", "link": "https://stackoverflow.com/users/1192115/2oppin"}, "edited": false, "score": 0, "creation_date": 1479940595, "post_id": 40774904, "comment_id": 68774381, "body": "it seems you use datetime column type (but thus &quot;Z&quot; is confusing, do you have some additional processing on server?) in any case 88.8% it&#39;s timezone issue, read this: <a href=\"http://stackoverflow.com/questions/19843203/how-to-store-a-datetime-in-mysql-with-timezone-info\" title=\"how to store a datetime in mysql with timezone info\">stackoverflow.com/questions/19843203/&hellip;</a>"}, {"owner": {"reputation": 3582, "user_id": 5937428, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/tgO5i.png?s=128&g=1", "display_name": "amflare", "link": "https://stackoverflow.com/users/5937428/amflare"}, "edited": false, "score": 0, "creation_date": 1479941120, "post_id": 40774904, "comment_id": 68774530, "body": "@random1234 insert these two lines of code inside the for-loop, then copy and paste the output into your question as an edit. (You get to the output by hitting F12 in your web browser.) <code>console.log(responseObject[i].todoDate); console.log(typeof responseObject[i].todoDate);</code>"}, {"owner": {"reputation": 747, "user_id": 7109256, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/046895960549d3bbd398d17251dc500d?s=128&d=identicon&r=PG&f=1", "display_name": "random1234", "link": "https://stackoverflow.com/users/7109256/random1234"}, "reply_to_user": {"reputation": 3582, "user_id": 5937428, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/tgO5i.png?s=128&g=1", "display_name": "amflare", "link": "https://stackoverflow.com/users/5937428/amflare"}, "edited": false, "score": 0, "creation_date": 1479941292, "post_id": 40774904, "comment_id": 68774574, "body": "@tbirrell 2016-11-24T23:00:00.000Z string 2016-11-24T23:00:00.000Z string etc....."}, {"owner": {"reputation": 3582, "user_id": 5937428, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/tgO5i.png?s=128&g=1", "display_name": "amflare", "link": "https://stackoverflow.com/users/5937428/amflare"}, "edited": false, "score": 0, "creation_date": 1479941496, "post_id": 40774904, "comment_id": 68774638, "body": "@random1234 Ok. So is that &quot;2016-11-24T23:00:00.000Z&quot; supposed to be &quot;2016-11-25...&quot; Or is it correct at this point in the program? (Also, as a side note, <code>.toString()</code> is unnecessary since it is already a string)"}, {"owner": {"reputation": 747, "user_id": 7109256, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/046895960549d3bbd398d17251dc500d?s=128&d=identicon&r=PG&f=1", "display_name": "random1234", "link": "https://stackoverflow.com/users/7109256/random1234"}, "reply_to_user": {"reputation": 3582, "user_id": 5937428, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/tgO5i.png?s=128&g=1", "display_name": "amflare", "link": "https://stackoverflow.com/users/5937428/amflare"}, "edited": false, "score": 0, "creation_date": 1479941665, "post_id": 40774904, "comment_id": 68774701, "body": "@tbirrell yes it is wrong, it is supossed to be 2016-11-25"}, {"owner": {"reputation": 3582, "user_id": 5937428, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/tgO5i.png?s=128&g=1", "display_name": "amflare", "link": "https://stackoverflow.com/users/5937428/amflare"}, "edited": false, "score": 0, "creation_date": 1479941788, "post_id": 40774904, "comment_id": 68774745, "body": "Okay, your error is server side then, and we will need to look at that code to determine the issue."}], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 454813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fd25560264169b726c3452f42edb533?s=128&d=identicon&r=PG", "display_name": "Wangot", "link": "https://stackoverflow.com/users/454813/wangot"}, "is_accepted": false, "score": 1, "last_activity_date": 1479954362, "creation_date": 1479954362, "answer_id": 40777148, "question_id": 40774904, "link": "https://stackoverflow.com/questions/40774904/why-is-my-date-from-mysql-decrementing-by-one-day-in-javascript/40777148#40777148", "title": "Why is my date from mysql decrementing by one day in javascript?", "body": "<p>The Z means \"zero hour offset\" also known as \"Zulu time\" (UTC). When you are querying the date from the database there are two possible scenario that the date is change, either in the database layer or on the application layer, adjusting it to the timezone you are at.</p>\n\n<p>So for example if the database setting save time automatically to UTC when you got the actual data it will be converted to your current time zone. But from your example 2016-12-20 is converted to 2016-12-19T23:00:00.000Z then I am assuming that your database setting on date is saving it in a certain timezone then converting it to UTC.</p>\n\n<p>To fix it try adjusting your application logic or database setting, for me I rather do it on the application level and maintain the date in DB to be save to UTC.</p>\n\n<p>Try this to see the difference and could give you hint on solving your issue:</p>\n\n<pre><code>var currentDate = new Date();\nvar isoDate = currentDate.toISOString();\nconsole.log(currentDate, isoDate);\n</code></pre>\n"}], "owner": {"reputation": 747, "user_id": 7109256, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/046895960549d3bbd398d17251dc500d?s=128&d=identicon&r=PG&f=1", "display_name": "random1234", "link": "https://stackoverflow.com/users/7109256/random1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2180, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1479954362, "creation_date": 1479938781, "question_id": 40774904, "link": "https://stackoverflow.com/questions/40774904/why-is-my-date-from-mysql-decrementing-by-one-day-in-javascript", "title": "Why is my date from mysql decrementing by one day in javascript?", "body": "<p>I have a todo list that is stored in mysql database the columns stored are todoTitle and todoDate, when i print the todoDate to screen as you can see in the code below it will show the date decremented by one day, for example if the date in the database shows 2016-12-20 it will show 2016-12-19 on my website.</p>\n\n<p>If you are wondering why the todoDate is made into string and then substring it is because if i would not do that it would print out like this: 2016-12-19T23:00:00.000Z</p>\n\n<pre><code>var xhr = new XMLHttpRequest();                 // Create XMLHttpRequest object\n\nxhr.onload = function() {// When readystate changes\n// The following conditional check will not work locally - only on a server\nif(xhr.status === 200) {                      // If server status was ok\nresponseObject = JSON.parse(xhr.responseText);\n\n// BUILD UP STRING WITH NEW CONTENT (could also use DOM manipulation)\nvar newContent =\n    \"&lt;tr&gt;\" +\n    \"&lt;td&gt;\" + \"Activity\" + \"&lt;/td&gt;\" +\n    \"&lt;td&gt;\" + \"Due Date\" + \"&lt;/td&gt;\" +\n    \"&lt;/tr&gt;\";\nfor (var i = 0; i &lt; responseObject.length; i++) { // Loop through object\n    newContent += \"&lt;tr&gt;\";\n    newContent += \"&lt;td&gt;\" + responseObject[i].todoTitle + \"&lt;/td&gt;\";\n    newContent += \"&lt;td&gt;\" + responseObject[i].todoDate.toString().substring(0,10) + \"&lt;/td&gt;\";\n    newContent += \"&lt;/tr&gt;\";\n}\n\n// Update the page with the new content\ndocument.getElementById('content').innerHTML = newContent;\n\n}\n};\n\n//xhr.open('GET', 'data/data.json', true);  // Dummy JSON Data\nxhr.open('GET', 'http://127.0.0.1:8000/todo/', true);        // Prepare the request\nxhr.send(null);                                 // Send the request\n</code></pre>\n"}, {"tags": ["javascript"], "answers": [{"tags": [], "owner": {"reputation": 579, "user_id": 5593631, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6fd12224f5e48ad3011d820a87ff442b?s=128&d=identicon&r=PG&f=1", "display_name": "Luminous_Dev", "link": "https://stackoverflow.com/users/5593631/luminous-dev"}, "is_accepted": false, "score": 0, "last_activity_date": 1479939297, "creation_date": 1479939297, "answer_id": 40775023, "question_id": 40774880, "link": "https://stackoverflow.com/questions/40774880/how-to-fix-simple-slider-bug-javascript/40775023#40775023", "title": "how to fix simple slider bug - javascript", "body": "<p>You reassigned i = 0 before your last element to become block</p>\n\n<p>Try:</p>\n\n<pre><code>if(i == allSliderSlides.length-1){\n\n    allSliderSlides[allSliderSlides.length-1].style.display = \"none\";\n    allSliderSlides[i].style.display = \"block\";\n    i = 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6785763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fjMHc.jpg?s=128&g=1", "display_name": "Justice Mba", "link": "https://stackoverflow.com/users/6785763/justice-mba"}, "is_accepted": false, "score": 0, "last_activity_date": 1479939562, "creation_date": 1479939562, "answer_id": 40775068, "question_id": 40774880, "link": "https://stackoverflow.com/questions/40774880/how-to-fix-simple-slider-bug-javascript/40775068#40775068", "title": "how to fix simple slider bug - javascript", "body": "<p>Here's the problem:</p>\n\n<pre><code>if(i == allSliderSlides.length-1){\n\n        i = 0;\n        allSliderSlides[allSliderSlides.length-1].style.display = \"none\";\n        allSliderSlides[i].style.display = \"block\";\n\n\n    }\n</code></pre>\n\n<p>You are resetting the counter before changing the style. This results to displaying the fist image and the last image would never be displayed.</p>\n\n<p>Solution: Move <code>i = 0;</code> to last line in the block like so:</p>\n\n<pre><code>    if(i == allSliderSlides.length-1){\n\n\n                allSliderSlides[allSliderSlides.length-1].style.display = \"none\";\n                allSliderSlides[i].style.display = \"block\";\n                i = 0;\n\n\n            }\n</code></pre>\n\n<p>Hope that helps.</p>\n"}], "owner": {"reputation": 31, "user_id": 4876127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ddbc3c2358db5ffcf1fea0ee2cd3368?s=128&d=identicon&r=PG&f=1", "display_name": "user4876127", "link": "https://stackoverflow.com/users/4876127/user4876127"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1479939562, "creation_date": 1479938652, "question_id": 40774880, "link": "https://stackoverflow.com/questions/40774880/how-to-fix-simple-slider-bug-javascript", "title": "how to fix simple slider bug - javascript", "body": "<p>I try to create a simple slider using javascipt. the problem is when counter gets to last element, It dosen't change the display to block\nthis is the code</p>\n\n<pre><code>&lt;div id=\"slider\"&gt;\n&lt;img class=\"slide\" src=\"img/img13.jpg\" alt=\"\"/&gt;\n&lt;img class=\"slide\" src=\"img/img14.jpg\" alt=\"\"/&gt;\n&lt;img class=\"slide\" src=\"img/img15.jpg\" alt=\"\"/&gt;\n&lt;img class=\"slide\" src=\"img/img16.jpg\" alt=\"\"/&gt;\n&lt;img class=\"slide\" src=\"img/img17.jpg\" alt=\"\"/&gt;\n&lt;img class=\"slide\" src=\"img/img18.jpg\" alt=\"\"/&gt;\n&lt;/div&gt;\n\n var delay = 3000;\nvar i = 0;\nvar allSliderSlides = document.getElementsByClassName('slide');\nallSliderSlides[0].style.display = \"block\";\nsetInterval(function(){\n    i++;\n    allSliderSlides[i].style.display = \"block\";\n\n    if(allSliderSlides[i-1].style.display==\"block\"){\n        allSliderSlides[i-1].style.display=\"none\";\n    }\n\n    if(i == allSliderSlides.length-1){\n\n        i = 0;\n        allSliderSlides[allSliderSlides.length-1].style.display = \"none\";\n        allSliderSlides[i].style.display = \"block\";\n\n\n    }\n\n},delay);\n</code></pre>\n\n<p>please give me some advice or suggestion to fix this problem\nthanks</p>\n"}, {"tags": ["javascript", "jquery"], "answers": [{"comments": [{"owner": {"reputation": 49711, "user_id": 367401, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/b864b7510b2cb4ed4a96befe513fbb83?s=128&d=identicon&r=PG", "display_name": "BenM", "link": "https://stackoverflow.com/users/367401/benm"}, "reply_to_user": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 0, "creation_date": 1479938859, "post_id": 40774889, "comment_id": 68773738, "body": "@4castle No, it isn&#39;t. That will literally append an <code>&lt;h3&gt;</code> element to the <code>&lt;button&gt;</code>."}, {"owner": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 0, "creation_date": 1479938984, "post_id": 40774889, "comment_id": 68773783, "body": "Ah, I was thinking of <code>$(this).after(...</code>"}], "tags": [], "owner": {"reputation": 49711, "user_id": 367401, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/b864b7510b2cb4ed4a96befe513fbb83?s=128&d=identicon&r=PG", "display_name": "BenM", "link": "https://stackoverflow.com/users/367401/benm"}, "is_accepted": false, "score": 2, "last_activity_date": 1479938703, "creation_date": 1479938703, "answer_id": 40774889, "question_id": 40774865, "link": "https://stackoverflow.com/questions/40774865/jquery-concatenating-with-insertafter/40774889#40774889", "title": "jquery: concatenating with insertAfter()", "body": "<p>You're getting the value of the text area <em>before</em> the button is clicked. You need to obtain it inside the event handler (notice that you may also need to use <a href=\"https://api.jquery.com/event.preventdefault/\" rel=\"nofollow noreferrer\"><code>preventDefault()</code></a> on the event in case your button is submitting a form or similar):</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>$(function() {\r\n    $('#submitBtn').click(function(e) {\r\n        e.preventDefault();\r\n        $(\"&lt;h3&gt;\" + $('#textInput').val() + \"&lt;/h3&gt;\").insertAfter(this);\r\n    });\r\n});</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n\r\n&lt;textarea id=\"textInput\"&gt;&lt;/textarea&gt;\r\n&lt;button id=\"submitBtn\"&gt;Submit&lt;/button&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 6986, "user_id": 6814719, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c381acfd1d093c752561a97e909a8f74?s=128&d=identicon&r=PG&f=1", "display_name": "Geeky", "link": "https://stackoverflow.com/users/6814719/geeky"}, "is_accepted": false, "score": 0, "last_activity_date": 1479939308, "creation_date": 1479939308, "answer_id": 40775026, "question_id": 40774865, "link": "https://stackoverflow.com/questions/40774865/jquery-concatenating-with-insertafter/40775026#40775026", "title": "jquery: concatenating with insertAfter()", "body": "<p>You have to take input inside the click handler</p>\n\n<p>check this snippet</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>$(document).ready(function() {\r\n \r\n  $('#submitBtn').click(function() {\r\n     var contents = $('#textInput').val();\r\n \r\n    $(\"&lt;h3&gt;&lt;/h3&gt;\").insertAfter($(this)).html(contents);\r\n  })\r\n})</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;input type=\"text\" id=\"textInput\"&gt;\r\n\r\n&lt;input type=\"button\" id=\"submitBtn\" value=\"submitbtn\"&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Hope it helps</p>\n"}], "owner": {"reputation": 455, "user_id": 6798776, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/1386861281327602/picture?type=large", "display_name": "kdizzle", "link": "https://stackoverflow.com/users/6798776/kdizzle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1479939308, "creation_date": 1479938583, "question_id": 40774865, "link": "https://stackoverflow.com/questions/40774865/jquery-concatenating-with-insertafter", "title": "jquery: concatenating with insertAfter()", "body": "<p>Objective: When 'Submit' is clicked, add the contents of the textbox below the button into a h3 element.</p>\n\n<p>So I made a variable <code>contents</code> which takes in the value from the textbox. When I click the submit button, it should insert the <code>h3</code> element with <code>contents</code> inside it. I'm not sure if it's something with concatenating in jquery or if there's something else I'm missing here. Apologies since I'm still new to jquery.</p>\n\n<pre><code>$(document).ready(function() {\n  var contents = $('#textInput').val();\n  $('#submitBtn').click(function() {\n    $(\"&lt;h3&gt;\" + contents + \"&lt;/h3&gt;\").insertAfter('#submitBtn');\n  })\n})\n</code></pre>\n\n<p>What seems to be the problem here?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["javascript", "node.js", "express", "flash-message"], "comments": [{"owner": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "edited": false, "score": 0, "creation_date": 1479938202, "post_id": 40774750, "comment_id": 68773486, "body": "I&#39;m no express expert, but every other <code>app.use</code> the parameter is the result of calling a function - e.g. <code>expressValidator()</code>, <code>bodyParser.json()</code> etc"}], "answers": [{"comments": [{"owner": {"reputation": 13073, "user_id": 3858806, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/R0DRu.png?s=128&g=1", "display_name": "Junius L.", "link": "https://stackoverflow.com/users/3858806/junius-l"}, "edited": false, "score": 0, "creation_date": 1479938370, "post_id": 40774780, "comment_id": 68773550, "body": "changed to <code>app.use(flash())</code> and I&#39;m still getting the same error."}, {"owner": {"reputation": 574451, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "reply_to_user": {"reputation": 13073, "user_id": 3858806, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/R0DRu.png?s=128&g=1", "display_name": "Junius L.", "link": "https://stackoverflow.com/users/3858806/junius-l"}, "edited": false, "score": 0, "creation_date": 1479939156, "post_id": 40774780, "comment_id": 68773841, "body": "@julekgwa - You also have to move <code>app.use(flash());</code> before your other route definitions but after your session definitions."}], "tags": [], "owner": {"reputation": 574451, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "is_accepted": false, "score": 4, "last_activity_date": 1479939139, "last_edit_date": 1479939139, "creation_date": 1479938186, "answer_id": 40774780, "question_id": 40774750, "link": "https://stackoverflow.com/questions/40774750/req-flash-is-not-a-function-nodejs/40774780#40774780", "title": "req.flash is not a function Nodejs", "body": "<p>Per <a href=\"https://github.com/jaredhanson/connect-flash\" rel=\"nofollow noreferrer\">the documentation</a>, change this:</p>\n\n<pre><code>app.use(flash);\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>app.use(flash());\n</code></pre>\n\n<p>And, move your <code>app.use(flash())</code> to be before your other route definitions, but after your session definitions.</p>\n"}, {"tags": [], "owner": {"reputation": 84, "user_id": 2620351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e269be5995f49b152b9b7c988895ea?s=128&d=identicon&r=PG", "display_name": "Lars Fr&#246;lich", "link": "https://stackoverflow.com/users/2620351/lars-fr%c3%b6lich"}, "is_accepted": true, "score": 3, "last_activity_date": 1479939330, "last_edit_date": 1479939330, "creation_date": 1479938464, "answer_id": 40774837, "question_id": 40774750, "link": "https://stackoverflow.com/questions/40774750/req-flash-is-not-a-function-nodejs/40774837#40774837", "title": "req.flash is not a function Nodejs", "body": "<p>The middleware you set up with <code>app.use()</code> is being executed in the order it's declared, so in your case the flash-module will be called before session-handeling.\nA quick look into the <a href=\"https://www.npmjs.com/package/connect-flash\" rel=\"nofollow noreferrer\">connect-flash-docs</a> reveals that <code>app.use(flash());</code> should be called after the other session-related middleware is setup, so try moving it down some lines, that should fix your problem.</p>\n\n<p>Quote from the connect-flash-docs:</p>\n\n<blockquote>\n  <p>Flash messages are stored in the session. First, setup sessions as usual by enabling cookieParser and session middleware. Then, use flash middleware provided by connect-flash.</p>\n</blockquote>\n"}], "owner": {"reputation": 13073, "user_id": 3858806, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/R0DRu.png?s=128&g=1", "display_name": "Junius L.", "link": "https://stackoverflow.com/users/3858806/junius-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1175, "favorite_count": 0, "accepted_answer_id": 40774837, "answer_count": 2, "score": 0, "last_activity_date": 1479944724, "creation_date": 1479938007, "last_edit_date": 1479944724, "question_id": 40774750, "link": "https://stackoverflow.com/questions/40774750/req-flash-is-not-a-function-nodejs", "title": "req.flash is not a function Nodejs", "body": "<p>I have been staring at this code for the past hour and I don't know how to fix the problem, I'm getting <code>'TypeError: req.flash is not a function</code>. I have tried moving <code>app.use(flash)</code> around and still I'm getting the error. How can I fix this?</p>\n\n<pre><code>var flash = require('connect-flash');\nvar express = require('express');\nvar path = require('path');\nvar cookieParser = require('cookie-parser');\nvar bodyParser = require('body-parser');\nvar handlebars = require('express-handlebars').create({\n      layoutsDir: path.join(__dirname, \"views/layouts\"),\n      partialsDir: path.join(__dirname, \"views/partials\"),\n      defaultLayout: 'layout',\n      extname: 'handlebars'\n});\nvar expressValidator = require('express-validator');\nvar session = require('express-session');\nvar passport = require('passport');\nvar localStrategy = require('passport-local').strategy;\nvar mongo = require('mongodb');\nvar mongoose = require('mongoose');\nmongoose.connect('mongodb://localhost/login');\nvar db = mongoose.connection;\n\n// init app\nvar app = express();\n\nvar routes = require('./routes/index');\nvar users = require('./routes/users');\n\n// view engine\napp.engine('handlebars', handlebars.engine);\napp.set('view engine', 'handlebars');\napp.set('views', path.join(__dirname, \"views\"));\n\napp.use(expressValidator());\n\n// bodyParser Middleware\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: false }));\napp.use(cookieParser());\n\n// set static folder\napp.use(express.static(path.join(__dirname, 'public')));\napp.use('/', routes);\napp.use('/users', users);\n\napp.use(flash);\n\n// express session\napp.use(session({\n    secret: 'secret',\n    saveUninitialized: true,\n    resave: true\n}));\n\n// passport init\napp.use(passport.initialize());\napp.use(passport.session());\n\n// Global Vars\napp.use(function (req, res, next) {\n    res.local.success_msg = req.flash('success_msg');\n    res.local.error_msg = req.flash('error_msg');\n    res.local.error = req.flash('error');\n    next();\n});\n\n// set Port\napp.set('port', (process.env.PORT || 3000));\napp.listen(app.get('port'), function () {\n    console.log('Server started on port ' + app.get('port'));\n});\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "checkbox"], "comments": [{"owner": {"reputation": 10319, "user_id": 1951524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CvHQh.png?s=128&g=1", "display_name": "Martin Schneider", "link": "https://stackoverflow.com/users/1951524/martin-schneider"}, "edited": false, "score": 0, "creation_date": 1479941308, "post_id": 40774728, "comment_id": 68774578, "body": "Looks like an issue about fundamental programming and jQuery understanding: Both are not checked if both check states return <code>false</code>. And there is no need to bind to the same event within that event handler."}], "answers": [{"comments": [{"owner": {"reputation": 1557, "user_id": 5295879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c551c1d9125e328b69e794495959eadd?s=128&d=identicon&r=PG", "display_name": "Robiseb", "link": "https://stackoverflow.com/users/5295879/robiseb"}, "edited": false, "score": 0, "creation_date": 1479938454, "post_id": 40774807, "comment_id": 68773582, "body": "Use the <code>&amp;&amp;</code> operator instead the <code>||</code> because only one of them must be checked, not the both."}], "tags": [], "owner": {"reputation": 304305, "user_id": 519413, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7839089cd91dc5cc5eb1e0cdbf3312ed?s=128&d=identicon&r=PG", "display_name": "Rory McCrossan", "link": "https://stackoverflow.com/users/519413/rory-mccrossan"}, "is_accepted": true, "score": 3, "last_activity_date": 1479938515, "last_edit_date": 1479938515, "creation_date": 1479938335, "answer_id": 40774807, "question_id": 40774728, "link": "https://stackoverflow.com/questions/40774728/jquery-if-one-of-the-two-checkboxes-is-checked-in-list/40774807#40774807", "title": "Jquery if one of the two checkboxes is checked in list.", "body": "<p>To solve this hook to the <code>submit</code> event of the form and check the length of the <code>:checked</code> radio buttons. You can then call <code>preventDefault()</code> on the event to stop the submission, if needed:</p>\n\n<pre><code>$(\"form\").on('submit', function(e) {\n    if (!$('input[name=\"name1\"]:checked').length &amp;&amp; !$('input[name=\"name2\"]:checked').length) {\n        e.preventDefault();\n        $('#segmentError').toggle();\n        $(\"html, body\").animate({\n            scrollTop: $(\"#scrollHere\").offset().top\n        });\n    }\n});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3503, "user_id": 3005449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukhWf.jpg?s=128&g=1", "display_name": "Daerik", "link": "https://stackoverflow.com/users/3005449/daerik"}, "is_accepted": false, "score": 1, "last_activity_date": 1522024217, "last_edit_date": 1522024217, "creation_date": 1479938530, "answer_id": 40774855, "question_id": 40774728, "link": "https://stackoverflow.com/questions/40774728/jquery-if-one-of-the-two-checkboxes-is-checked-in-list/40774855#40774855", "title": "Jquery if one of the two checkboxes is checked in list.", "body": "<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>$('button[type=\"submit\"]').on('click', function(event) {\r\n  event.preventDefault();\r\n  if($('input[type=\"radio\"]:checked').val()) {\r\n    $('form').submit();\r\n  } else {\r\n    $('.error-container').text('This is required');\r\n  }\r\n});</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;p class=\"error-container\"&gt;&lt;/p&gt;\r\n&lt;form&gt;\r\n  &lt;input type=\"radio\" name=\"1\"&gt;\r\n  &lt;input type=\"radio\" name=\"1\"&gt;\r\n  &lt;input type=\"radio\" name=\"2\"&gt;\r\n  &lt;input type=\"radio\" name=\"2\"&gt;\r\n  &lt;button type=\"submit\"&gt;Submit&lt;/button&gt;\r\n&lt;/form&gt;\r\n&lt;script src=\"https://code.jquery.com/jquery-2.2.4.min.js\"&gt;&lt;/script&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 7526, "user_id": 6872499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4588d5f475cab63f2e2f2add35c9b9ff?s=128&d=identicon&r=PG&f=1", "display_name": "silentsod", "link": "https://stackoverflow.com/users/6872499/silentsod"}, "is_accepted": false, "score": 1, "last_activity_date": 1479938700, "creation_date": 1479938700, "answer_id": 40774887, "question_id": 40774728, "link": "https://stackoverflow.com/questions/40774728/jquery-if-one-of-the-two-checkboxes-is-checked-in-list/40774887#40774887", "title": "Jquery if one of the two checkboxes is checked in list.", "body": "<p>Four things:</p>\n\n<p>Your selector has an error, it's looking for names like \"name1\" and not names like \"1\": <code>$(\"input[name*='1']:checked\").length &gt; 0 || $(\"input[name*='2']:checked\")).length &gt; 0</code> Also, you need to check how many elements were grabbed with the <code>.length</code> check</p>\n\n<p>The other is that your submit button does not have <code>id=\"submit\"</code> on it and so the click event is not bound.</p>\n\n<p>Finally, you need to bind prevent default earlier:</p>\n\n<pre><code>$(\"form\").submit(function(e){\n                e.preventDefault();\n            });\n\n$(\"#submit\").on(\"click\",function(){\nconsole.log(\"clicky\");\nconsole.log($(\"input[name*='1']:checked\"));\n      if ($(\"input[name*='1']:checked\").length &gt; 0 || $(\"input[name*='2']:checked\").length &gt; 0) {\n      console.log('found checked');\n\n        $('#segmentError').toggle();\n\n        if($(\"#Error\").is(':visible')) {\n          $(\"html, body\").animate({scrollTop: $(\"#scrollHere\").offset().top});\n        }\n      }\n      return true;\n    });\n</code></pre>\n\n<p>Here's a JSFiddle: <a href=\"https://jsfiddle.net/msLrc2dm/1/\" rel=\"nofollow noreferrer\">https://jsfiddle.net/msLrc2dm/1/</a></p>\n"}, {"tags": [], "owner": {"reputation": 1634, "user_id": 5121058, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a5e91c4e6ac05560c9f6d5655f1ab859?s=128&d=identicon&r=PG&f=1", "display_name": "Adri&#225;n E", "link": "https://stackoverflow.com/users/5121058/adri%c3%a1n-e"}, "is_accepted": false, "score": 2, "last_activity_date": 1479938859, "creation_date": 1479938859, "answer_id": 40774928, "question_id": 40774728, "link": "https://stackoverflow.com/questions/40774728/jquery-if-one-of-the-two-checkboxes-is-checked-in-list/40774928#40774928", "title": "Jquery if one of the two checkboxes is checked in list.", "body": "<p>There are many things I see wrong in your snippet.</p>\n\n<ol>\n<li>You are using #submit but the submit button does not have an id set</li>\n<li>You are using name = 'name1' in your javascript but the name in the HTML is name=\"1\" (name1 vs 1). So they do not match.</li>\n</ol>\n\n<p>Here is a sample JSFiddle to show you how to check whether each of the pairs of checkboxes is checked.</p>\n\n<p><a href=\"https://jsfiddle.net/bwahhpnd/\" rel=\"nofollow noreferrer\">https://jsfiddle.net/bwahhpnd/</a></p>\n\n<p>Basically you can use:</p>\n\n<pre><code>$(\"input[name='1']:checked\").length\n</code></pre>\n\n<p>To see if any of the inputs are checked (if length is 0 none is checked).</p>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 1591204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4d490771e7fbe86a34853e3f86f488a?s=128&d=identicon&r=PG", "display_name": "p.phresh", "link": "https://stackoverflow.com/users/1591204/p-phresh"}, "is_accepted": false, "score": 1, "last_activity_date": 1479939642, "creation_date": 1479939642, "answer_id": 40775083, "question_id": 40774728, "link": "https://stackoverflow.com/questions/40774728/jquery-if-one-of-the-two-checkboxes-is-checked-in-list/40775083#40775083", "title": "Jquery if one of the two checkboxes is checked in list.", "body": "<p>As said in the other answers...</p>\n\n<p>fixed and put it into a working fiddle</p>\n\n<pre><code>$(\"input[name='name1']\").is(':checked')\n</code></pre>\n\n<p>use the \".is(':checked') to test if selected</p>\n\n<p><a href=\"https://jsfiddle.net/zjhtye8c/2/\" rel=\"nofollow noreferrer\">https://jsfiddle.net/zjhtye8c/2/</a></p>\n"}, {"comments": [{"owner": {"reputation": 84, "user_id": 4594936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d451e2d5a70f2ab69643ef932b0ccf9?s=128&d=identicon&r=PG&f=1", "display_name": "fons", "link": "https://stackoverflow.com/users/4594936/fons"}, "edited": false, "score": 0, "creation_date": 1479941150, "post_id": 40775311, "comment_id": 68774537, "body": "You can find a working fiddle of your code with my updates here: <a href=\"https://jsfiddle.net/1jqgno2b/\" rel=\"nofollow noreferrer\">jsfiddle.net/1jqgno2b</a>"}], "tags": [], "owner": {"reputation": 84, "user_id": 4594936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d451e2d5a70f2ab69643ef932b0ccf9?s=128&d=identicon&r=PG&f=1", "display_name": "fons", "link": "https://stackoverflow.com/users/4594936/fons"}, "is_accepted": false, "score": 1, "last_activity_date": 1479942235, "last_edit_date": 1479942235, "creation_date": 1479940681, "answer_id": 40775311, "question_id": 40774728, "link": "https://stackoverflow.com/questions/40774728/jquery-if-one-of-the-two-checkboxes-is-checked-in-list/40775311#40775311", "title": "Jquery if one of the two checkboxes is checked in list.", "body": "<p>After looking at your code I see a couple of issues you need to update in order to make it work:</p>\n\n<p><strong>1. Assign an <code>id</code> to the submit button</strong> in order to reference it later in jQuery:</p>\n\n\n\n<pre><code>&lt;button id=\"submit\" type=\"submit\"&gt;&lt;/button&gt;\n</code></pre>\n\n<p><strong>2. Update the <code>if</code> clause</strong> as follows:</p>\n\n\n\n<pre><code>if ( $(\"input[name='1']:checked\").val() &amp;&amp; $(\"input[name='2']:checked\").val() )\n</code></pre>\n\n<p><br></p>\n\n<h3>Working snippet</h3>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>$(\"#submit\").on(\"click\", function() {\r\n\r\n  if ($(\"input[name='1']:checked\").val() &amp;&amp; $(\"input[name='2']:checked\").val()) {\r\n    alert(\"input checked in list 1 and input checked in list 2\");\r\n  } else {\r\n    alert(\"some checked radio buttons are missing\")\r\n  }\r\n\r\n  return true;\r\n});</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n\r\n&lt;form&gt;\r\n  &lt;input type=\"radio\" name=\"1\"&gt;\r\n  &lt;input type=\"radio\" name=\"1\"&gt;\r\n\r\n  &lt;input type=\"radio\" name=\"2\"&gt;\r\n  &lt;input type=\"radio\" name=\"2\"&gt;\r\n\r\n  &lt;button id=\"submit\" type=\"submit\"&gt;&lt;/button&gt;\r\n&lt;/form&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 73, "user_id": 4654724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e05da4cf8afb8d48848859ac13fb3261?s=128&d=identicon&r=PG&f=1", "display_name": "Coen", "link": "https://stackoverflow.com/users/4654724/coen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1112, "favorite_count": 0, "accepted_answer_id": 40774807, "answer_count": 6, "score": 0, "last_activity_date": 1522024217, "creation_date": 1479937905, "question_id": 40774728, "link": "https://stackoverflow.com/questions/40774728/jquery-if-one-of-the-two-checkboxes-is-checked-in-list", "title": "Jquery if one of the two checkboxes is checked in list.", "body": "<p>I have a form which contains two lists of <code>radio</code> checkboxes.</p>\n\n<p>I need a validation check wether one checkbox is checked in either list. \nTo illustrate: </p>\n\n<pre><code>   &lt;form&gt;\n    &lt;input type=\"radio\" name=\"1\"&gt;\n    &lt;input type=\"radio\" name=\"1\"&gt;\n\n    &lt;input type=\"radio\" name=\"2\"&gt;\n    &lt;input type=\"radio\" name=\"2\"&gt;\n\n    &lt;button type=\"submit\"&gt;&lt;/button&gt;\n    &lt;/form&gt;\n</code></pre>\n\n<p>so when the form submits, it needs to check wether a checkbox is checked in 'name1' or in 'name2' or in both. If not,it should not let the request through, and give an error message: \"This is required\". I tried doing this in Jquery with the following code:</p>\n\n<pre><code>$(\"#submit\").on(\"click\",function(){\n      if ($(\"input[name*='name1']:checked\") || $(\"input[name*='name2']:checked\")) {\n        $(\"form\").submit(function(e){\n                e.preventDefault();\n            });\n\n        $('#segmentError').toggle();\n\n        if($(\"#Error\").is(':visible')) {\n          $(\"html, body\").animate({scrollTop: $(\"#scrollHere\").offset().top});\n        }\n      }\n      return true;\n    });\n</code></pre>\n\n<p>However, now it won't let the request through whatsoever. I'm not that good with JQuery, so I hope one of you can help me with this problem. </p>\n"}, {"tags": ["javascript", "arrays", "object", "grouping", "lodash"], "comments": [{"owner": {"reputation": 319259, "user_id": 1447675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziYmO.gif?s=128&g=1", "display_name": "Nina Scholz", "link": "https://stackoverflow.com/users/1447675/nina-scholz"}, "edited": false, "score": 2, "creation_date": 1479938241, "post_id": 40774697, "comment_id": 68773502, "body": "your result is not valid."}, {"owner": {"reputation": 1981, "user_id": 2763683, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/051ea263ec152b0fa5d3f9adc3e75ecf?s=128&d=identicon&r=PG", "display_name": "Andrea Bergonzo", "link": "https://stackoverflow.com/users/2763683/andrea-bergonzo"}, "edited": false, "score": 0, "creation_date": 1555284027, "post_id": 40774697, "comment_id": 98046084, "body": "Is there a similar approach to get a Map instead of an object?"}, {"owner": {"reputation": 3264, "user_id": 8266386, "user_type": "registered", "profile_image": "https://graph.facebook.com/957596370999408/picture?type=large", "display_name": "Isac Moura", "link": "https://stackoverflow.com/users/8266386/isac-moura"}, "edited": false, "score": 0, "creation_date": 1598897934, "post_id": 40774697, "comment_id": 112600299, "body": "If you&#39;re using Typescript (which is not the case of the OP) you already have groupBy method. You can use by <code>your_array.groupBy(...)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 17238, "user_id": 240490, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/536433ff8bf7f50dcab75a920a11d30a?s=128&d=identicon&r=PG", "display_name": "Jonathan Eunice", "link": "https://stackoverflow.com/users/240490/jonathan-eunice"}, "edited": false, "score": 23, "creation_date": 1479938608, "post_id": 40774759, "comment_id": 68773647, "body": "And if you want it shorter still, <code>var grouped = _.groupBy(cars, &#39;make&#39;);</code> No need for a function at all, if the accessor is a simple property name."}, {"owner": {"reputation": 738, "user_id": 3902681, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100000497258931/picture?type=large", "display_name": "Adrian Grzywaczewski", "link": "https://stackoverflow.com/users/3902681/adrian-grzywaczewski"}, "edited": false, "score": 1, "creation_date": 1513377637, "post_id": 40774759, "comment_id": 82645760, "body": "What &#39;_&#39; stands for?"}, {"owner": {"reputation": 1730, "user_id": 2057532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24012258db25e3b06291940a94c776d3?s=128&d=identicon&r=PG", "display_name": "vilsbole", "link": "https://stackoverflow.com/users/2057532/vilsbole"}, "reply_to_user": {"reputation": 738, "user_id": 3902681, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100000497258931/picture?type=large", "display_name": "Adrian Grzywaczewski", "link": "https://stackoverflow.com/users/3902681/adrian-grzywaczewski"}, "edited": false, "score": 0, "creation_date": 1516202012, "post_id": 40774759, "comment_id": 83593377, "body": "@AdrianGrzywaczewski it was the default convention for name-spacing &#39;lodash&#39; or &#39;underscore&#39;. Now that the librairies are modular it&#39;s no longer required ie. <a href=\"https://www.npmjs.com/package/lodash.groupby\" rel=\"nofollow noreferrer\">npmjs.com/package/lodash.groupby</a>"}, {"owner": {"reputation": 913, "user_id": 6213735, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-fQIuFKGhGAQ/AAAAAAAAAAI/AAAAAAAAAGY/cpnjgwO9PKE/photo.jpg?sz=128", "display_name": "Luis Antonio Pestana", "link": "https://stackoverflow.com/users/6213735/luis-antonio-pestana"}, "edited": false, "score": 8, "creation_date": 1535997785, "post_id": 40774759, "comment_id": 91259155, "body": "And how can I interate in the result?"}, {"owner": {"reputation": 4283, "user_id": 3087130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e28b6cae70e67566737707bc9634c04?s=128&d=identicon&r=PG&f=1", "display_name": "Jaqen H&#39;ghar", "link": "https://stackoverflow.com/users/3087130/jaqen-hghar"}, "edited": false, "score": 0, "creation_date": 1617308569, "post_id": 40774759, "comment_id": 118275906, "body": "I believe that would be with Object.keys(grouped)"}], "tags": [], "owner": {"reputation": 34232, "user_id": 3836229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2fef27eacad45ee3fffda314f86f2?s=128&d=identicon&r=PG", "display_name": "Timo", "link": "https://stackoverflow.com/users/3836229/timo"}, "is_accepted": false, "score": 92, "last_activity_date": 1479938085, "creation_date": 1479938085, "answer_id": 40774759, "question_id": 40774697, "link": "https://stackoverflow.com/questions/40774697/how-to-group-an-array-of-objects-by-key/40774759#40774759", "title": "How to group an array of objects by key", "body": "<p><strong>You are looking for <a href=\"https://lodash.com/docs/4.17.2#groupBy\" rel=\"noreferrer\"><code>_.groupBy()</code></a>.</strong></p>\n\n<p>Removing the property you are grouping by from the objects should be trivial if required:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var cars = [{'make':'audi','model':'r8','year':'2012'},{'make':'audi','model':'rs5','year':'2013'},{'make':'ford','model':'mustang','year':'2012'},{'make':'ford','model':'fusion','year':'2015'},{'make':'kia','model':'optima','year':'2012'},];\r\n\r\nvar grouped = _.groupBy(cars, function(car) {\r\n  return car.make;\r\n});\r\n\r\nconsole.log(grouped);</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src='https://cdn.jsdelivr.net/lodash/4.17.2/lodash.min.js'&gt;&lt;/script&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<hr>\n\n<p>As a bonus, you get even nicer syntax with ES6 arrow functions:</p>\n\n<pre><code>const grouped = _.groupBy(cars, car =&gt; car.make);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2137, "user_id": 2494799, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/2c3f5a48e2cee63a78250706c0affdcb?s=128&d=identicon&r=PG", "display_name": "Mounir Elfassi", "link": "https://stackoverflow.com/users/2494799/mounir-elfassi"}, "edited": false, "score": 1, "creation_date": 1563471005, "post_id": 40774906, "comment_id": 100720886, "body": "how can i iterate <code>result</code> results?"}, {"owner": {"reputation": 319259, "user_id": 1447675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziYmO.gif?s=128&g=1", "display_name": "Nina Scholz", "link": "https://stackoverflow.com/users/1447675/nina-scholz"}, "reply_to_user": {"reputation": 2137, "user_id": 2494799, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/2c3f5a48e2cee63a78250706c0affdcb?s=128&d=identicon&r=PG", "display_name": "Mounir Elfassi", "link": "https://stackoverflow.com/users/2494799/mounir-elfassi"}, "edited": false, "score": 2, "creation_date": 1563471106, "post_id": 40774906, "comment_id": 100720937, "body": "you could take the entries with <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/entries\" rel=\"nofollow noreferrer\"><code>Object.entries</code></a> and loop through the key/value pairs."}, {"owner": {"reputation": 2735, "user_id": 2207792, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8b3a458b9e93134fd6c9bef380efa3bc?s=128&d=identicon&r=PG", "display_name": "Mercurial", "link": "https://stackoverflow.com/users/2207792/mercurial"}, "edited": false, "score": 0, "creation_date": 1571513605, "post_id": 40774906, "comment_id": 103269130, "body": "Is there a way to remove the <code>make</code> from data set once grouped? It&#39;s taking extra space."}, {"owner": {"reputation": 319259, "user_id": 1447675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziYmO.gif?s=128&g=1", "display_name": "Nina Scholz", "link": "https://stackoverflow.com/users/1447675/nina-scholz"}, "edited": false, "score": 0, "creation_date": 1571513762, "post_id": 40774906, "comment_id": 103269172, "body": "yes, by <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment#Rest_in_Object_Destructuring\" rel=\"nofollow noreferrer\">Rest in Object Destructuring</a>."}, {"owner": {"reputation": 76, "user_id": 1988944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aadad488a22467902b5a812518b32cce?s=128&d=identicon&r=PG", "display_name": "Omar", "link": "https://stackoverflow.com/users/1988944/omar"}, "edited": false, "score": 0, "creation_date": 1573168405, "post_id": 40774906, "comment_id": 103804036, "body": "What does r and a stand for? Would it be correct to assume that r is the accumulator and a the currentValue?"}, {"owner": {"reputation": 214, "user_id": 9821336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6abc43ee4dc8084989d538c85841620e?s=128&d=identicon&r=PG&f=1", "display_name": "kartik", "link": "https://stackoverflow.com/users/9821336/kartik"}, "edited": false, "score": 0, "creation_date": 1592134717, "post_id": 40774906, "comment_id": 110309802, "body": "The best answer as ever. Why are you passing Object.create(null)?"}, {"owner": {"reputation": 319259, "user_id": 1447675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziYmO.gif?s=128&g=1", "display_name": "Nina Scholz", "link": "https://stackoverflow.com/users/1447675/nina-scholz"}, "reply_to_user": {"reputation": 214, "user_id": 9821336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6abc43ee4dc8084989d538c85841620e?s=128&d=identicon&r=PG&f=1", "display_name": "kartik", "link": "https://stackoverflow.com/users/9821336/kartik"}, "edited": false, "score": 0, "creation_date": 1592136604, "post_id": 40774906, "comment_id": 110310398, "body": "@kartik, it creates an empty object without prototypes."}, {"owner": {"reputation": 214, "user_id": 9821336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6abc43ee4dc8084989d538c85841620e?s=128&d=identicon&r=PG&f=1", "display_name": "kartik", "link": "https://stackoverflow.com/users/9821336/kartik"}, "edited": false, "score": 0, "creation_date": 1592211890, "post_id": 40774906, "comment_id": 110333275, "body": "If you remove prototypes, How will the object has access to object&#39;s prototypes method?"}, {"owner": {"reputation": 319259, "user_id": 1447675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziYmO.gif?s=128&g=1", "display_name": "Nina Scholz", "link": "https://stackoverflow.com/users/1447675/nina-scholz"}, "reply_to_user": {"reputation": 214, "user_id": 9821336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6abc43ee4dc8084989d538c85841620e?s=128&d=identicon&r=PG&f=1", "display_name": "kartik", "link": "https://stackoverflow.com/users/9821336/kartik"}, "edited": false, "score": 0, "creation_date": 1592212724, "post_id": 40774906, "comment_id": 110333673, "body": "@kartik, there is no one used here."}, {"owner": {"reputation": 929, "user_id": 7817343, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Jcl9LWPaSC0/AAAAAAAAAAI/AAAAAAAATbw/7Xwpr0AHR-0/photo.jpg?sz=128", "display_name": "Sarah", "link": "https://stackoverflow.com/users/7817343/sarah"}, "edited": false, "score": 0, "creation_date": 1595899397, "post_id": 40774906, "comment_id": 111627544, "body": "What does this line of code do r[a.make] = r[a.make] || [];"}, {"owner": {"reputation": 319259, "user_id": 1447675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziYmO.gif?s=128&g=1", "display_name": "Nina Scholz", "link": "https://stackoverflow.com/users/1447675/nina-scholz"}, "reply_to_user": {"reputation": 929, "user_id": 7817343, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Jcl9LWPaSC0/AAAAAAAAAAI/AAAAAAAATbw/7Xwpr0AHR-0/photo.jpg?sz=128", "display_name": "Sarah", "link": "https://stackoverflow.com/users/7817343/sarah"}, "edited": false, "score": 0, "creation_date": 1601313543, "post_id": 40774906, "comment_id": 113362649, "body": "@Sarah, it generates a new property <code>a.make</code> with an array if it does not exist (the value of not existing properties is <code>undefined</code>). if exist, it assign itself."}, {"owner": {"reputation": 4798, "user_id": 14747039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pvsfF.png?s=128&g=1", "display_name": "Aalexander", "link": "https://stackoverflow.com/users/14747039/aalexander"}, "edited": false, "score": 0, "creation_date": 1607510807, "post_id": 40774906, "comment_id": 115293143, "body": "Why do you need this line Object.create(null)? I read your answer to kartik but I don t understand it."}, {"owner": {"reputation": 319259, "user_id": 1447675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziYmO.gif?s=128&g=1", "display_name": "Nina Scholz", "link": "https://stackoverflow.com/users/1447675/nina-scholz"}, "reply_to_user": {"reputation": 4798, "user_id": 14747039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pvsfF.png?s=128&g=1", "display_name": "Aalexander", "link": "https://stackoverflow.com/users/14747039/aalexander"}, "edited": false, "score": 0, "creation_date": 1607510992, "post_id": 40774906, "comment_id": 115293216, "body": "@Alex, the reason is to prevent to have for example prototype functions like <code>toString</code> as property. for the most application you need not to worry about but you nee to know it, this is to show to use a really emypty object."}, {"owner": {"reputation": 4798, "user_id": 14747039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pvsfF.png?s=128&g=1", "display_name": "Aalexander", "link": "https://stackoverflow.com/users/14747039/aalexander"}, "edited": false, "score": 0, "creation_date": 1607511159, "post_id": 40774906, "comment_id": 115293297, "body": "Have you a specific example when ` toString ` can be a property?"}, {"owner": {"reputation": 319259, "user_id": 1447675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziYmO.gif?s=128&g=1", "display_name": "Nina Scholz", "link": "https://stackoverflow.com/users/1447675/nina-scholz"}, "reply_to_user": {"reputation": 4798, "user_id": 14747039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pvsfF.png?s=128&g=1", "display_name": "Aalexander", "link": "https://stackoverflow.com/users/14747039/aalexander"}, "edited": false, "score": 0, "creation_date": 1607511392, "post_id": 40774906, "comment_id": 115293414, "body": "@Alex, please have a look here: <a href=\"https://stackoverflow.com/questions/38068424/push-a-array-object-into-another-array-object-if-the-value-not-exists/38068553#38068553\" title=\"push a array object into another array object if the value not exists\">stackoverflow.com/questions/38068424/&hellip;</a>"}], "tags": [], "owner": {"reputation": 319259, "user_id": 1447675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziYmO.gif?s=128&g=1", "display_name": "Nina Scholz", "link": "https://stackoverflow.com/users/1447675/nina-scholz"}, "is_accepted": false, "score": 353, "last_activity_date": 1479938786, "creation_date": 1479938786, "answer_id": 40774906, "question_id": 40774697, "link": "https://stackoverflow.com/questions/40774697/how-to-group-an-array-of-objects-by-key/40774906#40774906", "title": "How to group an array of objects by key", "body": "<p>In plain Javascript, you could use <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce\" rel=\"noreferrer\"><code>Array#reduce</code></a> with an object</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var cars = [{ make: 'audi', model: 'r8', year: '2012' }, { make: 'audi', model: 'rs5', year: '2013' }, { make: 'ford', model: 'mustang', year: '2012' }, { make: 'ford', model: 'fusion', year: '2015' }, { make: 'kia', model: 'optima', year: '2012' }],\r\n    result = cars.reduce(function (r, a) {\r\n        r[a.make] = r[a.make] || [];\r\n        r[a.make].push(a);\r\n        return r;\r\n    }, Object.create(null));\r\n\r\nconsole.log(result);</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>.as-console-wrapper { max-height: 100% !important; top: 0; }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 17238, "user_id": 240490, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/536433ff8bf7f50dcab75a920a11d30a?s=128&d=identicon&r=PG", "display_name": "Jonathan Eunice", "link": "https://stackoverflow.com/users/240490/jonathan-eunice"}, "is_accepted": true, "score": 147, "last_activity_date": 1615455627, "last_edit_date": 1615455627, "creation_date": 1479939637, "answer_id": 40775082, "question_id": 40774697, "link": "https://stackoverflow.com/questions/40774697/how-to-group-an-array-of-objects-by-key/40775082#40775082", "title": "How to group an array of objects by key", "body": "<p><a href=\"https://stackoverflow.com/a/40774759/240490\">Timo's answer</a> is how I would do it. Simple <code>_.groupBy</code>, and allow some duplications in the objects in the grouped structure.</p>\n<p>However the OP also asked for the duplicate <code>make</code> keys to be removed. If you wanted to go all the way:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>var grouped = _.mapValues(_.groupBy(cars, 'make'),\n                          clist =&gt; clist.map(car =&gt; _.omit(car, 'make')));\n\nconsole.log(grouped);\n</code></pre>\n<p>Yields:</p>\n<pre class=\"lang-js prettyprint-override\"><code>{ audi:\n   [ { model: 'r8', year: '2012' },\n     { model: 'rs5', year: '2013' } ],\n  ford:\n   [ { model: 'mustang', year: '2012' },\n     { model: 'fusion', year: '2015' } ],\n  kia: \n   [ { model: 'optima', year: '2012' } ] \n}\n</code></pre>\n<p>If you wanted to do this using Underscore.js, note that its version of <code>_.mapValues</code> is called <code>_.mapObject</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 27492, "user_id": 3773011, "user_type": "moderator", "profile_image": "https://i.stack.imgur.com/Hmfxy.jpg?s=128&g=1", "display_name": "Makyen", "link": "https://stackoverflow.com/users/3773011/makyen"}, "edited": false, "score": 1, "creation_date": 1479965633, "post_id": 40776409, "comment_id": 68780814, "body": "While this code may solve the question, <a href=\"http://meta.stackexchange.com/questions/114762/explaining-entirely-code-based-answers\">including an explanation</a> of how and why this solves the problem would really help to improve the quality of your post. Remember that you are answering the question for readers in the future, not just the person asking now! Please edit your answer to add explanation, and give an indication of what limitations and assumptions apply."}, {"owner": {"reputation": 1178, "user_id": 4292792, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/23Sw5.jpg?s=128&g=1", "display_name": "Carrm", "link": "https://stackoverflow.com/users/4292792/carrm"}, "edited": false, "score": 0, "creation_date": 1530253235, "post_id": 40776409, "comment_id": 89178632, "body": "It looks like the best answer to me since you go through the array only once to get the desired result. There&#39;s no need to use another function to remove the <code>make</code> property, and it is more readable as well."}], "tags": [], "owner": {"reputation": 89, "user_id": 1918815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd5be12d09157df8e8388c80ef04eadd?s=128&d=identicon&r=PG", "display_name": "nickxbs", "link": "https://stackoverflow.com/users/1918815/nickxbs"}, "is_accepted": false, "score": 8, "last_activity_date": 1479977088, "last_edit_date": 1479977088, "creation_date": 1479947918, "answer_id": 40776409, "question_id": 40774697, "link": "https://stackoverflow.com/questions/40774697/how-to-group-an-array-of-objects-by-key/40776409#40776409", "title": "How to group an array of objects by key", "body": "<p>You can try to modify the object inside the function called per iteration by _.groupBy func. \nNotice that the source array change his elements!</p>\n\n<pre><code>var res = _.groupBy(cars,(car)=&gt;{\n    const makeValue=car.make;\n    delete car.make;\n    return makeValue;\n})\nconsole.log(res);\nconsole.log(cars);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 398, "user_id": 6897682, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mq9a2.jpg?s=128&g=1", "display_name": "Shinigami", "link": "https://stackoverflow.com/users/6897682/shinigami"}, "edited": false, "score": 0, "creation_date": 1522046085, "post_id": 47385953, "comment_id": 85973163, "body": "this is definitely not es5"}, {"owner": {"reputation": 177, "user_id": 4895810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/568eb7dbff9ddcbe2addbb0340227a74?s=128&d=identicon&r=PG&f=1", "display_name": "Jeevan", "link": "https://stackoverflow.com/users/4895810/jeevan"}, "edited": false, "score": 0, "creation_date": 1545980980, "post_id": 47385953, "comment_id": 94747897, "body": "Its just works !. Can any one elaborate this reduce function?"}, {"owner": {"reputation": 1516, "user_id": 4744496, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/679765025479307/picture?type=large", "display_name": "Daniel Vukasovich", "link": "https://stackoverflow.com/users/4744496/daniel-vukasovich"}, "edited": false, "score": 0, "creation_date": 1546283356, "post_id": 47385953, "comment_id": 94819027, "body": "I liked both of your answers, but I see they both provide &quot;make&quot; field as a member of each &quot;make&quot; array. I&#39;ve provided an answer based on yours where the delivered output matches the expected output. Thanks!"}], "tags": [], "owner": {"reputation": 5973, "user_id": 1169468, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/FdHEy.jpg?s=128&g=1", "display_name": "metakungfu", "link": "https://stackoverflow.com/users/1169468/metakungfu"}, "is_accepted": false, "score": 73, "last_activity_date": 1599787520, "last_edit_date": 1599787520, "creation_date": 1511158183, "answer_id": 47385953, "question_id": 40774697, "link": "https://stackoverflow.com/questions/40774697/how-to-group-an-array-of-objects-by-key/47385953#47385953", "title": "How to group an array of objects by key", "body": "<p>There is absolutely no reason to download a 3rd party library to achieve this simple problem, like the above solutions suggest.</p>\n<p>The one line version to group a <code>list</code> of objects by a certain <code>key</code> in es6:</p>\n<pre><code>const groupByKey = (list, key) =&gt; list.reduce((hash, obj) =&gt; ({...hash, [obj[key]]:( hash[obj[key]] || [] ).concat(obj)}), {})\n</code></pre>\n<p>The longer version that filters out the objects without the <code>key</code>:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function groupByKey(array, key) {\n   return array\n     .reduce((hash, obj) =&gt; {\n       if(obj[key] === undefined) return hash; \n       return Object.assign(hash, { [obj[key]]:( hash[obj[key]] || [] ).concat(obj)})\n     }, {})\n}\n\n\nvar cars = [{'make':'audi','model':'r8','year':'2012'},{'make':'audi','model':'rs5','year':'2013'},{'make':'ford','model':'mustang','year':'2012'},{'make':'ford','model':'fusion','year':'2015'},{'make':'kia','model':'optima','year':'2012'}];\n\nconsole.log(groupByKey(cars, 'make'))</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>NOTE: It appear the original question asks how to group cars by make, but omit the make in each group. So the short answer, without 3rd party libraries, would look like this:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const groupByKey = (list, key, {omitKey=false}) =&gt; list.reduce((hash, {[key]:value, ...rest}) =&gt; ({...hash, [value]:( hash[value] || [] ).concat(omitKey ? {...rest} : {[key]:value, ...rest})} ), {})\n\nvar cars = [{'make':'audi','model':'r8','year':'2012'},{'make':'audi','model':'rs5','year':'2013'},{'make':'ford','model':'mustang','year':'2012'},{'make':'ford','model':'fusion','year':'2015'},{'make':'kia','model':'optima','year':'2012'}];\n\nconsole.log(groupByKey(cars, 'make', {omitKey:true}))</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 15406, "user_id": 184528, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/da682c7ec9a8375da6b0800ee6977e15?s=128&d=identicon&r=PG", "display_name": "cdiggins", "link": "https://stackoverflow.com/users/184528/cdiggins"}, "is_accepted": false, "score": 18, "last_activity_date": 1519620957, "creation_date": 1519620957, "answer_id": 48981669, "question_id": 40774697, "link": "https://stackoverflow.com/questions/40774697/how-to-group-an-array-of-objects-by-key/48981669#48981669", "title": "How to group an array of objects by key", "body": "<p>Here is your very own <code>groupBy</code> function which is a generalization of the code from: <a href=\"https://github.com/you-dont-need/You-Dont-Need-Lodash-Underscore\" rel=\"noreferrer\">https://github.com/you-dont-need/You-Dont-Need-Lodash-Underscore</a></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function groupBy(xs, f) {\r\n  return xs.reduce((r, v, i, a, k = f(v)) =&gt; ((r[k] || (r[k] = [])).push(v), r), {});\r\n}\r\n\r\nconst cars = [{ make: 'audi', model: 'r8', year: '2012' }, { make: 'audi', model: 'rs5', year: '2013' }, { make: 'ford', model: 'mustang', year: '2012' }, { make: 'ford', model: 'fusion', year: '2015' }, { make: 'kia', model: 'optima', year: '2012' }];\r\n\r\nconst result = groupBy(cars, (c) =&gt; c.make);\r\nconsole.log(result);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 8500, "user_id": 5349542, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/B4LnC.jpg?s=128&g=1", "display_name": "BlackBeard", "link": "https://stackoverflow.com/users/5349542/blackbeard"}, "is_accepted": false, "score": 2, "last_activity_date": 1530700558, "creation_date": 1530700558, "answer_id": 51171643, "question_id": 40774697, "link": "https://stackoverflow.com/questions/40774697/how-to-group-an-array-of-objects-by-key/51171643#51171643", "title": "How to group an array of objects by key", "body": "<p>You can also make use of <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach\" rel=\"nofollow noreferrer\"><strong><code>array#forEach()</code></strong></a> method like this:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const cars = [{ make: 'audi', model: 'r8', year: '2012' }, { make: 'audi', model: 'rs5', year: '2013' }, { make: 'ford', model: 'mustang', year: '2012' }, { make: 'ford', model: 'fusion', year: '2015' }, { make: 'kia', model: 'optima', year: '2012' }];\r\n\r\nlet newcars = {}\r\n\r\ncars.forEach(car =&gt; {\r\n  newcars[car.make] ? // check if that array exists or not in newcars object\r\n    newcars[car.make].push({model: car.model, year: car.year})  // just push\r\n   : (newcars[car.make] = [], newcars[car.make].push({model: car.model, year: car.year})) // create a new array and push\r\n})\r\n\r\nconsole.log(newcars);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 398, "user_id": 2842348, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nva8m.png?s=128&g=1", "display_name": "adrien", "link": "https://stackoverflow.com/users/2842348/adrien"}, "edited": false, "score": 0, "creation_date": 1562224361, "post_id": 51563349, "comment_id": 100312551, "body": "And probably faster as well, and simpler. I&#39;ve expanded your snippet to be a bit more dynamic as I had a long list of fields from a db table I didn&#39;t want to type in. Also note you will need to replace const with let.  <code>for ( let { TABLE_NAME, ...fields } of source) {                         result[TABLE_NAME] = result[TABLE_NAME] || [];                         result[TABLE_NAME].push({ ...fields }); }</code>"}, {"owner": {"reputation": 398, "user_id": 2842348, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nva8m.png?s=128&g=1", "display_name": "adrien", "link": "https://stackoverflow.com/users/2842348/adrien"}, "edited": false, "score": 0, "creation_date": 1562266667, "post_id": 51563349, "comment_id": 100332754, "body": "TIL, thanks! <a href=\"https://medium.com/@mautayro/es6-variable-declaration-for-loops-why-const-works-in-a-for-in-loop-but-not-in-a-normal-a200cc5467c2\" rel=\"nofollow noreferrer\">medium.com/@mautayro/&hellip;</a>"}], "tags": [], "owner": {"reputation": 105033, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "is_accepted": false, "score": 11, "last_activity_date": 1532714884, "creation_date": 1532714884, "answer_id": 51563349, "question_id": 40774697, "link": "https://stackoverflow.com/questions/40774697/how-to-group-an-array-of-objects-by-key/51563349#51563349", "title": "How to group an array of objects by key", "body": "<p>Its also possible with a simple <code>for</code> loop:</p>\n\n<pre><code> const result = {};\n\n for(const {make, model, year} of cars) {\n   if(!result[make]) result[make] = [];\n   result[make].push({ model, year });\n }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5460, "user_id": 4882514, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BbAnV.jpg?s=128&g=1", "display_name": "SynCap", "link": "https://stackoverflow.com/users/4882514/syncap"}, "is_accepted": false, "score": 11, "last_activity_date": 1587113496, "last_edit_date": 1587113496, "creation_date": 1539467450, "answer_id": 52797664, "question_id": 40774697, "link": "https://stackoverflow.com/questions/40774697/how-to-group-an-array-of-objects-by-key/52797664#52797664", "title": "How to group an array of objects by key", "body": "<p>I'd leave <code>REAL GROUP BY</code> for JS Arrays example exactly the same this task <a href=\"https://stackoverflow.com/a/52797477/4882514\">here</a></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const inputArray = [ \r\n    { Phase: \"Phase 1\", Step: \"Step 1\", Task: \"Task 1\", Value: \"5\" },\r\n    { Phase: \"Phase 1\", Step: \"Step 1\", Task: \"Task 2\", Value: \"10\" },\r\n    { Phase: \"Phase 1\", Step: \"Step 2\", Task: \"Task 1\", Value: \"15\" },\r\n    { Phase: \"Phase 1\", Step: \"Step 2\", Task: \"Task 2\", Value: \"20\" },\r\n    { Phase: \"Phase 2\", Step: \"Step 1\", Task: \"Task 1\", Value: \"25\" },\r\n    { Phase: \"Phase 2\", Step: \"Step 1\", Task: \"Task 2\", Value: \"30\" },\r\n    { Phase: \"Phase 2\", Step: \"Step 2\", Task: \"Task 1\", Value: \"35\" },\r\n    { Phase: \"Phase 2\", Step: \"Step 2\", Task: \"Task 2\", Value: \"40\" }\r\n];\r\n\r\nvar outObject = inputArray.reduce(function(a, e) {\r\n  // GROUP BY estimated key (estKey), well, may be a just plain key\r\n  // a -- Accumulator result object\r\n  // e -- sequentally checked Element, the Element that is tested just at this itaration\r\n\r\n  // new grouping name may be calculated, but must be based on real value of real field\r\n  let estKey = (e['Phase']); \r\n\r\n  (a[estKey] ? a[estKey] : (a[estKey] = null || [])).push(e);\r\n  return a;\r\n}, {});\r\n\r\nconsole.log(outObject);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 153, "user_id": 10642716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/01bTi.png?s=128&g=1", "display_name": "Wahinya Brian", "link": "https://stackoverflow.com/users/10642716/wahinya-brian"}, "is_accepted": false, "score": 6, "last_activity_date": 1543264277, "creation_date": 1543264277, "answer_id": 53488594, "question_id": 40774697, "link": "https://stackoverflow.com/questions/40774697/how-to-group-an-array-of-objects-by-key/53488594#53488594", "title": "How to group an array of objects by key", "body": "<p>Create a method which can be re-used</p>\n\n<pre><code>Array.prototype.groupBy = function(prop) {\n      return this.reduce(function(groups, item) {\n        const val = item[prop]\n        groups[val] = groups[val] || []\n        groups[val].push(item)\n        return groups\n      }, {})\n    };\n</code></pre>\n\n<p>Then below you can group by any criteria</p>\n\n<pre><code>const groupByMake = cars.groupBy('make');\n        console.log(groupByMake);\n</code></pre>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var cars = [\r\n    {\r\n        'make': 'audi',\r\n        'model': 'r8',\r\n        'year': '2012'\r\n    }, {\r\n        'make': 'audi',\r\n        'model': 'rs5',\r\n        'year': '2013'\r\n    }, {\r\n        'make': 'ford',\r\n        'model': 'mustang',\r\n        'year': '2012'\r\n    }, {\r\n        'make': 'ford',\r\n        'model': 'fusion',\r\n        'year': '2015'\r\n    }, {\r\n        'make': 'kia',\r\n        'model': 'optima',\r\n        'year': '2012'\r\n    },\r\n];\r\n  //re-usable method\r\nArray.prototype.groupBy = function(prop) {\r\n\t  return this.reduce(function(groups, item) {\r\n\t\tconst val = item[prop]\r\n\t\tgroups[val] = groups[val] || []\r\n\t\tgroups[val].push(item)\r\n\t\treturn groups\r\n\t  }, {})\r\n\t};\r\n  \r\n // initiate your groupBy. Notice the recordset Cars and the field Make....\r\n  const groupByMake = cars.groupBy('make');\r\n\t\tconsole.log(groupByMake);\r\n    \r\n    //At this point we have objects. You can use Object.keys to return an array</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 79, "user_id": 10287571, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6M1JDxgNt6s/AAAAAAAAAAI/AAAAAAAAAjI/TvX5RrL4Ma8/photo.jpg?sz=128", "display_name": "sama vamsi", "link": "https://stackoverflow.com/users/10287571/sama-vamsi"}, "is_accepted": false, "score": 1, "last_activity_date": 1544903478, "last_edit_date": 1544903478, "creation_date": 1543597104, "answer_id": 53561839, "question_id": 40774697, "link": "https://stackoverflow.com/questions/40774697/how-to-group-an-array-of-objects-by-key/53561839#53561839", "title": "How to group an array of objects by key", "body": "<pre><code>function groupBy(data, property) {\n  return data.reduce((acc, obj) =&gt; {\n    const key = obj[property];\n    if (!acc[key]) {\n      acc[key] = [];\n    }\n    acc[key].push(obj);\n    return acc;\n  }, {});\n}\ngroupBy(people, 'age');\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1516, "user_id": 4744496, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/679765025479307/picture?type=large", "display_name": "Daniel Vukasovich", "link": "https://stackoverflow.com/users/4744496/daniel-vukasovich"}, "is_accepted": false, "score": 1, "last_activity_date": 1546284322, "last_edit_date": 1546284322, "creation_date": 1546283014, "answer_id": 53990646, "question_id": 40774697, "link": "https://stackoverflow.com/questions/40774697/how-to-group-an-array-of-objects-by-key/53990646#53990646", "title": "How to group an array of objects by key", "body": "<p>I liked @metakunfu answer, but it doesn't provide the expected output exactly.\nHere's an updated that get rid of \"make\" in the final JSON payload.</p>\n\n<pre><code>var cars = [\n    {\n        'make': 'audi',\n        'model': 'r8',\n        'year': '2012'\n    }, {\n        'make': 'audi',\n        'model': 'rs5',\n        'year': '2013'\n    }, {\n        'make': 'ford',\n        'model': 'mustang',\n        'year': '2012'\n    }, {\n        'make': 'ford',\n        'model': 'fusion',\n        'year': '2015'\n    }, {\n        'make': 'kia',\n        'model': 'optima',\n        'year': '2012'\n    },\n];\n\nresult = cars.reduce((h, car) =&gt; Object.assign(h, { [car.make]:( h[car.make] || [] ).concat({model: car.model, year: car.year}) }), {})\n\nconsole.log(JSON.stringify(result));\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>{  \n   \"audi\":[  \n      {  \n         \"model\":\"r8\",\n         \"year\":\"2012\"\n      },\n      {  \n         \"model\":\"rs5\",\n         \"year\":\"2013\"\n      }\n   ],\n   \"ford\":[  \n      {  \n         \"model\":\"mustang\",\n         \"year\":\"2012\"\n      },\n      {  \n         \"model\":\"fusion\",\n         \"year\":\"2015\"\n      }\n   ],\n   \"kia\":[  \n      {  \n         \"model\":\"optima\",\n         \"year\":\"2012\"\n      }\n   ]\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5973, "user_id": 1169468, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/FdHEy.jpg?s=128&g=1", "display_name": "metakungfu", "link": "https://stackoverflow.com/users/1169468/metakungfu"}, "edited": false, "score": 2, "creation_date": 1547069891, "post_id": 54004961, "comment_id": 95070006, "body": "Uncaught ReferenceError: _ is not defined - you should be clear that your solution require to install a 3rd party library just to solve this."}, {"owner": {"reputation": 453, "user_id": 4463933, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1zlJrGJVSuQ/AAAAAAAAAAI/AAAAAAAAACY/hp2PdgCCnbA/photo.jpg?sz=128", "display_name": "agravat.in", "link": "https://stackoverflow.com/users/4463933/agravat-in"}, "reply_to_user": {"reputation": 5973, "user_id": 1169468, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/FdHEy.jpg?s=128&g=1", "display_name": "metakungfu", "link": "https://stackoverflow.com/users/1169468/metakungfu"}, "edited": false, "score": 2, "creation_date": 1547114263, "post_id": 54004961, "comment_id": 95083405, "body": "sorry, i think every one knows. _ stands and mostly used for lodash lib. so you need to use lodash. please read question so you will know he/she is asking for lodash. well thank you. i will remember this. and never forget to write lib."}, {"owner": {"reputation": 269, "user_id": 5540621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b9595fea10a08cb575f402ae9ba274e?s=128&d=identicon&r=PG&f=1", "display_name": "Rafael Oliveira", "link": "https://stackoverflow.com/users/5540621/rafael-oliveira"}, "edited": false, "score": 0, "creation_date": 1601926303, "post_id": 54004961, "comment_id": 113552503, "body": "You should edit your answer to include you&#39;re using a lib."}], "tags": [], "owner": {"reputation": 453, "user_id": 4463933, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1zlJrGJVSuQ/AAAAAAAAAAI/AAAAAAAAACY/hp2PdgCCnbA/photo.jpg?sz=128", "display_name": "agravat.in", "link": "https://stackoverflow.com/users/4463933/agravat-in"}, "is_accepted": false, "score": 3, "last_activity_date": 1609153267, "last_edit_date": 1609153267, "creation_date": 1546426095, "answer_id": 54004961, "question_id": 40774697, "link": "https://stackoverflow.com/questions/40774697/how-to-group-an-array-of-objects-by-key/54004961#54004961", "title": "How to group an array of objects by key", "body": "<p>Just try this one it works fine for me.</p>\n<p><code>let grouped = _.groupBy(cars, 'make');</code></p>\n<p>Note: Using lodash lib, so include it.</p>\n"}, {"tags": [], "owner": {"reputation": 3074, "user_id": 7253451, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SIjsy.jpg?s=128&g=1", "display_name": "G.aziz", "link": "https://stackoverflow.com/users/7253451/g-aziz"}, "is_accepted": false, "score": 17, "last_activity_date": 1592844007, "last_edit_date": 1592844007, "creation_date": 1548696088, "answer_id": 54407216, "question_id": 40774697, "link": "https://stackoverflow.com/questions/40774697/how-to-group-an-array-of-objects-by-key/54407216#54407216", "title": "How to group an array of objects by key", "body": "<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var cars = [{\n  make: 'audi',\n  model: 'r8',\n  year: '2012'\n}, {\n  make: 'audi',\n  model: 'rs5',\n  year: '2013'\n}, {\n  make: 'ford',\n  model: 'mustang',\n  year: '2012'\n}, {\n  make: 'ford',\n  model: 'fusion',\n  year: '2015'\n}, {\n  make: 'kia',\n  model: 'optima',\n  year: '2012'\n}].reduce((r, car) =&gt; {\n\n  const {\n    model,\n    year,\n    make\n  } = car;\n\n  r[make] = [...r[make] || [], {\n    model,\n    year\n  }];\n\n  return r;\n}, {});\n\nconsole.log(cars);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 7325, "user_id": 1396594, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a4789925f9fcb2ea5c3366b5b1edeb1c?s=128&d=identicon&r=PG", "display_name": "exexzian", "link": "https://stackoverflow.com/users/1396594/exexzian"}, "is_accepted": false, "score": 5, "last_activity_date": 1554738327, "last_edit_date": 1554738327, "creation_date": 1549907282, "answer_id": 54636293, "question_id": 40774697, "link": "https://stackoverflow.com/questions/40774697/how-to-group-an-array-of-objects-by-key/54636293#54636293", "title": "How to group an array of objects by key", "body": "<p>For cases where key can be null and we want to group them as <em>others</em> </p>\n\n<pre><code>var cars = [{'make':'audi','model':'r8','year':'2012'},{'make':'audi','model':'rs5','year':'2013'},{'make':'ford','model':'mustang','year':'2012'},{'make':'ford','model':'fusion','year':'2015'},{'make':'kia','model':'optima','year':'2012'},\n            {'make':'kia','model':'optima','year':'2033'},\n            {'make':null,'model':'zen','year':'2012'},\n            {'make':null,'model':'blue','year':'2017'},\n\n           ];\n\n\n result = cars.reduce(function (r, a) {\n        key = a.make || 'others';\n        r[key] = r[key] || [];\n        r[key].push(a);\n        return r;\n    }, Object.create(null));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 143310, "user_id": 5157454, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QPadFFLbBGA/AAAAAAAAAAI/AAAAAAAADB8/FkNCMP_vkAc/photo.jpg?sz=128", "display_name": "Ori Drori", "link": "https://stackoverflow.com/users/5157454/ori-drori"}, "is_accepted": false, "score": 0, "last_activity_date": 1559998737, "creation_date": 1559998737, "answer_id": 56506596, "question_id": 40774697, "link": "https://stackoverflow.com/questions/40774697/how-to-group-an-array-of-objects-by-key/56506596#56506596", "title": "How to group an array of objects by key", "body": "<p>With lodash/fp you can create a function with <code>_.flow()</code> that 1st groups by a key, and then map each group, and omits a key from each item:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const { flow, groupBy, mapValues, map, omit } = _;\r\n\r\nconst groupAndOmitBy = key =&gt; flow(\r\n  groupBy(key),\r\n  mapValues(map(omit(key)))\r\n);\r\n\r\nconst cars = [{ make: 'audi', model: 'r8', year: '2012' }, { make: 'audi', model: 'rs5', year: '2013' }, { make: 'ford', model: 'mustang', year: '2012' }, { make: 'ford', model: 'fusion', year: '2015' }, { make: 'kia', model: 'optima', year: '2012' }];\r\n\r\nconst groupAndOmitMake = groupAndOmitBy('make');\r\n\r\nconst result = groupAndOmitMake(cars);\r\n\r\nconsole.log(result);</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>.as-console-wrapper { max-height: 100% !important; top: 0; }</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src='https://cdn.jsdelivr.net/g/lodash@4(lodash.min.js+lodash.fp.min.js)'&gt;&lt;/script&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 690, "user_id": 2343728, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/f93daea02b443cfb333f6d4bfb38a16b?s=128&d=identicon&r=PG&f=1", "display_name": "wattry", "link": "https://stackoverflow.com/users/2343728/wattry"}, "edited": false, "score": 0, "creation_date": 1607104967, "post_id": 56882637, "comment_id": 115176844, "body": "A for...of loop is the least efficient. Use a for(i...) for a forEach loop"}], "tags": [], "owner": {"reputation": 398, "user_id": 2842348, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nva8m.png?s=128&g=1", "display_name": "adrien", "link": "https://stackoverflow.com/users/2842348/adrien"}, "is_accepted": false, "score": 0, "last_activity_date": 1562225096, "creation_date": 1562225096, "answer_id": 56882637, "question_id": 40774697, "link": "https://stackoverflow.com/questions/40774697/how-to-group-an-array-of-objects-by-key/56882637#56882637", "title": "How to group an array of objects by key", "body": "<p>Building on the <a href=\"https://stackoverflow.com/a/51563349/2842348\">answer</a> by @Jonas_Wilms if you do not want to type in all your fields:</p>\n\n<pre><code>    var result = {};\n\n    for ( let { first_field, ...fields } of your_data ) \n    { \n       result[first_field] = result[first_field] || [];\n       result[first_field].push({ ...fields }); \n    }\n\n</code></pre>\n\n<p>I didn't make any benchmark but I believe using a for loop would be more efficient than anything suggested in <a href=\"https://stackoverflow.com/questions/14446511/most-efficient-method-to-groupby-on-an-array-of-objects?page=2&amp;tab=votes#tab-top\">this answer</a> as well.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5249164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69f36789bf551b8b70a2f7ee63f37f10?s=128&d=identicon&r=PG&f=1", "display_name": "AKelley", "link": "https://stackoverflow.com/users/5249164/akelley"}, "is_accepted": false, "score": 0, "last_activity_date": 1563380637, "creation_date": 1563380637, "answer_id": 57080429, "question_id": 40774697, "link": "https://stackoverflow.com/questions/40774697/how-to-group-an-array-of-objects-by-key/57080429#57080429", "title": "How to group an array of objects by key", "body": "<pre><code>const reGroup = (list, key) =&gt; {\n    const newGroup = {};\n    list.forEach(item =&gt; {\n        const newItem = Object.assign({}, item);\n        delete newItem[key];\n        newGroup[item[key]] = newGroup[item[key]] || [];\n        newGroup[item[key]].push(newItem);\n    });\n    return newGroup;\n};\n</code></pre>\n\n<pre><code>const animals = [\n  {\n    type: 'dog',\n    breed: 'puddle'\n  },\n  {\n    type: 'dog',\n    breed: 'labradoodle'\n  },\n  {\n    type: 'cat',\n    breed: 'siamese'\n  },\n  {\n    type: 'dog',\n    breed: 'french bulldog'\n  },\n  {\n    type: 'cat',\n    breed: 'mud'\n  }\n];\nconsole.log(reGroup(animals, 'type'));\n</code></pre>\n\n<pre><code>const cars = [\n  {\n      'make': 'audi',\n      'model': 'r8',\n      'year': '2012'\n  }, {\n      'make': 'audi',\n      'model': 'rs5',\n      'year': '2013'\n  }, {\n      'make': 'ford',\n      'model': 'mustang',\n      'year': '2012'\n  }, {\n      'make': 'ford',\n      'model': 'fusion',\n      'year': '2015'\n  }, {\n      'make': 'kia',\n      'model': 'optima',\n      'year': '2012'\n  },\n];\n\nconsole.log(reGroup(cars, 'make'));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 9734362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43545083751b50e65b0557a00130be28?s=128&d=identicon&r=PG&f=1", "display_name": "Azayda", "link": "https://stackoverflow.com/users/9734362/azayda"}, "is_accepted": false, "score": 3, "last_activity_date": 1568411943, "creation_date": 1568411943, "answer_id": 57930777, "question_id": 40774697, "link": "https://stackoverflow.com/questions/40774697/how-to-group-an-array-of-objects-by-key/57930777#57930777", "title": "How to group an array of objects by key", "body": "<p>Prototype version using ES6 as well.\nBasically this uses the reduce function to pass in an accumulator and current item, which then uses this to build your \"grouped\" arrays based on the passed in key. the inner part of the reduce may look complicated but essentially it is testing to see if the key of the passed in object exists and if it doesn't then create an empty array and append the current item to that newly created array otherwise using the spread operator pass in all the objects of the current key array and append current item. Hope this helps someone!.</p>\n\n<pre><code>Array.prototype.groupBy = function(k) {\n  return this.reduce((acc, item) =&gt; ((acc[item[k]] = [...(acc[item[k]] || []), item]), acc),{});\n};\n\nconst projs = [\n  {\n    project: \"A\",\n    timeTake: 2,\n    desc: \"this is a description\"\n  },\n  {\n    project: \"B\",\n    timeTake: 4,\n    desc: \"this is a description\"\n  },\n  {\n    project: \"A\",\n    timeTake: 12,\n    desc: \"this is a description\"\n  },\n  {\n    project: \"B\",\n    timeTake: 45,\n    desc: \"this is a description\"\n  }\n];\n\nconsole.log(projs.groupBy(\"project\"));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10568, "user_id": 2951933, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6HrRg.png?s=128&g=1", "display_name": "Eugen Sunic", "link": "https://stackoverflow.com/users/2951933/eugen-sunic"}, "is_accepted": false, "score": -1, "last_activity_date": 1575475242, "last_edit_date": 1575475242, "creation_date": 1575474934, "answer_id": 59179954, "question_id": 40774697, "link": "https://stackoverflow.com/questions/40774697/how-to-group-an-array-of-objects-by-key/59179954#59179954", "title": "How to group an array of objects by key", "body": "<p>Here is another solution to it. As requested.</p>\n\n<blockquote>\n  <p>I want to make a new array of car objects that's grouped by make:</p>\n</blockquote>\n\n<pre><code>function groupBy() {\n  const key = 'make';\n  return cars.reduce((acc, x) =&gt; ({\n    ...acc,\n    [x[key]]: (!acc[x[key]]) ? [{\n      model: x.model,\n      year: x.year\n    }] : [...acc[x[key]], {\n      model: x.model,\n      year: x.year\n    }]\n  }), {})\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>console.log('Grouped by make key:',groupBy())\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 340, "user_id": 8211296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a77df127d243b1f78107db36909e7b61?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Sethi", "link": "https://stackoverflow.com/users/8211296/rahul-sethi"}, "is_accepted": false, "score": -1, "last_activity_date": 1576835084, "creation_date": 1576835084, "answer_id": 59423036, "question_id": 40774697, "link": "https://stackoverflow.com/questions/40774697/how-to-group-an-array-of-objects-by-key/59423036#59423036", "title": "How to group an array of objects by key", "body": "<p>Here is a solution inspired from Collectors.groupingBy() in Java:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function groupingBy(list, keyMapper) {\r\n  return list.reduce((accummalatorMap, currentValue) =&gt; {\r\n    const key = keyMapper(currentValue);\r\n    if(!accummalatorMap.has(key)) {\r\n      accummalatorMap.set(key, [currentValue]);\r\n    } else {\r\n      accummalatorMap.set(key, accummalatorMap.get(key).push(currentValue));\r\n    }\r\n    return accummalatorMap;\r\n  }, new Map());\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>This will give a Map object.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>// Usage\r\n\r\nconst carMakers = groupingBy(cars, car =&gt; car.make);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 490, "user_id": 661414, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/W0dT7.jpg?s=128&g=1", "display_name": "Leukipp", "link": "https://stackoverflow.com/users/661414/leukipp"}, "edited": false, "score": 0, "creation_date": 1591583227, "post_id": 60167163, "comment_id": 110101627, "body": "This looks inefficient as you do a search for each key. The search has most likely a complexity of O(n)."}, {"owner": {"reputation": 3264, "user_id": 8266386, "user_type": "registered", "profile_image": "https://graph.facebook.com/957596370999408/picture?type=large", "display_name": "Isac Moura", "link": "https://stackoverflow.com/users/8266386/isac-moura"}, "edited": false, "score": 0, "creation_date": 1598897996, "post_id": 60167163, "comment_id": 112600324, "body": "With Typescript you already have groupBy method. You can use by <code>your_array.groupBy(...)</code>"}], "tags": [], "owner": {"reputation": 21, "user_id": 8683161, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uAl2wIDGBF4/AAAAAAAAAAI/AAAAAAAAABY/hmA-lhpbgNs/photo.jpg?sz=128", "display_name": "Oluwafisayo Owolo", "link": "https://stackoverflow.com/users/8683161/oluwafisayo-owolo"}, "is_accepted": false, "score": 0, "last_activity_date": 1581419868, "last_edit_date": 1581419868, "creation_date": 1581418132, "answer_id": 60167163, "question_id": 40774697, "link": "https://stackoverflow.com/questions/40774697/how-to-group-an-array-of-objects-by-key/60167163#60167163", "title": "How to group an array of objects by key", "body": "<p>Grouped Array of Object in typescript with this:</p>\n\n<pre><code>groupBy (list: any[], key: string): Map&lt;string, Array&lt;any&gt;&gt; {\n    let map = new Map();\n    list.map(val=&gt; {\n        if(!map.has(val[key])){\n            map.set(val[key],list.filter(data =&gt; data[key] == val[key]));\n        }\n    });\n    return map;\n});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 138, "user_id": 5055925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x16Dw.jpg?s=128&g=1", "display_name": "Mohamed Abu Galala", "link": "https://stackoverflow.com/users/5055925/mohamed-abu-galala"}, "is_accepted": false, "score": 1, "last_activity_date": 1592845892, "creation_date": 1592845892, "answer_id": 62519849, "question_id": 40774697, "link": "https://stackoverflow.com/questions/40774697/how-to-group-an-array-of-objects-by-key/62519849#62519849", "title": "How to group an array of objects by key", "body": "<p>I love to write it with no dependency/complexity just pure simple js.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const mp = {}\nconst cars = [\n  {\n    model: 'Imaginary space craft SpaceX model',\n    year: '2025'\n  },\n  {\n    make: 'audi',\n    model: 'r8',\n    year: '2012'\n  },\n  {\n    make: 'audi',\n    model: 'rs5',\n    year: '2013'\n  },\n  {\n    make: 'ford',\n    model: 'mustang',\n    year: '2012'\n  },\n  {\n    make: 'ford',\n    model: 'fusion',\n    year: '2015'\n  },\n  {\n    make: 'kia',\n    model: 'optima',\n    year: '2012'\n  }\n]\n\ncars.forEach(c =&gt; {\n  if (!c.make) return // exit (maybe add them to a \"no_make\" category)\n\n  if (!mp[c.make]) mp[c.make] = [{ model: c.model, year: c.year }]\n  else mp[c.make].push({ model: c.model, year: c.year })\n})\n\nconsole.log(mp)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 538, "user_id": 7123439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2fcfc425354f7930c607155c018979e?s=128&d=identicon&r=PG&f=1", "display_name": "leonardofmed", "link": "https://stackoverflow.com/users/7123439/leonardofmed"}, "is_accepted": false, "score": 1, "last_activity_date": 1593018401, "creation_date": 1593018401, "answer_id": 62560460, "question_id": 40774697, "link": "https://stackoverflow.com/questions/40774697/how-to-group-an-array-of-objects-by-key/62560460#62560460", "title": "How to group an array of objects by key", "body": "<p>I made a benchmark to test the performance of each solution that don't use external libraries.</p>\n<p><a href=\"https://jsben.ch/ZQyZo\" rel=\"nofollow noreferrer\">JSBen.ch</a></p>\n<p>The <code>reduce()</code> option, posted by @Nina Scholz seems to be the optimal one.</p>\n"}, {"tags": [], "owner": {"reputation": 690, "user_id": 2343728, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/f93daea02b443cfb333f6d4bfb38a16b?s=128&d=identicon&r=PG&f=1", "display_name": "wattry", "link": "https://stackoverflow.com/users/2343728/wattry"}, "is_accepted": false, "score": 1, "last_activity_date": 1607104851, "creation_date": 1607104851, "answer_id": 65148504, "question_id": 40774697, "link": "https://stackoverflow.com/questions/40774697/how-to-group-an-array-of-objects-by-key/65148504#65148504", "title": "How to group an array of objects by key", "body": "<p>Agree that unless you use these  often there is no need for an external library. Although similar solutions are available, I see that some of them are tricky to follow <a href=\"https://gist.github.com/wattry/de36aa0fdecbab93adbaf4ff7818ef94\" rel=\"nofollow noreferrer\">here is a gist</a> that has a solution with comments if you're trying to understand what is happening.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const cars = [{\n  'make': 'audi',\n  'model': 'r8',\n  'year': '2012'\n}, {\n  'make': 'audi',\n  'model': 'rs5',\n  'year': '2013'\n}, {\n  'make': 'ford',\n  'model': 'mustang',\n  'year': '2012'\n}, {\n  'make': 'ford',\n  'model': 'fusion',\n  'year': '2015'\n}, {\n  'make': 'kia',\n  'model': 'optima',\n  'year': '2012'\n}, ];\n\n/**\n * Groups an array of objects by a key an returns an object or array grouped by provided key.\n * @param array - array to group objects by key.\n * @param key - key to group array objects by.\n * @param removeKey  - remove the key and it's value from the resulting object.\n * @param outputType - type of structure the output should be contained in.\n */\nconst groupBy = (\n  inputArray,\n  key,\n  removeKey = false,\n  outputType = {},\n) =&gt; {\n  return inputArray.reduce(\n    (previous, current) =&gt; {\n      // Get the current value that matches the input key and remove the key value for it.\n      const {\n        [key]: keyValue\n      } = current;\n      // remove the key if option is set\n      removeKey &amp;&amp; keyValue &amp;&amp; delete current[key];\n      // If there is already an array for the user provided key use it else default to an empty array.\n      const {\n        [keyValue]: reducedValue = []\n      } = previous;\n\n      // Create a new object and return that merges the previous with the current object\n      return Object.assign(previous, {\n        [keyValue]: reducedValue.concat(current)\n      });\n    },\n    // Replace the object here to an array to change output object to an array\n    outputType,\n  );\n};\n\nconsole.log(groupBy(cars, 'make', true))</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 9509, "user_id": 1547174, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02984f9cba31484b86a9acab0bbbb919?s=128&d=identicon&r=PG", "display_name": "Trung Tran", "link": "https://stackoverflow.com/users/1547174/trung-tran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319083, "favorite_count": 92, "accepted_answer_id": 40775082, "answer_count": 25, "score": 233, "last_activity_date": 1615455627, "creation_date": 1479937764, "last_edit_date": 1531137974, "question_id": 40774697, "link": "https://stackoverflow.com/questions/40774697/how-to-group-an-array-of-objects-by-key", "title": "How to group an array of objects by key", "body": "<p>Does anyone know of a (lodash if possible too) way to group an array of objects by an object key then create a new array of objects based on the grouping? For example, I have an array of car objects:</p>\n\n<pre><code>var cars = [\n    {\n        'make': 'audi',\n        'model': 'r8',\n        'year': '2012'\n    }, {\n        'make': 'audi',\n        'model': 'rs5',\n        'year': '2013'\n    }, {\n        'make': 'ford',\n        'model': 'mustang',\n        'year': '2012'\n    }, {\n        'make': 'ford',\n        'model': 'fusion',\n        'year': '2015'\n    }, {\n        'make': 'kia',\n        'model': 'optima',\n        'year': '2012'\n    },\n];\n</code></pre>\n\n<p>I want to make a new array of car objects that's grouped by <code>make</code>:</p>\n\n<pre><code>var cars = {\n    'audi': [\n        {\n            'model': 'r8',\n            'year': '2012'\n        }, {\n            'model': 'rs5',\n            'year': '2013'\n        },\n    ],\n\n    'ford': [\n        {\n            'model': 'mustang',\n            'year': '2012'\n        }, {\n            'model': 'fusion',\n            'year': '2015'\n        }\n    ],\n\n    'kia': [\n        {\n            'model': 'optima',\n            'year': '2012'\n        }\n    ]\n}\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "d3.js"], "answers": [{"tags": [], "owner": {"reputation": 101125, "user_id": 16363, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/xv8q9.png?s=128&g=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/16363/mark"}, "is_accepted": true, "score": 9, "last_activity_date": 1479939026, "creation_date": 1479939026, "answer_id": 40774969, "question_id": 40774677, "link": "https://stackoverflow.com/questions/40774677/d3-formatting-tick-value-to-show-b-billion-instead-of-g-giga/40774969#40774969", "title": "D3: Formatting tick value. To show B (Billion) instead of G (Giga)", "body": "<p>If you like the formatting of SI-prefix, but not the actual prefix, just swap it out with a simple <code>.replace</code>:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var f = d3.format(\"0.2s\");\r\n\r\ndocument.write(\r\n  f(1e9).replace(/G/,\"B\")\r\n);</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://d3js.org/d3.v4.min.js\"&gt;&lt;/script&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 736, "user_id": 9699173, "user_type": "registered", "profile_image": "https://graph.facebook.com/1152118041596962/picture?type=large", "display_name": "Minh Kha", "link": "https://stackoverflow.com/users/9699173/minh-kha"}, "edited": false, "score": 0, "creation_date": 1600768053, "post_id": 54865284, "comment_id": 113184877, "body": "hi, could u please show me the way u apply this for the whole project?"}], "tags": [], "owner": {"reputation": 31, "user_id": 6796059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b479f90037a42bfef393a4d07887c705?s=128&d=identicon&r=PG&f=1", "display_name": "abytecoder", "link": "https://stackoverflow.com/users/6796059/abytecoder"}, "is_accepted": false, "score": 1, "last_activity_date": 1552629667, "last_edit_date": 1552629667, "creation_date": 1551094398, "answer_id": 54865284, "question_id": 40774677, "link": "https://stackoverflow.com/questions/40774677/d3-formatting-tick-value-to-show-b-billion-instead-of-g-giga/54865284#54865284", "title": "D3: Formatting tick value. To show B (Billion) instead of G (Giga)", "body": "<p>If you want to apply Mark's Answer Globally, I used the following</p>\n\n<pre><code>fcopy = d3.format;\nfunction myFormat(){ \n         function_ret = fcopy.apply(d3, arguments) \n         return (function(args){return function (){ \n                return args.apply(d3, arguments).replace(/G/, \"B\");\n         }})(function_ret) \n} \nd3.format = myFormat;\n</code></pre>\n\n<p>I had the same problem with <a href=\"https://superset.incubator.apache.org/\" rel=\"nofollow noreferrer\">Superset</a>, I added this in the static/dashboard file. </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 15420394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1b5a4e751875c245478390c6bd89e18?s=128&d=identicon&r=PG&f=1", "display_name": "jash8506", "link": "https://stackoverflow.com/users/15420394/jash8506"}, "is_accepted": false, "score": 0, "last_activity_date": 1616040221, "creation_date": 1616040221, "answer_id": 66684599, "question_id": 40774677, "link": "https://stackoverflow.com/questions/40774677/d3-formatting-tick-value-to-show-b-billion-instead-of-g-giga/66684599#66684599", "title": "D3: Formatting tick value. To show B (Billion) instead of G (Giga)", "body": "<p>If you don't want to override the library globally, but you want to use your &quot;B&quot; function around the place the same way as d3.format:</p>\n<pre><code>import { format } from 'd3-format';\nexport const formatBillions = fs =&gt; s =&gt; format(fs)(s).replace(/G/, &quot;B&quot;);\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 4214260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c31fcfec2514f3d580e0135616a92efa?s=128&d=identicon&r=PG&f=1", "display_name": "Rashmit Dalbir Singh", "link": "https://stackoverflow.com/users/4214260/rashmit-dalbir-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3504, "favorite_count": 1, "accepted_answer_id": 40774969, "answer_count": 3, "score": 10, "last_activity_date": 1616040221, "creation_date": 1479937645, "question_id": 40774677, "link": "https://stackoverflow.com/questions/40774677/d3-formatting-tick-value-to-show-b-billion-instead-of-g-giga", "title": "D3: Formatting tick value. To show B (Billion) instead of G (Giga)", "body": "<p>I want to format Y-axis data in D3 Line chart. It's about world population so that is quite large.</p>\n\n<p>I am currently using below code, which is showing \"G\" instead of \"B\".</p>\n\n<pre><code>d3.format(\"s\")\n</code></pre>\n\n<p>I researched and found that here \"G\" stands of Giga, is there a way to change it to B which denotes Billion?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["javascript", "local-storage"], "comments": [{"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1479937741, "post_id": 40774665, "comment_id": 68773279, "body": "Hint #1: <code>typeof</code>"}, {"owner": {"reputation": 49711, "user_id": 367401, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/b864b7510b2cb4ed4a96befe513fbb83?s=128&d=identicon&r=PG", "display_name": "BenM", "link": "https://stackoverflow.com/users/367401/benm"}, "edited": false, "score": 1, "creation_date": 1479937747, "post_id": 40774665, "comment_id": 68773284, "body": "How does <code>gold</code> relate to <code>ore</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 7106757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/04aa011bb7ad697941dada90a5b79221?s=128&d=identicon&r=PG", "display_name": "I. Smith", "link": "https://stackoverflow.com/users/7106757/i-smith"}, "edited": false, "score": 0, "creation_date": 1479937998, "post_id": 40774709, "comment_id": 68773401, "body": "Thanks I just used gold as an example for how I set the localStorage item, I have a ton of items to collect so this is very helpful. And if i could add, you would not have to parse it for setting the items Right?"}, {"owner": {"reputation": 2975, "user_id": 200516, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/68ed22595ebf8782807a529c87727e3a?s=128&d=identicon&r=PG", "display_name": "peterp", "link": "https://stackoverflow.com/users/200516/peterp"}, "reply_to_user": {"reputation": 85, "user_id": 7106757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/04aa011bb7ad697941dada90a5b79221?s=128&d=identicon&r=PG", "display_name": "I. Smith", "link": "https://stackoverflow.com/users/7106757/i-smith"}, "edited": false, "score": 0, "creation_date": 1479938285, "post_id": 40774709, "comment_id": 68773524, "body": "@I.Smith it may be worthwhile to just consider saving an entire JSON object with <code>JSON.stringify()</code>, and retrieving it with <code>JSON.parse()</code> instead of storing/ retrieving single key and string values."}], "tags": [], "owner": {"reputation": 49711, "user_id": 367401, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/b864b7510b2cb4ed4a96befe513fbb83?s=128&d=identicon&r=PG", "display_name": "BenM", "link": "https://stackoverflow.com/users/367401/benm"}, "is_accepted": true, "score": 2, "last_activity_date": 1479937828, "creation_date": 1479937828, "answer_id": 40774709, "question_id": 40774665, "link": "https://stackoverflow.com/questions/40774665/local-storage-is-messing-up-my-variable-increments/40774709#40774709", "title": "Local Storage is messing up my variable increments", "body": "<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/parseInt\" rel=\"nofollow noreferrer\"><code>parseInt()</code></a> is your friend. Although it's unclear from your question how <code>gold</code> relates to <code>ore</code> (or indeed <code>orepm</code>), you should use <code>parseInt()</code> (or <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/parseFloat\" rel=\"nofollow noreferrer\"><code>parseFloat()</code></a> if needed) when retrieving the value:</p>\n\n<pre><code>gold = parseInt( localStorage.getItem('gold') );\n</code></pre>\n\n<p>It's worth noting some of the intracicies of <code>parseInt()</code> -- for example:</p>\n\n<pre><code>parseInt('1kjjdfud') == 1;\n</code></pre>\n\n<p>So you may wish to use Javascript's casting mechanism (i.e. <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number\" rel=\"nofollow noreferrer\"><code>Number('1')</code></a>), if you correctly handle <code>NaN</code>:</p>\n\n<pre><code>gold = Number( localStorage.getItem('gold') );\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1479939510, "post_id": 40774712, "comment_id": 68773970, "body": "Don&#39;t forget the second argument to <code>parseInt</code>."}, {"owner": {"reputation": 4822, "user_id": 3390364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVZ4e.jpg?s=128&g=1", "display_name": "rfornal", "link": "https://stackoverflow.com/users/3390364/rfornal"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1479950199, "post_id": 40774712, "comment_id": 68776874, "body": "Thanks; forgot that one ... added it."}, {"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1479950276, "post_id": 40774712, "comment_id": 68776890, "body": "@Barmar there is really no reason to add it."}, {"owner": {"reputation": 4822, "user_id": 3390364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVZ4e.jpg?s=128&g=1", "display_name": "rfornal", "link": "https://stackoverflow.com/users/3390364/rfornal"}, "edited": false, "score": 0, "creation_date": 1479950406, "post_id": 40774712, "comment_id": 68776914, "body": "I realize that <code>parseInt</code> will default to a base-10, but I have always found it best to include it as a general rule of thumb.  It&#39;s simply one of those things that I categorize under good coding practices.  Clarity over functionality is often a good rule of thumb ..."}, {"owner": {"reputation": 229185, "user_id": 251311, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/b6b0ca5d4ef200ec8e3cd1fa2aefd836?s=128&d=identicon&r=PG", "display_name": "zerkms", "link": "https://stackoverflow.com/users/251311/zerkms"}, "edited": false, "score": 0, "creation_date": 1479950430, "post_id": 40774712, "comment_id": 68776922, "body": "It is unnecessary redundancy. &quot;good coding practices&quot; --- there is no objectives behind it, not sure how adding a parameter that does not change anything makes code better <code>&#175;\\_(\u30c4)_&#47;&#175;</code>"}, {"owner": {"reputation": 4822, "user_id": 3390364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVZ4e.jpg?s=128&g=1", "display_name": "rfornal", "link": "https://stackoverflow.com/users/3390364/rfornal"}, "edited": false, "score": 0, "creation_date": 1479951108, "post_id": 40774712, "comment_id": 68777078, "body": "Adding the parameter makes the &quot;objective&quot; clear (and that&#39;s the objective here ... the end goal) when someone is reading the code.  It may not be me and it may be a less experienced programmer.  I&#39;ll argue this all night, but it is the way I code; good practices and future proofed.  You can disagree if you like, but it is how I code."}], "tags": [], "owner": {"reputation": 4822, "user_id": 3390364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVZ4e.jpg?s=128&g=1", "display_name": "rfornal", "link": "https://stackoverflow.com/users/3390364/rfornal"}, "is_accepted": false, "score": 0, "last_activity_date": 1479950177, "last_edit_date": 1479950177, "creation_date": 1479937837, "answer_id": 40774712, "question_id": 40774665, "link": "https://stackoverflow.com/questions/40774665/local-storage-is-messing-up-my-variable-increments/40774712#40774712", "title": "Local Storage is messing up my variable increments", "body": "<p>Try ...</p>\n\n<pre><code>gold = parseInt(localStorage.getItem('gold'), 10);\n</code></pre>\n\n<p>... to convert the returned String to a Number.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Added radix; good to have it included at all times.</p>\n"}], "owner": {"reputation": 85, "user_id": 7106757, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/04aa011bb7ad697941dada90a5b79221?s=128&d=identicon&r=PG", "display_name": "I. Smith", "link": "https://stackoverflow.com/users/7106757/i-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 1, "accepted_answer_id": 40774709, "answer_count": 2, "score": 0, "last_activity_date": 1479950177, "creation_date": 1479937584, "question_id": 40774665, "link": "https://stackoverflow.com/questions/40774665/local-storage-is-messing-up-my-variable-increments", "title": "Local Storage is messing up my variable increments", "body": "<p>When I set variables to localStorage, like so..</p>\n\n<pre><code>localStorage.setItem('gold', gold);\n</code></pre>\n\n<p>And then I recall them like this...</p>\n\n<pre><code>gold = localStorage.getItem('gold');\n</code></pre>\n\n<p>It messes up some of my functions that worked before, for instance</p>\n\n<pre><code>setInterval(function(){\n  ore += orepm;\n}, 60000);\n</code></pre>\n\n<p>Instead of making it 112 from 100 (+12 each minute), it makes it 10012. It's basically adding the number to the end of the starting number, like a string. I believe that it has to do with localhost changing format but I'm not sure and have no idea how to fix it.</p>\n\n<p>Thanks for the Help!</p>\n"}, {"tags": ["javascript", "reactjs"], "comments": [{"owner": {"reputation": 6930, "user_id": 1287643, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/58fbf4309ed8205b568a28342105f31f?s=128&d=identicon&r=PG", "display_name": "rishat", "link": "https://stackoverflow.com/users/1287643/rishat"}, "edited": false, "score": 0, "creation_date": 1479937762, "post_id": 40774652, "comment_id": 68773294, "body": "It&#39;s clear <code>ChosenList</code> component is source of this error, and more than that, even though you pass <code>this.handleAddChosen</code> as the value of <code>onToggle</code> prop to this component, there is no <code>handleAddChosen</code> declared anywhere. You pass <code>undefined</code>, and of course undefined is not a function."}, {"owner": {"reputation": 551, "user_id": 2671632, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/251e8effcb97f4df0ca82ed5006df4e9?s=128&d=identicon&r=PG", "display_name": "mGarsteck", "link": "https://stackoverflow.com/users/2671632/mgarsteck"}, "reply_to_user": {"reputation": 6930, "user_id": 1287643, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/58fbf4309ed8205b568a28342105f31f?s=128&d=identicon&r=PG", "display_name": "rishat", "link": "https://stackoverflow.com/users/1287643/rishat"}, "edited": false, "score": 0, "creation_date": 1479938438, "post_id": 40774652, "comment_id": 68773576, "body": "I made a mistake in transcribing my code over.  handleAddChosen is the right function name instead of handleAddResult."}, {"owner": {"reputation": 4822, "user_id": 3390364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bVZ4e.jpg?s=128&g=1", "display_name": "rfornal", "link": "https://stackoverflow.com/users/3390364/rfornal"}, "edited": false, "score": 0, "creation_date": 1479938488, "post_id": 40774652, "comment_id": 68773599, "body": "I don&#39;t see the code for <code>ChosenList</code>"}, {"owner": {"reputation": 551, "user_id": 2671632, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/251e8effcb97f4df0ca82ed5006df4e9?s=128&d=identicon&r=PG", "display_name": "mGarsteck", "link": "https://stackoverflow.com/users/2671632/mgarsteck"}, "edited": false, "score": 0, "creation_date": 1479938745, "post_id": 40774652, "comment_id": 68773696, "body": "I messed up on transcribing it over.  I fixed all the names of functions."}], "answers": [{"tags": [], "owner": {"reputation": 5001, "user_id": 6901631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0b1255f88514b6adc60fd1e713d2d1a?s=128&d=identicon&r=PG", "display_name": "Jeff McCloud", "link": "https://stackoverflow.com/users/6901631/jeff-mccloud"}, "is_accepted": false, "score": 0, "last_activity_date": 1479939334, "creation_date": 1479939334, "answer_id": 40775031, "question_id": 40774652, "link": "https://stackoverflow.com/questions/40774652/uncaught-typeerror-this-props-ontoggle-is-not-a-function/40775031#40775031", "title": "Uncaught TypeError: _this.props.onToggle is not a function", "body": "<p>You are passing a handler for onToggle to your ChosenList, but your ChosenList never passes it onto its Result children, where you are trying to invoke it. You need it pass the handler along...</p>\n\n<pre><code>var ChosenList = React.createClass({\n  handleAddChosen: function(){\n\n  },\n  render: function() {\n    var {chosenList, onToggle} = this.props;\n    var renderChosen = () =&gt; {\n      return chosenList.map((chosen) =&gt; {\n        return (\n          &lt;Result key={chosen.id} {...chosen} onToggle={onToggle} /&gt;\n        );\n      });\n    };\n    return (\n      &lt;div&gt;\n        {renderchosen()}\n      &lt;/div&gt;\n    );\n  }\n});\n</code></pre>\n"}], "owner": {"reputation": 551, "user_id": 2671632, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/251e8effcb97f4df0ca82ed5006df4e9?s=128&d=identicon&r=PG", "display_name": "mGarsteck", "link": "https://stackoverflow.com/users/2671632/mgarsteck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1514, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1479939522, "creation_date": 1479937524, "last_edit_date": 1479939522, "question_id": 40774652, "link": "https://stackoverflow.com/questions/40774652/uncaught-typeerror-this-props-ontoggle-is-not-a-function", "title": "Uncaught TypeError: _this.props.onToggle is not a function", "body": "<p>My code pulls data from a 3rd party API and puts it into an array. Then it is displayed as a list of <code>&lt;Result /&gt;</code> components.  Id like to be able to click on the item and have it added to a <code>&lt;ChosenList /&gt;</code></p>\n\n<blockquote>\n  <p>_this.props.onToggle is not a function </p>\n</blockquote>\n\n<p>... is the error I'm getting.  </p>\n\n<pre><code>var Search = React.createClass({\n  getInitialState: function() {\n    return {\n      isLoading:       false,\n      chosenList:      [],\n      dataL:           []\n\n    }\n  },\n  handleToggle: function(id) {\n    console.log('toggled!');\n  },\n  handleAddChosen: function (name) {\n    this.setState({\n      chosenList:  [\n        ...this.state.chosenList,\n        {\n          id:     uuid(),\n          name:   name,\n        }\n      ]\n    });\n  },\n  handleSearch: function(name) {\n    var that = this;\n    this.setState({\n      isLoading: true\n    });\n    var dataL = [];\n\n    SearchAPI.getSearch(name).then(function(searchL) {\n\n      that.setState({\n        name: name,\n        dataL: searchL,\n        isLoading: false,\n        chosenList:   chosenList   \n      });\n    },\n    function(errorMessage) {\n      alert(errorMessage);\n      that.setState({isLoading: false});\n    });\n  },\n  render: function () {\n    var {isLoading, name, dataL, results} = this.state;\n    function renderMessage() {\n      if(isLoading) {\n        return &lt;h2&gt;Searching...&lt;/h2&gt;;\n      } else if (name) {\n        return &lt;SearchResults name={name} dataL={dataL} /&gt;;\n      }\n    }\n\n    return (\n      &lt;div className=\"row col-md-12\"&gt;\n        &lt;div className=\"col-md-8\"&gt;\n          &lt;Card \n            style={{\n              padding: '0'\n            }}&gt;\n            &lt;CardText\n              style={{\n                textAlign:       \"center\",\n                width:           '100%',\n                margin:          '0 auto',\n                paddingTop:      '15px',\n                paddingBottom:   '30px'\n              }}&gt;\n              &lt;SearchForm onSearch={this.handleSearch} /&gt;\n            &lt;/CardText&gt;\n          &lt;/Card&gt;\n          &lt;Card\n            style={{\n              backgroundColor:    '#eee'\n            }}&gt;\n            {renderMessage()}\n          &lt;/Card&gt;\n        &lt;/div&gt;\n        &lt;div className=\"col-md-4\"&gt;\n          &lt;h2&gt;Selected&lt;/h2&gt;\n          &lt;ChosenList chosenList={chosenList} onToggle={this.handleAddChosen} /&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    );\n  }\n});\n\nmodule.exports = Search;\n</code></pre>\n\n<p>My Search API (SearchAPI.jsx)</p>\n\n<pre><code>module.exports = {\n  getSearch: function(name) {\n    var requestUrl = `${URL}:${name}`;\n    var dataL = [];\n    var searchL = [];\n    return axios.get(requestUrl).then(function(res) {\n      dataL = [res.data.data];\n\n\n      // console.log('FROMapiPage-dataL: ' + dataL[0]);\n      for (var i = 0, len = dataL[0].length; i &lt; len; i++) {\n        searchL.push(&lt;result id={uuid()} name={dataL[0][i].name} /&gt;);\n      }\n      return searchL;\n    },\n    function(err) {\n      throw new Error(err.response.data);\n    });\n  }\n}\n\n\n\nvar ChosenList = React.createClass({\n  handleAddChosen: function(){\n\n  },\n  render: function() {\n    var {chosenList} = this.props;\n    var renderChosen = () =&gt; {\n      return chosenList.map((chosen) =&gt; {\n        return (\n          &lt;Result key={chosen.id} {...chosen} /&gt;\n        );\n      });\n    };\n    return (\n      &lt;div&gt;\n        {renderchosen()}\n      &lt;/div&gt;\n    );\n  }\n});\n\nmodule.exports = chosenList;\n</code></pre>\n\n<p>Result.jsx</p>\n\n<pre><code>var React = require('react');\nimport {Card, CardActions, CardHeader, CardMedia, CardTitle, CardText} from 'material-ui/Card';\n\n// TODO add uuid for mapping\n\nvar Result = React.createClass({\n  render: function() {\n    var {id, name} = this.props;\n    return (\n      &lt;div className=\"row\" onClick={() =&gt;{\n          this.props.onToggle(id)\n        }}&gt;\n        &lt;Card\n          style={{\n            padding: '15px',\n            margin:   '5px'\n          }}&gt;\n          &lt;h2&gt;{name}&lt;/h2&gt;\n        &lt;/Card&gt;\n      &lt;/div&gt;\n    );\n  }\n});\n\nmodule.exports = Result;\n</code></pre>\n\n<p>Is anyone able to help figure out this error?</p>\n"}, {"tags": ["javascript", "node.js", "sorting", "diff", "node-streams"], "answers": [{"comments": [{"owner": {"reputation": 2520, "user_id": 779323, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/aac2b85b157ea6a1ef164bb50a1eda89?s=128&d=identicon&r=PG", "display_name": "i_like_robots", "link": "https://stackoverflow.com/users/779323/i-like-robots"}, "edited": false, "score": 0, "creation_date": 1480187565, "post_id": 40774898, "comment_id": 68863195, "body": "Thanks for taking the time to suggest this tool - it&#39;s very good =]"}], "tags": [], "owner": {"reputation": 34232, "user_id": 3836229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2fef27eacad45ee3fffda314f86f2?s=128&d=identicon&r=PG", "display_name": "Timo", "link": "https://stackoverflow.com/users/3836229/timo"}, "is_accepted": false, "score": 0, "last_activity_date": 1479938744, "creation_date": 1479938744, "answer_id": 40774898, "question_id": 40774596, "link": "https://stackoverflow.com/questions/40774596/sorting-and-diffing-large-files-with-node-js/40774898#40774898", "title": "Sorting and diffing large files with Node.js", "body": "<p>Since you already have the files in memory as a sorted array, <strong>check out <a href=\"https://www.npmjs.com/package/difflib\" rel=\"nofollow noreferrer\">difflib</a></strong>.</p>\n\n<p>This seems to fit exactly your use case:</p>\n\n<pre><code>&gt;&gt;&gt; difflib.unifiedDiff('one two three four'.split(' '),\n...                     'zero one tree four'.split(' '), {\n...                       fromfile: 'Original'\n...                       tofile: 'Current',\n...                       fromfiledate: '2005-01-26 23:30:50',\n...                       tofiledate: '2010-04-02 10:20:52',\n...                       lineterm: ''\n...                     })\n[ '--- Original\\t2005-01-26 23:30:50',\n  '+++ Current\\t2010-04-02 10:20:52',\n  '@@ -1,4 +1,4 @@',\n  '+zero',\n  ' one',\n  '-two',\n  '-three',\n  '+tree',\n  ' four' ]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2520, "user_id": 779323, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/aac2b85b157ea6a1ef164bb50a1eda89?s=128&d=identicon&r=PG", "display_name": "i_like_robots", "link": "https://stackoverflow.com/users/779323/i-like-robots"}, "is_accepted": false, "score": 2, "last_activity_date": 1480187488, "creation_date": 1480187488, "answer_id": 40822081, "question_id": 40774596, "link": "https://stackoverflow.com/questions/40774596/sorting-and-diffing-large-files-with-node-js/40822081#40822081", "title": "Sorting and diffing large files with Node.js", "body": "<p>In the end we went for something very simple using sets which, unlike arrays, remain extremely performant and memory efficient even with many thousands of entries. This is our initial test code:</p>\n\n<pre><code>const fs = require('fs')\nconst readline = require('readline')\n\nconst memory = () =&gt; process.memoryUsage().rss / 1048576).toFixed(2)\n\nconst loadFile = (filename, cb) =&gt; {\n  // this is more complex that simply calling fs.readFile() but\n  // means we do not have to buffer the whole file in memory  \n  return new Promise((resolve, reject) =&gt; {\n    const input = fs.createReadStream(filename)\n    const reader = readline.createInterface({ input })\n\n    input.on('error', reject)\n\n    reader.on('line', cb)\n    reader.on('close', resolve)\n  })\n}\n\nconst start = Date.now()\n\nconst uniqueA = new Set()\nconst uniqueB = new Set()\n\n// when reading the first file add every line to the set\nconst handleA = (line) =&gt; {\n  uniqueA.add(line)\n}\n\n// this will leave us with unique lines only\nconst handleB = (line) =&gt; {\n  if (uniqueA.has(line)) {\n    uniqueA.delete(line)\n  } else {\n    uniqueB.add(line)\n  }\n}\n\nconsole.log(`Starting memory: ${memory()}mb`)\n\nPromise.resolve()\n  .then(() =&gt; loadFile('uuids-eu.txt', handleA))\n  .then(() =&gt; {\n    console.log(`${uniqueA.size} items loaded into set`)\n    console.log(`Memory: ${memory()}mb`)\n  })\n  .then(() =&gt; loadFile('uuids-us.txt', handleB))\n  .then(() =&gt; {\n    const end = Date.now()\n\n    console.log(`Time taken: ${(end - start) / 1000}s`)\n    console.log(`Final memory: ${memory()}mb`)\n\n    console.log('Differences A:', Array.from(uniqueA))\n    console.log('Differences B:', Array.from(uniqueB))\n  })\n</code></pre>\n\n<p>Which gives us this output (2011 Macbook Air):</p>\n\n<pre><code>Starting memory: 19.71mb\n678336 items loaded into set\nMemory: 135.95mb\nTime taken: 1.918s\nFinal memory: 167.06mb\nDifferences A: [ ... ]\nDifferences B: [ ... ]\n</code></pre>\n\n<p>Using the 'dumb' method of loading the file and splitting on newlines is even faster (~1.2s) but with significantly higher memory overhead (~2x). </p>\n\n<p>Our solution using <code>Set</code> also has the advantage that we can skip the sorting step, making this faster too than the *nix tools outlined in the original question.</p>\n"}], "owner": {"reputation": 2520, "user_id": 779323, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/aac2b85b157ea6a1ef164bb50a1eda89?s=128&d=identicon&r=PG", "display_name": "i_like_robots", "link": "https://stackoverflow.com/users/779323/i-like-robots"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 828, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1480187488, "creation_date": 1479937258, "question_id": 40774596, "link": "https://stackoverflow.com/questions/40774596/sorting-and-diffing-large-files-with-node-js", "title": "Sorting and diffing large files with Node.js", "body": "<p>I have two files with a UUID on each line. Each file has several hundred thousand lines (they're generated from database dumps). These files need to be sorted and differences found (additions/removals). This is easy to do using a few *nix tools and it only takes a few seconds:</p>\n\n<pre><code>$ sort file-a.txt &gt; file-a-sorted.txt\n$ sort file-b.txt &gt; file-b-sorted.txt\n$ diff file-a-sorted.txt file-b-sorted.txt\n</code></pre>\n\n<p>However I'd like to add this functionality to a CLI we have (built on Node) that's intended for multiplatform use. So spawning a subprocess and delegating to these tools is not an option.</p>\n\n<p>Being 'dumb' and loading each file into memory, splitting on newlines and calling <code>.sort()</code> on the resulting array works surprisingly well (it's quick albeit using quite a lot of memory...) but finding the differences is proving rather harder.</p>\n\n<p>I'm sure the answer lies somewhere in the realm of streams but I lack experience manipulating them so I'm unsure where to begin.</p>\n\n<p>What are efficient techniques to load, sort and diff such large files using Node.js?</p>\n\n<p>I'm not looking for full solutions (though, feel free!), just pointers would be really useful at this stage.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["javascript", "angularjs", "json", "angular-ui", "ace-editor"], "comments": [{"owner": {"reputation": 12065, "user_id": 1161948, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/718b2745cc695cefd5418995742dca6a?s=128&d=identicon&r=PG", "display_name": "ThisClark", "link": "https://stackoverflow.com/users/1161948/thisclark"}, "edited": false, "score": 0, "creation_date": 1479937475, "post_id": 40774526, "comment_id": 68773165, "body": "Does this asset exist in the bower_components folder? bower_components/ace-builds/src-min-noconflict/ace.js... Moreover, do you have a script linking to it in your HTML? <code>&lt;script type=&quot;text&#47;javascript&quot; src=&quot;bower_components&#47;ace-builds&#47;src-min-noconflict&#47;ace.js&quot;&gt;&zwnj;&#8203;&lt;&#47;script&gt;</code>"}, {"owner": {"reputation": 7076, "user_id": 1130672, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/ZwRzr.jpg?s=128&g=1", "display_name": "bofanda", "link": "https://stackoverflow.com/users/1130672/bofanda"}, "reply_to_user": {"reputation": 12065, "user_id": 1161948, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/718b2745cc695cefd5418995742dca6a?s=128&d=identicon&r=PG", "display_name": "ThisClark", "link": "https://stackoverflow.com/users/1161948/thisclark"}, "edited": false, "score": 0, "creation_date": 1479938230, "post_id": 40774526, "comment_id": 68773497, "body": "@ThisClark, Yes, bower_components folder has <b>ace-builds</b> folder and files since it will be loaded along with angular-ui-ace library as dependencies."}, {"owner": {"reputation": 7076, "user_id": 1130672, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/ZwRzr.jpg?s=128&g=1", "display_name": "bofanda", "link": "https://stackoverflow.com/users/1130672/bofanda"}, "reply_to_user": {"reputation": 12065, "user_id": 1161948, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/718b2745cc695cefd5418995742dca6a?s=128&d=identicon&r=PG", "display_name": "ThisClark", "link": "https://stackoverflow.com/users/1161948/thisclark"}, "edited": false, "score": 0, "creation_date": 1479940619, "post_id": 40774526, "comment_id": 68774390, "body": "So, got it. You was right regarding <b>ace.js</b> link in html. Somehow its not there. Is this problem from ace library or one should include it manually?"}, {"owner": {"reputation": 12065, "user_id": 1161948, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/718b2745cc695cefd5418995742dca6a?s=128&d=identicon&r=PG", "display_name": "ThisClark", "link": "https://stackoverflow.com/users/1161948/thisclark"}, "edited": false, "score": 0, "creation_date": 1479950413, "post_id": 40774526, "comment_id": 68776915, "body": "No, it&#39;s not a problem with the library. One should include it manually in proper order according to the documentation. Ace, Angular, and Ace UI are three separate concerns, so the scripts are developed independently of one another."}], "answers": [{"tags": [], "owner": {"reputation": 12065, "user_id": 1161948, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/718b2745cc695cefd5418995742dca6a?s=128&d=identicon&r=PG", "display_name": "ThisClark", "link": "https://stackoverflow.com/users/1161948/thisclark"}, "is_accepted": true, "score": 2, "last_activity_date": 1479950208, "last_edit_date": 1479950208, "creation_date": 1479940243, "answer_id": 40775217, "question_id": 40774526, "link": "https://stackoverflow.com/questions/40774526/cant-embed-ace-editor-ui-ace-need-ace-to-work-error-with-angular-ui-ace/40775217#40775217", "title": "Can&#39;t embed ACE Editor &quot;ui-ace need ace to work&quot; error with angular-ui-ace", "body": "<p>After fetching the scripts with Bower, make sure you include them in your application. Following is the order of scripts provided in the <a href=\"https://github.com/angular-ui/ui-ace\" rel=\"nofollow noreferrer\">Ace UI docs</a>.</p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"bower_components/ace-builds/src-min-noconflict/ace.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"bower_components/angular/angular.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\" src=\"bower_components/angular-ui-ace/ui-ace.js\"&gt;&lt;/script&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 4743787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de9848aca6588baa7b4118c3c84f19cf?s=128&d=identicon&r=PG", "display_name": "Timothy Heider", "link": "https://stackoverflow.com/users/4743787/timothy-heider"}, "is_accepted": false, "score": 0, "last_activity_date": 1486484543, "creation_date": 1486484543, "answer_id": 42094921, "question_id": 40774526, "link": "https://stackoverflow.com/questions/40774526/cant-embed-ace-editor-ui-ace-need-ace-to-work-error-with-angular-ui-ace/42094921#42094921", "title": "Can&#39;t embed ACE Editor &quot;ui-ace need ace to work&quot; error with angular-ui-ace", "body": "<p>I was able to get ui-ace working by adding ace.js from a CDN in my header:</p>\n\n<p><code>&lt;script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/ace.js\"&gt;&lt;/script&gt;</code></p>\n\n<p>I use require to include npm modules but had a little trouble including ace via require so I just added it manually as an HTML header include.</p>\n\n<p>It was also necessary to add a style=\"height: 400px;\" to my ui-ace div to make it visible.</p>\n"}], "owner": {"reputation": 7076, "user_id": 1130672, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/ZwRzr.jpg?s=128&g=1", "display_name": "bofanda", "link": "https://stackoverflow.com/users/1130672/bofanda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 803, "favorite_count": 1, "accepted_answer_id": 40775217, "answer_count": 2, "score": 1, "last_activity_date": 1486484543, "creation_date": 1479936914, "question_id": 40774526, "link": "https://stackoverflow.com/questions/40774526/cant-embed-ace-editor-ui-ace-need-ace-to-work-error-with-angular-ui-ace", "title": "Can&#39;t embed ACE Editor &quot;ui-ace need ace to work&quot; error with angular-ui-ace", "body": "<p>I'm trying to embed <a href=\"https://github.com/angular-ui/ui-ace\" rel=\"nofollow noreferrer\">ACE editor elements</a> into my AngularJS project in order to allow JSON editing feature in it. Here are all configurations/settings so far:</p>\n\n<p><strong>Bower.json</strong></p>\n\n<pre><code>\"dependencies\": {\n  \"angular-ui-ace\": \"v0.2.3\"\n}\n</code></pre>\n\n<p><strong>Module dependency</strong></p>\n\n<pre><code>angular.module('myApp', ['ui.ace']);\n</code></pre>\n\n<p><strong>ACE settings in controller</strong></p>\n\n<pre><code>$scope.ace_options = {\n  useWrapMode : false,\n  showGutter: true,\n  mode: 'json',\n  onLoad: function() {\n    console.log('onLoad fired.');\n  },\n  onChange: function() {\n    console.log('onChange fired.');\n  }\n};\n</code></pre>\n\n<p><strong>Html</strong></p>\n\n<pre><code>&lt;div id=\"editor\" ui-ace=\"ace_options\" ng-model=\"myJson\" style=\"height: 400px\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>However I get always following error:</p>\n\n<blockquote>\n  <p>\"message\": \"Error: ui-ace need ace to work... (o rly?)\",</p>\n</blockquote>\n\n<p>What I'm doing wrong or did I missed something?</p>\n"}, {"tags": ["javascript", "html", "userscripts"], "comments": [{"owner": {"reputation": 12805, "user_id": 1403714, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5b424d4146905962a24acd6815aeb84?s=128&d=identicon&r=PG", "display_name": "Stephen Thomas", "link": "https://stackoverflow.com/users/1403714/stephen-thomas"}, "edited": false, "score": 0, "creation_date": 1479936741, "post_id": 40774467, "comment_id": 68772836, "body": "Give it an <code>id</code>"}, {"owner": {"reputation": 560, "user_id": 5046485, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/Rx1Cg.png?s=128&g=1", "display_name": "grahamcracker1234", "link": "https://stackoverflow.com/users/5046485/grahamcracker1234"}, "reply_to_user": {"reputation": 12805, "user_id": 1403714, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5b424d4146905962a24acd6815aeb84?s=128&d=identicon&r=PG", "display_name": "Stephen Thomas", "link": "https://stackoverflow.com/users/1403714/stephen-thomas"}, "edited": false, "score": 0, "creation_date": 1479936807, "post_id": 40774467, "comment_id": 68772855, "body": "@StephenThomas How? I don&#39;t own the website I am simple editing it, via a userscript."}, {"owner": {"reputation": 49711, "user_id": 367401, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/b864b7510b2cb4ed4a96befe513fbb83?s=128&d=identicon&r=PG", "display_name": "BenM", "link": "https://stackoverflow.com/users/367401/benm"}, "edited": false, "score": 0, "creation_date": 1479936817, "post_id": 40774467, "comment_id": 68772858, "body": "If you know the index to which the <code>&lt;script&gt;</code> is appended (i.e. if it&#39;s always added first or last in <code>&lt;head&gt;</code>) you can use its index to remove it from the DOM."}, {"owner": {"reputation": 560, "user_id": 5046485, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/Rx1Cg.png?s=128&g=1", "display_name": "grahamcracker1234", "link": "https://stackoverflow.com/users/5046485/grahamcracker1234"}, "reply_to_user": {"reputation": 49711, "user_id": 367401, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/b864b7510b2cb4ed4a96befe513fbb83?s=128&d=identicon&r=PG", "display_name": "BenM", "link": "https://stackoverflow.com/users/367401/benm"}, "edited": false, "score": 0, "creation_date": 1479936989, "post_id": 40774467, "comment_id": 68772949, "body": "@BenM it is the 1st script in a div given the id of &quot;overlay&quot;. Do you mind creating the code? I am still learning"}, {"owner": {"reputation": 9163, "user_id": 1108397, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/XChaT.png?s=128&g=1", "display_name": "rupps", "link": "https://stackoverflow.com/users/1108397/rupps"}, "edited": false, "score": 1, "creation_date": 1479937006, "post_id": 40774467, "comment_id": 68772953, "body": "<code>document.getElementsByTagName(&quot;script&quot;)</code> gives you an Array of scripts. Just iterate through it and locate the script using any heuristic. However, mind that deleting a script does not remove the code, functions, etc.. from the Javascript VM if it has already been loaded."}, {"owner": {"reputation": 49711, "user_id": 367401, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/b864b7510b2cb4ed4a96befe513fbb83?s=128&d=identicon&r=PG", "display_name": "BenM", "link": "https://stackoverflow.com/users/367401/benm"}, "edited": false, "score": 0, "creation_date": 1479937033, "post_id": 40774467, "comment_id": 68772969, "body": "So the <code>&lt;script&gt;</code> tag is prepended to <code>&lt;div id=&quot;overlay&quot;&gt;&lt;&#47;div&gt;</code>, correct?"}, {"owner": {"reputation": 12805, "user_id": 1403714, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5b424d4146905962a24acd6815aeb84?s=128&d=identicon&r=PG", "display_name": "Stephen Thomas", "link": "https://stackoverflow.com/users/1403714/stephen-thomas"}, "edited": false, "score": 0, "creation_date": 1479937055, "post_id": 40774467, "comment_id": 68772979, "body": "If you don&#39;t control the script you want to delete, you aren&#39;t going to be able to prevent it from running. Even if you delete the <code>&lt;script&gt;</code> tag from the DOM, the script may have already executed (depending on what it does)."}, {"owner": {"reputation": 560, "user_id": 5046485, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/Rx1Cg.png?s=128&g=1", "display_name": "grahamcracker1234", "link": "https://stackoverflow.com/users/5046485/grahamcracker1234"}, "reply_to_user": {"reputation": 49711, "user_id": 367401, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/b864b7510b2cb4ed4a96befe513fbb83?s=128&d=identicon&r=PG", "display_name": "BenM", "link": "https://stackoverflow.com/users/367401/benm"}, "edited": false, "score": 0, "creation_date": 1479937194, "post_id": 40774467, "comment_id": 68773044, "body": "@BenM correct it is inside it like this &lt;div id&quot;overlay&quot;&gt;&lt;script&gt;//AD PREVENTION SCRIPT&lt;/script&gt;&lt;/div&gt;"}, {"owner": {"reputation": 49711, "user_id": 367401, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/b864b7510b2cb4ed4a96befe513fbb83?s=128&d=identicon&r=PG", "display_name": "BenM", "link": "https://stackoverflow.com/users/367401/benm"}, "edited": false, "score": 0, "creation_date": 1479937428, "post_id": 40774467, "comment_id": 68773139, "body": "@grahamcracker1234 Please see my answer."}], "answers": [{"comments": [{"owner": {"reputation": 560, "user_id": 5046485, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/Rx1Cg.png?s=128&g=1", "display_name": "grahamcracker1234", "link": "https://stackoverflow.com/users/5046485/grahamcracker1234"}, "edited": false, "score": 0, "creation_date": 1479937980, "post_id": 40774588, "comment_id": 68773396, "body": "I have tried implimenting this into my code, but it doesn&#39;t work. I also relised that I wrote the &lt;script&gt; outside of the body by accident. I fixed this in the question. Could that have something to do with why it doesn&#39;t work?"}, {"owner": {"reputation": 49711, "user_id": 367401, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/b864b7510b2cb4ed4a96befe513fbb83?s=128&d=identicon&r=PG", "display_name": "BenM", "link": "https://stackoverflow.com/users/367401/benm"}, "reply_to_user": {"reputation": 560, "user_id": 5046485, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/Rx1Cg.png?s=128&g=1", "display_name": "grahamcracker1234", "link": "https://stackoverflow.com/users/5046485/grahamcracker1234"}, "edited": false, "score": 0, "creation_date": 1479938341, "post_id": 40774588, "comment_id": 68773540, "body": "@grahamcracker1234 No, the code works correctly (i.e. it answers your question about removing the <code>&lt;script&gt;</code> tag from the DOM... You can see it working here: <a href=\"https://jsfiddle.net/yfbyy1ym/1/\" rel=\"nofollow noreferrer\">jsfiddle.net/yfbyy1ym/1</a> The <code>&lt;script&gt;</code> tag is correctly removed from the DOM (inspect the element), but the script has already been sent to the JS engine."}, {"owner": {"reputation": 560, "user_id": 5046485, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/Rx1Cg.png?s=128&g=1", "display_name": "grahamcracker1234", "link": "https://stackoverflow.com/users/5046485/grahamcracker1234"}, "edited": false, "score": 0, "creation_date": 1479938412, "post_id": 40774588, "comment_id": 68773569, "body": "is there a way to direct access it without the index within <code>#overlay</code> ? Some other method?"}], "tags": [], "owner": {"reputation": 49711, "user_id": 367401, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/b864b7510b2cb4ed4a96befe513fbb83?s=128&d=identicon&r=PG", "display_name": "BenM", "link": "https://stackoverflow.com/users/367401/benm"}, "is_accepted": true, "score": 1, "last_activity_date": 1479938134, "last_edit_date": 1479938134, "creation_date": 1479937210, "answer_id": 40774588, "question_id": 40774467, "link": "https://stackoverflow.com/questions/40774467/how-to-delete-a-script-in-an-html-page/40774588#40774588", "title": "How to delete a script in an HTML Page", "body": "<p>Well, since you can presuppose its location in the DOM (and index within <code>#overlay</code>), it's relatively straightforward to remove it using <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementById\" rel=\"nofollow noreferrer\"><code>getElementById()</code></a>, <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Node/removeChild\" rel=\"nofollow noreferrer\"><code>removeChild()</code></a> and <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Node/childNodes\" rel=\"nofollow noreferrer\"><code>childNodes</code></a>:</p>\n\n<pre><code>var target = document.getElementById('overlay');\ntarget.removeChild( target.childNodes[0] );\n</code></pre>\n\n<p>Given the following markup:</p>\n\n<pre><code>&lt;div id=\"overlay\"&gt;\n    &lt;script&gt;/* AD PREVENTION SCRIPT */&lt;/script&gt;\n    &lt;p&gt;Blah&lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>The above will work (although does rely on the <code>&lt;script&gt;</code> being the first child of <code>#overlay</code>).</p>\n"}], "owner": {"reputation": 560, "user_id": 5046485, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/Rx1Cg.png?s=128&g=1", "display_name": "grahamcracker1234", "link": "https://stackoverflow.com/users/5046485/grahamcracker1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2285, "favorite_count": 2, "accepted_answer_id": 40774588, "answer_count": 1, "score": 0, "last_activity_date": 1479938134, "creation_date": 1479936663, "last_edit_date": 1479937878, "question_id": 40774467, "link": "https://stackoverflow.com/questions/40774467/how-to-delete-a-script-in-an-html-page", "title": "How to delete a script in an HTML Page", "body": "<p>So I am making a userscript for a website, which deletes ads. The website added a script which detects, if the ads have been taken out of the HTML. So to fix this again I want to delete the whole script, but it has no identifiers, so I have no clue how to go about it. Say I have this code:</p>\n\n<pre><code>&lt;html&gt;\n\n&lt;body&gt;\n    &lt;script&gt;\n        if(hasAds) {\n            document.write(\"blah blah blah\"); // Act as if this re-ads the ad onto the page\n        }\n    &lt;/script&gt;\n    &lt;div id=\"adsBottom\"&gt;IMAGINE AD CODE HERE&lt;/div&gt;\n&lt;/body&gt;\n     &lt;/html&gt;\n</code></pre>\n\n<p>How could I access the script section and delete it?</p>\n"}, {"tags": ["javascript", "angularjs", "json", "controller", "factory"], "answers": [{"comments": [{"owner": {"reputation": 310, "user_id": 3607750, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/708902690/picture?type=large", "display_name": "Stef", "link": "https://stackoverflow.com/users/3607750/stef"}, "edited": false, "score": 0, "creation_date": 1479940112, "post_id": 40775043, "comment_id": 68774181, "body": "Thanks 2ps - tried that but it didn&#39;t work - I eventually sorted it - see next response for details as i couldn;t get the code to display correctly in this reply :-)"}], "tags": [], "owner": {"reputation": 12105, "user_id": 6043170, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iFy-IHfVniw/AAAAAAAAAAI/AAAAAAAAAFM/f_Xao2r127I/photo.jpg?sz=128", "display_name": "2ps", "link": "https://stackoverflow.com/users/6043170/2ps"}, "is_accepted": false, "score": 2, "last_activity_date": 1479939404, "creation_date": 1479939404, "answer_id": 40775043, "question_id": 40774435, "link": "https://stackoverflow.com/questions/40774435/trying-to-access-json-server-data-via-a-controller-and-factory-in-angular/40775043#40775043", "title": "Trying to access json-server data via a controller and factory in angular", "body": "<p>I think you just forgot to assign <code>$scope.examples</code>, so the <code>ng-repeat</code> had no data to loop over:</p>\n\n<pre><code>angular.module('my_app')\n\n.controller('ExampleController', ['$scope', 'exampleFactory', function ($scope, exampleFactory) {\n\n    $scope.example = exampleFactory.query({\n        })\n        .$promise.then(\n            function (response) {\n                var examples = response;\n                $scope.message = examples;\n                $scope.examples = examples.examples; // I may be reading the JSON wrong here.\n            },\n            function (response) {\n                $scope.message = \"Error: \" + response.status + \" \" + response.statusText;\n            }\n        );\n\n}])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 310, "user_id": 3607750, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/708902690/picture?type=large", "display_name": "Stef", "link": "https://stackoverflow.com/users/3607750/stef"}, "edited": false, "score": 1, "creation_date": 1479940441, "post_id": 40775097, "comment_id": 68774328, "body": "Thanks alphapilgrim - I eventually sorted it (see above). Also, am using $resource as opposed to $http so I wouldn&#39;t go with your solution but your comments are useful and appreciated ;-) Also, cheers for the link, that&#39;s tomorrow&#39;s reading sorted ;-)"}], "tags": [], "owner": {"reputation": 3335, "user_id": 4812515, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh6.googleusercontent.com/-fxpyA0DpmoE/AAAAAAAAAAI/AAAAAAAAABY/XTBU5YBFdW8/photo.jpg?sz=128", "display_name": "alphapilgrim", "link": "https://stackoverflow.com/users/4812515/alphapilgrim"}, "is_accepted": false, "score": 1, "last_activity_date": 1479939698, "creation_date": 1479939698, "answer_id": 40775097, "question_id": 40774435, "link": "https://stackoverflow.com/questions/40774435/trying-to-access-json-server-data-via-a-controller-and-factory-in-angular/40775097#40775097", "title": "Trying to access json-server data via a controller and factory in angular", "body": "<p>I'd suggest using a factory as you can get the methods inside the factory before the factory has been returned. It's the revealing module pattern, good read here if your interested <a href=\"https://addyosmani.com/resources/essentialjsdesignpatterns/book/\" rel=\"nofollow noreferrer\">JavaScript Design Patterns</a></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>angular\n  .module('my_app')\n  .controller('ExampleController', ['$scope', 'exampleFactory',\n    function($scope, exampleFactory) {\n      function getMessageList() {\n        exampleFactory\n          .getMessages()\n          .then(function(messages) {\n            $scope.examples = messages;\n          })\n          .catch(function(response) {\n            $scope.message = \"Error: \" + response.status + \" \" + response.statusText;\n          });\n      }\n      getMessageList();\n\n    }\n  ])\n  .factory('exampleFactory', ['$http', 'baseURL',function($http, baseURL) {\n      function getMessages() {\n        return $http\n          .get(baseURL)\n          .then(function(jsonResp) {\n            return jsonResp.data;\n          })\n          .catch(function(error) {\n            //handle error if needed\n            console.log(error);\n          });\n      }\n      return {\n        getMessages: getMessages\n      };\n    }\n  ]);\n</code></pre>\n\n\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;p&gt;Test outside repeat: {{examples}}&lt;/p&gt;\n\n&lt;ul&gt;\n  &lt;li ng-repeat=\"example in examples\"&gt;\n    &lt;p&gt;Test in repeat: {{message}}&lt;/p&gt;\n    &lt;p&gt;{{example.name}}&lt;/p&gt;\n    &lt;p&gt;{{example.description}}&lt;/p&gt;\n  &lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n\n\n"}, {"tags": [], "owner": {"reputation": 310, "user_id": 3607750, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/708902690/picture?type=large", "display_name": "Stef", "link": "https://stackoverflow.com/users/3607750/stef"}, "is_accepted": false, "score": 0, "last_activity_date": 1479940272, "creation_date": 1479940272, "answer_id": 40775223, "question_id": 40774435, "link": "https://stackoverflow.com/questions/40774435/trying-to-access-json-server-data-via-a-controller-and-factory-in-angular/40775223#40775223", "title": "Trying to access json-server data via a controller and factory in angular", "body": "<p>Eventually sorted it by changing controller as follows: </p>\n\n<pre><code>.controller(\"ExampleController\", function($scope, exampleFactory) {\n  exampleFactory.query(function(response) {\n      $scope.examples = response;\n\n      $scope.examples.$promise.then(\n          function (response) {\n              var examples = response;\n              $scope.message = examples;\n          },\n          function (response) {\n              $scope.message = \"Error: \" + response.status + \" \" + response.statusText;\n          }\n      );\n\n  });\n});\n</code></pre>\n\n<p>Probably a little bit clunky and it would be nice to be able to reduce it further but as I'm very new to all this I'll go with this for now.</p>\n"}], "owner": {"reputation": 310, "user_id": 3607750, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/708902690/picture?type=large", "display_name": "Stef", "link": "https://stackoverflow.com/users/3607750/stef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1479940272, "creation_date": 1479936492, "question_id": 40774435, "link": "https://stackoverflow.com/questions/40774435/trying-to-access-json-server-data-via-a-controller-and-factory-in-angular", "title": "Trying to access json-server data via a controller and factory in angular", "body": "<p>I'm writing a very simple test app in angular js and am trying to display data stored on a json server to display in the view.</p>\n\n<p>db.json is as follows:</p>\n\n<pre><code>{\n  \"examples\": [\n    {\n      \"id\": 0,\n      \"name\": \"example 0\",\n      \"description\": \"Example 0 description.\"\n    },\n    {\n      \"id\": 1,\n      \"name\": \"example 1\",\n      \"description\": \"Example 1 description.\"\n    }\n  ]\n}\n</code></pre>\n\n<p>controller is as follows:</p>\n\n<pre><code>angular.module('my_app')\n\n.controller('ExampleController', ['$scope', 'exampleFactory', function ($scope, exampleFactory) {\n\n    $scope.example = exampleFactory.query({\n        })\n        .$promise.then(\n            function (response) {\n                var examples = response;\n                $scope.message = examples;\n            },\n            function (response) {\n                $scope.message = \"Error: \" + response.status + \" \" + response.statusText;\n            }\n        );\n\n}])\n</code></pre>\n\n<p>factory is as follows:</p>\n\n<pre><code>.factory('exampleFactory', ['$resource', 'baseURL', function ($resource, baseURL) {\n\n        return $resource(baseURL + \"examples/:id\", null, {\n            'update': {\n                method: 'PUT'\n            }\n        });\n}])\n;\n</code></pre>\n\n<p>And view is as follows:</p>\n\n<pre><code>&lt;p&gt;Test outside repeat: {{message}}&lt;/p&gt;\n\n&lt;ul&gt;\n   &lt;li ng-repeat=\"example in examples\"&gt;\n       &lt;p&gt;Test in repeat: {{message}}&lt;/p&gt;\n       &lt;p&gt;{{example.name}}&lt;/p&gt;\n       &lt;p&gt;{{example.description}}&lt;/p&gt;\n    &lt;/li&gt;\n &lt;/ul&gt;\n</code></pre>\n\n<p>The interesting thing here is that the data is being returned by the factory. In the above example the first test (outside the ng-repeat) returns the full set. However, nothing inside ng-repeat shows up.</p>\n\n<p>I've got this working using a slightly different arrangement using a service but it doesn;t seem to be working using a factory. </p>\n\n<p>Does anyone have any idea why this is and could they put me right?</p>\n\n<p>Thanks\nStef</p>\n"}, {"tags": ["javascript", "angularjs", "javascript-objects"], "comments": [{"owner": {"reputation": 133386, "user_id": 295783, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/da548667c834109a7059b51060e53dff?s=128&d=identicon&r=PG", "display_name": "mplungjan", "link": "https://stackoverflow.com/users/295783/mplungjan"}, "edited": false, "score": 1, "creation_date": 1479936566, "post_id": 40774420, "comment_id": 68772759, "body": "Try creating a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> using the <code>&lt;&gt;</code> snippet editor"}, {"owner": {"reputation": 1691, "user_id": 1108500, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/1aaf30e9850dd3b5b0438983df792a8f?s=128&d=identicon&r=PG", "display_name": "shaz", "link": "https://stackoverflow.com/users/1108500/shaz"}, "reply_to_user": {"reputation": 133386, "user_id": 295783, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/da548667c834109a7059b51060e53dff?s=128&d=identicon&r=PG", "display_name": "mplungjan", "link": "https://stackoverflow.com/users/295783/mplungjan"}, "edited": false, "score": 0, "creation_date": 1479936847, "post_id": 40774420, "comment_id": 68772880, "body": "@mplungjan Since the problem is hard to detect, couldn&#39;t provide less code."}, {"owner": {"reputation": 1438, "user_id": 5862335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbcb2895ae5f18a28c16755d4af8a6fa?s=128&d=identicon&r=PG", "display_name": "payam_sbr", "link": "https://stackoverflow.com/users/5862335/payam-sbr"}, "edited": false, "score": 1, "creation_date": 1479936951, "post_id": 40774420, "comment_id": 68772939, "body": "make it clear with some comments inside the code, to show where direction must be changed"}, {"owner": {"reputation": 1691, "user_id": 1108500, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/1aaf30e9850dd3b5b0438983df792a8f?s=128&d=identicon&r=PG", "display_name": "shaz", "link": "https://stackoverflow.com/users/1108500/shaz"}, "reply_to_user": {"reputation": 1438, "user_id": 5862335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbcb2895ae5f18a28c16755d4af8a6fa?s=128&d=identicon&r=PG", "display_name": "payam_sbr", "link": "https://stackoverflow.com/users/5862335/payam-sbr"}, "edited": false, "score": 0, "creation_date": 1479937492, "post_id": 40774420, "comment_id": 68773178, "body": "@payamsbr comment added, narrowed the scope."}], "answers": [{"comments": [{"owner": {"reputation": 1691, "user_id": 1108500, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/1aaf30e9850dd3b5b0438983df792a8f?s=128&d=identicon&r=PG", "display_name": "shaz", "link": "https://stackoverflow.com/users/1108500/shaz"}, "edited": false, "score": 0, "creation_date": 1479971638, "post_id": 40777161, "comment_id": 68783202, "body": "spot on. The array element is what was missing. Thanks."}], "tags": [], "owner": {"reputation": 12105, "user_id": 6043170, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iFy-IHfVniw/AAAAAAAAAAI/AAAAAAAAAFM/f_Xao2r127I/photo.jpg?sz=128", "display_name": "2ps", "link": "https://stackoverflow.com/users/6043170/2ps"}, "is_accepted": true, "score": 2, "last_activity_date": 1479954436, "creation_date": 1479954436, "answer_id": 40777161, "question_id": 40774420, "link": "https://stackoverflow.com/questions/40774420/javascript-updating-direction-of-robot-using-string-is-not-working/40777161#40777161", "title": "Javascript: Updating direction of robot using string is not working", "body": "<p>So your problem is actually pretty simple, and my apologies for taking so long to figure this out.   The issue is that you were passing the array index and not the array element.</p>\n\n<pre><code>  moveRobot: function(string) {\n    string = string.toUpperCase();\n    if (this.checkCommandString(string)) {\n      var array = string.split('');\n      for (var i = 0; i &lt; array.length; i++) {\n        // return this.moveRobotToOnePosition(i);\n        this.moveRobotToOnePosition(array[i]); // don't use return here unless you want to exit the function.\n      }\n      return true;\n    }\n    this.errorMessageNumber = 0;\n  }\n</code></pre>\n"}], "owner": {"reputation": 1691, "user_id": 1108500, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/1aaf30e9850dd3b5b0438983df792a8f?s=128&d=identicon&r=PG", "display_name": "shaz", "link": "https://stackoverflow.com/users/1108500/shaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 40777161, "answer_count": 1, "score": 0, "last_activity_date": 1479954436, "creation_date": 1479936394, "last_edit_date": 1479942474, "question_id": 40774420, "link": "https://stackoverflow.com/questions/40774420/javascript-updating-direction-of-robot-using-string-is-not-working", "title": "Javascript: Updating direction of robot using string is not working", "body": "<p>Javascript</p>\n\n<p>Trying to work on a simple game of moving a robot using key L(to move left), R(to move right), F(to move forward) from a specific position on a board where it is created using 5x5 dimension and always facing North (shown as N). Clicking a Move button after entering any of above string/characters should display the current position. </p>\n\n<p><strong>Expected:</strong> For instance if I say board dimension (5x5), current position (3,3), enter 'R' and hit Move button it should show the resulting position as (3,3) E because the robot was facing north (N) first and now asked to move to RIGHT which would be east (E).</p>\n\n<p><strong>Problem:</strong> Can't seem to spot the issue in my code why the direction is not getting updated. </p>\n\n<p>Here is the code that does all calculation and update.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>var RobotManager = {\n  roomType: 'square',\n  roomParameters: [5, 5],\n  robotDirection: 'N',\n  robotPosition: [1, 2],\n  possibleDirections: [\"N\", \"E\", \"S\", \"W\"],\n  errorMessageNumber: -1,\n  errorMessage: [\n    \"error0\",\n    \"error1\",\n    \"all other errors removed to keep code clean\"\n  ],\n  squares: [],\n  stringCommandThatExexuted: '',\n  init: function() {\n\n    var regexp_number = /^[1-9]$|([1][0-9])$/;\n\n    return true;\n  },\n\n // This should move the robot to the right direction\n  turnRight: function() {\n    var movePosition = this.possibleDirections.indexOf(this.robotDirection);\n    if (movePosition == this.possibleDirections.length - 1) {\n      return this.possibleDirections[0];\n    }\n    return this.possibleDirections[movePosition + 1];\n  },\n\n  turnLeft: function() {\n    var movePosition = this.possibleDirections.indexOf(this.robotDirection);\n    if (movePosition == 0) {\n      return this.possibleDirections[this.possibleDirections.length - 1];\n    }\n    return this.possibleDirections[movePosition - 1];\n  },\n\n  moveForward: function() {\n    var nextPosition = this.getNextPosition();\n    var nextSquare = {\n      X: nextPosition[0],\n      Y: nextPosition[1]\n    };\n    if (this.isSquareAvailable(nextSquare)) {\n      this.robotPosition = nextPosition;\n    } else {\n      this.errorMessageNumber = 1;\n      return false;\n    }\n    return true;\n  },\n\n //this is not getting executed to update the direction\n  getNextPosition: function() {\n    var x, y;\n    switch (this.robotDirection) {\n      case \"N\":\n        x = this.robotPosition[0];\n        y = this.robotPosition[1] - 1;\n        break;\n      case \"E\":\n        x = this.robotPosition[0] + 1;\n        y = this.robotPosition[1];\n        break;\n      case \"W\":\n        x = this.robotPosition[0] - 1;\n        y = this.robotPosition[1];\n        break;\n      case \"S\":\n        y = this.robotPosition[1] + 1;\n        x = this.robotPosition[0];\n        break;\n    }\n    return [x, y];\n  },\n\n //First button clicks comes here and just renders default value of direction\n  getRobotsPositionAndDirection: function() {\n    if (this.errorMessageNumber &lt;= 1) {\n      var message = \"\";\n      if (this.errorMessageNumber == 0) {\n        return this.errorMessage[0];\n      }\n      if (this.errorMessageNumber == 1) {\n        message = this.errorMessage[1];\n      }\n      return message + this.robotPosition[0] + \" \" + this.robotPosition[1] + \" \" + this.robotDirection;\n    }\n    return this.errorMessage[8];\n  },\n  checkCommandString: function(string) {\n    var english_command = /^[LRF]*$/;\n\n    if (english_command.test(string)) {\n      return true;\n    }\n    this.errorMessageNumber = 0;\n    return false;\n  },\n  getCommandStringThatExecuted: function() {\n    return this.stringCommandThatExexuted;\n  },\n\n //This is where index is passed as 0 and doesn't execute\n  moveRobotToOnePosition: function(letter) {\n    switch (letter) {\n      case 'L':\n        this.robotDirection = this.turnLeft();\n        this.stringCommandThatExexuted += 'L';\n        break;\n      case 'R':\n        this.robotDirection = this.turnRight();\n        this.stringCommandThatExexuted += 'R';\n        break;\n      case 'F':\n        if (this.moveForward()) {\n          this.stringCommandThatExexuted += 'F';\n          return true;\n        } else {\n          return false;\n        }\n        break;\n    }\n  },\n  moveRobot: function(string) {\n    string = string.toUpperCase();\n    if (this.checkCommandString(string)) {\n      var array = string.split('');\n      for (var i = 0; i &lt; array.length; i++) {\n        return this.moveRobotToOnePosition(i);\n      }\n      return true;\n    }\n    this.errorMessageNumber = 0;\n  }\n}\n</code></pre>\n\n\n"}, {"tags": ["javascript", "reactjs", "scope", "react-native", "jsx"], "answers": [{"tags": [], "owner": {"reputation": 5270, "user_id": 6356919, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/waPfK.png?s=128&g=1", "display_name": "Chaim Friedman", "link": "https://stackoverflow.com/users/6356919/chaim-friedman"}, "is_accepted": false, "score": 0, "last_activity_date": 1479936742, "creation_date": 1479936742, "answer_id": 40774481, "question_id": 40774399, "link": "https://stackoverflow.com/questions/40774399/undefined-is-not-an-object-evaluating-this-state-this-props/40774481#40774481", "title": "Undefined is not an object evaluating this.state/this.props", "body": "<p>not sure if this is the problem, but I think is code is wrong, and may be potentially causing your issue. </p>\n\n<pre><code>&lt;View style={styles.cardContentLeft}&gt;\n  &lt;TouchableHighlight style={styles.button}\n   onPress={this._buttonPress().bind(this)}&gt;\n  &lt;Text style={styles.restData}&gt;View Video&lt;/Text&gt;\n  &lt;/TouchableHighlight&gt;\n&lt;/View&gt;\n</code></pre>\n\n<p>specifically this line <code>onPress={this._buttonPress().bind(this)}&gt;</code>\nyou are invoking the function and binding it at the same time.</p>\n\n<p>The correct way to do this would be so</p>\n\n<pre><code>onPress={this._buttonPress.bind(this)}&gt;\n</code></pre>\n\n<p>this way the function will be called only onPress.</p>\n"}, {"comments": [{"owner": {"reputation": 8447, "user_id": 2628463, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ecc370d34a8937b243a800cfbc78c6b1?s=128&d=identicon&r=PG", "display_name": "martinarroyo", "link": "https://stackoverflow.com/users/2628463/martinarroyo"}, "edited": false, "score": 1, "creation_date": 1479940815, "post_id": 40774715, "comment_id": 68774457, "body": "I also think you should follow Pineda&#39;s advice on how to deal with props I totally overlooked that on my answer."}], "tags": [], "owner": {"reputation": 8447, "user_id": 2628463, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ecc370d34a8937b243a800cfbc78c6b1?s=128&d=identicon&r=PG", "display_name": "martinarroyo", "link": "https://stackoverflow.com/users/2628463/martinarroyo"}, "is_accepted": false, "score": 0, "last_activity_date": 1479937842, "creation_date": 1479937842, "answer_id": 40774715, "question_id": 40774399, "link": "https://stackoverflow.com/questions/40774399/undefined-is-not-an-object-evaluating-this-state-this-props/40774715#40774715", "title": "Undefined is not an object evaluating this.state/this.props", "body": "<p>You are going in the right direction, but there is still a minor issue. You are passing a <code>function</code> to your <code>map</code> callback that has a different scope (<code>this</code>) than your component (because it is not an arrow function), so when you do <code>bind(this)</code>, you are rebinding your callback to use the scope from <code>map</code>. I think this should work, it basically turns the callback that you pass to <code>map</code> into an arrow function. Also, since you <code>bind</code> your function in the constructor, you do not need to do it again:</p>\n\n<pre><code>  // The constructor logic remains the same\n  // ....\n  renderLoadingView() {\n      return (\n      &lt;View style={[styles.cardContainer, styles.loading]}&gt;\n        &lt;Text style={styles.restData}&gt;\n          Loading ...\n        &lt;/Text&gt;\n      &lt;/View&gt;\n      )\n    }\n\n  _buttonPress = () =&gt;  {\n      this.props.navigator.push({\n        id: 'Main'\n      })\n  }\n\n  renderGPSDataFromServer =() =&gt; {\n\n    const {loaded} = this.state;\n    const {state} = this.state;\n\n    return this.state.dataArr.map((data, i) =&gt; {\n      return(\n        &lt;View style={[styles.cardContainer, styles.modularBorder, styles.basePadding]} key={i}&gt;\n\n          &lt;View style={styles.cardContentLeft}&gt;\n            &lt;TouchableHighlight style={styles.button}\n             onPress={this._buttonPress}&gt;\n            &lt;Text style={styles.restData}&gt;View Video&lt;/Text&gt;\n            &lt;/TouchableHighlight&gt;\n          &lt;/View&gt;\n\n          &lt;View style={styles.cardContentRight}&gt;\n            &lt;Text style={styles.restData}&gt;{i}&lt;/Text&gt;\n            &lt;View style={styles.gpsDataContainer}&gt;\n              &lt;Text style={styles.gpsData}&gt;\n              {Number(data.lat).toFixed(2)}&lt;/Text&gt;\n              &lt;Text style={styles.gpsData}&gt;{Number(data.long).toFixed(2)}&lt;/Text&gt;\n            &lt;/View&gt;\n            &lt;Text  style={styles.gpsData}&gt;\n            {this.calcRow(55,55).bind(this)}\n            &lt;/Text&gt;\n          &lt;/View&gt;\n\n        &lt;/View&gt;\n      );\n    });\n  }\n\n  render = ()=&gt; {\n    if (!this.state.loaded) {\n      return this.renderLoadingView();\n    }\n    return(\n      &lt;View&gt;\n        {this.renderGPSDataFromServer()}\n      &lt;/View&gt;\n    )\n  }};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7644, "user_id": 1924443, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/dYDV1.jpg?s=128&g=1", "display_name": "Aakash Sigdel", "link": "https://stackoverflow.com/users/1924443/aakash-sigdel"}, "is_accepted": true, "score": 1, "last_activity_date": 1479937968, "creation_date": 1479937968, "answer_id": 40774741, "question_id": 40774399, "link": "https://stackoverflow.com/questions/40774399/undefined-is-not-an-object-evaluating-this-state-this-props/40774741#40774741", "title": "Undefined is not an object evaluating this.state/this.props", "body": "<p>This is happening because, the function inside the <code>map</code> method creates a different context. You can use arrow functions as the callback in the <code>map</code> method for lexical binding. That should solve the issue you are having.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>renderGPSDataFromServer =() =&gt; {\r\n\r\n    const {loaded} = this.state;\r\n    const {state} = this.state;\r\n\r\n    return this.state.dataArr.map((data, i) =&gt; {\r\n      return(\r\n        &lt;View style={[styles.cardContainer, styles.modularBorder, styles.basePadding]} key={i}&gt;\r\n\r\n          &lt;View style={styles.cardContentLeft}&gt;\r\n            &lt;TouchableHighlight style={styles.button}\r\n             onPress={this._buttonPress().bind(this)}&gt;\r\n            &lt;Text style={styles.restData}&gt;View Video&lt;/Text&gt;\r\n            &lt;/TouchableHighlight&gt;\r\n          &lt;/View&gt;\r\n\r\n          &lt;View style={styles.cardContentRight}&gt;\r\n            &lt;Text style={styles.restData}&gt;{i}&lt;/Text&gt;\r\n            &lt;View style={styles.gpsDataContainer}&gt;\r\n              &lt;Text style={styles.gpsData}&gt;\r\n              {Number(data.lat).toFixed(2)}&lt;/Text&gt;\r\n              &lt;Text style={styles.gpsData}&gt;{Number(data.long).toFixed(2)}&lt;/Text&gt;\r\n            &lt;/View&gt;\r\n            &lt;Text  style={styles.gpsData}&gt;\r\n            {this.calcRow(55,55).bind(this)}\r\n            &lt;/Text&gt;\r\n          &lt;/View&gt;\r\n\r\n        &lt;/View&gt;\r\n      );\r\n    });\r\n  }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<blockquote>\n  <p>Also, once you've used arrow functions in the class function definition you\n  don't need to bind them in constructor like:</p>\n</blockquote>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>constructor(props) {\r\n  super(props);\r\n  this._customMethodDefinedUsingFatArrow = this._customMethodDefinedUsingFatArrow.bind(this)\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<blockquote>\n  <p>Also, once you have defined class functions as arrow functions, you\n  don't need to use the arrow functions while calling them either:</p>\n</blockquote>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>class Example extends React.Component {\r\n  myfunc = () =&gt; {\r\n    this.nextFunc()\r\n  }\r\n\r\n  nextFunc = () =&gt; {\r\n    console.log('hello hello')\r\n  }\r\n\r\n  render() {\r\n    // this will give you the desired result\r\n    return (\r\n      &lt;TouchableOpacity onPress={this.myFunc} /&gt;\r\n    )\r\n    \r\n    // you don't need to do this\r\n    return (\r\n      &lt;TouchableOpacity onPress={() =&gt; this.myFunc()} /&gt;\r\n    )\r\n  }\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 6795, "user_id": 2902660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oNdJU.jpg?s=128&g=1", "display_name": "Pineda", "link": "https://stackoverflow.com/users/2902660/pineda"}, "is_accepted": false, "score": 2, "last_activity_date": 1479944631, "last_edit_date": 1479944631, "creation_date": 1479938701, "answer_id": 40774888, "question_id": 40774399, "link": "https://stackoverflow.com/questions/40774399/undefined-is-not-an-object-evaluating-this-state-this-props/40774888#40774888", "title": "Undefined is not an object evaluating this.state/this.props", "body": "<blockquote>\n  <h1>this.props are read-only</h1>\n</blockquote>\n\n<p><a href=\"https://facebook.github.io/react/docs/components-and-props.html\" rel=\"nofollow\"><em>React docs - component and props</em></a></p>\n\n<p>And therefore a component shouldn't try a to modify them let alone mutate them as you are doing here:</p>\n\n<pre><code>  _buttonPress = () =&gt;  {\n      this.props.navigator.push({\n        id: 'Main'\n      })\n  }\n</code></pre>\n\n<p>I'd suggest using state instead:</p>\n\n<pre><code>_buttonPress = () =&gt;  {\n  this.setState = {\n    ...this.state,\n    navigator: {\n      ...this.state.navigator,\n      id: 'Main'\n    }\n  }\n}\n</code></pre>\n\n<hr>\n\n<p>Regarding your binding issue:</p>\n\n<p>the <code>.map</code> method takes a 2nd argument that is used to set the value of <code>this</code> when the callback is invoked.</p>\n\n<p>In the context of your question, you just need to pass <code>this</code>as the 2nd argument to you <code>.map</code> method to bind the components scope's <code>this</code> to it. </p>\n"}], "owner": {"reputation": 841, "user_id": 5754267, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/s3XQ7.jpg?s=128&g=1", "display_name": "Dr. Div", "link": "https://stackoverflow.com/users/5754267/dr-div"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3289, "favorite_count": 0, "accepted_answer_id": 40774741, "answer_count": 4, "score": 0, "last_activity_date": 1513138733, "creation_date": 1479936328, "last_edit_date": 1513138733, "question_id": 40774399, "link": "https://stackoverflow.com/questions/40774399/undefined-is-not-an-object-evaluating-this-state-this-props", "title": "Undefined is not an object evaluating this.state/this.props", "body": "<p>How do I bind a function outside of scope in React Native? I'm getting the errors: </p>\n\n<pre><code>undefined is not an object evaluating this.state   \n</code></pre>\n\n<p>&amp;  </p>\n\n<pre><code>undefined is not an object evaluating this.props\n</code></pre>\n\n<p>I'm using the render method to evoke <code>renderGPSDataFromServer()</code> when the data has been loaded. The problem is, I'm trying to use <code>_buttonPress()</code> and <code>calcRow()</code> inside of <code>renderGPSDataFromServer()</code>, but I'm getting those errors. </p>\n\n<p>I've added </p>\n\n<pre><code>constructor(props) {\n    super(props);\n    this._buttonPress = this._buttonPress.bind(this);\n    this.calcRow = this.calcRow.bind(this);\n</code></pre>\n\n<p>to my constructor and I've changed <code>_buttonPress() {</code> to <code>_buttonPress = () =&gt;  {</code> and still nothing.  </p>\n\n<p>I think I understand the problem but I don't know how to fix it:</p>\n\n<pre><code>renderLoadingView() {\n    return (\n        &lt;View style={[styles.cardContainer, styles.loading]}&gt;\n            &lt;Text style={styles.restData}&gt;\n                Loading ...\n            &lt;/Text&gt;\n        &lt;/View&gt;\n    )\n}\n\n_buttonPress = () =&gt;  {\n    this.props.navigator.push({\n        id: 'Main'\n    })\n}\n\nrenderGPSDataFromServer =() =&gt; {\n    const {loaded} = this.state;\n    const {state} = this.state;\n\n    return this.state.dataArr.map(function(data, i){\n        return(\n            &lt;View style={[styles.cardContainer, styles.modularBorder, styles.basePadding]} key={i}&gt;\n                &lt;View style={styles.cardContentLeft}&gt;\n                    &lt;TouchableHighlight style={styles.button}\n                        onPress={this._buttonPress().bind(this)}&gt;\n                        &lt;Text style={styles.restData}&gt;View Video&lt;/Text&gt;\n                    &lt;/TouchableHighlight&gt;\n                &lt;/View&gt;\n\n          &lt;View style={styles.cardContentRight}&gt;\n            &lt;Text style={styles.restData}&gt;{i}&lt;/Text&gt;\n            &lt;View style={styles.gpsDataContainer}&gt;\n              &lt;Text style={styles.gpsData}&gt;\n              {Number(data.lat).toFixed(2)}&lt;/Text&gt;\n              &lt;Text style={styles.gpsData}&gt;{Number(data.long).toFixed(2)}&lt;/Text&gt;\n            &lt;/View&gt;\n            &lt;Text  style={styles.gpsData}&gt;\n            {this.calcRow(55,55).bind(this)}\n            &lt;/Text&gt;\n          &lt;/View&gt;\n        &lt;/View&gt;\n      );\n    });\n}\n\nrender = ()=&gt; {\n    if (!this.state.loaded) {\n      return this.renderLoadingView();\n    }\n    return(\n      &lt;View&gt;\n        {this.renderGPSDataFromServer()}\n      &lt;/View&gt;\n    )\n}};\n</code></pre>\n\n<p>How do I go about fixing this and in this case what is the problem? </p>\n"}, {"tags": ["javascript", "time", "last-modified"], "comments": [{"owner": {"reputation": 11483, "user_id": 600486, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/akN6H.png?s=128&g=1", "display_name": "blurfus", "link": "https://stackoverflow.com/users/600486/blurfus"}, "edited": false, "score": 2, "creation_date": 1479936316, "post_id": 40774390, "comment_id": 68772639, "body": "if you want to save yourself the trouble, use moment.js"}, {"owner": {"reputation": 189597, "user_id": 616443, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/907798bf02efdaf6f9d07d3c0552868f?s=128&d=identicon&r=PG", "display_name": "j08691", "link": "https://stackoverflow.com/users/616443/j08691"}, "edited": false, "score": 0, "creation_date": 1479936458, "post_id": 40774390, "comment_id": 68772710, "body": "Read up on what <code>document.write</code> does"}, {"owner": {"reputation": 133386, "user_id": 295783, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/da548667c834109a7059b51060e53dff?s=128&d=identicon&r=PG", "display_name": "mplungjan", "link": "https://stackoverflow.com/users/295783/mplungjan"}, "reply_to_user": {"reputation": 189597, "user_id": 616443, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/907798bf02efdaf6f9d07d3c0552868f?s=128&d=identicon&r=PG", "display_name": "j08691", "link": "https://stackoverflow.com/users/616443/j08691"}, "edited": false, "score": 0, "creation_date": 1479936642, "post_id": 40774390, "comment_id": 68772788, "body": "@j08691 as long as it is inline document.write is ok to use"}, {"owner": {"reputation": 189597, "user_id": 616443, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/907798bf02efdaf6f9d07d3c0552868f?s=128&d=identicon&r=PG", "display_name": "j08691", "link": "https://stackoverflow.com/users/616443/j08691"}, "reply_to_user": {"reputation": 133386, "user_id": 295783, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/da548667c834109a7059b51060e53dff?s=128&d=identicon&r=PG", "display_name": "mplungjan", "link": "https://stackoverflow.com/users/295783/mplungjan"}, "edited": false, "score": 0, "creation_date": 1479936697, "post_id": 40774390, "comment_id": 68772811, "body": "@mplungjan never said it wasn&#39;t OK, just said they should read up on it to know how it works. Many new coders fail to understand it."}, {"owner": {"reputation": 133386, "user_id": 295783, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/da548667c834109a7059b51060e53dff?s=128&d=identicon&r=PG", "display_name": "mplungjan", "link": "https://stackoverflow.com/users/295783/mplungjan"}, "edited": false, "score": 0, "creation_date": 1479936714, "post_id": 40774390, "comment_id": 68772814, "body": "Creating a snippet for you immediately gives console errors. Please fix that"}, {"owner": {"reputation": 4627, "user_id": 280833, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1SBUi.jpg?s=128&g=1", "display_name": "Jason Yost", "link": "https://stackoverflow.com/users/280833/jason-yost"}, "edited": false, "score": 1, "creation_date": 1479936967, "post_id": 40774390, "comment_id": 68772946, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/4898574/converting-24-hour-time-to-12-hour-time-w-am-pm-using-javascript\">Converting 24 hour time to 12 hour time w/ AM &amp; PM using Javascript</a>"}, {"owner": {"reputation": 133386, "user_id": 295783, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/da548667c834109a7059b51060e53dff?s=128&d=identicon&r=PG", "display_name": "mplungjan", "link": "https://stackoverflow.com/users/295783/mplungjan"}, "edited": false, "score": 0, "creation_date": 1479937011, "post_id": 40774390, "comment_id": 68772958, "body": "Just change to <code>mid = &#39;PM&#39;;       }       return hours+mid;     }      document.write(&quot;This webpage was last edited on: &quot;);     document.write(lastModified() + &quot; at &quot; + AmPm());</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1711, "user_id": 1157944, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/da425e0e70d7bb2e7d62819adc6475fd?s=128&d=identicon&r=PG&f=1", "display_name": "ZCoder", "link": "https://stackoverflow.com/users/1157944/zcoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1479936392, "creation_date": 1479936392, "answer_id": 40774419, "question_id": 40774390, "link": "https://stackoverflow.com/questions/40774390/page-last-modified-using-javascript-with-12-hour-clock-showing-am-or-pm/40774419#40774419", "title": "Page last modified using Javascript with 12 hour clock showing am or pm", "body": "<pre><code>function formatAMPM(date) {\n  var hours = date.getHours();\n  var minutes = date.getMinutes();\n  var ampm = hours &gt;= 12 ? 'pm' : 'am';\n  hours = hours % 12;\n  hours = hours ? hours : 12; // the hour '0' should be '12'\n  minutes = minutes &lt; 10 ? '0'+minutes : minutes;\n  var strTime = hours + ':' + minutes + ' ' + ampm;\n  return strTime;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7128780, "user_type": "registered", "profile_image": "https://graph.facebook.com/140943656380839/picture?type=large", "display_name": "Glenn", "link": "https://stackoverflow.com/users/7128780/glenn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1479936695, "creation_date": 1479936254, "last_edit_date": 1479936695, "question_id": 40774390, "link": "https://stackoverflow.com/questions/40774390/page-last-modified-using-javascript-with-12-hour-clock-showing-am-or-pm", "title": "Page last modified using Javascript with 12 hour clock showing am or pm", "body": "<p>I'm trying to create a script in Javascript that shows when a page was last modified, which returns the date, time, in am or pm format, of modification.</p>\n\n<p>Clearly I am doing something wrong. I can't get the script to run, and it will be in my function AmPm. Can someone please help?</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>// Javascript code for page modification\r\n// Shows the date, time, am or pm, of modification.\r\n\r\n// This section sets the date of modification\r\nfunction lastModified() {\r\n  var modiDate = new Date(document.lastModified);\r\n  var showAs = modiDate.getDate() + \".\" + (modiDate.getMonth() + 1) + \".\" + modiDate.getFullYear();\r\n  return showAs\r\n}\r\n\r\n// This section sets the time of modification\r\nfunction GetTime() {\r\n  var modiDate = new Date();\r\n  var Seconds\r\n\r\n  if (modiDate.getSeconds() &lt; 10) {\r\n    Seconds = \"0\" + modiDate.getSeconds();\r\n  } else {\r\n    Seconds = modiDate.getSeconds();\r\n  }\r\n\r\n  // This section writes the above in the document\r\n  var modiDate = new Date();\r\n  var CurTime = modiDate.getHours() + \":\" + modiDate.getMinutes() + \":\" + Seconds\r\n  return CurTime\r\n}\r\n\r\n// This section decides if its am or pm\r\nfunction AmPm() {\r\n  var hours = new Date().getHours();\r\n  var hours = (hours + 24 - 2) % 24;\r\n  var mid = 'AM';\r\n  if (hours == 0) { // At 00 hours (midnight) we need to display 12 am\r\n    hours = 12;\r\n  } else if (hours &gt; 12) // At 12pm (Midday) we need to display 12 pm\r\n  {\r\n    hours = hours % 12;\r\n    mid = 'PM';\r\n  }\r\n}\r\nvar mid = //This is where I am stuck!!\r\n  return AmPm\r\n\r\ndocument.write(\"This webpage was last edited on: \");\r\ndocument.write(lastModified() + \" at \" + GetTime() + AmPm());\r\ndocument.write(\"\");\r\ndocument.write(\" NZ Daylight Savings Time.\");\r\ndocument.write(\"\");</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["javascript", "jquery", "css"], "comments": [{"owner": {"reputation": 526, "user_id": 5077225, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9b5cf693f870ba27ce47b9b03c4e3ac4?s=128&d=identicon&r=PG&f=1", "display_name": "Eddy", "link": "https://stackoverflow.com/users/5077225/eddy"}, "reply_to_user": {"reputation": 85012, "user_id": 2442099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jtx0O.jpg?s=128&g=1", "display_name": "G-Cyrillus", "link": "https://stackoverflow.com/users/2442099/g-cyrillus"}, "edited": false, "score": 0, "creation_date": 1479937393, "post_id": 40774349, "comment_id": 68773123, "body": "Thanks @GCyrillus, but this does not seem to work. Plus it disables the ability to toggle the video on/off."}], "answers": [{"comments": [{"owner": {"reputation": 526, "user_id": 5077225, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9b5cf693f870ba27ce47b9b03c4e3ac4?s=128&d=identicon&r=PG&f=1", "display_name": "Eddy", "link": "https://stackoverflow.com/users/5077225/eddy"}, "edited": false, "score": 1, "creation_date": 1479942435, "post_id": 40775171, "comment_id": 68774945, "body": "Thank you so very very much, @Transattic!! It works great!! Kept trying but could not find the solution myself or online. What a relief that you&#39;ve helped me. Thanks again!"}, {"owner": {"reputation": 40, "user_id": 907265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad04b7096bb3bc18e4e2bbe3bbd4a304?s=128&d=identicon&r=PG", "display_name": "Transattic", "link": "https://stackoverflow.com/users/907265/transattic"}, "reply_to_user": {"reputation": 526, "user_id": 5077225, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9b5cf693f870ba27ce47b9b03c4e3ac4?s=128&d=identicon&r=PG&f=1", "display_name": "Eddy", "link": "https://stackoverflow.com/users/5077225/eddy"}, "edited": false, "score": 0, "creation_date": 1479970204, "post_id": 40775171, "comment_id": 68782574, "body": "@Eddy, I&#39;m glad this was what you were looking for!  Enjoy your Thanksgiving weekend :)"}, {"owner": {"reputation": 526, "user_id": 5077225, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9b5cf693f870ba27ce47b9b03c4e3ac4?s=128&d=identicon&r=PG&f=1", "display_name": "Eddy", "link": "https://stackoverflow.com/users/5077225/eddy"}, "edited": false, "score": 0, "creation_date": 1480101469, "post_id": 40775171, "comment_id": 68842794, "body": "could you please take a look here, and see if you notice any obviously wrong? <a href=\"http://stackoverflow.com/questions/40805233/video-not-showing-in-safari-but-only-does-show-after-a-bit-of-scrolling\" title=\"video not showing in safari but only does show after a bit of scrolling\">stackoverflow.com/questions/40805233/&hellip;</a>"}], "tags": [], "owner": {"reputation": 40, "user_id": 907265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad04b7096bb3bc18e4e2bbe3bbd4a304?s=128&d=identicon&r=PG", "display_name": "Transattic", "link": "https://stackoverflow.com/users/907265/transattic"}, "is_accepted": true, "score": 1, "last_activity_date": 1479940034, "creation_date": 1479940034, "answer_id": 40775171, "question_id": 40774349, "link": "https://stackoverflow.com/questions/40774349/how-can-i-unload-video-when-it-has-finished-playing/40775171#40775171", "title": "How can I unload video when it has finished playing?", "body": "<p>I have included the solution at jsfiddle and in this snippet below.  Note that I used .toggle() instead of .unload(), since .unload() is meant to be fired on window event :</p>\n\n<p><a href=\"https://jsfiddle.net/firelite/h4aqkgo1/\" rel=\"nofollow noreferrer\">https://jsfiddle.net/firelite/h4aqkgo1/</a></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>$('#videoButton').on('click', function() {\r\n  var videoDiv = $('#videoDiv').toggle();\r\n\r\n  if (videoDiv.is(':visible')) {\r\n    $('#video').get(0).load();\r\n    $('#video').get(0).play();\r\n  } else {\r\n    $('#video').get(0).pause();\r\n  }\r\n});\r\n\r\n$(document).ready(function() {\r\n  $('#video').on('ended', function() {\r\n    $('#video').get(0).pause();\r\n    $('#videoDiv').toggle();\r\n  });\r\n});</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>#videoDiv {\r\n  width: 100%;\r\n  height: 360px;\r\n  position: relative;\r\n}\r\n#videoBlock,\r\n#videoMessage {\r\n  width: 100%;\r\n  height: 360px;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n}\r\n.videoClick {\r\n  text-align: center\r\n}\r\n.videoClick a {\r\n  color: white;\r\n  background-color: rgba(241, 241, 241, 0.25);\r\n  font-size: 1.7em;\r\n  cursor: pointer;\r\n  cursor: hand\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;button id=\"videoButton\"&gt;Toggle video&lt;/button&gt;\r\n&lt;div id=\"videoDiv\" style=\"display:none\"&gt;\r\n  &lt;div id=\"videoBlock\"&gt;\r\n    &lt;video preload=\"preload\" id=\"video\"&gt;\r\n      &lt;source src=\"https://static.webshopapp.com/shops/054833/files/093143183/fotel-photography-course-tour-workshop-video-4.mp4\" type=\"video/mp4\"&gt;\r\n    &lt;/video&gt;\r\n  &lt;/div&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 526, "user_id": 5077225, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9b5cf693f870ba27ce47b9b03c4e3ac4?s=128&d=identicon&r=PG&f=1", "display_name": "Eddy", "link": "https://stackoverflow.com/users/5077225/eddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 535, "favorite_count": 0, "accepted_answer_id": 40775171, "answer_count": 1, "score": 2, "last_activity_date": 1479940034, "creation_date": 1479936125, "last_edit_date": 1479936304, "question_id": 40774349, "link": "https://stackoverflow.com/questions/40774349/how-can-i-unload-video-when-it-has-finished-playing", "title": "How can I unload video when it has finished playing?", "body": "<p>I am trying to unload a video when it has finished playing. No luck so far. Can anyone help please? <a href=\"https://jsfiddle.net/1b0Lbdnh/13/\" rel=\"nofollow noreferrer\"><strong>JSFIDDLE example here</strong></a></p>\n\n<pre><code>$(document).ready(function(){\n    $('#video').on('ended',function(){\n      $('#video').get(0).unload();\n    });\n});\n</code></pre>\n"}, {"tags": ["javascript", "node.js"], "comments": [{"owner": {"reputation": 133386, "user_id": 295783, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/da548667c834109a7059b51060e53dff?s=128&d=identicon&r=PG", "display_name": "mplungjan", "link": "https://stackoverflow.com/users/295783/mplungjan"}, "edited": false, "score": 2, "creation_date": 1479936351, "post_id": 40774347, "comment_id": 68772656, "body": "how about <code>http:&#47;&#47;localhost:port&#47;api&#47;...</code> <a href=\"http://stackoverflow.com/questions/37725659/fetching-in-javascript-with-absolute-url-and-relative-url\" title=\"fetching in javascript with absolute url and relative url\">stackoverflow.com/questions/37725659/&hellip;</a>"}, {"owner": {"reputation": 862, "user_id": 6334991, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ae41644340b461e54d42f9bbb0cf7fa2?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/6334991/kevin"}, "reply_to_user": {"reputation": 133386, "user_id": 295783, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/da548667c834109a7059b51060e53dff?s=128&d=identicon&r=PG", "display_name": "mplungjan", "link": "https://stackoverflow.com/users/295783/mplungjan"}, "edited": false, "score": 0, "creation_date": 1479936782, "post_id": 40774347, "comment_id": 68772848, "body": "Oh, you&#39;re right... I didn&#39;t think of solving it that way, thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 589, "user_id": 4316143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zMEVZ.jpg?s=128&g=1", "display_name": "Wouter de Winter", "link": "https://stackoverflow.com/users/4316143/wouter-de-winter"}, "is_accepted": true, "score": 1, "last_activity_date": 1479936982, "last_edit_date": 1479936982, "creation_date": 1479936611, "answer_id": 40774456, "question_id": 40774347, "link": "https://stackoverflow.com/questions/40774347/similar-function-to-fetch-in-node/40774456#40774456", "title": "Similar function to fetch() in node", "body": "<p>As you are inside your webserver you cannot use relative url's as you did. You will need to provide a hostname and optionally a port or protocol (http/https) if other than default, such as:</p>\n\n<p><a href=\"http://localhost:8080/api/users/user1\" rel=\"nofollow noreferrer\">http://localhost:8080/api/users/user1</a></p>\n\n<p>If you are actually inside the server that you want to make the request to it might be better to avoid the internal request altogether and call the underlying function directly. You might need to refactor some code here to avoid code duplication.</p>\n"}], "owner": {"reputation": 862, "user_id": 6334991, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ae41644340b461e54d42f9bbb0cf7fa2?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/6334991/kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 892, "favorite_count": 0, "closed_date": 1479981101, "accepted_answer_id": 40774456, "answer_count": 1, "score": 0, "last_activity_date": 1479936982, "creation_date": 1479936113, "last_edit_date": 1479936212, "question_id": 40774347, "link": "https://stackoverflow.com/questions/40774347/similar-function-to-fetch-in-node", "closed_reason": "Not suitable for this site", "title": "Similar function to fetch() in node", "body": "<p>I used to collect my data in the front-end by using fetch(), now I'm doing the same in my back-end (using node.js) but that threw an error</p>\n\n<blockquote>\n  <p>UnhandledPromiseRejectionWarning: Unhandled promise rejection (rejection id: 2): Error: only absolute urls are supported</p>\n</blockquote>\n\n<p>That's because I'm fetching my Express route <code>fetch(`/api/users/${userstate.username}`)</code></p>\n\n<p>Is there a function in node that returns the same like fetch?</p>\n"}, {"tags": ["javascript", "npm", "npm-install"], "comments": [{"owner": {"reputation": 3123, "user_id": 8910547, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fEm51.png?s=128&g=1", "display_name": "Inigo", "link": "https://stackoverflow.com/users/8910547/inigo"}, "edited": false, "score": 0, "creation_date": 1590167416, "post_id": 40774328, "comment_id": 109587956, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/15806241/how-to-specify-local-modules-as-npm-package-dependencies\">how to specify local modules as npm package dependencies</a>"}], "answers": [{"comments": [{"owner": {"reputation": 187, "user_id": 966838, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5922e9a67976959bc4a4cc93e95459e0?s=128&d=identicon&r=PG", "display_name": "Orgrim", "link": "https://stackoverflow.com/users/966838/orgrim"}, "edited": false, "score": 0, "creation_date": 1479941569, "post_id": 40774649, "comment_id": 68774667, "body": "I had already saved the dependency on the package.json. The issue I was having was with babel not being found when run on the prepublish hook. moving that to install solved the problem."}, {"owner": {"reputation": 157, "user_id": 3395759, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/17df804a7b024e4244f12977ccb15b76?s=128&d=identicon&r=PG&f=1", "display_name": "vishal-mote", "link": "https://stackoverflow.com/users/3395759/vishal-mote"}, "edited": false, "score": 3, "creation_date": 1484897675, "post_id": 40774649, "comment_id": 70708265, "body": "my dependency frequently changes, is there way to update the repository also? even I have incremented version of dependency in dependency package.json and rerun the npm update, local dependecny update is not getting reflected in original project."}], "tags": [], "owner": {"reputation": 57206, "user_id": 974731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG", "display_name": "cybersam", "link": "https://stackoverflow.com/users/974731/cybersam"}, "is_accepted": true, "score": 1, "last_activity_date": 1479937513, "creation_date": 1479937513, "answer_id": 40774649, "question_id": 40774328, "link": "https://stackoverflow.com/questions/40774328/install-npm-local-package-dependencies/40774649#40774649", "title": "Install npm local package dependencies", "body": "<p><code>npm install /path/to/foo</code> simply copies from the specified path into your local package's <code>node_modules</code> folder. If this is what you meant by \"installed from a local path\", then that was the wrong thing to do if you want to make sure that <code>npm update</code> and <code>npm install</code> on your package would (a) automatically get the latest code from that path and (b) update/install the dependencies of the package at that path.</p>\n\n<p>To accomplish (a) and (b), you can add that local dependency to your <code>package.json</code>'s <code>dependencies</code> or <code>devDependencies</code> (supported by npm since 2.0). For example:</p>\n\n<pre><code>\"dependencies\": {\n  \"foo\": \"file:/path/to/foo\"\n}\n</code></pre>\n\n<p>After doing the above, <code>npm update</code> or <code>npm install</code> will treat that local dependency in the same way as any other dependency.</p>\n"}], "owner": {"reputation": 187, "user_id": 966838, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5922e9a67976959bc4a4cc93e95459e0?s=128&d=identicon&r=PG", "display_name": "Orgrim", "link": "https://stackoverflow.com/users/966838/orgrim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2832, "favorite_count": 0, "accepted_answer_id": 40774649, "answer_count": 1, "score": 2, "last_activity_date": 1479937513, "creation_date": 1479936019, "question_id": 40774328, "link": "https://stackoverflow.com/questions/40774328/install-npm-local-package-dependencies", "title": "Install npm local package dependencies", "body": "<p>I have a npm dependency installed from a local path, which in turn has a few dependencies of its own. As I understand it, in this case npm just copies the contents of the local folder under node_modules. Is there any way to make it run npm install on the package folder before copying it?</p>\n"}, {"tags": ["javascript", "node.js", "api", "mocking", "acceptance-testing"], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 5919712, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/372f2f608f77fc8f2b6a78065f48b9a3?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Jenks", "link": "https://stackoverflow.com/users/5919712/christopher-jenks"}, "edited": false, "score": 0, "creation_date": 1479938607, "post_id": 40774779, "comment_id": 68773646, "body": "Thanks, So I am starting my test servers in world.js with the command &#39;npm run acceptance-test&#39;, so would it be in world.js where I set the NODE_ENV?"}, {"owner": {"reputation": 551, "user_id": 400686, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/23a919d457b87ec35360e57bd1302753?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/400686/ben"}, "reply_to_user": {"reputation": 99, "user_id": 5919712, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/372f2f608f77fc8f2b6a78065f48b9a3?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Jenks", "link": "https://stackoverflow.com/users/5919712/christopher-jenks"}, "edited": false, "score": 0, "creation_date": 1479943212, "post_id": 40774779, "comment_id": 68775182, "body": "No, you would run <code>NODE_ENV=test npm run acceptance-test</code>"}, {"owner": {"reputation": 99, "user_id": 5919712, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/372f2f608f77fc8f2b6a78065f48b9a3?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Jenks", "link": "https://stackoverflow.com/users/5919712/christopher-jenks"}, "edited": false, "score": 0, "creation_date": 1479944744, "post_id": 40774779, "comment_id": 68775651, "body": "ok so I have <code>&quot;acceptance-test&quot;: &quot;NODE_ENV=development cucumbers&quot;</code> in my package.json. Now when I run <code>npm run acceptance-test</code> this will run my tests with <code>NODE_ENV</code> set to &#39;development&#39;? However when I add <code>console.log(process.env.NODE_ENV)</code> to my code before the if statement you provided it says it is <code>undefined</code>."}, {"owner": {"reputation": 551, "user_id": 400686, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/23a919d457b87ec35360e57bd1302753?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/400686/ben"}, "reply_to_user": {"reputation": 99, "user_id": 5919712, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/372f2f608f77fc8f2b6a78065f48b9a3?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Jenks", "link": "https://stackoverflow.com/users/5919712/christopher-jenks"}, "edited": false, "score": 0, "creation_date": 1479946861, "post_id": 40774779, "comment_id": 68776156, "body": "Hm... That&#39;s odd. Can you share a gist of your package.json and your test file?"}, {"owner": {"reputation": 527, "user_id": 4718693, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PPfe4d4zDdE/AAAAAAAAAAI/AAAAAAAAAF0/gFrFxk0JRd4/photo.jpg?sz=128", "display_name": "J.M. Janzen", "link": "https://stackoverflow.com/users/4718693/j-m-janzen"}, "edited": false, "score": 1, "creation_date": 1609951315, "post_id": 40774779, "comment_id": 115982478, "body": "Just a heads-up that this goes against a commonly accepted methodology described by the &quot;Twelve Factor App.&quot; A less <i>smelly</i> solution would be the set an <code>API_URL</code> env var, and just use whatever&#39;s there, rather than switching on <code>NODE_ENV</code>. :)"}], "tags": [], "owner": {"reputation": 551, "user_id": 400686, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/23a919d457b87ec35360e57bd1302753?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/400686/ben"}, "is_accepted": true, "score": 1, "last_activity_date": 1479938180, "creation_date": 1479938180, "answer_id": 40774779, "question_id": 40774291, "link": "https://stackoverflow.com/questions/40774291/development-api-for-node-js-acceptance-tests/40774779#40774779", "title": "Development API for node JS Acceptance Tests", "body": "<p>This is generally solved by the use of <a href=\"https://davidwalsh.name/node-environment-variables\" rel=\"nofollow noreferrer\">environment variables</a>.</p>\n\n<p>Something like:</p>\n\n<pre><code>var apiUrl = 'http://localhost:3000/api'\nif (process.env.NODE_ENV === 'production') {\n  apiUrl = 'http://liveurl.com/api';\n}\n\nreturn fetch(apiUrl)\n  .then(response =&gt; {\n  //... and so on\n</code></pre>\n\n<p>Then you would start your app (or run your tests) like this, filling in the appropriate environment name for NODE_ENV. Common values are production|test|development:</p>\n\n<pre><code>NODE_ENV=production node ./path/to/app.js\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 5919712, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/372f2f608f77fc8f2b6a78065f48b9a3?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Jenks", "link": "https://stackoverflow.com/users/5919712/christopher-jenks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 487, "favorite_count": 0, "accepted_answer_id": 40774779, "answer_count": 1, "score": 0, "last_activity_date": 1479975427, "creation_date": 1479935821, "last_edit_date": 1479975427, "question_id": 40774291, "link": "https://stackoverflow.com/questions/40774291/development-api-for-node-js-acceptance-tests", "title": "Development API for node JS Acceptance Tests", "body": "<p>I have created acceptance tests for my library. When the library is published it will be using an external API service which is not yet accessible. So I have created a mock json api server which returns the required JSON to test against. What I have to do to get the tests to pass is change the API url manually in the file where the request is made.</p>\n\n<p>I am wondering if there is a way to use the mock API url when running the acceptance tests and reverting back to the live URL when not running the acceptance tests. Below is a snippet of the code with a live URL.</p>\n\n<pre><code>return fetch('http://liveURL.com/api')\n  .then(response =&gt; {\n    if (response.status === 200) {\n      return response.json()\n        .then(myResponse =&gt; {\n          var theResponse = myResponse.id;\n\n          return theResponse;\n        });\n    } else {\n      return response.json().then(error =&gt; {\n        throw new Error(error.error);\n      });\n    }\n  });\n</code></pre>\n\n<p>What I want to do when running the acceptance tests only is change the url, '<a href=\"http://liveURL.com/api\" rel=\"nofollow noreferrer\">http://liveURL.com/api</a>', I'm getting the request from to '<a href=\"http://localhost:3000/api\" rel=\"nofollow noreferrer\">http://localhost:3000/api</a>'.</p>\n\n<p>The mock server I am using can be found here: <a href=\"https://github.com/typicode/json-server\" rel=\"nofollow noreferrer\">https://github.com/typicode/json-server</a></p>\n\n<p>EDIT: In reply to Bens questions, Here is my package.json where I am trying to set the NODE_ENV</p>\n\n<pre><code>{\n  \"name\": \"my-lib\",\n  \"version\": \"0.1.0\",\n  \"description\": \"\",\n  \"main\": \"lib/myLib\",\n  \"private\": true,\n  \"scripts\": {\n    \"lint\": \"gulp lint\",\n    \"pretest\": \"npm run lint\",\n    \"test\": \"istanbul cover node_modules/mocha/bin/_mocha -- --reporter spec \\\"test/unit/**/*.spec.js\\\"\",\n    \"acceptance-test\": \"NODE_ENV=test cucumberjs\",\n    \"build\": \"gulp build\"\n  },\n  \"author\": \"Me\",\n  \"license\": \"ISC\",\n  \"devDependencies\": {\n    \"babel-preset-es2015\": \"^6.16.0\",\n    \"babel-register\": \"^6.16.3\",\n    \"babelify\": \"^7.3.0\",\n    \"browserify\": \"^13.1.0\",\n    \"chai\": \"^3.5.0\",\n    \"chai-as-promised\": \"^5.3.0\",\n    \"config-browserify\": \"^1.0.5\",\n    \"cors\": \"^2.8.1\",\n    \"cucumber\": \"^0.10.3\",\n    \"eslint\": \"^3.0.1\",\n    \"eslint-teamcity\": \"^1.1.0\",\n    \"express\": \"^4.14.0\",\n    \"gulp\": \"^3.9.1\",\n    \"gulp-eslint\": \"^3.0.1\",\n    \"gulp-sourcemaps\": \"^1.6.0\",\n    \"gulp-uglify\": \"^2.0.0\",\n    \"isomorphic-fetch\": \"^2.2.1\",\n    \"istanbul\": \"v1.1.0-alpha.1\",\n    \"jsdom\": \"^9.8.3\",\n    \"json-server\": \"^0.9.1\",\n    \"mocha\": \"^2.5.3\",\n    \"mocha-jsdom\": \"^1.1.0\",\n    \"mocha-teamcity-reporter\": \"&gt;=0.0.1\",\n    \"nock\": \"^9.0.0\",\n    \"node-localstorage\": \"^1.3.0\",\n    \"portscanner\": \"^2.1.0\",\n    \"proxyquire\": \"^1.7.10\",\n    \"selenium-server\": \"^2.53.0\",\n    \"selenium-webdriver\": \"^2.53.2\",\n    \"semver\": \"^5.3.0\",\n    \"serve-static\": \"^1.11.1\",\n    \"sinon\": \"^1.17.4\",\n    \"sinon-chai\": \"^2.8.0\",\n    \"vinyl-buffer\": \"^1.0.0\",\n    \"vinyl-source-stream\": \"^1.1.0\",\n    \"watchify\": \"^3.7.0\"\n  },\n  \"dependencies\": {\n    \"config\": \"^1.21.0\"\n  }\n}\n</code></pre>\n\n<p>I have created my two servers in world.js. One server to run the library on which is on port 23661 and one server where the fake api is on which is port 3000. This can be seen below</p>\n\n<pre><code>'use strict';\n\nconst SeleniumServer = require('selenium-webdriver/remote').SeleniumServer;\n const webdriver = require('selenium-webdriver');\nconst server = new SeleniumServer(require('selenium-server').path, {port: 4444});\nconst serveStatic = require('serve-static');\nconst express = require('express');\nconst chaiAsPromised = require('chai-as-promised');\nconst chai = require('chai');\nconst jsonServer = require('json-server');\nconst cors = require('cors');\n\nchai.should();\nchai.use(chaiAsPromised);\n\nconst testServer = jsonServer.create();\nconst router = jsonServer.router('db.json');\n\ntestServer.use(cors());\ntestServer.options('*', cors());\ntestServer.use(router);\ntestServer.listen(3000);\n\nconst app = express();\nconst httpServerPort = 23661;\napp.use(cors());\napp.options('*', cors());\napp.use(serveStatic('dist'));\napp.use(serveStatic(__dirname + '/../page'));\napp.use(serveStatic('node_modules/sinon/pkg'));\napp.listen(httpServerPort);\n\nserver.start();\n</code></pre>\n\n<p>When this is run it runs through the acceptance tests correctly in firefox browser.</p>\n\n<p>The file where I am trying to call</p>\n\n<pre><code>process.env.NODE_ENV\n</code></pre>\n\n<p>is in my minimised library call myLib.min.js.</p>\n\n<p>Here is part of the unminified file</p>\n\n<pre><code>'use strict';\n\nconst fetch = require('isomorphic-fetch');\n\nmodule.exports = id =&gt; {\n  var apiUrl = 'http://liveurl.com/api/' + id;\n\n  if (process.env.NODE_ENV === 'development') {\n    apiUrl = 'http://localhost:3000/api';\n  }\n\n  console.log(process.env.NODE_ENV);\n\n    return fetch(apiUrl)\n      .then(response =&gt; {\n        if (response.status === 200) {\n          return response.json()\n            .then(myResponse =&gt; {\n              var theResponse = myResponse.id;\n\n              return theResponse;\n            });\n        } else {\n          return response.json().then(error =&gt; {\n            throw new Error(error.error);\n          });\n        }\n      });\n};\n</code></pre>\n"}, {"tags": ["javascript", "php", "angularjs"], "comments": [{"owner": {"reputation": 34232, "user_id": 3836229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2fef27eacad45ee3fffda314f86f2?s=128&d=identicon&r=PG", "display_name": "Timo", "link": "https://stackoverflow.com/users/3836229/timo"}, "edited": false, "score": 1, "creation_date": 1479937494, "post_id": 40774238, "comment_id": 68773181, "body": "Is the PHP code actually executed on the server, or just returned as plain text? How do you serve your PHP files?"}, {"owner": {"reputation": 3628, "user_id": 2020476, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Vyvw7.jpg?s=128&g=1", "display_name": "Trent", "link": "https://stackoverflow.com/users/2020476/trent"}, "reply_to_user": {"reputation": 34232, "user_id": 3836229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2fef27eacad45ee3fffda314f86f2?s=128&d=identicon&r=PG", "display_name": "Timo", "link": "https://stackoverflow.com/users/3836229/timo"}, "edited": false, "score": 0, "creation_date": 1479937713, "post_id": 40774238, "comment_id": 68773267, "body": "This is all running on a localhost web server."}, {"owner": {"reputation": 34232, "user_id": 3836229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2fef27eacad45ee3fffda314f86f2?s=128&d=identicon&r=PG", "display_name": "Timo", "link": "https://stackoverflow.com/users/3836229/timo"}, "edited": false, "score": 1, "creation_date": 1479937842, "post_id": 40774238, "comment_id": 68773326, "body": "What do you see if you navigate directly to the PHP file in your browser?"}, {"owner": {"reputation": 3628, "user_id": 2020476, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Vyvw7.jpg?s=128&g=1", "display_name": "Trent", "link": "https://stackoverflow.com/users/2020476/trent"}, "reply_to_user": {"reputation": 34232, "user_id": 3836229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2fef27eacad45ee3fffda314f86f2?s=128&d=identicon&r=PG", "display_name": "Timo", "link": "https://stackoverflow.com/users/3836229/timo"}, "edited": false, "score": 0, "creation_date": 1479938639, "post_id": 40774238, "comment_id": 68773659, "body": "If I visit <a href=\"http://localhost:8000/resources/action.php\" rel=\"nofollow noreferrer\">localhost:8000/resources/action.php</a> the file downloads"}, {"owner": {"reputation": 34232, "user_id": 3836229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2fef27eacad45ee3fffda314f86f2?s=128&d=identicon&r=PG", "display_name": "Timo", "link": "https://stackoverflow.com/users/3836229/timo"}, "edited": false, "score": 1, "creation_date": 1479938912, "post_id": 40774238, "comment_id": 68773756, "body": "Well, then the PHP is not executed, but the server is serving the file contents directly. Look into a web server with a PHP runtime. XAMPP may be a good starting point."}, {"owner": {"reputation": 3628, "user_id": 2020476, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Vyvw7.jpg?s=128&g=1", "display_name": "Trent", "link": "https://stackoverflow.com/users/2020476/trent"}, "reply_to_user": {"reputation": 34232, "user_id": 3836229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2fef27eacad45ee3fffda314f86f2?s=128&d=identicon&r=PG", "display_name": "Timo", "link": "https://stackoverflow.com/users/3836229/timo"}, "edited": false, "score": 0, "creation_date": 1479939719, "post_id": 40774238, "comment_id": 68774049, "body": "If i visit the php file on my server, I get the following error: Internal Server Error  The server encountered an internal error or misconfiguration and was unable to complete your request. Additionally, a 500 Internal Server Error error was encountered while trying to use an ErrorDocument to handle the request."}, {"owner": {"reputation": 3628, "user_id": 2020476, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Vyvw7.jpg?s=128&g=1", "display_name": "Trent", "link": "https://stackoverflow.com/users/2020476/trent"}, "reply_to_user": {"reputation": 34232, "user_id": 3836229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d2fef27eacad45ee3fffda314f86f2?s=128&d=identicon&r=PG", "display_name": "Timo", "link": "https://stackoverflow.com/users/3836229/timo"}, "edited": false, "score": 0, "creation_date": 1479940850, "post_id": 40774238, "comment_id": 68774468, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/128882/discussion-between-trent-and-timo\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 3628, "user_id": 2020476, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Vyvw7.jpg?s=128&g=1", "display_name": "Trent", "link": "https://stackoverflow.com/users/2020476/trent"}, "is_accepted": true, "score": 0, "last_activity_date": 1480659946, "creation_date": 1480659946, "answer_id": 40926087, "question_id": 40774238, "link": "https://stackoverflow.com/questions/40774238/angularjs-form-mail-syntaxerror-unexpected-token/40926087#40926087", "title": "AngularJS Form Mail - SyntaxError: Unexpected token &#39;&lt;&#39;", "body": "<p>Upon further inspection, the error I was receiving:</p>\n\n<pre><code>[Error] SyntaxError: Unexpected token '&lt;' (anonymous function) (submit.php:1)\n</code></pre>\n\n<p>was a result of trying to test my PHP scripts on a local server which does not support PHP.</p>\n\n<p>For anyone experiencing this same issue, please try uploading your website files to a PHP-enabled server for testing.</p>\n"}], "owner": {"reputation": 3628, "user_id": 2020476, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Vyvw7.jpg?s=128&g=1", "display_name": "Trent", "link": "https://stackoverflow.com/users/2020476/trent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 40926087, "answer_count": 1, "score": 0, "last_activity_date": 1480659946, "creation_date": 1479935597, "last_edit_date": 1480153862, "question_id": 40774238, "link": "https://stackoverflow.com/questions/40774238/angularjs-form-mail-syntaxerror-unexpected-token", "title": "AngularJS Form Mail - SyntaxError: Unexpected token &#39;&lt;&#39;", "body": "<p>I'm trying to send an email from my AngularJS website with the following configuration:</p>\n\n<p>Contact.index.html:</p>\n\n<pre><code>&lt;form  name=\"userForm\"  class=\"well form-search\"&gt;\n    &lt;input type=\"text\" ng-model=\"name\" class=\"input-medium search-query\" placeholder=\"Name\" required &gt;\n    &lt;input type=\"email\" ng-model=\"email\" class=\"input-medium search-query\" placeholder=\"Email\" required &gt;\n    &lt;input type=\"text\" ng-model=\"message\" class=\"input-medium search-query\" placeholder=\"Message\" required &gt;\n    &lt;button type=\"submit\" class=\"btn\" ng-click=\"formsubmit(userForm.$valid)\"  ng-disabled=\"userForm.$invalid\"&gt;Submit &lt;/button&gt;\n&lt;/form&gt;\n&lt;pre ng-model=\"result\"&gt;\n    {{result}}\n&lt;/pre&gt;\n</code></pre>\n\n<p>Contact.controller.js:</p>\n\n<pre><code>'use strict';\n\nangular.module('core').controller('ContactController', ['$scope', '$rootScope', '$stateParams', '$http', '$window',\n    function($scope, $rootScope, $stateParams, $http, $window) {\n        $scope.url = '../../resources/submit.php';\n        $scope.formsubmit = function(isValid) {\n            if (isValid) {\n                $http.post($scope.url, {\"name\": $scope.name, \"email\": 'admin@website.com', \"message\": $scope.message}).\n                        success(function(data, status) {\n                            console.log(data);\n                            $scope.status = status;\n                            $scope.data = data;\n                            $scope.result = data;\n                        })\n            }else{\n                  alert('Form is not valid');\n            }\n        }\n    }\n]);\n</code></pre>\n\n<p>Submit.php:</p>\n\n<pre><code>&lt;?php\n    $post_date = file_get_contents(\"php://input\");\n    $data = json_decode($post_date);\n\n    //print the values\n    echo \"Name : \".$data-&gt;name.\"\\n\";\n    echo \"Email : \".$data-&gt;email.\"\\n\";\n    echo \"Message : \".$data-&gt;message.\"\\n\";\n?&gt;\n</code></pre>\n\n<p>I'm receiving the following error when viewing my site console:</p>\n\n<blockquote>\n  <p>[Error] SyntaxError: Unexpected token '&lt;'     (anonymous function)\n  (submit.php:1)</p>\n</blockquote>\n\n<p>I've tried wrapping my php file in the following (didn't help)</p>\n\n<blockquote>\n  <p>angular.callbacks._0 ( { })</p>\n</blockquote>\n\n<p>and my file structure looks as follows:</p>\n\n<pre><code>dist/\n\u251c\u2500\u2500 bower_components\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ...\n\u251c\u2500\u2500 css\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 app.css\n\u251c\u2500\u2500 index.html\n\u251c\u2500\u2500 js\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 app.js\n\u2514\u2500\u2500 resources\n    \u251c\u2500\u2500 ...\n    \u2514\u2500\u2500 submit.php\n</code></pre>\n"}, {"tags": ["javascript", "mysql", "node.js", "relationship", "sequelize.js"], "comments": [{"owner": {"reputation": 2300, "user_id": 6380346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6b4f130ad3698c1cb80b58f3003543f?s=128&d=identicon&r=PG&f=1", "display_name": "Tilekbekov Yrysbek", "link": "https://stackoverflow.com/users/6380346/tilekbekov-yrysbek"}, "edited": false, "score": 0, "creation_date": 1479963874, "post_id": 40774212, "comment_id": 68780247, "body": "Why are you using <code>string</code> instead of <code>integer</code>? Try to define <code>carrier_mongo_id</code> as <code>integer</code>"}, {"owner": {"reputation": 44, "user_id": 3784472, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001695102763/picture?type=large", "display_name": "eHattori", "link": "https://stackoverflow.com/users/3784472/ehattori"}, "reply_to_user": {"reputation": 2300, "user_id": 6380346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6b4f130ad3698c1cb80b58f3003543f?s=128&d=identicon&r=PG&f=1", "display_name": "Tilekbekov Yrysbek", "link": "https://stackoverflow.com/users/6380346/tilekbekov-yrysbek"}, "edited": false, "score": 0, "creation_date": 1479977719, "post_id": 40774212, "comment_id": 68786525, "body": "Hello @TilovYrys, the carrier_mongo_id is a hash id tks :)"}], "answers": [{"tags": [], "owner": {"reputation": 44, "user_id": 3784472, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001695102763/picture?type=large", "display_name": "eHattori", "link": "https://stackoverflow.com/users/3784472/ehattori"}, "is_accepted": true, "score": 0, "last_activity_date": 1480418031, "creation_date": 1480418031, "answer_id": 40864487, "question_id": 40774212, "link": "https://stackoverflow.com/questions/40774212/make-query-using-sequelize-and-nodejs-with-other-key-in-primary-key/40864487#40864487", "title": "Make query using Sequelize and NodeJS with other key in primary key", "body": "<p>I found the solution for my case guys =)</p>\n\n<p>the fix is update the CarrierModel set up the carrier_mongo_id for primaryKey</p>\n\n<pre><code> ........................\n carrier_mongo_id : {\n    type: DataType.STRING,\n    require : true,\n    primaryKey: true,\n    references: {\n        model: \"carrier\",\n        key: \"carrier_mongo_id\"\n    },\n    onUpdate: 'cascade',\n    onDelete: 'cascade'\n},\n.....................\n</code></pre>\n\n<p>And the query is like :</p>\n\n<pre><code> carreteiroModel.hasMany(precoModel, {foreignKey:         'carreteiro_mongo_id', otherKey: 'carreteiro_mongo_id'});\n         carreteiroModel.findAll({ include: [{ model: precoModel ,    required: true }] }).\n   then(function(result){ ...});\n</code></pre>\n\n<p>tks for you comments :)</p>\n"}], "owner": {"reputation": 44, "user_id": 3784472, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001695102763/picture?type=large", "display_name": "eHattori", "link": "https://stackoverflow.com/users/3784472/ehattori"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 40864487, "answer_count": 1, "score": -1, "last_activity_date": 1480418123, "creation_date": 1479935463, "last_edit_date": 1480418123, "question_id": 40774212, "link": "https://stackoverflow.com/questions/40774212/make-query-using-sequelize-and-nodejs-with-other-key-in-primary-key", "title": "Make query using Sequelize and NodeJS with other key in primary key", "body": "<p>I have a question that I lost time and nothing.</p>\n\n<p>I have one model Price:</p>\n\n<pre><code>var price = sequelize.define('price', {\n    price_id: {\n        allowNull: false,\n        autoIncrement: true,\n        primaryKey: true,\n        type: DataType.INTEGER\n    },\n    carrier_mongo_id : {\n        type: DataType.STRING,\n        require : true,\n        references: {\n            model: \"carrier\",\n            key: \"carrier_mongo_id\"\n        },\n        onUpdate: 'cascade',\n        onDelete: 'cascade'\n    },\n    value: {\n        type: DataType.DECIMAL\n    }\n});\n</code></pre>\n\n<p>I have other model Carrier:</p>\n\n<pre><code> var carrier = sequelize.define('carrier', {\n    carrier_id: {\n        allowNull: false,\n        autoIncrement: true,\n        primaryKey: true,\n        type: Datatype.INTEGER\n    },\n    carrier_mongo_id: {\n        type: Datatype.STRING,\n        require : true\n    },\n    name: {\n        type: Datatype.STRING,\n        require : true\n    }\n});\n</code></pre>\n\n<p>and make query like this:</p>\n\n<pre><code>carrierModel.hasMany(priceModel, {foreignKey: 'carrier_mongo_id'});\n\ncarrierModel.findAll({ include: [{ model: priceModel , required: true }] }).then(function(result){\n\n    var aCarriers = new Array();\n\n    result.forEach(function(carreteiro){\n        aCarriers.push(carreteiro.dataValues);\n    });\n\n    console.log(aCarriers);\n\n}).catch(function(err){\n    console.log(err);\n});\n</code></pre>\n\n<p>my query is :</p>\n\n<pre><code>SELECT \n    `carrier`.`carrier_id`,\n    `carrier`.`carrier_mongo_id`,\n    `carrier`.`name`,    \n    `prices`.`price_id` AS `prices.price_id`,\n    `prices`.`carrier_mongo_id` AS `prices.carrier_mongo_id`,    \n    `prices`.`value` AS `prices.value`\nFROM\n    `carrier` AS `carrier`\n        INNER JOIN `price` AS `prices` ON `carrier`.`carrier_id` = `prices`.`carrier_mongo_id`\n</code></pre>\n\n<p>But I need this SQL query:</p>\n\n<pre><code>SELECT \n    `carrier`.`carrier_id`,\n    `carrier`.`carrier_mongo_id`,\n    `carrier`.`name`,    \n    `prices`.`price_id` AS `prices.price_id`,\n    `prices`.`carrier_mongo_id` AS `prices.carrier_mongo_id`,    \n    `prices`.`value` AS `prices.value`\nFROM\n    `carrier` AS `carrier`\n        INNER JOIN `price` AS `prices` ON `carrier`.`carrier_mongo_id` = `prices`.`carrier_mongo_id`\n</code></pre>\n\n<p>I know that I can use this method Sequelize.query (...), but my question is:</p>\n\n<p>How to make this query using Sequelize model</p>\n\n<p>tks</p>\n"}, {"tags": ["javascript", "jquery", "html"], "comments": [{"owner": {"reputation": 10467, "user_id": 2045185, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/wO2Jd.jpg?s=128&g=1", "display_name": "sinisake", "link": "https://stackoverflow.com/users/2045185/sinisake"}, "edited": false, "score": 1, "creation_date": 1479935739, "post_id": 40774209, "comment_id": 68772391, "body": "Hm, not sure that var/string you create can be selected?"}], "answers": [{"comments": [{"owner": {"reputation": 20489, "user_id": 2026606, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/Ksr3L.jpg?s=128&g=1", "display_name": "Tyler Roper", "link": "https://stackoverflow.com/users/2026606/tyler-roper"}, "edited": false, "score": 3, "creation_date": 1479935775, "post_id": 40774275, "comment_id": 68772403, "body": "I don&#39;t think that OP wants the textbox&#39;s value to <i>show</i> the replacement. It seems like it&#39;s more of a deception: You think you&#39;re copying the textarea, but what you&#39;ve copied is actually altered to replace the name."}], "tags": [], "owner": {"reputation": 56607, "user_id": 695364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUNjJ.jpg?s=128&g=1", "display_name": "Scott Marcus", "link": "https://stackoverflow.com/users/695364/scott-marcus"}, "is_accepted": false, "score": 1, "last_activity_date": 1479936426, "last_edit_date": 1479936426, "creation_date": 1479935736, "answer_id": 40774275, "question_id": 40774209, "link": "https://stackoverflow.com/questions/40774209/replace-string-in-textarea-on-click-and-then-copy-jquery/40774275#40774275", "title": "Replace string in textarea on click and then copy (jQuery)", "body": "<p>You'll need to cache the original value and then put the new value into an element that is selectable so that you can copy the selected text. Then you can put back the original text.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>$(\"button\").click(function(){\r\n  var original = $(\"textarea\").val();\r\n  var updated = $(\"textarea\").val().replace(\"Tobias\", \"Hanna\");\r\n  $(\"textarea\").val(updated);\r\n  $(\"textarea\").select();\r\n  document.execCommand('copy');\r\n  $(\"textarea\").val(original);\r\n});</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>input[type=text] { height:1px, width:1px; }</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;textarea&gt;Tobias is great&lt;/textarea&gt;\r\n&lt;button&gt;Click Me&lt;/button&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 597, "user_id": 4880498, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/10152725670678414/picture?type=large", "display_name": "tobiasg", "link": "https://stackoverflow.com/users/4880498/tobiasg"}, "edited": false, "score": 0, "creation_date": 1479936921, "post_id": 40774354, "comment_id": 68772925, "body": "Thanks! Worked exactly like I wanted it to! Is there any way to add more words that I want replaced? Let&#39;s say I enter &quot;Tobias is great!&quot; and I want the output to be &quot;Hanna is lovely!&quot;, replacing &quot;Tobias&quot; with &quot;Hanna&quot; and &quot;great&quot; with &quot;lovely&quot;."}, {"owner": {"reputation": 597, "user_id": 4880498, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/10152725670678414/picture?type=large", "display_name": "tobiasg", "link": "https://stackoverflow.com/users/4880498/tobiasg"}, "edited": false, "score": 0, "creation_date": 1479937055, "post_id": 40774354, "comment_id": 68772981, "body": "And yeah, I really appreciate the friendly note. I&#39;ve seen that way of naming variables in tutorials, but obviously never understood the meaning of doing so. Thanks!"}, {"owner": {"reputation": 20489, "user_id": 2026606, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/Ksr3L.jpg?s=128&g=1", "display_name": "Tyler Roper", "link": "https://stackoverflow.com/users/2026606/tyler-roper"}, "reply_to_user": {"reputation": 597, "user_id": 4880498, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/10152725670678414/picture?type=large", "display_name": "tobiasg", "link": "https://stackoverflow.com/users/4880498/tobiasg"}, "edited": false, "score": 1, "creation_date": 1479937067, "post_id": 40774354, "comment_id": 68772987, "body": "Glad I could help. For other replaces, you can just keep appending them to the replace that&#39;s already there. <code>.replace(&quot;Tobias&quot;, &quot;Hanna&quot;).replace(&quot;great&quot;, &quot;lovely&quot;)</code>. If you&#39;re going to have a bunch of these down the line, you may want to look into listing the replacements in an object to be more concise."}, {"owner": {"reputation": 597, "user_id": 4880498, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/10152725670678414/picture?type=large", "display_name": "tobiasg", "link": "https://stackoverflow.com/users/4880498/tobiasg"}, "edited": false, "score": 0, "creation_date": 1479937135, "post_id": 40774354, "comment_id": 68773017, "body": "Very helpful! Thank you once again!"}, {"owner": {"reputation": 56607, "user_id": 695364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUNjJ.jpg?s=128&g=1", "display_name": "Scott Marcus", "link": "https://stackoverflow.com/users/695364/scott-marcus"}, "reply_to_user": {"reputation": 597, "user_id": 4880498, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/10152725670678414/picture?type=large", "display_name": "tobiasg", "link": "https://stackoverflow.com/users/4880498/tobiasg"}, "edited": false, "score": 1, "creation_date": 1479941912, "post_id": 40774354, "comment_id": 68774779, "body": "@tobiasg When you set a variable to a JQuery wrapped set (i.e. <code>var $elements = $(&quot;div&quot;);</code> it is a good idea to prefix the variable with <code>$</code> to remind you that the variable is referencing a JQuery object and not a regular JavaScript node list."}], "tags": [], "owner": {"reputation": 20489, "user_id": 2026606, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/Ksr3L.jpg?s=128&g=1", "display_name": "Tyler Roper", "link": "https://stackoverflow.com/users/2026606/tyler-roper"}, "is_accepted": true, "score": 3, "last_activity_date": 1479936930, "last_edit_date": 1479936930, "creation_date": 1479936149, "answer_id": 40774354, "question_id": 40774209, "link": "https://stackoverflow.com/questions/40774209/replace-string-in-textarea-on-click-and-then-copy-jquery/40774354#40774354", "title": "Replace string in textarea on click and then copy (jQuery)", "body": "<p>You can't do a <code>.select()</code> on a string. As per <a href=\"https://api.jquery.com/select/#select\" rel=\"nofollow noreferrer\">the documentation</a>, its use is limited to <code>&lt;input type=\"text\"&gt;</code> and <code>&lt;textarea&gt;</code> elements.</p>\n\n<p>Perhaps what you're looking for is something like this: <a href=\"https://jsfiddle.net/6mz4qyL0/3/\" rel=\"nofollow noreferrer\">https://jsfiddle.net/6mz4qyL0/3/</a></p>\n\n<pre><code>$(\"button\").click(function(){\n    var $textArea = $(\"textarea\");\n    var oldText = $textArea.val();\n    var newText = oldText.replace(\"Tobias\",\"Hanna\");\n    $textArea.val(newText).select();\n    document.execCommand('copy');\n    $textArea.val(oldText);\n});\n</code></pre>\n\n<p>This changes the textarea value to the replacement text, copies it, and then changes it back, all without the user knowing.</p>\n\n<hr>\n\n<p>Additionally as a friendly note... While there is nothing <em>syntactically</em> incorrect with your <code>$newText</code> variable, I'd personally suggest dropping the <code>$</code> from its name. </p>\n\n<p>When working with a block of jQuery code, those familiar with the language will most likely assume that a variable prefixed with <code>$</code> refers to a jQuery object/array. In your case, <code>$newText</code> is a basic <code>string</code>, so it's quite deceiving.</p>\n"}], "owner": {"reputation": 597, "user_id": 4880498, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/10152725670678414/picture?type=large", "display_name": "tobiasg", "link": "https://stackoverflow.com/users/4880498/tobiasg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 770, "favorite_count": 0, "accepted_answer_id": 40774354, "answer_count": 2, "score": 1, "last_activity_date": 1479936930, "creation_date": 1479935438, "question_id": 40774209, "link": "https://stackoverflow.com/questions/40774209/replace-string-in-textarea-on-click-and-then-copy-jquery", "title": "Replace string in textarea on click and then copy (jQuery)", "body": "<p>I have this form with a <code>textarea</code> and a <code>button</code>. If someone enters a text in the textarea and clicks the button, I want the function to search for if \"Tobias\" was entered in the textarea and if so, replace it with \"Hanna\" and finally copy it to the clipboard.</p>\n\n<p>If I enter this in the textarea...</p>\n\n<blockquote>\n  <p>Tobias is great!</p>\n</blockquote>\n\n<p>...and then click the button; I want this to be copied to the clipboard:</p>\n\n<blockquote>\n  <p>Hanna is great!</p>\n</blockquote>\n\n<p>But it won't work. This is the code so far:</p>\n\n<pre><code>$(\"button\").click(function(){\nvar $textArea = $(\"textarea\");\nvar $newText = $textArea.val().replace(\"Tobias\", \"Hanna\");\n    $newText.select();\n    document.execCommand('copy');\n});\n</code></pre>\n"}, {"tags": ["javascript", "memory", "arraybuffer"], "comments": [{"owner": {"reputation": 7498, "user_id": 3783770, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/8FsfL.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/3783770/kris"}, "edited": false, "score": 1, "creation_date": 1479935622, "post_id": 40774189, "comment_id": 68772336, "body": "That&#39;s 336 megabytes. Perhaps you only have access to 125 megabytes of memory?"}, {"owner": {"reputation": 545, "user_id": 5440303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/770172109778333/picture?type=large", "display_name": "Neil Docherty", "link": "https://stackoverflow.com/users/5440303/neil-docherty"}, "edited": false, "score": 0, "creation_date": 1479935676, "post_id": 40774189, "comment_id": 68772364, "body": "It outputs <code>336000000</code> just fine for me. I put it in the console on Chrome."}, {"owner": {"reputation": 7498, "user_id": 3783770, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/8FsfL.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/3783770/kris"}, "reply_to_user": {"reputation": 545, "user_id": 5440303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/770172109778333/picture?type=large", "display_name": "Neil Docherty", "link": "https://stackoverflow.com/users/5440303/neil-docherty"}, "edited": false, "score": 0, "creation_date": 1479935752, "post_id": 40774189, "comment_id": 68772395, "body": "@NeilDocherty wouldn&#39;t it be dependent on the resources available? I&#39;d expect you&#39;d have more memory to utilize on your computer over a S6."}, {"owner": {"reputation": 545, "user_id": 5440303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/770172109778333/picture?type=large", "display_name": "Neil Docherty", "link": "https://stackoverflow.com/users/5440303/neil-docherty"}, "reply_to_user": {"reputation": 7498, "user_id": 3783770, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/8FsfL.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/3783770/kris"}, "edited": false, "score": 0, "creation_date": 1479935822, "post_id": 40774189, "comment_id": 68772423, "body": "@Kris, your right. I didn&#39;t even register that he wrote that he was on mobile."}, {"owner": {"reputation": 8073, "user_id": 2852624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/682806d261e4f00f77aa8633689a9558?s=128&d=identicon&r=PG&f=1", "display_name": "Matthias247", "link": "https://stackoverflow.com/users/2852624/matthias247"}, "edited": false, "score": 1, "creation_date": 1479935839, "post_id": 40774189, "comment_id": 68772429, "body": "Interesting, Firefox also does this. Not for that amount, but if I try to allocate 3GB it gives me only 1GB. Would have expected an exception instead of this."}, {"owner": {"reputation": 30819, "user_id": 47589, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/16703987f5d8e44af08a28f4942ec0f1?s=128&d=identicon&r=PG", "display_name": "Rainbow Dash", "link": "https://stackoverflow.com/users/47589/rainbow-dash"}, "edited": false, "score": 0, "creation_date": 1479936653, "post_id": 40774189, "comment_id": 68772790, "body": "For reference, <a href=\"http://www.ecma-international.org/ecma-262/6.0/#sec-arraybuffer-constructor\" rel=\"nofollow noreferrer\">here&#39;s the ArrayBuffer constructor in the ECMA 6 spec</a>"}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1479937537, "post_id": 40774490, "comment_id": 68773197, "body": "Look at the Compatibility array in <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/&hellip;</a>. I think the question marks in the line about &quot;new throws&quot; is relevant."}, {"owner": {"reputation": 13084, "user_id": 1469259, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/24cae1d8d8bd5ad480fc1891a4e9d76e?s=128&d=identicon&r=PG", "display_name": "CupawnTae", "link": "https://stackoverflow.com/users/1469259/cupawntae"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1479937673, "post_id": 40774490, "comment_id": 68773249, "body": "@Barmar my read is that that&#39;s just about the fact you&#39;re supposed to use <code>new ArrayBuffer(x)</code> rather than just <code>ArrayBuffer(x)</code>, and questioning whether the browsers allow the non-<code>new</code> version or throw an exception, i.e. not related to the size issue"}], "tags": [], "owner": {"reputation": 13084, "user_id": 1469259, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/24cae1d8d8bd5ad480fc1891a4e9d76e?s=128&d=identicon&r=PG", "display_name": "CupawnTae", "link": "https://stackoverflow.com/users/1469259/cupawntae"}, "is_accepted": true, "score": 3, "last_activity_date": 1479937333, "last_edit_date": 1479937333, "creation_date": 1479936776, "answer_id": 40774490, "question_id": 40774189, "link": "https://stackoverflow.com/questions/40774189/javascript-is-not-allocating-needed-size-for-arraybuffer/40774490#40774490", "title": "JavaScript is not allocating needed size for ArrayBuffer", "body": "<p>You're trying to allocate more memory than is available. However, according to the spec, this should raise an exception rather than returning you a smaller buffer:</p>\n\n<p><a href=\"http://www.ecma-international.org/ecma-262/6.0/#sec-createbytedatablock\" rel=\"nofollow noreferrer\">http://www.ecma-international.org/ecma-262/6.0/#sec-createbytedatablock</a></p>\n\n<blockquote>\n  <p>Let db be a new Data Block value consisting of size bytes. If it is impossible to create such a Data Block, throw a RangeError exception.</p>\n</blockquote>\n\n<p>And the previous spec <a href=\"https://www.khronos.org/registry/typedarray/specs/latest/#5\" rel=\"nofollow noreferrer\">https://www.khronos.org/registry/typedarray/specs/latest/#5</a></p>\n\n<blockquote>\n  <p>If the requested number of bytes could not be allocated an exception is raised</p>\n</blockquote>\n\n<p>So if your browser is returning a smaller buffer rather than throwing an exception, it's non-compliant.</p>\n"}], "owner": {"reputation": 83, "user_id": 4462088, "user_type": "registered", "profile_image": "https://graph.facebook.com/1136508319726728/picture?type=large", "display_name": "Fredrik Anfinsen", "link": "https://stackoverflow.com/users/4462088/fredrik-anfinsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 40774490, "answer_count": 1, "score": 3, "last_activity_date": 1479937333, "creation_date": 1479935346, "question_id": 40774189, "link": "https://stackoverflow.com/questions/40774189/javascript-is-not-allocating-needed-size-for-arraybuffer", "title": "JavaScript is not allocating needed size for ArrayBuffer", "body": "<p>I tried to run this code to allocate a ArrayBuffer:</p>\n\n<pre><code>var data = new ArrayBuffer(336000000);\nconsole.log(data.byteLength); // outputs 125829120\n</code></pre>\n\n<p>Does anyone know why the number if bytes is not allocated? Chrome don't give me any errors / warnings.</p>\n\n<p>This problem is not on every platform, but on several like on Galaxy S6 (Android Browser)</p>\n"}, {"tags": ["javascript"], "comments": [{"owner": {"reputation": 16050, "user_id": 2581562, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/u0aMo.gif?s=128&g=1", "display_name": "Legends", "link": "https://stackoverflow.com/users/2581562/legends"}, "edited": false, "score": 0, "creation_date": 1479935565, "post_id": 40774186, "comment_id": 68772308, "body": "Browser? did u read the restrictions?"}, {"owner": {"reputation": 8910, "user_id": 4977957, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/55ddc749972794b1664cbb5179f397b7?s=128&d=identicon&r=PG&f=1", "display_name": "VSO", "link": "https://stackoverflow.com/users/4977957/vso"}, "reply_to_user": {"reputation": 16050, "user_id": 2581562, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/u0aMo.gif?s=128&g=1", "display_name": "Legends", "link": "https://stackoverflow.com/users/2581562/legends"}, "edited": false, "score": 0, "creation_date": 1479935587, "post_id": 40774186, "comment_id": 68772317, "body": "Latest Chrome. I did not read the restrictions."}, {"owner": {"reputation": 16050, "user_id": 2581562, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/u0aMo.gif?s=128&g=1", "display_name": "Legends", "link": "https://stackoverflow.com/users/2581562/legends"}, "edited": false, "score": 0, "creation_date": 1479935747, "post_id": 40774186, "comment_id": 68772394, "body": "This is what they say (dont know if this is up to date)In Firefox, Opera, Google Chrome and Safari, use the execCommand method with the &#39;Paste&#39; command to retrieve and with the &#39;Copy&#39; command to set the text content of the clipboard. Because of security restrictions, this method may not always work, see Example 2 for details."}, {"owner": {"reputation": 8910, "user_id": 4977957, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/55ddc749972794b1664cbb5179f397b7?s=128&d=identicon&r=PG&f=1", "display_name": "VSO", "link": "https://stackoverflow.com/users/4977957/vso"}, "reply_to_user": {"reputation": 16050, "user_id": 2581562, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/u0aMo.gif?s=128&g=1", "display_name": "Legends", "link": "https://stackoverflow.com/users/2581562/legends"}, "edited": false, "score": 0, "creation_date": 1479936113, "post_id": 40774186, "comment_id": 68772557, "body": "I see it now, thanks. Fun."}, {"owner": {"reputation": 16050, "user_id": 2581562, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/u0aMo.gif?s=128&g=1", "display_name": "Legends", "link": "https://stackoverflow.com/users/2581562/legends"}, "edited": false, "score": 1, "creation_date": 1479936372, "post_id": 40774186, "comment_id": 68772664, "body": "<a href=\"http://stackoverflow.com/a/36380702/2581562\">link</a>"}, {"owner": {"reputation": 16050, "user_id": 2581562, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/u0aMo.gif?s=128&g=1", "display_name": "Legends", "link": "https://stackoverflow.com/users/2581562/legends"}, "edited": false, "score": 0, "creation_date": 1479936879, "post_id": 40774186, "comment_id": 68772901, "body": "or if u need to use it all over ur site <a href=\"https://clipboardjs.com/\" rel=\"nofollow noreferrer\">clipboardjs.com</a> It&#39;s cross-browser..."}, {"owner": {"reputation": 8910, "user_id": 4977957, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/55ddc749972794b1664cbb5179f397b7?s=128&d=identicon&r=PG&f=1", "display_name": "VSO", "link": "https://stackoverflow.com/users/4977957/vso"}, "reply_to_user": {"reputation": 16050, "user_id": 2581562, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/u0aMo.gif?s=128&g=1", "display_name": "Legends", "link": "https://stackoverflow.com/users/2581562/legends"}, "edited": false, "score": 0, "creation_date": 1479940043, "post_id": 40774186, "comment_id": 68774157, "body": "That helps. thanks."}], "owner": {"reputation": 8910, "user_id": 4977957, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/55ddc749972794b1664cbb5179f397b7?s=128&d=identicon&r=PG&f=1", "display_name": "VSO", "link": "https://stackoverflow.com/users/4977957/vso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1773, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1479935339, "creation_date": 1479935339, "question_id": 40774186, "link": "https://stackoverflow.com/questions/40774186/how-do-i-set-data-on-a-javascript-clipboard", "title": "How do I set Data on a Javascript Clipboard?", "body": "<p><a href=\"https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIClipboard\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIClipboard</a></p>\n\n<p>When I listen to a paste event in javascript, I am able to get paste data out of the clipboards as a string like so:</p>\n\n<pre><code>let pastedText: string = e.clipboardData.getData('Text');\n</code></pre>\n\n<p>or like so for those not using typescript:</p>\n\n<pre><code>var pastedText = e.clipboardData.getData('Text');\n</code></pre>\n\n<p>I am trying to re-send this event with edited clipboard data. I can re-issue the event, but I am having trouble using clipboard's <code>setData</code> method. I am trying this (<a href=\"http://help.dottoro.com/ljctuhrg.php\" rel=\"nofollow noreferrer\">documentation</a>):</p>\n\n<pre><code> e.clipboardData.setData('Text', 'lolData');\n</code></pre>\n\n<p>but when I run:</p>\n\n<pre><code>  console.log('NEW CLIPBOARD DATA: ');\n  console.log(e.clipboardData.getData('Text'));\n</code></pre>\n\n<p>Nothing is printed. I don't really understand what I am doing with trying to set on the event, but it seems to make sense, since I am getting it from the event object. </p>\n"}, {"tags": ["javascript", "php", "html", "css"], "comments": [{"owner": {"reputation": 105033, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "edited": false, "score": 0, "creation_date": 1479935400, "post_id": 40774127, "comment_id": 68772227, "body": "WHY??? makes no sense to me"}, {"owner": {"reputation": 105033, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "edited": false, "score": 0, "creation_date": 1479935493, "post_id": 40774127, "comment_id": 68772273, "body": "Have a look at json..."}, {"owner": {"reputation": 7914, "user_id": 2780711, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/yeJ7R.jpg?s=128&g=1", "display_name": "icecub", "link": "https://stackoverflow.com/users/2780711/icecub"}, "reply_to_user": {"reputation": 105033, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "edited": false, "score": 0, "creation_date": 1479935511, "post_id": 40774127, "comment_id": 68772281, "body": "@Jonasw I think he wants to write a website where users try to &quot;hack&quot; their way in, increasing the difficutly on each hack. What I wonder though, is how he&#39;s going to do it if he doesn&#39;t even know the basics (like this) himself.."}, {"owner": {"reputation": 37580, "user_id": 1248114, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/4XXrp.jpg?s=128&g=1", "display_name": "arkascha", "link": "https://stackoverflow.com/users/1248114/arkascha"}, "edited": false, "score": 3, "creation_date": 1479935618, "post_id": 40774127, "comment_id": 68772334, "body": "A database is far easier than manually handling and parsing a file in every request. If you really do not have any database server accessible, then use a simple sqlite database. That is still easier and more efficient than using a hand tailored flat file storage format."}, {"owner": {"reputation": 7914, "user_id": 2780711, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/yeJ7R.jpg?s=128&g=1", "display_name": "icecub", "link": "https://stackoverflow.com/users/2780711/icecub"}, "reply_to_user": {"reputation": 37580, "user_id": 1248114, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/4XXrp.jpg?s=128&g=1", "display_name": "arkascha", "link": "https://stackoverflow.com/users/1248114/arkascha"}, "edited": false, "score": 1, "creation_date": 1479935906, "post_id": 40774127, "comment_id": 68772463, "body": "@arkascha Although I agree with you, you should read the question more carefull. OP wants to create some sort of &quot;hack challange&quot; website. Getting a plain text username / password out of a txt file would be a lot easier for a challange than hacking a database."}, {"owner": {"reputation": 37580, "user_id": 1248114, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/4XXrp.jpg?s=128&g=1", "display_name": "arkascha", "link": "https://stackoverflow.com/users/1248114/arkascha"}, "reply_to_user": {"reputation": 7914, "user_id": 2780711, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/yeJ7R.jpg?s=128&g=1", "display_name": "icecub", "link": "https://stackoverflow.com/users/2780711/icecub"}, "edited": false, "score": 0, "creation_date": 1479936111, "post_id": 40774127, "comment_id": 68772556, "body": "@icecub I <i>think</i> I did read the question carefully... What you suggest is not what I read in the question. The term &quot;hackme website&quot; does not mean that the goal is to have clients hack such a credentials file. And if, then what would be the point? It would be a completely unrealistic challenge. The OP never hints that this credentials file should be hacked, it is clearly said that the reason that a file storage is planned is because security is not the goal, so not important."}, {"owner": {"reputation": 7914, "user_id": 2780711, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/yeJ7R.jpg?s=128&g=1", "display_name": "icecub", "link": "https://stackoverflow.com/users/2780711/icecub"}, "reply_to_user": {"reputation": 37580, "user_id": 1248114, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/4XXrp.jpg?s=128&g=1", "display_name": "arkascha", "link": "https://stackoverflow.com/users/1248114/arkascha"}, "edited": false, "score": 0, "creation_date": 1479936452, "post_id": 40774127, "comment_id": 68772708, "body": "@arkascha I guess we have a different interpretation of the question. I&#39;ve played around on several of those &quot;hackme websites&quot;. An easy challange like &quot;hacking a text file&quot; isn&#39;t uncommon there before moving on to the more difficult and realistic challanges. Anyway, OP seems happy with the answer, so no reason to debate over it :)"}], "answers": [{"tags": [], "owner": {"reputation": 154038, "user_id": 462627, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f0285ad1973e938e2d2f40254c247f6f?s=128&d=identicon&r=PG", "display_name": "Praveen Kumar Purushothaman", "link": "https://stackoverflow.com/users/462627/praveen-kumar-purushothaman"}, "is_accepted": true, "score": 1, "last_activity_date": 1479935500, "creation_date": 1479935500, "answer_id": 40774219, "question_id": 40774127, "link": "https://stackoverflow.com/questions/40774127/php-login-store-passwords-in-txt/40774219#40774219", "title": "Php login store passwords in txt", "body": "<p>You can make a JSON kind of thing and refer it as an array. So, prepare the file first. The contents of <code>passwords.json</code> (or <code>passwords.txt</code>, call it whatever you want):</p>\n\n<pre><code>{}\n</code></pre>\n\n<p>And now, what you need to do is the following:</p>\n\n<ul>\n<li>Read the contents of the file.</li>\n<li>Parse them into an associative array.</li>\n<li>Check the keys for existence of username.</li>\n<li>Verify the password.</li>\n</ul>\n\n<p>So, ultimately, the code would be something like:</p>\n\n<pre><code>&lt;?php\n    // Read the file.\n    $users = file_get_contents(\"passwords.json\");\n    // Convert into an associative array.\n    $users = json_decode($users);\n    // Get the input from the user.\n    $username = $_POST[\"username\"];\n    $password = $_POST[\"password\"];\n    // Check the validity.\n    if (array_key_exists($username, $users) &amp;&amp; $users[$username] == $password) {\n        // Valid user.\n        $_SESSION[\"user\"] = array($username, $password);\n    } else {\n        echo \"Not Right!\";\n    }\n?&gt;\n</code></pre>\n\n<p>And if you wanna store the users, then you just need to do the opposite.</p>\n\n<ol>\n<li>Get the username and password.</li>\n<li>Read the original list of users into an array.</li>\n<li>Append the new username and password.</li>\n<li>Convert it into JSON.</li>\n<li>Save it inside the file.</li>\n</ol>\n\n<p>The final code:</p>\n\n<pre><code>&lt;?php\n    // Read the file.\n    $users = file_get_contents(\"passwords.json\");\n    // Convert into an associative array.\n    $users = json_decode($users);\n    // Get the input from the user.\n    $username = $_POST[\"username\"];\n    $password = $_POST[\"password\"];\n    // Store the new one into the array.\n    $users[$username] = $password;\n    // Convert back to JSON.\n    $users = json_encode($users);\n    // Put it into the file.\n    file_put_contents(\"passwords.json\", $users);\n?&gt;\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 7142751, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/86c3da11bbb5c7797a4c14aebb173049?s=128&d=identicon&r=PG&f=1", "display_name": "Hugh Chalmers", "link": "https://stackoverflow.com/users/7142751/hugh-chalmers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 675, "favorite_count": 1, "closed_date": 1479938761, "accepted_answer_id": 40774219, "answer_count": 1, "score": -1, "last_activity_date": 1479935537, "creation_date": 1479935020, "last_edit_date": 1479935537, "question_id": 40774127, "link": "https://stackoverflow.com/questions/40774127/php-login-store-passwords-in-txt", "closed_reason": "Needs more focus", "title": "Php login store passwords in txt", "body": "<p>Now, I know that storing passwords in a text file is not secure, but don't worry. Security is not my goal here, this is like one of those hackme websites.<br>\nSo, I need to know, how would I store usernames and passwords in a text file, so far I have this array</p>\n\n<pre><code>$logins = array('Example' =&gt; '123','test' =&gt; '123','simon' =&gt; '123');\n</code></pre>\n\n<p>and this if statement</p>\n\n<pre><code>if (isset($logins[$Username]) &amp;&amp; $logins[$Username] == $Password){\n    /* Success: Set session variables and redirect to Protected page  */\n    $_SESSION['UserData']['Username']=$logins[$Username];\n    header(\"location:index.php\");\n    exit;\n}\n</code></pre>\n\n<p>How would I make it so rather than storing them as a list, I can store them in a text file, and then run the if statement, on the text file?</p>\n"}, {"tags": ["javascript", "angularjs"], "comments": [{"owner": {"reputation": 432, "user_id": 2201307, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d0c13ffb6af72710bd31fba886a5f011?s=128&d=identicon&r=PG&f=1", "display_name": "JimmyBob", "link": "https://stackoverflow.com/users/2201307/jimmybob"}, "edited": false, "score": 0, "creation_date": 1479935301, "post_id": 40774075, "comment_id": 68772179, "body": "Can you provide a plunker demonstrating your bug?"}], "answers": [{"tags": [], "owner": {"reputation": 992, "user_id": 688074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb4c8ca4f13c6433e179b2bc8b110790?s=128&d=identicon&r=PG", "display_name": "robottaxes", "link": "https://stackoverflow.com/users/688074/robottaxes"}, "is_accepted": true, "score": 3, "last_activity_date": 1480004194, "last_edit_date": 1480004194, "creation_date": 1479935719, "answer_id": 40774269, "question_id": 40774075, "link": "https://stackoverflow.com/questions/40774075/angular-sort-toggle-not-working-correctly/40774269#40774269", "title": "Angular sort toggle not working correctly", "body": "<p>Need an <code>else if</code></p>\n\n<pre><code>$scope.sort = function (a) {\n    var ascend = a + ':' + 'asc';\n    var descend = a + ':' + 'desc';\n    if ($scope.searchObject.sort === ascend) {\n      $scope.searchObject.sort = descend;\n    }else if ($scope.searchObject.sort === descend){\n      console.log('is desc')\n      $scope.searchObject.sort = ascend;\n      console.log('sort : ', $scope.searchObject.sort)\n    }\n    else {\n      $scope.searchObject.sort = descend;\n    }\n  };\n</code></pre>\n"}], "owner": {"reputation": 1070, "user_id": 3709602, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/nAlMK.jpg?s=128&g=1", "display_name": "NoobSter", "link": "https://stackoverflow.com/users/3709602/noobster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 40774269, "answer_count": 1, "score": 1, "last_activity_date": 1480004194, "creation_date": 1479934807, "last_edit_date": 1479941263, "question_id": 40774075, "link": "https://stackoverflow.com/questions/40774075/angular-sort-toggle-not-working-correctly", "title": "Angular sort toggle not working correctly", "body": "<pre class=\"lang-js prettyprint-override\"><code>$scope.searchObject = {\n  from: 0,\n  hydrate: false,\n  size: 12,\n  sort: 'timestamp:desc'\n};\n\n$scope.sort = function(a) {\n  var ascend = a + ':' + 'asc';\n  var descend = a + ':' + 'desc';\n  if ($scope.searchObject.sort === ascend) {\n    $scope.searchObject.sort = descend;\n  }\n  if ($scope.searchObject.sort === descend) {\n    console.log('is desc')\n    $scope.searchObject.sort = ascend;\n    console.log('sort : ', $scope.searchObject.sort)\n  } else {\n    $scope.searchObject.sort = descend;\n  }\n};\n</code></pre>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div class=\"sort-info\"&gt;\n  &lt;label&gt;Sort:&lt;/label&gt;\n  &lt;a class=\"sort-item\" ng-click=\"sort('timestamp')\"&gt; Date\n      &lt;div class=\"sort-arrow\" &gt;\n        &lt;i ng-show=\"searchObject.sort === 'timestamp:asc'\" class=\"fa fa-caret-down\"&gt;&lt;/i&gt;\n        &lt;i ng-show=\"searchObject.sort === 'timestamp:desc'\" class=\"fa fa-caret-up\"&gt;&lt;/i&gt;\n      &lt;/div&gt;\n    &lt;/a&gt;\n  &lt;a class=\"sort-item\" ng-click=\"sort('followers')\"&gt;Followers\n     &lt;div class=\"sort-arrow\"&gt;\n       &lt;i ng-show=\"searchObject.sort === 'followers:asc'\" class=\"fa fa-caret-down\"&gt;&lt;/i&gt;\n       &lt;i ng-show=\"searchObject.sort === 'followers:desc'\" class=\"fa fa-caret-up\"&gt;&lt;/i&gt;\n     &lt;/div&gt;\n    &lt;/a&gt;\n&lt;/div&gt;\n</code></pre>\n\n\n\n<p>Once it the sort hits desc again, it will not switch back to asc. The conditional is being triggered, and it console.logs the appropriate sort within search object, but the view isn't changed. </p>\n"}, {"tags": ["javascript", "jquery", "html", "ajax", "cors"], "comments": [{"owner": {"reputation": 304305, "user_id": 519413, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7839089cd91dc5cc5eb1e0cdbf3312ed?s=128&d=identicon&r=PG", "display_name": "Rory McCrossan", "link": "https://stackoverflow.com/users/519413/rory-mccrossan"}, "edited": false, "score": 2, "creation_date": 1479935284, "post_id": 40774064, "comment_id": 68772175, "body": "You&#39;re misunderstanding how CORS works. You don&#39;t put the header on the request - it needs to be on the <i>response</i>. You need to amend your server side code."}, {"owner": {"reputation": 4704, "user_id": 2325154, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8edaf24cd3712f7484ebf0edec77ca7c?s=128&d=identicon&r=PG", "display_name": "Nital", "link": "https://stackoverflow.com/users/2325154/nital"}, "reply_to_user": {"reputation": 304305, "user_id": 519413, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7839089cd91dc5cc5eb1e0cdbf3312ed?s=128&d=identicon&r=PG", "display_name": "Rory McCrossan", "link": "https://stackoverflow.com/users/519413/rory-mccrossan"}, "edited": false, "score": 0, "creation_date": 1479936205, "post_id": 40774064, "comment_id": 68772588, "body": "Thanks Rory, you were right. Updated this post with my answer below."}], "answers": [{"tags": [], "owner": {"reputation": 4704, "user_id": 2325154, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8edaf24cd3712f7484ebf0edec77ca7c?s=128&d=identicon&r=PG", "display_name": "Nital", "link": "https://stackoverflow.com/users/2325154/nital"}, "is_accepted": true, "score": 0, "last_activity_date": 1479936162, "creation_date": 1479936162, "answer_id": 40774358, "question_id": 40774064, "link": "https://stackoverflow.com/questions/40774064/how-to-set-cors-header-in-an-ajax-call-with-pure-javascript-that-is-hitting-othe/40774358#40774358", "title": "How to set CORS header in an AJAX call with pure JavaScript that is hitting other rest service?", "body": "<p>Based on the input provided by Rory, I removed the <code>xhr.setRequestHeader(\"Access-Control-Allow-Origin\", \"*\")</code> from the JS and added snippet <code>@CrossOrigin(origins = \"http://localhost:8084\")</code> in my controller and that solved the problem.</p>\n\n<pre><code>@CrossOrigin(origins = \"http://localhost:8084\")\n@RestController\npublic class PublicKeyLookupController {\n    //code removed for brevity\n}\n</code></pre>\n"}], "owner": {"reputation": 4704, "user_id": 2325154, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8edaf24cd3712f7484ebf0edec77ca7c?s=128&d=identicon&r=PG", "display_name": "Nital", "link": "https://stackoverflow.com/users/2325154/nital"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1121, "favorite_count": 0, "accepted_answer_id": 40774358, "answer_count": 1, "score": -3, "last_activity_date": 1479936162, "creation_date": 1479934767, "question_id": 40774064, "link": "https://stackoverflow.com/questions/40774064/how-to-set-cors-header-in-an-ajax-call-with-pure-javascript-that-is-hitting-othe", "title": "How to set CORS header in an AJAX call with pure JavaScript that is hitting other rest service?", "body": "<p>I am having following JS function that gets called on html page load. When the page loads I see following error in the Firefox console logs.</p>\n\n<p><strong>Firefox Console Log:</strong></p>\n\n<pre><code>\"NetworkError: 403 Forbidden - http://localhost:8080/publicKey/lookup/TRUUS2\"\nTRUUS2\nCross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:8080/publicKey/lookup/TRUUS2. (Reason: CORS header \u2018Access-Control-Allow-Origin\u2019 missing).\n</code></pre>\n\n<p><strong>publickey.js</strong></p>\n\n<pre><code>function loadPublicKey() {\n\n    var xmlhttp = createCORSRequest('GET', 'http://localhost:8080/publicKey/lookup/TRUUS2');\n    xmlhttp.send();\n\n    xmlhttp.onreadystatechange = function () {\n        if (this.readyState === 4 &amp;&amp; this.status === 200) {\n            alert(this.responseText);\n            document.getElementById(\"keyDiv\").innerHTML = this.responseText;\n        }\n    };\n}\n\n\nfunction createCORSRequest(method, url) {\n    var xhr = new XMLHttpRequest();\n    if (\"withCredentials\" in xhr) {\n        // Check if the XMLHttpRequest object has a \"withCredentials\" property.\n        // \"withCredentials\" only exists on XMLHTTPRequest2 objects.\n        xhr.open(method, url, true);\n    } else if (typeof XDomainRequest != \"undefined\") {\n        // Otherwise, check if XDomainRequest.\n        // XDomainRequest only exists in IE, and is IE's way of making CORS requests.\n        xhr = new XDomainRequest();\n        xhr.open(method, url);\n    } else {\n        // Otherwise, CORS is not supported by the browser.\n        xhr = null;\n    }\n    xhr.setRequestHeader(\"Access-Control-Allow-Origin\", \"*\");\n    return xhr;\n}\n</code></pre>\n\n<p>I have already added <code>xhr.setRequestHeader(\"Access-Control-Allow-Origin\", \"*\")</code> statement to fix the CORS issue but no luck. I am looking for pure JS implementation. </p>\n\n<p><strong>Note:</strong> I am able to hit the <a href=\"http://localhost:8080/publicKey/lookup/TRUUS2\" rel=\"nofollow noreferrer\">http://localhost:8080/publicKey/lookup/TRUUS2</a> URL successfully through Postman and getting the response as well. No issues there.</p>\n\n<p>Not sure what am I missing. Please guide.</p>\n"}, {"tags": ["javascript", "jquery", "accessibility", "owl-carousel", "owl-carousel-2"], "answers": [{"comments": [{"owner": {"reputation": 13364, "user_id": 660175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99d48d6e235e58953bef94c445f86a3a?s=128&d=identicon&r=PG", "display_name": "BrendanMcK", "link": "https://stackoverflow.com/users/660175/brendanmck"}, "edited": false, "score": 5, "creation_date": 1479960868, "post_id": 40774021, "comment_id": 68779444, "body": "Better still, just use BUTTON and style it as you want - BUTTONs are fully keyboard accessible right out of the box."}, {"owner": {"reputation": 11191, "user_id": 5862315, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/PviZk.png?s=128&g=1", "display_name": "Eran Shabi", "link": "https://stackoverflow.com/users/5862315/eran-shabi"}, "reply_to_user": {"reputation": 13364, "user_id": 660175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99d48d6e235e58953bef94c445f86a3a?s=128&d=identicon&r=PG", "display_name": "BrendanMcK", "link": "https://stackoverflow.com/users/660175/brendanmck"}, "edited": false, "score": 0, "creation_date": 1479979037, "post_id": 40774021, "comment_id": 68787326, "body": "@BrendanMcK Thank you for this better solution. Only downside is the style."}, {"owner": {"reputation": 7413, "user_id": 3352034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8ezCy.jpg?s=128&g=1", "display_name": "aardrian", "link": "https://stackoverflow.com/users/3352034/aardrian"}, "edited": false, "score": 2, "creation_date": 1480371531, "post_id": 40774021, "comment_id": 68925585, "body": "Definitely use a <code>&lt;button&gt;</code>, which supports both the <i>Enter</i> key and the <i>Space</i> key, so make sure to also listen for character 32. As for styling, a <code>&lt;button&gt;</code> can be styled just like any other element so that is never a reason not to use it."}], "tags": [], "owner": {"reputation": 11191, "user_id": 5862315, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/PviZk.png?s=128&g=1", "display_name": "Eran Shabi", "link": "https://stackoverflow.com/users/5862315/eran-shabi"}, "is_accepted": false, "score": 1, "last_activity_date": 1479935949, "last_edit_date": 1479935949, "creation_date": 1479934592, "answer_id": 40774021, "question_id": 40774020, "link": "https://stackoverflow.com/questions/40774020/how-to-make-owl-carousel-keyboard-accessible/40774021#40774021", "title": "How to make Owl Carousel keyboard accessible", "body": "<p>First, in order for a <code>div</code> to be accessible by keyboard, you need to add the <code>tabindex</code> attribute to it. For example:</p>\n\n<pre><code>    &lt;div class=\"carousel-arrow carousel-right-arrow\" tabindex=\"0\" &gt;\n</code></pre>\n\n<p>Then in your script, you can use jQuery to make pressing Enter on the div trigger the same event as a mouse click:</p>\n\n<pre><code>$('.carousel-arrow').keypress(function (e) {\n    if(e.which === 13)\n    {\n        this.click();\n        return false;\n    }\n});\n</code></pre>\n"}], "owner": {"reputation": 11191, "user_id": 5862315, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/PviZk.png?s=128&g=1", "display_name": "Eran Shabi", "link": "https://stackoverflow.com/users/5862315/eran-shabi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1865, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1479937011, "creation_date": 1479934592, "last_edit_date": 1479937011, "question_id": 40774020, "link": "https://stackoverflow.com/questions/40774020/how-to-make-owl-carousel-keyboard-accessible", "title": "How to make Owl Carousel keyboard accessible", "body": "<p>According to the <a href=\"https://www.w3.org/WAI/WCAG20/quickref/\" rel=\"nofollow noreferrer\">Web Content Accessibility Guidelines</a>, in order for a website to be considered accessible, you should be able to use a keyboard for all functionality of the content:</p>\n\n<blockquote>\n  <p>All functionality of the content is operable through a keyboard\n  interface</p>\n</blockquote>\n\n<p>I'm using Owl Carousel 2, and added arrows and linked them like so:</p>\n\n<pre><code>$('.carousel-left-arrow').click(function () {\n        owl.trigger('next.owl.carousel');\n    });\n</code></pre>\n\n<p>But those arrows are not accessible using the keyboard, only the mouse.\nHow can I make them accessible?</p>\n"}, {"tags": ["javascript", "html", "css", "dom"], "comments": [{"owner": {"reputation": 11096, "user_id": 541208, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2dfc2e563d2150994a6e06ef37f9e7be?s=128&d=identicon&r=PG", "display_name": "TankorSmash", "link": "https://stackoverflow.com/users/541208/tankorsmash"}, "edited": false, "score": 1, "creation_date": 1479934714, "post_id": 40774009, "comment_id": 68771927, "body": "Can you show us only the relevant code in the question here on SO? That way we don&#39;t have to worry about external sites being slow or down."}], "answers": [{"tags": [], "owner": {"reputation": 579, "user_id": 5593631, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6fd12224f5e48ad3011d820a87ff442b?s=128&d=identicon&r=PG&f=1", "display_name": "Luminous_Dev", "link": "https://stackoverflow.com/users/5593631/luminous-dev"}, "is_accepted": false, "score": 2, "last_activity_date": 1479934766, "creation_date": 1479934766, "answer_id": 40774062, "question_id": 40774009, "link": "https://stackoverflow.com/questions/40774009/html-to-dom-mouse-cursor-change-background-and-text-colors/40774062#40774062", "title": "HTML to DOM mouse cursor, change background and text colors", "body": "<p>You can add below CSS code</p>\n\n<pre><code>.lw:hover { background-color: red; color:  blue;}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 151, "user_id": 7196815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5beb508799805b3d518d3a5de856f94f?s=128&d=identicon&r=PG&f=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/7196815/bruno"}, "is_accepted": false, "score": 0, "last_activity_date": 1479934895, "creation_date": 1479934895, "answer_id": 40774094, "question_id": 40774009, "link": "https://stackoverflow.com/questions/40774009/html-to-dom-mouse-cursor-change-background-and-text-colors/40774094#40774094", "title": "HTML to DOM mouse cursor, change background and text colors", "body": "<p>You can do it in css using the :hover, example:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>.element1 {\r\npadding: 4px;\r\ndisplay: block;\r\nbackground: #000;\r\ncolor: #fff;\r\n}\r\n.element1:hover {\r\nbackground: #d1d1d1;\r\ncolor: #000;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div class=\"element1\"&gt;Mouse Over / Mouse Out&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 11, "user_id": 7202175, "user_type": "registered", "profile_image": "https://graph.facebook.com/1816204988652416/picture?type=large", "display_name": "Migl\u0117 Orlova", "link": "https://stackoverflow.com/users/7202175/migl%c4%97-orlova"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 1, "closed_date": 1480013309, "answer_count": 2, "score": -1, "last_activity_date": 1479934895, "creation_date": 1479934532, "question_id": 40774009, "link": "https://stackoverflow.com/questions/40774009/html-to-dom-mouse-cursor-change-background-and-text-colors", "closed_reason": "Not suitable for this site", "title": "HTML to DOM mouse cursor, change background and text colors", "body": "<p>Please help my task is: when you move the mouse cursor on the selected item, change the background and text colors </p>\n\n<p><a href=\"http://liveweave.com/rVjF5y\" rel=\"nofollow noreferrer\">http://liveweave.com/rVjF5y</a></p>\n"}, {"tags": ["javascript", "python", "html", "image", "templates"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1479934808, "post_id": 40774000, "comment_id": 68771974, "body": "So where is the code to serve the images?"}], "answers": [{"tags": [], "owner": {"reputation": 3092, "user_id": 5149381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/35fedff48400e0f43699c56164b605e0?s=128&d=identicon&r=PG&f=1", "display_name": "litel", "link": "https://stackoverflow.com/users/5149381/litel"}, "is_accepted": false, "score": 0, "last_activity_date": 1479936503, "creation_date": 1479936503, "answer_id": 40774439, "question_id": 40774000, "link": "https://stackoverflow.com/questions/40774000/404-error-when-rendering-template-with-image/40774439#40774439", "title": "404 error when rendering template with image", "body": "<p>There are a couple of options for dealing with this in Flask.</p>\n\n<p>Simplest option: you can move the <code>images</code> folder into your <code>static</code> directory and change the <code>src</code> attribute of your from <code>images/newyork1.jpg</code> tag to <code>url_for('static', filename='images/newyork1.jpg)</code>.</p>\n\n<p>Or you can define a route for your <code>images</code> directory in your <code>webapp.py</code> file with a <code>&lt;path:path&gt;</code> appended as catch-all. Then define a function with a <code>path</code> parameter that returns a call to <code>send_from_directory</code> with the arguments <code>images</code> and <code>path</code>. Make sure you import <code>send_from_directory</code> from Flask at the top of your file.</p>\n\n<pre><code>@app.route('/images/&lt;path:path&gt;')\ndef images(path):\n    return send_from_directory('images', path)\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 7074846, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d1e23512615f16b795be4c3d37d1aa7c?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan ", "link": "https://stackoverflow.com/users/7074846/dylan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 470, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1479940127, "creation_date": 1479934492, "last_edit_date": 1479940127, "question_id": 40774000, "link": "https://stackoverflow.com/questions/40774000/404-error-when-rendering-template-with-image", "title": "404 error when rendering template with image", "body": "<p>Folders are as follows:\n<strong>Project</strong></p>\n\n<p>static folder--index.html</p>\n\n<p>templates folder--newyork.html + image folder--newyork.jpg</p>\n\n<p>webapp.py</p>\n\n<p>When I run my code through commander everything works other than the images. For some reason the images wont display and it comes up with a 404 error in the Cmder prompt. Here is my template i'm using:</p>\n\n<pre><code>&lt;!doctype html&gt;\n&lt;title&gt;New York&lt;/title&gt;\n&lt;h1&gt;New York&lt;/h1&gt;       \n&lt;p&gt;\nNew York is a state in the northeastern United States, and is the 27th-most extensive, fourth-most populous, and seventh-most densely populated U.S. state. New York is bordered by New Jersey and Pennsylvania to the south and Connecticut, Massachusetts, and Vermont to the east. The state has a maritime border in the Atlantic Ocean with Rhode Island, east of Long Island, as well as an international border with the Canadian provinces of Quebec to the north and Ontario to the west and north. \n&lt;/p&gt;\n&lt;img src=\"images/newyork1.jpg\" alt=\"New York\" style=\"width:750px;height:350px;\"&gt;\n&lt;p&gt;\nThe state of New York, with an estimated 19.8 million residents in 2015, is often referred to as New York State to distinguish it from New York City, the state's most populous city and its economic hub.\n&lt;/p&gt;\n</code></pre>\n\n<p>Here is my index.html I'm using:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js\"&gt;&lt;/script&gt;\n&lt;script&gt;\n$(document).ready(function(){\n  $(\"#newyorkbutton\").click(function(){\n    $.get(\"/newyork\", function(data, status){\n      $(\"#city\").html(data);\n    });\n  });\n});\n&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h2&gt;Welcome to My Travels&lt;/h2&gt; \n&lt;input type=\"submit\" name=\"NewYork\" id=\"newyorkbutton\" value=\"New York\"&gt;\n&lt;h2&gt;Welcome to My Travels&lt;/h2&gt; \n&lt;div id = \"city\"&gt;\n&lt;p&gt;\nLorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum\n&lt;/p&gt;\n\n&lt;/div&gt;\n&lt;/body&gt; \n&lt;/html&gt;\n</code></pre>\n\n<p>And Finally my python code I'm running:</p>\n\n<pre><code>from flask import Flask, render_template, request\n\napp = Flask(__name__)  \n\n\n@app.route(\"/\")\ndef root():\n    return app.send_static_file('index.html')\n\n@app.route(\"/newyork\") \ndef newyork(): \n   return render_template('newyork.html')\n\nif __name__ == \"__main__\":     \n    app.run()\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "highcharts"], "comments": [{"owner": {"reputation": 11715, "user_id": 5419325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deed52c8a3e3f1d828166e1e19d291e5?s=128&d=identicon&r=PG&f=1", "display_name": "morganfree", "link": "https://stackoverflow.com/users/5419325/morganfree"}, "edited": false, "score": 0, "creation_date": 1479937933, "post_id": 40773996, "comment_id": 68773367, "body": "It is a bug which appeared yesterday in 5.0.4 version <a href=\"https://github.com/highcharts/highcharts/issues/6017\" rel=\"nofollow noreferrer\">github.com/highcharts/highcharts/issues/6017</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3962, "user_id": 3588312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b791363c864e23e00bc9e74a20fea35?s=128&d=identicon&r=PG&f=1", "display_name": "Vladimir M", "link": "https://stackoverflow.com/users/3588312/vladimir-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1479935187, "creation_date": 1479935187, "answer_id": 40774153, "question_id": 40773996, "link": "https://stackoverflow.com/questions/40773996/highcharts-drilldown-display-issue/40774153#40774153", "title": "Highcharts drilldown display issue", "body": "<p>Interesting behavior. Seems like a bug, cause their own examples are actually having the same issue. RC seems to be in animation. If you disable the animation for the drilldown, you will not see the residual series. </p>\n\n<pre><code>    drilldown: {\n       animation:false,\n       ...\n    }\n</code></pre>\n"}], "owner": {"reputation": 4237, "user_id": 2341188, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/dvlqv.jpg?s=128&g=1", "display_name": "Angad Dubey", "link": "https://stackoverflow.com/users/2341188/angad-dubey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 40774153, "answer_count": 1, "score": 0, "last_activity_date": 1479935187, "creation_date": 1479934487, "question_id": 40773996, "link": "https://stackoverflow.com/questions/40773996/highcharts-drilldown-display-issue", "title": "Highcharts drilldown display issue", "body": "<p><a href=\"http://jsfiddle.net/highcharts/s5JqN/\" rel=\"nofollow noreferrer\">Example drilldown fiddle</a>.</p>\n\n<p>When you drilldown, you will notice sometimes the chart does not clear previous bars.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Fz5yK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Fz5yK.png\" alt=\"enter image description here\"></a></p>\n\n<p>The drilldown data looks like this:</p>\n\n<pre><code>drilldown: {\n            activeDataLabelStyle: {\n                color: 'white',\n                textShadow: '0 0 2px black, 0 0 2px black'\n            },\n            series: [{\n                id: 'animals',\n                name: 'Animals',\n                data: [\n                    ['Cats', 4],\n                    ['Dogs', 2],\n                    ['Cows', 1],\n                    ['Sheep', 2],\n                    ['Pigs', 1]\n                ]\n            }, {\n                id: 'fruits',\n                name: 'Fruits',\n                data: [\n                    ['Apples', 4],\n                    ['Oranges', 2]\n                ]\n            }, {\n                id: 'cars',\n                name: 'Cars',\n                data: [\n                    ['Toyota', 4],\n                    ['Opel', 2],\n                    ['Volkswagen', 2]\n                ]\n            },{\n                id: 'animals2',\n                name: 'Animals2',\n                data: [\n                    ['Cats', 3],\n                    ['Dogs', 5],\n                    ['Cows', 6],\n                    ['Sheep', 2],\n                    ['Pigs', 2]\n                ]\n            }, {\n                id: 'fruits2',\n                name: 'Fruits2',\n                data: [\n                    ['Apples', 1],\n                    ['Oranges', 5]\n                ]\n            }, {\n                id: 'cars2',\n                name: 'Cars2',\n                data: [\n                    ['Toyota', 2],\n                    ['Opel', 3],\n                    ['Volkswagen', 2]\n                ]\n            }]\n        }\n</code></pre>\n"}, {"tags": ["javascript", "html"], "comments": [{"owner": {"reputation": 715, "user_id": 3574307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I9ifi.png?s=128&g=1", "display_name": "Scelesto", "link": "https://stackoverflow.com/users/3574307/scelesto"}, "edited": false, "score": 1, "creation_date": 1479934687, "post_id": 40773988, "comment_id": 68771917, "body": "The dom hasn&#39;t loaded yet. An easy fix would be to put all of that in window.onload, or use jquery&#39;s builtin function."}, {"owner": {"reputation": 56607, "user_id": 695364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUNjJ.jpg?s=128&g=1", "display_name": "Scott Marcus", "link": "https://stackoverflow.com/users/695364/scott-marcus"}, "edited": false, "score": 0, "creation_date": 1479934741, "post_id": 40773988, "comment_id": 68771937, "body": "Are you trying to track how many times a single user has clicked the button or how many times any use has clicked the button?  If it is the latter, you should add the <code>ping</code> attribute to your link element and supply the url of a server-side resource that will update the count and store in your database. You can&#39;t do that client-side."}, {"owner": {"reputation": 715, "user_id": 3574307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I9ifi.png?s=128&g=1", "display_name": "Scelesto", "link": "https://stackoverflow.com/users/3574307/scelesto"}, "edited": false, "score": 0, "creation_date": 1479934802, "post_id": 40773988, "comment_id": 68771970, "body": "Seriously, though, I&#39;m pretty sure it&#39;s a DOM loading issue."}, {"owner": {"reputation": 1, "user_id": 7202191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70db414e84fd90e9c3bf21c5580f3c8?s=128&d=identicon&r=PG&f=1", "display_name": "Maximilian Georgiev", "link": "https://stackoverflow.com/users/7202191/maximilian-georgiev"}, "edited": false, "score": 0, "creation_date": 1479934880, "post_id": 40773988, "comment_id": 68771995, "body": "What exactly should I put in a window.onload? The whole const I declared?"}, {"owner": {"reputation": 1, "user_id": 7202191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70db414e84fd90e9c3bf21c5580f3c8?s=128&d=identicon&r=PG&f=1", "display_name": "Maximilian Georgiev", "link": "https://stackoverflow.com/users/7202191/maximilian-georgiev"}, "edited": false, "score": 0, "creation_date": 1479935160, "post_id": 40773988, "comment_id": 68772120, "body": "Tried that, didn&#39;t solve it."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7202191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70db414e84fd90e9c3bf21c5580f3c8?s=128&d=identicon&r=PG&f=1", "display_name": "Maximilian Georgiev", "link": "https://stackoverflow.com/users/7202191/maximilian-georgiev"}, "edited": false, "score": 0, "creation_date": 1479935676, "post_id": 40774208, "comment_id": 68772363, "body": "Doesn&#39;t work either. I use Express.js."}], "tags": [], "owner": {"reputation": 11, "user_id": 7167685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b34Av.jpg?s=128&g=1", "display_name": "mohamed el amine DADDOU", "link": "https://stackoverflow.com/users/7167685/mohamed-el-amine-daddou"}, "is_accepted": false, "score": 1, "last_activity_date": 1479935427, "creation_date": 1479935427, "answer_id": 40774208, "question_id": 40773988, "link": "https://stackoverflow.com/questions/40773988/document-getelementbyid-onclick-doesnt-work-javascript/40774208#40774208", "title": "document.getElementById.onClick doesn&#39;t work (Javascript)", "body": "<p>I don't know which js library you used.</p>\n\n<p>but about handling the on click event in javascript is by using <code>addEventListener</code> function.</p>\n\n<pre><code>document.getElementById('download').addEventListener('click',downloadCount);\n</code></pre>\n\n<p>Can you specify more about what technologies you used.</p>\n"}, {"tags": [], "owner": {"reputation": 691, "user_id": 1167472, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UdKvb.jpg?s=128&g=1", "display_name": "NickHTTPS", "link": "https://stackoverflow.com/users/1167472/nickhttps"}, "is_accepted": false, "score": 0, "last_activity_date": 1479936240, "creation_date": 1479936240, "answer_id": 40774386, "question_id": 40773988, "link": "https://stackoverflow.com/questions/40773988/document-getelementbyid-onclick-doesnt-work-javascript/40774386#40774386", "title": "document.getElementById.onClick doesn&#39;t work (Javascript)", "body": "<p>My approach will be the following:</p>\n\n<p>1) Wrap your function call with:</p>\n\n<pre><code>// pure JavaScript equivalent to jQuery's $.ready()\n// doesn't work in older IEs\n\ndocument.addEventListener('DOMContentLoaded', function(){ \n    // your code goes here\n}, false);\n</code></pre>\n\n<p>For further support take a look here: <a href=\"http://youmightnotneedjquery.com/#ready\" rel=\"nofollow noreferrer\">http://youmightnotneedjquery.com/#ready</a></p>\n\n<p>2) Remove the inline handler and use <code>addEventListener</code></p>\n\n<pre><code>const article = require(\"mongoose/lib/model.js\");\nconst el      = document.getElementById('download');\n\nel.addEventListener('click', downloadCount);\n\nfunction downloadCount(e) {\n  e.preventDefault();\n  article.downloads += 1;\n  article.save();\n}\n</code></pre>\n\n<p><strong>All together:</strong></p>\n\n<pre><code>&lt;a id=\"download\" class=\"btn btn-default btn-sm\" href =\"/uploads/{{article.imgName}}\" download=\"{{article.imgName}}\"&gt;Download&lt;/a&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n  document.addEventListener('DOMContentLoaded', function(){ \n    const article = require(\"mongoose/lib/model.js\");\n    const el      = document.getElementById('download');\n\n    el.addEventListener('click', downloadCount);\n\n    function downloadCount(e) {\n      e.preventDefault();\n      article.downloads += 1;\n      article.save();\n    }\n  }, false);\n&lt;/script&gt;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7202191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70db414e84fd90e9c3bf21c5580f3c8?s=128&d=identicon&r=PG&f=1", "display_name": "Maximilian Georgiev", "link": "https://stackoverflow.com/users/7202191/maximilian-georgiev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 918, "favorite_count": 0, "closed_date": 1479938517, "answer_count": 2, "score": 0, "last_activity_date": 1479936554, "creation_date": 1479934448, "last_edit_date": 1479934566, "question_id": 40773988, "link": "https://stackoverflow.com/questions/40773988/document-getelementbyid-onclick-doesnt-work-javascript", "closed_reason": "Duplicate", "title": "document.getElementById.onClick doesn&#39;t work (Javascript)", "body": "<p>My problems is: I am trying to count all downloads. I do that by adding +1 to my database everytime the button is clicked and then I simply take the database value and display it. I've tried numerous ways but no matter what I do the downloads stay zero. I prefer raw javascript/html because I am not that advanced and I want to do it a way that I understand it.</p>\n\n<p>I've also tried pasting the script in the body and the head but without effect. </p>\n\n<pre><code>&lt;div style=\"padding: 10px\"&gt;\n    &lt;img src=\"http://localhost:3000/uploads/{{article.imgName}}\" width=\"100%\" style=\"margin-bottom: 15px\"&gt;\n    &lt;p&gt;\n        {{#each article.tags }}\n            &lt;a class=\"btn btn-default btn-xs\"\n               href=\"/tag/{{this}}\"&gt;{{this}}&lt;/a&gt;\n        {{/each}}\n    &lt;/p&gt;\n    &lt;small class=\"author\"&gt;\n        {{article.author.fullName}}\n    &lt;/small&gt;\n    &lt;footer&gt;\n        &lt;script type=\"text/javascript\"&gt;\n            var article = require(\"mongoose/lib/model.js\");\n            const downloadCount = function () {\n                article.downloads += 1;\n                article.save();\n            }\n            document.getElementById('download').onClick = downloadCount;\n        &lt;/script&gt;\n\n        &lt;p&gt;&lt;br&gt;Views: {{article.views}} &lt;/p&gt;\n        &lt;p&gt;Downloads: {{article.downloads}}&lt;/p&gt;\n        &lt;div class=\"pull-right\"&gt;\n            &lt;a class=\"btn btn-default btn-sm\" href=\"/\"&gt;&amp;laquo; Back&lt;/a&gt;\n            &lt;a id=\"download\" class=\"btn btn-default btn-sm\" href =\"/uploads/{{article.imgName}}\" download=\"{{article.imgName}}\" onClick=\"downloadCount()\"&gt;Download&lt;/a&gt;\n            {{#if isUserAuthorized}}\n                &lt;a class=\"btn btn-success btn-sm\"\n                   href=\"/article/edit/{{article.id}}\"&gt;Edit&lt;/a&gt;\n                &lt;a class=\"btn btn-danger btn-sm\"\n                   href=\"/article/delete/{{article.id}}\"&gt;Delete&lt;/a&gt;\n            {{/if}}\n        &lt;/div&gt;\n    &lt;/footer&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["javascript", "reactjs", "firebase", "ecmascript-6"], "answers": [{"comments": [{"owner": {"reputation": 5336, "user_id": 618099, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/A3bOH.png?s=128&g=1", "display_name": "Norfeldt", "link": "https://stackoverflow.com/users/618099/norfeldt"}, "edited": false, "score": 0, "creation_date": 1480621868, "post_id": 40774816, "comment_id": 69050584, "body": "This might be a newbie question, but why don&#39;t I have to do something with <code>context</code> in the arrow function? How does it automatically become equal to <code>this</code>?"}, {"owner": {"reputation": 4827, "user_id": 2054731, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/35ce9a8c755f680d319d6e7e1d1cde24?s=128&d=identicon&r=PG", "display_name": "ArneHugo", "link": "https://stackoverflow.com/users/2054731/arnehugo"}, "reply_to_user": {"reputation": 5336, "user_id": 618099, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/A3bOH.png?s=128&g=1", "display_name": "Norfeldt", "link": "https://stackoverflow.com/users/618099/norfeldt"}, "edited": false, "score": 0, "creation_date": 1480624688, "post_id": 40774816, "comment_id": 69052111, "body": "In your example, <code>pushing</code> is bound to the react component instance, so that inside <code>pushing</code> <code>this</code> refers to the component instance. In my example, instead of binding <code>pushing</code> to the react component instance (which you still <i>could</i> do* btw, but it would be a bit less logical) I pass a reference to the react component instance as first parameter. In both cases, the <code>context</code> property on the object passed to <code>base.fetch(...)</code> refers to the react component instance. ((*) If you want to bind the <code>this</code> of a function, it cannot be an arrow function like I have used.)"}], "tags": [], "owner": {"reputation": 4827, "user_id": 2054731, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/35ce9a8c755f680d319d6e7e1d1cde24?s=128&d=identicon&r=PG", "display_name": "ArneHugo", "link": "https://stackoverflow.com/users/2054731/arnehugo"}, "is_accepted": true, "score": 3, "last_activity_date": 1480343736, "last_edit_date": 1480343736, "creation_date": 1479938360, "answer_id": 40774816, "question_id": 40773978, "link": "https://stackoverflow.com/questions/40773978/reactjs-re-base-helper-filer-for-collection-method-calls/40774816#40774816", "title": "ReactJS: re-base helper filer for collection method calls", "body": "<p>You can move <code>pushing</code> as-is, all you need is to pass <code>context</code> to the function, since it wont have access to the component instance via <code>this</code>.</p>\n\n<pre><code>// fb-commands.js\nexport const pushing = (context) =&gt; {\n    const now = new Date().getTime();\n    let data = {};\n    data[now.toString(16)] = 'Hello World';\n\n    base.fetch('demo', {\n         context: context, \n         asArray: false\n    }).then( snapshot =&gt; {\n        data = {... snapshot, ...data};\n        base.post('demo', {data})\n       .then(() =&gt; console.log(\"pushed\"));\n    });\n};\n\n// components/ExampleComponent.js\nimport React, { Component } from 'react';\nimport base from '../fb-config';\nimport {pushing} from 'path/to/fb-commands';\n\nclass ExampleComponent extends Component {\n    render() {\n        return (\n            &lt;button onClick={() =&gt; pushing(this)}&gt;PUSH&lt;/button&gt;\n        );\n    }\n}\n\nexport default ExampleComponent;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9949, "user_id": 1333836, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Ls5lq.jpg?s=128&g=1", "display_name": "Kaloyan Kosev", "link": "https://stackoverflow.com/users/1333836/kaloyan-kosev"}, "is_accepted": false, "score": 1, "last_activity_date": 1480619877, "last_edit_date": 1495535411, "creation_date": 1480619877, "answer_id": 40918687, "question_id": 40773978, "link": "https://stackoverflow.com/questions/40773978/reactjs-re-base-helper-filer-for-collection-method-calls/40918687#40918687", "title": "ReactJS: re-base helper filer for collection method calls", "body": "<p>Based on my experience, I can think of 3 approaches (maybe there are more).</p>\n\n<h1>Approach #1: Via ES6 Import / Export (Simple)</h1>\n\n<p>ArneHugo describes it well in <a href=\"https://stackoverflow.com/a/40774816/1333836\">his answer</a>.</p>\n\n<p>Just <strong>export</strong> <code>pushing</code> function to a module and then <strong>import</strong> it and use it directly. Pass the <code>this</code> context or any other params needed.</p>\n\n<p>Sounds awesome to me if you want to share utility functions.</p>\n\n<hr>\n\n<h1>Approach #2: Via Mixins.</h1>\n\n<p>That's not a good practice.</p>\n\n<p>Plus, mixins are not supported when using React components written in ES6 syntax. Moreover, they will not have support for ES6 classes in React. The reason is that they are <a href=\"https://facebook.github.io/react/blog/2016/07/13/mixins-considered-harmful.html\" rel=\"nofollow noreferrer\">considered harmful</a>.</p>\n\n<p>So, mixins are on their way out.</p>\n\n<hr>\n\n<h1>Approach #3: Via Composition (Advanced)</h1>\n\n<p>That is the best option if you need to implement something more advanced then just re-using common methods. Let's say if you want:</p>\n\n<ul>\n<li>to reuse logic and bootstrap abstraction</li>\n<li>to render Highjacking</li>\n<li>to do State abstraction and manipulation</li>\n<li>to do Props manipulation</li>\n</ul>\n\n<p>Then, enter Composition and <strong>Higher-Order Components</strong>!</p>\n\n<p>A higher-order component is just a function that takes an existing component and returns another component that wraps it.</p>\n\n<p>You can use this approach to wrap the component and not only share common code / logic, but share data, manipulate state, props and etc.</p>\n\n<p>More on this topic you can read on the <a href=\"https://medium.com/@franleplant/react-higher-order-components-in-depth-cf9032ee6c3e#.ut7fa8pxw\" rel=\"nofollow noreferrer\">franleplant's great post here</a>.</p>\n\n<hr>\n\n<h1>Conclusion</h1>\n\n<ul>\n<li>If you need just a helper method abstraction - use Approach #1.</li>\n<li>Never use Approach #2.</li>\n<li>If you want something more then that - consider applying Approach #3.</li>\n</ul>\n"}], "owner": {"reputation": 5336, "user_id": 618099, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/A3bOH.png?s=128&g=1", "display_name": "Norfeldt", "link": "https://stackoverflow.com/users/618099/norfeldt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 1, "accepted_answer_id": 40774816, "answer_count": 2, "score": 3, "last_activity_date": 1480619877, "creation_date": 1479934420, "question_id": 40773978, "link": "https://stackoverflow.com/questions/40773978/reactjs-re-base-helper-filer-for-collection-method-calls", "title": "ReactJS: re-base helper filer for collection method calls", "body": "<p>I have struggled a lot trying to figure out how to combine <code>ReactJS</code> and <code>firebase</code> (3).</p>\n\n<p>Luckily I found the awesome re-base repo, which is awesome and exactly what I want.</p>\n\n<blockquote>\n  <p>fb-config.js</p>\n</blockquote>\n\n<pre><code>var Rebase = require('re-base');\nvar base = Rebase.createClass({\n      apiKey: \"apiKey\",\n      authDomain: \"projectId.firebaseapp.com\",\n      databaseURL: \"https://databaseName.firebaseio.com\",\n      storageBucket: \"bucket.appspot.com\",\n      messagingSenderId: \"xxxxxxxxxxxxxx\"\n});\nexport default base;\n</code></pre>\n\n<blockquote>\n  <p>app.js</p>\n</blockquote>\n\n<pre><code>import React, { Component } from 'react';\nimport base from 'fb-config';\nimport ExampleComponent from './components/ExampleComponent';\n\nclass App extends Component {\nconstructor() {\n  super();\n    // getInitialState\n    this.state = {\n      DB: {}\n    };\n}\n\ncomponentDidMount() {\n  this.ref = base.syncState('demo',\n  { context: this,\n    state: 'DB' }\n  );\n}\n\ncomponentWillUnmount() {\n  base.removeBinding(this.ref);\n}\n\nrender() {\n  return (\n    &lt;ExampleComponent /&gt;\n  )\n}\n\n}\n\nexport default App\n</code></pre>\n\n<blockquote>\n  <p>components/ExampleComponent.js</p>\n</blockquote>\n\n<pre><code>import React, { Component } from 'react';\nimport base from '../fb-config';\n\nclass ExampleComponent extends Component {\n  constructor(props, context){\n    super(props, context);\n\n    this.pushing = this.pushing.bind(this);\n  }\n\n  pushing() {\n    const now = new Date().getTime();\n    let data = {};\n    data[now.toString(16)] = 'Hello World';\n\n    base.fetch('demo', {\n      context: this, \n      asArray: false\n    }).then( snapshot =&gt; {\n      data = {... snapshot, ...data};\n      base.post('demo', {data})\n      .then( () = { console.log(\"pushed\") });\n\n    });\n  } \n\n  render() {\n    return (\n      &lt;button onClick={this.pushing}&gt;PUSH&lt;/button&gt;\n    )\n  }\n\n};\n\nexport default ExampleComponent;\n</code></pre>\n\n<p>This setup works. But I would like to move the pushing method to another file (like <code>fb-commands.js</code>). How would I do that?</p>\n"}, {"tags": ["javascript", "jquery", "python", "flask", "jinja2"], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 3450754, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/d7ecbea0afee1690e78c7d69877dbc18?s=128&d=identicon&r=PG&f=1", "display_name": "user3450754", "link": "https://stackoverflow.com/users/3450754/user3450754"}, "edited": false, "score": 0, "creation_date": 1479934664, "post_id": 40774026, "comment_id": 68771905, "body": "so like how can I just call lock(1) if the room1 is clicked , pleaseeeeee??"}, {"owner": {"reputation": 115, "user_id": 3450754, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/d7ecbea0afee1690e78c7d69877dbc18?s=128&d=identicon&r=PG&f=1", "display_name": "user3450754", "link": "https://stackoverflow.com/users/3450754/user3450754"}, "edited": false, "score": 0, "creation_date": 1479934757, "post_id": 40774026, "comment_id": 68771946, "body": "what do you mean ?? @Martin Pieters"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 115, "user_id": 3450754, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/d7ecbea0afee1690e78c7d69877dbc18?s=128&d=identicon&r=PG&f=1", "display_name": "user3450754", "link": "https://stackoverflow.com/users/3450754/user3450754"}, "edited": false, "score": 0, "creation_date": 1479934927, "post_id": 40774026, "comment_id": 68772016, "body": "@user3450754: I included documentation references; you could read up on  what <a href=\"https://en.wikipedia.org/wiki/Ajax_(programming)\" rel=\"nofollow noreferrer\">AJAX</a> is, for example."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 115, "user_id": 3450754, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/d7ecbea0afee1690e78c7d69877dbc18?s=128&d=identicon&r=PG&f=1", "display_name": "user3450754", "link": "https://stackoverflow.com/users/3450754/user3450754"}, "edited": false, "score": 0, "creation_date": 1479934953, "post_id": 40774026, "comment_id": 68772028, "body": "@user3450754: however, a full tutorial on how to execute an AJAX request is out of the scope of my answer."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 115, "user_id": 3450754, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/d7ecbea0afee1690e78c7d69877dbc18?s=128&d=identicon&r=PG&f=1", "display_name": "user3450754", "link": "https://stackoverflow.com/users/3450754/user3450754"}, "edited": false, "score": 0, "creation_date": 1479935081, "post_id": 40774026, "comment_id": 68772081, "body": "@user3450754: see this other question on the same subject: <a href=\"//stackoverflow.com/q/37346842\">Jinja2 : call function on click</a>"}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": false, "score": 0, "last_activity_date": 1479934676, "last_edit_date": 1479934676, "creation_date": 1479934604, "answer_id": 40774026, "question_id": 40773967, "link": "https://stackoverflow.com/questions/40773967/flask-passing-a-function-but-the-function-gets-rendered-everytime/40774026#40774026", "title": "Flask passing a function but the function gets rendered everytime", "body": "<p>Javascript code (JQuery or otherwise) runs in the browser, the <code>{{ lock(1) }}</code> expression is rendered <em>on the server</em>. Creating the template to send to the browser <em>has</em> to execute that function then and there, Javascript code in the template is not executed on the server and doesn't influence what <code>{{ lock(1) }}</code> outputs. </p>\n\n<p>Only <code>\"None\"</code>, the resulting output in the template, is seen by the JavaScript code.</p>\n\n<p>You'd have to create a new route in your Flask server that the jQuery code then calls via AJAX (using <a href=\"https://api.jquery.com/jquery.get/\" rel=\"nofollow noreferrer\"><code>jQuery.get()</code></a>, for example).</p>\n"}], "owner": {"reputation": 115, "user_id": 3450754, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/d7ecbea0afee1690e78c7d69877dbc18?s=128&d=identicon&r=PG&f=1", "display_name": "user3450754", "link": "https://stackoverflow.com/users/3450754/user3450754"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1479934702, "creation_date": 1479934402, "last_edit_date": 1479934702, "question_id": 40773967, "link": "https://stackoverflow.com/questions/40773967/flask-passing-a-function-but-the-function-gets-rendered-everytime", "title": "Flask passing a function but the function gets rendered everytime", "body": "<p>I have a flask function called lock(id) and unlock()</p>\n\n<pre><code>def lock(roomId):\n    RoomTDG.update(roomId,True)\n\ndef unlock(roomId):\n    RoomTDG.update(roomId, False)\n</code></pre>\n\n<p>I am calling it in my template </p>\n\n<p><code>{{ lock(1) }}</code></p>\n\n<p>However this piece of code gets always rendered regardless of it being in a jquery if statement or outside. How can I call it when it goes inside the if statement</p>\n\n<pre><code>$('#room1').click(function() {\n              \"{{ lock(1) }}\"\n              alert(\"hello\");\n          });\n</code></pre>\n"}, {"tags": ["javascript", "node.js", "jszip"], "answers": [{"tags": [], "owner": {"reputation": 17416, "user_id": 1282674, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/11c9d16270ce6dc317790db98545eb1a?s=128&d=identicon&r=PG", "display_name": "drinchev", "link": "https://stackoverflow.com/users/1282674/drinchev"}, "is_accepted": true, "score": 6, "last_activity_date": 1479934975, "creation_date": 1479934975, "answer_id": 40774117, "question_id": 40773965, "link": "https://stackoverflow.com/questions/40773965/editing-a-file-within-a-zipped-file-using-jszip/40774117#40774117", "title": "Editing a file within a zipped file using JSZip", "body": "<p>You can edit a file inside your zip with <code>.file</code> method.</p>\n\n<pre><code>zip.file(\"existing_filename\", \"new file content\");\n</code></pre>\n\n<p>This method is used for adding and updating file content.</p>\n\n<p>Just make sure the file already exist.</p>\n\n<p>You can read more about it in the <a href=\"https://stuk.github.io/jszip/documentation/api_jszip/file_data.html\" rel=\"noreferrer\">documentation</a>.</p>\n"}], "owner": {"reputation": 57, "user_id": 3897226, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/CQZAS.jpg?s=128&g=1", "display_name": "Dowling1dow", "link": "https://stackoverflow.com/users/3897226/dowling1dow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1209, "favorite_count": 1, "accepted_answer_id": 40774117, "answer_count": 1, "score": 3, "last_activity_date": 1479934975, "creation_date": 1479934392, "question_id": 40773965, "link": "https://stackoverflow.com/questions/40773965/editing-a-file-within-a-zipped-file-using-jszip", "title": "Editing a file within a zipped file using JSZip", "body": "<p>Using <a href=\"https://stuk.github.io/jszip/\" rel=\"nofollow noreferrer\">JSZip</a>, is there a way to edit a file within a zipped file?</p>\n\n<p>I've tried looking for solutions and going through the API but I can't seem to find a solution.</p>\n\n<p>Any help with this would be great! Thanks in advance!</p>\n"}, {"tags": ["javascript", "angular", "routing"], "answers": [{"tags": [], "owner": {"reputation": 8318, "user_id": 2218253, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/fyeY9.png?s=128&g=1", "display_name": "wuno", "link": "https://stackoverflow.com/users/2218253/wuno"}, "is_accepted": false, "score": 1, "last_activity_date": 1479945559, "creation_date": 1479945559, "answer_id": 40776113, "question_id": 40773964, "link": "https://stackoverflow.com/questions/40773964/routing-submenu-elements-angular-2/40776113#40776113", "title": "Routing submenu elements Angular 2", "body": "<p>I like to split my routes off into layouts. So typically I do a secure layout and a public layout. This way I can control the authentication of the website and protect data that was meant to be secure. </p>\n\n<p>In order to do this I keep a file structure as shown below,</p>\n\n<pre><code>/app.module.ts\n/app.routing.ts\n\n/layouts/secure.component.ts\n/layouts/secure.component.html\n/layouts/public.component.ts\n/layouts/public.component.html\n\n/secure/profile.component.ts\n/secure/profile.component.html\n/secure/secure.routes.ts\n\n/public/home.component.ts\n/public/home.component.html\n/public/public.routes.ts\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>Initially we need to register all of our components and setup the routes. </p>\n\n<p><strong>Register Components</strong></p>\n\n<p><strong>/app.module.ts</strong></p>\n\n<pre><code>//Layouts\nimport { PublicComponent }                  from './layouts/public.component';\nimport { SecureComponent }                  from './layouts/secure.component';\nimport { HomeComponent }                    from './public/home.component';\nimport { ProfileComponent }                 from './secure/profile.component';\n\n\n@NgModule({\n    declarations: [\n        AppComponent,\n        PublicComponent,\n        SecureComponent,\n        HomeComponent,\n        ProfileComponent\n], \nproviders: [ \n    Guard,\n    Auth\n    ]\n</code></pre>\n\n<p>Take special notice to the Auth under providers. This is what will help us secure the secure layout.</p>\n\n<p>Next we will setup the routes.</p>\n\n<p><strong>app.routing.ts</strong></p>\n\n<pre><code>const APP_ROUTES: Routes = [\n    { path: '', redirectTo: '/home', pathMatch: 'full', },\n    { path: '', component: PublicComponent, data: { title: 'Public Views' }, children: PUBLIC_ROUTES },\n    { path: '', component: SecureComponent, canActivate: [Guard], data: { title: 'Secure Views' }, children: SECURE_ROUTES }\n];\n</code></pre>\n\n<p>As you can see the [Guard] is setup using the Auth provider and is a service I use to secure the secure layouts. Now that each of these routes actually have children routes we can set those routes up to control the actual navigation of our app. </p>\n\n<p>It is important to understand. These routes will direct traffic to the correct layout. Then depending on the route the child routes take over. Which in your case would be your sub components. </p>\n\n<p><strong>/secure/secure.routes.ts</strong></p>\n\n<pre><code>import { ProfileComponent }                   from './profile.component';\n\nexport const SECURE_ROUTES: Routes = [\n    { path: '', redirectTo: 'profile', pathMatch: 'full' },\n    { path: 'profile', component: ProfileComponent },\n];\n</code></pre>\n\n<p>Remember to import your component to the routes file so it knows which class to call when the route is enabled.</p>\n\n<p>For extra credit I will go ahead and throw in a service to provide auth. This will show you how to protect your routes.</p>\n\n<p><strong>guard.service.ts</strong></p>\n\n<pre><code>import { Injectable }                      from '@angular/core';\nimport { CanActivate, Router, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\nimport { Auth }                 from './auth.service';\nimport { Observable } from 'rxjs/Observable';\n\n@Injectable()\nexport class Guard implements CanActivate {\n\n    constructor(protected router: Router, protected auth: Auth ) {}\n\n     canActivate() {\n        if (localStorage.getItem('access_token')) {\n            // logged in so return true\n            return true;\n        }\n        // not logged in so redirect to login page\n        this.router.navigate(['/home']);\n        return false;\n    }\n}\n</code></pre>\n\n<p>By storing a token in the <code>local storage</code> we can check to see if it exist and authenticate the user. Once they meet the criteria they gain access to the secure routes.</p>\n\n<p>Let me know if you have anymore questions. </p>\n"}], "owner": {"reputation": 61, "user_id": 7186470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98f6417fd4780943c6d820dab6f43a7c?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/7186470/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 987, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1480090661, "creation_date": 1479934391, "last_edit_date": 1480090661, "question_id": 40773964, "link": "https://stackoverflow.com/questions/40773964/routing-submenu-elements-angular-2", "title": "Routing submenu elements Angular 2", "body": "<p>I have a question regarding routing submenu elements in Angular 2. </p>\n\n<p>The directory of my project looks like:</p>\n\n<pre><code>-app  \n---login  \n---registration  \n---mainApp  (this is the main body of the app, with a static content as menu, with few links)\n-----subMenu1  (link to some content)\n-------(some files here)  \n-----subMenu2   (link to some content)\n-------(some files here)  \n-----subMenu3   (link to some content)\n-------(some files here)  \n---app.component.ts  \n---app.component.html  \n---app.module.ts  \n---app.routing  \n---index.ts\n</code></pre>\n\n<p>How does it works? First view is the <code>login</code> and there you have two possibilities, to enter the <code>mainApp</code> or enter <code>registration</code> form. It works fine. But now I need to handle the routing between the <code>mainApp</code> and sub items from this mainApp. The <code>mainApp</code> content is just a sidemenu, which doesn't disappear. It is always on screen, only content from sidemenu elements is changing. </p>\n\n<p><strong>What is my problem:</strong></p>\n\n<p>Do I need to provide another routing file to handle the routing between the <code>mainApp</code> static menu elements and the dynamic content? Or am I able to do it just from this file which handles routing between the <code>app</code> and <code>login</code>, <code>registration</code> and <code>mainApp</code>?</p>\n\n<p><strong>And if I have to make another routing file, how would it look like?</strong></p>\n\n<p>My actual routing file looks like:</p>\n\n<pre><code>import { Routes, RouterModule } from '@angular/router';\nimport { MainAppComponent} from './mainApp/index';\nimport { LoginComponent } from './login/index';\nimport { RegistrationComponent } from './registration/index';\n\nconst appRoutes: Routes = [\n  { path: '', component: LoginComponent },\n  { path: 'mainApp', component: MainAppComponent },\n  { path: 'registration', component: RegistrationComponent },\n\n  { path: '**', redirectTo: '' }\n];\n\nexport const routing = RouterModule.forRoot(appRoutes);\n</code></pre>\n\n<p><strong>Let's say that I provide another routing file, would it look like this?</strong></p>\n\n<pre><code>import { Routes, RouterModule } from '@angular/router';\nimport { subMenu1Component } from './subMenu1/index';\nimport { subMenu2Component } from './subMenu2/index';\nimport { subMenu3Component } from './subMenu3/index';\n\nconst appRoutes: Routes = [\n  { path: '', component: mainAppComponent},\n  { path: 'subMenu1', component: subMenu1Component },\n  { path: 'subMenu2', component: subMenu2Component },\n  { path: 'subMenu3', component: subMenu3Component },\n\n  { path: '**', redirectTo: '' }\n];\n\nexport const routing = RouterModule.forRoot(appRoutes);\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "ajax"], "answers": [{"tags": [], "owner": {"reputation": 6959, "user_id": 2059819, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/UhKVs.jpg?s=128&g=1", "display_name": "Siavash", "link": "https://stackoverflow.com/users/2059819/siavash"}, "is_accepted": false, "score": 0, "last_activity_date": 1479935490, "creation_date": 1479935490, "answer_id": 40774214, "question_id": 40773932, "link": "https://stackoverflow.com/questions/40773932/why-is-python-requests-getting-different-results-than-ajax/40774214#40774214", "title": "Why is python requests getting different results than Ajax", "body": "<p>Got it!</p>\n\n<p>Ajax sends a header value by default:</p>\n\n<p>{'X-Requested-With': 'XMLHttpRequest'}</p>\n\n<p>I added that in and viola </p>\n\n<pre><code>headers = {'X-Requested-With': 'XMLHttpRequest'}\n    r = s.get(\"https://website.com/messages?mailbox=inbox\",headers=headers)\n</code></pre>\n"}], "owner": {"reputation": 6959, "user_id": 2059819, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/UhKVs.jpg?s=128&g=1", "display_name": "Siavash", "link": "https://stackoverflow.com/users/2059819/siavash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1479935490, "creation_date": 1479934223, "last_edit_date": 1479934847, "question_id": 40773932, "link": "https://stackoverflow.com/questions/40773932/why-is-python-requests-getting-different-results-than-ajax", "title": "Why is python requests getting different results than Ajax", "body": "<p>I am trying to write a Python script that logs into website for me and downloads my messages. I'm using the the \"requests\" library and succesfully able to log in with a session</p>\n\n<p>The website uses js/Ajax to download the actual messages client side after the messages page has been loaded, and uses pagination to achive an infinite list of messages effect.</p>\n\n<p>The messages page url is in the form of <code>https://website.com/messages</code>. and that page contains an Ajax call that retrives the messsages like this:</p>\n\n<pre><code>    $.ajax({\n        url: '/messages?mailbox=' + mailbox + optional params\n    }).done(function(data) {\n        urlLazyLoading = data.next_page_url;\n        $.each(data, function(i, v) {\n             //from this point on, data for each message can be \n             //accessed using the v object as such: \n             //v.sender, v.date, v.last_message, etc\n             //and the &lt;ul&gt; element is populated with '&lt;li&gt;'s\n</code></pre>\n\n<p>But when I try to access the same url in python (after I've loggedin) as such: </p>\n\n<pre><code>session.get('https://website.com/messages?mailbox=inbox') \n</code></pre>\n\n<p>instead of getting a json response with the messages data, I get the same/original messages page.</p>\n\n<p>the only parameter passed to ajax in the code above is <code>url</code>, so by defult it should be just making a simple GET request, which is what I'm doing.</p>\n\n<p>Is it possible that maybe somewhere else in the code ajax is being set up to default to POST or have some other non-default settings?</p>\n\n<p>or is the server somehow detecting that one request is coming from ajax and the other from sessions? maybe using <code>user-agent</code>?</p>\n"}, {"tags": ["javascript", "jquery", "json"], "comments": [{"owner": {"reputation": 28376, "user_id": 5743988, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IeSSM.jpg?s=128&g=1", "display_name": "4castle", "link": "https://stackoverflow.com/users/5743988/4castle"}, "edited": false, "score": 1, "creation_date": 1479934634, "post_id": 40773922, "comment_id": 68771886, "body": "When you set <code>dataType: &quot;json&quot;</code> it automatically parses the response as JSON. There&#39;s no need to do it manually."}, {"owner": {"reputation": 12701, "user_id": 758836, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/58f86c627aaaffa73935dd28da619e33?s=128&d=identicon&r=PG", "display_name": "loretoparisi", "link": "https://stackoverflow.com/users/758836/loretoparisi"}, "edited": false, "score": 0, "creation_date": 1479937917, "post_id": 40773922, "comment_id": 68773359, "body": "You do <code>echo json_encode($response_array);</code> but are you sure you are doing before that a <code>header(&#39;Content-Type:application&#47;json&#39;)</code>?"}, {"owner": {"reputation": 3529, "user_id": 5160493, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-BtFs62DS4_g/AAAAAAAAAAI/AAAAAAAAAJU/8cdpbQg_wzE/photo.jpg?sz=128", "display_name": "Ali Zia", "link": "https://stackoverflow.com/users/5160493/ali-zia"}, "edited": false, "score": 0, "creation_date": 1479937979, "post_id": 40773922, "comment_id": 68773391, "body": "Yes in my server.php, right below CORS, I am. 3rd line"}], "answers": [{"comments": [{"owner": {"reputation": 3529, "user_id": 5160493, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-BtFs62DS4_g/AAAAAAAAAAI/AAAAAAAAAJU/8cdpbQg_wzE/photo.jpg?sz=128", "display_name": "Ali Zia", "link": "https://stackoverflow.com/users/5160493/ali-zia"}, "edited": false, "score": 0, "creation_date": 1479934499, "post_id": 40773975, "comment_id": 68771821, "body": "i would have to write this inside my success?"}, {"owner": {"reputation": 3529, "user_id": 5160493, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-BtFs62DS4_g/AAAAAAAAAAI/AAAAAAAAAJU/8cdpbQg_wzE/photo.jpg?sz=128", "display_name": "Ali Zia", "link": "https://stackoverflow.com/users/5160493/ali-zia"}, "edited": false, "score": 0, "creation_date": 1479934786, "post_id": 40773975, "comment_id": 68771963, "body": "I have included html inside my message. Can that be the reason?"}, {"owner": {"reputation": 3529, "user_id": 5160493, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-BtFs62DS4_g/AAAAAAAAAAI/AAAAAAAAAJU/8cdpbQg_wzE/photo.jpg?sz=128", "display_name": "Ali Zia", "link": "https://stackoverflow.com/users/5160493/ali-zia"}, "edited": false, "score": 0, "creation_date": 1479935947, "post_id": 40773975, "comment_id": 68772483, "body": "This is also my other question and it has the complete details. <a href=\"http://stackoverflow.com/questions/40759241/getting-parseerror-for-ajax-call-via-structural-functions\" title=\"getting parseerror for ajax call via structural functions\">stackoverflow.com/questions/40759241/&hellip;</a>"}], "tags": [], "owner": {"reputation": 22927, "user_id": 468592, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/24c893062f94d0e60db020e9e3163a2c?s=128&d=identicon&r=PG", "display_name": "Jeremy Harris", "link": "https://stackoverflow.com/users/468592/jeremy-harris"}, "is_accepted": false, "score": 0, "last_activity_date": 1479934733, "last_edit_date": 1495542621, "creation_date": 1479934415, "answer_id": 40773975, "question_id": 40773922, "link": "https://stackoverflow.com/questions/40773922/how-can-i-check-if-my-response-is-a-string-or-json-object/40773975#40773975", "title": "How can I check if my response is a string or JSON Object?", "body": "<p>You can use fairly simple javascript to do that:</p>\n\n<pre><code>if (typeof(data) == 'string') {\n    data = JSON.parse(data);\n}\n</code></pre>\n\n<p>If you are curious as to <em>why</em> it might not automatically parse your JSON, here are a couple common reasons:</p>\n\n<ul>\n<li>Invalid JSON (check with jsonlint.com)</li>\n<li>Not getting an <code>application/json</code> content type when expecting JSON (as set in the dataType parameter.</li>\n</ul>\n\n<p>See also: <a href=\"https://stackoverflow.com/questions/249692/jquery-wont-parse-my-json-from-ajax-query\">jQuery won&#39;t parse my JSON from AJAX query</a></p>\n"}, {"comments": [{"owner": {"reputation": 663, "user_id": 7105559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3007d882cf2470a445998aa88ecad93e?s=128&d=identicon&r=PG&f=1", "display_name": "borbesaur", "link": "https://stackoverflow.com/users/7105559/borbesaur"}, "reply_to_user": {"reputation": 3529, "user_id": 5160493, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-BtFs62DS4_g/AAAAAAAAAAI/AAAAAAAAAJU/8cdpbQg_wzE/photo.jpg?sz=128", "display_name": "Ali Zia", "link": "https://stackoverflow.com/users/5160493/ali-zia"}, "edited": false, "score": 0, "creation_date": 1479935114, "post_id": 40773990, "comment_id": 68772099, "body": "In your success function.  You called it <code>data</code> rather than <code>response</code>"}], "tags": [], "owner": {"reputation": 663, "user_id": 7105559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3007d882cf2470a445998aa88ecad93e?s=128&d=identicon&r=PG&f=1", "display_name": "borbesaur", "link": "https://stackoverflow.com/users/7105559/borbesaur"}, "is_accepted": false, "score": 0, "last_activity_date": 1479934459, "creation_date": 1479934459, "answer_id": 40773990, "question_id": 40773922, "link": "https://stackoverflow.com/questions/40773922/how-can-i-check-if-my-response-is-a-string-or-json-object/40773990#40773990", "title": "How can I check if my response is a string or JSON Object?", "body": "<p>\"Can I place any check to JSON.parse if and only if my response is string?\"\nYes, you can.  </p>\n\n<pre><code>if (typeof (response) != 'object'){\nresponse = JSON.parse(response);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2579, "user_id": 4038842, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/WwAXx.jpg?s=128&g=1", "display_name": "kjonsson", "link": "https://stackoverflow.com/users/4038842/kjonsson"}, "is_accepted": true, "score": 2, "last_activity_date": 1479938047, "last_edit_date": 1479938047, "creation_date": 1479934501, "answer_id": 40774001, "question_id": 40773922, "link": "https://stackoverflow.com/questions/40773922/how-can-i-check-if-my-response-is-a-string-or-json-object/40774001#40774001", "title": "How can I check if my response is a string or JSON Object?", "body": "<p>Add this in your success handler.</p>\n\n<pre><code>data = typeof data === 'string' ? data : JSON.parse(data);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3529, "user_id": 5160493, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-BtFs62DS4_g/AAAAAAAAAAI/AAAAAAAAAJU/8cdpbQg_wzE/photo.jpg?sz=128", "display_name": "Ali Zia", "link": "https://stackoverflow.com/users/5160493/ali-zia"}, "edited": false, "score": 0, "creation_date": 1479934958, "post_id": 40774061, "comment_id": 68772031, "body": "I console.log(typeof(data)) and it is object. But it says parseerror. any ideas?"}, {"owner": {"reputation": 12701, "user_id": 758836, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/58f86c627aaaffa73935dd28da619e33?s=128&d=identicon&r=PG", "display_name": "loretoparisi", "link": "https://stackoverflow.com/users/758836/loretoparisi"}, "reply_to_user": {"reputation": 3529, "user_id": 5160493, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-BtFs62DS4_g/AAAAAAAAAAI/AAAAAAAAAJU/8cdpbQg_wzE/photo.jpg?sz=128", "display_name": "Ali Zia", "link": "https://stackoverflow.com/users/5160493/ali-zia"}, "edited": false, "score": 0, "creation_date": 1479935085, "post_id": 40774061, "comment_id": 68772083, "body": "This could be due to a bad json object. If you do <code>JSON.stringify(data)</code> what you get?"}, {"owner": {"reputation": 3529, "user_id": 5160493, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-BtFs62DS4_g/AAAAAAAAAAI/AAAAAAAAAJU/8cdpbQg_wzE/photo.jpg?sz=128", "display_name": "Ali Zia", "link": "https://stackoverflow.com/users/5160493/ali-zia"}, "edited": false, "score": 0, "creation_date": 1479935143, "post_id": 40774061, "comment_id": 68772108, "body": "{&quot;status&quot;:&quot;success&quot;,&quot;message&quot;:&quot;Your Order has Processed. Please Note this pin &lt;b style=\\&quot;background-color:green;\\&quot;&gt;KTDZoFxf&lt;/b&gt; and send it to the admin with payment details.&quot;}"}, {"owner": {"reputation": 12701, "user_id": 758836, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/58f86c627aaaffa73935dd28da619e33?s=128&d=identicon&r=PG", "display_name": "loretoparisi", "link": "https://stackoverflow.com/users/758836/loretoparisi"}, "reply_to_user": {"reputation": 3529, "user_id": 5160493, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-BtFs62DS4_g/AAAAAAAAAAI/AAAAAAAAAJU/8cdpbQg_wzE/photo.jpg?sz=128", "display_name": "Ali Zia", "link": "https://stackoverflow.com/users/5160493/ali-zia"}, "edited": false, "score": 0, "creation_date": 1479935248, "post_id": 40774061, "comment_id": 68772160, "body": "ok so this is a valid JSON object, so where you get this error i.e. which line? The counter proof is: <code>JSON.parse( JSON.stringify(data) )</code> you will get back your json object parsed."}, {"owner": {"reputation": 3529, "user_id": 5160493, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-BtFs62DS4_g/AAAAAAAAAAI/AAAAAAAAAJU/8cdpbQg_wzE/photo.jpg?sz=128", "display_name": "Ali Zia", "link": "https://stackoverflow.com/users/5160493/ali-zia"}, "edited": false, "score": 0, "creation_date": 1479935346, "post_id": 40774061, "comment_id": 68772202, "body": "For some reason I can&#39;t understand that"}, {"owner": {"reputation": 3529, "user_id": 5160493, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-BtFs62DS4_g/AAAAAAAAAAI/AAAAAAAAAJU/8cdpbQg_wzE/photo.jpg?sz=128", "display_name": "Ali Zia", "link": "https://stackoverflow.com/users/5160493/ali-zia"}, "edited": false, "score": 0, "creation_date": 1479935864, "post_id": 40774061, "comment_id": 68772441, "body": "Still not working :( Do you want to see my PHP Function?"}, {"owner": {"reputation": 12701, "user_id": 758836, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/58f86c627aaaffa73935dd28da619e33?s=128&d=identicon&r=PG", "display_name": "loretoparisi", "link": "https://stackoverflow.com/users/758836/loretoparisi"}, "reply_to_user": {"reputation": 3529, "user_id": 5160493, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-BtFs62DS4_g/AAAAAAAAAAI/AAAAAAAAAJU/8cdpbQg_wzE/photo.jpg?sz=128", "display_name": "Ali Zia", "link": "https://stackoverflow.com/users/5160493/ali-zia"}, "edited": false, "score": 0, "creation_date": 1479935996, "post_id": 40774061, "comment_id": 68772507, "body": "please update the code here with both the client and the server."}, {"owner": {"reputation": 3529, "user_id": 5160493, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-BtFs62DS4_g/AAAAAAAAAAI/AAAAAAAAAJU/8cdpbQg_wzE/photo.jpg?sz=128", "display_name": "Ali Zia", "link": "https://stackoverflow.com/users/5160493/ali-zia"}, "edited": false, "score": 0, "creation_date": 1479936149, "post_id": 40774061, "comment_id": 68772573, "body": "In both questions the functions are a bit different. Can you just see that question?"}, {"owner": {"reputation": 12701, "user_id": 758836, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/58f86c627aaaffa73935dd28da619e33?s=128&d=identicon&r=PG", "display_name": "loretoparisi", "link": "https://stackoverflow.com/users/758836/loretoparisi"}, "reply_to_user": {"reputation": 3529, "user_id": 5160493, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-BtFs62DS4_g/AAAAAAAAAAI/AAAAAAAAAJU/8cdpbQg_wzE/photo.jpg?sz=128", "display_name": "Ali Zia", "link": "https://stackoverflow.com/users/5160493/ali-zia"}, "edited": false, "score": 0, "creation_date": 1479936212, "post_id": 40774061, "comment_id": 68772592, "body": "Please check to have in your php server a <code>header(&#39;Content-Type: application&#47;json</code>)` as well."}, {"owner": {"reputation": 12701, "user_id": 758836, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/58f86c627aaaffa73935dd28da619e33?s=128&d=identicon&r=PG", "display_name": "loretoparisi", "link": "https://stackoverflow.com/users/758836/loretoparisi"}, "reply_to_user": {"reputation": 3529, "user_id": 5160493, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-BtFs62DS4_g/AAAAAAAAAAI/AAAAAAAAAJU/8cdpbQg_wzE/photo.jpg?sz=128", "display_name": "Ali Zia", "link": "https://stackoverflow.com/users/5160493/ali-zia"}, "edited": false, "score": 0, "creation_date": 1479936641, "post_id": 40774061, "comment_id": 68772787, "body": "@AliZia if you add a <code>console.error(error)</code> in the <code>error:</code> callback and a <code>console.log(data)</code> in the <code>success:</code> callback, before any other code, what do you get in the console?"}, {"owner": {"reputation": 12701, "user_id": 758836, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/58f86c627aaaffa73935dd28da619e33?s=128&d=identicon&r=PG", "display_name": "loretoparisi", "link": "https://stackoverflow.com/users/758836/loretoparisi"}, "reply_to_user": {"reputation": 3529, "user_id": 5160493, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-BtFs62DS4_g/AAAAAAAAAAI/AAAAAAAAAJU/8cdpbQg_wzE/photo.jpg?sz=128", "display_name": "Ali Zia", "link": "https://stackoverflow.com/users/5160493/ali-zia"}, "edited": false, "score": 0, "creation_date": 1479936909, "post_id": 40774061, "comment_id": 68772920, "body": "Ok so you have definitively an <code>error</code> response, now wait you have to change it a little bit! <code>console.log(a,b,c)</code> and get the output."}, {"owner": {"reputation": 3529, "user_id": 5160493, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-BtFs62DS4_g/AAAAAAAAAAI/AAAAAAAAAJU/8cdpbQg_wzE/photo.jpg?sz=128", "display_name": "Ali Zia", "link": "https://stackoverflow.com/users/5160493/ali-zia"}, "edited": false, "score": 0, "creation_date": 1479937386, "post_id": 40774061, "comment_id": 68773120, "body": "I have also added my php function if that would help."}, {"owner": {"reputation": 3529, "user_id": 5160493, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-BtFs62DS4_g/AAAAAAAAAAI/AAAAAAAAAJU/8cdpbQg_wzE/photo.jpg?sz=128", "display_name": "Ali Zia", "link": "https://stackoverflow.com/users/5160493/ali-zia"}, "edited": false, "score": 0, "creation_date": 1479938113, "post_id": 40774061, "comment_id": 68773451, "body": "I don&#39;t understand why this error is generating in just 2 3 functions and not in the rest. :("}], "tags": [], "owner": {"reputation": 12701, "user_id": 758836, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/58f86c627aaaffa73935dd28da619e33?s=128&d=identicon&r=PG", "display_name": "loretoparisi", "link": "https://stackoverflow.com/users/758836/loretoparisi"}, "is_accepted": false, "score": 0, "last_activity_date": 1479936151, "last_edit_date": 1479936151, "creation_date": 1479934766, "answer_id": 40774061, "question_id": 40773922, "link": "https://stackoverflow.com/questions/40773922/how-can-i-check-if-my-response-is-a-string-or-json-object/40774061#40774061", "title": "How can I check if my response is a string or JSON Object?", "body": "<p>Remove the <code>DATA_TYPE = 'json';</code> and try again:</p>\n\n<pre><code>function serverRequest(requestDATA, successCallback, errorCallback, hideIndicator, showAlert){\n    var METHOD = \"POST\";\n    var serverURL = 'http://istudy.com.pk/api/server.php'; //Path to Server.php\n    //var serverURL = 'http://localhost/istudy/server.php'; //Path to Server.php\n    var TIMEOUT = 20000;\n    console.log(requestDATA);\n    $$.ajax({\n        url: serverURL,\n        data: requestDATA,\n        type: METHOD,\n        timeout: TIMEOUT,\n        success: function(data){\n            try {\n               if(typeof(data)==='string') data=JSON.parse(data);\n            } catch(ex) { // bad json response\n               console.error(ex);\n            }\n            successCallback(data, hideIndicator, showAlert);\n        },\n        error: function(a, b, c){\n            errorCallback(a, b, c, hideIndicator, showAlert);\n        }\n    }); \n}\n</code></pre>\n\n<p>NOTE. This will not avoid the issue, but will let us to parse the response, while having a possibile bad response from the server i.e. a <code>Content-Type</code> that is not <code>application/json</code>. Some web server will accept both <code>Content-Type:text/plain</code> and <code>Content-Type:application/json;</code> headers, while returning in both cases a <code>json formatted string</code> rather than <code>json object</code> parsed by $.ajax (when finds the <code>application/json</code> as the <code>Content-Type</code> header value).</p>\n\n<p>To achieve that, be sure in your <code>php</code> code to print out the right header</p>\n\n<pre><code>&lt;?php\n\nheader('Content-Type: application/json`)\n</code></pre>\n"}], "owner": {"reputation": 3529, "user_id": 5160493, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-BtFs62DS4_g/AAAAAAAAAAI/AAAAAAAAAJU/8cdpbQg_wzE/photo.jpg?sz=128", "display_name": "Ali Zia", "link": "https://stackoverflow.com/users/5160493/ali-zia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6751, "favorite_count": 0, "accepted_answer_id": 40774001, "answer_count": 4, "score": 3, "last_activity_date": 1479938047, "creation_date": 1479934180, "last_edit_date": 1479937356, "question_id": 40773922, "link": "https://stackoverflow.com/questions/40773922/how-can-i-check-if-my-response-is-a-string-or-json-object", "title": "How can I check if my response is a string or JSON Object?", "body": "<p>I want my response to be in JSON Object. But in some functions it comes as string and I want to parse it. How can I achieve this? This is my function.</p>\n\n<pre><code>function serverRequest(requestDATA, successCallback, errorCallback, hideIndicator, showAlert){\n    var METHOD = \"POST\";\n    var serverURL = 'http://istudy.com.pk/api/server.php'; //Path to Server.php\n    //var serverURL = 'http://localhost/istudy/server.php'; //Path to Server.php\n    var DATA_TYPE = 'json';\n    var TIMEOUT = 20000;\n    console.log(requestDATA);\n    $$.ajax({\n        url: serverURL,\n        data: requestDATA,\n        dataType: DATA_TYPE,\n        type: METHOD,\n        timeout: TIMEOUT,\n        success: function(data){\n            successCallback(data, hideIndicator, showAlert);\n        },\n        error: function(a, b, c){\n            errorCallback(a, b, c, hideIndicator, showAlert);\n        }\n    }); \n}\n</code></pre>\n\n<p>And this is my responseText</p>\n\n<pre><code>responseText: \"{\"status\":\"success\",\"message\":\"Your Order has Processed. Please Note this pin &lt;b style=\\\"background-color:green;\\\"&gt;osIyKvAp&lt;\\/b&gt; and send it to the admin with payment details.\"}\"\n</code></pre>\n\n<p><strong>THIS IS MY PHP FUNCTION</strong></p>\n\n<pre><code>function confirm_order($id, $newarray, $cn) {\n    $today = date('y-m-d');\n    $expiry = date('Y-m-d', strtotime(\"+30 days\"));\n    $total_items = 0;\n    $total_price = 0;\n    foreach ($newarray as $key =&gt; $val) {\n        $total_items++;\n        foreach ($val as $doc) {\n            $total_price = $total_price + $doc-&gt;doc_price;\n        }\n    }\n\n    $pin = random_string('alnum', 8);\n\n    $sql = \"INSERT INTO orders (order_id, order_UserId, order_total_items, order_amount, date_created,order_status,order_pin)\n    VALUES ('', '\" . $id . \"', '\" . $total_items . \"', '\" . $total_price . \"', '\" . $today . \"','0','\" . $pin . \"')\";\n\n    if (mysqli_query($cn, $sql)) {\n        $order_id = mysqli_insert_id($cn);\n\n        foreach ($newarray as $key =&gt; $val) {\n            $total_docs = 0;\n            $total_items++;\n            $sep = '|';\n            $sub_price = 0;\n            $doc_list = '';\n            foreach ($val as $doc) {\n                $doc_list .= $doc-&gt;doc_id . $sep;\n                $sub_price = $sub_price + $doc-&gt;doc_price;\n                $total_docs++;\n                $sep = '|';\n            }\n\n            $sql = \"INSERT INTO cart_items (uc_id, uc_user_id, uc_course_id, uc_course_docs_id, uc_course_docs_num,uc_price,uc_order_num,uc_order_status,uc_dateBuy,uc_dateExpire)\n            VALUES ('', '\" . $id . \"', '\" . $key . \"', '\" . $doc_list . \"', '\" . $total_docs . \"','\" . $sub_price . \"','\" . $order_id . \"','0','\" . $today . \"','\" . $expiry . \"')\";\n\n            mysqli_query($cn, $sql);\n        }\n\n        $response_array['status'] = 'success';\n        $response_array['message'] = 'Your Order has Processed. Please Note this pin &lt;b style=\"background-color:green;\"&gt;' . $pin . '&lt;/b&gt; and send it to the admin with payment details.';\n    } else {\n        $response_array['status'] = 'error';\n        $response_array['message'] = 'An error occurred. Please try again later.';\n    }\n    echo json_encode($response_array);\n}\n</code></pre>\n\n<p>Can I place any check to JSON.parse if and only if my response is string?</p>\n"}, {"tags": ["javascript", "html"], "comments": [{"owner": {"reputation": 33, "user_id": 7055402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40818dab84c0e352fb55b306dcdceb2e?s=128&d=identicon&r=PG&f=1", "display_name": "Roc", "link": "https://stackoverflow.com/users/7055402/roc"}, "edited": false, "score": 0, "creation_date": 1479934202, "post_id": 40773919, "comment_id": 68771686, "body": "Before you write about it: the &lt;/script&gt; is present in the current code."}, {"owner": {"reputation": 10467, "user_id": 2045185, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/wO2Jd.jpg?s=128&g=1", "display_name": "sinisake", "link": "https://stackoverflow.com/users/2045185/sinisake"}, "edited": false, "score": 0, "creation_date": 1479935363, "post_id": 40773919, "comment_id": 68772207, "body": "It seems that you&#39;ve forgotten some curly braces...<a href=\"https://jsfiddle.net/ap88x7a8/\" rel=\"nofollow noreferrer\">jsfiddle.net/ap88x7a8</a>"}], "answers": [{"tags": [], "owner": {"reputation": 114, "user_id": 2127909, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8382dadc8f58fce77be5e2e95dd3ae26?s=128&d=identicon&r=PG&f=1", "display_name": "NMenam", "link": "https://stackoverflow.com/users/2127909/nmenam"}, "is_accepted": false, "score": 0, "last_activity_date": 1479934706, "creation_date": 1479934706, "answer_id": 40774048, "question_id": 40773919, "link": "https://stackoverflow.com/questions/40773919/javascript-not-loading-onclick-validate-form-before-loading-php-page/40774048#40774048", "title": "Javascript not loading onClick validate form before loading php page", "body": "<p>You have to use the <strong>preventDefault</strong> on the submit event or use a button instead a input, after that you have to use the onclick event on the button, not into the form that will validate if the inputs has been filled or not.</p>\n\n<p>After you validate the form you can use this for submit your form</p>\n\n<p><code>document.getElementById(\"myForm\").submit();</code></p>\n\n<p>That will send the form data to the action script.</p>\n\n<p>Ref: <a href=\"http://www.w3schools.com/jsref/event_preventdefault.asp\" rel=\"nofollow noreferrer\">preventDefault Documentation | W3CSchools</a></p>\n\n<p>Ref2: <a href=\"http://www.w3schools.com/jsref/met_form_submit.asp\" rel=\"nofollow noreferrer\">Form Submit method | W3CSchools</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5207928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ab1046fe341b1555667da44b3f2a6a9?s=128&d=identicon&r=PG", "display_name": "Catalinbm", "link": "https://stackoverflow.com/users/5207928/catalinbm"}, "is_accepted": false, "score": 0, "last_activity_date": 1479934876, "creation_date": 1479934876, "answer_id": 40774087, "question_id": 40773919, "link": "https://stackoverflow.com/questions/40773919/javascript-not-loading-onclick-validate-form-before-loading-php-page/40774087#40774087", "title": "Javascript not loading onClick validate form before loading php page", "body": "<p>try using </p>\n\n<pre><code>&lt;form&gt;..&lt;/form&gt;\ndocument.addEventListener('click', validateForm, false);\n&lt;script language = \"JavaScript\"&gt;\n   function validateForm() {\n     ..\n&lt;/script&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47, "user_id": 7197362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b65c0f5a95629a2a57201cbaf097d4c7?s=128&d=identicon&r=PG", "display_name": "ZeKalk", "link": "https://stackoverflow.com/users/7197362/zekalk"}, "is_accepted": true, "score": 0, "last_activity_date": 1479941439, "creation_date": 1479941439, "answer_id": 40775452, "question_id": 40773919, "link": "https://stackoverflow.com/questions/40773919/javascript-not-loading-onclick-validate-form-before-loading-php-page/40775452#40775452", "title": "Javascript not loading onClick validate form before loading php page", "body": "<p>So you want to make sure the fields are filled in before proceeding? You can use:</p>\n\n<pre><code>&lt;input required=\"\"&gt;\n</code></pre>\n\n<p>This way the user has to fill out the fields with <strong>required=\"\"</strong>, or their browser won't let them submit the form.</p>\n"}], "owner": {"reputation": 33, "user_id": 7055402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40818dab84c0e352fb55b306dcdceb2e?s=128&d=identicon&r=PG&f=1", "display_name": "Roc", "link": "https://stackoverflow.com/users/7055402/roc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 40775452, "answer_count": 3, "score": 0, "last_activity_date": 1479941439, "creation_date": 1479934158, "question_id": 40773919, "link": "https://stackoverflow.com/questions/40773919/javascript-not-loading-onclick-validate-form-before-loading-php-page", "title": "Javascript not loading onClick validate form before loading php page", "body": "<p>I'm writing a piece of HTML and JavaScript code and I need to check if inputs have been filled before clicking the button. However, when I leave them blank, it proceeds to the php page passing the variables empty.\nI have made some tests and I've concluded it does not load the onClick function at all.\nThis is the code (without all the CSS stuff):</p>\n\n<pre><code>      &lt;div class = \"register\"&gt;\n    &lt;form action = \"register.php\" method = \"post\" name = \"reg1\" id = \"register\" onClick = \"return validateForm();\"&gt;\n      &lt;input type = \"text\" class = \"reg\" id = \"name\" name = \"name\"/&gt;\n       &lt;div class = \"alert\" id = \"inserthere1\"&gt; &lt;/div&gt;\n      &lt;input type = \"text\" class = \"reg\" id = \"surname\" name = \"surname\"/&gt; &lt;div class = \"alert\" id = \"inserthere2\"&gt;&lt;/div&gt;\n      &lt;input type = \"text\" class = \"reg\" id = \"mail\" name = \"mail\" /&gt;&lt;div class = \"alert\" id = \"inserthere3\"&gt;&lt;/div&gt;\n      &lt;input type = \"submit\" value = \"Join!\" &gt;\n      &lt;/form&gt;\n    &lt;/div&gt;\n\n  &lt;script language = \"JavaScript\"&gt;\n    function validateForm() {\n      var n = document.getElementById(\"name\").value;\n      var c = document.getElementById(\"surname\").value;\n      var m = document.getElementById(\"mail\").value;\n      alert(\"Nome:\"+n+\"Cognome:\"+c+\"Mail:\"+m);\n      document.getElementById(\"inserthere1\").innerHTML = (n===null || n===\"\" ? '&lt;i&gt; This cannot be left empty. &lt;/i&gt;' : '');\n      document.getElementById(\"inserthere2\").innerHTML = (c===null || c===\"\" ? '&lt;i&gt; This cannot be left empty. &lt;/i&gt;' : '');\n      document.getElementById(\"inserthere3\").innerHTML = (m===null || m===\"\" ? '&lt;i&gt; This cannot be left empty. &lt;/i&gt;' : '');\n      if ( n===null || c===null || n===\"\" || c===\"\" || m===null || m===\"\" )\n        return false;\n        }\n      return true;\n      }\n</code></pre>\n\n<p></p>\n"}, {"tags": ["javascript", "html"], "comments": [{"owner": {"reputation": 6986, "user_id": 6814719, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c381acfd1d093c752561a97e909a8f74?s=128&d=identicon&r=PG&f=1", "display_name": "Geeky", "link": "https://stackoverflow.com/users/6814719/geeky"}, "edited": false, "score": 0, "creation_date": 1479934314, "post_id": 40773868, "comment_id": 68771739, "body": "Not Sure where your error is throwing but ,i can see window.onload=buildflags,just change it as window.onload=function(){buildflags();}"}, {"owner": {"reputation": 105033, "user_id": 5260024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XxSHe.jpg?s=128&g=1", "display_name": "Jonas Wilms", "link": "https://stackoverflow.com/users/5260024/jonas-wilms"}, "reply_to_user": {"reputation": 6986, "user_id": 6814719, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c381acfd1d093c752561a97e909a8f74?s=128&d=identicon&r=PG&f=1", "display_name": "Geeky", "link": "https://stackoverflow.com/users/6814719/geeky"}, "edited": false, "score": 1, "creation_date": 1479934951, "post_id": 40773868, "comment_id": 68772025, "body": "@geeky: and whys that wrong??"}, {"owner": {"reputation": 1339, "user_id": 1483390, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/6717d6e2652c55c45bac3b7cfba74dff?s=128&d=identicon&r=PG", "display_name": "Luis A. Florit", "link": "https://stackoverflow.com/users/1483390/luis-a-florit"}, "reply_to_user": {"reputation": 6986, "user_id": 6814719, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c381acfd1d093c752561a97e909a8f74?s=128&d=identicon&r=PG&f=1", "display_name": "Geeky", "link": "https://stackoverflow.com/users/6814719/geeky"}, "edited": false, "score": 0, "creation_date": 1479935280, "post_id": 40773868, "comment_id": 68772173, "body": "@Geeky: tried your suggestion, but got the same problem."}, {"owner": {"reputation": 6986, "user_id": 6814719, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c381acfd1d093c752561a97e909a8f74?s=128&d=identicon&r=PG&f=1", "display_name": "Geeky", "link": "https://stackoverflow.com/users/6814719/geeky"}, "edited": false, "score": 0, "creation_date": 1479936643, "post_id": 40773868, "comment_id": 68772789, "body": "Can you explain where exactly you have the issue...i tried to run the code ,i dont see any errors or any error message on console..If can you explain the scenario it would be great"}, {"owner": {"reputation": 1339, "user_id": 1483390, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/6717d6e2652c55c45bac3b7cfba74dff?s=128&d=identicon&r=PG", "display_name": "Luis A. Florit", "link": "https://stackoverflow.com/users/1483390/luis-a-florit"}, "reply_to_user": {"reputation": 6986, "user_id": 6814719, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c381acfd1d093c752561a97e909a8f74?s=128&d=identicon&r=PG&f=1", "display_name": "Geeky", "link": "https://stackoverflow.com/users/6814719/geeky"}, "edited": false, "score": 0, "creation_date": 1479944845, "post_id": 40773868, "comment_id": 68775683, "body": "@Geeky: I get no errors in Firefox and Chrome, both in Linux and Android. However, it does give errors in the default browser for Android (checked with USB debugging) and Dolphin, and the page does not work at all. I am sure this is a bug in both browsers, but I would like to rewrite my page for it to run under these browsers. In fact, the menu items call for the <code>loadthis</code> functions, and also do not work in these two browsers. Hope it is clearer now. I don&#39;t think there is something really wrong with my code, just want to overcome those browsers bugs."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6269864"}, "edited": false, "score": 0, "creation_date": 1479956769, "post_id": 40773868, "comment_id": 68778504, "body": "What if you try window.onload = loadthis.bind(loadthis, 88, frm)"}, {"owner": {"reputation": 1339, "user_id": 1483390, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/6717d6e2652c55c45bac3b7cfba74dff?s=128&d=identicon&r=PG", "display_name": "Luis A. Florit", "link": "https://stackoverflow.com/users/1483390/luis-a-florit"}, "edited": false, "score": 0, "creation_date": 1479956780, "post_id": 40773868, "comment_id": 68778507, "body": "I got the error in 2 lines, in the <code>endWith</code>, and when tried to <code>container.append(frame)</code> after the <code>frame.remove()</code> since the browsers wrongly set the <code>frame</code> variable as undefined after the <code>remove()</code>. I have no question related to JQuery, and I have no further questions since I found how to overcome the browsers problems."}, {"owner": {"reputation": 1339, "user_id": 1483390, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/6717d6e2652c55c45bac3b7cfba74dff?s=128&d=identicon&r=PG", "display_name": "Luis A. Florit", "link": "https://stackoverflow.com/users/1483390/luis-a-florit"}, "edited": false, "score": 0, "creation_date": 1479957234, "post_id": 40773868, "comment_id": 68778610, "body": "@K48: No, no luck."}, {"owner": {"reputation": 1339, "user_id": 1483390, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/6717d6e2652c55c45bac3b7cfba74dff?s=128&d=identicon&r=PG", "display_name": "Luis A. Florit", "link": "https://stackoverflow.com/users/1483390/luis-a-florit"}, "edited": false, "score": 0, "creation_date": 1479985852, "post_id": 40773868, "comment_id": 68792294, "body": "@torazaburo: I wrote 3 times what happened and how I fixed the problem, in particular, in one of the answers. I don&#39;t know how to explain the solution better to you, sorry. Here it is again:  &quot;Besides the lack of implementation of the <code>.endsWith()</code> function, the browsers sets as <code>undefined</code> the <code>frame</code> when I issued the <code>frame.remove()</code> command (I did this to prevent history on the iframe).&quot; I will implement a different approach to get rid of the frame history."}], "answers": [{"comments": [{"owner": {"reputation": 1339, "user_id": 1483390, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/6717d6e2652c55c45bac3b7cfba74dff?s=128&d=identicon&r=PG", "display_name": "Luis A. Florit", "link": "https://stackoverflow.com/users/1483390/luis-a-florit"}, "edited": false, "score": 0, "creation_date": 1479956357, "post_id": 40777345, "comment_id": 68778394, "body": "@torazaburo: Sorry, didn&#39;t understand. I didn&#39;t raise a question here. Removed the last sentence, if that was what you meant."}, {"owner": {"reputation": 1339, "user_id": 1483390, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/6717d6e2652c55c45bac3b7cfba74dff?s=128&d=identicon&r=PG", "display_name": "Luis A. Florit", "link": "https://stackoverflow.com/users/1483390/luis-a-florit"}, "edited": false, "score": 0, "creation_date": 1479956558, "post_id": 40777345, "comment_id": 68778445, "body": "@torazaburo: No, it is not a question, it is a claim."}, {"owner": {"reputation": 1339, "user_id": 1483390, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/6717d6e2652c55c45bac3b7cfba74dff?s=128&d=identicon&r=PG", "display_name": "Luis A. Florit", "link": "https://stackoverflow.com/users/1483390/luis-a-florit"}, "edited": false, "score": 0, "creation_date": 1479957340, "post_id": 40777345, "comment_id": 68778632, "body": "@torazaburo: I already find out where the problem was."}], "tags": [], "owner": {"reputation": 1339, "user_id": 1483390, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/6717d6e2652c55c45bac3b7cfba74dff?s=128&d=identicon&r=PG", "display_name": "Luis A. Florit", "link": "https://stackoverflow.com/users/1483390/luis-a-florit"}, "is_accepted": false, "score": 0, "last_activity_date": 1479956270, "last_edit_date": 1479956270, "creation_date": 1479955915, "answer_id": 40777345, "question_id": 40773868, "link": "https://stackoverflow.com/questions/40773868/function-inside-onload-function-undefined/40777345#40777345", "title": "Function inside onload function undefined?", "body": "<p>Besides the lack of implementation of the <code>.endsWith()</code> function, the browsers sets as <code>undefined</code> the <code>frame</code> when I issued the <code>frame.remove()</code> command (I did this to prevent history on the <code>iframe</code>).</p>\n"}], "owner": {"reputation": 1339, "user_id": 1483390, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/6717d6e2652c55c45bac3b7cfba74dff?s=128&d=identicon&r=PG", "display_name": "Luis A. Florit", "link": "https://stackoverflow.com/users/1483390/luis-a-florit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1089, "favorite_count": 0, "closed_date": 1480012647, "answer_count": 1, "score": 4, "last_activity_date": 1479956270, "creation_date": 1479933944, "last_edit_date": 1479956185, "question_id": 40773868, "link": "https://stackoverflow.com/questions/40773868/function-inside-onload-function-undefined", "closed_reason": "Not suitable for this site", "title": "Function inside onload function undefined?", "body": "<p>I have a web page with a javascript function inside the window.onload that is not being initialized (\"undefined is not a function\"), and I don't know why.</p>\n\n<p>My code is like this:</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n function loadthis(e,pg) {\n    ...\n }\n window.onload = function() {\n    loadthis(88,frm);\n }   \n&lt;/script&gt;\n</code></pre>\n\n<p>In virtually all browsers, this works fine, but in some (default Android browser and Dolphin) I get the following when <code>onload</code> tries to execute <code>loadthis(88,frm)</code>:</p>\n\n<pre><code>Uncaught TypeError: undefined is not a function\n</code></pre>\n\n<p>I tried defining a <code>myonload()</code> function and calling it from the <code>body</code> tag, with the same behavior.</p>\n\n<p>The page with the complete js code inside <a href=\"http://luis.impa.br\" rel=\"nofollow noreferrer\">is this</a>.</p>\n\n<p><strong>EDIT #1</strong> It seems there are several inconsistencies in the JS engine of the browsers. For example, this code:</p>\n\n<pre><code>console.log(\"  ############## 1 \");\nconsole.log(\"  ############## 2 \"+frame);\nconsole.log(\"  ############## 3 \"+frame.src);\nconsole.log(\"  ############## 4 \"+frame.src.endsWith(pg));\n</code></pre>\n\n<p>gives this output:</p>\n\n<pre><code>############## 1 \n############## 2 [object HTMLIFrameElement]\n############## 3 http://luis.impa.br/varios/framebackground.html\n**Uncaught TypeError: undefined is not a function**\n</code></pre>\n\n<p>No idea what this means. <code>frame.src</code> is defined. It seems the <code>.endsWith</code> simply does not work in these browsers.</p>\n\n<p><strong>EDIT2</strong>: For the record, this is the body of <code>loadthis</code>:</p>\n\n<pre><code>function loadthis(e,pg) { //{{{2\n clickbackground.trigger('click');\n jQuery(\"body\").trigger(\"click\");\n $('html').trigger('click');\n\n var evt = e || window.event;\n if (evt != 88 &amp;&amp; evt !== \"null\") evt.preventDefault();\n if (evt.button == 1) {\n   window.open(pg, '_blank');\n } else {\n   //if (frame &amp;&amp; frame.src &amp;&amp; frame.src.endsWith(pg)) return;\n   if (frame &amp;&amp; frame.src &amp;&amp; frame.src.match(pg) != null) return;\n   if (evt !== 88) spinner.style.display = \"block\";\n   if (frame &amp;&amp; frame.src) {\n    $.when($(frame).fadeOut(250)).promise().done(function() {\n      //Comment for Dolphin\n     frame.remove();\n     frame.src = pg;\n      //Comment for Dolphin\n     container.append(frame);\n     $(frame).fadeIn(600);\n     });\n   } else {\n    if (!frame) frame = document.getElementById(\"MainFrame\");\n    $(frame).fadeOut(0);\n    frame.src = pg;\n    $(frame).fadeIn(600);\n   }\n }\n}\n</code></pre>\n"}, {"tags": ["javascript", "angularjs", "q"], "comments": [{"owner": {"reputation": 78907, "user_id": 107660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0167bade38130f13a5fc468c10388d9d?s=128&d=identicon&r=PG", "display_name": "Duncan", "link": "https://stackoverflow.com/users/107660/duncan"}, "edited": false, "score": 0, "creation_date": 1479935558, "post_id": 40773855, "comment_id": 68772301, "body": "that is how promises work: angular won&#39;t wait for a promise to resolve, you will have to put code that requires the promise to have been resolved inside a <code>.then()</code> callback. Make methods such as <code>vm.getProviderById()</code> return the promise they are using and then move the code that accesses <code>$scope.provider</code> into <code>.then()</code>."}, {"owner": {"reputation": 33, "user_id": 7201971, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155444934653496/picture?type=large", "display_name": "Iair Alejandro Bluer", "link": "https://stackoverflow.com/users/7201971/iair-alejandro-bluer"}, "reply_to_user": {"reputation": 78907, "user_id": 107660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0167bade38130f13a5fc468c10388d9d?s=128&d=identicon&r=PG", "display_name": "Duncan", "link": "https://stackoverflow.com/users/107660/duncan"}, "edited": false, "score": 0, "creation_date": 1479938506, "post_id": 40773855, "comment_id": 68773604, "body": "if you look at the function definition of getProviderById the implementation calls the providerService which makes the http request and returns  <code>&quot;return $q.when(provider);&quot;</code> it is handled after the call to the service in a .then on success, and $scope provider is set there to be the response. so i dont understand your answer please elaborate"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7201971, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155444934653496/picture?type=large", "display_name": "Iair Alejandro Bluer", "link": "https://stackoverflow.com/users/7201971/iair-alejandro-bluer"}, "edited": false, "score": 0, "creation_date": 1479938617, "post_id": 40774264, "comment_id": 68773650, "body": "it would help if you could write a code snippet explaining it because i define the vm.getProviderById to call the service function that makes the http request and after the call there is a .then on success that handles the response"}], "tags": [], "owner": {"reputation": 1547, "user_id": 2363552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/494dfc5bd2f9011069e4d6bee701163b?s=128&d=identicon&r=PG", "display_name": "machinehead115", "link": "https://stackoverflow.com/users/2363552/machinehead115"}, "is_accepted": false, "score": 2, "last_activity_date": 1479935700, "creation_date": 1479935700, "answer_id": 40774264, "question_id": 40773855, "link": "https://stackoverflow.com/questions/40773855/angular-does-not-wait-for-promises-to-resolve/40774264#40774264", "title": "angular does not wait for promises to resolve", "body": "<p>The problem is that when you call the functions <code>vm.getProviderById</code> and <code>vm.getProviderSkills</code> they call other functions which return a promise, however these functions themselves do not. Therefore they are called and then move on to the next steps.</p>\n\n<p>If these functions do actually rely on each other you will need to chain the promises together or call them from inside the <code>success</code> of each of their respective promises.</p>\n"}, {"tags": [], "owner": {"reputation": 78907, "user_id": 107660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0167bade38130f13a5fc468c10388d9d?s=128&d=identicon&r=PG", "display_name": "Duncan", "link": "https://stackoverflow.com/users/107660/duncan"}, "is_accepted": false, "score": 0, "last_activity_date": 1479981098, "creation_date": 1479981098, "answer_id": 40782986, "question_id": 40773855, "link": "https://stackoverflow.com/questions/40773855/angular-does-not-wait-for-promises-to-resolve/40782986#40782986", "title": "angular does not wait for promises to resolve", "body": "<p>In Provider Controller Usage:</p>\n\n<pre><code>$scope.user = vm.getCurrentUser();\nif ($scope.user !== null &amp;&amp; $scope.user !== undefined) {\n    console.log('user - ' + JSON.stringify($scope.user));\n} else {\n    vm.initUsersProvider();\n    console.log('initiated users provider');\n}\nvm.getProviderById($scope.user.provider);\nif ($scope.provider !== null &amp;&amp; $scope.provider !== undefined) {\n    console.log('provider - ' + JSON.stringify($scope.provider));\n} else {\n    console.log('didnt get provider object');\n}\nvm.getProviderSkills($scope.provider);\nif ($scope.skills !== null &amp;&amp; $scope.skills !== undefined) {\n    console.log('provider - ' + JSON.stringify($scope.skills));\n} else {\n    console.log('didnt get skills object');\n}\n</code></pre>\n\n<p>When the call to <code>vm.getProviderId()</code> returns, the only thing you can be certain of is that none of the <code>.then()</code> code in <code>vm.getProviderId()</code> has yet been called. But then you try to access <code>$scope.provider</code> and it will not have been set.</p>\n\n<p><code>getProviderId</code> must return a Promise to indicate when it has completed. You can also resolve the promise with the <code>provider</code> if you want (which is probably better than assigning into the scope here).</p>\n\n<pre><code>vm.getProviderById = getProviderById;\n\nfunction getProviderById(providersId){\n    return providerService.getProviderById(providersId)\n        .then(function onSuccess(providerResult){\n            console.log('providerResult - ' + JSON.stringify(providerResult));\n            return provider;\n        }, function onError(error){\n            console.log('error getting provider by id - ' + error);\n        });\n}\n</code></pre>\n\n<p>And change <code>getProviderSkills()</code> in a similar way to also return the final promise.</p>\n\n<p>Now you use it like this:</p>\n\n<pre><code>vm.getProviderById($scope.user.provider)\n.then(function(provider) {\n    $scope.provider = provider; // If you still need to save it in scope.\n    if (provider !== null &amp;&amp; provider !== undefined) {\n        console.log('provider - ' + JSON.stringify(provider));\n    } else {\n        return $q.reject('didnt get provider object');\n    }\n    return vm.getProviderSkills(provider);\n})\n.then(function(skills) {\n    if (skills === null || skills === undefined) {\n        return $q.reject('didn\\'t get skills object');\n    }\n    $scope.skills = skills;\n},\nfunction failureCallback(error) {\n    console.log(error);\n});\n</code></pre>\n\n<p>Note that by returning $q.reject() you you abort the rest of the sequence and you have a single place at the end to handle/log the error.</p>\n"}], "owner": {"reputation": 33, "user_id": 7201971, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155444934653496/picture?type=large", "display_name": "Iair Alejandro Bluer", "link": "https://stackoverflow.com/users/7201971/iair-alejandro-bluer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1159, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1479981098, "creation_date": 1479933885, "question_id": 40773855, "link": "https://stackoverflow.com/questions/40773855/angular-does-not-wait-for-promises-to-resolve", "title": "angular does not wait for promises to resolve", "body": "<p>My problem is that angular doesnt wait for the promises to be resolved.\nas you can see in the inspect from the console, it prints that it didnt get the provider and skills object and just below that the promises return.</p>\n\n<p>added below are the most relevant code parts in my opinion. I made the service using angulars library - $q and used the deferred, then and when options - as you can see in the service below.</p>\n\n<p>Provider Service:</p>\n\n<pre><code>this.getProviderById = function (providersId) {\n        // will hold backend provider of the provider with id = providersId\n        var provider = undefined;\n        // if provider object is not defined then start the new process to fetch it\n        if (!provider) {\n            // create deferred object using $q\n            var deferred = $q.defer();\n\n            // get provider form backend\n            $http.get('http://localhost:3000/providers/getbyid/' + providersId)\n                .then(function (result) {\n                    console.log('provider by id result - ' + JSON.stringify(result.data));\n                    // save fetched provider to the local variable\n                    provider = result.data;\n                    // resolve the deferred\n                    deferred.resolve(provider);\n                }, function (error) {\n                    providers = error;\n                    deferred.reject(error);\n                });\n\n            // set the provider object to be a promise until result comeback\n            provider = deferred.promise;\n        }\n        return $q.when(provider);\n    };\n</code></pre>\n\n<p>Provider Controller Definition:</p>\n\n<pre><code> var vm = this;\n    vm.getCurrentUser = getCurrentUser;\n    function getCurrentUser(){\n        console.log('returning current user from auth service');\n        return authService.getCurrentUser();\n    }\n    vm.getProviderById = getProviderById;\n    function getProviderById(providersId){\n        providerService.getProviderById(providersId)\n            .then(function onSuccess(providerResult){\n                console.log('providerResult - ' + JSON.stringify(providerResult));\n                $scope.provider =  providerResult;\n            }, function onError(error){\n                console.log('error getting provider by id - ' + error);\n            });\n    }\n\n    vm.getProviderSkills = getProviderSkills;\n    function getProviderSkills(providersId){\n        providerService.getProvidersSkills(providersId).then(function onSuccess(resultSkills){\n            console.log('resultSkills - ' + JSON.stringify(resultSkills));\n            $scope.skills = resultSkills;\n        }, function onError(error){\n            console.log('error getting providers - ' + $scope.provider + ' - skills');\n        });\n    }\n</code></pre>\n\n<p>Provider Controller Usage:</p>\n\n<pre><code>  $scope.user = vm.getCurrentUser();\n    if ($scope.user !== null &amp;&amp; $scope.user !== undefined) {\n        console.log('user - ' + JSON.stringify($scope.user));\n    } else {\n        vm.initUsersProvider();\n        console.log('initiated users provider');\n    }\n    vm.getProviderById($scope.user.provider);\n    if ($scope.provider !== null &amp;&amp; $scope.provider !== undefined) {\n        console.log('provider - ' + JSON.stringify($scope.provider));\n    } else {\n        console.log('didnt get provider object');\n    }\n    vm.getProviderSkills($scope.provider);\n    if ($scope.skills !== null &amp;&amp; $scope.skills !== undefined) {\n        console.log('provider - ' + JSON.stringify($scope.skills));\n    } else {\n        console.log('didnt get skills object');\n    }\n</code></pre>\n\n<p>Inspect Console Showing result of the picture above:</p>\n\n<pre><code>user - {\"_id\":\"5835b06b975ace23244bf205\",\"email\":\"iairbluer@gmail.com\",\"password\":\"\",\"fbuser\":\"5835b06a975ace23244bf204\",\"provider\":\"5835b06f975ace23244bf206\",\"admin\":false,\"__v\":0}\nProviderRegisterController.js:14 providersId - 5835b06f975ace23244bf206\nproviderService.js:74 providersId - 5835b06f975ace23244bf206\nProviderRegisterController.js:110 didnt get provider object\nProviderRegisterController.js:117 didnt get skills object\nProviderRegisterController.js:122 no availability module found\nProviderRegisterController.js:124 no bio module found\nproviderService.js:83 provider by id result - {\"_id\":\"5835b06f975ace23244bf206\",\"bio\":\"\",\"__v\":2,\"references\":[],\"availability\":{\"auto\":true},\"skills\":[\"5835b220975ace23244bf208\",\"5835b2ff975ace23244bf209\"]}\nProviderRegisterController.js:17 providerResult - {\"_id\":\"5835b06f975ace23244bf206\",\"bio\":\"\",\"__v\":2,\"references\":[],\"availability\":{\"auto\":true},\"skills\":[\"5835b220975ace23244bf208\",\"5835b2ff975ace23244bf209\"]}\nproviderService.js:56 received skills from db - [object Object],[object Object]\nProviderRegisterController.js:27 resultSkills - [{\"_id\":\"5835b220975ace23244bf208\",\"topic\":2,\"description\":\"sdfsdf\",\"price\":45,\"status\":\"PENDING\",\"__v\":0},{\"_id\":\"5835b2ff975ace23244bf209\",\"topic\":1,\"description\":\"ddfgdfg\",\"price\":45,\"status\":\"PENDING\",\"__v\":0}]\n</code></pre>\n\n<p>Thanks, for all the help :)</p>\n"}, {"tags": ["javascript", "debugging", "scripting", "resources"], "comments": [{"owner": {"reputation": 63736, "user_id": 245860, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/11c56b07a08ba381090605a5904dc0e4?s=128&d=identicon&r=PG", "display_name": "Claudio Redi", "link": "https://stackoverflow.com/users/245860/claudio-redi"}, "edited": false, "score": 0, "creation_date": 1479933999, "post_id": 40773853, "comment_id": 68771588, "body": "I&#39;m not seeing any untermited string literal... but I do see jquery loaded multiple times... what is wrong :) Do you have exactly that? Console may be pointing to incorrect line."}, {"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 0, "creation_date": 1479934157, "post_id": 40773853, "comment_id": 68771665, "body": "Do you mean &quot;unterminated&quot;?"}, {"owner": {"reputation": 53, "user_id": 6122289, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/3bf88311e93482f078d76014c6aa6fef?s=128&d=identicon&r=PG&f=1", "display_name": "kukiko11", "link": "https://stackoverflow.com/users/6122289/kukiko11"}, "edited": false, "score": 0, "creation_date": 1479935563, "post_id": 40773853, "comment_id": 68772306, "body": "yes sorry, unterminated"}], "owner": {"reputation": 53, "user_id": 6122289, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/3bf88311e93482f078d76014c6aa6fef?s=128&d=identicon&r=PG&f=1", "display_name": "kukiko11", "link": "https://stackoverflow.com/users/6122289/kukiko11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 18, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479934144, "creation_date": 1479933873, "last_edit_date": 1479934144, "question_id": 40773853, "link": "https://stackoverflow.com/questions/40773853/how-to-fix-untermined-string-javascript-error-when-i-load-resources", "title": "How to fix untermined string JavaScript error when I load resources?", "body": "<p>I'm getting untermined string literal errors when I load resources like:</p>\n\n<pre><code>&lt;script src=\"//cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js\"&gt;&lt;/script&gt;\n\n&lt;script src=\"http://code.jquery.com/jquery-latest.min.js\"&gt;&lt;/script&gt;\n\n&lt;script src=\"http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>And while debugging console actually says this error is on those lines where I put these scripts.</p>\n"}, {"tags": ["javascript", "jquery", "html", "flask", "chart.js"], "comments": [{"owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 0, "creation_date": 1479937673, "post_id": 40773836, "comment_id": 68773248, "body": "Your html is template code that Flask translates into actual html. What does the output look like? Open the page in a browser and use &quot;view source&quot; to see the final html. The part inside the <code>{{ }}</code> is probably not pointing to the correct location for the javascript file. Also you should confirm that the Flask web server is serving the javascript file if you enter the url directly."}, {"owner": {"reputation": 11, "user_id": 7202182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/feba5dccb86c507e36d8463e763d8946?s=128&d=identicon&r=PG&f=1", "display_name": "user7202182", "link": "https://stackoverflow.com/users/7202182/user7202182"}, "reply_to_user": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 0, "creation_date": 1479991644, "post_id": 40773836, "comment_id": 68796109, "body": "This was indeed the problem, data in javascript was not being read in due to the {{ }}, I replaced with correct syntax in the scripts.js file and it all works. Thanks Haken, I will accept this as answer."}, {"owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 0, "creation_date": 1480004616, "post_id": 40773836, "comment_id": 68804252, "body": "Ok. I will submit the comment text as an answer as well."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7202182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/feba5dccb86c507e36d8463e763d8946?s=128&d=identicon&r=PG&f=1", "display_name": "user7202182", "link": "https://stackoverflow.com/users/7202182/user7202182"}, "edited": false, "score": 0, "creation_date": 1479935402, "post_id": 40774055, "comment_id": 68772229, "body": "Thanks for the reply - it seems to be loading it fine if I check the browser console"}, {"owner": {"reputation": 11, "user_id": 7202182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/feba5dccb86c507e36d8463e763d8946?s=128&d=identicon&r=PG&f=1", "display_name": "user7202182", "link": "https://stackoverflow.com/users/7202182/user7202182"}, "edited": false, "score": 0, "creation_date": 1479991580, "post_id": 40774055, "comment_id": 68796071, "body": "Problem is now resolved - was as Haken Lid pointed out - issue was created by {{ }}."}], "tags": [], "owner": {"reputation": 423, "user_id": 6071493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9eec383f02a69b44701505dc489a993f?s=128&d=identicon&r=PG", "display_name": "owaisafaq", "link": "https://stackoverflow.com/users/6071493/owaisafaq"}, "is_accepted": false, "score": 0, "last_activity_date": 1479934743, "creation_date": 1479934743, "answer_id": 40774055, "question_id": 40773836, "link": "https://stackoverflow.com/questions/40773836/calling-external-chartjs-chart-from-a-javascript-file-into-html-in-flask/40774055#40774055", "title": "Calling external Chartjs chart from a javascript file into HTML in Flask", "body": "<p>If the code runs fine in the HTML file, the issue must be with the path of the resource. Have you confirmed from the browser that the <code>script.js</code> file is being loaded?</p>\n"}, {"tags": [], "owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "is_accepted": false, "score": 0, "last_activity_date": 1480004873, "creation_date": 1480004873, "answer_id": 40791127, "question_id": 40773836, "link": "https://stackoverflow.com/questions/40773836/calling-external-chartjs-chart-from-a-javascript-file-into-html-in-flask/40791127#40791127", "title": "Calling external Chartjs chart from a javascript file into HTML in Flask", "body": "<p>Your html is template code that Flask translates into actual html.</p>\n\n<pre><code>&lt;script src=\"{{ url_for('static', filename='scripts.js') }}\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>Open the page in a browser and use \"view source\" to see the final html. The part inside the <code>{{ }}</code> will be replaced.</p>\n\n<p>The actual html should look something like this. </p>\n\n<pre><code>&lt;script src=\"/static/scripts.js\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>It's likely that the generated <code>src</code> url is missing or incorrect, which means that your browser will not be able to load and execute the javascript file.</p>\n"}], "owner": {"reputation": 11, "user_id": 7202182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/feba5dccb86c507e36d8463e763d8946?s=128&d=identicon&r=PG&f=1", "display_name": "user7202182", "link": "https://stackoverflow.com/users/7202182/user7202182"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2459, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1480008334, "creation_date": 1479933787, "last_edit_date": 1480008334, "question_id": 40773836, "link": "https://stackoverflow.com/questions/40773836/calling-external-chartjs-chart-from-a-javascript-file-into-html-in-flask", "title": "Calling external Chartjs chart from a javascript file into HTML in Flask", "body": "<p>I am creating a webpage. On this webpage I want it to load a Chartjs file. To keep my structure neat. I want to place the Chart object into an external \"scripts.js\" file and call it in the HTML as a script. I am using Flask to create the website.</p>\n\n<p>It works fine when I include all the code in the HTML but it seems not to let me import the JS script. Please help me someone. Thank you.</p>\n\n<p>Attempt:\n\"scripts.js\": </p>\n\n<pre><code> function linechart() {\n    const LINECHART = document.getElementById(\"lineChart\")\n\n    let lineChart = new Chart (LINECHART, {\n            type: 'line',\n            data: {\n                labels: {{ data_date|tojson|safe }},\n                datasets: [{\n                        responsive: false,\n                        label: \"Share Price\",\n                        fill: false,\n                        lineTension: 0.1,\n                        backgroundColor: \"rgba(75,192,192,0.4)\",\n                        borderColor: \"rgba(75,192,192,1)\",\n                        borderCapStyle: 'butt',\n                        borderDash: [],\n                        borderDashOffset: 0.0,\n                        borderJoinStyle: 'miter',\n                        pointBorderColor: \"rgba(75,192,192,1)\",\n                        pointBackgroundColor: \"#fff\",\n                        pointBorderWidth: 1,\n                        pointHoverRadius: 5,\n                        pointHoverBackgroundColor: \"rgba(75,192,192,1)\",\n                        pointHoverBorderColor: \"rgba(220,220,220,1)\",\n                        pointHoverBorderWidth: 2,\n                        pointRadius: 1,\n                        pointHitRadius: 10,\n                        data: {{ data_close|tojson|safe }},\n                        spanGaps: true,\n                    }]\n            },\n\n            // orientate the labels to be 90 degrees on x-axis\n            // credit: https://stackoverflow.com/questions/35022830/chart-js-change-label-orientation-on-x-axis-for-line-charts\n            options: {\n                scales: {\n                    xAxes: [{\n                        ticks: {\n                            autoSkip: true,\n                            maxTicksLimit: 6,\n                            autoSkipPadding: 2,\n                            maxRotation: 0,\n                            minRotation: 0\n                        }\n                    }]\n                }\n            }\n    }); // end of lineChart\n}\n</code></pre>\n\n<p>HTML:</p>\n\n<pre><code>&lt;head&gt;\n&lt;script src=\"{{ url_for('static', filename='scripts.js') }}\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n\n&lt;canvas id=\"lineChart\" width=\"20\" height=\"20\"&gt;&lt;/canvas&gt;\n\n&lt;script&gt;\n   linechart()\n&lt;/script&gt;\n</code></pre>\n"}, {"tags": ["javascript", "svg", "snap.svg"], "answers": [{"comments": [{"owner": {"reputation": 45218, "user_id": 257558, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/tBnm9.png?s=128&g=1", "display_name": "Shai UI", "link": "https://stackoverflow.com/users/257558/shai-ui"}, "edited": false, "score": 0, "creation_date": 1480004409, "post_id": 40786426, "comment_id": 68804116, "body": "note to self/others: s.selectAll(&#39;#group &gt; *&#39;) for immediate children"}], "tags": [], "owner": {"reputation": 12819, "user_id": 1429053, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/ikeNz.png?s=128&g=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/1429053/ian"}, "is_accepted": true, "score": 3, "last_activity_date": 1479991037, "last_edit_date": 1479991037, "creation_date": 1479990388, "answer_id": 40786426, "question_id": 40773808, "link": "https://stackoverflow.com/questions/40773808/how-to-iterate-on-a-groups-elements-children-in-snap-svg/40786426#40786426", "title": "How to iterate on a group&#39;s elements/children in snap.svg?", "body": "<p>You can find the Snap doc for forEach <a href=\"http://snapsvg.io/docs/#Set.forEach\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>Firstly, you need to use s.selectAll instead of s.select here.</p>\n\n<pre><code>var set = s.selectAll\n</code></pre>\n\n<p>Select will choose the first element, selectAll will choose all of the elements that match the css selector and put them in a Set, so you can then use your forEach.</p>\n\n<p>Then you can iterate over them, similar to what your example. So I would use the '*' selector to get the children for example.</p>\n\n<pre><code>s.selectAll('#group1 *')\n .forEach( function( el ) {\n    el.attr({ fill: 'blue' });\n});\n</code></pre>\n\n<p>If you don't specifically need the forEach, as you just want to set some attributes to them, you can possibly avoid it, as some methods can be applied to sets. So the above example could also be written like...</p>\n\n<pre><code>s.selectAll('#group1 *').attr({ fill: 'red' });\n</code></pre>\n"}], "owner": {"reputation": 45218, "user_id": 257558, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/tBnm9.png?s=128&g=1", "display_name": "Shai UI", "link": "https://stackoverflow.com/users/257558/shai-ui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1845, "favorite_count": 0, "accepted_answer_id": 40786426, "answer_count": 1, "score": 0, "last_activity_date": 1479991037, "creation_date": 1479933680, "question_id": 40773808, "link": "https://stackoverflow.com/questions/40773808/how-to-iterate-on-a-groups-elements-children-in-snap-svg", "title": "How to iterate on a group&#39;s elements/children in snap.svg?", "body": "<p>Let's say I have an svg group of type <code>&lt;g&gt;</code> called \"group1\" that has a number of children (other shapes, etc). I'd like to iterate on them using snap.svg.</p>\n\n<pre><code>var group1 = s.select('#group1');\ngroup1.forEach(function(child) {\n\n   // doesn't work\n\n});\n</code></pre>\n\n<p>any ideas?</p>\n"}, {"tags": ["javascript", "jquery", "html"], "comments": [{"owner": {"reputation": 56607, "user_id": 695364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUNjJ.jpg?s=128&g=1", "display_name": "Scott Marcus", "link": "https://stackoverflow.com/users/695364/scott-marcus"}, "edited": false, "score": 0, "creation_date": 1479933697, "post_id": 40773779, "comment_id": 68771454, "body": "<i>&quot;you can view it but you can&#39;t act on it and if so I should be able to remove all the actions on it.&quot;</i> If you can&#39;t act on it, how would you be able to remove all the actions on it?"}, {"owner": {"reputation": 49708, "user_id": 438581, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/15a0033698497951faf2992ff3e1825c?s=128&d=identicon&r=PG", "display_name": "Brett DeWoody", "link": "https://stackoverflow.com/users/438581/brett-dewoody"}, "edited": false, "score": 0, "creation_date": 1479933729, "post_id": 40773779, "comment_id": 68771466, "body": "Do you want to remove all events? Or make the button unresponsive to click events?"}, {"owner": {"reputation": 15033, "user_id": 719427, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7b7690d4de079ea9f3c51eac3b06d95d?s=128&d=identicon&r=PG", "display_name": "ReynierPM", "link": "https://stackoverflow.com/users/719427/reynierpm"}, "reply_to_user": {"reputation": 49708, "user_id": 438581, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/15a0033698497951faf2992ff3e1825c?s=128&d=identicon&r=PG", "display_name": "Brett DeWoody", "link": "https://stackoverflow.com/users/438581/brett-dewoody"}, "edited": false, "score": 0, "creation_date": 1479933772, "post_id": 40773779, "comment_id": 68771494, "body": "@BrettDeWoody I believe this is what I am looking for"}, {"owner": {"reputation": 44874, "user_id": 1499781, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/618f7083d93a716dc09caea4805d0f2f?s=128&d=identicon&r=PG", "display_name": "Zoltan Toth", "link": "https://stackoverflow.com/users/1499781/zoltan-toth"}, "edited": false, "score": 0, "creation_date": 1479933884, "post_id": 40773779, "comment_id": 68771539, "body": "a simple <i>&quot;disabled&quot;</i> will do it"}, {"owner": {"reputation": 56607, "user_id": 695364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUNjJ.jpg?s=128&g=1", "display_name": "Scott Marcus", "link": "https://stackoverflow.com/users/695364/scott-marcus"}, "edited": false, "score": 0, "creation_date": 1479934469, "post_id": 40773779, "comment_id": 68771811, "body": "@ReynierPM ????"}], "answers": [{"comments": [{"owner": {"reputation": 15033, "user_id": 719427, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7b7690d4de079ea9f3c51eac3b06d95d?s=128&d=identicon&r=PG", "display_name": "ReynierPM", "link": "https://stackoverflow.com/users/719427/reynierpm"}, "edited": false, "score": 0, "creation_date": 1479933897, "post_id": 40773851, "comment_id": 68771546, "body": "What about if I go and edit the page using Chrome Developers Tools? I would be able to submit the button no matter what, right?"}, {"owner": {"reputation": 62191, "user_id": 3993662, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/20ce5cf17ddc888ba9d7b5e639f040b2?s=128&d=identicon&r=PG&f=1", "display_name": "baao", "link": "https://stackoverflow.com/users/3993662/baao"}, "reply_to_user": {"reputation": 15033, "user_id": 719427, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7b7690d4de079ea9f3c51eac3b06d95d?s=128&d=identicon&r=PG", "display_name": "ReynierPM", "link": "https://stackoverflow.com/users/719427/reynierpm"}, "edited": false, "score": 0, "creation_date": 1479933979, "post_id": 40773851, "comment_id": 68771574, "body": "Yes, there&#39;s no way to avoid this. But you can forbid any action issued by the button in the backend. @ReynierPM"}], "tags": [], "owner": {"reputation": 62191, "user_id": 3993662, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/20ce5cf17ddc888ba9d7b5e639f040b2?s=128&d=identicon&r=PG&f=1", "display_name": "baao", "link": "https://stackoverflow.com/users/3993662/baao"}, "is_accepted": true, "score": 0, "last_activity_date": 1479933858, "creation_date": 1479933858, "answer_id": 40773851, "question_id": 40773779, "link": "https://stackoverflow.com/questions/40773779/how-i-can-remove-all-the-events-on-a-html-element/40773851#40773851", "title": "How I can remove all the events on a HTML element?", "body": "<p>Add the <code>disabled</code> attribute.</p>\n\n<pre><code>&lt;?php\necho $this-&gt;myFormButton(\n    'add_component_restriction',\n    'Add',\n    [\n        'class'       =&gt; 'btn btn-default add_component_restriction',\n        'type'        =&gt; 'button',\n        'disabled'    =&gt; 'disabled'\n    ]\n);\n?&gt;\n</code></pre>\n"}], "owner": {"reputation": 15033, "user_id": 719427, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7b7690d4de079ea9f3c51eac3b06d95d?s=128&d=identicon&r=PG", "display_name": "ReynierPM", "link": "https://stackoverflow.com/users/719427/reynierpm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 1, "accepted_answer_id": 40773851, "answer_count": 1, "score": 1, "last_activity_date": 1479933858, "creation_date": 1479933552, "last_edit_date": 1479933708, "question_id": 40773779, "link": "https://stackoverflow.com/questions/40773779/how-i-can-remove-all-the-events-on-a-html-element", "title": "How I can remove all the events on a HTML element?", "body": "<p>I am building a button in the backend as follow:</p>\n\n<pre><code>&lt;?php\necho $this-&gt;myFormButton(\n    'add_component_restriction',\n    'Add',\n    [\n        'class'       =&gt; 'btn btn-default add_component_restriction',\n        'type'        =&gt; 'button'\n    ]\n);\n?&gt;\n</code></pre>\n\n<p>This will generate the following HTML:</p>\n\n<pre><code>&lt;button name=\"add_component_restriction\" \n        id=\"add_component_restriction\" \n        type=\"button\" \n        value=\"Add\" class=\"btn btn-default add_component_restriction\" \n&gt;Add&lt;/button&gt;\n</code></pre>\n\n<p>The element could be rendered as view only meaning you can view it but you can't act on it and if so I should be able to remove all the actions on it. </p>\n\n<p>I did know this can be done only on the DOM level using Javascript (maybe I am wrong) maybe using <code>.off()</code> or setting something like this <code>onclick=\"javascript: return false;\"</code> on the element.</p>\n\n<p>I don't know if make it <code>disabled</code> or <code>readonly</code> will do the job. </p>\n\n<p>Is Javascript/jQuery the only way ? If there is another solution please let me know</p>\n"}, {"tags": ["javascript", "vue.js"], "answers": [{"tags": [], "owner": {"reputation": 5604, "user_id": 1577135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69adedbb24af6fa096315613020757ab?s=128&d=identicon&r=PG", "display_name": "GuyC", "link": "https://stackoverflow.com/users/1577135/guyc"}, "is_accepted": false, "score": 2, "last_activity_date": 1479937566, "creation_date": 1479937566, "answer_id": 40774662, "question_id": 40773694, "link": "https://stackoverflow.com/questions/40773694/vue-wrap-html5-element/40774662#40774662", "title": "Vue - wrap HTML5 element", "body": "<p>you can pass methods from the parent to the child as props, i.e.</p>\n\n<p><strong>parent</strong></p>\n\n<pre><code>&lt;area :do-something=\"doSomething\"&gt;&lt;/area&gt;\n</code></pre>\n\n<p><strong>child</strong></p>\n\n<pre><code># template\n&lt;textarea rows=\"1\" @input=\"doSomething\"&gt;&lt;/textarea&gt;\n\n# script\nexport default {\n  props: ['doSomething'],\n  ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 524, "user_id": 402845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6273b3c437198f6868ed06783c9507e?s=128&d=identicon&r=PG", "display_name": "xori", "link": "https://stackoverflow.com/users/402845/xori"}, "is_accepted": false, "score": 2, "last_activity_date": 1479937874, "creation_date": 1479937874, "answer_id": 40774721, "question_id": 40773694, "link": "https://stackoverflow.com/questions/40773694/vue-wrap-html5-element/40774721#40774721", "title": "Vue - wrap HTML5 element", "body": "<p>Unfortunately you can't do this, but you can cheat and get pretty close.</p>\n\n<pre><code>mounted() {\n    var self = this;\n    Object.keys(Event.prototype).forEach(function(ev) {\n       self.$refs.text.addEventListener(ev.toLowerCase(), function(d) {\n           self.$emit(ev.toLowerCase(), d);\n           console.log(\"emitting\", ev, d);\n       })\n   })\n}\n</code></pre>\n\n<p>With this you get access to <code>mousedown</code>, <code>mouseup</code>, <code>mouseover</code>, <code>mouseout</code>, <code>mousemove</code>, <code>mousedrag</code>, <code>click</code>, <code>dblclick</code>, <code>keydown</code>, <code>keyup</code>, <code>keypress</code>, <code>dragdrop</code>, <code>focus</code>, <code>blur</code>, <code>select</code> and <code>change</code> events. Then in your parent template...</p>\n\n<pre><code>&lt;my-textarea @keyup=\"update()\" @change=\"somethingElse()\"&gt;&lt;/my-textarea&gt;\n</code></pre>\n\n<p>Here's the fiddle <a href=\"https://jsfiddle.net/rdjjpc7a/371/\" rel=\"nofollow noreferrer\">https://jsfiddle.net/rdjjpc7a/371/</a></p>\n"}, {"tags": [], "owner": {"reputation": 3182, "user_id": 4788022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/debbef497a053890443b151e838eca08?s=128&d=identicon&r=PG", "display_name": "PanJunjie\u6f58\u4fca\u6770", "link": "https://stackoverflow.com/users/4788022/panjunjie%e6%bd%98%e4%bf%8a%e6%9d%b0"}, "is_accepted": true, "score": 8, "last_activity_date": 1479978723, "creation_date": 1479978723, "answer_id": 40782085, "question_id": 40773694, "link": "https://stackoverflow.com/questions/40773694/vue-wrap-html5-element/40782085#40782085", "title": "Vue - wrap HTML5 element", "body": "<p>You only need to add <a href=\"http://vuejs.org/v2/api/#v-on\" rel=\"noreferrer\"><code>.native</code></a> to <code>@input</code>.  </p>\n\n<p>Vue's <code>v-on</code>/<code>@</code>, when used on a component (without <code>.native</code>), only listens to custom events declared by <code>emit</code>.</p>\n"}], "owner": {"reputation": 3333, "user_id": 2653611, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/vZkTg.png?s=128&g=1", "display_name": "Oskar", "link": "https://stackoverflow.com/users/2653611/oskar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2366, "favorite_count": 1, "accepted_answer_id": 40782085, "answer_count": 3, "score": 4, "last_activity_date": 1479978723, "creation_date": 1479933188, "question_id": 40773694, "link": "https://stackoverflow.com/questions/40773694/vue-wrap-html5-element", "title": "Vue - wrap HTML5 element", "body": "<p>I want to create a component that wraps a <code>textarea</code> element. Its function is to add custom functionality and custom styling, but I don't want it to be scoped in its own scope - rather, the parent should be able bind to regular events like <code>input</code>.</p>\n\n<p>Example of what is needed, but will not work (problem is highlighted in <code>parent.vue</code>):</p>\n\n<h2><code>area.vue:</code></h2>\n\n<pre><code>&lt;template&gt;\n    &lt;textarea rows=\"1\"&gt;&lt;/textarea&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\n    export default {\n        mounted() {\n            // do something...\n        }\n    }\n&lt;/script&gt;\n\n&lt;style scoped&gt;\n    textarea {\n        height: 100%;\n    }\n&lt;/style&gt;\n</code></pre>\n\n<h2><code>parent.vue:</code></h2>\n\n<pre><code>&lt;template&gt;\n    &lt;area @input=\"doSomething\"&gt;&lt;/area&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\n    import Area from \"./area.vue\"\n\n    export default {\n        methods: {\n            doSomething(){\n                // NOT TRIGGERED!\n                // `input` event is not passed over to parent scope\n            }\n        },\n        components: {\n            Area\n        }\n    }\n&lt;/script&gt;\n</code></pre>\n\n<p>I do not want to explicitly write in <code>this.$emit</code> calls into the component.</p>\n"}, {"tags": ["javascript", "jquery", "arrays"], "comments": [{"owner": {"reputation": 3759, "user_id": 5253239, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e9xkj.jpg?s=128&g=1", "display_name": "kevin ternet", "link": "https://stackoverflow.com/users/5253239/kevin-ternet"}, "edited": false, "score": 0, "creation_date": 1479933311, "post_id": 40773689, "comment_id": 68771285, "body": "And what is the question ?"}, {"owner": {"reputation": 383, "user_id": 6771841, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/474a3750cbee8ea6bf5b8f4a47e0ea8e?s=128&d=identicon&r=PG&f=1", "display_name": "Ndx", "link": "https://stackoverflow.com/users/6771841/ndx"}, "reply_to_user": {"reputation": 3759, "user_id": 5253239, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e9xkj.jpg?s=128&g=1", "display_name": "kevin ternet", "link": "https://stackoverflow.com/users/5253239/kevin-ternet"}, "edited": false, "score": 0, "creation_date": 1479933410, "post_id": 40773689, "comment_id": 68771328, "body": "I can&#39;t store the adjacent cells in the board array. it only stores the first element [5,3] and don&#39;t store the others."}, {"owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "edited": false, "score": 0, "creation_date": 1479933603, "post_id": 40773689, "comment_id": 68771410, "body": "Sounds more like a statement than a question..."}, {"owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "edited": false, "score": 0, "creation_date": 1479933760, "post_id": 40773689, "comment_id": 68771485, "body": "BTW: this code is invalid; it cannot run."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1479933857, "post_id": 40773689, "comment_id": 68771526, "body": "None of your functions are closed."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1479934195, "post_id": 40773689, "comment_id": 68771680, "body": "What is <code>$.each(mines, ...)</code> supposed to do? <code>mines</code> is an object, not an array. And you never use <code>i</code> or <code>v</code> in the loop."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1479934294, "post_id": 40773689, "comment_id": 68771725, "body": "<code>board.fields = [xx, yy]</code> just keeps overwriting <code>board.fields</code>, it doesn&#39;t add to it. Maybe you meant <code>board.fields.push([xx, yy])</code>?"}, {"owner": {"reputation": 383, "user_id": 6771841, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/474a3750cbee8ea6bf5b8f4a47e0ea8e?s=128&d=identicon&r=PG&f=1", "display_name": "Ndx", "link": "https://stackoverflow.com/users/6771841/ndx"}, "edited": false, "score": 0, "creation_date": 1479934750, "post_id": 40773689, "comment_id": 68771943, "body": "I&#39;ve edited the function. sorry for the mistakes. It&#39;s working now and I&#39;ve tested it on my browser."}, {"owner": {"reputation": 383, "user_id": 6771841, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/474a3750cbee8ea6bf5b8f4a47e0ea8e?s=128&d=identicon&r=PG&f=1", "display_name": "Ndx", "link": "https://stackoverflow.com/users/6771841/ndx"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1479934968, "post_id": 40773689, "comment_id": 68772036, "body": "@Barmar: your tip worked! now it stores all the values. Thank you"}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 0, "last_activity_date": 1479937287, "last_edit_date": 1479937287, "creation_date": 1479935493, "answer_id": 40774218, "question_id": 40773689, "link": "https://stackoverflow.com/questions/40773689/i-cant-store-values-of-adjacent-elements-in-an-array/40774218#40774218", "title": "I can&#39;t store values of adjacent elements in an array", "body": "<pre><code>boards.fields = [xx, yy];\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>boards.fields.push([xx, yy]);\n</code></pre>\n\n<p>Your code was just overwriting the array each time through the loop. You need to use <code>.push()</code> to add a new element to the array.</p>\n\n<p>The other problem is that you're using the same <code>mines.x</code> and <code>mines.y</code> each time through the outer loop. You should be using the elements that you're iterating over:</p>\n\n<pre><code>var x = v[0];\nvar y = v[1];\n</code></pre>\n"}], "owner": {"reputation": 383, "user_id": 6771841, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/474a3750cbee8ea6bf5b8f4a47e0ea8e?s=128&d=identicon&r=PG&f=1", "display_name": "Ndx", "link": "https://stackoverflow.com/users/6771841/ndx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 40774218, "answer_count": 1, "score": -1, "last_activity_date": 1479939288, "creation_date": 1479933172, "last_edit_date": 1479939288, "question_id": 40773689, "link": "https://stackoverflow.com/questions/40773689/i-cant-store-values-of-adjacent-elements-in-an-array", "title": "I can&#39;t store values of adjacent elements in an array", "body": "<p>I'm trying to build a minesweeper game and I'm currently writing code for finding adjacent elements in array, it works but the problem is the items won't be stored in the array. It only stores the first elements.</p>\n\n<p>I can't store the adjacent cells in the board array. it only stores the first element [5.3] and don't store the other adjacent cells.  </p>\n\n<p>For simplicity, I will replace the arrays of bombs with simple values </p>\n\n<p>Here is what I've tried</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>$(document).ready(function() {\r\n  adjSquares();\r\n\r\n});\r\n\r\nvar mines = {\r\n  fields: [[4,4]],\r\n     x:4,\r\n     y:4\r\n  \r\n};\r\nvar board = {\r\n  x: null,\r\n  y: null,\r\n  fields: []\r\n};\r\n\r\nvar adjSquares = function() {\r\n  var adj = [\r\n    [-1, 1],\r\n    [-1, 0],\r\n    [-1, -1],\r\n    [0, 1],\r\n    [0, -1],\r\n    [1, 1],\r\n    [1, 0],\r\n    [1, -1]\r\n  ];\r\n  $.each(mines.fields, function(i, v) {\r\n    /* iterate through array or object */\r\n    var x =mines.fields.x;\r\n    var y=mines.fields.y;\r\n\r\n\r\n    $.each(adj, function(index, val) {\r\n      /* iterate through array or object */\r\n      var xx = board.x;\r\n      var yy = board.y;\r\n\r\n      if (x + val[0] &gt; 0 &amp;&amp; x + val[0] &lt;= 9 &amp;&amp; y + val[1] &gt; 0 &amp;&amp; y + val[1] &lt;= 9) {\r\n        xx = x + val[0];\r\n        yy = y + val[1];\r\n        board.fields=[xx, yy];\r\n\r\n      }\r\n\r\n    });\r\n\r\n\r\n  });\r\n  console.log(board.fields); \r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"&gt;&lt;/script&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Thanks to Barmar, I now can store the adjacent cells to the board.fields array. I've now added more elements to mines.fields:[[4,4],[3,9],[2,1]] but now the board.fields only store the adjacent elements of the last element of mines.fields [2,1] and not all the values of the mines.fields</p>\n\n<p>Here is the updated code</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>$(document).ready(function() {\r\n  adjSquares();\r\nfor(var i=1;i&lt;10;i++){\r\n    console.log(board.fields[i]); //shows 5,3}\r\n}\r\n});\r\n\r\nvar mines = {\r\n  fields: [[4,4],[3,9],[2,1]],\r\n  \r\n};\r\nvar board = {\r\n  x: null,\r\n  y: null,\r\n  fields: []\r\n};\r\n\r\nvar adjSquares = function() {\r\n  var adj = [\r\n    [-1, 1],\r\n    [-1, 0],\r\n    [-1, -1],\r\n    [0, 1],\r\n    [0, -1],\r\n    [1, 1],\r\n    [1, 0],\r\n    [1, -1]\r\n  ];\r\n  $.each(mines.fields, function(i, v) {\r\n    /* iterate through array or object */\r\n    \r\n\r\n    $.each(adj, function(index, val) {\r\n      /* iterate through array or object */\r\n      var xx = board.x;\r\n      var yy = board.y;\r\n\r\n      if (v[0] + val[0] &gt; 0 &amp;&amp; v[0] + val[0] &lt;= 9 &amp;&amp; v[1] + val[1] &gt; 0 &amp;&amp; v[1] + val[1] &lt;= 9) {\r\n        xx = v[0] + val[0];\r\n        yy = v[1] + val[1];\r\n        board.fields.push([xx, yy]);\r\n\r\n      }\r\n\r\n    });\r\n\r\n\r\n  });\r\n  \r\n  }</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"&gt;&lt;/script&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["javascript", "jquery", "object", "this"], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 7022854, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/11732ed4bbdad77bcec0cc820a6e1221?s=128&d=identicon&r=PG&f=1", "display_name": "Lodec", "link": "https://stackoverflow.com/users/7022854/lodec"}, "edited": false, "score": 0, "creation_date": 1479934045, "post_id": 40773799, "comment_id": 68771611, "body": "Thanks for your answer, that works fine but if I add some jquery into the function like that : <code>TicTacToeController.prototype.addListeners = function() {         this._model.on(&#39;change&#39;, this.render, this);         this._element.on(&#39;click&#39;, &quot;td&quot;, function() {             $(this).addClass(&quot;case&quot;);             $(this).html(&quot;X&quot;);             this._model.play(0,0);&#47;&#47;doesn&#39;t work         }.bind(this));     };</code> The jquery isn&#39;t be taken into account, have you got any idea to fix it ?"}, {"owner": {"reputation": 18829, "user_id": 24998, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2c14a4f2931fa9336fdccdfe11318fef?s=128&d=identicon&r=PG", "display_name": "Jack", "link": "https://stackoverflow.com/users/24998/jack"}, "reply_to_user": {"reputation": 77, "user_id": 7022854, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/11732ed4bbdad77bcec0cc820a6e1221?s=128&d=identicon&r=PG&f=1", "display_name": "Lodec", "link": "https://stackoverflow.com/users/7022854/lodec"}, "edited": false, "score": 0, "creation_date": 1479945444, "post_id": 40773799, "comment_id": 68775826, "body": "Not sure what you mean by &quot;The jquery isn&#39;t be taken into account&quot; but have you tried <code>$(this._element)...</code> instead of <code>$(this)...</code>?"}, {"owner": {"reputation": 77, "user_id": 7022854, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/11732ed4bbdad77bcec0cc820a6e1221?s=128&d=identicon&r=PG&f=1", "display_name": "Lodec", "link": "https://stackoverflow.com/users/7022854/lodec"}, "edited": false, "score": 0, "creation_date": 1479972302, "post_id": 40773799, "comment_id": 68783562, "body": "<code>$(this._element)</code> doesn&#39;t work because it changes my whole grid but if I add the parameter &quot;event&quot; in: <code>this._element.on(&#39;click&#39;, &quot;td&quot;, function(event) {...}</code>, event.target works. But  why I cannot use <code>$(this)</code> whereas it represents the &quot;td&quot; element of the .on() function ?"}], "tags": [], "owner": {"reputation": 18829, "user_id": 24998, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2c14a4f2931fa9336fdccdfe11318fef?s=128&d=identicon&r=PG", "display_name": "Jack", "link": "https://stackoverflow.com/users/24998/jack"}, "is_accepted": true, "score": 1, "last_activity_date": 1479933659, "creation_date": 1479933659, "answer_id": 40773799, "question_id": 40773682, "link": "https://stackoverflow.com/questions/40773682/trouble-while-accessing-to-a-method/40773799#40773799", "title": "Trouble while accessing to a method", "body": "<p>You need to use <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind\" rel=\"nofollow noreferrer\">bind</a> like this.</p>\n\n<p>Change this:</p>\n\n<pre><code>this._element.on('click', \"td\", function() {\n    this._model.play(0,0);//doesn't work\n});\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>this._element.on('click', \"td\", function() {\n    this._model.play(0,0); //should now work\n}.bind(this));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 77, "user_id": 7022854, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/11732ed4bbdad77bcec0cc820a6e1221?s=128&d=identicon&r=PG&f=1", "display_name": "Lodec", "link": "https://stackoverflow.com/users/7022854/lodec"}, "edited": false, "score": 1, "creation_date": 1479934358, "post_id": 40773807, "comment_id": 68771755, "body": "I thought to use this dirty workaround too but I knew that there was a better way to solve my problem ^^."}], "tags": [], "owner": {"reputation": 709, "user_id": 1273839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ErSTH.jpg?s=128&g=1", "display_name": "ITomas", "link": "https://stackoverflow.com/users/1273839/itomas"}, "is_accepted": false, "score": 0, "last_activity_date": 1479933676, "creation_date": 1479933676, "answer_id": 40773807, "question_id": 40773682, "link": "https://stackoverflow.com/questions/40773682/trouble-while-accessing-to-a-method/40773807#40773807", "title": "Trouble while accessing to a method", "body": "<p>You are not in the same scope, it's not the same this variable you are employing when calling the play method.\nA dirty workaround could be </p>\n\n<pre><code>let _model = this._model\nthis._element.on('click', \"td\", function() {\n        _model.play(0,0);//work!\n    });\n</code></pre>\n\n<p>But as said it's a dirty workaround, maybe someone else could explain but basically think this produces a memory leak. Maybe the solution would be to use a method in the same class and pass the instance to the click method, kind of:</p>\n\n<pre><code>TicTacToeController.prototype.click = function() ...\n...\nthis._element.on('click', \"td\", this.click);\n</code></pre>\n\n<p>Think this should do the trick, but I must admit I'm not a js expert.</p>\n"}], "owner": {"reputation": 77, "user_id": 7022854, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/11732ed4bbdad77bcec0cc820a6e1221?s=128&d=identicon&r=PG&f=1", "display_name": "Lodec", "link": "https://stackoverflow.com/users/7022854/lodec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 40773799, "answer_count": 2, "score": 1, "last_activity_date": 1479933676, "creation_date": 1479933139, "question_id": 40773682, "link": "https://stackoverflow.com/questions/40773682/trouble-while-accessing-to-a-method", "title": "Trouble while accessing to a method", "body": "<p>I'm beginning to use jquery and Model View ViewModel and I encounter a problem with the utilisation of this with the Event Handler Attachment : on().\nMy first class is TicTacToeModel which manipulates a TicTacToe game in memory :</p>\n\n<pre><code>var TicTacToeModel = function () {\n        Observable.call(this);\n        this.grid = new Array(3);\n        for (let i = 0; i &lt; this.grid.length; ++i) {\n            this.grid[i] = new Array(3);\n        }\n    };\n//Some prototype function\n//...\n</code></pre>\n\n<p>I have another class, TicTacToeController which depends on the first class and which manages the graphic part of the game with a manipulation of the DOM :</p>\n\n<pre><code>var TicTacToeController = function(game, selector) {\n        this._element = $(selector);\n        this._model = game;\n        this._template = Handlebars.compile(view);\n        this.addListeners();\n        this.render();\n    };\n</code></pre>\n\n<p>(declaration of game : <code>game = new TicTacToeModel();</code>)</p>\n\n<p>So in my second class I have this function :</p>\n\n<pre><code>TicTacToeController.prototype.addListeners = function() {\n    this._model.on('change', this.render, this);\n    this._model.play(0,0);//works\n    this._element.on('click', \"td\", function() {\n        this._model.play(0,0);//doesn't work\n    });\n};\n</code></pre>\n\n<p>And I would like to call the play() function in the cell (0,0) (the function play updates the game in memory) when I click on the cell in my graphic interface but I cannot do it in the .on(). But that seems to be working outside of the .on() function so I suppose a bad utilisation of <code>this</code> causing the problem.</p>\n"}, {"tags": ["javascript", "reactjs"], "comments": [{"owner": {"reputation": 2952, "user_id": 5244995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CPafo.png?s=128&g=1", "display_name": "Jed Fox", "link": "https://stackoverflow.com/users/5244995/jed-fox"}, "edited": false, "score": 0, "creation_date": 1479933426, "post_id": 40773676, "comment_id": 68771333, "body": "Check out <a href=\"https://facebook.github.io/react/docs/refs-and-the-dom.html\" rel=\"nofollow noreferrer\">facebook.github.io/react/docs/refs-and-the-dom.html</a>."}, {"owner": {"reputation": 5270, "user_id": 6356919, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/waPfK.png?s=128&g=1", "display_name": "Chaim Friedman", "link": "https://stackoverflow.com/users/6356919/chaim-friedman"}, "edited": false, "score": 0, "creation_date": 1479933872, "post_id": 40773676, "comment_id": 68771534, "body": "why not pass props to the card? This way you can setState in your show account function and pass that state down to the card."}, {"owner": {"reputation": 8026, "user_id": 9296, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/513676303/picture?type=large", "display_name": "Tzury Bar Yochay", "link": "https://stackoverflow.com/users/9296/tzury-bar-yochay"}, "reply_to_user": {"reputation": 5270, "user_id": 6356919, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/waPfK.png?s=128&g=1", "display_name": "Chaim Friedman", "link": "https://stackoverflow.com/users/6356919/chaim-friedman"}, "edited": false, "score": 0, "creation_date": 1479934195, "post_id": 40773676, "comment_id": 68771679, "body": "@usedToBeFat at declaration time, the chosen value is known. How to I refer to Card&#39;s props from within the <code>showAccount</code> handler?"}, {"owner": {"reputation": 5270, "user_id": 6356919, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/waPfK.png?s=128&g=1", "display_name": "Chaim Friedman", "link": "https://stackoverflow.com/users/6356919/chaim-friedman"}, "edited": false, "score": 0, "creation_date": 1479934682, "post_id": 40773676, "comment_id": 68771912, "body": "in your question you state that once a user choose an item from the auto complete list you want to display said item. If I understood that correctly, then you don&#39;t need the card&#39;s render method. All you need it to call setState which will cause another render, and this time the card will get props that it will display. Or am I missing something?"}, {"owner": {"reputation": 8026, "user_id": 9296, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/513676303/picture?type=large", "display_name": "Tzury Bar Yochay", "link": "https://stackoverflow.com/users/9296/tzury-bar-yochay"}, "reply_to_user": {"reputation": 5270, "user_id": 6356919, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/waPfK.png?s=128&g=1", "display_name": "Chaim Friedman", "link": "https://stackoverflow.com/users/6356919/chaim-friedman"}, "edited": false, "score": 0, "creation_date": 1479934899, "post_id": 40773676, "comment_id": 68772004, "body": "@usedToBeFat - if you can use my code to explain what you mean that will be the best."}, {"owner": {"reputation": 5270, "user_id": 6356919, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/waPfK.png?s=128&g=1", "display_name": "Chaim Friedman", "link": "https://stackoverflow.com/users/6356919/chaim-friedman"}, "edited": false, "score": 0, "creation_date": 1479934930, "post_id": 40773676, "comment_id": 68772017, "body": "ok will work on that now."}], "answers": [{"comments": [{"owner": {"reputation": 2952, "user_id": 5244995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CPafo.png?s=128&g=1", "display_name": "Jed Fox", "link": "https://stackoverflow.com/users/5244995/jed-fox"}, "edited": false, "score": 1, "creation_date": 1479935563, "post_id": 40774185, "comment_id": 68772307, "body": "Why are you doing <code>let infoToDisplay = this.state.infoToDisplay; infoToDisplay = value; this.setState({infoToDisplay});</code> instead of <code>this.setState({infoToDisplay: value});</code>?"}, {"owner": {"reputation": 5270, "user_id": 6356919, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/waPfK.png?s=128&g=1", "display_name": "Chaim Friedman", "link": "https://stackoverflow.com/users/6356919/chaim-friedman"}, "reply_to_user": {"reputation": 2952, "user_id": 5244995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CPafo.png?s=128&g=1", "display_name": "Jed Fox", "link": "https://stackoverflow.com/users/5244995/jed-fox"}, "edited": false, "score": 0, "creation_date": 1479935698, "post_id": 40774185, "comment_id": 68772373, "body": "out of habbit. Like when i have an object in state that is getting filled by an onChange."}, {"owner": {"reputation": 5270, "user_id": 6356919, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/waPfK.png?s=128&g=1", "display_name": "Chaim Friedman", "link": "https://stackoverflow.com/users/6356919/chaim-friedman"}, "edited": false, "score": 0, "creation_date": 1479936849, "post_id": 40774185, "comment_id": 68772881, "body": "would you be able to edit your question to show your code for the card?"}, {"owner": {"reputation": 5270, "user_id": 6356919, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/waPfK.png?s=128&g=1", "display_name": "Chaim Friedman", "link": "https://stackoverflow.com/users/6356919/chaim-friedman"}, "edited": false, "score": 0, "creation_date": 1479937019, "post_id": 40774185, "comment_id": 68772961, "body": "ok just to make sure that the issue isnt the obvious, I called the prop infoToDisplay, yet you are expecting account."}], "tags": [], "owner": {"reputation": 5270, "user_id": 6356919, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/waPfK.png?s=128&g=1", "display_name": "Chaim Friedman", "link": "https://stackoverflow.com/users/6356919/chaim-friedman"}, "is_accepted": true, "score": 1, "last_activity_date": 1479936864, "last_edit_date": 1479936864, "creation_date": 1479935331, "answer_id": 40774185, "question_id": 40773676, "link": "https://stackoverflow.com/questions/40773676/is-it-possible-to-trigger-contained-components-render-from-within-the-container/40774185#40774185", "title": "Is It Possible To Trigger Contained Component&#39;s render from within the Container in React?", "body": "<p>Here is my answer based on how I understand your question.</p>\n\n<pre><code>class CardView extends Component {\n  constructor() {\n    super()\n  }\n\n  render() {\n    if (this.props.account) {\n      return (\n        &lt;p&gt;{this.props.account.account_name}&lt;/p&gt;\n      )\n    }\n    else {\n      return (\n        &lt;p&gt;no data&lt;/p&gt;\n      )\n    }\n\n  }\n}\n  class App extends Component {\n  constructor () {\n    super();\n    this.state = {accounts: [], infoToDisplay: ''}\n    this.showAccount = this.showAccount.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({ accounts: [\n      {account_name: \"foo\", account_id: 1},\n      {account_name: \"bar\", account_id: 2}\n    ]})\n  }\n\n  showAccount (value) {\n    let infoToDisplay = this.state.infoToDisplay;\n    infoToDisplay = value;\n    this.setState({infoToDisplay}); \n    // this line will cause a rerender after the user has chosen something\n    // from the autoComplete list\n  }\n\n  render() {\n    return (      \n      &lt;MuiThemeProvider&gt;\n        &lt;div className=\"App\"&gt;\n        &lt;center&gt;\n        &lt;AutoComplete\n          floatingLabelText=\"account name\"\n          filter={AutoComplete.caseInsensitiveFilter}\n          dataSource={this.state.accounts.map((account) =&gt; account.account_name)}\n          onUpdateInput={this.showAccount}\n        /&gt;&lt;/center&gt;\n        &lt;CardView accounts={this.state.infoToDisplay} /&gt; \n        &lt;/div&gt;\n      &lt;/MuiThemeProvider&gt;\n    );\n  }\n}\n\nexport default App;\n</code></pre>\n\n<p>what I have done, is give the app component state to keep track of the user's selection. I then pass this state as props to the card component. \nWhen the state is full card will show it, so in the showAccount function i call setState on infoToDisplay which causes another render, now the card's props will be full with the latest info and display it. </p>\n\n<p>Hope this is clear.</p>\n"}], "owner": {"reputation": 8026, "user_id": 9296, "user_type": "registered", "accept_rate": 81, "profile_image": "https://graph.facebook.com/513676303/picture?type=large", "display_name": "Tzury Bar Yochay", "link": "https://stackoverflow.com/users/9296/tzury-bar-yochay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 40774185, "answer_count": 1, "score": 2, "last_activity_date": 1479936864, "creation_date": 1479933100, "last_edit_date": 1479933436, "question_id": 40773676, "link": "https://stackoverflow.com/questions/40773676/is-it-possible-to-trigger-contained-components-render-from-within-the-container", "title": "Is It Possible To Trigger Contained Component&#39;s render from within the Container in React?", "body": "<p>So I got <code>App</code> which implements a <code>componentDidMount</code> and <code>render</code>.</p>\n\n<p>App contains 2 components, one, an <code>AutoComplete</code> input, and the other is a <code>CardView</code>.</p>\n\n<p>The plans is that once a user have chosen an item from the <code>AutoComplete</code> list, to display it in the <code>CardView</code></p>\n\n<p>I wonder how would I trigger <code>CardView</code>'s render (i.e. setting it's state) from within the <code>AutoComplete</code> event handler.</p>\n\n<p>See the line that reads:</p>\n\n<p><strong>// willing to trigger CardView's render right here.</strong></p>\n\n<p>In the code below.</p>\n\n<pre><code>import React, { Component } from 'react';\nimport injectTapEventPlugin from 'react-tap-event-plugin';\n\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\nimport AutoComplete from 'material-ui/AutoComplete';\n\n\n// Needed for onTouchTap\n// http://stackoverflow.com/a/34015469/988941\ninjectTapEventPlugin();\n\nimport './App.css';\n\n\nclass App extends Component {\n  constructor () {\n    super();\n    this.state = {accounts: []}\n    this.showAccount = this.showAccount.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({ accounts: [\n      {account_name: \"foo\", account_id: 1},\n      {account_name: \"bar\", account_id: 2}\n    ]})\n  }\n\n  showAccount (value) {\n    // willing to trigger CardView's render right here.\n  }\n\n  render() {\n    return (      \n      &lt;MuiThemeProvider&gt;\n        &lt;div className=\"App\"&gt;\n        &lt;center&gt;\n        &lt;AutoComplete\n          floatingLabelText=\"account name\"\n          filter={AutoComplete.caseInsensitiveFilter}\n          dataSource={this.state.accounts.map((account) =&gt; account.account_name)}\n          onUpdateInput={this.showAccount}\n        /&gt;&lt;/center&gt;\n        &lt;CardView /&gt;\n        &lt;/div&gt;\n      &lt;/MuiThemeProvider&gt;\n    );\n  }\n}\n\nexport default App;\n</code></pre>\n"}, {"tags": ["javascript", "google-maps-api-3"], "comments": [{"owner": {"reputation": 147337, "user_id": 1210329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d432c94998d9fb0a28f6bf2af22cdf96?s=128&d=identicon&r=PG", "display_name": "geocodezip", "link": "https://stackoverflow.com/users/1210329/geocodezip"}, "edited": false, "score": 0, "creation_date": 1479933147, "post_id": 40773664, "comment_id": 68771211, "body": "What does your existing code look like?  Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that demonstrates the problem you ran into trying to do that."}, {"owner": {"reputation": 2379, "user_id": 5045375, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/17ed0af705e0449fe49b74d8814a8ce2?s=128&d=identicon&r=PG", "display_name": "Filip Allberg", "link": "https://stackoverflow.com/users/5045375/filip-allberg"}, "edited": false, "score": 0, "creation_date": 1479937017, "post_id": 40773664, "comment_id": 68772960, "body": "Hello and welcome to StackOverflow. Please take some time to read the help page, especially the sections named <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> and <a href=\"http://stackoverflow.com/help/dont-ask\">&quot;What types of questions should I avoid asking?&quot;</a>. And more importantly, please read <a href=\"http://meta.stackexchange.com/q/156810/204922\">the Stack Overflow question checklist</a>. You might also want to learn about <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Examples</a>."}, {"owner": {"reputation": 3459, "user_id": 3379703, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j2QqI.png?s=128&g=1", "display_name": "Emmanuel Delay", "link": "https://stackoverflow.com/users/3379703/emmanuel-delay"}, "edited": false, "score": 1, "creation_date": 1479994572, "post_id": 40773664, "comment_id": 68798062, "body": "1 marker or multiple markers?  For 1 marker you can use iceblade&#39;s answer"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7202070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6f4bfff1551ccf8429175f7334c6c4e?s=128&d=identicon&r=PG&f=1", "display_name": "L.Culver", "link": "https://stackoverflow.com/users/7202070/l-culver"}, "edited": false, "score": 0, "creation_date": 1479995068, "post_id": 40787463, "comment_id": 68798435, "body": "I need the coordinates on the screen in pixels, not geographic coordinates."}], "tags": [], "owner": {"reputation": 527, "user_id": 5714791, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RsSMU.jpg?s=128&g=1", "display_name": "iceblade", "link": "https://stackoverflow.com/users/5714791/iceblade"}, "is_accepted": false, "score": 0, "last_activity_date": 1479993473, "creation_date": 1479993473, "answer_id": 40787463, "question_id": 40773664, "link": "https://stackoverflow.com/questions/40773664/how-to-find-the-coordinates-of-the-marker-google-maps/40787463#40787463", "title": "How to find the coordinates of the marker google maps", "body": "<p>Try this:</p>\n\n<pre><code>google.maps.event.addListener(marker, 'mouseover', function(e) {\n    var pos = marker.getPosition();\n    var lat = pos.lat();\n    var lng = pos.lng();\n}); \n</code></pre>\n\n<p>That should get you the coordinates of the marker.</p>\n"}], "owner": {"reputation": 1, "user_id": 7202070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6f4bfff1551ccf8429175f7334c6c4e?s=128&d=identicon&r=PG&f=1", "display_name": "L.Culver", "link": "https://stackoverflow.com/users/7202070/l-culver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1479993473, "creation_date": 1479933045, "last_edit_date": 1479980283, "question_id": 40773664, "link": "https://stackoverflow.com/questions/40773664/how-to-find-the-coordinates-of-the-marker-google-maps", "title": "How to find the coordinates of the marker google maps", "body": "<p>Tell me, please, how the handler Event marker/cluster google maps (for example events mouseover) to obtain the coordinates of the Marker/cluster on the Browser window?\nThe documentation says that the OverlayView class contains methods to convert map coordinates to coordinates on the screen. But how to do it I can't understand.\nTo obtain the screen coordinates of the marker I want to block:\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>google.maps.event.addListener(marker, 'mouseover', function(e) {\r\n\r\n    }); </code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["javascript", "json"], "comments": [{"owner": {"reputation": 3697, "user_id": 1848578, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c7e2bfa9bcb3299428c8321c37db0560?s=128&d=identicon&r=PG", "display_name": "qxz", "link": "https://stackoverflow.com/users/1848578/qxz"}, "edited": false, "score": 0, "creation_date": 1479933335, "post_id": 40773637, "comment_id": 68771294, "body": "If that&#39;s actually the contents of your string variable, then it should work. Are you sure that you&#39;re using <code>JSON.parse</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 913, "user_id": 933627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11a2e6d99920269794b61c6719f48d5a?s=128&d=identicon&r=PG", "display_name": "Tyler Kiser", "link": "https://stackoverflow.com/users/933627/tyler-kiser"}, "is_accepted": true, "score": 3, "last_activity_date": 1479933328, "creation_date": 1479933328, "answer_id": 40773730, "question_id": 40773637, "link": "https://stackoverflow.com/questions/40773637/javascript-json-field-has-after-each-pushed-json-string/40773730#40773730", "title": "Javascript JSON field has \\&quot; after each pushed JSON string", "body": "<p>Since your original variable is a string and not an object, it is being inserted into the new object as a string. The \\\" issue is just escaping the quotes so as not to close the string prematurely. </p>\n\n<p>Convert your string into a JSON object to add it to the new object:</p>\n\n<pre><code>JSON.parse(json_string);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 344, "user_id": 4237626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FHTps.jpg?s=128&g=1", "display_name": "Sonny", "link": "https://stackoverflow.com/users/4237626/sonny"}, "is_accepted": false, "score": 0, "last_activity_date": 1479934668, "creation_date": 1479934668, "answer_id": 40774040, "question_id": 40773637, "link": "https://stackoverflow.com/questions/40773637/javascript-json-field-has-after-each-pushed-json-string/40774040#40774040", "title": "Javascript JSON field has \\&quot; after each pushed JSON string", "body": "<p>Your variable <code>elementArrayItemJson</code> is an invalid JSON object. It has 2 root elements so JSON.parse is going to get caught in a Syntax Error due to the <code>,</code>.</p>\n\n<p>The current string shows as follow after stringify:</p>\n\n<pre><code>{\n    \"title\": \"Zebra Long Maxi Dress\",\n    \"subtitle\": \"Unique and comfortable Maxi dress that is easy to wear and fun to be seen in.\",\n    \"quantity\": 1,\n    \"price\": 150,\n    \"currency\": \"RON\",\n    \"image_url\": \"https://dl.airtable.com/1gGAho3dQ8uQfWpa5pEV_anne-1-(8).png\"\n}, {\n    \"title\": \"Blue fan dress\",\n    \"subtitle\": \"This blue fan dress will blow people away. With its custom cut design you will always stand out.\\n\",\n    \"quantity\": 1,\n    \"price\": 100,\n    \"currency\": \"RON\",\n    \"image_url\": \"https://dl.airtable.com/oerRxGtZRuqnI9afPmn0_anne-1-(35).png\"\n}\n</code></pre>\n\n<p>The <code>},{</code> shows that it contains 2 unnamed elements in your string.\nSo some options that you can do is to split the string by doing so:</p>\n\n<pre><code>elementArrayItemJson.replace('},{', '}\\n{');\n</code></pre>\n\n<p>Then split by new line (\\n) to get an array of valid JSON strings:</p>\n\n<pre><code>newElementArrayItemJson.split('\\n');\n</code></pre>\n\n<p>Then you can push each of the elements using <code>JSON.parse(newElementArrayItemJson[0])</code></p>\n\n<p>This solution can be simplified quite a bit but it will show the error.</p>\n\n<p>EDIT: Assuming your variable <code>elementArrayItemJson</code> is surrounded by single quotes since it is a string</p>\n"}], "owner": {"reputation": 417, "user_id": 1907509, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/XKXcf.jpg?s=128&g=1", "display_name": "Ethan Richardson", "link": "https://stackoverflow.com/users/1907509/ethan-richardson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 40773730, "answer_count": 2, "score": 0, "last_activity_date": 1479934668, "creation_date": 1479932917, "last_edit_date": 1479934599, "question_id": 40773637, "link": "https://stackoverflow.com/questions/40773637/javascript-json-field-has-after-each-pushed-json-string", "title": "Javascript JSON field has \\&quot; after each pushed JSON string", "body": "<p>I have a variable with the following string value:</p>\n\n<pre><code>{\"title\":\"Zebra Long Maxi Dress\",\"subtitle\":\"Unique and comfortable Maxi dress that is easy to wear and fun to be seen in.\",\"quantity\":1,\"price\":150,\"currency\":\"RON\",\"image_url\":\"https://dl.airtable.com/1gGAho3dQ8uQfWpa5pEV_anne-1-(8).png\"},{\"title\":\"Blue fan dress\",\"subtitle\":\"This blue fan dress will blow people away. With its custom cut design you will always stand out.\\n\",\"quantity\":1,\"price\":100,\"currency\":\"RON\",\"image_url\":\"https://dl.airtable.com/oerRxGtZRuqnI9afPmn0_anne-1-(35).png\"}\n</code></pre>\n\n<p>I am pushing this to the elements part of the below structure like this :</p>\n\n<pre><code>var messageData = { \n                    recipient : {\n                        id: sender   \n                    },\n                    message:{\n                        attachment:{\n                            type:\"template\",\n                            payload:{\n                                template_type:\"receipt\",\n                                recipient_name: clientName,\n                                order_number: orderNumber,\n                                currency:\"RON\",\n                                payment_method:\"Rambus\",        \n                                //order_url:\"http://www.facebook.com\",\n                                //timestamp:\"1428444852\", \n                                elements:[],\n                                address:{\n                                    street_1:address,\n                                    city:\"Bucharest\",\n                                    postal_code:\"0\",\n                                    state:\"_\",\n                                    country:\"RO\"\n                                },\n                                summary:{\n                                    subtotal:0,\n                                    shipping_cost:0,\n                                    total_tax:0,\n                                    total_cost:totalCost\n                                },\n                                adjustments:[]\n                            } // payload\n                        } // attachment\n                    } // message\n                }; // messageData \n\nmessageData.message.attachment.payload.elements.push(JSON.parse(elementArrayItemJson));\n</code></pre>\n\n<p>and I am getting the following output for the messageData variable, as you can see there is <code>\\\"</code> where there should only be <code>\"</code> and also <code>\"elements\":[\"{\\\"title\\\":\\\"Zebra Long Maxi Dress\\\"</code> has an extra <code>\"</code></p>\n\n<p>I'm not sure what to do to get the JSON to look correct.</p>\n\n<pre><code>{\"recipient\":{\"id\":\"1588309797861804\"},\"message\":{\"attachment\":{\"type\":\"template\",\"payload\":{\"template_type\":\"receipt\",\"recipient_name\":\"Ethan Richardson\",\"order_number\":\"70128\",\"currency\":\"RON\",\"payment_method\":\"Rambus\",\"elements\":[\"{\\\"title\\\":\\\"Zebra Long Maxi Dress\\\",\\\"subtitle\\\":\\\"Unique and comfortable Maxi dress that is easy to wear and fun to be seen in.\\\",\\\"quantity\\\":1,\\\"price\\\":150,\\\"currency\\\":\\\"RON\\\",\\\"image_url\\\":\\\"https://dl.airtable.com/1gGAho3dQ8uQfWpa5pEV_anne-1-(8).png\\\"}\",\"{\\\"title\\\":\\\"Blue fan dress\\\",\\\"subtitle\\\":\\\"This blue fan dress will blow people away. With its custom cut design you will always stand out.\\\\n\\\",\\\"quantity\\\":1,\\\"price\\\":100,\\\"currency\\\":\\\"RON\\\",\\\"image_url\\\":\\\"https://dl.airtable.com/oerRxGtZRuqnI9afPmn0_anne-1-(35).png\\\"}\"],\"address\":{\"street_1\":\"Flat 35 Rossetti Court Byron Road\",\"city\":\"Bucharest\",\"postal_code\":\"0\",\"state\":\"_\",\"country\":\"RO\"},\"summary\":{\"subtotal\":0,\"shipping_cost\":0,\"total_tax\":0,\"total_cost\":250},\"adjustments\":[]}}}}\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "html", "pdf", "export"], "comments": [{"owner": {"reputation": 20489, "user_id": 2026606, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/Ksr3L.jpg?s=128&g=1", "display_name": "Tyler Roper", "link": "https://stackoverflow.com/users/2026606/tyler-roper"}, "edited": false, "score": 0, "creation_date": 1479933038, "post_id": 40773636, "comment_id": 68771155, "body": "Is there a question here?"}, {"owner": {"reputation": 125, "user_id": 5549189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6057d60e0851cc6823c16ead896abaa2?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doh", "link": "https://stackoverflow.com/users/5549189/j-doh"}, "edited": false, "score": 0, "creation_date": 1479933525, "post_id": 40773636, "comment_id": 68771374, "body": "<a href=\"https://chrome.google.com/webstore/detail/full-page-screen-capture/fdpohaocaechififmbbbbbknoalclacl\" rel=\"nofollow noreferrer\">chrome.google.com/webstore/detail/full-page-screen-capture/&hellip;</a>"}, {"owner": {"reputation": 65, "user_id": 4993377, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-wodCzDW5W9o/AAAAAAAAAAI/AAAAAAAABYQ/rX9R4xubufM/photo.jpg?sz=128", "display_name": "jinish shah", "link": "https://stackoverflow.com/users/4993377/jinish-shah"}, "reply_to_user": {"reputation": 20489, "user_id": 2026606, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/Ksr3L.jpg?s=128&g=1", "display_name": "Tyler Roper", "link": "https://stackoverflow.com/users/2026606/tyler-roper"}, "edited": false, "score": 0, "creation_date": 1479953826, "post_id": 40773636, "comment_id": 68777746, "body": "@santi yes. I  want a plugin or code that can do this."}, {"owner": {"reputation": 8174, "user_id": 2491227, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ad5c1442bc53ce0e90950a8cabc35295?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Brown", "link": "https://stackoverflow.com/users/2491227/kevin-brown"}, "edited": false, "score": 0, "creation_date": 1480012751, "post_id": 40773636, "comment_id": 68807950, "body": "<a href=\"http://www.cloudformatter.com\" rel=\"nofollow noreferrer\">cloudformatter.com</a> supports highcharts and such and you can use a scrollable div"}, {"owner": {"reputation": 65, "user_id": 4993377, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-wodCzDW5W9o/AAAAAAAAAAI/AAAAAAAABYQ/rX9R4xubufM/photo.jpg?sz=128", "display_name": "jinish shah", "link": "https://stackoverflow.com/users/4993377/jinish-shah"}, "reply_to_user": {"reputation": 8174, "user_id": 2491227, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ad5c1442bc53ce0e90950a8cabc35295?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Brown", "link": "https://stackoverflow.com/users/2491227/kevin-brown"}, "edited": false, "score": 0, "creation_date": 1480072991, "post_id": 40773636, "comment_id": 68828560, "body": "@kevin. But its uses <a href=\"http://xep.cloudformatter.com/Chandra.svc/\" rel=\"nofollow noreferrer\">xep.cloudformatter.com/Chandra.svc</a> within js so it seems to be some third party. Is it feasible to use? If its server it down then there will be issue right?"}], "owner": {"reputation": 65, "user_id": 4993377, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-wodCzDW5W9o/AAAAAAAAAAI/AAAAAAAABYQ/rX9R4xubufM/photo.jpg?sz=128", "display_name": "jinish shah", "link": "https://stackoverflow.com/users/4993377/jinish-shah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 251, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479962859, "creation_date": 1479932894, "last_edit_date": 1479962859, "question_id": 40773636, "link": "https://stackoverflow.com/questions/40773636/js-jquery-export-to-pdf-scrolling-div-content", "title": "JS/Jquery Export to pdf scrolling div content", "body": "<p>Is it possible to export the contents of the scrollable div which contents table, content &amp; graphs created using highchart to PDF. Also want the styling to remain intact.</p>\n"}, {"tags": ["javascript", "date", "time"], "comments": [{"owner": {"reputation": 123667, "user_id": 257182, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f2c683e7dc0c4d4bcc790f87eaa67301?s=128&d=identicon&r=PG", "display_name": "RobG", "link": "https://stackoverflow.com/users/257182/robg"}, "edited": false, "score": 0, "creation_date": 1480043329, "post_id": 40773579, "comment_id": 68816105, "body": "See <a href=\"http://stackoverflow.com/questions/9989382/add-1-to-current-date/9989458#9989458\"><i>Add +1 to current date</i></a>."}], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 7086660, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dP6ZIBUCQWY/AAAAAAAAAAI/AAAAAAAAABo/kdXGyUWuAG0/photo.jpg?sz=128", "display_name": "Ryan", "link": "https://stackoverflow.com/users/7086660/ryan"}, "is_accepted": false, "score": 1, "last_activity_date": 1479933517, "creation_date": 1479933517, "answer_id": 40773771, "question_id": 40773579, "link": "https://stackoverflow.com/questions/40773579/how-to-pre-set-dates-times-using-javascript/40773771#40773771", "title": "How to Pre-Set Dates/Times using javascript?", "body": "<p>You are simply pulling the date from the Date object and adding 1 with no checks at all regarding the end of the month. The Date object provides a method for addressing this. Use the .getDate() method as you are, but rather than just dumping it to the output, use the .setDate() method with the date you just got + 1. Then you can proceed to use the Date object as you are.</p>\n"}], "owner": {"reputation": 1, "user_id": 6512802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/815306d7d0c857b9f9cc46240ca140c8?s=128&d=identicon&r=PG", "display_name": "MHelmet", "link": "https://stackoverflow.com/users/6512802/mhelmet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1479933517, "creation_date": 1479932694, "question_id": 40773579, "link": "https://stackoverflow.com/questions/40773579/how-to-pre-set-dates-times-using-javascript", "title": "How to Pre-Set Dates/Times using javascript?", "body": "<p>I want authors to be able to schedule posts to be published from Pre-Set Dates/Times using a select box.</p>\n\n<p>I use a JavaScript code that allow the authors to schedule a post in 1 hour, Tomorrow 8 am, Tomorrow after lunch, Tonight, Next monday or Next month.</p>\n\n<p>The problem is that if the current date for example is November 30, 2016, when I select the \"Tomorrow 8 am\" option the date change to November 31, 2016</p>\n\n<p>NOT TO</p>\n\n<p>December 01, 2016</p>\n\n<p>The problem occurs at the end of each month.</p>\n\n<p>I do not know how to resolve it.</p>\n\n<p>Please, help.</p>\n\n<p>The JavaScript Code is:</p>\n\n<pre><code>(function ($) {\n\n    \"use strict\";\n\n    $(function () {\n\n        // Get next coming weekday. 0 = Sunday, 1 = Monday...\n        Date.prototype.getNextWeekDay = function (d) {\n            if (d) {\n                var next = this;\n                next.setDate( this.getDate() - this.getDay() + 7 + d );\n                return next;\n            }\n        }\n\n        // Prepend leading zero if &lt; 10. i.e 9 -&gt; 09\n        function pad(n) {\n            return (n &lt; 10) ? (\"0\" + n) : n;\n        }\n\n        // Add hours\n        Date.prototype.addHours= function(h){\n            this.setHours(this.getHours()+h);\n            return this;\n        }\n\n        if($('#timestampdiv:visible').length == 0) {\n\n            // Setup fuzzy items\n            var fuzzy = [langstrings.inoneour, langstrings.tomorroweightam, langstrings.tomorrowafterlunch, langstrings.tonight, langstrings.nextmonday, langstrings.nextmonth, langstrings.reset];\n\n            // Create new select box\n            $('&lt;select class=\"fuzzy-later\"&gt;&lt;option value=\"\"&gt;'+langstrings.postpone+'...&lt;/option&gt;&lt;/select&gt;').insertBefore(\".save-timestamp   \");\n\n            // Add the fuzzy options\n            for (var i = 0; i &lt; fuzzy.length; i++) {\n                $('.fuzzy-later').append('&lt;option value=\"'+fuzzy[i]+'\"&gt;'+fuzzy[i]+'&lt;/option&gt;');\n            }\n\n            // Update date and time when select box changes\n            $('.fuzzy-later').on('change', function(e) {\n\n                // Get current date\n                var now = new Date();\n\n                e.preventDefault();\n\n                var fuzzyChoice = $('.fuzzy-later').find(\":selected\").text();\n\n                switch (fuzzyChoice) {\n                    case langstrings.inoneour :\n                        $('#jj').val(pad(now.getDate()));\n                        $('#hh').val(now.addHours(1).getHours());\n                        $('#mn').val(now.addHours(1).getMinutes());\n                        $('#mm option').eq(now.getMonth()).prop('selected', true);\n                        break;\n                    case langstrings.tomorroweightam :\n                        $('#jj').val(pad(parseInt(now.getDate())+1));\n                        $('#hh').val('08');\n                        $('#mn').val('00');\n                        $('#mm option').eq(now.getMonth()).prop('selected', true);\n                        break;\n                    case langstrings.tomorrowafterlunch :\n                        $('#jj').val(pad(now.getDate()+1));\n                        $('#hh').val('13');\n                        $('#mn').val('00');\n                        $('#mm option').eq(now.getMonth()).prop('selected', true);\n                        break;\n                    case langstrings.tonight :\n                        $('#jj').val(pad(now.getDate()));\n                        $('#hh').val('22');\n                        $('#mn').val('00');\n                        $('#mm option').eq(now.getMonth()).prop('selected', true);\n                        break;\n                    case langstrings.nextmonday :\n                        $('#jj').val(pad(now.getNextWeekDay(1).getDate()));\n                        var nextmondaymonth = pad(now.getNextWeekDay(1).getMonth());\n                        $('#mm option').eq(nextmondaymonth).prop('selected', true);\n                        break;\n                    case langstrings.nextmonth :\n                        var nextmonth = $('#mm').find(\":selected\").index() + 1;\n                        $('#mm option').eq(nextmonth).prop('selected', true);\n                        break;\n                    case langstrings.reset :                        \n                        $('.cancel-timestamp').trigger('click');\n                        $('#mm').prop('selectedIndex', 0);\n                        break;\n                }\n\n            });\n\n        }\n\n    });\n}(jQuery));\n</code></pre>\n"}, {"tags": ["javascript", "angularjs", "regex"], "answers": [{"comments": [{"owner": {"reputation": 1547, "user_id": 2363552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/494dfc5bd2f9011069e4d6bee701163b?s=128&d=identicon&r=PG", "display_name": "machinehead115", "link": "https://stackoverflow.com/users/2363552/machinehead115"}, "edited": false, "score": 0, "creation_date": 1479934569, "post_id": 40773869, "comment_id": 68771849, "body": "This doesn&#39;t really help his regex, it makes it more generic, and it doesn&#39;t do anything to actually make the link appear on the page."}], "tags": [], "owner": {"reputation": 687, "user_id": 6536300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/555dc5e683f23c867da5f98f5974c48e?s=128&d=identicon&r=PG", "display_name": "Atmahadli", "link": "https://stackoverflow.com/users/6536300/atmahadli"}, "is_accepted": false, "score": -1, "last_activity_date": 1479933944, "creation_date": 1479933944, "answer_id": 40773869, "question_id": 40773573, "link": "https://stackoverflow.com/questions/40773573/replace-a-pattern-with-url/40773869#40773869", "title": "replace a pattern with URL", "body": "<p>here is the working regex for you</p>\n\n<p><code>([E]\\d{5}-\\d{2})</code></p>\n\n<p>check here <a href=\"https://regex101.com/r/O6YFlj/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/O6YFlj/1</a></p>\n"}, {"comments": [{"owner": {"reputation": 1547, "user_id": 2363552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/494dfc5bd2f9011069e4d6bee701163b?s=128&d=identicon&r=PG", "display_name": "machinehead115", "link": "https://stackoverflow.com/users/2363552/machinehead115"}, "edited": false, "score": 0, "creation_date": 1479934641, "post_id": 40773891, "comment_id": 68771890, "body": "Yes, that works, but that completely negates the use of the <code>$filter</code> in Angular."}, {"owner": {"reputation": 2105, "user_id": 5884037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sjyWD.jpg?s=128&g=1", "display_name": "blaze_125", "link": "https://stackoverflow.com/users/5884037/blaze-125"}, "edited": false, "score": 0, "creation_date": 1479934686, "post_id": 40773891, "comment_id": 68771915, "body": "Though in his case, I think that <code>text != &quot;E12345-01&quot;</code>"}, {"owner": {"reputation": 423, "user_id": 6071493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9eec383f02a69b44701505dc489a993f?s=128&d=identicon&r=PG", "display_name": "owaisafaq", "link": "https://stackoverflow.com/users/6071493/owaisafaq"}, "reply_to_user": {"reputation": 1547, "user_id": 2363552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/494dfc5bd2f9011069e4d6bee701163b?s=128&d=identicon&r=PG", "display_name": "machinehead115", "link": "https://stackoverflow.com/users/2363552/machinehead115"}, "edited": false, "score": 0, "creation_date": 1479934882, "post_id": 40773891, "comment_id": 68771996, "body": "@machineh Obviously this code was to show that the part of URL Matching was working fine."}, {"owner": {"reputation": 152, "user_id": 3710846, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9195987fd8d54235c37fa8744f8f210f?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Goenka", "link": "https://stackoverflow.com/users/3710846/gaurav-goenka"}, "edited": false, "score": 0, "creation_date": 1479990130, "post_id": 40773891, "comment_id": 68795066, "body": "Thanks! I understand the regex was working. I tested it with another set of code and it did work. However, this does not really solve the underlying issue. Thanks for this though."}], "tags": [], "owner": {"reputation": 423, "user_id": 6071493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9eec383f02a69b44701505dc489a993f?s=128&d=identicon&r=PG", "display_name": "owaisafaq", "link": "https://stackoverflow.com/users/6071493/owaisafaq"}, "is_accepted": false, "score": -1, "last_activity_date": 1479934041, "creation_date": 1479934041, "answer_id": 40773891, "question_id": 40773573, "link": "https://stackoverflow.com/questions/40773573/replace-a-pattern-with-url/40773891#40773891", "title": "replace a pattern with URL", "body": "<p>The problem is not in your URL matching and replacement code. I extracted the following from your code and used it. Worked perfect:</p>\n\n<pre><code>&lt;script&gt;\nvar urlPattern = /^E\\d{5}-\\d{2}$/;\nvar text = \"E12345-01\";\ndocument.write(text.replace(urlPattern, '&lt;a href=\"http://somepage.com?number=$&amp;\"&gt;$&amp;&lt;/a&gt;') + \" | \");\n&lt;/script&gt;\n</code></pre>\n\n<p>The issue must be with the value of text. use <code>console.log(text)</code> to see whether you're getting the right value in your variable or not.</p>\n"}, {"comments": [{"owner": {"reputation": 152, "user_id": 3710846, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9195987fd8d54235c37fa8744f8f210f?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Goenka", "link": "https://stackoverflow.com/users/3710846/gaurav-goenka"}, "edited": false, "score": 0, "creation_date": 1479989859, "post_id": 40773966, "comment_id": 68794903, "body": "This is exactly what I&#39;ve been looking for. Two questions:  1) how does sce work? I just haven&#39;t been able to figure out why $sce is needed here.  2) This does not work in my code right now. Gives a <code>parseUrlFilterFilterProvider</code> error. I maintain an app.js where I write the common services/directives and one controller.js. I D.I.&#39;d this in my controller but that gave another similar error. Any idea how I deal with this?"}, {"owner": {"reputation": 152, "user_id": 3710846, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9195987fd8d54235c37fa8744f8f210f?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Goenka", "link": "https://stackoverflow.com/users/3710846/gaurav-goenka"}, "edited": false, "score": 0, "creation_date": 1479991947, "post_id": 40773966, "comment_id": 68796304, "body": "Made a sample <a href=\"http://plnkr.co/edit/uhq2d2LQQ3LAqX2fCQrl?p=preview\" rel=\"nofollow noreferrer\">plnk</a>"}, {"owner": {"reputation": 1547, "user_id": 2363552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/494dfc5bd2f9011069e4d6bee701163b?s=128&d=identicon&r=PG", "display_name": "machinehead115", "link": "https://stackoverflow.com/users/2363552/machinehead115"}, "reply_to_user": {"reputation": 152, "user_id": 3710846, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9195987fd8d54235c37fa8744f8f210f?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Goenka", "link": "https://stackoverflow.com/users/3710846/gaurav-goenka"}, "edited": false, "score": 0, "creation_date": 1480006098, "post_id": 40773966, "comment_id": 68805037, "body": "Here, I updated the <a href=\"http://plnkr.co/edit/GuKyCrnERzgMUX2vqGJ8?p=preview\" rel=\"nofollow noreferrer\">plnk</a> for you. You don&#39;t need to wrap the filter in a <code>document.ready()</code>. Take a look at the $sce link in my answer above, but the basic info is <i>SCE assists in writing code in a way that (a) is secure by default and (b) makes auditing for security vulnerabilities such as XSS, clickjacking, etc. a lot easier.</i>"}, {"owner": {"reputation": 152, "user_id": 3710846, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9195987fd8d54235c37fa8744f8f210f?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Goenka", "link": "https://stackoverflow.com/users/3710846/gaurav-goenka"}, "edited": false, "score": 0, "creation_date": 1480007249, "post_id": 40773966, "comment_id": 68805605, "body": "Tried everything except <code>&lt;td ng-bind-html=&quot;...</code>. Oh man. Thanks so much for this, though. Works perfectly."}, {"owner": {"reputation": 152, "user_id": 3710846, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9195987fd8d54235c37fa8744f8f210f?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Goenka", "link": "https://stackoverflow.com/users/3710846/gaurav-goenka"}, "edited": false, "score": 0, "creation_date": 1480337732, "post_id": 40773966, "comment_id": 68906461, "body": "Hey, my data is not from a JS/ static data. It comes from a <code>$http.get</code> service. I get a <code>&lt;td ng-bind-html=&quot;item.oldpn | parseUrlFilter:&#39;_blank&#39;&quot;&gt;cmProvider%20%3C-%20%24scm%20%3C-%2&zwnj;&#8203;0parseUrlFilterFilte&zwnj;&#8203;r</code> error when the ng-repeat finally runs.  How I can resolve this? Removing the filter makes the data load properly."}, {"owner": {"reputation": 1547, "user_id": 2363552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/494dfc5bd2f9011069e4d6bee701163b?s=128&d=identicon&r=PG", "display_name": "machinehead115", "link": "https://stackoverflow.com/users/2363552/machinehead115"}, "reply_to_user": {"reputation": 152, "user_id": 3710846, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9195987fd8d54235c37fa8744f8f210f?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Goenka", "link": "https://stackoverflow.com/users/3710846/gaurav-goenka"}, "edited": false, "score": 0, "creation_date": 1480346153, "post_id": 40773966, "comment_id": 68911852, "body": "I can&#39;t really tell what error you&#39;re getting but I updated the plnk to provide some error checking: <a href=\"http://plnkr.co/edit/U3goNTHSFcnUuwLtxNvY?p=preview\" rel=\"nofollow noreferrer\">plnkr.co/edit/U3goNTHSFcnUuwLtxNvY?p=preview</a>"}, {"owner": {"reputation": 152, "user_id": 3710846, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9195987fd8d54235c37fa8744f8f210f?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Goenka", "link": "https://stackoverflow.com/users/3710846/gaurav-goenka"}, "edited": false, "score": 0, "creation_date": 1480360915, "post_id": 40773966, "comment_id": 68920424, "body": "I just realised what a blunder I was making. wrote <code>$scm</code> instead of <code>$sce</code>. Realised from my error statement mentioned in the last comment. Ignore me, bad day!"}], "tags": [], "owner": {"reputation": 1547, "user_id": 2363552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/494dfc5bd2f9011069e4d6bee701163b?s=128&d=identicon&r=PG", "display_name": "machinehead115", "link": "https://stackoverflow.com/users/2363552/machinehead115"}, "is_accepted": true, "score": 1, "last_activity_date": 1479934395, "creation_date": 1479934395, "answer_id": 40773966, "question_id": 40773573, "link": "https://stackoverflow.com/questions/40773573/replace-a-pattern-with-url/40773966#40773966", "title": "replace a pattern with URL", "body": "<p>Without seeing you HTML code I assume that you are actually binding / using the filter there, like so:</p>\n\n<pre><code>&lt;div ng-bind-html=\"'E12345-01' | parseUrlFilter:'_blank'\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>In order to have the filter actually output the link text as code you need to include <a href=\"https://docs.angularjs.org/api/ng/service/$sce#trustAsHtml\" rel=\"nofollow noreferrer\">$sce</a> as a dependency of filter and return the link using <code>$sce.trustAsHtml(link)</code>:</p>\n\n<pre><code>angular.module('app', [])\n  .filter('parseUrlFilter', function($sce) {\n    var urlPattern = /^E\\d{5}-\\d{2}$/;\n    return function(text, target) {\n      return $sce.trustAsHtml(text.replace(urlPattern, '&lt;a target=\"' + target + '\" href=\"http://somepage.com?number=$&amp;\"&gt;$&amp;&lt;/a&gt;') + ' | ');\n    };\n  });\n</code></pre>\n\n<p>Here is an example <a href=\"http://plnkr.co/edit/U3goNTHSFcnUuwLtxNvY?p=preview\" rel=\"nofollow noreferrer\">plnk</a> of the code working.</p>\n"}, {"tags": [], "owner": {"reputation": 2105, "user_id": 5884037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sjyWD.jpg?s=128&g=1", "display_name": "blaze_125", "link": "https://stackoverflow.com/users/5884037/blaze-125"}, "is_accepted": false, "score": 0, "last_activity_date": 1479935616, "creation_date": 1479935616, "answer_id": 40774244, "question_id": 40773573, "link": "https://stackoverflow.com/questions/40773573/replace-a-pattern-with-url/40774244#40774244", "title": "replace a pattern with URL", "body": "<p>I'm not sure I understand your question, nor your context. My assumption is that you need to extract the number from an incomingString and use that number to generate a new link string. Given those requirements, the below would get you going...</p>\n\n<pre><code>//this var represents the string that would hold the identifier you're interested in\nvar originString = \"blah blah blah E12345-01 more blah blah blah\";\nfunction DoIt(incomingString)\n{\n    //create a regex pattern\n    var urlPattern = new RegExp(/E\\d{5}-\\d{2}/);\n    //get the match\n    var theMatch = urlPattern.exec(incomingString);\n    //add the match to your new url\n    var returnString = \"www.whateversite.com/number=\" + theMatch;\n    //from here you can do whatever you want with that string\n    //for now, I'll just return it as is...\n    return returnString;\n}\nconsole.log(DoIt(originString));\n</code></pre>\n"}], "owner": {"reputation": 152, "user_id": 3710846, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9195987fd8d54235c37fa8744f8f210f?s=128&d=identicon&r=PG&f=1", "display_name": "Gaurav Goenka", "link": "https://stackoverflow.com/users/3710846/gaurav-goenka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 40773966, "answer_count": 4, "score": 1, "last_activity_date": 1480002025, "creation_date": 1479932671, "last_edit_date": 1495539958, "question_id": 40773573, "link": "https://stackoverflow.com/questions/40773573/replace-a-pattern-with-url", "title": "replace a pattern with URL", "body": "<p>The idea is taken from <a href=\"https://stackoverflow.com/questions/37684/how-to-replace-plain-urls-with-links\">here</a></p>\n\n<p>I have the following code:</p>\n\n<pre><code>myApp.filter('parseUrlFilter', function () {\nvar urlPattern = /^E\\d{5}-\\d{2}$/;\nreturn function (text, target) {\n    return text.replace(urlPattern, '&lt;a target=\"' + target + '\" href=\"http://somepage.com?number=$&amp;\"&gt;$&amp;&lt;/a&gt;') + \" | \";\n};\n});\n</code></pre>\n\n<p>I'm still trying to understand how this code exactly works but it does not convert the text to URL.</p>\n\n<p>Like <code>E12345-01</code> does not become <code>somepage.com?number=E12345-01</code></p>\n\n<p>I think I'm missing something about how the regex works here. Any help will be appreciated.</p>\n\n<p>Edit: added <a href=\"http://plnkr.co/edit/uhq2d2LQQ3LAqX2fCQrl?p=preview\" rel=\"nofollow noreferrer\">plnkr</a> with somewhat working answer of machinehead115</p>\n"}, {"tags": ["javascript", "jquery", "backbone.js", "promise"], "comments": [{"owner": {"reputation": 507133, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 2, "creation_date": 1479932894, "post_id": 40773473, "comment_id": 68771084, "body": "Because jQuery &quot;promises&quot; are <a href=\"http://stackoverflow.com/q/23744612/1048572\">not pure</a>?"}, {"owner": {"reputation": 155, "user_id": 6809437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7d5fbe4fa6c180b1726f75d4dd7c43?s=128&d=identicon&r=PG&f=1", "display_name": "FaltFe", "link": "https://stackoverflow.com/users/6809437/faltfe"}, "reply_to_user": {"reputation": 507133, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1479933501, "post_id": 40773473, "comment_id": 68771362, "body": "So if I understand this correct it is saver to use Promise.js as long as I use jQuery &lt; 3.0 because jQuery don&#39;t handle promises always correct?"}, {"owner": {"reputation": 14231, "user_id": 1218980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c6b54df38abce7b1c35f499a1d4a67?s=128&d=identicon&r=PG", "display_name": "Emile Bergeron", "link": "https://stackoverflow.com/users/1218980/emile-bergeron"}, "edited": false, "score": 0, "creation_date": 1479933841, "post_id": 40773473, "comment_id": 68771518, "body": "@FelixFaltin only if you use code that needs compliant promises. Otherwise, there are no reasons."}, {"owner": {"reputation": 507133, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1479934054, "post_id": 40773473, "comment_id": 68771614, "body": "Well, jQuery 3 did fix <i>some</i> issues, but plain promises are still easier to work with."}, {"owner": {"reputation": 14231, "user_id": 1218980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c6b54df38abce7b1c35f499a1d4a67?s=128&d=identicon&r=PG", "display_name": "Emile Bergeron", "link": "https://stackoverflow.com/users/1218980/emile-bergeron"}, "reply_to_user": {"reputation": 507133, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1479934205, "post_id": 40773473, "comment_id": 68771690, "body": "@Bergi but seeing the example in the question, there are no apparent reasons."}, {"owner": {"reputation": 507133, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "reply_to_user": {"reputation": 14231, "user_id": 1218980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c6b54df38abce7b1c35f499a1d4a67?s=128&d=identicon&r=PG", "display_name": "Emile Bergeron", "link": "https://stackoverflow.com/users/1218980/emile-bergeron"}, "edited": false, "score": 0, "creation_date": 1479934376, "post_id": 40773473, "comment_id": 68771761, "body": "@EmileBergeron uh, a <code>.catch()</code> that works like expected looks like a very good reason to me? Although I have no idea what this particular usage is supposed to do"}, {"owner": {"reputation": 14231, "user_id": 1218980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c6b54df38abce7b1c35f499a1d4a67?s=128&d=identicon&r=PG", "display_name": "Emile Bergeron", "link": "https://stackoverflow.com/users/1218980/emile-bergeron"}, "reply_to_user": {"reputation": 507133, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1479934523, "post_id": 40773473, "comment_id": 68771830, "body": "@Bergi why? jQuery and Backbone (<code>error</code> callback) already provides that. That&#39;s a genuine question, what&#39;s the difference between jQuery 3 <code>catch</code> and Promises <code>catch</code>? What&#39;s better then say the Backbone <code>error</code> callback?"}, {"owner": {"reputation": 507133, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "reply_to_user": {"reputation": 14231, "user_id": 1218980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c6b54df38abce7b1c35f499a1d4a67?s=128&d=identicon&r=PG", "display_name": "Emile Bergeron", "link": "https://stackoverflow.com/users/1218980/emile-bergeron"}, "edited": false, "score": 0, "creation_date": 1479934920, "post_id": 40773473, "comment_id": 68772013, "body": "@EmileBergeron Ah, I missed that they added <code>.catch</code> to jQuery 3 as well. But those definitely are better than <code>error</code> callbacks, especially because they <a href=\"http://stackoverflow.com/questions/16371129/chained-promises-not-passing-on-rejection\">chain</a>. Notice that <code>initMainView</code> is <i>always</i> called (unless <code>showLoginView</code> throws), quite unlike the callbacks in your answer."}, {"owner": {"reputation": 14231, "user_id": 1218980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c6b54df38abce7b1c35f499a1d4a67?s=128&d=identicon&r=PG", "display_name": "Emile Bergeron", "link": "https://stackoverflow.com/users/1218980/emile-bergeron"}, "reply_to_user": {"reputation": 507133, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "edited": false, "score": 0, "creation_date": 1479935549, "post_id": 40773473, "comment_id": 68772298, "body": "@Bergi you&#39;re making me doubt myself, but wouldn&#39;t the <code>showLoginView</code> be called only if the <code>fetch</code> fails (promise rejected) and <code>initMainView</code> called only if the <code>fetch</code> succeed? Yeah chaining is definitely nice, but provided by the jqXHR by default."}, {"owner": {"reputation": 155, "user_id": 6809437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7d5fbe4fa6c180b1726f75d4dd7c43?s=128&d=identicon&r=PG&f=1", "display_name": "FaltFe", "link": "https://stackoverflow.com/users/6809437/faltfe"}, "reply_to_user": {"reputation": 14231, "user_id": 1218980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c6b54df38abce7b1c35f499a1d4a67?s=128&d=identicon&r=PG", "display_name": "Emile Bergeron", "link": "https://stackoverflow.com/users/1218980/emile-bergeron"}, "edited": false, "score": 0, "creation_date": 1479935955, "post_id": 40773473, "comment_id": 68772487, "body": "@EmileBergeron this was also my thought. That is is a kind of if-else statement."}, {"owner": {"reputation": 507133, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "reply_to_user": {"reputation": 14231, "user_id": 1218980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c6b54df38abce7b1c35f499a1d4a67?s=128&d=identicon&r=PG", "display_name": "Emile Bergeron", "link": "https://stackoverflow.com/users/1218980/emile-bergeron"}, "edited": false, "score": 1, "creation_date": 1479937811, "post_id": 40773473, "comment_id": 68773317, "body": "@EmileBergeron No, <code>initMainView</code> is called whenever the <code>fetch(\u2026).catch(\u2026)</code> fulfills. See also <a href=\"http://stackoverflow.com/questions/16371129/chained-promises-not-passing-on-rejection\">the question</a> I linked above and maybe <a href=\"http://stackoverflow.com/q/24662289/1048572\">this</a>"}], "answers": [{"comments": [{"owner": {"reputation": 155, "user_id": 6809437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7d5fbe4fa6c180b1726f75d4dd7c43?s=128&d=identicon&r=PG&f=1", "display_name": "FaltFe", "link": "https://stackoverflow.com/users/6809437/faltfe"}, "edited": false, "score": 0, "creation_date": 1479933974, "post_id": 40773531, "comment_id": 68771571, "body": "Thanks for that. At the moment I get an error within the <i>initMainView</i> that this is unknow.     initMainView: function() {         this.appView = new sand.ApplicationView({             model: this.model     });"}, {"owner": {"reputation": 14231, "user_id": 1218980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c6b54df38abce7b1c35f499a1d4a67?s=128&d=identicon&r=PG", "display_name": "Emile Bergeron", "link": "https://stackoverflow.com/users/1218980/emile-bergeron"}, "reply_to_user": {"reputation": 155, "user_id": 6809437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7d5fbe4fa6c180b1726f75d4dd7c43?s=128&d=identicon&r=PG&f=1", "display_name": "FaltFe", "link": "https://stackoverflow.com/users/6809437/faltfe"}, "edited": false, "score": 0, "creation_date": 1479934129, "post_id": 40773531, "comment_id": 68771651, "body": "@FelixFaltin if you have a new problem which you can&#39;t solve, please ask a new question."}], "tags": [], "owner": {"reputation": 14231, "user_id": 1218980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c6b54df38abce7b1c35f499a1d4a67?s=128&d=identicon&r=PG", "display_name": "Emile Bergeron", "link": "https://stackoverflow.com/users/1218980/emile-bergeron"}, "is_accepted": true, "score": 2, "last_activity_date": 1479933791, "last_edit_date": 1495540906, "creation_date": 1479932520, "answer_id": 40773531, "question_id": 40773473, "link": "https://stackoverflow.com/questions/40773473/backbone-with-promise-js-or-pure-jquery-to-resolve-promises/40773531#40773531", "title": "Backbone with Promise.js or pure jQuery to resolve promises", "body": "<p>The reason why someone might use Promise.js with Backbone could be to integrate easily with another lib but without the code, it's only speculations.</p>\n\n<p>As <a href=\"https://stackoverflow.com/questions/40773473/backbone-with-promise-js-or-pure-jquery-to-resolve-promises#comment68771084_40773473\">mentionned by Bergi</a>:</p>\n\n<blockquote>\n  <p>Because jQuery \"promises\" are <a href=\"https://stackoverflow.com/q/23744612/1048572\">not pure</a>?</p>\n</blockquote>\n\n<p>This was <a href=\"https://stackoverflow.com/a/23744774/1218980\">fixed in jQuery 3</a>.</p>\n\n<hr>\n\n<p>Backbone async functions like <a href=\"http://backbonejs.org/#Model-fetch\" rel=\"nofollow noreferrer\"><code>fetch</code></a> uses <a href=\"https://api.jquery.com/jQuery.ajax/\" rel=\"nofollow noreferrer\">jQuery's <code>ajax</code></a> in the background and it returns a jqXHR object.</p>\n\n<blockquote>\n  <p>The jQuery XMLHttpRequest (jqXHR) object returned by <code>$.ajax()</code> as of\n  jQuery 1.5 is a superset of the browser's native XMLHttpRequest\n  object.</p>\n  \n  <p>[it] implement the\n  Promise interface, giving them all the properties, methods, and\n  behavior of a Promise (see <a href=\"https://api.jquery.com/category/deferred-object/\" rel=\"nofollow noreferrer\">Deferred object</a> for more information).</p>\n</blockquote>\n\n<p>Also, you could use Backbone async functions callbacks and options directly:</p>\n\n<pre><code>run: function () {\n    if (this.initialAppViewMethod) {\n        this.model.get('session').fetch({\n            context: this,\n            error: this.showLoginView,\n            success: this.initMainView\n        });\n    }\n},\n</code></pre>\n\n<p>It would be enough. </p>\n"}], "owner": {"reputation": 155, "user_id": 6809437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7d5fbe4fa6c180b1726f75d4dd7c43?s=128&d=identicon&r=PG&f=1", "display_name": "FaltFe", "link": "https://stackoverflow.com/users/6809437/faltfe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 40773531, "answer_count": 1, "score": 1, "last_activity_date": 1479933791, "creation_date": 1479932348, "question_id": 40773473, "link": "https://stackoverflow.com/questions/40773473/backbone-with-promise-js-or-pure-jquery-to-resolve-promises", "title": "Backbone with Promise.js or pure jQuery to resolve promises", "body": "<p>I've to manage a project made with Backbone.js. The project was first released in 2013. At the moment I try to figure out what they did before.</p>\n\n<p>I found out that they use quite often the <a href=\"https://www.promisejs.org/\" rel=\"nofollow noreferrer\">Promise.js</a> libery to communicate with the ReST-Server like the example underneath</p>\n\n<pre><code>run: function () {\n    if (this.initialAppViewMethod) {\n        Promise.resolve(this.model.get('session').fetch())\n            .catch(this.showLoginView.bind(this))\n            .then(this.initMainView.bind(this));\n    }\n},\n</code></pre>\n\n<p>I've been wondering if there is a certain reason why they have used Promise.js instead the already used jquery.js liberay to do promises?</p>\n\n<p>BTW: How can I convert this script to use pure jQuery functionallity?</p>\n"}]