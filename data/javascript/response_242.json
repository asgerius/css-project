[{"tags": ["javascript", "node.js", "es6-promise"], "answers": [{"tags": [], "owner": {"reputation": 2662, "user_id": 10443105, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9CdeAHKgoxY/AAAAAAAAAAI/AAAAAAAAAHo/UQGyNrqE0ao/photo.jpg?sz=128", "display_name": "Tarek Essam", "link": "https://stackoverflow.com/users/10443105/tarek-essam"}, "is_accepted": false, "score": 4, "last_activity_date": 1567037101, "creation_date": 1567037101, "answer_id": 57701388, "question_id": 57701337, "link": "https://stackoverflow.com/questions/57701337/node-js-why-would-a-promise-appear-to-return-both-fulfilled-and-rejected/57701388#57701388", "title": "Node.js - Why would a Promise appear to return both fulfilled and rejected?", "body": "<p>The then &amp; catch should receive a callback function, you are calling console.log.</p>\n\n<pre><code>mongoose.connect(process.env.DB_CONNECTION, { useNewUrlParser: true })\n.then(() =&gt; console.log('connected') )\n.catch(() =&gt; console.log('not connected') );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 574451, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "is_accepted": true, "score": 2, "last_activity_date": 1567037881, "creation_date": 1567037881, "answer_id": 57701462, "question_id": 57701337, "link": "https://stackoverflow.com/questions/57701337/node-js-why-would-a-promise-appear-to-return-both-fulfilled-and-rejected/57701462#57701462", "title": "Node.js - Why would a Promise appear to return both fulfilled and rejected?", "body": "<p>Your actually calling both <code>console.log()</code> statements BEFORE the promise resolves or rejects.  This is because you're not putting them inside a function and passing that function to <code>.then()</code> and <code>.catch()</code>.  Instead, you're calling them immediately and then passing their return value to <code>.then()</code> and <code>.catch()</code>.  Remember, you always have to pass a function reference to <code>.then()</code> and <code>.catch()</code> so that the promise infrastructure can call that function sometime LATER.</p>\n\n<p>In fact, your code is analogous to this:</p>\n\n<pre><code>mongoose.connect(process.env.DB_CONNECTION, { useNewUrlParser: true })\n    .then(undefined)\n    .catch(undefined);\n\n// these will both get called before the above promise resolves or rejects\nconsole.log('connected');\nconsole.log('not connected')\n</code></pre>\n\n<p>You call the two <code>console.log()</code> statements at the same time as <code>.then()</code> and <code>.catch()</code> are called.  </p>\n\n<hr>\n\n<p>Instead, you need to wrap them inside a callback function that you pass to <code>.then()</code> and <code>.catch()</code> like this:</p>\n\n<pre><code>mongoose.connect(process.env.DB_CONNECTION, { useNewUrlParser: true })\n    .then(() =&gt; console.log('connected') )\n    .catch(() =&gt; console.log('not connected') );\n</code></pre>\n\n<p>Or, perhaps this is more demonstrable with regular functions:</p>\n\n<pre><code>mongoose.connect(process.env.DB_CONNECTION, { useNewUrlParser: true }).then(function() {\n    console.log('connected');\n}).catch(function() {\n    console.log('not connected');\n});\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 11704859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Khu2P.jpg?s=128&g=1", "display_name": "stackedAndOverflowed", "link": "https://stackoverflow.com/users/11704859/stackedandoverflowed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 57701462, "answer_count": 2, "score": 0, "last_activity_date": 1567037881, "creation_date": 1567036646, "question_id": 57701337, "link": "https://stackoverflow.com/questions/57701337/node-js-why-would-a-promise-appear-to-return-both-fulfilled-and-rejected", "title": "Node.js - Why would a Promise appear to return both fulfilled and rejected?", "body": "<p><strong>Node.JS:</strong> Version 10.16.0</p>\n\n<p><strong>Question:</strong> Why would a Promise appear to return both fulfilled and rejected?  </p>\n\n<p><strong>Background:</strong> The following simplified test server is meant to connect to a MongoDB Atlas database. <code>mongoose.connect()</code> returns a promise. For some reason the <code>.then()</code> and <code>.catch()</code> statements are firing and the console prints both 'connected' and 'not connected'. I didn't think that was possible.</p>\n\n<pre><code>\"use strict\";\n\nconst express = require('express');\nconst mongoose = require('mongoose');\n\nconst path = require('path');\n\nrequire('dotenv').config({ path: path.join(__dirname, 'controllers/.env') });\n\nconst app = express();\n\nconst PORT = process.env.PORT || 5000;\n\nmongoose.connect(process.env.DB_CONNECTION, { useNewUrlParser: true })\n    .then( console.log('connected') )\n    .catch( console.log('not connected') );\n\napp.listen(PORT, console.log(`Server started on port ${PORT}`));\n</code></pre>\n"}, {"tags": ["javascript", "npm", "yeoman"], "answers": [{"tags": [], "owner": {"reputation": 333, "user_id": 3723918, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/009d6e06e076755080d6be9ade94a539?s=128&d=identicon&r=PG", "display_name": "m-use", "link": "https://stackoverflow.com/users/3723918/m-use"}, "is_accepted": true, "score": 1, "last_activity_date": 1567064570, "creation_date": 1567064570, "answer_id": 57705381, "question_id": 57701319, "link": "https://stackoverflow.com/questions/57701319/how-do-i-add-a-separator-in-enquirer-js-multiselect-prompt-for-yeoman-generator/57705381#57705381", "title": "How do I add a separator in enquirer.js multiselect prompt for Yeoman generator?", "body": "<p>The answer to my question was a bit buried in the documentation for enquirer: <a href=\"https://github.com/enquirer/enquirer#choice-properties\" rel=\"nofollow noreferrer\">https://github.com/enquirer/enquirer#choice-properties</a> The <code>enquirer-separator</code> package ended up being unnecessary. Here's how I got the separator I needed...</p>\n\n<pre><code>choices: [\n   '160x600',\n   '728x90',\n   { message: '- - - Uncommon - - -', role: 'separator' },\n   '180x150',\n   '600x500'\n]\n</code></pre>\n"}], "owner": {"reputation": 333, "user_id": 3723918, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/009d6e06e076755080d6be9ade94a539?s=128&d=identicon&r=PG", "display_name": "m-use", "link": "https://stackoverflow.com/users/3723918/m-use"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 57705381, "answer_count": 1, "score": 1, "last_activity_date": 1567064570, "creation_date": 1567036380, "question_id": 57701319, "link": "https://stackoverflow.com/questions/57701319/how-do-i-add-a-separator-in-enquirer-js-multiselect-prompt-for-yeoman-generator", "title": "How do I add a separator in enquirer.js multiselect prompt for Yeoman generator?", "body": "<p>I am creating a Yeoman generator using enquirer.js for my prompt and I can't figure out how to add a separator within a multi-select choice set.</p>\n\n<p>I have tried using this package: <a href=\"https://www.npmjs.com/package/enquirer-separator\" rel=\"nofollow noreferrer\">https://www.npmjs.com/package/enquirer-separator</a></p>\n\n<p>Here is my index.js file for the Yeoman generator:</p>\n\n<pre><code>var Generator = require('yeoman-generator');\nconst { prompt } = require('enquirer');\nvar Separator = require('enquirer-separator');\n\nmodule.exports = class extends Generator {\n  async prompting() {\n    this.answers = await prompt([\n      {\n        type: 'multiselect',\n        name: 'sizes',\n        message: 'Sizes:',\n        choices: [\n          '160x600',\n          '728x90',\n          new Separator('- - - Uncommon - - -'),\n          '180x150',\n          '600x500'\n        ]\n      }\n    ]);\n  }\n}\n</code></pre>\n\n<p>I would expect something like this when I run the generator:</p>\n\n<pre><code>Sizes:\n- 160x600\n- 728x90\n- - - Uncommon - - -\n- 180x150\n- 600x500\n</code></pre>\n\n<p>But instead I just get this:</p>\n\n<pre><code>Sizes:\n- 160x600\n- 728x90\n-\n- 180x150\n- 600x500\n</code></pre>\n\n<p>Any thoughts on how I would be able to get the expected prompt would be greatly appreciated!</p>\n"}, {"tags": ["javascript"], "comments": [{"owner": {"reputation": 590, "user_id": 6271741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7JUtU.jpg?s=128&g=1", "display_name": "Spangle", "link": "https://stackoverflow.com/users/6271741/spangle"}, "edited": false, "score": 0, "creation_date": 1567036520, "post_id": 57701314, "comment_id": 101846386, "body": "There are two events you can look at, a key down event and a change event. What you need to do is add an id to those inputs, and then use js to select them and add an event listener to both (I would use a key down event). Inside that function, update the value of the other input."}], "answers": [{"tags": [], "owner": {"reputation": 26112, "user_id": 8526705, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/buwQ5.jpg?s=128&g=1", "display_name": "Dacre Denny", "link": "https://stackoverflow.com/users/8526705/dacre-denny"}, "is_accepted": true, "score": 3, "last_activity_date": 1597157541, "last_edit_date": 1597157541, "creation_date": 1567036755, "answer_id": 57701351, "question_id": 57701314, "link": "https://stackoverflow.com/questions/57701314/javascript-how-to-calculate-and-update-input-field-value-based-on-inserted-valu/57701351#57701351", "title": "JavaScript: How to calculate and update input field value based on inserted value from the other", "body": "<p>A simple solution would be to implement event handlers that perform the respective arithmetic for each input element. Some things to consider would be:</p>\n<ul>\n<li>ensuring the user supplied input is a valid number. Below I parse the current string value of the updated input and ensure the parsed result is a valid number before performing the arthimetic</li>\n<li>use the <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/input_event\" rel=\"nofollow noreferrer\"><code>input</code></a> event ensure that arthimetic and input updates are peformed immediatly, and for different user interactions (keypress, paste from keyboard, etc)</li>\n</ul>\n<p>In code this can be written as:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>/* Query document for first and second input elements */\nconst inputFirst = document.querySelector('input[name=\"first\"]');\nconst inputSecond = document.querySelector('input[name=\"second\"]');\n\nconst x = 5;\n\n/* \nAdd event handler for the input event that will be run when user interaction \nwith input causes value change \n*/\ninputFirst.addEventListener(\"input\", (event) =&gt; {\n\n  /* Obtain current numeric value for this input after user interaction */\n  const value = Number.parseFloat(event.target.value);\n\n  if(!Number.isNaN(value)) {\n     /* \n     The value is a number, so we're safe to use it for arithmetic. Here\n     we update the value of the secondInput from the input event of the\n     firstInput \n     */\n     inputSecond.value = value * x;\n  }\n  \n});\n\ninputSecond.addEventListener(\"input\", (event) =&gt; {\n  \n  const value = Number.parseFloat(event.target.value);\n\n  if(!Number.isNaN(value)) {\n     inputFirst.value = value / x;\n  }\n  \n});</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>First: &lt;input type=\"text\" name=\"first\"&gt;\nSecond: &lt;input type=\"text\" name=\"second\"&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 39, "user_id": 11596796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f79f45ef00bf305b6f724cd11d60cb0?s=128&d=identicon&r=PG&f=1", "display_name": "Jimmy", "link": "https://stackoverflow.com/users/11596796/jimmy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 57701351, "answer_count": 1, "score": 3, "last_activity_date": 1597157541, "creation_date": 1567036335, "last_edit_date": 1567039559, "question_id": 57701314, "link": "https://stackoverflow.com/questions/57701314/javascript-how-to-calculate-and-update-input-field-value-based-on-inserted-valu", "title": "JavaScript: How to calculate and update input field value based on inserted value from the other", "body": "<p>I have two input fields and a variable:</p>\n\n<pre><code>var x = 5;\n\nFirst: &lt;input type=\"text\" name=\"first\"&gt;\nSecond: &lt;input type=\"text\" name=\"second\"&gt;\n</code></pre>\n\n<p>When I input a value in the first input field I want to update and display the second input field value with: <code>first-input-field-value * x</code></p>\n\n<p>When I input a value in the second input field I want to update and display the first input field value with: <code>x / second-input-field-value</code></p>\n"}, {"tags": ["javascript", "reduce"], "answers": [{"comments": [{"owner": {"reputation": 38349, "user_id": 10221765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e762fef8d87381d5cbd58d851d1b816?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Bashford", "link": "https://stackoverflow.com/users/10221765/jack-bashford"}, "edited": false, "score": 2, "creation_date": 1567037496, "post_id": 57701342, "comment_id": 101846540, "body": "Use <code>concat</code> instead of spreading to make this more efficient: <code>total.concat(current.owner) : total</code>."}], "tags": [], "owner": {"reputation": 566, "user_id": 9991191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/987a714fc1dc156870e5f2989f234c86?s=128&d=identicon&r=PG&f=1", "display_name": "Teiem", "link": "https://stackoverflow.com/users/9991191/teiem"}, "is_accepted": true, "score": 4, "last_activity_date": 1567036689, "creation_date": 1567036689, "answer_id": 57701342, "question_id": 57701306, "link": "https://stackoverflow.com/questions/57701306/using-reduce-instead-of-chaining-filter-and-map/57701342#57701342", "title": "Using Reduce instead of chaining Filter and Map", "body": "<p>The function you are looking for is:</p>\n\n<pre><code>dogs.reduce((total, current) =&gt; current.breed === \"Pug\" ? [...total, current.owner] : total, []);\n</code></pre>\n\n<p>we go over dogs and test <code>current.breed === \"Pug\"</code> for every element, if it is true, we add the owner of the current dog to the <code>total</code> array, else we keep the total array the way it is. </p>\n"}, {"tags": [], "owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "is_accepted": false, "score": 0, "last_activity_date": 1567036747, "creation_date": 1567036747, "answer_id": 57701349, "question_id": 57701306, "link": "https://stackoverflow.com/questions/57701306/using-reduce-instead-of-chaining-filter-and-map/57701349#57701349", "title": "Using Reduce instead of chaining Filter and Map", "body": "<p>You pass an initial array, and whilst reducing only push the mapped value if the value hasn't been filtered out.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const filteredMap = (filter, mapping) =&gt; {\n  return arr =&gt; Array.prototype.reduce.call(arr, (accumulator, value) =&gt; {\n    if (filter(value)) accumulator.push(mapping(value));\n    return accumulator;\n  }, []);\n};\n\nconst getOwners = filteredMap(dog =&gt; dog.breed == 'Pug', dog =&gt; dog.owner);\n\ngetOwners([\n  {name: 'Archie', breed: 'Lurcher', owner: 'Jack'},\n  {name: 'Charlie', breed: 'Pug', owner: 'John'},\n  {name: 'Buddy', breed: 'Pug', owner: 'Mike'}\n]);  // =&gt; [ 'John', 'Mike' ]\n</code></pre>\n\n<p>It might be more clear to write it out as a loop though:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>const filteredMap = (filter, mapping) =&gt; {\n  return arr =&gt; {\n    const res = [];\n    for (const value of arr) {\n        if (filter(value)) res.push(mapping(value));\n    }\n    return res;\n  };\n};\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 11461995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a58a2dfba34d84acbec6af50f2b3848?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/11461995/jake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 0, "accepted_answer_id": 57701342, "answer_count": 2, "score": 2, "last_activity_date": 1567036747, "creation_date": 1567036250, "question_id": 57701306, "link": "https://stackoverflow.com/questions/57701306/using-reduce-instead-of-chaining-filter-and-map", "title": "Using Reduce instead of chaining Filter and Map", "body": "<p>I have a function takes an array of dog objects and returns an array of the names of all the owners.</p>\n\n<pre><code>    dogs = [\n      {name: 'Archie', breed: 'Lurcher', owner: 'Jack'},\n      {name: 'Charlie', breed: 'Pug', owner: 'John'},\n      {name: 'Buddy', breed: 'Pug', owner: 'Mike'}\n    ]\n</code></pre>\n\n<p>I get the result by chaining filter and map, but this means I am looping over the same list twice.  I know this can be done using Reduce but unsure how I would do this.  A lot of examples on Reduce seem to be with numbers which is a little confusing when trying to work my problem out.  </p>\n\n<p>Any help would be appreciated.  Thanks</p>\n\n<pre><code>function getOwners(dogs) {\n\n   return dogs.filter(dog =&gt; dog.breed === 'Pug').map(dog =&gt; dog.owner);\n}\n\n  returns ['John', 'Mike']\n\n</code></pre>\n"}, {"tags": ["javascript", "vue.js", "vue-component"], "answers": [{"comments": [{"owner": {"reputation": 5037, "user_id": 798420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c3a67b6601d494309845b93b90791e66?s=128&d=identicon&r=PG", "display_name": "Adam Youngers", "link": "https://stackoverflow.com/users/798420/adam-youngers"}, "edited": false, "score": 0, "creation_date": 1567058177, "post_id": 57701541, "comment_id": 101850483, "body": "Does appear that order in the template in this case at least defines the order."}], "tags": [], "owner": {"reputation": 21818, "user_id": 8583563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U42av.png?s=128&g=1", "display_name": "skirtle", "link": "https://stackoverflow.com/users/8583563/skirtle"}, "is_accepted": true, "score": 0, "last_activity_date": 1567038725, "creation_date": 1567038725, "answer_id": 57701541, "question_id": 57701268, "link": "https://stackoverflow.com/questions/57701268/how-is-vue-js-component-created-order-set/57701541#57701541", "title": "How is Vue.js component Created() order set?", "body": "<p>I don't believe the ordering is guaranteed. It isn't something you should really be relying on, ideally sibling components shouldn't be talking to each other directly so it shouldn't matter.</p>\n\n<p>In general when Vue renders it will try to reuse child components from the previous render. Various factors influence the VNode matching algorithm to determine which old nodes are paired up to which new nodes. Any components for nodes that already exist won't have their <code>created</code> hook called at all.</p>\n\n<p>Considering just the simple case of a fresh render with no existing components...</p>\n\n<p>You can see how the current code handles this by using <code>debugger</code> statements instead of just console logging. When paused in the debugger you can look through the call stack to see how the components get created.</p>\n\n<p>Currently it appears that Vue will process the children in the order they appear in the <code>children</code> array of the VNode. The method <code>createChild</code> just loops through the array of children that it's passed and that array comes from <code>createElm</code>, which gets it from <code>vnode.children</code>.</p>\n\n<p>I believe that should mean that the <code>created</code> hooks for components will be called in the order they appear in the template, so long as there aren't any slots involved.</p>\n"}], "owner": {"reputation": 5037, "user_id": 798420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c3a67b6601d494309845b93b90791e66?s=128&d=identicon&r=PG", "display_name": "Adam Youngers", "link": "https://stackoverflow.com/users/798420/adam-youngers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "accepted_answer_id": 57701541, "answer_count": 1, "score": 2, "last_activity_date": 1567038725, "creation_date": 1567035837, "question_id": 57701268, "link": "https://stackoverflow.com/questions/57701268/how-is-vue-js-component-created-order-set", "title": "How is Vue.js component Created() order set?", "body": "<p>Given two components, both loaded into a third component, what determines the order that the created lifecycle for each will fire?</p>\n\n<p>Top Level Component</p>\n\n<pre><code>&lt;template&gt;\n   &lt;div&gt;\n        &lt;start-date-filter /&gt;\n        &lt;end-date-filter /&gt;\n   &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nimport StartDateFilter from './StartDateFilter.vue';\nimport EndDateFilter from './EndDateFilter.vue';\n\nexport default {\n    components: {\n       StartDateFilter,\n       EndDateFilter\n    }\n}\n&lt;/script&gt;\n</code></pre>\n\n<p>StartDateFilter Component</p>\n\n<pre><code>&lt;script&gt;\nexport default {\n   created() {\n      console.log('made it first');\n   }\n}\n&lt;/script&gt;\n</code></pre>\n\n<p>EndDateFilter Component</p>\n\n<pre><code>&lt;script&gt;\nexport default {\n   created() {\n      console.log('made it second');\n   }\n}\n&lt;/script&gt;\n</code></pre>\n"}, {"tags": ["javascript", "regex", "unicode"], "comments": [{"owner": {"reputation": 91458, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "edited": false, "score": 1, "creation_date": 1567059852, "post_id": 57701240, "comment_id": 101851083, "body": "Try adding <code>\\p</code> to the second option as well <code>&#47;\\p{Script=Greek}|\\p{Script=Latin}&#47;u.test(&quot;\u03b1&quot;)</code>"}, {"owner": {"reputation": 38072, "user_id": 46395, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ce828f20abb195ef5d971205ee36c27?s=128&d=identicon&r=PG", "display_name": "daxim", "link": "https://stackoverflow.com/users/46395/daxim"}, "edited": false, "score": 0, "creation_date": 1567107238, "post_id": 57701240, "comment_id": 101875214, "body": "<a href=\"http://p3rl.org/recharclass#Extended-Bracketed-Character-Classes\" rel=\"nofollow noreferrer\">Use Perl</a> when you don&#39;t want to be disappointed."}], "answers": [{"tags": [], "owner": {"reputation": 28285, "user_id": 5921, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2854463112421fe6a69cfd104d57701c?s=128&d=identicon&r=PG", "display_name": "machineghost", "link": "https://stackoverflow.com/users/5921/machineghost"}, "is_accepted": true, "score": 0, "last_activity_date": 1567037341, "creation_date": 1567037341, "answer_id": 57701408, "question_id": 57701240, "link": "https://stackoverflow.com/questions/57701240/how-do-you-check-if-string-is-in-either-of-2-scripts-javascript/57701408#57701408", "title": "How do you check if string is in either of 2 scripts javascript", "body": "<p>The <code>test</code> method of a regular expression returns a boolean, so the simplest solution is just to use two such statements, and then combine the booleans they return.</p>\n\n<p>If you want to combine two boolean values in Javascript, you can either use the <code>&amp;&amp;</code> (\"and\") or <code>||</code> (\"or\") operators.  In your case you want to use <code>||</code>:</p>\n\n<pre><code>const candidate = \"\u03b1\";\nconst isGreekOrLatin = /\\p{Script=Greek}/u.test(candidate) ||\n                       /\\p{Script=Latin}/u.test(candidate);\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 2701720, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/801cca1dff7f8ad9012eba2c01b68e80?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/2701720/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 57701408, "answer_count": 1, "score": 0, "last_activity_date": 1567037341, "creation_date": 1567035484, "question_id": 57701240, "link": "https://stackoverflow.com/questions/57701240/how-do-you-check-if-string-is-in-either-of-2-scripts-javascript", "title": "How do you check if string is in either of 2 scripts javascript", "body": "<p>I understand that the following checks for greek unicode script \n<code>/\\p{Script=Greek}/u.test(\"\u03b1\")</code>\nBut is it possible to check is the script is either of 2/3 options? </p>\n\n<p>I tried to do </p>\n\n<p><code>/\\p{Script=Greek|Latin}/u.test(\"\u03b1\")</code>,\n <code>/\\p{Script=Greek}|{Script=Latin}/u.test(\"\u03b1\")</code></p>\n\n<p>But these don't seem to be working.</p>\n"}, {"tags": ["javascript", "jquery"], "comments": [{"owner": {"reputation": 53, "user_id": 11991135, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-npXd_SeDz_s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc4NGZFENQO-wiY3AHnBHbPLj5CyQ/photo.jpg?sz=128", "display_name": "callum", "link": "https://stackoverflow.com/users/11991135/callum"}, "edited": false, "score": 0, "creation_date": 1567086177, "post_id": 57701219, "comment_id": 101865272, "body": "i had to update the codepen link and the code as it was wrong"}, {"owner": {"reputation": 28707, "user_id": 125981, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f2077dbed28ae040719cbe698800ec29?s=128&d=identicon&r=PG", "display_name": "Mark Schultheiss", "link": "https://stackoverflow.com/users/125981/mark-schultheiss"}, "edited": false, "score": 2, "creation_date": 1567091298, "post_id": 57701219, "comment_id": 101868375, "body": "no need to wrap document ready in a document ready <code>$(function() {</code>"}, {"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "reply_to_user": {"reputation": 28707, "user_id": 125981, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f2077dbed28ae040719cbe698800ec29?s=128&d=identicon&r=PG", "display_name": "Mark Schultheiss", "link": "https://stackoverflow.com/users/125981/mark-schultheiss"}, "edited": false, "score": 0, "creation_date": 1567091959, "post_id": 57701219, "comment_id": 101868716, "body": "To add on to @MarkSchultheiss&#39;s comment, the event handlers <i>should</i> be wrapped in document ready, so you can remove one of them, and extend the other to wrap all of your code."}, {"owner": {"reputation": 1936, "user_id": 5568741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VNja2.jpg?s=128&g=1", "display_name": "k3llydev", "link": "https://stackoverflow.com/users/5568741/k3llydev"}, "edited": false, "score": 0, "creation_date": 1567092289, "post_id": 57701219, "comment_id": 101868890, "body": "@callum Hi, can you edit your question adding a little bit more detail about the issue? I still can&#39;t complain what is the problem."}], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 11991135, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-npXd_SeDz_s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc4NGZFENQO-wiY3AHnBHbPLj5CyQ/photo.jpg?sz=128", "display_name": "callum", "link": "https://stackoverflow.com/users/11991135/callum"}, "is_accepted": false, "score": 0, "last_activity_date": 1567097583, "creation_date": 1567097583, "answer_id": 57714710, "question_id": 57701219, "link": "https://stackoverflow.com/questions/57701219/my-auto-correct-form-is-showing-zero-on-value/57714710#57714710", "title": "My auto correct form is showing zero on value", "body": "<p>found it i had to add</p>\n\n<pre><code>if (price === 24.60) {\n        $(\"#plaster\").html( 24.60 );\nhalt\n      } \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28707, "user_id": 125981, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f2077dbed28ae040719cbe698800ec29?s=128&d=identicon&r=PG", "display_name": "Mark Schultheiss", "link": "https://stackoverflow.com/users/125981/mark-schultheiss"}, "is_accepted": true, "score": 1, "last_activity_date": 1567260187, "creation_date": 1567260187, "answer_id": 57738670, "question_id": 57701219, "link": "https://stackoverflow.com/questions/57701219/my-auto-correct-form-is-showing-zero-on-value/57738670#57738670", "title": "My auto correct form is showing zero on value", "body": "<p>Your code is not very simple, has hard coded values and a few issues.</p>\n\n<p>First simplify and DRY the code - I created a name space (<code>myApp</code>) for stuff to avoid global variables which is generally bad. I then moved the data into a data object and out of the complex if/else if/else you had set up and simplified that to a simple call using that data. Note now <code>pricesRanges</code> now holds the range where the values change so is easier to maintain and also not embedded in the code so you can add adjust and remove ranges without changing the logic as it now uses the <code>lookUpMatch</code> function to find that.</p>\n\n<p>I adjusted the animations to simplify and made one out of both of them.  To simplify this I set data attributes for the target using for example <code>targetindex=\"1\"</code>, to facilitate that, I added a class so that if you change the markup from a <code>fieldset</code> to something else it still works using <code>field-group</code>.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var myApp = myApp || {\r\n  pricesRanges: [{\r\n    range: 0,\r\n    bags: 0\r\n  }, {\r\n    range: 10,\r\n    bags: 1\r\n  }, {\r\n    range: 40,\r\n    bags: 2\r\n  }, {\r\n    range: 70,\r\n    bags: 3\r\n  }, {\r\n    range: 80,\r\n    bags: 3\r\n  }, {\r\n    range: 100,\r\n    bags: 4\r\n  }, {\r\n    range: 130,\r\n    bags: 5\r\n  }, {\r\n    range: 160,\r\n    bags: 6\r\n  }, {\r\n    range: 190,\r\n    bags: 7\r\n  }, {\r\n    range: 220,\r\n    bags: 8\r\n  }, {\r\n    range: 250,\r\n    bags: 9\r\n  }, {\r\n    range: 280,\r\n    bags: 10\r\n  }, {\r\n    range: 290,\r\n    bags: 10\r\n  }, {\r\n    range: 390,\r\n    bags: 10\r\n  }],\r\n  basePrice: 6.23,\r\n  maxRange: 390,\r\n  animating: false,\r\n\r\n  // set during processing\r\n  fields: undefined,\r\n  current_fs: undefined,\r\n  next_fs: undefined,\r\n  previous_fs: undefined,\r\n  left: undefined,\r\n  opacity: undefined,\r\n  scale: undefined,\r\n  // functions\r\n  lookUpMatch: function(arr, val, prop) {\r\n    let found = arr.find(function(el) {\r\n      return el[prop] &gt;= val;\r\n    });\r\n    if (!found) {\r\n      return \"notfound\";\r\n    } else {\r\n      if (prop in found) {\r\n        return found;\r\n      } else {\r\n        return \"No such property\";\r\n      }\r\n    }\r\n  },\r\n  nextPrev: function() {\r\n    if (myApp.animating || $(this).is('.is-disabled')) {\r\n      return false;\r\n    }\r\n    let targetIndex = $(this).data(\"targetindex\");\r\n    let isPrev = $(this).is('.previous');\r\n\r\n    myApp.current_fs = $(this).closest('.field-group');\r\n    myApp.next_fs = myApp.current_fs.next('.field-group');\r\n    myApp.previous_fs = myApp.current_fs.prev('.field-group');\r\n\r\n    let fs_CurrIndex = myApp.current_fs.index('.field-group');\r\n    let fs_PrevIndex = myApp.previous_fs.index('.field-group');\r\n    let fs_NextIndex = myApp.next_fs.index('.field-group');\r\n\r\n    //activate next step on progressbar using the index\r\n    let pb = $(\"#progressbar\").find(\"li\");\r\n    pb.eq(targetIndex).toggleClass(\"active\", true);\r\n    pb.eq(fs_CurrIndex).toggleClass(\"active\", !isPrev);\r\n\r\n    let targets = $('.field-group');\r\n    targets.eq(targetIndex).css('opacity', 1).show();\r\n\r\n    //hide the current field-group with style\r\n    myApp.animateHideCurrent(myApp.current_fs);\r\n  },\r\n  animateHideCurrent: function(fsTarget) {\r\n    myApp.animating = true;\r\n    myApp.current_fs.animate({\r\n      opacity: 0\r\n    }, {\r\n      step: function(now, mx) {\r\n        //as the opacity of current_fs reduces to 0 - stored in \"now\"\r\n        //1. scale current_fs down to 80%\r\n        myApp.scale = 1 - (1 - now) * 0.2;\r\n        //2. bring next_fs from the right(50%)\r\n        myApp.left = now * 50 + \"%\";\r\n        //3. increase opacity of next_fs to 1 as it moves in\r\n        myApp.opacity = 1 - now;\r\n        myApp.current_fs.css({\r\n          transform: \"scale(\" + myApp.scale + \")\",\r\n          position: \"absolute\"\r\n        });\r\n        myApp.next_fs.css({\r\n          left: myApp.left,\r\n          opacity: myApp.opacity\r\n        });\r\n      },\r\n      duration: 800,\r\n      complete: function() {\r\n        fsTarget.hide();\r\n        myApp.animating = false;\r\n      }\r\n      // comment out as not in this example\r\n      //this comes from the custom easing plugin\r\n      // ,easing: \"easeInOutBack\"\r\n    });\r\n  },\r\n\r\n  calculate: function() {\r\n    let $price = $(\"#price\");\r\n    let $test = $(\"#test\");\r\n    let $plaster = $(\"#plaster\");\r\n    let $ouch = $(\"#ouch\");\r\n    let testText = \"\";\r\n    let plasterCost = 0;\r\n    // I just went with the name pattern used\r\n    let ouchValue = 0;\r\n    let bags = 0;\r\n    let price = 0;\r\n    let hasAllValues = true;\r\n    myApp.fields.each(function() {\r\n      // validate if length and width both selected by ignore of Corners\r\n      if ($(this).val() == 0 &amp;&amp; !$(this).is('#bead')) {\r\n        hasAllValues = false;\r\n      }\r\n      price = price + ($(this).val() * 1);\r\n    });\r\n    // disable \"Next\" until both width and length selected\r\n    let thisNext = $(this).closest('fieldset').find('.next');\r\n    thisNext\r\n      .prop('disabled', hasAllValues ? '' : 'disabled');\r\n    thisNext.toggleClass('is-disabled', !hasAllValues);\r\n\r\n    $price.html(price.toFixed(2));\r\n    if (price &gt;= myApp.maxRange) {\r\n      // what to do here?\r\n      //  console.log(\"price exceeds max:\", price, myApp.maxRange);\r\n    } else {\r\n      let x = myApp.lookUpMatch(myApp.pricesRanges, price, \"range\");\r\n      ouchValue = x.bags * myApp.basePrice;\r\n      bags = x.bags;\r\n      plasterCost = price + ouchValue;\r\n    }\r\n    $ouch.val(ouchValue);\r\n    // interpolated string\r\n    testText = `You would need ${bags} bags of plaster Costing \u00a3${ouchValue.toFixed(2)}`;\r\n    $test.html(testText);\r\n    $plaster.html(Math.round(plasterCost * 1000) / 1000)\r\n  }\r\n};\r\n\r\n/*\r\n// test some ranges:\r\n// maxRange just allows us to put a fixed point in.\r\nlet ranges = [0, 10, 12, 50, 136, 200, 290, 333, 400];\r\nranges.forEach(function(range) {\r\n  if (range &gt;= myApp.maxRange) {\r\n    console.log(\"range exceeds max:\", range, myApp.maxRange);\r\n  } else {\r\n    let x = myApp.lookUpMatch(myApp.pricesRanges, range, \"range\");\r\n    console.log(\"x\", x, range);\r\n  }\r\n});\r\n*/\r\n\r\n\r\n$(function() {\r\n  // this could be a class also\r\n  myApp.fields = $(\"#CPU,#bead,#GPU\").on('change', myApp.calculate);\r\n  $(\".next\").on('click', myApp.nextPrev);\r\n  $(\".previous\").on('click', myApp.nextPrev)\r\n  $(\".submit\").on('click submit', function() {\r\n    return false;\r\n  });\r\n});</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>/*custom font*/\r\n\r\n@import url(https://fonts.googleapis.com/css?family=Montserrat);\r\n\r\n/*basic reset*/\r\n\r\n* {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\nhtml {\r\n  height: 100%;\r\n  /*Image only BG fallback*/\r\n  /*background = gradient + image pattern combo*/\r\n  background: linear-gradient(rgba(196, 102, 0, 0.6), rgba(155, 89, 182, 0.6));\r\n}\r\n\r\nbody {\r\n  font-family: montserrat, arial, verdana;\r\n}\r\n\r\n\r\n/*form styles*/\r\n\r\n#msform {\r\n  width: 400px;\r\n  margin: 50px auto;\r\n  text-align: center;\r\n  position: relative;\r\n}\r\n\r\n#msform fieldset {\r\n  background: white;\r\n  border: 0 none;\r\n  border-radius: 3px;\r\n  box-shadow: 0 0 15px 1px rgba(0, 0, 0, 0.4);\r\n  padding: 20px 30px;\r\n  box-sizing: border-box;\r\n  width: 80%;\r\n  margin: 0 10%;\r\n  /*stacking fieldsets above each other*/\r\n  position: relative;\r\n}\r\n\r\n\r\n/*Hide all except first fieldset*/\r\n\r\n#msform fieldset:not(:first-of-type) {\r\n  display: none;\r\n}\r\n\r\n\r\n/*inputs*/\r\n\r\n#msform select,\r\n#msform input,\r\n#msform button,\r\n#msform textarea {\r\n  padding: 15px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 3px;\r\n  margin-bottom: 10px;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  font-family: montserrat;\r\n  color: #2C3E50;\r\n  font-size: 13px;\r\n}\r\n\r\n\r\n/*buttons*/\r\n\r\n#msform .action-button {\r\n  width: 100px;\r\n  background: #27AE60;\r\n  font-weight: bold;\r\n  color: white;\r\n  border: 0 none;\r\n  border-radius: 1px;\r\n  cursor: pointer;\r\n  padding: 10px 5px;\r\n  margin: 10px 5px;\r\n}\r\n\r\n#msform .action-button.is-disabled {\r\n  background: #dddddd;\r\n}\r\n\r\n#msform .action-button:hover,\r\n#msform .action-button:focus {\r\n  box-shadow: 0 0 0 2px white, 0 0 0 3px #27AE60;\r\n}\r\n\r\n\r\n/*headings*/\r\n\r\n.fs-title {\r\n  font-size: 15px;\r\n  text-transform: uppercase;\r\n  color: #2C3E50;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.fs-subtitle {\r\n  font-weight: normal;\r\n  font-size: 13px;\r\n  color: #666;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n\r\n/*progressbar*/\r\n\r\n#progressbar {\r\n  margin-bottom: 30px;\r\n  overflow: hidden;\r\n  /*CSS counters to number the steps*/\r\n  counter-reset: step;\r\n}\r\n\r\n#progressbar li {\r\n  list-style-type: none;\r\n  color: white;\r\n  text-transform: uppercase;\r\n  font-size: 9px;\r\n  width: 33.33%;\r\n  float: left;\r\n  position: relative;\r\n}\r\n\r\n#progressbar li:before {\r\n  content: counter(step);\r\n  counter-increment: step;\r\n  width: 20px;\r\n  line-height: 20px;\r\n  display: block;\r\n  font-size: 10px;\r\n  color: #333;\r\n  background: white;\r\n  border-radius: 3px;\r\n  margin: 0 auto 5px auto;\r\n}\r\n\r\n\r\n/*progressbar connectors*/\r\n\r\n#progressbar li:after {\r\n  content: '';\r\n  width: 100%;\r\n  height: 2px;\r\n  background: white;\r\n  position: absolute;\r\n  left: -50%;\r\n  top: 9px;\r\n  z-index: -1;\r\n  /*put it behind the numbers*/\r\n}\r\n\r\n#progressbar li:first-child:after {\r\n  /*connector not needed before the first step*/\r\n  content: none;\r\n}\r\n\r\n\r\n/*marking active/completed steps green*/\r\n\r\n\r\n/*The number of the step and the connector before it = green*/\r\n\r\n#progressbar li.active:before,\r\n#progressbar li.active:after {\r\n  background: #27AE60;\r\n  color: white;\r\n}\r\n\r\n#msform .ms-field-title {\r\n  color: #5a5a5a;\r\n  margin-bottom: 5px;\r\n  font-size: 12px;\r\n  font-family: 'roboto', sans-serif;\r\n  font-weight: 500;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script type=\"text/javascript\" src=\"http://code.jquery.com/jquery-git.js\"&gt;&lt;/script&gt;\r\n\r\n&lt;!-- multistep form --&gt;\r\n&lt;form id=\"msform\"&gt;\r\n  &lt;!-- progressbar --&gt;\r\n  &lt;ul id=\"progressbar\"&gt;\r\n    &lt;li class=\"active\"&gt;Account Setup&lt;/li&gt;\r\n    &lt;li&gt;Social Profiles&lt;/li&gt;\r\n    &lt;li&gt;Personal Details&lt;/li&gt;\r\n  &lt;/ul&gt;\r\n  &lt;!-- fieldsets --&gt;\r\n  &lt;fieldset class=\"field-group\"&gt;\r\n    &lt;h2 class=\"fs-title\"&gt;Create your account&lt;/h2&gt;\r\n    Labour:\r\n    &lt;h3 class=\"fs-subtitle\"&gt;\u00a3&lt;span id=\"plaster\"&gt;&lt;/span&gt;&lt;/h3&gt;&lt;input hidden type=\"text\" id=\"ouch\" /&gt;\r\n    &lt;select name=\"cpu\" id=\"CPU\"&gt;\r\n      &lt;option value=\"0\" selected&gt;Width&lt;/option&gt;\r\n      &lt;option value=\"10\"&gt;2ft&lt;/option&gt;\r\n      &lt;option value=\"20\"&gt;4ft&lt;/option&gt;\r\n      &lt;option value=\"30\"&gt;6ft&lt;/option&gt;\r\n      &lt;option value=\"40\"&gt;8ft&lt;/option&gt;\r\n      &lt;option value=\"50\"&gt;10ft&lt;/option&gt;\r\n      &lt;option value=\"60\"&gt;12ft&lt;/option&gt;\r\n      &lt;option value=\"70\"&gt;14ft&lt;/option&gt;\r\n      &lt;option value=\"80\"&gt;16ft&lt;/option&gt;\r\n      &lt;option value=\"90\"&gt;18ft&lt;/option&gt;\r\n      &lt;option value=\"100\"&gt;20ft&lt;/option&gt;\r\n      &lt;option value=\"110\"&gt;22ft&lt;/option&gt;\r\n      &lt;option value=\"120\"&gt;24ft&lt;/option&gt;\r\n      &lt;option value=\"130\"&gt;26ft&lt;/option&gt;\r\n      &lt;option value=\"140\"&gt;28ft&lt;/option&gt;\r\n      &lt;option value=\"150\"&gt;30ft&lt;/option&gt;\r\n    &lt;/select&gt;\r\n    &lt;select name=\"GPU\" id=\"GPU\"&gt;\r\n      &lt;option value=\"0\" selected&gt;Length&lt;/option&gt;\r\n      &lt;option value=\"10\"&gt;2ft&lt;/option&gt;\r\n      &lt;option value=\"20\"&gt;4ft&lt;/option&gt;\r\n      &lt;option value=\"30\"&gt;6ft&lt;/option&gt;\r\n      &lt;option value=\"40\"&gt;8ft&lt;/option&gt;\r\n      &lt;option value=\"50\"&gt;10ft&lt;/option&gt;\r\n      &lt;option value=\"60\"&gt;12ft&lt;/option&gt;\r\n      &lt;option value=\"70\"&gt;14ft&lt;/option&gt;\r\n      &lt;option value=\"80\"&gt;16ft&lt;/option&gt;\r\n      &lt;option value=\"90\"&gt;18ft&lt;/option&gt;\r\n      &lt;option value=\"100\"&gt;20ft&lt;/option&gt;\r\n      &lt;option value=\"110\"&gt;22ft&lt;/option&gt;\r\n      &lt;option value=\"120\"&gt;24ft&lt;/option&gt;\r\n      &lt;option value=\"130\"&gt;26ft&lt;/option&gt;\r\n      &lt;option value=\"140\"&gt;28ft&lt;/option&gt;\r\n      &lt;option value=\"150\"&gt;30ft&lt;/option&gt;\r\n    &lt;/select&gt;\r\n    &lt;select name=\"bead\" id=\"bead\"&gt;\r\n      &lt;option value=\"0\" selected&gt;External Corners&lt;/option&gt;\r\n      &lt;option value=\"0\"&gt;0&lt;/option&gt;\r\n      &lt;option value=\"2.25\"&gt;1&lt;/option&gt;\r\n      &lt;option value=\"11.11\"&gt;2&lt;/option&gt;\r\n      &lt;option value=\"3\"&gt;3&lt;/option&gt;\r\n      &lt;option value=\"4\"&gt;4&lt;/option&gt;\r\n      &lt;option value=\"5\"&gt;5&lt;/option&gt;\r\n    &lt;/select&gt;\r\n    &lt;span style=\"text-align:left;\" id=\"test\" class=\"ms-field-title\"&gt;&lt;sup&gt;*&lt;/sup&gt;&lt;/span&gt;\r\n    &lt;button type=\"button\" name=\"next\" class=\"next is-disabled action-button\" data-targetindex=\"1\"&gt;Next&lt;/button&gt;\r\n  &lt;/fieldset&gt;\r\n  &lt;fieldset class=\"field-group\"&gt;\r\n    &lt;h2 class=\"fs-title\"&gt;Social Profiles&lt;/h2&gt;\r\n    &lt;h3 class=\"fs-subtitle\"&gt;Your presence on the social network&lt;/h3&gt;\r\n    &lt;input type=\"text\" name=\"twitter\" placeholder=\"Twitter\" /&gt;\r\n    &lt;input type=\"text\" name=\"facebook\" placeholder=\"Facebook\" /&gt;\r\n    &lt;input type=\"text\" name=\"gplus\" placeholder=\"Google Plus\" /&gt;\r\n    &lt;button type=\"button\" name=\"previous\" class=\"previous action-button\" data-targetindex=\"0\"&gt;Previous&lt;/button&gt;\r\n    &lt;button type=\"button\" name=\"next\" class=\"next action-button\" data-targetindex=\"2\"&gt;Next&lt;/button&gt;\r\n  &lt;/fieldset&gt;\r\n  &lt;fieldset class=\"field-group\"&gt;\r\n    &lt;h2 class=\"fs-title\"&gt;Personal Details&lt;/h2&gt;\r\n    &lt;h3 class=\"fs-subtitle\"&gt;We will never sell it&lt;/h3&gt;\r\n    &lt;input type=\"text\" name=\"fname\" placeholder=\"First Name\" /&gt;\r\n    &lt;input type=\"text\" name=\"lname\" placeholder=\"Last Name\" /&gt;\r\n    &lt;input type=\"text\" name=\"phone\" placeholder=\"Phone\" /&gt;\r\n    &lt;textarea name=\"address\" placeholder=\"Address\"&gt;&lt;/textarea&gt;\r\n    &lt;button type=\"button\" name=\"previous\" class=\"previous action-button\" data-targetindex=\"1\"&gt;Previous&lt;/button&gt;\r\n    &lt;button type=\"submit\" name=\"submit\" class=\"submit action-button\"&gt;Submit&lt;/button&gt;\r\n  &lt;/fieldset&gt;\r\n&lt;/form&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 53, "user_id": 11991135, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-npXd_SeDz_s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc4NGZFENQO-wiY3AHnBHbPLj5CyQ/photo.jpg?sz=128", "display_name": "callum", "link": "https://stackoverflow.com/users/11991135/callum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 57738670, "answer_count": 2, "score": 2, "last_activity_date": 1567260187, "creation_date": 1567035310, "last_edit_date": 1567091802, "question_id": 57701219, "link": "https://stackoverflow.com/questions/57701219/my-auto-correct-form-is-showing-zero-on-value", "title": "My auto correct form is showing zero on value", "body": "<p>When I try and click the external bead to change the value it just says zero, also when I unselect the values it won't zero</p>\n\n<p><a href=\"https://codepen.io/callum-edwards/pen/oNvBWxo\" rel=\"nofollow noreferrer\">https://codepen.io/callum-edwards/pen/oNvBWxo</a></p>\n\n<p>I have tried and can't manage to get this to work I'm sure its because its not being able to go back and get the value of price\nI've been trying for a while now</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>$(function() {\r\n  $(function() {\r\n    var fields = $(\r\n      \"select[name=bead],select[name=cpu],select[name=GPU]\"\r\n    ).change(calculate);\r\n\r\n    function calculate() {\r\n      var price = 0;\r\n      fields.each(function() {\r\n        price += +$(this).val();\r\n      });\r\n      $(\"#price\").html(price.toFixed(2));\r\n      if (price === 0) {\r\n        $(\"#test\").html(\"You would need 0 bags of plaster Costing \u00a30.00\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"0.00\");\r\n        $(\"#plaster\").html(price + 0.00);\r\n      }\r\n      if (price &gt;= 10) {\r\n        $(\"#test\").html(\"You would need 1 bags of plaster Costing \u00a36.23\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"6.23\");\r\n        $(\"#plaster\").html(price + 6.23);\r\n      }\r\n      if (price &gt;= 20) {\r\n        $(\"#test\").html(\"You  would need 1 bags of plaster Costing \u00a366.23\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"6.23\");\r\n\r\n        $(\"#plaster\").html(price + 6.23);\r\n      }\r\n      if (price == 30) {\r\n        $(\"#test\").html(\"You would need 1 bags of plaster Costing \u00a36.23\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"6.23\");\r\n\r\n        $(\"#plaster\").html(((price + 6.23) * 100) / 100);\r\n      }\r\n\r\n      if (price &gt;= 40) {\r\n        $(\"#test\").html(\"You would need 2 bags of plaster Costing \u00a31f2.46\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"12.46\");\r\n\r\n        $(\"#plaster\").html(price + 12.46);\r\n      }\r\n\r\n      if (price &gt;= 50) {\r\n        $(\"#test\").html(\"You would need 2 bags of plaster Costing \u00a312.46\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"12.46\");\r\n\r\n        $(\"#plaster\").html(price + 12.46);\r\n      }\r\n      if (price &gt;= 60) {\r\n        $(\"#test\").html(\"You would need 2 bags of plaster Costing \u00a312.46\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"12.46\");\r\n\r\n        $(\"#plaster\").html(price + 12.46);\r\n      }\r\n      if (price &gt;= 70) {\r\n        $(\"#test\").html(\"You would need 3 bags of plaster Costing \u00a318.69\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"18.69\");\r\n\r\n        $(\"#plaster\").html(price + 18.69);\r\n      }\r\n      if (price &gt;= 80) {\r\n        $(\"#test\").html(\"You would need 3 bags of plaster Costing \u00a318.69\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"18.69\");\r\n        $(\"#plaster\").html(price + 18.69);\r\n      }\r\n      if (price &gt;= 90) {\r\n        $(\"#test\").html(\"You would need 3 bags of plaster Costing \u00a318.69\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"18.69\");\r\n        $(\"#plaster\").html(price + 18.69);\r\n      }\r\n      if (price &gt;= 100) {\r\n        $(\"#test\").html(\"You would need 4 bags of plaster costing \u00a324.92\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"24.92\");\r\n        $(\"#plaster\").html(price + 24.92);\r\n      }\r\n      if (price &gt;= 110) {\r\n        $(\"#test\").html(\"You would need 4 bags of plaster costing \u00a324.92\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"24.92\");\r\n\r\n        $(\"#plaster\").html(price + 24.92);\r\n      }\r\n      if (price &gt;= 120) {\r\n        $(\"#test\").html(\"You would need 4 bags of plaster costing \u00a324.92\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"24.92\");\r\n\r\n        $(\"#plaster\").html(price + 24.92);\r\n      }\r\n      if (price &gt;= 130) {\r\n        $(\"#test\").html(\"You would need 5 bags of plaster costing \u00a331.15\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"31.15\");\r\n\r\n        $(\"#plaster\").html(price + 31.15);\r\n      }\r\n      if (price &gt;= 140) {\r\n        $(\"#test\").html(\"You would need 5 bags of plaster costing \u00a331.15\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"31.15\");\r\n        $(\"#plaster\").html(price + 31.15);\r\n      }\r\n      if (price &gt;= 150) {\r\n        $(\"#test\").html(\"You would need 5 bags of plaster costing \u00a331.15\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"31.15\");\r\n        $(\"#plaster\").html(price + 31.15);\r\n      }\r\n      if (price &gt;= 160) {\r\n        $(\"#test\").html(\"You would need 6 bags of plaster costing \u00a337.38\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"37.38\");\r\n        $(\"#plaster\").html(price + 37.38);\r\n      }\r\n      if (price &gt;= 170) {\r\n        $(\"#test\").html(\"You would need 6 bags of plaster costing \u00a337.38\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"37.38\");\r\n        $(\"#plaster\").html(price + 37.38);\r\n      }\r\n      if (price &gt;= 180) {\r\n        $(\"#test\").html(\"You would need 6 bags of plaster costing \u00a337.38\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"37.38\");\r\n        $(\"#plaster\").html(price + 37.38);\r\n      }\r\n\r\n      if (price &gt;= 190) {\r\n        $(\"#test\").html(\"You would need 7 bags of plaster costing \u00a343.61\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"43.61\");\r\n        $(\"#plaster\").html(price + 43.61);\r\n      }\r\n\r\n      if (price &gt;= 200) {\r\n        $(\"#test\").html(\"You would need 7 bags of plaster costing \u00a343.61\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"43.61\");\r\n        $(\"#plaster\").html(price + 43.61);\r\n      }\r\n      if (price &gt;= 210) {\r\n        $(\"#test\").html(\"You would need 7 bags of plaster costing \u00a343.61\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"43.61\");\r\n        $(\"#plaster\").html(price + 43.61);\r\n      }\r\n      if (price &gt;= 220) {\r\n        $(\"#test\").html(\"You would need 7 bags of plaster costing \u00a343.61\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"49.84\");\r\n        $(\"#plaster\").html(49.84 + price);\r\n        $(\"#test\").html(\"You would need 8 bags of plaster costing \u00a349.84\");\r\n\r\n      }\r\n      if (price &gt;= 230) {\r\n        $(\"#plaster\").html(price + 49.84);\r\n        $(\"#test\").html(\"You would need 8 bags of plaster costing \u00a349.84\");\r\n\r\n      }\r\n      if (price &gt;= 240) {\r\n        $(\"#test\").html(\"You would need 8 bags of plaster costing \u00a349.84\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"49.84\");\r\n        $(\"#plaster\").html(price + 49.84);\r\n      }\r\n      if (price &gt;= 250) {\r\n        $(\"#test\").html(\"You would need 9 bags of plaster costing \u00a357.06\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"57.06\");\r\n        $(\"#plaster\").html(price + 57.06);\r\n      }\r\n      if (price &gt;= 260) {\r\n        $(\"#test\").html(\"You would need 9 bags of plaster costing \u00a357.06\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"57.06\");\r\n        $(\"#plaster\").html(price + 57.06);\r\n      }\r\n      if (price &gt;= 270) {\r\n        $(\"#test\").html(\"You would need 9 bags of plaster costing \u00a357.06\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"57.06\");\r\n        $(\"#plaster\").html(((price + 57.06) * 100) / 100);\r\n      }\r\n      if (price &gt;= 280) {\r\n        $(\"#test\").html(\"You would need 10 bags of plaster costing \u00a362.30\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"62.30\");\r\n        $(\"#plaster\").html(price + 62.3);\r\n      }\r\n      if (price &gt;= 290) {\r\n        $(\"#test\").html(\"You would need 10 bags of plaster costing \u00a362.30\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"62.30\");\r\n        $(\"#plaster\").html(price + 62.3);\r\n      }\r\n      if (price &gt;= 300) {\r\n        $(\"#test\").html(\"You would  need 10 bags of plaster costing \u00a362.30\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"62.30\");\r\n        $(\"#plaster\").html(price + 62.3);\r\n      }\r\n      let p = $(\"#plaster\")\r\n      p.html(Math.round(+p.html() * 1000) / 1000)\r\n    }\r\n  });\r\n});\r\n\r\n//jQuery time\r\nvar current_fs, next_fs, previous_fs; //fieldsets\r\nvar left, opacity, scale; //fieldset properties which we will animate\r\nvar animating; //flag to prevent quick multi-click glitches\r\n\r\n$(\".next\").click(function() {\r\n  if (animating) return false;\r\n  animating = true;\r\n\r\n  current_fs = $(this).parent();\r\n  next_fs = $(this)\r\n    .parent()\r\n    .next();\r\n\r\n  //activate next step on progressbar using the index of next_fs\r\n  $(\"#progressbar li\")\r\n    .eq($(\"fieldset\").index(next_fs))\r\n    .addClass(\"active\");\r\n\r\n  //show the next fieldset\r\n  next_fs.show();\r\n  //hide the current fieldset with style\r\n  current_fs.animate({\r\n    opacity: 0\r\n  }, {\r\n    step: function(now, mx) {\r\n      //as the opacity of current_fs reduces to 0 - stored in \"now\"\r\n      //1. scale current_fs down to 80%\r\n      scale = 1 - (1 - now) * 0.2;\r\n      //2. bring next_fs from the right(50%)\r\n      left = now * 50 + \"%\";\r\n      //3. increase opacity of next_fs to 1 as it moves in\r\n      opacity = 1 - now;\r\n      current_fs.css({\r\n        transform: \"scale(\" + scale + \")\",\r\n        position: \"absolute\"\r\n      });\r\n      next_fs.css({\r\n        left: left,\r\n        opacity: opacity\r\n      });\r\n    },\r\n    duration: 800,\r\n    complete: function() {\r\n      current_fs.hide();\r\n      animating = false;\r\n    },\r\n    //this comes from the custom easing plugin\r\n    easing: \"easeInOutBack\"\r\n  });\r\n});\r\n\r\n$(\".previous\").click(function() {\r\n  if (animating) return false;\r\n  animating = true;\r\n\r\n  current_fs = $(this).parent();\r\n  previous_fs = $(this)\r\n    .parent()\r\n    .prev();\r\n\r\n  //de-activate current step on progressbar\r\n  $(\"#progressbar li\")\r\n    .eq($(\"fieldset\").index(current_fs))\r\n    .removeClass(\"active\");\r\n\r\n  //show the previous fieldset\r\n  previous_fs.show();\r\n  //hide the current fieldset with style\r\n  current_fs.animate({\r\n    opacity: 0\r\n  }, {\r\n    step: function(now, mx) {\r\n      //as the opacity of current_fs reduces to 0 - stored in \"now\"\r\n      //1. scale previous_fs from 80% to 100%\r\n      scale = 0.8 + (1 - now) * 0.2;\r\n      //2. take current_fs to the right(50%) - from 0%\r\n      left = (1 - now) * 50 + \"%\";\r\n      //3. increase opacity of previous_fs to 1 as it moves in\r\n      opacity = 1 - now;\r\n      current_fs.css({\r\n        left: left\r\n      });\r\n      previous_fs.css({\r\n        transform: \"scale(\" + scale + \")\",\r\n        opacity: opacity\r\n      });\r\n    },\r\n    duration: 800,\r\n    complete: function() {\r\n      current_fs.hide();\r\n      animating = false;\r\n    },\r\n    //this comes from the custom easing plugin\r\n    easing: \"easeInOutBack\"\r\n  });\r\n});\r\n\r\n$(\".submit\").click(function() {\r\n  return false;\r\n});</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>/*custom font*/\r\n\r\n@import url(https://fonts.googleapis.com/css?family=Montserrat);\r\n\r\n/*basic reset*/\r\n\r\n* {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\nhtml {\r\n  height: 100%;\r\n  /*Image only BG fallback*/\r\n  /*background = gradient + image pattern combo*/\r\n  background: linear-gradient(rgba(196, 102, 0, 0.6), rgba(155, 89, 182, 0.6));\r\n}\r\n\r\nbody {\r\n  font-family: montserrat, arial, verdana;\r\n}\r\n\r\n\r\n/*form styles*/\r\n\r\n#msform {\r\n  width: 400px;\r\n  margin: 50px auto;\r\n  text-align: center;\r\n  position: relative;\r\n}\r\n\r\n#msform fieldset {\r\n  background: white;\r\n  border: 0 none;\r\n  border-radius: 3px;\r\n  box-shadow: 0 0 15px 1px rgba(0, 0, 0, 0.4);\r\n  padding: 20px 30px;\r\n  box-sizing: border-box;\r\n  width: 80%;\r\n  margin: 0 10%;\r\n  /*stacking fieldsets above each other*/\r\n  position: relative;\r\n}\r\n\r\n\r\n/*Hide all except first fieldset*/\r\n\r\n#msform fieldset:not(:first-of-type) {\r\n  display: none;\r\n}\r\n\r\n\r\n/*inputs*/\r\n\r\n#msform select,\r\n#msform input,\r\n#msform textarea {\r\n  padding: 15px;\r\n  border: 1px solid #ccc;\r\n  border-radius: 3px;\r\n  margin-bottom: 10px;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  font-family: montserrat;\r\n  color: #2C3E50;\r\n  font-size: 13px;\r\n}\r\n\r\n\r\n/*buttons*/\r\n\r\n#msform .action-button {\r\n  width: 100px;\r\n  background: #27AE60;\r\n  font-weight: bold;\r\n  color: white;\r\n  border: 0 none;\r\n  border-radius: 1px;\r\n  cursor: pointer;\r\n  padding: 10px 5px;\r\n  margin: 10px 5px;\r\n}\r\n\r\n#msform .action-button:hover,\r\n#msform .action-button:focus {\r\n  box-shadow: 0 0 0 2px white, 0 0 0 3px #27AE60;\r\n}\r\n\r\n\r\n/*headings*/\r\n\r\n.fs-title {\r\n  font-size: 15px;\r\n  text-transform: uppercase;\r\n  color: #2C3E50;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.fs-subtitle {\r\n  font-weight: normal;\r\n  font-size: 13px;\r\n  color: #666;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n\r\n/*progressbar*/\r\n\r\n#progressbar {\r\n  margin-bottom: 30px;\r\n  overflow: hidden;\r\n  /*CSS counters to number the steps*/\r\n  counter-reset: step;\r\n}\r\n\r\n#progressbar li {\r\n  list-style-type: none;\r\n  color: white;\r\n  text-transform: uppercase;\r\n  font-size: 9px;\r\n  width: 33.33%;\r\n  float: left;\r\n  position: relative;\r\n}\r\n\r\n#progressbar li:before {\r\n  content: counter(step);\r\n  counter-increment: step;\r\n  width: 20px;\r\n  line-height: 20px;\r\n  display: block;\r\n  font-size: 10px;\r\n  color: #333;\r\n  background: white;\r\n  border-radius: 3px;\r\n  margin: 0 auto 5px auto;\r\n}\r\n\r\n\r\n/*progressbar connectors*/\r\n\r\n#progressbar li:after {\r\n  content: '';\r\n  width: 100%;\r\n  height: 2px;\r\n  background: white;\r\n  position: absolute;\r\n  left: -50%;\r\n  top: 9px;\r\n  z-index: -1;\r\n  /*put it behind the numbers*/\r\n}\r\n\r\n#progressbar li:first-child:after {\r\n  /*connector not needed before the first step*/\r\n  content: none;\r\n}\r\n\r\n\r\n/*marking active/completed steps green*/\r\n\r\n\r\n/*The number of the step and the connector before it = green*/\r\n\r\n#progressbar li.active:before,\r\n#progressbar li.active:after {\r\n  background: #27AE60;\r\n  color: white;\r\n}\r\n\r\n#msform .ms-field-title {\r\n  color: #5a5a5a;\r\n  margin-bottom: 5px;\r\n  font-size: 12px;\r\n  font-family: 'roboto', sans-serif;\r\n  font-weight: 500;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script type=\"text/javascript\" src=\"http://code.jquery.com/jquery-git.js\"&gt;&lt;/script&gt;\r\n\r\n&lt;!-- multistep form --&gt;\r\n&lt;form id=\"msform\"&gt;\r\n  &lt;!-- progressbar --&gt;\r\n  &lt;ul id=\"progressbar\"&gt;\r\n    &lt;li class=\"active\"&gt;Account Setup&lt;/li&gt;\r\n    &lt;li&gt;Social Profiles&lt;/li&gt;\r\n    &lt;li&gt;Personal Details&lt;/li&gt;\r\n  &lt;/ul&gt;\r\n  &lt;!-- fieldsets --&gt;\r\n  &lt;fieldset&gt;\r\n    &lt;h2 class=\"fs-title\"&gt;Crreate your account&lt;/h2&gt;\r\n    Labour:\r\n    &lt;h3 class=\"fs-subtitle\"&gt;\u00a3&lt;u name=\"plaster\" id=\"plaster\"&gt;&lt;/u&gt;&lt;/h3&gt;&lt;input hidden type=\"text\" id=\"ouch\" /&gt;\r\n    &lt;select name=\"cpu\" id=\"CPU\"&gt;\r\n      &lt;option value=\"0\" selected&gt;Width&lt;/option&gt;\r\n      &lt;option value=\"10\"&gt;2ft&lt;/option&gt;\r\n      &lt;option value=\"20\"&gt;4ft&lt;/option&gt;\r\n      &lt;option value=\"30\"&gt;6ft&lt;/option&gt;\r\n      &lt;option value=\"40\"&gt;8ft&lt;/option&gt;\r\n      &lt;option value=\"50\"&gt;10ft&lt;/option&gt;\r\n      &lt;option value=\"60\"&gt;12ft&lt;/option&gt;\r\n      &lt;option value=\"70\"&gt;14ft&lt;/option&gt;\r\n      &lt;option value=\"80\"&gt;16ft&lt;/option&gt;\r\n      &lt;option value=\"90\"&gt;18ft&lt;/option&gt;\r\n      &lt;option value=\"100\"&gt;20ft&lt;/option&gt;\r\n      &lt;option value=\"110\"&gt;22ft&lt;/option&gt;\r\n      &lt;option value=\"120\"&gt;24ft&lt;/option&gt;\r\n      &lt;option value=\"130\"&gt;26ft&lt;/option&gt;\r\n      &lt;option value=\"140\"&gt;28ft&lt;/option&gt;\r\n      &lt;option value=\"150\"&gt;30ft&lt;/option&gt;\r\n    &lt;/select&gt;\r\n    &lt;/span&gt;\r\n    &lt;select name=\"GPU\" id=\"GPU\"&gt;\r\n      &lt;option value=\"0\" selected&gt;Length&lt;/option&gt;\r\n      &lt;option value=\"10\"&gt;2ft&lt;/option&gt;\r\n      &lt;option value=\"20\"&gt;4ft&lt;/option&gt;\r\n      &lt;option value=\"30\"&gt;6ft&lt;/option&gt;\r\n      &lt;option value=\"40\"&gt;8ft&lt;/option&gt;\r\n      &lt;option value=\"50\"&gt;10ft&lt;/option&gt;\r\n      &lt;option value=\"60\"&gt;12ft&lt;/option&gt;\r\n      &lt;option value=\"70\"&gt;14ft&lt;/option&gt;\r\n      &lt;option value=\"80\"&gt;16ft&lt;/option&gt;\r\n      &lt;option value=\"90\"&gt;18ft&lt;/option&gt;\r\n      &lt;option value=\"100\"&gt;20ft&lt;/option&gt;\r\n      &lt;option value=\"110\"&gt;22ft&lt;/option&gt;\r\n      &lt;option value=\"120\"&gt;24ft&lt;/option&gt;\r\n      &lt;option value=\"130\"&gt;26ft&lt;/option&gt;\r\n      &lt;option value=\"140\"&gt;28ft&lt;/option&gt;\r\n      &lt;option value=\"150\"&gt;30ft&lt;/option&gt;\r\n    &lt;/select&gt;\r\n    &lt;select name=\"bead\" id=\"bead\"&gt;\r\n      &lt;option value=\"0\" selected&gt;External Corners&lt;/option&gt;\r\n      &lt;option value=\"2.25\"&gt;1&lt;/option&gt;\r\n      &lt;option value=\"11.11\"&gt;2&lt;/option&gt;\r\n      &lt;option value=\"3\"&gt;3&lt;/option&gt;\r\n      &lt;option value=\"4\"&gt;4&lt;/option&gt;\r\n      &lt;option value=\"5\"&gt;5&lt;/option&gt;\r\n    &lt;/select&gt;\r\n    &lt;span style=\"text-align:left;\" id=\"test\" class=\"ms-field-title\"&gt;&lt;sup&gt;*&lt;/sup&gt;&lt;/span&gt;\r\n    &lt;input type=\"button\" name=\"next\" class=\"next action-button\" value=\"Next\" /&gt;\r\n  &lt;/fieldset&gt;\r\n  &lt;fieldset&gt;\r\n    &lt;h2 class=\"fs-title\"&gt;Social Profiles&lt;/h2&gt;\r\n    &lt;h3 class=\"fs-subtitle\"&gt;Your presence on the social network&lt;/h3&gt;\r\n    &lt;input type=\"text\" name=\"twitter\" placeholder=\"Twitter\" /&gt;\r\n    &lt;input type=\"text\" name=\"facebook\" placeholder=\"Facebook\" /&gt;\r\n    &lt;input type=\"text\" name=\"gplus\" placeholder=\"Google Plus\" /&gt;\r\n    &lt;input type=\"button\" name=\"previous\" class=\"previous action-button\" value=\"Previous\" /&gt;\r\n    &lt;input type=\"button\" name=\"next\" class=\"next action-button\" value=\"Next\" /&gt;\r\n  &lt;/fieldset&gt;\r\n  &lt;fieldset&gt;\r\n    &lt;h2 class=\"fs-title\"&gt;Personal Details&lt;/h2&gt;\r\n    &lt;h3 class=\"fs-subtitle\"&gt;We will never sell it&lt;/h3&gt;\r\n    &lt;input type=\"text\" name=\"fname\" placeholder=\"First Name\" /&gt;\r\n    &lt;input type=\"text\" name=\"lname\" placeholder=\"Last Name\" /&gt;\r\n    &lt;input type=\"text\" name=\"phone\" placeholder=\"Phone\" /&gt;\r\n    &lt;textarea name=\"address\" placeholder=\"Address\"&gt;&lt;/textarea&gt;\r\n    &lt;input type=\"button\" name=\"previous\" class=\"previous action-button\" value=\"Previous\" /&gt;\r\n    &lt;input type=\"submit\" name=\"submit\" class=\"submit action-button\" value=\"Submit\" /&gt;\r\n  &lt;/fieldset&gt;\r\n&lt;/form&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I have tried all I know but I'm fairly new to this</p>\n\n<p>I would like the external corner to output a value also the form to change value when unselected.</p>\n"}, {"tags": ["javascript", "jsdom", "react-create-app"], "comments": [{"owner": {"reputation": 4010, "user_id": 2825551, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vCq8n.jpg?s=128&g=1", "display_name": "Jhecht", "link": "https://stackoverflow.com/users/2825551/jhecht"}, "edited": false, "score": 0, "creation_date": 1567035387, "post_id": 57701216, "comment_id": 101846176, "body": "I&#39;ve never used jsdom, but that is valid HTML5 markup from what I am seeing."}, {"owner": {"reputation": 735, "user_id": 7376331, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/bc5b6cc1b9274f1cfd84abb3205d7bc7?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Dahle", "link": "https://stackoverflow.com/users/7376331/tyler-dahle"}, "reply_to_user": {"reputation": 4010, "user_id": 2825551, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vCq8n.jpg?s=128&g=1", "display_name": "Jhecht", "link": "https://stackoverflow.com/users/2825551/jhecht"}, "edited": false, "score": 0, "creation_date": 1567035494, "post_id": 57701216, "comment_id": 101846201, "body": "wait, links work with or without the closing tag??"}, {"owner": {"reputation": 4010, "user_id": 2825551, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vCq8n.jpg?s=128&g=1", "display_name": "Jhecht", "link": "https://stackoverflow.com/users/2825551/jhecht"}, "edited": false, "score": 0, "creation_date": 1567035626, "post_id": 57701216, "comment_id": 101846224, "body": "<a href=\"https://stackoverflow.com/questions/3558119/are-non-void-self-closing-tags-valid-in-html5\" title=\"are non void self closing tags valid in html5\">stackoverflow.com/questions/3558119/&hellip;</a>"}, {"owner": {"reputation": 4010, "user_id": 2825551, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vCq8n.jpg?s=128&g=1", "display_name": "Jhecht", "link": "https://stackoverflow.com/users/2825551/jhecht"}, "edited": false, "score": 0, "creation_date": 1567035661, "post_id": 57701216, "comment_id": 101846233, "body": "took me a good minute to adjust too, coming from XHTML."}, {"owner": {"reputation": 735, "user_id": 7376331, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/bc5b6cc1b9274f1cfd84abb3205d7bc7?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Dahle", "link": "https://stackoverflow.com/users/7376331/tyler-dahle"}, "reply_to_user": {"reputation": 4010, "user_id": 2825551, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/vCq8n.jpg?s=128&g=1", "display_name": "Jhecht", "link": "https://stackoverflow.com/users/2825551/jhecht"}, "edited": false, "score": 1, "creation_date": 1567036283, "post_id": 57701216, "comment_id": 101846335, "body": "Yeah, I guess that is what I get for just assuming :/ lol. Thanks for saving me time!"}], "owner": {"reputation": 735, "user_id": 7376331, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/bc5b6cc1b9274f1cfd84abb3205d7bc7?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Dahle", "link": "https://stackoverflow.com/users/7376331/tyler-dahle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 192, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567035286, "creation_date": 1567035286, "question_id": 57701216, "link": "https://stackoverflow.com/questions/57701216/jsdom-serialize-stripping-closing-link-tags", "title": "JSDOM.serialize() stripping closing link tags", "body": "<p>I am writing a script for my react app build because I need to modify the index.html that gets created a bit. So I make my modifications using jsdom then pass <code>dom.serialize()</code> into fs.writeFile() to write my modifications back to index.html.</p>\n\n<p>This ALMOST gives me what I want, but it ends up looking like this:</p>\n\n<pre><code>&lt;html lang=\"en\"&gt;\n\n&lt;head&gt;\n    &lt;meta charset=\"utf-8\"&gt;\n    &lt;link rel=\"shortcut icon\" href=\"./favicon.ico\"&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width,initial-scale=1\"&gt;\n    &lt;meta name=\"theme-color\" content=\"#000000\"&gt;\n    &lt;link rel=\"manifest\" href=\"./manifest.json\"&gt;\n    &lt;title&gt;React App&lt;/title&gt;\n    &lt;link href=\"./static/css/main.fed2fd6d.chunk.css\" rel=\"stylesheet\"&gt;\n&lt;/head&gt;\n\n&lt;body&gt;&lt;noscript&gt;You need to enable JavaScript to run this app.&lt;/noscript&gt;\n    &lt;div id=\"root\"&gt;&lt;/div&gt;\n    &lt;script src=\"./indexBody.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"./static/js/2.be491123.chunk.js\"&gt;&lt;/script&gt;\n    &lt;script src=\"./static/js/main.9c71d46b.chunk.js\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre>\n\n<p>Where all the link tags have <code>/&gt;</code> taken off the ends of them, which will make me have to manually add them each time... I tried passing the jsdom.serialize into parse5 which would then go back to xmlserializer. This preserved the '/>' at the end but changed the script tags to end in <code>/&gt;</code> instead of <code>&lt;/script&gt;</code>, causing them not to load on my page... </p>\n\n<p>Does anyone know how I might preserve the closing tags on the link elements with jsdom?</p>\n"}, {"tags": ["javascript", "html", "css", "slideshow"], "comments": [{"owner": {"reputation": 590, "user_id": 6271741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7JUtU.jpg?s=128&g=1", "display_name": "Spangle", "link": "https://stackoverflow.com/users/6271741/spangle"}, "edited": false, "score": 0, "creation_date": 1567035379, "post_id": 57701212, "comment_id": 101846173, "body": "Can you please include your javascript and css? Will help if we can see the problem."}, {"owner": {"reputation": 590, "user_id": 6271741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7JUtU.jpg?s=128&g=1", "display_name": "Spangle", "link": "https://stackoverflow.com/users/6271741/spangle"}, "edited": false, "score": 0, "creation_date": 1567035997, "post_id": 57701212, "comment_id": 101846282, "body": "I suggest you add that link to your question, will make it easier for others to read."}, {"owner": {"reputation": 113, "user_id": 2604201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jp8vs.jpg?s=128&g=1", "display_name": "Daniel Mai", "link": "https://stackoverflow.com/users/2604201/daniel-mai"}, "edited": false, "score": 0, "creation_date": 1567096174, "post_id": 57701212, "comment_id": 101870748, "body": "Once the src of imgs was correctly setted with valid paths (urls), just worked: <a href=\"https://codepen.io/danimai/pen/dybROvp\" rel=\"nofollow noreferrer\">codepen.io/danimai/pen/dybROvp</a>"}], "owner": {"reputation": 1, "user_id": 11991652, "user_type": "registered", "profile_image": "https://graph.facebook.com/2618852421493530/picture?type=large", "display_name": "Emman Manuel", "link": "https://stackoverflow.com/users/11991652/emman-manuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567048074, "creation_date": 1567035255, "last_edit_date": 1567048074, "question_id": 57701212, "link": "https://stackoverflow.com/questions/57701212/how-to-automatically-display-first-pic-of-a-slideshow", "title": "how to automatically display first pic of a slideshow", "body": "<p><a href=\"https://codepen.io/uemmanzz/pen/OJLgRZb\" rel=\"nofollow noreferrer\">the html css and javascript</a> I have to press the button in order to show the slideshow other than automatically loading the first picture</p>\n\n<pre><code>        &lt;!-- Slideshow container --&gt;\n        &lt;div class=\"slideshow-container\"&gt;[The html,css and js][1]\n\n    &lt;!-- Full-width images with number and caption text --&gt;\n        &lt;div class=\"mySlides active\"&gt;\n        &lt;div class=\"numbertext\"&gt;1 / 3&lt;/div&gt;\n        &lt;img src=\"slideshow/img1.jpg\" style=\"width:100%\"&gt;\n        &lt;div class=\"text\"&gt;Caption Text&lt;/div&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"mySlides fade\"&gt;\n        &lt;div class=\"numbertext\"&gt;2 / 3&lt;/div&gt;\n        &lt;img src=\"slideshow/img2.jpg\" style=\"width:100%\"&gt;\n        &lt;div class=\"text\"&gt;Caption Two&lt;/div&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"mySlides fade\"&gt;\n        &lt;div class=\"numbertext\"&gt;3 / 3&lt;/div&gt;\n        &lt;img src=\"slideshow/img3.jpg\" style=\"width:100%\"&gt;\n        &lt;div class=\"text\"&gt;Caption Three&lt;/div&gt;\n        &lt;/div&gt;\n\n    &lt;!-- Next and previous buttons --&gt;\n        &lt;a class=\"prev\" onclick=\"plusSlides(-1)\"&gt;&amp;#10094;&lt;/a&gt;\n        &lt;a class=\"next\" onclick=\"plusSlides(1)\"&gt;&amp;#10095;&lt;/a&gt;\n        &lt;/div&gt;\n        &lt;br&gt;\n\n        &lt;!-- The dots/circles --&gt;\n        &lt;div style=\"text-align:center\"&gt;\n        &lt;span class=\"dot\" onclick=\"currentSlide(1)\"&gt;&lt;/span&gt;\n        &lt;span class=\"dot\" onclick=\"currentSlide(2)\"&gt;&lt;/span&gt;\n        &lt;span class=\"dot\" onclick=\"currentSlide(3)\"&gt;&lt;/span&gt;\n        &lt;/div&gt;\n</code></pre>\n\n<p>it displays nothing, i have to press  next button in order to show</p>\n\n<p><a href=\"https://codepen.io/uemmanzz/pen/OJLgRZb\" rel=\"nofollow noreferrer\">enter link description here</a></p>\n"}, {"tags": ["javascript", "node.js", "express", "variables", "ecmascript-6"], "comments": [{"owner": {"reputation": 590, "user_id": 6271741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7JUtU.jpg?s=128&g=1", "display_name": "Spangle", "link": "https://stackoverflow.com/users/6271741/spangle"}, "edited": false, "score": 0, "creation_date": 1567035610, "post_id": 57701211, "comment_id": 101846220, "body": "allPosts.push(result), just wondering, before you make a new request, check the values in allPosts array with a console.log."}, {"owner": {"reputation": 574451, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 0, "creation_date": 1567043888, "post_id": 57701211, "comment_id": 101847597, "body": "This structure will never work because you will be calling <code>resolve(allPosts)</code> before <code>allPosts</code> has anything in it.  You will need to use the promise interface to <code>pool.query()</code> and then use <code>Promise.all()</code> with an array of promises like <code>return Promise.all(userData.map(location =&gt; pool.query(...)))</code>."}, {"owner": {"reputation": 1138, "user_id": 4636110, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0104050baad43a135d1084a1b3ec35d4?s=128&d=identicon&r=PG&f=1", "display_name": "nTuply", "link": "https://stackoverflow.com/users/4636110/ntuply"}, "reply_to_user": {"reputation": 574451, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 0, "creation_date": 1567044223, "post_id": 57701211, "comment_id": 101847653, "body": "@jfriend00 Can you please give an example? I&#39;m so lost with this."}, {"owner": {"reputation": 574451, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 0, "creation_date": 1567044416, "post_id": 57701211, "comment_id": 101847685, "body": "What database are you using?  Does it have a promise interface instead of a plain callback interface?"}, {"owner": {"reputation": 1138, "user_id": 4636110, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0104050baad43a135d1084a1b3ec35d4?s=128&d=identicon&r=PG&f=1", "display_name": "nTuply", "link": "https://stackoverflow.com/users/4636110/ntuply"}, "reply_to_user": {"reputation": 574451, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 0, "creation_date": 1567044444, "post_id": 57701211, "comment_id": 101847691, "body": "@jfriend00 I&#39;m using a MYSQL database.  Let me edit the OP and add the routes code."}, {"owner": {"reputation": 574451, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 0, "creation_date": 1567044489, "post_id": 57701211, "comment_id": 101847703, "body": "I don&#39;t need the routes code.  I need to know the EXACT database library you&#39;re using so I can look up its promise interface."}, {"owner": {"reputation": 1138, "user_id": 4636110, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0104050baad43a135d1084a1b3ec35d4?s=128&d=identicon&r=PG&f=1", "display_name": "nTuply", "link": "https://stackoverflow.com/users/4636110/ntuply"}, "reply_to_user": {"reputation": 574451, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 0, "creation_date": 1567044520, "post_id": 57701211, "comment_id": 101847708, "body": "@jfriend00 mysql db"}, {"owner": {"reputation": 574451, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 0, "creation_date": 1567044551, "post_id": 57701211, "comment_id": 101847717, "body": "This exact module: <a href=\"https://www.npmjs.com/package/mysql\" rel=\"nofollow noreferrer\">npmjs.com/package/mysql</a>?"}, {"owner": {"reputation": 1138, "user_id": 4636110, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0104050baad43a135d1084a1b3ec35d4?s=128&d=identicon&r=PG&f=1", "display_name": "nTuply", "link": "https://stackoverflow.com/users/4636110/ntuply"}, "reply_to_user": {"reputation": 574451, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 0, "creation_date": 1567044575, "post_id": 57701211, "comment_id": 101847721, "body": "@jfriend00 Yup. npm mysql"}], "answers": [{"comments": [{"owner": {"reputation": 1138, "user_id": 4636110, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0104050baad43a135d1084a1b3ec35d4?s=128&d=identicon&r=PG&f=1", "display_name": "nTuply", "link": "https://stackoverflow.com/users/4636110/ntuply"}, "edited": false, "score": 0, "creation_date": 1567041206, "post_id": 57701648, "comment_id": 101847170, "body": "Where would it go, can you give an example please? I&#39;m new to this and I just can&#39;t seem to get it right"}], "tags": [], "owner": {"reputation": 163, "user_id": 4160154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4FLqC.png?s=128&g=1", "display_name": "polunzh", "link": "https://stackoverflow.com/users/4160154/polunzh"}, "is_accepted": false, "score": 0, "last_activity_date": 1567039936, "creation_date": 1567039936, "answer_id": 57701648, "question_id": 57701211, "link": "https://stackoverflow.com/questions/57701211/array-not-reseting-in-node-js/57701648#57701648", "title": "Array not reseting in Node.js", "body": "<p>Just put <code>allPosts</code> in <code>new Promise</code> block.</p>\n"}, {"tags": [], "owner": {"reputation": 574451, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "is_accepted": true, "score": 1, "last_activity_date": 1567046320, "last_edit_date": 1567046320, "creation_date": 1567045956, "answer_id": 57702214, "question_id": 57701211, "link": "https://stackoverflow.com/questions/57701211/array-not-reseting-in-node-js/57702214#57702214", "title": "Array not reseting in Node.js", "body": "<p>The best way to program something like this is to use a promise interface on your database and then you can use promise-based tools for managing asynchronous operations.</p>\n\n<p>The mysql2 module has a promise interface (that replaces the callback interface) and this function you have would look something like this:</p>\n\n<pre><code>const mysql = require('mysql2/promise');\n\n// returns a promise that resolves with a\nchirprdb.allPosts = (userData) =&gt; {\n    return Promise.all(usrData.locations.map(location =&gt; {\n        return pool.query('SELECT posts.post_id, posts.title, posts.description FROM posts_locations INNER JOIN posts on posts.post_id = posts_locations.post_id WHERE posts_locations.location_id = ?', location.location_id);\n    }));\n}\n</code></pre>\n\n<p>But, I presume you need to change all your mysql programming over to the mysql2 promises interface.</p>\n\n<p>There are also promise wrappers for the original mysql library such as <a href=\"https://www.npmjs.com/package/mysql-promise\" rel=\"nofollow noreferrer\">https://www.npmjs.com/package/mysql-promise</a>.</p>\n\n<hr>\n\n<p>Your scheme does not work because you're calling <code>resolve(allPosts)</code> BEFORE anything has been added to <code>allPosts</code> and thus you're probably calling it again while it's still adding more things to <code>allPosts</code> and thus you feel like it isn't empty.  In any case, your current method is a timing disaster.</p>\n\n<p>If you want to keep with the callback interface for mysql, then you have to implement some sort of counter that tells you when all your requests are done like this:</p>\n\n<pre><code>chirprdb.allPosts = (userData) =&gt; {\n    let allPosts = [];\n    let cntr = 0;\n    return new Promise((resolve, reject) =&gt; {\n        for (let i = 0; i &lt; userData.locations.length; i++) {\n            let location = userData.locations[i];\n            pool.query('SELECT posts.post_id, posts.title, posts.description FROM posts_locations INNER JOIN posts on posts.post_id = posts_locations.post_id WHERE posts_locations.location_id = ?', location.location_id, (err, results) =&gt; {\n                if(err){\n                    return reject(err);\n                }\n                ++cntr;\n                allPosts[i] = results;\n                // if all queries done now\n                if (cntr === userData.locations.length) {\n                    resolve(allPosts.flat());\n                }\n            });\n        })\n    });\n};\n</code></pre>\n"}], "owner": {"reputation": 1138, "user_id": 4636110, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0104050baad43a135d1084a1b3ec35d4?s=128&d=identicon&r=PG&f=1", "display_name": "nTuply", "link": "https://stackoverflow.com/users/4636110/ntuply"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 57702214, "answer_count": 2, "score": 1, "last_activity_date": 1567046320, "creation_date": 1567035255, "question_id": 57701211, "link": "https://stackoverflow.com/questions/57701211/array-not-reseting-in-node-js", "title": "Array not reseting in Node.js", "body": "<p>I am running a Node+Express API that is working quite well, the only problem I have is when returning a complex query as a response, the variable to which I set the response to <strong>is not getting reset between requests.</strong></p>\n\n<p>It duplicates replies to the client such as replying 1, 2, 3 then the next reply replies 1, 2, 3, 1, 2, 3. So basically, it's concatenating data and not setting the <code>allPosts</code> variable to null again.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>var allPosts = [];\nchirprdb.allPosts = (userData) =&gt; {\n    return new Promise((resolve, reject) =&gt; {\n        userData.locations.forEach((location) =&gt;{\n            pool.query('SELECT posts.post_id, posts.title, posts.description FROM posts_locations INNER JOIN posts on posts.post_id = posts_locations.post_id WHERE posts_locations.location_id = ?', location.location_id, (err, results) =&gt; {\n                if(err){\n                    return reject(err);\n                }               \n                // allPosts.push(results)  \n                results.forEach((result) =&gt;{\n                    allPosts.push(result)\n                })                        \n            });\n        })\n        resolve(allPosts)\n    });\n};\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "html", "css"], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 8679965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZvprN.jpg?s=128&g=1", "display_name": "2-D", "link": "https://stackoverflow.com/users/8679965/2-d"}, "edited": false, "score": 1, "creation_date": 1567036443, "post_id": 57701250, "comment_id": 101846377, "body": "Thanks a lot, Ot&#225;vio! I need to study more about bootstrap, I&#39;ve started my journey through front-end a few weeks ago."}, {"owner": {"reputation": 1348, "user_id": 7710467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QNpa5.jpg?s=128&g=1", "display_name": "Ot&#225;vio Barreto", "link": "https://stackoverflow.com/users/7710467/ot%c3%a1vio-barreto"}, "reply_to_user": {"reputation": 59, "user_id": 8679965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZvprN.jpg?s=128&g=1", "display_name": "2-D", "link": "https://stackoverflow.com/users/8679965/2-d"}, "edited": false, "score": 0, "creation_date": 1567036906, "post_id": 57701250, "comment_id": 101846442, "body": "It&#39;s makes faster and simple to solve, the other answer <code>($(&#39;#carousel &gt; div&#39;).click(handler)):</code> as I told you it occurs because  you need to use <code>event delegation</code>"}], "tags": [], "owner": {"reputation": 1348, "user_id": 7710467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QNpa5.jpg?s=128&g=1", "display_name": "Ot&#225;vio Barreto", "link": "https://stackoverflow.com/users/7710467/ot%c3%a1vio-barreto"}, "is_accepted": false, "score": 0, "last_activity_date": 1567036134, "last_edit_date": 1567036134, "creation_date": 1567035574, "answer_id": 57701250, "question_id": 57701183, "link": "https://stackoverflow.com/questions/57701183/jquery-function-stops-working-after-first-click/57701250#57701250", "title": "JQuery function stops working after first click", "body": "<p>Simplify your code, you should use <strong>event delegation</strong> to solve this, here is the <a href=\"https://learn.jquery.com/events/event-delegation/\" rel=\"nofollow noreferrer\">documentation</a> </p>\n\n<pre><code>$(\"body\").on('click', '#div_id', function(e) {\n\n});\n</code></pre>\n\n<p>Event delegation allows you to attach a single event listener, to a parent element, that will fire for all descendants matching a selector, whether those descendants exist now or are added in the future.</p>\n\n<p>You can also use <strong>bootstrap</strong> to create Carousel, it simplify your front-end development and you should not worry about jquery </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css\" integrity=\"sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm\" crossorigin=\"anonymous\"&gt;\r\n&lt;script src=\"https://code.jquery.com/jquery-3.2.1.slim.min.js\" integrity=\"sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN\" crossorigin=\"anonymous\"&gt;&lt;/script&gt;\r\n&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js\" integrity=\"sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q\" crossorigin=\"anonymous\"&gt;&lt;/script&gt;\r\n&lt;script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js\" integrity=\"sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl\" crossorigin=\"anonymous\"&gt;&lt;/script&gt;\r\n\r\n\r\n&lt;div id=\"carouselExampleIndicators\" class=\"carousel slide\" data-ride=\"carousel\"&gt;\r\n  &lt;ol class=\"carousel-indicators\"&gt;\r\n    &lt;li data-target=\"#carouselExampleIndicators\" data-slide-to=\"0\" class=\"active\"&gt;&lt;/li&gt;\r\n    &lt;li data-target=\"#carouselExampleIndicators\" data-slide-to=\"1\"&gt;&lt;/li&gt;\r\n    &lt;li data-target=\"#carouselExampleIndicators\" data-slide-to=\"2\"&gt;&lt;/li&gt;\r\n  &lt;/ol&gt;\r\n  &lt;div class=\"carousel-inner\"&gt;\r\n    &lt;div class=\"carousel-item active\"&gt;\r\n      &lt;img class=\"d-block w-100\" src=\"https://www.portalveneza.com.br/wp-content/uploads/2019/07/image1.jpeg\" alt=\"First slide\"&gt;\r\n    &lt;/div&gt;\r\n    &lt;div class=\"carousel-item\"&gt;\r\n      &lt;img class=\"d-block w-100\" src=\"https://demo.yootheme.com/themes/joomla/2014/nite/cache/widgetkit/gallery/39/image2-dc3d866a26.jpg\" alt=\"Second slide\"&gt;\r\n    &lt;/div&gt;\r\n    &lt;div class=\"carousel-item\"&gt;\r\n      &lt;img class=\"d-block w-100\" src=\"https://blogs.gartner.com/john-wheeler/files/2016/05/cool.png\" alt=\"Third slide\"&gt;\r\n    &lt;/div&gt;\r\n  &lt;/div&gt;\r\n  &lt;a class=\"carousel-control-prev\" href=\"#carouselExampleIndicators\" role=\"button\" data-slide=\"prev\"&gt;\r\n    &lt;span class=\"carousel-control-prev-icon\" aria-hidden=\"true\"&gt;&lt;/span&gt;\r\n    &lt;span class=\"sr-only\"&gt;Previous&lt;/span&gt;\r\n  &lt;/a&gt;\r\n  &lt;a class=\"carousel-control-next\" href=\"#carouselExampleIndicators\" role=\"button\" data-slide=\"next\"&gt;\r\n    &lt;span class=\"carousel-control-next-icon\" aria-hidden=\"true\"&gt;&lt;/span&gt;\r\n    &lt;span class=\"sr-only\"&gt;Next&lt;/span&gt;\r\n  &lt;/a&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 8679965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZvprN.jpg?s=128&g=1", "display_name": "2-D", "link": "https://stackoverflow.com/users/8679965/2-d"}, "edited": false, "score": 0, "creation_date": 1567036366, "post_id": 57701283, "comment_id": 101846359, "body": "Thanks a lot YellowAfterLife. It worked like a charm! It&#39;s exactly what I was looking for :)"}], "tags": [], "owner": {"reputation": 1886, "user_id": 5578773, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-l_1zd0-u7V8/AAAAAAAAAAI/AAAAAAAAAK4/pt6IIe-G62s/photo.jpg?sz=128", "display_name": "YellowAfterlife", "link": "https://stackoverflow.com/users/5578773/yellowafterlife"}, "is_accepted": false, "score": 0, "last_activity_date": 1567035914, "creation_date": 1567035914, "answer_id": 57701283, "question_id": 57701183, "link": "https://stackoverflow.com/questions/57701183/jquery-function-stops-working-after-first-click/57701283#57701283", "title": "JQuery function stops working after first click", "body": "<p>Your core problem is that you are only giving an event listener to the two initial previous/next items, not all of them. This is easily fixed through code that you already utilize elsewhere (<code>$('#carousel &gt; div').click(handler)</code>):</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>$(document).ready(function(){\r\n  function moveToSelected(element) {\r\n    var cards = $('#carousel &gt; div');\r\n    var clickIndex = cards.index(element);\r\n    var mainIndex = cards.index($('.main'));\r\n    \r\n//     6 principal e o cara clica no next\r\n    if (clickIndex == 0 &amp;&amp; mainIndex == 5){\r\n      cards.eq(4).removeClass().addClass('hidden');\r\n      cards.eq(5).removeClass().addClass('previous');\r\n      cards.eq(0).removeClass().addClass('main');\r\n      cards.eq(1).removeClass().addClass('next');\r\n//     1 principal e o cara clica no previous\r\n    } else if (clickIndex == 5 &amp;&amp; mainIndex == 0){\r\n      cards.eq(1).removeClass().addClass('hidden');\r\n      cards.eq(4).removeClass().addClass('previous');\r\n      cards.eq(5).removeClass().addClass('main');\r\n      cards.eq(0).removeClass().addClass('next');\r\n//     6 principal e o cara clica previous\r\n    } else if (clickIndex == 4 &amp;&amp; mainIndex == 5){\r\n      cards.eq(0).removeClass().addClass('hidden');\r\n      cards.eq(3).removeClass().addClass('previous');\r\n      cards.eq(4).removeClass().addClass('main');\r\n      cards.eq(5).removeClass().addClass('next');\r\n//     caso normal next     \r\n    } else if (clickIndex &gt; mainIndex){\r\n      cards.eq(mainIndex-1).removeClass().addClass('hidden');\r\n      cards.eq(mainIndex).removeClass().addClass('previous');\r\n      cards.eq(clickIndex).removeClass().addClass('main');\r\n      cards.eq(clickIndex + 1).removeClass().addClass('next');\r\n//     caso normal previous\r\n    } else if (clickIndex &lt; mainIndex){\r\n      cards.eq(mainIndex + 1).removeClass().addClass('hidden');\r\n      cards.eq(clickIndex + 1).removeClass().addClass('previous');\r\n      cards.eq(clickIndex).removeClass().addClass('main');\r\n      cards.eq(mainIndex).removeClass().addClass('next');\r\n    };\r\n    \r\n  };\r\n  $('#carousel &gt; div').click(function() {\r\n    if (this.classList.contains(\"previous\") || this.classList.contains(\"next\")) {\r\n      moveToSelected(this);\r\n    }\r\n  });\r\n});</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>body, html {\r\n  height: 100%;\r\n  margin: 0;  \r\n  padding: 0;\r\n  width: 100%;\r\n}\r\n\r\n#carousel {\r\n  background: red;\r\n  height: 70vh;\r\n  overflow: hidden;\r\n  position: relative;\r\n  left: 50%;\r\n  top: 50%;\r\n  transform: translateY(-50%) translateX(-50%);\r\n  width: 70vw;\r\n}\r\n\r\n#carousel &gt; div {\r\n  background: white;\r\n  border-radius: 40px;\r\n  box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\r\n  display: inline-block;\r\n  height: 100%;\r\n  font-family: Lato;\r\n  left:50%;\r\n  position: absolute;\r\n  transition: all .7s;\r\n  width: 50%;\r\n}\r\n\r\n#carousel &gt; div h3 {\r\n  text-align: center; \r\n}\r\n\r\n.main{\r\n  opacity:1;\r\n  position: absolute;\r\n  transform: translateX(-50%);\r\n  z-index: 2;\r\n}\r\n\r\n.next, .previous{\r\n  display: inline-block;\r\n  opacity:.6;\r\n  position: absolute;\r\n  z-index: 1;\r\n}\r\n\r\n.next{\r\n  transform: translateX(-20%) scale(.9);\r\n}\r\n\r\n.previous{\r\n  transform: translateX(-80%) scale(.9);\r\n  background-color: blue;\r\n}\r\n\r\n.hidden{\r\n  opacity: 0;\r\n  transform: translateX(-50%) scale(.9);\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;div id=\"carousel\"&gt;\r\n  &lt;div class=\"main\"&gt;\r\n    &lt;h3&gt;M\u00f3dulo 1: An\u00e1lise Financeira&lt;/h3&gt;\r\n    &lt;div class=\"detail\"&gt;\r\n      &lt;ul&gt;\r\n        &lt;li&gt; \r\n          &lt;i class=\"fa fa-angle-double-right\"&gt;&lt;/i&gt;\r\n          Quais s\u00e3o os principais demonstrativos financeiros?\r\n        &lt;/li&gt;\r\n      &lt;/ul&gt;\r\n    &lt;/div&gt;\r\n  &lt;/div&gt;\r\n  &lt;div class=\"next\"&gt;\r\n    &lt;h3&gt;M\u00f3dulo 2: Blablabla&lt;/h3&gt;\r\n    &lt;div class=\"detail\"&gt;\r\n      &lt;ul&gt;\r\n        &lt;li&gt; \r\n          &lt;i class=\"fa fa-angle-double-right\"&gt;&lt;/i&gt;\r\n          Quais s\u00e3o os principais demonstrativos financeiros?\r\n        &lt;/li&gt;\r\n      &lt;/ul&gt;\r\n    &lt;/div&gt;\r\n  &lt;/div&gt;\r\n  &lt;div class=\"hidden\"&gt;\r\n    &lt;h3&gt;M\u00f3dulo 3: An\u00e1lise Financeira&lt;/h3&gt;\r\n    &lt;div class=\"detail\"&gt;\r\n      &lt;ul&gt;\r\n        &lt;li&gt; \r\n          &lt;i class=\"fa fa-angle-double-right\"&gt;&lt;/i&gt;\r\n          Quais s\u00e3o os principais demonstrativos financeiros?\r\n        &lt;/li&gt;\r\n      &lt;/ul&gt;\r\n    &lt;/div&gt;\r\n  &lt;/div&gt;\r\n  &lt;div class=\"hidden\"&gt;\r\n    &lt;h3&gt;M\u00f3dulo 4: An\u00e1lise Financeira&lt;/h3&gt;\r\n    &lt;div class=\"detail\"&gt;\r\n      &lt;ul&gt;\r\n        &lt;li&gt; \r\n          &lt;i class=\"fa fa-angle-double-right\"&gt;&lt;/i&gt;\r\n          Quais s\u00e3o os principais demonstrativos financeiros?\r\n        &lt;/li&gt;\r\n      &lt;/ul&gt;\r\n    &lt;/div&gt;\r\n  &lt;/div&gt;\r\n  &lt;div class=\"hidden\"&gt;\r\n    &lt;h3&gt;M\u00f3dulo 5: An\u00e1lise Financeira&lt;/h3&gt;\r\n    &lt;div class=\"detail\"&gt;\r\n      &lt;ul&gt;\r\n        &lt;li&gt; \r\n          &lt;i class=\"fa fa-angle-double-right\"&gt;&lt;/i&gt;\r\n          Quais s\u00e3o os principais demonstrativos financeiros?\r\n        &lt;/li&gt;\r\n      &lt;/ul&gt;\r\n    &lt;/div&gt;\r\n  &lt;/div&gt;\r\n  &lt;div class=\"previous\"&gt;\r\n    &lt;h3&gt;6M\u00f3dulo 6: An\u00e1lise Financeira&lt;/h3&gt;\r\n    &lt;div class=\"detail\"&gt;\r\n      &lt;ul&gt;\r\n        &lt;li&gt; \r\n          &lt;i class=\"fa fa-angle-double-right\"&gt;&lt;/i&gt;\r\n          Quais s\u00e3o os principais demonstrativos financeiros?\r\n        &lt;/li&gt;\r\n      &lt;/ul&gt;\r\n    &lt;/div&gt;\r\n  &lt;/div&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>There seems to be something funky about card display logic (or I'm misunderstanding what it's supposed to do), do tell if you need help with that and how it's supposed to function if so</p>\n"}], "owner": {"reputation": 59, "user_id": 8679965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZvprN.jpg?s=128&g=1", "display_name": "2-D", "link": "https://stackoverflow.com/users/8679965/2-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1567036134, "creation_date": 1567034990, "question_id": 57701183, "link": "https://stackoverflow.com/questions/57701183/jquery-function-stops-working-after-first-click", "title": "JQuery function stops working after first click", "body": "<p>I'm trying to create a carousel with infinite loop. </p>\n\n<p>As I'm taking my first steps, it's almost certain that this is far from the best way of doing it.</p>\n\n<p>Anyway, I thought the code was supposed to be correct. In fact, in a first glance it seems to be working fine but right after the first click the function suddenly stops working.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>$(document).ready(function(){\r\n  function moveToSelected(element) {\r\n    var cards = $('#carousel &gt; div');\r\n    var clickIndex = cards.index(element);\r\n    var mainIndex = cards.index($('.main'));\r\n    \r\n//     6 principal e o cara clica no next\r\n    if (clickIndex == 0 &amp;&amp; mainIndex == 5){\r\n      cards.eq(4).removeClass().addClass('hidden');\r\n      cards.eq(5).removeClass().addClass('previous');\r\n      cards.eq(0).removeClass().addClass('main');\r\n      cards.eq(1).removeClass().addClass('next');\r\n//     1 principal e o cara clica no previous\r\n    } else if (clickIndex == 5 &amp;&amp; mainIndex == 0){\r\n      cards.eq(1).removeClass().addClass('hidden');\r\n      cards.eq(4).removeClass().addClass('previous');\r\n      cards.eq(5).removeClass().addClass('main');\r\n      cards.eq(0).removeClass().addClass('next');\r\n//     6 principal e o cara clica previous\r\n    } else if (clickIndex == 4 &amp;&amp; mainIndex == 5){\r\n      cards.eq(0).removeClass().addClass('hidden');\r\n      cards.eq(3).removeClass().addClass('previous');\r\n      cards.eq(4).removeClass().addClass('main');\r\n      cards.eq(5).removeClass().addClass('next');\r\n//     caso normal next     \r\n    } else if (clickIndex &gt; mainIndex){\r\n      cards.eq(mainIndex-1).removeClass().addClass('hidden');\r\n      cards.eq(mainIndex).removeClass().addClass('previous');\r\n      cards.eq(clickIndex).removeClass().addClass('main');\r\n      cards.eq(clickIndex + 1).removeClass().addClass('next');\r\n//     caso normal previous\r\n    } else if (clickIndex &lt; mainIndex){\r\n      cards.eq(mainIndex + 1).removeClass().addClass('hidden');\r\n      cards.eq(clickIndex + 1).removeClass().addClass('previous');\r\n      cards.eq(clickIndex).removeClass().addClass('main');\r\n      cards.eq(mainIndex).removeClass().addClass('next');\r\n    };\r\n    \r\n  };\r\n  \r\n  $('.previous').click(function() {\r\n    moveToSelected($('.previous'));\r\n  });\r\n\r\n  $('.next').click(function() {\r\n      moveToSelected($('.next'));\r\n   });\r\n});\r\n\r\n                  \r\n </code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>body, html {\r\n  height: 100%;\r\n  margin: 0;  \r\n  padding: 0;\r\n  width: 100%;\r\n}\r\n\r\n#carousel {\r\n  background: red;\r\n  height: 70vh;\r\n  overflow: hidden;\r\n  position: relative;\r\n  left: 50%;\r\n  top: 50%;\r\n  transform: translateY(-50%) translateX(-50%);\r\n  width: 70vw;\r\n}\r\n\r\n#carousel &gt; div {\r\n  background: white;\r\n  border-radius: 40px;\r\n  box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);\r\n  display: inline-block;\r\n  height: 100%;\r\n  font-family: Lato;\r\n  left:50%;\r\n  position: absolute;\r\n  transition: all .7s;\r\n  width: 50%;\r\n}\r\n\r\n#carousel &gt; div h3 {\r\n  text-align: center; \r\n}\r\n\r\n.main{\r\n  opacity:1;\r\n  position: absolute;\r\n  transform: translateX(-50%);\r\n  z-index: 2;\r\n}\r\n\r\n.next, .previous{\r\n  display: inline-block;\r\n  opacity:.6;\r\n  position: absolute;\r\n  z-index: 1;\r\n}\r\n\r\n.next{\r\n  transform: translateX(-20%) scale(.9);\r\n}\r\n\r\n.previous{\r\n  transform: translateX(-80%) scale(.9);\r\n  background-color: blue;\r\n}\r\n\r\n.hidden{\r\n  opacity: 0;\r\n  transform: translateX(-50%) scale(.9);\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;div id=\"carousel\"&gt;\r\n  &lt;div class=\"main\"&gt;\r\n    &lt;h3&gt;M\u00f3dulo 1: An\u00e1lise Financeira&lt;/h3&gt;\r\n    &lt;div class=\"detail\"&gt;\r\n      &lt;ul&gt;\r\n        &lt;li&gt; \r\n          &lt;i class=\"fa fa-angle-double-right\"&gt;&lt;/i&gt;\r\n          Quais s\u00e3o os principais demonstrativos financeiros?\r\n        &lt;/li&gt;\r\n      &lt;/ul&gt;\r\n    &lt;/div&gt;\r\n  &lt;/div&gt;\r\n  &lt;div class=\"next\"&gt;\r\n    &lt;h3&gt;M\u00f3dulo 2: Blablabla&lt;/h3&gt;\r\n    &lt;div class=\"detail\"&gt;\r\n      &lt;ul&gt;\r\n        &lt;li&gt; \r\n          &lt;i class=\"fa fa-angle-double-right\"&gt;&lt;/i&gt;\r\n          Quais s\u00e3o os principais demonstrativos financeiros?\r\n        &lt;/li&gt;\r\n      &lt;/ul&gt;\r\n    &lt;/div&gt;\r\n  &lt;/div&gt;\r\n  &lt;div class=\"hidden\"&gt;\r\n    &lt;h3&gt;M\u00f3dulo 3: An\u00e1lise Financeira&lt;/h3&gt;\r\n    &lt;div class=\"detail\"&gt;\r\n      &lt;ul&gt;\r\n        &lt;li&gt; \r\n          &lt;i class=\"fa fa-angle-double-right\"&gt;&lt;/i&gt;\r\n          Quais s\u00e3o os principais demonstrativos financeiros?\r\n        &lt;/li&gt;\r\n      &lt;/ul&gt;\r\n    &lt;/div&gt;\r\n  &lt;/div&gt;\r\n  &lt;div class=\"hidden\"&gt;\r\n    &lt;h3&gt;M\u00f3dulo 4: An\u00e1lise Financeira&lt;/h3&gt;\r\n    &lt;div class=\"detail\"&gt;\r\n      &lt;ul&gt;\r\n        &lt;li&gt; \r\n          &lt;i class=\"fa fa-angle-double-right\"&gt;&lt;/i&gt;\r\n          Quais s\u00e3o os principais demonstrativos financeiros?\r\n        &lt;/li&gt;\r\n      &lt;/ul&gt;\r\n    &lt;/div&gt;\r\n  &lt;/div&gt;\r\n  &lt;div class=\"hidden\"&gt;\r\n    &lt;h3&gt;M\u00f3dulo 5: An\u00e1lise Financeira&lt;/h3&gt;\r\n    &lt;div class=\"detail\"&gt;\r\n      &lt;ul&gt;\r\n        &lt;li&gt; \r\n          &lt;i class=\"fa fa-angle-double-right\"&gt;&lt;/i&gt;\r\n          Quais s\u00e3o os principais demonstrativos financeiros?\r\n        &lt;/li&gt;\r\n      &lt;/ul&gt;\r\n    &lt;/div&gt;\r\n  &lt;/div&gt;\r\n  &lt;div class=\"previous\"&gt;\r\n    &lt;h3&gt;6M\u00f3dulo 6: An\u00e1lise Financeira&lt;/h3&gt;\r\n    &lt;div class=\"detail\"&gt;\r\n      &lt;ul&gt;\r\n        &lt;li&gt; \r\n          &lt;i class=\"fa fa-angle-double-right\"&gt;&lt;/i&gt;\r\n          Quais s\u00e3o os principais demonstrativos financeiros?\r\n        &lt;/li&gt;\r\n      &lt;/ul&gt;\r\n    &lt;/div&gt;\r\n  &lt;/div&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Can anybody help me with this? </p>\n"}, {"tags": ["javascript", "reactjs", "jestjs", "enzyme"], "comments": [{"owner": {"reputation": 5819, "user_id": 4385889, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/V0hjo.png?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/4385889/andrew"}, "edited": false, "score": 0, "creation_date": 1567039083, "post_id": 57701157, "comment_id": 101846806, "body": "const store = mockStore({}); You have to populate your store. It&#39;s an empty object right now"}], "owner": {"reputation": 107, "user_id": 11972904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efac62f7f2e6d950faf8800921825e63?s=128&d=identicon&r=PG&f=1", "display_name": "yobaxeb", "link": "https://stackoverflow.com/users/11972904/yobaxeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 534, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1567056141, "creation_date": 1567034716, "last_edit_date": 1567056141, "question_id": 57701157, "link": "https://stackoverflow.com/questions/57701157/typeerror-cannot-read-property-of-undefined-in-jest-enzyme-tests", "title": "TypeError: Cannot read property of undefined in jest enzyme tests", "body": "<p>I'm trying to make tests using jest with enzyme.</p>\n\n<p>This is my test:</p>\n\n<pre><code>import 'jsdom-global/register';\nimport React from 'react';\n\nimport { mount } from 'enzyme';\nimport { Provider } from \"react-redux\";\nimport configureMockStore from \"redux-mock-store\";\n\nimport WorkOutForm from './workOutForm';\n\nconst mockStore = configureMockStore();\nconst store = mockStore({});\n\nlet wrapper;\n\nbeforeEach(() =&gt; {\n    wrapper = mount(\n    &lt;Provider store={store}&gt;\n      &lt;WorkOutForm  /&gt;\n    &lt;/Provider&gt;);\n});\n\ndescribe('WorkOutForm', () =&gt; {\n\n  it('should start a new workoutForm', () =&gt; {\n    expect(wrapper).toMatchSnapshot()})\n})\n</code></pre>\n\n<p>But I'm receiving:</p>\n\n<blockquote>\n  <p>TypeError: Cannot read property 'tempoGasto' of undefined</p>\n\n<pre><code>  86 | }\n  87 | \n&gt; 88 | const mapStateToProps = state =&gt; ({tempoGasto: state.workout.tempoGasto, tipoTarefa: state.workout.tipoTarefa, data:\n</code></pre>\n  \n  <p>state.workout.data})\n           |                                                              ^\n        89 | const mapDispatchToProps = dispatch =>\n        90 |     bindActionCreators({ addworkout, searchWorkout, changeTempoGasto, changeHoraTarefaMask, changeDataTarefaMask, \n  changeTipoTarefa, changeDataTarefa }, dispatch)\n        91 | export default connect(mapStateToProps, mapDispatchToProps)(WorkOutForm)</p>\n</blockquote>\n\n<p>In my component I'm using <code>export default connect</code> passing my <code>mapstateprops</code> and my actions in <code>bindActionCreator</code>.</p>\n\n<p>How i can mount this component?</p>\n\n<p>Tried to import the action changeHoraTarefaMask and make a <code>wrapper.changeHoraTarefaMask('11:11')</code> but i get the same error</p>\n"}, {"tags": ["javascript"], "answers": [{"tags": [], "owner": {"reputation": 32101, "user_id": 8404453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/616cb81bb678bb5b17869511b2a41367?s=128&d=identicon&r=PG&f=1", "display_name": "TheMaster", "link": "https://stackoverflow.com/users/8404453/themaster"}, "is_accepted": false, "score": 0, "last_activity_date": 1567036727, "creation_date": 1567036727, "answer_id": 57701347, "question_id": 57701152, "link": "https://stackoverflow.com/questions/57701152/toggle-multiple-divs/57701347#57701347", "title": "Toggle multiple divs", "body": "<p>You can use anchor tags using href as id:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>    &lt;a href=\"#aboutsec\" class=\"sub-menu\" \n    onclick=\"showme(this)\"&gt;About&lt;/a&gt;\n    &lt;a href=\"#staffsec\" class=\"sub-menu\" \n    onclick=\"showme(this)\"&gt;Staff&lt;/a&gt;\n</code></pre>\n\n<p>Then use it to get the actual element needed:</p>\n\n<pre><code>    &lt;script&gt;\n    function showme(tag) {\n      var x = document.querySelector(tag.href);\n      if (x.style.display === \"none\") {\n        x.style.display = \"block\";\n      } else {\n        x.style.display = \"none\";\n      }\n    }\n    &lt;/script&gt;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11991566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb3b2df3b5b1d328ccb223f9d42982e9?s=128&d=identicon&r=PG&f=1", "display_name": "jdeclanflynn", "link": "https://stackoverflow.com/users/11991566/jdeclanflynn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 18, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567036727, "creation_date": 1567034685, "question_id": 57701152, "link": "https://stackoverflow.com/questions/57701152/toggle-multiple-divs", "title": "Toggle multiple divs", "body": "<p>Suppose I created 7 anchor tags. I named them ABOUT, STAFF, VOLUNTEER, FINANCE, SPONSORS, SUBMIT FILM and WINNERS. Also, suppose that I created 7  containing content like text and images. By default, I hid all 7 . Only the anchor tags are showing one after the other like below:</p>\n\n<p>[one] [two] [three] [four] [five] [six] [seven]</p>\n\n<p>All anchor tags are lined up horizontally next to one another with white backgrounds, framed in black, 1 pixel wide and the font also in black, using CSS called \"sub-menu.\" Easy. No problem. </p>\n\n<p>Suppose that I gave each  a distinct ID (e.g., id=\"aboutsec\", id=\"staffsec\", id=\"volunteersec\", etc.)?</p>\n\n<p>Using snippets of JavaScript found online, I managed to show my hidden  and hide them when the same anchor tag is clicked. For example, when I click on the anchor tag titled \"About\" it shows , and when I click on the exact same anchor, it hides it. </p>\n\n<p>That part was easy.</p>\n\n<p>However, suppose that when I click anchor About, showing  I want to hide  when I click on anchor Staff or Volunteer or Finance or Sponsors, etc? In other words, a toggle? </p>\n\n<p>What I am trying to achieve is that when any of the anchors are clicked, showing its corresponding , when a different anchor is clicked, I want it to hide the others, which ever is currently showing. Make sense?</p>\n\n<p>These are the anchor tags that I am currently using:</p>\n\n<pre><code>    &lt;a href=\"javascript:void()\" class=\"sub-menu\" \n    onclick=\"showme()\"&gt;About&lt;/a&gt;\n    &lt;a href=\"javascript:void()\" class=\"sub-menu\" \n    onclick=\"showme2()\"&gt;Staff&lt;/a&gt;\n    &lt;a href=\"javascript:void()\" class=\"sub-menu\" \n    onclick=\"showme3()\"&gt;Volunteer&lt;/a&gt;\n    &lt;a href=\"javascript:void()\" class=\"sub-menu\" \n    onclick=\"showme4()\"&gt;Finance&lt;/a&gt;\n    &lt;a href=\"javascript:void()\" class=\"sub-menu\" \n    onclick=\"showme5()\"&gt;Sponsors&lt;/a&gt;\n    &lt;a href=\"javascript:void()\" class=\"sub-menu\" \n    onclick=\"showme6()\"&gt;Submit Film&lt;/a&gt;\n    &lt;a href=\"javascript:void()\" class=\"sub-menu\" \n    onclick=\"showme7()\"&gt;Winners&lt;/a&gt;\n</code></pre>\n\n<p>The  are titled using IDs:</p>\n\n<pre><code>    &lt;section id=\"aboutsec\" class=\"subsec\" style=\"display:none\"&gt;\n</code></pre>\n\n<p>I have an image at the bottom of each  that is wrapped inside an anchor tag that uses the same onclick function that effectively hides the  that is showing. This part works just fine. So, what I have is an show/hide situation. Great, but what if someone clicks on \"Staff\" or \"Volunteer\" or any other anchor? It shows another  but does not hide the open ones.</p>\n\n<p>This is the JS that I am using, and I've had to repeat each  to show and hide each :</p>\n\n<pre><code>    &lt;!--Show and hide sub-section About--&gt;\n    &lt;script&gt;\n    function showme() {\n    var x = document.getElementById(\"aboutsec\");\n    if (x.style.display === \"none\") {\n    x.style.display = \"block\";\n    } else {\n    x.style.display = \"none\";\n    }\n    }\n    &lt;/script&gt;\n\n    &lt;!--Show and hide sub-section Staff--&gt;\n    &lt;script&gt;\n    function showme2() {\n    var x = document.getElementById(\"staffsec\");\n    if (x.style.display === \"none\") {\n    x.style.display = \"block\";\n    } else {\n    x.style.display = \"none\";\n    }\n    }\n    &lt;/script&gt;\n\n    &lt;!--Show and hide sub-section Volunteer--&gt;\n    &lt;script&gt;\n    function showme3() {\n    var x = document.getElementById(\"volunteersec\");\n    if (x.style.display === \"none\") {\n    x.style.display = \"block\";\n    } else {\n    x.style.display = \"none\";\n    }\n    }\n    &lt;/script&gt;\n</code></pre>\n"}, {"tags": ["javascript", "json"], "comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1567034874, "post_id": 57701142, "comment_id": 101846096, "body": "Welcome to Stack Overflow. We can help you more quickly if you create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that illustrates your problem. Note that this is NOT your entire project. It just needs to be a small example that you create from scratch that uses the concepts you are asking about. Be sure to read the link I gave for tips on how to create such an example."}, {"owner": {"reputation": 2487, "user_id": 2628903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/kIwNY.jpg?s=128&g=1", "display_name": "Velimir Tchatchevsky", "link": "https://stackoverflow.com/users/2628903/velimir-tchatchevsky"}, "edited": false, "score": 0, "creation_date": 1567034876, "post_id": 57701142, "comment_id": 101846097, "body": "That&#39;s not a valid json string, here&#39;s a minimal example <code>{&quot;key&quot;:&quot;value&quot;}</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 2487, "user_id": 2628903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/kIwNY.jpg?s=128&g=1", "display_name": "Velimir Tchatchevsky", "link": "https://stackoverflow.com/users/2628903/velimir-tchatchevsky"}, "edited": false, "score": 0, "creation_date": 1567034949, "post_id": 57701142, "comment_id": 101846111, "body": "@VelimirTchatchevsky That&#39;s the problem he&#39;s trying to solve."}, {"owner": {"reputation": 2487, "user_id": 2628903, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/kIwNY.jpg?s=128&g=1", "display_name": "Velimir Tchatchevsky", "link": "https://stackoverflow.com/users/2628903/velimir-tchatchevsky"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567035030, "post_id": 57701142, "comment_id": 101846124, "body": "@Barmar adding quotes around it doesn&#39;t make it valid json either,that&#39;s why I give an example of a simple json <code>object</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567035119, "post_id": 57701142, "comment_id": 101846136, "body": "Oh, I assumed he was using a C# library to create the JSON."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567035164, "post_id": 57701142, "comment_id": 101846145, "body": "How are you creating the JSON in the first place? Use a standard library function rather than coding it yourself, there are many details that are easy to get wrong."}, {"owner": {"reputation": 60, "user_id": 11953400, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zzqzbC5AizI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfcYwwypTQkxAHm4Ry0ARv_gaPJJQ/photo.jpg?sz=128", "display_name": "nat", "link": "https://stackoverflow.com/users/11953400/nat"}, "edited": false, "score": 0, "creation_date": 1567086315, "post_id": 57701142, "comment_id": 101865370, "body": "I got that json by decoding a token: <code>myJson = Jose.JWT.Decode(Token, secretKey);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1567034926, "creation_date": 1567034926, "answer_id": 57701181, "question_id": 57701142, "link": "https://stackoverflow.com/questions/57701142/how-to-make-json-format-valid/57701181#57701181", "title": "How to make json format valid?", "body": "<p>Use single quotes around the JSON in the JavaScript code, since JSON uses double quotes for the embedded strings.</p>\n\n<pre><code>$.getJSON('&lt;%= myJson %&gt;');\n</code></pre>\n\n<p>You also need to fix the code that's creating <code>myJson</code> in the first place, so that it's correctly formatted as JSON. See <a href=\"https://stackoverflow.com/questions/1056121/how-to-create-json-string-in-c-sharp\">How to create JSON string in C#</a></p>\n"}, {"tags": [], "owner": {"reputation": 566, "user_id": 9991191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/987a714fc1dc156870e5f2989f234c86?s=128&d=identicon&r=PG&f=1", "display_name": "Teiem", "link": "https://stackoverflow.com/users/9991191/teiem"}, "is_accepted": false, "score": 1, "last_activity_date": 1567035108, "creation_date": 1567035108, "answer_id": 57701197, "question_id": 57701142, "link": "https://stackoverflow.com/questions/57701142/how-to-make-json-format-valid/57701197#57701197", "title": "How to make json format valid?", "body": "<p>your json is wrong, you are missing a <code>{</code> at the beginning.\nThe following function should work:</p>\n\n<pre><code>JSON.parse(`{\"iss\":\"123123123\",\"exp\":123123,\"jti\":\"asdasdasdasd\",\"sub\":\"asdasdasdasd\",\"grants\":{\"identity\":\"John\",\"voice\":{\"incoming\":{\"allow\":true},\"outgoing\":{\"application_sid\":\"asdasdasdasd\"}}}}`)\n</code></pre>\n"}], "owner": {"reputation": 60, "user_id": 11953400, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zzqzbC5AizI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfcYwwypTQkxAHm4Ry0ARv_gaPJJQ/photo.jpg?sz=128", "display_name": "nat", "link": "https://stackoverflow.com/users/11953400/nat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 57701181, "answer_count": 2, "score": 0, "last_activity_date": 1567089509, "creation_date": 1567034562, "last_edit_date": 1567089509, "question_id": 57701142, "link": "https://stackoverflow.com/questions/57701142/how-to-make-json-format-valid", "title": "How to make json format valid?", "body": "<p>I generated a string that contains a json in my C# codebehind, then I send it to the frontend to use in Javascript.\nI want to use that json inside a function like <code>$.getJSON(\"&lt;%=myJson%&gt;\")</code> but I'm getting some errors</p>\n\n<p>I already tried to use the string directly since json is javascript code but it doesn't work. The console shows </p>\n\n<blockquote>\n  <p>\"Uncaught SyntaxError: missing ) after argument list\"</p>\n</blockquote>\n\n<p>Then I tried <code>JSON.parse(myJson)</code> but it\u00b4s also not working. The console shows</p>\n\n<blockquote>\n  <p>\"Uncaught SyntaxError: Unexpected identifier\"</p>\n</blockquote>\n\n<p>This is how my Json string looks in codebehind:</p>\n\n<pre><code>\"\\\"iss\\\":\\\"123123123\\\",\\\"exp\\\":123123,\\\"jti\\\":\\\"asdasdasdasd\\\",\\\"sub\\\":\\\"asdasdasdasd\\\",\\\"grants\\\":{\\\"identity\\\":\\\"John\\\",\\\"voice\\\":{\\\"incoming\\\":{\\\"allow\\\":true},\\\"outgoing\\\":{\\\"application_sid\\\":\\\"asdasdasdasd\\\"}}}}\"\n</code></pre>\n\n<p>Then when I send it to Javascript in the frontend:</p>\n\n<pre><code>$.getJSON(\"\n\"iss\":\"123123123\",\"exp\":123123,\"jti\":\"asdasdasdasd\",\"sub\":\"asdasdasdasd\",\"grants\":{\"identity\":\"John\",\"voice\":{\"incoming\":{\"allow\":true},\"outgoing\":{\"application_sid\":\"asdasdasdasd\"}}}}\")\n</code></pre>\n\n<p><strong>UPDATE</strong>\nI fixed the json syntax in codebehind:</p>\n\n<pre>\n\"{\\\"iss\\\":\\\"123123123\\\",\\\"exp\\\":123123,\\\"jti\\\":\\\"asdasdasdasd\\\",\\\"sub\\\":\\\"asdasdasdasd\\\",\\\"grants\\\":{\\\"identity\\\":\\\"John\\\",\\\"voice\\\":{\\\"incoming\\\":{\\\"allow\\\":true},\\\"outgoing\\\":{\\\"application_sid\\\":\\\"asdasdasdasd\\\"}}}}\"</pre>\n\n<p>now I'm getting this error in javascript:</p>\n\n<blockquote>\n  <p>$.getJSON('{\"iss\":\"123123123\",\"exp\":123123,\"jti\":\"asdasdasdasd\",\"sub\":\"asdasdasdasd\",\"grants\":{\"identity\":\"John\",\"voice\":{\"incoming\":{\"allow\":true},\"outgoing\":{\"application_sid\":\"asdasdasdasd\"}}}}')</p>\n  \n  <p>GET <a href=\"http://localhost\" rel=\"nofollow noreferrer\">http://localhost</a>:.... 400 (Bad Request)</p>\n</blockquote>\n\n<p>I think it's because this function expects a url to access but how can I make it read my json string?</p>\n"}, {"tags": ["javascript", "if-statement", "variable-assignment"], "comments": [{"owner": {"reputation": 698, "user_id": 10996625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kA2VT.jpg?s=128&g=1", "display_name": "sinaraheneba", "link": "https://stackoverflow.com/users/10996625/sinaraheneba"}, "edited": false, "score": 1, "creation_date": 1567034635, "post_id": 57701133, "comment_id": 101846055, "body": "See use of a <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator\" rel=\"nofollow noreferrer\">ternary operator</a>, e.g., <code>var result = someVariable === 2 ? something : {something else, including potentially another ternary operation}; </code>"}, {"owner": {"reputation": 385, "user_id": 11151112, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PVEIQyItnC4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd1bqt6zM8Rcg1ATF0ZOt-ZDxLLrw/mo/photo.jpg?sz=128", "display_name": "applemonkey496", "link": "https://stackoverflow.com/users/11151112/applemonkey496"}, "reply_to_user": {"reputation": 698, "user_id": 10996625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kA2VT.jpg?s=128&g=1", "display_name": "sinaraheneba", "link": "https://stackoverflow.com/users/10996625/sinaraheneba"}, "edited": false, "score": 0, "creation_date": 1567034869, "post_id": 57701133, "comment_id": 101846095, "body": "Thanks @sinaraheneba! Is there a way to have it work for three options?"}, {"owner": {"reputation": 698, "user_id": 10996625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kA2VT.jpg?s=128&g=1", "display_name": "sinaraheneba", "link": "https://stackoverflow.com/users/10996625/sinaraheneba"}, "edited": false, "score": 1, "creation_date": 1567034928, "post_id": 57701133, "comment_id": 101846105, "body": "Yes, the false expression can include another ternary operation. Scroll down to &#39;conditional chains&#39; on the linked page for an example."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1567035016, "post_id": 57701133, "comment_id": 101846119, "body": "That said, nested conditionals is pretty hard to read, it&#39;s generally not recommended."}], "answers": [{"tags": [], "owner": {"reputation": 136, "user_id": 11984534, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vzh3Y.jpg?s=128&g=1", "display_name": "Aggs123", "link": "https://stackoverflow.com/users/11984534/aggs123"}, "is_accepted": false, "score": 0, "last_activity_date": 1567035078, "creation_date": 1567035078, "answer_id": 57701194, "question_id": 57701133, "link": "https://stackoverflow.com/questions/57701133/can-i-assign-a-variable-to-the-result-of-an-if-statement-in-javascript/57701194#57701194", "title": "Can I assign a variable to the result of an if statement in javascript?", "body": "<p>Try using the ? operator.</p>\n\n<pre><code>var result = (someVariable === 2 ? something : (someOtherVariable ? somethingElse : null));\n\n</code></pre>\n\n<p>The operator works like this:</p>\n\n<p>boolean ? result if true : result if false;</p>\n"}], "owner": {"reputation": 385, "user_id": 11151112, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-PVEIQyItnC4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd1bqt6zM8Rcg1ATF0ZOt-ZDxLLrw/mo/photo.jpg?sz=128", "display_name": "applemonkey496", "link": "https://stackoverflow.com/users/11151112/applemonkey496"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "closed_date": 1567035071, "answer_count": 1, "score": 0, "last_activity_date": 1567035078, "creation_date": 1567034477, "question_id": 57701133, "link": "https://stackoverflow.com/questions/57701133/can-i-assign-a-variable-to-the-result-of-an-if-statement-in-javascript", "closed_reason": "Duplicate", "title": "Can I assign a variable to the result of an if statement in javascript?", "body": "<p>I am just wondering, is there a way to assign a variable to the result of an <code>if</code> statement. Would something like this be allowed in javascript?</p>\n\n<pre><code>var result = if (someVariable === 2) { \n  return something; \n} else if (someOtherVariable) {\n  return somethingElse;\n} else { return null; }\n</code></pre>\n\n<p>Where <code>result</code> would end up being equal to whatever the if statement returns. Also, if this is not allowed in JS, is it allowed in other languages (just out of curiosity)?</p>\n"}, {"tags": ["javascript", "vue.js"], "answers": [{"comments": [{"owner": {"reputation": 405, "user_id": 10321202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/085fcde37787e86fe291de767a33cc6f?s=128&d=identicon&r=PG&f=1", "display_name": "yassine j", "link": "https://stackoverflow.com/users/10321202/yassine-j"}, "edited": false, "score": 0, "creation_date": 1567035095, "post_id": 57701138, "comment_id": 101846132, "body": "Works fine. Thank you !"}], "tags": [], "owner": {"reputation": 59704, "user_id": 635981, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/51763ff4e4c531c68326064bc13b84a6?s=128&d=identicon&r=PG", "display_name": "David Weldon", "link": "https://stackoverflow.com/users/635981/david-weldon"}, "is_accepted": true, "score": 2, "last_activity_date": 1567034903, "last_edit_date": 1567034903, "creation_date": 1567034539, "answer_id": 57701138, "question_id": 57701115, "link": "https://stackoverflow.com/questions/57701115/use-advance-join-with-vuejs/57701138#57701138", "title": "Use Advance Join() with VueJS", "body": "<pre class=\"lang-js prettyprint-override\"><code>list.map(({Qte, Detail}) =&gt; `${Qte} x ${Detail}`).join(', ');\n</code></pre>\n\n<p>This <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map\" rel=\"nofollow noreferrer\">maps</a> over list and <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment#Object_destructuring\" rel=\"nofollow noreferrer\">destructures</a> each list item into <code>Qte</code> and <code>Detail</code>, and finally uses a <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals\" rel=\"nofollow noreferrer\">template literal</a> to create an array of strings like:</p>\n\n<p><code>[ '5 x A', '1 x B' ]</code></p>\n\n<p>A simple <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/join\" rel=\"nofollow noreferrer\">join</a> then returns the final output:</p>\n\n<p><code>'5 x A, 1 x B'</code></p>\n"}], "owner": {"reputation": 405, "user_id": 10321202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/085fcde37787e86fe291de767a33cc6f?s=128&d=identicon&r=PG&f=1", "display_name": "yassine j", "link": "https://stackoverflow.com/users/10321202/yassine-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 57701138, "answer_count": 1, "score": 0, "last_activity_date": 1567034903, "creation_date": 1567034343, "question_id": 57701115, "link": "https://stackoverflow.com/questions/57701115/use-advance-join-with-vuejs", "title": "Use Advance Join() with VueJS", "body": "<p>I would like to join this database structure </p>\n\n<pre><code>list : [\n {\n  Qte : 5,\n  Detail : 'A',\n },\n {\n  Qte : 1,\n  Detail : 'B',\n },\n],\n</code></pre>\n\n<p>Into a string like that :</p>\n\n<pre><code>This.mydetail = '5 x A , 1 x B';\n</code></pre>\n\n<p>I tried to use that code in vuejs to join my table </p>\n\n<pre><code>{{ list.join(' , ') }}\n</code></pre>\n\n<p>But it's not working in my case, any orientation please ? thank you .</p>\n"}, {"tags": ["javascript", "addeventlistener"], "comments": [{"owner": {"reputation": 1794, "user_id": 1381529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b28ac0344362cf9e57365525b3bdd86?s=128&d=identicon&r=PG", "display_name": "azbarcea", "link": "https://stackoverflow.com/users/1381529/azbarcea"}, "edited": false, "score": 1, "creation_date": 1567034796, "post_id": 57701113, "comment_id": 101846081, "body": "probably duplicate of <a href=\"https://stackoverflow.com/questions/2601097/how-to-get-the-mouse-position-without-events-without-moving-the-mouse\">how to get the mouse position without events without moving the mouse</a>"}, {"owner": {"reputation": 6856, "user_id": 828864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0031af6f469d31621363e4fdf14601f?s=128&d=identicon&r=PG", "display_name": "skyline3000", "link": "https://stackoverflow.com/users/828864/skyline3000"}, "edited": false, "score": 1, "creation_date": 1567036263, "post_id": 57701113, "comment_id": 101846333, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2601097/how-to-get-the-mouse-position-without-events-without-moving-the-mouse\">How to get the mouse position without events (without moving the mouse)?</a>"}, {"owner": {"reputation": 11, "user_id": 11985420, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Rek378TubMI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcmFJc8qZfr6qrVGSRcRvIYgpb33g/photo.jpg?sz=128", "display_name": "Stu", "link": "https://stackoverflow.com/users/11985420/stu"}, "edited": false, "score": 0, "creation_date": 1567040236, "post_id": 57701113, "comment_id": 101846996, "body": "Although, the goal is the same. the answer to that question doesnt help my case. and my question is more about the vent listerner"}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1567035406, "creation_date": 1567035406, "answer_id": 57701233, "question_id": 57701113, "link": "https://stackoverflow.com/questions/57701113/if-eventlistener-active-do-something-else-do-something-else/57701233#57701233", "title": "if (eventlistener == active) { //do something} else {//do something else}", "body": "<p>The first argument to an event listener is the <code>Event</code> object. You can check the type of event there.</p>\n\n<pre><code>function myFunction(event) {\n    if (event.type == 'mousemove') {\n        // some code here\n    } else {\n        // other code here\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11985420, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Rek378TubMI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcmFJc8qZfr6qrVGSRcRvIYgpb33g/photo.jpg?sz=128", "display_name": "Stu", "link": "https://stackoverflow.com/users/11985420/stu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1567035406, "creation_date": 1567034332, "question_id": 57701113, "link": "https://stackoverflow.com/questions/57701113/if-eventlistener-active-do-something-else-do-something-else", "title": "if (eventlistener == active) { //do something} else {//do something else}", "body": "<p>I wanted to find a way to get the position of my mouse without moving it (using \"mousemove\" eventlistener) , because if the screen gets scrolled without the move of a mouse, the coordinants dont match up.</p>\n\n<p>so i planned on getting it to move via adding the offset, !but only when im not getting the right coordinants! .</p>\n\n<pre><code>window.addEventListener(\"mousemove\", myFunction);\n\nfunction myFunction() {\n//offset Code\n}\n\n\nif( event(\"mousemove\") == active) {\n//so if i move the mouse this will be active\n\n} else {\n//thus not active (and vice versa)\n}\n</code></pre>\n"}, {"tags": ["javascript", "django"], "comments": [{"owner": {"reputation": 647, "user_id": 2779773, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4acc51b185ad5b5efba0ad204f15e373?s=128&d=identicon&r=PG&f=1", "display_name": "lucifer63", "link": "https://stackoverflow.com/users/2779773/lucifer63"}, "edited": false, "score": 0, "creation_date": 1567034452, "post_id": 57701090, "comment_id": 101846016, "body": "&quot;but it&#39;s not what I want since i need to make some changes to&quot; - i read the entire question many times but i still dont understand what&#39;s your problem and this particular sentence. Explain please"}, {"owner": {"reputation": 3, "user_id": 11991609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9600ec9ae9297cf6475022749c4bb0cd?s=128&d=identicon&r=PG&f=1", "display_name": "user8565094", "link": "https://stackoverflow.com/users/11991609/user8565094"}, "reply_to_user": {"reputation": 647, "user_id": 2779773, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4acc51b185ad5b5efba0ad204f15e373?s=128&d=identicon&r=PG&f=1", "display_name": "lucifer63", "link": "https://stackoverflow.com/users/2779773/lucifer63"}, "edited": false, "score": 0, "creation_date": 1567034608, "post_id": 57701090, "comment_id": 101846049, "body": "<code>this.value</code> could be modified based on some conditions (those in the foo function)  so I can&#39;t simply put <code>onChange=window.location.href=someval</code> because that <code>someval</code> should be modified before the onChange event fires.."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11991609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9600ec9ae9297cf6475022749c4bb0cd?s=128&d=identicon&r=PG&f=1", "display_name": "user8565094", "link": "https://stackoverflow.com/users/11991609/user8565094"}, "edited": false, "score": 0, "creation_date": 1567036151, "post_id": 57701248, "comment_id": 101846314, "body": "just tested and it doesn&#39;t change page.. looks like it doesn&#39;t fire the onChange method? :("}, {"owner": {"reputation": 2128, "user_id": 10118832, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9iQT52v2fg0/AAAAAAAAAAI/AAAAAAAAAAo/6vfXeVCnyTQ/photo.jpg?sz=128", "display_name": "Michalis Garganourakis", "link": "https://stackoverflow.com/users/10118832/michalis-garganourakis"}, "reply_to_user": {"reputation": 3, "user_id": 11991609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9600ec9ae9297cf6475022749c4bb0cd?s=128&d=identicon&r=PG&f=1", "display_name": "user8565094", "link": "https://stackoverflow.com/users/11991609/user8565094"}, "edited": false, "score": 0, "creation_date": 1567036321, "post_id": 57701248, "comment_id": 101846348, "body": "I have just updated my answer. Can you try once again? :)"}, {"owner": {"reputation": 3, "user_id": 11991609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9600ec9ae9297cf6475022749c4bb0cd?s=128&d=identicon&r=PG&f=1", "display_name": "user8565094", "link": "https://stackoverflow.com/users/11991609/user8565094"}, "edited": false, "score": 0, "creation_date": 1567036659, "post_id": 57701248, "comment_id": 101846411, "body": "Good job!!! The only thing I changed is in the select tag and made it this way: <code>&lt;select onChange=&quot;window.location.href=foo(this)&quot;&gt;</code> Thank you so much!"}, {"owner": {"reputation": 2128, "user_id": 10118832, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9iQT52v2fg0/AAAAAAAAAAI/AAAAAAAAAAo/6vfXeVCnyTQ/photo.jpg?sz=128", "display_name": "Michalis Garganourakis", "link": "https://stackoverflow.com/users/10118832/michalis-garganourakis"}, "reply_to_user": {"reputation": 3, "user_id": 11991609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9600ec9ae9297cf6475022749c4bb0cd?s=128&d=identicon&r=PG&f=1", "display_name": "user8565094", "link": "https://stackoverflow.com/users/11991609/user8565094"}, "edited": false, "score": 0, "creation_date": 1567036873, "post_id": 57701248, "comment_id": 101846435, "body": "I&#39;m glad I could help! :)"}], "tags": [], "owner": {"reputation": 2128, "user_id": 10118832, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9iQT52v2fg0/AAAAAAAAAAI/AAAAAAAAAAo/6vfXeVCnyTQ/photo.jpg?sz=128", "display_name": "Michalis Garganourakis", "link": "https://stackoverflow.com/users/10118832/michalis-garganourakis"}, "is_accepted": true, "score": 1, "last_activity_date": 1567036288, "last_edit_date": 1567036288, "creation_date": 1567035566, "answer_id": 57701248, "question_id": 57701090, "link": "https://stackoverflow.com/questions/57701090/update-onchange-event-and-fire-onchange-event-javascript/57701248#57701248", "title": "Update onChange event and fire onChange event javascript", "body": "<p>If I'm not missing anything, you don't have to manually trigger onchange, as it's already triggered. You just have to return the modified value from your foo function.</p>\n\n<p>So instead of <code>obj.onChange =</code> try <code>return</code> and remove the whole createEvent code.</p>\n\n<pre><code>&lt;script&gt;\nfunction foo(obj)\n{\n    if (condition)\n    {\n        return obj.value;\n    }\n    else\n    {\n        return obj.value.replace('/A/', '/R/');\n    }\n}\n</code></pre>\n\n<p></p>\n\n<p>And on your foo call <code>onchange=\"window.location.href=foo(this)\"</code></p>\n"}], "owner": {"reputation": 3, "user_id": 11991609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9600ec9ae9297cf6475022749c4bb0cd?s=128&d=identicon&r=PG&f=1", "display_name": "user8565094", "link": "https://stackoverflow.com/users/11991609/user8565094"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 324, "favorite_count": 0, "accepted_answer_id": 57701248, "answer_count": 1, "score": 0, "last_activity_date": 1567036288, "creation_date": 1567034133, "question_id": 57701090, "link": "https://stackoverflow.com/questions/57701090/update-onchange-event-and-fire-onchange-event-javascript", "title": "Update onChange event and fire onChange event javascript", "body": "<p>I have a select element with several options like this:</p>\n\n<pre><code>&lt;select onChange=\"foo(this)\"&gt;\n   &lt;option value=\"ok\" selected&gt;..&lt;/option&gt;\n   ....\n   &lt;option value=\"no\"&gt;..&lt;/option&gt;\n</code></pre>\n\n<p>I'm working with django (don't know if that matters honestly..) and in my onChange event of the select tag I should put <code>window.location.href=this.value</code> but it's not what I want since i need to make some changes to <code>this.value</code>..</p>\n\n<p>My idea was to create a foo function passing the select item and then modify the onChange event and fire it afterwards.</p>\n\n<p>I searched for some help and I found several options.. \n1) <a href=\"https://stackoverflow.com/questions/2856513/how-can-i-trigger-an-onchange-event-manually\">How can I trigger an onchange event manually?</a></p>\n\n<p>2) <a href=\"https://stackoverflow.com/questions/8789423/trigger-onchange-event\">Trigger &quot;onchange&quot; event</a></p>\n\n<p>and other examples as well that I don't remember but I use down in the example. \nNone of them are working for me.</p>\n\n<p>This is what I tried so far in my foo function:</p>\n\n<pre><code>&lt;script&gt;\n    function foo(obj)\n    {\n        if (condition)\n        {\n            obj.onChange = \"window.location.href=\"+ obj.value;\n            //obj.onChange(); //1 option I found on the net was to call onChange this way \n        }\n        else\n        {\n            obj.onChange = \"window.location.href=\"+ obj.value.replace('/A/', '/R/'); // this is the update I need to apply based on the condition\n\n            //obj.fireEvent(\"onChange\"); // another solution\n\n            // another solution\n            if (\"createEvent\" in document) {\n                var evt = document.createEvent(\"HTMLEvents\");\n                evt.initEvent(\"change\", false, true);\n                obj.dispatchEvent(evt);\n            }\n            else {\n                obj.fireEvent(\"onchange\");\n            }\n        }\n    }\n&lt;/script&gt;\n</code></pre>\n"}, {"tags": ["javascript", "vue.js", "quasar-framework"], "answers": [{"comments": [{"owner": {"reputation": 397, "user_id": 8575814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b0df7fcc66172a18bccf7d1f5347b8b?s=128&d=identicon&r=PG&f=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/8575814/phil"}, "reply_to_user": {"reputation": 27, "user_id": 11990324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1629935187454e322c957ad9f5b4e3c?s=128&d=identicon&r=PG&f=1", "display_name": "aykilic", "link": "https://stackoverflow.com/users/11990324/aykilic"}, "edited": false, "score": 0, "creation_date": 1567077882, "post_id": 57701791, "comment_id": 101860297, "body": "Excellent, please mark the answer as accepted so that others don&#39;t spend time answering it."}], "tags": [], "owner": {"reputation": 397, "user_id": 8575814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b0df7fcc66172a18bccf7d1f5347b8b?s=128&d=identicon&r=PG&f=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/8575814/phil"}, "is_accepted": true, "score": 0, "last_activity_date": 1567043435, "last_edit_date": 1567043435, "creation_date": 1567041425, "answer_id": 57701791, "question_id": 57701059, "link": "https://stackoverflow.com/questions/57701059/dynamic-countdown-on-table-rows-with-vuejs/57701791#57701791", "title": "dynamic countdown on table rows with vuejs", "body": "<p>Here is one way of doing it: <a href=\"https://jsfiddle.net/fzr36qwc/1/\" rel=\"nofollow noreferrer\">https://jsfiddle.net/fzr36qwc/1/</a></p>\n\n<p>Basically, I'm setting a countdown field for each row. Then, I use setInterval to update those values periodically. </p>\n\n<pre class=\"lang-js prettyprint-override\"><code>new Vue({\n  el: '#q-app',\n  props:[\n  'datam'\n  ],\n  data: function () {\n    return {\n      data: [\n        {\n          name: 'calories',\n          calories: 159,\n          fat: 6.0,\n          carbs: 24,\n          tarih: \"2020-11-11\",\n          sodium: 87,\n          calcium: '14%',\n          iron: '1%',\n          countdown: null,\n        },\n        {\n          name: 'fat',\n          calories: 237,\n          fat: 9.0,\n          carbs: 37,\n          tarih: \"2020-11-11 11:00\",\n          sodium: 129,\n          calcium: '8%',\n          iron: '1%',\n          countdown: null,\n        },\n        {\n          name: 'carbs',\n          calories: 518,\n          fat: 26.0,\n          carbs: 65,\n          tarih: \"2020-11-11 11:00\",\n          sodium: 54,\n          calcium: '12%',\n          iron: '6%',\n          countdown: null,\n        },\n        {\n          name: 'protein',\n          calories: 305,\n          fat: 3.7,\n          carbs: 67,\n          tarih: \"2020-11-11 11:00\",\n          sodium: 413,\n          calcium: '3%',\n          iron: '8%',\n          countdown: null,\n        }\n      ],\n      // date:moment(now).format('YYYY-MM-DD HH:mm'),\n      columns: [\n\n        { name: 'calories', align: 'center', label: 'Calories', field: 'calories', sortable: true },\n        { name: 'fat', label: 'Fat (g)', field: 'fat', sortable: true },\n        { name: 'carbs', label: 'Carbs (g)', field: 'carbs' },\n        { name: 'tarih', label: 'Protein (g)', field: 'countdown'},\n      ],\n    }\n  },\n  methods:{\n    updateCountdowns() {\n      Object.values(this.data).forEach(row =&gt; {\n        let datem = moment(row.tarih).format('YYYY-MM-DD HH:mm');\n        row.countdown = countdown(new Date(datem).getTime()).toString();\n      })\n    }\n  },\n  mounted(){\n    // Update once at the beginning\n    this.updateCountdowns()\n    // Then update each second\n    setInterval(this.updateCountdowns, 1000)\n  }\n})\n\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 11990324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1629935187454e322c957ad9f5b4e3c?s=128&d=identicon&r=PG&f=1", "display_name": "aykilic", "link": "https://stackoverflow.com/users/11990324/aykilic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 57701791, "answer_count": 1, "score": 2, "last_activity_date": 1567043435, "creation_date": 1567033824, "last_edit_date": 1567036994, "question_id": 57701059, "link": "https://stackoverflow.com/questions/57701059/dynamic-countdown-on-table-rows-with-vuejs", "title": "dynamic countdown on table rows with vuejs", "body": "<p><a href=\"https://jsfiddle.net/aykilic/cabfjstg/122/\" rel=\"nofollow noreferrer\">jsfiddle</a></p>\n\n<p>In vuejs, table, I have countdown with countdown in the table where I list the data, but I cannot start multiple countdown in table rows separately in each row, I opened a jsfiddle document for this process above, I would be very glad if you look at bi. thanks in advance ...</p>\n\n<pre><code>new Vue({\n  el: '#q-app',\n  data: function () {\n    let now = new Date();\n    return {\n    countdown: null,\n      data: [\n        {\n          name: 'calories',\n          calories: 159,\n          fat: 6.0,\n          carbs: 24,\n          tarih: \"2020-11-11\"\n        },\n        {\n          name: 'fat',\n          calories: 237,\n          fat: 9.0,\n          carbs: 37,\n          tarih: \"2020-11-11 11:00\"\n        },\n        {\n          name: 'carbs',\n          calories: 518,\n          fat: 26.0,\n          carbs: 65,\n          tarih: \"2020-11-11 11:00\"\n        },\n        {\n          name: 'protein',\n          calories: 305,\n          fat: 3.7,\n          carbs: 67,\n          tarih: \"2019-07-11 11:00\"\n        }\n      ],\n      // date:moment(now).format('YYYY-MM-DD HH:mm'),\n      columns: [\n\n        { name: 'calories', align: 'center', label: 'Calories', field: 'calories', sortable: true },\n        { name: 'fat', label: 'Fat (g)', field: 'fat', sortable: true },\n        { name: 'carbs', label: 'Carbs (g)', field: 'carbs' },\n        { name: 'tarih', label: 'Protein (g)', field: row =&gt; {\n            let datem = moment(row.tarih).format('YYYY-MM-DD HH:mm')\n          let selfi = this;\n          setInterval(function () {\n\n             selfi.countdown=countdown(new Date(datem).getTime());\n          }, 1000);\n        }\n        },\n\n      ],\n    }\n  },\n  methods:{\n\n  },\n  mounted(){\n\n  }\n})\n</code></pre>\n"}, {"tags": ["javascript", "firebase", "vue.js", "firebase-storage", "vuetify.js"], "comments": [{"owner": {"reputation": 21818, "user_id": 8583563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U42av.png?s=128&g=1", "display_name": "skirtle", "link": "https://stackoverflow.com/users/8583563/skirtle"}, "edited": false, "score": 1, "creation_date": 1567033798, "post_id": 57701029, "comment_id": 101845888, "body": "In your template you have <code>:value=&quot;Per&quot;</code>. What is <code>Per</code>?"}, {"owner": {"reputation": 81, "user_id": 9464117, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Tom Walsh", "link": "https://stackoverflow.com/users/9464117/tom-walsh"}, "reply_to_user": {"reputation": 21818, "user_id": 8583563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U42av.png?s=128&g=1", "display_name": "skirtle", "link": "https://stackoverflow.com/users/8583563/skirtle"}, "edited": false, "score": 0, "creation_date": 1567037224, "post_id": 57701029, "comment_id": 101846490, "body": "sorry this is a typo, fixed now."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 9464117, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Tom Walsh", "link": "https://stackoverflow.com/users/9464117/tom-walsh"}, "edited": false, "score": 0, "creation_date": 1567037090, "post_id": 57701109, "comment_id": 101846467, "body": "sorry the per is a typo when i was trying to find a solution, I found something that said that i had to reference immutable data so i had a data object called per which pointed to uploadPercentage, but it didnt help anything"}, {"owner": {"reputation": 81, "user_id": 9464117, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Tom Walsh", "link": "https://stackoverflow.com/users/9464117/tom-walsh"}, "edited": false, "score": 0, "creation_date": 1567038011, "post_id": 57701109, "comment_id": 101846631, "body": "as for the arrow function, it worked perfectly thank you. Is there documentation you can link which explains scope of objects in functions in detail? Thank you."}, {"owner": {"reputation": 21818, "user_id": 8583563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U42av.png?s=128&g=1", "display_name": "skirtle", "link": "https://stackoverflow.com/users/8583563/skirtle"}, "reply_to_user": {"reputation": 81, "user_id": 9464117, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Tom Walsh", "link": "https://stackoverflow.com/users/9464117/tom-walsh"}, "edited": false, "score": 1, "creation_date": 1567039091, "post_id": 57701109, "comment_id": 101846808, "body": "@TomWalsh I&#39;d always start with MDN: <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/&hellip;</a> &amp; <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/&hellip;</a>"}], "tags": [], "owner": {"reputation": 21818, "user_id": 8583563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U42av.png?s=128&g=1", "display_name": "skirtle", "link": "https://stackoverflow.com/users/8583563/skirtle"}, "is_accepted": true, "score": 1, "last_activity_date": 1567034298, "creation_date": 1567034298, "answer_id": 57701109, "question_id": 57701029, "link": "https://stackoverflow.com/questions/57701029/how-do-i-get-the-dom-to-render-changes-to-computed-data-in-a-vue-js-project/57701109#57701109", "title": "How do I get the DOM to render changes to computed data in a VUE.js Project", "body": "<p>I see two problems.</p>\n\n<p>Firstly this:</p>\n\n<pre><code>:value=\"Per\"\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>:value=\"uploadPercentage\"\n</code></pre>\n\n<p>Secondly, your <code>this</code> won't be pointing at the correct object inside the <code>progress</code> function. If you use an arrow function instead it will preserve the value of <code>this</code> to match the surrounding scope:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>task.on('state_changed',\n  snapshot =&gt; {\n    var percentage = (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n    console.log(percentage)\n    this.uploadPercentage = percentage\n    console.log(this.uploadPercentage)\n  },\n  // etc.\n</code></pre>\n\n<p>You can confirm this problem using <code>console.log(this)</code> inside your function.</p>\n\n<p>There are various alternatives to using an arrow function. For example, you could move that function out to its own Vue method. Vue automatically binds functions in <code>methods</code> to the appropriate <code>this</code>.</p>\n"}], "owner": {"reputation": 81, "user_id": 9464117, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Tom Walsh", "link": "https://stackoverflow.com/users/9464117/tom-walsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 57701109, "answer_count": 1, "score": 1, "last_activity_date": 1567037271, "creation_date": 1567033566, "last_edit_date": 1567037271, "question_id": 57701029, "link": "https://stackoverflow.com/questions/57701029/how-do-i-get-the-dom-to-render-changes-to-computed-data-in-a-vue-js-project", "title": "How do I get the DOM to render changes to computed data in a VUE.js Project", "body": "<p>I was following the firebase storage video tutorial for uploading images, it can be found here: <a href=\"https://www.youtube.com/watch?v=SpxHVrpfGgU&amp;feature=youtu.be\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=SpxHVrpfGgU&amp;feature=youtu.be</a>. </p>\n\n<p>I attempted to build the example app using Vue.JS and Vuetify instead. And I thought I had cracked it. However, the upload progress bar does not render changes to uploadPercentage. I even tried logging uploadPercentage to the console to test that it is changing and t is, it just isn't rendering. Does anyone have any idea why and how I can solve this problem?</p>\n\n<p>My code is below:</p>\n\n<pre><code>&lt;template&gt;\n  &lt;v-container style=\"height: 100%;\"&gt;\n      &lt;v-row\n        style=\"height: 30%;\"\n      &gt;&lt;/v-row&gt;\n      &lt;v-row\n        align-content=\"center\"\n        justify=\"center\"\n      &gt;\n        &lt;h1&gt;Image Uploader&lt;/h1&gt;\n      &lt;/v-row&gt;\n      &lt;v-row\n        align-content=\"center\"\n        justify=\"center\"\n      &gt;\n        &lt;v-col cols=\"6\"&gt;\n          &lt;v-progress-linear\n            color=\"deep-purple accent-4\"\n            rounded\n            height=\"6\"\n            :value=\"uploadPercentage\"\n            id=\"uploader\"\n          &gt;&lt;/v-progress-linear&gt;\n        &lt;/v-col&gt;\n      &lt;/v-row&gt;\n      &lt;v-row\n        align-content=\"center\"\n        justify=\"center\"\n      &gt;\n        &lt;v-col\n          class=\"align-content-center\"\n          cols=\"4\"\n        &gt;\n          &lt;v-file-input\n            v-model=\"file\"\n            accept=\"image/*\"\n            label=\"choose an image\"\n            outlined\n            @change=\"onFileChange\"\n            &gt;&lt;/v-file-input&gt;\n        &lt;/v-col&gt;\n        &lt;v-col\n          class=\"align-content-center mt-2\"\n          cols=\"2\"\n        &gt;\n          &lt;v-btn\n            @click=\"onUpload\"\n          &gt;\n            Upload\n            &lt;v-icon right dark&gt;mdi-cloud-upload&lt;/v-icon&gt;\n          &lt;/v-btn&gt;\n        &lt;/v-col&gt;\n      &lt;/v-row&gt;\n    &lt;/v-container&gt;\n&lt;/template&gt;\n</code></pre>\n\n<pre><code>&lt;script&gt;\nimport firebase from '@/firebase/init'\n\nexport default {\n  data: () =&gt; ({\n    file: null,\n    imageURL: null,\n    uploadPercentage: 0\n  }),\n  methods: {\n    onFileChange () {\n      let reader = new FileReader()\n      reader.onload = () =&gt; {\n        reader.imagUrl = reader.result\n      }\n      reader.readAsDataURL(this.file)\n    },\n    onUpload () {\n      // create a firebase storage ref\n      var storageRef = firebase.storage().ref('public_wall/' + this.file.name)\n\n      // upload file\n      var task = storageRef.put(this.file)\n\n      // update progress bar\n      task.on('state_changed',\n\n        function progress (snapshot) {\n          var percentage = (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n          console.log(percentage)\n          this.uploadPercentage = percentage\n          console.log(this.uploadPercentage)\n        },\n\n        function error (err) {\n          console.log(err)\n        },\n\n        function completed () {\n\n        }\n\n      )\n    }\n  }\n}\n&lt;/script&gt;\n</code></pre>\n"}, {"tags": ["javascript", "dynamic", "bootstrap-4", "progress-bar"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 8309041, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-g_9o72u9MmI/AAAAAAAAAAI/AAAAAAAAADE/2_JfXVkD54U/photo.jpg?sz=128", "display_name": "Eddie Knaz", "link": "https://stackoverflow.com/users/8309041/eddie-knaz"}, "edited": false, "score": 0, "creation_date": 1567091904, "post_id": 57701497, "comment_id": 101868685, "body": "new here didn&#39;t know..., Here you go"}, {"owner": {"reputation": 11081, "user_id": 10669010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LsWex.png?s=128&g=1", "display_name": "Mister Jojo", "link": "https://stackoverflow.com/users/10669010/mister-jojo"}, "reply_to_user": {"reputation": 41, "user_id": 8309041, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-g_9o72u9MmI/AAAAAAAAAAI/AAAAAAAAADE/2_JfXVkD54U/photo.jpg?sz=128", "display_name": "Eddie Knaz", "link": "https://stackoverflow.com/users/8309041/eddie-knaz"}, "edited": false, "score": 0, "creation_date": 1567100169, "post_id": 57701497, "comment_id": 101872452, "body": "@EddieKnaz : No problemo amigo ;) --  welcome to S.O. !"}], "tags": [], "owner": {"reputation": 11081, "user_id": 10669010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LsWex.png?s=128&g=1", "display_name": "Mister Jojo", "link": "https://stackoverflow.com/users/10669010/mister-jojo"}, "is_accepted": true, "score": 0, "last_activity_date": 1567038213, "creation_date": 1567038213, "answer_id": 57701497, "question_id": 57701015, "link": "https://stackoverflow.com/questions/57701015/how-do-i-create-bootstrap-progress-bar-using-vanilla-js-and-if-not-vanilla-than/57701497#57701497", "title": "how do I create bootstrap progress bar using vanilla JS and if not vanilla than something", "body": "<p>may be this ?</p>\n\n<p>=HTML=</p>\n\n<pre><code>&lt;div id=\"Hidden-Elements\" style=\"display: none\"&gt;\n  &lt;div class=\"progress-bar\" role=\"progressbar\" style=\"width: 50%\" \n       aria-valuenow=\"50\" aria-valuemin=\"0\" aria-valuemax=\"100\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>=JS=</p>\n\n<pre><code>const progressBarElem = document.querySelector('#Hidden-Elements div.progress-bar').cloneNode(true)\n\ndocument.querySelector(\".body\").appendChild(progressBarElem)\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 8309041, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-g_9o72u9MmI/AAAAAAAAAAI/AAAAAAAAADE/2_JfXVkD54U/photo.jpg?sz=128", "display_name": "Eddie Knaz", "link": "https://stackoverflow.com/users/8309041/eddie-knaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 57701497, "answer_count": 1, "score": 0, "last_activity_date": 1567038213, "creation_date": 1567033441, "question_id": 57701015, "link": "https://stackoverflow.com/questions/57701015/how-do-i-create-bootstrap-progress-bar-using-vanilla-js-and-if-not-vanilla-than", "title": "how do I create bootstrap progress bar using vanilla JS and if not vanilla than something", "body": "<p>Having this code </p>\n\n<pre><code>&lt;div class=\"progress\"&gt;\n  &lt;div class=\"progress-bar\" role=\"progressbar\" style=\"width: 15%\" aria-valuenow=\"15\" aria-valuemin=\"0\" aria-valuemax=\"100\"&gt;&lt;/div&gt;\n  &lt;div class=\"progress-bar bg-success\" role=\"progressbar\" style=\"width: 30%\" aria-valuenow=\"30\" aria-valuemin=\"0\" aria-valuemax=\"100\"&gt;&lt;/div&gt;\n  progressBarElemdiv class=\"progress-bar bg-info\" role=\"progressbar\" style=\"width: 20%\" aria-valuenow=\"20\" aria-valuemin=\"0\" aria-valuemax=\"100\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>from here <a href=\"https://getbootstrap.com/docs/4.3/components/progress/\" rel=\"nofollow noreferrer\">https://getbootstrap.com/docs/4.3/components/progress/</a></p>\n\n<p>I want create the same progressBar using js only</p>\n\n<p>I started with </p>\n\n<pre><code>progressBarElem = document.createElement(\"div\");\nprogressBarElem.className = \"progress-bar\"\nprogressBarElem.setAttribute(\"role\",\"progressbar\")\nprogressBarElem.setAttribute(\"aria-valuenow\",70)\nprogressBarElem.style.width = 50 + '%';\nprogressBarElem.setAttribute(\"aria-valuemin\",0)\nprogressBarElem.setAttribute(\"aria-valuemax\",100)\nprogressBarElem.setAttribute(\"aria-valuemax\",100)\nprogressBarElem.style.width = 200\nprogressBarElem.style.height = 50\nprogressBarElem.textContent = \"Sss\"\ndocument.querySelector(\".body\").appendChild(progressBarElem)\nconsole.log(progressBarElem);\n</code></pre>\n\n<p>but I still have a lot of attributes to set and some transion and it getting very messy, is there a quicker way?</p>\n"}, {"tags": ["javascript", "reactjs", "react-native", "i18next", "react-i18next"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6863891"}, "edited": false, "score": 0, "creation_date": 1567034115, "post_id": 57700989, "comment_id": 101845948, "body": "totally unrelated, any inputs on this would be really helpful - <a href=\"https://stackoverflow.com/questions/57663407/reactjs-handling-routing-while-integrating-with-api?noredirect=1#comment101775902_57663407\" title=\"reactjs handling routing while integrating with api\">stackoverflow.com/questions/57663407/&hellip;</a>"}], "tags": [], "owner": {"reputation": 15766, "user_id": 10106580, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mCnek.jpg?s=128&g=1", "display_name": "Dupocas", "link": "https://stackoverflow.com/users/10106580/dupocas"}, "is_accepted": true, "score": 1, "last_activity_date": 1567033493, "last_edit_date": 1567033493, "creation_date": 1567033184, "answer_id": 57700989, "question_id": 57700975, "link": "https://stackoverflow.com/questions/57700975/react-convert-function-component-to-class-component/57700989#57700989", "title": "React convert function component to class component", "body": "<p><code>useTranslation</code> is a <code>hook</code> and can only be called from within a <code>function</code> based component. For <code>class</code> based components use the <code>HOC</code></p>\n\n<pre><code>import { withTranslation } from 'react-i18next';\n\nclass Comp extends Component{\n    render(){\n        const { t, i18n } = this.props\n\n        return &lt;SomeJSX /&gt;\n    }\n}\n\nexport default withTranslation()(Comp)\n</code></pre>\n\n<p><strong>Note</strong> You can also use <code>withTranslation</code> in functional components.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6863891"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1101, "favorite_count": 0, "accepted_answer_id": 57700989, "answer_count": 1, "score": 2, "last_activity_date": 1567033493, "creation_date": 1567033070, "question_id": 57700975, "link": "https://stackoverflow.com/questions/57700975/react-convert-function-component-to-class-component", "title": "React convert function component to class component", "body": "<p>I am using the react <code>react-i18next</code> package for language translation.</p>\n\n<p>The function component that I have works correctly without any error</p>\n\n<pre><code>import React, { Suspense } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nfunction MyComponent() {\n  const { t, i18n } = useTranslation();\n\n  return (&lt;Suspense fallback=\"loading\"&gt;\n           &lt;h1&gt;{t('Welcome to React')}&lt;/h1&gt;\n          &lt;/Suspense&gt;);\n}\n\nexport default MyComponent;\n</code></pre>\n\n<p>when I tried converting this to a class as below</p>\n\n<pre><code>import React, { Component, Suspense } from 'react';\nimport { useTranslation } from 'react-i18next';\n\nclass MyComponent extends Component {\n    constructor(props) {\n        super(props);\n    }\n    render() {\n        const { t, i18n } = useTranslation();\n        return (\n        &lt;Suspense fallback=\"loading\"&gt;\n            &lt;h1&gt;{t('hello')}&lt;/h1&gt;\n        &lt;/Suspense&gt;\n        );\n    }\n}\n\nexport default MyComponent;\n</code></pre>\n\n<p>I get the error</p>\n\n<blockquote>\n  <p>Invalid hook call. Hooks can only be called inside of the body of a >function component. This could happen for one of the following reasons:</p>\n</blockquote>\n\n<p>Can someone point me to what am I doing incorrect?</p>\n"}, {"tags": ["javascript", "html"], "comments": [{"owner": {"reputation": 16793, "user_id": 4665, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8f83c3e22eab30856c803b1d96e1a04f?s=128&d=identicon&r=PG", "display_name": "Jon P", "link": "https://stackoverflow.com/users/4665/jon-p"}, "edited": false, "score": 0, "creation_date": 1567049219, "post_id": 57700968, "comment_id": 101848550, "body": "One thing to consider, use a class to hide the element, then use whatever logic to remove the class. Why? If you have anything other than <code>display:block</code> it&#39;s easier to remove a class with <code>display:none</code> than guess the right value for the <code>display</code> attribute."}], "answers": [{"comments": [{"owner": {"reputation": 16793, "user_id": 4665, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8f83c3e22eab30856c803b1d96e1a04f?s=128&d=identicon&r=PG", "display_name": "Jon P", "link": "https://stackoverflow.com/users/4665/jon-p"}, "edited": false, "score": 0, "creation_date": 1567048917, "post_id": 57701046, "comment_id": 101848495, "body": "Consider adding <code>return false</code> in your <code>if</code> statement to the <code>each</code> loop stops when a match is found."}, {"owner": {"reputation": 1, "user_id": 11991569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9487b8db7b36a5506e7eba22f099ffa1?s=128&d=identicon&r=PG&f=1", "display_name": "Vandy21", "link": "https://stackoverflow.com/users/11991569/vandy21"}, "edited": false, "score": 0, "creation_date": 1567086699, "post_id": 57701046, "comment_id": 101865608, "body": "Thanks for the answer! This works great for Chrome and Firefox, but not at all for IE. I&#39;m seeing that includes isn&#39;t supported in IE, so I went to try indexOf instead. Now in all browsers, either the wrong banner shows, or they both show. Any idea what&#39;s going on?"}], "tags": [], "owner": {"reputation": 8603, "user_id": 3289660, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cGFex.jpg?s=128&g=1", "display_name": "Nidhin Joseph", "link": "https://stackoverflow.com/users/3289660/nidhin-joseph"}, "is_accepted": false, "score": 1, "last_activity_date": 1567033701, "creation_date": 1567033701, "answer_id": 57701046, "question_id": 57700968, "link": "https://stackoverflow.com/questions/57700968/how-to-add-a-class-to-an-id-if-an-h2-tag-on-a-page-equals-a-certain-string-of/57701046#57701046", "title": "How to add a class to an ID if an &lt;h2&gt; tag on a page equals a certain string of text?", "body": "<p>You can use the <code>includes()</code> or <code>indexOf()</code> to do the checking. </p>\n\n<p>The <code>trim()</code> method removes whitespace from both sides of a string.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var exampleArray = ['text1', 'text2', 'multiple words1', 'multiple words2'];\r\n\r\n$('h1').each(function() {\r\n  if (exampleArray.includes($(this).text().trim())) {\r\n    $('#bannerIMG').addClass(\"showID\");\r\n  }\r\n});</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>.showID {\r\n  display: block !important;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://code.jquery.com/jquery-3.4.1.min.js\" integrity=\"sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=\" crossorigin=\"anonymous\"&gt;&lt;/script&gt;\r\n\r\n&lt;h1&gt;\r\n  text1\r\n&lt;/h1&gt;\r\n\r\n&lt;div id=\"bannerIMG\" style=\"display:none;\"&gt;ABC&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 1, "user_id": 11991569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9487b8db7b36a5506e7eba22f099ffa1?s=128&d=identicon&r=PG&f=1", "display_name": "Vandy21", "link": "https://stackoverflow.com/users/11991569/vandy21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567048813, "creation_date": 1567032976, "last_edit_date": 1567048813, "question_id": 57700968, "link": "https://stackoverflow.com/questions/57700968/how-to-add-a-class-to-an-id-if-an-h2-tag-on-a-page-equals-a-certain-string-of", "title": "How to add a class to an ID if an &lt;h2&gt; tag on a page equals a certain string of text?", "body": "<p>I want to use Javascript to add a class or in-line CSS to a specific ID, but only IF the <code>&lt;h1&gt;</code> tag on the page contains an EXACT MATCH of a specific word or words within an array. </p>\n\n<p>I'm hiding a div on the page, and only want it to show when  tags are equal to a specific word or to specific words. Below is what I got to work, but without using an array.</p>\n\n<pre><code>$('h1').each(function () {\n    if ($(this).text() == 'exampleText') {\n        $('#bannerIMG').addClass(\"showID\");\n    }\n});\n</code></pre>\n\n<p>I also tried using :contains, which worked, but it didn't show the div based on EXACT matches. For example, the div would show for h1 tags containing 'Example Text' and 'Example', but I only wanted it to show for h1 tags that equaled 'Example Text'</p>\n\n<pre><code>var exampleArray = ['text1', 'text2', 'multiple words1', 'multiple words2'];\n\n    $('h1').each(function () {\n        if ($(this).text() == exampleArray) {\n            $('#bannerIMG').addClass(\"showID\");\n        }\n    });\n</code></pre>\n\n<p>I want an array with a list of h1 tags that contain the names of the  different pages, and I want a certain div to show only on the pages I have listed in the array. Thank you for your help in advance!</p>\n"}, {"tags": ["javascript", "ejs"], "comments": [{"owner": {"reputation": 4545, "user_id": 4562204, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205865723100888/picture?type=large", "display_name": "Jake Holzinger", "link": "https://stackoverflow.com/users/4562204/jake-holzinger"}, "edited": false, "score": 1, "creation_date": 1567036091, "post_id": 57700964, "comment_id": 101846302, "body": "<a href=\"https://ionicabizau.github.io/ejs-playground/\" rel=\"nofollow noreferrer\">ionicabizau.github.io/ejs-playground</a>"}, {"owner": {"reputation": 18261, "user_id": 4185234, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/hjhi2.png?s=128&g=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/4185234/charlie"}, "edited": false, "score": 0, "creation_date": 1567094155, "post_id": 57700964, "comment_id": 101869802, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/41202233/how-can-i-use-if-statement-in-ejs\">How can I use if statement in ejs?</a>"}, {"owner": {"reputation": 14004, "user_id": 317768, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IxivA.jpg?s=128&g=1", "display_name": "jk.", "link": "https://stackoverflow.com/users/317768/jk"}, "reply_to_user": {"reputation": 18261, "user_id": 4185234, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/hjhi2.png?s=128&g=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/4185234/charlie"}, "edited": false, "score": 0, "creation_date": 1567111229, "post_id": 57700964, "comment_id": 101876617, "body": "@CharlieH I saw that post. I&#39;m asking about <code>compound</code> if statements and not if statements in general"}], "answers": [{"tags": [], "owner": {"reputation": 14004, "user_id": 317768, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IxivA.jpg?s=128&g=1", "display_name": "jk.", "link": "https://stackoverflow.com/users/317768/jk"}, "is_accepted": true, "score": 1, "last_activity_date": 1567111293, "last_edit_date": 1567111293, "creation_date": 1567093766, "answer_id": 57713764, "question_id": 57700964, "link": "https://stackoverflow.com/questions/57700964/compound-if-statements-in-ejs-template/57713764#57713764", "title": "Compound if statements in ejs template", "body": "<p>Yes, <code>ejs</code> supports compound statements:</p>\n\n<pre><code>&lt;%\n    var fruits = [\"Apple\", \"Pear\", \"Orange\", \"Lemon\"];\n%&gt;\n\nThese fruits are amazing:\n&lt;% for(var i = 0; i &lt; fruits.length; ++i) {%&gt;\n    &lt;% if (fruits[i] == 'Apple' || fruits[i] == 'Lemon') {%&gt;\n        - &lt;%=fruits[i]%&gt;s\n   &lt;% }%&gt;\n&lt;% } %&gt;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>These fruits are amazing:\n\n        - Apples\n\n        - Lemons\n</code></pre>\n\n<p>Thank you @JakeHolzinger</p>\n"}, {"tags": [], "owner": {"reputation": 18261, "user_id": 4185234, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/hjhi2.png?s=128&g=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/4185234/charlie"}, "is_accepted": false, "score": 1, "last_activity_date": 1567093778, "creation_date": 1567093778, "answer_id": 57713770, "question_id": 57700964, "link": "https://stackoverflow.com/questions/57700964/compound-if-statements-in-ejs-template/57713770#57713770", "title": "Compound if statements in ejs template", "body": "<p>Of course yes - </p>\n\n<pre><code>&lt;% x = 5 %&gt;\n\n&lt;% if(x === 4 || x === 5) { console.log('foo')}%&gt;\n</code></pre>\n"}], "owner": {"reputation": 14004, "user_id": 317768, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IxivA.jpg?s=128&g=1", "display_name": "jk.", "link": "https://stackoverflow.com/users/317768/jk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 57713764, "answer_count": 2, "score": -1, "last_activity_date": 1567111405, "creation_date": 1567032941, "last_edit_date": 1567111405, "question_id": 57700964, "link": "https://stackoverflow.com/questions/57700964/compound-if-statements-in-ejs-template", "title": "Compound if statements in ejs template", "body": "<p>Is it possible to use compound if statements in an ejs template:</p>\n\n<p><code>&lt;% if(this.thing == 'winner' || that.thing == 'winner') { %&gt;</code></p>\n\n<p>I know you can use if statements in ejs. I am specifically looking for an example of <code>compound</code> if statements which cannot be used in all js templating schemes.</p>\n"}, {"tags": ["javascript", "svelte"], "answers": [{"tags": [], "owner": {"reputation": 4559, "user_id": 11956107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec2fe11fce09f03fed6c38f5e7c4c9b2?s=128&d=identicon&r=PG", "display_name": "Stephane Vanraes", "link": "https://stackoverflow.com/users/11956107/stephane-vanraes"}, "is_accepted": true, "score": 2, "last_activity_date": 1567060464, "last_edit_date": 1567060464, "creation_date": 1567060099, "answer_id": 57704207, "question_id": 57700959, "link": "https://stackoverflow.com/questions/57700959/any-way-to-call-a-javascript-function-after-svelte-await-then/57704207#57704207", "title": "Any way to call a javascript function after Svelte #await :then", "body": "<p>I am not entirely sure what you are trying to do, but if the <code>DataTable</code> you are creating is supposed to take in the data, why not simply pass it to it ?</p>\n\n<pre><code>{#each data as data1, i}\n   &lt;DataTable id={data1.title} data={data1.actualdata}/&gt;\n{/each}\n</code></pre>\n\n<p>Alternatively, you could add an event to the component itself.</p>\n\n<pre><code>{#each data as data1, i}\n   &lt;DataTable id={data1.title} use:fillTable{data1, data1.title}&gt;&lt;/DataTable&gt;\n{/each}\n\n&lt;script&gt;\n  const fillTable = (el, data, id) =&gt; () =&gt; {\n     // el would be the created element\n     // data and id were passed on in the #each\n  }\n&lt;/script&gt;\n\n</code></pre>\n\n<p>A third way would be to move the promise out of the markup and put the logic in the script tag itself, it would require using some extra variables to track the loading, error, etc... but might end up being cleaner if you want to add a lot of extra actions related to the promise resolution itself. I suppose there it becomes more a matter of taste.</p>\n"}], "owner": {"reputation": 3422, "user_id": 1523785, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/b28dda5cffe5812e52a6388c5e4ce9f9?s=128&d=identicon&r=PG", "display_name": "hatellla", "link": "https://stackoverflow.com/users/1523785/hatellla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "accepted_answer_id": 57704207, "answer_count": 1, "score": 1, "last_activity_date": 1567060464, "creation_date": 1567032919, "last_edit_date": 1567035763, "question_id": 57700959, "link": "https://stackoverflow.com/questions/57700959/any-way-to-call-a-javascript-function-after-svelte-await-then", "title": "Any way to call a javascript function after Svelte #await :then", "body": "<p>Is there any way to call a javascript function after Svelte <code>#await :then</code>? What I wanted to do in following code is call a javascript table once I created empty Datatable with some id and then in the javascript just add the data in the Datable. So, basically I wanted to pass <code>data1</code> in the javascript function and the id of the DataTable or dataTable element itself. Is there any way I can do this?</p>\n\n<pre><code>&lt;div&gt;\n  &lt;h1&gt; Title&lt;/h1&gt;\n  {#await promise}\n    loading...\n  {:then data}\n    {#each data as data1, i}\n      &lt;DataTable id={data1.title}/&gt;\n      &lt;br /&gt;\n      ---&gt; I want to call javascript function here which would add data in the given data table. How can I do that?\n    {/each}\n  {:catch error}\n    &lt;kat-alert header=\"Error\" description={error.message} variant=\"warning\" /&gt;\n  {/await}\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["javascript", "timezone", "momentjs", "timezone-offset"], "comments": [{"owner": {"reputation": 195413, "user_id": 634824, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/889cf720c96957e615463b5c903a5e18?s=128&d=identicon&r=PG", "display_name": "Matt Johnson-Pint", "link": "https://stackoverflow.com/users/634824/matt-johnson-pint"}, "edited": false, "score": 0, "creation_date": 1567094913, "post_id": 57700920, "comment_id": 101870151, "body": "This can only possibly get time zones that match the <i>current</i> offset - that is, the one based on &quot;now&quot; as returned by <code>new Date()</code>.  See &quot;Time Zone != Offset&quot; in the <a href=\"https://stackoverflow.com/tags/timezone/info\">timezone</a> tag wiki."}, {"owner": {"reputation": 195413, "user_id": 634824, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/889cf720c96957e615463b5c903a5e18?s=128&d=identicon&r=PG", "display_name": "Matt Johnson-Pint", "link": "https://stackoverflow.com/users/634824/matt-johnson-pint"}, "edited": false, "score": 0, "creation_date": 1567096189, "post_id": 57700920, "comment_id": 101870754, "body": "Preferably you should be using <code>Intl.DateTimeFormat().resolvedOptions().timeZone</code> instead to gather the client&#39;s time zone ID."}], "answers": [{"tags": [], "owner": {"reputation": 7965, "user_id": 6242613, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/X5cUu.jpg?s=128&g=1", "display_name": "V. Sambor", "link": "https://stackoverflow.com/users/6242613/v-sambor"}, "is_accepted": true, "score": 1, "last_activity_date": 1567114765, "last_edit_date": 1567114765, "creation_date": 1567036177, "answer_id": 57701300, "question_id": 57700920, "link": "https://stackoverflow.com/questions/57700920/get-timezone-name-list-using-timezone-offset/57701300#57701300", "title": "Get timezone name/list using timezone offset", "body": "<p>I think the you have to use <code>moment-timezone.js</code> library for this. </p>\n\n<p>(Link here: <a href=\"https://momentjs.com/timezone/\" rel=\"nofollow noreferrer\">https://momentjs.com/timezone/</a>)</p>\n\n<p>The approach should go along this lines:</p>\n\n<ol>\n<li>import the library (Note: this library is dependent on <a href=\"https://momentjs.com/\" rel=\"nofollow noreferrer\">moment.js</a> library - import that before)</li>\n<li>use <code>moment.tz.names()</code> function to get all the available timezone locations.</li>\n<li>use <code>moment.tz.zone(name)</code> function to get the <a href=\"https://momentjs.com/timezone/docs/#/zone-object/\" rel=\"nofollow noreferrer\">zone object</a></li>\n<li>use the <code>offsets</code> property from the <strong>zone object</strong> to get the location offset</li>\n<li>create a map to hold the same offset names.</li>\n<li>loop through the offsets (one location can share multiple offsets) and add them to the map as well as the name of location to each key. </li>\n<li>access that map with specific offset and get the list of timezones.</li>\n</ol>\n\n<p>The code will look something like this: </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"true\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const tzNames = moment.tz.names();\r\nconst map = new Map();\r\n\r\nfor (const name of tzNames) {\r\n  const offsets = moment.tz.zone(name).offsets;\r\n  \r\n  for (const offset of offsets) {\r\n      if (!map.has(offset)) {\r\n          map.set(offset, new Set());\r\n      }\r\n\r\n      map.get(offset).add(name);\r\n  }\r\n}\r\n\r\nconst currentOffset = new Date().getTimezoneOffset();\r\nconst offsetList = map.get(currentOffset);\r\n\r\nconsole.log('currentOffset: ' + currentOffset);\r\nconsole.log('offset list size: ' + offsetList.size);\r\nconsole.log('Total different offsets: ' + map.size);\r\n\r\nconsole.log('List items: ');\r\nfor (const item of offsetList) {\r\n  console.log(item);\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment.min.js\"&gt;&lt;/script&gt;\r\n&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.23/moment-timezone-with-data-2012-2022.min.js\"&gt;&lt;/script&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 77, "user_id": 11239278, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4l_QpL9Fgf0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdvskn-p9Wig47dg9tVnehjNGFwrw/mo/photo.jpg?sz=128", "display_name": "Abhishek Rane", "link": "https://stackoverflow.com/users/11239278/abhishek-rane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1047, "favorite_count": 0, "accepted_answer_id": 57701300, "answer_count": 1, "score": 0, "last_activity_date": 1567114765, "creation_date": 1567032588, "question_id": 57700920, "link": "https://stackoverflow.com/questions/57700920/get-timezone-name-list-using-timezone-offset", "title": "Get timezone name/list using timezone offset", "body": "<p>I am having the time zone offset using the below code.\nI want to find out the list of timezone names associated with the timezone offset.</p>\n\n<p>new Date().getTimezoneOffset().toString()</p>\n"}, {"tags": ["javascript", "d3.js"], "answers": [{"tags": [], "owner": {"reputation": 90540, "user_id": 5768908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wf0PS.jpg?s=128&g=1", "display_name": "Gerardo Furtado", "link": "https://stackoverflow.com/users/5768908/gerardo-furtado"}, "is_accepted": true, "score": 0, "last_activity_date": 1567035892, "creation_date": 1567035892, "answer_id": 57701277, "question_id": 57700897, "link": "https://stackoverflow.com/questions/57700897/enter-update-exit-join-pattern-bostock-example-doesnt-seem-to-work-with-new-dat/57701277#57701277", "title": "Enter/update/exit join pattern Bostock example doesn&#39;t seem to work with new data &quot;inserted&quot; at position 0", "body": "<p><strong>TL;DR</strong>: You're missing a <a href=\"https://github.com/d3/d3-selection#selection_data\" rel=\"nofollow noreferrer\">key function</a>.</p>\n\n<p>If you look at Bostock's example, you'll see the he uses a key function:</p>\n\n<pre><code>selection.data(randomLetters(), d =&gt; d)\n</code></pre>\n\n<p>However, your code doesn't:</p>\n\n<pre><code>selection.data(data)\n</code></pre>\n\n<p>Therefore, the result is the expected one. If you don't use a <a href=\"https://github.com/d3/d3-selection#selection_data\" rel=\"nofollow noreferrer\">key function</a>...</p>\n\n<blockquote>\n  <p>... then the first datum in data is assigned to the first selected element, the second datum to the second selected element, and so on. A key function may be specified to control which datum is assigned to which element, replacing the default join-by-index, by computing a string identifier for each datum and element.</p>\n</blockquote>\n\n<p>Here is your code with a key function: <a href=\"https://bl.ocks.org/GerardoFurtado/1682dca153d872b445e7060421a5a824/d7c8da29ee7692c71bac3714e9bae051f033cd61\" rel=\"nofollow noreferrer\">https://bl.ocks.org/GerardoFurtado/1682dca153d872b445e7060421a5a824/d7c8da29ee7692c71bac3714e9bae051f033cd61</a></p>\n"}], "owner": {"reputation": 15, "user_id": 11952512, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/623e969fbde5b087263cd70b1c0e856d?s=128&d=identicon&r=PG&f=1", "display_name": "employee01", "link": "https://stackoverflow.com/users/11952512/employee01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 57701277, "answer_count": 1, "score": 1, "last_activity_date": 1567035916, "creation_date": 1567032323, "last_edit_date": 1567035916, "question_id": 57700897, "link": "https://stackoverflow.com/questions/57700897/enter-update-exit-join-pattern-bostock-example-doesnt-seem-to-work-with-new-dat", "title": "Enter/update/exit join pattern Bostock example doesn&#39;t seem to work with new data &quot;inserted&quot; at position 0", "body": "<p>Following along with Bostock's selection.join example (<a href=\"https://observablehq.com/@d3/selection-join\" rel=\"nofollow noreferrer\">https://observablehq.com/@d3/selection-join</a>) I run into an issue with enter and update where the correct .attr() are not applied. I must be having some fundamental underlying mis-understanding since this quite closely mirrors the example but don't behave in the same manner.</p>\n\n<p>The simplified version I created removes the loop and uses fixed data sets for simplicity. </p>\n\n<p>Here is the example data update sequence which results in unexpected result/colors for items which are updated/entered:</p>\n\n<pre><code>[1, 2, 3] -&gt; all values are green\n[-1, 0, 1, 2, 3] -&gt; -1, 0 should be green and 1, 2, 3 should be black.\n</code></pre>\n\n<p>What I actually get is</p>\n\n<pre><code>-1, 0, 1 -&gt; are black \n2, 3 -&gt; green\n</code></pre>\n\n<p>It appears almost as if it only looks at the index and doesn't actually look at the value.</p>\n\n<p>Here is the block with my example code:\n<a href=\"https://bl.ocks.org/aitee/5627fefb443ddccc7aa7f609780aaeca\" rel=\"nofollow noreferrer\">https://bl.ocks.org/aitee/5627fefb443ddccc7aa7f609780aaeca</a></p>\n"}, {"tags": ["javascript"], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 8157135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/470cb8b4ad5e4e910d512c07c3109c5f?s=128&d=identicon&r=PG&f=1", "display_name": "tableguarder", "link": "https://stackoverflow.com/users/8157135/tableguarder"}, "edited": false, "score": 0, "creation_date": 1567033310, "post_id": 57700915, "comment_id": 101845813, "body": "Say we&#39;re working on the number <code>13</code>. After calling the second map method, would   <code>[1,3]</code> turn to <code>[true,false]</code> and the reduce method would return <code>false</code> because T&amp;&amp;F===F?"}, {"owner": {"reputation": 76753, "user_id": 1026459, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/pv5mS.png?s=128&g=1", "display_name": "Travis J", "link": "https://stackoverflow.com/users/1026459/travis-j"}, "reply_to_user": {"reputation": 95, "user_id": 8157135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/470cb8b4ad5e4e910d512c07c3109c5f?s=128&d=identicon&r=PG&f=1", "display_name": "tableguarder", "link": "https://stackoverflow.com/users/8157135/tableguarder"}, "edited": false, "score": 0, "creation_date": 1567092746, "post_id": 57700915, "comment_id": 101869132, "body": "@tableguarder - Yes, that is exactly what would happen."}], "tags": [], "owner": {"reputation": 76753, "user_id": 1026459, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/pv5mS.png?s=128&g=1", "display_name": "Travis J", "link": "https://stackoverflow.com/users/1026459/travis-j"}, "is_accepted": true, "score": 1, "last_activity_date": 1567033109, "last_edit_date": 1567033109, "creation_date": 1567032505, "answer_id": 57700915, "question_id": 57700876, "link": "https://stackoverflow.com/questions/57700876/can-someone-help-me-to-understand-the-solution-for-leetcodes-self-dividing-numb/57700915#57700915", "title": "Can someone help me to understand the solution for Leetcode&#39;s Self-Dividing-Numbers exercise", "body": "<blockquote>\n  <p><code>.map((integer) =&gt; integer !== 0 &amp;&amp; number % integer === 0)</code> This checks to see whether the single integer in the array of integers is not 0(because a SDN can't contain 0) and whether the number is self-divisible by the integer. Is this explanation correct? </p>\n</blockquote>\n\n<p>Correct.</p>\n\n<blockquote>\n  <p>What would the array look like if we were to return it after calling the 2nd map method?</p>\n</blockquote>\n\n<p>It would be an array of true or false values, with each value depending on the conditions you explain above.</p>\n\n<blockquote>\n  <p>As for the reduce method, I'm completely lost. Why was it used?</p>\n</blockquote>\n\n<p>The reduce method takes the array of true or false values, and then and's them all sequentially. This will return a single true or false value, essentially representing the question \"were all of the values true?\".</p>\n\n<hr>\n\n<p>As an expansion on the <code>reduce</code> explanation, reduce expects a callback function which takes two arguments; a previous value and a current value. In addition, there may be a seed for the first value of previous (which was not used in your example). reduce will then iterate and inject the previous value and current value into the callback function, using the return as the next previous value.</p>\n\n<pre><code>reduce(function(previous, current){ ... }, optionalSeedForFirstPrevious)\n</code></pre>\n\n<p>Using the example you give, this would mean that <code>a</code> was the previous value, and <code>b</code> was the current value. The arrow function returns the result of <code>a &amp;&amp; b</code> each time. </p>\n\n<p>So, if you have <code>[true, false, true]</code>, that means that reduce will essentially evaluate as</p>\n\n<pre><code>iteration1 = true &amp;&amp; false;\niteration2 = iteration1 &amp;&amp; true;\nreturn iteration2; //false\n</code></pre>\n\n<p>if you have <code>[true, true, true]</code>, that means that reduce will essentially evaluate as</p>\n\n<pre><code>iteration1 = true &amp;&amp; true;\niteration2 = iteration1 &amp;&amp; true;\nreturn iteration2; //true\n</code></pre>\n\n<p>For more information on <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce\" rel=\"nofollow noreferrer\">reduce, visit the Mozilla Developers Network</a>.</p>\n"}], "owner": {"reputation": 95, "user_id": 8157135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/470cb8b4ad5e4e910d512c07c3109c5f?s=128&d=identicon&r=PG&f=1", "display_name": "tableguarder", "link": "https://stackoverflow.com/users/8157135/tableguarder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 57700915, "answer_count": 1, "score": 1, "last_activity_date": 1567033109, "creation_date": 1567032134, "question_id": 57700876, "link": "https://stackoverflow.com/questions/57700876/can-someone-help-me-to-understand-the-solution-for-leetcodes-self-dividing-numb", "title": "Can someone help me to understand the solution for Leetcode&#39;s Self-Dividing-Numbers exercise", "body": "<p>Here's the link to the exercise:\n<a href=\"https://leetcode.com/problems/self-dividing-numbers/\" rel=\"nofollow noreferrer\">https://leetcode.com/problems/self-dividing-numbers/</a></p>\n\n<p>I have the code but I'm having trouble understanding how to explain it after calling the first map method. </p>\n\n<p><code>.map((integer) =&gt; integer !== 0 &amp;&amp; number % integer === 0)</code>\nThis checks to see whether the single integer in the array of integers is not 0(because a SDN can't contain 0) and whether the number is self-divisible by the integer. Is this explanation correct? What would the array look like if we were to return it after calling the 2nd map method?</p>\n\n<p>As for the reduce method, I'm completely lost. Why was it used? </p>\n\n<p>Thanks</p>\n\n<pre><code>var SDN = function(number) {\n\n    // change number to string\n    // use split to get number string to be an array of integers as strings\n    // map(Number) to change array of strings to array of numbers\n\n    return number.toString()\n                .split('')\n                .map(Number)\n                .map((integer) =&gt; integer !== 0 &amp;&amp; number % integer === 0)\n                .reduce((a,b) =&gt; a &amp;&amp; b)\n}\n\nvar selfDividingNumbers = function(left, right) {\n    let res = []\n    for(let i = left; i &lt;= right; i++) {\n        if(SDN(i)) {\n            res.push(i)\n        }\n    }\n    return res\n};\n</code></pre>\n"}, {"tags": ["javascript"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 38349, "user_id": 10221765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e762fef8d87381d5cbd58d851d1b816?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Bashford", "link": "https://stackoverflow.com/users/10221765/jack-bashford"}, "edited": false, "score": 0, "creation_date": 1567032761, "post_id": 57700871, "comment_id": 101845707, "body": "@JackBashford Isn&#39;t that a tautology? The language was designed that way because that&#39;s what the designers wanted?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1567032901, "post_id": 57700871, "comment_id": 101845741, "body": "JavaScript&#39;s core is really lean and tends to steer away from adding frills or luxuries, focusing instead on the pure essentials. If you want better tools, <a href=\"http://npmjs.com\" rel=\"nofollow noreferrer\">NPM</a> has you covered."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": -2, "last_activity_date": 1567032723, "creation_date": 1567032723, "answer_id": 57700935, "question_id": 57700871, "link": "https://stackoverflow.com/questions/57700871/why-does-js-array-not-include-a-peek-function/57700935#57700935", "title": "Why does JS array not include a peek() function?", "body": "<p>While the names suggest stacks, that's not really a common use of arrays. <code>push()</code> is used all the time when constructing arrays sequentially, having nothing to do with stacks. I don't think <code>pop()</code> is used nearly as much, but it's useful as a built-in because it combines multiple operations (fetching and removing); arrays are much more often processed in order without removal, than by popping elements off the end.</p>\n\n<p><code>peek()</code> would be used even less, and I suppose the designers just felt that it wasn't useful enough to make a built-in. As you noted, the code to do it by hand is pretty simple.</p>\n\n<p>A built-in replacement for <code>arr[Math.floor(Math.random()*arr.length)]</code> would almost certainly get far more use than <code>peek()</code>, but we don't have that, either.</p>\n"}, {"tags": [], "owner": {"reputation": 17145, "user_id": 5093961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3736a281ed5cdc18e41f6d3100d76dcc?s=128&d=identicon&r=PG", "display_name": "Steven Spungin", "link": "https://stackoverflow.com/users/5093961/steven-spungin"}, "is_accepted": false, "score": 0, "last_activity_date": 1567033650, "creation_date": 1567033650, "answer_id": 57701038, "question_id": 57700871, "link": "https://stackoverflow.com/questions/57700871/why-does-js-array-not-include-a-peek-function/57701038#57701038", "title": "Why does JS array not include a peek() function?", "body": "<p>You have to draw the line somewhere to be simple.  Furthermore there are several ways to handle peeking an empty array (return null, return undefined, or throw).</p>\n\n<blockquote>\n  <p>forcing us instead to always need to index the final element of the array</p>\n</blockquote>\n\n<p>This is not really true, as you can prototype the array if you want, or write a wrapper function.  In the following example, <strong>the wrapper function is actually 1 character less than the native API you desire</strong>.  <code>peek(a)</code> vs <code>a.peek()</code>.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function peek_or_null(array) {\r\n  if (array.length === 0) {\r\n    return null;\r\n  }\r\n  return array[array.length - 1];\r\n}\r\n\r\nfunction peek(array) {\r\n  if (array.length === 0) {\r\n    throw new Error('out of bounds');\r\n  }\r\n  return array[array.length - 1];\r\n}\r\n\r\nArray.prototype.peek = function() {\r\n  if (this.length === 0) {\r\n    throw new Error('out of bounds');\r\n  }\r\n  return this[this.length - 1];\r\n}\r\n\r\nconst a = [1, 2, 3];\r\nconsole.log(a.peek());\r\nconsole.log(peek(a));\r\nconsole.log(peek_or_null(a));</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 1527, "user_id": 983173, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/917713e9f48b9aa4edad601dc3a1d84a?s=128&d=identicon&r=PG", "display_name": "Steverino", "link": "https://stackoverflow.com/users/983173/steverino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1357, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1567033650, "creation_date": 1567032095, "question_id": 57700871, "link": "https://stackoverflow.com/questions/57700871/why-does-js-array-not-include-a-peek-function", "title": "Why does JS array not include a peek() function?", "body": "<p>JavaScript arrays include functions that make it handle like a stack out of the box.  Refer to <code>push(...)</code> and <code>pop()</code>.  If the spec/developers of the language went to the trouble to make arrays stack-like in this way with push/pop functions, why was <code>peek()</code> omitted (forcing us instead to always need to index the final element of the array, e.g. <code>arr[arr.length-1]</code>)?</p>\n\n<p>I realize that this may be a subjective matter, but I was hoping someone knew something about decisions made/published regarding the language spec that my Google Fu was too weak to unearth.</p>\n"}, {"tags": ["javascript", "html", "json", "html-table", "xlsx"], "comments": [{"owner": {"reputation": 43836, "user_id": 5947043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jUK37.png?s=128&g=1", "display_name": "ADyson", "link": "https://stackoverflow.com/users/5947043/adyson"}, "edited": false, "score": 0, "creation_date": 1567038925, "post_id": 57700870, "comment_id": 101846780, "body": "you&#39;ve told us what you want...but what&#39;s the question? What is going wrong with your code currently when you try? Also...is there any specific reason you need the intermediate step of converting the data to JSON? Why not just create the HTML table directly from the Excel data as you read it?"}, {"owner": {"reputation": 43836, "user_id": 5947043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jUK37.png?s=128&g=1", "display_name": "ADyson", "link": "https://stackoverflow.com/users/5947043/adyson"}, "edited": false, "score": 0, "creation_date": 1567039365, "post_id": 57700870, "comment_id": 101846851, "body": "Having made it into a runnable snippet, it&#39;s clearer that one of your main issues (there may be others yet to be discovered) is that <code>myBooks</code> is not defined outside the <code>ExcelToJSON</code> function, and is therefore not accessible from the <code>CreateTableFromJSON</code> function. Would it not make sense to a) make CreateTableFromJSON accept the myBooks array as an input parameter and b) call CreateTableFromJSON from inside ExcelToJSON as soon as it has successfully read the file, rather than waiting for a separate button press? (This is notwithstanding my remark above re the necessity of using JSON)"}, {"owner": {"reputation": 13, "user_id": 6630122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8d1490cde2116bd2fcb944aaef95948?s=128&d=identicon&r=PG&f=1", "display_name": "Zac Jose", "link": "https://stackoverflow.com/users/6630122/zac-jose"}, "reply_to_user": {"reputation": 43836, "user_id": 5947043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jUK37.png?s=128&g=1", "display_name": "ADyson", "link": "https://stackoverflow.com/users/5947043/adyson"}, "edited": false, "score": 0, "creation_date": 1567045845, "post_id": 57700870, "comment_id": 101847960, "body": "ok, so i made <code>json_object</code> global but im receiving an one column table with just my JSON string in it. if I set the object value manually i&#39;m able to get the type of table I want.  for instance adding <code>var json_object = [     {         &quot;Book ID&quot;: &quot;1&quot;,         &quot;Book Name&quot;: &quot;Computer Architecture&quot;,         &quot;Category&quot;: &quot;Computers&quot;,         &quot;Price&quot;: &quot;125.60&quot;     },     {         &quot;Book ID&quot;: &quot;2&quot;,         &quot;Book Name&quot;: &quot;Asp.Net 4 Blue Book&quot;,         &quot;Category&quot;: &quot;Programming&quot;,         &quot;Price&quot;: &quot;56.00&quot;     } ] </code>"}, {"owner": {"reputation": 13, "user_id": 6630122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8d1490cde2116bd2fcb944aaef95948?s=128&d=identicon&r=PG&f=1", "display_name": "Zac Jose", "link": "https://stackoverflow.com/users/6630122/zac-jose"}, "reply_to_user": {"reputation": 43836, "user_id": 5947043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jUK37.png?s=128&g=1", "display_name": "ADyson", "link": "https://stackoverflow.com/users/5947043/adyson"}, "edited": false, "score": 0, "creation_date": 1567045891, "post_id": 57700870, "comment_id": 101847972, "body": "I&#39;ve also update the initial post to what im working with now @ADyson"}, {"owner": {"reputation": 43836, "user_id": 5947043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jUK37.png?s=128&g=1", "display_name": "ADyson", "link": "https://stackoverflow.com/users/5947043/adyson"}, "edited": false, "score": 0, "creation_date": 1567068748, "post_id": 57700870, "comment_id": 101855390, "body": "Ah ok I see the issue now. Answer added below"}], "answers": [{"tags": [], "owner": {"reputation": 43836, "user_id": 5947043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jUK37.png?s=128&g=1", "display_name": "ADyson", "link": "https://stackoverflow.com/users/5947043/adyson"}, "is_accepted": false, "score": 0, "last_activity_date": 1567068978, "creation_date": 1567068978, "answer_id": 57706562, "question_id": 57700870, "link": "https://stackoverflow.com/questions/57700870/taking-xlsx-json-format-and-turning-it-into-a-dynamic-html-table/57706562#57706562", "title": "Taking XLSX JSON format and turning it into a dynamic HTML table", "body": "<p>You can just change</p>\n\n<pre><code>json_object = JSON.stringify(XL_row_object)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>json_object = XL_row_object\n</code></pre>\n\n<p>You don't actually need JSON here at all. JSON is a text format by which you can represent data.  So when you do <code>JSON.stringify</code> the result is (as per the name) a <strong>string</strong>, not an array or object. When you loop through a string, it iterates each character of the string individually. If you simply leave the array which came from the Excel file as-is without turning it into a string, you can loop through it properly.</p>\n\n<p>JSON is useful for transmitting data (e.g. in a HTTP request) or storing it. But it's not useful for actual data processing, which is what you're doing here.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n\r\n&lt;head&gt;\r\n  &lt;title&gt;Convert JSON Data to HTML Table&lt;/title&gt;\r\n  &lt;style&gt;\r\n    th,\r\n    td,\r\n    p,\r\n    input {\r\n      font: 14px Verdana;\r\n    }\r\n    \r\n    table,\r\n    th,\r\n    td {\r\n      border: solid 1px #DDD;\r\n      border-collapse: collapse;\r\n      padding: 2px 3px;\r\n      text-align: center;\r\n    }\r\n    \r\n    th {\r\n      font-weight: bold;\r\n    }\r\n  &lt;/style&gt;\r\n&lt;/head&gt;\r\n\r\n\r\n&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.8.0/jszip.js\"&gt;&lt;/script&gt;\r\n&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.8.0/xlsx.js\"&gt;&lt;/script&gt;\r\n&lt;script&gt;\r\n  var json_object = {};\r\n  var ExcelToJSON = function() {\r\n\r\n    this.parseExcel = function(file) {\r\n      var reader = new FileReader();\r\n\r\n      reader.onload = function(e) {\r\n        var data = e.target.result;\r\n        var workbook = XLSX.read(data, {\r\n          type: 'binary'\r\n        });\r\n        workbook.SheetNames.forEach(function(sheetName) {\r\n          // Here is your object\r\n          var XL_row_object = XLSX.utils.sheet_to_row_object_array(workbook.Sheets[sheetName]);\r\n          json_object = XL_row_object;\r\n          document.getElementById(\"fileContent\").innerHTML = json_object;\r\n          //console.log(JSON.parse(json_object));\r\n          jQuery('#xlx_json').val(json_object);\r\n        })\r\n      };\r\n\r\n      reader.onerror = function(ex) {\r\n        console.log(ex);\r\n      };\r\n\r\n      reader.readAsBinaryString(file);\r\n    };\r\n  };\r\n\r\n  function handleFileSelect(evt) {\r\n\r\n    var files = evt.target.files; // FileList object\r\n    var xl2json = new ExcelToJSON();\r\n    xl2json.parseExcel(files[0]);\r\n  }\r\n\r\n\r\n\r\n  function CreateTableFromJSON() {\r\n\r\n    // EXTRACT VALUE FOR HTML HEADER. \r\n    // ('Book ID', 'Book Name', 'Category' and 'Price')\r\n    var col = [];\r\n    for (var i = 0; i &lt; json_object.length; i++) {\r\n      for (var key in json_object[i]) {\r\n        if (col.indexOf(key) === -1) {\r\n          col.push(key);\r\n        }\r\n      }\r\n    }\r\n\r\n    // CREATE DYNAMIC TABLE.\r\n    var table = document.createElement(\"table\");\r\n\r\n    // CREATE HTML TABLE HEADER ROW USING THE EXTRACTED HEADERS ABOVE.\r\n\r\n    var tr = table.insertRow(-1); // TABLE ROW.\r\n\r\n    for (var i = 0; i &lt; col.length; i++) {\r\n      var th = document.createElement(\"th\"); // TABLE HEADER.\r\n      th.innerHTML = col[i];\r\n      tr.appendChild(th);\r\n    }\r\n\r\n    // ADD JSON DATA TO THE TABLE AS ROWS.\r\n    for (var i = 0; i &lt; json_object.length; i++) {\r\n\r\n      tr = table.insertRow(-1);\r\n\r\n      for (var j = 0; j &lt; col.length; j++) {\r\n        var tabCell = tr.insertCell(-1);\r\n        tabCell.innerHTML = json_object[i][col[j]];\r\n      }\r\n    }\r\n\r\n    // FINALLY ADD THE NEWLY CREATED TABLE WITH JSON DATA TO A CONTAINER.\r\n    var divContainer = document.getElementById(\"showData\");\r\n    divContainer.innerHTML = \"\";\r\n    divContainer.appendChild(table);\r\n  }\r\n&lt;/script&gt;\r\n\r\n&lt;body&gt;\r\n  &lt;input type=\"button\" onclick=\"CreateTableFromJSON()\" value=\"Create Table From JSON\" /&gt;\r\n  &lt;p id=\"showData\"&gt;&lt;/p&gt;\r\n  &lt;form enctype=\"multipart/form-data\"&gt;\r\n    &lt;input id=\"upload\" type=file name=\"files[]\"&gt;\r\n  &lt;/form&gt;\r\n\r\n\r\n  &lt;pre id=\"fileContent\"&gt;&lt;/pre&gt;\r\n\r\n\r\n  &lt;script&gt;\r\n    document.getElementById('upload').addEventListener('change', handleFileSelect, false);\r\n  &lt;/script&gt;\r\n&lt;/body&gt;\r\n\r\n&lt;/html&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 13, "user_id": 6630122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8d1490cde2116bd2fcb944aaef95948?s=128&d=identicon&r=PG&f=1", "display_name": "Zac Jose", "link": "https://stackoverflow.com/users/6630122/zac-jose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 585, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567068978, "creation_date": 1567032088, "last_edit_date": 1567045149, "question_id": 57700870, "link": "https://stackoverflow.com/questions/57700870/taking-xlsx-json-format-and-turning-it-into-a-dynamic-html-table", "title": "Taking XLSX JSON format and turning it into a dynamic HTML table", "body": "<p>Im taking and XLSX file turning it into JSON to them create a dynamic table to display in HTML. Im somewhat new to JSON so please bear with me.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n\r\n&lt;head&gt;\r\n  &lt;title&gt;Convert JSON Data to HTML Table&lt;/title&gt;\r\n  &lt;style&gt;\r\n    th,\r\n    td,\r\n    p,\r\n    input {\r\n      font: 14px Verdana;\r\n    }\r\n    \r\n    table,\r\n    th,\r\n    td {\r\n      border: solid 1px #DDD;\r\n      border-collapse: collapse;\r\n      padding: 2px 3px;\r\n      text-align: center;\r\n    }\r\n    \r\n    th {\r\n      font-weight: bold;\r\n    }\r\n  &lt;/style&gt;\r\n&lt;/head&gt;\r\n\r\n\r\n&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.8.0/jszip.js\"&gt;&lt;/script&gt;\r\n&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.8.0/xlsx.js\"&gt;&lt;/script&gt;\r\n&lt;script&gt;\r\n  var json_object = {};\r\n  var ExcelToJSON = function() {\r\n\r\n    this.parseExcel = function(file) {\r\n      var reader = new FileReader();\r\n\r\n      reader.onload = function(e) {\r\n        var data = e.target.result;\r\n        var workbook = XLSX.read(data, {\r\n          type: 'binary'\r\n        });\r\n        workbook.SheetNames.forEach(function(sheetName) {\r\n          // Here is your object\r\n          var XL_row_object = XLSX.utils.sheet_to_row_object_array(workbook.Sheets[sheetName]);\r\n          json_object = JSON.stringify(XL_row_object);\r\n          document.getElementById(\"fileContent\").innerHTML = json_object;\r\n          //console.log(JSON.parse(json_object));\r\n          jQuery('#xlx_json').val(json_object);\r\n        })\r\n      };\r\n\r\n      reader.onerror = function(ex) {\r\n        console.log(ex);\r\n      };\r\n\r\n      reader.readAsBinaryString(file);\r\n    };\r\n  };\r\n\r\n  function handleFileSelect(evt) {\r\n\r\n    var files = evt.target.files; // FileList object\r\n    var xl2json = new ExcelToJSON();\r\n    xl2json.parseExcel(files[0]);\r\n  }\r\n\r\n\r\n\r\n  function CreateTableFromJSON() {\r\n\r\n    // EXTRACT VALUE FOR HTML HEADER. \r\n    // ('Book ID', 'Book Name', 'Category' and 'Price')\r\n    var col = [];\r\n    for (var i = 0; i &lt; json_object.length; i++) {\r\n      for (var key in json_object[i]) {\r\n        if (col.indexOf(key) === -1) {\r\n          col.push(key);\r\n        }\r\n      }\r\n    }\r\n\r\n    // CREATE DYNAMIC TABLE.\r\n    var table = document.createElement(\"table\");\r\n\r\n    // CREATE HTML TABLE HEADER ROW USING THE EXTRACTED HEADERS ABOVE.\r\n\r\n    var tr = table.insertRow(-1); // TABLE ROW.\r\n\r\n    for (var i = 0; i &lt; col.length; i++) {\r\n      var th = document.createElement(\"th\"); // TABLE HEADER.\r\n      th.innerHTML = col[i];\r\n      tr.appendChild(th);\r\n    }\r\n\r\n    // ADD JSON DATA TO THE TABLE AS ROWS.\r\n    for (var i = 0; i &lt; json_object.length; i++) {\r\n\r\n      tr = table.insertRow(-1);\r\n\r\n      for (var j = 0; j &lt; col.length; j++) {\r\n        var tabCell = tr.insertCell(-1);\r\n        tabCell.innerHTML = json_object[i][col[j]];\r\n      }\r\n    }\r\n\r\n    // FINALLY ADD THE NEWLY CREATED TABLE WITH JSON DATA TO A CONTAINER.\r\n    var divContainer = document.getElementById(\"showData\");\r\n    divContainer.innerHTML = \"\";\r\n    divContainer.appendChild(table);\r\n  }\r\n&lt;/script&gt;\r\n\r\n&lt;body&gt;\r\n  &lt;input type=\"button\" onclick=\"CreateTableFromJSON()\" value=\"Create Table From JSON\" /&gt;\r\n  &lt;p id=\"showData\"&gt;&lt;/p&gt;\r\n  &lt;form enctype=\"multipart/form-data\"&gt;\r\n    &lt;input id=\"upload\" type=file name=\"files[]\"&gt;\r\n  &lt;/form&gt;\r\n\r\n\r\n  &lt;pre id=\"fileContent\"&gt;&lt;/pre&gt;\r\n\r\n\r\n  &lt;script&gt;\r\n    document.getElementById('upload').addEventListener('change', handleFileSelect, false);\r\n  &lt;/script&gt;\r\n&lt;/body&gt;\r\n\r\n&lt;/html&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>What I want is the JSON output to be translated into a dynamic table. I've tried manually inputting an array of data and im able to get a table. Also tried outputting the data first on the xlsx sheet </p>\n\n<pre><code> document.getElementById(\"fileContent\").innerHTML = myBooks;\n</code></pre>\n\n<p>and i'm able to see the JSON string</p>\n"}, {"tags": ["javascript", "jquery", "angular"], "answers": [{"comments": [{"owner": {"reputation": 572, "user_id": 4112651, "user_type": "registered", "profile_image": "https://graph.facebook.com/558405123/picture?type=large", "display_name": "Ash", "link": "https://stackoverflow.com/users/4112651/ash"}, "edited": false, "score": 0, "creation_date": 1567033042, "post_id": 57700934, "comment_id": 101845762, "body": "This will not work as <code>this.API.getCommits</code> is async. We need to wait for that to &#39;resolve&#39; before loading can be false."}, {"owner": {"reputation": 28589, "user_id": 8558186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8af66bb1af6d1875a2dd7be9dd1c8d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Eliseo", "link": "https://stackoverflow.com/users/8558186/eliseo"}, "reply_to_user": {"reputation": 572, "user_id": 4112651, "user_type": "registered", "profile_image": "https://graph.facebook.com/558405123/picture?type=large", "display_name": "Ash", "link": "https://stackoverflow.com/users/4112651/ash"}, "edited": false, "score": 0, "creation_date": 1567061841, "post_id": 57700934, "comment_id": 101851938, "body": "J&#250;lio and @Ash, You can use the &#39;rxjs&#39; operator &quot;tap&quot;: pipe(tap(()=&gt;this.loading=false)"}, {"owner": {"reputation": 572, "user_id": 4112651, "user_type": "registered", "profile_image": "https://graph.facebook.com/558405123/picture?type=large", "display_name": "Ash", "link": "https://stackoverflow.com/users/4112651/ash"}, "edited": false, "score": 0, "creation_date": 1567094273, "post_id": 57700934, "comment_id": 101869852, "body": "You shouldn&#39;t because that will set loading to false before populating repos."}], "tags": [], "owner": {"reputation": 1, "user_id": 10271180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNei2.jpg?s=128&g=1", "display_name": "J&#250;lio Saldanha", "link": "https://stackoverflow.com/users/10271180/j%c3%balio-saldanha"}, "is_accepted": false, "score": 0, "last_activity_date": 1567032709, "creation_date": 1567032709, "answer_id": 57700934, "question_id": 57700857, "link": "https://stackoverflow.com/questions/57700857/wait-for-loop-to-finish-before-executing-next-line/57700934#57700934", "title": "Wait for loop to finish before executing next line", "body": "<p>Insert <code>this.loading = false;</code> after the for. Not after the api call</p>\n"}, {"tags": [], "owner": {"reputation": 572, "user_id": 4112651, "user_type": "registered", "profile_image": "https://graph.facebook.com/558405123/picture?type=large", "display_name": "Ash", "link": "https://stackoverflow.com/users/4112651/ash"}, "is_accepted": false, "score": 0, "last_activity_date": 1567033009, "creation_date": 1567033009, "answer_id": 57700970, "question_id": 57700857, "link": "https://stackoverflow.com/questions/57700857/wait-for-loop-to-finish-before-executing-next-line/57700970#57700970", "title": "Wait for loop to finish before executing next line", "body": "<p><code>forkJoin</code> is your friend here. it can take an array of observables and resolve the results into an array.</p>\n\n<pre><code>  getAllRepos() {\n    this.API.getRepos()\n        .pipe(switchMap((repos) =&gt; {\n             return forkJoin(repos.map(repo =&gt; {\n                const commit_url = repo.branches_url.replace('{/branch}', `/${repo.default_branch}`);\n\n                return this.API.getCommits(commit_url)\n                    .pipe(map(commit =&gt; {\n                        repo.last_commit_date = commit.commit.commit.author.date;\n                        return repo;\n                    });\n             })\n        })\n        .subscribe(repos =&gt; {\n            this.repos = repos;\n            this.loading = false;\n        });\n}\n\n</code></pre>\n\n<p>So whats happening?</p>\n\n<ol>\n<li>We get the repos</li>\n<li>We use switchMap to take the result and transform it into another observable</li>\n<li>We use forkJoin to turn the array of repos, into an array of observables that resolve into a single observable</li>\n<li>We use map to add the last commit to our <code>repo</code> object and return the <em>new</em> repo object.</li>\n</ol>\n\n<p><em>As a sidenote...</em></p>\n\n<p>Use pipes to transform your data. Subscriptions should be for <strong>consumption</strong>. Pipes for <strong>transformation</strong>.</p>\n"}], "owner": {"reputation": 405, "user_id": 8027859, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/f320aa97d650e846816ac04c032ff8ec?s=128&d=identicon&r=PG&f=1", "display_name": "ghan", "link": "https://stackoverflow.com/users/8027859/ghan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1567033009, "creation_date": 1567031952, "question_id": 57700857, "link": "https://stackoverflow.com/questions/57700857/wait-for-loop-to-finish-before-executing-next-line", "title": "Wait for loop to finish before executing next line", "body": "<p>I am using the GitHub API to retrieve a list of repos and afterwards looping over each repo and making another HTTP request to retrieve the latest commit date. How can I have it execute the loop to find the latest commit date before making <code>loading = false</code> so I can show the results on the page?</p>\n\n<p>API.service.ts </p>\n\n<pre><code>export class APIService {\n\n  constructor(private http: HttpClient) { }\n\n  getRepos(): Observable&lt;any[]&gt; \n    return this.http.get&lt;any[]&gt;('https://api.github.com/users/githubtraining/repos')\n      .pipe(catchError(this.handleError));\n  }\n\n  getCommits(url: string): Observable&lt;any&gt; {\n    return this.http.get&lt;any&gt;(url)\n      .pipe(catchError(this.handleError));\n  }\n\n  handleError(error: any) {\n    return throwError(error);\n  }\n\n}\n\n</code></pre>\n\n<p>dashboard.component.ts</p>\n\n<pre><code>export class DashboardComponent implements OnInit {\n\n  repos: Repo[];\n  loading = true;\n\n  constructor(private API: APIService) { }\n\n  ngOnInit() {\n    this.getAllRepos();\n  }\n\n  getAllRepos() {\n    this.API.getRepos().subscribe(data =&gt; {\n      this.repos = data;\n      for (const repo of this.repos)\n      {\n        const commit_url = repo.branches_url.replace('{/branch}', `/${repo.default_branch}`);\n        this.API.getCommits(commit_url).subscribe(commit =&gt; {\n          repo.last_commit_date = commit.commit.commit.author.date;\n        });\n      }\n    });\n    // Finish looping over all repos before loading is false\n    this.loading = false;\n  }\n}\n</code></pre>\n"}, {"tags": ["javascript", "arrays", "javascript-objects"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567035946, "post_id": 57700852, "comment_id": 101846274, "body": "Your desired result is not a valid object. Do you want the value of <code>Accounts</code> to be an array?"}], "answers": [{"comments": [{"owner": {"reputation": 2066, "user_id": 6363050, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f9db389fc3801b8ecef05ed3074e2f03?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel Dare", "link": "https://stackoverflow.com/users/6363050/samuel-dare"}, "edited": false, "score": 0, "creation_date": 1567039134, "post_id": 57701313, "comment_id": 101846817, "body": "Thanks! This moves me closer to my goal, but i might not have been very clear in my question. I wanted each new block / index to be a cummulative of existing accounts + new one if they dont already exist. Many thanks for your help"}, {"owner": {"reputation": 2066, "user_id": 6363050, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f9db389fc3801b8ecef05ed3074e2f03?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel Dare", "link": "https://stackoverflow.com/users/6363050/samuel-dare"}, "edited": false, "score": 0, "creation_date": 1567039264, "post_id": 57701313, "comment_id": 101846833, "body": "am i meant to print <code>accounts</code> or <code>these_accounts</code> ?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 2066, "user_id": 6363050, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f9db389fc3801b8ecef05ed3074e2f03?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel Dare", "link": "https://stackoverflow.com/users/6363050/samuel-dare"}, "edited": false, "score": 0, "creation_date": 1567039446, "post_id": 57701313, "comment_id": 101846867, "body": "<code>these_accounts</code> is just a temporary local variable. <code>accounts</code> is the global variable that contains all the results."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 2066, "user_id": 6363050, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f9db389fc3801b8ecef05ed3074e2f03?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel Dare", "link": "https://stackoverflow.com/users/6363050/samuel-dare"}, "edited": false, "score": 0, "creation_date": 1567039499, "post_id": 57701313, "comment_id": 101846876, "body": "This is cumulative, as you want. <code>accounts[blockNumber] = accounts[blockNumber] || {Accounts: []};</code> means to use the value of <code>accounts[blockNumber]</code> if it already exists, otherwise initialize it to that object with the empty array."}, {"owner": {"reputation": 2066, "user_id": 6363050, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f9db389fc3801b8ecef05ed3074e2f03?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel Dare", "link": "https://stackoverflow.com/users/6363050/samuel-dare"}, "edited": false, "score": 0, "creation_date": 1567040666, "post_id": 57701313, "comment_id": 101847065, "body": "Thanks for coming back so quickly. I have written the results to a gist file here so maybe its a bit clearer. <a href=\"https://gist.github.com/Genysys/5598846a2cfc25090fb14112327d0308\" rel=\"nofollow noreferrer\">gist.github.com/Genysys/5598846a2cfc25090fb14112327d0308</a>  I need each successive blocknumber to contains accounts from the previous block plus any new account. Hope this makes sense"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 2066, "user_id": 6363050, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f9db389fc3801b8ecef05ed3074e2f03?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel Dare", "link": "https://stackoverflow.com/users/6363050/samuel-dare"}, "edited": false, "score": 1, "creation_date": 1567040772, "post_id": 57701313, "comment_id": 101847088, "body": "Oh, I thought you mean cumulative from previous calls to this loop."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1567041037, "last_edit_date": 1567041037, "creation_date": 1567036331, "answer_id": 57701313, "question_id": 57700852, "link": "https://stackoverflow.com/questions/57700852/adding-new-array-entries-to-object-only-if-value-doesnt-exist/57701313#57701313", "title": "Adding new array entries to object only if value doesnt exist", "body": "<p>Use a variable outside the loop to hold the account list from the previous block. Make a copy of it and push the new accounts onto it.</p>\n\n<pre><code>  let last_accounts = [];\n  for (const [key, {blockNumber, returnValues: {_from, _to}}] of Object.entries(obj)) {\n    let these_accounts = last_accounts.slice(); // copy accounts from previous block\n    if (!these_accounts.includes(_from)) {\n        these_accounts.push(_from);\n    }\n    if (!these_accounts.includes(_to)) {\n        these_accounts.push(_to);\n    }\n    accounts[blockNumber] = {Accounts: these_accounts};\n    last_accounts = these_accounts;\n  }\n</code></pre>\n"}], "owner": {"reputation": 2066, "user_id": 6363050, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f9db389fc3801b8ecef05ed3074e2f03?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel Dare", "link": "https://stackoverflow.com/users/6363050/samuel-dare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 57701313, "answer_count": 1, "score": 0, "last_activity_date": 1567041037, "creation_date": 1567031899, "question_id": 57700852, "link": "https://stackoverflow.com/questions/57700852/adding-new-array-entries-to-object-only-if-value-doesnt-exist", "title": "Adding new array entries to object only if value doesnt exist", "body": "<p>I have written the following code to store a data retrieve values and store data into an object:</p>\n\n<pre><code>var contract = new web3.eth.Contract(contractAbi, contractAddress);\nvar accounts = {};\nvar balance = {};\n\n\n// Crawl the Chain from the Contract Deployment Date till the latest block\ncontract.getPastEvents(\n    'Transfer',\n    {\n      fromBlock: 8437000,\n      toBlock: 'latest'\n    },(error, events) =&gt; { \n\n    if (!error){\n      var obj=JSON.parse(JSON.stringify(events));\n\n      for (const [key, val] of Object.entries(obj)) {\n        accounts[val.blockNumber] = {\n            _from: val.returnValues._from,\n            _to: val.returnValues._to,\n            _value: parseInt(val.returnValues._value, 10)\n            // _value: val.returnValues._value\n        };\n    }\n\n    }\n    else {\n      console.log(error)\n}\n\nObject.entries(accounts).forEach(([key, val]) =&gt; console.log(key, val)); \n\n})\n</code></pre>\n\n<p>This works fine and the output of this is:</p>\n\n<pre><code>8441134 { _from: '0x34872874b65E12408eC0265E9cf0a35FA6c8D13E',\n  _to: '0x39BC998bD7DC71885661B1062CC2baa9fbe94F45',\n  _value: 76470000000000000000 }\n8441135 { _from: '0x85C5c26DC2aF5546341Fc1988B9d178148b4838B',\n  _to: '0x2E642b8D59B45a1D8c5aEf716A84FF44ea665914',\n  _value: 947018889517274100000 }\n8441142 { _from: '0xda7C4aAb9bb74710498485ed01CB4D521f7b4456',\n  _to: '0x24fa98CA3aB52D8CF562B641AbC4b12861e991Cf',\n  _value: 321279880100000000000 }\n8441157 { _from: '0x46340b20830761efd32832A74d7169B29FEB9758',\n  _to: '0xeE7D76D5B00A10B49e37a9e26a7678be1EE607F4',\n  _value: 29500000000000000000 }\n8441167 { _from: '0x2baa435Ca4B9dE4a135cAE11f4c04C4a1d334089',\n  _to: '0x9fa7f05C9AaE89752fa9273CFAcADF602657599d',\n  _value: 1.5043600286e+21 }\n</code></pre>\n\n<p>I would like to transform this into a format , where each of the accounts (_to and _from) and adding as account to the indexes over the blocks i.e.</p>\n\n<pre><code>// The _to and _from fields become account entries\n8441142 { Accounts: '0xda7C4aAb9bb74710498485ed01CB4D521f7b4456',\n                    '0x24fa98CA3aB52D8CF562B641AbC4b12861e991Cf'}\n// Add accounts that did not previously exist, ignore ones already in here\n8441157 { Accounts: 0xda7C4aAb9bb74710498485ed01CB4D521f7b4456',\n                  '0x24fa98CA3aB52D8CF562B641AbC4b12861e991Cf', '0x46340b20830761efd32832A74d7169B29FEB9758','0xeE7D76D5B00A10B49e37a9e26a7678be1EE607F4'}\n// Add accounts that did not previously exist, ignore ones already in here\n8441167 { Accounts: '0x2baa435Ca4B9dE4a135cAE11f4c04C4a1d334089','0x9fa7f05C9AaE89752fa9273CFAcADF602657599d'}\n</code></pre>\n\n<p>I would appreciate pointers on how I can do this efficiently.</p>\n"}, {"tags": ["javascript"], "comments": [{"owner": {"reputation": 3, "user_id": 10042790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aeb09bee714216a1990c74b1f2bd1539?s=128&d=identicon&r=PG&f=1", "display_name": "Darlington", "link": "https://stackoverflow.com/users/10042790/darlington"}, "reply_to_user": {"reputation": 117184, "user_id": 9473764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aGMXl.jpg?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/9473764/nick"}, "edited": false, "score": 0, "creation_date": 1567034399, "post_id": 57700848, "comment_id": 101846004, "body": "It\u2019s working alright. But the results doesn\u2019t show in two decimal places. The profit is not able to subtract a decimal from another decimal value and I need help on how to do that."}], "answers": [{"tags": [], "owner": {"reputation": 117184, "user_id": 9473764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aGMXl.jpg?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/9473764/nick"}, "is_accepted": true, "score": 1, "last_activity_date": 1567034590, "creation_date": 1567034590, "answer_id": 57701143, "question_id": 57700848, "link": "https://stackoverflow.com/questions/57700848/profit-calculation-in-two-decimal-places-javascript/57701143#57701143", "title": "Profit Calculation in two decimal places Javascript", "body": "<p>Your problem is that you need to use <code>parseFloat</code>, not <code>parseInt</code>, to use your inputs as floating point numbers. Also you should use <code>toFixed(2)</code> on the output to ensure it is rounded to two decimal places.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function sum() {\r\n\r\n        var txtFirstNumberValue = document.getElementById('txt1').value;\r\n        var txtSecondNumberValue = document.getElementById('txt2').value;\r\n        var result = parseFloat(txtFirstNumberValue) - parseFloat(txtSecondNumberValue);\r\n        if (!isNaN(result)) {\r\n            document.getElementById('txt3').value = result.toFixed(2);\r\n\r\n        }\r\n        }</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;span&gt;Selling Price : &lt;/span&gt;\r\n&lt;input type=\"text\" id=\"txt1\" style=\"width:265px; height:30px;\" name=\"price\" onkeyup=\"sum();\" Required&gt;&lt;br&gt; \r\n&lt;span&gt;Original Price : &lt;/span&gt;\r\n&lt;input type=\"text\" id=\"txt2\" style=\"width:265px; height:30px;\" name=\"o_price\" onkeyup=\"sum();\" Required&gt;&lt;br&gt;\r\n&lt;span&gt;Profit : &lt;/span&gt;\r\n&lt;input type=\"text\" id=\"txt3\" style=\"width:265px; height:30px;\" name=\"profit\" readonly&gt;&lt;br&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 3, "user_id": 10042790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aeb09bee714216a1990c74b1f2bd1539?s=128&d=identicon&r=PG&f=1", "display_name": "Darlington", "link": "https://stackoverflow.com/users/10042790/darlington"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 1, "accepted_answer_id": 57701143, "answer_count": 1, "score": 0, "last_activity_date": 1567046638, "creation_date": 1567031872, "last_edit_date": 1567046638, "question_id": 57700848, "link": "https://stackoverflow.com/questions/57700848/profit-calculation-in-two-decimal-places-javascript", "title": "Profit Calculation in two decimal places Javascript", "body": "<p>In my script, I run this function to calculate profit of entries on my products table from the MySQL db. The concerning fields\nare defined as decimal (10,2). It's a sales platform where I want the profit  column to be able to calculate in two decimal places when adding new products into the system. Like selling price = 50.60, original price =40.20, so the profit column should be able to give me 10.40 as the answer. Thus 50.60-40-20. </p>\n\n<p>This the function i used</p>\n\n<pre><code>function sum() {\n\n        var txtFirstNumberValue = document.getElementById('txt1').value;\n        var txtSecondNumberValue = document.getElementById('txt2').value;\n        var result = parseInt(txtFirstNumberValue) - parseInt(txtSecondNumberValue);\n        if (!isNaN(result)) {\n            document.getElementById('txt3').value = result;\n\n        }\n</code></pre>\n\n<p>These are the script I used to add new product where selling price represents txt1 in the function. Whiles ,original price and profit columns represent txt2 and txt3 respectively in the function. </p>\n\n<pre><code>&lt;span&gt;Selling Price : &lt;/span&gt;\n&lt;input type=\"text\" id=\"txt1\" style=\"width:265px; height:30px;\" name=\"price\" onkeyup=\"sum();\" Required&gt;&lt;br&gt; \n&lt;span&gt;Original Price : &lt;/span&gt;\n&lt;input type=\"text\" id=\"txt2\" style=\"width:265px; height:30px;\" name=\"o_price\" onkeyup=\"sum();\" Required&gt;&lt;br&gt;\n &lt;span&gt;Profit : &lt;/span&gt;\n&lt;input type=\"text\" id=\"txt3\" style=\"width:265px; height:30px;\" name=\"profit\" readonly&gt;&lt;\n</code></pre>\n\n<p>My script is working correctly but thats not what I wish for. The profit column is not able to subtract decimals from another decimal value, hence,  It only show results in Integer. \nI expect If selling price = 50.60, original price =40.20, the profit column should be able to give me 10.40 as the answer. Thus 50.60-40-20.</p>\n"}, {"tags": ["javascript", "algorithm", "optimization"], "comments": [{"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 1, "creation_date": 1567032895, "post_id": 57700825, "comment_id": 101845739, "body": "Read up (rectangular) <a href=\"https://en.wikipedia.org/wiki/Assignment_problem\" rel=\"nofollow noreferrer\">Linear Assignment Problem</a> and more general <a href=\"https://en.wikipedia.org/wiki/Minimum-cost_flow_problem\" rel=\"nofollow noreferrer\">Min-cost max-flows</a>"}, {"owner": {"reputation": 6812, "user_id": 1410303, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/UVBNS.png?s=128&g=1", "display_name": "SomeDude", "link": "https://stackoverflow.com/users/1410303/somedude"}, "edited": false, "score": 0, "creation_date": 1567032960, "post_id": 57700825, "comment_id": 101845752, "body": "It&#39;s not clear what is the rule for assigning a player to a role? Do you assign arbitrarily?"}, {"owner": {"reputation": 771, "user_id": 1157368, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/38a4e39a69c543578732e134e11be0ca?s=128&d=identicon&r=PG", "display_name": "DxW", "link": "https://stackoverflow.com/users/1157368/dxw"}, "reply_to_user": {"reputation": 6812, "user_id": 1410303, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/UVBNS.png?s=128&g=1", "display_name": "SomeDude", "link": "https://stackoverflow.com/users/1410303/somedude"}, "edited": false, "score": 0, "creation_date": 1567033339, "post_id": 57700825, "comment_id": 101845818, "body": "@SomeDude the rule is that each player can play one or more roles. I have a fixed array of roles that i must use to generate a squad"}], "answers": [{"comments": [{"owner": {"reputation": 771, "user_id": 1157368, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/38a4e39a69c543578732e134e11be0ca?s=128&d=identicon&r=PG", "display_name": "DxW", "link": "https://stackoverflow.com/users/1157368/dxw"}, "edited": false, "score": 1, "creation_date": 1567049486, "post_id": 57701076, "comment_id": 101848603, "body": "After some reading I found this <a href=\"https://github.com/mattkrick/EdmondsBlossom\" rel=\"nofollow noreferrer\">github.com/mattkrick/EdmondsBlossom</a>. It works perfectly"}], "tags": [], "owner": {"reputation": 316, "user_id": 9990641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9d9b97566a842b9b0a5b8d8a4a2c467?s=128&d=identicon&r=PG&f=1", "display_name": "Ogochi", "link": "https://stackoverflow.com/users/9990641/ogochi"}, "is_accepted": true, "score": 1, "last_activity_date": 1567033980, "creation_date": 1567033980, "answer_id": 57701076, "question_id": 57700825, "link": "https://stackoverflow.com/questions/57700825/how-to-maximize-the-value-of-a-combination-of-object-given-some-rules/57701076#57701076", "title": "How to maximize the value of a combination of object given some rules", "body": "<p>This problem is known as: <strong>Maximum bipartite weighted matching</strong>. You can solve it reducing it to <strong>Maximum flow</strong> problem.</p>\n\n<p>The idea is to create such a graph:</p>\n\n<ul>\n<li>vertices: players and roles</li>\n<li>edges: connect players with their possible roles from roles array (direction going from role to player)</li>\n</ul>\n\n<p>What to do next is quite well described in accepted answer to <a href=\"https://stackoverflow.com/questions/49697147/maximum-weighted-bipartite-matching-for-two-sets-of-vertices-of-drastically-diff\">this</a> question.</p>\n\n<h3>Additional resources</h3>\n\n<p>Max flow problem: <a href=\"https://en.wikipedia.org/wiki/Maximum_flow_problem\" rel=\"nofollow noreferrer\">link</a></p>\n"}], "owner": {"reputation": 771, "user_id": 1157368, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/38a4e39a69c543578732e134e11be0ca?s=128&d=identicon&r=PG", "display_name": "DxW", "link": "https://stackoverflow.com/users/1157368/dxw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 57701076, "answer_count": 1, "score": 0, "last_activity_date": 1567033980, "creation_date": 1567031668, "question_id": 57700825, "link": "https://stackoverflow.com/questions/57700825/how-to-maximize-the-value-of-a-combination-of-object-given-some-rules", "title": "How to maximize the value of a combination of object given some rules", "body": "<p>I have a module object that contains a list of roles. These roles can represent one or more roles (Es: \"RoleA\", or maybe \"RoleA;RoleB\")</p>\n\n<pre><code>// Example\n\nvar roles = [      \n    'Por',\n    'Ds',\n    'Dc',\n    'Dc',\n    'Dd',\n    'M',\n    'M;C',\n    'T',\n    'W',\n    'W;A',\n    'A;Pc'\n]\n\n</code></pre>\n\n<p>I have another array. It's a list of players object. Each player has a 'role' and a 'value'. The role again can be single or multiple.</p>\n\n<pre><code>// Example\n\nvar players = [  \n{    \n    name: 'NameA',\n    role : 'A',\n    value: 15\n},\n{    \n    name: 'NameB',\n    role : 'A;W',\n    value: 15\n},\n{    \n    name: 'NameC',\n    role : 'Dd;Dc',\n    value: 15\n},\n...\n]\n</code></pre>\n\n<p>My goal is to assign a player to each role of the 'roles' array maximizing the total value of the team (calculated by summing the value of the single players)</p>\n\n<p>I've done it iterating over roles array trying to find each time the best option. It had some issues I fixed by adding some simple mechanisms but in some cases, i still have some problems.</p>\n\n<p>Can anyone with some algorithm understanding explain what is the best way to face these kinds of problems?</p>\n\n<pre><code>    // Example\n\n    var roles = [      \n    ['Por', playerA],\n    ['Ds', playerB],\n    ['Dc', playerC],\n    ['Dc', playerD],\n    ['Dd', playerE],\n    ['M', playerF],\n    ['M;C', playerG],\n    ['T', playerH],\n    ['W', playerI],\n    ['W;A', playerL],\n    ['A;Pc, playerM]\n    ]\n</code></pre>\n"}, {"tags": ["javascript"], "answers": [{"tags": [], "owner": {"reputation": 11081, "user_id": 10669010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LsWex.png?s=128&g=1", "display_name": "Mister Jojo", "link": "https://stackoverflow.com/users/10669010/mister-jojo"}, "is_accepted": true, "score": 0, "last_activity_date": 1567036656, "last_edit_date": 1567036656, "creation_date": 1567036250, "answer_id": 57701305, "question_id": 57700807, "link": "https://stackoverflow.com/questions/57700807/loop-through-array-of-object-and-display-the-values-of-a-prop-inside-a-html-tag/57701305#57701305", "title": "Loop through array of object and display the values of a prop inside a html tag-Javascript", "body": "<p>it seems to me a simple problem, so here is a solution, I just wonder if I did not miss a subtlety of the question ?</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const\r\n  obj = { text:   [ { id: 0, name: \"aaa\" } \r\n                  , { id: 1, name: \"bbb\" } \r\n                  , { id: 3, name: \"ccc\" } \r\n                  , { id: 4, name: \"ddd\" } \r\n                  ] \r\n        , content:[ { id: 123,   index: 0 } \r\n                  , { id: 1232,  index: 2 } \r\n                  , { id: 12333, index: 3 } \r\n                  ] \r\n        } \r\n\r\nfunction string()\r\n  {\r\n  let a_text    = obj.text\r\n    , a_content = obj.content\r\n    , Container = document.getElementById(\"container\")\r\n    , c_Index   = 0\r\n\r\n  if ( a_content[c_Index].index === 0 ) c_Index++\r\n  \r\n  for(let i=0; i&lt;a_text.length; i++)\r\n    {\r\n    if (i &gt;= a_content[c_Index].index)\r\n      {\r\n      c_Index++\r\n      let barDiv = document.createElement('div')\r\n      barDiv.textContent = '-'\r\n      Container.appendChild(barDiv)\r\n      }\r\n\r\n    let NewDiv = document.createElement('div')\r\n    NewDiv.textContent = a_text[i].name\r\n    Container.appendChild(NewDiv)\r\n    }\r\n  }\r\n\r\nstring()</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div id=\"container\"&gt;&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 2591, "user_id": 4021059, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/dd30784b88dafdf2595541ab0e257acb?s=128&d=identicon&r=PG&f=1", "display_name": "user1234", "link": "https://stackoverflow.com/users/4021059/user1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 1, "accepted_answer_id": 57701305, "answer_count": 1, "score": 2, "last_activity_date": 1567036656, "creation_date": 1567031554, "last_edit_date": 1567033675, "question_id": 57700807, "link": "https://stackoverflow.com/questions/57700807/loop-through-array-of-object-and-display-the-values-of-a-prop-inside-a-html-tag", "title": "Loop through array of object and display the values of a prop inside a html tag-Javascript", "body": "<p>I'm new to JS and I'm trying out an exercise.\nI want to loop through an array of objects inside an object and map the index values from one object to the id values inside another object and based on that, I want to perform some operation.\nmy object:</p>\n\n<pre><code>        obj= {\n          \"text\": [{\n          \"id\": 0,\n          \"name\": \"aaa\"\n          },{\n          \"id\": 1,\n          \"name\": \"bbb\"\n          },{\n           \"id\": 3,\n          \"name\": \"ccc\"\n          },{\n          \"id\": 4,\n          \"name\": \"ddd\"\n          }],\n  \"content\": [\n      {\n      \"id\": 123,\n      \"index\": 0\n      },{\n       \"id\": 1232,\n      \"index\": 2\n      },{\n       \"id\": 12333,\n      \"index\": 3\n      }\n      ]\n        }\n</code></pre>\n\n<p>there are 2 parts to this section, \n1) To render the values of the <code>name</code> property inside the  <code>text</code> object in the form:</p>\n\n<pre><code>aaa\nbbb\nccc\nddd\neee\nfff\n</code></pre>\n\n<p>2) I want to add a <code>-</code> after every group of name values depending on the index provided inside the <code>content</code> object.basically I want to map the index values from content object to the id values inside the text object and depending on them , I'd like to add <code>-</code> after the name values.\ni.e: In above case the indexes are: 0,2,3. hence o/p will look like:</p>\n\n<pre><code>aaa\nbbb\n-\nccc\n-\nddd\n</code></pre>\n\n<p>here is the code I have so far for part1:</p>\n\n<pre><code>function string () {\nvar arr = obj.text;\n      var output = '';\n    for(var i=0; i&lt;arr.length; i++) {\n        output += '&lt;div&gt;'+ arr[i].text + '&lt;/div&gt;';  \n    }\n    document.getElementById(\"container\").innerHTML =  output;\n};\n</code></pre>\n\n<p>I need some help on part 2.any idea?</p>\n"}, {"tags": ["javascript", "html", "arrays", "object", "jquery-selectors"], "comments": [{"owner": {"reputation": 1135, "user_id": 7537454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57a54dbe03841caee00dfe5dc2adf918?s=128&d=identicon&r=PG&f=1", "display_name": "Noob", "link": "https://stackoverflow.com/users/7537454/noob"}, "edited": false, "score": 0, "creation_date": 1567031595, "post_id": 57700778, "comment_id": 101845451, "body": "have you tried anything so far ? any code ?"}, {"owner": {"reputation": 123667, "user_id": 257182, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f2c683e7dc0c4d4bcc790f87eaa67301?s=128&d=identicon&r=PG", "display_name": "RobG", "link": "https://stackoverflow.com/users/257182/robg"}, "edited": false, "score": 0, "creation_date": 1567032041, "post_id": 57700778, "comment_id": 101845537, "body": "Take a look at <a href=\"https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/Selectors/Attribute_selectors\" rel=\"nofollow noreferrer\"><i>attribute selectors</i></a>."}, {"owner": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "edited": false, "score": 0, "creation_date": 1567032253, "post_id": 57700778, "comment_id": 101845590, "body": "You&#39;ll probably need to use <code>Array filter</code> as well as the appropriate css selector"}, {"owner": {"reputation": 33, "user_id": 11984202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbadc11258aec13c6b98b908523127ab?s=128&d=identicon&r=PG&f=1", "display_name": "b0nfire", "link": "https://stackoverflow.com/users/11984202/b0nfire"}, "reply_to_user": {"reputation": 1135, "user_id": 7537454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57a54dbe03841caee00dfe5dc2adf918?s=128&d=identicon&r=PG&f=1", "display_name": "Noob", "link": "https://stackoverflow.com/users/7537454/noob"}, "edited": false, "score": 0, "creation_date": 1567033455, "post_id": 57700778, "comment_id": 101845834, "body": "@Noob Please check update :)"}, {"owner": {"reputation": 33, "user_id": 11984202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbadc11258aec13c6b98b908523127ab?s=128&d=identicon&r=PG&f=1", "display_name": "b0nfire", "link": "https://stackoverflow.com/users/11984202/b0nfire"}, "reply_to_user": {"reputation": 123667, "user_id": 257182, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f2c683e7dc0c4d4bcc790f87eaa67301?s=128&d=identicon&r=PG", "display_name": "RobG", "link": "https://stackoverflow.com/users/257182/robg"}, "edited": false, "score": 0, "creation_date": 1567033502, "post_id": 57700778, "comment_id": 101845838, "body": "@RobG I&#39;ve tried this, but can&#39;t seem to get wildcards to work like random characters."}, {"owner": {"reputation": 33, "user_id": 11984202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbadc11258aec13c6b98b908523127ab?s=128&d=identicon&r=PG&f=1", "display_name": "b0nfire", "link": "https://stackoverflow.com/users/11984202/b0nfire"}, "reply_to_user": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "edited": false, "score": 0, "creation_date": 1567033516, "post_id": 57700778, "comment_id": 101845841, "body": "@JaromandaX I will look into this :)"}, {"owner": {"reputation": 229718, "user_id": 82548, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/db5a61382c2ba7309071c323edb4013b?s=128&d=identicon&r=PG", "display_name": "David says reinstate Monica", "link": "https://stackoverflow.com/users/82548/david-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1567033723, "post_id": 57700778, "comment_id": 101845874, "body": "Can whatever service is generating, or importing, the html add a predictable suffix, or a more specific prefix than just the underscore? Something that allows for: <code>.querySelectorAll(&quot;[id^=&#39;_predictablePrefix&#39;][id$=\u2018predictab&zwnj;&#8203;leSuffix\u2019]&quot;)</code>?"}, {"owner": {"reputation": 33, "user_id": 11984202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbadc11258aec13c6b98b908523127ab?s=128&d=identicon&r=PG&f=1", "display_name": "b0nfire", "link": "https://stackoverflow.com/users/11984202/b0nfire"}, "reply_to_user": {"reputation": 229718, "user_id": 82548, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/db5a61382c2ba7309071c323edb4013b?s=128&d=identicon&r=PG", "display_name": "David says reinstate Monica", "link": "https://stackoverflow.com/users/82548/david-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1567033856, "post_id": 57700778, "comment_id": 101845899, "body": "@DavidThomas I&#39;m unsure with the &quot;Jargon&quot; you&#39;ve used, Can you explain via example, I&#39;m new to programming and my English isn&#39;t great."}, {"owner": {"reputation": 229718, "user_id": 82548, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/db5a61382c2ba7309071c323edb4013b?s=128&d=identicon&r=PG", "display_name": "David says reinstate Monica", "link": "https://stackoverflow.com/users/82548/david-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1567034107, "post_id": 57700778, "comment_id": 101845946, "body": "The prefix is the string before the random sequence of characters, in your code prefix is the underscore. The suffix is the same, but it\u2019s at the end of the string. The code, above, would select: <code>&lt;tagName id=\u201c_predictablePrefix_C15DKNWCSV_predictableSuffix\u201d&gt;\u2026&lt;&#47;tagN&zwnj;&#8203;ame&gt;</code> and any other elements with an <code>id</code> with a different string of zero or more characters between the \u2018predictable\u2019 parts."}], "answers": [{"comments": [{"owner": {"reputation": 229718, "user_id": 82548, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/db5a61382c2ba7309071c323edb4013b?s=128&d=identicon&r=PG", "display_name": "David says reinstate Monica", "link": "https://stackoverflow.com/users/82548/david-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1567034288, "post_id": 57701077, "comment_id": 101845980, "body": "please <a href=\"https://stackoverflow.com/posts/57701077/edit\">edit</a> your answer to include a description of how your answer solves the problem so that the OP and future visitors might learn something useful to apply to their own code. Specifically the filter function, the regular expression, and the use of the spread operator used to create an Array from the NodeList."}, {"owner": {"reputation": 123667, "user_id": 257182, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f2c683e7dc0c4d4bcc790f87eaa67301?s=128&d=identicon&r=PG", "display_name": "RobG", "link": "https://stackoverflow.com/users/257182/robg"}, "edited": false, "score": 0, "creation_date": 1567034904, "post_id": 57701077, "comment_id": 101846101, "body": "If you&#39;re going to use a function expression you might as well go the whole hog: <code>let addTRs = () =&gt; [...].filter(...).forEach(...);</code>. ;-) But I think function declarations are clearer and easier to maintain. It could just be done as <code>querySelectorAll(...).forEach(...)</code> and filter out the unwanted elements within the <i>forEach</i>."}, {"owner": {"reputation": 33, "user_id": 11984202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbadc11258aec13c6b98b908523127ab?s=128&d=identicon&r=PG&f=1", "display_name": "b0nfire", "link": "https://stackoverflow.com/users/11984202/b0nfire"}, "reply_to_user": {"reputation": 229718, "user_id": 82548, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/db5a61382c2ba7309071c323edb4013b?s=128&d=identicon&r=PG", "display_name": "David says reinstate Monica", "link": "https://stackoverflow.com/users/82548/david-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1567035123, "post_id": 57701077, "comment_id": 101846137, "body": "@DavidThomas I agree, While I appreciate the answer I don&#39;t really understand what&#39;s happening."}, {"owner": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "edited": false, "score": 1, "creation_date": 1567035430, "post_id": 57701077, "comment_id": 101846186, "body": "personally, to answer the question accurately, I&#39;d use <code>&#39;tr[id^=_]&#39;</code>"}, {"owner": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "reply_to_user": {"reputation": 33, "user_id": 11984202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbadc11258aec13c6b98b908523127ab?s=128&d=identicon&r=PG&f=1", "display_name": "b0nfire", "link": "https://stackoverflow.com/users/11984202/b0nfire"}, "edited": false, "score": 1, "creation_date": 1567036361, "post_id": 57701077, "comment_id": 101846358, "body": "@b0nfire - <code>startWith_</code> will be what (almost) you&#39;ve done. <code>selected</code> will be an array of elements where the id&#39;s match your requirement. <code>selected.forEach</code> simply adds a text node at the end of TR, which makes zero sense, but that&#39;s I guess showing where you do what you need to do with the array of elements you want"}, {"owner": {"reputation": 428, "user_id": 4698438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f335d4a83cd81e612b501c8d60749e3d?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Oscar Lopez", "link": "https://stackoverflow.com/users/4698438/sebastian-oscar-lopez"}, "reply_to_user": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "edited": false, "score": 0, "creation_date": 1567088304, "post_id": 57701077, "comment_id": 101866606, "body": "@JaromandaX \ud83d\udc4c good improve with &#39;tr[id^=_]&#39;. Now I&#39;ll edit the answer with this."}], "tags": [], "owner": {"reputation": 428, "user_id": 4698438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f335d4a83cd81e612b501c8d60749e3d?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Oscar Lopez", "link": "https://stackoverflow.com/users/4698438/sebastian-oscar-lopez"}, "is_accepted": false, "score": 0, "last_activity_date": 1567088364, "last_edit_date": 1567088364, "creation_date": 1567034000, "answer_id": 57701077, "question_id": 57700778, "link": "https://stackoverflow.com/questions/57700778/get-all-elements-in-the-format-10-random-characters-from-a-webpage-javasc/57701077#57701077", "title": "Get all elements in the format &quot;_ (10 RANDOM CHARACTERS) &quot; from a webpage javascript", "body": "<p>Using only querySelectorAll it isn't posible, so a posible solution can be obtain all elements that start with \"_\" using querySelectorAll and then filter with a regular expression.</p>\n\n<p>Here I do an example where append a text to all TR selected</p>\n\n<p>The script:</p>\n\n<pre><code>var customSelect = function() {\n    var startWith_= [...document.querySelectorAll('tr[id^=_]')];\n    var selected = startWith_.filter(e =&gt; /\\_.{10}$/.test(e.id));\n    // Do what you want here. . .\n    selected.forEach( e =&gt; e.append('TR selected'));\n}\n</code></pre>\n\n<p>Html test:</p>\n\n<pre><code>  &lt;button onclick='customSelect()' &gt;Custom Select&lt;/button&gt;\n  &lt;br /&gt;\n  &lt;table&gt;\n    &lt;tr id=\"_ABCEF56789\"&gt;\n        &lt;td&gt;It's ok&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr id=\"_0123456789\"&gt;\n        &lt;td&gt;It's ok&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr id=\"_01234567890\"&gt;\n        &lt;td&gt;It has more&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr id=\"_ABCEFghijk\"&gt;\n        &lt;td&gt;It's ok&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr id=\"_012345678\"&gt;\n        &lt;td&gt;It has less&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr id=\"A0123456789\"&gt;\n        &lt;td&gt;It start with no _&lt;/td&gt;\n    &lt;/tr&gt;\n&lt;table&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 11984202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbadc11258aec13c6b98b908523127ab?s=128&d=identicon&r=PG&f=1", "display_name": "b0nfire", "link": "https://stackoverflow.com/users/11984202/b0nfire"}, "edited": false, "score": 0, "creation_date": 1567040433, "post_id": 57701633, "comment_id": 101847032, "body": "Thank you, I&#39;ll mark this as the answer as it explains the solutions and how to do the task clearly and precisely with as much information as needed."}, {"owner": {"reputation": 428, "user_id": 4698438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f335d4a83cd81e612b501c8d60749e3d?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Oscar Lopez", "link": "https://stackoverflow.com/users/4698438/sebastian-oscar-lopez"}, "edited": false, "score": 0, "creation_date": 1567087941, "post_id": 57701633, "comment_id": 101866361, "body": "@RobG the .map(node =&gt; /^_.{10}$/.test(node.id)); just returned an array of true and false. Chage map for filter"}], "tags": [], "owner": {"reputation": 123667, "user_id": 257182, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f2c683e7dc0c4d4bcc790f87eaa67301?s=128&d=identicon&r=PG", "display_name": "RobG", "link": "https://stackoverflow.com/users/257182/robg"}, "is_accepted": true, "score": 1, "last_activity_date": 1567109729, "last_edit_date": 1567109729, "creation_date": 1567039785, "answer_id": 57701633, "question_id": 57700778, "link": "https://stackoverflow.com/questions/57700778/get-all-elements-in-the-format-10-random-characters-from-a-webpage-javasc/57701633#57701633", "title": "Get all elements in the format &quot;_ (10 RANDOM CHARACTERS) &quot; from a webpage javascript", "body": "<p>Sebastian's answer is OK, but it lacks explanation of what's going on. </p>\n\n<p>Attribute selectors provide some options for matching attribute values, but they aren't as comprehensive as say regular expressions. In this case, likely the best you can do is limit the initial selection as much as you can, then filter out what you want after that.</p>\n\n<p>So you can use:</p>\n\n<ul>\n<li>the TR selector to get only TR elements</li>\n<li>attribute selector of ID</li>\n<li>\"^\" starts with selector to get those with ID starting with underscore</li>\n</ul>\n\n<p>Then you can filter out the ones you don't want using a regular expression, e.g.</p>\n\n<pre><code>var current_queue_items = [...document.getElementById(\"v_viewable_items\")\n  .querySelectorAll(\"TR[id^='_']\")]\n  .filter(node =&gt; /^_.{10}$/.test(node.id));\n</code></pre>\n\n<p>Which will return an array of TR elements within the \"v_viewable_items\" table or tbody or whatever it is that have an ID that fit the regular expression <code>/^_.{10}$/</code>.</p>\n\n<p>You could also do:</p>\n\n<pre><code>document.getElementById(\"v_viewable_items\")\n  .querySelectorAll(\"TR[id^='_']\")\n  .forEach(node =&gt; {\n    if (/^_.{10}$/.test(node.id)) {\n      // do stuff with node\n    }\n  });\n</code></pre>\n\n<p>PS I don't like \"dot chaining\" like this but it's concise and OK for an example.</p>\n\n<p>Note that if \"v_viewable_items\" is a table or tbody, then you could also do:</p>\n\n<pre><code>let current_queue_items = [...document.getElementById(\"v_viewable_items\").rows]\n  .filter(row =&gt; /^_.{10}$/.test(row.id));\n</code></pre>\n\n<p>Or instead of <em>filter</em> use <em>forEach</em> as above.</p>\n"}], "owner": {"reputation": 33, "user_id": 11984202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbadc11258aec13c6b98b908523127ab?s=128&d=identicon&r=PG&f=1", "display_name": "b0nfire", "link": "https://stackoverflow.com/users/11984202/b0nfire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 57701633, "answer_count": 2, "score": 1, "last_activity_date": 1567109729, "creation_date": 1567031274, "last_edit_date": 1567033441, "question_id": 57700778, "link": "https://stackoverflow.com/questions/57700778/get-all-elements-in-the-format-10-random-characters-from-a-webpage-javasc", "title": "Get all elements in the format &quot;_ (10 RANDOM CHARACTERS) &quot; from a webpage javascript", "body": "<p>I have a webpage that has a table with table rows inside like the format below</p>\n\n<pre><code>&lt;tr id=\"_C15DKNWCSV\"&gt;text&lt;/tr&gt;\n</code></pre>\n\n<p>I'm trying to scan the webpage and get all the table rows that follow the format:</p>\n\n<pre><code>id=\"_(10 RANDOM CHARACTERS)\"\n</code></pre>\n\n<p>and the place them in a array,</p>\n\n<p>I know It's something to do with <strong>querySelectorAll</strong> But I can't get the random character filter to work.</p>\n\n<h1>CODE and What I've done:</h1>\n\n<p>I've tried something along the lines of:</p>\n\n<pre><code>var current_queue_items = document.getElementById(\"v_viewable_items\").querySelectorAll(\"[id^='_']\")\n</code></pre>\n\n<p>while this works it not very robust, If something happens to start with \"_\" it'll be accepted, I'll also maybe add a IF Statement that only accepts it if its 11 characters long.</p>\n"}, {"tags": ["javascript", "arrays", "class"], "answers": [{"comments": [{"owner": {"reputation": 1936, "user_id": 5568741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VNja2.jpg?s=128&g=1", "display_name": "k3llydev", "link": "https://stackoverflow.com/users/5568741/k3llydev"}, "edited": false, "score": 1, "creation_date": 1567031481, "post_id": 57700769, "comment_id": 101845429, "body": "This doesn&#39;t solve user&#39;s question. <code>JSON.parse()</code> wont parse the string since its identifiers (as provided in his example) aren&#39;t using double quotes."}], "tags": [], "owner": {"reputation": 395, "user_id": 7061557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/202d8e456de564b67f897050b294eebe?s=128&d=identicon&r=PG&f=1", "display_name": "iams0nus", "link": "https://stackoverflow.com/users/7061557/iams0nus"}, "is_accepted": false, "score": -1, "last_activity_date": 1567031583, "last_edit_date": 1567031583, "creation_date": 1567031182, "answer_id": 57700769, "question_id": 57700735, "link": "https://stackoverflow.com/questions/57700735/how-do-you-turn-a-string-thats-in-a-array-into-a-class/57700769#57700769", "title": "How do you turn a string thats in a array into a class?", "body": "<p><code>JSON.parse()</code> can convert a JSON string to an object. For instance</p>\n\n<pre><code>JSON.parse(\"{'width':100, 'height':200}\")\n</code></pre>\n\n<p>will return a javascript object.</p>\n"}, {"comments": [{"owner": {"reputation": 142, "user_id": 10022302, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--u29jqUeqqk/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1wxffz8bytV8HDwE8LxbUtGVR4oQ/mo/photo.jpg?sz=128", "display_name": "Ronan Leonard", "link": "https://stackoverflow.com/users/10022302/ronan-leonard"}, "edited": false, "score": 0, "creation_date": 1567032746, "post_id": 57700839, "comment_id": 101845704, "body": "Thanks the results perfect, Is there a safer way though?"}, {"owner": {"reputation": 1936, "user_id": 5568741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VNja2.jpg?s=128&g=1", "display_name": "k3llydev", "link": "https://stackoverflow.com/users/5568741/k3llydev"}, "reply_to_user": {"reputation": 142, "user_id": 10022302, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--u29jqUeqqk/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1wxffz8bytV8HDwE8LxbUtGVR4oQ/mo/photo.jpg?sz=128", "display_name": "Ronan Leonard", "link": "https://stackoverflow.com/users/10022302/ronan-leonard"}, "edited": false, "score": 0, "creation_date": 1567032928, "post_id": 57700839, "comment_id": 101845746, "body": "@RonanLeonard Nothing to thank, glad to help! The safest method for this would be using <code>JSON.parse()</code>. Since doing: <code>JSON.parse(&quot;alert(&#47;vulnerable&#47;)&quot;)</code> won&#39;t work. But try: <code>eval(&quot;alert(&#47;vulnerable&#47;)&quot;)</code>, that&#39;s why you must make sure the origin of the string is safe. You should not let the user place his own strings inside an <code>eval()</code> function."}], "tags": [], "owner": {"reputation": 1936, "user_id": 5568741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VNja2.jpg?s=128&g=1", "display_name": "k3llydev", "link": "https://stackoverflow.com/users/5568741/k3llydev"}, "is_accepted": true, "score": 1, "last_activity_date": 1567031804, "creation_date": 1567031804, "answer_id": 57700839, "question_id": 57700735, "link": "https://stackoverflow.com/questions/57700735/how-do-you-turn-a-string-thats-in-a-array-into-a-class/57700839#57700839", "title": "How do you turn a string thats in a array into a class?", "body": "<p>Due to the syntax you provided in your <code>classes</code> variable, you can't do the simplest (and safest) method <code>JSON.parse()</code> because your string doesn't match the <a href=\"https://www.tutorialspoint.com/json/json_syntax.htm\" rel=\"nofollow noreferrer\">JSON Syntax</a>.</p>\n\n<p>You could also achieve this with <code>eval()</code> function. Which is native in JavaScript:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>let classes = [\"({x: 0, y: 0, width: 100, height: 100})\", \"({x: 10, y: 10, width: 70, height: 70})\"],\r\n    objects = []\r\nobjects = classes.map((c)=&gt; eval(c))\r\nconsole.log(objects)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<blockquote>\n  <p><strong><em>Note:</strong> I would definetly not recommend this, since you must have a very strict control of the origin of the string. Otherwise, this method could cause a several vulnerability in your application.</em></p>\n</blockquote>\n"}], "owner": {"reputation": 142, "user_id": 10022302, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--u29jqUeqqk/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1wxffz8bytV8HDwE8LxbUtGVR4oQ/mo/photo.jpg?sz=128", "display_name": "Ronan Leonard", "link": "https://stackoverflow.com/users/10022302/ronan-leonard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "closed_date": 1567034219, "accepted_answer_id": 57700839, "answer_count": 2, "score": -1, "last_activity_date": 1567031804, "creation_date": 1567030930, "question_id": 57700735, "link": "https://stackoverflow.com/questions/57700735/how-do-you-turn-a-string-thats-in-a-array-into-a-class", "closed_reason": "Needs more focus", "title": "How do you turn a string thats in a array into a class?", "body": "<p>I'm trying to turn a string that's in an array into a class this isn't the exact code but I would like to know how to do this </p>\n\n<pre><code>var classes = [\"({x: 0, y: 0, width: 100, height: 100})\", \"({x: 10, y: 10, width: 70, height: 70})\"];\nfor(var i = 0; i &lt; elements.length;i++) {\n   var c = new window[classes[i]];\n   console.log(c.width);\n}\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "fancybox", "fancybox-3"], "comments": [{"owner": {"reputation": 113, "user_id": 2604201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jp8vs.jpg?s=128&g=1", "display_name": "Daniel Mai", "link": "https://stackoverflow.com/users/2604201/daniel-mai"}, "edited": false, "score": 0, "creation_date": 1567040344, "post_id": 57700696, "comment_id": 101847012, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/17266280/how-to-not-show-the-first-image-when-you-open-the-gallery-fancybox-2\">How to not show the first image when you open the gallery - Fancybox 2</a>"}], "answers": [{"tags": [], "owner": {"reputation": 7952, "user_id": 486595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5cc7afdb5dd0a2de48549206b1b849b?s=128&d=identicon&r=PG", "display_name": "Janis", "link": "https://stackoverflow.com/users/486595/janis"}, "is_accepted": true, "score": 0, "last_activity_date": 1567058211, "creation_date": 1567058211, "answer_id": 57703813, "question_id": 57700696, "link": "https://stackoverflow.com/questions/57700696/how-to-not-always-start-with-first-photo/57703813#57703813", "title": "How to not always start with first photo?", "body": "<p>You just have to pass <code>index</code> as 3rd parameter (see docs <a href=\"https://fancyapps.com/fancybox/3/docs/#api\" rel=\"nofollow noreferrer\">https://fancyapps.com/fancybox/3/docs/#api</a>), for example:</p>\n\n<pre><code>var $links = $(\"#start_slides2 a\");\n\n$links.on('click', function () {\n    $.fancybox.open([\n    { src: 'photo1.jpg', opts: { caption: 'First caption' } },\n    { src: 'photo2.jpg', opts: { caption: 'Second caption' } },\n    { src: 'photo3.jpg', opts: { caption: 'Third caption' } },\n    { src: 'photo4.jpg', opts: { caption: 'Fourth caption' } },\n    { src: 'photo5.jpg', opts: { caption: 'Fifth caption' } },\n    { src: 'photo6.jpg', opts: { caption: 'Sixth caption' } },\n    { src: 'photo7.jpg', opts: { caption: 'Seventh caption' } },\n    { src: 'photo8.jpg', opts: { caption: 'Eigth caption' } }],\n    { loop: true }, $links.index(this)\n    );\n});\n</code></pre>\n\n<p>Demo - <a href=\"https://jsfiddle.net/cfnaw4oL/\" rel=\"nofollow noreferrer\">https://jsfiddle.net/cfnaw4oL/</a></p>\n"}], "owner": {"reputation": 23, "user_id": 4874846, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ee43515c9eacdfde85c0013d6b7ba45a?s=128&d=identicon&r=PG&f=1", "display_name": "Deen", "link": "https://stackoverflow.com/users/4874846/deen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 57703813, "answer_count": 1, "score": 0, "last_activity_date": 1567058211, "creation_date": 1567030635, "last_edit_date": 1567031567, "question_id": 57700696, "link": "https://stackoverflow.com/questions/57700696/how-to-not-always-start-with-first-photo", "title": "How to not always start with first photo?", "body": "<p>I got a image gallery preview of 5 thumbnails, but the gallery has even more photos. To avoid putting all  to my code and hide them via CSS, I am looking for another solution.</p>\n\n<p>This is my HTML code:</p>\n\n<pre><code>&lt;div id=\"start_slides2\"&gt;\n    &lt;a href=\"javascript:;\"&gt;&lt;img src=\"./thumb1.jpg\" alt=\"\"&gt;&lt;/a&gt;\n    &lt;a href=\"javascript:;\"&gt;&lt;img src=\"./thumb2.jpg\" alt=\"\"&gt;&lt;/a&gt;\n    &lt;a href=\"javascript:;\"&gt;&lt;img src=\"./thumb3.jpg\" alt=\"\"&gt;&lt;/a&gt;\n    &lt;a href=\"javascript:;\"&gt;&lt;img src=\"./thumb4.jpg\" alt=\"\"&gt;&lt;/a&gt;\n    &lt;a href=\"javascript:;\"&gt;&lt;img src=\"./thumb5.jpg\" alt=\"\"&gt;&lt;/a&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>No problem so far. I could use the common way or put it to an object like this:</p>\n\n<pre><code>$(\"#start_slides2 a\").on('click', function () {\n    $.fancybox.open([\n    { src: 'photo1.jpg', opts: { caption: 'First caption' } },\n    { src: 'photo2.jpg', opts: { caption: 'Second caption' } },\n    { src: 'photo3.jpg', opts: { caption: 'Third caption' } },\n    { src: 'photo4.jpg', opts: { caption: 'Fourth caption' } },\n    { src: 'photo5.jpg', opts: { caption: 'Fifth caption' } },\n    { src: 'photo6.jpg', opts: { caption: 'Sixth caption' } },\n    { src: 'photo7.jpg', opts: { caption: 'Seventh caption' } },\n    { src: 'photo8.jpg', opts: { caption: 'Eigth caption' } }],\n    { loop: true }\n    );\n});\n</code></pre>\n\n<p>The problem is that it always starts with the first item, even if a user clicked on the third thumbnail e.g.</p>\n\n<p>How can I show the clicked image but also keep the chance to show up to x photos?</p>\n"}, {"tags": ["javascript", "reactjs"], "comments": [{"owner": {"reputation": 22145, "user_id": 2733506, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/aef7abc9820d5fd66765e3e99ba28a15?s=128&d=identicon&r=PG", "display_name": "John Ruddell", "link": "https://stackoverflow.com/users/2733506/john-ruddell"}, "edited": false, "score": 1, "creation_date": 1567030659, "post_id": 57700683, "comment_id": 101845270, "body": "Why are you defining the callback function for <code>setState</code> to run as an <code>async</code> function? are you trying to make API calls inside of that callback? that would be the wrong approach for making api calls. If you <code>await</code> inside of this callback then yes you&#39;re going to mess up how setstate works. You need this function to be synchronous"}, {"owner": {"reputation": 6761, "user_id": 4698242, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6757cccdf8e414d1ee8f833242334cda?s=128&d=identicon&r=PG&f=1", "display_name": "kojow7", "link": "https://stackoverflow.com/users/4698242/kojow7"}, "reply_to_user": {"reputation": 22145, "user_id": 2733506, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/aef7abc9820d5fd66765e3e99ba28a15?s=128&d=identicon&r=PG", "display_name": "John Ruddell", "link": "https://stackoverflow.com/users/2733506/john-ruddell"}, "edited": false, "score": 0, "creation_date": 1567032072, "post_id": 57700683, "comment_id": 101845544, "body": "@JohnRuddell I have added further details to explain things more."}, {"owner": {"reputation": 14231, "user_id": 1218980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c6b54df38abce7b1c35f499a1d4a67?s=128&d=identicon&r=PG", "display_name": "Emile Bergeron", "link": "https://stackoverflow.com/users/1218980/emile-bergeron"}, "edited": false, "score": 1, "creation_date": 1567032195, "post_id": 57700683, "comment_id": 101845580, "body": "The <code>setState</code> function must return an object but an async function returns a <code>Promise</code>."}, {"owner": {"reputation": 14231, "user_id": 1218980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c6b54df38abce7b1c35f499a1d4a67?s=128&d=identicon&r=PG", "display_name": "Emile Bergeron", "link": "https://stackoverflow.com/users/1218980/emile-bergeron"}, "edited": false, "score": 0, "creation_date": 1567032319, "post_id": 57700683, "comment_id": 101845603, "body": "<a href=\"https://reactjs.org/docs/faq-ajax.html\" rel=\"nofollow noreferrer\">How to fetch data and put it in the state</a>"}, {"owner": {"reputation": 14231, "user_id": 1218980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c6b54df38abce7b1c35f499a1d4a67?s=128&d=identicon&r=PG", "display_name": "Emile Bergeron", "link": "https://stackoverflow.com/users/1218980/emile-bergeron"}, "edited": false, "score": 0, "creation_date": 1567032490, "post_id": 57700683, "comment_id": 101845638, "body": "For subsequent setState calls, use the second parameter. <code>this.setState({&#47;**&#47;}, () =&gt; this.fetchOtherThing(this.state.data))</code>"}, {"owner": {"reputation": 14231, "user_id": 1218980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c6b54df38abce7b1c35f499a1d4a67?s=128&d=identicon&r=PG", "display_name": "Emile Bergeron", "link": "https://stackoverflow.com/users/1218980/emile-bergeron"}, "edited": false, "score": 0, "creation_date": 1567032777, "post_id": 57700683, "comment_id": 101845710, "body": "You could also <a href=\"https://stackoverflow.com/q/53409325/1218980\">&quot;promisify&quot; <code>setState</code></a> and it would then be possible to <code>await this.promiseSetState(&#47;**&#47;)</code>"}, {"owner": {"reputation": 6761, "user_id": 4698242, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6757cccdf8e414d1ee8f833242334cda?s=128&d=identicon&r=PG&f=1", "display_name": "kojow7", "link": "https://stackoverflow.com/users/4698242/kojow7"}, "edited": false, "score": 0, "creation_date": 1567033396, "post_id": 57700683, "comment_id": 101845823, "body": "The problem is that I need to use a prevState value to pass to the API, but I cannot get a prevState value unless I am in the setState function. However, it is a catch-22 situation, because I cannot call the API unless I do it asynchronously."}, {"owner": {"reputation": 22145, "user_id": 2733506, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/aef7abc9820d5fd66765e3e99ba28a15?s=128&d=identicon&r=PG", "display_name": "John Ruddell", "link": "https://stackoverflow.com/users/2733506/john-ruddell"}, "edited": false, "score": 1, "creation_date": 1567033731, "post_id": 57700683, "comment_id": 101845875, "body": "<code>prevState</code> is the same thing as <code>this.state</code> before you call <code>setState</code>. So just do your api request before setting state. Then setState with the results or whatever you need to do... aka <code>const { value } = this.state; this.setState( prevState =&gt; { prevState.value === value &#47;&#47; true ...</code>"}, {"owner": {"reputation": 6761, "user_id": 4698242, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6757cccdf8e414d1ee8f833242334cda?s=128&d=identicon&r=PG&f=1", "display_name": "kojow7", "link": "https://stackoverflow.com/users/4698242/kojow7"}, "edited": false, "score": 0, "creation_date": 1567051316, "post_id": 57700683, "comment_id": 101848964, "body": "I was of the understanding that setState is done in batch, and there could be other setStates waiting in queue that might change the value of the state. So if I access this.state and pass the value to my API there is a chance that I could be accessing a slightly older version of state and thus sending the API the incorrect value. Am I wrong about this? If so, what am I misunderstanding?"}, {"owner": {"reputation": 22145, "user_id": 2733506, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/aef7abc9820d5fd66765e3e99ba28a15?s=128&d=identicon&r=PG", "display_name": "John Ruddell", "link": "https://stackoverflow.com/users/2733506/john-ruddell"}, "edited": false, "score": 0, "creation_date": 1567097842, "post_id": 57700683, "comment_id": 101871435, "body": "the only time that would happen is if you are calling setstate multiple times within like a second. Just dont do that. you&#39;re controlling when setState is called. If you need help understanding more I&#39;d be happy to review code for you and give pointers."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8379578"}, "is_accepted": false, "score": 0, "last_activity_date": 1568303331, "creation_date": 1568303331, "answer_id": 57910375, "question_id": 57700683, "link": "https://stackoverflow.com/questions/57700683/issuing-setstate-before-and-after-an-api-call/57910375#57910375", "title": "Issuing setState before and after an API call", "body": "<p>I don't have much to work with.</p>\n\n<p>But I would suggest you to put <code>setState</code> inside <code>componentDidMount()</code></p>\n\n<p>and use <code>PromiseResult.then(data=&gt;this.setState(data))</code></p>\n"}], "owner": {"reputation": 6761, "user_id": 4698242, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6757cccdf8e414d1ee8f833242334cda?s=128&d=identicon&r=PG&f=1", "display_name": "kojow7", "link": "https://stackoverflow.com/users/4698242/kojow7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1568303331, "creation_date": 1567030509, "last_edit_date": 1567090450, "question_id": 57700683, "link": "https://stackoverflow.com/questions/57700683/issuing-setstate-before-and-after-an-api-call", "title": "Issuing setState before and after an API call", "body": "<p>I am using an async function with prevState. I am using prevState for a couple of purposes: 1) I am updating a deeply nested object 2) I am using current state to send data to an API. I am using async for the API call.</p>\n\n<p>This is a simplified version of my code:</p>\n\n<pre><code>this.setState(async prevState =&gt; {\n   //code using await to pull data from an Api\n\n   return ({\n      data: data\n   })}, function(){\n       //Here I do not see the updated state\n       console.log(this.state)\n\n   }\n)\n</code></pre>\n\n<p>Without using async, it works fine, but then I cannot make use of await. How can I access my updated state from within the callBack function?</p>\n\n<p><strong>Further Details</strong></p>\n\n<p>Ultimately what I am trying to do is have three nested setState functions as follows. When a user page is saved the savePage() function will be triggered. In that function I want to:</p>\n\n<ol>\n<li>LOCK THE PAGE IN STATE: Add the page_id to a state array of locked pages. This will prevent further changes to the page.</li>\n<li>SEND DATA TO SERVER AND UPDATE STATE ON SUCCESS: In the callback I am then calling the Api to update the page. AND then update the page status as \"saved\" in the new setState</li>\n<li>UNLOCK THE PAGE: In the callback from the new setState function, I then issue a third setState function to remove the lock from the locked_pages array located in state. This probably can be combined with step 2.</li>\n</ol>\n"}, {"tags": ["javascript", "jquery", "html", "sweetalert"], "comments": [{"owner": {"reputation": 13181, "user_id": 17300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6913044c5e536029098ce2d5c9b841e?s=128&d=identicon&r=PG", "display_name": "Stephen P", "link": "https://stackoverflow.com/users/17300/stephen-p"}, "edited": false, "score": 1, "creation_date": 1567032074, "post_id": 57700681, "comment_id": 101845546, "body": "<a href=\"https://sweetalert2.github.io/#configuration\" rel=\"nofollow noreferrer\">sweetalert2.github.io/#configuration</a>"}], "answers": [{"tags": [], "owner": {"reputation": 374, "user_id": 6509779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Oejm.jpg?s=128&g=1", "display_name": "Wilco", "link": "https://stackoverflow.com/users/6509779/wilco"}, "is_accepted": true, "score": 2, "last_activity_date": 1567030951, "creation_date": 1567030951, "answer_id": 57700740, "question_id": 57700681, "link": "https://stackoverflow.com/questions/57700681/swal-on-mouse-click/57700740#57700740", "title": "swal on mouse click", "body": "<p>depending on which Swal version you are using. </p>\n\n<p>For SweetAlert 2:</p>\n\n<pre><code>allowOutsideClick: false\n</code></pre>\n\n<p>for SweetAlert (version 1):</p>\n\n<pre><code>closeOnClickOutside: false \n</code></pre>\n"}], "owner": {"reputation": 2219, "user_id": 3882744, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8bec02fe258d18391f277f7669df1c6c?s=128&d=identicon&r=PG&f=1", "display_name": "caot", "link": "https://stackoverflow.com/users/3882744/caot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 57700740, "answer_count": 1, "score": 0, "last_activity_date": 1567031601, "creation_date": 1567030501, "last_edit_date": 1567031601, "question_id": 57700681, "link": "https://stackoverflow.com/questions/57700681/swal-on-mouse-click", "title": "swal on mouse click", "body": "<p>The following <code>example ONE</code> is from <a href=\"https://lipis.github.io/bootstrap-sweetalert/\" rel=\"nofollow noreferrer\">https://lipis.github.io/bootstrap-sweetalert/</a>. While clicking anywhere outside of the alert box, the alert box won't go away. That's what I expected.</p>\n\n<pre><code>swal({\n  title: \"Are you sure?\",\n  text: \"You will not be able to recover this imaginary file!\",\n  type: \"warning\",\n  showCancelButton: true,\n  confirmButtonClass: \"btn-danger\",\n  confirmButtonText: \"Yes, delete it!\",\n  cancelButtonText: \"No, cancel plx!\",\n  closeOnConfirm: false,\n  closeOnCancel: false\n},\nfunction(isConfirm) {\n  if (isConfirm) {\n    swal(\"Deleted!\", \"Your imaginary file has been deleted.\", \"success\");\n  } else {\n    swal(\"Cancelled\", \"Your imaginary file is safe :)\", \"error\");\n  }\n});\n</code></pre>\n\n<p>Another <code>example TWO</code> is from <a href=\"https://sweetalert2.github.io/\" rel=\"nofollow noreferrer\">https://sweetalert2.github.io/</a>. It behaved in another way. While clicking anywhere outside of the alert box, the alert box is gone. </p>\n\n<pre><code>Swal.fire({\n  title: '&lt;strong&gt;HTML &lt;u&gt;example&lt;/u&gt;&lt;/strong&gt;',\n  type: 'info',\n  html:\n    'You can use &lt;b&gt;bold text&lt;/b&gt;, ' +\n    '&lt;a href=\"//sweetalert2.github.io\"&gt;links&lt;/a&gt; ' +\n    'and other HTML tags',\n  showCloseButton: true,\n  showCancelButton: true,\n  focusConfirm: false,\n  confirmButtonText:\n    '&lt;i class=\"fa fa-thumbs-up\"&gt;&lt;/i&gt; Great!',\n  confirmButtonAriaLabel: 'Thumbs up, great!',\n  cancelButtonText:\n    '&lt;i class=\"fa fa-thumbs-down\"&gt;&lt;/i&gt;',\n  cancelButtonAriaLabel: 'Thumbs down'\n})\n</code></pre>\n\n<p>In my code base as the follows, it behaved the same way as the <code>example TWO</code>. While clicking anywhere outside of the alert box, the alert box is gone.</p>\n\n<p>How to fix it so that the alert box won't be gone while clicking anywhere outside of the alert box? What could be the version of my sweetalert ?</p>\n\n<pre><code>swal({\n    title: \"Message:\",\n    text: \"Here is some detailed message\",\n    type: \"warning\",\n    buttons: {\n        to_refresh: {\n            text: \"Refresh the current view\",\n            visible: true,\n            closeModal: true\n        },\n        to_close: {\n            text: \"Back to Main Menu!\",\n            visible: true,\n            closeModal: true\n        },\n    },\n}).then(value =&gt; {\n    if (value === 'to_refresh') {\n        // window.location.href = window.location.href;\n        location.reload(true);\n    } else {\n        window.location.href = \"to some other link\"\n    }\n});\n</code></pre>\n"}, {"tags": ["javascript"], "comments": [{"owner": {"reputation": 1143, "user_id": 3903479, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yVZsk.png?s=128&g=1", "display_name": "GammaGames", "link": "https://stackoverflow.com/users/3903479/gammagames"}, "edited": false, "score": 1, "creation_date": 1567030398, "post_id": 57700645, "comment_id": 101845225, "body": "Use a class name, something like <code>file-button</code>. Then you can just call <code>$(&quot;.file-button&quot;).on(&#39;change&#39;)</code>"}, {"owner": {"reputation": 128, "user_id": 4329077, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cc843d5db7db786bd942c4ce8297c08a?s=128&d=identicon&r=PG&f=1", "display_name": "Babis.amas", "link": "https://stackoverflow.com/users/4329077/babis-amas"}, "edited": false, "score": 0, "creation_date": 1567030453, "post_id": 57700645, "comment_id": 101845235, "body": "You can add a class to all of your inputs and then bind the onchange event to that class"}, {"owner": {"reputation": 3466, "user_id": 1964418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d933b1144b7dd1ec63e2d809ac2d7060?s=128&d=identicon&r=PG", "display_name": "Snowmonkey", "link": "https://stackoverflow.com/users/1964418/snowmonkey"}, "edited": false, "score": 1, "creation_date": 1567030905, "post_id": 57700645, "comment_id": 101845316, "body": "How you access them is secondary. You could just as easily do <code>$(&quot;.mainDiv input[type=&#39;file&#39;]&quot;).on(&quot;change&quot;...</code>, and it would work with what you currently have. Aside from a firebase error, I have this working: <a href=\"https://jsfiddle.net/snowMonkey/jz17hdga/2/\" rel=\"nofollow noreferrer\">jsfiddle.net/snowMonkey/jz17hdga/2</a>"}], "answers": [{"tags": [], "owner": {"reputation": 381, "user_id": 11523447, "user_type": "registered", "profile_image": "https://graph.facebook.com/898078623868825/picture?type=large", "display_name": "Adnane Ar", "link": "https://stackoverflow.com/users/11523447/adnane-ar"}, "is_accepted": false, "score": 0, "last_activity_date": 1567180101, "last_edit_date": 1567180101, "creation_date": 1567030806, "answer_id": 57700714, "question_id": 57700645, "link": "https://stackoverflow.com/questions/57700645/how-to-use-one-function-for-multiple-file-upload-buttons/57700714#57700714", "title": "how to use one function for multiple file upload buttons", "body": "<p>Here is a working code !</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const FileBtns = document.querySelectorAll(\"input[type='file'][id]\");\r\nFileBtns.forEach(function(btn) {\r\n  btn.addEventListener(\"change\", function(e) {\r\n    console.log(this);\r\n    var file = e.target.files[0];\r\n    var storageRef = firebase.storage().ref('img/' + file.name);\r\n    var task = storageRef.put(file);\r\n    task.on('state_changed', function progress(snapshot) {\r\n      var percentage = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n      uploader.value = percentage;\r\n\r\n    }, function error(err) {\r\n      //Some error task\r\n    }, function complete() {\r\n      console.log(\"we dit\");\r\n    });\r\n  });\r\n});</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div class=\"card-body\"&gt;\r\n  &lt;div class=\"container\"&gt;\r\n    &lt;div class=\"row\"&gt;\r\n      &lt;div class=\"col-6\"&gt;\r\n        &lt;div class=\"mainDiv\" align=\"right\"&gt;\r\n          &lt;progress id=\"uploader0\" value=\"0\" max=\"100\"&gt;0%&lt;/progress&gt;\r\n          &lt;input type=\"file\" id=\"fileButton0\" value=\"upload\" /&gt;\r\n        &lt;/div&gt;\r\n      &lt;/div&gt;\r\n      &lt;div class=\"col-6\"&gt;\r\n        &lt;div class=\"mainDiv\" align=\"right\"&gt;\r\n          &lt;progress id=\"uploader1\" value=\"0\" max=\"100\"&gt;0%&lt;/progress&gt;\r\n          &lt;input type=\"file\" id=\"fileButton1\" value=\"upload\" /&gt;\r\n        &lt;/div&gt;\r\n      &lt;/div&gt;\r\n    &lt;/div&gt;&lt;br&gt;\r\n    &lt;div class=\"row\"&gt;\r\n      &lt;div class=\"col-6\"&gt;\r\n        &lt;div class=\"mainDiv\" align=\"right\"&gt;\r\n          &lt;progress id=\"uploader2\" value=\"0\" max=\"100\"&gt;0%&lt;/progress&gt;\r\n          &lt;input type=\"file\" id=\"fileButton2\" value=\"upload\" /&gt;\r\n        &lt;/div&gt;\r\n      &lt;/div&gt;\r\n      &lt;div class=\"col-6\"&gt;\r\n        &lt;div class=\"mainDiv\" align=\"right\"&gt;\r\n          &lt;progress id=\"uploader3\" value=\"0\" max=\"100\"&gt;0%&lt;/progress&gt;\r\n          &lt;input type=\"file\" id=\"fileButton3\" value=\"upload\" /&gt;\r\n        &lt;/div&gt;\r\n      &lt;/div&gt;\r\n    &lt;/div&gt;\r\n  &lt;/div&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 1133, "user_id": 6283073, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c7ae026b1a93bc8fadfb78934acdd2b7?s=128&d=identicon&r=PG&f=1", "display_name": "e.iluf", "link": "https://stackoverflow.com/users/6283073/e-iluf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567180101, "creation_date": 1567030240, "last_edit_date": 1567032122, "question_id": 57700645, "link": "https://stackoverflow.com/questions/57700645/how-to-use-one-function-for-multiple-file-upload-buttons", "title": "how to use one function for multiple file upload buttons", "body": "<p>I have four upload buttons with their respective ids. </p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div class=\"card-body\"&gt;\n    &lt;div class=\"container\"&gt;\n        &lt;div class=\"row\"&gt;\n            &lt;div class=\"col-6\"&gt;\n                &lt;div class=\"mainDiv\" align=\"right\"&gt;\n                    &lt;progress id=\"uploader\" value=\"0\" max=\"100\"&gt;0%&lt;/progress&gt;\n                    &lt;input type=\"file\" id=\"fileButton\" value=\"upload\" /&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"col-6\"&gt;\n                &lt;div class=\"mainDiv\" align=\"right\"&gt;\n                    &lt;progress id=\"uploader\" value=\"0\" max=\"100\"&gt;0%&lt;/progress&gt;\n                    &lt;input type=\"file\" id=\"fileButton\" value=\"upload\" /&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;br&gt;\n        &lt;div class=\"row\"&gt;\n            &lt;div class=\"col-6\"&gt;\n                &lt;div class=\"mainDiv\" align=\"right\"&gt;\n                    &lt;progress id=\"uploader2\" value=\"0\" max=\"100\"&gt;0%&lt;/progress&gt;\n                    &lt;input type=\"file\" id=\"fileButton2\" value=\"upload\" /&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"col-6\"&gt;\n                &lt;div class=\"mainDiv\" align=\"right\"&gt;\n                    &lt;progress id=\"uploader3\" value=\"0\" max=\"100\"&gt;0%&lt;/progress&gt;\n                    &lt;input type=\"file\" id=\"fileButton3\" value=\"upload\" /&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I am able to upload to firebase storage through one button with this function</p>\n\n<pre><code>$(\"#fileButton\").on('change', function(e) {\n    var file = evt.target.files[0];\n    var storageRef = firebase.storage().ref('img/' + file.name);\n    var task = storageRef.put(file);\n    task.on('state_changed', function progress(snapshot) {\n        var percentage = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n        uploader.value = percentage;\n    }, function error(err) {\n\n    }, function complete() {\n\n    });\n})\n</code></pre>\n\n<p>the function works great but what I want to do is to prevent duplicating functions. I want to use that function for each of the upload input and uploader status. \nI tried this but it does not work</p>\n\n<pre><code> $(\"#fileButton0\", \"#fileButton1\", \"#fileButton2\", \"#fileButton3\").on('change'\n</code></pre>\n\n<p>how could I use the same function for each of the upload and uploader?</p>\n\n<p>here is the jsfiddle\n<a href=\"https://jsfiddle.net/dhs8g7fb/\" rel=\"nofollow noreferrer\">https://jsfiddle.net/dhs8g7fb/</a></p>\n"}, {"tags": ["javascript"], "comments": [{"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 2, "creation_date": 1567030419, "post_id": 57700640, "comment_id": 101845229, "body": "Please avoid the <a href=\"https://stackoverflow.com/questions/23803743/what-is-the-explicit-promise-construction-antipattern-and-how-do-i-avoid-it\">explicit construction antipattern</a>."}], "answers": [{"comments": [{"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 1, "creation_date": 1567033407, "post_id": 57700746, "comment_id": 101845825, "body": "The <code>.then(resolve).catch(reject)</code> is an antipattern as I explained above. It would be much better to unwrap the <code>return new Promise((resolve, reject) =&gt; { ... })</code> and just <code>return fetch(url, options).then(this.error);</code>"}, {"owner": {"reputation": 2820, "user_id": 687137, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/zG5KD.jpg?s=128&g=1", "display_name": "suchislife", "link": "https://stackoverflow.com/users/687137/suchislife"}, "edited": false, "score": 0, "creation_date": 1567042457, "post_id": 57700746, "comment_id": 101847383, "body": "Please see updated answer below if you are about to use this."}, {"owner": {"reputation": 165, "user_id": 8148483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff387c343769d6ff378a6d5c54ca6ba?s=128&d=identicon&r=PG", "display_name": "Francisco Garcia", "link": "https://stackoverflow.com/users/8148483/francisco-garcia"}, "edited": false, "score": 0, "creation_date": 1572903176, "post_id": 57700746, "comment_id": 103698584, "body": "Learn something new every day! I will update my answer to reflect the changes"}], "tags": [], "owner": {"reputation": 165, "user_id": 8148483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff387c343769d6ff378a6d5c54ca6ba?s=128&d=identicon&r=PG", "display_name": "Francisco Garcia", "link": "https://stackoverflow.com/users/8148483/francisco-garcia"}, "is_accepted": true, "score": 1, "last_activity_date": 1572903424, "last_edit_date": 1572903424, "creation_date": 1567030998, "answer_id": 57700746, "question_id": 57700640, "link": "https://stackoverflow.com/questions/57700640/refactor-switch-case-into-its-own-class-method-how/57700746#57700746", "title": "Refactor switch case into its own class method. How?", "body": "<p>If I understand what you are asking properly, you want to move the switch statement out into the error method on the class?</p>\n\n<p>Because it is in the promise chain the error method would need to return a promise.</p>\n\n<p>Maybe something like the following would work:</p>\n\n<pre><code>error(res) {\n  switch (res.status) {\n    case 200:\n      // code...\n      console.info('HTTP GET response status:', res.status, 'OK');\n      break;\n    case 201:\n      // code...\n      console.info('HTTP GET response status:', res.status, 'Created');\n      break;\n    case 404:\n      // code...\n      throw new Error('HTTP GET response status: 404 Not Found.');\n      break;\n    case 500:\n      // code...\n      throw new Error('HTTP GET response status: 500 Internal Server Error.');\n      break;\n    case 503:\n      // code...\n      throw new Error('HTTP GET response status: 503 Service Unavailable.');\n      break;\n    default:\n      // code...\n      break;\n    }\n    return res.json();\n}\n</code></pre>\n\n<p>You would also need to remove this statement:</p>\n\n<pre><code>.then(res =&gt; res.json())\n</code></pre>\n\n<p>that follows the call.</p>\n\n<p>So your get method would now look like:</p>\n\n<p>(EDIT: As it has been pointed out, we must try to avoid the <a href=\"https://stackoverflow.com/a/23803744/8148483\">explicit constructor antipattern</a>, so we would instead return the entire promise and defer the resolution and rejection to the caller)</p>\n\n<pre><code>// code above the fetch...\nreturn fetch(url, options)\n  .then(this.error);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1567049772, "post_id": 57701841, "comment_id": 101848652, "body": "<code>reject</code> isn&#39;t defined. You&#39;ve gotten rid of the <code>Promise</code> constructor. You might as well forward the original rejection reason with a useful stack trace, rather than masking it with a <code>ReferenceError</code> caused by a programming mistake. If I&#39;m not being clear enough, you do that by removing <code>.catch(err =&gt; reject(err));</code> and just ending it at <code>.then(this.getResStatus);</code>"}, {"owner": {"reputation": 2820, "user_id": 687137, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/zG5KD.jpg?s=128&g=1", "display_name": "suchislife", "link": "https://stackoverflow.com/users/687137/suchislife"}, "reply_to_user": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1567050235, "post_id": 57701841, "comment_id": 101848746, "body": "Ok. How would I catch the errors? Perhaps just remove reject and <code>.catch(err =&gt; console.log(err))</code>?"}, {"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1567050415, "post_id": 57701841, "comment_id": 101848784, "body": "When you write an API, it is the responsibility of the caller to handle the error, not the API. This is also true with synchronous code, not just with callbacks and promises. The reason is because the API should have no knowledge of how / if the caller should / will handle the error. If there is no way to gracefully handle it, then the caller will not <code>.catch()</code> it, which generates an &quot;uncaught promise rejection&quot;."}, {"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1567050548, "post_id": 57701841, "comment_id": 101848811, "body": "And no, <code>.catch(err =&gt; console.log(err))</code> is not a good way to handle it. First of all, the caller will no longer be able to inspect the rejection reason returned by the failed <code>fetch()</code>, and secondly the promise will always resolve, so the API creates added complexity for the caller by forcing it to check whether the resolved value is a response or <code>undefined</code>."}, {"owner": {"reputation": 2820, "user_id": 687137, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/zG5KD.jpg?s=128&g=1", "display_name": "suchislife", "link": "https://stackoverflow.com/users/687137/suchislife"}, "reply_to_user": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1567175873, "post_id": 57701841, "comment_id": 101897798, "body": "I found this answer on here and I think this is what you mean by the correct way to use async await with catch. <a href=\"https://stackoverflow.com/a/32824050\">stackoverflow.com/a/32824050</a>"}, {"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 1, "creation_date": 1567176852, "post_id": 57701841, "comment_id": 101898373, "body": "He did correctly answer the question, and the point of that answer is to show how using <code>await</code> will cause a promise rejected by <code>response.text()</code> to be caught by <code>catch</code>, but in general you would not want to <code>return</code> from within a <code>catch</code> unless you want that value to be treated the same way as a successfully resolved value. In this particular case it&#39;s probably okay because an error message can, under certain circumstances, be interchangeable with a string response from a successful AJAX call."}], "tags": [], "owner": {"reputation": 2820, "user_id": 687137, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/zG5KD.jpg?s=128&g=1", "display_name": "suchislife", "link": "https://stackoverflow.com/users/687137/suchislife"}, "is_accepted": false, "score": 1, "last_activity_date": 1567050721, "last_edit_date": 1567050721, "creation_date": 1567041938, "answer_id": 57701841, "question_id": 57700640, "link": "https://stackoverflow.com/questions/57700640/refactor-switch-case-into-its-own-class-method-how/57701841#57701841", "title": "Refactor switch case into its own class method. How?", "body": "<p>Here is the <strong>updated code</strong> to <strong>reflect the removal of explicit construction anti-pattern</strong>. This is thanks to Patrick's second comment. </p>\n\n<p>This class contains GET, POST, PUT &amp; DELETE.</p>\n\n<p>The class uses fetch. Then you use async await functions to return them in order.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>class CustomFetch {\r\n\r\n  // METHOD: GET\r\n  get(url) {\r\n\r\n    const getOptions = {\r\n      method: 'GET',               // *GET, POST, PUT, DELETE, etc.\r\n      mode: 'cors',                // no-cors, cors, *same-origin\r\n      cache: 'no-cache',           // *default, no-cache, reload, force-cache, only-if-cached\r\n      credentials: 'same-origin',  // include, *same-origin, omit\r\n      headers: {\r\n        // 'Content-Type': 'application/x-www-form-urlencoded',\r\n        'Content-Type': 'application/json',\r\n        // 'Content-Type': 'text/xml'\r\n      },\r\n      redirect: 'follow',          // manual, *follow, error\r\n      referrer: 'no-referrer',     // no-referrer, *client\r\n      // body:     JSON.stringify(params)   // body data type must match \"Content-Type\" header\r\n    };\r\n\r\n    // DO FETCH\r\n    return fetch(url, getOptions)\r\n      .then(this.getResStatus)\r\n\r\n  }\r\n\r\n  // ================================================================================\r\n\r\n  // METHOD: POST\r\n  post(url, params) {\r\n\r\n    const postOptions = {\r\n      method: 'POST',              // *GET, POST, PUT, DELETE, etc.\r\n      mode: 'cors',                // no-cors, cors, *same-origin\r\n      cache: 'no-cache',           // *default, no-cache, reload, force-cache, only-if-cached\r\n      credentials: 'same-origin',  // include, *same-origin, omit\r\n      headers: {\r\n        // 'Content-Type': 'application/x-www-form-urlencoded',\r\n        'Content-Type': 'application/json',\r\n        // 'Content-Type': 'text/xml'\r\n      },\r\n      redirect: 'follow',          // manual, *follow, error\r\n      referrer: 'no-referrer',     // no-referrer, *client\r\n      body: JSON.stringify(params) // body data type must match \"Content-Type\" header\r\n    };\r\n\r\n    // DO FETCH\r\n    return fetch(url, postOptions)\r\n      .then(this.getResStatus)\r\n\r\n  }\r\n\r\n  // ================================================================================\r\n\r\n  // METHOD: PUT\r\n  put(url, params) {\r\n\r\n    const putOptions = {\r\n      method: 'PUT', // *GET, POST, PUT, DELETE, etc.\r\n      mode: 'cors', // no-cors, cors, *same-origin\r\n      cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n      credentials: 'same-origin', // include, *same-origin, omit\r\n      headers: {\r\n        // 'Content-Type': 'application/x-www-form-urlencoded',\r\n        'Content-Type': 'application/json',\r\n        // 'Content-Type': 'text/xml'\r\n      },\r\n      redirect: 'follow', // manual, *follow, error\r\n      referrer: 'no-referrer', // no-referrer, *client\r\n      body: JSON.stringify(params) // body data type must match \"Content-Type\" header\r\n    };\r\n\r\n    // DO FETCH\r\n    return fetch(url, putOptions)\r\n      .then(this.getResStatus)\r\n\r\n  }\r\n\r\n  // ================================================================================\r\n\r\n  // METHOD: DELETE\r\n  delete(url) {\r\n\r\n    const deleteOptions = {\r\n      method: 'DELETE', // *GET, POST, PUT, DELETE, etc.\r\n      mode: 'cors', // no-cors, cors, *same-origin\r\n      cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n      credentials: 'same-origin', // include, *same-origin, omit\r\n      headers: {\r\n        // 'Content-Type': 'application/x-www-form-urlencoded',\r\n        'Content-Type': 'application/json',\r\n        // 'Content-Type': 'text/xml'\r\n      },\r\n      redirect: 'follow', // manual, *follow, error\r\n      referrer: 'no-referrer', // no-referrer, *client\r\n      // body:     JSON.stringify(params)   // body data type must match \"Content-Type\" header\r\n    };\r\n\r\n    // DO FETCH\r\n    return fetch(url, deleteOptions)\r\n      .then(this.getResStatus)\r\n\r\n  }\r\n\r\n  // ================================================================================\r\n\r\n  // METHOD: GET RESPONSE\r\n  getResStatus(res) {\r\n\r\n    switch (res.status) {\r\n      case 200:\r\n        // code...\r\n        console.info('HTTP response status:', res.status, 'OK');\r\n        break;\r\n      case 201:\r\n        // code...\r\n        console.info('HTTP response status:', res.status, 'Created');\r\n        break;\r\n      case 404:\r\n        // code...\r\n        throw new Error('HTTP response status: 404 Not Found.');\r\n        break;\r\n      case 500:\r\n        // code...\r\n        throw new Error('HTTP response status: 500 Internal Server Error.');\r\n        break;\r\n      case 503:\r\n        // code...\r\n        throw new Error('HTTP response status: 503 Service Unavailable.');\r\n        break;\r\n      default:\r\n        // code...\r\n        break;\r\n      }\r\n      // CONVERT TO JSON...\r\n      return res.json();\r\n  }\r\n\r\n} // end Class {}\r\n\r\nconst http = new CustomFetch;\r\n\r\nasync function Run() {\r\n\r\n// ================================================================================\r\n\r\n// GET -&gt; AWAIT...\r\nconst fetch1 = await http.get('https://jsonplaceholder.typicode.com/users/1')\r\n.then(data =&gt; console.log(data))\r\n.then(data =&gt; console.log('ASYNC/AWAIT: Resource Get Successful.'))\r\n.then(data =&gt; console.log('|'))\r\n.catch(err =&gt; console.log(err));\r\n\r\n// ================================================================================\r\n\r\n// POST data\r\nconst postData = {\r\n\r\n\tname:     'Mark Postman',\r\n\tusername: 'markpostman',\r\n\temail:    'mpostman@email.com'\r\n}\r\n\r\n// POST -&gt; AWAIT...\r\nconst fetch2 = await http.post('https://jsonplaceholder.typicode.com/users', postData)\r\n.then(data =&gt; console.log(data))\r\n.then(data =&gt; console.log('ASYNC/AWAIT: Resource Post Successful.'))\r\n.then(data =&gt; console.log('|'))\r\n.catch(err =&gt; console.log(err));\r\n\r\n// ================================================================================\r\n\r\n// PUT data\r\nconst putData = {\r\n\r\n\tname:     'Mark Putman',\r\n\tusername: 'markpostman',\r\n\temail:    'mpostman@email.com'\r\n}\r\n\r\n// PUT -&gt; AWAIT...\r\nconst fetch3 = await http.put('https://jsonplaceholder.typicode.com/users/1', putData)\r\n.then(data =&gt; console.log(data))\r\n.then(data =&gt; console.log('ASYNC/AWAIT: Resource Put Successful.'))\r\n.then(data =&gt; console.log('|'))\r\n.catch(err =&gt; console.log(err));\r\n\r\n// ================================================================================\r\n\r\n// DELETE -&gt; AWAIT...\r\nconst fetch4 = await http.delete('https://jsonplaceholder.typicode.com/users/1')\r\n.then(data =&gt; console.log(data))\r\n.then(data =&gt; console.log('ASYNC/AWAIT: Resource Delete Successful.'))\r\n.then(data =&gt; console.log('|'))\r\n.catch(err =&gt; console.log(err));\r\n\r\n}\r\n\r\n// RUN async /await fetch functions in procedural order.\r\nRun();</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 2820, "user_id": 687137, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/zG5KD.jpg?s=128&g=1", "display_name": "suchislife", "link": "https://stackoverflow.com/users/687137/suchislife"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 57700746, "answer_count": 2, "score": 3, "last_activity_date": 1572903424, "creation_date": 1567030191, "question_id": 57700640, "link": "https://stackoverflow.com/questions/57700640/refactor-switch-case-into-its-own-class-method-how", "title": "Refactor switch case into its own class method. How?", "body": "<p>I have a wrapper class for fetch promises and I wanted to console out http response statuses.</p>\n\n<p>Currently the switch is inside the get() method. How can I shift this switch case into the error() method and use it as a \"thenable\"?</p>\n\n<p>Take a look:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>class CustomFetch {\r\n\r\n\r\n  get(url) {\r\n\r\n    return new Promise((resolve, reject) =&gt; {\r\n\r\n      const getOptions = {\r\n        method: 'GET',               // *GET, POST, PUT, DELETE, etc.\r\n        mode: 'cors',                // no-cors, cors, *same-origin\r\n        cache: 'no-cache',           // *default, no-cache, reload, force-cache, only-if-cached\r\n        credentials: 'same-origin',  // include, *same-origin, omit\r\n        headers: {\r\n          // 'Content-Type': 'application/x-www-form-urlencoded',\r\n          'Content-Type': 'application/json',\r\n          // 'Content-Type': 'text/xml'\r\n        },\r\n        redirect: 'follow',          // manual, *follow, error\r\n        referrer: 'no-referrer',     // no-referrer, *client\r\n        // body:     JSON.stringify(params)   // body data type must match \"Content-Type\" header\r\n      };\r\n\r\n      // DO FETCH\r\n      fetch(url, getOptions)\r\n\r\n      .then(function(res) {\r\n\r\n        // RESPONSE VALIDATION\r\n        switch (res.status) {\r\n\r\n          case 200:\r\n            // code...\r\n            console.info('HTTP GET response status:', res.status, 'OK');\r\n            break;\r\n\r\n          case 201:\r\n            // code...\r\n            console.info('HTTP GET response status:', res.status, 'Created');\r\n            break;\r\n\r\n          case 404:\r\n            // code...\r\n            throw new Error('HTTP GET response status: 404 Not Found.');\r\n            break;\r\n\r\n          case 500:\r\n            // code...\r\n            throw new Error('HTTP GET response status: 500 Internal Server Error.');\r\n            break;\r\n\r\n          case 503:\r\n            // code...\r\n            throw new Error('HTTP GET response status: 503 Service Unavailable.');\r\n            break;\r\n          \r\n          default:\r\n            // code...\r\n            break;\r\n\r\n          }\r\n\r\n          return res;\r\n\r\n        })\r\n\r\n        .then(res =&gt; res.json())\r\n        .then(data =&gt; resolve(data))\r\n        .catch(err =&gt; reject(err));\r\n\r\n\r\n    });\r\n\r\n  }\r\n  \r\n  error(res) {\r\n  \r\n  // Here, for example..\r\n  \r\n  }\r\n  \r\n}\r\n\r\nconst http = new CustomFetch;\r\n\r\nasync function Run() {\r\n\r\n\r\n// GET -&gt; AWAIT...\r\nconst fetch1 = await http.get('https://jsonplaceholder.typicode.com/users/1')\r\n.then(data =&gt; console.log(data))\r\n.then(data =&gt; console.log('asycn/await: Resource Get Successful.'))\r\n.then(data =&gt; console.log('_'))\r\n.catch(err =&gt; console.log(err));\r\n\r\n}\r\n\r\n// RUN async /await fetch functions in procedural order.\r\nRun();</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["javascript", "reactjs", "material-ui", "ios13"], "comments": [{"owner": {"reputation": 5819, "user_id": 4385889, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/V0hjo.png?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/4385889/andrew"}, "edited": false, "score": 0, "creation_date": 1567030355, "post_id": 57700599, "comment_id": 101845206, "body": "I personally find material-ui to be notorious for constant breaking changes. I don&#39;t have a true solution for you, but if it&#39;s only one or two components that aren&#39;t working, then I suggest you either temporarily build a component with identical behavior yourself or check out the material ui source code and see what other recourses you have"}, {"owner": {"reputation": 1161, "user_id": 1693475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VoB22.jpg?s=128&g=1", "display_name": "phantomraa", "link": "https://stackoverflow.com/users/1693475/phantomraa"}, "edited": false, "score": 0, "creation_date": 1567037934, "post_id": 57700599, "comment_id": 101846616, "body": "Hi Richtor - welcome to Stack Overflow! Are you able to post videos, GIFs, or images of the issue at hand to help us better understand the cause?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11991430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/093f60d49c9eda10fb9ee9455b17a9e4?s=128&d=identicon&r=PG&f=1", "display_name": "Richtor", "link": "https://stackoverflow.com/users/11991430/richtor"}, "is_accepted": true, "score": 0, "last_activity_date": 1567096213, "creation_date": 1567096213, "answer_id": 57714378, "question_id": 57700599, "link": "https://stackoverflow.com/questions/57700599/material-ui-v1-drawer-component-isnt-working-in-the-ios-13-beta-build/57714378#57714378", "title": "Material-UI v1 Drawer component isn&#39;t working in the iOS 13 beta build", "body": "<p>Turns out it wasn't specifically the Drawer, but the function that is used to close the drawer when the user clicks away from the Drawer. Specifically the issue was in our implementation of the the ClickAwayListener of material-ui. Once we removed that it was working fine.</p>\n"}], "owner": {"reputation": 1, "user_id": 11991430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/093f60d49c9eda10fb9ee9455b17a9e4?s=128&d=identicon&r=PG&f=1", "display_name": "Richtor", "link": "https://stackoverflow.com/users/11991430/richtor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "accepted_answer_id": 57714378, "answer_count": 1, "score": 0, "last_activity_date": 1567096213, "creation_date": 1567029930, "question_id": 57700599, "link": "https://stackoverflow.com/questions/57700599/material-ui-v1-drawer-component-isnt-working-in-the-ios-13-beta-build", "title": "Material-UI v1 Drawer component isn&#39;t working in the iOS 13 beta build", "body": "<p>While prepping for the latest iOS release, expected next month, the main navigation for our site is no longer functioning when using an iOS device on the latest beta (iOS13). The drawer opens as expected, but clicking on any of the contained menu items doesn't trigger an onclick action and the drawer simply closes(or remains open in the desktop view without triggering the action). The menuitems themselves visually react to the tap, but nothing else.</p>\n\n<p>Unfortunately upgrading the version of material-ui isn't an option</p>\n"}, {"tags": ["javascript", "jquery", "button", "document-ready"], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 7512046, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ndFmWN4z6Mc/AAAAAAAAAAI/AAAAAAAAJMo/mFmLxQJCeJo/photo.jpg?sz=128", "display_name": "TanyaW.", "link": "https://stackoverflow.com/users/7512046/tanyaw"}, "edited": false, "score": 1, "creation_date": 1567030796, "post_id": 57700691, "comment_id": 101845292, "body": "Perfect! Thank you so much!"}], "tags": [], "owner": {"reputation": 7287, "user_id": 3824283, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5l7OG.jpg?s=128&g=1", "display_name": "EternalHour", "link": "https://stackoverflow.com/users/3824283/eternalhour"}, "is_accepted": true, "score": 3, "last_activity_date": 1567451186, "last_edit_date": 1567451186, "creation_date": 1567030591, "answer_id": 57700691, "question_id": 57700552, "link": "https://stackoverflow.com/questions/57700552/is-it-possible-to-combine-document-ready-function-and-a-button-click-function/57700691#57700691", "title": "Is it possible to combine document.ready function and a button click function?", "body": "<p>I'd suggest putting your code into a function since you need to use it multiple times. The first instance runs when the page loads, then you can bind the second to a click event.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var words = {\r\n      W: ['ace', 'axman', 'archer', 'ale', 'bastard', 'dragon', 'badger', 'ax', 'blade', 'fool', 'battlement', 'bear', 'bull', 'hawk', 'bridge', 'bee', 'cat', 'highwayman', 'brook', 'boar', 'cock', 'hound', 'castle', 'duke', 'dog', 'idiot', 'city', 'dutchess', 'hammer', 'mage', 'clock', 'fire', 'jack', 'manticore', 'deer', 'fish', 'king', 'mare', 'eagle', 'flag', 'knife', 'mouse', 'goat', 'lion', 'ladies', 'prince', 'mace', 'mole', 'maiden', 'princess', 'mule', 'mountain', 'nightmare', 'ram', 'potion', 'nymph', 'plough', 'man', 'rat', 'river', 'sea', 'queen', 'snake', 'shark', 'ship', 'rogue', 'sorrow', 'shield', 'trap', 'sow', 'sword', 'soldier', 'virgin', 'swallow', 'widow', 'tree', 'wasp', 'wizards', 'wyrm', 'village', 'wolf'],\r\n      X: ['belching', 'crushing', 'dreaming', 'drinking', 'drowning', 'fighting', 'laughing', 'laying', 'living', 'plotting', 'prancing', 'running', 'screaming', 'singing', 'sleeping', 'sneaking', 'snoozing', 'stabbing', 'starving', 'swinging'],\r\n      Y: ['cart', 'child', 'cup', 'dream', 'flagon', 'folly', 'fork', 'hearth', 'husband', 'inn', 'keep', 'knife', 'mug', 'nightmare', 'plate', 'plot', 'song', 'spoon', 'wagon', 'wife'],\r\n      Z: ['bloodied', 'branded', 'bronzed', 'burnt', 'chipped', 'cracked', 'dropped', 'drowned', 'fallen', 'forgotten', 'frozen', 'full', 'half', 'quarter', 'rusted', 'soaked', 'spun', 'stabbed', 'tall', 'thirsty']\r\n};\r\nfunction randomWord(type) {\r\n  var rando = Math.floor(Math.random() * words[type].length),\r\n    word = words[type][rando];\r\n  return word;\r\n}\r\nfunction tavernName() {\r\nvar W = randomWord('W'),\r\n    W2 = randomWord('W'),\r\n    X = randomWord('X'),\r\n    Y = randomWord('Y'),\r\n    Y2 = randomWord('Y'),\r\n    Z = randomWord('Z');\r\n  var names = ['The ' + W + ' &amp; ' + W2 + ' ', 'The ' + X + ' ' + W + ' ', 'The ' + W + \"'s \" + Y + ' ', 'The ' + Z + ' ' + W + ' ', 'The ' + Y + ' &amp; ' + Y2 + ' ', 'The ' + W + \" &amp; \" + Y + ' ', 'The ' + Z + ' ' + Y + ' ', 'The ' + X + ' ' + Y + ' '];\r\n  var name = names[Math.floor(Math.random() * names.length)];\r\n  var container = document.getElementById('output');\r\n  container.innerHTML = name;\r\n}\r\n$(function(){\r\n  tavernName();\r\n  $('.button').click(function(){\r\n    tavernName();\r\n  });\r\n});</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;div style=\"width: 100%; text-align: center;\"&gt;\r\n  &lt;h2 style=\"font-size:  48pt; font-family: Fredericka the Great;\" id=\"output\" class=\"button\"&gt;&amp;nbsp;&lt;/h2&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 1250, "user_id": 3148642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42349287c864fce33cc7ca059ff901c4?s=128&d=identicon&r=PG", "display_name": "Casper", "link": "https://stackoverflow.com/users/3148642/casper"}, "is_accepted": false, "score": 1, "last_activity_date": 1567046495, "creation_date": 1567046495, "answer_id": 57702277, "question_id": 57700552, "link": "https://stackoverflow.com/questions/57700552/is-it-possible-to-combine-document-ready-function-and-a-button-click-function/57702277#57702277", "title": "Is it possible to combine document.ready function and a button click function?", "body": "<p>The <code>ready()</code> method is used to make a function available after the document is loaded. Whatever code you write inside the <code>$(document ).ready()</code> method will run once the page DOM is ready to execute JavaScript code.</p>\n\n<pre><code>$( document ).ready(function() {\n    console.log( \"ready!\" );\n});\n</code></pre>\n\n<p>Experienced developers sometimes use the shorthand <code>$()</code> for <code>$( document ).ready()</code>. </p>\n\n<pre><code>$(function() {\n    console.log( \"ready!\" );\n});\n</code></pre>\n\n<p>For your problem you can add  <code>$('.button').click()</code> method inside <code>$(document).ready()</code> like below,</p>\n\n<pre><code>// option 1\n$(document).ready(function(){\n   $('.button').click(function(){});\n});\n\n// option 2\n$(function(){\n   $('.button').click(function(){});\n});\n</code></pre>\n\n<p>Other than that if you want to reuse this button click method you can create <code>function()</code> and call it whenever you need it.</p>\n\n<pre><code>function generateName() {\n   var W = randomWord('W'),\n   W2 = randomWord('W'),\n   X = randomWord('X');\n   ....\n}\n\n$(function(){\n   $('.button').click(function(){\n      generateName();\n   });\n});\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 7512046, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ndFmWN4z6Mc/AAAAAAAAAAI/AAAAAAAAJMo/mFmLxQJCeJo/photo.jpg?sz=128", "display_name": "TanyaW.", "link": "https://stackoverflow.com/users/7512046/tanyaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 57700691, "answer_count": 2, "score": 1, "last_activity_date": 1569917201, "creation_date": 1567029596, "last_edit_date": 1569917201, "question_id": 57700552, "link": "https://stackoverflow.com/questions/57700552/is-it-possible-to-combine-document-ready-function-and-a-button-click-function", "title": "Is it possible to combine document.ready function and a button click function?", "body": "<p>I am attempting to write a random tavern name generator, and would like the names to be ready when the document loads, and for a button click to generate a new name.</p>\n\n<p>I am wondering if I am able to combine this document.ready function:</p>\n\n<pre><code>    $(document).ready(function(){\n      var W = randomWord('W'),\n        W2 = randomWord('W'),\n        X = randomWord('X'),\n        Y = randomWord('Y'),\n        Y2 = randomWord('Y'),\n        Z = randomWord('Z');\n      var names = ['The ' + W + ' &amp; ' + W2 + ' ', 'The ' + X + ' ' + W + ' ', 'The ' + W + \"'s \" + Y + ' ', 'The ' + Z + ' ' + W + ' ', 'The ' + Y + ' &amp; ' + Y2 + ' ', 'The ' + W + \" &amp; \" + Y + ' ', 'The ' + Z + ' ' + Y + ' ', 'The ' + X + ' ' + Y + ' '];\n      var name = names[Math.floor(Math.random() * names.length)];\n      var container = document.getElementById('output');\n      container.innerHTML = name;\n    });\n</code></pre>\n\n<p>with my button click function:</p>\n\n<pre><code>$('.button').click(function() {\n  var W = randomWord('W'),\n    W2 = randomWord('W'),\n    X = randomWord('X'),\n    Y = randomWord('Y'),\n    Y2 = randomWord('Y'),\n    Z = randomWord('Z');\n  var names = ['The ' + W + ' &amp; ' + W2 + ' ', 'The ' + X + ' ' + W + ' ', 'The ' + W + \"'s \" + Y + ' ', 'The ' + Z + ' ' + W + ' ', 'The ' + Y + ' &amp; ' + Y2 + ' ', 'The ' + W + \" &amp; \" + Y + ' ', 'The ' + Z + ' ' + Y + ' ', 'The ' + X + ' ' + Y + ' '];\n  var name = names[Math.floor(Math.random() * names.length)];\n  var container = document.getElementById('output');\n  container.innerHTML = name;\n</code></pre>\n\n<p>They are the same function, but with two different triggers.</p>\n\n<p>Can I do something like...?</p>\n\n<pre><code>    $(document).ready(function(), $('.button').click(function(){\ncodecodecode\n});\n</code></pre>\n\n<p>Thank you!</p>\n\n<p>(for testing purposes, the entire code is : <a href=\"https://jsfiddle.net/mpqf68tg/\" rel=\"nofollow noreferrer\">https://jsfiddle.net/mpqf68tg/</a>)</p>\n\n<pre><code>&lt;div style=\"width: 100%; text-align: center;\"&gt;\n  &lt;h2 style=\"font-size:  48pt; font-family: Fredericka the Great;\" id=\"output\" class=\"button\"&gt;&amp;nbsp;&lt;/h2&gt;\n&lt;/div&gt;\n\n&lt;script&gt;\n    var words = {\n      W: ['ace', 'axman', 'archer', 'ale', 'bastard', 'dragon', 'badger', 'ax', 'blade', 'fool', 'battlement', 'bear', 'bull', 'hawk', 'bridge', 'bee', 'cat', 'highwayman', 'brook', 'boar', 'cock', 'hound', 'castle', 'duke', 'dog', 'idiot', 'city', 'dutchess', 'hammer', 'mage', 'clock', 'fire', 'jack', 'manticore', 'deer', 'fish', 'king', 'mare', 'eagle', 'flag', 'knife', 'mouse', 'goat', 'lion', 'ladies', 'prince', 'mace', 'mole', 'maiden', 'princess', 'mule', 'mountain', 'nightmare', 'ram', 'potion', 'nymph', 'plough', 'man', 'rat', 'river', 'sea', 'queen', 'snake', 'shark', 'ship', 'rogue', 'sorrow', 'shield', 'trap', 'sow', 'sword', 'soldier', 'virgin', 'swallow', 'widow', 'tree', 'wasp', 'wizards', 'wyrm', 'village', 'wolf'],\n      X: ['belching', 'crushing', 'dreaming', 'drinking', 'drowning', 'fighting', 'laughing', 'laying', 'living', 'plotting', 'prancing', 'running', 'screaming', 'singing', 'sleeping', 'sneaking', 'snoozing', 'stabbing', 'starving', 'swinging'],\n      Y: ['cart', 'child', 'cup', 'dream', 'flagon', 'folly', 'fork', 'hearth', 'husband', 'inn', 'keep', 'knife', 'mug', 'nightmare', 'plate', 'plot', 'song', 'spoon', 'wagon', 'wife'],\n      Z: ['bloodied', 'branded', 'bronzed', 'burnt', 'chipped', 'cracked', 'dropped', 'drowned', 'fallen', 'forgotten', 'frozen', 'full', 'half', 'quarter', 'rusted', 'soaked', 'spun', 'stabbed', 'tall', 'thirsty']\n    };\n    function randomWord(type) {\n      var rando = Math.floor(Math.random() * words[type].length),\n        word = words[type][rando];\n      return word;\n    }\n    $(document).ready(function(){\n      var W = randomWord('W'),\n        W2 = randomWord('W'),\n        X = randomWord('X'),\n        Y = randomWord('Y'),\n        Y2 = randomWord('Y'),\n        Z = randomWord('Z');\n      var names = ['The ' + W + ' &amp; ' + W2 + ' ', 'The ' + X + ' ' + W + ' ', 'The ' + W + \"'s \" + Y + ' ', 'The ' + Z + ' ' + W + ' ', 'The ' + Y + ' &amp; ' + Y2 + ' ', 'The ' + W + \" &amp; \" + Y + ' ', 'The ' + Z + ' ' + Y + ' ', 'The ' + X + ' ' + Y + ' '];\n      var name = names[Math.floor(Math.random() * names.length)];\n      var container = document.getElementById('output');\n      container.innerHTML = name;\n\n    });\n    $('.button').click(function(){\n      var W = randomWord('W'),\n        W2 = randomWord('W'),\n        X = randomWord('X'),\n        Y = randomWord('Y'),\n        Y2 = randomWord('Y'),\n        Z = randomWord('Z');\n      var names = ['The ' + W + ' &amp; ' + W2 + ' ', 'The ' + X + ' ' + W + ' ', 'The ' + W + \"'s \" + Y + ' ', 'The ' + Z + ' ' + W + ' ', 'The ' + Y + ' &amp; ' + Y2 + ' ', 'The ' + W + \" &amp; \" + Y + ' ', 'The ' + Z + ' ' + Y + ' ', 'The ' + X + ' ' + Y + ' '];\n      var name = names[Math.floor(Math.random() * names.length)];\n      var container = document.getElementById('output');\n      container.innerHTML = name;\n\n    });\n&lt;/script&gt;\n</code></pre>\n"}, {"tags": ["javascript", "vue.js", "chart.js"], "comments": [{"owner": {"reputation": 2941, "user_id": 3537002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ycVyB.png?s=128&g=1", "display_name": "Robot", "link": "https://stackoverflow.com/users/3537002/robot"}, "edited": false, "score": 0, "creation_date": 1567031000, "post_id": 57700550, "comment_id": 101845332, "body": "Can you throw this into a <a href=\"https://codesandbox.io/s/vue\" rel=\"nofollow noreferrer\">codesandbox.io/s/vue</a>?  Also, make sure you are using vue devtools - it will help a lot with debugging this."}, {"owner": {"reputation": 750, "user_id": 2800956, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c2a7ae163094ac55b3536697b1f0814a?s=128&d=identicon&r=PG", "display_name": "ffuentes", "link": "https://stackoverflow.com/users/2800956/ffuentes"}, "reply_to_user": {"reputation": 2941, "user_id": 3537002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ycVyB.png?s=128&g=1", "display_name": "Robot", "link": "https://stackoverflow.com/users/3537002/robot"}, "edited": false, "score": 0, "creation_date": 1567032803, "post_id": 57700550, "comment_id": 101845716, "body": "I can&#39;t do it right now but I&#39;m using devtools and that&#39;s why I knew arrays are getting populated within both components."}, {"owner": {"reputation": 750, "user_id": 2800956, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c2a7ae163094ac55b3536697b1f0814a?s=128&d=identicon&r=PG", "display_name": "ffuentes", "link": "https://stackoverflow.com/users/2800956/ffuentes"}, "reply_to_user": {"reputation": 2941, "user_id": 3537002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ycVyB.png?s=128&g=1", "display_name": "Robot", "link": "https://stackoverflow.com/users/3537002/robot"}, "edited": false, "score": 0, "creation_date": 1567087864, "post_id": 57700550, "comment_id": 101866317, "body": "<a href=\"https://codesandbox.io/embed/vue-template-x4z7b\" rel=\"nofollow noreferrer\">codesandbox.io/embed/vue-template-x4z7b</a>"}, {"owner": {"reputation": 750, "user_id": 2800956, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c2a7ae163094ac55b3536697b1f0814a?s=128&d=identicon&r=PG", "display_name": "ffuentes", "link": "https://stackoverflow.com/users/2800956/ffuentes"}, "reply_to_user": {"reputation": 2941, "user_id": 3537002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ycVyB.png?s=128&g=1", "display_name": "Robot", "link": "https://stackoverflow.com/users/3537002/robot"}, "edited": false, "score": 0, "creation_date": 1567093369, "post_id": 57700550, "comment_id": 101869398, "body": "I made two updates to this question."}, {"owner": {"reputation": 2941, "user_id": 3537002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ycVyB.png?s=128&g=1", "display_name": "Robot", "link": "https://stackoverflow.com/users/3537002/robot"}, "edited": false, "score": 0, "creation_date": 1567095983, "post_id": 57700550, "comment_id": 101870659, "body": "Will post an answer soon, but the key is that while your async api call is being made, values is an empty [] (values.data doesn\u2019t exist), and then you create the child component and create a chart in it with the empty array.  You must wait until the data is loaded to create the child component using a v-if on &lt;bar-line-chart&gt; and have values initially set to undefined in your data section, OR, create the child component immediately as you do now but re-render the chart using the call \u201cnew Chart()\u201d, whenever values changes (using a watcher).  In both, remove values from the component section."}, {"owner": {"reputation": 2941, "user_id": 3537002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ycVyB.png?s=128&g=1", "display_name": "Robot", "link": "https://stackoverflow.com/users/3537002/robot"}, "edited": false, "score": 0, "creation_date": 1567096175, "post_id": 57700550, "comment_id": 101870749, "body": "You could also make your api call in the created() hook which happens before the mounted() hook is called.  This would slow down your app more, but would force html rendering to wait for the data."}], "answers": [{"tags": [], "owner": {"reputation": 2941, "user_id": 3537002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ycVyB.png?s=128&g=1", "display_name": "Robot", "link": "https://stackoverflow.com/users/3537002/robot"}, "is_accepted": true, "score": 1, "last_activity_date": 1567103973, "last_edit_date": 1592644375, "creation_date": 1567102498, "answer_id": 57715788, "question_id": 57700550, "link": "https://stackoverflow.com/questions/57700550/why-is-this-chartjs-graph-not-being-loaded-using-vue-js/57715788#57715788", "title": "Why is this chartjs graph not being loaded? (Using Vue.js)", "body": "<p><em>I apologize: vuejs documentation on how to fetch async data and integrate it into you application is not the best.  I wish they would be more opinionated on best practices here with more examples.</em></p>\n<h1>Your problem: A component depending on async data</h1>\n<p>While your async api call is being made, <code>this.values</code> is an empty array (<code>this.values.data</code> doesn\u2019t exist until the api call responds).  Before the data comes back, vue creates the child component which creates a chart in it using the empty values array, resulting in a blank chart. You must wait until the data is loaded to create the child component (and hence the chart).  So how do we do that?</p>\n<h1>The solution: Conditional component rendering</h1>\n<ol>\n<li>Fetch data in the created hook, not the mounted hook. <em>Reason: asking for data earlier is more performant, see: <a href=\"https://vuejs.org/v2/guide/instance.html\" rel=\"nofollow noreferrer\">https://vuejs.org/v2/guide/instance.html</a></em></li>\n<li>On data response, save that data into your vue component. <em>Reason: you need that data, see: <a href=\"https://vuejs.org/v2/cookbook/using-axios-to-consume-apis.html#ad\" rel=\"nofollow noreferrer\">https://vuejs.org/v2/cookbook/using-axios-to-consume-apis.html#ad</a></em></li>\n<li>On save, signal to your html that the data is ready using a variable <code>this.loaded = true</code>, and use a <code>v-if=&quot;loaded&quot;</code> on any child components that depend on that data, see: <a href=\"https://vuejs.org/v2/guide/conditional.html\" rel=\"nofollow noreferrer\">https://vuejs.org/v2/guide/conditional.html</a></li>\n</ol>\n<p>Here is a working code sandbox with a dummy api call replicating your changes: <a href=\"https://codesandbox.io/s/vue-template-4b3lm\" rel=\"nofollow noreferrer\">https://codesandbox.io/s/vue-template-4b3lm</a></p>\n<p>All of the changes were made to the Chartjs.vue file.</p>\n<h3>Some other errors I saw you make:</h3>\n<ul>\n<li>Declaring variables in the component section</li>\n<li>Setting this.values too many times in too many places.  Just declare it once in data and set it later as needed.</li>\n</ul>\n<h3>Some other ways you could solve this:</h3>\n<ul>\n<li>Use a watcher in the child components instead of <code>v-if</code>: to re-render the chart inside the component (instead of delaying the whole component with v-if) when the data comes in (any time the props change).</li>\n<li>Use vuex</li>\n</ul>\n"}], "owner": {"reputation": 750, "user_id": 2800956, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/c2a7ae163094ac55b3536697b1f0814a?s=128&d=identicon&r=PG", "display_name": "ffuentes", "link": "https://stackoverflow.com/users/2800956/ffuentes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 735, "favorite_count": 0, "accepted_answer_id": 57715788, "answer_count": 1, "score": 0, "last_activity_date": 1567103973, "creation_date": 1567029592, "last_edit_date": 1567093273, "question_id": 57700550, "link": "https://stackoverflow.com/questions/57700550/why-is-this-chartjs-graph-not-being-loaded-using-vue-js", "title": "Why is this chartjs graph not being loaded? (Using Vue.js)", "body": "<p>This is my chartjs component and I'm trying to pass two arrays from the backend. Somehow Vue.js gets the arrays within Vue and yet it doesn't display anything. I'm very new to Vue so bear with me. </p>\n\n<p>Chartjs.vue</p>\n\n<pre><code>&lt;template&gt;\n  &lt;div class=\"main-content\"&gt;\n    &lt;div class=\"page-header\"&gt;\n      &lt;h3 class=\"page-title\"&gt;Chart JS&lt;/h3&gt;\n      &lt;ol class=\"breadcrumb\"&gt;\n        &lt;li class=\"breadcrumb-item\"&gt;&lt;a href=\"#\"&gt;Home&lt;/a&gt;&lt;/li&gt;\n        &lt;li class=\"breadcrumb-item\"&gt;&lt;a href=\"#\"&gt;Charts&lt;/a&gt;&lt;/li&gt;\n        &lt;li class=\"breadcrumb-item active\"&gt;Chart JS&lt;/li&gt;\n      &lt;/ol&gt;\n    &lt;/div&gt;\n    &lt;div class=\"row\"&gt;\n      &lt;div class=\"col-sm-12\"&gt;\n        &lt;div class=\"card\"&gt;\n          &lt;div class=\"card-header\"&gt;\n            &lt;h6&gt;Chartjs&lt;/h6&gt;\n          &lt;/div&gt;\n          &lt;div class=\"card-body\"&gt;\n            &lt;div class=\"mb-4\"&gt;\n              &lt;h5 class=\"section-semi-title\"&gt;\n                Line Chart\n              &lt;/h5&gt;\n              &lt;line-chart\n                :labels='[\"Enero\", \"Febrero\", \"Marzo\", \"Abril\", \"Mayo\", \"Junio\", \"Julio\", \"Agosto\", \"Septiembre\", \"Octubre\", \"Noviembre\", \"Diciembre\"]'\n                :values='values'\n              /&gt;\n            &lt;/div&gt;\n            &lt;div class=\"mb-4\"&gt;\n              &lt;h5 class=\"section-semi-title\"&gt;\n                Bar Chart\n              &lt;/h5&gt;\n              &lt;bar-line-chart\n                :labels='[\"Enero\", \"Febrero\", \"Marzo\", \"Abril\", \"Mayo\", \"Junio\", \"Julio\", \"Agosto\", \"Septiembre\", \"Octubre\", \"Noviembre\", \"Diciembre\"]'\n                :values='values'\n                :valuesline='valuesline'\n              /&gt;\n            &lt;/div&gt;\n\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script type=\"text/babel\"&gt;\nimport LineChart from '../../../components/chartjs/LineChart.vue'\nimport BarChart from '../../../components/chartjs/BarChart.vue'\nimport BarLineChart from '../../../components/chartjs/BarLineChart.vue'\nimport PieChart from '../../../components/chartjs/PieChart.vue'\nimport DoughnutChart from '../../../components/chartjs/DoughnutGraph.vue'\n\nexport default {\n  components: {\n    LineChart,\n    BarChart,\n    BarLineChart,\n    PieChart,\n    DoughnutChart,\n    values:[],\n    valuesline:[]\n  },\n  methods: {\n    async fetchBarChartData ({ anio, sort }) {\n      await axios.get(`/api/ingresos-por-mes/${anio}`).then(res=&gt;{\n        this.values=res.data.qty;\n        this.valuesline=res.data.perc;\n       });\n    }\n  },\n  mounted() {\n      this.fetchBarChartData({anio:2018});\n  },\n  data () {\n    return {\n      pieAndDoughtnut: {\n        labels: ['Red', 'Blue', 'Yellow'],\n        data: [300, 50, 100],\n        bgColors: [\n          '#FF6384',\n          '#36A2EB',\n          '#FFCE56'\n        ],\n        hoverBgColors: [\n          '#FF6384',\n          '#36A2EB',\n          '#FFCE56'\n        ]\n      },\n      values: this.values,\n      valuesline: this.valuesline\n    }\n  }\n}\n&lt;/script&gt;\n</code></pre>\n\n<p>BarLineChart.vue</p>\n\n<pre><code>&lt;template&gt;\n  &lt;div class=\"graph-container\"&gt;\n    &lt;canvas id=\"graph\" ref=\"graph\"/&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nimport Chart from 'chart.js'\n\nexport default {\n  props: {\n    labels: {\n      type: Array,\n      require: true,\n      default: Array\n    },\n    values: {\n      type: Array,\n      require: true,\n      default: Array\n    },\n    valuesline: {\n      type: Array,\n      require: true,\n      default: Array\n    }\n  },\n\n  mounted () {\n    let context = this.$refs.graph.getContext('2d')\n    let options = {\n      responsive: true,\n      maintainAspectRatio: false,\n      legend: {\n        display: false\n      }\n    }\n\n    let data = {\n      labels: this.labels,\n      datasets: [\n        {\n          label: 'My First dataset',\n          backgroundColor: 'rgba(79, 196, 127,0.2)',\n          borderColor: 'rgba(79, 196, 127,1)',\n          borderWidth: 1,\n          hoverBackgroundColor: 'rgba(79, 196, 127,0.4)',\n          hoverBorderColor: 'rgba(79, 196, 127,1)',\n          data: this.values\n        },\n        {\n          label: 'My First dataset',\n          data: this.valuesline,\n          type: 'line'\n        }\n      ]\n    }\n\n    this.myBarChart = new Chart(context, {\n      type: 'bar',\n      data: data,\n      options: options\n    })\n  },\n\n  beforeDestroy () {\n    this.myBarChart.destroy()\n  }\n}\n&lt;/script&gt;\n\n&lt;style scoped&gt;\n.graph-container {\n  height: 300px;\n}\n&lt;/style&gt;\n</code></pre>\n\n<p>What's odd is that if I make a mistake passing the arguments to the lower components. For example: </p>\n\n<pre><code>&lt;line-chart\n                :labels='[\"Enero\", \"Febrero\", \"Marzo\", \"Abril\", \"Mayo\", \"Junio\", \"Julio\", \"Agosto\", \"Septiembre\", \"Octubre\", \"Noviembre\", \"Diciembre\"]'\n                :values='values.data'\n              /&gt;\n</code></pre>\n\n<p>Adding \".data\" to values breaks that component but lets the other components load the chart below.</p>\n\n<p>Is there anyone who had to deal with this in the past? I'm using a dashboard I found on laraspace.in just in case.</p>\n\n<p>EDIT: I've added this to the codesandbox so you can help me more easily. </p>\n\n<p><a href=\"https://codesandbox.io/embed/vue-template-x4z7b\" rel=\"nofollow noreferrer\">https://codesandbox.io/embed/vue-template-x4z7b</a></p>\n\n<p>EDIT 2: Managed to make it work with local values in the sandbox but somehow it doesn't work in local when calling the api instead.</p>\n"}, {"tags": ["javascript"], "comments": [{"owner": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "edited": false, "score": 2, "creation_date": 1567029530, "post_id": 57700527, "comment_id": 101845030, "body": "Genuine question: I don&#39;t see you relying on <code>this</code> in any of these functions: why are you using arrow functions instead of normal named functions? Also, <a href=\"https://stackoverflow.com/questions/500504/why-is-using-for-in-with-array-iteration-a-bad-idea\">don&#39;t use <code>for ... in ...</code></a> with arrays"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 7308818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/996c1d67cba9c5e7f95d746fd849d8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Haaruun I", "link": "https://stackoverflow.com/users/7308818/haaruun-i"}, "is_accepted": false, "score": 0, "last_activity_date": 1567029683, "creation_date": 1567029683, "answer_id": 57700562, "question_id": 57700527, "link": "https://stackoverflow.com/questions/57700527/how-to-convert-javascript-methods-in-this-example/57700562#57700562", "title": "How to convert javascript methods in this example", "body": "<p>You can just remove the arrow and add the function keyword to the beginning as you don't use 'this' in any of them\nFrom this: <code>let name =() =&gt; {}</code> to <code>function name() {}</code></p>\n"}], "owner": {"reputation": 103, "user_id": 11689189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efa3a86000d76bdc9c145e87b57a9dfe?s=128&d=identicon&r=PG&f=1", "display_name": "benjaminadon", "link": "https://stackoverflow.com/users/11689189/benjaminadon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567029683, "creation_date": 1567029423, "question_id": 57700527, "link": "https://stackoverflow.com/questions/57700527/how-to-convert-javascript-methods-in-this-example", "title": "How to convert javascript methods in this example", "body": "<p>I have three functions structured in the following way:</p>\n\n<pre><code>const func = (arr) =&gt; {\n  var ch = {};\n  arr.map(ar =&gt; {\n         ar.stage_executions.map((s) =&gt; {\n        ch[s.stage.name] = [];\n      })\n  })\n  return ch;\n}\n\nconst func2 = (arr) =&gt; {\n  var all = func(arr);\n  for(var k in all) {\n    arr.map((ar) =&gt; {\n      ar.stage_executions.map((st) =&gt; {\n        if (st.stage.name === k) {\n          all[k].push(st.stage.name, st.duration_millis)\n        }\n      })\n    })\n  }\n  return all;\n}\n\nconst func3 = (arr) =&gt; {\n  const all = func2(arr);\n  for(var key in all) {\n    all[key] = [...new Set(all[key])]\n  }\n  return all;\n}\n\nconsole.log(func3(job_execs))\n</code></pre>\n\n<p>I want to convert these into functions into methods that look like the rest of my vue.js methods.</p>\n\n<p>example:</p>\n\n<pre><code>func: function() {\n  return all\n},\n</code></pre>\n\n<p>How do I do I convert my methods to look like the function above?</p>\n"}, {"tags": ["javascript", "node.js", "socket.io"], "comments": [{"owner": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "edited": false, "score": 2, "creation_date": 1567029457, "post_id": 57700516, "comment_id": 101845007, "body": "Wrong question: what are you trying to do? Because maybe socket.io isn&#39;t even the right tool for the job and standard websockets without the 1.5Mb of socket.io on top is plenty."}, {"owner": {"reputation": 1990, "user_id": 5775341, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/67f9c208584c05ef9918d544e0d4b95f?s=128&d=identicon&r=PG&f=1", "display_name": "quicklikerabbit", "link": "https://stackoverflow.com/users/5775341/quicklikerabbit"}, "edited": false, "score": 0, "creation_date": 1567029763, "post_id": 57700516, "comment_id": 101845075, "body": "Could you be more specific about what you&#39;re trying to do? Is your server using a language other than Javascript?"}], "answers": [{"comments": [{"owner": {"reputation": 92307, "user_id": 167735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5deb8de031f80c23f19e9b6d389e5afe?s=128&d=identicon&r=PG", "display_name": "slebetman", "link": "https://stackoverflow.com/users/167735/slebetman"}, "edited": false, "score": 0, "creation_date": 1567048383, "post_id": 57702410, "comment_id": 101848396, "body": "I think you should add github&#39;s search result for &quot;socket.io server&quot; because it&#39;s useful to find one for your language: <a href=\"https://github.com/search?q=socket.io+server\" rel=\"nofollow noreferrer\">github.com/search?q=socket.io+server</a>"}, {"owner": {"reputation": 92307, "user_id": 167735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5deb8de031f80c23f19e9b6d389e5afe?s=128&d=identicon&r=PG", "display_name": "slebetman", "link": "https://stackoverflow.com/users/167735/slebetman"}, "edited": false, "score": 0, "creation_date": 1567048468, "post_id": 57702410, "comment_id": 101848411, "body": "Also, the protocol is fully documented in <a href=\"https://github.com/socketio/socket.io-protocol\" rel=\"nofollow noreferrer\">github.com/socketio/socket.io-protocol</a> and <a href=\"https://github.com/socketio/engine.io-protocol\" rel=\"nofollow noreferrer\">github.com/socketio/engine.io-protocol</a> so in theory you can implement a server yourself in any language"}], "tags": [], "owner": {"reputation": 574451, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "is_accepted": false, "score": 1, "last_activity_date": 1567048479, "last_edit_date": 1567048479, "creation_date": 1567047573, "answer_id": 57702410, "question_id": 57700516, "link": "https://stackoverflow.com/questions/57700516/is-it-possible-to-use-socket-io-without-node-js/57702410#57702410", "title": "Is it possible to use socket.io without node.js?", "body": "<p>socket.io is a library that connects a browser web pages to some server somewhere.  There MUST be a socket.io server somewhere that does what you want that you can connect to.</p>\n\n<p>That socket.io server does not have to be written using node.js.  There is socket.io support for other languages or environments.  The protocol and data format is fully documented so implementations can be written for any environment. \nFor example, here's a <a href=\"https://github.com/mrudangit/Socket.IO.Server.CPP\" rel=\"nofollow noreferrer\">socket.io server implementation in C++</a>.</p>\n\n<p>You can look on github for various server implementations: <a href=\"https://github.com/search?q=socket.io+server\" rel=\"nofollow noreferrer\">https://github.com/search?q=socket.io+server</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 11511043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ba9de80b8a4ea05eb4467870f756ae8?s=128&d=identicon&r=PG&f=1", "display_name": "Heknon", "link": "https://stackoverflow.com/users/11511043/heknon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567048479, "creation_date": 1567029363, "question_id": 57700516, "link": "https://stackoverflow.com/questions/57700516/is-it-possible-to-use-socket-io-without-node-js", "title": "Is it possible to use socket.io without node.js?", "body": "<p>The title pretty muchs sums it up... I am wondering if there is a way to  use socket.io without node.js</p>\n"}, {"tags": ["javascript", "promise", "bluebird", "fetch-api"], "comments": [{"owner": {"reputation": 18374, "user_id": 3478010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y4DTM.png?s=128&g=1", "display_name": "Roamer-1888", "link": "https://stackoverflow.com/users/3478010/roamer-1888"}, "edited": false, "score": 0, "creation_date": 1567033767, "post_id": 57700505, "comment_id": 101845880, "body": "What are you really interested in, whatever <code>brmPostRequest()</code> delivers, or its side effects?"}, {"owner": {"reputation": 164, "user_id": 5091718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c921127a030625df256c45fe08855fd5?s=128&d=identicon&r=PG&f=1", "display_name": "sydeng", "link": "https://stackoverflow.com/users/5091718/sydeng"}, "edited": false, "score": 0, "creation_date": 1567034134, "post_id": 57700505, "comment_id": 101845952, "body": "Did you try increasing the browser memory? <a href=\"https://www.replicon.com/customer-zone2/kb-4928/\" rel=\"nofollow noreferrer\">replicon.com/customer-zone2/kb-4928</a>"}, {"owner": {"reputation": 574451, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 0, "creation_date": 1567046650, "post_id": 57700505, "comment_id": 101848101, "body": "Does the Bluebird <code>.map()</code> option with <code>concurrency: 100</code> work just fine?  Or are you saying that has problems too?"}, {"owner": {"reputation": 41, "user_id": 7577916, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uu84USAms4E/AAAAAAAAAAI/AAAAAAAABH4/0PfuK58wNXQ/photo.jpg?sz=128", "display_name": "skyliner33v", "link": "https://stackoverflow.com/users/7577916/skyliner33v"}, "reply_to_user": {"reputation": 18374, "user_id": 3478010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y4DTM.png?s=128&g=1", "display_name": "Roamer-1888", "link": "https://stackoverflow.com/users/3478010/roamer-1888"}, "edited": false, "score": 0, "creation_date": 1567086336, "post_id": 57700505, "comment_id": 101865385, "body": "@Roamer-1888: brmPostRequest() simply forms up and sends out a POST request to write a row to a database.  I&#39;m not interested in what it returns."}, {"owner": {"reputation": 41, "user_id": 7577916, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uu84USAms4E/AAAAAAAAAAI/AAAAAAAABH4/0PfuK58wNXQ/photo.jpg?sz=128", "display_name": "skyliner33v", "link": "https://stackoverflow.com/users/7577916/skyliner33v"}, "reply_to_user": {"reputation": 164, "user_id": 5091718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c921127a030625df256c45fe08855fd5?s=128&d=identicon&r=PG&f=1", "display_name": "sydeng", "link": "https://stackoverflow.com/users/5091718/sydeng"}, "edited": false, "score": 0, "creation_date": 1567086400, "post_id": 57700505, "comment_id": 101865417, "body": "@MohanRamalingam I will look into this.  I wasn&#39;t aware you could do that.  Thank you."}, {"owner": {"reputation": 41, "user_id": 7577916, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uu84USAms4E/AAAAAAAAAAI/AAAAAAAABH4/0PfuK58wNXQ/photo.jpg?sz=128", "display_name": "skyliner33v", "link": "https://stackoverflow.com/users/7577916/skyliner33v"}, "reply_to_user": {"reputation": 574451, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 0, "creation_date": 1567086462, "post_id": 57700505, "comment_id": 101865462, "body": "@jfriend00 the Bluebird option fails after 100k requests as well.  None of the above options works past around 100k requests"}, {"owner": {"reputation": 574451, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 0, "creation_date": 1567182038, "post_id": 57700505, "comment_id": 101900655, "body": "What are you doing with the results?  What are you accumulating/retaining for 100,000 requests?  If you include more code so we can see what is and isn&#39;t be kept alive and away from garbage collection, we&#39;d have a better idea why memory consumption gets so large.  That question will have to do with what you are keeping in scope or purposely in memory and what is eligible for garbage collection."}, {"owner": {"reputation": 41, "user_id": 7577916, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uu84USAms4E/AAAAAAAAAAI/AAAAAAAABH4/0PfuK58wNXQ/photo.jpg?sz=128", "display_name": "skyliner33v", "link": "https://stackoverflow.com/users/7577916/skyliner33v"}, "reply_to_user": {"reputation": 574451, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 0, "creation_date": 1567543578, "post_id": 57700505, "comment_id": 101991979, "body": "@jfriend00 I don&#39;t need to do anything with the results.  The only thing I&#39;m trying to accomplish with this is to pass data between 2 databases using an API.  I first make a fetch request to the origin database, in this case I make a fetch request to the origin db that returns an array containing approx 245k records.  Then I need to individually send each record to the target database.  I added a bit more code to my original post."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 7577916, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uu84USAms4E/AAAAAAAAAAI/AAAAAAAABH4/0PfuK58wNXQ/photo.jpg?sz=128", "display_name": "skyliner33v", "link": "https://stackoverflow.com/users/7577916/skyliner33v"}, "edited": false, "score": 0, "creation_date": 1567086776, "post_id": 57700771, "comment_id": 101865659, "body": "So when I tried V3.0 in my question above, chunking the array into 1000 records before sending, I could watch the progress in the &quot;Network&quot; tab in Chrome&#39;s DevTools and I could see 1000 requests get made with a pending status, then after a few seconds, they all resolve to HTTP status 200 indicating they were processed successfully.  And I can query the database they were getting written to and watch the database fill up with each 1000 record chunk.  I think my issue is that after they are processed, something is being retained in the browser memory and isn&#39;t getting garbage collected properly."}, {"owner": {"reputation": 245145, "user_id": 1348195, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f6dca2295546af21e1cde8e68f2d49bd?s=128&d=identicon&r=PG", "display_name": "Benjamin Gruenbaum", "link": "https://stackoverflow.com/users/1348195/benjamin-gruenbaum"}, "edited": false, "score": 0, "creation_date": 1567545669, "post_id": 57700771, "comment_id": 101992641, "body": "It is currently 6 requests at a time with chrome. Unless you QUIC or something."}], "tags": [], "owner": {"reputation": 7429, "user_id": 4811873, "user_type": "registered", "accept_rate": 6, "profile_image": "https://www.gravatar.com/avatar/2ef5bab087ac0b70e03e34b0b0009fd5?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Robinson", "link": "https://stackoverflow.com/users/4811873/mike-robinson"}, "is_accepted": false, "score": 1, "last_activity_date": 1567031510, "last_edit_date": 1567031510, "creation_date": 1567031202, "answer_id": 57700771, "question_id": 57700505, "link": "https://stackoverflow.com/questions/57700505/sending-thousands-of-fetch-requests-crashes-the-browser-out-of-memory/57700771#57700771", "title": "Sending thousands of fetch requests crashes the browser. Out of memory", "body": "<p><em>\"Well-l-l-l ... you're gonna need to put a <strong>throttle</strong> on this thing!\"</em></p>\n\n<p>Without (pardon me ...) attempting to dive too deeply into your code, \"no matter how many records you need to transfer, you need to control the number of requests that the browser attempts to do <em>at any one time.\"</em></p>\n\n<p>What's probably happening right now is that you're stacking up hundreds or thousands of \"promised\" requests in local memory \u2013 but, how many requests can the browser actually <em>transmit</em> at once?  That should govern the number of requests that the browser actually attempts to do.  As each reply is returned, your software then decides whether to start another request and if so for which record.</p>\n\n<p>Conceptually, you have so-many \"worker bees,\" according to the number of actual network requests your browser can simultaneously do.  Your software never attempts to launch more simultaneous requests than that:  it simply launches one new request as each one request is completed.  Each request, upon completion, triggers code that decides to launch the next one.</p>\n\n<p>So \u2013 <em>you never are</em> \"sending thousands of fetch requests.\"  You're probably sending only a handful at a time, even though, in this you-controlled manner, \"thousands of requests do eventually get sent.\"</p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 7577916, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uu84USAms4E/AAAAAAAAAAI/AAAAAAAABH4/0PfuK58wNXQ/photo.jpg?sz=128", "display_name": "skyliner33v", "link": "https://stackoverflow.com/users/7577916/skyliner33v"}, "edited": false, "score": 0, "creation_date": 1567093855, "post_id": 57712272, "comment_id": 101869675, "body": "Thank you for the reply.  I tested this method and I can see the memory usage steadily climbing up in the Task Manager.  I didn&#39;t wait for it to complete to see if it would crash again but I watched the Task Manager for about 10 minutes while this ran and the memory just kept increasing incrementally.  So I am going to assume that I am still having the same issue and it will eventually crash again.  I have added the code for the brmPostRequest() function in my original comment in case there may be issues there.  And I appreciate your help."}, {"owner": {"reputation": 18374, "user_id": 3478010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y4DTM.png?s=128&g=1", "display_name": "Roamer-1888", "link": "https://stackoverflow.com/users/3478010/roamer-1888"}, "reply_to_user": {"reputation": 41, "user_id": 7577916, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uu84USAms4E/AAAAAAAAAAI/AAAAAAAABH4/0PfuK58wNXQ/photo.jpg?sz=128", "display_name": "skyliner33v", "link": "https://stackoverflow.com/users/7577916/skyliner33v"}, "edited": false, "score": 0, "creation_date": 1567094104, "post_id": 57712272, "comment_id": 101869773, "body": "Next thing to try is recursion."}, {"owner": {"reputation": 41, "user_id": 7577916, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uu84USAms4E/AAAAAAAAAAI/AAAAAAAABH4/0PfuK58wNXQ/photo.jpg?sz=128", "display_name": "skyliner33v", "link": "https://stackoverflow.com/users/7577916/skyliner33v"}, "edited": false, "score": 0, "creation_date": 1567543732, "post_id": 57712272, "comment_id": 101992024, "body": "I&#39;ve spent the last few days reading up about how to do this using recursion and I&#39;m afraid I may be to green to JS to understand how something like that would work.  Would you be willing to explain please?"}, {"owner": {"reputation": 18374, "user_id": 3478010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y4DTM.png?s=128&g=1", "display_name": "Roamer-1888", "link": "https://stackoverflow.com/users/3478010/roamer-1888"}, "reply_to_user": {"reputation": 41, "user_id": 7577916, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uu84USAms4E/AAAAAAAAAAI/AAAAAAAABH4/0PfuK58wNXQ/photo.jpg?sz=128", "display_name": "skyliner33v", "link": "https://stackoverflow.com/users/7577916/skyliner33v"}, "edited": false, "score": 0, "creation_date": 1567688848, "post_id": 57712272, "comment_id": 102043998, "body": "@skyliner33v, yes but I&#39;m away from home right now. I&#39;ll see what I can do when I get back. Meanwhile maybe someone else will be able to show you. It&#39;s not difficult."}], "tags": [], "owner": {"reputation": 18374, "user_id": 3478010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y4DTM.png?s=128&g=1", "display_name": "Roamer-1888", "link": "https://stackoverflow.com/users/3478010/roamer-1888"}, "is_accepted": false, "score": 0, "last_activity_date": 1567088572, "creation_date": 1567088572, "answer_id": 57712272, "question_id": 57700505, "link": "https://stackoverflow.com/questions/57700505/sending-thousands-of-fetch-requests-crashes-the-browser-out-of-memory/57712272#57712272", "title": "Sending thousands of fetch requests crashes the browser. Out of memory", "body": "<p>As you are not intereted in the values delivered by <code>brmPostRequest()</code>, there's no point mapping the original array; neither the promises nor the results need to be acumulated.</p>\n\n<p>Not doing so will save memory and <em>may</em> allow progress beyond the 100k sticking point.</p>\n\n<pre><code>async function foo() {\n    const amResult = await amGetRequest(controllerName);\n    let counts = { 'successes': 0, 'errors': 0 };\n    for (let i = 0; i &lt; amResult.length; i++) {\n        try {\n            await brmPostRequest(controllerName, amResult[i]);\n            counts.successes += 1;\n        } catch(err) {\n            counts.errors += 1;\n        }\n    };\n    const console.log(counts);\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 7577916, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uu84USAms4E/AAAAAAAAAAI/AAAAAAAABH4/0PfuK58wNXQ/photo.jpg?sz=128", "display_name": "skyliner33v", "link": "https://stackoverflow.com/users/7577916/skyliner33v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 699, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1567544136, "creation_date": 1567029268, "last_edit_date": 1567544136, "question_id": 57700505, "link": "https://stackoverflow.com/questions/57700505/sending-thousands-of-fetch-requests-crashes-the-browser-out-of-memory", "title": "Sending thousands of fetch requests crashes the browser. Out of memory", "body": "<p>I was tasked with transferring a large portion of data using javascript and an API from one database to another.  Yes I understand that there are better ways of accomplishing this task, but I was asked to try this method.  </p>\n\n<p>I wrote some javascript that makes a GET call to an api that returns an array of data, which I then turnaround and make calls to another api to send this data as individual POST requests.  </p>\n\n<p>What I have written so far seems to works fairly well, and I have been able to send over 50k individual POST requests without any errors.  But I am having trouble when the number of POST requests increases past around 100k.  I end up running out of memory and the browser crashes.  </p>\n\n<p>From what I understand so far about promises, is that there may be an issue where promises (or something else?) are still kept in heap memory after they are resolved, which results in running out of memory after too many requests.  </p>\n\n<p>I've tried 3 different methods to get all the records to POST successfully after searching for the past couple days.  This has included using Bluebirds Promise.map, as well as breaking up the array into chunks first before sending them as POST requests.  Each method seems to work up until it has processed about 100k records before it crashes.</p>\n\n<pre><code>async function amGetRequest(controllerName) {\n\n    try{\n    const amURL = \"http://localhost:8081/api/\" + controllerName;\n\n    const amResponse = await fetch(amURL, {\n        \"method\": \"GET\",\n    });\n\n    return await amResponse.json();\n\n    } catch (err) {\n        closeModal()\n        console.error(err)\n    }\n};\n\n\nasync function brmPostRequest(controllerName, body) {\n\n    const brmURL = urlBuilderBRM(controllerName);\n    const headers = headerBuilderBRM();\n\n    try {\n        await fetch(brmURL, {\n            \"method\": \"POST\",\n            \"headers\": headers,\n            \"body\": JSON.stringify(body)\n        });\n    }\n    catch(error) {\n        closeModal()\n        console.error(error);\n    };\n};\n\n\n//V1.0 Send one by one and resolve all promises at the end.\n\nconst amResult = await amGetRequest(controllerName); //(returns an array of ~245,000 records)\n\nlet promiseArray = [];\n\nfor (let i = 0; i &lt; amResult.length; i++) {\n    promiseArray.push(await brmPostRequest(controllerName, amResult[i]));\n};\n\nconst postResults = await Promise.all(promiseArray);\n\n\n\n//V2.0 Use bluebirds Promise.map with concurrency set to 100\n\nconst amResult = await amGetRequest(controllerName); //(returns an array of ~245,000 records)\n\nconst postResults = Promise.map(amResult, async data =&gt; {\n    await brmPostRequest(controllerName, data);\n    return Promise.resolve();\n}, {concurrency: 100});\n\n\n\n//V3.0 Chunk array into max 1000 records and resolve 1000 promises before looping to the next 1000 records\n\nconst amResult = await amGetRequest(controllerName); //(returns an array of ~245,000 records)\n\nconst numPasses = Math.ceil(amResult.length / 1000);\n\nfor (let i=0; i &lt;= numPasses; i++) {\n    let subset = amResult.splice(0,1000);\n    let promises = subset.map(async (record) =&gt; {\n        await brmPostRequest(controllerName, record);\n    });\n\n    await Promise.all(promises);\n\n    subset.length = 0; //clear out temp array before looping again\n};\n</code></pre>\n\n<p>Is there something that I am missing about getting these promises cleared out of memory after they have been resolved?</p>\n\n<p>Or perhaps a better method of accomplishing this task?</p>\n\n<p>Edit: Disclaimer - I'm still fairly new to JS and still learning. </p>\n"}, {"tags": ["javascript", "typescript", "rxjs"], "answers": [{"tags": [], "owner": {"reputation": 32699, "user_id": 202694, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/982e5d5973bcd2be7b77e52ec7dca27c?s=128&d=identicon&r=PG", "display_name": "Pace", "link": "https://stackoverflow.com/users/202694/pace"}, "is_accepted": false, "score": 2, "last_activity_date": 1567034824, "creation_date": 1567034824, "answer_id": 57701170, "question_id": 57700502, "link": "https://stackoverflow.com/questions/57700502/observables-inside-of-tap-complete/57701170#57701170", "title": "Observables inside of tap() complete", "body": "<p>Yes, RxJS will run the piped operators in order.  As long as the tap operators are synchronous they will complete before the map operator is run.  If they do anything asynchronous they will not.</p>\n"}], "owner": {"reputation": 10809, "user_id": 149358, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/b1e45f43831a8a7d53b102b495db1dab?s=128&d=identicon&r=PG", "display_name": "Darthg8r", "link": "https://stackoverflow.com/users/149358/darthg8r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2315, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1567080014, "creation_date": 1567029258, "question_id": 57700502, "link": "https://stackoverflow.com/questions/57700502/observables-inside-of-tap-complete", "title": "Observables inside of tap() complete", "body": "<p>If I use the tap rxjs operator on an observable to call another observable, can I guarantee that it completes before the rest of the pipe?</p>\n\n<p>The idea here is to have a service make an http call to the backend, if it's a good login, create a cookie, then return a mapped  response to the consuming component.  I want to make sure the cookie is added before continuing to make sure there are no race conditions.</p>\n\n<pre><code>import { of, Observable } from 'rxjs';\nimport { map, tap } from 'rxjs/operators';\n\n\nconst httpObservable = loginAccount('fsdfds', 'fdsfsd');\n\nhttpObservable.subscribe(x =&gt; {\n    console.log(x);\n});\n\n\n\nfunction loginAccount(username, password): Observable&lt;any&gt; {\n    const httpResponse = of({ loggedIn: false, data: 'faketokenfrombackend' });\n\n    return httpResponse.pipe(\n        // Will this AWLAYS complete before map?\n        tap(resp =&gt; fakeLocalStorage('Do something with the result')),\n        // Will this AWLAYS complete before map?\n        tap(resp =&gt; fakeLocalStorage('Do something else with the result')),\n        map(resp =&gt; {\n            if (!resp.loggedIn)\n                return { success: false, message: 'really bad thing happened' };\n            else\n                return {success: true, message: 'WEEEEEE, it worked!'}\n        }));\n}\n\nfunction fakeLocalStorage(data: string): Observable&lt;boolean&gt; {\n    console.log('adding token to cookie');\n    return of(true);\n}\n</code></pre>\n\n<p>The above script outputs this to the console window as expected, but can I rely on it?</p>\n\n<pre><code>adding token to cookie\nadding token to cookie\n{success: false, message: \"really bad thing happened\"}\n</code></pre>\n"}, {"tags": ["javascript", "xml", "blogger"], "answers": [{"comments": [{"owner": {"reputation": 1936, "user_id": 1681191, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/junTk.jpg?s=128&g=1", "display_name": "Xarcell", "link": "https://stackoverflow.com/users/1681191/xarcell"}, "edited": false, "score": 0, "creation_date": 1567032418, "post_id": 57700543, "comment_id": 101845624, "body": "That was the first thing I tried, but then Blogger rejects the template saying: &quot;Error parsing XML, line 741, column 83: Open quote is expected for attribute &quot;href&quot; associated with an element type &quot;a&quot;.&quot;."}], "tags": [], "owner": {"reputation": 190, "user_id": 5733813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ht9WR.jpg?s=128&g=1", "display_name": "Francesco Alongi", "link": "https://stackoverflow.com/users/5733813/francesco-alongi"}, "is_accepted": false, "score": 0, "last_activity_date": 1567029553, "creation_date": 1567029553, "answer_id": 57700543, "question_id": 57700489, "link": "https://stackoverflow.com/questions/57700489/javascript-with-quote-causes-missing-argument-in-blogger-template/57700543#57700543", "title": "Javascript With Quote Causes Missing Argument In Blogger Template", "body": "<p>Maybe you just need to escape the double quotes, try this:</p>\n\n<pre><code>&lt;script&gt;\n  $(document).ready(function() {\n    $('#article-sidebar-tabbed-archive-gadget').prepend('&lt;nav&gt;&lt;a href=\\\"#\\\"&gt;Tags&lt;/a&gt;&lt;nav&gt;');\n  });\n&lt;/script&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 249, "user_id": 3992860, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/65ywo.jpg?s=128&g=1", "display_name": "Osvaldo Correia", "link": "https://stackoverflow.com/users/3992860/osvaldo-correia"}, "is_accepted": true, "score": 1, "last_activity_date": 1567039880, "last_edit_date": 1567039880, "creation_date": 1567039262, "answer_id": 57701592, "question_id": 57700489, "link": "https://stackoverflow.com/questions/57700489/javascript-with-quote-causes-missing-argument-in-blogger-template/57701592#57701592", "title": "Javascript With Quote Causes Missing Argument In Blogger Template", "body": "<p>Unless the code is inside an HTML/Javascript widget or inside a post, try like this:</p>\n\n<pre><code>    &lt;script&gt;\n// &lt;![CDATA[\n      $(document).ready(function() {\n        $('#article-sidebar-tabbed-archive-gadget').prepend('&lt;nav&gt;&lt;a href=\"#\"&gt;Tags&lt;/a&gt;&lt;/nav&gt;');\n      });\n// ]]&gt;\n    &lt;/script&gt;\n</code></pre>\n\n<p>The reason is that Blogger has a way to mess some javascript coding unless you wrap it inside the CDATA.\nA bit of trial an error for me to learn that.\nOr maybe you just need to escape the all a element like this:</p>\n\n<p>Anyway, I tested you code inside a new blogger post and it works fine. So, if I had to guess, the solutions I mention should work...</p>\n"}], "owner": {"reputation": 1936, "user_id": 1681191, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/junTk.jpg?s=128&g=1", "display_name": "Xarcell", "link": "https://stackoverflow.com/users/1681191/xarcell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 57701592, "answer_count": 2, "score": 0, "last_activity_date": 1567039880, "creation_date": 1567029187, "last_edit_date": 1567036134, "question_id": 57700489, "link": "https://stackoverflow.com/questions/57700489/javascript-with-quote-causes-missing-argument-in-blogger-template", "title": "Javascript With Quote Causes Missing Argument In Blogger Template", "body": "<p>When I use the following code, it works fine:</p>\n\n<pre><code>    &lt;script&gt;\n      $(document).ready(function() {\n        $('#article-sidebar-tabbed-archive-gadget').prepend('&lt;nav&gt;&lt;/nav&gt;');\n      });\n    &lt;/script&gt;\n</code></pre>\n\n<p>However, if I use any kind of quotes, I get the following error:</p>\n\n<blockquote>\n  <p>Uncaught SyntaxError: missing ) after argument list</p>\n</blockquote>\n\n<p>Example of the code used that causes the error:</p>\n\n<pre><code>    &lt;script&gt;\n      $(document).ready(function() {\n        $('#article-sidebar-tabbed-archive-gadget').prepend('&lt;nav&gt;&lt;a href=\"#\"&gt;Tags&lt;/a&gt;&lt;/nav&gt;');\n      });\n    &lt;/script&gt;\n</code></pre>\n\n<p>What causes the error and how can I fix it?</p>\n"}, {"tags": ["javascript", "arrow-functions"], "comments": [{"owner": {"reputation": 8659, "user_id": 756566, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/0d46603fb8d0a3a068ff4875b9c74421?s=128&d=identicon&r=PG", "display_name": "Steven Matthews", "link": "https://stackoverflow.com/users/756566/steven-matthews"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1567029338, "post_id": 57700475, "comment_id": 101844971, "body": "As I said, I am extending an open source library. I do not know why the original author did this."}, {"owner": {"reputation": 8659, "user_id": 756566, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/0d46603fb8d0a3a068ff4875b9c74421?s=128&d=identicon&r=PG", "display_name": "Steven Matthews", "link": "https://stackoverflow.com/users/756566/steven-matthews"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1567029469, "post_id": 57700475, "comment_id": 101845011, "body": "As far as I can tell, it shouldn&#39;t cause any issue for withX() to just return a value."}, {"owner": {"reputation": 123667, "user_id": 257182, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f2c683e7dc0c4d4bcc790f87eaa67301?s=128&d=identicon&r=PG", "display_name": "RobG", "link": "https://stackoverflow.com/users/257182/robg"}, "edited": false, "score": 0, "creation_date": 1567030534, "post_id": 57700475, "comment_id": 101845250, "body": "<i>withX</i> is supposed to return a function, so returning some other value means callers will try to call that non\u2013function, with obvious results."}, {"owner": {"reputation": 8659, "user_id": 756566, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/0d46603fb8d0a3a068ff4875b9c74421?s=128&d=identicon&r=PG", "display_name": "Steven Matthews", "link": "https://stackoverflow.com/users/756566/steven-matthews"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1567030787, "post_id": 57700475, "comment_id": 101845291, "body": "@Carcigenicate Why did you delete your answer? I feel it was pretty close to what I needed?"}], "answers": [{"comments": [{"owner": {"reputation": 8659, "user_id": 756566, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/0d46603fb8d0a3a068ff4875b9c74421?s=128&d=identicon&r=PG", "display_name": "Steven Matthews", "link": "https://stackoverflow.com/users/756566/steven-matthews"}, "edited": false, "score": 0, "creation_date": 1567030729, "post_id": 57700569, "comment_id": 101845282, "body": "This is not what I want. I just want to return the value from withX. I do not want any additional behavior inside withX"}], "tags": [], "owner": {"reputation": 661, "user_id": 7623407, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209740955735539/picture?type=large", "display_name": "R10t--", "link": "https://stackoverflow.com/users/7623407/r10t"}, "is_accepted": false, "score": -1, "last_activity_date": 1567029730, "creation_date": 1567029730, "answer_id": 57700569, "question_id": 57700475, "link": "https://stackoverflow.com/questions/57700475/trying-to-understand-javascript-arrow-functions/57700569#57700569", "title": "Trying to understand Javascript arrow functions", "body": "<p>An arrow function looks like this:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>(arguments) =&gt; { function }\n// OR\n(arguments) =&gt; returnStatement\n</code></pre>\n\n<p>and translates to</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>name(arguments) {\n    function\n}\n// OR\nname(arguments) {\n    return returnStatement\n}\n</code></pre>\n\n<p>The only difference is that arrow functions don't have a name. Thus, in the first line,</p>\n\n<pre><code>export const withX = fn =&gt; e =&gt; fn(getEvent(e).pageX);\nexport const getEvent = e =&gt; (e.touches ? e.touches[0] : e);\n</code></pre>\n\n<p>is the same as:</p>\n\n<pre><code>function withX(e) {\n    // As the comments state, I'm not sure why this is recursive...\n    return withX(getEvent(e).pageX);\n}\n\nfunction getEvent(e) {\n    return (e.touches ? e.touches[0] : e);\n}\n</code></pre>\n\n<p>To do what you want you should be able to do:</p>\n\n<pre><code>function onDragStart() {\n   let startX = withX(function(start) {\n       if (this.state.swiped) return;\n       this.setState({ start, pristine: false, moving: true });\n   });\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 76753, "user_id": 1026459, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/pv5mS.png?s=128&g=1", "display_name": "Travis J", "link": "https://stackoverflow.com/users/1026459/travis-j"}, "is_accepted": true, "score": 0, "last_activity_date": 1567032199, "last_edit_date": 1567032199, "creation_date": 1567031054, "answer_id": 57700757, "question_id": 57700475, "link": "https://stackoverflow.com/questions/57700475/trying-to-understand-javascript-arrow-functions/57700757#57700757", "title": "Trying to understand Javascript arrow functions", "body": "<p>Arrow functions are just syntactic sugar for shorthand functions. As a result of being shorthand, they also come with some small limitations such as <code>this</code> binding.</p>\n\n<p>If you are struggling with them, the first thing to do mentally is to rearrange the arrow function into its normal function form so that it may be easier to visualize. As you progress using them this should just become second nature.</p>\n\n<pre><code>export const withX = fn =&gt; e =&gt; fn(getEvent(e).pageX);\nexport const getEvent = e =&gt; (e.touches ? e.touches[0] : e);\n\n// Note here that the withX function is actually returning a function that\n// is expecting to be called with e as the argument (e generally being an event)\nfunction withX(fn){\n    return function(e){\n        return fn(getEvent(e).pageX);\n    };\n}\n\n// This function seems to return the first touch event (generally related to converting\n// click events for mobile)\nfunction getEvent(e){\n    if(e.touches) return e.touches[0];\n    return e;\n}\n</code></pre>\n\n<p>Now that you have seen this conversion, hopefully it makes more sense with how to incorporate in other classical implementations that you are more familiar with.</p>\n\n<p>For example, in the demo you provide,</p>\n\n<pre><code>onDragStart = withX(start =&gt; {\n    if (this.state.swiped) return;\n\n    this.setState({ start, pristine: false, moving: true });\n});\n</code></pre>\n\n<p>would then need to convert to</p>\n\n<pre><code>var onDragStart = withX(function(start){\n    if(this.state.swiped) return;\n\n    this.setState({ start, pristine: false, moving: true });\n}.bind(this));\n</code></pre>\n\n<p>The <code>.bind(this)</code> is there because inside of the function being sent, a new this binding will be created. However, since arrow functions do not do that (as part of their syntactic sugar) it wasn't originally required.</p>\n\n<p>In this code conversion, it should also be more clear that <code>start</code> is an injected value, and according to the above translation, you can see that start is the pageX value being injected into the callback function. As <code>start</code> is scoped to the inner function during injection, it would need to be extracted from the inner scope. </p>\n\n<p>Also, if you look at the above translation, you can see that the value returned from the arrow function is the value returned from the callback function. The callback function fn is injected with the start value, and as a result, returning the start injected value from the callback function fn will return that value at the end of the call.</p>\n\n<p>Option 1: directly return the value you want in the original implementation</p>\n\n<pre><code>onDragStart = withX(start =&gt; {\n  if (this.state.swiped) return;\n\n  this.setState({ start, pristine: false, moving: true });\n\n  // instead of onDragStart being undefined, it will now hold the start variable\n  return start;\n});\n</code></pre>\n\n<p>Option 2: store the variable during implementation</p>\n\n<pre><code>var startX;\nonDragStart = withX(start =&gt; {\n  if (this.state.swiped) return;\n\n  this.setState({ start, pristine: false, moving: true });\n\n  // now, assuming state.swiped was true, startX will hold the pageX value\n  // onDragStart will still end up being undefined in this implementation\n  startX = start;\n});\n</code></pre>\n\n<p>Option 3: convert one of these versions to a normal function syntax and/or use a different data structure for storage.</p>\n"}], "owner": {"reputation": 8659, "user_id": 756566, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/0d46603fb8d0a3a068ff4875b9c74421?s=128&d=identicon&r=PG", "display_name": "Steven Matthews", "link": "https://stackoverflow.com/users/756566/steven-matthews"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 57700757, "answer_count": 2, "score": 1, "last_activity_date": 1567032199, "creation_date": 1567029071, "last_edit_date": 1567031106, "question_id": 57700475, "link": "https://stackoverflow.com/questions/57700475/trying-to-understand-javascript-arrow-functions", "title": "Trying to understand Javascript arrow functions", "body": "<p>So I've got an open source library I am trying to extend.</p>\n\n<p>It has the following values:</p>\n\n<pre><code>export const withX = fn =&gt; e =&gt; fn(getEvent(e).pageX);\nexport const getEvent = e =&gt; (e.touches ? e.touches[0] : e);\n</code></pre>\n\n<p>and inside a class, <strong>there is an implementation of how the original author intended it to work</strong>:</p>\n\n<pre><code>...\n\n  onDragStart = withX(start =&gt; {\n    if (this.state.swiped) return;\n\n    this.setState({ start, pristine: false, moving: true });\n  });\n</code></pre>\n\n<p>I want to change it to something like this (pseudocode):</p>\n\n<pre><code>onDragStart() {\nlet startX = withX(return start);\n}\n</code></pre>\n\n<p>But I'm not entirely sure how to do it.</p>\n\n<p>When I try something like this:</p>\n\n<pre><code>let startX = withX();\n</code></pre>\n\n<p>or this:</p>\n\n<pre><code>let startX = withX(start =&gt; startX);\n</code></pre>\n\n<p>All I get is the actual function return.</p>\n\n<p>Can anyone explain arrow functions enough to me that I get what's going on here? Is there any way to get the start value here?</p>\n\n<p>One of the answers that was deleted had the following solution:</p>\n\n<pre><code>  onDragStart(event) {\n    let startX = withX(_ =&gt; startX)(event);\n    console.log(startX);\n  }\n</code></pre>\n\n<p>Unfortunately, this lead to <code>undefined</code></p>\n"}, {"tags": ["javascript", "safari", "local-storage", "broadcast-channel"], "answers": [{"comments": [{"owner": {"reputation": 832, "user_id": 23854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6820267a371ccb01829a87a1197f4675?s=128&d=identicon&r=PG", "display_name": "Ryan Watkins", "link": "https://stackoverflow.com/users/23854/ryan-watkins"}, "edited": false, "score": 2, "creation_date": 1571759578, "post_id": 57964685, "comment_id": 103344067, "body": "Note that <a href=\"https://github.com/pubkey/broadcast-channel\" rel=\"nofollow noreferrer\">github.com/pubkey/broadcast-channel</a> only works if the windows to communicate are top level in Safari, but not if one window is an iframe.  As Safari doesnt support native BroadcastChannel, it falls back to localStorage. When localStorage is used in an iframe its bound not to just the context of the current domain, but &quot;double keyed&quot; to that domain + window.top domain."}, {"owner": {"reputation": 2584, "user_id": 4282290, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/0dcf0428224de68aed11402603144e6a?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Haley", "link": "https://stackoverflow.com/users/4282290/nicholas-haley"}, "edited": false, "score": 2, "creation_date": 1579105986, "post_id": 57964685, "comment_id": 105657589, "body": "<a href=\"https://github.com/pubkey/broadcast-channel\" rel=\"nofollow noreferrer\">github.com/pubkey/broadcast-channel</a> reverts to localStorage when needed, so no need to use an additional library"}, {"owner": {"reputation": 339, "user_id": 11991371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dcdeebc7064c2f7cf142ea8d936ee8d?s=128&d=identicon&r=PG&f=1", "display_name": "Roobot", "link": "https://stackoverflow.com/users/11991371/roobot"}, "reply_to_user": {"reputation": 2584, "user_id": 4282290, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/0dcf0428224de68aed11402603144e6a?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Haley", "link": "https://stackoverflow.com/users/4282290/nicholas-haley"}, "edited": false, "score": 0, "creation_date": 1579195700, "post_id": 57964685, "comment_id": 105693734, "body": "@NicholasHaley I believe I was trying to use the browser-native BroadcastChannel wherever possible.  The way I&#39;ve done it, between the two plugins, it basically uses native BroadcastChannel first, then falls back to a localStorage-based solution, then falls back to an indexDB-based solution."}, {"owner": {"reputation": 2584, "user_id": 4282290, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/0dcf0428224de68aed11402603144e6a?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Haley", "link": "https://stackoverflow.com/users/4282290/nicholas-haley"}, "edited": false, "score": 1, "creation_date": 1579203773, "post_id": 57964685, "comment_id": 105697494, "body": "@Roobot I have a project where I need to do something similar. The &quot;broadcast-channel&quot; lib is able is most cases to find the fallback (either localStorage or IndexedDB) in case native Broadcast Channel support is not available.  If you need even more control (as I did) in your project, the second parameter takes an object where you can specify the type.   To be clear, github.com/pubkey/broadcast-channe will use native BroadcastChannel where-ever possible. Might simplify your code.   See: <a href=\"https://github.com/pubkey/broadcast-channel#set-options-when-creating-a-channel-optional\" rel=\"nofollow noreferrer\">github.com/pubkey/&hellip;</a>"}, {"owner": {"reputation": 339, "user_id": 11991371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dcdeebc7064c2f7cf142ea8d936ee8d?s=128&d=identicon&r=PG&f=1", "display_name": "Roobot", "link": "https://stackoverflow.com/users/11991371/roobot"}, "reply_to_user": {"reputation": 2584, "user_id": 4282290, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/0dcf0428224de68aed11402603144e6a?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Haley", "link": "https://stackoverflow.com/users/4282290/nicholas-haley"}, "edited": false, "score": 2, "creation_date": 1579212691, "post_id": 57964685, "comment_id": 105701191, "body": "@NicholasHaley Oh, interesting!  I guess I never saw that part of the doc.  I saw it said &quot;This behaves similar to the BroadcastChannel API&quot; and assumed it didn&#39;t actually use the native API at all.  I don&#39;t have time to play with it, but this could potentially be the real answer to my original question, then."}, {"owner": {"reputation": 390, "user_id": 472804, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/dxWOL.jpg?s=128&g=1", "display_name": "retrovertigo", "link": "https://stackoverflow.com/users/472804/retrovertigo"}, "edited": false, "score": 0, "creation_date": 1618208995, "post_id": 57964685, "comment_id": 118522705, "body": "It seems either of the two libraries can be used by itself, <a href=\"https://github.com/jcubic/sysend.js\" rel=\"nofollow noreferrer\">github.com/jcubic/sysend.js</a> also including the fallback for Safari and IE11"}], "tags": [], "owner": {"reputation": 339, "user_id": 11991371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dcdeebc7064c2f7cf142ea8d936ee8d?s=128&d=identicon&r=PG&f=1", "display_name": "Roobot", "link": "https://stackoverflow.com/users/11991371/roobot"}, "is_accepted": false, "score": 9, "last_activity_date": 1568669580, "creation_date": 1568669580, "answer_id": 57964685, "question_id": 57700474, "link": "https://stackoverflow.com/questions/57700474/how-can-i-use-the-broadcastchannel-api-or-something-similar-in-safari-10/57964685#57964685", "title": "How can I use the BroadcastChannel API or something similar in Safari 10+?", "body": "<p>I found a workaround, but I'll leave this question open because I'd still love to see a better answer.</p>\n\n<p>As a last resort, I ended up toggling between two different ways of performing the messaging, depending on browser.</p>\n\n<p>Basically, if it's Safari I use <a href=\"https://github.com/pubkey/broadcast-channel\" rel=\"noreferrer\">https://github.com/pubkey/broadcast-channel</a> (you can get the minified vanilla JS version from <a href=\"https://github.com/pubkey/broadcast-channel/blob/master/dist/lib/browser.min.js\" rel=\"noreferrer\">https://github.com/pubkey/broadcast-channel/blob/master/dist/lib/browser.min.js</a>). This seems to work in all versions even when you have a <code>document.domain</code> set.  I think it uses indexDB in this case, which seems like total overkill, but I don't seem to have a choice.</p>\n\n<p>It also works in Safari private windows in newer versions of Safari.  I have try catches in place in all my script for older versions of Safari in private mode where it would otherwise throw errors.</p>\n\n<p>If it's not Safari, I use <a href=\"https://github.com/jcubic/sysend.js\" rel=\"noreferrer\">sysend.js</a> which uses <code>BroadcastChannel</code> by default and falls back to <code>localStorage</code> for cases like IE 11.</p>\n"}], "owner": {"reputation": 339, "user_id": 11991371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dcdeebc7064c2f7cf142ea8d936ee8d?s=128&d=identicon&r=PG&f=1", "display_name": "Roobot", "link": "https://stackoverflow.com/users/11991371/roobot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6161, "favorite_count": 1, "answer_count": 1, "score": 10, "last_activity_date": 1568669580, "creation_date": 1567029070, "last_edit_date": 1567036579, "question_id": 57700474, "link": "https://stackoverflow.com/questions/57700474/how-can-i-use-the-broadcastchannel-api-or-something-similar-in-safari-10", "title": "How can I use the BroadcastChannel API or something similar in Safari 10+?", "body": "<p><strong>Problem:</strong></p>\n\n<p>I need a client-side Javascript solution (jQuery is fine) where an event in one browser window/tab can be broadcast to other windows/tabs on the same domain.  For example, if a cart is updated in tab A, tabs B and C get notified so we can update some info on the page, or notify the user that page is stale, or something like that.</p>\n\n<p><strong>What I've tried:</strong></p>\n\n<p>The <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Broadcast_Channel_API\" rel=\"noreferrer\">BroadcastChannel API</a> fits my needs perfectly, but does not work in IE 11 or Safari.</p>\n\n<p>So I tried <a href=\"https://medium.com/@alex89x/communication-among-iframes-and-tabs-a-working-polyfill-for-broadcast-channel-api-f44d07dcf527\" rel=\"noreferrer\">this polyfill</a> so I could use the BroadcastChannel API everywhere.  It worked in IE, but not in Safari (I believe BroadcastChannel remained undefined).</p>\n\n<p>I then tried <a href=\"https://github.com/jcubic/sysend.js\" rel=\"noreferrer\">sysend.js</a> , which uses BroadCastChannel if it's available, otherwise fakes it using <code>localStorage</code>.  Their demo page works fine in Safari, but on my site, I found it worked in Safari 9, but not 10-12 (tested using BrowserStack and one real Mac running Safari 12).  Debugging their script, it seems the <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Window/storage_event\" rel=\"noreferrer\">storage event</a> that's supposed to fire when <code>localStorage</code> in a different tab is changed simply doesn't fire.  But this is actually only a problem <strong>when you have <code>document.domain</code> set</strong>, which I do.</p>\n\n<p>I believe this is the same as <a href=\"https://bugs.chromium.org/p/chromium/issues/detail?id=136356&amp;q=label%3AOWP-Standards-Compatibility&amp;colspec=ID%20Pri%20M%20Stars%20ReleaseBlock%20Cr%20Status%20Owner%20Summary%20OS%20Modified\" rel=\"noreferrer\">this old Chrome bug</a>.  But whereas Chrome had that issue from 2012-2017, Safari apparently introduced it around 2017?</p>\n\n<p>I haven't found anyone else discussing this bug in Safari, but I can prove this pretty easily.  Open two tabs that use the same <code>document.domain</code> value and run these scripts:</p>\n\n<p>Tab A:</p>\n\n<pre><code>$(window).on(\"storage\", function (e) {\n    alert('storage was modified');\n});\n</code></pre>\n\n<p>Tab B:</p>\n\n<pre><code>localStorage.setItem(\"test\", \"123\");\n</code></pre>\n\n<p>In Safari 9, Tab A will pop the alert.  In Safari 10+, it won't.</p>\n\n<p>If I remove the <code>document.domain</code>, it works.  Note that we are using <code>document.domain</code> on these pages, but they are actually on the same domain in this case.  However <code>document.domain</code> is needed for other scenarios across the site, so I can't remove it.</p>\n\n<p>I also tried looking at <a href=\"https://github.com/marcuswestin/store.js\" rel=\"noreferrer\">store.js</a>.  It has an event system, but it only seemed to work within the same tab (in any browser).  Unless I'm missing something.</p>\n\n<p><strong>So, is there any BroadcastChannel polyfill or similar library that actually works in Safari 10+ when you have a <code>document.domain</code> set?</strong>  Or any other way to do this?</p>\n\n<p>Notes:</p>\n\n<ul>\n<li>I'm aware that BroadcastChannel and the \"storage\" event for <code>localStorage</code> only fire for tabs <em>other</em> than the current one.  That is not my issue, and is actually desirable to me.</li>\n<li>I've also seen posts that make me believe an alternate solution relying on <code>localStorage</code> likely will not work in Private Browsing mode in Safari. <em>EDIT: It appears this was <a href=\"https://stackoverflow.com/a/51616249/11991371\">fixed in Safari 11</a> so it does work, but in my tests it didn't share localStorage with any other tabs, even other Private tabs in the same window. So that's not much help.</em>  Ideally, a solution would account for this as well, but at this point I'd be happy with anything that worked in Safari 10+ for me.  I did see an example in the <em>store.js</em> project where they said they <a href=\"https://github.com/marcuswestin/store.js/issues/156\" rel=\"noreferrer\">made it so it would fallback to cookies</a> in that case, so it sounds possible at least.</li>\n<li>I tried to think about other ways to do this with a <code>setInterval</code> that checks the <code>localStorage</code> for updates every few seconds or something.  Even in theory that seems really hacky and unreliable (how would you know when all pages have \"received\" the update so you can clear it out?).  And how would you know when to do it this hacky way instead of one of the preferred methods using <code>localStorage</code>?  Safari 10+ is going to report that it supports <code>localStorage</code> so you can't really feature detect it, right?  It \"supports\" it, it just doesn't work correctly.</li>\n</ul>\n"}, {"tags": ["javascript", "html", "reactjs"], "comments": [{"owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "edited": false, "score": 0, "creation_date": 1567049063, "post_id": 57700450, "comment_id": 101848528, "body": "what does the error log say?  <code>C:\\Users\\HAROON &amp; ABDULREHMAN\\AppData\\Roaming\\npm-cache\\_logs\\2019-08-28T21_27&zwnj;&#8203;_54_711Z-debug.log</code>"}], "answers": [{"tags": [], "owner": {"reputation": 370, "user_id": 4526617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3fc0643deb79dffedb7bf9dfdc9d9346?s=128&d=identicon&r=PG&f=1", "display_name": "Kavincat", "link": "https://stackoverflow.com/users/4526617/kavincat"}, "is_accepted": false, "score": 0, "last_activity_date": 1567030266, "creation_date": 1567030266, "answer_id": 57700650, "question_id": 57700450, "link": "https://stackoverflow.com/questions/57700450/i-am-trying-to-download-react-js-but-i-am-getting-this-error-again-and-again/57700650#57700650", "title": "I am trying to download React js, but I am getting this error again and again?", "body": "<p>After some research, I found this.</p>\n\n<p>I(tylerlaberge) ran into this exact issue as well and found that it is only present with react-scripts@3.0.0, downgrading to react-scripts@2.1.8 resolved the issue without needing to mess with environment variables.</p>\n\n<pre><code>create-react-app my-app\ncd my-app\nnpm install react-scripts@2.1.8\nnpm start\n</code></pre>\n\n<p><a href=\"https://github.com/facebook/create-react-app/issues/6985#issuecomment-490319841\" rel=\"nofollow noreferrer\">https://github.com/facebook/create-react-app/issues/6985#issuecomment-490319841</a></p>\n"}, {"tags": [], "owner": {"reputation": 463, "user_id": 9870276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4e4e2970fff62cb0dbe40a0b6858321?s=128&d=identicon&r=PG&f=1", "display_name": "tim", "link": "https://stackoverflow.com/users/9870276/tim"}, "is_accepted": false, "score": 0, "last_activity_date": 1567031285, "creation_date": 1567031285, "answer_id": 57700782, "question_id": 57700450, "link": "https://stackoverflow.com/questions/57700450/i-am-trying-to-download-react-js-but-i-am-getting-this-error-again-and-again/57700782#57700782", "title": "I am trying to download React js, but I am getting this error again and again?", "body": "<p>You should use <code>npx create-react-app appname</code> this is from react docs <a href=\"https://reactjs.org/docs/create-a-new-react-app.html\" rel=\"nofollow noreferrer\">https://reactjs.org/docs/create-a-new-react-app.html</a>. I use to have a lot of problems when I used <code>npm create-react-app</code>, they all went away when I stated using npx.</p>\n"}], "owner": {"reputation": 13, "user_id": 11416830, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LMWpHQFGkfQ/AAAAAAAAAAI/AAAAAAAAADc/886XP9QTRHs/photo.jpg?sz=128", "display_name": "Haroon Aftab", "link": "https://stackoverflow.com/users/11416830/haroon-aftab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1567031285, "creation_date": 1567028904, "question_id": 57700450, "link": "https://stackoverflow.com/questions/57700450/i-am-trying-to-download-react-js-but-i-am-getting-this-error-again-and-again", "title": "I am trying to download React js, but I am getting this error again and again?", "body": "<p>I am downloading react js with npm , but I am getting this error again and again. Can any give me solution.I have tried multiple times but it is still giving me same error.</p>\n\n<p>C:\\react\\todo>npm start</p>\n\n<pre><code>&gt; todo@0.1.0 start C:\\react\\todo\n&gt; react-scripts start\nStarting the development server...\n\nevents.js:180\n      throw er; // Unhandled 'error' event\n      ^\n\nError: spawn cmd ENOENT\n    at Process.ChildProcess._handle.onexit (internal/child_process.js:264:19)\n    at onErrorNT (internal/child_process.js:456:16)\n    at processTicksAndRejections (internal/process/task_queues.js:77:11)\nEmitted 'error' event at:\n    at Process.ChildProcess._handle.onexit (internal/child_process.js:270:12)\n    at onErrorNT (internal/child_process.js:456:16)\n    at processTicksAndRejections (internal/process/task_queues.js:77:11) {\n  errno: 'ENOENT',\n  code: 'ENOENT',\n  syscall: 'spawn cmd',\n  path: 'cmd',\n  spawnargs: [ '/c', 'start', '\"\"', '/b', 'http://localhost:3000/' ]\n}\nnpm ERR! code ELIFECYCLE\nnpm ERR! errno 1\nnpm ERR! todo@0.1.0 start: `react-scripts start`\nnpm ERR! Exit status 1\nnpm ERR!\nnpm ERR! Failed at the todo@0.1.0 start script.\nnpm ERR! This is probably not a problem with npm. There is likely additional logging output above.\n\nnpm ERR! A complete log of this run can be found in:\nnpm ERR!     C:\\Users\\HAROON &amp; ABDULREHMAN\\AppData\\Roaming\\npm-cache\\_logs\\2019-08-28T21_27_54_711Z-debug.log\n</code></pre>\n"}, {"tags": ["javascript", "timeline", "vis.js"], "answers": [{"comments": [{"owner": {"reputation": 4517, "user_id": 1286937, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b631d2f9dc7aeb3563f35c03f73db888?s=128&d=identicon&r=PG", "display_name": "Victor", "link": "https://stackoverflow.com/users/1286937/victor"}, "edited": false, "score": 0, "creation_date": 1572351366, "post_id": 58606306, "comment_id": 103525334, "body": "But I need the <code>maxHeight</code>. Removing the <code>maxHeight</code> the parent element or the whole page will have the scroll bar, not only the timeline."}], "tags": [], "owner": {"reputation": 1, "user_id": 2923421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/256c469dad50bcc26f2e9154d510ffc7?s=128&d=identicon&r=PG&f=1", "display_name": "user2923421", "link": "https://stackoverflow.com/users/2923421/user2923421"}, "is_accepted": false, "score": 0, "last_activity_date": 1572349938, "last_edit_date": 1572349938, "creation_date": 1572347434, "answer_id": 58606306, "question_id": 57700432, "link": "https://stackoverflow.com/questions/57700432/vis-js-timeline-with-verticalscroll-at-the-right-side/58606306#58606306", "title": "Vis.js Timeline with verticalScroll at the right side", "body": "<p>Remove the <code>maxHeight</code> property in the options, you will then see the scroll bar on the right side.</p>\n"}], "owner": {"reputation": 4517, "user_id": 1286937, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b631d2f9dc7aeb3563f35c03f73db888?s=128&d=identicon&r=PG", "display_name": "Victor", "link": "https://stackoverflow.com/users/1286937/victor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 445, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1575455365, "creation_date": 1567028790, "question_id": 57700432, "link": "https://stackoverflow.com/questions/57700432/vis-js-timeline-with-verticalscroll-at-the-right-side", "title": "Vis.js Timeline with verticalScroll at the right side", "body": "<p>I'm using the Vis.js timeline library with the option <code>verticalScroll: true</code>. I'm following this example: <a href=\"https://visjs.github.io/vis-timeline/examples/timeline/other/verticalScroll.html\" rel=\"nofollow noreferrer\">https://visjs.github.io/vis-timeline/examples/timeline/other/verticalScroll.html</a></p>\n\n<pre><code>  ...\n  var options = {\n    stack: true,\n    verticalScroll: true,\n    zoomKey: 'ctrlKey',\n    maxHeight: 200,\n    start: new Date(),\n    end: new Date(1000*60*60*24 + (new Date()).valueOf()),\n  };\n\n  // create a Timeline\n  var container1 = document.getElementById('mytimeline1');\n  timeline1 = new vis.Timeline(container1, items, groups, options);\n</code></pre>\n\n<p>I need to put the scroll bar at the right side. Is it possible?<br>\nIs there any configuration option to do this?</p>\n\n<p><a href=\"https://i.stack.imgur.com/GQ8q4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GQ8q4.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["javascript", "jquery"], "comments": [{"owner": {"reputation": 43836, "user_id": 5947043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jUK37.png?s=128&g=1", "display_name": "ADyson", "link": "https://stackoverflow.com/users/5947043/adyson"}, "edited": false, "score": 0, "creation_date": 1567028922, "post_id": 57700420, "comment_id": 101844863, "body": "Sounds like you want to empty <code>originalPokemonImgUrl</code> as well as pushing a new item into it?"}, {"owner": {"reputation": 13, "user_id": 11600685, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Bkwxzuo8JCY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfYW8_PdNSHPwmkcoticgbDXGiTrQ/mo/photo.jpg?sz=128", "display_name": "Tom", "link": "https://stackoverflow.com/users/11600685/tom"}, "reply_to_user": {"reputation": 43836, "user_id": 5947043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jUK37.png?s=128&g=1", "display_name": "ADyson", "link": "https://stackoverflow.com/users/5947043/adyson"}, "edited": false, "score": 0, "creation_date": 1567032894, "post_id": 57700420, "comment_id": 101845738, "body": "Basically I want to clear all the previous data when clicking on the button again and then execute all the functions again. So your idea could work. I haven&#39;t got it to work yet tho. Any suggestions?"}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 11600685, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Bkwxzuo8JCY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfYW8_PdNSHPwmkcoticgbDXGiTrQ/mo/photo.jpg?sz=128", "display_name": "Tom", "link": "https://stackoverflow.com/users/11600685/tom"}, "is_accepted": true, "score": 1, "last_activity_date": 1567034803, "creation_date": 1567034803, "answer_id": 57701167, "question_id": 57700420, "link": "https://stackoverflow.com/questions/57700420/clar-ajax-data-after-each-onclick-and-then-append-new-data/57701167#57701167", "title": "Clar Ajax data after each OnClick and then append new data", "body": "<p>I found the solution:</p>\n\n<p>Adding a clear function:</p>\n\n<pre><code>function clear() {\n    originalPokemonImgUrl = [];\n    duplicateAllPokemonImgUrl = [];\n    allPokemonImgUrl = [];\n    $('#output').empty();\n}\n</code></pre>\n\n<p>Then just call it:</p>\n\n<pre><code>$(document).on('click', '#easy', function() {\n    for (var cards = 0; cards &lt; easy; cards++) { \n        getData();\n    }\n\n    clear();\n    startGame();\n\n})\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11600685, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Bkwxzuo8JCY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfYW8_PdNSHPwmkcoticgbDXGiTrQ/mo/photo.jpg?sz=128", "display_name": "Tom", "link": "https://stackoverflow.com/users/11600685/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 57701167, "answer_count": 1, "score": 0, "last_activity_date": 1567050844, "creation_date": 1567028710, "last_edit_date": 1567050844, "question_id": 57700420, "link": "https://stackoverflow.com/questions/57700420/clar-ajax-data-after-each-onclick-and-then-append-new-data", "title": "Clar Ajax data after each OnClick and then append new data", "body": "<p>I'm doing a project for school. A memory game that uses the pok\u00e9API to get images.</p>\n\n<p>I have three buttons depending on the game level (easy, medium, hard) and it generates the amount of cards.</p>\n\n<p>When I click a button it generates the pictures but when I click it again it append the new data into the same selector. </p>\n\n<p>I have tried with: <code>$('#output').html('')</code>, <code>$('#output').append('')</code>, <code>$('#output').remove()</code>, <code>$('#output').empty()</code></p>\n\n<pre><code>// Settings for game level. Each integer represents number of cards * 2.\nlet easy = 4;\nlet medium = 6;\nlet hard = 8;\n\n// Arrays for PokemonImgUrl.\n\nlet originalPokemonImgUrl = [];\nlet duplicateAllPokemonImgUrl = [];\nlet allPokemonImgUrl = [];\n\n\n// Pok\u00e9API URL.\nconst pokemonDataUrl = 'https://pokeapi.co/api/v2/pokemon/';\n\n// This function creates a random number depending on the settings below. \nfunction randomNumber() {\n\n    // Settings for max randomnumbers starting from index 1.\n    let randomNumberMax = 500;\n    let fromIndex =  1;\n\n    // Math random function with values from randomnumbers.\n    return Math.floor(Math.random() * randomNumberMax) + fromIndex;\n}\n\n// Function for getting data from Pok\u00e9API.\nfunction getData() {\n    $.ajax ({ \n        type: 'GET',\n        url: pokemonDataUrl + randomNumber(), // Calling randomnnumber to get a random pok\u00e9mon.\n        success: function(pokemonData) {\n\n                var pokemonImgUrl = pokemonData.sprites.front_default; // Store and extract pokemon images.\n                originalPokemonImgUrl.push(pokemonImgUrl); // store ImagesURL to a global array called allPokemonImgUrl.\n\n        }\n\n    })\n}\n\n// Shuffle code from css-tricks.com.\nfunction Shuffle(cards) {\n    for(var j, x, i = cards.length; i; j = parseInt(Math.random() * i), x = cards[--i], cards[i] = cards[j], cards[j] = x);\n    return cards;\n}; \n\n// function iterates through allPokemonImgUrl array and outputs it into the DOM. \nfunction output() {\n\n    allPokemonImgUrl.forEach(function (i) {\n        $('#output').append('&lt;img src=\"'+ [i] +'\"&gt;');\n\n    }\n\n)}\n\n/* This function copies the array so that we always have two of the same cards. \nThen concat into a new array and shuffles it. After that it outputs the result.*/\nfunction startGame(){\n\n    setTimeout( function(){\n        duplicateAllPokemonImgUrl = originalPokemonImgUrl.slice();\n        }, 1000 );\n\n    setTimeout( function(){\n        allPokemonImgUrl = originalPokemonImgUrl.concat(duplicateAllPokemonImgUrl);\n        }, 1500 );\n\n    setTimeout( function(){\n        Shuffle(allPokemonImgUrl)\n        }, 2000 );\n\n    setTimeout( function(){\n        output();\n        }, 2500 );\n    }\n\n/* Events for clicking on game levels. It iterates to check how many cards it needs\nand calls the function getData accordingly. */\n\n$(document).on('click', '#easy', function() {\n    for (var cards = 0; cards &lt; easy; cards++) { \n        getData();\n    }\n\n    startGame();\n\n})\n\n$(document).on('click', '#medium', function() {\n    for (var cards = 0; cards &lt; medium; cards++) {\n        getData();\n    } \n\n    startGame();\n\n})\n\n$(document).on('click', '#hard', function() {\n    for (var cards = 0; cards &lt; hard; cards++) {\n        getData();\n    } \n\n    startGame();\n\n})\n</code></pre>\n\n<p>When I click a button I get the images as expected.</p>\n\n<p>But when I click it again it appends the new data after the old data. I want to remove the old ajax data first and then append the new data.</p>\n"}, {"tags": ["javascript", "pause", "rpgmakermv"], "comments": [{"owner": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1567028695, "post_id": 57700415, "comment_id": 101844794, "body": "You need to use <code>await</code>."}], "answers": [{"tags": [], "owner": {"reputation": 395, "user_id": 7061557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/202d8e456de564b67f897050b294eebe?s=128&d=identicon&r=PG&f=1", "display_name": "iams0nus", "link": "https://stackoverflow.com/users/7061557/iams0nus"}, "is_accepted": false, "score": 0, "last_activity_date": 1567029096, "creation_date": 1567029096, "answer_id": 57700479, "question_id": 57700415, "link": "https://stackoverflow.com/questions/57700415/is-there-a-sleep-wait/57700479#57700479", "title": "Is there a sleep/wait?", "body": "<p>you can use the <code>setTimeout</code> function to add a delay of 5 secs(5000 millisecs)</p>\n\n<pre><code>setTimeout(()=&gt; {your code here}, 5000);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1066, "user_id": 5383801, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F9ceh.jpg?s=128&g=1", "display_name": "Muhammad Iqbal", "link": "https://stackoverflow.com/users/5383801/muhammad-iqbal"}, "is_accepted": false, "score": 0, "last_activity_date": 1567029252, "creation_date": 1567029252, "answer_id": 57700500, "question_id": 57700415, "link": "https://stackoverflow.com/questions/57700415/is-there-a-sleep-wait/57700500#57700500", "title": "Is there a sleep/wait?", "body": "<pre><code>function wait(milliscond) {\n  return new Promise(resolve =&gt; setTimeout(resolve, milliscond));\n}\n\nvar min = 0;\nvar hour = 0;\nvar timer = true;\n\nalert(\"Testing Timer\");\n\n    do{\n        sec += 10; //Needs to pause for 5 secs after this line\n        await wait(5000);\n        console.log(sec);\n            if(sec &gt;= 60){\n                alert(\"It's \" + hour + \" : \" + min + \" : \" + sec);\n                min += 5;\n                sec = 0;\n                if(min &gt;= 60)\n                {\n                    hour += 1;\n                    min = 0;\n                }\n            }\n    }while(timer === true);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7388736, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sFC3vp5fWyg/AAAAAAAAAAI/AAAAAAAAABA/vkdTqx20t5s/photo.jpg?sz=128", "display_name": "Zacchary Sumrall", "link": "https://stackoverflow.com/users/7388736/zacchary-sumrall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1567029252, "creation_date": 1567028634, "question_id": 57700415, "link": "https://stackoverflow.com/questions/57700415/is-there-a-sleep-wait", "title": "Is there a sleep/wait?", "body": "<p>My objective is to test a timer to check and see if the idea will work before I implement it into my RPG Maker project. Originally, there's a building block method in the software to make the timer/clock, but I'm trying to move on from that and create a JavaScript code to do just that. Thing is, I need it to pause for a brief moment, so the timer doesn't break. It'll be a day/night cycle in the game.</p>\n\n<p>The test timer will be used to check and see if the idea works, and if not to debug. So far it works, but I am unable to pause it. </p>\n\n<pre><code>var min = 0;\nvar hour = 0;\nvar timer = true;\n\nalert(\"Testing Timer\");\n\n    do{\n        sec += 10; //Needs to pause for 5 secs after this line\n        console.log(sec);\n            if(sec &gt;= 60){\n                alert(\"It's \" + hour + \" : \" + min + \" : \" + sec);\n                min += 5;\n                sec = 0;\n                if(min &gt;= 60)\n                {\n                    hour += 1;\n                    min = 0;\n                }\n            }\n    }while(timer === true);```\n</code></pre>\n"}, {"tags": ["javascript", "html", "html5-audio", "audio-streaming", "web-audio-api"], "owner": {"reputation": 93, "user_id": 4520393, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VR4rSv2r9Y0/AAAAAAAAAAI/AAAAAAAAACM/5mH8DIpvelM/photo.jpg?sz=128", "display_name": "Yurii Kyparus", "link": "https://stackoverflow.com/users/4520393/yurii-kyparus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1567028214, "creation_date": 1567028214, "question_id": 57700359, "link": "https://stackoverflow.com/questions/57700359/hot-to-get-a-few-seconds-ahead-result-of-getbytetimedomaindata", "title": "Hot to get a few seconds ahead result of getByteTimeDomainData()?", "body": "<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/AnalyserNode/getByteTimeDomainData#Syntax\" rel=\"nofollow noreferrer\">getByteTimeDomainData</a> is used in Youtube player. \nIt returns the current waveform.\nI wonder if it is possible to get the waveform of the future moment?</p>\n\n<p>Usage example:</p>\n\n<pre><code>const audioCtx = new AudioContext();\nconst videoSrc = audioCtx.createMediaElementSource(video); // Youtube video\nconst analyser = audioCtx.createAnalyser();\nvideoSrc.connect(analyser);\nconst dataArray = new Uint8Array(analyser.fftSize); // Uint8Array should be the same length as the fftSize \nanalyser.getByteTimeDomainData(dataArray); // fill the Uint8Array with data returned from getByteTimeDomainData()\n</code></pre>\n\n<p><code>getByteTimeDomainData</code> - copies current waveform in <code>dataArray</code>.\nHow do I get the future waveform without changing Youtube <code>video.currentTime</code>?</p>\n"}, {"tags": ["javascript", "jquery"], "answers": [{"comments": [{"owner": {"reputation": 1193, "user_id": 8720421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58e5efd22e89df0cf3da81c53850dbfb?s=128&d=identicon&r=PG&f=1", "display_name": "thinkvantagedu", "link": "https://stackoverflow.com/users/8720421/thinkvantagedu"}, "edited": false, "score": 0, "creation_date": 1567029973, "post_id": 57700372, "comment_id": 101845120, "body": "If there are different conditions, can I do it like this:  <code>$(&quot;#id1, #id2, #id3&quot;)[condition1, condition2, condition3]();</code>, where condition1 is for id1, condition2 is for id2, condition3 is for id3?"}, {"owner": {"reputation": 429, "user_id": 6088389, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh5.googleusercontent.com/-u05duG3GNJQ/AAAAAAAAAAI/AAAAAAAAAyY/VgqF3wpkKms/photo.jpg?sz=128", "display_name": "Juniuz", "link": "https://stackoverflow.com/users/6088389/juniuz"}, "reply_to_user": {"reputation": 1193, "user_id": 8720421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58e5efd22e89df0cf3da81c53850dbfb?s=128&d=identicon&r=PG&f=1", "display_name": "thinkvantagedu", "link": "https://stackoverflow.com/users/8720421/thinkvantagedu"}, "edited": false, "score": 0, "creation_date": 1567032919, "post_id": 57700372, "comment_id": 101845744, "body": "@thinkvantagedu I think that&#39;s not possible. <code>#id1</code> is your selector, and <code>condition1</code> is a like an input parameter which varies based on input.  You cannot just simply map those two items directly."}], "tags": [], "owner": {"reputation": 38349, "user_id": 10221765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e762fef8d87381d5cbd58d851d1b816?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Bashford", "link": "https://stackoverflow.com/users/10221765/jack-bashford"}, "is_accepted": true, "score": 2, "last_activity_date": 1567028317, "creation_date": 1567028317, "answer_id": 57700372, "question_id": 57700349, "link": "https://stackoverflow.com/questions/57700349/how-to-use-string-show-to-trigger-jquery-show-function/57700372#57700372", "title": "How to use string &#39;show&#39; to trigger jquery show function?", "body": "<p>Yes - use bracket notation like so:</p>\n\n<pre><code>var showTest = condition =&gt; {\n    $(\"#id1\")[condition]();\n    $(\"#id2\")[condition]();\n    $(\"#id3\")[condition]();\n};\n</code></pre>\n\n<p>And make it more concise using one call to <code>$</code>:</p>\n\n<pre><code>var showTest = condition =&gt; {\n    $(\"#id1, #id2, #id3\")[condition]();\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 429, "user_id": 6088389, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh5.googleusercontent.com/-u05duG3GNJQ/AAAAAAAAAAI/AAAAAAAAAyY/VgqF3wpkKms/photo.jpg?sz=128", "display_name": "Juniuz", "link": "https://stackoverflow.com/users/6088389/juniuz"}, "is_accepted": false, "score": 0, "last_activity_date": 1567033796, "creation_date": 1567033796, "answer_id": 57701055, "question_id": 57700349, "link": "https://stackoverflow.com/questions/57700349/how-to-use-string-show-to-trigger-jquery-show-function/57701055#57701055", "title": "How to use string &#39;show&#39; to trigger jquery show function?", "body": "<p>If you want to map your condition to your element, you can try the code below as an example.</p>\n\n<pre><code>    var conditionArray = [condition1, condition2, condition3];\n    var [conditionA, conditionB, conditionC] = conditionArray;\n\n    var showTest1 = $(\"#id1\")[conditionA]();\n    var showTest2 = $(\"#id2\")[conditionB]();\n    var showTest3 = $(\"#id3\")[conditionC]();\n</code></pre>\n\n<p>This approach is using array destructuring which unpacked the items from the array and assign to a distinct variables.</p>\n"}], "owner": {"reputation": 1193, "user_id": 8720421, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58e5efd22e89df0cf3da81c53850dbfb?s=128&d=identicon&r=PG&f=1", "display_name": "thinkvantagedu", "link": "https://stackoverflow.com/users/8720421/thinkvantagedu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 57700372, "answer_count": 2, "score": 0, "last_activity_date": 1567033796, "creation_date": 1567028163, "last_edit_date": 1567031864, "question_id": 57700349, "link": "https://stackoverflow.com/questions/57700349/how-to-use-string-show-to-trigger-jquery-show-function", "title": "How to use string &#39;show&#39; to trigger jquery show function?", "body": "<p>I have a function like this:</p>\n\n<pre><code>var showTest = (condition) =&gt; {\n    if (condition === 'show') {\n        $('#id1').show();\n        $('#id2').show();\n        $('#id3').show();\n    }\n    else if (condition === 'hide') {\n        $('#id1').hide();\n        $('#id2').hide();\n        $('#id3').hide();\n    }\n};\n</code></pre>\n\n<p>It works great. But if the argument 'condition' is always 'show' and 'hide', I feel that the if else is not needed as the function is just show() and hide()? So does jQuery allow me to do this and get rid of if else?</p>\n\n<pre><code>var showTest = (condition) =&gt; {\n    $('#id1').condition();\n    $('#id2').condition();\n    $('#id3').condition();\n}\n</code></pre>\n"}, {"tags": ["javascript", "source-maps"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567028458, "post_id": 57700328, "comment_id": 101844718, "body": "Yes, did you try it?"}, {"owner": {"reputation": 6206, "user_id": 2155605, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/aJYNR.jpg?s=128&g=1", "display_name": "Ogen", "link": "https://stackoverflow.com/users/2155605/ogen"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567042180, "post_id": 57700328, "comment_id": 101847349, "body": "No, I have not."}], "owner": {"reputation": 6206, "user_id": 2155605, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/aJYNR.jpg?s=128&g=1", "display_name": "Ogen", "link": "https://stackoverflow.com/users/2155605/ogen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 18, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567029193, "creation_date": 1567028043, "question_id": 57700328, "link": "https://stackoverflow.com/questions/57700328/how-to-debug-obfuscated-frontend-code-using-remote-source-maps", "title": "How to debug obfuscated frontend code using remote source maps", "body": "<p>I have a requirement that says unobfuscated code is not allowed to be served to clients in production. Shipping source maps with the code allows the client to see the unobfuscated code, which violates the requirement.</p>\n\n<p>Is there still a way to utilise source maps for debugging purposes while not shipping the source maps to production? So for example, is it possible to host my source maps on my own server, then when I am debugging the site, I can have it retrieve the source maps from my server or something like that?</p>\n"}, {"tags": ["javascript", "reactjs", "class", "ecmascript-6", "ecmascript-7"], "comments": [{"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1567028123, "post_id": 57700261, "comment_id": 101844611, "body": "It sounds like you&#39;re asking about dependency injection in React. I&#39;d do some searching on that. It appears as though it&#39;s fallen out of favor though, so YMMV."}], "answers": [{"tags": [], "owner": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "is_accepted": false, "score": -1, "last_activity_date": 1567027966, "creation_date": 1567027966, "answer_id": 57700313, "question_id": 57700261, "link": "https://stackoverflow.com/questions/57700261/how-can-i-instantiate-an-object-based-on-a-string-value/57700313#57700313", "title": "How can I instantiate an object based on a string value", "body": "<p>Do the same thing you're already doing with <code>apiTypes[apiType]</code>: access the object that holds that class/constructor function.</p>\n\n<p>E.g. if it's a class that you defined in <code>window</code> scope:</p>\n\n<pre><code>const ObjectType = window[`${capitalizedServiceType}ApiService`];\n</code></pre>\n\n<p>And then <em>remember to verify that's defined</em> because you have no guarantee your string actually maps to a function or class:</p>\n\n<pre><code>if (ObjectType) {\n  apiTypes[apiType] = new ObjectType(token);\n} else {\n  console.error(`Api service for \"${capitalizedServiceType}\" does not exist.`);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1543, "user_id": 10106101, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155941262973655/picture?type=large", "display_name": "Travis James", "link": "https://stackoverflow.com/users/10106101/travis-james"}, "edited": false, "score": 0, "creation_date": 1567028531, "post_id": 57700341, "comment_id": 101844747, "body": "Awesome this is perfect and exactly what I needed.  Thank you!"}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 4, "last_activity_date": 1567028125, "creation_date": 1567028125, "answer_id": 57700341, "question_id": 57700261, "link": "https://stackoverflow.com/questions/57700261/how-can-i-instantiate-an-object-based-on-a-string-value/57700341#57700341", "title": "How can I instantiate an object based on a string value", "body": "<p>Rather than trying to instantiate a class from a string name (with some complex capitalization/concatenation logic), create an object that maps <code>apiType</code> names directly to their corresponding classes:</p>\n\n<pre><code>import StoryApiService from './story'\nimport AssignmentApiService from './assignment'\n\nconst services = {\n    story: StoryApiService,\n    assignment: AssignmentApiService,\n}\nconst serviceInstances = {\n    story: null,\n    assignment: null,\n}\nlet token\n\nconst getApi = (newToken, apiType = 'story') =&gt; {\n    const isNewToken = newToken !== token\n    const shouldCreateService = !serviceInstances[apiType] || isNewToken\n\n    if (shouldCreateService) {\n        token = newToken\n        serviceInstances[apiType] = new services[apiType](token)\n    }\n    return serviceInstances[apiType]\n}\n</code></pre>\n"}], "owner": {"reputation": 1543, "user_id": 10106101, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155941262973655/picture?type=large", "display_name": "Travis James", "link": "https://stackoverflow.com/users/10106101/travis-james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 57700341, "answer_count": 2, "score": 1, "last_activity_date": 1567028125, "creation_date": 1567027612, "question_id": 57700261, "link": "https://stackoverflow.com/questions/57700261/how-can-i-instantiate-an-object-based-on-a-string-value", "title": "How can I instantiate an object based on a string value", "body": "<p>I have a string that I want to use in an API factory to instantiate the correct object from a class.  Here is the code:</p>\n\n<pre><code>import StoryApiService from './story'\nimport AssignmentApiService from './assignment'\n\nlet apiTypes = {\n    story: null,\n    assignment: null\n}\nlet token\n\nconst getApi = (newToken, apiType = 'story') =&gt; {\n    const isNewToken = newToken =&gt; newToken !== token\n    const shouldCreateService = !apiTypes[apiType] || isNewToken\n\n    if( shouldCreateService ) {\n        const capitalizedServiceType = apiType.charAt(0).toUpperCase() + apiType.slice(1)\n\n        // this line is what I need help with\n        apiTypes[apiType] = new `${capitalizedServiceType}ApiService`(token)\n    }\n    return apiTypes[apiType]\n}\n</code></pre>\n\n<p>So basically depending on the <code>apiType</code> argument that is passed in I want to instantiate a new object from the correct class.  I want to avoid using <code>if/else</code> and <code>switch</code> statements if possible because I have a bunch of different apiServices that I will use and I think this way will be cleaner if its possible.</p>\n\n<p>I know the line in the code above won't work as written but its pseudo code to show the effect I want to achieve.</p>\n"}, {"tags": ["javascript", "c#", "asp.net", "webforms"], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 10199890, "user_type": "registered", "profile_image": "https://graph.facebook.com/2177525202481838/picture?type=large", "display_name": "Kevin Sun", "link": "https://stackoverflow.com/users/10199890/kevin-sun"}, "edited": false, "score": 0, "creation_date": 1567099967, "post_id": 57702597, "comment_id": 101872366, "body": "Hi DoubleJ, thanks for your reply. Unfortunately this didn&#39;t work for me -- is it because I have a placeholder inside an update panel that the control is added to? Currently, when I add the control, and it is out of view, it will just add it to the bottom of the scroll window, but still not pan to it. Any ideas?"}], "tags": [], "owner": {"reputation": 311, "user_id": 1867157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0469e387e57d644f6bb01fa3e4f5fe96?s=128&d=identicon&r=PG", "display_name": "DoubleJ", "link": "https://stackoverflow.com/users/1867157/doublej"}, "is_accepted": false, "score": 0, "last_activity_date": 1567049272, "creation_date": 1567049272, "answer_id": 57702597, "question_id": 57700246, "link": "https://stackoverflow.com/questions/57700246/auto-scroll-to-dynamically-generated-control-in-asp-net/57702597#57702597", "title": "auto scroll to dynamically generated control in ASP.NET", "body": "<p>You need to call it on the client side. Add this AddStreamButton_Click instead of the focus code:</p>\n\n<pre><code>ScriptManager.RegisterClientScriptBlock(this, GetType(), \"none\", \"&lt;script&gt;scrollToControl('\" + userControl.ID.ToString() + \"');&lt;/script&gt;\", false);\n</code></pre>\n\n<p>That will call your scrollToControl method you already have defined.</p>\n"}], "owner": {"reputation": 71, "user_id": 10199890, "user_type": "registered", "profile_image": "https://graph.facebook.com/2177525202481838/picture?type=large", "display_name": "Kevin Sun", "link": "https://stackoverflow.com/users/10199890/kevin-sun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567049272, "creation_date": 1567027525, "question_id": 57700246, "link": "https://stackoverflow.com/questions/57700246/auto-scroll-to-dynamically-generated-control-in-asp-net", "title": "auto scroll to dynamically generated control in ASP.NET", "body": "<p>So I have an button that generates a control when clicked. It's nested inside an update panel inside a div, that will create a scroll bar when it overflows in the y-direction. Currently, when I click the button and it's already overflowing, the control will be created, though it will not scroll to it. So it seems like nothing happened at all. I want the scroll bar to roll down to where the control is created so it is more user-friendly.</p>\n\n<p>I've tried Page.SetFocus(control) and control.Focus(), but both don't work. I've look up other posts but they don't quite solve the problem as my generated control is inside an updatePanel.</p>\n\n<pre><code>&lt;!-- add button and dynamic control area --&gt;\n            &lt;asp:Button ID=\"addStreamButton\" runat=\"server\" Text=\"+\" OnClick=\"AddStreamButton_Click\" Width=\"30px\" Height=\"30px\" Tooltip=\"add new stream\"/&gt;\n            &lt;div class=\"col-sm-6\"&gt;\n                &lt;asp:UpdatePanel runat=\"server\" ID=\"updatePanelPlaceholder\" ChildrenAsTriggers=\"false\" UpdateMode=\"Conditional\"\n                    style=\"width:650px; height:550px; overflow-y:auto; overflow-x:hidden\"&gt;\n                    &lt;ContentTemplate&gt;\n                        &lt;div class=\"row\"&gt;\n                            &lt;asp:PlaceHolder ID=\"ph1\" runat=\"server\"&gt;&lt;/asp:PlaceHolder&gt;\n                        &lt;/div&gt;\n                    &lt;/ContentTemplate&gt;\n                    &lt;Triggers&gt;\n                        &lt;asp:AsyncPostBackTrigger ControlID=\"addStreamButton\" EventName=\"Click\" /&gt;\n                    &lt;/Triggers&gt;\n                &lt;/asp:UpdatePanel&gt;\n\n                &lt;script type=\"text/html\"&gt;\n                    function scrollToControl(controlName) {\n                        document.getElementById(controlName).scrollIntoView();\n                    }\n                &lt;/script&gt;\n            &lt;/div&gt;\n</code></pre>\n\n<pre><code>protected void AddStreamButton_Click(object sender, EventArgs e)\n        {\n            var userControl = (DataStreamSelector)Page.LoadControl(\"~/DataStreamSelector.ascx\");\n            userControl.ID = \"DynamicControl\" + ControlCount;\n            ControlCount++;\n            ph1.Controls.Add(userControl);\n\n            //Page.Focus(userControl);\n            Page.SetFocus(userControl);\n        }\n</code></pre>\n"}, {"tags": ["javascript", "throttling"], "comments": [{"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 1, "creation_date": 1567027770, "post_id": 57700180, "comment_id": 101844489, "body": "Do <code>A</code> and <code>B</code> have return values? Are <code>A</code> and <code>B</code> synchronous or asynchronous? What is the context in which they&#39;re being called? These points should be addressed in order to provide a good answer to this question, preferably with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 2, "creation_date": 1567028780, "post_id": 57700180, "comment_id": 101844821, "body": "Rather than throttle them, you need to make sure that the updates on firebase are performed atomically. To do that, you might need to create a cloud function that performs the atomic operation using a <a href=\"https://firebase.google.com/docs/firestore/manage-data/transactions\" rel=\"nofollow noreferrer\">transaction</a>."}, {"owner": {"reputation": 4740, "user_id": 1233305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6svay.jpg?s=128&g=1", "display_name": "David784", "link": "https://stackoverflow.com/users/1233305/david784"}, "edited": false, "score": 1, "creation_date": 1567028901, "post_id": 57700180, "comment_id": 101844857, "body": "Usually a throttle/debounce like this involves a variable scoped so that both functions can see it, and then using a <code>setTimeout</code> in both functions to reset the variable when it&#39;s &quot;safe&quot; to allow the action(s) again. Like the code snippet in <a href=\"https://levelup.gitconnected.com/debounce-in-javascript-improve-your-applications-performance-5b01855e086\" rel=\"nofollow noreferrer\">this example</a>"}, {"owner": {"reputation": 76753, "user_id": 1026459, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/pv5mS.png?s=128&g=1", "display_name": "Travis J", "link": "https://stackoverflow.com/users/1026459/travis-j"}, "edited": false, "score": 1, "creation_date": 1567029101, "post_id": 57700180, "comment_id": 101844914, "body": "There are a large number of ways to accomplish this, but they are all dependent on the existing design pattern you are implementing as well as dependent on the freedom of modification you have for the executing functions and their scopes. Without knowing the current design pattern, the freedom of modification, or the general scope of the functions, this question is not possible to answer without a large amount of conjecture."}, {"owner": {"reputation": 1136, "user_id": 8434189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gawtn.jpg?s=128&g=1", "display_name": "mahmoudafer", "link": "https://stackoverflow.com/users/8434189/mahmoudafer"}, "reply_to_user": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1567029185, "post_id": 57700180, "comment_id": 101844930, "body": "@PatrickRoberts i already tried that, but then I realized the increment depends on local data too not just what&#39;s in the database, so I&#39;m using firebase increment, which is atomic, but the local variables aren&#39;t changing fast enough that&#39;s why i need throttling"}, {"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1567029455, "post_id": 57700180, "comment_id": 101845005, "body": "&quot;depends on local data&quot;? Why do <code>like</code> and <code>unlike</code> functions depend on local data? They shouldn&#39;t. Either your example is not comprehensive enough to clarify exactly what you need, or your current issues / limitations are self-inflicted due to a bad approach."}, {"owner": {"reputation": 1136, "user_id": 8434189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gawtn.jpg?s=128&g=1", "display_name": "mahmoudafer", "link": "https://stackoverflow.com/users/8434189/mahmoudafer"}, "reply_to_user": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1567029880, "post_id": 57700180, "comment_id": 101845103, "body": "@PatrickRoberts it&#39;s not just a simple liking, but it summarizes what the function does, no need to include details of no use in this question"}, {"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1567030258, "post_id": 57700180, "comment_id": 101845177, "body": "If you re-read the feedback given by me and Travis, I think you&#39;ll find the details you&#39;ve omitted are not in fact &quot;of no use in this question&quot;. As it currently stands, it will not be possible to provide a valid answer without making several assumptions about your implementation that you&#39;ve failed to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for."}], "answers": [{"tags": [], "owner": {"reputation": 1136, "user_id": 8434189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gawtn.jpg?s=128&g=1", "display_name": "mahmoudafer", "link": "https://stackoverflow.com/users/8434189/mahmoudafer"}, "is_accepted": true, "score": 1, "last_activity_date": 1567184258, "creation_date": 1567184258, "answer_id": 57730633, "question_id": 57700180, "link": "https://stackoverflow.com/questions/57700180/how-can-i-limit-multiple-functions-with-the-same-throttle/57730633#57730633", "title": "How can I limit multiple functions with the same throttle?", "body": "<p>what i did:</p>\n\n<pre><code>doubleThrottle = (action) =&gt; {\n    if (action)\n        return this.A()\n    return this.B()\n}\n\nlet throttledUpdate = throttle(this.doubleThrottle, 1000, {'trailing': false})\n</code></pre>\n"}], "owner": {"reputation": 1136, "user_id": 8434189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gawtn.jpg?s=128&g=1", "display_name": "mahmoudafer", "link": "https://stackoverflow.com/users/8434189/mahmoudafer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "closed_date": 1567193702, "accepted_answer_id": 57730633, "answer_count": 1, "score": 3, "last_activity_date": 1567193619, "creation_date": 1567027159, "last_edit_date": 1567193619, "question_id": 57700180, "link": "https://stackoverflow.com/questions/57700180/how-can-i-limit-multiple-functions-with-the-same-throttle", "closed_reason": "Needs more focus", "title": "How can I limit multiple functions with the same throttle?", "body": "<p>I want to limit the execution of <strong>two different functions</strong> with the <strong>same throttle</strong>.</p>\n\n<p>Let's say I have a function called A and another one called B.</p>\n\n<p>I want to limit the number of executions of both of them so that if <strong>A</strong> is called at time 0, and the limit is 1000, <strong>B</strong> shouldn't get executed until after 1000ms has passed</p>\n"}, {"tags": ["javascript", "arrays", "matrix", "refactoring"], "comments": [{"owner": {"reputation": 26112, "user_id": 8526705, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/buwQ5.jpg?s=128&g=1", "display_name": "Dacre Denny", "link": "https://stackoverflow.com/users/8526705/dacre-denny"}, "edited": false, "score": 2, "creation_date": 1567027647, "post_id": 57700165, "comment_id": 101844457, "body": "does <code>this.rows == this.matrix.length</code> ? and does <code>this.cols == this.matrix[].length</code>? i assumed the matrix arrays rectangular (ie all rows have same column count)?"}, {"owner": {"reputation": 89, "user_id": 6268118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/056aff29351e2832e50bec749c1b8710?s=128&d=identicon&r=PG&f=1", "display_name": "Eternal", "link": "https://stackoverflow.com/users/6268118/eternal"}, "reply_to_user": {"reputation": 26112, "user_id": 8526705, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/buwQ5.jpg?s=128&g=1", "display_name": "Dacre Denny", "link": "https://stackoverflow.com/users/8526705/dacre-denny"}, "edited": false, "score": 0, "creation_date": 1567027985, "post_id": 57700165, "comment_id": 101844562, "body": "Yes, they are rectangular."}, {"owner": {"reputation": 26112, "user_id": 8526705, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/buwQ5.jpg?s=128&g=1", "display_name": "Dacre Denny", "link": "https://stackoverflow.com/users/8526705/dacre-denny"}, "edited": false, "score": 0, "creation_date": 1567028044, "post_id": 57700165, "comment_id": 101844585, "body": "how does <code>this.rows</code> / <code>this.cols</code> relate to the dimensions of <code>this.matrix</code> ?"}, {"owner": {"reputation": 89, "user_id": 6268118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/056aff29351e2832e50bec749c1b8710?s=128&d=identicon&r=PG&f=1", "display_name": "Eternal", "link": "https://stackoverflow.com/users/6268118/eternal"}, "reply_to_user": {"reputation": 26112, "user_id": 8526705, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/buwQ5.jpg?s=128&g=1", "display_name": "Dacre Denny", "link": "https://stackoverflow.com/users/8526705/dacre-denny"}, "edited": false, "score": 0, "creation_date": 1567028532, "post_id": 57700165, "comment_id": 101844749, "body": "this is just a property of the object. Allowed me to avoid these lengthy this.matrix[i].length. Makes it clean eg. when checking for the validity of matrix multiplication."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1567027699, "creation_date": 1567027699, "answer_id": 57700269, "question_id": 57700165, "link": "https://stackoverflow.com/questions/57700165/how-can-i-refactor-a-lot-of-similar-nested-loops-in-my-matrix-class/57700269#57700269", "title": "How can I refactor a lot of similar nested loops in my Matrix class?", "body": "<p>Use a higher-order function, which receives a function to be called on each element and returns the new value to replace it.</p>\n\n<p>In my example below, the callback function also receives the indexes, so it can use them to reference another matrix, which is needed in the <code>add</code> method.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>updateEach(callback) {\r\n  for (let i = 0; i &lt; this.rows; i++) {\r\n    for (let j = 0; j &lt; this.cols; j++) {\r\n      this.matrix[i][j] = callback(this.matrix[i][j], i, j);\r\n    }\r\n  }\r\n}\r\n\r\nrandomize() {\r\n  this.updateEach(() =&gt; Math.random());\r\n}\r\n\r\nadd(n) {\r\n  if (n instanceof Matrix) {\r\n    this.updateEach((oldval, i, j) =&gt; oldval + n.matrix[i][j]);\r\n  } else {\r\n    this.updateEach((oldval) =&gt; oldval + n)\r\n  }\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 89, "user_id": 6268118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/056aff29351e2832e50bec749c1b8710?s=128&d=identicon&r=PG&f=1", "display_name": "Eternal", "link": "https://stackoverflow.com/users/6268118/eternal"}, "edited": false, "score": 0, "creation_date": 1567033923, "post_id": 57700334, "comment_id": 101845909, "body": "Thanks. This solution seems interesting, but Barmars solution will be of more use to me. Might come back to this solution in later projects."}], "tags": [], "owner": {"reputation": 528, "user_id": 11937915, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UP_TnGhuCjs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcGK0FOLWu6xmGTWYczi7IkdlaWMg/photo.jpg?sz=128", "display_name": "Michael", "link": "https://stackoverflow.com/users/11937915/michael"}, "is_accepted": false, "score": 2, "last_activity_date": 1567028794, "last_edit_date": 1567028794, "creation_date": 1567028074, "answer_id": 57700334, "question_id": 57700165, "link": "https://stackoverflow.com/questions/57700165/how-can-i-refactor-a-lot-of-similar-nested-loops-in-my-matrix-class/57700334#57700334", "title": "How can I refactor a lot of similar nested loops in my Matrix class?", "body": "<p>Similar to Barmar's answer just with a different flavor:</p>\n\n<pre><code>// Specify the limits for i, j, and then pass in a function\n// which takes the index parameters.\nfunction loop(iMax, jMax, fn) {\n    for (let i = 0; i &lt; iMax; i++) {\n        for (let j = 0; j &lt; jMax; j++) {\n            fn(i, j);\n        }\n    }\n}\n\nfunction randomize() {\n    loop(this.rows, this.columns, (i, j) =&gt; {\n        this.matrix[i][j] = Math.random();\n    });\n}\n\nfunction add(n) {\n    if (n instanceof Matrix) {\n      loop(this.matrix.length, this.matrix[0].length, (i, j) =&gt; {\n          this.matrix[i][j] += n[i][j];\n      });\n    }\n}\n</code></pre>\n\n<p>This more generic approach allows you to do whatever you want with the loop indices. You <em>could</em> do reassignment, or you could log out the matrix values, or assign them to a new matrix.</p>\n\n<pre><code>loop(this.rows, this.cols, (i, j) =&gt; {\n  console.log(this.matrix[i][j]);\n});\n</code></pre>\n\n<pre><code>loop(this.rows, this.cols, (i, j) =&gt; {\n    that.matrix = this.matrix[i][j];\n});\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 528, "user_id": 11937915, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UP_TnGhuCjs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcGK0FOLWu6xmGTWYczi7IkdlaWMg/photo.jpg?sz=128", "display_name": "Michael", "link": "https://stackoverflow.com/users/11937915/michael"}, "edited": false, "score": 1, "creation_date": 1567028609, "post_id": 57700352, "comment_id": 101844770, "body": "These functions do not work. In &quot;loop&quot; the arguments are not passed correctly to func. In randomize, you don&#39;t actually do a reassignment of any value in the matrix. Add reassigns the column index that&#39;s passed in, not the matrix value."}, {"owner": {"reputation": 32101, "user_id": 8404453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/616cb81bb678bb5b17869511b2a41367?s=128&d=identicon&r=PG&f=1", "display_name": "TheMaster", "link": "https://stackoverflow.com/users/8404453/themaster"}, "reply_to_user": {"reputation": 528, "user_id": 11937915, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UP_TnGhuCjs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcGK0FOLWu6xmGTWYczi7IkdlaWMg/photo.jpg?sz=128", "display_name": "Michael", "link": "https://stackoverflow.com/users/11937915/michael"}, "edited": false, "score": 0, "creation_date": 1567101216, "post_id": 57700352, "comment_id": 101872877, "body": "@Michael Thanks. I believe I fixed it."}], "tags": [], "owner": {"reputation": 32101, "user_id": 8404453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/616cb81bb678bb5b17869511b2a41367?s=128&d=identicon&r=PG&f=1", "display_name": "TheMaster", "link": "https://stackoverflow.com/users/8404453/themaster"}, "is_accepted": false, "score": 1, "last_activity_date": 1567282886, "last_edit_date": 1567282886, "creation_date": 1567028170, "answer_id": 57700352, "question_id": 57700165, "link": "https://stackoverflow.com/questions/57700165/how-can-i-refactor-a-lot-of-similar-nested-loops-in-my-matrix-class/57700352#57700352", "title": "How can I refactor a lot of similar nested loops in my Matrix class?", "body": "<p>You can use a function.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>class Matrix {\r\n  constructor(arr) {\r\n    this.matrix = arr;\r\n    this.rows = arr.length;\r\n    this.cols = arr[0].length;\r\n  }\r\n  loop(func, arr2, arr2Recurse) {\r\n    this.matrix = this.matrix.map((row, i) =&gt;\r\n      row.map((col, j) =&gt; func(col, arr2Recurse ? arr2.matrix[i][j] : arr2))\r\n    );\r\n  }\r\n  randomize() {\r\n    this.loop(() =&gt; Math.random());\r\n  }\r\n  add(n) {\r\n    this.loop((el, nEl) =&gt; (el += nEl), n, n instanceof Matrix);\r\n  }\r\n}\r\nvar a = new Matrix([[1, 2], [3, 4]]);\r\nvar b = new Matrix([[5, 6], [7, 8]]);\r\na.add(b);\r\nconsole.log(a);\r\na.add(1);\r\nconsole.log(a);\r\na.randomize();\r\nconsole.log(a);</code></pre>\r\n</div>\r\n</div>\r\n </p>\n"}], "owner": {"reputation": 89, "user_id": 6268118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/056aff29351e2832e50bec749c1b8710?s=128&d=identicon&r=PG&f=1", "display_name": "Eternal", "link": "https://stackoverflow.com/users/6268118/eternal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 1, "accepted_answer_id": 57700269, "answer_count": 3, "score": 0, "last_activity_date": 1567282886, "creation_date": 1567027082, "question_id": 57700165, "link": "https://stackoverflow.com/questions/57700165/how-can-i-refactor-a-lot-of-similar-nested-loops-in-my-matrix-class", "title": "How can I refactor a lot of similar nested loops in my Matrix class?", "body": "<p>How can I properly refactor my Matrix class where nearly all the methods I use in this class have double nested loops which all look almost exactly the same?</p>\n\n<p>Here are two of many methods that I wish to include in this class. It's going to be unnecessarily long if I don't find a better way to deal with this. \n<div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>randomize() {\r\n    for (let i = 0; i &lt; this.rows; i++) {\r\n        for (let j = 0; j &lt; this.cols; j++) {\r\n            this.matrix[i][j] = Math.random();\r\n        }\r\n    }\r\n}\r\n\r\nadd(n) {\r\n    if (n instanceof Matrix) {\r\n        for (let i = 0; i &lt; this.matrix.length; i++) {\r\n            for (let j = 0; j &lt; this.matrix[i].length; j++) {\r\n                this.matrix[i][j] += n.matrix[i][j];\r\n            }\r\n        }\r\n    } else {\r\n        for (let i = 0; i &lt; this.matrix.length; i++) {\r\n            for (let j = 0; j &lt; this.matrix[i].length; j++) {\r\n                this.matrix[i][j] += n;\r\n            }\r\n        }\r\n    }\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["javascript", "arrays", "comparison"], "comments": [{"owner": {"reputation": 10904, "user_id": 3499115, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/c593739208b1ddfe3eaae322ceecf5ce?s=128&d=identicon&r=PG", "display_name": "JBaczuk", "link": "https://stackoverflow.com/users/3499115/jbaczuk"}, "edited": false, "score": 0, "creation_date": 1567027029, "post_id": 57700112, "comment_id": 101844274, "body": "looks like this might could use some recursion. also it would help if you had a working example: <a href=\"https://meta.stackoverflow.com/questions/358992/ive-been-told-to-create-a-runnable-example-with-stack-snippets-how-do-i-do\" title=\"ive been told to create a runnable example with stack snippets how do i do\">meta.stackoverflow.com/questions/358992/&hellip;</a>"}, {"owner": {"reputation": 1698, "user_id": 9342544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28d5bc1e5d8cc97ca08957458ae8a61?s=128&d=identicon&r=PG&f=1", "display_name": "Neel Rathod", "link": "https://stackoverflow.com/users/9342544/neel-rathod"}, "edited": false, "score": 0, "creation_date": 1567028468, "post_id": 57700112, "comment_id": 101844725, "body": "Based on which similar keys/values of <code>arra1</code> and <code>arr2</code> you want to remove"}, {"owner": {"reputation": 19, "user_id": 11972107, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-J4GwY9zzhe0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc3LHKwmA5n8bvLLFgBg49WTZNuHw/photo.jpg?sz=128", "display_name": "Rodrigo Spinelli", "link": "https://stackoverflow.com/users/11972107/rodrigo-spinelli"}, "edited": false, "score": 0, "creation_date": 1567038217, "post_id": 57700112, "comment_id": 101846656, "body": "both arrays has the same properties, i need to remove the property that not match"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9501528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0348af8c1aece04761ec1ee3a177ccb?s=128&d=identicon&r=PG&f=1", "display_name": "Mohit Nagori", "link": "https://stackoverflow.com/users/9501528/mohit-nagori"}, "is_accepted": false, "score": 0, "last_activity_date": 1567361290, "last_edit_date": 1567361290, "creation_date": 1567359037, "answer_id": 57748115, "question_id": 57700112, "link": "https://stackoverflow.com/questions/57700112/compare-array-of-objects-and-remove-specific-item/57748115#57748115", "title": "compare array of objects and remove specific item", "body": "<p>Need to map array after filter. You can do like this and can also add \"prop === 'submenu'\" for specifically checking submenu inner array only.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var arr1 = [\r\n  {\r\n    name: \"will\",\r\n    value: \"1\"\r\n  },\r\n  {\r\n    name: \"nelson\",\r\n    value: \"3\"\r\n  }\r\n];\r\n\r\nvar arr2 = [\r\n  {\r\n    name: \"will\",\r\n    value: 1,\r\n    submenu: [\r\n        {\r\n          name: \"ralph\",\r\n          value: 2    \r\n        },\r\n        // {\r\n        //   name: \"nelson\",\r\n        //   value: 3\r\n        // }\r\n    ]\r\n  }\r\n];\r\n\r\nfunction filterComparador(arrSecundario) {\r\n  return (arrAtual) =&gt; {\r\n    return arrSecundario.filter((other) =&gt; {\r\n      return other.value == arrAtual.value;\r\n    }).length != 0;\r\n  };\r\n}\r\n\r\nfunction mapComparador(arrSecundario) {\r\n  return (arrAtual) =&gt; {\r\n    Object.keys(arrAtual).forEach((prop) =&gt; {\r\n       if (Array.isArray(arrAtual[prop])) {\r\n          let propValue =  arrAtual[prop].filter(this.filterComparador(arrSecundario));\r\n          if (propValue.length &gt; 0) {\r\n            arrAtual[prop] = propValue.map(this.mapComparador(this.arrSecundario));\r\n          } else {\r\n            delete arrAtual[prop]; \r\n          }           \r\n       }\r\n    });\r\n    return arrAtual;\r\n  };\r\n}\r\n\r\nvar manipulatedArray = this.arr2.filter(this.filterComparador(this.arr1))\r\n    .map(this.mapComparador(this.arr1));\r\n\r\nconsole.log(manipulatedArray);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 19, "user_id": 11972107, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-J4GwY9zzhe0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc3LHKwmA5n8bvLLFgBg49WTZNuHw/photo.jpg?sz=128", "display_name": "Rodrigo Spinelli", "link": "https://stackoverflow.com/users/11972107/rodrigo-spinelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 426, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1567573196, "creation_date": 1567026836, "last_edit_date": 1567573196, "question_id": 57700112, "link": "https://stackoverflow.com/questions/57700112/compare-array-of-objects-and-remove-specific-item", "title": "compare array of objects and remove specific item", "body": "<pre><code>arr1 = [\n    {\n        name: \"will\",\n        value: \"1\"\n    },\n    {\n        name: \"nelson\",\n        value: \"3\"\n    }\n];\n</code></pre>\n\n<p>and</p>\n\n<pre><code>arr2 = [\n    {\n        name: \"will\",\n        value: 1,\n        submenu: [\n            {\n                name: \"ralph\",\n                value: 2    \n            }\n        ]\n        }\n]\n</code></pre>\n\n<p>then remove ralph from the second array. i already created a function who do it but just check the first element and not verify the submenu.</p>\n\n<pre><code>comparador(arrSecundario) {\n    return (arrAtual) =&gt; {\n      return arrSecundario.filter(function (other) {\n        return other.value === arrAtual.value;\n      }).length !== 0;\n    };\n  }\n\nthis.arr2.filter(this.comparador(this.arr1));\n</code></pre>\n"}, {"tags": ["javascript", "typescript", "pdfmake"], "comments": [{"owner": {"reputation": 458, "user_id": 1800371, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Sd5S.jpg?s=128&g=1", "display_name": "Dieter Casier", "link": "https://stackoverflow.com/users/1800371/dieter-casier"}, "edited": false, "score": 0, "creation_date": 1567696300, "post_id": 57700106, "comment_id": 102048439, "body": "You set the text of the table body to data.text, data.status and this.getFeedback(data) but where does this &quot;data&quot; coming from?"}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 8564621, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SumQgL0TaOk/AAAAAAAAAAI/AAAAAAAAGWk/CexagO-CMV0/photo.jpg?sz=128", "display_name": "Alexander Valach", "link": "https://stackoverflow.com/users/8564621/alexander-valach"}, "is_accepted": false, "score": 0, "last_activity_date": 1569503864, "creation_date": 1569503864, "answer_id": 58117699, "question_id": 57700106, "link": "https://stackoverflow.com/questions/57700106/pdfmake-table-dynamic-data/58117699#58117699", "title": "PDFmake table dynamic data", "body": "<p>I am not sure if this was your goal. </p>\n\n<p>I have rewritten your code and created JSON structure (const phases) for PDF and then dynamically filled table.body with JSON array consisting of rows. I did not try to run it, so there might be some compile errors. Hope this helps!</p>\n\n<pre><code>getData(installation, request) {\n  const phases = {\n    layout: {\n      hLineWidth: function(i, node) {\n        return 0.45;\n      },\n      vLineWidth: function(i, node) {\n       return 0.45;\n      }\n    },\n    table: {\n     dontBreakRows: true,\n     widths: [\"30%\", \"10%\", \"60%\"],\n     body: []\n    }\n   }\n\n   installation.phases.forEach(value =&gt; {\n    phases.table.body.push([\n     { text: value.text, style: 'cell' },\n     { text: value.status, },\n     { text: this.getFeedback(value), style: 'commentCell' }\n    ])\n   })\n\n  console.log(phases)\n  return phases\n}\n</code></pre>\n"}], "owner": {"reputation": 313, "user_id": 10977489, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VYgSiO1T7FU/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNag-6LuBk0iE0BtJ-AR9T76XQS0A/mo/photo.jpg?sz=128", "display_name": "Muhammad Ali", "link": "https://stackoverflow.com/users/10977489/muhammad-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1330, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1569503864, "creation_date": 1567026811, "question_id": 57700106, "link": "https://stackoverflow.com/questions/57700106/pdfmake-table-dynamic-data", "title": "PDFmake table dynamic data", "body": "<p>I am using PDFmake to create pdf file, I want to add dynamic data in the table butt the body display empty.</p>\n\n<p>this one works when I print [0] but I have lots of dynamic data</p>\n\n<pre><code> getData(installation, request) {\n          const phases = {\n            layout: {\n              hLineWidth: function(i, node) {\n                return 0.45;\n              },\n              vLineWidth: function(i, node) {\n                return 0.45;\n              }\n            },\n            table: {\n              dontBreakRows: true,\n              widths: [\"30%\", \"10%\", \"60%\"],\n              body: [\n                [\n\n                  {\n                    text: installation.phases[0].text,\n                    style: \"cell\"\n                  },\n                  { text: installation.phases[0].status},\n                  {\n                    text: this.getFeedback(installation.phases[0]),\n                    style: \"commentCell\"\n                  }\n                ],\n              ]\n            }\n          };\n          console.log(phases);\n          return phases;\n      }\n</code></pre>\n\n<p>but If I use this one it create table body empty.</p>\n\n<pre><code>  getData(installation, request) {\ninstallation.phase.forEach(value =&gt;{\n          const phases = {\n            layout: {\n              hLineWidth: function(i, node) {\n                return 0.45;\n              },\n              vLineWidth: function(i, node) {\n                return 0.45;\n              }\n            },\n            table: {\n              dontBreakRows: true,\n              widths: [\"30%\", \"10%\", \"60%\"],\n              body: [\n                [\n\n                  {\n                    text: data.text,\n                    style: \"cell\"\n                  },\n                  { text: data.status},\n                  {\n                    text: this.getFeedback(data),\n                    style: \"commentCell\"\n                  }\n                ],\n              ]\n            }\n          };\n          console.log(phases);\n          return phases;\n});\n}\n</code></pre>\n\n<p>What could be wrong here? I have tried but cannot find solution</p>\n"}, {"tags": ["javascript", "json", "regex", "string"], "comments": [{"owner": {"reputation": 1698, "user_id": 9342544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28d5bc1e5d8cc97ca08957458ae8a61?s=128&d=identicon&r=PG&f=1", "display_name": "Neel Rathod", "link": "https://stackoverflow.com/users/9342544/neel-rathod"}, "edited": false, "score": 3, "creation_date": 1567026743, "post_id": 57700051, "comment_id": 101844162, "body": "Did you tried <code>JSON.parse()</code> ?"}, {"owner": {"reputation": 3281, "user_id": 8411406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03feb45788181f61b08fdb8b5d26968e?s=128&d=identicon&r=PG", "display_name": "Turtlefight", "link": "https://stackoverflow.com/users/8411406/turtlefight"}, "edited": false, "score": 0, "creation_date": 1567026749, "post_id": 57700051, "comment_id": 101844165, "body": "try <a href=\"https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse\" rel=\"nofollow noreferrer\"><code>JSON.parse</code></a>, e.g. <code>let parsed = JSON.parse(response.data); console.log(parsed);</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1567027778, "post_id": 57700051, "comment_id": 101844491, "body": "Dump a before and after literal strings on your question, them maybe some answers will appear, who knows. Magic this is not !!!!!"}, {"owner": {"reputation": 16007, "user_id": 8291949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7pBo.gif?s=128&g=1", "display_name": "wp78de", "link": "https://stackoverflow.com/users/8291949/wp78de"}, "edited": false, "score": 0, "creation_date": 1567030388, "post_id": 57700051, "comment_id": 101845220, "body": "Agreed, parse it; just wondering - as simple as <a href=\"https://regex101.com/r/CxSyeY/1\" rel=\"nofollow noreferrer\"><code>{\\\\&quot;\\\\&quot;(?!:)</code></a> this?"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 10943010, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ImUgFP-agM0/AAAAAAAAAAI/AAAAAAAAAQo/pn-peXKazh8/photo.jpg?sz=128", "display_name": "Carter", "link": "https://stackoverflow.com/users/10943010/carter"}, "edited": false, "score": 0, "creation_date": 1567091151, "post_id": 57700273, "comment_id": 101868297, "body": "The data can&#39;t be fixed as it is a census and for integrity it can not be changed. I&#39;ll look into the options thing though, thank you."}, {"owner": {"reputation": 113, "user_id": 7867773, "user_type": "registered", "profile_image": "https://graph.facebook.com/188160511693787/picture?type=large", "display_name": "Kote Isaev", "link": "https://stackoverflow.com/users/7867773/kote-isaev"}, "reply_to_user": {"reputation": 51, "user_id": 10943010, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ImUgFP-agM0/AAAAAAAAAAI/AAAAAAAAAQo/pn-peXKazh8/photo.jpg?sz=128", "display_name": "Carter", "link": "https://stackoverflow.com/users/10943010/carter"}, "edited": false, "score": 0, "creation_date": 1567108761, "post_id": 57700273, "comment_id": 101875736, "body": "Please keep updated on your issue - whether my advice helped to get it working, and if so, please mark my reply as an answer for question."}], "tags": [], "owner": {"reputation": 113, "user_id": 7867773, "user_type": "registered", "profile_image": "https://graph.facebook.com/188160511693787/picture?type=large", "display_name": "Kote Isaev", "link": "https://stackoverflow.com/users/7867773/kote-isaev"}, "is_accepted": false, "score": 0, "last_activity_date": 1567027734, "creation_date": 1567027734, "answer_id": 57700273, "question_id": 57700051, "link": "https://stackoverflow.com/questions/57700051/how-to-replace-characters-in-a-string-if-they-match-1-string-but-not-another-str/57700273#57700273", "title": "How to replace characters in a string if they match 1 string but not another string?", "body": "<p>I think this can be achieved by using the option when a function supplied to <code>someString.replace</code> instead of new value.\nThis function will get matched string as first parameter. So in your function you can check value to be replaced for match of second expression, and return incoming value unchanged if it matches your second expression.</p>\n\n<p>Take look for documentation and examples here: <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_function_as_a_parameter\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_function_as_a_parameter</a></p>\n\n<p>Note: If you have control over the source of data you parsing, it may require a patch. According to data samples you provide, it looks as that data source produces really broken JSON, like double quotes etc.</p>\n"}], "owner": {"reputation": 51, "user_id": 10943010, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ImUgFP-agM0/AAAAAAAAAAI/AAAAAAAAAQo/pn-peXKazh8/photo.jpg?sz=128", "display_name": "Carter", "link": "https://stackoverflow.com/users/10943010/carter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567027734, "creation_date": 1567026520, "question_id": 57700051, "link": "https://stackoverflow.com/questions/57700051/how-to-replace-characters-in-a-string-if-they-match-1-string-but-not-another-str", "title": "How to replace characters in a string if they match 1 string but not another string?", "body": "<p>I have two JSON values, I need JSON value A to be parsed at the same time value B is parsed without interfering with eachother, and still be able to be parsed.</p>\n\n<p>A \n<code>{\\\"\\\"Protestant\\\"\\\":[...]}]</code> \nafter parsing should be <code>{'\"Protestant\"':[...]}</code></p>\n\n<p>and B\n<code>{\\\"\\\":[...]]</code>\nafter parsing should be <code>{\"\":[...]}</code></p>\n\n<p>While this is what I would want if I was not parsing, It Is not what I want before parsing. (as json sees \" as the end of the string and gives an error with the P)</p>\n\n<p>I cant hard code to fix this as this problems shows up with other things than just Protestant</p>\n\n<p>My Code</p>\n\n<pre><code>response.data.replace(`{\\\\\"`, `{\"'`).replace('\\\\\":', `'\":`);\n</code></pre>\n\n<p>While I know that I can do this by </p>\n\n<pre><code>resonse.data.replace(`{\\\\\"\\\\\":`,'{RANDOMSTRING:');\n</code></pre>\n\n<p>and using that RANDOMSTRING as a placeholder while I change A's strings, but was wondering if there was a less gimmiky way of doing so.</p>\n\n<p>This is what im getting back (which isn't parseable)</p>\n\n<p>A = \"\"Protestant\"\", and B = \"\".</p>\n\n<p>Is there anyway to do this by looking for <code>{\\\"\\\"</code> but not <code>{\\\"\\\":</code> ?</p>\n"}, {"tags": ["javascript", "geolocation", "leaflet"], "answers": [{"tags": [], "owner": {"reputation": 2272, "user_id": 3574481, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jW3nCe2wOlU/AAAAAAAAAAI/AAAAAAAAVu4/a4SSbax7jbo/photo.jpg?sz=128", "display_name": "peeebeee", "link": "https://stackoverflow.com/users/3574481/peeebeee"}, "is_accepted": true, "score": 1, "last_activity_date": 1567060411, "creation_date": 1567060411, "answer_id": 57704288, "question_id": 57700034, "link": "https://stackoverflow.com/questions/57700034/geolocation-leaflet-marker-not-removing-old-one/57704288#57704288", "title": "Geolocation Leaflet Marker not removing old one", "body": "<p>You have no code to remove the marker, so it doesn't get removed.</p>\n\n<p>Try this (adapted from <a href=\"https://gis.stackexchange.com/a/182084/120862\">https://gis.stackexchange.com/a/182084/120862</a>):</p>\n\n<pre><code>var currentlocation, currentradius;\n\nfunction locate() {\n  mymap.locate({setView: true, maxZoom: 16});\n}\n\nfunction onLocationFound(e) {\n\n    var radius = e.accuracy;\n\n    if (currentlocation)  { \n         mymap.removeLayer(currentlocation);\n         mymap.removeLayer(currentradius);\n    }\n\n\n      currentlocation = L.marker(e.latlng).addTo(mymap)\n        .bindPopup(\"You are within \" + radius + \" meters from this point \" + Math.floor(Math.random() * 10) + \" &gt;&gt;\").openPopup();\n\n      currentradius = L.circle(e.latlng, radius).addTo(mymap);\n}\n\nmymap.on('locationfound', onLocationFound);\n\n// call locate every 3 seconds... forever\nsetInterval(locate, 5000);\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11832840"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 57704288, "answer_count": 1, "score": 0, "last_activity_date": 1567060411, "creation_date": 1567026415, "question_id": 57700034, "link": "https://stackoverflow.com/questions/57700034/geolocation-leaflet-marker-not-removing-old-one", "title": "Geolocation Leaflet Marker not removing old one", "body": "<p>I have some Leaflet geolocation code which every time it updates the geolocation I get a new marker but the old markers are not removed so I'm ending with lots of markers instead of one.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>function locate() {\n  mymap.locate({setView: true, maxZoom: 16});\n}\n\nfunction onLocationFound(e) {\n\n    var radius = e.accuracy;\n\n      L.marker(e.latlng).addTo(mymap)\n        .bindPopup(\"You are within \" + radius + \" meters from this point \" + Math.floor(Math.random() * 10) + \" &gt;&gt;\").openPopup();\n\n    L.circle(e.latlng, radius).addTo(mymap);\n}\n\nmymap.on('locationfound', onLocationFound);\n\n// call locate every 3 seconds... forever\nsetInterval(locate, 5000);\n</code></pre>\n"}, {"tags": ["javascript", "reactjs", "react-native"], "answers": [{"tags": [], "owner": {"reputation": 6367, "user_id": 9386929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f9bac9557ecb2df1aa89cd5dc5442d0?s=128&d=identicon&r=PG", "display_name": "nircraft", "link": "https://stackoverflow.com/users/9386929/nircraft"}, "is_accepted": false, "score": 4, "last_activity_date": 1567026670, "creation_date": 1567026670, "answer_id": 57700084, "question_id": 57700029, "link": "https://stackoverflow.com/questions/57700029/what-does-run-the-packager-with-clearcache-flag-mean-in-react-native/57700084#57700084", "title": "What does &quot;Run the packager with `--clearCache` flag&quot; mean in React Native?", "body": "<p>A React Native app is a compiled app that is running some Javascript. Whenever you build and run your React Native project, a packager starts up called Metro. </p>\n\n<p>The packager does a few things:</p>\n\n<ol>\n<li>Combines all your Javascript code into a single file, and translates\nany Javascript code that your device won\u2019t understand (like JSX or\nsome of the newer JS syntax).</li>\n<li>Converts assets (e.g. PNG files) into objects that can be displayed\nby an Image component.</li>\n</ol>\n\n<p>For React Native Init approach (without expo) use:</p>\n\n<pre><code>npm start -- --reset-cache\n</code></pre>\n\n<p>Or you can use:</p>\n\n<pre><code>react-native start --reset-cache\n</code></pre>\n"}], "owner": {"reputation": 2824, "user_id": 10864356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/315465d723d17533b95c0615fd7201cc?s=128&d=identicon&r=PG&f=1", "display_name": "gkeenley", "link": "https://stackoverflow.com/users/10864356/gkeenley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 797, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1567026670, "creation_date": 1567026380, "question_id": 57700029, "link": "https://stackoverflow.com/questions/57700029/what-does-run-the-packager-with-clearcache-flag-mean-in-react-native", "title": "What does &quot;Run the packager with `--clearCache` flag&quot; mean in React Native?", "body": "<p>I always use <code>react-native run-ios</code> to run my React Native apps, but when debugging it suggested \"Run the packager with --clearCache flag\". What does this mean? What is the packager, and how do I run it with the \"--clearCache flag?\"</p>\n"}, {"tags": ["javascript", "html", "google-visualization"], "comments": [{"owner": {"reputation": 553, "user_id": 4742218, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-0wBoIjPuArI/AAAAAAAAAAI/AAAAAAAAAF8/gmwCNq5bAX8/photo.jpg?sz=128", "display_name": "noname", "link": "https://stackoverflow.com/users/4742218/noname"}, "edited": false, "score": 0, "creation_date": 1567026719, "post_id": 57700018, "comment_id": 101844153, "body": "did you check a <code>fetch api</code> for JS? That can be helpful for you. Other options are to paste content of the file into for example <code>div</code> or <code>textarea</code> on the page and in JS read it value."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 7954246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a3acf30b0adc969e5ba1d19dbbb56ed?s=128&d=identicon&r=PG&f=1", "display_name": "gsheppard", "link": "https://stackoverflow.com/users/7954246/gsheppard"}, "edited": false, "score": 0, "creation_date": 1567028881, "post_id": 57700164, "comment_id": 101844849, "body": "Let me give the google sheets a try and I&#39;ll let you know how that works."}, {"owner": {"reputation": 39, "user_id": 7954246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a3acf30b0adc969e5ba1d19dbbb56ed?s=128&d=identicon&r=PG&f=1", "display_name": "gsheppard", "link": "https://stackoverflow.com/users/7954246/gsheppard"}, "edited": false, "score": 0, "creation_date": 1567093015, "post_id": 57700164, "comment_id": 101869244, "body": "Thanks TheMaster for the documentation. I got it working with Google Sheets with a smaller sample. Now I&#39;m going to try and add in the larger sample of responses."}, {"owner": {"reputation": 39, "user_id": 7954246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a3acf30b0adc969e5ba1d19dbbb56ed?s=128&d=identicon&r=PG&f=1", "display_name": "gsheppard", "link": "https://stackoverflow.com/users/7954246/gsheppard"}, "edited": false, "score": 0, "creation_date": 1567093568, "post_id": 57700164, "comment_id": 101869516, "body": "It looks like the wordtree might just have issues with larger datasets. I put a few 100 in and it worked fine, but when I tried adding 25K it keeps crashing."}, {"owner": {"reputation": 32101, "user_id": 8404453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/616cb81bb678bb5b17869511b2a41367?s=128&d=identicon&r=PG&f=1", "display_name": "TheMaster", "link": "https://stackoverflow.com/users/8404453/themaster"}, "reply_to_user": {"reputation": 39, "user_id": 7954246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a3acf30b0adc969e5ba1d19dbbb56ed?s=128&d=identicon&r=PG&f=1", "display_name": "gsheppard", "link": "https://stackoverflow.com/users/7954246/gsheppard"}, "edited": false, "score": 0, "creation_date": 1567093690, "post_id": 57700164, "comment_id": 101869574, "body": "@gsheppard Is there a specific error on the console? To ask, what exactly are you trying to show with 25k lines? I don&#39;t think you&#39;ll get anything reasonable."}, {"owner": {"reputation": 39, "user_id": 7954246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a3acf30b0adc969e5ba1d19dbbb56ed?s=128&d=identicon&r=PG&f=1", "display_name": "gsheppard", "link": "https://stackoverflow.com/users/7954246/gsheppard"}, "edited": false, "score": 0, "creation_date": 1567102581, "post_id": 57700164, "comment_id": 101873399, "body": "I&#39;m using Fiddle meta to run the code, and I&#39;m not seeing an error, just the image showing a sad face that it didn&#39;t run. We&#39;re pulling specific comments from customers about different experiences, so we&#39;re trying to bring in as many customers&#39; responses as possible to see what main themes come out of the analysis."}, {"owner": {"reputation": 39, "user_id": 7954246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a3acf30b0adc969e5ba1d19dbbb56ed?s=128&d=identicon&r=PG&f=1", "display_name": "gsheppard", "link": "https://stackoverflow.com/users/7954246/gsheppard"}, "edited": false, "score": 0, "creation_date": 1567103015, "post_id": 57700164, "comment_id": 101873569, "body": "I was able to get it to work for a second with about 13K before crashing, so I think probably will just have to keep shrinking the dataset down till I get something that is manageable both for the code to run and for analysis."}, {"owner": {"reputation": 32101, "user_id": 8404453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/616cb81bb678bb5b17869511b2a41367?s=128&d=identicon&r=PG&f=1", "display_name": "TheMaster", "link": "https://stackoverflow.com/users/8404453/themaster"}, "reply_to_user": {"reputation": 39, "user_id": 7954246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a3acf30b0adc969e5ba1d19dbbb56ed?s=128&d=identicon&r=PG&f=1", "display_name": "gsheppard", "link": "https://stackoverflow.com/users/7954246/gsheppard"}, "edited": false, "score": 0, "creation_date": 1567103304, "post_id": 57700164, "comment_id": 101873684, "body": "@gshepp May be fiddle is the problem? Try in a real site or local browser?"}], "tags": [], "owner": {"reputation": 32101, "user_id": 8404453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/616cb81bb678bb5b17869511b2a41367?s=128&d=identicon&r=PG&f=1", "display_name": "TheMaster", "link": "https://stackoverflow.com/users/8404453/themaster"}, "is_accepted": true, "score": 0, "last_activity_date": 1567027076, "last_edit_date": 1592644375, "creation_date": 1567027076, "answer_id": 57700164, "question_id": 57700018, "link": "https://stackoverflow.com/questions/57700018/using-large-set-of-strings-in-word-tree-visualization/57700164#57700164", "title": "Using large set of strings in word tree visualization", "body": "<p>You can use a Google sheet.</p>\n<h3>Snippet:</h3>\n<pre><code>function drawVisualization() {\n        var wrapper = new google.visualization.ChartWrapper({\n          chartType: 'WordTree',\n          dataSourceUrl: 'http://spreadsheets.google.com/tq?key=pCQbetd-CptGXxxQIG7V',\n          query: 'SELECT A',\n          containerId: 'wordtree_basic'\n        });\n}\n</code></pre>\n<h3>To Read:</h3>\n<ul>\n<li><a href=\"https://developers.google.com/chart/interactive/docs/spreadsheets#introduction\" rel=\"nofollow noreferrer\">Google sheets Integration</a></li>\n<li><a href=\"https://developers.google.com/chart/interactive/docs/drawing_charts#chartwrapper\" rel=\"nofollow noreferrer\">ChartWrapper</a></li>\n<li><a href=\"https://stackoverflow.com/search?q=%5Bgoogle-apps-script%5D+Import+csv\">Csv import</a></li>\n</ul>\n"}], "owner": {"reputation": 39, "user_id": 7954246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a3acf30b0adc969e5ba1d19dbbb56ed?s=128&d=identicon&r=PG&f=1", "display_name": "gsheppard", "link": "https://stackoverflow.com/users/7954246/gsheppard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "accepted_answer_id": 57700164, "answer_count": 1, "score": 0, "last_activity_date": 1567027076, "creation_date": 1567026265, "question_id": 57700018, "link": "https://stackoverflow.com/questions/57700018/using-large-set-of-strings-in-word-tree-visualization", "title": "Using large set of strings in word tree visualization", "body": "<p>I can't copy and paste all the strings in my file and run the code using this example</p>\n\n<p><a href=\"https://developers.google.com/chart/interactive/docs/gallery/wordtree\" rel=\"nofollow noreferrer\">https://developers.google.com/chart/interactive/docs/gallery/wordtree</a></p>\n\n<p><a href=\"https://jsfiddle.net/api/post/library/pure/\" rel=\"nofollow noreferrer\">https://jsfiddle.net/api/post/library/pure/</a></p>\n\n<p>I modified the html and javascript code and replaced phrases with a small set of strings from my file and got everything to work. Now I want to do the same thing with my full file, but there are too many strings to copy and paste. How can I use javascript to import my large dataset and do I make each row formatted the same with \"['some text here'],\" or does javascript insert the brackets when the file is uploaded?</p>\n\n<p>The HTML File:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;script type=\"text/javascript\" src=\"https://www.gstatic.com/charts/loader.js\"&gt;&lt;/script&gt;\n   &lt;html&gt;\n  &lt;head&gt;\n    &lt;script type=\"text/javascript\" src=\"https://www.gstatic.com/charts/loader.js\"&gt;&lt;/script&gt;\n    &lt;script type=\"text/javascript\"&gt;\n      google.charts.load('current', {packages:['wordtree']});\n      google.charts.setOnLoadCallback(drawChart);\n\n      function drawChart() {\n        var data = google.visualization.arrayToDataTable(\n          [ ['Phrases'],\n                    ['return refund not received'],\n                        ['hello, every time i try to print the invoice, nothing loads. i have tried different browsers and devices. can i get it emailed to me?'],\n                        ['how long for delivery and do i need a prescription'],\n                        ['i recently requested replacement lenses for some that were defective and received the wrong prescription'],\n                        ['my order is pending verification of prescription.  however, my prescription hasn\u2019t changed and i ordered last month without any delays.'],\n\n          ]\n        );\n\n        var options = {\n          wordtree: {\n            format: 'implicit',\n            //alt is 'suffix', 'prefix'\n            type: 'double',\n            word: 'prescription'\n          }\n        };\n\n        var chart = new google.visualization.WordTree(document.getElementById('wordtree_basic'));\n        chart.draw(data, options);\n      }\n    &lt;/script&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;div id=\"wordtree_basic\" style=\"width: 1800px; height: 1000px;\"&gt;&lt;/div&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>The JavaScript File:</p>\n\n<pre><code> google.charts.load('current', {packages:['wordtree']});\n      google.charts.setOnLoadCallback(drawChart);\n\n      function drawChart() {\n        var data = google.visualization.arrayToDataTable(\n          [ ['Phrases'],\n                    ['return refund not received'],\n                        ['hello, every time i try to print the invoice, nothing loads. i have tried different browsers and devices. can i get it emailed to me?'],\n                        ['how long for delivery and do i need a prescription'],\n                        ['i recently requested replacement lenses for some that were defective and received the wrong prescription'],\n                        ['my order is pending verification of prescription.  however, my prescription hasn\u2019t changed and i ordered last month without any delays.'],\n          ]\n        );\n\n        var options = {\n          wordtree: {\n            format: 'implicit',\n            //alt is 'suffix', 'prefix'\n            type: 'double',\n            word: 'prescription'\n          }\n        };\n\n        var chart = new google.visualization.WordTree(document.getElementById('wordtree_basic'));\n        chart.draw(data, options);\n      }\n</code></pre>\n\n<p>I would like to be able to upload the file (csv format) from my desktop (or other location) instead of copying and pasting small sections of my open ended feedback. Thanks.</p>\n"}, {"tags": ["javascript", "filter"], "answers": [{"comments": [{"owner": {"reputation": 7358, "user_id": 2394970, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1bf447cf1afc783b4b4e6ecd9ab292f7?s=128&d=identicon&r=PG", "display_name": "lost9123193", "link": "https://stackoverflow.com/users/2394970/lost9123193"}, "edited": false, "score": 0, "creation_date": 1567026521, "post_id": 57700013, "comment_id": 101844073, "body": "I&#39;m trying to filter by available, would this be correct?  const peopleAvailable = people.map(person =&gt; person.value).filter(person =&gt; person.available);"}, {"owner": {"reputation": 26112, "user_id": 8526705, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/buwQ5.jpg?s=128&g=1", "display_name": "Dacre Denny", "link": "https://stackoverflow.com/users/8526705/dacre-denny"}, "reply_to_user": {"reputation": 319259, "user_id": 1447675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziYmO.gif?s=128&g=1", "display_name": "Nina Scholz", "link": "https://stackoverflow.com/users/1447675/nina-scholz"}, "edited": false, "score": 0, "creation_date": 1567026847, "post_id": 57700013, "comment_id": 101844199, "body": "@NinaScholz think you&#39;re seeing an old edit - accidental &quot;tab enter&quot;"}, {"owner": {"reputation": 7358, "user_id": 2394970, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1bf447cf1afc783b4b4e6ecd9ab292f7?s=128&d=identicon&r=PG", "display_name": "lost9123193", "link": "https://stackoverflow.com/users/2394970/lost9123193"}, "edited": false, "score": 0, "creation_date": 1567027084, "post_id": 57700013, "comment_id": 101844298, "body": "this makes sense. Thanks. Does .filter(people =&gt; people.available) also work? Wondering if I need to add the &quot;===&quot; for that boolean conditional"}, {"owner": {"reputation": 26112, "user_id": 8526705, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/buwQ5.jpg?s=128&g=1", "display_name": "Dacre Denny", "link": "https://stackoverflow.com/users/8526705/dacre-denny"}, "reply_to_user": {"reputation": 7358, "user_id": 2394970, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1bf447cf1afc783b4b4e6ecd9ab292f7?s=128&d=identicon&r=PG", "display_name": "lost9123193", "link": "https://stackoverflow.com/users/2394970/lost9123193"}, "edited": false, "score": 0, "creation_date": 1567027215, "post_id": 57700013, "comment_id": 101844333, "body": "@lost9123193 yes you can ommit the <code>=== true</code> in this case.I&#39;ll update the answer"}], "tags": [], "owner": {"reputation": 26112, "user_id": 8526705, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/buwQ5.jpg?s=128&g=1", "display_name": "Dacre Denny", "link": "https://stackoverflow.com/users/8526705/dacre-denny"}, "is_accepted": true, "score": 1, "last_activity_date": 1567027267, "last_edit_date": 1567027267, "creation_date": 1567026214, "answer_id": 57700013, "question_id": 57699996, "link": "https://stackoverflow.com/questions/57699996/how-to-map-with-a-conditional-in-javascript/57700013#57700013", "title": "How to map with a conditional in Javascript", "body": "<p>You cannot conditionally map with the <code>.map()</code> function alone, however you can use <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter\" rel=\"nofollow noreferrer\"><code>.filter()</code></a> to achieve what you require. </p>\n\n<p>Calling filter will return a new array where each item in the new array satisfies your filtering criteria (ie <code>people.available === true</code>). </p>\n\n<p>In the case of your code, you can directly chain filter with your existing call to <code>.map()</code> to obtain the desired result:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const people = [{\r\n    id: 1,\r\n    name: \"Bob\",\r\n    available: false\r\n  },\r\n  {\r\n    id: 2,\r\n    name: \"Sally\",\r\n    available: true\r\n  },\r\n  {\r\n    id: 1,\r\n    name: \"Trish\",\r\n    available: false\r\n  },\r\n];\r\n\r\nconst peopleAvailable = people\r\n.filter(people =&gt; people.available)    /* filter available people */\r\n.map(person =&gt; person.name)            /* map each person to name */ \r\n\r\nconsole.log(peopleAvailable);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 51813, "user_id": 860099, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/125k3.jpg?s=128&g=1", "display_name": "Kamil Kie\u0142czewski", "link": "https://stackoverflow.com/users/860099/kamil-kie%c5%82czewski"}, "is_accepted": false, "score": 1, "last_activity_date": 1567027693, "last_edit_date": 1567027693, "creation_date": 1567027352, "answer_id": 57700216, "question_id": 57699996, "link": "https://stackoverflow.com/questions/57699996/how-to-map-with-a-conditional-in-javascript/57700216#57700216", "title": "How to map with a conditional in Javascript", "body": "<p>Try</p>\n\n<pre><code>people.reduce((a,c) =&gt; a.concat(c.available ? c.name:[]), [])\n</code></pre>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"true\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>people = [\r\n  {id:1, name:\"Bob\", available:false},\r\n  {id:2, name:\"Sally\", available:true},\r\n  {id:1, name:\"Trish\", available:false},\r\n];\r\n\r\nlet r = people.reduce((a,c) =&gt; a.concat(c.available ? c.name:[]), [])\r\n\r\nconsole.log(r);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 1698, "user_id": 9342544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28d5bc1e5d8cc97ca08957458ae8a61?s=128&d=identicon&r=PG&f=1", "display_name": "Neel Rathod", "link": "https://stackoverflow.com/users/9342544/neel-rathod"}, "is_accepted": false, "score": 0, "last_activity_date": 1567027538, "creation_date": 1567027538, "answer_id": 57700249, "question_id": 57699996, "link": "https://stackoverflow.com/questions/57699996/how-to-map-with-a-conditional-in-javascript/57700249#57700249", "title": "How to map with a conditional in Javascript", "body": "<p>You can't check the condition in <code>map()</code>. If you put conditions then other elements will be returns as <code>undefined</code>. You can deal with this by applying <code>filter()</code> which allows you to return only those elements which are falls in your condition. So you need to use <code>filter()</code> then use <code>map()</code> on the filtered result.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const array = [{\r\n    id: 1,\r\n    name: \"Bob\",\r\n    available: false\r\n  },\r\n  {\r\n    id: 2,\r\n    name: \"Sally\",\r\n    available: true\r\n  },\r\n  {\r\n    id: 1,\r\n    name: \"Trish\",\r\n    available: false\r\n  },\r\n];\r\n\r\nconst withFilter = array\r\n.filter((r) =&gt; { return r.available; })\r\n.map((m) =&gt; { return m.name; });                \r\n\r\nconsole.log(withFilter);\r\n\r\nconst withOutFilter = array\r\n.map((m) =&gt; { if(m.available) { return m.name; } });                \r\n\r\nconsole.log(withOutFilter);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 7358, "user_id": 2394970, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1bf447cf1afc783b4b4e6ecd9ab292f7?s=128&d=identicon&r=PG", "display_name": "lost9123193", "link": "https://stackoverflow.com/users/2394970/lost9123193"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 789, "favorite_count": 0, "accepted_answer_id": 57700013, "answer_count": 3, "score": 3, "last_activity_date": 1605951181, "creation_date": 1567026111, "last_edit_date": 1567027500, "question_id": 57699996, "link": "https://stackoverflow.com/questions/57699996/how-to-map-with-a-conditional-in-javascript", "title": "How to map with a conditional in Javascript", "body": "<p>I'm traversing through an object array:</p>\n\n<pre><code>people = [\n  {id:1, name:\"Bob\", available:false},\n  {id:2, name:\"Sally\", available:true},\n  {id:1, name:\"Trish\", available:false},\n]\n</code></pre>\n\n<p>I want my output to be the names of those available:</p>\n\n<pre><code>[\"Sally\"]\n</code></pre>\n\n<p>I currently know how to map and extract for a field. \nHow do I add the conditional?</p>\n\n<pre><code>  const peopleAvailable = people.map(person =&gt; person.value);\n</code></pre>\n\n<p>Want to do something like this:</p>\n\n<pre><code>  const peopleAvailable = people.map(person.available =&gt; person.value);\n</code></pre>\n"}, {"tags": ["javascript", "firebase", "google-cloud-firestore"], "answers": [{"comments": [{"owner": {"reputation": 725, "user_id": 919589, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a2fe909aa364ad5ac08c903c5e044f12?s=128&d=identicon&r=PG", "display_name": "optimista", "link": "https://stackoverflow.com/users/919589/optimista"}, "edited": false, "score": 2, "creation_date": 1599732221, "post_id": 57700048, "comment_id": 112867154, "body": "&quot;You&#39;re not really supposed to depend on these details.&quot; I really wish I wouldn&#39;t have to, I truly do.  I pre-load the collection on server.  I order collection based on the timestamp.  All that is fine.  However, if I want to do pagination based on the <code>timestamp</code> property (because I cannot pass the whole <code>DocumentSnapshot</code> from server to client in pre-load), I need to convert Timestamp into a an object <code>{ seconds, nanoseconds }</code> to pre-load and then back when querying with cursor. My converter works for both SDK&#39;s, so I need to check for both underscore and non-underscore keys (?)"}, {"owner": {"reputation": 725, "user_id": 919589, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a2fe909aa364ad5ac08c903c5e044f12?s=128&d=identicon&r=PG", "display_name": "optimista", "link": "https://stackoverflow.com/users/919589/optimista"}, "edited": false, "score": 0, "creation_date": 1599732683, "post_id": 57700048, "comment_id": 112867390, "body": "For anyone else who is having similar problems; I solved mine by converting <code>Timestamp</code> <code>toMillis()</code>, passing it from server to client and then recreating it using <code>fromMillis()</code>!"}], "tags": [], "owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "is_accepted": true, "score": 1, "last_activity_date": 1567026483, "creation_date": 1567026483, "answer_id": 57700048, "question_id": 57699973, "link": "https://stackoverflow.com/questions/57699973/firestore-timestamp-properties-are-prefixed-with-underscore-on-admin-sdk-but-not/57700048#57700048", "title": "Firestore Timestamp properties are prefixed with underscore on admin SDK but not with client SDK", "body": "<p>What you're looking at is the implementation details for Timestamp in either SDK.  You're not really supposed to depend on these details.  If you want to save and load a Timestamp object from JSON, you should read the time components using its documented public accessors for both seconds and nanoseconds.  Then, to reconstitute the Timestamp, pass those values into its constructor.</p>\n\n<p>If the Timestamp object had a toJSON function, you could call that to get the object to serialize as JSON.  But it doesn't, and you can't just stringify the main object itself.  You could <a href=\"https://support.google.com/firebase/contact/support\" rel=\"nofollow noreferrer\">file a feature request</a> for that.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 15507054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5e84ce631daccd30d63a9b118077fea?s=128&d=identicon&r=PG&f=1", "display_name": "chris.kendrick", "link": "https://stackoverflow.com/users/15507054/chris-kendrick"}, "is_accepted": false, "score": 0, "last_activity_date": 1617029870, "creation_date": 1617029870, "answer_id": 66856528, "question_id": 57699973, "link": "https://stackoverflow.com/questions/57699973/firestore-timestamp-properties-are-prefixed-with-underscore-on-admin-sdk-but-not/66856528#66856528", "title": "Firestore Timestamp properties are prefixed with underscore on admin SDK but not with client SDK", "body": "<p>Just create a new Timestamp class:</p>\n<pre><code>class Timestamp {\n    constructor(seconds,nanoseconds) {\n        this.seconds = seconds\n        this.nanoseconds = nanoseconds\n    }\n}\n</code></pre>\n<p>then call it:</p>\n<pre><code>const newCustomTimestamp = new Timestamp(_dobSeconds, _nanoSeconds);\n</code></pre>\n<p>and then overwrite your current Timestamp with the one we created and Swift will decode the keys correctly so you can use it on your client.</p>\n"}], "owner": {"reputation": 3167, "user_id": 838103, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/5028f526e432025fb1c3220f593cedd1?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/838103/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 57700048, "answer_count": 2, "score": 3, "last_activity_date": 1617029870, "creation_date": 1567025972, "question_id": 57699973, "link": "https://stackoverflow.com/questions/57699973/firestore-timestamp-properties-are-prefixed-with-underscore-on-admin-sdk-but-not", "title": "Firestore Timestamp properties are prefixed with underscore on admin SDK but not with client SDK", "body": "<p>When I load and stringify user data with the Firestore Admin SDK, timestamps have the following structure:</p>\n\n<pre><code>{\n  \"_seconds\": 1566129600,\n  \"_nanoseconds\": 0\n}\n</code></pre>\n\n<p>When load and stringify the same data on the client, I get the following structure:</p>\n\n<pre><code>{\n  \"seconds\": 1566129600,\n  \"nanoseconds\": 0\n}\n</code></pre>\n\n<p>Is there a good reason for this difference?</p>\n\n<p>I am using JavaScript on the front end and a Node.js backend.</p>\n"}, {"tags": ["javascript", "css", "reactjs"], "answers": [{"comments": [{"owner": {"reputation": 184244, "user_id": 14104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/otetW.jpg?s=128&g=1", "display_name": "epascarello", "link": "https://stackoverflow.com/users/14104/epascarello"}, "edited": false, "score": 0, "creation_date": 1567042730, "post_id": 57699980, "comment_id": 101847419, "body": "&quot;I need the click to be always bounded to the outer div even if I click on the inner Div&quot; How does your answer help that?"}, {"owner": {"reputation": 9, "user_id": 11988760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cea62c8261f3c162db3401f1f499da7?s=128&d=identicon&r=PG&f=1", "display_name": "Genrikh", "link": "https://stackoverflow.com/users/11988760/genrikh"}, "reply_to_user": {"reputation": 184244, "user_id": 14104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/otetW.jpg?s=128&g=1", "display_name": "epascarello", "link": "https://stackoverflow.com/users/14104/epascarello"}, "edited": false, "score": 0, "creation_date": 1567058891, "post_id": 57699980, "comment_id": 101850726, "body": "Bounded to outer div as HTML element? in this case, you could only find outer div into onclick handler and do something with it."}], "tags": [], "owner": {"reputation": 9, "user_id": 11988760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cea62c8261f3c162db3401f1f499da7?s=128&d=identicon&r=PG&f=1", "display_name": "Genrikh", "link": "https://stackoverflow.com/users/11988760/genrikh"}, "is_accepted": false, "score": -1, "last_activity_date": 1567026032, "creation_date": 1567026032, "answer_id": 57699980, "question_id": 57699906, "link": "https://stackoverflow.com/questions/57699906/is-it-possible-to-bind-inner-div-click-to-outer-div/57699980#57699980", "title": "Is it possible to bind inner Div Click to Outer Div?", "body": "<p>As far as I understood it is about the React, isn't it?\nAnyway if you want to stop event bubbling (<a href=\"https://www.sitepoint.com/event-bubbling-javascript/\" rel=\"nofollow noreferrer\">https://www.sitepoint.com/event-bubbling-javascript/</a>) you should add onClick handler to the inner div and inside a callback do something like this</p>\n\n<pre><code>&lt;SimpleAdCopy onClick= {event =&gt; event.stopPropagation()} /&gt;\n</code></pre>\n\n<p>It stops event bubbling and lets you avoid onClick invocation on outer div</p>\n\n<p>About stop propagation: <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Event/stopPropagation\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/API/Event/stopPropagation</a></p>\n"}, {"comments": [{"owner": {"reputation": 140, "user_id": 9521924, "user_type": "registered", "profile_image": "https://graph.facebook.com/1755832414459838/picture?type=large", "display_name": "Ahmed Bendaya", "link": "https://stackoverflow.com/users/9521924/ahmed-bendaya"}, "edited": false, "score": 0, "creation_date": 1567086332, "post_id": 57710630, "comment_id": 101865382, "body": "That&#39;s exactly what I need! Thank you very much."}], "tags": [], "owner": {"reputation": 184244, "user_id": 14104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/otetW.jpg?s=128&g=1", "display_name": "epascarello", "link": "https://stackoverflow.com/users/14104/epascarello"}, "is_accepted": true, "score": 1, "last_activity_date": 1567083019, "creation_date": 1567083019, "answer_id": 57710630, "question_id": 57699906, "link": "https://stackoverflow.com/questions/57699906/is-it-possible-to-bind-inner-div-click-to-outer-div/57710630#57710630", "title": "Is it possible to bind inner Div Click to Outer Div?", "body": "<p>You want to use <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Event/currentTarget\" rel=\"nofollow noreferrer\"><code>event.currentTarget</code></a> instead of <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Event/target\" rel=\"nofollow noreferrer\"><code>event.target</code></a>. <code>target</code> is what was clicked, <code>currentTarget</code> is the element the event was bound to.</p>\n"}], "owner": {"reputation": 140, "user_id": 9521924, "user_type": "registered", "profile_image": "https://graph.facebook.com/1755832414459838/picture?type=large", "display_name": "Ahmed Bendaya", "link": "https://stackoverflow.com/users/9521924/ahmed-bendaya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 57710630, "answer_count": 2, "score": 0, "last_activity_date": 1567083019, "creation_date": 1567025587, "question_id": 57699906, "link": "https://stackoverflow.com/questions/57699906/is-it-possible-to-bind-inner-div-click-to-outer-div", "title": "Is it possible to bind inner Div Click to Outer Div?", "body": "<p>I am trying to trigger a Function whenever I click on a Div, but that Div has an inner Div which means that If I click inside it it will trigger the onClick but on the wrong Div</p>\n\n<p>I've looked around on Internet but couldn't find any answers.</p>\n\n<p>A map function that returns the code below</p>\n\n<pre><code>&lt;Card onClick={props.setSelectedTemplate}  key={template.id} className=\"AdCopies\" id={template.id.toString()}&gt;\n        &lt;SimpleAdCopy headlines={template.headlines} descriptions={template.descriptions} url={'www.google.com'}/&gt;\n &lt;/Card&gt;\n\nfunction handleClick(event) {\n    console.log(event.target.id)\n  }\n</code></pre>\n\n<p>I need the click to be always bounded to the outer div even if I click on the inner Div</p>\n"}, {"tags": ["javascript", "html", "custom-element"], "comments": [{"owner": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "edited": false, "score": 0, "creation_date": 1567026576, "post_id": 57699901, "comment_id": 101844095, "body": "Element two relies on element one existing, so you kind of <i>need</i> to wait until that element has been defined. The modern solution to do that is to define each custom element in its own module, and making sure to start the module for two with <code>import One from &quot;.&#47;one.js&quot;;</code> so that the browser can force the parse order, even if the network load order is completely different."}, {"owner": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "edited": false, "score": 0, "creation_date": 1567026886, "post_id": 57699901, "comment_id": 101844224, "body": "As for when the constructor is called: the constructor is called without arguments during the <a href=\"https://html.spec.whatwg.org/multipage/custom-elements.html#upgrades\" rel=\"nofollow noreferrer\">element upgrade part</a> of registering the custom element, so there is no such thing as &quot;declaring&quot; custom element without constructing one: part of the definition process is verifying that the element <i>can</i> be built, by literally building one."}, {"owner": {"reputation": 39499, "user_id": 740553, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/s5cOX.jpg?s=128&g=1", "display_name": "Mike &#39;Pomax&#39; Kamermans", "link": "https://stackoverflow.com/users/740553/mike-pomax-kamermans"}, "edited": false, "score": 0, "creation_date": 1567027060, "post_id": 57699901, "comment_id": 101844287, "body": "(Some more good advice can be found over on <a href=\"https://html.spec.whatwg.org/multipage/custom-elements.html#custom-element-conformance\" rel=\"nofollow noreferrer\">html.spec.whatwg.org/multipage/&hellip;</a> : hold off on that innerHTML and selector code until <code>connectedCallback</code>, for example. Don&#39;t do that in the constructor)"}], "answers": [{"comments": [{"owner": {"reputation": 421, "user_id": 1553103, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a09cac570bfef0072b19fee6f4d434f0?s=128&d=identicon&r=PG", "display_name": "Miguel Pynto", "link": "https://stackoverflow.com/users/1553103/miguel-pynto"}, "edited": false, "score": 0, "creation_date": 1604657250, "post_id": 57731293, "comment_id": 114419769, "body": "w3c link is 404"}], "tags": [], "owner": {"reputation": 8426, "user_id": 1253074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7359ba202d56b428b3698ea2016995ef?s=128&d=identicon&r=PG", "display_name": "Intervalia", "link": "https://stackoverflow.com/users/1253074/intervalia"}, "is_accepted": true, "score": 1, "last_activity_date": 1567187688, "creation_date": 1567187688, "answer_id": 57731293, "question_id": 57699901, "link": "https://stackoverflow.com/questions/57699901/how-to-define-all-custom-elements-before-any-constructors-are-called/57731293#57731293", "title": "How to define all custom elements before any constructors are called?", "body": "<p>It is all about the life-cycle of a Web Component and when a tag is upgraded from an <code>HTMLUnknownElement</code> to your actual Component</p>\n\n<p>A component is defined in two steps.</p>\n\n<p>1) Definition of a class\n2) Calling <code>customElements.define</code></p>\n\n<p>Yes these two can be <em>written</em> together:</p>\n\n<pre><code>customElements.define('dog-food', class extends HTMLElement{});\n</code></pre>\n\n<p>But the class definition still happens before <code>customElements.define</code> is called.</p>\n\n<p>Elements are only upgraded to a custom element when two things have happened:</p>\n\n<p>1) The Custom Element must be defined by using <code>customElements.define</code> and\n2) The Custom Element must either\n  1) be instantiated using <code>document.createElement</code> or <code>new MyElement</code>\n  2) be added to the DOM tree</p>\n\n<p>This example has the element placed into the DOM but it is not defined for 1 second.</p>\n\n<p>I display the constructor before it is defined and then, again, after it is defined.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>class One extends HTMLElement {\r\n  constructor() {\r\n    super();\r\n    console.log('one constructor');\r\n  }\r\n\r\n  connectedCallback() {\r\n    this.innerHTML = \"I have upgraded\";\r\n  }\r\n}\r\n\r\nlet el = document.querySelector('my-one');\r\n\r\nsetTimeout(() =&gt; {\r\n  customElements.define(\"my-one\", One);\r\n  console.log('after: ', el.constructor.toString().substr(0,30));\r\n}, 1000);\r\n\r\nconsole.log('before: ', el.constructor);\r\n  </code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;my-one&gt;I am just a simple element&lt;/my-one&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>In your code you use <code>innerHTML</code> to \"load\" <code>&lt;my-one&gt;</code>. But since <code>&lt;my-two&gt;</code> may not \"really\" be in the DOM by the time the constructor is called then the <code>innerHTML</code> will not be in the DOM and, thus, <code>&lt;my-one&gt;</code> will not get upgraded yet.</p>\n\n<p>One thing you can do is to wait until the <code>&lt;my-two&gt;</code> component is really placed into the DOM by waiting to change the <code>innerHTML</code> in the <code>connectedCallback</code> function:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>class One extends HTMLElement {\r\n  constructor() {\r\n    super();\r\n    console.log('one constructor');\r\n  }\r\n  \r\n  myFunc() {\r\n    console.log('it worked!');\r\n  }\r\n}\r\n\r\nclass Two extends HTMLElement {\r\n  constructor() {\r\n    super();\r\n    console.log('two constructor');\r\n  }\r\n  \r\n  connectedCallback() {\r\n    this.innerHTML = '&lt;my-one&gt;&lt;/my-one&gt;';\r\n    setTimeout(() =&gt; {\r\n      this.myOne = document.querySelector('my-one');\r\n      this.myOne.myFunc();\r\n    });\r\n  }\r\n}\r\n\r\ncustomElements.define(\"my-two\", Two)\r\ncustomElements.define(\"my-one\", One)</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;my-two&gt;&lt;/my-two&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>You will notice that I had to still place the call to the function in <code>&lt;my-one&gt;</code> into a <code>setTimeout</code> call. This is because the <code>&lt;my-one&gt;</code> element can not be upgraded until AFTER your <code>connectedCallback</code> function exists. Upgrading needs a chance to run and it will not run in the middle of your function.</p>\n\n<p>Another way to do it is by calling the constructor for <code>&lt;my-one&gt;</code> directly:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>class One extends HTMLElement {\r\n  constructor() {\r\n    super();\r\n    console.log('one constructor');\r\n  }\r\n\r\n  connectedCallback() {\r\n    this.innerHTML = \"one\";\r\n  }\r\n\r\n  myFunc() {\r\n    console.log('it worked!');\r\n  }\r\n}\r\n\r\nclass Two extends HTMLElement {\r\n  constructor() {\r\n    super();\r\n    console.log('two constructor');\r\n  }\r\n  \r\n  connectedCallback() {\r\n    customElements.whenDefined('my-one').then(() =&gt; {\r\n      this.myOne = document.createElement('my-one');\r\n      this.append(this.myOne);\r\n      this.myOne.myFunc();\r\n    });\r\n  }\r\n}\r\n\r\ncustomElements.define(\"my-two\", Two);\r\ncustomElements.define(\"my-one\", One);</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;my-two&gt;&lt;/my-two&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Here you will notice that I had to add a call to <code>customElements.whenDefined</code>. This will wait until <code>&lt;my-one&gt;</code> to actually be defined before it attempts to instantiate it. Once it is defined then you can create it and call the member function right away.</p>\n\n<p>One last thing. There are rules for what you should and should not do while in a constructor for a Web Component. They are defined here <a href=\"https://w3c.github.io/webcomponents/spec/custom/#custom-element-conformance\" rel=\"nofollow noreferrer\">https://w3c.github.io/webcomponents/spec/custom/#custom-element-conformance</a></p>\n\n<p>But one thing I will point out is that you are not supposed to touch or change any attributes or child elements in the constructor. Mainly because there are no attribute or any child elements when the Web Component is constructed. Those are changed and added after the fact.</p>\n"}], "owner": {"reputation": 2140, "user_id": 2463800, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f64864174529fc76f8e80786d1d082e8?s=128&d=identicon&r=PG", "display_name": "Trevin Avery", "link": "https://stackoverflow.com/users/2463800/trevin-avery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 376, "favorite_count": 0, "accepted_answer_id": 57731293, "answer_count": 1, "score": 0, "last_activity_date": 1567187688, "creation_date": 1567025573, "last_edit_date": 1567026076, "question_id": 57699901, "link": "https://stackoverflow.com/questions/57699901/how-to-define-all-custom-elements-before-any-constructors-are-called", "title": "How to define all custom elements before any constructors are called?", "body": "<p>I have two custom elements: <code>One</code> and <code>Two</code>. <code>One</code> has a function. <code>Two</code> has a child of <code>One</code> and tries to call that function in its constructor. It says that the function does not exist if I call <code>customElements.define()</code> on <code>Two</code> before <code>One</code>. However, if I define <code>One</code> before <code>Two</code>, it works just fine.</p>\n\n<p>In my actual project, I do not have control of the order in which they are defined, and by default they are being defined in the wrong order.</p>\n\n<p>I tried calling the function in the <code>connectedCallback()</code>, but this also failed.</p>\n\n<p>When exactly is the constructor called?</p>\n\n<p>Is there any way that I can make sure they are all defined before any constructors are called?</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>class One extends HTMLElement {\r\n  constructor() {\r\n    super()\r\n    console.log('one constructor')\r\n  }\r\n  \r\n  myFunc() {\r\n    console.log('it worked!')\r\n  }\r\n}\r\n\r\nclass Two extends HTMLElement {\r\n  constructor() {\r\n    super()\r\n    console.log('two constructor')\r\n    \r\n    this.innerHTML = '&lt;my-one&gt;&lt;/my-one&gt;'\r\n    this.myOne = document.querySelector('my-one')\r\n    \r\n    // this part fails\r\n    this.myOne.myFunc()\r\n  }\r\n  \r\n  connectedCallback() {\r\n    // this also fails\r\n    this.myOne.myFunc()\r\n  }\r\n}\r\n\r\n// this works\r\n// customElements.define(\"my-one\", One)\r\n// customElements.define(\"my-two\", Two)\r\n\r\n// this breaks\r\ncustomElements.define(\"my-two\", Two)\r\ncustomElements.define(\"my-one\", One)</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;my-two&gt;&lt;/my-two&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["javascript", "html", "css"], "comments": [{"owner": {"reputation": 780, "user_id": 8596503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bce9f7506e1936b2082dae6df806a6fd?s=128&d=identicon&r=PG", "display_name": "sanketd617", "link": "https://stackoverflow.com/users/8596503/sanketd617"}, "edited": false, "score": 5, "creation_date": 1567025627, "post_id": 57699897, "comment_id": 101843743, "body": "You need to remove that dot. Like this <code>var boxElement = document.getElementsByClassName(&#39;box&#39;)</code>"}, {"owner": {"reputation": 8719, "user_id": 6951428, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/92fd81a6020da8e77fc9125e0c9ec512?s=128&d=identicon&r=PG&f=1", "display_name": "junvar", "link": "https://stackoverflow.com/users/6951428/junvar"}, "edited": false, "score": 0, "creation_date": 1567025673, "post_id": 57699897, "comment_id": 101843760, "body": "Or better yet, use <code>document.querySelector(&#39;.box&#39;);</code> (no <code>[0]</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 808, "user_id": 9327050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BvCW9.jpg?s=128&g=1", "display_name": "Patrik Alexits", "link": "https://stackoverflow.com/users/9327050/patrik-alexits"}, "is_accepted": true, "score": 1, "last_activity_date": 1567025937, "last_edit_date": 1567025937, "creation_date": 1567025636, "answer_id": 57699918, "question_id": 57699897, "link": "https://stackoverflow.com/questions/57699897/uncaught-typeerror-cannot-read-property-style-of-undefined-in-javascript/57699918#57699918", "title": "Uncaught TypeError: Cannot read property &#39;style&#39; of undefined in javascript", "body": "<p>The getElementByClassName implies that the selector's name is a class, so you don't need the dot in front of it. Same as you don't need the # with getElementById.</p>\n\n<pre><code>var boxElement = document.getElementsByClassName('box')[0];\n</code></pre>\n\n<p>EDIT: as others are already pointed it out, there is no need for the <code>getElementByClassName()</code> function, you can just use the <code>querySelector()</code> function in order to avoid an array as the result.</p>\n"}, {"tags": [], "owner": {"reputation": 1335, "user_id": 5190086, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/H1ZZq.jpg?s=128&g=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/5190086/josh"}, "is_accepted": false, "score": 0, "last_activity_date": 1567025735, "creation_date": 1567025735, "answer_id": 57699934, "question_id": 57699897, "link": "https://stackoverflow.com/questions/57699897/uncaught-typeerror-cannot-read-property-style-of-undefined-in-javascript/57699934#57699934", "title": "Uncaught TypeError: Cannot read property &#39;style&#39; of undefined in javascript", "body": "<p>Incorrect syntax. Remove the <code>.</code> in the <code>getElementsByClassName('.box')</code>. </p>\n\n<p>If you would like to use the class selector you could use <code>document.querySelectorAll('.box')</code></p>\n"}, {"tags": [], "owner": {"reputation": 136, "user_id": 6846249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IZPyx.jpg?s=128&g=1", "display_name": "Yashar Azadvatan", "link": "https://stackoverflow.com/users/6846249/yashar-azadvatan"}, "is_accepted": false, "score": 0, "last_activity_date": 1567027475, "creation_date": 1567027475, "answer_id": 57700235, "question_id": 57699897, "link": "https://stackoverflow.com/questions/57699897/uncaught-typeerror-cannot-read-property-style-of-undefined-in-javascript/57700235#57700235", "title": "Uncaught TypeError: Cannot read property &#39;style&#39; of undefined in javascript", "body": "<p>use this (by Id name):</p>\n\n<pre><code>document.getElementById('box').setAttribute(\"style\", \"width:100px;height:100px;background-color:#f00;\");\n</code></pre>\n\n<p>HTML:</p>\n\n<pre><code>&lt;div id=\"app\"&gt;\n    &lt;div id=\"box\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>or use this (by class name) :</p>\n\n<pre><code>document.getElementsByClassName('box')[0].setAttribute(\"style\", \"width:100px;height:100px;background-color:#f00;\");\n</code></pre>\n\n<p>HTML:</p>\n\n<pre><code>&lt;div id=\"app\"&gt;\n    &lt;div class=\"box\" &gt;&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 957, "user_id": 9123228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/197bd01668b668623b78b78d65375f9f?s=128&d=identicon&r=PG&f=1", "display_name": "txemsukr", "link": "https://stackoverflow.com/users/9123228/txemsukr"}, "edited": false, "score": 2, "creation_date": 1585923609, "post_id": 61013807, "comment_id": 107943241, "body": "Please add some text to explain your answer, a code snippet only won&#39;t help the OP to improve :)"}, {"owner": {"reputation": 3854, "user_id": 10607772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e478f2600848a3dc5238b7ffb2e148f6?s=128&d=identicon&r=PG", "display_name": "double-beep", "link": "https://stackoverflow.com/users/10607772/double-beep"}, "edited": false, "score": 0, "creation_date": 1585939408, "post_id": 61013807, "comment_id": 107951443, "body": "Welcome to Stack Overflow! While this code may solve the question, <a href=\"//meta.stackexchange.com/q/114762\">including an explanation</a> of how and why this solves the problem would really help to improve the quality of your post, and probably result in more up-votes. Remember that you are answering the question for readers in the future, not just the person asking now. Please <a href=\"https://stackoverflow.com/posts/61013807/edit\">edit</a> your answer to add explanations and give an indication of what limitations and assumptions apply. <a href=\"/review/low-quality-posts/25766955\">From Review</a>"}], "tags": [], "owner": {"reputation": 1, "user_id": 13212045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad81ef105a81fb12a276b100a3ca2108?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Brum", "link": "https://stackoverflow.com/users/13212045/lucas-brum"}, "is_accepted": false, "score": 0, "last_activity_date": 1586038795, "last_edit_date": 1586038795, "creation_date": 1585923159, "answer_id": 61013807, "question_id": 57699897, "link": "https://stackoverflow.com/questions/57699897/uncaught-typeerror-cannot-read-property-style-of-undefined-in-javascript/61013807#61013807", "title": "Uncaught TypeError: Cannot read property &#39;style&#39; of undefined in javascript", "body": "<pre><code>&lt;script&gt;\n    var boxElement = document.querySelector('.box')\n\n    boxElement.style.width = '100px'\n    boxElement.style.height = '100px'\n    boxElement.style.backgroundColor = '#f00'\n&lt;/script&gt;\n</code></pre>\n\n<p>This is my resolution for the problem, he needs use a 'px'after CSS code</p>\n"}], "owner": {"reputation": 79, "user_id": 11420127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecb34d76090a9a09678b78812d7e885f?s=128&d=identicon&r=PG&f=1", "display_name": "Eduardo", "link": "https://stackoverflow.com/users/11420127/eduardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1503, "favorite_count": 0, "accepted_answer_id": 57699918, "answer_count": 4, "score": -1, "last_activity_date": 1586038795, "creation_date": 1567025547, "question_id": 57699897, "link": "https://stackoverflow.com/questions/57699897/uncaught-typeerror-cannot-read-property-style-of-undefined-in-javascript", "title": "Uncaught TypeError: Cannot read property &#39;style&#39; of undefined in javascript", "body": "<p>I am trying to set some properties of a div element using javascript, but the properties are not being set, I used the inspect mode in the browser, and It says:\nUncaught TypeError: Cannot read property 'style' of undefined</p>\n\n<p>I already tried to use an ID attribute to get the element and even querySelector method but nothing changes</p>\n\n<pre><code>&lt;body&gt;\n    &lt;div id=\"app\"&gt;\n        &lt;div class=\"box\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;script&gt;\n        var boxElement = document.getElementsByClassName('.box')[0];\n\n        boxElement.style.width = 100;\n        boxElement.style.height = 100;\n        boxElement.style.backgroundColor = '#f00';\n    &lt;/script&gt;\n   &lt;/body&gt;\n</code></pre>\n"}, {"tags": ["javascript", "node.js", "stream", "listener"], "answers": [{"comments": [{"owner": {"reputation": 574451, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "edited": false, "score": 0, "creation_date": 1567028104, "post_id": 57700102, "comment_id": 101844604, "body": "This isn&#39;t really what the OP was asking.  They are asking about <b><i>listeners</i></b> such as <code>s.on(&#39;close&#39;, someFunction)</code>.  Your <code>console.log()</code> statements are looking at <b><i>methods</i></b>, not listeners.  Plus, when the whole object becomes eligible for garbage collection, the object and all those properties will be cleaned up just fine."}], "tags": [], "owner": {"reputation": 9, "user_id": 11988760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cea62c8261f3c162db3401f1f499da7?s=128&d=identicon&r=PG&f=1", "display_name": "Genrikh", "link": "https://stackoverflow.com/users/11988760/genrikh"}, "is_accepted": false, "score": 0, "last_activity_date": 1567026772, "creation_date": 1567026772, "answer_id": 57700102, "question_id": 57699877, "link": "https://stackoverflow.com/questions/57699877/are-stream-listeners-automatically-removed-when-the-stream-is-destroyed/57700102#57700102", "title": "Are stream listeners automatically removed when the stream is destroyed", "body": "<p>No, it isn't. If you destroy stream in node js callbacks will still be linked to a stream object.</p>\n\n<p>Try to do this and look to the console:</p>\n\n<pre><code>const Readable = require(\"stream\").Readable;\nconst s = new Readable();\n\ns.onClose = () =&gt; console.log;\ns.onPipeEnd = () =&gt; console.log;\ns.destroy();\n\nconsole.log(String(s.onClose));\nconsole.log(String(s.onPipeEnd));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 574451, "user_id": 816620, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Xu7hp.jpg?s=128&g=1", "display_name": "jfriend00", "link": "https://stackoverflow.com/users/816620/jfriend00"}, "is_accepted": true, "score": 0, "last_activity_date": 1567028418, "last_edit_date": 1567028418, "creation_date": 1567028059, "answer_id": 57700330, "question_id": 57699877, "link": "https://stackoverflow.com/questions/57699877/are-stream-listeners-automatically-removed-when-the-stream-is-destroyed/57700330#57700330", "title": "Are stream listeners automatically removed when the stream is destroyed", "body": "<blockquote>\n  <p>I am unsure if I should clean up a listener on a stream in node when I destroy the stream</p>\n</blockquote>\n\n<p>You do not need to clean up listeners on a stream that is finished.  Once the stream is finished and it goes out of scope or you clean up any references to the stream, then it will become eligible for garbage collection because there will no longer be any code that can reach that stream object and there will be no outstanding asynchronous operations that could trigger any more events.</p>\n\n<p>It's important to understand that your listeners do not prevent the object from being garbage collected.  So, you don't need to clean them up in order for the object to become eligible for garbage collection.  Garbage collection is only about active code (timers, asynchronous operations, or code that has direct references to your object) that can still reach the object.</p>\n\n<p>So, with no active references to the stream, the finished stream object and your listeners will all be garbage collected (and thus cleaned up automatically by the system).  You do not need to manually clean them up.</p>\n"}], "owner": {"reputation": 43, "user_id": 6226089, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209353416054713/picture?type=large", "display_name": "Bob Carver", "link": "https://stackoverflow.com/users/6226089/bob-carver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 57700330, "answer_count": 2, "score": 0, "last_activity_date": 1567080061, "creation_date": 1567025443, "last_edit_date": 1567080061, "question_id": 57699877, "link": "https://stackoverflow.com/questions/57699877/are-stream-listeners-automatically-removed-when-the-stream-is-destroyed", "title": "Are stream listeners automatically removed when the stream is destroyed", "body": "<p>I am unsure if I should clean up a listener on a stream in node when I destroy the stream - it seems like it should be done automatically</p>\n"}, {"tags": ["javascript", "html", "angularjs", "ngroute", "angularjs-components"], "comments": [{"owner": {"reputation": 10393, "user_id": 697079, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/IBtAc.jpg?s=128&g=1", "display_name": "Christopher Marshall", "link": "https://stackoverflow.com/users/697079/christopher-marshall"}, "edited": false, "score": 0, "creation_date": 1567025593, "post_id": 57699876, "comment_id": 101843733, "body": "Highly recommend using a service: <a href=\"https://docs.angularjs.org/guide/services\" rel=\"nofollow noreferrer\">docs.angularjs.org/guide/services</a>"}, {"owner": {"reputation": 2580, "user_id": 7004388, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/DCCVJ.png?s=128&g=1", "display_name": "coderpc", "link": "https://stackoverflow.com/users/7004388/coderpc"}, "reply_to_user": {"reputation": 10393, "user_id": 697079, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/IBtAc.jpg?s=128&g=1", "display_name": "Christopher Marshall", "link": "https://stackoverflow.com/users/697079/christopher-marshall"}, "edited": false, "score": 1, "creation_date": 1567102459, "post_id": 57699876, "comment_id": 101873345, "body": "Yes. I&#39;ve implemented it yesterday and was easy. @ChristopherMarshall"}], "answers": [{"comments": [{"owner": {"reputation": 2580, "user_id": 7004388, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/DCCVJ.png?s=128&g=1", "display_name": "coderpc", "link": "https://stackoverflow.com/users/7004388/coderpc"}, "edited": false, "score": 0, "creation_date": 1567102518, "post_id": 57700997, "comment_id": 101873366, "body": "Yes, this is exactly what I implemented. +1 to your explanation."}], "tags": [], "owner": {"reputation": 46815, "user_id": 5535245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnjcO.jpg?s=128&g=1", "display_name": "georgeawg", "link": "https://stackoverflow.com/users/5535245/georgeawg"}, "is_accepted": true, "score": 2, "last_activity_date": 1567033289, "creation_date": 1567033289, "answer_id": 57700997, "question_id": 57699876, "link": "https://stackoverflow.com/questions/57699876/how-do-i-establish-communication-between-independent-components-in-angularjs/57700997#57700997", "title": "How do I establish communication between independent components in AngularJS", "body": "<p>View data is destroyed when views change. Store data that needs to persist between views in a service:</p>\n\n<pre><code>app.service(\"appData\", function() {\n    var user;\n    this.setUser= val =&gt; user = val;\n    this.getUser= _ =&gt; user;\n});\n</code></pre>\n\n<p>Use that service in the component controllers:</p>\n\n<pre><code>app.component(\"home\", {\n  template: `&lt;h1&gt;Home&lt;/h1&gt;\n              Hi {{$ctrl.user}}!`,\n  controller: function HomeController(appData) {\n    this.user = \"John.\";\n    appData.setUser(this.user);\n  }\n});\n\napp.component(\"about\", {\n  template: `&lt;h1&gt;About&lt;/h1&gt;`,\n  controller: function AboutController(appData) {\n      this.user = appData.getUser();\n  }\n});\n</code></pre>\n\n<p>For more information, see</p>\n\n<ul>\n<li><a href=\"https://docs.angularjs.org/guide/services#creating-services\" rel=\"nofollow noreferrer\">AngularJS Developer Guide - Creating services</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 2580, "user_id": 7004388, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/DCCVJ.png?s=128&g=1", "display_name": "coderpc", "link": "https://stackoverflow.com/users/7004388/coderpc"}, "edited": false, "score": 0, "creation_date": 1567102562, "post_id": 57706767, "comment_id": 101873383, "body": "<code>sessionStorage</code> is nowhere related to my question. This answer seems irrelevant."}], "tags": [], "owner": {"reputation": 55, "user_id": 6600552, "user_type": "registered", "profile_image": "https://graph.facebook.com/1165112633552610/picture?type=large", "display_name": "Kotha Praneeth Sai", "link": "https://stackoverflow.com/users/6600552/kotha-praneeth-sai"}, "is_accepted": false, "score": 0, "last_activity_date": 1567069662, "creation_date": 1567069662, "answer_id": 57706767, "question_id": 57699876, "link": "https://stackoverflow.com/questions/57699876/how-do-i-establish-communication-between-independent-components-in-angularjs/57706767#57706767", "title": "How do I establish communication between independent components in AngularJS", "body": "<p>@georgeawg already answered the question sufficiently. But I feel one should use sessionStorage when storing username or other userDetails because the date in the service gets erased when the user redirects to other pages. Hence storing it once in the sessionStorage can be very helpful.</p>\n\n<pre><code>// Create item:\nvar myObj = { username: 'admin', privilages: 'RAED' };\n$window.sessionStorage.setItem(key, JSON.stringify(myObj));\n\n// Read item:\nvar item = JSON.parse($window.sessionStorage.getItem(key));\n</code></pre>\n"}], "owner": {"reputation": 2580, "user_id": 7004388, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/DCCVJ.png?s=128&g=1", "display_name": "coderpc", "link": "https://stackoverflow.com/users/7004388/coderpc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 57700997, "answer_count": 2, "score": 0, "last_activity_date": 1567069662, "creation_date": 1567025440, "last_edit_date": 1567033422, "question_id": 57699876, "link": "https://stackoverflow.com/questions/57699876/how-do-i-establish-communication-between-independent-components-in-angularjs", "title": "How do I establish communication between independent components in AngularJS", "body": "<p>I have a <em>Nav</em> in which there are <em>two</em> pages representing two AngularJS components - <code>Home</code> and <code>About</code>. I want to pass <code>user</code> name from <code>Home</code> component to <code>About</code> component. </p>\n\n<pre><code>&lt;div ng-app=\"myApp\"&gt;\n  &lt;ul&gt;\n    &lt;li&gt;&lt;a href=\"#!/home\"&gt;Home&lt;/a&gt;\n    &lt;/li&gt;\n    &lt;li&gt;&lt;a href=\"#!/about\"&gt;About&lt;/a&gt;\n    &lt;/li&gt;\n  &lt;/ul&gt;\n  &lt;div ng-view&gt;&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I tried to establish the component communication using <code>bindings</code> with <code>&lt;</code> but no luck. Basically, they are both independent components. How do I pass data from one component to another in this scenario. </p>\n\n<p>I've created a working example using <a href=\"https://codepen.io/chilupa/pen/rNBmdxj\" rel=\"nofollow noreferrer\">CodePen</a>. Could anyone please guide how to do it. </p>\n\n<p><strong>Components and Route Config</strong></p>\n\n<pre><code>app.component(\"home\", {\n  template: `&lt;h1&gt;Home&lt;/h1&gt;\n              Hi {{$ctrl.user}}!`,\n  controller: function HomeController() {\n    this.user = \"John.\";\n  }\n});\n\napp.component(\"about\", {\n  template: `&lt;h1&gt;About&lt;/h1&gt;`,\n  controller: function AboutController() {}\n});\n\napp.config(function($routeProvider) {\n  $routeProvider\n    .when(\"/home\", {\n      template: \"&lt;home&gt;&lt;/home&gt;\"\n    })\n    .when(\"/about\", {\n      template: \"&lt;about&gt;&lt;/about&gt;\"\n    })\n    .otherwise({\n      redirectTo: \"/home\"\n    });\n});\n</code></pre>\n"}, {"tags": ["javascript", "string", "wildcard"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567025435, "post_id": 57699816, "comment_id": 101843669, "body": "Use <code>Array.filter()</code> with a function that tests whether the length is 11 and the first character is <code>_</code>."}, {"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1567025447, "post_id": 57699816, "comment_id": 101843673, "body": "Have you looked at <code>filter</code>, <code>indexOf</code>, and <code>length</code>?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1567025501, "post_id": 57699816, "comment_id": 101843702, "body": "Welcome to Stack Overflow! StackOverflow is not a free coding service. You&#39;re expected to <a href=\"https://meta.stackoverflow.com/questions/261592/how-much-research-effort-is-expected-of-stack-overflow-users\">try to solve the problem first</a>. Please update your question to show what you have already tried in a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. For further information, please see <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>, and take the <a href=\"https://stackoverflow.com/tour\">tour</a> :)"}, {"owner": {"reputation": 1698, "user_id": 9342544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28d5bc1e5d8cc97ca08957458ae8a61?s=128&d=identicon&r=PG&f=1", "display_name": "Neel Rathod", "link": "https://stackoverflow.com/users/9342544/neel-rathod"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567025852, "post_id": 57699816, "comment_id": 101843829, "body": "Completely agree with @Barmar."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 11984202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbadc11258aec13c6b98b908523127ab?s=128&d=identicon&r=PG&f=1", "display_name": "b0nfire", "link": "https://stackoverflow.com/users/11984202/b0nfire"}, "edited": false, "score": 0, "creation_date": 1567026350, "post_id": 57699880, "comment_id": 101844002, "body": "@Taki If I want to getelementsbyclassname(&quot;_(RANDOM CHARACTERS)&quot;) is this possible?"}], "tags": [], "owner": {"reputation": 15224, "user_id": 7328218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69d338eadf83deb112f919f4c8a6052a?s=128&d=identicon&r=PG&f=1", "display_name": "Taki", "link": "https://stackoverflow.com/users/7328218/taki"}, "is_accepted": true, "score": 2, "last_activity_date": 1567025453, "creation_date": 1567025453, "answer_id": 57699880, "question_id": 57699816, "link": "https://stackoverflow.com/questions/57699816/getting-all-the-strings-that-start-with-and-end-in-10-random-characters-java/57699880#57699880", "title": "Getting all the strings that start with &quot;_&quot; and end in 10 random characters JavaScript", "body": "<p>Use <code>Array.filter()</code>, filtering words that start with <code>_</code> and have a <code>11</code> chars length ( <code>_</code> + 10 chars )</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const array = [\"rubbish3\",\"_B07TLNWCSV\",\"_A674598385\",\"_U8965H456NV\",\"crapcrap\",\"crapcrap23\"];\r\n\r\nconst result = array.filter(word =&gt; word.startsWith('_') &amp;&amp; word.length === 11);\r\n\r\nconsole.log(result);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 11984202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbadc11258aec13c6b98b908523127ab?s=128&d=identicon&r=PG&f=1", "display_name": "b0nfire", "link": "https://stackoverflow.com/users/11984202/b0nfire"}, "edited": false, "score": 0, "creation_date": 1567026327, "post_id": 57699911, "comment_id": 101843994, "body": "If I want to getelementsbyclassname(&quot;_(RANDOM CHARACTERS)&quot;) is this possible?"}], "tags": [], "owner": {"reputation": 5573, "user_id": 7692859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb1b961fa00ddbd4fccc08e070762a27?s=128&d=identicon&r=PG&f=1", "display_name": "Anis R.", "link": "https://stackoverflow.com/users/7692859/anis-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1567118574, "last_edit_date": 1567118574, "creation_date": 1567025605, "answer_id": 57699911, "question_id": 57699816, "link": "https://stackoverflow.com/questions/57699816/getting-all-the-strings-that-start-with-and-end-in-10-random-characters-java/57699911#57699911", "title": "Getting all the strings that start with &quot;_&quot; and end in 10 random characters JavaScript", "body": "<p>You can use the <code>filter()</code> method and a regular expression for this:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var array = [\"rubbish3\",\"_B07TLNWCSV\",\"_A674598385\",\"_U8965H456NV\",\"crapcrap\",\"crapcrap23\"];\r\nvar filteredArray = array.filter(function(elem) {\r\n  return elem.match(/^_.{10}$/);\r\n});\r\nconsole.log(filteredArray);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Explanation of the regular expression:</p>\n\n<p><code>^_</code> => the string must start with a <code>_</code>.</p>\n\n<p><code>.{10}</code> => then we must have ten characters (<code>.</code> means any character)</p>\n\n<p><code>$</code> => end of string, i.e. the string must stop there, we can't have any more characters.</p>\n\n<p><strong>Edit:</strong> Regarding your question update, the simplest way to target these elements is to add a common class name to all of them, say:</p>\n\n<pre><code>&lt;tr id=\"_B07TLNWCSV\" class=\"data\"&gt;data&lt;/tr&gt;\n&lt;tr id=\"_B07TLNWDSA\" class=\"data\"&gt;data&lt;/tr&gt;\n&lt;tr id=\"_B07TLNWCXB\" class=\"data\"&gt;data&lt;/tr&gt;\n</code></pre>\n\n<p>And then use <code>getElementsByClassName(\"data\")</code> to retrieve the elements.</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 11984202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbadc11258aec13c6b98b908523127ab?s=128&d=identicon&r=PG&f=1", "display_name": "b0nfire", "link": "https://stackoverflow.com/users/11984202/b0nfire"}, "edited": false, "score": 0, "creation_date": 1567026423, "post_id": 57699938, "comment_id": 101844028, "body": "If I want to getelementsbyclassname(&quot;_(RANDOM CHARACTERS)&quot;) is this possible?"}, {"owner": {"reputation": 381, "user_id": 11523447, "user_type": "registered", "profile_image": "https://graph.facebook.com/898078623868825/picture?type=large", "display_name": "Adnane Ar", "link": "https://stackoverflow.com/users/11523447/adnane-ar"}, "reply_to_user": {"reputation": 33, "user_id": 11984202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbadc11258aec13c6b98b908523127ab?s=128&d=identicon&r=PG&f=1", "display_name": "b0nfire", "link": "https://stackoverflow.com/users/11984202/b0nfire"}, "edited": false, "score": 0, "creation_date": 1567026712, "post_id": 57699938, "comment_id": 101844150, "body": "Yes it&#39;s possible, but if you want my advice use <code>querySelector()</code> instead of <code>getElementsByClassName()</code>"}], "tags": [], "owner": {"reputation": 381, "user_id": 11523447, "user_type": "registered", "profile_image": "https://graph.facebook.com/898078623868825/picture?type=large", "display_name": "Adnane Ar", "link": "https://stackoverflow.com/users/11523447/adnane-ar"}, "is_accepted": false, "score": 0, "last_activity_date": 1567026085, "last_edit_date": 1567026085, "creation_date": 1567025774, "answer_id": 57699938, "question_id": 57699816, "link": "https://stackoverflow.com/questions/57699816/getting-all-the-strings-that-start-with-and-end-in-10-random-characters-java/57699938#57699938", "title": "Getting all the strings that start with &quot;_&quot; and end in 10 random characters JavaScript", "body": "<p>Here is a simple code that you might looking for. \nHope my code would be useful!</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const array=[\"rubbish3\",\"_B07TLNWCSV\",\"_A674598385\",\"_U8965H456NV\",\"crapcrap\",\"crapcrap23\", \"_123456789123\"];\r\nlet newArray=[];\r\narray.forEach(function(word){\r\n  if(word.length==11&amp;&amp;word[0]==\"_\") newArray.push(word);\r\n});\r\n\r\nconsole.log(newArray);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 11984202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbadc11258aec13c6b98b908523127ab?s=128&d=identicon&r=PG&f=1", "display_name": "b0nfire", "link": "https://stackoverflow.com/users/11984202/b0nfire"}, "edited": false, "score": 0, "creation_date": 1567026426, "post_id": 57700016, "comment_id": 101844030, "body": "If I want to getelementsbyclassname(&quot;_(RANDOM CHARACTERS)&quot;) is this possible?"}], "tags": [], "owner": {"reputation": 1698, "user_id": 9342544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28d5bc1e5d8cc97ca08957458ae8a61?s=128&d=identicon&r=PG&f=1", "display_name": "Neel Rathod", "link": "https://stackoverflow.com/users/9342544/neel-rathod"}, "is_accepted": false, "score": 0, "last_activity_date": 1567026520, "last_edit_date": 1567026520, "creation_date": 1567026256, "answer_id": 57700016, "question_id": 57699816, "link": "https://stackoverflow.com/questions/57699816/getting-all-the-strings-that-start-with-and-end-in-10-random-characters-java/57700016#57700016", "title": "Getting all the strings that start with &quot;_&quot; and end in 10 random characters JavaScript", "body": "<p>You just need to use <code>filter()</code> along with hardcoded index <code>[0]</code> and string length <code>11</code>.\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const array = [\"rubbish3\",\"_B07TLNWCSV\",\"_A674598385\",\"_U8965H456NV\",\"crapcrap\",\"crapcrap23\"];\r\n\r\nconst result = array.filter((f) =&gt; { return f[0] === '_' &amp;&amp; f.length === 11 });\r\n\r\nconsole.log(result);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 33, "user_id": 11984202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbadc11258aec13c6b98b908523127ab?s=128&d=identicon&r=PG&f=1", "display_name": "b0nfire", "link": "https://stackoverflow.com/users/11984202/b0nfire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 57699880, "answer_count": 4, "score": 0, "last_activity_date": 1567118574, "creation_date": 1567025165, "last_edit_date": 1567030315, "question_id": 57699816, "link": "https://stackoverflow.com/questions/57699816/getting-all-the-strings-that-start-with-and-end-in-10-random-characters-java", "title": "Getting all the strings that start with &quot;_&quot; and end in 10 random characters JavaScript", "body": "<p>I have this array:</p>\n\n<pre><code>Array = [\"rubbish3\",\"_B07TLNWCSV\",\"_A674598385\",\"_U8965H456NV\",\"crapcrap\",\"crapcrap23]\n</code></pre>\n\n<p>I want all the values that start with \"_\" and are followed by 10 random characters.</p>\n\n<p>So the return in this instance would be </p>\n\n<pre><code>Array = [\"_B07TLNWCSV\",\"_A674598385\",\"_U8965H456NV\"]\n</code></pre>\n\n<p>How would I do this in Javascript?</p>\n\n<h1>UPDATE</h1>\n\n<p>Say If I want to get all the elements on a webpage that follow the same rule,</p>\n\n<p>On a webpage the element is like so:</p>\n\n<pre><code>&lt;tr id=\"_B07TLNWCSV\"&gt;data&lt;/tr&gt;\n</code></pre>\n\n<p>how would I get all table row elements that follow the rule \"_(10 RANDOM CHARS)\"</p>\n\n<p>I understand that <strong>querySelectorAll</strong> which get all the elements that follow the rule but I can't get it working.</p>\n"}, {"tags": ["javascript", "npm", "webpack", "image-compression", "webp"], "answers": [{"comments": [{"owner": {"reputation": 590, "user_id": 1618992, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/025ed8598ba19e4b35479ea0f8017efe?s=128&d=identicon&r=PG", "display_name": "nickelman", "link": "https://stackoverflow.com/users/1618992/nickelman"}, "edited": false, "score": 0, "creation_date": 1567029808, "post_id": 57700534, "comment_id": 101845088, "body": "Okay - but that is then using a different setup than as a plugin."}, {"owner": {"reputation": 1473, "user_id": 9430588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WjHQS.jpg?s=128&g=1", "display_name": "Igor Bykov", "link": "https://stackoverflow.com/users/9430588/igor-bykov"}, "reply_to_user": {"reputation": 590, "user_id": 1618992, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/025ed8598ba19e4b35479ea0f8017efe?s=128&d=identicon&r=PG", "display_name": "nickelman", "link": "https://stackoverflow.com/users/1618992/nickelman"}, "edited": false, "score": 0, "creation_date": 1567058053, "post_id": 57700534, "comment_id": 101850439, "body": "@nickelman It is indeed. Yet, imagemin itself doesn&#39;t convert your files into anything. It <i>optimizes</i> already existing images. So if you already have webp images, your setup should work. In case you want to generate them, then, well, you need something apart from imagemin. I guess you might use imagemin-webp &amp; imagemin as plugin in the same time. I use another optimization plugin just because I preferred it."}], "tags": [], "owner": {"reputation": 1473, "user_id": 9430588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WjHQS.jpg?s=128&g=1", "display_name": "Igor Bykov", "link": "https://stackoverflow.com/users/9430588/igor-bykov"}, "is_accepted": true, "score": 1, "last_activity_date": 1567029470, "creation_date": 1567029470, "answer_id": 57700534, "question_id": 57699807, "link": "https://stackoverflow.com/questions/57699807/webpack-imagemin-plugin-to-compress-jpg-png-and-create-webp/57700534#57700534", "title": "Webpack imagemin plugin to compress jpg, png and create webp?", "body": "<p>There's already an answer <a href=\"https://stackoverflow.com/a/55779716/9430588\">here</a> though the question wasn't precisely the same.</p>\n\n<p>I guess what you miss is <code>imageminWebp</code> function. You may check it out in linked repo (webpack.common.js <a href=\"https://github.com/Uzwername/base-react-webpack-config/blob/1ec3c5e262fd0ceb5746acdbfb3be030af7f4d25/webpack.common.js#L22\" rel=\"nofollow noreferrer\">lines 22-26</a>).</p>\n"}], "owner": {"reputation": 590, "user_id": 1618992, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/025ed8598ba19e4b35479ea0f8017efe?s=128&d=identicon&r=PG", "display_name": "nickelman", "link": "https://stackoverflow.com/users/1618992/nickelman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 945, "favorite_count": 1, "accepted_answer_id": 57700534, "answer_count": 1, "score": 1, "last_activity_date": 1567029470, "creation_date": 1567025084, "question_id": 57699807, "link": "https://stackoverflow.com/questions/57699807/webpack-imagemin-plugin-to-compress-jpg-png-and-create-webp", "title": "Webpack imagemin plugin to compress jpg, png and create webp?", "body": "<p>I'm trying to figure out how to compress my images the best way using webpack. I'm looking for a way to compress .jpg (lossy), .png, and also create .webp files for each jpg/png file. </p>\n\n<p>I tried <a href=\"https://github.com/itgalaxy/imagemin-webpack\" rel=\"nofollow noreferrer\">https://github.com/itgalaxy/imagemin-webpack</a> which seems to be working for outputting .jpg and .png files, but I cannot get to work to output .webp even if it say it should support other imagemin-packages.</p>\n\n<p>My current config for this plugin is:</p>\n\n<pre><code>const imageMinPlugin = new ImageminPlugin({\n    imageminOptions: {\n        plugins: [\n            ['webp', { quality: 50 }],\n            ['mozjpeg', { quality: 10 }],\n            ['pngquant', { quality: [0.9, 0.95]}],\n        ]\n    }\n});\n</code></pre>\n\n<p>But it seems to completely ignore the \"webp\" part, no errors or anything.\nIs there a better way to compress images using webpack that fullfills my requirements? Or do I need to do this in a different way?</p>\n"}, {"tags": ["javascript", "for-loop", "variables", "getelementsbyclassname"], "comments": [{"owner": {"reputation": 553, "user_id": 4742218, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-0wBoIjPuArI/AAAAAAAAAAI/AAAAAAAAAF8/gmwCNq5bAX8/photo.jpg?sz=128", "display_name": "noname", "link": "https://stackoverflow.com/users/4742218/noname"}, "edited": false, "score": 0, "creation_date": 1567025416, "post_id": 57699799, "comment_id": 101843657, "body": "code which you are presenting have missing <code>+</code> sign after first <code>i</code> it should be something like <code>MENU.push(&quot;menu&quot; + i + &quot;=document.getElementsByClassName(&#39;menu&quot; + i +&quot;&#39;)&quot;);</code>"}, {"owner": {"reputation": 553, "user_id": 4742218, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-0wBoIjPuArI/AAAAAAAAAAI/AAAAAAAAAF8/gmwCNq5bAX8/photo.jpg?sz=128", "display_name": "noname", "link": "https://stackoverflow.com/users/4742218/noname"}, "edited": false, "score": 0, "creation_date": 1567026185, "post_id": 57699799, "comment_id": 101843942, "body": "my other consideration is why you have so many <code>classes</code>? instead of calling classes <code>menu1, menu2</code> etc. you could have one class <code>menu</code> and if needed in your css style each class like <code>.menu:first-child, .menu:nth-child(2)</code> etc then your code would be much easier only one call to <code>var menus = document.getElementsByClassName(&#39;menu&#39;);</code> and in variable <code>menus</code> you have array of elements"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8299701, "user_type": "registered", "profile_image": "https://graph.facebook.com/1259332127498503/picture?type=large", "display_name": "Art RS", "link": "https://stackoverflow.com/users/8299701/art-rs"}, "edited": false, "score": 0, "creation_date": 1567029709, "post_id": 57699871, "comment_id": 101845066, "body": "I&#39;m already using a special attribute. I fixed the question with the HTML and a better scope, please read the whole question again and sorry for not being more specific at first."}], "tags": [], "owner": {"reputation": 381, "user_id": 11523447, "user_type": "registered", "profile_image": "https://graph.facebook.com/898078623868825/picture?type=large", "display_name": "Adnane Ar", "link": "https://stackoverflow.com/users/11523447/adnane-ar"}, "is_accepted": false, "score": 0, "last_activity_date": 1567025409, "creation_date": 1567025409, "answer_id": 57699871, "question_id": 57699799, "link": "https://stackoverflow.com/questions/57699799/how-to-declare-selectors-dynamically-in-javascript/57699871#57699871", "title": "How to declare selectors dynamically in Javascript?", "body": "<p>Why do not you just give them another special <strong>attribute</strong> juste like <code>&lt;div class=\"whatever\" specialAttribute&gt;Some Html content&lt;/div&gt;</code> ? and then use the selector just like <code>const selectors=document.querySelectorAll(\"[specialAttribute]\");</code></p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 8299701, "user_type": "registered", "profile_image": "https://graph.facebook.com/1259332127498503/picture?type=large", "display_name": "Art RS", "link": "https://stackoverflow.com/users/8299701/art-rs"}, "edited": false, "score": 0, "creation_date": 1567029529, "post_id": 57699905, "comment_id": 101845029, "body": "I fixed the question with the HTML and a better scope, MENU[i] wouldn&#39;t work, please read the whole question again and sorry for not being more specific at first."}], "tags": [], "owner": {"reputation": 106878, "user_id": 12579, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/969b153010f69ec07458fa1d9e8a413b?s=128&d=identicon&r=PG", "display_name": "Diodeus - James MacFarlane", "link": "https://stackoverflow.com/users/12579/diodeus-james-macfarlane"}, "is_accepted": false, "score": 0, "last_activity_date": 1567025586, "creation_date": 1567025586, "answer_id": 57699905, "question_id": 57699799, "link": "https://stackoverflow.com/questions/57699799/how-to-declare-selectors-dynamically-in-javascript/57699905#57699905", "title": "How to declare selectors dynamically in Javascript?", "body": "<p>If you assign the item to the ordinal position in the index it's a lot easier.</p>\n\n<pre><code>  MENU[i] = document.getElementsByClassName('menu\" + i);\n</code></pre>\n\n<p>Then MENU[1] will be the reference to the first element, etc.</p>\n"}, {"comments": [{"owner": {"reputation": 20471, "user_id": 1552587, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ed783ecfe6b4babe78d4ae5b206ef431?s=128&d=identicon&r=PG", "display_name": "Titus", "link": "https://stackoverflow.com/users/1552587/titus"}, "edited": false, "score": 0, "creation_date": 1567025716, "post_id": 57699913, "comment_id": 101843777, "body": "You should probably mention that the loop starts at <code>0</code> and the class names start at <code>1</code>."}, {"owner": {"reputation": 23, "user_id": 8299701, "user_type": "registered", "profile_image": "https://graph.facebook.com/1259332127498503/picture?type=large", "display_name": "Art RS", "link": "https://stackoverflow.com/users/8299701/art-rs"}, "edited": false, "score": 0, "creation_date": 1567029496, "post_id": 57699913, "comment_id": 101845018, "body": "I fixed the question with the HTML and a better scope, MENU[0] wouldn&#39;t work, please read the whole question again and sorry for not being more specific at first."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1567025833, "last_edit_date": 1567025833, "creation_date": 1567025616, "answer_id": 57699913, "question_id": 57699799, "link": "https://stackoverflow.com/questions/57699799/how-to-declare-selectors-dynamically-in-javascript/57699913#57699913", "title": "How to declare selectors dynamically in Javascript?", "body": "<p>You shouldn't be pushing strings, just push the result of calling the function.</p>\n\n<pre><code>MENU.push(document.getElementsByClassName('menu' + i));\n</code></pre>\n\n<p>Note that array indexes start at <code>0</code>. So <code>MENU[0]</code> will contain the elements with class <code>menu1</code>, and so on.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 8299701, "user_type": "registered", "profile_image": "https://graph.facebook.com/1259332127498503/picture?type=large", "display_name": "Art RS", "link": "https://stackoverflow.com/users/8299701/art-rs"}, "edited": false, "score": 0, "creation_date": 1567027453, "post_id": 57699975, "comment_id": 101844403, "body": "This idea doesn&#39;t apply, I added the HTML for better understanding of the question, sorry for not adding it before."}, {"owner": {"reputation": 11162, "user_id": 11619647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0MnDA.jpg?s=128&g=1", "display_name": "Emiel Zuurbier", "link": "https://stackoverflow.com/users/11619647/emiel-zuurbier"}, "edited": false, "score": 0, "creation_date": 1567027840, "post_id": 57699975, "comment_id": 101844507, "body": "So you want to select <i>all</i> of the <code>menu</code> elements at once?"}, {"owner": {"reputation": 23, "user_id": 8299701, "user_type": "registered", "profile_image": "https://graph.facebook.com/1259332127498503/picture?type=large", "display_name": "Art RS", "link": "https://stackoverflow.com/users/8299701/art-rs"}, "edited": false, "score": 0, "creation_date": 1567028648, "post_id": 57699975, "comment_id": 101844782, "body": "@EmielZuurbier I want to select all the &quot;menu1&quot; elements when I click a &quot;menu1&quot; element. I edited the post again, I&#39;m trying to improve my questions to explain better the problem."}], "tags": [], "owner": {"reputation": 11162, "user_id": 11619647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0MnDA.jpg?s=128&g=1", "display_name": "Emiel Zuurbier", "link": "https://stackoverflow.com/users/11619647/emiel-zuurbier"}, "is_accepted": false, "score": 1, "last_activity_date": 1567026987, "last_edit_date": 1567026987, "creation_date": 1567025988, "answer_id": 57699975, "question_id": 57699799, "link": "https://stackoverflow.com/questions/57699799/how-to-declare-selectors-dynamically-in-javascript/57699975#57699975", "title": "How to declare selectors dynamically in Javascript?", "body": "<p>Add to each <code>menu</code> or <code>panl</code>, etc. a generic class, for example: <code>menu</code>. So that your elements would look like:</p>\n\n<pre><code>&lt;div class=\"menu menu1\"&gt;&lt;/div&gt;\n&lt;div class=\"menu menu2\"&gt;&lt;/div&gt;\n&lt;div class=\"menu menu3\"&gt;&lt;/div&gt;\n&lt;div class=\"menu menu4\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>Now you can select all of the elements with a single selector.</p>\n\n<pre><code>var menus = document.getElementsByClassName('menu');\n</code></pre>\n\n<pre><code>console.log(menus[0]); // &lt;div class=\"menu menu1\"&gt;&lt;/div&gt;\nconsole.log(menus[1]); // &lt;div class=\"menu menu2\"&gt;&lt;/div&gt;\nconsole.log(menus[2]); // &lt;div class=\"menu menu3\"&gt;&lt;/div&gt;\nconsole.log(menus[3]); // &lt;div class=\"menu menu4\"&gt;&lt;/div&gt;\n</code></pre>\n\n<p>And they are stored in a <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/HTMLCollection\" rel=\"nofollow noreferrer\"><code>HTMLCollection</code></a> which you can loop over with a <code>for</code> loop.</p>\n\n<pre><code>for (var i = 0; i &lt; menus.length; i++) {\n    console.log(menus[i]); // Logs each &lt;div class=\"menu\"&gt; element.\n}\n</code></pre>\n\n<p>Check <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByClassName\" rel=\"nofollow noreferrer\">the documentation of MDN</a> to see more examples on how to use the <code>getElementsByClassName</code> method.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 8299701, "user_type": "registered", "profile_image": "https://graph.facebook.com/1259332127498503/picture?type=large", "display_name": "Art RS", "link": "https://stackoverflow.com/users/8299701/art-rs"}, "edited": false, "score": 0, "creation_date": 1567029659, "post_id": 57700197, "comment_id": 101845058, "body": "I fixed the question with the HTML and a better scope, [class^=menu] wouldn&#39;t work, please read the whole question again and sorry for not being more specific at first."}, {"owner": {"reputation": 20471, "user_id": 1552587, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ed783ecfe6b4babe78d4ae5b206ef431?s=128&d=identicon&r=PG", "display_name": "Titus", "link": "https://stackoverflow.com/users/1552587/titus"}, "reply_to_user": {"reputation": 23, "user_id": 8299701, "user_type": "registered", "profile_image": "https://graph.facebook.com/1259332127498503/picture?type=large", "display_name": "Art RS", "link": "https://stackoverflow.com/users/8299701/art-rs"}, "edited": false, "score": 0, "creation_date": 1567030140, "post_id": 57700197, "comment_id": 101845152, "body": "@ArtRS My second example will generate the variables as you originally had them so you won&#39;t have to change anything else (it will create the <code>menu1</code>, <code>menu2</code>, <code>menu3</code>, etc. variables). Adding a property to <code>window</code> (eg: <code>window.menu1 = ....</code>) with create a global variable (you can access it just like <code>menu1.addEventListener....</code>)."}], "tags": [], "owner": {"reputation": 20471, "user_id": 1552587, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ed783ecfe6b4babe78d4ae5b206ef431?s=128&d=identicon&r=PG", "display_name": "Titus", "link": "https://stackoverflow.com/users/1552587/titus"}, "is_accepted": true, "score": 0, "last_activity_date": 1567027240, "creation_date": 1567027240, "answer_id": 57700197, "question_id": 57699799, "link": "https://stackoverflow.com/questions/57699799/how-to-declare-selectors-dynamically-in-javascript/57700197#57700197", "title": "How to declare selectors dynamically in Javascript?", "body": "<p>You can use <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll\" rel=\"nofollow noreferrer\"><code>querySelectorAll</code></a>.</p>\n\n<p>Something like this:</p>\n\n<pre><code>const selector = '';\nfor (let i = 1; i &lt;= 4; i++) {\n  selector += `${selector ? ', ' : ''}menu${i}, panel${i}, navprev${i}, navrtrn${i}, navnext${i}`\n}\n\ndocument.querySelectorAll(selector).forEach(element =&gt; {\n  element.addEventListener('click', (event) =&gt; {\n    // check if it is a menu:\n    if (event.target.matches('[class^=menu]')) {\n       // a menu was clicked\n    }\n  });\n});\n</code></pre>\n\n<p>If you don't want to change any of your other code, you can do this:</p>\n\n<pre><code>const classNamePrefixes = ['menu', 'panel', 'navprev', 'navrtrn', 'navnext'];\nconst varNameAndClassNamePrefix = classNamePrefixes.map((cnp) =&gt; {\n  const varName = cnp.replace('nav', '').replace('panel', 'panl');\n  return {\n    varName,\n    cnp\n  };\n});\n\nfor (let i = 1; i &lt;= 4; i++) {\n  varNameAndClassNamePrefix.forEach(({ varName, cnp }) =&gt; {\n     window[`${varName}${i}`] = document.getElementsByClassName(`${cnp}${i}`)\n  });\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8299701, "user_type": "registered", "profile_image": "https://graph.facebook.com/1259332127498503/picture?type=large", "display_name": "Art RS", "link": "https://stackoverflow.com/users/8299701/art-rs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 57700197, "answer_count": 5, "score": 0, "last_activity_date": 1567028538, "creation_date": 1567025056, "last_edit_date": 1567028538, "question_id": 57699799, "link": "https://stackoverflow.com/questions/57699799/how-to-declare-selectors-dynamically-in-javascript", "title": "How to declare selectors dynamically in Javascript?", "body": "<p>I've repetitive variables declarations, I think they can be improved with a for-loop, but my attempt fail.</p>\n\n<p>I tried a for-loop declarer for an array but my syntax doesn't work.</p>\n\n<p>I've this \"Working code\":</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>\n&lt;div class =\"menu1 item1-1\"&gt;&lt;/div&gt;\n&lt;div class =\"menu1 item1-2\"&gt;&lt;/div&gt;\n&lt;div class =\"menu1 item1-3\"&gt;&lt;/div&gt;\n&lt;div class =\"menu1 item1-4\"&gt;&lt;/div&gt;\n\n&lt;div class =\"menu2 item2-1\"&gt;&lt;/div&gt;\n&lt;div class =\"menu2 item2-2\"&gt;&lt;/div&gt;\n&lt;div class =\"menu2 item2-3\"&gt;&lt;/div&gt;\n&lt;div class =\"menu2 item2-4\"&gt;&lt;/div&gt;\n\n&lt;div class =\"menu3 item3-1\"&gt;&lt;/div&gt;\n&lt;div class =\"menu3 item3-2\"&gt;&lt;/div&gt;\n&lt;div class =\"menu3 item3-3\"&gt;&lt;/div&gt;\n&lt;div class =\"menu3 item3-4\"&gt;&lt;/div&gt;\n\n&lt;div class =\"menu4 item4-1\"&gt;&lt;/div&gt;\n&lt;div class =\"menu4 item4-2\"&gt;&lt;/div&gt;\n&lt;div class =\"menu4 item4-3\"&gt;&lt;/div&gt;\n&lt;div class =\"menu4 item4-4\"&gt;&lt;/div&gt;\n\n</code></pre>\n\n<pre><code>\nvar menu1 = document.getElementsByClassName('menu1');\nvar menu2 = document.getElementsByClassName('menu2');\nvar menu3 = document.getElementsByClassName('menu3');\nvar menu4 = document.getElementsByClassName('menu4');\n\nfor (let i = 1; i &lt; menu1.length; i++) {\n\n    menu1[i].addEventListener('click', function(){ menu1[i].classList.add(\"test\"); });\n}\nfor (let i = 1; i &lt; menu2.length; i++) {\n\n    menu2[i].addEventListener('click', function(){ menu2[i].classList.add(\"test\"); });\n}\nfor (let i = 1; i &lt; menu3.length; i++) {\n\n    menu3[i].addEventListener('click', function(){ menu3[i].classList.add(\"test\"); });\n}\nfor (let i = 1; i &lt; menu4.length; i++) {\n\n    menu4[i].addEventListener('click', function(){ menu4[i].classList.add(\"test\"); });\n}\n\n\n</code></pre>\n\n<p>My attempt to reduce it it was this:</p>\n\n<pre><code>\nvar MENU = [];\n\nfor (let i = 1; i &lt;= 4; i++) {\n\n  MENU.push(\"menu\" + i + =document.getElementsByClassName('menu' + i +));\n\n}\nfor (let j = 1; j &lt; 5; j++) {\n    for (let i = 0; i &lt; MENU[j].length; i++) {\n        MENU[j][i].addEventListener('click', function(){ MENU[j][i].classList.add(\"test\"); });\n    }\n}\n</code></pre>\n\n<p>expected result:</p>\n\n<p>the same result as the \"Working code\":</p>\n\n<p>when I click on a \"menu1\" div:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>\n&lt;div class =\"menu1 item1-1 test\"&gt;&lt;/div&gt;\n&lt;div class =\"menu1 item1-2 test\"&gt;&lt;/div&gt;\n&lt;div class =\"menu1 item1-3 test\"&gt;&lt;/div&gt;\n&lt;div class =\"menu1 item1-4 test\"&gt;&lt;/div&gt;\n\n&lt;div class =\"menu2 item2-1\"&gt;&lt;/div&gt;\n&lt;div class =\"menu2 item2-2\"&gt;&lt;/div&gt;\n&lt;div class =\"menu2 item2-3\"&gt;&lt;/div&gt;\n&lt;div class =\"menu2 item2-4\"&gt;&lt;/div&gt;\n\n&lt;div class =\"menu3 item3-1\"&gt;&lt;/div&gt;\n&lt;div class =\"menu3 item3-2\"&gt;&lt;/div&gt;\n&lt;div class =\"menu3 item3-3\"&gt;&lt;/div&gt;\n&lt;div class =\"menu3 item3-4\"&gt;&lt;/div&gt;\n\n&lt;div class =\"menu4 item4-1\"&gt;&lt;/div&gt;\n&lt;div class =\"menu4 item4-2\"&gt;&lt;/div&gt;\n&lt;div class =\"menu4 item4-3\"&gt;&lt;/div&gt;\n&lt;div class =\"menu4 item4-4\"&gt;&lt;/div&gt;\n\n</code></pre>\n\n<p>actual error messages:\n<em>\"Unexpected token =\"</em>\n<em>\"Uncaught TypeError: MENU[0][i].addEventListener is not a function\"</em></p>\n\n<p>Edit: I've found the HUGE syntax error, is fixed but I get this error now.</p>\n\n<p>Edit2: My question was too open and not specific, I narrow it down and corrected some syntax suggested by comments.</p>\n\n<p>Edit3: I'm trying to:</p>\n\n<p>click a \"menu1\" element to select all \"menu1\" elements.\nclick a \"menu2\" element to select all \"menu2\" elements.\nclick a \"menu3\" element to select all \"menu3\" elements.\nclick a \"menu4\" element to select all \"menu4\" elements.</p>\n"}, {"tags": ["javascript", "html", "angular"], "comments": [{"owner": {"reputation": 3921, "user_id": 2050306, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/38d3c3d6d1dcea96cbe01afbba90c6d3?s=128&d=identicon&r=PG", "display_name": "robert", "link": "https://stackoverflow.com/users/2050306/robert"}, "edited": false, "score": 0, "creation_date": 1567025579, "post_id": 57699747, "comment_id": 101843727, "body": "Can you share the whole code (TS, HTML) for StatusPageComponent?"}, {"owner": {"reputation": 1311, "user_id": 5591211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dq1iO.jpg?s=128&g=1", "display_name": "Rich", "link": "https://stackoverflow.com/users/5591211/rich"}, "edited": false, "score": 0, "creation_date": 1567025668, "post_id": 57699747, "comment_id": 101843758, "body": "If it&#39;s relevant to your question, it needs to be here, not on Google Drive. As for your question, I can&#39;t see what error you are trying to link, but looking at your code, <code>item</code> is undefined when you try to access it outside of the ngFor, which you are doing with <code>{{item.wtNumber}}</code> (which is also not a prop in your class!). You also do not have <code>location</code> as a prop in your class. If I had to take a wild stab at it, you probably don&#39;t see anything in your modal because you are iterating over it and showing values that don&#39;t exist (<code>location</code>)."}, {"owner": {"reputation": 41, "user_id": 11991175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a34b1283c51473a9ce3c2160cee5a4ad?s=128&d=identicon&r=PG&f=1", "display_name": "JSGP", "link": "https://stackoverflow.com/users/11991175/jsgp"}, "reply_to_user": {"reputation": 1311, "user_id": 5591211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dq1iO.jpg?s=128&g=1", "display_name": "Rich", "link": "https://stackoverflow.com/users/5591211/rich"}, "edited": false, "score": 0, "creation_date": 1567026477, "post_id": 57699747, "comment_id": 101844056, "body": "@Rich apologies about that, I cannot upload images as I need 10 reputation to do so.  Maybe this link works? <a href=\"https://photos.app.goo.gl/C6XmGa27K3No7DcE9\" rel=\"nofollow noreferrer\">photos.app.goo.gl/C6XmGa27K3No7DcE9</a>  I&#39;ll post the code snippet of how the code looks when producing the above error"}, {"owner": {"reputation": 41, "user_id": 11991175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a34b1283c51473a9ce3c2160cee5a4ad?s=128&d=identicon&r=PG&f=1", "display_name": "JSGP", "link": "https://stackoverflow.com/users/11991175/jsgp"}, "reply_to_user": {"reputation": 3921, "user_id": 2050306, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/38d3c3d6d1dcea96cbe01afbba90c6d3?s=128&d=identicon&r=PG", "display_name": "robert", "link": "https://stackoverflow.com/users/2050306/robert"}, "edited": false, "score": 0, "creation_date": 1567027248, "post_id": 57699747, "comment_id": 101844344, "body": "@robert  I cannot post the entire code base online as it has sensitive data but here is the majority of the TS and HTML in question <a href=\"https://jsfiddle.net/JSGPL/qj8exrL4/7/\" rel=\"nofollow noreferrer\">jsfiddle.net/JSGPL/qj8exrL4/7</a>"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 11991175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a34b1283c51473a9ce3c2160cee5a4ad?s=128&d=identicon&r=PG&f=1", "display_name": "JSGP", "link": "https://stackoverflow.com/users/11991175/jsgp"}, "edited": false, "score": 0, "creation_date": 1567077351, "post_id": 57702738, "comment_id": 101859951, "body": "Thank you for your answer, I have changed the way I show the modal but still no info.  <code>wtNumber</code> and <code>location</code> both come from the the <code>this.sageApi.pullReport(unshippedUrlAddon).subscribe</code> function call inside the <code>loadUnshippedMaterial</code> function.  I had mistakenly placed <code>item.</code> in front of the <code>wtNumber</code> but have since removed it.  If I make a <code>&lt;div *ngFor=&quot;let item of dataModel.unshippedItems; let i = index&quot;&gt;</code> the parent item of my modal then I get no modal showing at all when I click the button."}], "tags": [], "owner": {"reputation": 1547, "user_id": 4321097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73ec5b7a910b8bc9589ecae6cce4f6d7?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Taleck", "link": "https://stackoverflow.com/users/4321097/christopher-taleck"}, "is_accepted": false, "score": 1, "last_activity_date": 1567050656, "creation_date": 1567050656, "answer_id": 57702738, "question_id": 57699747, "link": "https://stackoverflow.com/questions/57699747/issues-using-ngfor-on-multiple-elements/57702738#57702738", "title": "Issues Using *ngFor on Multiple Elements", "body": "<blockquote>\n  <p>Any code that I put inside of the div with the *ngFor statement doesn't show up on the modal.</p>\n</blockquote>\n\n<p>Both <code>localtion</code> and <code>wtNumber</code> do not appear in your data model.</p>\n\n<blockquote>\n  <p>If I move it to be the parent container then I get a separate error:</p>\n</blockquote>\n\n<p>This error is mostly likely related to the method you are using to show the modal. </p>\n\n<pre><code>unshippedMaterialModalShow() {\n  const modalContainer: any = document.getElementById('self-built-modal');\n  modalContainer.style.display='block'; // 'style' here is causing the error\n}\n</code></pre>\n\n<p>However, this is not the standard way to show a modal in Angular. Typically, this is done through an *ngIf binding.</p>\n\n<p>TS</p>\n\n<pre><code>unshippedMaterialModalShow() {\n  this.showModal = true;\n}\n</code></pre>\n\n<p>HTML</p>\n\n<pre><code>&lt;div\n  id=\"self-built-modal\"\n  *ngIf=\"showModal\" &lt;!-- toggle 'showModal' variable to show/hide --&gt;\n  tabindex=\"-1\"\n  role=\"dialog\"\n  aria-labelledby=\"mySmallModalLabel\"\n  aria-hidden=\"true\"\n  onload=\"loadUnshippedMaterial(item.wtNumber)\"\n&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 11991175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a34b1283c51473a9ce3c2160cee5a4ad?s=128&d=identicon&r=PG&f=1", "display_name": "JSGP", "link": "https://stackoverflow.com/users/11991175/jsgp"}, "is_accepted": false, "score": 0, "last_activity_date": 1567101274, "creation_date": 1567101274, "answer_id": 57715556, "question_id": 57699747, "link": "https://stackoverflow.com/questions/57699747/issues-using-ngfor-on-multiple-elements/57715556#57715556", "title": "Issues Using *ngFor on Multiple Elements", "body": "<p>Looks like the issue is fixed.  We added <code>unshippedItems: Array&lt;any&gt; = ['loading'];</code> to the data model so that there is always something within the array before trying to loop over it.  Now when clicking on the button the correct information is shown.</p>\n\n<p>Thank you all for your help and responses!</p>\n"}], "owner": {"reputation": 41, "user_id": 11991175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a34b1283c51473a9ce3c2160cee5a4ad?s=128&d=identicon&r=PG&f=1", "display_name": "JSGP", "link": "https://stackoverflow.com/users/11991175/jsgp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1567101274, "creation_date": 1567024761, "question_id": 57699747, "link": "https://stackoverflow.com/questions/57699747/issues-using-ngfor-on-multiple-elements", "title": "Issues Using *ngFor on Multiple Elements", "body": "<p>I'd like to show items from an array in a modal that displays after a button click inside a table.</p>\n\n<p>HTML for the button: </p>\n\n<pre><code>&lt;td class=\"col-xs-1 \"&gt;\n  &lt;button (click)=\"unshippedMaterialModalShow()\"&gt;Show&lt;/button&gt;\n&lt;/td&gt;\n</code></pre>\n\n<p>TS for the button:</p>\n\n<pre><code>  unshippedMaterialModalShow() {\n    const modalContainer: any = document.getElementById('self-built-modal');\n    modalContainer.style.display='block';\n}\n</code></pre>\n\n<p>HTML for the modal:</p>\n\n<pre><code>&lt;div\n id=\"self-built-modal\"\n tabindex=\"-1\"\n role=\"dialog\"\n aria-labelledby=\"mySmallModalLabel\"\n aria-hidden=\"true\"\n onload=\"loadUnshippedMaterial(item.wtNumber)\"\n &gt;\n &lt;div *ngFor=\"let item of dataModel.unshippedItems; let i = index\"&gt;{{item.location}}&lt;/div&gt;\n &lt;div id=\"overlay\"&gt;&lt;/div&gt;\n &lt;div id=\"modal-contents\"&gt;\n   &lt;div id=\"modal-header\"&gt;\n\n      &lt;button\n        id=\"unshipped-modal-close\"\n        type=\"button\"\n        (click)=\"unshippedMaterialModalHide()\"\n        aria-label=\"Close\"\n      &gt;\n        &lt;span aria-hidden=\"true\"&gt;&amp;times;&lt;/span&gt;\n      &lt;/button&gt;\n      &lt;hr&gt;\n      Unshipped Material Modal\n       {{item.wtNumber}}\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Here is my DataModel component:</p>\n\n<pre><code>    customer: string;\n    address: string;\n    workPerformed: string;\n    assignedTo: string;\n    statusCode: string;\n    steps: Array&lt;any&gt; = [];\n    wts: Array&lt;any&gt; = [];\n    subdivisions: Array&lt;any&gt; = [];\n    orders: Array&lt;any&gt; = [];\n    ordersLM: Array&lt;any&gt; = [];\n    tracking: string;\n    loaded: Array&lt;any&gt; = [];\n    loadtech: Array&lt;any&gt; = [];\n    salesorder: string;\n    statusCodes: string;\n    techid: string;\n    statuscomment: string;\n    newtracking: string;\n    finaltracking: string;\n    leadmanReport: Array&lt;any&gt; = [];\n    redFlag: string;\n    miscTech: Array&lt;any&gt; = [];\n    unshippedItems: Array&lt;any&gt; = [];\n}\n</code></pre>\n\n<p>Any code that I put inside of the <code>div</code> with the <code>*ngFor</code> statement doesn't show up on the modal. If I move it to be the parent container then I get a separate error: \n<a href=\"https://drive.google.com/file/d/1OvbX7Z8rbsy0Brdk1ey_SYNmbluO-ghl/view?usp=sharing\" rel=\"nofollow noreferrer\">https://drive.google.com/file/d/1OvbX7Z8rbsy0Brdk1ey_SYNmbluO-ghl/view?usp=sharing</a></p>\n\n<p>I have another modal on the page that uses an <code>*ngFor</code> statement that displays the information it's supposed to correctly but I was unsure if it affected this modal or not.</p>\n\n<p>I'm not that familiar with Angular so I'm unsure if I'm doing anything incorrectly.</p>\n\n<p>Any help is greatly appreciated and thank you in advance!</p>\n"}, {"tags": ["javascript", "jquery", "replace"], "comments": [{"owner": {"reputation": 12696, "user_id": 2827407, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U7Ybe.jpg?s=128&g=1", "display_name": "APAD1", "link": "https://stackoverflow.com/users/2827407/apad1"}, "edited": false, "score": 0, "creation_date": 1567025300, "post_id": 57699725, "comment_id": 101843603, "body": "Code appears to be working, the problem is that this line: <code>var $el = $(this).parent().children().find(&#39;span&#39;);</code> is only going to target the last <code>span</code> element within the container. That&#39;s why no matter which <code>input</code> you change the text in, only the last <code>input</code> gets replaced with the <code>span</code> containing that text. Look into using jQuery&#39;s <a href=\"https://api.jquery.com/each/\" rel=\"nofollow noreferrer\">each method</a> to loop through each span."}, {"owner": {"reputation": 3170, "user_id": 4864334, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f1b7d178b5bbbcda407f0642f60c6115?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4864334/paul"}, "reply_to_user": {"reputation": 12696, "user_id": 2827407, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U7Ybe.jpg?s=128&g=1", "display_name": "APAD1", "link": "https://stackoverflow.com/users/2827407/apad1"}, "edited": false, "score": 0, "creation_date": 1567025355, "post_id": 57699725, "comment_id": 101843626, "body": "@APAD1 Any ideas on what I could change it to?"}, {"owner": {"reputation": 12696, "user_id": 2827407, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U7Ybe.jpg?s=128&g=1", "display_name": "APAD1", "link": "https://stackoverflow.com/users/2827407/apad1"}, "edited": false, "score": 0, "creation_date": 1567025407, "post_id": 57699725, "comment_id": 101843652, "body": "Updated my comment, basically you need to loop over each <code>span</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567025692, "post_id": 57699725, "comment_id": 101843769, "body": "Have you considered using the <code>contenteditable</code> attribute?"}, {"owner": {"reputation": 3170, "user_id": 4864334, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f1b7d178b5bbbcda407f0642f60c6115?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4864334/paul"}, "reply_to_user": {"reputation": 12696, "user_id": 2827407, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U7Ybe.jpg?s=128&g=1", "display_name": "APAD1", "link": "https://stackoverflow.com/users/2827407/apad1"}, "edited": false, "score": 0, "creation_date": 1567025694, "post_id": 57699725, "comment_id": 101843770, "body": "@APAD1 What would I use as the selector though? I tried putting in <code>span</code>, but this then gets all the spans. To reduce the amount of code I put in my question, I eliminated some of the html. The html is made up of looped results, so what you see in the html is that x 10. That is why I was using this <code>$(this).parent().children().find(&#39;span&#39;)</code>"}, {"owner": {"reputation": 3170, "user_id": 4864334, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f1b7d178b5bbbcda407f0642f60c6115?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4864334/paul"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567025730, "post_id": 57699725, "comment_id": 101843786, "body": "@Barmar Never heard of it. I will have to check it out. Is it a native HtML attribute, I&#39;m guessing?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567025896, "post_id": 57699725, "comment_id": 101843840, "body": "Yes, it is. Some say it&#39;s poor style, others recommend it."}], "answers": [{"comments": [{"owner": {"reputation": 3170, "user_id": 4864334, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f1b7d178b5bbbcda407f0642f60c6115?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4864334/paul"}, "edited": false, "score": 1, "creation_date": 1567085990, "post_id": 57700098, "comment_id": 101865150, "body": "Thanks for the great answer and explanation. This is perfect."}, {"owner": {"reputation": 3170, "user_id": 4864334, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f1b7d178b5bbbcda407f0642f60c6115?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4864334/paul"}, "edited": false, "score": 0, "creation_date": 1567089131, "post_id": 57700098, "comment_id": 101867133, "body": "Random question. Let&#39;s say the user types in text and realizes they want the original back, do you know if there would be a way to clear the changes?"}, {"owner": {"reputation": 12696, "user_id": 2827407, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U7Ybe.jpg?s=128&g=1", "display_name": "APAD1", "link": "https://stackoverflow.com/users/2827407/apad1"}, "reply_to_user": {"reputation": 3170, "user_id": 4864334, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f1b7d178b5bbbcda407f0642f60c6115?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4864334/paul"}, "edited": false, "score": 0, "creation_date": 1567102628, "post_id": 57700098, "comment_id": 101873416, "body": "One possibility would be to store the initial values in <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage\" rel=\"nofollow noreferrer\">localStorage</a> or in a <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies\" rel=\"nofollow noreferrer\">cookie</a> when the user clicks &quot;Edit&quot; and then you would need another button called &quot;Reset&quot; or something to that effect and then you could restore the initial value from <code>localStorage</code> or the <code>cookie</code>."}], "tags": [], "owner": {"reputation": 12696, "user_id": 2827407, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U7Ybe.jpg?s=128&g=1", "display_name": "APAD1", "link": "https://stackoverflow.com/users/2827407/apad1"}, "is_accepted": true, "score": 1, "last_activity_date": 1567027459, "last_edit_date": 1567027459, "creation_date": 1567026741, "answer_id": 57700098, "question_id": 57699725, "link": "https://stackoverflow.com/questions/57699725/changing-a-span-field-to-an-input-field-for-updating-information/57700098#57700098", "title": "Changing a span field to an input field for updating information", "body": "<p>This code could definitely be optimized, but it should get you going in the right direction. There were a few issues with your code. The issue I mentioned above, which is that your selector was only targeting the last <code>span</code> element within the parent element. We can solve that by using the <a href=\"https://api.jquery.com/each/\" rel=\"nofollow noreferrer\">each method</a> to loop over every <code>span</code> within the parent. Another issue is that you were losing the classes for your spans when you were replacing them with inputs. I've solved that by saving a list of classes for each span before replacing them with an <code>input</code> so that they can be reapplied when they are converted back to <code>spans</code>. Finally, you were firing the <code>save</code> function for all inputs on blur of any input, meaning that the user would only be able to edit one span and then when they clicked out, all inputs would have been converted back. Instead, now it will only convert back when you unfocus each specific input.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var projID = '';\r\n\r\n//Obtaining ID and Editing the projects\r\n$(document.body).on('click', '.recEdit', '[data-editable]', function() {\r\n\tprojID = $(this).parent().data('recid');\r\n\tconsole.log('Project ID is..... ' + projID);\r\n\r\n\t$(this).parent().children().find('span').each(function() {\r\n\t\tvar classList = $(this).attr('class');\r\n\t\t$input = $('&lt;input/&gt;').val($(this).text());\r\n\r\n\t\t$(this).replaceWith($input);\r\n\t\t$input.on('blur',function() {\r\n\t\t\t$(this).replaceWith('&lt;span data-editable class=\"' + classList + '\"&gt;' + $(this).val() + '&lt;/span&gt;');\r\n\t\t});\r\n\t});\r\n});</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>.recentProjectCont {\r\n\twidth: 98%;\r\n\theight: 85px;\r\n\tborder-bottom: 1px solid #ccc;\r\n\tpadding: 10px 0;\r\n\tmargin: 0 10px;\r\n\tdisplay: block;\r\n\tposition: relative;\r\n}\r\n.recentProjectImg {\r\n\twidth: 100px;\r\n\theight: 85px;\r\n\tdisplay: inline-block;\r\n\tvertical-align: top;\r\n}\r\n.recentProjectImg img {\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tobject-fit: cover;\r\n}\r\n.recProjInfoCont {\r\n\tdisplay: inline-block;\r\n\tvertical-align: top;\r\n\twidth: 80%;\r\n\theight: 100%;\r\n\tmargin-left: 20px;\r\n}\r\n.recInfoCont1, .recInfoCont2 {\r\n\theight: 100%;\r\n\tdisplay: inline-block;\r\n\tvertical-align: top;\r\n}\r\n.recInfoCont1 {\r\n\twidth: 40%;\r\n}\r\n.recInfoCont2 {\r\n\twidth: 52%;\r\n\ttext-align: right;\r\n}\r\n.recBaseFormat, .projectViews {\r\n\tletter-spacing: .1rem;\r\n\tline-height: 1.4em;\r\n\tcolor: #2f2f2f;\r\n\tdisplay: block;\r\n\tmargin-bottom: 5px;\r\n}\r\n.recProjName {\r\n\tfont-size: 1.1rem;\r\n\tfont-family: 'Muli', sans-serif;\r\n}\r\n.recInfoStat, .projectViews {\r\n\tfont-size: .7rem;\r\n\tfont-family: 'Nunito', sans-serif;\r\n}\r\n.recEdit {\r\n\tposition: absolute;\r\n\ttop: 20%;\r\n\tleft: 97%;\r\n\tcursor: pointer;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;div class=\"recentProjectCont\"&gt;\r\n\t&lt;div class=\"recProjInfoCont\"&gt;\r\n\t\t&lt;div class=\"recInfoCont1\"&gt;\r\n\t\t\t&lt;span class=\"recProjName recBaseFormat\" data-editable&gt;Name&lt;/span&gt;\r\n\t\t\t&lt;span class=\"recInfoStat recBaseFormat recAlt\" data-editable&gt;Alt&lt;/span&gt;\r\n\t\t\t&lt;span class=\"recInfoStat recBaseFormat recCat\" data-editable&gt;Category&lt;/span&gt;\r\n\t\t&lt;/div&gt;\r\n\t\t&lt;div class=\"recInfoCont2\"&gt;\r\n\t\t\t&lt;span class=\"recInfoStat recBaseFormat\" data-editable&gt;Status&lt;/span&gt;\r\n\t\t\t&lt;span class=\"recInfoStat recBaseFormat\" data-editable&gt;Creator&lt;/span&gt;\r\n\t\t&lt;/div&gt;\r\n\t&lt;/div&gt;\r\n\t&lt;div class=\"recEdit\"&gt;Edit&lt;/div&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Finally, as others have mentioned, another option would be to use the <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/contenteditable\" rel=\"nofollow noreferrer\">contenteditable attribute</a> on your spans. This is an HTML solution for editing HTML elements that are not editable by default. It essentially does the same thing you're trying to do with Javascript, but it's much cleaner. It also has <a href=\"https://caniuse.com/#feat=contenteditable\" rel=\"nofollow noreferrer\">very good browser support</a>. One drawback to this solution would be that it will not be immediately clear to the user that the element is editable like it would be with an actual button that says \"Edit.\" But there are some solutions for that as well.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;span contenteditable=\"true\"&gt;You can edit me&lt;/span&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": [], "owner": {"reputation": 381, "user_id": 11523447, "user_type": "registered", "profile_image": "https://graph.facebook.com/898078623868825/picture?type=large", "display_name": "Adnane Ar", "link": "https://stackoverflow.com/users/11523447/adnane-ar"}, "is_accepted": false, "score": 0, "last_activity_date": 1567026999, "creation_date": 1567026999, "answer_id": 57700146, "question_id": 57699725, "link": "https://stackoverflow.com/questions/57699725/changing-a-span-field-to-an-input-field-for-updating-information/57700146#57700146", "title": "Changing a span field to an input field for updating information", "body": "<p>You could use juste the <code>contenteditable</code> attribute toggle each click !</p>\n"}], "owner": {"reputation": 3170, "user_id": 4864334, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f1b7d178b5bbbcda407f0642f60c6115?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/4864334/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 57700098, "answer_count": 2, "score": 0, "last_activity_date": 1567027459, "creation_date": 1567024606, "question_id": 57699725, "link": "https://stackoverflow.com/questions/57699725/changing-a-span-field-to-an-input-field-for-updating-information", "title": "Changing a span field to an input field for updating information", "body": "<p>I am creating a way to edit dynamic content. I found a question on here that got me started in terms of changing text (spans in my case) into input fields.</p>\n\n<p>Currently, I can't figure out the following issue. When you click \"Edit\" (on the right side) the input fields replace the span (this is what I want), but when when you click outside of the input the input fields add new span fields instead of replacing the input fields.</p>\n\n<p>I am wanting the styling and the fields to constantly stay in their original place.</p>\n\n<p>Does anyone see what I am doing wrong?</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>var projID = '';\r\n\r\n\t//Obtaining ID and Editing the projects\r\n\t$(document.body).on('click', '.recEdit', '[data-editable]', function() {\r\n\t\tprojID = $(this).parent().data('recid');\r\n\t\tconsole.log('Project ID is..... ' + projID);\r\n\r\n\t\tvar $el = $(this).parent().children().find('span');\r\n\r\n\t\tvar $input = $('&lt;input/&gt;').val( $el.text() );\r\n\t\t$el.replaceWith( $input );\r\n\r\n\t\tvar save = function(){\r\n\t\t\tvar $p = $('&lt;span data-editable class=\"recBaseFormat\" /&gt;').text( $input.val() );\r\n\t\t\t$input.replaceWith( $p );\r\n\t\t};\r\n\r\n  /**\r\n    We're defining the callback with `one`, because we know that\r\n    the element will be gone just after that, and we don't want \r\n    any callbacks leftovers take memory. \r\n    Next time `p` turns into `input` this single callback \r\n    will be applied again.\r\n  */\r\n\t\t$input.one('blur', save).focus();\r\n\t});</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>.recentProjectCont {\r\n\twidth: 98%;\r\n\theight: 85px;\r\n\tborder-bottom: 1px solid #ccc;\r\n\tpadding: 10px 0;\r\n\tmargin: 0 10px;\r\n\tdisplay: block;\r\n\tposition: relative;\r\n}\r\n.recentProjectImg {\r\n\twidth: 100px;\r\n\theight: 85px;\r\n\tdisplay: inline-block;\r\n\tvertical-align: top;\r\n}\r\n.recentProjectImg img {\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tobject-fit: cover;\r\n}\r\n.recProjInfoCont {\r\n\tdisplay: inline-block;\r\n\tvertical-align: top;\r\n\twidth: 80%;\r\n\theight: 100%;\r\n\tmargin-left: 20px;\r\n}\r\n.recInfoCont1, .recInfoCont2 {\r\n\theight: 100%;\r\n\tdisplay: inline-block;\r\n\tvertical-align: top;\r\n}\r\n.recInfoCont1 {\r\n\twidth: 40%;\r\n}\r\n.recInfoCont2 {\r\n\twidth: 52%;\r\n\ttext-align: right;\r\n}\r\n.recBaseFormat, .projectViews {\r\n\tletter-spacing: .1rem;\r\n\tline-height: 1.4em;\r\n\tcolor: #2f2f2f;\r\n\tdisplay: block;\r\n\tmargin-bottom: 5px;\r\n}\r\n.recProjName {\r\n\tfont-size: 1.1rem;\r\n\tfont-family: 'Muli', sans-serif;\r\n}\r\n.recInfoStat, .projectViews {\r\n\tfont-size: .7rem;\r\n\tfont-family: 'Nunito', sans-serif;\r\n}\r\n.recEdit {\r\n\tposition: absolute;\r\n\ttop: 20%;\r\n\tleft: 97%;\r\n\tcursor: pointer;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n&lt;div class=\"recentProjectCont\"&gt;\r\n\t&lt;div class=\"recProjInfoCont\"&gt;\r\n\t\t&lt;div class=\"recInfoCont1\"&gt;\r\n\t\t\t&lt;span class=\"recProjName recBaseFormat\" data-editable&gt;Name&lt;/span&gt;\r\n\t\t\t&lt;span class=\"recInfoStat recBaseFormat recAlt\" data-editable&gt;Alt&lt;/span&gt;\r\n\t\t\t&lt;span class=\"recInfoStat recBaseFormat recCat\" data-editable&gt;Category&lt;/span&gt;\r\n\t\t&lt;/div&gt;\r\n\t\t&lt;div class=\"recInfoCont2\"&gt;\r\n\t\t\t&lt;span class=\"recInfoStat recBaseFormat\" data-editable&gt;Status&lt;/span&gt;\r\n\t\t\t&lt;span class=\"recInfoStat recBaseFormat\" data-editable&gt;Creator&lt;/span&gt;\r\n\t\t&lt;/div&gt;\r\n\t&lt;/div&gt;\r\n\t&lt;div class=\"recEdit\"&gt;Edit&lt;/div&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["javascript", "jquery", "ajax"], "comments": [{"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1567024911, "post_id": 57699722, "comment_id": 101843441, "body": "<code>$(&quot;button&quot;)</code> selects all <code>button</code> elements on the page. You&#39;re then adding a <code>click</code> event to all of those buttons. If you only want it to select buttons with an ID of <code>buttonSub</code>, use <code>$(&quot;#buttonSub&quot;)</code>, much like you did for <code>$(&quot;#buttonKomentar&quot;)</code>..."}, {"owner": {"reputation": 151, "user_id": 10467195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55b6e246a9764eb0387cb6164800120c?s=128&d=identicon&r=PG&f=1", "display_name": "minion", "link": "https://stackoverflow.com/users/10467195/minion"}, "reply_to_user": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1567025061, "post_id": 57699722, "comment_id": 101843510, "body": "@HereticMonkey Yes I did that intentionally. My goal is to have all buttons call <code>dodaj_za_news.php</code> , but only one button/form to call <code>add_comment.js</code> which is not working. However when I press button from second form with <code>id  = buttonSub</code> my <code>add_comment.js</code> is called"}, {"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1567025211, "post_id": 57699722, "comment_id": 101843564, "body": "Well, it&#39;s not at all clear what you&#39;re seeing happening. Perhaps you can use <a href=\"https://meta.stackoverflow.com/q/358992/215552\">Stack Snippets</a> to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}], "answers": [{"tags": [], "owner": {"reputation": 1518, "user_id": 10816461, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6XNsrfhxp_c/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hhVp73I4eIN1MbnU6G4TmjkKpozA/mo/photo.jpg?sz=128", "display_name": "Alex Vovchuk", "link": "https://stackoverflow.com/users/10816461/alex-vovchuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1567024887, "creation_date": 1567024887, "answer_id": 57699773, "question_id": 57699722, "link": "https://stackoverflow.com/questions/57699722/button-from-another-form-submitting-2-forms/57699773#57699773", "title": "Button from another form submitting 2 forms", "body": "<p>First form doesn't have closing tag. If it is the same in your code, then the second form is treated as a part of parent form.</p>\n"}], "owner": {"reputation": 151, "user_id": 10467195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55b6e246a9764eb0387cb6164800120c?s=128&d=identicon&r=PG&f=1", "display_name": "minion", "link": "https://stackoverflow.com/users/10467195/minion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567024959, "creation_date": 1567024595, "last_edit_date": 1567024959, "question_id": 57699722, "link": "https://stackoverflow.com/questions/57699722/button-from-another-form-submitting-2-forms", "title": "Button from another form submitting 2 forms", "body": "<p>I have 2 separate form that are working fine, but my subscribe button is calling add comment form. So when button from second form is clicked my <code>add_comment.js</code> is also called. On my website I have only buttons for subscribtion and for adding comments on one specific page. I'd like to make my <code>add_comment</code> called when form or button with specific <code>id</code> is clicked or submitted and every other button to call <code>news.js</code> which is working fine. I searched for answer but none was good for me</p>\n\n<p><strong>First Form</strong></p>\n\n<pre><code>&lt;form name =\"add_comment\" id=\"add_comment\" class=\"comment-form\"&gt;\n//some inputs name, email..\n&lt;button type=\"submit\" name=\"submit\" id=\"buttonKomentar\"&gt;Submit&lt;/button&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p><strong>Second Form</strong></p>\n\n<pre><code>&lt;form action=\"\" method=\"post\" novalidate&gt;\n&lt;input type=\"text\" class=\"form-control\" placeholder=\"Your Email\"&gt; \n&lt;button class=\"btn btn-block btn-default\" id=\"buttonSub\"&gt;Subscribe&lt;/button&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p><strong>News.js</strong></p>\n\n<pre><code>$(\"button\").click(function(e) {\n    e.preventDefault();\n    $.ajax({\n        type: \"POST\",\n        url: \"dodaj_za_news.php\",\n        data: { \n            email: $(\"#email\").val(), \n        },\n        success: function(result) {\n            $('#news').html(result);\n        },\n        error: function(result) {\n            $('#news').html(result);\n        }\n    });\n});\n</code></pre>\n\n<p><strong>add_comment.js</strong></p>\n\n<pre><code> $(document).ready(function(){\n          $(\"#buttonKomentar\").on(\"click\", function(e){\n              $.ajax({\n            type: 'post',\n            url: 'add_comment.php',\n            data: $('form').serialize(),\n            success: function (data) {\n              $('#potvrda').html(data);                }\n          });\n          });\n\n        });\n</code></pre>\n"}, {"tags": ["javascript", "canvas"], "comments": [{"owner": {"reputation": 1, "user_id": 2896180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xc4rp.jpg?s=128&g=1", "display_name": "pau87x", "link": "https://stackoverflow.com/users/2896180/pau87x"}, "edited": false, "score": 0, "creation_date": 1567025124, "post_id": 57699624, "comment_id": 101843528, "body": "Code on <a href=\"https://jsbin.com/qocipic/1/edit?html,js,output\" rel=\"nofollow noreferrer\">jsbin</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 2896180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xc4rp.jpg?s=128&g=1", "display_name": "pau87x", "link": "https://stackoverflow.com/users/2896180/pau87x"}, "edited": false, "score": 0, "creation_date": 1567032425, "post_id": 57700581, "comment_id": 101845625, "body": "I don&#39;t need to save coordinates greater than 255 for now, in fact it has a patch"}], "tags": [], "owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "is_accepted": false, "score": 0, "last_activity_date": 1567029826, "creation_date": 1567029826, "answer_id": 57700581, "question_id": 57699624, "link": "https://stackoverflow.com/questions/57699624/how-i-fix-save-the-lines-traced-in-a-canvas/57700581#57700581", "title": "How I fix save the lines traced in a canvas?", "body": "<p>Your approach clearly has a problem when one coordinate gets bigger than 255 because those numbers when converted to hexadecimal require more than two digits.</p>\n"}], "owner": {"reputation": 1, "user_id": 2896180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xc4rp.jpg?s=128&g=1", "display_name": "pau87x", "link": "https://stackoverflow.com/users/2896180/pau87x"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567029826, "creation_date": 1567024092, "last_edit_date": 1567029325, "question_id": 57699624, "link": "https://stackoverflow.com/questions/57699624/how-i-fix-save-the-lines-traced-in-a-canvas", "title": "How I fix save the lines traced in a canvas?", "body": "<p>I want to save each stroke of the canvas, but some points are not saved and in some drawings points are lost, as if I draw a flower.</p>\n\n<p>The string that is formed is saved as:\nnumber of points,\ncoordinate points (x, y).\nFor each line, all stored in hexadecimal so that they have the same length, in this example maximum number 255, that is FF.</p>\n\n<p>Ex: no_points xy xy xy no_points xy xy xy</p>\n\n<p>03 f4bf f4be f5bd 03 .....</p>\n\n<p>\"translated\" 3 244 191 244 190 245 189</p>\n\n<p>3 would be the points and other coordinates</p>\n\n<p><a href=\"https://jsbin.com/qocipic/1/edit?html,js,output\" rel=\"nofollow noreferrer\">CODE ON JSBIN</a></p>\n\n<pre><code>    var flag = false,\n        prevX = 0,\n        currX = 0,\n        prevY = 0,\n        currY = 0,\n        dot_flag = false;\n\n    var color = \"black\",\n        line_width = 1;\n\n    var current_signature = 0,\n        total_lines = [0,0],\n        str_lines = [[],[]];\n\n    function init() {\n        canvases = document.getElementsByClassName('canvassign');\n        ctxs = [];\n        w = canvases[0].width;\n        h = canvases[0].height;\n        for(var i = 0; i &lt; 3; i++) { //canvases.length just for test\n            ctxs[i] = canvases[i].getContext('2d');\n            loadSignature(i);\n            canvases[i].addEventListener(\"mousemove\", function (e) {\n                findxy('move', e)\n            }, false);\n            canvases[i].addEventListener(\"mousedown\", function (e) {\n                findxy('down', e)\n            }, false);\n            canvases[i].addEventListener(\"mouseup\", function (e) {\n                findxy('up', e)\n            }, false);\n            canvases[i].addEventListener(\"mouseout\", function (e) {\n                findxy('out', e)\n            }, false);\n        }\n    }\n\n    function findxy(res, e) {\n        if (res == 'down') {\n            prevX = currX;\n            prevY = currY;\n            currX = e.clientX - canvases[current_signature].offsetLeft;\n            currY = e.clientY - canvases[current_signature].offsetTop;\n\n            flag = true;\n            dot_flag = true;\n            if (dot_flag) {\n                ctxs[current_signature].beginPath();\n                ctxs[current_signature].fillStyle = color;\n                ctxs[current_signature].fillRect(currX, currY, 2, 2);\n                ctxs[current_signature].closePath();\n                saveDot(current_signature,currX,currY);\n                dot_flag = false;\n            }\n        }\n        if (res == 'up' || res == \"out\") {\n            flag = false;\n                saveLine(current_signature);\n        }\n        if (res == 'move') {\n            if (flag) {\n                prevX = currX;\n                prevY = currY;\n                currX = e.clientX - canvases[current_signature].offsetLeft;\n                currY = e.clientY - canvases[current_signature].offsetTop;\n                draw();\n            }\n        }\n    }\n\n    function draw() {\n        ctxs[current_signature].beginPath();\n        ctxs[current_signature].moveTo(prevX, prevY);\n        ctxs[current_signature].lineTo(currX, currY);\n        ctxs[current_signature].strokeStyle = color;\n        ctxs[current_signature].lineWidth = line_width;\n        ctxs[current_signature].stroke();\n        ctxs[current_signature].closePath();\n\n        str_lines[current_signature].push( [currX, currY] );\n    }\n\n    function getSignature(n_signature) {\n        str_points = document.getElementById(\"signature\"+(n_signature+1)).value \n        if(str_points==\"\"){\n            return;\n        }\n        cutToLines(n_signature, str_points)\n    }\n\n    function cutToLines(n_signature, str_points){ //coordenadas coordinates\n        chars = 2;\n        full_length = str_points.length;\n        str_index = 0;\n        while (str_index &lt; full_length) {\n            total_points_hex = str_points.slice(str_index, str_index+chars);\n            total_points = toDec(total_points_hex)\n            real_total_points = total_points*4;\n            begin = str_index+chars;\n            end = real_total_points+begin;\n            line = str_points.slice(begin, end);\n            drawLines(line, total_points, n_signature);\n            //console.log(\"-----\");\n            str_index = end;\n        }\n    }\n\n    function splitEvery (s, interval) {\n        var result = [];\n        if (typeof s !== 'undefined'){\n            for (var i=0; i&lt;s.length; i+=interval)\n                result.push(s.substring (i, i+interval));\n        }\n        return result;\n    }\n\n    function drawLines(line, total_points, n_signature) {\n        // console.log(\"drawing Lines(line: \"+line+\" \"+\"total_points\"+total_points+\"n_signature \"+n_signature);;\n        n = splitEvery(line, 4)\n\n        xy = splitEvery(n[0], 2);\n        // console.log(\"x2:\"+xy[0]);\n        // console.log(\"y2:\"+xy[1]);\n        x2 = toDec(xy[0]);\n        y2 = toDec(xy[1]);\n\n        if(n.length!=total_points){ //this is for testing, delete this\n            total_points = n.length; \n            console.error(\"total_points no match with the length\");\n        }\n        if (total_points==1) {\n            // console.log(xy[0]+xy[1]); this for debug\n            ctxs[n_signature].beginPath();\n            ctxs[n_signature].fillStyle = color;\n            ctxs[n_signature].fillRect(x2, y2, 2, 2);\n            ctxs[n_signature].closePath();\n            // console.log(\"dot\");\n        }\n\n        for (var i = 1; i &lt; total_points - 1; i++) { //check -1\n            x1 = x2;\n            y1 = y2;\n            xy = splitEvery(n[i], 2);\n\n            // console.log(xy[0]+xy[1]);\n            x2 = toDec(xy[0]);\n            y2 = toDec(xy[1]);\n\n            ctxs[n_signature].beginPath();\n            ctxs[n_signature].moveTo(x1, y1);\n            ctxs[n_signature].lineTo(x2, y2);\n            ctxs[n_signature].strokeStyle = color;\n            ctxs[n_signature].lineWidth = line_width;\n            ctxs[n_signature].stroke();\n            ctxs[n_signature].closePath();\n        }\n    }\n\n    function toHex(s){\n        var a = s.toString(16);\n        if ((a.length % 2) &gt; 0)\n            a = \"0\" + a;\n        return a;\n    }\n\n    function toDec(s) {\n        var a = parseInt(s, 16).toString(10);\n        a = parseInt(a, 10);\n        return a;\n    }\n\n    function changeSignature(selected_signature, not_selected) {\n        current_signature = selected_signature;\n        document.getElementById(\"canvas_sign\"+(not_selected+1)).style.display = \"none\";\n        document.getElementById(\"canvas_sign\"+(selected_signature+1)).style.display = \"inline\";\n    }\n\n    function clearSignature() {\n        ctxs[current_signature].clearRect(0, 0, w, h);\n        ctxs[2].clearRect(0, 0, w, h); //just for test\n        document.getElementById(\"signature\"+(current_signature+1)).value = ''\n        str_lines[current_signature] = [];\n        total_lines[current_signature] = 0;\n        console.clear();\n    }\n\n    function save(){\n        var form = document.getElementById('test_form');\n        form.submit();\n    }\n\n    function saveDot(n_signature, x, y) {\n        //console.log(n_signature) problems wear with n signature, uncomment this\n        // console.log(\"saving dot\")\n        // console.log(x+\" \"+y)\n        total_points = 0;\n        points = '';\n        xy = toHex(x) + toHex(y);\n        if(xy.length!=4 &amp;&amp; xy.length&gt;0){\n            // console.error(xy);\n        }else{\n            // console.log(xy)\n            total_points++;\n            points = points + xy;\n            savePoint(n_signature, total_points, points);\n        }\n    }\n\n    function savePoint(n_signature, total_points, points){\n        console.log(\"drawlines\"+total_points);\n        drawLines(points, total_points, 2); //just for test\n        if(total_points&gt;0 &amp;&amp; points!==''){\n            txtsignature = document.getElementById(\"signature\"+(n_signature+1))\n            txtsignature.value = txtsignature.value + toHex(total_points)+points; //str_lines[n_signature];\n            str_lines[n_signature] = [];\n        }\n\n    }\n\n    function saveLine(n_signature) {\n        if(n_signature!=2){ //for test\n            total_lines[n_signature] = 0;\n            total_lines[n_signature] = str_lines[n_signature].length;\n            var points = '';\n            total_points = 0;\n            for (var i = 0; i &lt; total_lines[n_signature]; i++) {\n                point = str_lines[n_signature][i];\n                var [x, y] = point;\n                xy = toHex(x) + toHex(y);\n                if(xy.length!=4){\n                    // console.error(xy);\n                    continue;\n                }\n                // console.log(xy)\n                total_points++;\n                points = points + xy;\n                //console.log(points);\n            }\n            savePoint(n_signature, total_points, points);\n        }\n    }\n\n    function loadSignature(n_signature){\n        if(document.getElementById(\"signature\"+(n_signature+1)).value!=='')\n            getSignature(n_signature);\n    }\n    init();\n</code></pre>\n\n<p>Sometimes it works sometimes not\nI am thinking that sometimes if I only make one line I do not make it complete, as it cuts the last part, that is what I think happens in more complex drawings.</p>\n\n<p>Example:\n<a href=\"https://i.stack.imgur.com/FJASC.png\" rel=\"nofollow noreferrer\">drawing example</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/g081f.png\" rel=\"nofollow noreferrer\">result</a></p>\n"}, {"tags": ["javascript", "reactjs", "gatsby"], "comments": [{"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1567024173, "post_id": 57699580, "comment_id": 101843157, "body": "Note that JSON is a text format used &quot;over the wire&quot;; once you get it into React or wherever, it&#39;s just plain old JavaScript arrays and objects. See <a href=\"http://benalman.com/news/2010/03/theres-no-such-thing-as-a-json/\" rel=\"nofollow noreferrer\">There is no such thing as a JSON Object</a>."}, {"owner": {"reputation": 342, "user_id": 7764935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63bce017db5141f549d8ce4362231bcd?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul Beniwal", "link": "https://stackoverflow.com/users/7764935/rahul-beniwal"}, "edited": false, "score": 0, "creation_date": 1567024184, "post_id": 57699580, "comment_id": 101843162, "body": "what format you need?"}, {"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1567024236, "post_id": 57699580, "comment_id": 101843191, "body": "Also, if you can show us the code you&#39;re using to put transform this data into HTML, that would likely help people answer your question."}, {"owner": {"reputation": 2364, "user_id": 5791997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/262568cad9681dbf0cc0a2a423c1c351?s=128&d=identicon&r=PG&f=1", "display_name": "Addis", "link": "https://stackoverflow.com/users/5791997/addis"}, "edited": false, "score": 0, "creation_date": 1567024315, "post_id": 57699580, "comment_id": 101843221, "body": "can you post the function you used to &quot;display the data on the page&quot;?"}, {"owner": {"reputation": 5819, "user_id": 4385889, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/V0hjo.png?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/4385889/andrew"}, "edited": false, "score": 0, "creation_date": 1567030686, "post_id": 57699580, "comment_id": 101845276, "body": "If the return value for undefined values is <code>null</code>, an empty string, or <code>undefined</code>, then this is a CSS sizing problem. Are you hard coding dimensions? Empty white space does not magically show up unless you&#39;re doing something that would explicitly create that space"}], "answers": [{"tags": [], "owner": {"reputation": 1698, "user_id": 9342544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28d5bc1e5d8cc97ca08957458ae8a61?s=128&d=identicon&r=PG&f=1", "display_name": "Neel Rathod", "link": "https://stackoverflow.com/users/9342544/neel-rathod"}, "is_accepted": false, "score": 0, "last_activity_date": 1567024999, "creation_date": 1567024999, "answer_id": 57699792, "question_id": 57699580, "link": "https://stackoverflow.com/questions/57699580/how-to-map-through-data-that-contains-empty-values/57699792#57699792", "title": "How to map through data that contains empty values", "body": "<p>If you want to make <code>null</code> value which contains an empty string(<code>''</code>) then you can achieve with <code>map()</code> method.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>     const array = [{\r\n        \"id\": 1,\r\n        \"date\": \"January 1\",\r\n        \"weekday\": \"Friday\",\r\n        \"price\": \"82\u00a2 + tax\",\r\n        \"img1\": \"https://firebasestorage.googleapis.com/v0/b/danceland-cr.appspot.com/o/1954%2F1954-13-1.jpg?alt=media&amp;token=0afc6a81-cf73-4bd0-bb54-d6ee6eeb59c0\"\r\n}, {\r\n        \"id\": 2,\r\n        \"date\": \"January 2\",\r\n        \"weekday\": \"Saturday\",\r\n        \"price\": \"\",\r\n        \"img1\": \"\"\r\n}]\r\n\r\nconst result = array.map((r) =&gt; {\r\n        const obj = {\r\n                id: r.id,\r\n                date: r.date,\r\n                weekday: r.weekday,\r\n                price: r.price || null,\r\n                img1: r.img1 || null\r\n        };\r\n        return obj;\r\n});\r\n\r\nconsole.log(result); </code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 31, "user_id": 9571826, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lBFnY.png?s=128&g=1", "display_name": "Dan Choiniere", "link": "https://stackoverflow.com/users/9571826/dan-choiniere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1567024999, "creation_date": 1567023852, "last_edit_date": 1567024084, "question_id": 57699580, "link": "https://stackoverflow.com/questions/57699580/how-to-map-through-data-that-contains-empty-values", "title": "How to map through data that contains empty values", "body": "<p>I am trying to map through data to display info such as: date, weekday, name, price and some images. Each object contains some of the same info, but each object has a different number of images or is missing a value in a few spots.</p>\n\n<p>I can display the data on the page properly, but I can't seem to format it because of the different number of images or missing data. There are large white spaces in certain spots where there is missing data (like it is rendering the field that is missing data).</p>\n\n<p>Is this something that can simply be done with CSS? The missing values just are empty strings currently, and am not sure if that is part of what is causing the problem?</p>\n\n<p>I have tried using <code>:empty</code> and changing the values to null, with no luck.</p>\n\n<p>Example objects:</p>\n\n<pre><code>[\n {\n  \"id\": 1,\n  \"date\": \"January 1\",\n  \"weekday\": \"Friday\",\n  \"price\": \"82\u00a2 + tax\",\n  \"img1\": \"https://firebasestorage.googleapis.com/v0/b/danceland-cr.appspot.com/o/1954%2F1954-13-1.jpg?alt=media&amp;token=0afc6a81-cf73-4bd0-bb54-d6ee6eeb59c0\" \n },\n {\n  \"id\": 2,\n  \"date\": \"January 2\",\n  \"weekday\": \"Saturday\",\n  \"price\": \"\",\n  \"img1\": \"\" \n]\n</code></pre>\n\n<p>I can see the info being mapped to the page but there are white spaces where the missing <code>img1</code> &amp; <code>price</code> values would normally go.</p>\n"}, {"tags": ["javascript", "function", "return", "decorator"], "comments": [{"owner": {"reputation": 369690, "user_id": 182668, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b19917aa04a6839aef577f1117c71d48?s=128&d=identicon&r=PG", "display_name": "Pointy", "link": "https://stackoverflow.com/users/182668/pointy"}, "edited": false, "score": 0, "creation_date": 1567023823, "post_id": 57699528, "comment_id": 101843030, "body": "Ah you mean the <code>return</code> for that &quot;wrapper&quot;; that&#39;s useful when the called function returns a value. That allows the logging wrapper to provide the caller with the same value that the actual (wrapped) function returns."}, {"owner": {"reputation": 39, "user_id": 11598545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dddd35d003aee9472a16f695a6ffce6?s=128&d=identicon&r=PG&f=1", "display_name": "Mesmer", "link": "https://stackoverflow.com/users/11598545/mesmer"}, "reply_to_user": {"reputation": 369690, "user_id": 182668, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b19917aa04a6839aef577f1117c71d48?s=128&d=identicon&r=PG", "display_name": "Pointy", "link": "https://stackoverflow.com/users/182668/pointy"}, "edited": false, "score": 0, "creation_date": 1567026203, "post_id": 57699528, "comment_id": 101843949, "body": "I thought so, but it was strange to me to see that over and over again in tutorials and blogs with reputation."}], "answers": [{"tags": [], "owner": {"reputation": 35558, "user_id": 3794812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0edf514cf8b70557fab4557205a956?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Tower", "link": "https://stackoverflow.com/users/3794812/nicholas-tower"}, "is_accepted": true, "score": 2, "last_activity_date": 1567023949, "creation_date": 1567023949, "answer_id": 57699595, "question_id": 57699528, "link": "https://stackoverflow.com/questions/57699528/what-is-the-purpose-of-return-statement-in-function-decorator/57699595#57699595", "title": "What is the purpose of return statement in function decorator", "body": "<p>Without it, your decorator wouldn't forward along the return value from the wrapped function. Your <code>doSmething</code> doesn't return anything, so this behavior isn't being used, but if you tried to wrap a different function it would be needed.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function doSomethingWithReturn(value) {\r\n  return value.toUpperCase();\r\n}\r\n\r\nfunction loggingDecorator(wrapped) {\r\n    return function() {\r\n        console.log('Starting');\r\n        const wrapper = wrapped.apply(this, arguments);\r\n        console.log('Finished');\r\n        return wrapper;\r\n    };\r\n}\r\n\r\nconst wrapped = loggingDecorator(doSomethingWithReturn);\r\nconst test = wrapped('Rita');\r\nconsole.log(test); // 'RITA', but only because of the `return wrapper` statement</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 39, "user_id": 11598545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dddd35d003aee9472a16f695a6ffce6?s=128&d=identicon&r=PG&f=1", "display_name": "Mesmer", "link": "https://stackoverflow.com/users/11598545/mesmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 57699595, "answer_count": 1, "score": 0, "last_activity_date": 1567026293, "creation_date": 1567023536, "last_edit_date": 1567026293, "question_id": 57699528, "link": "https://stackoverflow.com/questions/57699528/what-is-the-purpose-of-return-statement-in-function-decorator", "title": "What is the purpose of return statement in function decorator", "body": "<p>I'm learning about decorators and I don't understand one thing - in every example, I came across there was a return statement at the end of a function. What is the purpose of that return statement? From my point of view, it's unnecessary, it doesn't even return anything.</p>\n\n<pre><code>    console.log('Hello, ' + name);\n}\n\nfunction loggingDecorator(wrapped) {\n    return function() {\n        console.log('Starting');\n        const wrapper = wrapped.apply(this, arguments);\n        console.log('Finished');\n        return wrapper; // Why do I need this?\n    };\n}\n\nconst wrapped = loggingDecorator(doSomething);\nwrapped('Rita');\nconst test = wrapped('Rita');\nconsole.log(test); // undefined\n</code></pre>\n"}, {"tags": ["javascript", "object", "methods", "parameters", "destroy"], "comments": [{"owner": {"reputation": 14088, "user_id": 4642212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f858afc6f98f72ca7d617da224a28db7?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Simon", "link": "https://stackoverflow.com/users/4642212/sebastian-simon"}, "edited": false, "score": 0, "creation_date": 1567023600, "post_id": 57699518, "comment_id": 101842964, "body": "You\u2019re just reassigning the parameter. It\u2019s like reassigning a variable\u2014it doesn\u2019t change the value."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1567023605, "post_id": 57699518, "comment_id": 101842967, "body": "Parameters are passed by value, not by reference. Assigning to <code>obj</code> just assigns to the local variable, not the caller&#39;s variable. Also, it&#39;s not possible to assign anything to <code>this</code>, it&#39;s not a real variable."}, {"owner": {"reputation": 792, "user_id": 6000680, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/10153783540065081/picture?type=large", "display_name": "James Hamann", "link": "https://stackoverflow.com/users/6000680/james-hamann"}, "edited": false, "score": 0, "creation_date": 1567023890, "post_id": 57699518, "comment_id": 101843055, "body": "Looks like I need to do some more reading on this. Thanks everyone"}], "owner": {"reputation": 792, "user_id": 6000680, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/10153783540065081/picture?type=large", "display_name": "James Hamann", "link": "https://stackoverflow.com/users/6000680/james-hamann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "closed_date": 1567023720, "answer_count": 0, "score": 0, "last_activity_date": 1567023494, "creation_date": 1567023494, "question_id": 57699518, "link": "https://stackoverflow.com/questions/57699518/why-cant-i-reassign-an-object-when-passing-that-object-as-a-parameter-to-a-hand", "closed_reason": "Duplicate", "title": "Why can&#39;t I reassign an object when passing that object as a parameter to a handler function in javascript?", "body": "<p>I have an object with a method, destroy:</p>\n\n<pre><code>let object = {\n    destroy() {\n        handleDestroy.call(null, this);\n    }\n}\n\nfunction handleDestroy(obj) {\n    obj = null;\n}\n</code></pre>\n\n<p>I know that technically the object is not destroyed even if it did work, but I am wondering why I can't reassign objects to null or other types of objects this way? When I call handleDestroy with the object as a parameter, or if I invoke the destroy method, object remains unchanged. </p>\n"}, {"tags": ["javascript", "arrays", "sorting"], "answers": [{"tags": [], "owner": {"reputation": 5573, "user_id": 7692859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb1b961fa00ddbd4fccc08e070762a27?s=128&d=identicon&r=PG&f=1", "display_name": "Anis R.", "link": "https://stackoverflow.com/users/7692859/anis-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1567025288, "last_edit_date": 1567025288, "creation_date": 1567024936, "answer_id": 57699781, "question_id": 57699485, "link": "https://stackoverflow.com/questions/57699485/reading-2d-array-behavior-issue/57699781#57699781", "title": "reading 2D array behavior issue?", "body": "<p>What I assume you want to do is prevent the algorithm from checking e.g. <code>ar[1] + ar[2]</code>, then <code>ar[2] + ar[1]</code> again.</p>\n\n<p>To solve this, consider starting your inner loop from <code>i + 1</code> and not from 0. This prevents the mentioned scenario from happening, and also prevents the algorithm from summing an element with itself (e.g. <code>ar[0] + ar[0]</code>). So no need to check anymore if <code>i</code> is equal to <code>ii</code>.</p>\n\n<p>Why so? Assume the first iteration of the outer loop. You are checking the sum of ar[0] with <code>ar[1]</code>, then with <code>ar[2]</code>, <code>ar[3]</code>, and so on.</p>\n\n<p>On the second iteration of the outer loop, you are checking sums of <code>ar[1]</code> with other elements of the array. However, you already checked <code>ar[0]</code> + <code>ar[1]</code> in the previous iteration. So you start with <code>ar[1]</code> + <code>ar[2]</code>, where <code>ii = i + 1 = 2</code>.</p>\n\n<p>So the code becomes:</p>\n\n<pre><code>function returnOcurrences(k,ar){\n    const letters = [new Set(ar)]; //I don't see the purpose of this variable but okay\n    var pairs = 0;\n\n    for (var i = 0; i &lt; ar.length; i++) {\n        for (var ii = i + 1; ii &lt; ar.length; ii++) {\n            var a = ar[i] + ar[ii];\n                if (a &gt;= k) {\n                    pairs += (a % k == 0) ? 1 : 0\n                }\n        }\n    }\n    return pairs/2;\n} \n</code></pre>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 106, "user_id": 5007444, "user_type": "registered", "profile_image": "https://graph.facebook.com/1001289296556449/picture?type=large", "display_name": "SotoArmando", "link": "https://stackoverflow.com/users/5007444/sotoarmando"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1567025288, "creation_date": 1567023300, "question_id": 57699485, "link": "https://stackoverflow.com/questions/57699485/reading-2d-array-behavior-issue", "title": "reading 2D array behavior issue?", "body": "<p>Test Cases:</p>\n\n<pre><code>(6, [1,3,2,6,1,2]) returns (pairs / 2) = 5\n</code></pre>\n\n<p>It does get the answer the thing is that is doing more than it needs to, It is possible just add some validation to know when he is adding same reversed index but it will only give it more to do. am looking to remove the unneeded work. can it be more reliable?</p>\n\n<pre><code>function returnOcurrences(k,ar){\n    debugger;\n    const letters = [new Set(ar)];\n    let pairs = 0;\n\n    for (let i = 0; i &lt; ar.length; i++) {\n        for (let ii = 0; ii &lt; ar.length; ii++) {\n            let a = ar[i] + ar[ii];\n            if (i != ii) {\n                if (a &gt;= k) {\n                    pairs += (a % k == 0) ? 1 : 0\n                }\n            }\n        }\n    }\n    return pairs/2;\n}\n</code></pre>\n"}, {"tags": ["javascript", "ecmascript-6", "async-await", "es6-promise"], "comments": [{"owner": {"reputation": 1397, "user_id": 3975711, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/756de1bfefa4329d2d23dd5975c24306?s=128&d=identicon&r=PG&f=1", "display_name": "Sergii Vorobei", "link": "https://stackoverflow.com/users/3975711/sergii-vorobei"}, "edited": false, "score": 0, "creation_date": 1567023480, "post_id": 57699480, "comment_id": 101842919, "body": "No, the rewritten function won&#39;t be properly awaited as it does not return a promise. The &#39;old&#39; function is a correct version if you want to use it with <code>async&#47;await</code> syntax."}, {"owner": {"reputation": 20471, "user_id": 1552587, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ed783ecfe6b4babe78d4ae5b206ef431?s=128&d=identicon&r=PG", "display_name": "Titus", "link": "https://stackoverflow.com/users/1552587/titus"}, "edited": false, "score": 0, "creation_date": 1567023800, "post_id": 57699480, "comment_id": 101843022, "body": "The rewritten <code>shell</code> function doesn&#39;t <code>return</code> anything."}, {"owner": {"reputation": 206726, "user_id": 5459839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iehrR.jpg?s=128&g=1", "display_name": "trincot", "link": "https://stackoverflow.com/users/5459839/trincot"}, "edited": false, "score": 0, "creation_date": 1567024610, "post_id": 57699480, "comment_id": 101843337, "body": "If in the old syntax you had to use <code>new Promise</code>, then moving to the newer syntax does not mean you can drop that part. Also, an <code>async</code> function without the <code>await</code> keyword is most often a sign that something is wrong. In your case there is no good reason to convert your function to the <code>async</code> syntax. The latter is more interesting for when you have a chain of <code>then</code> calls."}, {"owner": {"reputation": 13, "user_id": 8629193, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209342380291705/picture?type=large", "display_name": "Highwalker", "link": "https://stackoverflow.com/users/8629193/highwalker"}, "edited": false, "score": 0, "creation_date": 1567036294, "post_id": 57699480, "comment_id": 101846341, "body": "I was under the impression that an async function will always return a value as a promise without needing to explicitly construct a new promise return value. Is this not the case?"}], "answers": [{"tags": [], "owner": {"reputation": 922, "user_id": 6903290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a772f6ae300381d376f419a995c4483e?s=128&d=identicon&r=PG&f=1", "display_name": "nmxl", "link": "https://stackoverflow.com/users/6903290/nmxl"}, "is_accepted": false, "score": -1, "last_activity_date": 1567101221, "creation_date": 1567101221, "answer_id": 57715539, "question_id": 57699480, "link": "https://stackoverflow.com/questions/57699480/refactoring-promise-function-to-es6-format-await-doesnt-actually-await/57715539#57715539", "title": "Refactoring promise function to es6 format, await doesn&#39;t actually await", "body": "<pre><code>const shell = async (command, log = false, cb = null) =&gt; {\n  /*problem lies here, because most probably this is a async function and \n  therefore undefined is returned from this function as resolved value*/\n\n  exec(command, (err, stdout, stderr) =&gt; {\n    if (err) throw err;\n    if (cb) cb(stdout);\n    if (log) process.stdout.write(`\\n${stdout}\\n\\n`);\n    return {\n      stdout,\n      stderr,\n    };\n  });\n};\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/57703692/using-try-catch-on-error-generated-by-asynchronous-callback-function?noredirect=1#comment101854283_57703692\">see this question</a> </p>\n"}, {"tags": [], "owner": {"reputation": 507143, "user_id": 1048572, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7f2c4de95e8f4f8f5a71c3aaf0ed312a?s=128&d=identicon&r=PG", "display_name": "Bergi", "link": "https://stackoverflow.com/users/1048572/bergi"}, "is_accepted": true, "score": 0, "last_activity_date": 1567109521, "last_edit_date": 1567109521, "creation_date": 1567109171, "answer_id": 57717106, "question_id": 57699480, "link": "https://stackoverflow.com/questions/57699480/refactoring-promise-function-to-es6-format-await-doesnt-actually-await/57717106#57717106", "title": "Refactoring promise function to es6 format, await doesn&#39;t actually await", "body": "<p>No, your <code>async</code> function is not written correctly. You <a href=\"https://stackoverflow.com/q/45788934/1048572\">cannot replace the <code>new Promise</code> constructor by <code>async</code>/<code>await</code> syntax</a>. If something provides only a callback API, you need to <a href=\"https://stackoverflow.com/q/22519784/1048572\">promisify</a> it before being able to use <code>await</code> on it.</p>\n\n<p>You should be doing</p>\n\n<pre><code>function shell(command) {\n  return new Promise((resolve, reject) =&gt; {\n    exec(command, (err, stdout, stderr) =&gt; {\n      if (err) {\n        reject(err);\n      } else {\n        resolve({stdout, stderr});\n      }\n    });\n  });\n}\nfunction copy(source, destination) {\n  return new Promise((resolve, reject) =&gt; {\n    \u2026\n  });\n}\nfunction rmdir(path) {\n  return new Promise((resolve, reject) =&gt; {\n    \u2026\n  });\n}\n</code></pre>\n\n<p>and then you can write your <code>finalise</code> function using <code>async</code>/<code>await</code>:</p>\n\n<pre><code>async finalize() {\n  process.stdout.write('finalizing project\\n');\n  await copy(this.tempPath, this.destination);\n  process.stdout.write('cleaning up temporary files\\n');\n  await rmdir(this.tempPath);\n  await shell(`mkdir ${path.join(this.destination, this.options.componentPath)}`);\n  if (this.options.redux) {\n    await shell(`mkdir ${path.join(this.destination, this.options.reduxPath, this.options.actionPath)}`);\n  }\n  await shell(`git -C ${this.destination} init`);\n  await shell(`git -C ${this.destination} add .`);\n  await shell(`git -C ${this.destination} commit -m 'Initialized with Partum-React'`);\n  process.stdout.write(`\\nrunning npm install inside ${this.destination}\\n`);\n  await npmInstall(this.destination, this.silent);\n  return true;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8629193, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209342380291705/picture?type=large", "display_name": "Highwalker", "link": "https://stackoverflow.com/users/8629193/highwalker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 57717106, "answer_count": 2, "score": 0, "last_activity_date": 1567109521, "creation_date": 1567023272, "question_id": 57699480, "link": "https://stackoverflow.com/questions/57699480/refactoring-promise-function-to-es6-format-await-doesnt-actually-await", "title": "Refactoring promise function to es6 format, await doesn&#39;t actually await", "body": "<p>So I'm just revisiting some old code to tidy up and modernize some syntax in my <a href=\"https://github.com/LucHighwalker/partum-react\" rel=\"nofollow noreferrer\">Partum-React</a> project. But when I reformat this specific older traditional <code>function() return new Promise...</code> to an <code>async () =&gt; ...return...</code> type function, it doesn't seem to await for the function to be finished. The answers I found don't seem to solve my problem, since as far as I can tell, my async function is written correctly and should work as expected. I also already reformatted some older function/promise functions into async functions without an issue. So I'm pretty stumped on why this specific function doesn't seem to get properly wrapped in a promise. </p>\n\n<p>The old function which works as expected, program properly awaits for the function to complete before continuing execution (found in <code>helper.js</code> in the <code>/src</code> folder):</p>\n\n<pre><code>function shell(command, log = false, cb = null) {\n  return new Promise((resolve, reject) =&gt; {\n    exec(command, (err, stdout, stderr) =&gt; {\n      if (err) {\n        reject(err);\n      } else {\n        if (cb) cb(stdout);\n        if (log) process.stdout.write(`\\n${stdout}\\n\\n`);\n        resolve({\n          stdout,\n          stderr,\n        });\n      }\n    });\n  });\n}\n</code></pre>\n\n<p>Rewritten function, doesn't seem to properly await when called with await. consecutive <code>shell</code> calls are run synchronously causing git to error out. I'm sure it's a small mistake on my part, but I just can't seem to see it. As far as I know, this function should be properly wrapped in a promise and function as such:</p>\n\n<pre><code>const shell = async (command, log = false, cb = null) =&gt; {\n  exec(command, (err, stdout, stderr) =&gt; {\n    if (err) throw err;\n    if (cb) cb(stdout);\n    if (log) process.stdout.write(`\\n${stdout}\\n\\n`);\n    return {\n      stdout,\n      stderr,\n    };\n  });\n};\n</code></pre>\n\n<p>This is where the function is being called (found in <code>initializer.js</code> in the <code>/src</code> folder) (I know, this also needs some major cleaning up): </p>\n\n<pre><code>finalize() {\n    return new Promise((resolve, reject) =&gt; {\n      process.stdout.write('finalizing project\\n');\n      copy(this.tempPath, this.destination, (err) =&gt; {\n        if (err) {\n          reject(err);\n        } else {\n          process.stdout.write('cleaning up temporary files\\n');\n          rmdir(this.tempPath, async (err) =&gt; { // eslint-disable-line\n            if (err) {\n              reject(err);\n            } else {\n              try {\n                await shell(`mkdir ${path.join(this.destination, this.options.componentPath)}`);\n\n                if (this.options.redux) {\n                  await shell(`mkdir ${path.join(this.destination, this.options.reduxPath, this.options.actionPath)}`);\n                }\n\n                await shell(`git -C ${this.destination} init`);\n                await shell(`git -C ${this.destination} add .`);\n                await shell(`git -C ${this.destination} commit -m 'Initialized with Partum-React'`);\n\n                process.stdout.write(\n                  `\\nrunning npm install inside ${this.destination}\\n`,\n                );\n                await npmInstall(this.destination, this.silent);\n\n                resolve(true);\n\n              } catch (err) { // eslint-disable-line\n                reject(err);\n              }\n            }\n          });\n        }\n      });\n    });\n  }\n};\n</code></pre>\n\n<p>console logging <code>shell(....)</code> without await logs <code>Promise {undefined}</code></p>\n\n<p>console logging <code>await shell(....)</code> with await logs <code>{undefined}</code></p>\n\n<p>Thank you in advance for any help on this!</p>\n"}, {"tags": ["javascript", "vue.js", "vuejs2", "vue-router"], "answers": [{"comments": [{"owner": {"reputation": 2345, "user_id": 5140756, "user_type": "registered", "accept_rate": 16, "profile_image": "https://i.stack.imgur.com/oMwxR.jpg?s=128&g=1", "display_name": "Augusto", "link": "https://stackoverflow.com/users/5140756/augusto"}, "edited": false, "score": 0, "creation_date": 1567024811, "post_id": 57699650, "comment_id": 101843413, "body": "Your explanation was productive but your solution not solved my problem. 1. I followed your code tips but not worked to me. 2. My project is very big and I can&#39;t edit the <code>&lt;router-view&gt;</code> because very people works them. I need a solution that can be implemented on the specific component."}, {"owner": {"reputation": 3281, "user_id": 8411406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03feb45788181f61b08fdb8b5d26968e?s=128&d=identicon&r=PG", "display_name": "Turtlefight", "link": "https://stackoverflow.com/users/8411406/turtlefight"}, "reply_to_user": {"reputation": 2345, "user_id": 5140756, "user_type": "registered", "accept_rate": 16, "profile_image": "https://i.stack.imgur.com/oMwxR.jpg?s=128&g=1", "display_name": "Augusto", "link": "https://stackoverflow.com/users/5140756/augusto"}, "edited": false, "score": 0, "creation_date": 1567024980, "post_id": 57699650, "comment_id": 101843478, "body": "@Augusto what kind of logic do you have in your <code>mount()</code> hook? could you post it? what are the routes, how do they change? - There is unfortunately no way for a component to unmount &amp; remount itself - <code>mount()</code> will only be called once - the only way you can force a component to be re-mounted is to give it a key - which in this case unfortunately has to be on the <code>router-view</code> if your component gets rendered from a route"}, {"owner": {"reputation": 2345, "user_id": 5140756, "user_type": "registered", "accept_rate": 16, "profile_image": "https://i.stack.imgur.com/oMwxR.jpg?s=128&g=1", "display_name": "Augusto", "link": "https://stackoverflow.com/users/5140756/augusto"}, "edited": false, "score": 0, "creation_date": 1567025114, "post_id": 57699650, "comment_id": 101843524, "body": "In my <code>mount()</code> I must read <code>state</code> to get pre-selected or reset form&#39;s data. Imagine the follow behavior, the user open form page and edit it, but when him closes the page the form must be reseted, but, like vuejs re-use component the form is re-used and the data is not reseted."}, {"owner": {"reputation": 2345, "user_id": 5140756, "user_type": "registered", "accept_rate": 16, "profile_image": "https://i.stack.imgur.com/oMwxR.jpg?s=128&g=1", "display_name": "Augusto", "link": "https://stackoverflow.com/users/5140756/augusto"}, "edited": false, "score": 0, "creation_date": 1567025167, "post_id": 57699650, "comment_id": 101843540, "body": "Reading others questions, the <code>key</code> and <code>watchers</code> sounds be a solution but I don&#39;t know use them."}, {"owner": {"reputation": 3281, "user_id": 8411406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03feb45788181f61b08fdb8b5d26968e?s=128&d=identicon&r=PG", "display_name": "Turtlefight", "link": "https://stackoverflow.com/users/8411406/turtlefight"}, "reply_to_user": {"reputation": 2345, "user_id": 5140756, "user_type": "registered", "accept_rate": 16, "profile_image": "https://i.stack.imgur.com/oMwxR.jpg?s=128&g=1", "display_name": "Augusto", "link": "https://stackoverflow.com/users/5140756/augusto"}, "edited": false, "score": 0, "creation_date": 1567025290, "post_id": 57699650, "comment_id": 101843599, "body": "then you could move the code from your <code>mount()</code> hook into a method and call that one from <code>mount()</code> and <code>beforeRouteUpdate()</code>. If you also want to clear the data of your component you can additionally use <code>Object.assign(this.$data, this.$options.data())</code> in your <code>beforeRouteUpdate</code> hook"}, {"owner": {"reputation": 2345, "user_id": 5140756, "user_type": "registered", "accept_rate": 16, "profile_image": "https://i.stack.imgur.com/oMwxR.jpg?s=128&g=1", "display_name": "Augusto", "link": "https://stackoverflow.com/users/5140756/augusto"}, "edited": false, "score": 0, "creation_date": 1567025489, "post_id": 57699650, "comment_id": 101843699, "body": "Sorry, I don&#39;t got it. But navigation guards is called on main component, and the component that I speaked is a off canvas. How I would use it: <code>Object.assign(this.$data, this.$options.data())</code> on beforeRouteUpdate?"}, {"owner": {"reputation": 3281, "user_id": 8411406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03feb45788181f61b08fdb8b5d26968e?s=128&d=identicon&r=PG", "display_name": "Turtlefight", "link": "https://stackoverflow.com/users/8411406/turtlefight"}, "reply_to_user": {"reputation": 2345, "user_id": 5140756, "user_type": "registered", "accept_rate": 16, "profile_image": "https://i.stack.imgur.com/oMwxR.jpg?s=128&g=1", "display_name": "Augusto", "link": "https://stackoverflow.com/users/5140756/augusto"}, "edited": false, "score": 0, "creation_date": 1567026533, "post_id": 57699650, "comment_id": 101844078, "body": "@Augusto heres a <a href=\"https://jsfiddle.net/foqduanb/2/\" rel=\"nofollow noreferrer\">JSFiddle</a> - if your component is not directly a route, you can use the watch <code>$route</code> option (my second example)"}], "tags": [], "owner": {"reputation": 3281, "user_id": 8411406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03feb45788181f61b08fdb8b5d26968e?s=128&d=identicon&r=PG", "display_name": "Turtlefight", "link": "https://stackoverflow.com/users/8411406/turtlefight"}, "is_accepted": false, "score": 2, "last_activity_date": 1567024244, "creation_date": 1567024244, "answer_id": 57699650, "question_id": 57699473, "link": "https://stackoverflow.com/questions/57699473/vuejs-hook-mounted-is-not-called-when-page-is-re-open-by-vue-router/57699650#57699650", "title": "VueJS hook mounted() is not called when page is re-open by vue-router", "body": "<p><code>vue</code> will re-use components were possible, this is expected.<br>\nNormally you would watch for route changes and update your component state accordingly.</p>\n\n<p>To react to route changes you can use <a href=\"https://router.vuejs.org/guide/advanced/data-fetching.html#fetching-after-navigation\" rel=\"nofollow noreferrer\"><code>beforeRouteUpdate()</code></a>:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const Example = Vue.extend({\r\n  template: `\r\n  \t&lt;div&gt;\r\n  \t\t&lt;p&gt;This changes: '{{param}}'&lt;/p&gt;\r\n    &lt;/div&gt;`,\r\n  data(){\r\n    return {\r\n      param: this.$route.params.param\r\n    };\r\n  },\r\n  beforeRouteUpdate(to, from, next) {\r\n    this.param = to.params.param;\r\n    next();\r\n  }\r\n});\r\n\r\nconst router = new VueRouter({\r\n  routes: [\r\n    {\r\n      path: '/:param', component: Example,\r\n    }\r\n  ]\r\n})\r\nconst app = new Vue({ router }).$mount('#app')</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://unpkg.com/vue/dist/vue.js\"&gt;&lt;/script&gt;\r\n&lt;script src=\"https://unpkg.com/vue-router/dist/vue-router.js\"&gt;&lt;/script&gt;\r\n\r\n&lt;div id=\"app\"&gt;\r\n  &lt;router-link to=\"/foo\"&gt;foo&lt;/router-link&gt;&lt;br&gt;\r\n  &lt;router-link to=\"/bar\"&gt;bar&lt;/router-link&gt;&lt;br&gt;\r\n  &lt;router-view&gt;&lt;/router-view&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Alternatively you can also watch the route and update the state accordingly:</p>\n\n<pre><code>Vue.extend({\n  watch: {\n    '$route'() {\n      // TODO: react to navigation event.\n      // params cotains the current route parameters\n      console.log(this.$route.params);\n    }\n  },\n  // ....\n});\n</code></pre>\n\n<p>The <code>vue-router</code> documentation has a few great examples for this: <a href=\"https://router.vuejs.org/guide/advanced/data-fetching.html#data-fetching\" rel=\"nofollow noreferrer\">Data Fetching - Vue Router</a></p>\n\n<p>If you still want to use <code>mounted()</code>, you can do so by giving your <code>router-view</code> a key that will change when the route changes, e.g.:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;router-view :key=\"$route.fullPath\"&gt;&lt;/router-view&gt;\n</code></pre>\n\n<p>This will force the component to be re-created every time, so it does have a performance penalty - i would recommend using the route hooks described above, if possible.</p>\n"}], "owner": {"reputation": 2345, "user_id": 5140756, "user_type": "registered", "accept_rate": 16, "profile_image": "https://i.stack.imgur.com/oMwxR.jpg?s=128&g=1", "display_name": "Augusto", "link": "https://stackoverflow.com/users/5140756/augusto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8386, "favorite_count": 0, "answer_count": 1, "score": 8, "last_activity_date": 1567024244, "creation_date": 1567023245, "question_id": 57699473, "link": "https://stackoverflow.com/questions/57699473/vuejs-hook-mounted-is-not-called-when-page-is-re-open-by-vue-router", "title": "VueJS hook mounted() is not called when page is re-open by vue-router", "body": "<p>Please, look the flux below, it's shows my problem. I'm using vue-router with <code>this.$router.push</code> to browsing on pages. I'm starting on PageA.</p>\n\n<ul>\n<li><p>PageA -> PageB ( <code>mounted()</code> of PageB is called)</p></li>\n<li><p>PageB -> PageA (returning to PageA)</p></li>\n<li><p>PageA -> PageB (<code>mounted()</code> of PageB is not called)</p></li>\n</ul>\n\n<p>It sounds that page (.vue component) is not closed and mainted on cache or other thing. I must use the <code>mounted()</code> method every time that page is open and maybe close the page and clean from cache. How I can solve it?</p>\n"}, {"tags": ["javascript", "html"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 11991135, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-npXd_SeDz_s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc4NGZFENQO-wiY3AHnBHbPLj5CyQ/photo.jpg?sz=128", "display_name": "callum", "link": "https://stackoverflow.com/users/11991135/callum"}, "edited": false, "score": 0, "creation_date": 1567032036, "post_id": 57700617, "comment_id": 101845532, "body": "you super star thank you. its been racking my brain for days"}, {"owner": {"reputation": 1936, "user_id": 5568741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VNja2.jpg?s=128&g=1", "display_name": "k3llydev", "link": "https://stackoverflow.com/users/5568741/k3llydev"}, "reply_to_user": {"reputation": 53, "user_id": 11991135, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-npXd_SeDz_s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc4NGZFENQO-wiY3AHnBHbPLj5CyQ/photo.jpg?sz=128", "display_name": "callum", "link": "https://stackoverflow.com/users/11991135/callum"}, "edited": false, "score": 0, "creation_date": 1567032230, "post_id": 57700617, "comment_id": 101845587, "body": "@callum Always glad to help! Welcome to Stackoverflow:) I would suggest you to take a moment to read: <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>. Happy coding!"}, {"owner": {"reputation": 53, "user_id": 11991135, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-npXd_SeDz_s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc4NGZFENQO-wiY3AHnBHbPLj5CyQ/photo.jpg?sz=128", "display_name": "callum", "link": "https://stackoverflow.com/users/11991135/callum"}, "edited": false, "score": 0, "creation_date": 1567034461, "post_id": 57700617, "comment_id": 101846019, "body": "when i change select external corner it says zero and cant get it to sero when i de select could you help please <a href=\"https://codepen.io/callum-edwards/pen/oNvBWxo\" rel=\"nofollow noreferrer\">codepen.io/callum-edwards/pen/oNvBWxo</a>"}, {"owner": {"reputation": 1936, "user_id": 5568741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VNja2.jpg?s=128&g=1", "display_name": "k3llydev", "link": "https://stackoverflow.com/users/5568741/k3llydev"}, "reply_to_user": {"reputation": 53, "user_id": 11991135, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-npXd_SeDz_s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc4NGZFENQO-wiY3AHnBHbPLj5CyQ/photo.jpg?sz=128", "display_name": "callum", "link": "https://stackoverflow.com/users/11991135/callum"}, "edited": false, "score": 0, "creation_date": 1567034529, "post_id": 57700617, "comment_id": 101846032, "body": "@callum if your issue is longer, I&#39;d suggest to ask a different question for this issue. And I&#39;ll gladly help once again:)"}, {"owner": {"reputation": 53, "user_id": 11991135, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-npXd_SeDz_s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc4NGZFENQO-wiY3AHnBHbPLj5CyQ/photo.jpg?sz=128", "display_name": "callum", "link": "https://stackoverflow.com/users/11991135/callum"}, "edited": false, "score": 0, "creation_date": 1567036055, "post_id": 57700617, "comment_id": 101846291, "body": "ive added anothher question"}], "tags": [], "owner": {"reputation": 1936, "user_id": 5568741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VNja2.jpg?s=128&g=1", "display_name": "k3llydev", "link": "https://stackoverflow.com/users/5568741/k3llydev"}, "is_accepted": true, "score": 0, "last_activity_date": 1567030054, "creation_date": 1567030054, "answer_id": 57700617, "question_id": 57699459, "link": "https://stackoverflow.com/questions/57699459/my-auto-form-wont-output-the-correct-value/57700617#57700617", "title": "my auto form wont output the correct value", "body": "<p>Since your example provides the usage of two decimal numbers, I will suggest you a quick fix.</p>\n\n<p>At the bottom of your <code>calculate()</code> function (after the last <code>if</code> conditional), add the following lines to parse the content:</p>\n\n<pre><code>let p = $(\"#plaster\")\np.html( Math.round(+p.html() * 1000) / 1000 )\n</code></pre>\n\n<p>This is a trick to reduce the whole float value to only two decimal values (if it is necessary). Doing this, your code would parse the number to two decimal numbers every time the function is called.</p>\n\n<p>See it working:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"true\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>$(function() {\r\n  $(function() {\r\n    var fields = $(\r\n      \"select[name=bead],select[name=cpu],select[name=GPU]\"\r\n    ).change(calculate);\r\n\r\n    function calculate() {\r\n      var price = 0;\r\n      fields.each(function() {\r\n        price += +$(this).val();\r\n      });\r\n      $(\"#price\").html(price.toFixed(2));\r\n      if (price &gt;= 10) {\r\n        $(\"#test\").html(\"You would need 1 bags of plaster Costing \u00a36.23\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"6.23\");\r\n        $(\"#plaster\").html(price + 6.23 );\r\n      }\r\n      if (price == 20) {\r\n        $(\"#test\").html(\"You  would need 1 bags of plaster Costing \u00a366.23\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"6.23\");\r\n\r\n        $(\"#plaster\").html(price + 6.23);\r\n      }\r\n      if (price == 30) {\r\n        $(\"#test\").html(\"You would need 1 bags of plaster Costing \u00a36.23\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"6.23\");\r\n\r\n        $(\"#plaster\").html( ((price + 6.23) * 100) / 100 );\r\n      }\r\n\r\n      if (price &gt;= 40) {\r\n        $(\"#test\").html(\"You would need 2 bags of plaster Costing \u00a31f2.46\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"12.46\");\r\n\r\n        $(\"#plaster\").html(price + 12.46);\r\n      }\r\n\r\n      if (price &gt;= 50) {\r\n        $(\"#test\").html(\"You would need 2 bags of plaster Costing \u00a312.46\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"12.46\");\r\n\r\n        $(\"#plaster\").html(price + 12.46);\r\n      }\r\n      if (price &gt;= 60) {\r\n        $(\"#test\").html(\"You would need 2 bags of plaster Costing \u00a312.46\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"12.46\");\r\n\r\n        $(\"#plaster\").html(price + 12.46);\r\n      }\r\n      if (price &gt;= 70) {\r\n        $(\"#test\").html(\"You would need 3 bags of plaster Costing \u00a318.69\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"18.69\");\r\n\r\n        $(\"#plaster\").html(price + 18.69);\r\n      }\r\n      if (price &gt;= 80) {\r\n        $(\"#test\").html(\"You would need 3 bags of plaster Costing \u00a318.69\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"18.69\");\r\n        $(\"#plaster\").html(price + 18.69);\r\n      }\r\n      if (price &gt;= 90) {\r\n        $(\"#test\").html(\"You would need 3 bags of plaster Costing \u00a318.69\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"18.69\");\r\n        $(\"#plaster\").html(price + 18.69);\r\n      }\r\n      if (price &gt;= 100) {\r\n        $(\"#test\").html(\"You would need 4 bags of plaster costing \u00a324.92\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"24.92\");\r\n        $(\"#plaster\").html(price + 24.92);\r\n      }\r\n      if (price &gt;= 110) {\r\n        $(\"#test\").html(\"You would need 4 bags of plaster costing \u00a324.92\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"24.92\");\r\n\r\n        $(\"#plaster\").html(price + 24.92);\r\n      }\r\n      if (price &gt;= 120) {\r\n        $(\"#test\").html(\"You would need 4 bags of plaster costing \u00a324.92\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"24.92\");\r\n\r\n        $(\"#plaster\").html(price + 24.92);\r\n      }\r\n      if (price &gt;= 130) {\r\n        $(\"#test\").html(\"You would need 5 bags of plaster costing \u00a331.15\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"31.15\");\r\n\r\n        $(\"#plaster\").html(price + 31.15);\r\n      }\r\n      if (price &gt;= 140) {\r\n        $(\"#test\").html(\"You would need 5 bags of plaster costing \u00a331.15\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"31.15\");\r\n        $(\"#plaster\").html(price + 31.15);\r\n      }\r\n      if (price &gt;= 150) {\r\n        $(\"#test\").html(\"You would need 5 bags of plaster costing \u00a331.15\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"31.15\");\r\n        $(\"#plaster\").html(price + 31.15);\r\n      }\r\n      if (price &gt;= 160) {\r\n        $(\"#test\").html(\"You would need 6 bags of plaster costing \u00a337.38\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"37.38\");\r\n        $(\"#plaster\").html(price + 37.38);\r\n      }\r\n      if (price &gt;= 170) {\r\n        $(\"#test\").html(\"You would need 6 bags of plaster costing \u00a337.38\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"37.38\");\r\n        $(\"#plaster\").html(price + 37.38);\r\n      }\r\n      if (price &gt;= 180) {\r\n        $(\"#test\").html(\"You would need 6 bags of plaster costing \u00a337.38\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"37.38\");\r\n        $(\"#plaster\").html(price + 37.38);\r\n      }\r\n\r\n      if (price &gt;= 190) {\r\n        $(\"#test\").html(\"You would need 7 bags of plaster costing \u00a343.61\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"43.61\");\r\n        $(\"#plaster\").html(price + 43.61);\r\n      }\r\n\r\n      if (price &gt;= 200) {\r\n        $(\"#test\").html(\"You would need 7 bags of plaster costing \u00a343.61\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"43.61\");\r\n        $(\"#plaster\").html(price + 43.61);\r\n      }\r\n      if (price &gt;= 210) {\r\n        $(\"#test\").html(\"You would need 7 bags of plaster costing \u00a343.61\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"43.61\");\r\n        $(\"#plaster\").html(price + 43.61);\r\n      }\r\n      if (price &gt;= 220) {\r\n        $(\"#test\").html(\"You would need 7 bags of plaster costing \u00a343.61\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"49.84\");\r\n        $(\"#plaster\").html(49.84 + price);\r\n      }\r\n      if (price &gt;= 230) {\r\n        $(\"#plaster\").html(price + 49.84);\r\n      }\r\n      if (price &gt;= 240) {\r\n        $(\"#test\").html(\"You would need 8 bags of plaster costing \u00a349.84\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"49.84\");\r\n        $(\"#plaster\").html(price + 49.84);\r\n      }\r\n      if (price &gt;= 250) {\r\n        $(\"#test\").html(\"You would need 9 bags of plaster costing \u00a357.06\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"57.06\");\r\n        $(\"#plaster\").html(price + 57.06);\r\n      }\r\n      if (price &gt;= 260) {\r\n        $(\"#test\").html(\"You would need 9 bags of plaster costing \u00a357.06\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"57.06\");\r\n        $(\"#plaster\").html(price + 57.06);\r\n      }\r\n      if (price &gt;= 270) {\r\n        $(\"#test\").html(\"You would need 9 bags of plaster costing \u00a357.06\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"57.06\");\r\n        $(\"#plaster\").html( ((price + 57.06) * 100) / 100);\r\n      }\r\n      if (price &gt;= 280) {\r\n        $(\"#test\").html(\"You would need 10 bags of plaster costing \u00a362.30\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"62.30\");\r\n        $(\"#plaster\").html(price + 62.3);\r\n      }\r\n      if (price &gt;= 290) {\r\n        $(\"#test\").html(\"You would need 10 bags of plaster costing \u00a362.30\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"62.30\");\r\n        $(\"#plaster\").html(price + 62.3);\r\n      }\r\n      if (price &gt;= 300) {\r\n        $(\"#test\").html(\"You would  need 10 bags of plaster costing \u00a362.30\");\r\n        document.getElementById(\"ouch\").setAttribute(\"value\", \"62.30\");\r\n        $(\"#plaster\").html(price + 62.3);\r\n      }\r\n      let p = $(\"#plaster\")\r\n      p.html( Math.round(+p.html() * 1000)/1000 )\r\n    }\r\n  });\r\n});\r\n\r\n//jQuery time\r\nvar current_fs, next_fs, previous_fs; //fieldsets\r\nvar left, opacity, scale; //fieldset properties which we will animate\r\nvar animating; //flag to prevent quick multi-click glitches\r\n\r\n$(\".next\").click(function() {\r\n  if (animating) return false;\r\n  animating = true;\r\n\r\n  current_fs = $(this).parent();\r\n  next_fs = $(this)\r\n    .parent()\r\n    .next();\r\n\r\n  //activate next step on progressbar using the index of next_fs\r\n  $(\"#progressbar li\")\r\n    .eq($(\"fieldset\").index(next_fs))\r\n    .addClass(\"active\");\r\n\r\n  //show the next fieldset\r\n  next_fs.show();\r\n  //hide the current fieldset with style\r\n  current_fs.animate(\r\n    { opacity: 0 },\r\n    {\r\n      step: function(now, mx) {\r\n        //as the opacity of current_fs reduces to 0 - stored in \"now\"\r\n        //1. scale current_fs down to 80%\r\n        scale = 1 - (1 - now) * 0.2;\r\n        //2. bring next_fs from the right(50%)\r\n        left = now * 50 + \"%\";\r\n        //3. increase opacity of next_fs to 1 as it moves in\r\n        opacity = 1 - now;\r\n        current_fs.css({\r\n          transform: \"scale(\" + scale + \")\",\r\n          position: \"absolute\"\r\n        });\r\n        next_fs.css({ left: left, opacity: opacity });\r\n      },\r\n      duration: 800,\r\n      complete: function() {\r\n        current_fs.hide();\r\n        animating = false;\r\n      },\r\n      //this comes from the custom easing plugin\r\n      easing: \"easeInOutBack\"\r\n    }\r\n  );\r\n});\r\n\r\n$(\".previous\").click(function() {\r\n  if (animating) return false;\r\n  animating = true;\r\n\r\n  current_fs = $(this).parent();\r\n  previous_fs = $(this)\r\n    .parent()\r\n    .prev();\r\n\r\n  //de-activate current step on progressbar\r\n  $(\"#progressbar li\")\r\n    .eq($(\"fieldset\").index(current_fs))\r\n    .removeClass(\"active\");\r\n\r\n  //show the previous fieldset\r\n  previous_fs.show();\r\n  //hide the current fieldset with style\r\n  current_fs.animate(\r\n    { opacity: 0 },\r\n    {\r\n      step: function(now, mx) {\r\n        //as the opacity of current_fs reduces to 0 - stored in \"now\"\r\n        //1. scale previous_fs from 80% to 100%\r\n        scale = 0.8 + (1 - now) * 0.2;\r\n        //2. take current_fs to the right(50%) - from 0%\r\n        left = (1 - now) * 50 + \"%\";\r\n        //3. increase opacity of previous_fs to 1 as it moves in\r\n        opacity = 1 - now;\r\n        current_fs.css({ left: left });\r\n        previous_fs.css({\r\n          transform: \"scale(\" + scale + \")\",\r\n          opacity: opacity\r\n        });\r\n      },\r\n      duration: 800,\r\n      complete: function() {\r\n        current_fs.hide();\r\n        animating = false;\r\n      },\r\n      //this comes from the custom easing plugin\r\n      easing: \"easeInOutBack\"\r\n    }\r\n  );\r\n});\r\n\r\n$(\".submit\").click(function() {\r\n  return false;\r\n});</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>/*custom font*/\r\n@import url(https://fonts.googleapis.com/css?family=Montserrat);\r\n\r\n/*basic reset*/\r\n* {margin: 0; padding: 0;}\r\n\r\nhtml {\r\n\theight: 100%;\r\n\t/*Image only BG fallback*/\r\n\t\r\n\t/*background = gradient + image pattern combo*/\r\n\tbackground: \r\n\t\tlinear-gradient(rgba(196, 102, 0, 0.6), rgba(155, 89, 182, 0.6));\r\n}\r\n\r\nbody {\r\n\tfont-family: montserrat, arial, verdana;\r\n}\r\n/*form styles*/\r\n#msform {\r\n\twidth: 400px;\r\n\tmargin: 50px auto;\r\n\ttext-align: center;\r\n\tposition: relative;\r\n}\r\n#msform fieldset {\r\n\tbackground: white;\r\n\tborder: 0 none;\r\n\tborder-radius: 3px;\r\n\tbox-shadow: 0 0 15px 1px rgba(0, 0, 0, 0.4);\r\n\tpadding: 20px 30px;\r\n\tbox-sizing: border-box;\r\n\twidth: 80%;\r\n\tmargin: 0 10%;\r\n\t\r\n\t/*stacking fieldsets above each other*/\r\n\tposition: relative;\r\n}\r\n/*Hide all except first fieldset*/\r\n#msform fieldset:not(:first-of-type) {\r\n\tdisplay: none;\r\n}\r\n/*inputs*/\r\n#msform select, #msform input, #msform textarea {\r\n\tpadding: 15px;\r\n\tborder: 1px solid #ccc;\r\n\tborder-radius: 3px;\r\n\tmargin-bottom: 10px;\r\n\twidth: 100%;\r\n\tbox-sizing: border-box;\r\n\tfont-family: montserrat;\r\n\tcolor: #2C3E50;\r\n\tfont-size: 13px;\r\n}\r\n/*buttons*/\r\n#msform .action-button {\r\n\twidth: 100px;\r\n\tbackground: #27AE60;\r\n\tfont-weight: bold;\r\n\tcolor: white;\r\n\tborder: 0 none;\r\n\tborder-radius: 1px;\r\n\tcursor: pointer;\r\n\tpadding: 10px 5px;\r\n\tmargin: 10px 5px;\r\n}\r\n#msform .action-button:hover, #msform .action-button:focus {\r\n\tbox-shadow: 0 0 0 2px white, 0 0 0 3px #27AE60;\r\n}\r\n/*headings*/\r\n.fs-title {\r\n\tfont-size: 15px;\r\n\ttext-transform: uppercase;\r\n\tcolor: #2C3E50;\r\n\tmargin-bottom: 10px;\r\n}\r\n.fs-subtitle {\r\n\tfont-weight: normal;\r\n\tfont-size: 13px;\r\n\tcolor: #666;\r\n\tmargin-bottom: 20px;\r\n}\r\n/*progressbar*/\r\n#progressbar {\r\n\tmargin-bottom: 30px;\r\n\toverflow: hidden;\r\n\t/*CSS counters to number the steps*/\r\n\tcounter-reset: step;\r\n}\r\n#progressbar li {\r\n\tlist-style-type: none;\r\n\tcolor: white;\r\n\ttext-transform: uppercase;\r\n\tfont-size: 9px;\r\n\twidth: 33.33%;\r\n\tfloat: left;\r\n\tposition: relative;\r\n}\r\n#progressbar li:before {\r\n\tcontent: counter(step);\r\n\tcounter-increment: step;\r\n\twidth: 20px;\r\n\tline-height: 20px;\r\n\tdisplay: block;\r\n\tfont-size: 10px;\r\n\tcolor: #333;\r\n\tbackground: white;\r\n\tborder-radius: 3px;\r\n\tmargin: 0 auto 5px auto;\r\n}\r\n/*progressbar connectors*/\r\n#progressbar li:after {\r\n\tcontent: '';\r\n\twidth: 100%;\r\n\theight: 2px;\r\n\tbackground: white;\r\n\tposition: absolute;\r\n\tleft: -50%;\r\n\ttop: 9px;\r\n\tz-index: -1; /*put it behind the numbers*/\r\n}\r\n#progressbar li:first-child:after {\r\n\t/*connector not needed before the first step*/\r\n\tcontent: none; \r\n}\r\n/*marking active/completed steps green*/\r\n/*The number of the step and the connector before it = green*/\r\n#progressbar li.active:before,  #progressbar li.active:after{\r\n\tbackground: #27AE60;\r\n\tcolor: white;\r\n}\r\n#msform .ms-field-title {\r\n    color: #5a5a5a;\r\n    margin-bottom: 5px;\r\n    font-size: 12px;\r\n    font-family: 'roboto', sans-serif;\r\n    font-weight: 500;\r\n}</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script type=\"text/javascript\" src=\"http://code.jquery.com/jquery-git.js\"&gt;&lt;/script&gt;\r\n\r\n&lt;!-- multistep form --&gt;\r\n&lt;form id=\"msform\"&gt;\r\n  &lt;!-- progressbar --&gt;\r\n  &lt;ul id=\"progressbar\"&gt;\r\n    &lt;li class=\"active\"&gt;Account Setup&lt;/li&gt;\r\n    &lt;li&gt;Social Profiles&lt;/li&gt;\r\n    &lt;li&gt;Personal Details&lt;/li&gt;\r\n  &lt;/ul&gt;\r\n  &lt;!-- fieldsets --&gt;\r\n  &lt;fieldset&gt;\r\n    &lt;h2 class=\"fs-title\"&gt;Crreate your account&lt;/h2&gt;\r\n    Labour:&lt;h3 class=\"fs-subtitle\"&gt;\u00a3&lt;u name=\"price\" id=\"price\"&gt;&lt;/u&gt;&lt;/h3&gt;&lt;u name=\"plaster\" id=\"plaster\"&gt;&lt;/u&gt;&lt;input hidden type=\"text\" id=\"ouch\" /&gt;\r\n    &lt;select name=\"cpu\" id=\"CPU\"&gt;\r\n            &lt;option value=\"0\" selected&gt;Width&lt;/option&gt;\r\n            &lt;option value=\"10\"&gt;2ft&lt;/option&gt;\r\n            &lt;option value=\"20\"&gt;4ft&lt;/option&gt;\r\n            &lt;option value=\"30\"&gt;6ft&lt;/option&gt;\r\n            &lt;option value=\"40\"&gt;8ft&lt;/option&gt;\r\n            &lt;option value=\"50\"&gt;10ft&lt;/option&gt;\r\n            &lt;option value=\"60\"&gt;12ft&lt;/option&gt;\r\n            &lt;option value=\"70\"&gt;14ft&lt;/option&gt;\r\n            &lt;option value=\"80\"&gt;16ft&lt;/option&gt;\r\n            &lt;option value=\"90\"&gt;18ft&lt;/option&gt;\r\n            &lt;option value=\"100\"&gt;20ft&lt;/option&gt;\r\n            &lt;option value=\"110\"&gt;22ft&lt;/option&gt;\r\n            &lt;option value=\"120\"&gt;24ft&lt;/option&gt;\r\n            &lt;option value=\"130\"&gt;26ft&lt;/option&gt;\r\n            &lt;option value=\"140\"&gt;28ft&lt;/option&gt;\r\n            &lt;option value=\"150\"&gt;30ft&lt;/option&gt;\r\n        &lt;/select&gt;&lt;/span&gt;\r\n           &lt;select name=\"GPU\" id=\"GPU\"&gt;\r\n                        &lt;option value=\"0\" selected&gt;Length&lt;/option&gt;\r\n            &lt;option value=\"10\"&gt;2ft&lt;/option&gt;\r\n            &lt;option value=\"20\"&gt;4ft&lt;/option&gt;\r\n            &lt;option value=\"30\"&gt;6ft&lt;/option&gt;\r\n            &lt;option value=\"40\"&gt;8ft&lt;/option&gt;\r\n            &lt;option value=\"50\"&gt;10ft&lt;/option&gt;\r\n            &lt;option value=\"60\"&gt;12ft&lt;/option&gt;\r\n            &lt;option value=\"70\"&gt;14ft&lt;/option&gt;\r\n            &lt;option value=\"80\"&gt;16ft&lt;/option&gt;\r\n            &lt;option value=\"90\"&gt;18ft&lt;/option&gt;\r\n            &lt;option value=\"100\"&gt;20ft&lt;/option&gt;\r\n            &lt;option value=\"110\"&gt;22ft&lt;/option&gt;\r\n            &lt;option value=\"120\"&gt;24ft&lt;/option&gt;\r\n            &lt;option value=\"130\"&gt;26ft&lt;/option&gt;\r\n            &lt;option value=\"140\"&gt;28ft&lt;/option&gt;\r\n            &lt;option value=\"150\"&gt;30ft&lt;/option&gt;\r\n        &lt;/select&gt;\r\n     &lt;select value=\"0\" name=\"bead\" id=\"bead\"&gt;\r\n                        &lt;option value=\"0\" selected&gt;External Corners&lt;/option&gt;\r\n            &lt;option value=\"2.25\"&gt;1&lt;/option&gt;\r\n            &lt;option value=\"11.11\"&gt;2&lt;/option&gt;\r\n            &lt;option value=\"3\"&gt;3&lt;/option&gt;\r\n            &lt;option value=\"4\"&gt;4&lt;/option&gt;\r\n            &lt;option value=\"5\"&gt;5&lt;/option&gt;\r\n    &lt;/select&gt;\r\n                                                                    &lt;span style=\"text-align:left;\" id=\"test\" class=\"ms-field-title\"&gt;&lt;sup&gt;*&lt;/sup&gt;&lt;/span&gt;\r\n    &lt;input type=\"button\" name=\"next\" class=\"next action-button\" value=\"Next\" /&gt;\r\n  &lt;/fieldset&gt;\r\n  &lt;fieldset&gt;\r\n    &lt;h2 class=\"fs-title\"&gt;Social Profiles&lt;/h2&gt;\r\n    &lt;h3 class=\"fs-subtitle\"&gt;Your presence on the social network&lt;/h3&gt;\r\n    &lt;input type=\"text\" name=\"twitter\" placeholder=\"Twitter\" /&gt;\r\n    &lt;input type=\"text\" name=\"facebook\" placeholder=\"Facebook\" /&gt;\r\n    &lt;input type=\"text\" name=\"gplus\" placeholder=\"Google Plus\" /&gt;\r\n    &lt;input type=\"button\" name=\"previous\" class=\"previous action-button\" value=\"Previous\" /&gt;\r\n    &lt;input type=\"button\" name=\"next\" class=\"next action-button\" value=\"Next\" /&gt;\r\n  &lt;/fieldset&gt;\r\n  &lt;fieldset&gt;\r\n    &lt;h2 class=\"fs-title\"&gt;Personal Details&lt;/h2&gt;\r\n    &lt;h3 class=\"fs-subtitle\"&gt;We will never sell it&lt;/h3&gt;\r\n    &lt;input type=\"text\" name=\"fname\" placeholder=\"First Name\" /&gt;\r\n    &lt;input type=\"text\" name=\"lname\" placeholder=\"Last Name\" /&gt;\r\n    &lt;input type=\"text\" name=\"phone\" placeholder=\"Phone\" /&gt;\r\n    &lt;textarea name=\"address\" placeholder=\"Address\"&gt;&lt;/textarea&gt;\r\n    &lt;input type=\"button\" name=\"previous\" class=\"previous action-button\" value=\"Previous\" /&gt;\r\n    &lt;input type=\"submit\" name=\"submit\" class=\"submit action-button\" value=\"Submit\" /&gt;\r\n  &lt;/fieldset&gt;\r\n&lt;/form&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 53, "user_id": 11991135, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-npXd_SeDz_s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc4NGZFENQO-wiY3AHnBHbPLj5CyQ/photo.jpg?sz=128", "display_name": "callum", "link": "https://stackoverflow.com/users/11991135/callum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 57700617, "answer_count": 1, "score": 2, "last_activity_date": 1567030054, "creation_date": 1567023149, "question_id": 57699459, "link": "https://stackoverflow.com/questions/57699459/my-auto-form-wont-output-the-correct-value", "title": "my auto form wont output the correct value", "body": "<p>im trying to build an auto estimator form but when i do width 30ft and length 16ft i get 000000000003 on mytotal some bits are missing but all the ifs yet it still outputs different</p>\n\n<p>i have tryed everything and i cant get it to work could someone help please\n<a href=\"https://codepen.io/callum-edwards/pen/oNvBWxo\" rel=\"nofollow noreferrer\">https://codepen.io/callum-edwards/pen/oNvBWxo</a></p>\n\n<p>$('#plaster').html( 49.84 + price );</p>\n\n\n\n<pre class=\"lang-js prettyprint-override\"><code>$(function(){\n$(function () {\n    var fields = $('select[name=bead],select[name=cpu],select[name=GPU]').change(calculate);\n\n    function calculate() {\n        var price = 0;\n        fields.each(function () {\n            price += +$(this).val();\n        })\n        $('#price').html(price.toFixed(2));\n      if (price &gt;= 10) {\n  $('#test').html( \"You would need 1 bags of plaster Costing \u00a36.23\" );\n         document.getElementById(\"ouch\").setAttribute('value','6.23');\n          $('#plaster').html( price + 6.23 );\n\n}\nif (price == 20) {\n  $('#test').html( \"You  would need 1 bags of plaster Costing \u00a366.23\" );\n            document.getElementById(\"ouch\").setAttribute('value','6.23');\n\n    $('#plaster').html( price + 6.23 );\n\n}\nif (price == 30) {\n  $('#test').html( \"You would need 1 bags of plaster Costing \u00a36.23\" );\n           document.getElementById(\"ouch\").setAttribute('value','6.23');\n\n     $('#plaster').html( price + 6.23 );\n\n}\n\nif (price &gt;= 40) {\n  $('#test').html( \"You would need 2 bags of plaster Costing \u00a31f2.46\" );\n           document.getElementById(\"ouch\").setAttribute('value','12.46');\n\n     $('#plaster').html( price + 12.46 );\n\n}\n\nif (price &gt;= 50) {\n  $('#test').html( \"You would need 2 bags of plaster Costing \u00a312.46\" );           document.getElementById(\"ouch\").setAttribute('value','12.46');\n\n       $('#plaster').html( price + 12.46 );\n\n}\nif (price &gt;= 60) {\n  $('#test').html( \"You would need 2 bags of plaster Costing \u00a312.46\" );           document.getElementById(\"ouch\").setAttribute('value','12.46');\n\n     $('#plaster').html( price + 12.46 );\n\n}\nif (price &gt;= 70) {\n  $('#test').html( \"You would need 3 bags of plaster Costing \u00a318.69\" );           document.getElementById(\"ouch\").setAttribute('value','18.69');\n\n     $('#plaster').html( price + 18.69 );\n}\nif (price &gt;= 80) {\n  $('#test').html( \"You would need 3 bags of plaster Costing \u00a318.69\" );\n  document.getElementById(\"ouch\").setAttribute('value','18.69');\n     $('#plaster').html( price + 18.69 );\n}\nif (price &gt;= 90) {\n  $('#test').html( \"You would need 3 bags of plaster Costing \u00a318.69\" );\n  document.getElementById(\"ouch\").setAttribute('value','18.69');\n     $('#plaster').html( price + 18.69 );\n\n}\nif (price &gt;= 100) {\n  $('#test').html( \"You would need 4 bags of plaster costing \u00a324.92\" );\n  document.getElementById(\"ouch\").setAttribute('value','24.92');\n     $('#plaster').html( price + 24.92 );\n\n}\nif (price &gt;= 110) {\n  $('#test').html( \"You would need 4 bags of plaster costing \u00a324.92\" );  document.getElementById(\"ouch\").setAttribute('value','24.92');\n\n     $('#plaster').html( price + 24.92 );\n\n}\nif (price &gt;= 120) {\n  $('#test').html( \"You would need 4 bags of plaster costing \u00a324.92\" );  document.getElementById(\"ouch\").setAttribute('value','24.92');\n\n     $('#plaster').html( price + 24.92 );\n\n}\nif (price &gt;= 130) {\n  $('#test').html( \"You would need 5 bags of plaster costing \u00a331.15\" );  document.getElementById(\"ouch\").setAttribute('value','31.15');\n\n     $('#plaster').html( price + 31.15 );\n}\nif (price &gt;= 140) {\n  $('#test').html( \"You would need 5 bags of plaster costing \u00a331.15\" );\n  document.getElementById(\"ouch\").setAttribute('value','31.15');\n     $('#plaster').html( price + 31.15 );\n}\nif (price &gt;= 150) {\n  $('#test').html( \"You would need 5 bags of plaster costing \u00a331.15\" );\n  document.getElementById(\"ouch\").setAttribute('value','31.15');\n  $('#plaster').html( price + 31.15 );\n}\nif (price &gt;= 160) {\n  $('#test').html( \"You would need 6 bags of plaster costing \u00a337.38\" );\n  document.getElementById(\"ouch\").setAttribute('value','37.38');\n  $('#plaster').html( price + 37.38 );\n\n}\nif (price &gt;= 170) {\n  $('#test').html( \"You would need 6 bags of plaster costing \u00a337.38\" );\n  document.getElementById(\"ouch\").setAttribute('value','37.38');\n  $('#plaster').html( price + 37.38 );\n\n}\nif (price &gt;= 180) {\n  $('#test').html( \"You would need 6 bags of plaster costing \u00a337.38\" );\n  document.getElementById(\"ouch\").setAttribute('value','37.38');\n  $('#plaster').html( price + 37.38 );\n}\n\nif (price &gt;= 190) {\n  $('#test').html( \"You would need 7 bags of plaster costing \u00a343.61\" );\n  document.getElementById(\"ouch\").setAttribute('value','43.61');\n  $('#plaster').html( price + 43.61 );\n\n}\n\nif (price &gt;= 200) {\n  $('#test').html( \"You would need 7 bags of plaster costing \u00a343.61\" );\n    document.getElementById(\"ouch\").setAttribute('value','43.61');\n  $('#plaster').html( price + 43.61 );\n\n}\nif (price &gt;= 210) {\n  $('#test').html( \"You would need 7 bags of plaster costing \u00a343.61\" );\n    document.getElementById(\"ouch\").setAttribute('value','43.61');\n  $('#plaster').html( price + 43.61 );\n\n}\nif (price &gt;= 220) {\n  $('#test').html( \"You would need 7 bags of plaster costing \u00a343.61\" );\n    document.getElementById(\"ouch\").setAttribute('value','49.84');\n  $('#plaster').html( 49.84 + price );\n\n}\nif (price &gt;= 230) {\n\n\n  $('#plaster').html( price + 49.84 );\n\n}\nif (price &gt;= 240) {\n  $('#test').html( \"You would need 8 bags of plaster costing \u00a349.84\" ); document.getElementById(\"ouch\").setAttribute('value','49.84');\n  $('#plaster').html( price + 49.84 );\n\n}\nif (price &gt;= 250) {\n  $('#test').html( \"You would need 9 bags of plaster costing \u00a357.06\" ); document.getElementById(\"ouch\").setAttribute('value','57.06');\n  $('#plaster').html( price + 57.06 );\n\n}\nif (price &gt;= 260) {\n  $('#test').html( \"You would need 9 bags of plaster costing \u00a357.06\" );\n  document.getElementById(\"ouch\").setAttribute('value','57.06');\n  $('#plaster').html( price + 57.06 );\n\n}\nif (price &gt;= 270) {\n  $('#test').html( \"You would need 9 bags of plaster costing \u00a357.06\" );\n  document.getElementById(\"ouch\").setAttribute('value','57.06');\n  $('#plaster').html( price + 57.06 );\n\n}\nif (price &gt;= 280) {\n  $('#test').html( \"You would need 10 bags of plaster costing \u00a362.30\" );\n  document.getElementById(\"ouch\").setAttribute('value','62.30');\n  $('#plaster').html( price + 62.30 );\n\n}\nif (price &gt;= 290) {\n  $('#test').html( \"You would need 10 bags of plaster costing \u00a362.30\" );  document.getElementById(\"ouch\").setAttribute('value','62.30');\n  $('#plaster').html( price + 62.30 );\n\n\n}\nif (price &gt;= 300) {\n  $('#test').html( \"You would  need 10 bags of plaster costing \u00a362.30\" );  document.getElementById(\"ouch\").setAttribute('value','62.30');\n  $('#plaster').html( price + 62.30 );\n}\n\n      }   \n\n})\n\n    });\n\n//jQuery time\nvar current_fs, next_fs, previous_fs; //fieldsets\nvar left, opacity, scale; //fieldset properties which we will animate\nvar animating; //flag to prevent quick multi-click glitches\n\n$(\".next\").click(function(){\n    if(animating) return false;\n    animating = true;\n\n    current_fs = $(this).parent();\n    next_fs = $(this).parent().next();\n\n    //activate next step on progressbar using the index of next_fs\n    $(\"#progressbar li\").eq($(\"fieldset\").index(next_fs)).addClass(\"active\");\n\n    //show the next fieldset\n    next_fs.show(); \n    //hide the current fieldset with style\n    current_fs.animate({opacity: 0}, {\n        step: function(now, mx) {\n            //as the opacity of current_fs reduces to 0 - stored in \"now\"\n            //1. scale current_fs down to 80%\n            scale = 1 - (1 - now) * 0.2;\n            //2. bring next_fs from the right(50%)\n            left = (now * 50)+\"%\";\n            //3. increase opacity of next_fs to 1 as it moves in\n            opacity = 1 - now;\n            current_fs.css({\n        'transform': 'scale('+scale+')',\n        'position': 'absolute'\n      });\n            next_fs.css({'left': left, 'opacity': opacity});\n        }, \n        duration: 800, \n        complete: function(){\n            current_fs.hide();\n            animating = false;\n        }, \n        //this comes from the custom easing plugin\n        easing: 'easeInOutBack'\n    });\n});\n\n$(\".previous\").click(function(){\n    if(animating) return false;\n    animating = true;\n\n    current_fs = $(this).parent();\n    previous_fs = $(this).parent().prev();\n\n    //de-activate current step on progressbar\n    $(\"#progressbar li\").eq($(\"fieldset\").index(current_fs)).removeClass(\"active\");\n\n    //show the previous fieldset\n    previous_fs.show(); \n    //hide the current fieldset with style\n    current_fs.animate({opacity: 0}, {\n        step: function(now, mx) {\n            //as the opacity of current_fs reduces to 0 - stored in \"now\"\n            //1. scale previous_fs from 80% to 100%\n            scale = 0.8 + (1 - now) * 0.2;\n            //2. take current_fs to the right(50%) - from 0%\n            left = ((1-now) * 50)+\"%\";\n            //3. increase opacity of previous_fs to 1 as it moves in\n            opacity = 1 - now;\n            current_fs.css({'left': left});\n            previous_fs.css({'transform': 'scale('+scale+')', 'opacity': opacity});\n        }, \n        duration: 800, \n        complete: function(){\n            current_fs.hide();\n            animating = false;\n        }, \n        //this comes from the custom easing plugin\n        easing: 'easeInOutBack'\n    });\n});\n\n$(\".submit\").click(function(){\n    return false;\n\n})\n</code></pre>\n\n<p>$('#plaster').html( price + 49.84 );</p>\n\n<p>it says 000000000003 yet the others down</p>\n"}, {"tags": ["javascript", "node.js", "opencv", "matrix", "opencv4nodejs"], "comments": [{"owner": {"reputation": 11988, "user_id": 866082, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/mZc1Y.png?s=128&g=1", "display_name": "Mehran", "link": "https://stackoverflow.com/users/866082/mehran"}, "edited": false, "score": 1, "creation_date": 1599601715, "post_id": 57699414, "comment_id": 112822516, "body": "Thanks. I don&#39;t know why they have missed the this function!"}], "answers": [{"tags": [], "owner": {"reputation": 1709, "user_id": 2244284, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/q4UJw.png?s=128&g=1", "display_name": "Gavin", "link": "https://stackoverflow.com/users/2244284/gavin"}, "is_accepted": true, "score": 1, "last_activity_date": 1567104367, "creation_date": 1567104367, "answer_id": 57716197, "question_id": 57699414, "link": "https://stackoverflow.com/questions/57699414/how-to-set-a-matrix-region-with-opencv4nodejs/57716197#57716197", "title": "How to set a matrix region with opencv4nodejs", "body": "<p>Managed to get down to 1.1 seconds using buffer arrays. Unsure how else to speed up.</p>\n\n<pre><code>/**\n * Places a source matrix onto a dest matrix.\n * Note: This replaces pixels entirely, it doesn't merge transparency\n * @param {cv.Mat} source_mat matrix being copied\n * @param {cv.Mat} dest_mat matrix being pasted into\n * @param {number} x horizontal offset of source image\n * @param {number} y vertical offset of source image\n */\nfunction overlayOnto(source_mat, dest_mat, x, y){\n    if(source_mat.channels != dest_mat.channels) throw new Error('src and dst channel counts must match');\n    let source_uint8 = new Uint8Array( source_mat.getData() ); // WARNING 4 CHANNELS\n    let dest_uint8 = new Uint8Array( dest_mat.getData() ); // WARNING 4 CHANNELS\n    let dest_width = dest_mat.cols;\n    let x_count = 0; // set counters\n    let y_count = 0; // set counters\n    let channel_count = source_mat.channels;\n    for (let i = 0; i &lt; source_uint8.length; i += channel_count) { // WARNING 4 CHANNELS\n        let dest_x = x_count + x; // add offset\n        let dest_y = y_count + y; // add offset\n\n        if( !( (dest_x &lt; 0 || dest_x &gt; dest_mat.cols-1) || (dest_y &lt; 0 || dest_y &gt; dest_mat.rows-1) ) ){ // pixel does not fall outside of dest mat\n            // write into buffer array\n            let dest_i = (dest_x + dest_width * dest_y); // (x + w * h) to get x/y coord in single-dimension array\n            let dest_buffer_i = dest_i * channel_count;\n            if(channel_count &gt;= 1)  dest_uint8.fill(source_uint8[i+0], dest_buffer_i+0 , dest_buffer_i+0+1);\n            if(channel_count &gt;= 2)  dest_uint8.fill(source_uint8[i+1], dest_buffer_i+1 , dest_buffer_i+1+1);\n            if(channel_count &gt;= 3)  dest_uint8.fill(source_uint8[i+2], dest_buffer_i+2 , dest_buffer_i+2+1);\n            if(channel_count &gt;= 4)  dest_uint8.fill(source_uint8[i+3], dest_buffer_i+3 , dest_buffer_i+3+1);\n        }\n        x_count++; // increase col\n        x_count = x_count % source_mat.cols; // end of col? move to start\n        if(x_count == 0) y_count++; // started new col? increase row \n    }\n    return new cv.Mat(dest_uint8, dest_mat.rows, dest_mat.cols, dest_mat.type);\n}\n</code></pre>\n"}], "owner": {"reputation": 1709, "user_id": 2244284, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/q4UJw.png?s=128&g=1", "display_name": "Gavin", "link": "https://stackoverflow.com/users/2244284/gavin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 57716197, "answer_count": 1, "score": 1, "last_activity_date": 1567104367, "creation_date": 1567022895, "question_id": 57699414, "link": "https://stackoverflow.com/questions/57699414/how-to-set-a-matrix-region-with-opencv4nodejs", "title": "How to set a matrix region with opencv4nodejs", "body": "<p><strong>Question</strong>:</p>\n\n<p>What is the fastest method to set a matrix area in opencv4nodejs?</p>\n\n<p><strong>Problem</strong>:</p>\n\n<p>I am overlaying a source image into a larger destination image with dimensions in the low thousands.</p>\n\n<p>In Python I'd get/set regions of matching size with:</p>\n\n<pre><code>destination[y:y+h, x:x+w] = source[:,:]\n</code></pre>\n\n<p>But I'm not sure how to do this in Javascript.</p>\n\n<p>I've tried a few methods but even the fastest is prohibitively slow.</p>\n\n<hr>\n\n<p>In example I have:</p>\n\n<ul>\n<li>source_mat cols:2929, rows:2049</li>\n<li>dest_mat cols:3000, rows:6000</li>\n<li>offset_x:150, offset_y:150</li>\n</ul>\n\n<p>casting matrix to array, looping rows and cols, setting dest pixels takes about 12 seconds</p>\n\n<pre><code>let debug_overlay_start = new Date().valueOf();\nlet source_pixels = source_mat.getDataAsArray();\nfor (let row_index = 0, l_1 = source_pixels.length; row_index &lt; l_1; row_index++) {\n    if(row_index + offset_y &lt; 0) continue;\n    if(row_index + offset_y &gt;= dest_mat.rows) continue;\n    let this_col = source_pixels[row_index];\n    for (let col_index = 0, l_2 = this_col.length; col_index &lt; l_2; col_index++) {\n        if(col_index + offset_x &lt; 0) continue;\n        if(col_index + offset_x &gt;= dest_mat.cols) continue;\n        dest_mat.set(row_index + offset_y, col_index + offset_x, source_pixels[row_index][col_index]);\n    }\n}\nlet debug_overlay_end = new Date().valueOf();\nconsole.log(`overlay method took ${((debug_overlay_end - debug_overlay_start)/1000).toFixed(2)}`); // overlay method took  11.63\nreturn dest_mat;\n</code></pre>\n\n<p>Casting both to arrays, looping through rows, splicing cols in takes a massive 82 seconds:</p>\n\n<pre><code>let debug_overlay_end = new Date().valueOf();\nlet source_pixels = source_mat.getDataAsArray();\nlet new_dest_mat = dest_mat.getDataAsArray();\nfor (let row_index = 0, l_1 = source_pixels.length; row_index &lt; l_1; row_index++) {\n    if(row_index + offset_y &lt; 0) continue;\n    if(row_index + offset_y &gt;= dest_mat.rows) continue;\n    let this_col = source_pixels[row_index]; // entire column of source pixels\n    new_dest_mat[row_index + offset_y].splice(offset_x, this_col.length, ...this_col);\n}\nlet debug_overlay_end = new Date().valueOf();\nconsole.log(`overlay method took ${((debug_overlay_end - debug_overlay_start)/1000).toFixed(2)}`); // 82 seconds\nreturn new cv.Mat(new_dest_mat, dest_mat.type);\n</code></pre>\n\n<p>Replacing region didn't work at all, throwing a lifecycle error with no additional logging:</p>\n\n<pre><code>let debug_overlay_end = new Date().valueOf();\nlet area_to_replace = dest_mat.getRegion(new cv.Rect(x, y, source_mat.cols, source_mat.rows));\narea_to_replace = source_mat.getRegion(new cv.Rect(0, 0, source_mat.cols, source_mat.rows)); // lifecycle error\nconsole.log(`overlay method took ${((debug_overlay_end - debug_overlay_start)/1000).toFixed(2)}`);\nreturn dest_mat;\n</code></pre>\n\n<p>Using <code>setAt()</code> and <code>atRaw()</code> is fastest so far at 8 seconds:</p>\n\n<pre><code>let debug_overlay_start = new Date().valueOf();\nfor(let row_index = 0, row_length = source_mat.rows; row_index &lt; row_length; row_index++){\n    if(row_index + offset_y &lt; 0) continue;\n    if(row_index + offset_y &gt;= dest_mat.rows) continue;\n    for(let col_index = 0, col_length = source_mat.cols; col_index &lt; col_length; col_index++){\n        if(col_index + offset_x &lt; 0) continue;\n        if(col_index + offset_x &gt;= dest_mat.cols) continue;\n        dest_mat.set(row_index + offset_y, col_index + offset_x, source_mat.atRaw(row_index, col_index));\n    }\n}\nlet debug_overlay_end = new Date().valueOf();\nconsole.log(`overlay method took ${((debug_overlay_end - debug_overlay_start)/1000).toFixed(2)}`); // 8.09\nreturn dest_mat;\n</code></pre>\n\n<p>I've had a look at the docs and I'm surprised to see this isn't a common use case. Is the node/electron environment slowing down an otherwise fast operation?</p>\n"}, {"tags": ["javascript", "node.js"], "comments": [{"owner": {"reputation": 3180, "user_id": 2053389, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/RsDcf.jpg?s=128&g=1", "display_name": "RobertAKARobin", "link": "https://stackoverflow.com/users/2053389/robertakarobin"}, "edited": false, "score": 1, "creation_date": 1567022860, "post_id": 57699352, "comment_id": 101842693, "body": "Will the keys always follow the same format? You could use a Regular Expression to extract them from the JSON string. e.g. <code>&#47;&quot;(\\d{9})&quot;:&quot;&#47;g</code>"}, {"owner": {"reputation": 575, "user_id": 5570385, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208127120086413/picture?type=large", "display_name": "Marc Sloth Eastman", "link": "https://stackoverflow.com/users/5570385/marc-sloth-eastman"}, "edited": false, "score": 0, "creation_date": 1567022885, "post_id": 57699352, "comment_id": 101842695, "body": "I&#39;m just curious why you want to do that"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567022941, "post_id": 57699352, "comment_id": 101842716, "body": "Why does the order of the keys matter? You should use an array if order is significant."}, {"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 1, "creation_date": 1567022956, "post_id": 57699352, "comment_id": 101842720, "body": "Are you sure they are not in the original order? How are you determining the new order? Note that the console in, say, Chrome automatically sorts the keys of objects..."}, {"owner": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1567023006, "post_id": 57699352, "comment_id": 101842737, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/32006162/keep-order-of-objects-inside-a-json-string-after-they-are-parsed\">Keep order of objects inside a JSON String after they are parsed</a>"}, {"owner": {"reputation": 57, "user_id": 3295120, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c0df90d2e0a99d7ab59299906893c69?s=128&d=identicon&r=PG&f=1", "display_name": "Ridhwaan", "link": "https://stackoverflow.com/users/3295120/ridhwaan"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567023345, "post_id": 57699352, "comment_id": 101842867, "body": "@Barmar The keys need to be ordered because they are polyline encodings and need to be ordered for them be drawn correctly. What do you mean I need to use an array? Do I set my body object to be a new array variable?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1567023436, "post_id": 57699352, "comment_id": 101842902, "body": "It would be best to use an array. Prior to ES6, there was no guarantee that object keys remembered the order they were added. I&#39;m not sure if JSON parsing is guaranteed to retain the order."}, {"owner": {"reputation": 57, "user_id": 3295120, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c0df90d2e0a99d7ab59299906893c69?s=128&d=identicon&r=PG&f=1", "display_name": "Ridhwaan", "link": "https://stackoverflow.com/users/3295120/ridhwaan"}, "reply_to_user": {"reputation": 10321, "user_id": 215552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bda02894d869c95f620de4b7cd386d?s=128&d=identicon&r=PG", "display_name": "Heretic Monkey", "link": "https://stackoverflow.com/users/215552/heretic-monkey"}, "edited": false, "score": 0, "creation_date": 1567023673, "post_id": 57699352, "comment_id": 101842986, "body": "@HereticMonkey I am using console.log function in node.js. I am logging the body object , then i JSON.parse(body), then log that and see that it is different."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 3295120, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c0df90d2e0a99d7ab59299906893c69?s=128&d=identicon&r=PG&f=1", "display_name": "Ridhwaan", "link": "https://stackoverflow.com/users/3295120/ridhwaan"}, "edited": false, "score": 1, "creation_date": 1567024102, "post_id": 57699562, "comment_id": 101843126, "body": "What do you mean return it as an array? Do you mean changing the API structure? I can not do that as it is a remote API."}, {"owner": {"reputation": 1518, "user_id": 10816461, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6XNsrfhxp_c/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hhVp73I4eIN1MbnU6G4TmjkKpozA/mo/photo.jpg?sz=128", "display_name": "Alex Vovchuk", "link": "https://stackoverflow.com/users/10816461/alex-vovchuk"}, "reply_to_user": {"reputation": 57, "user_id": 3295120, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c0df90d2e0a99d7ab59299906893c69?s=128&d=identicon&r=PG&f=1", "display_name": "Ridhwaan", "link": "https://stackoverflow.com/users/3295120/ridhwaan"}, "edited": false, "score": 0, "creation_date": 1567024421, "post_id": 57699562, "comment_id": 101843262, "body": "Yes, I meant that. If you can&#39;t change API but order is required then only workaround can be used. Nothing better then custom parsing function comes to my mind. JSON.stringify saves order, but JSON.parse doesn&#39;t."}], "tags": [], "owner": {"reputation": 1518, "user_id": 10816461, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6XNsrfhxp_c/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hhVp73I4eIN1MbnU6G4TmjkKpozA/mo/photo.jpg?sz=128", "display_name": "Alex Vovchuk", "link": "https://stackoverflow.com/users/10816461/alex-vovchuk"}, "is_accepted": false, "score": -1, "last_activity_date": 1567023743, "creation_date": 1567023743, "answer_id": 57699562, "question_id": 57699352, "link": "https://stackoverflow.com/questions/57699352/how-to-parse-json-string-but-keep-the-order-of-the-dynamic-keys/57699562#57699562", "title": "How to parse JSON string but keep the order of the dynamic keys?", "body": "<p>There are some thoughts below:\n<a href=\"https://stackoverflow.com/questions/32006162/keep-order-of-objects-inside-a-json-string-after-they-are-parsed\">Keep order of objects inside a JSON String after they are parsed</a></p>\n\n<p>But actually properties are unordered in JS. Not only in JSON. And even if to perform some workaround like parsing - it is not a good practice.</p>\n\n<p>Better solution would be to use array instead. Or Map - depending on your purposes.</p>\n"}, {"tags": [], "owner": {"reputation": 57, "user_id": 3295120, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c0df90d2e0a99d7ab59299906893c69?s=128&d=identicon&r=PG&f=1", "display_name": "Ridhwaan", "link": "https://stackoverflow.com/users/3295120/ridhwaan"}, "is_accepted": true, "score": 1, "last_activity_date": 1567199703, "last_edit_date": 1567199703, "creation_date": 1567094890, "answer_id": 57714054, "question_id": 57699352, "link": "https://stackoverflow.com/questions/57699352/how-to-parse-json-string-but-keep-the-order-of-the-dynamic-keys/57714054#57714054", "title": "How to parse JSON string but keep the order of the dynamic keys?", "body": "<p>Following @RobertAKARobin advice, I get the response of the axios get request as a raw string by setting the <code>responseType : 'arraybuffer'</code> and <code>transformResponse :undefined</code>. Then I captured the result in a Buffer which allowed me to view the response as a raw string. Then I used regex to find each occurrence of the key and replaced it with a running count (i). Then I called JSON.parse() which parses the object without sorting which is just what I wanted. </p>\n\n<p>Here is the code.</p>\n\n<pre><code>const cleanSegmentsResult = result =&gt; {\n    const b = new Buffer(result.data,'binary');\n    const str = b.toString();\n    const regexp = /\"(\\d{9})\"/;\n\n    // replace each 9 digit number (the keys to each segment) with a random key. \n    // This prevents JSON.parse from sorting the keys and messing with the segments\n    let i = 0;\n    let prev = str;\n    let running_str = '';\n    while(prev.match(regexp) != null){\n        running_str = prev.replace(regexp,`\\\"key${i}\\\"`);\n        prev = running_str;\n        i++;\n    }\n    const final_segments = JSON.parse(running_str)\n    return final_segments;     \n}\n\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 3295120, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4c0df90d2e0a99d7ab59299906893c69?s=128&d=identicon&r=PG&f=1", "display_name": "Ridhwaan", "link": "https://stackoverflow.com/users/3295120/ridhwaan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 57714054, "answer_count": 2, "score": 0, "last_activity_date": 1567199703, "creation_date": 1567022583, "last_edit_date": 1567089552, "question_id": 57699352, "link": "https://stackoverflow.com/questions/57699352/how-to-parse-json-string-but-keep-the-order-of-the-dynamic-keys", "title": "How to parse JSON string but keep the order of the dynamic keys?", "body": "<p>I am making a simple get request to an API endpoint. </p>\n\n<pre><code> request(URL, {headers},(err,res,body) =&gt; {\n        if(err){return log(err)}\n        // object keys are sorted but body is a string, not JSON yet.\n        log(body);\n        const obj = JSON.parse(body);\n        // object keys are sorted. no good.\n        log(obj);\n    })\n\n</code></pre>\n\n<p>The structure of the API is as follows.</p>\n\n<pre><code>\"data\": {\n \"965841069\":\"cmfvFd}leMvA_F`@wDNc@\"\n \"380131943\":\"whhvF|emeMr@jAbChDTVvChCdCdAtCz@xFd@zGR\"\n \"486015769\":\"i}dvFnpkeMxFiC\"\n \"646940714\":\"sydvFt~jeM_HrA\"\n \"248417189\":\"{}dvFxpkeMwCoN\"\n \"659848152\":\"oudvFdlkeMuB{K\"\n \"688067745\":\"k|ivFliieM|@t@z@Id@q@KoA]g@a@Y\"\n \"500301841\":\"adfvFpwleMbTqT\"\n \"537970914\":\"uqivFffjeMW@\"\n}\n\n</code></pre>\n\n<p>As you can see the keys ( which are dynamic, I have no way of knowing in advance what it will be) are not sorted ( in terms of their integer value) which is exactly what I want. </p>\n\n<p>However when I use request to make a get request I get the following result (for example):</p>\n\n<pre><code>\"data\":{\n \"543144906\":\"unfvF|_meMm@fF\"\n \"554312533\":\"cgfvF|jleMYB{@CYGm@VWh@MhAElA\"\n \"576762470\":\"eydvFh_keMMS\"\n \"614379898\":\"qzevF`ukeM}GzOiAvBi@f@\"\n \"616186189\":\"{}dvFxpkeMPI\"\n \"620745528\":\"}nevF~aleM~HkI`FyE\"\n \"622882868\":\"mmfvFnqleMa@`MEJ\"\n \"636661460\":\"_dgvFpxmeMjCGd@E~Aa@zAw@`As@^_@d@g@p@aA|@eBZiAPc@\\eB? \n [h@oF\"\n}\n</code></pre>\n\n<p>Here the keys are sorted which is not what the API returns. I know JSON objects do not have order but is there any way to preserve the structure/order of the original object from the API in the response object?</p>\n\n<p>I have attemped at getting the response as a string and then parsing it manually but there must be a more sane solution.</p>\n\n<p><em>Note</em>: I dont feel this is a duplicate because in my case the keys are dynamic and I have no control over the API structure ( can't change from object to array/map) </p>\n"}, {"tags": ["javascript", "d3.js", "linechart"], "comments": [{"owner": {"reputation": 11162, "user_id": 11619647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0MnDA.jpg?s=128&g=1", "display_name": "Emiel Zuurbier", "link": "https://stackoverflow.com/users/11619647/emiel-zuurbier"}, "edited": false, "score": 0, "creation_date": 1567024858, "post_id": 57699330, "comment_id": 101843424, "body": "Hey @DeathInWhite, please add your code and attempt to create your range so we can help you with fixing it."}, {"owner": {"reputation": 117, "user_id": 9285290, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LLZoQ.jpg?s=128&g=1", "display_name": "DeathInWhite", "link": "https://stackoverflow.com/users/9285290/deathinwhite"}, "reply_to_user": {"reputation": 11162, "user_id": 11619647, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0MnDA.jpg?s=128&g=1", "display_name": "Emiel Zuurbier", "link": "https://stackoverflow.com/users/11619647/emiel-zuurbier"}, "edited": false, "score": 0, "creation_date": 1567026410, "post_id": 57699330, "comment_id": 101844023, "body": "There it is, thanks!!"}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 9285290, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LLZoQ.jpg?s=128&g=1", "display_name": "DeathInWhite", "link": "https://stackoverflow.com/users/9285290/deathinwhite"}, "edited": false, "score": 0, "creation_date": 1567097786, "post_id": 57704713, "comment_id": 101871407, "body": "OMG! It worked, thanks! I owe you my life, you are amazing!"}], "tags": [], "owner": {"reputation": 1252, "user_id": 1463880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8ee49ab5d28e8081a59595620542619?s=128&d=identicon&r=PG", "display_name": "lemming", "link": "https://stackoverflow.com/users/1463880/lemming"}, "is_accepted": true, "score": 0, "last_activity_date": 1567064820, "last_edit_date": 1567064820, "creation_date": 1567062089, "answer_id": 57704713, "question_id": 57699330, "link": "https://stackoverflow.com/questions/57699330/how-to-set-range-of-year-in-x-axis-in-d3/57704713#57704713", "title": "How to set range of year in x axis in d3", "body": "<p>You can use the <a href=\"https://github.com/d3/d3-axis#axis_ticks\" rel=\"nofollow noreferrer\">axis.ticks()</a> method to specify the number of ticks you would like for an axis.</p>\n\n<p>This doesn't guarantee that <code>d3</code> will render your requested number of ticks. Rather, <code>d3</code> will try to choose a number of ticks close to your request that still makes sense for your data. </p>\n\n<p>In other words, it won't show intervals that aren't intuitive for a human to understand, like 1.2387 of a year, and will instead show something more sensible like a half-year, a year etc.</p>\n\n<p>But, I think if you know the min and max values of your time domain, then you will be able to provide the number of years in that domain as an argument to the <code>ticks()</code> method.</p>\n\n<pre><code>var minYear = d3.min(data, d =&gt; d.date).getFullYear();\nvar maxYear = d3.max(data, d =&gt; d.date).getFullYear();\nvar numYears = maxYear - minYear;\nvar xAxis = d3.axisBottom(xScale).ticks(numYears);\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 9285290, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LLZoQ.jpg?s=128&g=1", "display_name": "DeathInWhite", "link": "https://stackoverflow.com/users/9285290/deathinwhite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1365, "favorite_count": 0, "accepted_answer_id": 57704713, "answer_count": 1, "score": 1, "last_activity_date": 1567064820, "creation_date": 1567022465, "last_edit_date": 1567026393, "question_id": 57699330, "link": "https://stackoverflow.com/questions/57699330/how-to-set-range-of-year-in-x-axis-in-d3", "title": "How to set range of year in x axis in d3", "body": "<p>I am new to d3js and i am having a problem with mi d3 line chart, well if you can see my chart is showing all the data by year, but my problem is that what i want to do and i dont know how, is it to appear year by year in the x axis but it is showing like this.\n<a href=\"https://i.stack.imgur.com/Bc2Vf.png\" rel=\"nofollow noreferrer\">Image 1</a></p>\n\n<p>It is for every 5 year and i want it to appear year by year.\n<a href=\"https://i.stack.imgur.com/nhjsA.png\" rel=\"nofollow noreferrer\">Image 2</a></p>\n\n<p>This is a part of my code:</p>\n\n<pre><code> //Set the ranges for the line\nvar x = d3.scaleTime().range([0, width]);\nvar y = d3.scaleLinear().range([height, 0]);\n\n//Define the 1st line\nvar valueline = d3.line()\n\n.x(function(d) { return x(d.DATE); })\n    .y(function(d) { return y(d.DDDM01USA156NWDB); });\n\n\n//Set the domains for the lines\nx.domain(d3.extent(data, function(d) { return d.DATE; }));\n\ny.domain([20, 160]);\n\n//Set axis for the lines\nvar xAxis = d3.axisBottom()\n    .scale(x);\n\nvar yAxis = d3.axisLeft()\n    .scale(y);\n\n//Gridlines in x axis function\nvar gridlineX = d3.axisBottom(x)\n    .tickSize(-height)\n    .tickFormat(\"\");\n\n\n//Add the X gridlines\nsvg.append(\"g\")\n    .attr(\"class\", \"grid\")\n    .attr(\"transform\", \"translate(0,\" + height + \")\")\n    .call(gridlineX);\n\n//Gridlines in y axis function\nvar gridlineY = d3.axisLeft()\n    .tickSize(-width)\n    .tickFormat(\"%\")\n    .scale(y);\n\n//Add the Y gridlines\nsvg.append(\"g\")\n    .attr(\"class\", \"grid2\")\n    .call(gridlineY);\n\n//--------------Add the valueline path------------------\n//Path (line Chart) transitions\nfunction lineTransition(path) {\n    path.transition()\n        .duration(2000)\n        .attrTween(\"stroke-dasharray\", tweenDash);\n}\n\nfunction tweenDash() {\n    var l = this.getTotalLength(),\n        i = d3.interpolateString(\"0,\" + l, l + \",\" + l);\n\n    return function(t) {\n        return i(t);\n    };\n}\n\n//Add the valueline path for line 1\nsvg.append(\"path\")\n    .datum(data)\n    .attr(\"class\", \"line\")\n    .attr(\"id\", \"line1\")\n    .style(\"stroke\", \"#7C6CAA\")\n    .style(\"stroke-width\", \"3\")\n    .attr(\"d\", valueline);\n//Transition\nsvg.select(\"#line1\")\n    .datum(data)\n    .attr(\"d\", valueline)\n    .call(lineTransition);\n\n//xlabel    \nsvg.append(\"text\")\n    .attr(\"transform\",\n        \"translate(\" + (width / 2) + \" ,\" +\n        (height + margin.top + 20) + \")\")\n    .style(\"text-anchor\", \"middle\")\n    .attr(\"dy\", \".80em\")\n    .text(\"Year\");\n//ylabel\nsvg.append(\"text\")\n    .attr(\"class\", \"y label\")\n    .attr(\"text-anchor\", \"end\")\n    .attr(\"y\", 6)\n    .attr(\"dy\", \".75em\")\n    .attr(\"transform\", \"rotate(-90)\")\n    .text(\"Percent\");\n\n//Add the X Axis\nsvg.append(\"g\")\n    .attr(\"class\", \"x axis axisGrey\")\n    .attr(\"transform\", \"translate(0,\" + height + \")\")\n    .call(xAxis)\n    .selectAll(\"text\")\n    .style(\"text-anchor\", \"end\")\n    .attr(\"dx\", \"-.8em\")\n    .attr(\"dy\", \".15em\")\n    .style(\"font-size\", \"12px\")\n    .attr(\"transform\", \"rotate(-65)\");\n\n//Add the y Axis\nsvg.append(\"g\")\n    .attr(\"class\", \"y axis axisGrey\")\n    .call(yAxis)\n    .selectAll(\"text\")\n    .style(\"text-anchor\", \"end\")\n    .attr(\"dx\", \"-.8em\")\n    .attr(\"dy\", \".15em\")\n    .style(\"font-size\", \"12px\")\n</code></pre>\n\n<p>And my csv file where i get the data is this:</p>\n\n<p>DATE,DDDM01USA156NWDB,year,Dato\n1/1/1984,42.5146,1984,0\n1/1/1985,44.873,1985,0\n1/1/1986,52.5561,1986,0\n1/1/1987,52.3852,1987,0\n1/1/1988,50.667,1988,0\n1/1/1989,54.6595,1989,0\n1/1/1990,54.5632,1990,160\n1/1/1991,58.7687,1991,160\n1/1/1992,66.732,1992,0\n1/1/1993,71.4563,1993,0\n1/1/1994,71.3222,1994,0\n1/1/1995,79.144,1995,0\n1/1/1996,95.619,1996,0\n1/1/1997,112.103,1997,0\n1/1/1998,130.576,1998,0\n1/1/1999,143.673,1999,0\n1/1/2000,146.193,2000,0\n1/1/2001,138.332,2001,160\n1/1/2002,114.902,2002,0\n1/1/2003,110.685,2003,0\n1/1/2004,125.554,2004,0\n1/1/2005,128.392,2005,0\n1/1/2006,133.386,2006,0\n1/1/2007,137.361,2007,160\n1/1/2008,109.698,2008,160\n1/1/2009,92.9573,2009,160\n1/1/2010,108.321,2010,0\n1/1/2011,107.384,2011,0\n1/1/2012,107.025,2012,0\n1/1/2013,128.708,2013,0\n1/1/2014,146.209,2014,0\n1/1/2015,142.648,2015,0\n1/1/2016,141.286,2016,0\n1/1/2017,153.96,2017,0</p>\n"}, {"tags": ["javascript", "glsl", "webgl"], "comments": [{"owner": {"reputation": 624, "user_id": 1558425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f36a711ac1cc8c7989949f564dac178a?s=128&d=identicon&r=PG", "display_name": "whydoubt", "link": "https://stackoverflow.com/users/1558425/whydoubt"}, "edited": false, "score": 0, "creation_date": 1567045484, "post_id": 57699322, "comment_id": 101847897, "body": "I have been looking this, and have made some good progress.  After considering the link regarding snippets, I may hold off answering until it is made into a snippet."}, {"owner": {"reputation": 2941, "user_id": 3537002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ycVyB.png?s=128&g=1", "display_name": "Robot", "link": "https://stackoverflow.com/users/3537002/robot"}, "reply_to_user": {"reputation": 82151, "user_id": 128511, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/KwGaJ.png?s=128&g=1", "display_name": "gman", "link": "https://stackoverflow.com/users/128511/gman"}, "edited": false, "score": 0, "creation_date": 1567047501, "post_id": 57699322, "comment_id": 101848247, "body": "@gman thanks for the snippet recommendation - I wasn&#39;t aware of them!  I added a snippet as per your request.  Do you have any thoughts on the code?"}], "answers": [{"comments": [{"owner": {"reputation": 624, "user_id": 1558425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f36a711ac1cc8c7989949f564dac178a?s=128&d=identicon&r=PG", "display_name": "whydoubt", "link": "https://stackoverflow.com/users/1558425/whydoubt"}, "edited": false, "score": 0, "creation_date": 1567084565, "post_id": 57704283, "comment_id": 101864258, "body": "One thing that helps me (and apparently you, based on your code) with these kind of questions is checking for compiler errors.  Just thought this would be a good thing to point out as it is a very useful debugging technique."}, {"owner": {"reputation": 624, "user_id": 1558425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f36a711ac1cc8c7989949f564dac178a?s=128&d=identicon&r=PG", "display_name": "whydoubt", "link": "https://stackoverflow.com/users/1558425/whydoubt"}, "edited": false, "score": 0, "creation_date": 1567084669, "post_id": 57704283, "comment_id": 101864329, "body": "The code changes you mentioned in the answer were all correct, but your snippet still doesn&#39;t work quite right.  You need to set <code>img[i + 1] = i*4;</code> and <code>img[i + 3] = 65535;</code> in the for loop."}, {"owner": {"reputation": 82151, "user_id": 128511, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/KwGaJ.png?s=128&g=1", "display_name": "gman", "link": "https://stackoverflow.com/users/128511/gman"}, "reply_to_user": {"reputation": 624, "user_id": 1558425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f36a711ac1cc8c7989949f564dac178a?s=128&d=identicon&r=PG", "display_name": "whydoubt", "link": "https://stackoverflow.com/users/1558425/whydoubt"}, "edited": false, "score": 0, "creation_date": 1567087503, "post_id": 57704283, "comment_id": 101866103, "body": "strange, I originally had those changes but must not have picked &quot;save&quot;. Thanks for pointing it out. As for checking for compiler errors I agree 100%. I just assume the questioner was going for a <i>minimal</i> example though if it was me I&#39;d have left the checking in (like I did above)"}, {"owner": {"reputation": 2941, "user_id": 3537002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ycVyB.png?s=128&g=1", "display_name": "Robot", "link": "https://stackoverflow.com/users/3537002/robot"}, "edited": false, "score": 1, "creation_date": 1567103428, "post_id": 57704283, "comment_id": 101873726, "body": "@gman Thank you, I am blown away by the level of detail in your answer - tremendously helpful from a learning perspective.  This really clears up my confusion between v1 and v2 shader syntax and I would never have caught these compatibility issues on my own.  Thanks again!"}, {"owner": {"reputation": 82151, "user_id": 128511, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/KwGaJ.png?s=128&g=1", "display_name": "gman", "link": "https://stackoverflow.com/users/128511/gman"}, "reply_to_user": {"reputation": 2941, "user_id": 3537002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ycVyB.png?s=128&g=1", "display_name": "Robot", "link": "https://stackoverflow.com/users/3537002/robot"}, "edited": false, "score": 0, "creation_date": 1567109606, "post_id": 57704283, "comment_id": 101876059, "body": "@FEA5T, you might have gotten clues by checking the JavaScript console. It should have at least told you your texture was not usable. Running your snippet with just the texture changed tells you about the NEAREST issue. Fixing that gets an error about samplers not matching (sampler2D vs usampler2D) so you&#39;d at least have gotten some clues where to look."}, {"owner": {"reputation": 2941, "user_id": 3537002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ycVyB.png?s=128&g=1", "display_name": "Robot", "link": "https://stackoverflow.com/users/3537002/robot"}, "edited": false, "score": 0, "creation_date": 1567120992, "post_id": 57704283, "comment_id": 101879132, "body": "@gman I was on top of the console but didn&#39;t know to log compile errors.  One of the things that has made webgl difficult is the lack of debugging capability.  For example, now I am trying to move from RGBA16UI to R16UI and I can&#39;t find any information about what 4 points are contained in a uvec4 texture(...) lookup call.  Do you know why a uvec4 would be returned on a single channel lookup call?"}, {"owner": {"reputation": 82151, "user_id": 128511, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/KwGaJ.png?s=128&g=1", "display_name": "gman", "link": "https://stackoverflow.com/users/128511/gman"}, "edited": false, "score": 0, "creation_date": 1567134769, "post_id": 57704283, "comment_id": 101881366, "body": "The hint is the R in R16UI. The data is in the <code>r</code> channel as in <code>float data = texture(someSampler, someTexcoords).r;</code> The other 3 channels, g, b, a, are either undefined or 0 or 1 (don&#39;t remember of the top of my head). Regardless the R stands for RED. You might find <a href=\"https://webgl2fundamentals.org\" rel=\"nofollow noreferrer\">these tutorials</a> helpful"}, {"owner": {"reputation": 108, "user_id": 1469613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c41300d2ebb086e43b067a533933a21d?s=128&d=identicon&r=PG", "display_name": "A. Mort", "link": "https://stackoverflow.com/users/1469613/a-mort"}, "edited": false, "score": 0, "creation_date": 1598795974, "post_id": 57704283, "comment_id": 112568443, "body": "@gman Would you recommend using a webgl2d library like <a href=\"https://github.com/pixijs/pixi.js\" rel=\"nofollow noreferrer\">PixiJS</a> or just working with the &#39;native&#39; code as you have here?"}, {"owner": {"reputation": 108, "user_id": 1469613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c41300d2ebb086e43b067a533933a21d?s=128&d=identicon&r=PG", "display_name": "A. Mort", "link": "https://stackoverflow.com/users/1469613/a-mort"}, "edited": false, "score": 0, "creation_date": 1598933392, "post_id": 57704283, "comment_id": 112609196, "body": "@gman What does the following line actually do?   pixelCoordinate = vertex.xy*0.5+0.5;"}, {"owner": {"reputation": 82151, "user_id": 128511, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/KwGaJ.png?s=128&g=1", "display_name": "gman", "link": "https://stackoverflow.com/users/128511/gman"}, "reply_to_user": {"reputation": 108, "user_id": 1469613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c41300d2ebb086e43b067a533933a21d?s=128&d=identicon&r=PG", "display_name": "A. Mort", "link": "https://stackoverflow.com/users/1469613/a-mort"}, "edited": false, "score": 1, "creation_date": 1598961843, "post_id": 57704283, "comment_id": 112620291, "body": "@A.Mort it&#39;s generating a texture coordinate from the position data. This only works because we know the position data is a quad that goes from -1 to 1 in each direction so * 0.5 + 0.5 makes the values go from 0 to 1 which is what we need reference the texture to draw an image. In the general case you&#39;d provide texture coordinates as a separate attribute but for this particular case they are not needed."}], "tags": [], "owner": {"reputation": 82151, "user_id": 128511, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/KwGaJ.png?s=128&g=1", "display_name": "gman", "link": "https://stackoverflow.com/users/128511/gman"}, "is_accepted": true, "score": 4, "last_activity_date": 1567087473, "last_edit_date": 1567087473, "creation_date": 1567060391, "answer_id": 57704283, "question_id": 57699322, "link": "https://stackoverflow.com/questions/57699322/webgl2-render-uint16array-to-canvas-as-an-image/57704283#57704283", "title": "WebGL2 render Uint16Array to canvas as an image", "body": "<p>If you want to put 16bit data into a texture you need to choose a 16bit texture internal format. Looking at <a href=\"https://webgl2fundamentals.org/webgl/lessons/webgl-data-textures.html\" rel=\"nofollow noreferrer\">the list of internal formats</a> your choices for RGBA are</p>\n\n<pre><code>gl.RGBA16I    // 16bit integers\ngl.RGBA16UI   // 16bit unsigned integers\ngl.RGBA16F    // 16bit half floats\n</code></pre>\n\n<p>It looks like you choose <code>gl.RGBA16UI</code></p>\n\n<p>To access that texture in the shader this line</p>\n\n<pre><code>uniform sampler2D tex;\n</code></pre>\n\n<p>has to change this this</p>\n\n<pre><code>uniform usampler2D tex;\n</code></pre>\n\n<p>That syntax is only available with GLSL 3.00 es so you need to add <code>#version 300 es</code> to the top of both shaders.</p>\n\n<p>Switching to <code>#version 300 es</code> also means <a href=\"https://webgl2fundamentals.org/webgl/lessons/webgl1-to-webgl2.html\" rel=\"nofollow noreferrer\">other syntax changes</a>. <code>attribute</code> becomes <code>in</code>, <code>varying</code> becomes <code>out</code> in a vertex shader and <code>in</code> in a fragment shader. <code>gl_FragColor</code> disappears and you have to declare your own output for example <code>out vec4 fooColor;</code>. Also <code>texture2D</code> becomes just <code>texture</code></p>\n\n<p>You can not using filtering on integer textures so these 2 lines</p>\n\n<pre><code>gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\ngl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n</code></pre>\n\n<p>need to change to </p>\n\n<pre><code>gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\ngl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n</code></pre>\n\n<p>And when you get data out of the texture it will be unsigned integers so this line</p>\n\n<pre><code>gl_FragColor = texture2D(tex, pixelCoordinate);\n</code></pre>\n\n<p>would end up changing to something like</p>\n\n<pre><code>out vec4 fooColor;  // named this fooColor to make it clear you pick the name\n\nvoid main() {\n  uvec4 unsignedIntValues = texture(tex, pixelCoordinate);\n  vec4 floatValues0To65535 = vec4(unsignedIntValues);  \n  vec4 colorValues0To1 = floatValues0To65535 / 65535.0;\n  fooColor = colorValues0To1;\n}\n</code></pre>\n\n<p>Of course you can shorten that math to a single line</p>\n\n<pre><code>  fooColor = vec4(texture(tex, pixelCoordinate)) / 65535.0;\n</code></pre>\n\n<p>Example:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>// image data\r\nvar w = 128;\r\nvar h = 128;\r\nvar size = w * h * 4;\r\nvar img = new Uint16Array(size); // need Uint16Array\r\nfor (var i = 0; i &lt; img.length; i += 4) {\r\n    img[i + 0] = 65535; // r\r\n    img[i + 1] = i/64 * 256; // g\r\n    img[i + 2] = 0; // b\r\n    img[i + 3] = 65535; // a\r\n}\r\n\r\n// program\r\nvar canvas = document.getElementById('cv');\r\nvar gl = canvas.getContext('webgl2');\r\n\r\nvar program = gl.createProgram();\r\n//var color_buffer_float_16ui = gl.getExtension('EXT_color_buffer_float'); // add for 16-bit\r\n\r\n// texture\r\nvar tex = gl.createTexture(); // create empty texture\r\ngl.bindTexture(gl.TEXTURE_2D, tex);\r\ngl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\r\ngl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\ngl.texImage2D(\r\n    gl.TEXTURE_2D, // target\r\n    0, // mip level\r\n    gl.RGBA16UI, // internal format -&gt; gl.RGBA16UI\r\n    w, h, // width and height\r\n    0, // border\r\n    gl.RGBA_INTEGER, //format -&gt; gm.RGBA_INTEGER\r\n    gl.UNSIGNED_SHORT, // type -&gt; gl.UNSIGNED_SHORT\r\n    img // texture data\r\n);\r\n\r\n// buffer\r\nvar buffer = gl.createBuffer();\r\nvar bufferData =  new Float32Array([\r\n    -1, -1,\r\n    1, -1,\r\n    1, 1,               \r\n    1, 1,\r\n    -1, 1,\r\n    -1, -1\r\n]);\r\ngl.bindBuffer(gl.ARRAY_BUFFER, buffer);\r\ngl.bufferData(gl.ARRAY_BUFFER, bufferData, gl.STATIC_DRAW);\r\n\r\n// shaders\r\nprogram.vs = gl.createShader(gl.VERTEX_SHADER);\r\ngl.shaderSource(program.vs, `#version 300 es\r\n  in vec4 vertex; // incoming pixel input?\r\n  out vec2 pixelCoordinate; // variable used to pass position to fragment shader\r\n  void main(){\r\n     gl_Position = vertex;  // set pixel output position to incoming position (pass through)\r\n     pixelCoordinate = vertex.xy*0.5+0.5; // set coordinate for fragment shader\r\n  }\r\n`);\r\n\r\nprogram.fs = gl.createShader(gl.FRAGMENT_SHADER);\r\ngl.shaderSource(program.fs, `#version 300 es\r\n  precision highp float; // ?\r\n  uniform highp usampler2D tex; // ?\r\n  in vec2 pixelCoordinate; // receive pixel position from vertex shader\r\n  out vec4 fooColor;\r\n  void main() {\r\n     uvec4 unsignedIntValues = texture(tex, pixelCoordinate);\r\n     vec4 floatValues0To65535 = vec4(unsignedIntValues);\r\n     vec4 colorValues0To1 = floatValues0To65535 / 65535.0;\r\n     fooColor = colorValues0To1;\r\n  }\r\n`);\r\n\r\ngl.compileShader(program.vs);\r\ncheckCompileError(program.vs);\r\ngl.compileShader(program.fs);\r\ncheckCompileError(program.fs);\r\n\r\nfunction checkCompileError(s) {\r\n  if (!gl.getShaderParameter(s, gl.COMPILE_STATUS)) {\r\n   console.error(gl.getShaderInfoLog(s));\r\n  }\r\n}\r\n\r\ngl.attachShader(program,program.vs);\r\ngl.attachShader(program,program.fs);\r\n\r\ngl.deleteShader(program.vs);\r\ngl.deleteShader(program.fs);\r\n\r\n// program\r\ngl.bindAttribLocation(program, 0, \"vertex\");\r\ngl.linkProgram(program);\r\ngl.useProgram(program);\r\ngl.enableVertexAttribArray(0);\r\ngl.vertexAttribPointer(0, 2, gl.FLOAT, false, 0, 0);\r\ngl.clear(gl.COLOR_BUFFER_BIT);\r\ngl.drawArrays(gl.TRIANGLES, 0, 6); // execute program</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;canvas id=\"cv\" width=\"100\" height=\"100\"&gt;&lt;/canvas&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 2941, "user_id": 3537002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ycVyB.png?s=128&g=1", "display_name": "Robot", "link": "https://stackoverflow.com/users/3537002/robot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 435, "favorite_count": 2, "accepted_answer_id": 57704283, "answer_count": 1, "score": 3, "last_activity_date": 1567087473, "creation_date": 1567022438, "last_edit_date": 1567047393, "question_id": 57699322, "link": "https://stackoverflow.com/questions/57699322/webgl2-render-uint16array-to-canvas-as-an-image", "title": "WebGL2 render Uint16Array to canvas as an image", "body": "<p>I am attempting to render a <code>Uint16Array</code> to an image in the browser using webgl2 textures.  I have a working example fiddle of a <code>Uint8Array</code> and am struggling with the upgrade to 16bit as webgl has a steep learning curve.</p>\n\n<p><strong>Working 8-bit fiddle (identical to snippet below):</strong> <code>Uint8Array</code> <a href=\"http://jsfiddle.net/njxvftc9/2/\" rel=\"nofollow noreferrer\">http://jsfiddle.net/njxvftc9/2/</a> \n<strong>Non-working 16-bit attempt:</strong> <code>Uint16Array</code> <a href=\"http://jsfiddle.net/njxvftc9/3/\" rel=\"nofollow noreferrer\">http://jsfiddle.net/njxvftc9/3/</a> </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>// image data\r\nvar w = 128;\r\nvar h = 128;\r\nvar size = w * h * 4;\r\nvar img = new Uint8Array(size); // need Uint16Array\r\nfor (var i = 0; i &lt; img.length; i += 4) {\r\n    img[i + 0] = 255; // r\r\n    img[i + 1] = i/64; // g\r\n    img[i + 2] = 0; // b\r\n    img[i + 3] = 255; // a\r\n}\r\n\r\n// program\r\nvar canvas = document.getElementById('cv');\r\nvar gl = canvas.getContext('webgl2');\r\n\r\nvar program = gl.createProgram();\r\n//var color_buffer_float_16ui = gl.getExtension('EXT_color_buffer_float'); // add for 16-bit\r\n\r\n// texture\r\nvar tex = gl.createTexture(); // create empty texture\r\ngl.bindTexture(gl.TEXTURE_2D, tex);\r\ngl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\ngl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\ngl.texImage2D(\r\n    gl.TEXTURE_2D, // target\r\n    0, // mip level\r\n    gl.RGBA, // internal format -&gt; gl.RGBA16UI\r\n    w, h, // width and height\r\n    0, // border\r\n    gl.RGBA, //format -&gt; gm.RGBA_INTEGER\r\n    gl.UNSIGNED_BYTE, // type -&gt; gl.UNSIGNED_SHORT\r\n    img // texture data\r\n);\r\n\r\n// buffer\r\nvar buffer = gl.createBuffer();\r\nvar bufferData =  new Float32Array([\r\n    -1, -1,\r\n    1, -1,\r\n    1, 1,               \r\n    1, 1,\r\n    -1, 1,\r\n    -1, -1\r\n]);\r\ngl.bindBuffer(gl.ARRAY_BUFFER, buffer);\r\ngl.bufferData(gl.ARRAY_BUFFER, bufferData, gl.STATIC_DRAW);\r\n\r\n// shaders\r\nprogram.vs = gl.createShader(gl.VERTEX_SHADER);\r\ngl.shaderSource(program.vs,\r\n                \"attribute vec4 vertex;\\n\" + // incoming pixel input?\r\n                \"varying vec2 pixelCoordinate;\\n\" + // variable used to pass position to fragment shader\r\n                \"void main(){\\n\" +\r\n                \" gl_Position = vertex;\\n\" + // set pixel output position to incoming position (pass through)\r\n                \" pixelCoordinate = vertex.xy*0.5+0.5;\\n\" + // set coordinate for fragment shader\r\n                \"}\\n\");\r\n\r\nprogram.fs = gl.createShader(gl.FRAGMENT_SHADER);\r\ngl.shaderSource(program.fs,\r\n                \"precision highp float;\\n\" + // ?\r\n                \"uniform sampler2D tex;\\n\" + // ?\r\n                \"varying vec2 pixelCoordinate;\\n\" + // receive pixel position from vertex shader\r\n                \"void main(){\\n\" +\r\n                \" gl_FragColor = texture2D(tex, pixelCoordinate);\\n\" + // lookup color in texture image at coordinate position and set color to\r\n                \"}\\n\");\r\n\r\ngl.compileShader(program.vs);\r\ngl.compileShader(program.fs);\r\n\r\ngl.attachShader(program,program.vs);\r\ngl.attachShader(program,program.fs);\r\n\r\ngl.deleteShader(program.vs);\r\ngl.deleteShader(program.fs);\r\n\r\n// program\r\ngl.bindAttribLocation(program, 0, \"vertex\");\r\ngl.linkProgram(program);\r\ngl.useProgram(program);\r\ngl.enableVertexAttribArray(0);\r\ngl.vertexAttribPointer(0, 2, gl.FLOAT, false, 0, 0);\r\ngl.clear(gl.COLOR_BUFFER_BIT);\r\ngl.drawArrays(gl.TRIANGLES, 0, 6); // execute program</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;canvas id=\"cv\" width=\"100\" height=\"100\"&gt;&lt;/canvas&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I have tried made many other techniques, referenced the spec, tried converting to floating point in the shaders, and have tried to combine methods seen here: <a href=\"https://stackoverflow.com/questions/51101023/render-to-16bits-unsigned-integer-2d-texture-in-webgl2\">Render to 16bits unsigned integer 2D texture in WebGL2</a> with no success.</p>\n\n<p>I prefer vanilla js but am open to using libraries such as twgl or three.js as long as the input is a <code>Uint16Array</code>, the shaders can output any format (float, etc).</p>\n\n<p>Can anyone with more experience in webgl2 point me in the right direction or provide a working sample fiddle here?  Is there a simple mistake in my code, am I missing a larger concept, is this even possible?  Any help is greatly appreciated!</p>\n"}, {"tags": ["javascript", "reactjs", "jestjs", "enzyme", "flowtype"], "comments": [{"owner": {"reputation": 597, "user_id": 11019282, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Q8d9dAu31cE/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOI_Rjd-085wlP9LnNo2t6Qx2SqvQ/mo/photo.jpg?sz=128", "display_name": "user 9191", "link": "https://stackoverflow.com/users/11019282/user-9191"}, "edited": false, "score": 0, "creation_date": 1567022899, "post_id": 57699305, "comment_id": 101842702, "body": "whats the error ?"}, {"owner": {"reputation": 13, "user_id": 10994719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7889246fad14334e6f76464452bea721?s=128&d=identicon&r=PG&f=1", "display_name": "Kadian5", "link": "https://stackoverflow.com/users/10994719/kadian5"}, "reply_to_user": {"reputation": 597, "user_id": 11019282, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Q8d9dAu31cE/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOI_Rjd-085wlP9LnNo2t6Qx2SqvQ/mo/photo.jpg?sz=128", "display_name": "user 9191", "link": "https://stackoverflow.com/users/11019282/user-9191"}, "edited": false, "score": 0, "creation_date": 1567023953, "post_id": 57699305, "comment_id": 101843077, "body": "it&#39;s actualy the warning, but there must be something wrong as it never showed up before &gt; Warning: React.createElement: type is invalid -- expected a string &gt; (for built-in components) or a class/function (for composite &gt; components) b ut got: object."}, {"owner": {"reputation": 14783, "user_id": 2071697, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a7d1ded508aa80214b01298b83562406?s=128&d=identicon&r=PG", "display_name": "skyboyer", "link": "https://stackoverflow.com/users/2071697/skyboyer"}, "edited": false, "score": 0, "creation_date": 1567024976, "post_id": 57699305, "comment_id": 101843473, "body": "but I don&#39;t see such an error in sandbox you&#39;ve provided"}, {"owner": {"reputation": 13, "user_id": 10994719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7889246fad14334e6f76464452bea721?s=128&d=identicon&r=PG&f=1", "display_name": "Kadian5", "link": "https://stackoverflow.com/users/10994719/kadian5"}, "edited": false, "score": 0, "creation_date": 1567049376, "post_id": 57699305, "comment_id": 101848579, "body": "there is no command line in the sandbox, so you can&#39;t run yarn run test"}, {"owner": {"reputation": 5156, "user_id": 5913838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0df3c4aaad3d579b91cc5b38d1819b2?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/5913838/alex"}, "edited": false, "score": 0, "creation_date": 1567104455, "post_id": 57699305, "comment_id": 101874118, "body": "why you mock <code>.&#47;styled</code>? I guess it&#39;s related"}, {"owner": {"reputation": 13, "user_id": 10994719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7889246fad14334e6f76464452bea721?s=128&d=identicon&r=PG&f=1", "display_name": "Kadian5", "link": "https://stackoverflow.com/users/10994719/kadian5"}, "edited": false, "score": 0, "creation_date": 1567149814, "post_id": 57699305, "comment_id": 101885163, "body": "it&#39;s not related, if I don&#39;t mock it I get the same error"}, {"owner": {"reputation": 738, "user_id": 11308639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f7eec43804701c198e03d8b4cfc790d?s=128&d=identicon&r=PG&f=1", "display_name": "user11307804", "link": "https://stackoverflow.com/users/11308639/user11307804"}, "edited": false, "score": 0, "creation_date": 1567200863, "post_id": 57699305, "comment_id": 101906808, "body": "Are you passing an object as a child somewhere? The error isn&#39;t related to Flow at all."}], "owner": {"reputation": 13, "user_id": 10994719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7889246fad14334e6f76464452bea721?s=128&d=identicon&r=PG&f=1", "display_name": "Kadian5", "link": "https://stackoverflow.com/users/10994719/kadian5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1567075953, "creation_date": 1567022363, "last_edit_date": 1567075953, "question_id": 57699305, "link": "https://stackoverflow.com/questions/57699305/unit-testing-of-react-component-with-flow-types", "title": "Unit testing of react component with flow types", "body": "<p>I am trying to unit test the component below but I am getting the following warning after running <code>yarn run test</code></p>\n\n<pre><code>&gt; Warning: React.createElement: type is invalid -- expected a string\n&gt; (for built-in components) or a class/function (for composite\n&gt; components) b ut got: object.\n</code></pre>\n\n<p>I'm using here React 16.8 with Flow and Jest and Enzyme as a testing framework</p>\n\n<p>I want to test that component</p>\n\n<pre><code>// @flow\n\nimport React from 'react'\nimport Button from './styled'\n\nexport type Props = {\n  +children: React$Node\n}\n\nconst ButtonDark = ({ children }: Props) =&gt; (\n  &lt;&gt;\n    &lt;Button&gt;{children}&lt;/Button&gt;\n  &lt;/&gt;\n)\n\nexport default ButtonDark\n\n</code></pre>\n\n<p>using this testing file:</p>\n\n<pre><code>import React from 'react'\nimport { shallow } from 'enzyme'\n\nimport ButtonDark from '.'\n\njest.mock('./styled', () =&gt; ({\n    Button: 'Button'\n}))\n\ndescribe('ButtonDark', () =&gt; {\n  it('renders', () =&gt; {\n\n    const wrapper = shallow(&lt;ButtonDark&gt;{'some children'}&lt;/ButtonDark&gt;)\n\n    expect(wrapper).toMatchSnapshot()\n  })\n})\n</code></pre>\n\n<p>Any ideas what can I do to fix it?</p>\n"}, {"tags": ["javascript", "node.js", "promise", "sequelize.js"], "comments": [{"owner": {"reputation": 1397, "user_id": 3975711, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/756de1bfefa4329d2d23dd5975c24306?s=128&d=identicon&r=PG&f=1", "display_name": "Sergii Vorobei", "link": "https://stackoverflow.com/users/3975711/sergii-vorobei"}, "edited": false, "score": 0, "creation_date": 1567022250, "post_id": 57699254, "comment_id": 101842408, "body": "Could you please provide the field names for Invoice model?"}, {"owner": {"reputation": 51, "user_id": 5935705, "user_type": "registered", "profile_image": "https://graph.facebook.com/1255508291132181/picture?type=large", "display_name": "Tian Qin", "link": "https://stackoverflow.com/users/5935705/tian-qin"}, "reply_to_user": {"reputation": 1397, "user_id": 3975711, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/756de1bfefa4329d2d23dd5975c24306?s=128&d=identicon&r=PG&f=1", "display_name": "Sergii Vorobei", "link": "https://stackoverflow.com/users/3975711/sergii-vorobei"}, "edited": false, "score": 0, "creation_date": 1567022387, "post_id": 57699254, "comment_id": 101842480, "body": "@Sergii Vorobei   const InvoicesModel = connection.define(&#39;invoices&#39;, {         invoice_id:{             primaryKey: true,             type: Sequalize.INTEGER,             allowNull: false,             autoIncrement: true,         },          team_id:{             type: Sequalize.UUID,             allowNull: false,         },          invoice_number:{             type: Sequalize.TEXT,             allowNull: false,         },"}, {"owner": {"reputation": 1397, "user_id": 3975711, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/756de1bfefa4329d2d23dd5975c24306?s=128&d=identicon&r=PG&f=1", "display_name": "Sergii Vorobei", "link": "https://stackoverflow.com/users/3975711/sergii-vorobei"}, "edited": false, "score": 1, "creation_date": 1567022574, "post_id": 57699254, "comment_id": 101842563, "body": "When you call <code>this.checkSingleInvoice</code> you pass <code>invoice.invoice_number</code> but inside of the function in the <code>findOne</code>, you use it as <code>invoice_id</code>. Can this be the root cause considering these are different fields?"}, {"owner": {"reputation": 51, "user_id": 5935705, "user_type": "registered", "profile_image": "https://graph.facebook.com/1255508291132181/picture?type=large", "display_name": "Tian Qin", "link": "https://stackoverflow.com/users/5935705/tian-qin"}, "reply_to_user": {"reputation": 1397, "user_id": 3975711, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/756de1bfefa4329d2d23dd5975c24306?s=128&d=identicon&r=PG&f=1", "display_name": "Sergii Vorobei", "link": "https://stackoverflow.com/users/3975711/sergii-vorobei"}, "edited": false, "score": 0, "creation_date": 1567022611, "post_id": 57699254, "comment_id": 101842583, "body": "@Sergii Vorobei data model should not be a problem, since I can insert the data into database whichout problem. The problem is I can find the data in database, even it is right there."}, {"owner": {"reputation": 51, "user_id": 5935705, "user_type": "registered", "profile_image": "https://graph.facebook.com/1255508291132181/picture?type=large", "display_name": "Tian Qin", "link": "https://stackoverflow.com/users/5935705/tian-qin"}, "reply_to_user": {"reputation": 1397, "user_id": 3975711, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/756de1bfefa4329d2d23dd5975c24306?s=128&d=identicon&r=PG&f=1", "display_name": "Sergii Vorobei", "link": "https://stackoverflow.com/users/3975711/sergii-vorobei"}, "edited": false, "score": 0, "creation_date": 1567023247, "post_id": 57699254, "comment_id": 101842828, "body": "@@Sergii Vorobei Yes, it is exactly the root cause. I am a idiot. Thank you sir."}, {"owner": {"reputation": 1397, "user_id": 3975711, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/756de1bfefa4329d2d23dd5975c24306?s=128&d=identicon&r=PG&f=1", "display_name": "Sergii Vorobei", "link": "https://stackoverflow.com/users/3975711/sergii-vorobei"}, "edited": false, "score": 0, "creation_date": 1567023328, "post_id": 57699254, "comment_id": 101842860, "body": "You are welcome!"}], "answers": [{"tags": [], "owner": {"reputation": 308, "user_id": 3083907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6PWX7.jpg?s=128&g=1", "display_name": "anthonygood", "link": "https://stackoverflow.com/users/3083907/anthonygood"}, "is_accepted": true, "score": 1, "last_activity_date": 1567023080, "creation_date": 1567023080, "answer_id": 57699445, "question_id": 57699254, "link": "https://stackoverflow.com/questions/57699254/why-sequelize-findone-is-not-returning-the-result-while-i-can-see-the-result-i/57699445#57699445", "title": "Why sequelize.findOne() is not returning the result while I can see the result is in my DB", "body": "<p>I think your problem is that <code>checkInvoic</code> (sic) returns a <code>Promise</code>, but your conditional check doesn't account for this.</p>\n\n<p>There are two possible fixes:</p>\n\n<p><strong>1) Using <code>await</code></strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>if (await !this.checkInvoic(i)) {\n  this.saveInvoice(i)\n}\n</code></pre>\n\n<p><strong>2) Using <code>then</code>:</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>this.checkInvoic(i).then(exists =&gt; {\n  if (!exists) return this.saveInvoice()\n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 5935705, "user_type": "registered", "profile_image": "https://graph.facebook.com/1255508291132181/picture?type=large", "display_name": "Tian Qin", "link": "https://stackoverflow.com/users/5935705/tian-qin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 433, "favorite_count": 0, "accepted_answer_id": 57699445, "answer_count": 1, "score": 0, "last_activity_date": 1567023080, "creation_date": 1567022089, "question_id": 57699254, "link": "https://stackoverflow.com/questions/57699254/why-sequelize-findone-is-not-returning-the-result-while-i-can-see-the-result-i", "title": "Why sequelize.findOne() is not returning the result while I can see the result is in my DB", "body": "<p>I am trying to save some data to my database, but I have a condition, if the data is already exist don't insert it again.</p>\n\n<p>I created couple functions for this task. I can insert data into my database without any problem. But once I start adding this existing data checking condition, it looks like the findOne() function is always returning null even though I just add the data into DB.</p>\n\n<p>the highest level code to run insert into database, the saveInvoice(i) is working:</p>\n\n<pre><code>if (!this.checkInvoic(i)) {\n  this.saveInvoice(i)\n }\n</code></pre>\n\n<p>The code to check if invoice data already exist, the result should be something, but it is null:</p>\n\n<pre><code>checkInvoic(invoice) {\n  return this.checkSingleInvoice(invoice.team_id, \n    invoice.invoice_number)\n            .then((result) =&gt; {    // this result should be something.\n                if (result !== undefined) {\n                return resolve(true);\n            } else {\n                return resolve(false);\n            }\n            })\n    }\n</code></pre>\n\n<p>These are the functions dealing with sequelize:</p>\n\n<pre><code>create(invoice) {\n        return this.invoicesModel.create(invoice);\n    }\n\ncheckSingleInvoice(team_id, invoice_id) {\n        return this.invoicesModel.findOne({\n            where: {\n                invoice_id,\n                team_id,\n            }\n        })\n    }\n</code></pre>\n\n<p>I am expecting when I provide invoice.team_id and invoice.invoice_id into checkSingleInvoice() function it will return the result which is existing in DB, and return true in checkInvoice() function.\nBut when I ran it, the result in the line that I have a comment on, returned null. I am just wondering why?  Is that something I did wrong in Promise or Sequelize?</p>\n"}, {"tags": ["javascript", "asp.net-mvc", "typescript", "visual-studio", "import"], "answers": [{"comments": [{"owner": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "edited": false, "score": 0, "creation_date": 1567023011, "post_id": 57699249, "comment_id": 101842740, "body": "Thanks, omitting brackets fixed the problem! I think I&#39;ll have to read the TypeScript docs a bit more carefully to get a better idea of how this works."}], "tags": [], "owner": {"reputation": 13146, "user_id": 243192, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UmXVb.png?s=128&g=1", "display_name": "Rengers", "link": "https://stackoverflow.com/users/243192/rengers"}, "is_accepted": true, "score": 1, "last_activity_date": 1567022057, "creation_date": 1567022057, "answer_id": 57699249, "question_id": 57699222, "link": "https://stackoverflow.com/questions/57699222/how-to-use-two-js-in-typescript/57699249#57699249", "title": "How to use two.js in TypeScript", "body": "<p>You should be able to import it like this if you installed it into <code>node_modules</code>. The Typescript compiler will resolve the module by finding it in the node_modules folder.</p>\n\n<p>Because it is a default export, you must omit the brackets here.</p>\n\n<pre><code>import Two from \"two.js\"\n</code></pre>\n"}], "owner": {"reputation": 3792, "user_id": 1488067, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/8JllV.jpg?s=128&g=1", "display_name": "Lou", "link": "https://stackoverflow.com/users/1488067/lou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 634, "favorite_count": 0, "accepted_answer_id": 57699249, "answer_count": 1, "score": 0, "last_activity_date": 1567022274, "creation_date": 1567021906, "last_edit_date": 1567022274, "question_id": 57699222, "link": "https://stackoverflow.com/questions/57699222/how-to-use-two-js-in-typescript", "title": "How to use two.js in TypeScript", "body": "<p>I am using Visual Studio to write a ASP.NET MVC web application. I am also quite new to TypeScript, but I know C# and JavaScript so I don't have issues with the syntax.</p>\n\n<p>However I am completely confused with importing/referencing <strong>.js files</strong>, namely for the <a href=\"https://github.com/jonobr1/two.js\" rel=\"nofollow noreferrer\">two.js</a> library:</p>\n\n<p>One of the files (<a href=\"https://github.com/jonobr1/two.js/blob/dev/build/two.module.js\" rel=\"nofollow noreferrer\"><code>two.module.js</code></a>) seems to be annotated with JSDoc and ends with:</p>\n\n<pre><code>export default (this || window).Two;\n</code></pre>\n\n<p>so I am presuming it should be importable as an ES6 module, but how does this work with TypeScript?</p>\n\n<p>I tried using this:</p>\n\n<pre><code>import { Two } from \"../twojs/twojs.module.js\"\n</code></pre>\n\n<p>but I get an error (cannot find module <code>\"../twojs/twojs.module.js\"</code>, presumably because it's not a .ts file.</p>\n"}, {"tags": ["javascript", "quicksort"], "comments": [{"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1567026641, "post_id": 57699219, "comment_id": 101844118, "body": "One or more of the index compares should be <code>leftIndex &lt;= rightIndex</code> . There may be other issues."}], "answers": [{"tags": [], "owner": {"reputation": 132, "user_id": 5578255, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/HzEhd.jpg?s=128&g=1", "display_name": "noName", "link": "https://stackoverflow.com/users/5578255/noname"}, "is_accepted": false, "score": 0, "last_activity_date": 1567027313, "last_edit_date": 1567027313, "creation_date": 1567025058, "answer_id": 57699800, "question_id": 57699219, "link": "https://stackoverflow.com/questions/57699219/is-the-following-code-snippet-a-valid-implementation-of-quicksort/57699800#57699800", "title": "Is the following code snippet a valid implementation of QuickSort?", "body": "<p>First of all I wouldnt use a separate function just for swaping, this usually adds some overhead, you dont want that if it comes to large arrays.</p>\n\n<p>I tested your code after translating it to python and it seems like its not working correctly, its broken, trying to find the reason at the moment.</p>\n\n<p>EDIT :</p>\n\n<p>I changed the code a bit, leaving the basic structure and it now seems to work properly:</p>\n\n<p>(0) do </p>\n\n<pre><code>if (leftIndex &gt; rightIndex){\n        return array\n    }\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>if (leftIndex &gt;= rightIndex) {\n        return array\n    }\n</code></pre>\n\n<p>and add </p>\n\n<pre><code>if ((array.length &lt;= 2) &amp;&amp; (array[0] &lt; array[1])){\n        return array\n    }\n</code></pre>\n\n<p>right after it\n(this is rather pseudo code didnt test it in java (was python))</p>\n\n<p>the last block makes sure you leave the function once youre at the resursion end end not need to continue sorting the sub-array</p>\n\n<p>(1) set the pivot to the middle of the array this way you get the log() perfaormance, with length-1 quicksort is not quicker than any other</p>\n\n<p>(2) save the pivot in a local variable and not access it by index, the element behind the index might change</p>\n\n<p>(3) remove the last if statement <code>(array[finalPivotIndex] &gt; array[pivotIndex]) {</code> if you do the algorithm by hand on a simple array you see that this block actually changes back what you just did, this way you end up with a wrong result</p>\n\n<p>hope thats all I changed, here is my code (in Python, should be similar to read) so you can compare and troubleshoot :</p>\n\n<pre><code>import random\n\ndef Quicksort(array):\n    leftIndex = 0\n    rightIndex = len(array)-2\n\n\n    if(leftIndex &gt; rightIndex): #(0)\n        return array\n\n    if(len(array) &lt;= 2 and array[0] &lt; array[1]):#(0)\n        return array\n    pivotIndex = int(len(array)/2) #(1)\n    finalPivotIndex = pivotIndex\n\n    rightIndex = len(array)-1\n    pivot = array[pivotIndex] #(2)\n    while True:\n        while array[leftIndex] &lt; pivot: #(2)\n            leftIndex += 1\n        while array[rightIndex] &gt; pivot: #(2)\n            rightIndex -= 1\n        if leftIndex &lt; rightIndex:\n            array[leftIndex], array[rightIndex] = array[rightIndex], array[leftIndex] #swapping in python\n            #swapping alternative (without extra function) :\n            #tmp = array[leftiIndex]\n            #array[leftIndex] = array[rightIndex]\n            #array[rightIndex] = tmp\n            #this way you save the function-call-overhead and the problem of passing the whole array to ten function and back, this could hurt the performance quite a bit\n            print(array, pivot, leftIndex, rightIndex) #debugging / slows down quite a bit\n        else:\n            finalPivotIndex = leftIndex\n            break\n   # (3)\n   # if(array[finalPivotIndex] &gt; array[pivotIndex]):\n   #     array[finalPivotIndex], array[pivotIndex] = array[pivotIndex], array[finalPivotIndex]\n   #     print(array)\n\n    leftPivotArray = array[0:finalPivotIndex+1]\n    rightPivotArray = array[finalPivotIndex+1:]\n\n    sortedLeftArray = Quicksort(leftPivotArray)\n    sortedRightArray = Quicksort(rightPivotArray)\n    mergedArray = sortedLeftArray+sortedRightArray\n\n    return mergedArray\n\n#how I generated the array for testing\narray = []\nfor i in range(50):\n    array.append(i)\narray = random.sample(array, 50)\nqsorted = Quicksort(array)\narray.sort()\n#testing the function against the python-implementation  --&gt; returns true\nprint(qsorted == array)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 0, "last_activity_date": 1567049142, "last_edit_date": 1567049142, "creation_date": 1567047236, "answer_id": 57702379, "question_id": 57699219, "link": "https://stackoverflow.com/questions/57699219/is-the-following-code-snippet-a-valid-implementation-of-quicksort/57702379#57702379", "title": "Is the following code snippet a valid implementation of QuickSort?", "body": "<p>The code in the question appears to be a variation of Hoare partition scheme, but it's creating slices of an array, when it can just use swaps on the original array, and pass indexes to the quicksort function. If wanted, I can try to debug the question's code later, but in the meantime, here is an example of a conventional Hoare partition scheme that uses pre-increment and pre-decrement, and avoids stack overflow by only using recursion on the smaller partition, and looping back for the larger partition. On my system, using Chrome, it takes less than 2 seconds to sort the 10 million values.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function quicksort(a, lo, hi) {\r\n  while (lo &lt; hi){\r\n    var p = a[Math.floor(lo+(hi-lo)/2)];\r\n    var i = lo - 1;\r\n    var j = hi + 1;\r\n    var t;\r\n    while (true){\r\n      while (a[++i] &lt; p);\r\n      while (a[--j] &gt; p);\r\n      if (i &gt;= j)\r\n        break;\r\n      t = a[i];\r\n      a[i] = a[j];\r\n      a[j] = t;\r\n    }\r\n    if(j - lo &lt; hi - j){\r\n      quicksort(a, lo, j);\r\n      lo = j+1;\r\n    } else {\r\n      quicksort(a, j+1, hi);\r\n      hi = j;\r\n    }\r\n  }\r\n}\r\n\r\nvar arr = new Array(10000000)\r\nfor (i = 0; i &lt; arr.length; i++) {\r\n  arr[i] = parseInt(Math.random() * 1000000000);\r\n}\r\nconsole.time('measure');\r\nquicksort(arr, 0, arr.length-1);\r\nconsole.timeEnd('measure');\r\nfor (i = 1; i &lt; arr.length; i++) {\r\n  if(arr[i-1] &gt; arr[i]){\r\n    console.log('error');     \r\n    break;\r\n  }\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 21, "user_id": 11991069, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-khpI6PYLRgE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfkmcbqERY2G8r1c5BLzI_B2XfV4Q/photo.jpg?sz=128", "display_name": "Henrik Engelbrink", "link": "https://stackoverflow.com/users/11991069/henrik-engelbrink"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1567049142, "creation_date": 1567021897, "question_id": 57699219, "link": "https://stackoverflow.com/questions/57699219/is-the-following-code-snippet-a-valid-implementation-of-quicksort", "title": "Is the following code snippet a valid implementation of QuickSort?", "body": "<p>I'm currently digging into the theoretical field of algorithms for university and I've implemented a version of the Quicksort based on how I understood the algorithm works. After that I've compared it to existing solutions and my implementation seems to be different than the once I've found. Maybe some experience people can give me feedback on this:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function quicksort(array) {\r\n\tlet leftIndex = 0\r\n\tlet rightIndex = array.length - 2\r\n\tif (leftIndex &gt;= rightIndex) {\r\n\t\treturn array\r\n\t}\r\n\t\r\n\tlet pivotIndex = array.length - 1\r\n\tlet finalPivotIndex;\r\n\t\r\n\tdo {\r\n\t\twhile (array[leftIndex] &lt; array[pivotIndex]) {\r\n\t\t\tleftIndex++\r\n\t\t}\r\n\t\twhile (array[rightIndex] &gt; array[pivotIndex]) {\r\n\t\t\trightIndex--\r\n\t\t}\r\n\t\tif (leftIndex &lt; rightIndex) {\r\n\t\t\tarray = quickSwap(leftIndex, rightIndex, array)\r\n\t\t} else {\r\n\t\t\tfinalPivotIndex = leftIndex\r\n\t\t}\r\n\t} while (leftIndex &lt; rightIndex)\r\n\t\r\n\tif (array[finalPivotIndex] &gt; array[pivotIndex]) {\r\n\t\tarray = quickSwap(finalPivotIndex, pivotIndex, array)\r\n\t}\r\n\t\r\n\tlet leftPivotArray = array.slice(0, finalPivotIndex)\r\n\tlet rightPivotArray = array.slice(finalPivotIndex + 1)\r\n\t\r\n\tlet sortedLeftArray = quicksort(leftPivotArray)\r\n\tlet sortedRightArray = quicksort(rightPivotArray)\r\n\tlet mergedArray = sortedLeftArray.concat([array[finalPivotIndex]])\r\n\tmergedArray = mergedArray.concat(sortedRightArray)\r\n\treturn mergedArray\r\n}\r\n\r\nfunction quickSwap(firstIndex, secondIndex, array) {\r\n\tlet tmp = array[firstIndex]\r\n\tarray[firstIndex] = array[secondIndex]\r\n\tarray[secondIndex] = tmp\r\n\treturn array\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["javascript", "reactjs"], "comments": [{"owner": {"reputation": 14830, "user_id": 3757232, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kLzML.jpg?s=128&g=1", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/3757232/jared-smith"}, "edited": false, "score": 2, "creation_date": 1567022494, "post_id": 57699201, "comment_id": 101842524, "body": "The diagram is quite clear: when new props come in <code>getDerivedStateFromProps</code>, if defined, will be called. The state returned doesn&#39;t trigger a re-render: render hasn&#39;t happened yet. The state will then be fed through <code>shouldComponentUpdate</code> (again, if defined). <i>Then</i> render happens. Calling <code>setState</code> jumps straight to <code>shouldComponentUpdate</code>, there&#39;s no change in props."}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 14830, "user_id": 3757232, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kLzML.jpg?s=128&g=1", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/3757232/jared-smith"}, "edited": false, "score": 0, "creation_date": 1567022805, "post_id": 57699201, "comment_id": 101842665, "body": "@JaredSmith Actually I noticed that image could be misleading! <code>getDerivedStateFromProps</code> gets called even if you call <code>setState</code>."}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 14830, "user_id": 3757232, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kLzML.jpg?s=128&g=1", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/3757232/jared-smith"}, "edited": false, "score": 0, "creation_date": 1567022993, "post_id": 57699201, "comment_id": 101842731, "body": "@JaredSmith Aha, OP is using some old image, here the issue is corrected: <a href=\"http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/\" rel=\"nofollow noreferrer\">projects.wojtekmaj.pl/react-lifecycle-methods-diagram</a> (OPs image is for version 16.3)"}, {"owner": {"reputation": 3256, "user_id": 3706051, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/852c386b130849278c0a7483d5b2e196?s=128&d=identicon&r=PG&f=1", "display_name": "darKnight", "link": "https://stackoverflow.com/users/3706051/darknight"}, "reply_to_user": {"reputation": 14830, "user_id": 3757232, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/kLzML.jpg?s=128&g=1", "display_name": "Jared Smith", "link": "https://stackoverflow.com/users/3757232/jared-smith"}, "edited": false, "score": 0, "creation_date": 1567026203, "post_id": 57699201, "comment_id": 101843950, "body": "@JaredSmith : It is not immediately obvious that <code>getDerivedStateFromProps</code> will not cause re-rendering, given the history of React. <code>componentWillUpdate</code> too is (or was) called before <code>render</code>,  and using <code>setState</code> inside it causes infinite loop."}], "answers": [{"comments": [{"owner": {"reputation": 3256, "user_id": 3706051, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/852c386b130849278c0a7483d5b2e196?s=128&d=identicon&r=PG&f=1", "display_name": "darKnight", "link": "https://stackoverflow.com/users/3706051/darknight"}, "edited": false, "score": 0, "creation_date": 1567023311, "post_id": 57699329, "comment_id": 101842849, "body": "&quot;<code>getDerivedStateFromProps</code> does not inherently set a new state like <code>setState</code>&quot; - Well a new state <i>is</i> set when a new state object is returned!"}], "tags": [], "owner": {"reputation": 17181, "user_id": 53960, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/wzzhY.gif?s=128&g=1", "display_name": "pixeline", "link": "https://stackoverflow.com/users/53960/pixeline"}, "is_accepted": false, "score": 1, "last_activity_date": 1567022463, "creation_date": 1567022463, "answer_id": 57699329, "question_id": 57699201, "link": "https://stackoverflow.com/questions/57699201/methods-called-after-new-state-is-set-inside-a-react-component/57699329#57699329", "title": "Methods called after new state is set inside a React Component", "body": "<p><code>getDerivedStateFromProps</code> does not inherently set a new state like <code>setState</code>, and so, it does not cause re-rendering <em>per se</em>.</p>\n\n<p>Quoting <a href=\"https://stackoverflow.com/users/465887/dave-ceddia\">dave-ceddia</a> in his book \"Pure React\":</p>\n\n<blockquote>\n  <p><strong>static getDerivedStateFromProps(nextProps, prevState)</strong>: This is an opportunity to change the state based on the value of props, which can be useful for initialization. It\u2019s not used very frequently. Don\u2019t call setState here, but instead, return an object that represents the new state. This method must not have side effects. Also, don\u2019t forget the static keyword before this method or it won\u2019t work. Since this method is static, you can\u2019t access the this object.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 3256, "user_id": 3706051, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/852c386b130849278c0a7483d5b2e196?s=128&d=identicon&r=PG&f=1", "display_name": "darKnight", "link": "https://stackoverflow.com/users/3706051/darknight"}, "edited": false, "score": 0, "creation_date": 1567024086, "post_id": 57699344, "comment_id": 101843121, "body": "It&#39;s a bit confusing that <code>getDerivedStateFromProps</code> &#39;sets&#39; a new state like <code>setState</code> but yet doesn&#39;t cause re-rendering. In React world, we have always come to believe that setting new state should re-render the component.."}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 3256, "user_id": 3706051, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/852c386b130849278c0a7483d5b2e196?s=128&d=identicon&r=PG&f=1", "display_name": "darKnight", "link": "https://stackoverflow.com/users/3706051/darknight"}, "edited": false, "score": 0, "creation_date": 1567025114, "post_id": 57699344, "comment_id": 101843525, "body": "@maverick yep, but that is how it works. I will also update answer because it seems on the new react GDSFP is called even after you call setState"}, {"owner": {"reputation": 3256, "user_id": 3706051, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/852c386b130849278c0a7483d5b2e196?s=128&d=identicon&r=PG&f=1", "display_name": "darKnight", "link": "https://stackoverflow.com/users/3706051/darknight"}, "edited": false, "score": 0, "creation_date": 1567026486, "post_id": 57699344, "comment_id": 101844059, "body": "This behaviour is even more confusing! <code>getDerivedStateFromProps</code> not causing a re-render and overwriting state set by <code>setState</code> is kind of antipattern for React.. Wonder if React team gave this a very good thought!"}, {"owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "reply_to_user": {"reputation": 3256, "user_id": 3706051, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/852c386b130849278c0a7483d5b2e196?s=128&d=identicon&r=PG&f=1", "display_name": "darKnight", "link": "https://stackoverflow.com/users/3706051/darknight"}, "edited": false, "score": 0, "creation_date": 1567027145, "post_id": 57699344, "comment_id": 101844318, "body": "it will not overwrite though rather merge with old state, but yeah, these lifecycles can be tricky, that&#39;s why they say probably not to use GDSFP often."}], "tags": [], "owner": {"reputation": 17910, "user_id": 3963067, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1e536542e9baa5c52499d61fb64f51d3?s=128&d=identicon&r=PG&f=1", "display_name": "gmoniava", "link": "https://stackoverflow.com/users/3963067/gmoniava"}, "is_accepted": true, "score": 3, "last_activity_date": 1567027224, "last_edit_date": 1567027224, "creation_date": 1567022529, "answer_id": 57699344, "question_id": 57699201, "link": "https://stackoverflow.com/questions/57699201/methods-called-after-new-state-is-set-inside-a-react-component/57699344#57699344", "title": "Methods called after new state is set inside a React Component", "body": "<blockquote>\n  <p>Once setState is called, it re-renders the component. But what all\n  life cycle methods will be called (in correct order) when\n  re--rendering begins?</p>\n</blockquote>\n\n<p>Once <code>setState</code> is called, that \"period\" is called <strong>Updating</strong> on the screen shot you gave (but updating can also happen for new props as shown on the image), hence you should refer to that part of the image - it also shows which method comes after which.</p>\n\n<blockquote>\n  <p>If yes, won't the re-rendering cause getDerivedStateFromProps to be\n  called again, causing an infinite loop (assuming there is no condition\n  for props checking inside getDerivedStateFromProps)?</p>\n</blockquote>\n\n<p>No, it will not cause an infinite loop. Here is <a href=\"https://codesandbox.io/s/focused-frost-niw6b\" rel=\"nofollow noreferrer\">example</a> to demo that.\nHowever, it seems in later versions of react (<a href=\"http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/\" rel=\"nofollow noreferrer\">http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/</a>), GDSFP is called even after <code>setState</code>, so you may want to double think if unconditionally returning new state from it is what you want.</p>\n"}], "owner": {"reputation": 3256, "user_id": 3706051, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/852c386b130849278c0a7483d5b2e196?s=128&d=identicon&r=PG&f=1", "display_name": "darKnight", "link": "https://stackoverflow.com/users/3706051/darknight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 716, "favorite_count": 0, "accepted_answer_id": 57699344, "answer_count": 2, "score": 2, "last_activity_date": 1567027224, "creation_date": 1567021847, "question_id": 57699201, "link": "https://stackoverflow.com/questions/57699201/methods-called-after-new-state-is-set-inside-a-react-component", "title": "Methods called after new state is set inside a React Component", "body": "<p>So I am trying to understand the re-render lifecycle of React Components. Once <code>setState</code> is called, it re-renders the component. But what all life cycle methods will be called (in correct order) when re--rendering begins? \nBelow diagram from Dan Abramov is helpful, but it doesn't throw much light on the re-rendering phase of a React component. </p>\n\n<p><a href=\"https://i.stack.imgur.com/hvnin.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hvnin.jpg\" alt=\"React LifeCycle Methods\"></a></p>\n\n<p>If <code>getDerivedStateFromProps</code> returns a new state (thus 'setting' a new state like <code>setState</code>), does it cause re-rendering? If yes, won't the re-rendering cause <code>getDerivedStateFromProps</code> to be called again, causing an infinite loop (assuming there is no condition for props checking inside <code>getDerivedStateFromProps</code>)?</p>\n"}, {"tags": ["javascript", "reactjs", "components", "material-ui"], "comments": [{"owner": {"reputation": 1397, "user_id": 3975711, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/756de1bfefa4329d2d23dd5975c24306?s=128&d=identicon&r=PG&f=1", "display_name": "Sergii Vorobei", "link": "https://stackoverflow.com/users/3975711/sergii-vorobei"}, "edited": false, "score": 1, "creation_date": 1567022049, "post_id": 57699182, "comment_id": 101842331, "body": "In your code, there is only one <code>Card</code>. Could you please also provide the code which renders multiple cards to see how you manage the state."}, {"owner": {"reputation": 37, "user_id": 11972180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1d2bee1474f5e3df3b21dfe211081fb?s=128&d=identicon&r=PG&f=1", "display_name": "cpadilla", "link": "https://stackoverflow.com/users/11972180/cpadilla"}, "reply_to_user": {"reputation": 1397, "user_id": 3975711, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/756de1bfefa4329d2d23dd5975c24306?s=128&d=identicon&r=PG&f=1", "display_name": "Sergii Vorobei", "link": "https://stackoverflow.com/users/3975711/sergii-vorobei"}, "edited": false, "score": 0, "creation_date": 1567022258, "post_id": 57699182, "comment_id": 101842413, "body": "Yes, im mapping over an end point that reruns 6 objects.   &lt;div className=&#39;character-list grid-view&#39;&gt;       {users.map(user =&gt; (         &lt;HomePageCards {...user} key={user.id} /&gt;       ))}     &lt;/div&gt;"}, {"owner": {"reputation": 1397, "user_id": 3975711, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/756de1bfefa4329d2d23dd5975c24306?s=128&d=identicon&r=PG&f=1", "display_name": "Sergii Vorobei", "link": "https://stackoverflow.com/users/3975711/sergii-vorobei"}, "edited": false, "score": 0, "creation_date": 1567022364, "post_id": 57699182, "comment_id": 101842463, "body": "Are you mapping inside of HomePageCards component or outside in the parent component?"}, {"owner": {"reputation": 37, "user_id": 11972180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1d2bee1474f5e3df3b21dfe211081fb?s=128&d=identicon&r=PG&f=1", "display_name": "cpadilla", "link": "https://stackoverflow.com/users/11972180/cpadilla"}, "reply_to_user": {"reputation": 1397, "user_id": 3975711, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/756de1bfefa4329d2d23dd5975c24306?s=128&d=identicon&r=PG&f=1", "display_name": "Sergii Vorobei", "link": "https://stackoverflow.com/users/3975711/sergii-vorobei"}, "edited": false, "score": 0, "creation_date": 1567022467, "post_id": 57699182, "comment_id": 101842515, "body": "Mapping in the parent component."}, {"owner": {"reputation": 1397, "user_id": 3975711, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/756de1bfefa4329d2d23dd5975c24306?s=128&d=identicon&r=PG&f=1", "display_name": "Sergii Vorobei", "link": "https://stackoverflow.com/users/3975711/sergii-vorobei"}, "edited": false, "score": 0, "creation_date": 1567023274, "post_id": 57699182, "comment_id": 101842835, "body": "I have just created sample exampled and it works as expected, the only item which is clicked is expanded. Please check your styles, probably some bug is there. The code should work as expected as the value of the hook is different for every card and it should not affect other cards."}, {"owner": {"reputation": 37, "user_id": 11972180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1d2bee1474f5e3df3b21dfe211081fb?s=128&d=identicon&r=PG&f=1", "display_name": "cpadilla", "link": "https://stackoverflow.com/users/11972180/cpadilla"}, "reply_to_user": {"reputation": 1397, "user_id": 3975711, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/756de1bfefa4329d2d23dd5975c24306?s=128&d=identicon&r=PG&f=1", "display_name": "Sergii Vorobei", "link": "https://stackoverflow.com/users/3975711/sergii-vorobei"}, "edited": false, "score": 0, "creation_date": 1567024111, "post_id": 57699182, "comment_id": 101843132, "body": "Thank you, just cut out the style sheet to test and it worked! Appreciate your help!"}, {"owner": {"reputation": 3241, "user_id": 10641422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sVkT.png?s=128&g=1", "display_name": "Ido", "link": "https://stackoverflow.com/users/10641422/ido"}, "edited": false, "score": 0, "creation_date": 1567024494, "post_id": 57699182, "comment_id": 101843292, "body": "did you manage to make it work when they cards are displayed on row? I noticed it works properly only when the cards are displayed on column"}, {"owner": {"reputation": 1397, "user_id": 3975711, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/756de1bfefa4329d2d23dd5975c24306?s=128&d=identicon&r=PG&f=1", "display_name": "Sergii Vorobei", "link": "https://stackoverflow.com/users/3975711/sergii-vorobei"}, "edited": false, "score": 0, "creation_date": 1567024499, "post_id": 57699182, "comment_id": 101843293, "body": "You are welcome!"}, {"owner": {"reputation": 37, "user_id": 11972180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1d2bee1474f5e3df3b21dfe211081fb?s=128&d=identicon&r=PG&f=1", "display_name": "cpadilla", "link": "https://stackoverflow.com/users/11972180/cpadilla"}, "edited": false, "score": 0, "creation_date": 1567107650, "post_id": 57699182, "comment_id": 101875359, "body": "Yes, display flex on the incorrect container was the cause."}], "owner": {"reputation": 37, "user_id": 11972180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1d2bee1474f5e3df3b21dfe211081fb?s=128&d=identicon&r=PG&f=1", "display_name": "cpadilla", "link": "https://stackoverflow.com/users/11972180/cpadilla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 854, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567022424, "creation_date": 1567021734, "last_edit_date": 1567022424, "question_id": 57699182, "link": "https://stackoverflow.com/questions/57699182/expand-one-card-on-click", "title": "Expand one card on click", "body": "<p>Currently using Material-UI-React for the first time to build out cards that expand, the issue I'm running into is when I click on one card to expand, they all expand.How can I refactor my code to only allow the card that is clicked on to expand not affecting the others?</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const useStyles = makeStyles(theme =&gt; ({\r\n  card: {\r\n    maxWidth: 300\r\n  },\r\n  media: {\r\n    height: 0,\r\n    paddingTop: '56.25%' // 16:9\r\n  },\r\n  expand: {\r\n    transform: 'rotate(0deg)',\r\n    marginLeft: 'auto',\r\n    transition: theme.transitions.create('transform', {\r\n      duration: theme.transitions.duration.shortest\r\n    })\r\n  },\r\n  expandOpen: {\r\n    transform: 'rotate(180deg)'\r\n  }\r\n}));\r\n\r\nconst HomePageCards = props =&gt; {\r\n  console.log(props);\r\n  const classes = useStyles();\r\n  const [expanded, setExpanded] = React.useState(false);\r\n\r\n  function handleExpandClick() {\r\n    setExpanded(!expanded);\r\n  }\r\n  return (\r\n    &lt;Card className={classes.card}&gt;\r\n      &lt;CardHeader title={props.title} subheader={`User: ${props.username}`} /&gt;\r\n      &lt;CardMedia\r\n        className={classes.media}\r\n        image='https://source.unsplash.com/1600x900/?crafts'\r\n        title={props.title}\r\n      /&gt;\r\n      &lt;CardContent&gt;\r\n        &lt;Typography variant='body2' color='textSecondary' component='p'&gt;\r\n          {props.description}\r\n        &lt;/Typography&gt;\r\n      &lt;/CardContent&gt;\r\n      &lt;CardActions disableSpacing&gt;\r\n        &lt;IconButton\r\n          className={clsx(classes.expand, {\r\n            [classes.expandOpen]: expanded\r\n          })}\r\n          onClick={handleExpandClick}\r\n          aria-expanded={expanded}\r\n          aria-label='show more'\r\n        &gt;\r\n          &lt;ExpandMoreIcon /&gt;\r\n        &lt;/IconButton&gt;\r\n      &lt;/CardActions&gt;\r\n      &lt;Collapse in={expanded} timeout='auto' unmountOnExit&gt;\r\n        &lt;CardContent&gt;\r\n          &lt;Typography paragraph&gt;Method:&lt;/Typography&gt;\r\n          &lt;Typography paragraph&gt;\r\n            &lt;strong&gt;Step 1:&lt;/strong&gt;\r\n            {props.step_1}\r\n          &lt;/Typography&gt;\r\n          &lt;Typography paragraph&gt;\r\n            &lt;strong&gt;Step 2:&lt;/strong&gt;\r\n            {props.step_2}\r\n          &lt;/Typography&gt;\r\n          &lt;Typography paragraph&gt;\r\n            &lt;strong&gt;Step 3:&lt;/strong&gt;\r\n            {props.step_3}\r\n          &lt;/Typography&gt;\r\n          &lt;Typography&gt;\r\n            &lt;strong&gt;Step 4:&lt;/strong&gt;\r\n            {props.step_4}\r\n          &lt;/Typography&gt;\r\n          &lt;Typography&gt;\r\n            &lt;strong&gt;Step 5:&lt;/strong&gt;\r\n            {props.step_5}\r\n          &lt;/Typography&gt;\r\n        &lt;/CardContent&gt;\r\n      &lt;/Collapse&gt;\r\n    &lt;/Card&gt;\r\n  );\r\n};</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>import React, { useEffect, useState } from 'react';\r\nimport Axios from 'axios';\r\n\r\nimport HomePageCards from '../HomePageCards/HomePageCards';\r\n\r\nconst HomePage = props =&gt; {\r\n  const [users, setUsers] = useState([]);\r\n\r\n  useEffect(() =&gt; {\r\n    const token = localStorage.getItem('token');\r\n    Axios.get('https://bw-how-to.herokuapp.com/guides', {\r\n      headers: { authorization: token }\r\n    })\r\n      .then(res =&gt; {\r\n        // console.log('Data', res.data);\r\n        setUsers(res.data);\r\n      })\r\n      .catch(err =&gt; console.error(err));\r\n  }, []);\r\n\r\n  return (\r\n    &lt;div className='character-list grid-view'&gt;\r\n      {users.map(user =&gt; (\r\n        &lt;HomePageCards {...user} key={user.id} /&gt;\r\n      ))}\r\n    &lt;/div&gt;\r\n  );\r\n};\r\n\r\nexport default HomePage;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I looked around but can't seem to find the solution. Any suggestions or guidance would be greatly appreciated. Thank you in advance.</p>\n"}]